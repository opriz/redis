cscope 15 /data00/home/zhujian.zj/github/redis/src -q 0000027617 0003430534
	@acl.c

30 
	~"£rv”.h
"

31 
	~"sha256.h
"

32 
	~<fú.h
>

33 
	~<ùy³.h
>

39 
¿x
 *
	gU£rs
;

41 
u£r
 *
	gDeçuÉU£r
;

46 
li¡
 *
	gU£rsToLßd
;

53 
li¡
 *
	gACLLog
;

56 
	sACLC©egÜyI‹m
 {

57 cÚ¡ *
	mÇme
;

58 
ušt64_t
 
	mæag
;

59 } 
	gACLCommªdC©egÜ›s
[] = {

60 {"key¥aû", 
CMD_CATEGORY_KEYSPACE
},

61 {"»ad", 
CMD_CATEGORY_READ
},

62 {"wr™e", 
CMD_CATEGORY_WRITE
},

63 {"£t", 
CMD_CATEGORY_SET
},

64 {"sÜ‹d£t", 
CMD_CATEGORY_SORTEDSET
},

65 {"li¡", 
CMD_CATEGORY_LIST
},

66 {"hash", 
CMD_CATEGORY_HASH
},

67 {"¡ršg", 
CMD_CATEGORY_STRING
},

68 {"b™m­", 
CMD_CATEGORY_BITMAP
},

69 {"hy³¾oglog", 
CMD_CATEGORY_HYPERLOGLOG
},

70 {"geo", 
CMD_CATEGORY_GEO
},

71 {"¡»am", 
CMD_CATEGORY_STREAM
},

72 {"pubsub", 
CMD_CATEGORY_PUBSUB
},

73 {"admš", 
CMD_CATEGORY_ADMIN
},

74 {"ç¡", 
CMD_CATEGORY_FAST
},

75 {"¦ow", 
CMD_CATEGORY_SLOW
},

76 {"blockšg", 
CMD_CATEGORY_BLOCKING
},

77 {"dªg”ous", 
CMD_CATEGORY_DANGEROUS
},

78 {"cÚÃùiÚ", 
CMD_CATEGORY_CONNECTION
},

79 {"Œª§ùiÚ", 
CMD_CATEGORY_TRANSACTION
},

80 {"sütšg", 
CMD_CATEGORY_SCRIPTING
},

81 {
NULL
,0}

84 
	sACLU£rFÏg
 {

85 cÚ¡ *
	mÇme
;

86 
ušt64_t
 
	mæag
;

87 } 
	gACLU£rFÏgs
[] = {

88 {"Ú", 
USER_FLAG_ENABLED
},

89 {"off", 
USER_FLAG_DISABLED
},

90 {"®lkeys", 
USER_FLAG_ALLKEYS
},

91 {"®lcommªds", 
USER_FLAG_ALLCOMMANDS
},

92 {"nİass", 
USER_FLAG_NOPASS
},

93 {
NULL
,0}

96 
ACLRe£tSubcommªdsFÜCommªd
(
u£r
 *
u
, 
id
);

97 
ACLRe£tSubcommªds
(
u£r
 *
u
);

98 
ACLAddAÎowedSubcommªd
(
u£r
 *
u
, 
id
, cÚ¡ *
sub
);

99 
ACLF»eLogEÁry
(*
Ë
);

102 
	#HASH_PASSWORD_LEN
 
SHA256_BLOCK_SIZE
*2

	)

117 
	$time_šd•’d’t_¡rcmp
(*
a
, *
b
) {

118 
buç
[
CONFIG_AUTHPASS_MAX_LEN
], 
bufb
[CONFIG_AUTHPASS_MAX_LEN];

123 
®’
 = 
	`¡¾’
(
a
);

124 
bËn
 = 
	`¡¾’
(
b
);

125 
j
;

126 
diff
 = 0;

131 ià(
®’
 > (
buç
è|| 
bËn
 > (
bufb
))  1;

133 
	`mem£t
(
buç
,0,(bufa));

134 
	`mem£t
(
bufb
,0,(bufb));

137 
	`memıy
(
buç
,
a
,
®’
);

138 
	`memıy
(
bufb
,
b
,
bËn
);

142 
j
 = 0; j < (
buç
); j++) {

143 
diff
 |ğ(
buç
[
j
] ^ 
bufb
[j]);

146 
diff
 |ğ
®’
 ^ 
bËn
;

147  
diff
;

148 
	}
}

152 
sds
 
	$ACLHashPasswÜd
(*
ş—¹ext
, 
size_t
 
Ën
) {

153 
SHA256_CTX
 
ùx
;

154 
hash
[
SHA256_BLOCK_SIZE
];

155 
hex
[
HASH_PASSWORD_LEN
];

156 *
c£t
 = "0123456789abcdef";

158 
	`sha256_š™
(&
ùx
);

159 
	`sha256_upd©e
(&
ùx
,(*)
ş—¹ext
,
Ën
);

160 
	`sha256_fš®
(&
ùx
,
hash
);

162 
j
 = 0; j < 
SHA256_BLOCK_SIZE
; j++) {

163 
hex
[
j
*2] = 
c£t
[((
hash
[j]&0xF0)>>4)];

164 
hex
[
j
*2+1] = 
c£t
[(
hash
[j]&0xF)];

166  
	`sd¢ewËn
(
hex
,
HASH_PASSWORD_LEN
);

167 
	}
}

178 
	$ACLSŒšgHasS·ûs
(cÚ¡ *
s
, 
size_t
 
Ën
) {

179 
size_t
 
i
 = 0; i < 
Ën
; i++) {

180 ià(
	`is¥aû
(
s
[
i
]) || s[i] == 0)  1;

183 
	}
}

187 
ušt64_t
 
	$ACLG‘CommªdC©egÜyFÏgByName
(cÚ¡ *
Çme
) {

188 
j
 = 0; 
ACLCommªdC©egÜ›s
[j].
æag
 != 0; j++) {

189 ià(!
	`¡rÿ£cmp
(
Çme
,
ACLCommªdC©egÜ›s
[
j
].name)) {

190  
ACLCommªdC©egÜ›s
[
j
].
æag
;

194 
	}
}

198 
	$ACLLi¡M©chSds
(*
a
, *
b
) {

199  
	`sdscmp
(
a
,
b
) == 0;

200 
	}
}

203 
	$ACLLi¡F»eSds
(*
™em
) {

204 
	`sdsä“
(
™em
);

205 
	}
}

208 *
	$ACLLi¡DupSds
(*
™em
) {

209  
	`sdsdup
(
™em
);

210 
	}
}

217 
u£r
 *
	$ACLC»©eU£r
(cÚ¡ *
Çme
, 
size_t
 
Çm–’
) {

218 ià(
	`¿xFšd
(
U£rs
,(*)
Çme
,
Çm–’
è!ğ
¿xNÙFound
è 
NULL
;

219 
u£r
 *
u
 = 
	`zm®loc
((*u));

220 
u
->
Çme
 = 
	`sd¢ewËn
Òame,
Çm–’
);

221 
u
->
æags
 = 
USER_FLAG_DISABLED
;

222 
u
->
®lowed_subcommªds
 = 
NULL
;

223 
u
->
·sswÜds
 = 
	`li¡C»©e
();

224 
u
->
·‰”ns
 = 
	`li¡C»©e
();

225 
	`li¡S‘M©chM‘hod
(
u
->
·sswÜds
,
ACLLi¡M©chSds
);

226 
	`li¡S‘F»eM‘hod
(
u
->
·sswÜds
,
ACLLi¡F»eSds
);

227 
	`li¡S‘DupM‘hod
(
u
->
·sswÜds
,
ACLLi¡DupSds
);

228 
	`li¡S‘M©chM‘hod
(
u
->
·‰”ns
,
ACLLi¡M©chSds
);

229 
	`li¡S‘F»eM‘hod
(
u
->
·‰”ns
,
ACLLi¡F»eSds
);

230 
	`li¡S‘DupM‘hod
(
u
->
·‰”ns
,
ACLLi¡DupSds
);

231 
	`mem£t
(
u
->
®lowed_commªds
,0,(u->allowed_commands));

232 
	`¿xIn£¹
(
U£rs
,(*)
Çme
,
Çm–’
,
u
,
NULL
);

233  
u
;

234 
	}
}

240 
u£r
 *
	$ACLC»©eUÆškedU£r
() {

241 
u£ºame
[64];

242 
j
 = 0; ; j++) {

243 
	`¢´štf
(
u£ºame
,(u£ºame),"__çkeu£r:%d__",
j
);

244 
u£r
 *
çkeu£r
 = 
	`ACLC»©eU£r
(
u£ºame
,
	`¡¾’
(username));

245 ià(
çkeu£r
 =ğ
NULL
) ;

246 
»tv®
 = 
	`¿xRemove
(
U£rs
,(*è
u£ºame
,

247 
	`¡¾’
(
u£ºame
),
NULL
);

248 
	`£rv”As£¹
(
»tv®
 != 0);

249  
çkeu£r
;

251 
	}
}

255 
	$ACLF»eU£r
(
u£r
 *
u
) {

256 
	`sdsä“
(
u
->
Çme
);

257 
	`li¡R–—£
(
u
->
·sswÜds
);

258 
	`li¡R–—£
(
u
->
·‰”ns
);

259 
	`ACLRe£tSubcommªds
(
u
);

260 
	`zä“
(
u
);

261 
	}
}

266 
	$ACLF»eU£rAndKlCl›Ás
(
u£r
 *
u
) {

267 
li¡I‹r
 
li
;

268 
li¡Node
 *
Ê
;

269 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

270 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

271 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

272 ià(
c
->
u£r
 =ğ
u
) {

279 
c
->
u£r
 = 
DeçuÉU£r
;

280 
c
->
auth’tiÿ‹d
 = 0;

281 
	`ä“Cl›ÁAsync
(
c
);

284 
	`ACLF»eU£r
(
u
);

285 
	}
}

290 
	$ACLCİyU£r
(
u£r
 *
d¡
, u£¸*
¤c
) {

291 
	`li¡R–—£
(
d¡
->
·sswÜds
);

292 
	`li¡R–—£
(
d¡
->
·‰”ns
);

293 
d¡
->
·sswÜds
 = 
	`li¡Dup
(
¤c
->passwords);

294 
d¡
->
·‰”ns
 = 
	`li¡Dup
(
¤c
->patterns);

295 
	`memıy
(
d¡
->
®lowed_commªds
,
¤c
->allowed_commands,

296 (
d¡
->
®lowed_commªds
));

297 
d¡
->
æags
 = 
¤c
->flags;

298 
	`ACLRe£tSubcommªds
(
d¡
);

300 ià(
¤c
->
®lowed_subcommªds
) {

301 
j
 = 0; j < 
USER_COMMAND_BITS_COUNT
; j++) {

302 ià(
¤c
->
®lowed_subcommªds
[
j
]) {

303 
i
 = 0; 
¤c
->
®lowed_subcommªds
[
j
][i]; i++)

305 
	`ACLAddAÎowedSubcommªd
(
d¡
, 
j
,

306 
¤c
->
®lowed_subcommªds
[
j
][
i
]);

311 
	}
}

315 
	$ACLF»eU£rsS‘
(
¿x
 *
u£rs
) {

316 
	`¿xF»eW™hC®lback
(
u£rs
,((*)(*))
ACLF»eU£rAndKlCl›Ás
);

317 
	}
}

325 
	$ACLG‘CommªdB™CoÜdš©es
(
ušt64_t
 
id
, ušt64_ˆ*
wÜd
, ušt64_ˆ*
b™
) {

326 ià(
id
 >ğ
USER_COMMAND_BITS_COUNT
è 
C_ERR
;

327 *
wÜd
 = 
id
 / (
ušt64_t
) / 8;

328 *
b™
 = 1ULL << (
id
 % ((
ušt64_t
) * 8));

329  
C_OK
;

330 
	}
}

339 
	$ACLG‘U£rCommªdB™
(
u£r
 *
u
, 
id
) {

340 
ušt64_t
 
wÜd
, 
b™
;

341 ià(
	`ACLG‘CommªdB™CoÜdš©es
(
id
,&
wÜd
,&
b™
è=ğ
C_ERR
)  0;

342  (
u
->
®lowed_commªds
[
wÜd
] & 
b™
) != 0;

343 
	}
}

348 
	$ACLU£rCªExecu‹Futu»Commªds
(
u£r
 *
u
) {

349  
	`ACLG‘U£rCommªdB™
(
u
,
USER_COMMAND_BITS_COUNT
-1);

350 
	}
}

357 
	$ACLS‘U£rCommªdB™
(
u£r
 *
u
, 
id
, 
v®ue
) {

358 
ušt64_t
 
wÜd
, 
b™
;

359 ià(
v®ue
 =ğ0è
u
->
æags
 &ğ~
USER_FLAG_ALLCOMMANDS
;

360 ià(
	`ACLG‘CommªdB™CoÜdš©es
(
id
,&
wÜd
,&
b™
è=ğ
C_ERR
) ;

361 ià(
v®ue
)

362 
u
->
®lowed_commªds
[
wÜd
] |ğ
b™
;

364 
u
->
®lowed_commªds
[
wÜd
] &ğ~
b™
;

365 
	}
}

373 
	$ACLS‘U£rCommªdB™sFÜC©egÜy
(
u£r
 *
u
, cÚ¡ *
ÿ‹gÜy
, 
v®ue
) {

374 
ušt64_t
 
cæag
 = 
	`ACLG‘CommªdC©egÜyFÏgByName
(
ÿ‹gÜy
);

375 ià(!
cæag
è 
C_ERR
;

376 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
Üig_commªds
);

377 
diùEÁry
 *
de
;

378 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

379 
»disCommªd
 *
cmd
 = 
	`diùG‘V®
(
de
);

380 ià(
cmd
->
æags
 & 
CMD_MODULE
) ;

381 ià(
cmd
->
æags
 & 
cæag
) {

382 
	`ACLS‘U£rCommªdB™
(
u
,
cmd
->
id
,
v®ue
);

383 
	`ACLRe£tSubcommªdsFÜCommªd
(
u
,
cmd
->
id
);

386 
	`diùR–—£I‹¿tÜ
(
di
);

387  
C_OK
;

388 
	}
}

394 
	$ACLCouÁC©egÜyB™sFÜU£r
(
u£r
 *
u
, *
Ú
, *
off
,

395 cÚ¡ *
ÿ‹gÜy
)

397 
ušt64_t
 
cæag
 = 
	`ACLG‘CommªdC©egÜyFÏgByName
(
ÿ‹gÜy
);

398 ià(!
cæag
è 
C_ERR
;

400 *
Ú
 = *
off
 = 0;

401 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
Üig_commªds
);

402 
diùEÁry
 *
de
;

403 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

404 
»disCommªd
 *
cmd
 = 
	`diùG‘V®
(
de
);

405 ià(
cmd
->
æags
 & 
cæag
) {

406 ià(
	`ACLG‘U£rCommªdB™
(
u
,
cmd
->
id
))

407 (*
Ú
)++;

409 (*
off
)++;

412 
	`diùR–—£I‹¿tÜ
(
di
);

413  
C_OK
;

414 
	}
}

423 
sds
 
	$ACLDesüibeU£rCommªdRuËs
(
u£r
 *
u
) {

424 
sds
 
ruËs
 = 
	`sd£m±y
();

425 
add™ive
;

431 
u£r
 
fu
 = {0};

432 
u£r
 *
çkeu£r
 = &
fu
;

442 ià(
	`ACLU£rCªExecu‹Futu»Commªds
(
u
)) {

443 
add™ive
 = 0;

444 
ruËs
 = 
	`sdsÿt
(rules,"+@all ");

445 
	`ACLS‘U£r
(
çkeu£r
,"+@all",-1);

447 
add™ive
 = 1;

448 
ruËs
 = 
	`sdsÿt
(rules,"-@all ");

449 
	`ACLS‘U£r
(
çkeu£r
,"-@all",-1);

456 
j
 = 0; 
ACLCommªdC©egÜ›s
[j].
æag
 != 0; j++) {

457 
Ú
, 
off
;

458 
	`ACLCouÁC©egÜyB™sFÜU£r
(
u
,&
Ú
,&
off
,
ACLCommªdC©egÜ›s
[
j
].
Çme
);

459 ià((
add™ive
 && 
Ú
 > 
off
) || (!additive && off > on)) {

460 
sds
 
İ
 = 
	`sd¢ewËn
(
add™ive
 ? "+@" : "-@", 2);

461 
İ
 = 
	`sdsÿt
(İ,
ACLCommªdC©egÜ›s
[
j
].
Çme
);

462 
	`ACLS‘U£r
(
çkeu£r
,
İ
,-1);

463 
ruËs
 = 
	`sdsÿtsds
ÔuËs,
İ
);

464 
ruËs
 = 
	`sdsÿ’
(rules," ",1);

465 
	`sdsä“
(
İ
);

470 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
Üig_commªds
);

471 
diùEÁry
 *
de
;

472 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

473 
»disCommªd
 *
cmd
 = 
	`diùG‘V®
(
de
);

474 
u£rb™
 = 
	`ACLG‘U£rCommªdB™
(
u
,
cmd
->
id
);

475 
çkeb™
 = 
	`ACLG‘U£rCommªdB™
(
çkeu£r
,
cmd
->
id
);

476 ià(
u£rb™
 !ğ
çkeb™
) {

477 
ruËs
 = 
	`sdsÿ’
ÔuËs, 
u£rb™
 ? "+" : "-", 1);

478 
ruËs
 = 
	`sdsÿt
ÔuËs,
cmd
->
Çme
);

479 
ruËs
 = 
	`sdsÿ’
(rules," ",1);

480 
	`ACLS‘U£rCommªdB™
(
çkeu£r
,
cmd
->
id
,
u£rb™
);

484 ià(
u£rb™
 =ğ0 && 
u
->
®lowed_subcommªds
 &&

485 
u
->
®lowed_subcommªds
[
cmd
->
id
])

487 
j
 = 0; 
u
->
®lowed_subcommªds
[
cmd
->
id
][j]; j++) {

488 
ruËs
 = 
	`sdsÿ’
(rules,"+",1);

489 
ruËs
 = 
	`sdsÿt
ÔuËs,
cmd
->
Çme
);

490 
ruËs
 = 
	`sdsÿ’
(rules,"|",1);

491 
ruËs
 = 
	`sdsÿtsds
ÔuËs,
u
->
®lowed_subcommªds
[
cmd
->
id
][
j
]);

492 
ruËs
 = 
	`sdsÿ’
(rules," ",1);

496 
	`diùR–—£I‹¿tÜ
(
di
);

499 
	`sd¤ªge
(
ruËs
,0,-2);

505 ià(
	`memcmp
(
çkeu£r
->
®lowed_commªds
,

506 
u
->
®lowed_commªds
,

507 (
u
->
®lowed_commªds
)) != 0)

509 
	`£rv”Log
(
LL_WARNING
,

511 
ruËs
);

512 
	`£rv”Pªic
("No bitmap match in ACLDescribeUserCommandRules()");

514  
ruËs
;

515 
	}
}

523 
sds
 
	$ACLDesüibeU£r
(
u£r
 *
u
) {

524 
sds
 
»s
 = 
	`sd£m±y
();

527 
j
 = 0; 
ACLU£rFÏgs
[j].
æag
; j++) {

530 ià(
ACLU£rFÏgs
[
j
].
æag
 =ğ
USER_FLAG_ALLKEYS
 ||

531 
ACLU£rFÏgs
[
j
].
æag
 =ğ
USER_FLAG_ALLCOMMANDS
) ;

532 ià(
u
->
æags
 & 
ACLU£rFÏgs
[
j
].
æag
) {

533 
»s
 = 
	`sdsÿt
Ôes,
ACLU£rFÏgs
[
j
].
Çme
);

534 
»s
 = 
	`sdsÿ’
(res," ",1);

539 
li¡I‹r
 
li
;

540 
li¡Node
 *
Ê
;

541 
	`li¡Rewšd
(
u
->
·sswÜds
,&
li
);

542 (
Ê
 = 
	`li¡Next
(&
li
))) {

543 
sds
 
thi¥ass
 = 
	`li¡NodeV®ue
(
Ê
);

544 
»s
 = 
	`sdsÿ’
(res,"#",1);

545 
»s
 = 
	`sdsÿtsds
Ôes,
thi¥ass
);

546 
»s
 = 
	`sdsÿ’
(res," ",1);

550 ià(
u
->
æags
 & 
USER_FLAG_ALLKEYS
) {

551 
»s
 = 
	`sdsÿ’
(res,"~* ",3);

553 
	`li¡Rewšd
(
u
->
·‰”ns
,&
li
);

554 (
Ê
 = 
	`li¡Next
(&
li
))) {

555 
sds
 
thi¥©
 = 
	`li¡NodeV®ue
(
Ê
);

556 
»s
 = 
	`sdsÿ’
(res,"~",1);

557 
»s
 = 
	`sdsÿtsds
Ôes,
thi¥©
);

558 
»s
 = 
	`sdsÿ’
(res," ",1);

563 
sds
 
ruËs
 = 
	`ACLDesüibeU£rCommªdRuËs
(
u
);

564 
»s
 = 
	`sdsÿtsds
Ôes,
ruËs
);

565 
	`sdsä“
(
ruËs
);

566  
»s
;

567 
	}
}

572 
»disCommªd
 *
	$ACLLookupCommªd
(cÚ¡ *
Çme
) {

573 
»disCommªd
 *
cmd
;

574 
sds
 
sd¢ame
 = 
	`sd¢ew
(
Çme
);

575 
cmd
 = 
	`diùF‘chV®ue
(
£rv”
.
Üig_commªds
, 
sd¢ame
);

576 
	`sdsä“
(
sd¢ame
);

577  
cmd
;

578 
	}
}

582 
	$ACLRe£tSubcommªdsFÜCommªd
(
u£r
 *
u
, 
id
) {

583 ià(
u
->
®lowed_subcommªds
 && u->®lowed_subcommªds[
id
]) {

584 
i
 = 0; 
u
->
®lowed_subcommªds
[
id
][i]; i++)

585 
	`sdsä“
(
u
->
®lowed_subcommªds
[
id
][
i
]);

586 
	`zä“
(
u
->
®lowed_subcommªds
[
id
]);

587 
u
->
®lowed_subcommªds
[
id
] = 
NULL
;

589 
	}
}

594 
	$ACLRe£tSubcommªds
(
u£r
 *
u
) {

595 ià(
u
->
®lowed_subcommªds
 =ğ
NULL
) ;

596 
j
 = 0; j < 
USER_COMMAND_BITS_COUNT
; j++) {

597 ià(
u
->
®lowed_subcommªds
[
j
]) {

598 
i
 = 0; 
u
->
®lowed_subcommªds
[
j
][i]; i++)

599 
	`sdsä“
(
u
->
®lowed_subcommªds
[
j
][
i
]);

600 
	`zä“
(
u
->
®lowed_subcommªds
[
j
]);

603 
	`zä“
(
u
->
®lowed_subcommªds
);

604 
u
->
®lowed_subcommªds
 = 
NULL
;

605 
	}
}

610 
	$ACLAddAÎowedSubcommªd
(
u£r
 *
u
, 
id
, cÚ¡ *
sub
) {

613 ià(
u
->
®lowed_subcommªds
 =ğ
NULL
) {

614 
u
->
®lowed_subcommªds
 = 
	`zÿÎoc
(
USER_COMMAND_BITS_COUNT
 *

615 (
sds
*));

622 
™ems
 = 0;

623 ià(
u
->
®lowed_subcommªds
[
id
]) {

624 
u
->
®lowed_subcommªds
[
id
][
™ems
]) {

626 ià(!
	`¡rÿ£cmp
(
u
->
®lowed_subcommªds
[
id
][
™ems
],
sub
)) ;

627 
™ems
++;

632 
™ems
 += 2;

633 
u
->
®lowed_subcommªds
[
id
] = 
	`z»®loc
(u->allowed_subcommands[id],

634 (
sds
)*
™ems
);

635 
u
->
®lowed_subcommªds
[
id
][
™ems
-2] = 
	`sd¢ew
(
sub
);

636 
u
->
®lowed_subcommªds
[
id
][
™ems
-1] = 
NULL
;

637 
	}
}

717 
	$ACLS‘U£r
(
u£r
 *
u
, cÚ¡ *
İ
, 
ssize_t
 
İËn
) {

718 ià(
İËn
 =ğ-1èİËÀğ
	`¡¾’
(
İ
);

719 ià(!
	`¡rÿ£cmp
(
İ
,"on")) {

720 
u
->
æags
 |ğ
USER_FLAG_ENABLED
;

721 
u
->
æags
 &ğ~
USER_FLAG_DISABLED
;

722 } ià(!
	`¡rÿ£cmp
(
İ
,"off")) {

723 
u
->
æags
 |ğ
USER_FLAG_DISABLED
;

724 
u
->
æags
 &ğ~
USER_FLAG_ENABLED
;

725 } ià(!
	`¡rÿ£cmp
(
İ
,"allkeys") ||

726 !
	`¡rÿ£cmp
(
İ
,"~*"))

728 
u
->
æags
 |ğ
USER_FLAG_ALLKEYS
;

729 
	`li¡Em±y
(
u
->
·‰”ns
);

730 } ià(!
	`¡rÿ£cmp
(
İ
,"resetkeys")) {

731 
u
->
æags
 &ğ~
USER_FLAG_ALLKEYS
;

732 
	`li¡Em±y
(
u
->
·‰”ns
);

733 } ià(!
	`¡rÿ£cmp
(
İ
,"allcommands") ||

734 !
	`¡rÿ£cmp
(
İ
,"+@all"))

736 
	`mem£t
(
u
->
®lowed_commªds
,255,(u->allowed_commands));

737 
u
->
æags
 |ğ
USER_FLAG_ALLCOMMANDS
;

738 
	`ACLRe£tSubcommªds
(
u
);

739 } ià(!
	`¡rÿ£cmp
(
İ
,"nocommands") ||

740 !
	`¡rÿ£cmp
(
İ
,"-@all"))

742 
	`mem£t
(
u
->
®lowed_commªds
,0,(u->allowed_commands));

743 
u
->
æags
 &ğ~
USER_FLAG_ALLCOMMANDS
;

744 
	`ACLRe£tSubcommªds
(
u
);

745 } ià(!
	`¡rÿ£cmp
(
İ
,"nopass")) {

746 
u
->
æags
 |ğ
USER_FLAG_NOPASS
;

747 
	`li¡Em±y
(
u
->
·sswÜds
);

748 } ià(!
	`¡rÿ£cmp
(
İ
,"resetpass")) {

749 
u
->
æags
 &ğ~
USER_FLAG_NOPASS
;

750 
	`li¡Em±y
(
u
->
·sswÜds
);

751 } ià(
İ
[0] == '>' || op[0] == '#') {

752 
sds
 
Ãw·ss
;

753 ià(
İ
[0] == '>') {

754 
Ãw·ss
 = 
	`ACLHashPasswÜd
((*)
İ
+1,
İËn
-1);

756 ià(
İËn
 !ğ
HASH_PASSWORD_LEN
 + 1) {

757 
”ºo
 = 
EBADMSG
;

758  
C_ERR
;

765 
i
 = 1; i < 
HASH_PASSWORD_LEN
 + 1; i++) {

766 
c
 = 
İ
[
i
];

767 ià((
c
 < 'a' || c > 'f') && (c < '0' || c > '9')) {

768 
”ºo
 = 
EBADMSG
;

769  
C_ERR
;

772 
Ãw·ss
 = 
	`sd¢ewËn
(
İ
+1,
İËn
-1);

775 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
u
->
·sswÜds
,
Ãw·ss
);

777 ià(
Ê
 =ğ
NULL
)

778 
	`li¡AddNodeTa
(
u
->
·sswÜds
,
Ãw·ss
);

780 
	`sdsä“
(
Ãw·ss
);

781 
u
->
æags
 &ğ~
USER_FLAG_NOPASS
;

782 } ià(
İ
[0] == '<' || op[0] == '!') {

783 
sds
 
d–·ss
;

784 ià(
İ
[0] == '<') {

785 
d–·ss
 = 
	`ACLHashPasswÜd
((*)
İ
+1,
İËn
-1);

787 ià(
İËn
 !ğ
HASH_PASSWORD_LEN
 + 1) {

788 
”ºo
 = 
EBADMSG
;

789  
C_ERR
;

791 
d–·ss
 = 
	`sd¢ewËn
(
İ
+1,
İËn
-1);

793 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
u
->
·sswÜds
,
d–·ss
);

794 
	`sdsä“
(
d–·ss
);

795 ià(
Ê
) {

796 
	`li¡D–Node
(
u
->
·sswÜds
,
Ê
);

798 
”ºo
 = 
ENODEV
;

799  
C_ERR
;

801 } ià(
İ
[0] == '~') {

802 ià(
u
->
æags
 & 
USER_FLAG_ALLKEYS
) {

803 
”ºo
 = 
EEXIST
;

804  
C_ERR
;

806 ià(
	`ACLSŒšgHasS·ûs
(
İ
+1,
İËn
-1)) {

807 
”ºo
 = 
EINVAL
;

808  
C_ERR
;

810 
sds
 
Ãw·t
 = 
	`sd¢ewËn
(
İ
+1,
İËn
-1);

811 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
u
->
·‰”ns
,
Ãw·t
);

813 ià(
Ê
 =ğ
NULL
)

814 
	`li¡AddNodeTa
(
u
->
·‰”ns
,
Ãw·t
);

816 
	`sdsä“
(
Ãw·t
);

817 
u
->
æags
 &ğ~
USER_FLAG_ALLKEYS
;

818 } ià(
İ
[0] == '+' && op[1] != '@') {

819 ià(
	`¡rchr
(
İ
,'|'è=ğ
NULL
) {

820 ià(
	`ACLLookupCommªd
(
İ
+1è=ğ
NULL
) {

821 
”ºo
 = 
ENOENT
;

822  
C_ERR
;

824 
id
 = 
	`ACLG‘CommªdID
(
İ
+1);

825 
	`ACLS‘U£rCommªdB™
(
u
,
id
,1);

826 
	`ACLRe£tSubcommªdsFÜCommªd
(
u
,
id
);

829 *
cİy
 = 
	`z¡rdup
(
İ
+1);

830 *
sub
 = 
	`¡rchr
(
cİy
,'|');

831 
sub
[0] = '\0';

832 
sub
++;

836 ià(
	`ACLLookupCommªd
(
cİy
è=ğ
NULL
) {

837 
	`zä“
(
cİy
);

838 
”ºo
 = 
ENOENT
;

839  
C_ERR
;

841 
id
 = 
	`ACLG‘CommªdID
(
cİy
);

845 ià(
	`¡¾’
(
sub
) == 0) {

846 
	`zä“
(
cİy
);

847 
”ºo
 = 
EINVAL
;

848  
C_ERR
;

854 ià(
	`ACLG‘U£rCommªdB™
(
u
,
id
) == 1) {

855 
	`zä“
(
cİy
);

856 
”ºo
 = 
EBUSY
;

857  
C_ERR
;

861 
	`ACLAddAÎowedSubcommªd
(
u
,
id
,
sub
);

865 
	`ACLS‘U£rCommªdB™
(
u
,
id
,0);

866 
	`zä“
(
cİy
);

868 } ià(
İ
[0] == '-' && op[1] != '@') {

869 ià(
	`ACLLookupCommªd
(
İ
+1è=ğ
NULL
) {

870 
”ºo
 = 
ENOENT
;

871  
C_ERR
;

873 
id
 = 
	`ACLG‘CommªdID
(
İ
+1);

874 
	`ACLS‘U£rCommªdB™
(
u
,
id
,0);

875 
	`ACLRe£tSubcommªdsFÜCommªd
(
u
,
id
);

876 } ià((
İ
[0] == '+' || op[0] == '-') && op[1] == '@') {

877 
b™v®
 = 
İ
[0] == '+' ? 1 : 0;

878 ià(
	`ACLS‘U£rCommªdB™sFÜC©egÜy
(
u
,
İ
+2,
b™v®
è=ğ
C_ERR
) {

879 
”ºo
 = 
ENOENT
;

880  
C_ERR
;

882 } ià(!
	`¡rÿ£cmp
(
İ
,"reset")) {

883 
	`£rv”As£¹
(
	`ACLS‘U£r
(
u
,"»£ass",-1è=ğ
C_OK
);

884 
	`£rv”As£¹
(
	`ACLS‘U£r
(
u
,"»£tkeys",-1è=ğ
C_OK
);

885 
	`£rv”As£¹
(
	`ACLS‘U£r
(
u
,"off",-1è=ğ
C_OK
);

886 
	`£rv”As£¹
(
	`ACLS‘U£r
(
u
,"-@®l",-1è=ğ
C_OK
);

888 
”ºo
 = 
EINVAL
;

889  
C_ERR
;

891  
C_OK
;

892 
	}
}

896 *
	$ACLS‘U£rSŒšgE¼Ü
() {

897 *
”rmsg
 = "Wrong format";

898 ià(
”ºo
 =ğ
ENOENT
)

899 
”rmsg
 = "Unknown command or category‚ame in ACL";

900 ià(
”ºo
 =ğ
EINVAL
)

901 
”rmsg
 = "Syntaxƒrror";

902 ià(
”ºo
 =ğ
EBUSY
)

903 
”rmsg
 = "Adding‡ subcommand of‡ command‡lready fully "

906 ià(
”ºo
 =ğ
EEXIST
)

907 
”rmsg
 = "Adding‡…attern‡fterhe *…attern (orhe "

911 ià(
”ºo
 =ğ
ENODEV
)

912 
”rmsg
 = "The…assword you‡reryingo„emove fromhe user does "

914 ià(
”ºo
 =ğ
EBADMSG
)

915 
”rmsg
 = "The…assword hash must beƒxactly 64 characters‡nd contain "

917  
”rmsg
;

918 
	}
}

922 
	$ACLIn™DeçuÉU£r
() {

923 
DeçuÉU£r
 = 
	`ACLC»©eU£r
("default",7);

924 
	`ACLS‘U£r
(
DeçuÉU£r
,"+@all",-1);

925 
	`ACLS‘U£r
(
DeçuÉU£r
,"~*",-1);

926 
	`ACLS‘U£r
(
DeçuÉU£r
,"on",-1);

927 
	`ACLS‘U£r
(
DeçuÉU£r
,"nopass",-1);

928 
	}
}

931 
	$ACLIn™
() {

932 
U£rs
 = 
	`¿xNew
();

933 
U£rsToLßd
 = 
	`li¡C»©e
();

934 
ACLLog
 = 
	`li¡C»©e
();

935 
	`ACLIn™DeçuÉU£r
();

936 
£rv”
.
»quœ•ass
 = 
NULL
;

937 
	}
}

945 
	$ACLCheckU£rC»d’tŸls
(
robj
 *
u£ºame
,„obj *
·sswÜd
) {

946 
u£r
 *
u
 = 
	`ACLG‘U£rByName
(
u£ºame
->
±r
,
	`sd¦’
(username->ptr));

947 ià(
u
 =ğ
NULL
) {

948 
”ºo
 = 
ENOENT
;

949  
C_ERR
;

953 ià(
u
->
æags
 & 
USER_FLAG_DISABLED
) {

954 
”ºo
 = 
EINVAL
;

955  
C_ERR
;

960 ià(
u
->
æags
 & 
USER_FLAG_NOPASS
è 
C_OK
;

963 
li¡I‹r
 
li
;

964 
li¡Node
 *
Ê
;

965 
	`li¡Rewšd
(
u
->
·sswÜds
,&
li
);

966 
sds
 
hashed
 = 
	`ACLHashPasswÜd
(
·sswÜd
->
±r
,
	`sd¦’
(password->ptr));

967 (
Ê
 = 
	`li¡Next
(&
li
))) {

968 
sds
 
thi¥ass
 = 
	`li¡NodeV®ue
(
Ê
);

969 ià(!
	`time_šd•’d’t_¡rcmp
(
hashed
, 
thi¥ass
)) {

970 
	`sdsä“
(
hashed
);

971  
C_OK
;

974 
	`sdsä“
(
hashed
);

977 
”ºo
 = 
EINVAL
;

978  
C_ERR
;

979 
	}
}

987 
	$ACLAuth’tiÿ‹U£r
(
ş›Á
 *
c
, 
robj
 *
u£ºame
,„obj *
·sswÜd
) {

988 ià(
	`ACLCheckU£rC»d’tŸls
(
u£ºame
,
·sswÜd
è=ğ
C_OK
) {

989 
c
->
auth’tiÿ‹d
 = 1;

990 
c
->
u£r
 = 
	`ACLG‘U£rByName
(
u£ºame
->
±r
,
	`sd¦’
(username->ptr));

991 
	`moduËNÙifyU£rChªged
(
c
);

992  
C_OK
;

994 
	`addACLLogEÁry
(
c
,
ACL_DENIED_AUTH
,0,
u£ºame
->
±r
);

995  
C_ERR
;

997 
	}
}

1005 
	$ACLG‘CommªdID
(cÚ¡ *
cmdÇme
) {

1006 
¿x
 *
m­
 = 
NULL
;

1007 
Ãxtid
 = 0;

1009 
sds
 
low”Çme
 = 
	`sd¢ew
(
cmdÇme
);

1010 
	`sd¡Şow”
(
low”Çme
);

1011 ià(
m­
 =ğ
NULL
èm­ = 
	`¿xNew
();

1012 *
id
 = 
	`¿xFšd
(
m­
,(*)
low”Çme
,
	`sd¦’
(lowername));

1013 ià(
id
 !ğ
¿xNÙFound
) {

1014 
	`sdsä“
(
low”Çme
);

1015  ()
id
;

1017 
	`¿xIn£¹
(
m­
,(*)
low”Çme
,
	`¡¾’
(lowername),

1018 (*)
Ãxtid
,
NULL
);

1019 
	`sdsä“
(
low”Çme
);

1020 
thisid
 = 
Ãxtid
;

1021 
Ãxtid
++;

1031 ià(
Ãxtid
 =ğ
USER_COMMAND_BITS_COUNT
-1)‚extid++;

1032  
thisid
;

1033 
	}
}

1036 
u£r
 *
	$ACLG‘U£rByName
(cÚ¡ *
Çme
, 
size_t
 
Çm–’
) {

1037 *
myu£r
 = 
	`¿xFšd
(
U£rs
,(*)
Çme
,
Çm–’
);

1038 ià(
myu£r
 =ğ
¿xNÙFound
è 
NULL
;

1039  
myu£r
;

1040 
	}
}

1051 
	$ACLCheckCommªdP”m
(
ş›Á
 *
c
, *
keyidx±r
) {

1052 
u£r
 *
u
 = 
c
->user;

1053 
ušt64_t
 
id
 = 
c
->
cmd
->id;

1056 ià(
u
 =ğ
NULL
è 
ACL_OK
;

1059 ià(!(
u
->
æags
 & 
USER_FLAG_ALLCOMMANDS
) &&

1060 
c
->
cmd
->
´oc
 !ğ
authCommªd
)

1064 ià(
	`ACLG‘U£rCommªdB™
(
u
,
id
) == 0) {

1066 ià(
c
->
¬gc
 < 2 ||

1067 
u
->
®lowed_subcommªds
 =ğ
NULL
 ||

1068 
u
->
®lowed_subcommªds
[
id
] =ğ
NULL
)

1070  
ACL_DENIED_CMD
;

1073 
subid
 = 0;

1075 ià(
u
->
®lowed_subcommªds
[
id
][
subid
] =ğ
NULL
)

1076  
ACL_DENIED_CMD
;

1077 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,

1078 
u
->
®lowed_subcommªds
[
id
][
subid
]))

1080 
subid
++;

1087 ià(!(
c
->
u£r
->
æags
 & 
USER_FLAG_ALLKEYS
) &&

1088 (
c
->
cmd
->
g‘keys_´oc
 || c->cmd->
fœ¡key
))

1090 
numkeys
;

1091 *
keyidx
 = 
	`g‘KeysFromCommªd
(
c
->
cmd
,c->
¬gv
,c->
¬gc
,&
numkeys
);

1092 
j
 = 0; j < 
numkeys
; j++) {

1093 
li¡I‹r
 
li
;

1094 
li¡Node
 *
Ê
;

1095 
	`li¡Rewšd
(
u
->
·‰”ns
,&
li
);

1098 
m©ch
 = 0;

1099 (
Ê
 = 
	`li¡Next
(&
li
))) {

1100 
sds
 
·‰”n
 = 
	`li¡NodeV®ue
(
Ê
);

1101 
size_t
 
¶’
 = 
	`sd¦’
(
·‰”n
);

1102 
idx
 = 
keyidx
[
j
];

1103 ià(
	`¡ršgm©chËn
(
·‰”n
,
¶’
,
c
->
¬gv
[
idx
]->
±r
,

1104 
	`sd¦’
(
c
->
¬gv
[
idx
]->
±r
),0))

1106 
m©ch
 = 1;

1110 ià(!
m©ch
) {

1111 ià(
keyidx±r
è*keyidx±¸ğ
keyidx
[
j
];

1112 
	`g‘KeysF»eResuÉ
(
keyidx
);

1113  
ACL_DENIED_KEY
;

1116 
	`g‘KeysF»eResuÉ
(
keyidx
);

1121  
ACL_OK
;

1122 
	}
}

1146 
	$ACLAµ’dU£rFÜLßdšg
(
sds
 *
¬gv
, 
¬gc
, *
¬gc_”r
) {

1147 ià(
¬gc
 < 2 || 
	`¡rÿ£cmp
(
¬gv
[0],"user")) {

1148 ià(
¬gc_”r
) *argc_err = 0;

1149  
C_ERR
;

1154 
u£r
 *
çkeu£r
 = 
	`ACLC»©eUÆškedU£r
();

1156 
j
 = 2; j < 
¬gc
; j++) {

1157 ià(
	`ACLS‘U£r
(
çkeu£r
,
¬gv
[
j
],
	`sd¦’
×rgv[j])è=ğ
C_ERR
) {

1158 ià(
”ºo
 !ğ
ENOENT
) {

1159 
	`ACLF»eU£r
(
çkeu£r
);

1160 ià(
¬gc_”r
è*¬gc_”¸ğ
j
;

1161  
C_ERR
;

1167 
sds
 *
cİy
 = 
	`zm®loc
((sds)*
¬gc
);

1168 
j
 = 1; j < 
¬gc
; j++è
cİy
[j-1] = 
	`sdsdup
(
¬gv
[j]);

1169 
cİy
[
¬gc
-1] = 
NULL
;

1170 
	`li¡AddNodeTa
(
U£rsToLßd
,
cİy
);

1171 
	`ACLF»eU£r
(
çkeu£r
);

1172  
C_OK
;

1173 
	}
}

1178 
	$ACLLßdCÚfigu»dU£rs
() {

1179 
li¡I‹r
 
li
;

1180 
li¡Node
 *
Ê
;

1181 
	`li¡Rewšd
(
U£rsToLßd
,&
li
);

1182 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

1183 
sds
 *
aşruËs
 = 
	`li¡NodeV®ue
(
Ê
);

1184 
sds
 
u£ºame
 = 
aşruËs
[0];

1186 ià(
	`ACLSŒšgHasS·ûs
(
aşruËs
[0],
	`sd¦’
(aclrules[0]))) {

1187 
	`£rv”Log
(
LL_WARNING
,"Spaces‚ot‡llowed in ACL usernames");

1188  
C_ERR
;

1191 
u£r
 *
u
 = 
	`ACLC»©eU£r
(
u£ºame
,
	`sd¦’
(username));

1192 ià(!
u
) {

1193 
u
 = 
	`ACLG‘U£rByName
(
u£ºame
,
	`sd¦’
(username));

1194 
	`£rv”As£¹
(
u
 !ğ
NULL
);

1195 
	`ACLS‘U£r
(
u
,"reset",-1);

1199 
j
 = 1; 
aşruËs
[j]; j++) {

1200 ià(
	`ACLS‘U£r
(
u
,
aşruËs
[
j
],
	`sd¦’
×şruËs[j])è!ğ
C_OK
) {

1201 *
”rmsg
 = 
	`ACLS‘U£rSŒšgE¼Ü
();

1202 
	`£rv”Log
(
LL_WARNING
,"Error†oading ACL„ule '%s' for "

1204 
aşruËs
[
j
],aşruËs[0],
”rmsg
);

1205  
C_ERR
;

1211 ià(
u
->
æags
 & 
USER_FLAG_DISABLED
) {

1212 
	`£rv”Log
(
LL_NOTICE
, "The user '%s' is disabled (there is‚o "

1215 
aşruËs
[0]);

1218  
C_OK
;

1219 
	}
}

1244 
sds
 
	$ACLLßdFromFe
(cÚ¡ *
f’ame
) {

1245 
FILE
 *
å
;

1246 
buf
[1024];

1249 ià((
å
 = 
	`fİ’
(
f’ame
,"r")è=ğ
NULL
) {

1250 
sds
 
”rÜs
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1252 
f’ame
, 
	`¡»¼Ü
(
”ºo
));

1253  
”rÜs
;

1257 
sds
 
aşs
 = 
	`sd£m±y
();

1258 
	`fg‘s
(
buf
,(buf),
å
è!ğ
NULL
)

1259 
aşs
 = 
	`sdsÿt
×şs,
buf
);

1260 
	`fşo£
(
å
);

1263 
tÙlšes
;

1264 
sds
 *
lšes
, 
”rÜs
 = 
	`sd£m±y
();

1265 
lšes
 = 
	`sds¥l™Ën
(
aşs
,
	`¡¾’
×şs),"\n",1,&
tÙlšes
);

1266 
	`sdsä“
(
aşs
);

1270 
u£r
 *
çkeu£r
 = 
	`ACLC»©eUÆškedU£r
();

1275 
¿x
 *
Şd_u£rs
 = 
U£rs
;

1276 
u£r
 *
Şd_deçuÉ_u£r
 = 
DeçuÉU£r
;

1277 
U£rs
 = 
	`¿xNew
();

1278 
	`ACLIn™DeçuÉU£r
();

1281 
i
 = 0; i < 
tÙlšes
; i++) {

1282 
sds
 *
¬gv
;

1283 
¬gc
;

1284 
lš’um
 = 
i
+1;

1286 
lšes
[
i
] = 
	`sd¡rim
(lines[i]," \t\r\n");

1289 ià(
lšes
[
i
][0] == '\0') ;

1292 
¬gv
 = 
	`sds¥l™¬gs
(
lšes
[
i
],&
¬gc
);

1293 ià(
¬gv
 =ğ
NULL
) {

1294 
”rÜs
 = 
	`sdsÿrštf
(errors,

1296 
£rv”
.
aş_f’ame
, 
lš’um
);

1301 ià(
¬gc
 == 0) {

1302 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1307 ià(
	`¡rcmp
(
¬gv
[0],"u£r"è|| 
¬gc
 < 2) {

1308 
”rÜs
 = 
	`sdsÿrštf
(errors,

1310 "byhu£ºame. ", 
£rv”
.
aş_f’ame
,

1311 
lš’um
);

1312 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1317 ià(
	`ACLSŒšgHasS·ûs
(
¬gv
[1],
	`sd¦’
(argv[1]))) {

1318 
”rÜs
 = 
	`sdsÿrštf
(errors,

1320 
£rv”
.
aş_f’ame
, 
lš’um
, 
¬gv
[1]);

1326 
	`ACLS‘U£r
(
çkeu£r
,"reset",-1);

1327 
j
;

1328 
j
 = 2; j < 
¬gc
; j++) {

1329 ià(
	`ACLS‘U£r
(
çkeu£r
,
¬gv
[
j
],
	`sd¦’
×rgv[j])è!ğ
C_OK
) {

1330 *
”rmsg
 = 
	`ACLS‘U£rSŒšgE¼Ü
();

1331 
”rÜs
 = 
	`sdsÿrštf
(errors,

1333 
£rv”
.
aş_f’ame
, 
lš’um
, 
”rmsg
);

1341 ià(
	`sd¦’
(
”rÜs
) != 0) {

1342 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1348 
u£r
 *
u
 = 
	`ACLC»©eU£r
(
¬gv
[1],
	`sd¦’
(argv[1]));

1349 ià(!
u
) {

1350 
u
 = 
	`ACLG‘U£rByName
(
¬gv
[1],
	`sd¦’
(argv[1]));

1351 
	`£rv”As£¹
(
u
 !ğ
NULL
);

1352 
	`ACLS‘U£r
(
u
,"reset",-1);

1357 
j
 = 2; j < 
¬gc
; j++)

1358 
	`£rv”As£¹
(
	`ACLS‘U£r
(
u
,
¬gv
[
j
],
	`sd¦’
×rgv[j])è=ğ
C_OK
);

1360 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1363 
	`ACLF»eU£r
(
çkeu£r
);

1364 
	`sdsä“¥l™»s
(
lšes
,
tÙlšes
);

1365 
DeçuÉU£r
 = 
Şd_deçuÉ_u£r
;

1368 ià(
	`sd¦’
(
”rÜs
) == 0) {

1372 
u£r
 *
Ãw
 = 
	`ACLG‘U£rByName
("default",7);

1373 
	`£rv”As£¹
(
Ãw
 !ğ
NULL
);

1374 
	`ACLCİyU£r
(
DeçuÉU£r
,
Ãw
);

1375 
	`ACLF»eU£r
(
Ãw
);

1376 
	`¿xIn£¹
(
U£rs
,(*)"deçuÉ",7,
DeçuÉU£r
,
NULL
);

1377 
	`¿xRemove
(
Şd_u£rs
,(*)"deçuÉ",7,
NULL
);

1378 
	`ACLF»eU£rsS‘
(
Şd_u£rs
);

1379 
	`sdsä“
(
”rÜs
);

1380  
NULL
;

1382 
	`ACLF»eU£rsS‘
(
U£rs
);

1383 
U£rs
 = 
Şd_u£rs
;

1384 
”rÜs
 = 
	`sdsÿt
(errors,"WARNING: ACLƒrrors detected,‚o changeohe…reviously‡ctive ACL„ules was…erformed");

1385  
”rÜs
;

1387 
	}
}

1392 
	$ACLSaveToFe
(cÚ¡ *
f’ame
) {

1393 
sds
 
aş
 = 
	`sd£m±y
();

1394 
fd
 = -1;

1395 
sds
 
tmpf’ame
 = 
NULL
;

1396 
»tv®
 = 
C_ERR
;

1400 
¿xI‹¿tÜ
 
ri
;

1401 
	`¿xS¹
(&
ri
,
U£rs
);

1402 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

1403 
	`¿xNext
(&
ri
)) {

1404 
u£r
 *
u
 = 
ri
.
d©a
;

1406 
sds
 
u£r
 = 
	`sd¢ew
("user ");

1407 
u£r
 = 
	`sdsÿtsds
(u£r,
u
->
Çme
);

1408 
u£r
 = 
	`sdsÿ’
(user," ",1);

1409 
sds
 
desü
 = 
	`ACLDesüibeU£r
(
u
);

1410 
u£r
 = 
	`sdsÿtsds
(u£r,
desü
);

1411 
	`sdsä“
(
desü
);

1412 
aş
 = 
	`sdsÿtsds
×ş,
u£r
);

1413 
aş
 = 
	`sdsÿ’
(acl,"\n",1);

1414 
	`sdsä“
(
u£r
);

1416 
	`¿xStİ
(&
ri
);

1419 
tmpf’ame
 = 
	`sd¢ew
(
f’ame
);

1420 
tmpf’ame
 = 
	`sdsÿtfmt
(tmpfilename,".tmp-%i-%I",

1421 ()
	`g‘pid
(),()
	`m¡ime
());

1422 ià((
fd
 = 
	`İ’
(
tmpf’ame
,
O_WRONLY
|
O_CREAT
,0644)) == -1) {

1423 
	`£rv”Log
(
LL_WARNING
,"Openingemp ACL file for ACL SAVE: %s",

1424 
	`¡»¼Ü
(
”ºo
));

1425 
ş—nup
;

1429 ià(
	`wr™e
(
fd
,
aş
,
	`sd¦’
×ş)è!ğ(
ssize_t
)sdslen(acl)) {

1430 
	`£rv”Log
(
LL_WARNING
,"Writing ACL file for ACL SAVE: %s",

1431 
	`¡»¼Ü
(
”ºo
));

1432 
ş—nup
;

1434 
	`şo£
(
fd
); fd = -1;

1437 ià(
	`»Çme
(
tmpf’ame
,
f’ame
) == -1) {

1438 
	`£rv”Log
(
LL_WARNING
,"Renaming ACL file for ACL SAVE: %s",

1439 
	`¡»¼Ü
(
”ºo
));

1440 
ş—nup
;

1442 
	`sdsä“
(
tmpf’ame
);mpf’amğ
NULL
;

1443 
»tv®
 = 
C_OK
;

1445 
ş—nup
:

1446 ià(
fd
 !ğ-1è
	`şo£
(fd);

1447 ià(
tmpf’ame
è
	`uÆšk
(tmpfilename);

1448 
	`sdsä“
(
tmpf’ame
);

1449 
	`sdsä“
(
aş
);

1450  
»tv®
;

1451 
	}
}

1458 
	$ACLLßdU£rsAtS¹up
() {

1459 ià(
£rv”
.
aş_f’ame
[0] !ğ'\0' && 
	`li¡L’gth
(
U£rsToLßd
) != 0) {

1460 
	`£rv”Log
(
LL_WARNING
,

1466 
	`ex™
(1);

1469 ià(
	`ACLLßdCÚfigu»dU£rs
(è=ğ
C_ERR
) {

1470 
	`£rv”Log
(
LL_WARNING
,

1472 
	`ex™
(1);

1475 ià(
£rv”
.
aş_f’ame
[0] != '\0') {

1476 
sds
 
”rÜs
 = 
	`ACLLßdFromFe
(
£rv”
.
aş_f’ame
);

1477 ià(
”rÜs
) {

1478 
	`£rv”Log
(
LL_WARNING
,

1479 "AbÜtšg Redi ¡¬tu°beÿu£ oàACLƒ¼Üs: %s", 
”rÜs
);

1480 
	`sdsä“
(
”rÜs
);

1481 
	`ex™
(1);

1484 
	}
}

1490 
	#ACL_LOG_CTX_TOPLEVEL
 0

	)

1491 
	#ACL_LOG_CTX_LUA
 1

	)

1492 
	#ACL_LOG_CTX_MULTI
 2

	)

1493 
	#ACL_LOG_GROUPING_MAX_TIME_DELTA
 60000

	)

1496 
	sACLLogEÁry
 {

1497 
ušt64_t
 
	mcouÁ
;

1498 
	m»asÚ
;

1499 
	mcÚ‹xt
;

1500 
sds
 
	mobjeù
;

1501 
sds
 
	mu£ºame
;

1502 
m¡ime_t
 
	mùime
;

1503 
sds
 
	mcšfo
;

1504 } 
	tACLLogEÁry
;

1509 
	$ACLLogM©chEÁry
(
ACLLogEÁry
 *
a
, ACLLogEÁry *
b
) {

1510 ià(
a
->
»asÚ
 !ğ
b
->reason)  0;

1511 ià(
a
->
cÚ‹xt
 !ğ
b
->context)  0;

1512 
m¡ime_t
 
d–
 = 
a
->
ùime
 - 
b
->ctime;

1513 ià(
d–
 < 0) delta = -delta;

1514 ià(
d–
 > 
ACL_LOG_GROUPING_MAX_TIME_DELTA
)  0;

1515 ià(
	`sdscmp
(
a
->
objeù
,
b
->object) != 0)  0;

1516 ià(
	`sdscmp
(
a
->
u£ºame
,
b
->username) != 0)  0;

1518 
	}
}

1521 
	$ACLF»eLogEÁry
(*
Ë±r
) {

1522 
ACLLogEÁry
 *
Ë
 = 
Ë±r
;

1523 
	`sdsä“
(
Ë
->
objeù
);

1524 
	`sdsä“
(
Ë
->
u£ºame
);

1525 
	`sdsä“
(
Ë
->
cšfo
);

1526 
	`zä“
(
Ë
);

1527 
	}
}

1541 
	$addACLLogEÁry
(
ş›Á
 *
c
, 
»asÚ
, 
keypos
, 
sds
 
u£ºame
) {

1543 
ACLLogEÁry
 *
Ë
 = 
	`zm®loc
((*le));

1544 
Ë
->
couÁ
 = 1;

1545 
Ë
->
»asÚ
 =„eason;

1546 
Ë
->
u£ºame
 = 
	`sdsdup
(
»asÚ
 =ğ
ACL_DENIED_AUTH
 ? u£ºam: 
c
->
u£r
->
Çme
);

1547 
Ë
->
ùime
 = 
	`m¡ime
();

1549 
»asÚ
) {

1550 
ACL_DENIED_CMD
: 
Ë
->
objeù
 = 
	`sd¢ew
(
c
->
cmd
->
Çme
); ;

1551 
ACL_DENIED_KEY
: 
Ë
->
objeù
 = 
	`sd¢ew
(
c
->
¬gv
[
keypos
]->
±r
); ;

1552 
ACL_DENIED_AUTH
: 
Ë
->
objeù
 = 
	`sd¢ew
(
c
->
¬gv
[0]->
±r
); ;

1553 : 
Ë
->
objeù
 = 
	`sd£m±y
();

1556 
ş›Á
 *
»®ş›Á
 = 
c
;

1557 ià(
»®ş›Á
->
æags
 & 
CLIENT_LUA
è»®ş›Á = 
£rv”
.
lua_ÿÎ”
;

1559 
Ë
->
cšfo
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
»®ş›Á
);

1560 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

1561 
Ë
->
cÚ‹xt
 = 
ACL_LOG_CTX_MULTI
;

1562 } ià(
c
->
æags
 & 
CLIENT_LUA
) {

1563 
Ë
->
cÚ‹xt
 = 
ACL_LOG_CTX_LUA
;

1565 
Ë
->
cÚ‹xt
 = 
ACL_LOG_CTX_TOPLEVEL
;

1570 
tosÿn
 = 10;

1571 
li¡I‹r
 
li
;

1572 
li¡Node
 *
Ê
;

1573 
	`li¡Rewšd
(
ACLLog
,&
li
);

1574 
ACLLogEÁry
 *
m©ch
 = 
NULL
;

1575 
tosÿn
-- && (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

1576 
ACLLogEÁry
 *
cu¼’t
 = 
	`li¡NodeV®ue
(
Ê
);

1577 ià(
	`ACLLogM©chEÁry
(
cu¼’t
,
Ë
)) {

1578 
m©ch
 = 
cu¼’t
;

1579 
	`li¡D–Node
(
ACLLog
,
Ê
);

1580 
	`li¡AddNodeH—d
(
ACLLog
,
cu¼’t
);

1587 ià(
m©ch
) {

1590 
	`sdsä“
(
m©ch
->
cšfo
);

1591 
m©ch
->
cšfo
 = 
Ë
->cinfo;

1592 
m©ch
->
ùime
 = 
Ë
->ctime;

1593 
m©ch
->
couÁ
++;

1596 
Ë
->
cšfo
 = 
NULL
;

1597 
	`ACLF»eLogEÁry
(
Ë
);

1601 
	`li¡AddNodeH—d
(
ACLLog
, 
Ë
);

1602 
	`li¡L’gth
(
ACLLog
è> 
£rv”
.
aşlog_max_Ën
) {

1603 
li¡Node
 *
Ê
 = 
	`li¡La¡
(
ACLLog
);

1604 
ACLLogEÁry
 *
Ë
 = 
	`li¡NodeV®ue
(
Ê
);

1605 
	`ACLF»eLogEÁry
(
Ë
);

1606 
	`li¡D–Node
(
ACLLog
,
Ê
);

1609 
	}
}

1629 
	$aşCommªd
(
ş›Á
 *
c
) {

1630 *
sub
 = 
c
->
¬gv
[1]->
±r
;

1631 ià(!
	`¡rÿ£cmp
(
sub
,"£tu£r"è&& 
c
->
¬gc
 >= 3) {

1632 
sds
 
u£ºame
 = 
c
->
¬gv
[2]->
±r
;

1634 ià(
	`ACLSŒšgHasS·ûs
(
u£ºame
,
	`sd¦’
(username))) {

1635 
	`addR•lyE¼ÜFÜm©
(
c
,

1644 
u£r
 *
‹mpu
 = 
	`ACLC»©eUÆškedU£r
();

1645 
u£r
 *
u
 = 
	`ACLG‘U£rByName
(
u£ºame
,
	`sd¦’
(username));

1646 ià(
u
è
	`ACLCİyU£r
(
‹mpu
, u);

1648 
j
 = 3; j < 
c
->
¬gc
; j++) {

1649 ià(
	`ACLS‘U£r
(
‹mpu
,
c
->
¬gv
[
j
]->
±r
,
	`sd¦’
(c->¬gv[j]->±r)è!ğ
C_OK
) {

1650 *
”rmsg
 = 
	`ACLS‘U£rSŒšgE¼Ü
();

1651 
	`addR•lyE¼ÜFÜm©
(
c
,

1653 (*)
c
->
¬gv
[
j
]->
±r
, 
”rmsg
);

1655 
	`ACLF»eU£r
(
‹mpu
);

1661 ià(!
u
èu = 
	`ACLC»©eU£r
(
u£ºame
,
	`sd¦’
(username));

1662 
	`£rv”As£¹
(
u
 !ğ
NULL
);

1663 
	`ACLCİyU£r
(
u
, 
‹mpu
);

1664 
	`ACLF»eU£r
(
‹mpu
);

1665 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1666 } ià(!
	`¡rÿ£cmp
(
sub
,"d–u£r"è&& 
c
->
¬gc
 >= 3) {

1667 
d–‘ed
 = 0;

1668 
j
 = 2; j < 
c
->
¬gc
; j++) {

1669 
sds
 
u£ºame
 = 
c
->
¬gv
[
j
]->
±r
;

1670 ià(!
	`¡rcmp
(
u£ºame
,"default")) {

1671 
	`addR•lyE¼Ü
(
c
,"The 'default' user cannot be„emoved");

1676 
j
 = 2; j < 
c
->
¬gc
; j++) {

1677 
sds
 
u£ºame
 = 
c
->
¬gv
[
j
]->
±r
;

1678 
u£r
 *
u
;

1679 ià(
	`¿xRemove
(
U£rs
,(*)
u£ºame
,

1680 
	`sd¦’
(
u£ºame
),

1681 (**)&
u
))

1683 
	`ACLF»eU£rAndKlCl›Ás
(
u
);

1684 
d–‘ed
++;

1687 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

1688 } ià(!
	`¡rÿ£cmp
(
sub
,"g‘u£r"è&& 
c
->
¬gc
 == 3) {

1689 
u£r
 *
u
 = 
	`ACLG‘U£rByName
(
c
->
¬gv
[2]->
±r
,
	`sd¦’
(c->argv[2]->ptr));

1690 ià(
u
 =ğ
NULL
) {

1691 
	`addR•lyNuÎ
(
c
);

1695 
	`addR•lyM­L’
(
c
,4);

1698 
	`addR•lyBulkCSŒšg
(
c
,"flags");

1699 *
deæ’
 = 
	`addR•lyDeã¼edL’
(
c
);

1700 
numæags
 = 0;

1701 
j
 = 0; 
ACLU£rFÏgs
[j].
æag
; j++) {

1702 ià(
u
->
æags
 & 
ACLU£rFÏgs
[
j
].
æag
) {

1703 
	`addR•lyBulkCSŒšg
(
c
,
ACLU£rFÏgs
[
j
].
Çme
);

1704 
numæags
++;

1707 
	`£tDeã¼edS‘L’
(
c
,
deæ’
,
numæags
);

1710 
	`addR•lyBulkCSŒšg
(
c
,"passwords");

1711 
	`addR•lyA¼ayL’
(
c
,
	`li¡L’gth
(
u
->
·sswÜds
));

1712 
li¡I‹r
 
li
;

1713 
li¡Node
 *
Ê
;

1714 
	`li¡Rewšd
(
u
->
·sswÜds
,&
li
);

1715 (
Ê
 = 
	`li¡Next
(&
li
))) {

1716 
sds
 
thi¥ass
 = 
	`li¡NodeV®ue
(
Ê
);

1717 
	`addR•lyBulkCBufãr
(
c
,
thi¥ass
,
	`sd¦’
(thispass));

1721 
	`addR•lyBulkCSŒšg
(
c
,"commands");

1722 
sds
 
cmddesü
 = 
	`ACLDesüibeU£rCommªdRuËs
(
u
);

1723 
	`addR•lyBulkSds
(
c
,
cmddesü
);

1726 
	`addR•lyBulkCSŒšg
(
c
,"keys");

1727 ià(
u
->
æags
 & 
USER_FLAG_ALLKEYS
) {

1728 
	`addR•lyA¼ayL’
(
c
,1);

1729 
	`addR•lyBulkCBufãr
(
c
,"*",1);

1731 
	`addR•lyA¼ayL’
(
c
,
	`li¡L’gth
(
u
->
·‰”ns
));

1732 
li¡I‹r
 
li
;

1733 
li¡Node
 *
Ê
;

1734 
	`li¡Rewšd
(
u
->
·‰”ns
,&
li
);

1735 (
Ê
 = 
	`li¡Next
(&
li
))) {

1736 
sds
 
thi¥©
 = 
	`li¡NodeV®ue
(
Ê
);

1737 
	`addR•lyBulkCBufãr
(
c
,
thi¥©
,
	`sd¦’
(thispat));

1740 } ià((!
	`¡rÿ£cmp
(
sub
,"list") || !strcasecmp(sub,"users")) &&

1741 
c
->
¬gc
 == 2)

1743 
ju¡Çmes
 = !
	`¡rÿ£cmp
(
sub
,"users");

1744 
	`addR•lyA¼ayL’
(
c
,
	`¿xSize
(
U£rs
));

1745 
¿xI‹¿tÜ
 
ri
;

1746 
	`¿xS¹
(&
ri
,
U£rs
);

1747 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

1748 
	`¿xNext
(&
ri
)) {

1749 
u£r
 *
u
 = 
ri
.
d©a
;

1750 ià(
ju¡Çmes
) {

1751 
	`addR•lyBulkCBufãr
(
c
,
u
->
Çme
,
	`sd¦’
(u->name));

1754 
sds
 
cÚfig
 = 
	`sd¢ew
("user ");

1755 
cÚfig
 = 
	`sdsÿtsds
(cÚfig,
u
->
Çme
);

1756 
cÚfig
 = 
	`sdsÿ’
(config," ",1);

1757 
sds
 
desü
 = 
	`ACLDesüibeU£r
(
u
);

1758 
cÚfig
 = 
	`sdsÿtsds
(cÚfig,
desü
);

1759 
	`sdsä“
(
desü
);

1760 
	`addR•lyBulkSds
(
c
,
cÚfig
);

1763 
	`¿xStİ
(&
ri
);

1764 } ià(!
	`¡rÿ£cmp
(
sub
,"whßmi"è&& 
c
->
¬gc
 == 2) {

1765 ià(
c
->
u£r
 !ğ
NULL
) {

1766 
	`addR•lyBulkCBufãr
(
c
,c->
u£r
->
Çme
,
	`sd¦’
(c->user->name));

1768 
	`addR•lyNuÎ
(
c
);

1770 } ià(
£rv”
.
aş_f’ame
[0] == '\0' &&

1771 (!
	`¡rÿ£cmp
(
sub
,"load") || !strcasecmp(sub,"save")))

1773 
	`addR•lyE¼Ü
(
c
,"This Redis instance is‚ot configuredo use‡n ACL file. You may wanto specify users viahe ACL SETUSER command‡ndhen issue‡ CONFIG REWRITE (assuming you have‡ Redis configuration file set) in ordero store users inhe Redis configuration.");

1775 } ià(!
	`¡rÿ£cmp
(
sub
,"lßd"è&& 
c
->
¬gc
 == 2) {

1776 
sds
 
”rÜs
 = 
	`ACLLßdFromFe
(
£rv”
.
aş_f’ame
);

1777 ià(
”rÜs
 =ğ
NULL
) {

1778 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1780 
	`addR•lyE¼Ü
(
c
,
”rÜs
);

1781 
	`sdsä“
(
”rÜs
);

1783 } ià(!
	`¡rÿ£cmp
(
sub
,"§ve"è&& 
c
->
¬gc
 == 2) {

1784 ià(
	`ACLSaveToFe
(
£rv”
.
aş_f’ame
è=ğ
C_OK
) {

1785 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1787 
	`addR•lyE¼Ü
(
c
,"There was‡nƒrrorryingo savehe ACLs. "

1791 } ià(!
	`¡rÿ£cmp
(
sub
,"ÿt"è&& 
c
->
¬gc
 == 2) {

1792 *
dl
 = 
	`addR•lyDeã¼edL’
(
c
);

1793 
j
;

1794 
j
 = 0; 
ACLCommªdC©egÜ›s
[j].
æag
 != 0; j++)

1795 
	`addR•lyBulkCSŒšg
(
c
,
ACLCommªdC©egÜ›s
[
j
].
Çme
);

1796 
	`£tDeã¼edA¼ayL’
(
c
,
dl
,
j
);

1797 } ià(!
	`¡rÿ£cmp
(
sub
,"ÿt"è&& 
c
->
¬gc
 == 3) {

1798 
ušt64_t
 
cæag
 = 
	`ACLG‘CommªdC©egÜyFÏgByName
(
c
->
¬gv
[2]->
±r
);

1799 ià(
cæag
 == 0) {

1800 
	`addR•lyE¼ÜFÜm©
(
c
, "UnknowÀÿ‹gÜy '%s'", (*)c->
¬gv
[2]->
±r
);

1803 
¬¿yËn
 = 0;

1804 *
dl
 = 
	`addR•lyDeã¼edL’
(
c
);

1805 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
Üig_commªds
);

1806 
diùEÁry
 *
de
;

1807 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1808 
»disCommªd
 *
cmd
 = 
	`diùG‘V®
(
de
);

1809 ià(
cmd
->
æags
 & 
CMD_MODULE
) ;

1810 ià(
cmd
->
æags
 & 
cæag
) {

1811 
	`addR•lyBulkCSŒšg
(
c
,
cmd
->
Çme
);

1812 
¬¿yËn
++;

1815 
	`diùR–—£I‹¿tÜ
(
di
);

1816 
	`£tDeã¼edA¼ayL’
(
c
,
dl
,
¬¿yËn
);

1817 } ià(!
	`¡rÿ£cmp
(
sub
,"g’·ss"è&& (
c
->
¬gc
 == 2 || c->argc == 3)) {

1818 
	#GENPASS_MAX_BITS
 4096

	)

1819 
·ss
[
GENPASS_MAX_BITS
/8*2];

1820 
b™s
 = 256;

1822 ià(
c
->
¬gc
 =ğ3 && 
	`g‘LÚgFromObjeùOrR•ly
(c,c->
¬gv
[2],&
b™s
,
NULL
)

1823 !ğ
C_OK
) ;

1825 ià(
b™s
 <ğ0 || b™ > 
GENPASS_MAX_BITS
) {

1826 
	`addR•lyE¼ÜFÜm©
(
c
,

1829 "u°tØ%d",
GENPASS_MAX_BITS
);

1833 
ch¬s
 = (
b™s
+3)/4;

1834 
	`g‘RªdomHexCh¬s
(
·ss
,
ch¬s
);

1835 
	`addR•lyBulkCBufãr
(
c
,
·ss
,
ch¬s
);

1836 } ià(!
	`¡rÿ£cmp
(
sub
,"log"è&& (
c
->
¬gc
 == 2 || c->argc ==3)) {

1837 
couÁ
 = 10;

1842 ià(
c
->
¬gc
 == 3) {

1843 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"reset")) {

1844 
	`li¡S‘F»eM‘hod
(
ACLLog
,
ACLF»eLogEÁry
);

1845 
	`li¡Em±y
(
ACLLog
);

1846 
	`li¡S‘F»eM‘hod
(
ACLLog
,
NULL
);

1847 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1849 } ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
couÁ
,
NULL
)

1850 !ğ
C_OK
)

1854 ià(
couÁ
 < 0) count = 0;

1858 ià((
size_t
)
couÁ
 > 
	`li¡L’gth
(
ACLLog
))

1859 
couÁ
 = 
	`li¡L’gth
(
ACLLog
);

1861 
	`addR•lyA¼ayL’
(
c
,
couÁ
);

1862 
li¡I‹r
 
li
;

1863 
li¡Node
 *
Ê
;

1864 
	`li¡Rewšd
(
ACLLog
,&
li
);

1865 
m¡ime_t
 
now
 = 
	`m¡ime
();

1866 
couÁ
-- && (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

1867 
ACLLogEÁry
 *
Ë
 = 
	`li¡NodeV®ue
(
Ê
);

1868 
	`addR•lyM­L’
(
c
,7);

1869 
	`addR•lyBulkCSŒšg
(
c
,"count");

1870 
	`addR•lyLÚgLÚg
(
c
,
Ë
->
couÁ
);

1872 
	`addR•lyBulkCSŒšg
(
c
,"reason");

1873 *
»asÚ¡r
;

1874 
Ë
->
»asÚ
) {

1875 
ACL_DENIED_CMD
: 
»asÚ¡r
="command"; ;

1876 
ACL_DENIED_KEY
: 
»asÚ¡r
="key"; ;

1877 
ACL_DENIED_AUTH
: 
»asÚ¡r
="auth"; ;

1878 : 
»asÚ¡r
="unknown";

1880 
	`addR•lyBulkCSŒšg
(
c
,
»asÚ¡r
);

1882 
	`addR•lyBulkCSŒšg
(
c
,"context");

1883 *
ùx¡r
;

1884 
Ë
->
cÚ‹xt
) {

1885 
ACL_LOG_CTX_TOPLEVEL
: 
ùx¡r
="toplevel"; ;

1886 
ACL_LOG_CTX_MULTI
: 
ùx¡r
="multi"; ;

1887 
ACL_LOG_CTX_LUA
: 
ùx¡r
="lua"; ;

1888 : 
ùx¡r
="unknown";

1890 
	`addR•lyBulkCSŒšg
(
c
,
ùx¡r
);

1892 
	`addR•lyBulkCSŒšg
(
c
,"object");

1893 
	`addR•lyBulkCBufãr
(
c
,
Ë
->
objeù
,
	`sd¦’
(le->object));

1894 
	`addR•lyBulkCSŒšg
(
c
,"username");

1895 
	`addR•lyBulkCBufãr
(
c
,
Ë
->
u£ºame
,
	`sd¦’
(le->username));

1896 
	`addR•lyBulkCSŒšg
(
c
,"age-seconds");

1897 
age
 = ()(
now
 - 
Ë
->
ùime
)/1000;

1898 
	`addR•lyDoubË
(
c
,
age
);

1899 
	`addR•lyBulkCSŒšg
(
c
,"client-info");

1900 
	`addR•lyBulkCBufãr
(
c
,
Ë
->
cšfo
,
	`sd¦’
(le->cinfo));

1902 } ià(!
	`¡rÿ£cmp
(
sub
,"help")) {

1903 cÚ¡ *
h–p
[] = {

1916 
NULL


1918 
	`addR•lyH–p
(
c
,
h–p
);

1920 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

1922 
	}
}

1924 
	$addR•lyCommªdC©egÜ›s
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
) {

1925 
æagcouÁ
 = 0;

1926 *
æagËn
 = 
	`addR•lyDeã¼edL’
(
c
);

1927 
j
 = 0; 
ACLCommªdC©egÜ›s
[j].
æag
 != 0; j++) {

1928 ià(
cmd
->
æags
 & 
ACLCommªdC©egÜ›s
[
j
].
æag
) {

1929 
	`addR•lyStusFÜm©
(
c
, "@%s", 
ACLCommªdC©egÜ›s
[
j
].
Çme
);

1930 
æagcouÁ
++;

1933 
	`£tDeã¼edS‘L’
(
c
, 
æagËn
, 
æagcouÁ
);

1934 
	}
}

1941 
	$authCommªd
(
ş›Á
 *
c
) {

1943 ià(
c
->
¬gc
 > 3) {

1944 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1950 
robj
 *
u£ºame
, *
·sswÜd
;

1951 ià(
c
->
¬gc
 == 2) {

1954 ià(
DeçuÉU£r
->
æags
 & 
USER_FLAG_NOPASS
) {

1955 
	`addR•lyE¼Ü
(
c
,"AUTH <password> called without‡ny…assword "

1961 
u£ºame
 = 
	`ü—‹SŒšgObjeù
("default",7);

1962 
·sswÜd
 = 
c
->
¬gv
[1];

1964 
u£ºame
 = 
c
->
¬gv
[1];

1965 
·sswÜd
 = 
c
->
¬gv
[2];

1968 ià(
	`ACLAuth’tiÿ‹U£r
(
c
,
u£ºame
,
·sswÜd
è=ğ
C_OK
) {

1969 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1971 
	`addR•lyE¼Ü
(
c
,"-WRONGPASS invalid username-password…air");

1976 ià(
c
->
¬gc
 =ğ2è
	`deüRefCouÁ
(
u£ºame
);

1977 
	}
}

	@adlist.c

32 
	~<¡dlib.h
>

33 
	~"adli¡.h
"

34 
	~"zm®loc.h
"

41 
li¡
 *
	$li¡C»©e
()

43 
li¡
 *list;

45 ià((
li¡
 = 
	`zm®loc
((*li¡))è=ğ
NULL
)

46  
NULL
;

47 
li¡
->
h—d
 =†i¡->

 = 
NULL
;

48 
li¡
->
Ën
 = 0;

49 
li¡
->
dup
 = 
NULL
;

50 
li¡
->
ä“
 = 
NULL
;

51 
li¡
->
m©ch
 = 
NULL
;

52  
li¡
;

53 
	}
}

56 
	$li¡Em±y
(
li¡
 *list)

58 
Ën
;

59 
li¡Node
 *
cu¼’t
, *
Ãxt
;

61 
cu¼’t
 = 
li¡
->
h—d
;

62 
Ën
 = 
li¡
->len;

63 
Ën
--) {

64 
Ãxt
 = 
cu¼’t
->next;

65 ià(
li¡
->
ä“
èli¡->
	`ä“
(
cu¼’t
->
v®ue
);

66 
	`zä“
(
cu¼’t
);

67 
cu¼’t
 = 
Ãxt
;

69 
li¡
->
h—d
 =†i¡->

 = 
NULL
;

70 
li¡
->
Ën
 = 0;

71 
	}
}

76 
	$li¡R–—£
(
li¡
 *list)

78 
	`li¡Em±y
(
li¡
);

79 
	`zä“
(
li¡
);

80 
	}
}

88 
li¡
 *
	$li¡AddNodeH—d
(
li¡
 *li¡, *
v®ue
)

90 
li¡Node
 *
node
;

92 ià((
node
 = 
	`zm®loc
((*node))è=ğ
NULL
)

93  
NULL
;

94 
node
->
v®ue
 = value;

95 ià(
li¡
->
Ën
 == 0) {

96 
li¡
->
h—d
 =†i¡->

 = 
node
;

97 
node
->
´ev
 =‚ode->
Ãxt
 = 
NULL
;

99 
node
->
´ev
 = 
NULL
;

100 
node
->
Ãxt
 = 
li¡
->
h—d
;

101 
li¡
->
h—d
->
´ev
 = 
node
;

102 
li¡
->
h—d
 = 
node
;

104 
li¡
->
Ën
++;

105  
li¡
;

106 
	}
}

114 
li¡
 *
	$li¡AddNodeTa
(
li¡
 *li¡, *
v®ue
)

116 
li¡Node
 *
node
;

118 ià((
node
 = 
	`zm®loc
((*node))è=ğ
NULL
)

119  
NULL
;

120 
node
->
v®ue
 = value;

121 ià(
li¡
->
Ën
 == 0) {

122 
li¡
->
h—d
 =†i¡->

 = 
node
;

123 
node
->
´ev
 =‚ode->
Ãxt
 = 
NULL
;

125 
node
->
´ev
 = 
li¡
->

;

126 
node
->
Ãxt
 = 
NULL
;

127 
li¡
->

->
Ãxt
 = 
node
;

128 
li¡
->

 = 
node
;

130 
li¡
->
Ën
++;

131  
li¡
;

132 
	}
}

134 
li¡
 *
	$li¡In£¹Node
(
li¡
 *li¡, 
li¡Node
 *
Şd_node
, *
v®ue
, 
aá”
) {

135 
li¡Node
 *
node
;

137 ià((
node
 = 
	`zm®loc
((*node))è=ğ
NULL
)

138  
NULL
;

139 
node
->
v®ue
 = value;

140 ià(
aá”
) {

141 
node
->
´ev
 = 
Şd_node
;

142 
node
->
Ãxt
 = 
Şd_node
->next;

143 ià(
li¡
->

 =ğ
Şd_node
) {

144 
li¡
->

 = 
node
;

147 
node
->
Ãxt
 = 
Şd_node
;

148 
node
->
´ev
 = 
Şd_node
->prev;

149 ià(
li¡
->
h—d
 =ğ
Şd_node
) {

150 
li¡
->
h—d
 = 
node
;

153 ià(
node
->
´ev
 !ğ
NULL
) {

154 
node
->
´ev
->
Ãxt
 =‚ode;

156 ià(
node
->
Ãxt
 !ğ
NULL
) {

157 
node
->
Ãxt
->
´ev
 =‚ode;

159 
li¡
->
Ën
++;

160  
li¡
;

161 
	}
}

167 
	$li¡D–Node
(
li¡
 *li¡, 
li¡Node
 *
node
)

169 ià(
node
->
´ev
)

170 
node
->
´ev
->
Ãxt
 =‚ode->next;

172 
li¡
->
h—d
 = 
node
->
Ãxt
;

173 ià(
node
->
Ãxt
)

174 
node
->
Ãxt
->
´ev
 =‚ode->prev;

176 
li¡
->

 = 
node
->
´ev
;

177 ià(
li¡
->
ä“
èli¡->
	`ä“
(
node
->
v®ue
);

178 
	`zä“
(
node
);

179 
li¡
->
Ën
--;

180 
	}
}

186 
li¡I‹r
 *
	$li¡G‘I‹¿tÜ
(
li¡
 *li¡, 
dœeùiÚ
)

188 
li¡I‹r
 *
™”
;

190 ià((
™”
 = 
	`zm®loc
((*™”))è=ğ
NULL
)  NULL;

191 ià(
dœeùiÚ
 =ğ
AL_START_HEAD
)

192 
™”
->
Ãxt
 = 
li¡
->
h—d
;

194 
™”
->
Ãxt
 = 
li¡
->

;

195 
™”
->
dœeùiÚ
 = direction;

196  
™”
;

197 
	}
}

200 
	$li¡R–—£I‹¿tÜ
(
li¡I‹r
 *
™”
) {

201 
	`zä“
(
™”
);

202 
	}
}

205 
	$li¡Rewšd
(
li¡
 *li¡, 
li¡I‹r
 *
li
) {

206 
li
->
Ãxt
 = 
li¡
->
h—d
;

207 
li
->
dœeùiÚ
 = 
AL_START_HEAD
;

208 
	}
}

210 
	$li¡RewšdTa
(
li¡
 *li¡, 
li¡I‹r
 *
li
) {

211 
li
->
Ãxt
 = 
li¡
->

;

212 
li
->
dœeùiÚ
 = 
AL_START_TAIL
;

213 
	}
}

229 
li¡Node
 *
	$li¡Next
(
li¡I‹r
 *
™”
)

231 
li¡Node
 *
cu¼’t
 = 
™”
->
Ãxt
;

233 ià(
cu¼’t
 !ğ
NULL
) {

234 ià(
™”
->
dœeùiÚ
 =ğ
AL_START_HEAD
)

235 
™”
->
Ãxt
 = 
cu¼’t
->next;

237 
™”
->
Ãxt
 = 
cu¼’t
->
´ev
;

239  
cu¼’t
;

240 
	}
}

250 
li¡
 *
	$li¡Dup
(
li¡
 *
Üig
)

252 
li¡
 *
cİy
;

253 
li¡I‹r
 
™”
;

254 
li¡Node
 *
node
;

256 ià((
cİy
 = 
	`li¡C»©e
()è=ğ
NULL
)

257  
NULL
;

258 
cİy
->
dup
 = 
Üig
->dup;

259 
cİy
->
ä“
 = 
Üig
->free;

260 
cİy
->
m©ch
 = 
Üig
->match;

261 
	`li¡Rewšd
(
Üig
, &
™”
);

262 (
node
 = 
	`li¡Next
(&
™”
)è!ğ
NULL
) {

263 *
v®ue
;

265 ià(
cİy
->
dup
) {

266 
v®ue
 = 
cİy
->
	`dup
(
node
->value);

267 ià(
v®ue
 =ğ
NULL
) {

268 
	`li¡R–—£
(
cİy
);

269  
NULL
;

272 
v®ue
 = 
node
->value;

273 ià(
	`li¡AddNodeTa
(
cİy
, 
v®ue
è=ğ
NULL
) {

274 
	`li¡R–—£
(
cİy
);

275  
NULL
;

278  
cİy
;

279 
	}
}

290 
li¡Node
 *
	$li¡S—rchKey
(
li¡
 *li¡, *
key
)

292 
li¡I‹r
 
™”
;

293 
li¡Node
 *
node
;

295 
	`li¡Rewšd
(
li¡
, &
™”
);

296 (
node
 = 
	`li¡Next
(&
™”
)è!ğ
NULL
) {

297 ià(
li¡
->
m©ch
) {

298 ià(
li¡
->
	`m©ch
(
node
->
v®ue
, 
key
)) {

299  
node
;

302 ià(
key
 =ğ
node
->
v®ue
) {

303  
node
;

307  
NULL
;

308 
	}
}

315 
li¡Node
 *
	$li¡Index
(
li¡
 *li¡, 
šdex
) {

316 
li¡Node
 *
n
;

318 ià(
šdex
 < 0) {

319 
šdex
 = (-index)-1;

320 
n
 = 
li¡
->

;

321 
šdex
-- && 
n
èÀğn->
´ev
;

323 
n
 = 
li¡
->
h—d
;

324 
šdex
-- && 
n
èÀğn->
Ãxt
;

326  
n
;

327 
	}
}

330 
	$li¡RÙ©eTaToH—d
(
li¡
 *list) {

331 ià(
	`li¡L’gth
(
li¡
) <= 1) ;

334 
li¡Node
 *

 = 
li¡
->tail;

335 
li¡
->

 =a->
´ev
;

336 
li¡
->

->
Ãxt
 = 
NULL
;

338 
li¡
->
h—d
->
´ev
 = 

;

339 

->
´ev
 = 
NULL
;

340 

->
Ãxt
 = 
li¡
->
h—d
;

341 
li¡
->
h—d
 = 

;

342 
	}
}

345 
	$li¡RÙ©eH—dToTa
(
li¡
 *list) {

346 ià(
	`li¡L’gth
(
li¡
) <= 1) ;

348 
li¡Node
 *
h—d
 = 
li¡
->head;

350 
li¡
->
h—d
 = h—d->
Ãxt
;

351 
li¡
->
h—d
->
´ev
 = 
NULL
;

353 
li¡
->

->
Ãxt
 = 
h—d
;

354 
h—d
->
Ãxt
 = 
NULL
;

355 
h—d
->
´ev
 = 
li¡
->

;

356 
li¡
->

 = 
h—d
;

357 
	}
}

361 
	$li¡Još
(
li¡
 *
l
,†i¡ *
o
) {

362 ià(
o
->
h—d
)

363 
o
->
h—d
->
´ev
 = 
l
->

;

365 ià(
l
->

)

366 
l
->

->
Ãxt
 = 
o
->
h—d
;

368 
l
->
h—d
 = 
o
->head;

370 ià(
o
->

è
l
->tail = o->tail;

371 
l
->
Ën
 +ğ
o
->len;

374 
o
->
h—d
 = o->

 = 
NULL
;

375 
o
->
Ën
 = 0;

376 
	}
}

	@adlist.h

31 #iâdeà
__ADLIST_H__


32 
	#__ADLIST_H__


	)

36 
	sli¡Node
 {

37 
li¡Node
 *
	m´ev
;

38 
li¡Node
 *
	mÃxt
;

39 *
	mv®ue
;

40 } 
	tli¡Node
;

42 
	sli¡I‹r
 {

43 
li¡Node
 *
	mÃxt
;

44 
	mdœeùiÚ
;

45 } 
	tli¡I‹r
;

47 
	sli¡
 {

48 
li¡Node
 *
	mh—d
;

49 
li¡Node
 *
	m
;

50 *(*
	mdup
)(*
	m±r
);

51 (*
	mä“
)(*
	m±r
);

52 (*
	mm©ch
)(*
	m±r
, *
	mkey
);

53 
	mËn
;

54 } 
	tli¡
;

57 
	#li¡L’gth
(
l
è(Ö)->
Ën
)

	)

58 
	#li¡Fœ¡
(
l
è(Ö)->
h—d
)

	)

59 
	#li¡La¡
(
l
è(Ö)->

)

	)

60 
	#li¡P»vNode
(
n
è(Ò)->
´ev
)

	)

61 
	#li¡NextNode
(
n
è(Ò)->
Ãxt
)

	)

62 
	#li¡NodeV®ue
(
n
è(Ò)->
v®ue
)

	)

64 
	#li¡S‘DupM‘hod
(
l
,
m
è(Ö)->
dup
 = (m))

	)

65 
	#li¡S‘F»eM‘hod
(
l
,
m
è(Ö)->
ä“
 = (m))

	)

66 
	#li¡S‘M©chM‘hod
(
l
,
m
è(Ö)->
m©ch
 = (m))

	)

68 
	#li¡G‘DupM‘hod
(
l
è(Ö)->
dup
)

	)

69 
	#li¡G‘F»eM‘hod
(
l
è(Ö)->
ä“
)

	)

70 
	#li¡G‘M©chM‘hod
(
l
è(Ö)->
m©ch
)

	)

73 
li¡
 *
li¡C»©e
();

74 
li¡R–—£
(
li¡
 *list);

75 
li¡Em±y
(
li¡
 *list);

76 
li¡
 *
li¡AddNodeH—d
Öi¡ *li¡, *
v®ue
);

77 
li¡
 *
li¡AddNodeTa
Öi¡ *li¡, *
v®ue
);

78 
li¡
 *
li¡In£¹Node
Öi¡ *li¡, 
li¡Node
 *
Şd_node
, *
v®ue
, 
aá”
);

79 
li¡D–Node
(
li¡
 *li¡, 
li¡Node
 *
node
);

80 
li¡I‹r
 *
li¡G‘I‹¿tÜ
(
li¡
 *li¡, 
dœeùiÚ
);

81 
li¡Node
 *
li¡Next
(
li¡I‹r
 *
™”
);

82 
li¡R–—£I‹¿tÜ
(
li¡I‹r
 *
™”
);

83 
li¡
 *
li¡Dup
Öi¡ *
Üig
);

84 
li¡Node
 *
li¡S—rchKey
(
li¡
 *li¡, *
key
);

85 
li¡Node
 *
li¡Index
(
li¡
 *li¡, 
šdex
);

86 
li¡Rewšd
(
li¡
 *li¡, 
li¡I‹r
 *
li
);

87 
li¡RewšdTa
(
li¡
 *li¡, 
li¡I‹r
 *
li
);

88 
li¡RÙ©eTaToH—d
(
li¡
 *list);

89 
li¡RÙ©eH—dToTa
(
li¡
 *list);

90 
li¡Još
(
li¡
 *
l
,†i¡ *
o
);

93 
	#AL_START_HEAD
 0

	)

94 
	#AL_START_TAIL
 1

	)

	@ae.c

33 
	~<¡dio.h
>

34 
	~<sys/time.h
>

35 
	~<sys/ty³s.h
>

36 
	~<uni¡d.h
>

37 
	~<¡dlib.h
>

38 
	~<pŞl.h
>

39 
	~<¡ršg.h
>

40 
	~<time.h
>

41 
	~<”ºo.h
>

43 
	~"«.h
"

44 
	~"zm®loc.h
"

45 
	~"cÚfig.h
"

49 #ifdeà
HAVE_EVPORT


50 
	~"«_evpÜt.c
"

52 #ifdeà
HAVE_EPOLL


53 
	~"«_•Şl.c
"

55 #ifdeà
HAVE_KQUEUE


56 
	~"«_kqueue.c
"

58 
	~"«_£Ëù.c
"

63 
«Ev’tLoİ
 *
	$«C»©eEv’tLoİ
(
£tsize
) {

64 
«Ev’tLoİ
 *
ev’tLoİ
;

65 
i
;

67 ià((
ev’tLoİ
 = 
	`zm®loc
((*ev’tLoİ))è=ğ
NULL
è
”r
;

68 
ev’tLoİ
->
ev’ts
 = 
	`zm®loc
((
«FeEv’t
)*
£tsize
);

69 
ev’tLoİ
->
fœed
 = 
	`zm®loc
((
«FœedEv’t
)*
£tsize
);

70 ià(
ev’tLoİ
->
ev’ts
 =ğ
NULL
 ||ƒv’tLoİ->
fœed
 =ğNULLè
”r
;

71 
ev’tLoİ
->
£tsize
 = setsize;

72 
ev’tLoİ
->
Ï¡Time
 = 
	`time
(
NULL
);

73 
ev’tLoİ
->
timeEv’tH—d
 = 
NULL
;

74 
ev’tLoİ
->
timeEv’tNextId
 = 0;

75 
ev’tLoİ
->
¡İ
 = 0;

76 
ev’tLoİ
->
maxfd
 = -1;

77 
ev’tLoİ
->
befÜe¦“p
 = 
NULL
;

78 
ev’tLoİ
->
aá”¦“p
 = 
NULL
;

79 
ev’tLoİ
->
æags
 = 0;

80 ià(
	`«ApiC»©e
(
ev’tLoİ
è=ğ-1è
”r
;

83 
i
 = 0; i < 
£tsize
; i++)

84 
ev’tLoİ
->
ev’ts
[
i
].
mask
 = 
AE_NONE
;

85  
ev’tLoİ
;

87 
”r
:

88 ià(
ev’tLoİ
) {

89 
	`zä“
(
ev’tLoİ
->
ev’ts
);

90 
	`zä“
(
ev’tLoİ
->
fœed
);

91 
	`zä“
(
ev’tLoİ
);

93  
NULL
;

94 
	}
}

97 
	$«G‘S‘Size
(
«Ev’tLoİ
 *
ev’tLoİ
) {

98  
ev’tLoİ
->
£tsize
;

99 
	}
}

102 
	$«S‘DÚtWa™
(
«Ev’tLoİ
 *
ev’tLoİ
, 
noWa™
) {

103 ià(
noWa™
)

104 
ev’tLoİ
->
æags
 |ğ
AE_DONT_WAIT
;

106 
ev’tLoİ
->
æags
 &ğ~
AE_DONT_WAIT
;

107 
	}
}

116 
	$«ResizeS‘Size
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
) {

117 
i
;

119 ià(
£tsize
 =ğ
ev’tLoİ
->£tsizeè 
AE_OK
;

120 ià(
ev’tLoİ
->
maxfd
 >ğ
£tsize
è 
AE_ERR
;

121 ià(
	`«ApiResize
(
ev’tLoİ
,
£tsize
è=ğ-1è 
AE_ERR
;

123 
ev’tLoİ
->
ev’ts
 = 
	`z»®loc
Óv’tLoİ->ev’ts,(
«FeEv’t
)*
£tsize
);

124 
ev’tLoİ
->
fœed
 = 
	`z»®loc
Óv’tLoİ->fœed,(
«FœedEv’t
)*
£tsize
);

125 
ev’tLoİ
->
£tsize
 = setsize;

129 
i
 = 
ev’tLoİ
->
maxfd
+1; i < 
£tsize
; i++)

130 
ev’tLoİ
->
ev’ts
[
i
].
mask
 = 
AE_NONE
;

131  
AE_OK
;

132 
	}
}

134 
	$«D–‘eEv’tLoİ
(
«Ev’tLoİ
 *
ev’tLoİ
) {

135 
	`«ApiF»e
(
ev’tLoİ
);

136 
	`zä“
(
ev’tLoİ
->
ev’ts
);

137 
	`zä“
(
ev’tLoİ
->
fœed
);

140 
«TimeEv’t
 *
Ãxt_‹
, *
‹
 = 
ev’tLoİ
->
timeEv’tH—d
;

141 
‹
) {

142 
Ãxt_‹
 = 
‹
->
Ãxt
;

143 
	`zä“
(
‹
);

144 
‹
 = 
Ãxt_‹
;

146 
	`zä“
(
ev’tLoİ
);

147 
	}
}

149 
	$«Stİ
(
«Ev’tLoİ
 *
ev’tLoİ
) {

150 
ev’tLoİ
->
¡İ
 = 1;

151 
	}
}

153 
	$«C»©eFeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
,

154 
«FeProc
 *
´oc
, *
ş›ÁD©a
)

156 ià(
fd
 >ğ
ev’tLoİ
->
£tsize
) {

157 
”ºo
 = 
ERANGE
;

158  
AE_ERR
;

160 
«FeEv’t
 *
ã
 = &
ev’tLoİ
->
ev’ts
[
fd
];

162 ià(
	`«ApiAddEv’t
(
ev’tLoİ
, 
fd
, 
mask
) == -1)

163  
AE_ERR
;

164 
ã
->
mask
 |= mask;

165 ià(
mask
 & 
AE_READABLE
è
ã
->
rfeProc
 = 
´oc
;

166 ià(
mask
 & 
AE_WRITABLE
è
ã
->
wfeProc
 = 
´oc
;

167 
ã
->
ş›ÁD©a
 = clientData;

168 ià(
fd
 > 
ev’tLoİ
->
maxfd
)

169 
ev’tLoİ
->
maxfd
 = 
fd
;

170  
AE_OK
;

171 
	}
}

173 
	$«D–‘eFeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
)

175 ià(
fd
 >ğ
ev’tLoİ
->
£tsize
) ;

176 
«FeEv’t
 *
ã
 = &
ev’tLoİ
->
ev’ts
[
fd
];

177 ià(
ã
->
mask
 =ğ
AE_NONE
) ;

181 ià(
mask
 & 
AE_WRITABLE
èmask |ğ
AE_BARRIER
;

183 
	`«ApiD–Ev’t
(
ev’tLoİ
, 
fd
, 
mask
);

184 
ã
->
mask
 = fe->mask & (~mask);

185 ià(
fd
 =ğ
ev’tLoİ
->
maxfd
 && 
ã
->
mask
 =ğ
AE_NONE
) {

187 
j
;

189 
j
 = 
ev’tLoİ
->
maxfd
-1; j >= 0; j--)

190 ià(
ev’tLoİ
->
ev’ts
[
j
].
mask
 !ğ
AE_NONE
) ;

191 
ev’tLoİ
->
maxfd
 = 
j
;

193 
	}
}

195 
	$«G‘FeEv’ts
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
) {

196 ià(
fd
 >ğ
ev’tLoİ
->
£tsize
)  0;

197 
«FeEv’t
 *
ã
 = &
ev’tLoİ
->
ev’ts
[
fd
];

199  
ã
->
mask
;

200 
	}
}

202 
	$«G‘Time
(*
£cÚds
, *
mli£cÚds
)

204 
timev®
 
tv
;

206 
	`g‘timeofday
(&
tv
, 
NULL
);

207 *
£cÚds
 = 
tv
.
tv_£c
;

208 *
mli£cÚds
 = 
tv
.
tv_u£c
/1000;

209 
	}
}

211 
	$«AddMli£cÚdsToNow
(
mli£cÚds
, *
£c
, *
ms
) {

212 
cur_£c
, 
cur_ms
, 
wh’_£c
, 
wh’_ms
;

214 
	`«G‘Time
(&
cur_£c
, &
cur_ms
);

215 
wh’_£c
 = 
cur_£c
 + 
mli£cÚds
/1000;

216 
wh’_ms
 = 
cur_ms
 + 
mli£cÚds
%1000;

217 ià(
wh’_ms
 >= 1000) {

218 
wh’_£c
 ++;

219 
wh’_ms
 -= 1000;

221 *
£c
 = 
wh’_£c
;

222 *
ms
 = 
wh’_ms
;

223 
	}
}

225 
	$«C»©eTimeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
mli£cÚds
,

226 
«TimeProc
 *
´oc
, *
ş›ÁD©a
,

227 
«Ev’tFš®iz”Proc
 *
fš®iz”Proc
)

229 
id
 = 
ev’tLoİ
->
timeEv’tNextId
++;

230 
«TimeEv’t
 *
‹
;

232 
‹
 = 
	`zm®loc
((*te));

233 ià(
‹
 =ğ
NULL
è 
AE_ERR
;

234 
‹
->
id
 = id;

235 
	`«AddMli£cÚdsToNow
(
mli£cÚds
,&
‹
->
wh’_£c
,&‹->
wh’_ms
);

236 
‹
->
timeProc
 = 
´oc
;

237 
‹
->
fš®iz”Proc
 = finalizerProc;

238 
‹
->
ş›ÁD©a
 = clientData;

239 
‹
->
´ev
 = 
NULL
;

240 
‹
->
Ãxt
 = 
ev’tLoİ
->
timeEv’tH—d
;

241 ià(
‹
->
Ãxt
)

242 
‹
->
Ãxt
->
´ev
 =e;

243 
ev’tLoİ
->
timeEv’tH—d
 = 
‹
;

244  
id
;

245 
	}
}

247 
	$«D–‘eTimeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
)

249 
«TimeEv’t
 *
‹
 = 
ev’tLoİ
->
timeEv’tH—d
;

250 
‹
) {

251 ià(
‹
->
id
 == id) {

252 
‹
->
id
 = 
AE_DELETED_EVENT_ID
;

253  
AE_OK
;

255 
‹
 =e->
Ãxt
;

257  
AE_ERR
;

258 
	}
}

271 
«TimeEv’t
 *
	$«S—rchN—»¡Tim”
(
«Ev’tLoİ
 *
ev’tLoİ
)

273 
«TimeEv’t
 *
‹
 = 
ev’tLoİ
->
timeEv’tH—d
;

274 
«TimeEv’t
 *
Ã¬e¡
 = 
NULL
;

276 
‹
) {

277 ià(!
Ã¬e¡
 || 
‹
->
wh’_£c
 <‚earest->when_sec ||

278 (
‹
->
wh’_£c
 =ğ
Ã¬e¡
->when_sec &&

279 
‹
->
wh’_ms
 < 
Ã¬e¡
->when_ms))

280 
Ã¬e¡
 = 
‹
;

281 
‹
 =e->
Ãxt
;

283  
Ã¬e¡
;

284 
	}
}

287 
	$´oûssTimeEv’ts
(
«Ev’tLoİ
 *
ev’tLoİ
) {

288 
´oûs£d
 = 0;

289 
«TimeEv’t
 *
‹
;

290 
maxId
;

291 
time_t
 
now
 = 
	`time
(
NULL
);

301 ià(
now
 < 
ev’tLoİ
->
Ï¡Time
) {

302 
‹
 = 
ev’tLoİ
->
timeEv’tH—d
;

303 
‹
) {

304 
‹
->
wh’_£c
 = 0;

305 
‹
 =e->
Ãxt
;

308 
ev’tLoİ
->
Ï¡Time
 = 
now
;

310 
‹
 = 
ev’tLoİ
->
timeEv’tH—d
;

311 
maxId
 = 
ev’tLoİ
->
timeEv’tNextId
-1;

312 
‹
) {

313 
now_£c
, 
now_ms
;

314 
id
;

317 ià(
‹
->
id
 =ğ
AE_DELETED_EVENT_ID
) {

318 
«TimeEv’t
 *
Ãxt
 = 
‹
->next;

319 ià(
‹
->
´ev
)

320 
‹
->
´ev
->
Ãxt
 =e->next;

322 
ev’tLoİ
->
timeEv’tH—d
 = 
‹
->
Ãxt
;

323 ià(
‹
->
Ãxt
)

324 
‹
->
Ãxt
->
´ev
 =e->prev;

325 ià(
‹
->
fš®iz”Proc
)

326 
‹
->
	`fš®iz”Proc
(
ev’tLoİ
,e->
ş›ÁD©a
);

327 
	`zä“
(
‹
);

328 
‹
 = 
Ãxt
;

337 ià(
‹
->
id
 > 
maxId
) {

338 
‹
 =e->
Ãxt
;

341 
	`«G‘Time
(&
now_£c
, &
now_ms
);

342 ià(
now_£c
 > 
‹
->
wh’_£c
 ||

343 (
now_£c
 =ğ
‹
->
wh’_£c
 && 
now_ms
 >ğ‹->
wh’_ms
))

345 
»tv®
;

347 
id
 = 
‹
->id;

348 
»tv®
 = 
‹
->
	`timeProc
(
ev’tLoİ
, 
id
,e->
ş›ÁD©a
);

349 
´oûs£d
++;

350 ià(
»tv®
 !ğ
AE_NOMORE
) {

351 
	`«AddMli£cÚdsToNow
(
»tv®
,&
‹
->
wh’_£c
,&‹->
wh’_ms
);

353 
‹
->
id
 = 
AE_DELETED_EVENT_ID
;

356 
‹
 =e->
Ãxt
;

358  
´oûs£d
;

359 
	}
}

375 
	$«ProûssEv’ts
(
«Ev’tLoİ
 *
ev’tLoİ
, 
æags
)

377 
´oûs£d
 = 0, 
numev’ts
;

380 ià(!(
æags
 & 
AE_TIME_EVENTS
è&& !(æag & 
AE_FILE_EVENTS
))  0;

386 ià(
ev’tLoİ
->
maxfd
 != -1 ||

387 ((
æags
 & 
AE_TIME_EVENTS
è&& !(æag & 
AE_DONT_WAIT
))) {

388 
j
;

389 
«TimeEv’t
 *
shÜ‹¡
 = 
NULL
;

390 
timev®
 
tv
, *
tvp
;

392 ià(
æags
 & 
AE_TIME_EVENTS
 && !(æag & 
AE_DONT_WAIT
))

393 
shÜ‹¡
 = 
	`«S—rchN—»¡Tim”
(
ev’tLoİ
);

394 ià(
shÜ‹¡
) {

395 
now_£c
, 
now_ms
;

397 
	`«G‘Time
(&
now_£c
, &
now_ms
);

398 
tvp
 = &
tv
;

402 
ms
 =

403 (
shÜ‹¡
->
wh’_£c
 - 
now_£c
)*1000 +

404 
shÜ‹¡
->
wh’_ms
 - 
now_ms
;

406 ià(
ms
 > 0) {

407 
tvp
->
tv_£c
 = 
ms
/1000;

408 
tvp
->
tv_u£c
 = (
ms
 % 1000)*1000;

410 
tvp
->
tv_£c
 = 0;

411 
tvp
->
tv_u£c
 = 0;

417 ià(
æags
 & 
AE_DONT_WAIT
) {

418 
tv
.
tv_£c
 =v.
tv_u£c
 = 0;

419 
tvp
 = &
tv
;

422 
tvp
 = 
NULL
;

426 ià(
ev’tLoİ
->
æags
 & 
AE_DONT_WAIT
) {

427 
tv
.
tv_£c
 =v.
tv_u£c
 = 0;

428 
tvp
 = &
tv
;

433 
numev’ts
 = 
	`«ApiPŞl
(
ev’tLoİ
, 
tvp
);

436 ià(
ev’tLoİ
->
aá”¦“p
 !ğ
NULL
 && 
æags
 & 
AE_CALL_AFTER_SLEEP
)

437 
ev’tLoİ
->
	`aá”¦“p
(eventLoop);

439 
j
 = 0; j < 
numev’ts
; j++) {

440 
«FeEv’t
 *
ã
 = &
ev’tLoİ
->
ev’ts
[ev’tLoİ->
fœed
[
j
].
fd
];

441 
mask
 = 
ev’tLoİ
->
fœed
[
j
].mask;

442 
fd
 = 
ev’tLoİ
->
fœed
[
j
].fd;

443 
fœed
 = 0;

456 
šv”t
 = 
ã
->
mask
 & 
AE_BARRIER
;

464 ià(!
šv”t
 && 
ã
->
mask
 & mask & 
AE_READABLE
) {

465 
ã
->
	`rfeProc
(
ev’tLoİ
,
fd
,ã->
ş›ÁD©a
,
mask
);

466 
fœed
++;

467 
ã
 = &
ev’tLoİ
->
ev’ts
[
fd
];

471 ià(
ã
->
mask
 & mask & 
AE_WRITABLE
) {

472 ià(!
fœed
 || 
ã
->
wfeProc
 !ğã->
rfeProc
) {

473 
ã
->
	`wfeProc
(
ev’tLoİ
,
fd
,ã->
ş›ÁD©a
,
mask
);

474 
fœed
++;

480 ià(
šv”t
) {

481 
ã
 = &
ev’tLoİ
->
ev’ts
[
fd
];

482 ià((
ã
->
mask
 & mask & 
AE_READABLE
) &&

483 (!
fœed
 || 
ã
->
wfeProc
 !ğã->
rfeProc
))

485 
ã
->
	`rfeProc
(
ev’tLoİ
,
fd
,ã->
ş›ÁD©a
,
mask
);

486 
fœed
++;

490 
´oûs£d
++;

494 ià(
æags
 & 
AE_TIME_EVENTS
)

495 
´oûs£d
 +ğ
	`´oûssTimeEv’ts
(
ev’tLoİ
);

497  
´oûs£d
;

498 
	}
}

502 
	$«Wa™
(
fd
, 
mask
, 
mli£cÚds
) {

503 
pŞlfd
 
pfd
;

504 
»tmask
 = 0, 
»tv®
;

506 
	`mem£t
(&
pfd
, 0, (pfd));

507 
pfd
.
fd
 = fd;

508 ià(
mask
 & 
AE_READABLE
è
pfd
.
ev’ts
 |ğ
POLLIN
;

509 ià(
mask
 & 
AE_WRITABLE
è
pfd
.
ev’ts
 |ğ
POLLOUT
;

511 ià((
»tv®
 = 
	`pŞl
(&
pfd
, 1, 
mli£cÚds
))== 1) {

512 ià(
pfd
.
»v’ts
 & 
POLLIN
è
»tmask
 |ğ
AE_READABLE
;

513 ià(
pfd
.
»v’ts
 & 
POLLOUT
è
»tmask
 |ğ
AE_WRITABLE
;

514 ià(
pfd
.
»v’ts
 & 
POLLERR
è
»tmask
 |ğ
AE_WRITABLE
;

515 ià(
pfd
.
»v’ts
 & 
POLLHUP
è
»tmask
 |ğ
AE_WRITABLE
;

516  
»tmask
;

518  
»tv®
;

520 
	}
}

522 
	$«Maš
(
«Ev’tLoİ
 *
ev’tLoİ
) {

523 
ev’tLoİ
->
¡İ
 = 0;

524 !
ev’tLoİ
->
¡İ
) {

525 ià(
ev’tLoİ
->
befÜe¦“p
 !ğ
NULL
)

526 
ev’tLoİ
->
	`befÜe¦“p
(eventLoop);

527 
	`«ProûssEv’ts
(
ev’tLoİ
, 
AE_ALL_EVENTS
|
AE_CALL_AFTER_SLEEP
);

529 
	}
}

531 *
	$«G‘ApiName
() {

532  
	`«ApiName
();

533 
	}
}

535 
	$«S‘BefÜeSË•Proc
(
«Ev’tLoİ
 *
ev’tLoİ
, 
«BefÜeSË•Proc
 *
befÜe¦“p
) {

536 
ev’tLoİ
->
befÜe¦“p
 = beforesleep;

537 
	}
}

539 
	$«S‘Aá”SË•Proc
(
«Ev’tLoİ
 *
ev’tLoİ
, 
«BefÜeSË•Proc
 *
aá”¦“p
) {

540 
ev’tLoİ
->
aá”¦“p
 =‡ftersleep;

541 
	}
}

	@ae.h

33 #iâdeà
__AE_H__


34 
	#__AE_H__


	)

36 
	~<time.h
>

38 
	#AE_OK
 0

	)

39 
	#AE_ERR
 -1

	)

41 
	#AE_NONE
 0

	)

42 
	#AE_READABLE
 1

	)

43 
	#AE_WRITABLE
 2

	)

44 
	#AE_BARRIER
 4

	)

50 
	#AE_FILE_EVENTS
 1

	)

51 
	#AE_TIME_EVENTS
 2

	)

52 
	#AE_ALL_EVENTS
 (
AE_FILE_EVENTS
|
AE_TIME_EVENTS
)

	)

53 
	#AE_DONT_WAIT
 4

	)

54 
	#AE_CALL_AFTER_SLEEP
 8

	)

56 
	#AE_NOMORE
 -1

	)

57 
	#AE_DELETED_EVENT_ID
 -1

	)

60 
	#AE_NOTUSED
(
V
è((èV)

	)

62 
	g«Ev’tLoİ
;

65 
	t«FeProc
(
	t«Ev’tLoİ
 *
	tev’tLoİ
, 
	tfd
, *
	tş›ÁD©a
, 
	tmask
);

66 
	t«TimeProc
(
	t«Ev’tLoİ
 *
	tev’tLoİ
, 
	tid
, *
	tş›ÁD©a
);

67 
	t«Ev’tFš®iz”Proc
(
	t«Ev’tLoİ
 *
	tev’tLoİ
, *
	tş›ÁD©a
);

68 
	t«BefÜeSË•Proc
(
	t«Ev’tLoİ
 *
	tev’tLoİ
);

71 
	s«FeEv’t
 {

72 
	mmask
;

73 
«FeProc
 *
	mrfeProc
;

74 
«FeProc
 *
	mwfeProc
;

75 *
	mş›ÁD©a
;

76 } 
	t«FeEv’t
;

79 
	s«TimeEv’t
 {

80 
	mid
;

81 
	mwh’_£c
;

82 
	mwh’_ms
;

83 
«TimeProc
 *
	mtimeProc
;

84 
«Ev’tFš®iz”Proc
 *
	mfš®iz”Proc
;

85 *
	mş›ÁD©a
;

86 
«TimeEv’t
 *
	m´ev
;

87 
«TimeEv’t
 *
	mÃxt
;

88 } 
	t«TimeEv’t
;

91 
	s«FœedEv’t
 {

92 
	mfd
;

93 
	mmask
;

94 } 
	t«FœedEv’t
;

97 
	s«Ev’tLoİ
 {

98 
	mmaxfd
;

99 
	m£tsize
;

100 
	mtimeEv’tNextId
;

101 
time_t
 
	mÏ¡Time
;

102 
«FeEv’t
 *
	mev’ts
;

103 
«FœedEv’t
 *
	mfœed
;

104 
«TimeEv’t
 *
	mtimeEv’tH—d
;

105 
	m¡İ
;

106 *
	m­id©a
;

107 
«BefÜeSË•Proc
 *
	mbefÜe¦“p
;

108 
«BefÜeSË•Proc
 *
	maá”¦“p
;

109 
	mæags
;

110 } 
	t«Ev’tLoİ
;

113 
«Ev’tLoİ
 *
«C»©eEv’tLoİ
(
£tsize
);

114 
«D–‘eEv’tLoİ
(
«Ev’tLoİ
 *
ev’tLoİ
);

115 
«Stİ
(
«Ev’tLoİ
 *
ev’tLoİ
);

116 
«C»©eFeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
,

117 
«FeProc
 *
´oc
, *
ş›ÁD©a
);

118 
«D–‘eFeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
);

119 
«G‘FeEv’ts
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
);

120 
«C»©eTimeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
mli£cÚds
,

121 
«TimeProc
 *
´oc
, *
ş›ÁD©a
,

122 
«Ev’tFš®iz”Proc
 *
fš®iz”Proc
);

123 
«D–‘eTimeEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
);

124 
«ProûssEv’ts
(
«Ev’tLoİ
 *
ev’tLoİ
, 
æags
);

125 
«Wa™
(
fd
, 
mask
, 
mli£cÚds
);

126 
«Maš
(
«Ev’tLoİ
 *
ev’tLoİ
);

127 *
«G‘ApiName
();

128 
«S‘BefÜeSË•Proc
(
«Ev’tLoİ
 *
ev’tLoİ
, 
«BefÜeSË•Proc
 *
befÜe¦“p
);

129 
«S‘Aá”SË•Proc
(
«Ev’tLoİ
 *
ev’tLoİ
, 
«BefÜeSË•Proc
 *
aá”¦“p
);

130 
«G‘S‘Size
(
«Ev’tLoİ
 *
ev’tLoİ
);

131 
«ResizeS‘Size
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
);

132 
«S‘DÚtWa™
(
«Ev’tLoİ
 *
ev’tLoİ
, 
noWa™
);

	@ae_epoll.c

32 
	~<sys/•Şl.h
>

34 
	s«ApiS‹
 {

35 
	m•fd
;

36 
•Şl_ev’t
 *
	mev’ts
;

37 } 
	t«ApiS‹
;

39 
	$«ApiC»©e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

40 
«ApiS‹
 *
¡©e
 = 
	`zm®loc
((aeApiState));

42 ià(!
¡©e
)  -1;

43 
¡©e
->
ev’ts
 = 
	`zm®loc
((
•Şl_ev’t
)*
ev’tLoİ
->
£tsize
);

44 ià(!
¡©e
->
ev’ts
) {

45 
	`zä“
(
¡©e
);

48 
¡©e
->
•fd
 = 
	`•Şl_ü—‹
(1024);

49 ià(
¡©e
->
•fd
 == -1) {

50 
	`zä“
(
¡©e
->
ev’ts
);

51 
	`zä“
(
¡©e
);

54 
ev’tLoİ
->
­id©a
 = 
¡©e
;

56 
	}
}

58 
	$«ApiResize
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
) {

59 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

61 
¡©e
->
ev’ts
 = 
	`z»®loc
(¡©e->ev’ts, (
•Şl_ev’t
)*
£tsize
);

63 
	}
}

65 
	$«ApiF»e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

66 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

68 
	`şo£
(
¡©e
->
•fd
);

69 
	`zä“
(
¡©e
->
ev’ts
);

70 
	`zä“
(
¡©e
);

71 
	}
}

73 
	$«ApiAddEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

74 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

75 
•Şl_ev’t
 
“
 = {0};

78 
İ
 = 
ev’tLoİ
->
ev’ts
[
fd
].
mask
 =ğ
AE_NONE
 ?

79 
EPOLL_CTL_ADD
 : 
EPOLL_CTL_MOD
;

81 
“
.
ev’ts
 = 0;

82 
mask
 |ğ
ev’tLoİ
->
ev’ts
[
fd
].mask;

83 ià(
mask
 & 
AE_READABLE
è
“
.
ev’ts
 |ğ
EPOLLIN
;

84 ià(
mask
 & 
AE_WRITABLE
è
“
.
ev’ts
 |ğ
EPOLLOUT
;

85 
“
.
d©a
.
fd
 = fd;

86 ià(
	`•Şl_ùl
(
¡©e
->
•fd
,
İ
,
fd
,&
“
) == -1)  -1;

88 
	}
}

90 
	$«ApiD–Ev’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
d–mask
) {

91 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

92 
•Şl_ev’t
 
“
 = {0};

93 
mask
 = 
ev’tLoİ
->
ev’ts
[
fd
].mask & (~
d–mask
);

95 
“
.
ev’ts
 = 0;

96 ià(
mask
 & 
AE_READABLE
è
“
.
ev’ts
 |ğ
EPOLLIN
;

97 ià(
mask
 & 
AE_WRITABLE
è
“
.
ev’ts
 |ğ
EPOLLOUT
;

98 
“
.
d©a
.
fd
 = fd;

99 ià(
mask
 !ğ
AE_NONE
) {

100 
	`•Şl_ùl
(
¡©e
->
•fd
,
EPOLL_CTL_MOD
,
fd
,&
“
);

104 
	`•Şl_ùl
(
¡©e
->
•fd
,
EPOLL_CTL_DEL
,
fd
,&
“
);

106 
	}
}

108 
	$«ApiPŞl
(
«Ev’tLoİ
 *
ev’tLoİ
, 
timev®
 *
tvp
) {

109 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

110 
»tv®
, 
numev’ts
 = 0;

112 
»tv®
 = 
	`•Şl_wa™
(
¡©e
->
•fd
,¡©e->
ev’ts
,
ev’tLoİ
->
£tsize
,

113 
tvp
 ? (tvp->
tv_£c
*1000 +vp->
tv_u£c
/1000) : -1);

114 ià(
»tv®
 > 0) {

115 
j
;

117 
numev’ts
 = 
»tv®
;

118 
j
 = 0; j < 
numev’ts
; j++) {

119 
mask
 = 0;

120 
•Şl_ev’t
 *
e
 = 
¡©e
->
ev’ts
+
j
;

122 ià(
e
->
ev’ts
 & 
EPOLLIN
è
mask
 |ğ
AE_READABLE
;

123 ià(
e
->
ev’ts
 & 
EPOLLOUT
è
mask
 |ğ
AE_WRITABLE
;

124 ià(
e
->
ev’ts
 & 
EPOLLERR
è
mask
 |ğ
AE_WRITABLE
|
AE_READABLE
;

125 ià(
e
->
ev’ts
 & 
EPOLLHUP
è
mask
 |ğ
AE_WRITABLE
|
AE_READABLE
;

126 
ev’tLoİ
->
fœed
[
j
].
fd
 = 
e
->
d©a
.fd;

127 
ev’tLoİ
->
fœed
[
j
].
mask
 = mask;

130  
numev’ts
;

131 
	}
}

133 *
	$«ApiName
() {

135 
	}
}

	@ae_evport.c

31 
	~<as£¹.h
>

32 
	~<”ºo.h
>

33 
	~<pÜt.h
>

34 
	~<pŞl.h
>

36 
	~<sys/ty³s.h
>

37 
	~<sys/time.h
>

39 
	~<¡dio.h
>

41 
	gevpÜt_debug
 = 0;

66 
	#MAX_EVENT_BATCHSZ
 512

	)

68 
	s«ApiS‹
 {

69 
	mpÜtfd
;

70 
	mÅ’dšg
;

71 
	m³ndšg_fds
[
MAX_EVENT_BATCHSZ
];

72 
	m³ndšg_masks
[
MAX_EVENT_BATCHSZ
];

73 } 
	t«ApiS‹
;

75 
	$«ApiC»©e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

76 
i
;

77 
«ApiS‹
 *
¡©e
 = 
	`zm®loc
((aeApiState));

78 ià(!
¡©e
)  -1;

80 
¡©e
->
pÜtfd
 = 
	`pÜt_ü—‹
();

81 ià(
¡©e
->
pÜtfd
 == -1) {

82 
	`zä“
(
¡©e
);

86 
¡©e
->
Å’dšg
 = 0;

88 
i
 = 0; i < 
MAX_EVENT_BATCHSZ
; i++) {

89 
¡©e
->
³ndšg_fds
[
i
] = -1;

90 
¡©e
->
³ndšg_masks
[
i
] = 
AE_NONE
;

93 
ev’tLoİ
->
­id©a
 = 
¡©e
;

95 
	}
}

97 
	$«ApiResize
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
) {

100 
	}
}

102 
	$«ApiF»e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

103 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

105 
	`şo£
(
¡©e
->
pÜtfd
);

106 
	`zä“
(
¡©e
);

107 
	}
}

109 
	$«ApiLookupP’dšg
(
«ApiS‹
 *
¡©e
, 
fd
) {

110 
i
;

112 
i
 = 0; i < 
¡©e
->
Å’dšg
; i++) {

113 ià(
¡©e
->
³ndšg_fds
[
i
] =ğ
fd
)

114  (
i
);

118 
	}
}

123 
	$«ApiAssocŸ‹
(cÚ¡ *
wh”e
, 
pÜtfd
, 
fd
, 
mask
) {

124 
ev’ts
 = 0;

125 
rv
, 
”r
;

127 ià(
mask
 & 
AE_READABLE
)

128 
ev’ts
 |ğ
POLLIN
;

129 ià(
mask
 & 
AE_WRITABLE
)

130 
ev’ts
 |ğ
POLLOUT
;

132 ià(
evpÜt_debug
)

133 
	`årštf
(
¡d”r
, "%s:…Üt_assocŸ‹(%d, 0x%xèğ", 
wh”e
, 
fd
, 
ev’ts
);

135 
rv
 = 
	`pÜt_assocŸ‹
(
pÜtfd
, 
PORT_SOURCE_FD
, 
fd
, 
ev’ts
,

136 (*)(
ušŒ_t
)
mask
);

137 
”r
 = 
”ºo
;

139 ià(
evpÜt_debug
)

140 
	`årštf
(
¡d”r
, "%d (%s)\n", 
rv
,„v =ğ0 ? "nØ”rÜ" : 
	`¡»¼Ü
(
”r
));

142 ià(
rv
 == -1) {

143 
	`årštf
(
¡d”r
, "%s:…Üt_assocŸ‹: %s\n", 
wh”e
, 
	`¡»¼Ü
(
”r
));

145 ià(
”r
 =ğ
EAGAIN
)

146 
	`årštf
(
¡d”r
, "aeApiAssociate:ƒvent…ort†imitƒxceeded.");

149  
rv
;

150 
	}
}

152 
	$«ApiAddEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

153 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

154 
fuÎmask
, 
pfd
;

156 ià(
evpÜt_debug
)

157 
	`årštf
(
¡d”r
, "«ApiAddEv’t: fd %d mask 0x%x\n", 
fd
, 
mask
);

164 
fuÎmask
 = 
mask
 | 
ev’tLoİ
->
ev’ts
[
fd
].mask;

165 
pfd
 = 
	`«ApiLookupP’dšg
(
¡©e
, 
fd
);

167 ià(
pfd
 != -1) {

174 ià(
evpÜt_debug
)

175 
	`årštf
(
¡d”r
, "«ApiAddEv’t:‡ddšgØ³ndšg fd %d\n", 
fd
);

176 
¡©e
->
³ndšg_masks
[
pfd
] |ğ
fuÎmask
;

180  (
	`«ApiAssocŸ‹
("«ApiAddEv’t", 
¡©e
->
pÜtfd
, 
fd
, 
fuÎmask
));

181 
	}
}

183 
	$«ApiD–Ev’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

184 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

185 
fuÎmask
, 
pfd
;

187 ià(
evpÜt_debug
)

188 
	`årštf
(
¡d”r
, "d– fd %d mask 0x%x\n", 
fd
, 
mask
);

190 
pfd
 = 
	`«ApiLookupP’dšg
(
¡©e
, 
fd
);

192 ià(
pfd
 != -1) {

193 ià(
evpÜt_debug
)

194 
	`årštf
(
¡d”r
, "d–‘šgƒv’ˆäom…’dšg fd %d\n", 
fd
);

201 
¡©e
->
³ndšg_masks
[
pfd
] &ğ~
mask
;

203 ià(
¡©e
->
³ndšg_masks
[
pfd
] =ğ
AE_NONE
)

204 
¡©e
->
³ndšg_fds
[
pfd
] = -1;

217 
fuÎmask
 = 
ev’tLoİ
->
ev’ts
[
fd
].
mask
;

218 ià(
fuÎmask
 =ğ
AE_NONE
) {

223 ià(
evpÜt_debug
)

224 
	`årštf
(
¡d”r
, "«ApiD–Ev’t:…Üt_dissocŸ‹(%d)\n", 
fd
);

226 ià(
	`pÜt_dissocŸ‹
(
¡©e
->
pÜtfd
, 
PORT_SOURCE_FD
, 
fd
) != 0) {

227 
	`³¼Ü
("aeApiDelEvent:…ort_dissociate");

228 
	`abÜt
();

230 } ià(
	`«ApiAssocŸ‹
("«ApiD–Ev’t", 
¡©e
->
pÜtfd
, 
fd
,

231 
fuÎmask
) != 0) {

239 
	`abÜt
();

241 
	}
}

243 
	$«ApiPŞl
(
«Ev’tLoİ
 *
ev’tLoİ
, 
timev®
 *
tvp
) {

244 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

245 
time¥ec
 
timeout
, *
t¥
;

246 
mask
, 
i
;

247 
ušt_t
 
Ãv’ts
;

248 
pÜt_ev’t_t
 
ev’t
[
MAX_EVENT_BATCHSZ
];

255 
i
 = 0; i < 
¡©e
->
Å’dšg
; i++) {

256 ià(
¡©e
->
³ndšg_fds
[
i
] == -1)

260 ià(
	`«ApiAssocŸ‹
("«ApiPŞl", 
¡©e
->
pÜtfd
,

261 
¡©e
->
³ndšg_fds
[
i
], s‹->
³ndšg_masks
[i]) != 0) {

263 
	`abÜt
();

266 
¡©e
->
³ndšg_masks
[
i
] = 
AE_NONE
;

267 
¡©e
->
³ndšg_fds
[
i
] = -1;

270 
¡©e
->
Å’dšg
 = 0;

272 ià(
tvp
 !ğ
NULL
) {

273 
timeout
.
tv_£c
 = 
tvp
->tv_sec;

274 
timeout
.
tv_n£c
 = 
tvp
->
tv_u£c
 * 1000;

275 
t¥
 = &
timeout
;

277 
t¥
 = 
NULL
;

284 
Ãv’ts
 = 1;

285 ià(
	`pÜt_g‘n
(
¡©e
->
pÜtfd
, 
ev’t
, 
MAX_EVENT_BATCHSZ
, &
Ãv’ts
,

286 
t¥
è=ğ-1 && (
”ºo
 !ğ
ETIME
 || 
Ãv’ts
 == 0)) {

287 ià(
”ºo
 =ğ
ETIME
 ||ƒ¼nØ=ğ
EINTR
)

291 
	`³¼Ü
("aeApiPoll:…ort_get");

292 
	`abÜt
();

295 
¡©e
->
Å’dšg
 = 
Ãv’ts
;

297 
i
 = 0; i < 
Ãv’ts
; i++) {

298 
mask
 = 0;

299 ià(
ev’t
[
i
].
pÜ‹v_ev’ts
 & 
POLLIN
)

300 
mask
 |ğ
AE_READABLE
;

301 ià(
ev’t
[
i
].
pÜ‹v_ev’ts
 & 
POLLOUT
)

302 
mask
 |ğ
AE_WRITABLE
;

304 
ev’tLoİ
->
fœed
[
i
].
fd
 = 
ev’t
[i].
pÜ‹v_objeù
;

305 
ev’tLoİ
->
fœed
[
i
].
mask
 = mask;

307 ià(
evpÜt_debug
)

308 
	`årštf
(
¡d”r
, "aeApiPoll: fd %d mask 0x%x\n",

309 ()
ev’t
[
i
].
pÜ‹v_objeù
, 
mask
);

311 
¡©e
->
³ndšg_fds
[
i
] = 
ev’t
[i].
pÜ‹v_objeù
;

312 
¡©e
->
³ndšg_masks
[
i
] = (
ušŒ_t
)
ev’t
[i].
pÜ‹v_u£r
;

315  
Ãv’ts
;

316 
	}
}

318 *
	$«ApiName
() {

320 
	}
}

	@ae_kqueue.c

32 
	~<sys/ty³s.h
>

33 
	~<sys/ev’t.h
>

34 
	~<sys/time.h
>

36 
	s«ApiS‹
 {

37 
	mkqfd
;

38 
kev’t
 *
	mev’ts
;

39 } 
	t«ApiS‹
;

41 
	$«ApiC»©e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

42 
«ApiS‹
 *
¡©e
 = 
	`zm®loc
((aeApiState));

44 ià(!
¡©e
)  -1;

45 
¡©e
->
ev’ts
 = 
	`zm®loc
((
kev’t
)*
ev’tLoİ
->
£tsize
);

46 ià(!
¡©e
->
ev’ts
) {

47 
	`zä“
(
¡©e
);

50 
¡©e
->
kqfd
 = 
	`kqueue
();

51 ià(
¡©e
->
kqfd
 == -1) {

52 
	`zä“
(
¡©e
->
ev’ts
);

53 
	`zä“
(
¡©e
);

56 
ev’tLoİ
->
­id©a
 = 
¡©e
;

58 
	}
}

60 
	$«ApiResize
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
) {

61 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

63 
¡©e
->
ev’ts
 = 
	`z»®loc
(¡©e->ev’ts, (
kev’t
)*
£tsize
);

65 
	}
}

67 
	$«ApiF»e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

68 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

70 
	`şo£
(
¡©e
->
kqfd
);

71 
	`zä“
(
¡©e
->
ev’ts
);

72 
	`zä“
(
¡©e
);

73 
	}
}

75 
	$«ApiAddEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

76 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

77 
kev’t
 
ke
;

79 ià(
mask
 & 
AE_READABLE
) {

80 
	`EV_SET
(&
ke
, 
fd
, 
EVFILT_READ
, 
EV_ADD
, 0, 0, 
NULL
);

81 ià(
	`kev’t
(
¡©e
->
kqfd
, &
ke
, 1, 
NULL
, 0, NULL) == -1)  -1;

83 ià(
mask
 & 
AE_WRITABLE
) {

84 
	`EV_SET
(&
ke
, 
fd
, 
EVFILT_WRITE
, 
EV_ADD
, 0, 0, 
NULL
);

85 ià(
	`kev’t
(
¡©e
->
kqfd
, &
ke
, 1, 
NULL
, 0, NULL) == -1)  -1;

88 
	}
}

90 
	$«ApiD–Ev’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

91 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

92 
kev’t
 
ke
;

94 ià(
mask
 & 
AE_READABLE
) {

95 
	`EV_SET
(&
ke
, 
fd
, 
EVFILT_READ
, 
EV_DELETE
, 0, 0, 
NULL
);

96 
	`kev’t
(
¡©e
->
kqfd
, &
ke
, 1, 
NULL
, 0, NULL);

98 ià(
mask
 & 
AE_WRITABLE
) {

99 
	`EV_SET
(&
ke
, 
fd
, 
EVFILT_WRITE
, 
EV_DELETE
, 0, 0, 
NULL
);

100 
	`kev’t
(
¡©e
->
kqfd
, &
ke
, 1, 
NULL
, 0, NULL);

102 
	}
}

104 
	$«ApiPŞl
(
«Ev’tLoİ
 *
ev’tLoİ
, 
timev®
 *
tvp
) {

105 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

106 
»tv®
, 
numev’ts
 = 0;

108 ià(
tvp
 !ğ
NULL
) {

109 
time¥ec
 
timeout
;

110 
timeout
.
tv_£c
 = 
tvp
->tv_sec;

111 
timeout
.
tv_n£c
 = 
tvp
->
tv_u£c
 * 1000;

112 
»tv®
 = 
	`kev’t
(
¡©e
->
kqfd
, 
NULL
, 0, s‹->
ev’ts
, 
ev’tLoİ
->
£tsize
,

113 &
timeout
);

115 
»tv®
 = 
	`kev’t
(
¡©e
->
kqfd
, 
NULL
, 0, s‹->
ev’ts
, 
ev’tLoİ
->
£tsize
,

116 
NULL
);

119 ià(
»tv®
 > 0) {

120 
j
;

122 
numev’ts
 = 
»tv®
;

123 
j
 = 0; j < 
numev’ts
; j++) {

124 
mask
 = 0;

125 
kev’t
 *
e
 = 
¡©e
->
ev’ts
+
j
;

127 ià(
e
->
f‹r
 =ğ
EVFILT_READ
è
mask
 |ğ
AE_READABLE
;

128 ià(
e
->
f‹r
 =ğ
EVFILT_WRITE
è
mask
 |ğ
AE_WRITABLE
;

129 
ev’tLoİ
->
fœed
[
j
].
fd
 = 
e
->
id’t
;

130 
ev’tLoİ
->
fœed
[
j
].
mask
 = mask;

133  
numev’ts
;

134 
	}
}

136 *
	$«ApiName
() {

138 
	}
}

	@ae_select.c

32 
	~<sys/£Ëù.h
>

33 
	~<¡ršg.h
>

35 
	s«ApiS‹
 {

36 
fd_£t
 
	mrfds
, 
	mwfds
;

39 
fd_£t
 
	m_rfds
, 
	m_wfds
;

40 } 
	t«ApiS‹
;

42 
	$«ApiC»©e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

43 
«ApiS‹
 *
¡©e
 = 
	`zm®loc
((aeApiState));

45 ià(!
¡©e
)  -1;

46 
	`FD_ZERO
(&
¡©e
->
rfds
);

47 
	`FD_ZERO
(&
¡©e
->
wfds
);

48 
ev’tLoİ
->
­id©a
 = 
¡©e
;

50 
	}
}

52 
	$«ApiResize
(
«Ev’tLoİ
 *
ev’tLoİ
, 
£tsize
) {

54 ià(
£tsize
 >ğ
FD_SETSIZE
)  -1;

56 
	}
}

58 
	$«ApiF»e
(
«Ev’tLoİ
 *
ev’tLoİ
) {

59 
	`zä“
(
ev’tLoİ
->
­id©a
);

60 
	}
}

62 
	$«ApiAddEv’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

63 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

65 ià(
mask
 & 
AE_READABLE
è
	`FD_SET
(
fd
,&
¡©e
->
rfds
);

66 ià(
mask
 & 
AE_WRITABLE
è
	`FD_SET
(
fd
,&
¡©e
->
wfds
);

68 
	}
}

70 
	$«ApiD–Ev’t
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, 
mask
) {

71 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

73 ià(
mask
 & 
AE_READABLE
è
	`FD_CLR
(
fd
,&
¡©e
->
rfds
);

74 ià(
mask
 & 
AE_WRITABLE
è
	`FD_CLR
(
fd
,&
¡©e
->
wfds
);

75 
	}
}

77 
	$«ApiPŞl
(
«Ev’tLoİ
 *
ev’tLoİ
, 
timev®
 *
tvp
) {

78 
«ApiS‹
 *
¡©e
 = 
ev’tLoİ
->
­id©a
;

79 
»tv®
, 
j
, 
numev’ts
 = 0;

81 
	`memıy
(&
¡©e
->
_rfds
,&¡©e->
rfds
,(
fd_£t
));

82 
	`memıy
(&
¡©e
->
_wfds
,&¡©e->
wfds
,(
fd_£t
));

84 
»tv®
 = 
	`£Ëù
(
ev’tLoİ
->
maxfd
+1,

85 &
¡©e
->
_rfds
,&¡©e->
_wfds
,
NULL
,
tvp
);

86 ià(
»tv®
 > 0) {

87 
j
 = 0; j <ğ
ev’tLoİ
->
maxfd
; j++) {

88 
mask
 = 0;

89 
«FeEv’t
 *
ã
 = &
ev’tLoİ
->
ev’ts
[
j
];

91 ià(
ã
->
mask
 =ğ
AE_NONE
) ;

92 ià(
ã
->
mask
 & 
AE_READABLE
 && 
	`FD_ISSET
(
j
,&
¡©e
->
_rfds
))

93 
mask
 |ğ
AE_READABLE
;

94 ià(
ã
->
mask
 & 
AE_WRITABLE
 && 
	`FD_ISSET
(
j
,&
¡©e
->
_wfds
))

95 
mask
 |ğ
AE_WRITABLE
;

96 
ev’tLoİ
->
fœed
[
numev’ts
].
fd
 = 
j
;

97 
ev’tLoİ
->
fœed
[
numev’ts
].
mask
 = mask;

98 
numev’ts
++;

101  
numev’ts
;

102 
	}
}

104 *
	$«ApiName
() {

106 
	}
}

	@anet.c

31 
	~"fmaüos.h
"

33 
	~<sys/ty³s.h
>

34 
	~<sys/sock‘.h
>

35 
	~<sys/¡©.h
>

36 
	~<sys/un.h
>

37 
	~<sys/time.h
>

38 
	~<Ãtš‘/š.h
>

39 
	~<Ãtš‘/tı.h
>

40 
	~<¬·/š‘.h
>

41 
	~<uni¡d.h
>

42 
	~<fú.h
>

43 
	~<¡ršg.h
>

44 
	~<Ãtdb.h
>

45 
	~<”ºo.h
>

46 
	~<¡d¬g.h
>

47 
	~<¡dio.h
>

49 
	~"ª‘.h
"

51 
	$ª‘S‘E¼Ü
(*
”r
, cÚ¡ *
fmt
, ...)

53 
va_li¡
 
­
;

55 ià(!
”r
) ;

56 
	`va_¡¬t
(
­
, 
fmt
);

57 
	`v¢´štf
(
”r
, 
ANET_ERR_LEN
, 
fmt
, 
­
);

58 
	`va_’d
(
­
);

59 
	}
}

61 
	$ª‘S‘Block
(*
”r
, 
fd
, 
nÚ_block
) {

62 
æags
;

67 ià((
æags
 = 
	`fú
(
fd
, 
F_GETFL
)) == -1) {

68 
	`ª‘S‘E¼Ü
(
”r
, "fú(F_GETFL): %s", 
	`¡»¼Ü
(
”ºo
));

69  
ANET_ERR
;

72 ià(
nÚ_block
)

73 
æags
 |ğ
O_NONBLOCK
;

75 
æags
 &ğ~
O_NONBLOCK
;

77 ià(
	`fú
(
fd
, 
F_SETFL
, 
æags
) == -1) {

78 
	`ª‘S‘E¼Ü
(
”r
, "fú(F_SETFL,O_NONBLOCK): %s", 
	`¡»¼Ü
(
”ºo
));

79  
ANET_ERR
;

81  
ANET_OK
;

82 
	}
}

84 
	$ª‘NÚBlock
(*
”r
, 
fd
) {

85  
	`ª‘S‘Block
(
”r
,
fd
,1);

86 
	}
}

88 
	$ª‘Block
(*
”r
, 
fd
) {

89  
	`ª‘S‘Block
(
”r
,
fd
,0);

90 
	}
}

95 
	$ª‘K“pAlive
(*
”r
, 
fd
, 
š‹rv®
)

97 
v®
 = 1;

99 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_KEEPALIVE
, &
v®
, (val)) == -1)

101 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_KEEPALIVE: %s", 
	`¡»¼Ü
(
”ºo
));

102  
ANET_ERR
;

105 #ifdeà
__lšux__


111 
v®
 = 
š‹rv®
;

112 ià(
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_KEEPIDLE
, &
v®
, (val)) < 0) {

113 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆTCP_KEEPIDLE: %s\n", 
	`¡»¼Ü
(
”ºo
));

114  
ANET_ERR
;

120 
v®
 = 
š‹rv®
/3;

121 ià(
v®
 == 0) val = 1;

122 ià(
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_KEEPINTVL
, &
v®
, (val)) < 0) {

123 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆTCP_KEEPINTVL: %s\n", 
	`¡»¼Ü
(
”ºo
));

124  
ANET_ERR
;

129 
v®
 = 3;

130 ià(
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_KEEPCNT
, &
v®
, (val)) < 0) {

131 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆTCP_KEEPCNT: %s\n", 
	`¡»¼Ü
(
”ºo
));

132  
ANET_ERR
;

135 ((è
š‹rv®
);

138  
ANET_OK
;

139 
	}
}

141 
	$ª‘S‘TıNoD–ay
(*
”r
, 
fd
, 
v®
)

143 ià(
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_NODELAY
, &
v®
, (val)) == -1)

145 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆTCP_NODELAY: %s", 
	`¡»¼Ü
(
”ºo
));

146  
ANET_ERR
;

148  
ANET_OK
;

149 
	}
}

151 
	$ª‘EÇbËTıNoD–ay
(*
”r
, 
fd
)

153  
	`ª‘S‘TıNoD–ay
(
”r
, 
fd
, 1);

154 
	}
}

156 
	$ª‘Di§bËTıNoD–ay
(*
”r
, 
fd
)

158  
	`ª‘S‘TıNoD–ay
(
”r
, 
fd
, 0);

159 
	}
}

162 
	$ª‘S‘S’dBufãr
(*
”r
, 
fd
, 
buffsize
)

164 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_SNDBUF
, &
buffsize
, (buffsize)) == -1)

166 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_SNDBUF: %s", 
	`¡»¼Ü
(
”ºo
));

167  
ANET_ERR
;

169  
ANET_OK
;

170 
	}
}

172 
	$ª‘TıK“pAlive
(*
”r
, 
fd
)

174 
yes
 = 1;

175 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_KEEPALIVE
, &
yes
, (yes)) == -1) {

176 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_KEEPALIVE: %s", 
	`¡»¼Ü
(
”ºo
));

177  
ANET_ERR
;

179  
ANET_OK
;

180 
	}
}

184 
	$ª‘S’dTimeout
(*
”r
, 
fd
, 
ms
) {

185 
timev®
 
tv
;

187 
tv
.
tv_£c
 = 
ms
/1000;

188 
tv
.
tv_u£c
 = (
ms
%1000)*1000;

189 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, &
tv
, (tv)) == -1) {

190 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_SNDTIMEO: %s", 
	`¡»¼Ü
(
”ºo
));

191  
ANET_ERR
;

193  
ANET_OK
;

194 
	}
}

198 
	$ª‘RecvTimeout
(*
”r
, 
fd
, 
ms
) {

199 
timev®
 
tv
;

201 
tv
.
tv_£c
 = 
ms
/1000;

202 
tv
.
tv_u£c
 = (
ms
%1000)*1000;

203 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, &
tv
, (tv)) == -1) {

204 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_RCVTIMEO: %s", 
	`¡»¼Ü
(
”ºo
));

205  
ANET_ERR
;

207  
ANET_OK
;

208 
	}
}

217 
	$ª‘G’”icResŞve
(*
”r
, *
ho¡
, *
buf
, 
size_t
 
buf_Ën
,

218 
æags
)

220 
addršfo
 
hšts
, *
šfo
;

221 
rv
;

223 
	`mem£t
(&
hšts
,0,(hints));

224 ià(
æags
 & 
ANET_IP_ONLY
è
hšts
.
ai_æags
 = 
AI_NUMERICHOST
;

225 
hšts
.
ai_çmy
 = 
AF_UNSPEC
;

226 
hšts
.
ai_sockty³
 = 
SOCK_STREAM
;

228 ià((
rv
 = 
	`g‘addršfo
(
ho¡
, 
NULL
, &
hšts
, &
šfo
)) != 0) {

229 
	`ª‘S‘E¼Ü
(
”r
, "%s", 
	`gai_¡»¼Ü
(
rv
));

230  
ANET_ERR
;

232 ià(
šfo
->
ai_çmy
 =ğ
AF_INET
) {

233 
sockaddr_š
 *
§
 = (sockaddr_š *)
šfo
->
ai_addr
;

234 
	`š‘_Áİ
(
AF_INET
, &(
§
->
sš_addr
), 
buf
, 
buf_Ën
);

236 
sockaddr_š6
 *
§
 = (sockaddr_š6 *)
šfo
->
ai_addr
;

237 
	`š‘_Áİ
(
AF_INET6
, &(
§
->
sš6_addr
), 
buf
, 
buf_Ën
);

240 
	`ä“addršfo
(
šfo
);

241  
ANET_OK
;

242 
	}
}

244 
	$ª‘ResŞve
(*
”r
, *
ho¡
, *
buf
, 
size_t
 
buf_Ën
) {

245  
	`ª‘G’”icResŞve
(
”r
,
ho¡
,
buf
,
buf_Ën
,
ANET_NONE
);

246 
	}
}

248 
	$ª‘ResŞveIP
(*
”r
, *
ho¡
, *
buf
, 
size_t
 
buf_Ën
) {

249  
	`ª‘G’”icResŞve
(
”r
,
ho¡
,
buf
,
buf_Ën
,
ANET_IP_ONLY
);

250 
	}
}

252 
	$ª‘S‘Reu£Addr
(*
”r
, 
fd
) {

253 
yes
 = 1;

256 ià(
	`£tsockİt
(
fd
, 
SOL_SOCKET
, 
SO_REUSEADDR
, &
yes
, (yes)) == -1) {

257 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİˆSO_REUSEADDR: %s", 
	`¡»¼Ü
(
”ºo
));

258  
ANET_ERR
;

260  
ANET_OK
;

261 
	}
}

263 
	$ª‘C»©eSock‘
(*
”r
, 
domaš
) {

264 
s
;

265 ià((
s
 = 
	`sock‘
(
domaš
, 
SOCK_STREAM
, 0)) == -1) {

266 
	`ª‘S‘E¼Ü
(
”r
, "ü—tšg sock‘: %s", 
	`¡»¼Ü
(
”ºo
));

267  
ANET_ERR
;

272 ià(
	`ª‘S‘Reu£Addr
(
”r
,
s
è=ğ
ANET_ERR
) {

273 
	`şo£
(
s
);

274  
ANET_ERR
;

276  
s
;

277 
	}
}

279 
	#ANET_CONNECT_NONE
 0

	)

280 
	#ANET_CONNECT_NONBLOCK
 1

	)

281 
	#ANET_CONNECT_BE_BINDING
 2

	)

282 
	$ª‘TıG’”icCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
,

283 cÚ¡ *
sourû_addr
, 
æags
)

285 
s
 = 
ANET_ERR
, 
rv
;

286 
pÜt¡r
[6];

287 
addršfo
 
hšts
, *
£rvšfo
, *
b£rvšfo
, *
p
, *
b
;

289 
	`¢´štf
(
pÜt¡r
,ÕÜt¡r),"%d",
pÜt
);

290 
	`mem£t
(&
hšts
,0,(hints));

291 
hšts
.
ai_çmy
 = 
AF_UNSPEC
;

292 
hšts
.
ai_sockty³
 = 
SOCK_STREAM
;

294 ià((
rv
 = 
	`g‘addršfo
(
addr
,
pÜt¡r
,&
hšts
,&
£rvšfo
)) != 0) {

295 
	`ª‘S‘E¼Ü
(
”r
, "%s", 
	`gai_¡»¼Ü
(
rv
));

296  
ANET_ERR
;

298 
p
 = 
£rvšfo
;… !ğ
NULL
;… =…->
ai_Ãxt
) {

302 ià((
s
 = 
	`sock‘
(
p
->
ai_çmy
,p->
ai_sockty³
,p->
ai_´ÙocŞ
)) == -1)

304 ià(
	`ª‘S‘Reu£Addr
(
”r
,
s
è=ğ
ANET_ERR
è
”rÜ
;

305 ià(
æags
 & 
ANET_CONNECT_NONBLOCK
 && 
	`ª‘NÚBlock
(
”r
,
s
è!ğ
ANET_OK
)

306 
”rÜ
;

307 ià(
sourû_addr
) {

308 
bound
 = 0;

310 ià((
rv
 = 
	`g‘addršfo
(
sourû_addr
, 
NULL
, &
hšts
, &
b£rvšfo
)) != 0)

312 
	`ª‘S‘E¼Ü
(
”r
, "%s", 
	`gai_¡»¼Ü
(
rv
));

313 
”rÜ
;

315 
b
 = 
b£rvšfo
; b !ğ
NULL
; b = b->
ai_Ãxt
) {

316 ià(
	`bšd
(
s
,
b
->
ai_addr
,b->
ai_add¾’
) != -1) {

317 
bound
 = 1;

321 
	`ä“addršfo
(
b£rvšfo
);

322 ià(!
bound
) {

323 
	`ª‘S‘E¼Ü
(
”r
, "bšd: %s", 
	`¡»¼Ü
(
”ºo
));

324 
”rÜ
;

327 ià(
	`cÚÃù
(
s
,
p
->
ai_addr
,p->
ai_add¾’
) == -1) {

330 ià(
”ºo
 =ğ
EINPROGRESS
 && 
æags
 & 
ANET_CONNECT_NONBLOCK
)

331 
’d
;

332 
	`şo£
(
s
);

333 
s
 = 
ANET_ERR
;

339 
’d
;

341 ià(
p
 =ğ
NULL
)

342 
	`ª‘S‘E¼Ü
(
”r
, "ü—tšg sock‘: %s", 
	`¡»¼Ü
(
”ºo
));

344 
”rÜ
:

345 ià(
s
 !ğ
ANET_ERR
) {

346 
	`şo£
(
s
);

347 
s
 = 
ANET_ERR
;

350 
’d
:

351 
	`ä“addršfo
(
£rvšfo
);

355 ià(
s
 =ğ
ANET_ERR
 && 
sourû_addr
 && (
æags
 & 
ANET_CONNECT_BE_BINDING
)) {

356  
	`ª‘TıG’”icCÚÃù
(
”r
,
addr
,
pÜt
,
NULL
,
æags
);

358  
s
;

360 
	}
}

362 
	$ª‘TıCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
)

364  
	`ª‘TıG’”icCÚÃù
(
”r
,
addr
,
pÜt
,
NULL
,
ANET_CONNECT_NONE
);

365 
	}
}

367 
	$ª‘TıNÚBlockCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
)

369  
	`ª‘TıG’”icCÚÃù
(
”r
,
addr
,
pÜt
,
NULL
,
ANET_CONNECT_NONBLOCK
);

370 
	}
}

372 
	$ª‘TıNÚBlockBšdCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
,

373 cÚ¡ *
sourû_addr
)

375  
	`ª‘TıG’”icCÚÃù
(
”r
,
addr
,
pÜt
,
sourû_addr
,

376 
ANET_CONNECT_NONBLOCK
);

377 
	}
}

379 
	$ª‘TıNÚBlockBe¡EffÜtBšdCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
,

380 cÚ¡ *
sourû_addr
)

382  
	`ª‘TıG’”icCÚÃù
(
”r
,
addr
,
pÜt
,
sourû_addr
,

383 
ANET_CONNECT_NONBLOCK
|
ANET_CONNECT_BE_BINDING
);

384 
	}
}

386 
	$ª‘UnixG’”icCÚÃù
(*
”r
, cÚ¡ *
·th
, 
æags
)

388 
s
;

389 
sockaddr_un
 
§
;

391 ià((
s
 = 
	`ª‘C»©eSock‘
(
”r
,
AF_LOCAL
)è=ğ
ANET_ERR
)

392  
ANET_ERR
;

394 
§
.
sun_çmy
 = 
AF_LOCAL
;

395 
	`¡ºıy
(
§
.
sun_·th
,
·th
,(sa.sun_path)-1);

396 ià(
æags
 & 
ANET_CONNECT_NONBLOCK
) {

397 ià(
	`ª‘NÚBlock
(
”r
,
s
è!ğ
ANET_OK
) {

398 
	`şo£
(
s
);

399  
ANET_ERR
;

402 ià(
	`cÚÃù
(
s
,(
sockaddr
*)&
§
,(sa)) == -1) {

403 ià(
”ºo
 =ğ
EINPROGRESS
 &&

404 
æags
 & 
ANET_CONNECT_NONBLOCK
)

405  
s
;

407 
	`ª‘S‘E¼Ü
(
”r
, "cÚÃù: %s", 
	`¡»¼Ü
(
”ºo
));

408 
	`şo£
(
s
);

409  
ANET_ERR
;

411  
s
;

412 
	}
}

414 
	$ª‘UnixCÚÃù
(*
”r
, cÚ¡ *
·th
)

416  
	`ª‘UnixG’”icCÚÃù
(
”r
,
·th
,
ANET_CONNECT_NONE
);

417 
	}
}

419 
	$ª‘UnixNÚBlockCÚÃù
(*
”r
, cÚ¡ *
·th
)

421  
	`ª‘UnixG’”icCÚÃù
(
”r
,
·th
,
ANET_CONNECT_NONBLOCK
);

422 
	}
}

426 
	$ª‘R—d
(
fd
, *
buf
, 
couÁ
)

428 
ssize_t
 
Ä—d
, 
tÙËn
 = 0;

429 
tÙËn
 !ğ
couÁ
) {

430 
Ä—d
 = 
	`»ad
(
fd
,
buf
,
couÁ
-
tÙËn
);

431 ià(
Ä—d
 =ğ0è 
tÙËn
;

432 ià(
Ä—d
 == -1)  -1;

433 
tÙËn
 +ğ
Ä—d
;

434 
buf
 +ğ
Ä—d
;

436  
tÙËn
;

437 
	}
}

441 
	$ª‘Wr™e
(
fd
, *
buf
, 
couÁ
)

443 
ssize_t
 
nwr™‹n
, 
tÙËn
 = 0;

444 
tÙËn
 !ğ
couÁ
) {

445 
nwr™‹n
 = 
	`wr™e
(
fd
,
buf
,
couÁ
-
tÙËn
);

446 ià(
nwr™‹n
 =ğ0è 
tÙËn
;

447 ià(
nwr™‹n
 == -1)  -1;

448 
tÙËn
 +ğ
nwr™‹n
;

449 
buf
 +ğ
nwr™‹n
;

451  
tÙËn
;

452 
	}
}

454 
	$ª‘Li¡’
(*
”r
, 
s
, 
sockaddr
 *
§
, 
sockËn_t
 
Ën
, 
backlog
) {

455 ià(
	`bšd
(
s
,
§
,
Ën
) == -1) {

456 
	`ª‘S‘E¼Ü
(
”r
, "bšd: %s", 
	`¡»¼Ü
(
”ºo
));

457 
	`şo£
(
s
);

458  
ANET_ERR
;

461 ià(
	`li¡’
(
s
, 
backlog
) == -1) {

462 
	`ª‘S‘E¼Ü
(
”r
, "li¡’: %s", 
	`¡»¼Ü
(
”ºo
));

463 
	`şo£
(
s
);

464  
ANET_ERR
;

466  
ANET_OK
;

467 
	}
}

469 
	$ª‘V6OÆy
(*
”r
, 
s
) {

470 
yes
 = 1;

471 ià(
	`£tsockİt
(
s
,
IPPROTO_IPV6
,
IPV6_V6ONLY
,&
yes
,(yes)) == -1) {

472 
	`ª‘S‘E¼Ü
(
”r
, "£tsockİt: %s", 
	`¡»¼Ü
(
”ºo
));

473 
	`şo£
(
s
);

474  
ANET_ERR
;

476  
ANET_OK
;

477 
	}
}

479 
	$_ª‘TıS”v”
(*
”r
, 
pÜt
, *
bšdaddr
, 
af
, 
backlog
)

481 
s
 = -1, 
rv
;

482 
_pÜt
[6];

483 
addršfo
 
hšts
, *
£rvšfo
, *
p
;

485 
	`¢´štf
(
_pÜt
,6,"%d",
pÜt
);

486 
	`mem£t
(&
hšts
,0,(hints));

487 
hšts
.
ai_çmy
 = 
af
;

488 
hšts
.
ai_sockty³
 = 
SOCK_STREAM
;

489 
hšts
.
ai_æags
 = 
AI_PASSIVE
;

491 ià((
rv
 = 
	`g‘addršfo
(
bšdaddr
,
_pÜt
,&
hšts
,&
£rvšfo
)) != 0) {

492 
	`ª‘S‘E¼Ü
(
”r
, "%s", 
	`gai_¡»¼Ü
(
rv
));

493  
ANET_ERR
;

495 
p
 = 
£rvšfo
;… !ğ
NULL
;… =…->
ai_Ãxt
) {

496 ià((
s
 = 
	`sock‘
(
p
->
ai_çmy
,p->
ai_sockty³
,p->
ai_´ÙocŞ
)) == -1)

499 ià(
af
 =ğ
AF_INET6
 && 
	`ª‘V6OÆy
(
”r
,
s
è=ğ
ANET_ERR
è
”rÜ
;

500 ià(
	`ª‘S‘Reu£Addr
(
”r
,
s
è=ğ
ANET_ERR
è
”rÜ
;

501 ià(
	`ª‘Li¡’
(
”r
,
s
,
p
->
ai_addr
,p->
ai_add¾’
,
backlog
è=ğ
ANET_ERR
) s = ANET_ERR;

502 
’d
;

504 ià(
p
 =ğ
NULL
) {

505 
	`ª‘S‘E¼Ü
(
”r
, "uÇbËØbšd sock‘,ƒ¼no: %d", 
”ºo
);

506 
”rÜ
;

509 
”rÜ
:

510 ià(
s
 !ğ-1è
	`şo£
(s);

511 
s
 = 
ANET_ERR
;

512 
’d
:

513 
	`ä“addršfo
(
£rvšfo
);

514  
s
;

515 
	}
}

517 
	$ª‘TıS”v”
(*
”r
, 
pÜt
, *
bšdaddr
, 
backlog
)

519  
	`_ª‘TıS”v”
(
”r
, 
pÜt
, 
bšdaddr
, 
AF_INET
, 
backlog
);

520 
	}
}

522 
	$ª‘Tı6S”v”
(*
”r
, 
pÜt
, *
bšdaddr
, 
backlog
)

524  
	`_ª‘TıS”v”
(
”r
, 
pÜt
, 
bšdaddr
, 
AF_INET6
, 
backlog
);

525 
	}
}

527 
	$ª‘UnixS”v”
(*
”r
, *
·th
, 
mode_t
 
³rm
, 
backlog
)

529 
s
;

530 
sockaddr_un
 
§
;

532 ià((
s
 = 
	`ª‘C»©eSock‘
(
”r
,
AF_LOCAL
)è=ğ
ANET_ERR
)

533  
ANET_ERR
;

535 
	`mem£t
(&
§
,0,(sa));

536 
§
.
sun_çmy
 = 
AF_LOCAL
;

537 
	`¡ºıy
(
§
.
sun_·th
,
·th
,(sa.sun_path)-1);

538 ià(
	`ª‘Li¡’
(
”r
,
s
,(
sockaddr
*)&
§
,(§),
backlog
è=ğ
ANET_ERR
)

539  
ANET_ERR
;

540 ià(
³rm
)

541 
	`chmod
(
§
.
sun_·th
, 
³rm
);

542  
s
;

543 
	}
}

545 
	$ª‘G’”icAcû±
(*
”r
, 
s
, 
sockaddr
 *
§
, 
sockËn_t
 *
Ën
) {

546 
fd
;

548 
fd
 = 
	`acû±
(
s
,
§
,
Ën
);

549 ià(
fd
 == -1) {

550 ià(
”ºo
 =ğ
EINTR
)

553 
	`ª‘S‘E¼Ü
(
”r
, "acû±: %s", 
	`¡»¼Ü
(
”ºo
));

554  
ANET_ERR
;

559  
fd
;

560 
	}
}

562 
	$ª‘TıAcû±
(*
”r
, 
s
, *

, 
size_t
 
_Ën
, *
pÜt
) {

563 
fd
;

564 
sockaddr_¡Üage
 
§
;

565 
sockËn_t
 
§Ën
 = (
§
);

566 ià((
fd
 = 
	`ª‘G’”icAcû±
(
”r
,
s
,(
sockaddr
*)&
§
,&
§Ën
)) == -1)

567  
ANET_ERR
;

569 ià(
§
.
ss_çmy
 =ğ
AF_INET
) {

570 
sockaddr_š
 *
s
 = (sockaddr_š *)&
§
;

571 ià(

è
	`š‘_Áİ
(
AF_INET
,(*)&(
s
->
sš_addr
),,
_Ën
);

572 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš_pÜt
);

574 
sockaddr_š6
 *
s
 = (sockaddr_š6 *)&
§
;

575 ià(

è
	`š‘_Áİ
(
AF_INET6
,(*)&(
s
->
sš6_addr
),,
_Ën
);

576 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš6_pÜt
);

578  
fd
;

579 
	}
}

581 
	$ª‘UnixAcû±
(*
”r
, 
s
) {

582 
fd
;

583 
sockaddr_un
 
§
;

584 
sockËn_t
 
§Ën
 = (
§
);

585 ià((
fd
 = 
	`ª‘G’”icAcû±
(
”r
,
s
,(
sockaddr
*)&
§
,&
§Ën
)) == -1)

586  
ANET_ERR
;

588  
fd
;

589 
	}
}

591 
	$ª‘P“rToSŒšg
(
fd
, *

, 
size_t
 
_Ën
, *
pÜt
) {

592 
sockaddr_¡Üage
 
§
;

593 
sockËn_t
 
§Ën
 = (
§
);

595 ià(
	`g‘³”Çme
(
fd
,(
sockaddr
*)&
§
,&
§Ën
è=ğ-1è
”rÜ
;

596 ià(
_Ën
 =ğ0è
”rÜ
;

598 ià(
§
.
ss_çmy
 =ğ
AF_INET
) {

599 
sockaddr_š
 *
s
 = (sockaddr_š *)&
§
;

600 ià(

è
	`š‘_Áİ
(
AF_INET
,(*)&(
s
->
sš_addr
),,
_Ën
);

601 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš_pÜt
);

602 } ià(
§
.
ss_çmy
 =ğ
AF_INET6
) {

603 
sockaddr_š6
 *
s
 = (sockaddr_š6 *)&
§
;

604 ià(

è
	`š‘_Áİ
(
AF_INET6
,(*)&(
s
->
sš6_addr
),,
_Ën
);

605 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš6_pÜt
);

606 } ià(
§
.
ss_çmy
 =ğ
AF_UNIX
) {

607 ià(

è
	`¡ºıy
(,"/unixsock‘",
_Ën
);

608 ià(
pÜt
) *port = 0;

610 
”rÜ
;

614 
”rÜ
:

615 ià(

) {

616 ià(
_Ën
 >= 2) {

617 

[0] = '?';

618 

[1] = '\0';

619 } ià(
_Ën
 == 1) {

620 

[0] = '\0';

623 ià(
pÜt
) *port = 0;

625 
	}
}

630 
	$ª‘FÜm©Addr
(*
buf
, 
size_t
 
buf_Ën
, *

, 
pÜt
) {

631  
	`¢´štf
(
buf
,
buf_Ën
, 
	`¡rchr
(

,':') ?

632 "[%s]:%d" : "%s:%d", 

, 
pÜt
);

633 
	}
}

636 
	$ª‘FÜm©P“r
(
fd
, *
buf
, 
size_t
 
buf_Ën
) {

637 

[
INET6_ADDRSTRLEN
];

638 
pÜt
;

640 
	`ª‘P“rToSŒšg
(
fd
,

,(),&
pÜt
);

641  
	`ª‘FÜm©Addr
(
buf
, 
buf_Ën
, 

, 
pÜt
);

642 
	}
}

644 
	$ª‘SockName
(
fd
, *

, 
size_t
 
_Ën
, *
pÜt
) {

645 
sockaddr_¡Üage
 
§
;

646 
sockËn_t
 
§Ën
 = (
§
);

648 ià(
	`g‘sockÇme
(
fd
,(
sockaddr
*)&
§
,&
§Ën
) == -1) {

649 ià(
pÜt
) *port = 0;

650 

[0] = '?';

651 

[1] = '\0';

654 ià(
§
.
ss_çmy
 =ğ
AF_INET
) {

655 
sockaddr_š
 *
s
 = (sockaddr_š *)&
§
;

656 ià(

è
	`š‘_Áİ
(
AF_INET
,(*)&(
s
->
sš_addr
),,
_Ën
);

657 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš_pÜt
);

659 
sockaddr_š6
 *
s
 = (sockaddr_š6 *)&
§
;

660 ià(

è
	`š‘_Áİ
(
AF_INET6
,(*)&(
s
->
sš6_addr
),,
_Ën
);

661 ià(
pÜt
è*pÜˆğ
	`Áohs
(
s
->
sš6_pÜt
);

664 
	}
}

666 
	$ª‘FÜm©Sock
(
fd
, *
fmt
, 
size_t
 
fmt_Ën
) {

667 

[
INET6_ADDRSTRLEN
];

668 
pÜt
;

670 
	`ª‘SockName
(
fd
,

,(),&
pÜt
);

671  
	`ª‘FÜm©Addr
(
fmt
, 
fmt_Ën
, 

, 
pÜt
);

672 
	}
}

	@anet.h

31 #iâdeà
ANET_H


32 
	#ANET_H


	)

34 
	~<sys/ty³s.h
>

36 
	#ANET_OK
 0

	)

37 
	#ANET_ERR
 -1

	)

38 
	#ANET_ERR_LEN
 256

	)

41 
	#ANET_NONE
 0

	)

42 
	#ANET_IP_ONLY
 (1<<0)

	)

44 #ià
defšed
(
__sun
è|| defšed(
_AIX
)

45 
	#AF_LOCAL
 
AF_UNIX


	)

48 #ifdeà
_AIX


49 #undeà
_Ën


52 
ª‘TıCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
);

53 
ª‘TıNÚBlockCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
);

54 
ª‘TıNÚBlockBšdCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
sourû_addr
);

55 
ª‘TıNÚBlockBe¡EffÜtBšdCÚÃù
(*
”r
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
sourû_addr
);

56 
ª‘UnixCÚÃù
(*
”r
, cÚ¡ *
·th
);

57 
ª‘UnixNÚBlockCÚÃù
(*
”r
, cÚ¡ *
·th
);

58 
ª‘R—d
(
fd
, *
buf
, 
couÁ
);

59 
ª‘ResŞve
(*
”r
, *
ho¡
, *
buf
, 
size_t
 
buf_Ën
);

60 
ª‘ResŞveIP
(*
”r
, *
ho¡
, *
buf
, 
size_t
 
buf_Ën
);

61 
ª‘TıS”v”
(*
”r
, 
pÜt
, *
bšdaddr
, 
backlog
);

62 
ª‘Tı6S”v”
(*
”r
, 
pÜt
, *
bšdaddr
, 
backlog
);

63 
ª‘UnixS”v”
(*
”r
, *
·th
, 
mode_t
 
³rm
, 
backlog
);

64 
ª‘TıAcû±
(*
”r
, 
£rv”sock
, *

, 
size_t
 
_Ën
, *
pÜt
);

65 
ª‘UnixAcû±
(*
”r
, 
£rv”sock
);

66 
ª‘Wr™e
(
fd
, *
buf
, 
couÁ
);

67 
ª‘NÚBlock
(*
”r
, 
fd
);

68 
ª‘Block
(*
”r
, 
fd
);

69 
ª‘EÇbËTıNoD–ay
(*
”r
, 
fd
);

70 
ª‘Di§bËTıNoD–ay
(*
”r
, 
fd
);

71 
ª‘TıK“pAlive
(*
”r
, 
fd
);

72 
ª‘S’dTimeout
(*
”r
, 
fd
, 
ms
);

73 
ª‘RecvTimeout
(*
”r
, 
fd
, 
ms
);

74 
ª‘P“rToSŒšg
(
fd
, *

, 
size_t
 
_Ën
, *
pÜt
);

75 
ª‘K“pAlive
(*
”r
, 
fd
, 
š‹rv®
);

76 
ª‘SockName
(
fd
, *

, 
size_t
 
_Ën
, *
pÜt
);

77 
ª‘FÜm©Addr
(*
fmt
, 
size_t
 
fmt_Ën
, *

, 
pÜt
);

78 
ª‘FÜm©P“r
(
fd
, *
fmt
, 
size_t
 
fmt_Ën
);

79 
ª‘FÜm©Sock
(
fd
, *
fmt
, 
size_t
 
fmt_Ën
);

	@aof.c

30 
	~"£rv”.h
"

31 
	~"bio.h
"

32 
	~"rio.h
"

34 
	~<sigÇl.h
>

35 
	~<fú.h
>

36 
	~<sys/¡©.h
>

37 
	~<sys/ty³s.h
>

38 
	~<sys/time.h
>

39 
	~<sys/»sourû.h
>

40 
	~<sys/wa™.h
>

41 
	~<sys/·¿m.h
>

43 
aofUpd©eCu¼’tSize
();

44 
aofClo£Pes
();

60 
	#AOF_RW_BUF_BLOCK_SIZE
 (1024*1024*10è

	)

62 
	saoäwblock
 {

63 
	mu£d
, 
	mä“
;

64 
	mbuf
[
AOF_RW_BUF_BLOCK_SIZE
];

65 } 
	taoäwblock
;

70 
	$aofRewr™eBufãrRe£t
() {

71 ià(
£rv”
.
aof_»wr™e_buf_blocks
)

72 
	`li¡R–—£
(
£rv”
.
aof_»wr™e_buf_blocks
);

74 
£rv”
.
aof_»wr™e_buf_blocks
 = 
	`li¡C»©e
();

75 
	`li¡S‘F»eM‘hod
(
£rv”
.
aof_»wr™e_buf_blocks
,
zä“
);

76 
	}
}

79 
	$aofRewr™eBufãrSize
() {

80 
li¡Node
 *
Ê
;

81 
li¡I‹r
 
li
;

82 
size
 = 0;

84 
	`li¡Rewšd
(
£rv”
.
aof_»wr™e_buf_blocks
,&
li
);

85 (
Ê
 = 
	`li¡Next
(&
li
))) {

86 
aoäwblock
 *
block
 = 
	`li¡NodeV®ue
(
Ê
);

87 
size
 +ğ
block
->
u£d
;

89  
size
;

90 
	}
}

95 
	$aofChdWr™eDiffD©a
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

96 
li¡Node
 *
Ê
;

97 
aoäwblock
 *
block
;

98 
ssize_t
 
nwr™‹n
;

99 
	`UNUSED
(
–
);

100 
	`UNUSED
(
fd
);

101 
	`UNUSED
(
´ivd©a
);

102 
	`UNUSED
(
mask
);

105 
Ê
 = 
	`li¡Fœ¡
(
£rv”
.
aof_»wr™e_buf_blocks
);

106 
block
 = 
Ê
 ?†n->
v®ue
 : 
NULL
;

107 ià(
£rv”
.
aof_¡İ_£ndšg_diff
 || !
block
) {

108 
	`«D–‘eFeEv’t
(
£rv”
.
–
,£rv”.
aof_pe_wr™e_d©a_to_chd
,

109 
AE_WRITABLE
);

112 ià(
block
->
u£d
 > 0) {

113 
nwr™‹n
 = 
	`wr™e
(
£rv”
.
aof_pe_wr™e_d©a_to_chd
,

114 
block
->
buf
,block->
u£d
);

115 ià(
nwr™‹n
 <= 0) ;

116 
	`memmove
(
block
->
buf
,block->buf+
nwr™‹n
,block->
u£d
-nwritten);

117 
block
->
u£d
 -ğ
nwr™‹n
;

118 
block
->
ä“
 +ğ
nwr™‹n
;

120 ià(
block
->
u£d
 =ğ0è
	`li¡D–Node
(
£rv”
.
aof_»wr™e_buf_blocks
,
Ê
);

122 
	}
}

125 
	$aofRewr™eBufãrAµ’d
(*
s
, 
Ën
) {

126 
li¡Node
 *
Ê
 = 
	`li¡La¡
(
£rv”
.
aof_»wr™e_buf_blocks
);

127 
aoäwblock
 *
block
 = 
Ê
 ?†n->
v®ue
 : 
NULL
;

129 
Ën
) {

132 ià(
block
) {

133 
thi¦’
 = (
block
->
ä“
 < 
Ën
) ? block->free :†en;

134 ià(
thi¦’
) {

135 
	`memıy
(
block
->
buf
+block->
u£d
, 
s
, 
thi¦’
);

136 
block
->
u£d
 +ğ
thi¦’
;

137 
block
->
ä“
 -ğ
thi¦’
;

138 
s
 +ğ
thi¦’
;

139 
Ën
 -ğ
thi¦’
;

143 ià(
Ën
) {

144 
numblocks
;

146 
block
 = 
	`zm®loc
((*block));

147 
block
->
ä“
 = 
AOF_RW_BUF_BLOCK_SIZE
;

148 
block
->
u£d
 = 0;

149 
	`li¡AddNodeTa
(
£rv”
.
aof_»wr™e_buf_blocks
,
block
);

153 
numblocks
 = 
	`li¡L’gth
(
£rv”
.
aof_»wr™e_buf_blocks
);

154 ià(((
numblocks
+1) % 10) == 0) {

155 
Ëv–
 = ((
numblocks
+1è% 100è=ğ0 ? 
LL_WARNING
 :

156 
LL_NOTICE
;

157 
	`£rv”Log
(
Ëv–
,"Background AOF buffer size: %lu MB",

158 
	`aofRewr™eBufãrSize
()/(1024*1024));

165 ià(
	`«G‘FeEv’ts
(
£rv”
.
–
,£rv”.
aof_pe_wr™e_d©a_to_chd
) == 0) {

166 
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
aof_pe_wr™e_d©a_to_chd
,

167 
AE_WRITABLE
, 
aofChdWr™eDiffD©a
, 
NULL
);

169 
	}
}

174 
ssize_t
 
	$aofRewr™eBufãrWr™e
(
fd
) {

175 
li¡Node
 *
Ê
;

176 
li¡I‹r
 
li
;

177 
ssize_t
 
couÁ
 = 0;

179 
	`li¡Rewšd
(
£rv”
.
aof_»wr™e_buf_blocks
,&
li
);

180 (
Ê
 = 
	`li¡Next
(&
li
))) {

181 
aoäwblock
 *
block
 = 
	`li¡NodeV®ue
(
Ê
);

182 
ssize_t
 
nwr™‹n
;

184 ià(
block
->
u£d
) {

185 
nwr™‹n
 = 
	`wr™e
(
fd
,
block
->
buf
,block->
u£d
);

186 ià(
nwr™‹n
 !ğ(
ssize_t
)
block
->
u£d
) {

187 ià(
nwr™‹n
 =ğ0è
”ºo
 = 
EIO
;

190 
couÁ
 +ğ
nwr™‹n
;

193  
couÁ
;

194 
	}
}

202 
	$aofFsyncInProg»ss
() {

203  
	`bioP’dšgJobsOfTy³
(
BIO_AOF_FSYNC
) != 0;

204 
	}
}

208 
	$aof_background_fsync
(
fd
) {

209 
	`bioC»©eBackgroundJob
(
BIO_AOF_FSYNC
,(*)()
fd
,
NULL
,NULL);

210 
	}
}

213 
	$klAµ’dOÆyChd
() {

214 
¡©loc
;

216 ià(
£rv”
.
aof_chd_pid
 == -1) ;

218 
	`£rv”Log
(
LL_NOTICE
,"Killing„unning AOF„ewrite child: %ld",

219 (è
£rv”
.
aof_chd_pid
);

220 ià(
	`kl
(
£rv”
.
aof_chd_pid
,
SIGUSR1
) != -1) {

221 
	`wa™3
(&
¡©loc
,0,
NULL
è!ğ
£rv”
.
aof_chd_pid
);

224 
	`aofRewr™eBufãrRe£t
();

225 
	`aofRemoveTempFe
(
£rv”
.
aof_chd_pid
);

226 
£rv”
.
aof_chd_pid
 = -1;

227 
£rv”
.
aof_»wr™e_time_¡¬t
 = -1;

229 
	`aofClo£Pes
();

230 
	`şo£ChdInfoPe
();

231 
	`upd©eDiùResizePŞicy
();

232 
	}
}

236 
	$¡İAµ’dOÆy
() {

237 
	`£rv”As£¹
(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
);

238 
	`æushAµ’dOÆyFe
(1);

239 
	`»dis_fsync
(
£rv”
.
aof_fd
);

240 
	`şo£
(
£rv”
.
aof_fd
);

242 
£rv”
.
aof_fd
 = -1;

243 
£rv”
.
aof_£Ëùed_db
 = -1;

244 
£rv”
.
aof_¡©e
 = 
AOF_OFF
;

245 
£rv”
.
aof_»wr™e_scheduËd
 = 0;

246 
	`klAµ’dOÆyChd
();

247 
	}
}

251 
	$¡¬tAµ’dOÆy
() {

252 
cwd
[
MAXPATHLEN
];

253 
Ãwfd
;

255 
Ãwfd
 = 
	`İ’
(
£rv”
.
aof_f’ame
,
O_WRONLY
|
O_APPEND
|
O_CREAT
,0644);

256 
	`£rv”As£¹
(
£rv”
.
aof_¡©e
 =ğ
AOF_OFF
);

257 ià(
Ãwfd
 == -1) {

258 *
cwdp
 = 
	`g‘cwd
(
cwd
,
MAXPATHLEN
);

260 
	`£rv”Log
(
LL_WARNING
,

263 
£rv”
.
aof_f’ame
,

264 
cwdp
 ? cwdp : "unknown",

265 
	`¡»¼Ü
(
”ºo
));

266  
C_ERR
;

268 ià(
	`hasAùiveChdProûss
(è&& 
£rv”
.
aof_chd_pid
 == -1) {

269 
£rv”
.
aof_»wr™e_scheduËd
 = 1;

270 
	`£rv”Log
(
LL_WARNING
,"AOF wasƒnabled buthere is‡lready‡nother background operation. An AOF background was scheduledo start when…ossible.");

275 ià(
£rv”
.
aof_chd_pid
 != -1) {

276 
	`£rv”Log
(
LL_WARNING
,"AOF wasƒnabled buthere is‡lready‡n AOF„ewriting in background. Stopping background AOF‡nd starting‡„ewrite‚ow.");

277 
	`klAµ’dOÆyChd
();

279 ià(
	`»wr™eAµ’dOÆyFeBackground
(è=ğ
C_ERR
) {

280 
	`şo£
(
Ãwfd
);

281 
	`£rv”Log
(
LL_WARNING
,"Redis‚eedsoƒnablehe AOF but can'trigger‡ background AOF„ewrite operation. Checkhe‡bove†ogs for more info‡boutheƒrror.");

282  
C_ERR
;

287 
£rv”
.
aof_¡©e
 = 
AOF_WAIT_REWRITE
;

288 
£rv”
.
aof_Ï¡_fsync
 = s”v”.
unixtime
;

289 
£rv”
.
aof_fd
 = 
Ãwfd
;

290  
C_OK
;

291 
	}
}

300 
ssize_t
 
	$aofWr™e
(
fd
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

301 
ssize_t
 
nwr™‹n
 = 0, 
tÙwr™‹n
 = 0;

303 
Ën
) {

304 
nwr™‹n
 = 
	`wr™e
(
fd
, 
buf
, 
Ën
);

306 ià(
nwr™‹n
 < 0) {

307 ià(
”ºo
 =ğ
EINTR
) ;

308  
tÙwr™‹n
 ?otwritten : -1;

311 
Ën
 -ğ
nwr™‹n
;

312 
buf
 +ğ
nwr™‹n
;

313 
tÙwr™‹n
 +ğ
nwr™‹n
;

316  
tÙwr™‹n
;

317 
	}
}

337 
	#AOF_WRITE_LOG_ERROR_RATE
 30

	)

338 
	$æushAµ’dOÆyFe
(
fÜû
) {

339 
ssize_t
 
nwr™‹n
;

340 
sync_š_´og»ss
 = 0;

341 
m¡ime_t
 
Ï‹ncy
;

343 ià(
	`sd¦’
(
£rv”
.
aof_buf
) == 0) {

349 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_EVERYSEC
 &&

350 
£rv”
.
aof_fsync_off£t
 !ğ£rv”.
aof_cu¼’t_size
 &&

351 
£rv”
.
unixtime
 > s”v”.
aof_Ï¡_fsync
 &&

352 !(
sync_š_´og»ss
 = 
	`aofFsyncInProg»ss
())) {

353 
Œy_fsync
;

359 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_EVERYSEC
)

360 
sync_š_´og»ss
 = 
	`aofFsyncInProg»ss
();

362 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_EVERYSEC
 && !
fÜû
) {

366 ià(
sync_š_´og»ss
) {

367 ià(
£rv”
.
aof_æush_po¡pÚed_¡¬t
 == 0) {

370 
£rv”
.
aof_æush_po¡pÚed_¡¬t
 = s”v”.
unixtime
;

372 } ià(
£rv”
.
unixtime
 - s”v”.
aof_æush_po¡pÚed_¡¬t
 < 2) {

379 
£rv”
.
aof_d–ayed_fsync
++;

380 
	`£rv”Log
(
LL_NOTICE
,"Asynchronous AOF fsync isakingoo†ong (disk is busy?). Writinghe AOF buffer without waiting for fsynco complete,his may slow down Redis.");

389 ià(
£rv”
.
aof_æush_¦“p
 && 
	`sd¦’
(£rv”.
aof_buf
)) {

390 
	`u¦“p
(
£rv”
.
aof_æush_¦“p
);

393 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

394 
nwr™‹n
 = 
	`aofWr™e
(
£rv”
.
aof_fd
,£rv”.
aof_buf
,
	`sd¦’
(server.aof_buf));

395 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

401 ià(
sync_š_´og»ss
) {

402 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-wr™e-³ndšg-fsync",
Ï‹ncy
);

403 } ià(
	`hasAùiveChdProûss
()) {

404 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-wr™e-aùive-chd",
Ï‹ncy
);

406 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-wr™e-®Úe",
Ï‹ncy
);

408 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-wr™e",
Ï‹ncy
);

411 
£rv”
.
aof_æush_po¡pÚed_¡¬t
 = 0;

413 ià(
nwr™‹n
 !ğ(
ssize_t
)
	`sd¦’
(
£rv”
.
aof_buf
)) {

414 
time_t
 
Ï¡_wr™e_”rÜ_log
 = 0;

415 
ÿn_log
 = 0;

418 ià((
£rv”
.
unixtime
 - 
Ï¡_wr™e_”rÜ_log
è> 
AOF_WRITE_LOG_ERROR_RATE
) {

419 
ÿn_log
 = 1;

420 
Ï¡_wr™e_”rÜ_log
 = 
£rv”
.
unixtime
;

424 ià(
nwr™‹n
 == -1) {

425 ià(
ÿn_log
) {

426 
	`£rv”Log
(
LL_WARNING
,"Error writingohe AOF file: %s",

427 
	`¡»¼Ü
(
”ºo
));

428 
£rv”
.
aof_Ï¡_wr™e_”ºo
 = 
”ºo
;

431 ià(
ÿn_log
) {

432 
	`£rv”Log
(
LL_WARNING
,"Short write while writingo "

435 ()
nwr™‹n
,

436 ()
	`sd¦’
(
£rv”
.
aof_buf
));

439 ià(
	`árunÿ‹
(
£rv”
.
aof_fd
, s”v”.
aof_cu¼’t_size
) == -1) {

440 ià(
ÿn_log
) {

441 
	`£rv”Log
(
LL_WARNING
, "Could‚ot„emove short write "

444 "árunÿ‹: %s", 
	`¡»¼Ü
(
”ºo
));

449 
nwr™‹n
 = -1;

451 
£rv”
.
aof_Ï¡_wr™e_”ºo
 = 
ENOSPC
;

455 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_ALWAYS
) {

460 
	`£rv”Log
(
LL_WARNING
,"Can't„ecover from AOF writeƒrror whenhe AOF fsync…olicy is 'always'. Exiting...");

461 
	`ex™
(1);

466 
£rv”
.
aof_Ï¡_wr™e_¡©us
 = 
C_ERR
;

470 ià(
nwr™‹n
 > 0) {

471 
£rv”
.
aof_cu¼’t_size
 +ğ
nwr™‹n
;

472 
	`sd¤ªge
(
£rv”
.
aof_buf
,
nwr™‹n
,-1);

479 ià(
£rv”
.
aof_Ï¡_wr™e_¡©us
 =ğ
C_ERR
) {

480 
	`£rv”Log
(
LL_WARNING
,

482 
£rv”
.
aof_Ï¡_wr™e_¡©us
 = 
C_OK
;

485 
£rv”
.
aof_cu¼’t_size
 +ğ
nwr™‹n
;

489 ià((
	`sd¦’
(
£rv”
.
aof_buf
)+
	`sd§va
(server.aof_buf)) < 4000) {

490 
	`sdsş—r
(
£rv”
.
aof_buf
);

492 
	`sdsä“
(
£rv”
.
aof_buf
);

493 
£rv”
.
aof_buf
 = 
	`sd£m±y
();

496 
Œy_fsync
:

499 ià(
£rv”
.
aof_no_fsync_Ú_»wr™e
 && 
	`hasAùiveChdProûss
())

503 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_ALWAYS
) {

506 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

507 
	`»dis_fsync
(
£rv”
.
aof_fd
);

508 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

509 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-fsync-®ways",
Ï‹ncy
);

510 
£rv”
.
aof_fsync_off£t
 = s”v”.
aof_cu¼’t_size
;

511 
£rv”
.
aof_Ï¡_fsync
 = s”v”.
unixtime
;

512 } ià((
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_EVERYSEC
 &&

513 
£rv”
.
unixtime
 > s”v”.
aof_Ï¡_fsync
)) {

514 ià(!
sync_š_´og»ss
) {

515 
	`aof_background_fsync
(
£rv”
.
aof_fd
);

516 
£rv”
.
aof_fsync_off£t
 = s”v”.
aof_cu¼’t_size
;

518 
£rv”
.
aof_Ï¡_fsync
 = s”v”.
unixtime
;

520 
	}
}

522 
sds
 
	$ÿtAµ’dOÆyG’”icCommªd
(
sds
 
d¡
, 
¬gc
, 
robj
 **
¬gv
) {

523 
buf
[32];

524 
Ën
, 
j
;

525 
robj
 *
o
;

527 
buf
[0] = '*';

528 
Ën
 = 1+
	`Î2¡ršg
(
buf
+1,(buf)-1,
¬gc
);

529 
buf
[
Ën
++] = '\r';

530 
buf
[
Ën
++] = '\n';

531 
d¡
 = 
	`sdsÿ’
(d¡,
buf
,
Ën
);

533 
j
 = 0; j < 
¬gc
; j++) {

534 
o
 = 
	`g‘DecodedObjeù
(
¬gv
[
j
]);

535 
buf
[0] = '$';

536 
Ën
 = 1+
	`Î2¡ršg
(
buf
+1,(buf)-1,
	`sd¦’
(
o
->
±r
));

537 
buf
[
Ën
++] = '\r';

538 
buf
[
Ën
++] = '\n';

539 
d¡
 = 
	`sdsÿ’
(d¡,
buf
,
Ën
);

540 
d¡
 = 
	`sdsÿ’
(d¡,
o
->
±r
,
	`sd¦’
(o->ptr));

541 
d¡
 = 
	`sdsÿ’
(dst,"\r\n",2);

542 
	`deüRefCouÁ
(
o
);

544  
d¡
;

545 
	}
}

554 
sds
 
	$ÿtAµ’dOÆyExpœeAtCommªd
(
sds
 
buf
, 
»disCommªd
 *
cmd
, 
robj
 *
key
,„obj *
£cÚds
) {

555 
wh’
;

556 
robj
 *
¬gv
[3];

559 
£cÚds
 = 
	`g‘DecodedObjeù
(seconds);

560 
wh’
 = 
	`¡¹Şl
(
£cÚds
->
±r
,
NULL
,10);

562 ià(
cmd
->
´oc
 =ğ
expœeCommªd
 || cmd->´oø=ğ
£‹xCommªd
 ||

563 
cmd
->
´oc
 =ğ
expœ—tCommªd
)

565 
wh’
 *= 1000;

568 ià(
cmd
->
´oc
 =ğ
expœeCommªd
 || cmd->´oø=ğ
³xpœeCommªd
 ||

569 
cmd
->
´oc
 =ğ
£‹xCommªd
 || cmd->´oø=ğ
p£‹xCommªd
)

571 
wh’
 +ğ
	`m¡ime
();

573 
	`deüRefCouÁ
(
£cÚds
);

575 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
("PEXPIREAT",9);

576 
¬gv
[1] = 
key
;

577 
¬gv
[2] = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
wh’
);

578 
buf
 = 
	`ÿtAµ’dOÆyG’”icCommªd
(buf, 3, 
¬gv
);

579 
	`deüRefCouÁ
(
¬gv
[0]);

580 
	`deüRefCouÁ
(
¬gv
[2]);

581  
buf
;

582 
	}
}

584 
	$ãedAµ’dOÆyFe
(
»disCommªd
 *
cmd
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
) {

585 
sds
 
buf
 = 
	`sd£m±y
();

586 
robj
 *
tm·rgv
[3];

590 ià(
diùid
 !ğ
£rv”
.
aof_£Ëùed_db
) {

591 
£ldb
[64];

593 
	`¢´štf
(
£ldb
,(£ldb),"%d",
diùid
);

594 
buf
 = 
	`sdsÿrštf
(buf,"*2\r\n$6\r\nSELECT\r\n$%lu\r\n%s\r\n",

595 ()
	`¡¾’
(
£ldb
),seldb);

596 
£rv”
.
aof_£Ëùed_db
 = 
diùid
;

599 ià(
cmd
->
´oc
 =ğ
expœeCommªd
 || cmd->´oø=ğ
³xpœeCommªd
 ||

600 
cmd
->
´oc
 =ğ
expœ—tCommªd
) {

602 
buf
 = 
	`ÿtAµ’dOÆyExpœeAtCommªd
(buf,
cmd
,
¬gv
[1],argv[2]);

603 } ià(
cmd
->
´oc
 =ğ
£‹xCommªd
 || cmd->´oø=ğ
p£‹xCommªd
) {

605 
tm·rgv
[0] = 
	`ü—‹SŒšgObjeù
("SET",3);

606 
tm·rgv
[1] = 
¬gv
[1];

607 
tm·rgv
[2] = 
¬gv
[3];

608 
buf
 = 
	`ÿtAµ’dOÆyG’”icCommªd
(buf,3,
tm·rgv
);

609 
	`deüRefCouÁ
(
tm·rgv
[0]);

610 
buf
 = 
	`ÿtAµ’dOÆyExpœeAtCommªd
(buf,
cmd
,
¬gv
[1],argv[2]);

611 } ià(
cmd
->
´oc
 =ğ
£tCommªd
 && 
¬gc
 > 3) {

612 
i
;

613 
robj
 *
ex¬g
 = 
NULL
, *
px¬g
 = NULL;

615 
buf
 = 
	`ÿtAµ’dOÆyG’”icCommªd
(buf,3,
¬gv
);

616 
i
 = 3; i < 
¬gc
; i ++) {

617 ià(!
	`¡rÿ£cmp
(
¬gv
[
i
]->
±r
, "ex")è
ex¬g
 =‡rgv[i+1];

618 ià(!
	`¡rÿ£cmp
(
¬gv
[
i
]->
±r
, "px")è
px¬g
 =‡rgv[i+1];

620 
	`£rv”As£¹
(!(
ex¬g
 && 
px¬g
));

621 ià(
ex¬g
)

622 
buf
 = 
	`ÿtAµ’dOÆyExpœeAtCommªd
(buf,
£rv”
.
expœeCommªd
,
¬gv
[1],

623 
ex¬g
);

624 ià(
px¬g
)

625 
buf
 = 
	`ÿtAµ’dOÆyExpœeAtCommªd
(buf,
£rv”
.
³xpœeCommªd
,
¬gv
[1],

626 
px¬g
);

631 
buf
 = 
	`ÿtAµ’dOÆyG’”icCommªd
(buf,
¬gc
,
¬gv
);

637 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_ON
)

638 
£rv”
.
aof_buf
 = 
	`sdsÿ’
(£rv”.aof_buf,
buf
,
	`sd¦’
(buf));

644 ià(
£rv”
.
aof_chd_pid
 != -1)

645 
	`aofRewr™eBufãrAµ’d
((*)
buf
,
	`sd¦’
(buf));

647 
	`sdsä“
(
buf
);

648 
	}
}

656 
ş›Á
 *
	$ü—‹AOFCl›Á
() {

657 
ş›Á
 *
c
 = 
	`zm®loc
((*c));

659 
	`£ËùDb
(
c
,0);

660 
c
->
id
 = 
CLIENT_ID_AOF
;

661 
c
->
cÚn
 = 
NULL
;

662 
c
->
Çme
 = 
NULL
;

663 
c
->
qu”ybuf
 = 
	`sd£m±y
();

664 
c
->
qu”ybuf_³ak
 = 0;

665 
c
->
¬gc
 = 0;

666 
c
->
¬gv
 = 
NULL
;

667 
c
->
buåos
 = 0;

668 
c
->
æags
 = 0;

669 
c
->
bty³
 = 
BLOCKED_NONE
;

672 
c
->
»¶¡©e
 = 
SLAVE_STATE_WAIT_BGSAVE_START
;

673 
c
->
»¶y
 = 
	`li¡C»©e
();

674 
c
->
»¶y_by‹s
 = 0;

675 
c
->
obuf_soá_lim™_»ached_time
 = 0;

676 
c
->
w©ched_keys
 = 
	`li¡C»©e
();

677 
c
->
³”id
 = 
NULL
;

678 
c
->
»¥
 = 2;

679 
c
->
u£r
 = 
NULL
;

680 
	`li¡S‘F»eM‘hod
(
c
->
»¶y
,
ä“Cl›ÁR•lyV®ue
);

681 
	`li¡S‘DupM‘hod
(
c
->
»¶y
,
dupCl›ÁR•lyV®ue
);

682 
	`š™Cl›ÁMuÉiS‹
(
c
);

683  
c
;

684 
	}
}

686 
	$ä“FakeCl›ÁArgv
(
ş›Á
 *
c
) {

687 
j
;

689 
j
 = 0; j < 
c
->
¬gc
; j++)

690 
	`deüRefCouÁ
(
c
->
¬gv
[
j
]);

691 
	`zä“
(
c
->
¬gv
);

692 
	}
}

694 
	$ä“FakeCl›Á
(
ş›Á
 *
c
) {

695 
	`sdsä“
(
c
->
qu”ybuf
);

696 
	`li¡R–—£
(
c
->
»¶y
);

697 
	`li¡R–—£
(
c
->
w©ched_keys
);

698 
	`ä“Cl›ÁMuÉiS‹
(
c
);

699 
	`zä“
(
c
);

700 
	}
}

705 
	$lßdAµ’dOÆyFe
(*
f’ame
) {

706 
ş›Á
 *
çkeCl›Á
;

707 
FILE
 *
å
 = 
	`fİ’
(
f’ame
,"r");

708 
»dis_¡©
 
sb
;

709 
Şd_aof_¡©e
 = 
£rv”
.
aof_¡©e
;

710 
loİs
 = 0;

711 
off_t
 
v®id_up_to
 = 0;

712 
off_t
 
v®id_befÜe_muÉi
 = 0;

714 ià(
å
 =ğ
NULL
) {

715 
	`£rv”Log
(
LL_WARNING
,"F©®ƒ¼Ü: cª'ˆİ’h­³nd†og ffÜ„—dšg: %s",
	`¡»¼Ü
(
”ºo
));

716 
	`ex™
(1);

723 ià(
å
 && 
	`»dis_f¡©
(
	`f’o
(å),&
sb
è!ğ-1 && sb.
¡_size
 == 0) {

724 
£rv”
.
aof_cu¼’t_size
 = 0;

725 
£rv”
.
aof_fsync_off£t
 = s”v”.
aof_cu¼’t_size
;

726 
	`fşo£
(
å
);

727  
C_ERR
;

732 
£rv”
.
aof_¡©e
 = 
AOF_OFF
;

734 
çkeCl›Á
 = 
	`ü—‹AOFCl›Á
();

735 
	`¡¬tLßdšgFe
(
å
, 
f’ame
, 
RDBFLAGS_AOF_PREAMBLE
);

739 
sig
[5];

740 ià(
	`ä—d
(
sig
,1,5,
å
è!ğ5 || 
	`memcmp
(sig,"REDIS",5) != 0) {

742 ià(
	`f£ek
(
å
,0,
SEEK_SET
è=ğ-1è
»ad”r
;

745 
rio
 
rdb
;

747 
	`£rv”Log
(
LL_NOTICE
,"Reading RDB…reamble from AOF file...");

748 ià(
	`f£ek
(
å
,0,
SEEK_SET
è=ğ-1è
»ad”r
;

749 
	`rioIn™W™hFe
(&
rdb
,
å
);

750 ià(
	`rdbLßdRio
(&
rdb
,
RDBFLAGS_AOF_PREAMBLE
,
NULL
è!ğ
C_OK
) {

751 
	`£rv”Log
(
LL_WARNING
,"Error„eadinghe RDB…reamble ofhe AOF file, AOF†oading‡borted");

752 
»ad”r
;

754 
	`£rv”Log
(
LL_NOTICE
,"Readinghe„emaining AOFail...");

760 
¬gc
, 
j
;

761 
Ën
;

762 
robj
 **
¬gv
;

763 
buf
[128];

764 
sds
 
¬gsds
;

765 
»disCommªd
 *
cmd
;

768 ià(!(
loİs
++ % 1000)) {

769 
	`lßdšgProg»ss
(
	`á–lo
(
å
));

770 
	`´oûssEv’tsWheBlocked
();

771 
	`´oûssModuËLßdšgProg»ssEv’t
(1);

774 ià(
	`fg‘s
(
buf
,(buf),
å
è=ğ
NULL
) {

775 ià(
	`ãof
(
å
))

778 
»ad”r
;

780 ià(
buf
[0] !ğ'*'è
fm‹¼
;

781 ià(
buf
[1] =ğ'\0'è
»ad”r
;

782 
¬gc
 = 
	`©oi
(
buf
+1);

783 ià(
¬gc
 < 1è
fm‹¼
;

787 
¬gv
 = 
	`zm®loc
((
robj
*)*
¬gc
);

788 
çkeCl›Á
->
¬gc
 =‡rgc;

789 
çkeCl›Á
->
¬gv
 =‡rgv;

791 
j
 = 0; j < 
¬gc
; j++) {

793 *
»ad»s
 = 
	`fg‘s
(
buf
,(buf),
å
);

794 ià(
»ad»s
 =ğ
NULL
 || 
buf
[0] != '$') {

795 
çkeCl›Á
->
¬gc
 = 
j
;

796 
	`ä“FakeCl›ÁArgv
(
çkeCl›Á
);

797 ià(
»ad»s
 =ğ
NULL
)

798 
»ad”r
;

800 
fm‹¼
;

802 
Ën
 = 
	`¡¹Ş
(
buf
+1,
NULL
,10);

805 
¬gsds
 = 
	`sd¢ewËn
(
SDS_NOINIT
,
Ën
);

806 ià(
Ën
 && 
	`ä—d
(
¬gsds
,Ën,1,
å
) == 0) {

807 
	`sdsä“
(
¬gsds
);

808 
çkeCl›Á
->
¬gc
 = 
j
;

809 
	`ä“FakeCl›ÁArgv
(
çkeCl›Á
);

810 
»ad”r
;

812 
¬gv
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,
¬gsds
);

815 ià(
	`ä—d
(
buf
,2,1,
å
) == 0) {

816 
çkeCl›Á
->
¬gc
 = 
j
+1;

817 
	`ä“FakeCl›ÁArgv
(
çkeCl›Á
);

818 
»ad”r
;

823 
cmd
 = 
	`lookupCommªd
(
¬gv
[0]->
±r
);

824 ià(!
cmd
) {

825 
	`£rv”Log
(
LL_WARNING
,

827 (*)
¬gv
[0]->
±r
);

828 
	`ex™
(1);

831 ià(
cmd
 =ğ
£rv”
.
muÉiCommªd
è
v®id_befÜe_muÉi
 = 
v®id_up_to
;

834 
çkeCl›Á
->
cmd
 = fakeCl›Á->
Ï¡cmd
 = cmd;

835 ià(
çkeCl›Á
->
æags
 & 
CLIENT_MULTI
 &&

836 
çkeCl›Á
->
cmd
->
´oc
 !ğ
execCommªd
)

838 
	`queueMuÉiCommªd
(
çkeCl›Á
);

840 
cmd
->
	`´oc
(
çkeCl›Á
);

844 
	`£rv”As£¹
(
çkeCl›Á
->
buåos
 == 0 &&

845 
	`li¡L’gth
(
çkeCl›Á
->
»¶y
) == 0);

848 
	`£rv”As£¹
((
çkeCl›Á
->
æags
 & 
CLIENT_BLOCKED
) == 0);

852 
	`ä“FakeCl›ÁArgv
(
çkeCl›Á
);

853 
çkeCl›Á
->
cmd
 = 
NULL
;

854 ià(
£rv”
.
aof_lßd_Œunÿ‹d
è
v®id_up_to
 = 
	`á–lo
(
å
);

855 ià(
£rv”
.
key_lßd_d–ay
)

856 
	`u¦“p
(
£rv”
.
key_lßd_d–ay
);

863 ià(
çkeCl›Á
->
æags
 & 
CLIENT_MULTI
) {

864 
	`£rv”Log
(
LL_WARNING
,

866 
v®id_up_to
 = 
v®id_befÜe_muÉi
;

867 
uxeof
;

870 
lßded_ok
:

871 
	`fşo£
(
å
);

872 
	`ä“FakeCl›Á
(
çkeCl›Á
);

873 
£rv”
.
aof_¡©e
 = 
Şd_aof_¡©e
;

874 
	`¡İLßdšg
(1);

875 
	`aofUpd©eCu¼’tSize
();

876 
£rv”
.
aof_»wr™e_ba£_size
 = s”v”.
aof_cu¼’t_size
;

877 
£rv”
.
aof_fsync_off£t
 = s”v”.
aof_cu¼’t_size
;

878  
C_OK
;

880 
»ad”r
:

881 ià(!
	`ãof
(
å
)) {

882 ià(
çkeCl›Á
è
	`ä“FakeCl›Á
(fakeClient);

883 
	`fşo£
(
å
);

884 
	`£rv”Log
(
LL_WARNING
,"UÄecov”abËƒ¼Ü„—dšgh­³nd oÆy fe: %s", 
	`¡»¼Ü
(
”ºo
));

885 
	`ex™
(1);

888 
uxeof
:

889 ià(
£rv”
.
aof_lßd_Œunÿ‹d
) {

890 
	`£rv”Log
(
LL_WARNING
,"!!! Warning: short„ead while†oadinghe AOF file !!!");

891 
	`£rv”Log
(
LL_WARNING
,"!!! Truncatinghe AOF‡t offset %llu !!!",

892 (è
v®id_up_to
);

893 ià(
v®id_up_to
 =ğ-1 || 
	`Œunÿ‹
(
f’ame
,valid_up_to) == -1) {

894 ià(
v®id_up_to
 == -1) {

895 
	`£rv”Log
(
LL_WARNING
,"Last valid command offset is invalid");

897 
	`£rv”Log
(
LL_WARNING
,"Errorruncatinghe AOF file: %s",

898 
	`¡»¼Ü
(
”ºo
));

903 ià(
£rv”
.
aof_fd
 !ğ-1 && 
	`l£ek
(£rv”.aof_fd,0,
SEEK_END
) == -1) {

904 
	`£rv”Log
(
LL_WARNING
,"Can't seekheƒnd ofhe AOF file: %s",

905 
	`¡»¼Ü
(
”ºo
));

907 
	`£rv”Log
(
LL_WARNING
,

909 
lßded_ok
;

913 ià(
çkeCl›Á
è
	`ä“FakeCl›Á
(fakeClient);

914 
	`fşo£
(
å
);

915 
	`£rv”Log
(
LL_WARNING
,"Unexpectedƒnd of file„eadinghe‡ppend only file. You can: 1) Make‡ backup of your AOF file,hen use ./redis-check-aof --fix <filename>. 2) Alternatively you can sethe 'aof-load-truncated' configuration optiono yes‡nd„estarthe server.");

916 
	`ex™
(1);

918 
fm‹¼
:

919 ià(
çkeCl›Á
è
	`ä“FakeCl›Á
(fakeClient);

920 
	`fşo£
(
å
);

921 
	`£rv”Log
(
LL_WARNING
,"Bad file format„eadinghe‡ppend only file: make‡ backup of your AOF file,hen use ./redis-check-aof --fix <filename>");

922 
	`ex™
(1);

923 
	}
}

931 
	$rioWr™eBulkObjeù
(
rio
 *
r
, 
robj
 *
obj
) {

934 ià(
obj
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

935  
	`rioWr™eBulkLÚgLÚg
(
r
,()
obj
->
±r
);

936 } ià(
	`sdsEncodedObjeù
(
obj
)) {

937  
	`rioWr™eBulkSŒšg
(
r
,
obj
->
±r
,
	`sd¦’
(obj->ptr));

939 
	`£rv”Pªic
("Unknown stringƒncoding");

941 
	}
}

945 
	$»wr™eLi¡Objeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

946 
couÁ
 = 0, 
™ems
 = 
	`li¡Ty³L’gth
(
o
);

948 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

949 
quickli¡
 *
li¡
 = 
o
->
±r
;

950 
quickli¡I‹r
 *
li
 = 
	`quickli¡G‘I‹¿tÜ
(
li¡
, 
AL_START_HEAD
);

951 
quickli¡EÁry
 
’Œy
;

953 
	`quickli¡Next
(
li
,&
’Œy
)) {

954 ià(
couÁ
 == 0) {

955 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

956 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

957 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
) == 0)  0;

958 ià(
	`rioWr™eBulkSŒšg
(
r
,"RPUSH",5) == 0)  0;

959 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

962 ià(
’Œy
.
v®ue
) {

963 ià(
	`rioWr™eBulkSŒšg
(
r
,(*)
’Œy
.
v®ue
,’Œy.
sz
) == 0)  0;

965 ià(
	`rioWr™eBulkLÚgLÚg
(
r
,
’Œy
.
lÚgv®
) == 0)  0;

967 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

968 
™ems
--;

970 
	`quickli¡R–—£I‹¿tÜ
(
li
);

972 
	`£rv”Pªic
("Unknown†istƒncoding");

975 
	}
}

979 
	$»wr™eS‘Objeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

980 
couÁ
 = 0, 
™ems
 = 
	`£tTy³Size
(
o
);

982 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

983 
ii
 = 0;

984 
št64_t
 
Îv®
;

986 
	`št£tG‘
(
o
->
±r
,
ii
++,&
Îv®
)) {

987 ià(
couÁ
 == 0) {

988 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

989 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

991 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
) == 0)  0;

992 ià(
	`rioWr™eBulkSŒšg
(
r
,"SADD",4) == 0)  0;

993 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

995 ià(
	`rioWr™eBulkLÚgLÚg
(
r
,
Îv®
) == 0)  0;

996 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

997 
™ems
--;

999 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1000 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
o
->
±r
);

1001 
diùEÁry
 *
de
;

1003 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1004 
sds
 
–e
 = 
	`diùG‘Key
(
de
);

1005 ià(
couÁ
 == 0) {

1006 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

1007 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

1009 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
) == 0)  0;

1010 ià(
	`rioWr™eBulkSŒšg
(
r
,"SADD",4) == 0)  0;

1011 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1013 ià(
	`rioWr™eBulkSŒšg
(
r
,
–e
,
	`sd¦’
(ele)) == 0)  0;

1014 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

1015 
™ems
--;

1017 
	`diùR–—£I‹¿tÜ
(
di
);

1019 
	`£rv”Pªic
("Unknown setƒncoding");

1022 
	}
}

1026 
	$»wr™eSÜ‹dS‘Objeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

1027 
couÁ
 = 0, 
™ems
 = 
	`z£tL’gth
(
o
);

1029 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1030 *
zl
 = 
o
->
±r
;

1031 *
•Œ
, *
¥Œ
;

1032 *
v¡r
;

1033 
vËn
;

1034 
vÎ
;

1035 
scÜe
;

1037 
•Œ
 = 
	`zli¡Index
(
zl
,0);

1038 
	`£rv”As£¹
(
•Œ
 !ğ
NULL
);

1039 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

1040 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

1042 
•Œ
 !ğ
NULL
) {

1043 
	`£rv”As£¹
(
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vÎ
));

1044 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

1046 ià(
couÁ
 == 0) {

1047 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

1048 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

1050 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
*2) == 0)  0;

1051 ià(
	`rioWr™eBulkSŒšg
(
r
,"ZADD",4) == 0)  0;

1052 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1054 ià(
	`rioWr™eBulkDoubË
(
r
,
scÜe
) == 0)  0;

1055 ià(
v¡r
 !ğ
NULL
) {

1056 ià(
	`rioWr™eBulkSŒšg
(
r
,(*)
v¡r
,
vËn
) == 0)  0;

1058 ià(
	`rioWr™eBulkLÚgLÚg
(
r
,
vÎ
) == 0)  0;

1060 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

1061 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

1062 
™ems
--;

1064 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1065 
z£t
 *
zs
 = 
o
->
±r
;

1066 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
zs
->
diù
);

1067 
diùEÁry
 *
de
;

1069 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1070 
sds
 
–e
 = 
	`diùG‘Key
(
de
);

1071 *
scÜe
 = 
	`diùG‘V®
(
de
);

1073 ià(
couÁ
 == 0) {

1074 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

1075 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

1077 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
*2) == 0)  0;

1078 ià(
	`rioWr™eBulkSŒšg
(
r
,"ZADD",4) == 0)  0;

1079 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1081 ià(
	`rioWr™eBulkDoubË
(
r
,*
scÜe
) == 0)  0;

1082 ià(
	`rioWr™eBulkSŒšg
(
r
,
–e
,
	`sd¦’
(ele)) == 0)  0;

1083 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

1084 
™ems
--;

1086 
	`diùR–—£I‹¿tÜ
(
di
);

1088 
	`£rv”Pªic
("Unknown sorted zsetƒncoding");

1091 
	}
}

1099 
	$rioWr™eHashI‹¿tÜCursÜ
(
rio
 *
r
, 
hashTy³I‹¿tÜ
 *
hi
, 
wh©
) {

1100 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1101 *
v¡r
 = 
NULL
;

1102 
vËn
 = 
UINT_MAX
;

1103 
vÎ
 = 
LLONG_MAX
;

1105 
	`hashTy³Cu¼’tFromZli¡
(
hi
, 
wh©
, &
v¡r
, &
vËn
, &
vÎ
);

1106 ià(
v¡r
)

1107  
	`rioWr™eBulkSŒšg
(
r
, (*)
v¡r
, 
vËn
);

1109  
	`rioWr™eBulkLÚgLÚg
(
r
, 
vÎ
);

1110 } ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1111 
sds
 
v®ue
 = 
	`hashTy³Cu¼’tFromHashTabË
(
hi
, 
wh©
);

1112  
	`rioWr™eBulkSŒšg
(
r
, 
v®ue
, 
	`sd¦’
(value));

1115 
	`£rv”Pªic
("Unknown hashƒncoding");

1117 
	}
}

1121 
	$»wr™eHashObjeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

1122 
hashTy³I‹¿tÜ
 *
hi
;

1123 
couÁ
 = 0, 
™ems
 = 
	`hashTy³L’gth
(
o
);

1125 
hi
 = 
	`hashTy³In™I‹¿tÜ
(
o
);

1126 
	`hashTy³Next
(
hi
è!ğ
C_ERR
) {

1127 ià(
couÁ
 == 0) {

1128 
cmd_™ems
 = (
™ems
 > 
AOF_REWRITE_ITEMS_PER_CMD
) ?

1129 
AOF_REWRITE_ITEMS_PER_CMD
 : 
™ems
;

1131 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',2+
cmd_™ems
*2) == 0)  0;

1132 ià(
	`rioWr™eBulkSŒšg
(
r
,"HMSET",5) == 0)  0;

1133 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1136 ià(
	`rioWr™eHashI‹¿tÜCursÜ
(
r
, 
hi
, 
OBJ_HASH_KEY
) == 0)  0;

1137 ià(
	`rioWr™eHashI‹¿tÜCursÜ
(
r
, 
hi
, 
OBJ_HASH_VALUE
) == 0)  0;

1138 ià(++
couÁ
 =ğ
AOF_REWRITE_ITEMS_PER_CMD
) count = 0;

1139 
™ems
--;

1142 
	`hashTy³R–—£I‹¿tÜ
(
hi
);

1145 
	}
}

1149 
	$rioWr™eBulkSŒ—mID
(
rio
 *
r
,
¡»amID
 *
id
) {

1150 
»tv®
;

1152 
sds
 
»¶yid
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),"%U-%U",
id
->
ms
,id->
£q
);

1153 
»tv®
 = 
	`rioWr™eBulkSŒšg
(
r
,
»¶yid
,
	`sd¦’
(replyid));

1154 
	`sdsä“
(
»¶yid
);

1155  
»tv®
;

1156 
	}
}

1162 
	$rioWr™eSŒ—mP’dšgEÁry
(
rio
 *
r
, 
robj
 *
key
, cÚ¡ *
grou²ame
, 
size_t
 
grou²ame_Ën
, 
¡»amCÚsum”
 *
cÚsum”
, *
¿wid
, 
¡»amNACK
 *
Çck
) {

1165 
¡»amID
 
id
;

1166 
	`¡»amDecodeID
(
¿wid
,&
id
);

1167 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',12) == 0)  0;

1168 ià(
	`rioWr™eBulkSŒšg
(
r
,"XCLAIM",6) == 0)  0;

1169 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1170 ià(
	`rioWr™eBulkSŒšg
(
r
,
grou²ame
,
grou²ame_Ën
) == 0)  0;

1171 ià(
	`rioWr™eBulkSŒšg
(
r
,
cÚsum”
->
Çme
,
	`sd¦’
(consumer->name)) == 0)  0;

1172 ià(
	`rioWr™eBulkSŒšg
(
r
,"0",1) == 0)  0;

1173 ià(
	`rioWr™eBulkSŒ—mID
(
r
,&
id
) == 0)  0;

1174 ià(
	`rioWr™eBulkSŒšg
(
r
,"TIME",4) == 0)  0;

1175 ià(
	`rioWr™eBulkLÚgLÚg
(
r
,
Çck
->
d–iv”y_time
) == 0)  0;

1176 ià(
	`rioWr™eBulkSŒšg
(
r
,"RETRYCOUNT",10) == 0)  0;

1177 ià(
	`rioWr™eBulkLÚgLÚg
(
r
,
Çck
->
d–iv”y_couÁ
) == 0)  0;

1178 ià(
	`rioWr™eBulkSŒšg
(
r
,"JUSTID",6) == 0)  0;

1179 ià(
	`rioWr™eBulkSŒšg
(
r
,"FORCE",5) == 0)  0;

1181 
	}
}

1185 
	$»wr™eSŒ—mObjeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

1186 
¡»am
 *
s
 = 
o
->
±r
;

1187 
¡»amI‹¿tÜ
 
si
;

1188 
	`¡»amI‹¿tÜS¹
(&
si
,
s
,
NULL
,NULL,0);

1189 
¡»amID
 
id
;

1190 
št64_t
 
numf›lds
;

1192 ià(
s
->
Ëngth
) {

1194 
	`¡»amI‹¿tÜG‘ID
(&
si
,&
id
,&
numf›lds
)) {

1199 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',3+
numf›lds
*2) == 0)  0;

1200 ià(
	`rioWr™eBulkSŒšg
(
r
,"XADD",4) == 0)  0;

1201 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1202 ià(
	`rioWr™eBulkSŒ—mID
(
r
,&
id
) == 0)  0;

1203 
numf›lds
--) {

1204 *
f›ld
, *
v®ue
;

1205 
št64_t
 
f›ld_Ën
, 
v®ue_Ën
;

1206 
	`¡»amI‹¿tÜG‘F›ld
(&
si
,&
f›ld
,&
v®ue
,&
f›ld_Ën
,&
v®ue_Ën
);

1207 ià(
	`rioWr™eBulkSŒšg
(
r
,(*)
f›ld
,
f›ld_Ën
) == 0)  0;

1208 ià(
	`rioWr™eBulkSŒšg
(
r
,(*)
v®ue
,
v®ue_Ën
) == 0)  0;

1215 
id
.
ms
 = 0; id.
£q
 = 1;

1216 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',7) == 0)  0;

1217 ià(
	`rioWr™eBulkSŒšg
(
r
,"XADD",4) == 0)  0;

1218 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1219 ià(
	`rioWr™eBulkSŒšg
(
r
,"MAXLEN",6) == 0)  0;

1220 ià(
	`rioWr™eBulkSŒšg
(
r
,"0",1) == 0)  0;

1221 ià(
	`rioWr™eBulkSŒ—mID
(
r
,&
id
) == 0)  0;

1222 ià(
	`rioWr™eBulkSŒšg
(
r
,"x",1) == 0)  0;

1223 ià(
	`rioWr™eBulkSŒšg
(
r
,"y",1) == 0)  0;

1228 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',3) == 0)  0;

1229 ià(
	`rioWr™eBulkSŒšg
(
r
,"XSETID",6) == 0)  0;

1230 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1231 ià(
	`rioWr™eBulkSŒ—mID
(
r
,&
s
->
Ï¡_id
) == 0)  0;

1235 ià(
s
->
cgroups
) {

1236 
¿xI‹¿tÜ
 
ri
;

1237 
	`¿xS¹
(&
ri
,
s
->
cgroups
);

1238 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

1239 
	`¿xNext
(&
ri
)) {

1240 
¡»amCG
 *
group
 = 
ri
.
d©a
;

1242 ià(
	`rioWr™eBulkCouÁ
(
r
,'*',5) == 0)  0;

1243 ià(
	`rioWr™eBulkSŒšg
(
r
,"XGROUP",6) == 0)  0;

1244 ià(
	`rioWr™eBulkSŒšg
(
r
,"CREATE",6) == 0)  0;

1245 ià(
	`rioWr™eBulkObjeù
(
r
,
key
) == 0)  0;

1246 ià(
	`rioWr™eBulkSŒšg
(
r
,(*)
ri
.
key
,ri.
key_Ën
) == 0)  0;

1247 ià(
	`rioWr™eBulkSŒ—mID
(
r
,&
group
->
Ï¡_id
) == 0)  0;

1252 
¿xI‹¿tÜ
 
ri_cÚs
;

1253 
	`¿xS¹
(&
ri_cÚs
,
group
->
cÚsum”s
);

1254 
	`¿xS“k
(&
ri_cÚs
,"^",
NULL
,0);

1255 
	`¿xNext
(&
ri_cÚs
)) {

1256 
¡»amCÚsum”
 *
cÚsum”
 = 
ri_cÚs
.
d©a
;

1259 
¿xI‹¿tÜ
 
ri_³l
;

1260 
	`¿xS¹
(&
ri_³l
,
cÚsum”
->
³l
);

1261 
	`¿xS“k
(&
ri_³l
,"^",
NULL
,0);

1262 
	`¿xNext
(&
ri_³l
)) {

1263 
¡»amNACK
 *
Çck
 = 
ri_³l
.
d©a
;

1264 ià(
	`rioWr™eSŒ—mP’dšgEÁry
(
r
,
key
,(*)
ri
.key,

1265 
ri
.
key_Ën
,
cÚsum”
,

1266 
ri_³l
.
key
,
Çck
) == 0)

1271 
	`¿xStİ
(&
ri_³l
);

1273 
	`¿xStİ
(&
ri_cÚs
);

1275 
	`¿xStİ
(&
ri
);

1278 
	`¡»amI‹¿tÜStİ
(&
si
);

1280 
	}
}

1285 
	$»wr™eModuËObjeù
(
rio
 *
r
, 
robj
 *
key
,„obj *
o
) {

1286 
RedisModuËIO
 
io
;

1287 
moduËV®ue
 *
mv
 = 
o
->
±r
;

1288 
moduËTy³
 *
mt
 = 
mv
->
ty³
;

1289 
	`moduËIn™IOCÚ‹xt
(
io
,
mt
,
r
,
key
);

1290 
mt
->
	`aof_»wr™e
(&
io
,
key
,
mv
->
v®ue
);

1291 ià(
io
.
ùx
) {

1292 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

1293 
	`zä“
(
io
.
ùx
);

1295  
io
.
”rÜ
 ? 0 : 1;

1296 
	}
}

1301 
ssize_t
 
	$aofR—dDiffFromP¬’t
() {

1302 
buf
[65536];

1303 
ssize_t
 
Ä—d
, 
tÙ®
 = 0;

1305 (
Ä—d
 =

1306 
	`»ad
(
£rv”
.
aof_pe_»ad_d©a_äom_·»Á
,
buf
,(buf))) > 0) {

1307 
£rv”
.
aof_chd_diff
 = 
	`sdsÿ’
(£rv”.aof_chd_diff,
buf
,
Ä—d
);

1308 
tÙ®
 +ğ
Ä—d
;

1310  
tÙ®
;

1311 
	}
}

1313 
	$»wr™eAµ’dOÆyFeRio
(
rio
 *
aof
) {

1314 
diùI‹¿tÜ
 *
di
 = 
NULL
;

1315 
diùEÁry
 *
de
;

1316 
size_t
 
´oûs£d
 = 0;

1317 
j
;

1319 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

1320 
£Ëùcmd
[] = "*2\r\n$6\r\nSELECT\r\n";

1321 
»disDb
 *
db
 = 
£rv”
.db+
j
;

1322 
diù
 *
d
 = 
db
->dict;

1323 ià(
	`diùSize
(
d
) == 0) ;

1324 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
d
);

1327 ià(
	`rioWr™e
(
aof
,
£Ëùcmd
,(£Ëùcmd)-1è=ğ0è
w”r
;

1328 ià(
	`rioWr™eBulkLÚgLÚg
(
aof
,
j
è=ğ0è
w”r
;

1331 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1332 
sds
 
key¡r
;

1333 
robj
 
key
, *
o
;

1334 
expœ‘ime
;

1336 
key¡r
 = 
	`diùG‘Key
(
de
);

1337 
o
 = 
	`diùG‘V®
(
de
);

1338 
	`š™SticSŒšgObjeù
(
key
,
key¡r
);

1340 
expœ‘ime
 = 
	`g‘Expœe
(
db
,&
key
);

1343 ià(
o
->
ty³
 =ğ
OBJ_STRING
) {

1345 
cmd
[]="*3\r\n$3\r\nSET\r\n";

1346 ià(
	`rioWr™e
(
aof
,
cmd
,(cmd)-1è=ğ0è
w”r
;

1348 ià(
	`rioWr™eBulkObjeù
(
aof
,&
key
è=ğ0è
w”r
;

1349 ià(
	`rioWr™eBulkObjeù
(
aof
,
o
è=ğ0è
w”r
;

1350 } ià(
o
->
ty³
 =ğ
OBJ_LIST
) {

1351 ià(
	`»wr™eLi¡Objeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1352 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

1353 ià(
	`»wr™eS‘Objeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1354 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

1355 ià(
	`»wr™eSÜ‹dS‘Objeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1356 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

1357 ià(
	`»wr™eHashObjeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1358 } ià(
o
->
ty³
 =ğ
OBJ_STREAM
) {

1359 ià(
	`»wr™eSŒ—mObjeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1360 } ià(
o
->
ty³
 =ğ
OBJ_MODULE
) {

1361 ià(
	`»wr™eModuËObjeù
(
aof
,&
key
,
o
è=ğ0è
w”r
;

1363 
	`£rv”Pªic
("Unknown objectype");

1366 ià(
expœ‘ime
 != -1) {

1367 
cmd
[]="*3\r\n$9\r\nPEXPIREAT\r\n";

1368 ià(
	`rioWr™e
(
aof
,
cmd
,(cmd)-1è=ğ0è
w”r
;

1369 ià(
	`rioWr™eBulkObjeù
(
aof
,&
key
è=ğ0è
w”r
;

1370 ià(
	`rioWr™eBulkLÚgLÚg
(
aof
,
expœ‘ime
è=ğ0è
w”r
;

1373 ià(
aof
->
´oûs£d_by‹s
 > 
´oûs£d
+
AOF_READ_DIFF_INTERVAL_BYTES
) {

1374 
´oûs£d
 = 
aof
->
´oûs£d_by‹s
;

1375 
	`aofR—dDiffFromP¬’t
();

1378 
	`diùR–—£I‹¿tÜ
(
di
);

1379 
di
 = 
NULL
;

1381  
C_OK
;

1383 
w”r
:

1384 ià(
di
è
	`diùR–—£I‹¿tÜ
(di);

1385  
C_ERR
;

1386 
	}
}

1395 
	$»wr™eAµ’dOÆyFe
(*
f’ame
) {

1396 
rio
 
aof
;

1397 
FILE
 *
å
;

1398 
tmpfe
[256];

1399 
by‹
;

1403 
	`¢´štf
(
tmpfe
,256,"‹mp-»wr™—of-%d.aof", (è
	`g‘pid
());

1404 
å
 = 
	`fİ’
(
tmpfe
,"w");

1405 ià(!
å
) {

1406 
	`£rv”Log
(
LL_WARNING
, "O³nšgh‹m°ffÜ AOF„ewr™š„ewr™eAµ’dOÆyFe(): %s", 
	`¡»¼Ü
(
”ºo
));

1407  
C_ERR
;

1410 
£rv”
.
aof_chd_diff
 = 
	`sd£m±y
();

1411 
	`rioIn™W™hFe
(&
aof
,
å
);

1413 ià(
£rv”
.
aof_»wr™e_šüem’l_fsync
)

1414 
	`rioS‘AutoSync
(&
aof
,
REDIS_AUTOSYNC_BYTES
);

1416 
	`¡¬tSavšg
(
RDBFLAGS_AOF_PREAMBLE
);

1418 ià(
£rv”
.
aof_u£_rdb_´—mbË
) {

1419 
”rÜ
;

1420 ià(
	`rdbSaveRio
(&
aof
,&
”rÜ
,
RDBFLAGS_AOF_PREAMBLE
,
NULL
è=ğ
C_ERR
) {

1421 
”ºo
 = 
”rÜ
;

1422 
w”r
;

1425 ià(
	`»wr™eAµ’dOÆyFeRio
(&
aof
è=ğ
C_ERR
è
w”r
;

1430 ià(
	`fæush
(
å
è=ğ
EOF
è
w”r
;

1431 ià(
	`fsync
(
	`f’o
(
å
)è=ğ-1è
w”r
;

1439 
nod©a
 = 0;

1440 
m¡ime_t
 
¡¬t
 = 
	`m¡ime
();

1441 
	`m¡ime
()-
¡¬t
 < 1000 && 
nod©a
 < 20) {

1442 ià(
	`«Wa™
(
£rv”
.
aof_pe_»ad_d©a_äom_·»Á
, 
AE_READABLE
, 1) <= 0)

1444 
nod©a
++;

1447 
nod©a
 = 0;

1449 
	`aofR—dDiffFromP¬’t
();

1453 ià(
	`wr™e
(
£rv”
.
aof_pe_wr™e_ack_to_·»Á
,"!",1è!ğ1è
w”r
;

1454 ià(
	`ª‘NÚBlock
(
NULL
,
£rv”
.
aof_pe_»ad_ack_äom_·»Á
è!ğ
ANET_OK
)

1455 
w”r
;

1459 ià(
	`syncR—d
(
£rv”
.
aof_pe_»ad_ack_äom_·»Á
,&
by‹
,1,5000) != 1 ||

1460 
by‹
 !ğ'!'è
w”r
;

1461 
	`£rv”Log
(
LL_NOTICE
,"Parent‡greedo stop sending diffs. Finalizing AOF...");

1464 
	`aofR—dDiffFromP¬’t
();

1467 
	`£rv”Log
(
LL_NOTICE
,

1469 (è
	`sd¦’
(
£rv”
.
aof_chd_diff
) / (1024*1024));

1470 ià(
	`rioWr™e
(&
aof
,
£rv”
.
aof_chd_diff
,
	`sd¦’
(server.aof_child_diff)) == 0)

1471 
w”r
;

1474 ià(
	`fæush
(
å
è=ğ
EOF
è
w”r
;

1475 ià(
	`fsync
(
	`f’o
(
å
)è=ğ-1è
w”r
;

1476 ià(
	`fşo£
(
å
è=ğ
EOF
è
w”r
;

1480 ià(
	`»Çme
(
tmpfe
,
f’ame
) == -1) {

1481 
	`£rv”Log
(
LL_WARNING
,"E¼Ü movšgem°­³nd oÆy fÚhfš® de¡š©iÚ: %s", 
	`¡»¼Ü
(
”ºo
));

1482 
	`uÆšk
(
tmpfe
);

1483 
	`¡İSavšg
(0);

1484  
C_ERR
;

1486 
	`£rv”Log
(
LL_NOTICE
,"SYNC‡ppend only file„ewrite…erformed");

1487 
	`¡İSavšg
(1);

1488  
C_OK
;

1490 
w”r
:

1491 
	`£rv”Log
(
LL_WARNING
,"Wr™”rÜ wr™šg‡µ’d oÆy fÚ disk: %s", 
	`¡»¼Ü
(
”ºo
));

1492 
	`fşo£
(
å
);

1493 
	`uÆšk
(
tmpfe
);

1494 
	`¡İSavšg
(0);

1495  
C_ERR
;

1496 
	}
}

1505 
	$aofChdPeR—dabË
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

1506 
by‹
;

1507 
	`UNUSED
(
–
);

1508 
	`UNUSED
(
´ivd©a
);

1509 
	`UNUSED
(
mask
);

1511 ià(
	`»ad
(
fd
,&
by‹
,1) == 1 && byte == '!') {

1512 
	`£rv”Log
(
LL_NOTICE
,"AOF„ewrite child‡skso stop sending diffs.");

1513 
£rv”
.
aof_¡İ_£ndšg_diff
 = 1;

1514 ià(
	`wr™e
(
£rv”
.
aof_pe_wr™e_ack_to_chd
,"!",1) != 1) {

1519 
	`£rv”Log
(
LL_WARNING
,"Can't send ACKo AOF child: %s",

1520 
	`¡»¼Ü
(
”ºo
));

1525 
	`«D–‘eFeEv’t
(
£rv”
.
–
,£rv”.
aof_pe_»ad_ack_äom_chd
,
AE_READABLE
);

1526 
	}
}

1533 
	$aofC»©ePes
() {

1534 
fds
[6] = {-1, -1, -1, -1, -1, -1};

1535 
j
;

1537 ià(
	`pe
(
fds
è=ğ-1è
”rÜ
;

1538 ià(
	`pe
(
fds
+2è=ğ-1è
”rÜ
;

1539 ià(
	`pe
(
fds
+4è=ğ-1è
”rÜ
;

1541 ià(
	`ª‘NÚBlock
(
NULL
,
fds
[0]è!ğ
ANET_OK
è
”rÜ
;

1542 ià(
	`ª‘NÚBlock
(
NULL
,
fds
[1]è!ğ
ANET_OK
è
”rÜ
;

1543 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, 
fds
[2], 
AE_READABLE
, 
aofChdPeR—dabË
, 
NULL
è=ğ
AE_ERR
è
”rÜ
;

1545 
£rv”
.
aof_pe_wr™e_d©a_to_chd
 = 
fds
[1];

1546 
£rv”
.
aof_pe_»ad_d©a_äom_·»Á
 = 
fds
[0];

1547 
£rv”
.
aof_pe_wr™e_ack_to_·»Á
 = 
fds
[3];

1548 
£rv”
.
aof_pe_»ad_ack_äom_chd
 = 
fds
[2];

1549 
£rv”
.
aof_pe_wr™e_ack_to_chd
 = 
fds
[5];

1550 
£rv”
.
aof_pe_»ad_ack_äom_·»Á
 = 
fds
[4];

1551 
£rv”
.
aof_¡İ_£ndšg_diff
 = 0;

1552  
C_OK
;

1554 
”rÜ
:

1555 
	`£rv”Log
(
LL_WARNING
,"Error opening /setting AOF„ewrite IPC…ipes: %s",

1556 
	`¡»¼Ü
(
”ºo
));

1557 
j
 = 0; j < 6; j++èif(
fds
[j] !ğ-1è
	`şo£
(fds[j]);

1558  
C_ERR
;

1559 
	}
}

1561 
	$aofClo£Pes
() {

1562 
	`«D–‘eFeEv’t
(
£rv”
.
–
,£rv”.
aof_pe_»ad_ack_äom_chd
,
AE_READABLE
);

1563 
	`«D–‘eFeEv’t
(
£rv”
.
–
,£rv”.
aof_pe_wr™e_d©a_to_chd
,
AE_WRITABLE
);

1564 
	`şo£
(
£rv”
.
aof_pe_wr™e_d©a_to_chd
);

1565 
	`şo£
(
£rv”
.
aof_pe_»ad_d©a_äom_·»Á
);

1566 
	`şo£
(
£rv”
.
aof_pe_wr™e_ack_to_·»Á
);

1567 
	`şo£
(
£rv”
.
aof_pe_»ad_ack_äom_chd
);

1568 
	`şo£
(
£rv”
.
aof_pe_wr™e_ack_to_chd
);

1569 
	`şo£
(
£rv”
.
aof_pe_»ad_ack_äom_·»Á
);

1570 
	}
}

1588 
	$»wr™eAµ’dOÆyFeBackground
() {

1589 
pid_t
 
chdpid
;

1591 ià(
	`hasAùiveChdProûss
()è 
C_ERR
;

1592 ià(
	`aofC»©ePes
(è!ğ
C_OK
è 
C_ERR
;

1593 
	`İ’ChdInfoPe
();

1594 ià((
chdpid
 = 
	`»disFÜk
()) == 0) {

1595 
tmpfe
[256];

1598 
	`»disS‘ProcT™Ë
("redis-aof-rewrite");

1599 
	`»disS‘CpuAffš™y
(
£rv”
.
aof_»wr™e_ıuli¡
);

1600 
	`¢´štf
(
tmpfe
,256,"‹mp-»wr™—of-bg-%d.aof", (è
	`g‘pid
());

1601 ià(
	`»wr™eAµ’dOÆyFe
(
tmpfe
è=ğ
C_OK
) {

1602 
	`£ndChdCOWInfo
(
CHILD_INFO_TYPE_AOF
, "AOF„ewrite");

1603 
	`ex™FromChd
(0);

1605 
	`ex™FromChd
(1);

1609 ià(
chdpid
 == -1) {

1610 
	`şo£ChdInfoPe
();

1611 
	`£rv”Log
(
LL_WARNING
,

1613 
	`¡»¼Ü
(
”ºo
));

1614 
	`aofClo£Pes
();

1615  
C_ERR
;

1617 
	`£rv”Log
(
LL_NOTICE
,

1618 "Background‡µ’d oÆy f»wr™šg s¹ed by…id %d",
chdpid
);

1619 
£rv”
.
aof_»wr™e_scheduËd
 = 0;

1620 
£rv”
.
aof_»wr™e_time_¡¬t
 = 
	`time
(
NULL
);

1621 
£rv”
.
aof_chd_pid
 = 
chdpid
;

1626 
£rv”
.
aof_£Ëùed_db
 = -1;

1627 
	`»¶iÿtiÚSütCacheFlush
();

1628  
C_OK
;

1630  
C_OK
;

1631 
	}
}

1633 
	$bg»wr™—ofCommªd
(
ş›Á
 *
c
) {

1634 ià(
£rv”
.
aof_chd_pid
 != -1) {

1635 
	`addR•lyE¼Ü
(
c
,"Background‡ppend only file„ewriting‡lready in…rogress");

1636 } ià(
	`hasAùiveChdProûss
()) {

1637 
£rv”
.
aof_»wr™e_scheduËd
 = 1;

1638 
	`addR•lyStus
(
c
,"Background‡ppend only file„ewriting scheduled");

1639 } ià(
	`»wr™eAµ’dOÆyFeBackground
(è=ğ
C_OK
) {

1640 
	`addR•lyStus
(
c
,"Background‡ppend only file„ewriting started");

1642 
	`addR•lyE¼Ü
(
c
,"Can'tƒxecute‡n AOF background„ewriting. "

1645 
	}
}

1647 
	$aofRemoveTempFe
(
pid_t
 
chdpid
) {

1648 
tmpfe
[256];

1650 
	`¢´štf
(
tmpfe
,256,"‹mp-»wr™—of-bg-%d.aof", (è
chdpid
);

1651 
	`uÆšk
(
tmpfe
);

1653 
	`¢´štf
(
tmpfe
,256,"‹mp-»wr™—of-%d.aof", (è
chdpid
);

1654 
	`uÆšk
(
tmpfe
);

1655 
	}
}

1661 
	$aofUpd©eCu¼’tSize
() {

1662 
»dis_¡©
 
sb
;

1663 
m¡ime_t
 
Ï‹ncy
;

1665 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

1666 ià(
	`»dis_f¡©
(
£rv”
.
aof_fd
,&
sb
) == -1) {

1667 
	`£rv”Log
(
LL_WARNING
,"Unableo obtainhe AOF file†ength. stat: %s",

1668 
	`¡»¼Ü
(
”ºo
));

1670 
£rv”
.
aof_cu¼’t_size
 = 
sb
.
¡_size
;

1672 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

1673 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-f¡©",
Ï‹ncy
);

1674 
	}
}

1678 
	$backgroundRewr™eDÚeHªdËr
(
ex™code
, 
bysigÇl
) {

1679 ià(!
bysigÇl
 && 
ex™code
 == 0) {

1680 
Ãwfd
, 
Şdfd
;

1681 
tmpfe
[256];

1682 
now
 = 
	`u¡ime
();

1683 
m¡ime_t
 
Ï‹ncy
;

1685 
	`£rv”Log
(
LL_NOTICE
,

1690 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

1691 
	`¢´štf
(
tmpfe
,256,"temp-rewriteaof-bg-%d.aof",

1692 ()
£rv”
.
aof_chd_pid
);

1693 
Ãwfd
 = 
	`İ’
(
tmpfe
,
O_WRONLY
|
O_APPEND
);

1694 ià(
Ãwfd
 == -1) {

1695 
	`£rv”Log
(
LL_WARNING
,

1696 "UÇbËØİ’h‹mpÜ¬y AOF…roduûd byhchd: %s", 
	`¡»¼Ü
(
”ºo
));

1697 
ş—nup
;

1700 ià(
	`aofRewr™eBufãrWr™e
(
Ãwfd
) == -1) {

1701 
	`£rv”Log
(
LL_WARNING
,

1702 "E¼ÜryšgØæushh·»Á difàtØth»wr™‹ÀAOF: %s", 
	`¡»¼Ü
(
”ºo
));

1703 
	`şo£
(
Ãwfd
);

1704 
ş—nup
;

1706 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

1707 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-»wr™e-diff-wr™e",
Ï‹ncy
);

1709 
	`£rv”Log
(
LL_NOTICE
,

1710 "Residu®…¬’ˆdifàsucûssfuÎy flushedØth»wr™‹ÀAOF (%.2àMB)", (è
	`aofRewr™eBufãrSize
() / (1024*1024));

1739 ià(
£rv”
.
aof_fd
 == -1) {

1745 
Şdfd
 = 
	`İ’
(
£rv”
.
aof_f’ame
,
O_RDONLY
|
O_NONBLOCK
);

1748 
Şdfd
 = -1;

1753 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

1754 ià(
	`»Çme
(
tmpfe
,
£rv”
.
aof_f’ame
) == -1) {

1755 
	`£rv”Log
(
LL_WARNING
,

1757 
tmpfe
,

1758 
£rv”
.
aof_f’ame
,

1759 
	`¡»¼Ü
(
”ºo
));

1760 
	`şo£
(
Ãwfd
);

1761 ià(
Şdfd
 !ğ-1è
	`şo£
(oldfd);

1762 
ş—nup
;

1764 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

1765 
	`Ï‹ncyAddSam¶eIfN“ded
("aof-»Çme",
Ï‹ncy
);

1767 ià(
£rv”
.
aof_fd
 == -1) {

1770 
	`şo£
(
Ãwfd
);

1773 
Şdfd
 = 
£rv”
.
aof_fd
;

1774 
£rv”
.
aof_fd
 = 
Ãwfd
;

1775 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_ALWAYS
)

1776 
	`»dis_fsync
(
Ãwfd
);

1777 ià(
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_EVERYSEC
)

1778 
	`aof_background_fsync
(
Ãwfd
);

1779 
£rv”
.
aof_£Ëùed_db
 = -1;

1780 
	`aofUpd©eCu¼’tSize
();

1781 
£rv”
.
aof_»wr™e_ba£_size
 = s”v”.
aof_cu¼’t_size
;

1782 
£rv”
.
aof_fsync_off£t
 = s”v”.
aof_cu¼’t_size
;

1786 
	`sdsä“
(
£rv”
.
aof_buf
);

1787 
£rv”
.
aof_buf
 = 
	`sd£m±y
();

1790 
£rv”
.
aof_Ï¡bg»wr™e_¡©us
 = 
C_OK
;

1792 
	`£rv”Log
(
LL_NOTICE
, "Background AOF„ewrite finished successfully");

1794 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_WAIT_REWRITE
)

1795 
£rv”
.
aof_¡©e
 = 
AOF_ON
;

1798 ià(
Şdfd
 !ğ-1è
	`bioC»©eBackgroundJob
(
BIO_CLOSE_FILE
,(*)()Şdfd,
NULL
,NULL);

1800 
	`£rv”Log
(
LL_VERBOSE
,

1801 "Background AOF„ewr™sigÇÈhªdË¸took %Îdus", 
	`u¡ime
()-
now
);

1802 } ià(!
bysigÇl
 && 
ex™code
 != 0) {

1803 
£rv”
.
aof_Ï¡bg»wr™e_¡©us
 = 
C_ERR
;

1805 
	`£rv”Log
(
LL_WARNING
,

1810 ià(
bysigÇl
 !ğ
SIGUSR1
)

1811 
£rv”
.
aof_Ï¡bg»wr™e_¡©us
 = 
C_ERR
;

1813 
	`£rv”Log
(
LL_WARNING
,

1814 "Background AOF„ewr™‹rmš©ed by sigÇÈ%d", 
bysigÇl
);

1817 
ş—nup
:

1818 
	`aofClo£Pes
();

1819 
	`aofRewr™eBufãrRe£t
();

1820 
	`aofRemoveTempFe
(
£rv”
.
aof_chd_pid
);

1821 
£rv”
.
aof_chd_pid
 = -1;

1822 
£rv”
.
aof_»wr™e_time_Ï¡
 = 
	`time
(
NULL
)-£rv”.
aof_»wr™e_time_¡¬t
;

1823 
£rv”
.
aof_»wr™e_time_¡¬t
 = -1;

1825 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_WAIT_REWRITE
)

1826 
£rv”
.
aof_»wr™e_scheduËd
 = 1;

1827 
	}
}

	@asciilogo.h

30 cÚ¡ *
	gascii_logo
 =

	@atomicvar.h

60 
	~<±h»ad.h
>

62 #iâdeà
__ATOMIC_VAR_H


63 
	#__ATOMIC_VAR_H


	)

71 #ià!
defšed
(
__ATOMIC_VAR_FORCE_SYNC_MACROS
è&& defšed(
__ATOMIC_RELAXED
è&& !defšed(
__sun
è&& (!defšed(
__şªg__
è|| !defšed(
__APPLE__
è|| 
__­¶e_bud_v”siÚ__
 > 4210057)

74 
	#©omicInü
(
v¬
,
couÁ
è
	`__©omic_add_ãtch
(&v¬,(couÁ),
__ATOMIC_RELAXED
)

	)

75 
	#©omicG‘Inü
(
v¬
,
Şdv®ue_v¬
,
couÁ
) do { \

76 
Şdv®ue_v¬
 = 
	`__©omic_ãtch_add
(&
v¬
,(
couÁ
),
__ATOMIC_RELAXED
); \

77 } 0)

	)

78 
	#©omicDeü
(
v¬
,
couÁ
è
	`__©omic_sub_ãtch
(&v¬,(couÁ),
__ATOMIC_RELAXED
)

	)

79 
	#©omicG‘
(
v¬
,
d¡v¬
) do { \

80 
d¡v¬
 = 
	`__©omic_lßd_n
(&
v¬
,
__ATOMIC_RELAXED
); \

81 } 0)

	)

82 
	#©omicS‘
(
v¬
,
v®ue
è
	`__©omic_¡Üe_n
(&v¬,v®ue,
__ATOMIC_RELAXED
)

	)

83 
	#REDIS_ATOMIC_API
 "©omic-butš"

	)

85 #–ià
defšed
(
HAVE_ATOMIC
)

88 
	#©omicInü
(
v¬
,
couÁ
è
	`__sync_add_ªd_ãtch
(&v¬,(couÁ))

	)

89 
	#©omicG‘Inü
(
v¬
,
Şdv®ue_v¬
,
couÁ
) do { \

90 
Şdv®ue_v¬
 = 
	`__sync_ãtch_ªd_add
(&
v¬
,(
couÁ
)); \

91 } 0)

	)

92 
	#©omicDeü
(
v¬
,
couÁ
è
	`__sync_sub_ªd_ãtch
(&v¬,(couÁ))

	)

93 
	#©omicG‘
(
v¬
,
d¡v¬
) do { \

94 
d¡v¬
 = 
	`__sync_sub_ªd_ãtch
(&
v¬
,0); \

95 } 0)

	)

96 
	#©omicS‘
(
v¬
,
v®ue
) do { \

97 !
	`__sync_boŞ_com·»_ªd_sw­
(&
v¬
,v¬,
v®ue
)); \

98 } 0)

	)

99 
	#REDIS_ATOMIC_API
 "sync-butš"

	)

104 
	#©omicInü
(
v¬
,
couÁ
) do { \

105 
	`±h»ad_mu‹x_lock
(&
v¬
 ## 
_mu‹x
); \

106 
v¬
 +ğ(
couÁ
); \

107 
	`±h»ad_mu‹x_uÆock
(&
v¬
 ## 
_mu‹x
); \

108 } 0)

	)

109 
	#©omicG‘Inü
(
v¬
,
Şdv®ue_v¬
,
couÁ
) do { \

110 
	`±h»ad_mu‹x_lock
(&
v¬
 ## 
_mu‹x
); \

111 
Şdv®ue_v¬
 = 
v¬
; \

112 
v¬
 +ğ(
couÁ
); \

113 
	`±h»ad_mu‹x_uÆock
(&
v¬
 ## 
_mu‹x
); \

114 } 0)

	)

115 
	#©omicDeü
(
v¬
,
couÁ
) do { \

116 
	`±h»ad_mu‹x_lock
(&
v¬
 ## 
_mu‹x
); \

117 
v¬
 -ğ(
couÁ
); \

118 
	`±h»ad_mu‹x_uÆock
(&
v¬
 ## 
_mu‹x
); \

119 } 0)

	)

120 
	#©omicG‘
(
v¬
,
d¡v¬
) do { \

121 
	`±h»ad_mu‹x_lock
(&
v¬
 ## 
_mu‹x
); \

122 
d¡v¬
 = 
v¬
; \

123 
	`±h»ad_mu‹x_uÆock
(&
v¬
 ## 
_mu‹x
); \

124 } 0)

	)

125 
	#©omicS‘
(
v¬
,
v®ue
) do { \

126 
	`±h»ad_mu‹x_lock
(&
v¬
 ## 
_mu‹x
); \

127 
v¬
 = 
v®ue
; \

128 
	`±h»ad_mu‹x_uÆock
(&
v¬
 ## 
_mu‹x
); \

129 } 0)

	)

130 
	#REDIS_ATOMIC_API
 "±h»ad-mu‹x"

	)

	@bio.c

61 
	~"£rv”.h
"

62 
	~"bio.h
"

64 
±h»ad_t
 
	gbio_th»ads
[
BIO_NUM_OPS
];

65 
±h»ad_mu‹x_t
 
	gbio_mu‹x
[
BIO_NUM_OPS
];

66 
±h»ad_cÚd_t
 
	gbio_Ãwjob_cÚd
[
BIO_NUM_OPS
];

67 
±h»ad_cÚd_t
 
	gbio_¡•_cÚd
[
BIO_NUM_OPS
];

68 
li¡
 *
	gbio_jobs
[
BIO_NUM_OPS
];

75 
	gbio_³ndšg
[
BIO_NUM_OPS
];

79 
	sbio_job
 {

80 
time_t
 
	mtime
;

83 *
	m¬g1
, *
	m¬g2
, *
	m¬g3
;

86 *
bioProûssBackgroundJobs
(*
¬g
);

87 
Ïzyä“F»eObjeùFromBioTh»ad
(
robj
 *
o
);

88 
Ïzyä“F»eD©aba£FromBioTh»ad
(
diù
 *
ht1
, diù *
ht2
);

89 
Ïzyä“F»eSlÙsM­FromBioTh»ad
(
zskli¡
 *
¦
);

93 
	#REDIS_THREAD_STACK_SIZE
 (1024*1024*4)

	)

96 
	$bioIn™
() {

97 
±h»ad_©Œ_t
 
©Œ
;

98 
±h»ad_t
 
th»ad
;

99 
size_t
 
¡acksize
;

100 
j
;

103 
j
 = 0; j < 
BIO_NUM_OPS
; j++) {

104 
	`±h»ad_mu‹x_š™
(&
bio_mu‹x
[
j
],
NULL
);

105 
	`±h»ad_cÚd_š™
(&
bio_Ãwjob_cÚd
[
j
],
NULL
);

106 
	`±h»ad_cÚd_š™
(&
bio_¡•_cÚd
[
j
],
NULL
);

107 
bio_jobs
[
j
] = 
	`li¡C»©e
();

108 
bio_³ndšg
[
j
] = 0;

112 
	`±h»ad_©Œ_š™
(&
©Œ
);

113 
	`±h»ad_©Œ_g‘¡acksize
(&
©Œ
,&
¡acksize
);

114 ià(!
¡acksize
) stacksize = 1;

115 
¡acksize
 < 
REDIS_THREAD_STACK_SIZE
) stacksize *= 2;

116 
	`±h»ad_©Œ_£t¡acksize
(&
©Œ
, 
¡acksize
);

121 
j
 = 0; j < 
BIO_NUM_OPS
; j++) {

122 *
¬g
 = (*)(è
j
;

123 ià(
	`±h»ad_ü—‹
(&
th»ad
,&
©Œ
,
bioProûssBackgroundJobs
,
¬g
) != 0) {

124 
	`£rv”Log
(
LL_WARNING
,"Fatal: Can't initialize Background Jobs.");

125 
	`ex™
(1);

127 
bio_th»ads
[
j
] = 
th»ad
;

129 
	}
}

131 
	$bioC»©eBackgroundJob
(
ty³
, *
¬g1
, *
¬g2
, *
¬g3
) {

132 
bio_job
 *
job
 = 
	`zm®loc
((*job));

134 
job
->
time
 = 
	`time
(
NULL
);

135 
job
->
¬g1
 =‡rg1;

136 
job
->
¬g2
 =‡rg2;

137 
job
->
¬g3
 =‡rg3;

138 
	`±h»ad_mu‹x_lock
(&
bio_mu‹x
[
ty³
]);

139 
	`li¡AddNodeTa
(
bio_jobs
[
ty³
],
job
);

140 
bio_³ndšg
[
ty³
]++;

141 
	`±h»ad_cÚd_sigÇl
(&
bio_Ãwjob_cÚd
[
ty³
]);

142 
	`±h»ad_mu‹x_uÆock
(&
bio_mu‹x
[
ty³
]);

143 
	}
}

145 *
	$bioProûssBackgroundJobs
(*
¬g
) {

146 
bio_job
 *
job
;

147 
ty³
 = (è
¬g
;

148 
sig£t_t
 
sig£t
;

151 ià(
ty³
 >ğ
BIO_NUM_OPS
) {

152 
	`£rv”Log
(
LL_WARNING
,

153 "W¬nšg: biØth»ad s¹ed w™h wrÚgy³ %lu",
ty³
);

154  
NULL
;

157 
ty³
) {

158 
BIO_CLOSE_FILE
:

159 
	`»dis_£t_th»ad_t™Ë
("bio_close_file");

161 
BIO_AOF_FSYNC
:

162 
	`»dis_£t_th»ad_t™Ë
("bio_aof_fsync");

164 
BIO_LAZY_FREE
:

165 
	`»dis_£t_th»ad_t™Ë
("bio_lazy_free");

169 
	`»disS‘CpuAffš™y
(
£rv”
.
bio_ıuli¡
);

173 
	`±h»ad_£tÿnûl¡©e
(
PTHREAD_CANCEL_ENABLE
, 
NULL
);

174 
	`±h»ad_£tÿnûÉy³
(
PTHREAD_CANCEL_ASYNCHRONOUS
, 
NULL
);

176 
	`±h»ad_mu‹x_lock
(&
bio_mu‹x
[
ty³
]);

179 
	`sigem±y£t
(&
sig£t
);

180 
	`sigadd£t
(&
sig£t
, 
SIGALRM
);

181 ià(
	`±h»ad_sigmask
(
SIG_BLOCK
, &
sig£t
, 
NULL
))

182 
	`£rv”Log
(
LL_WARNING
,

183 "W¬nšg: cª'ˆmask SIGALRM iÀbio.øth»ad: %s", 
	`¡»¼Ü
(
”ºo
));

186 
li¡Node
 *
Ê
;

189 ià(
	`li¡L’gth
(
bio_jobs
[
ty³
]) == 0) {

190 
	`±h»ad_cÚd_wa™
(&
bio_Ãwjob_cÚd
[
ty³
],&
bio_mu‹x
[type]);

194 
Ê
 = 
	`li¡Fœ¡
(
bio_jobs
[
ty³
]);

195 
job
 = 
Ê
->
v®ue
;

198 
	`±h»ad_mu‹x_uÆock
(&
bio_mu‹x
[
ty³
]);

201 ià(
ty³
 =ğ
BIO_CLOSE_FILE
) {

202 
	`şo£
(()
job
->
¬g1
);

203 } ià(
ty³
 =ğ
BIO_AOF_FSYNC
) {

204 
	`»dis_fsync
(()
job
->
¬g1
);

205 } ià(
ty³
 =ğ
BIO_LAZY_FREE
) {

210 ià(
job
->
¬g1
)

211 
	`Ïzyä“F»eObjeùFromBioTh»ad
(
job
->
¬g1
);

212 ià(
job
->
¬g2
 && job->
¬g3
)

213 
	`Ïzyä“F»eD©aba£FromBioTh»ad
(
job
->
¬g2
,job->
¬g3
);

214 ià(
job
->
¬g3
)

215 
	`Ïzyä“F»eSlÙsM­FromBioTh»ad
(
job
->
¬g3
);

217 
	`£rv”Pªic
("Wrong jobype in bioProcessBackgroundJobs().");

219 
	`zä“
(
job
);

223 
	`±h»ad_mu‹x_lock
(&
bio_mu‹x
[
ty³
]);

224 
	`li¡D–Node
(
bio_jobs
[
ty³
],
Ê
);

225 
bio_³ndšg
[
ty³
]--;

228 
	`±h»ad_cÚd_brßdÿ¡
(&
bio_¡•_cÚd
[
ty³
]);

230 
	}
}

233 
	$bioP’dšgJobsOfTy³
(
ty³
) {

234 
v®
;

235 
	`±h»ad_mu‹x_lock
(&
bio_mu‹x
[
ty³
]);

236 
v®
 = 
bio_³ndšg
[
ty³
];

237 
	`±h»ad_mu‹x_uÆock
(&
bio_mu‹x
[
ty³
]);

238  
v®
;

239 
	}
}

251 
	$bioWa™S‹pOfTy³
(
ty³
) {

252 
v®
;

253 
	`±h»ad_mu‹x_lock
(&
bio_mu‹x
[
ty³
]);

254 
v®
 = 
bio_³ndšg
[
ty³
];

255 ià(
v®
 != 0) {

256 
	`±h»ad_cÚd_wa™
(&
bio_¡•_cÚd
[
ty³
],&
bio_mu‹x
[type]);

257 
v®
 = 
bio_³ndšg
[
ty³
];

259 
	`±h»ad_mu‹x_uÆock
(&
bio_mu‹x
[
ty³
]);

260  
v®
;

261 
	}
}

267 
	$bioKlTh»ads
() {

268 
”r
, 
j
;

270 
j
 = 0; j < 
BIO_NUM_OPS
; j++) {

271 ià(
bio_th»ads
[
j
] && 
	`±h»ad_ÿnûl
(bio_threads[j]) == 0) {

272 ià((
”r
 = 
	`±h»ad_još
(
bio_th»ads
[
j
],
NULL
)) != 0) {

273 
	`£rv”Log
(
LL_WARNING
,

275 
j
, 
	`¡»¼Ü
(
”r
));

277 
	`£rv”Log
(
LL_WARNING
,

278 "BiØth»ad fÜ joby³ #%d”mš©ed",
j
);

282 
	}
}

	@bio.h

30 #iâdeà
__BIO_H


31 
	#__BIO_H


	)

34 
bioIn™
();

35 
bioC»©eBackgroundJob
(
ty³
, *
¬g1
, *
¬g2
, *
¬g3
);

36 
bioP’dšgJobsOfTy³
(
ty³
);

37 
bioWa™S‹pOfTy³
(
ty³
);

38 
time_t
 
bioOld”JobOfTy³
(
ty³
);

39 
bioKlTh»ads
();

42 
	#BIO_CLOSE_FILE
 0

	)

43 
	#BIO_AOF_FSYNC
 1

	)

44 
	#BIO_LAZY_FREE
 2

	)

45 
	#BIO_NUM_OPS
 3

	)

	@bitops.c

31 
	~"£rv”.h
"

40 
size_t
 
	$»disPİcouÁ
(*
s
, 
couÁ
) {

41 
size_t
 
b™s
 = 0;

42 *
p
 = 
s
;

43 
ušt32_t
 *
p4
;

44 cÚ¡ 
b™sšby‹
[256] = {0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8};

47 ()
p
 & 3 && 
couÁ
) {

48 
b™s
 +ğ
b™sšby‹
[*
p
++];

49 
couÁ
--;

53 
p4
 = (
ušt32_t
*)
p
;

54 
couÁ
>=28) {

55 
ušt32_t
 
aux1
, 
aux2
, 
aux3
, 
aux4
, 
aux5
, 
aux6
, 
aux7
;

57 
aux1
 = *
p4
++;

58 
aux2
 = *
p4
++;

59 
aux3
 = *
p4
++;

60 
aux4
 = *
p4
++;

61 
aux5
 = *
p4
++;

62 
aux6
 = *
p4
++;

63 
aux7
 = *
p4
++;

64 
couÁ
 -= 28;

66 
aux1
 =‡ux1 - ((aux1 >> 1) & 0x55555555);

67 
aux1
 = (aux1 & 0x33333333) + ((aux1 >> 2) & 0x33333333);

68 
aux2
 =‡ux2 - ((aux2 >> 1) & 0x55555555);

69 
aux2
 = (aux2 & 0x33333333) + ((aux2 >> 2) & 0x33333333);

70 
aux3
 =‡ux3 - ((aux3 >> 1) & 0x55555555);

71 
aux3
 = (aux3 & 0x33333333) + ((aux3 >> 2) & 0x33333333);

72 
aux4
 =‡ux4 - ((aux4 >> 1) & 0x55555555);

73 
aux4
 = (aux4 & 0x33333333) + ((aux4 >> 2) & 0x33333333);

74 
aux5
 =‡ux5 - ((aux5 >> 1) & 0x55555555);

75 
aux5
 = (aux5 & 0x33333333) + ((aux5 >> 2) & 0x33333333);

76 
aux6
 =‡ux6 - ((aux6 >> 1) & 0x55555555);

77 
aux6
 = (aux6 & 0x33333333) + ((aux6 >> 2) & 0x33333333);

78 
aux7
 =‡ux7 - ((aux7 >> 1) & 0x55555555);

79 
aux7
 = (aux7 & 0x33333333) + ((aux7 >> 2) & 0x33333333);

80 
b™s
 +ğ((((
aux1
 + (aux1 >> 4)) & 0x0F0F0F0F) +

81 ((
aux2
 + (aux2 >> 4)) & 0x0F0F0F0F) +

82 ((
aux3
 + (aux3 >> 4)) & 0x0F0F0F0F) +

83 ((
aux4
 + (aux4 >> 4)) & 0x0F0F0F0F) +

84 ((
aux5
 + (aux5 >> 4)) & 0x0F0F0F0F) +

85 ((
aux6
 + (aux6 >> 4)) & 0x0F0F0F0F) +

86 ((
aux7
 + (aux7 >> 4)) & 0x0F0F0F0F))* 0x01010101) >> 24;

89 
p
 = (*)
p4
;

90 
couÁ
--è
b™s
 +ğ
b™sšby‹
[*
p
++];

91  
b™s
;

92 
	}
}

101 
	$»disB™pos
(*
s
, 
couÁ
, 
b™
) {

102 *
l
;

103 *
c
;

104 
skv®
, 
wÜd
 = 0, 
Úe
;

105 
pos
 = 0;

106 
j
;

107 
found
;

119 
skv®
 = 
b™
 ? 0 : 
UCHAR_MAX
;

120 
c
 = (*è
s
;

121 
found
 = 0;

122 ()
c
 & ((*
l
)-1è&& 
couÁ
) {

123 ià(*
c
 !ğ
skv®
) {

124 
found
 = 1;

127 
c
++;

128 
couÁ
--;

129 
pos
 += 8;

133 
l
 = (*è
c
;

134 ià(!
found
) {

135 
skv®
 = 
b™
 ? 0 : 
ULONG_MAX
;

136 
couÁ
 >ğ(*
l
)) {

137 ià(*
l
 !ğ
skv®
) ;

138 
l
++;

139 
couÁ
 -ğ(*
l
);

140 
pos
 +ğ(*
l
)*8;

151 
c
 = (*)
l
;

152 
j
 = 0; j < (*
l
); j++) {

153 
wÜd
 <<= 8;

154 ià(
couÁ
) {

155 
wÜd
 |ğ*
c
;

156 
c
++;

157 
couÁ
--;

166 ià(
b™
 =ğ1 && 
wÜd
 == 0)  -1;

172 
Úe
 = 
ULONG_MAX
;

173 
Úe
 >>= 1;

174 
Úe
 = ~one;

176 
Úe
) {

177 ià(((
Úe
 & 
wÜd
è!ğ0è=ğ
b™
è 
pos
;

178 
pos
++;

179 
Úe
 >>= 1;

184 
	`£rv”Pªic
("End of„edisBitpos()„eached.");

186 
	}
}

209 
	$£tUnsigÃdB™f›ld
(*
p
, 
ušt64_t
 
off£t
, ušt64_ˆ
b™s
, ušt64_ˆ
v®ue
) {

210 
ušt64_t
 
by‹
, 
b™
, 
by‹v®
, 
b™v®
, 
j
;

212 
j
 = 0; j < 
b™s
; j++) {

213 
b™v®
 = (
v®ue
 & ((
ušt64_t
)1<<(
b™s
-1-
j
))) != 0;

214 
by‹
 = 
off£t
 >> 3;

215 
b™
 = 7 - (
off£t
 & 0x7);

216 
by‹v®
 = 
p
[
by‹
];

217 
by‹v®
 &ğ~(1 << 
b™
);

218 
by‹v®
 |ğ
b™v®
 << 
b™
;

219 
p
[
by‹
] = 
by‹v®
 & 0xff;

220 
off£t
++;

222 
	}
}

224 
	$£tSigÃdB™f›ld
(*
p
, 
ušt64_t
 
off£t
, ušt64_ˆ
b™s
, 
št64_t
 
v®ue
) {

225 
ušt64_t
 
uv
 = 
v®ue
;

226 
	`£tUnsigÃdB™f›ld
(
p
,
off£t
,
b™s
,
uv
);

227 
	}
}

229 
ušt64_t
 
	$g‘UnsigÃdB™f›ld
(*
p
, 
ušt64_t
 
off£t
, ušt64_ˆ
b™s
) {

230 
ušt64_t
 
by‹
, 
b™
, 
by‹v®
, 
b™v®
, 
j
, 
v®ue
 = 0;

232 
j
 = 0; j < 
b™s
; j++) {

233 
by‹
 = 
off£t
 >> 3;

234 
b™
 = 7 - (
off£t
 & 0x7);

235 
by‹v®
 = 
p
[
by‹
];

236 
b™v®
 = (
by‹v®
 >> 
b™
) & 1;

237 
v®ue
 = (v®ue<<1è| 
b™v®
;

238 
off£t
++;

240  
v®ue
;

241 
	}
}

243 
št64_t
 
	$g‘SigÃdB™f›ld
(*
p
, 
ušt64_t
 
off£t
, ušt64_ˆ
b™s
) {

244 
št64_t
 
v®ue
;

245 uniÚ {
ušt64_t
 
u
; 
št64_t
 
i
;} 
cÚv
;

254 
cÚv
.
u
 = 
	`g‘UnsigÃdB™f›ld
(
p
,
off£t
,
b™s
);

255 
v®ue
 = 
cÚv
.
i
;

260 ià(
v®ue
 & ((
ušt64_t
)1 << (
b™s
-1)))

261 
v®ue
 |ğ((
ušt64_t
)-1è<< 
b™s
;

262  
v®ue
;

263 
	}
}

284 
	#BFOVERFLOW_WRAP
 0

	)

285 
	#BFOVERFLOW_SAT
 1

	)

286 
	#BFOVERFLOW_FAIL
 2

	)

288 
	$checkUnsigÃdB™f›ldOv”æow
(
ušt64_t
 
v®ue
, 
št64_t
 
šü
, ušt64_ˆ
b™s
, 
owty³
, ušt64_ˆ*
lim™
) {

289 
ušt64_t
 
max
 = (
b™s
 =ğ64è? 
UINT64_MAX
 : (((uint64_t)1<<bits)-1);

290 
št64_t
 
maxšü
 = 
max
-
v®ue
;

291 
št64_t
 
mššü
 = -
v®ue
;

293 ià(
v®ue
 > 
max
 || (
šü
 > 0 && inü > 
maxšü
)) {

294 ià(
lim™
) {

295 ià(
owty³
 =ğ
BFOVERFLOW_WRAP
) {

296 
hªdË_w¿p
;

297 } ià(
owty³
 =ğ
BFOVERFLOW_SAT
) {

298 *
lim™
 = 
max
;

302 } ià(
šü
 < 0 && inü < 
mššü
) {

303 ià(
lim™
) {

304 ià(
owty³
 =ğ
BFOVERFLOW_WRAP
) {

305 
hªdË_w¿p
;

306 } ià(
owty³
 =ğ
BFOVERFLOW_SAT
) {

307 *
lim™
 = 0;

314 
hªdË_w¿p
:

316 
ušt64_t
 
mask
 = ((ušt64_t)-1è<< 
b™s
;

317 
ušt64_t
 
»s
 = 
v®ue
+
šü
;

319 
»s
 &ğ~
mask
;

320 *
lim™
 = 
»s
;

323 
	}
}

325 
	$checkSigÃdB™f›ldOv”æow
(
št64_t
 
v®ue
, iÁ64_ˆ
šü
, 
ušt64_t
 
b™s
, 
owty³
, iÁ64_ˆ*
lim™
) {

326 
št64_t
 
max
 = (
b™s
 =ğ64è? 
INT64_MAX
 : (((int64_t)1<<(bits-1))-1);

327 
št64_t
 
mš
 = (-
max
)-1;

332 
št64_t
 
maxšü
 = 
max
-
v®ue
;

333 
št64_t
 
mššü
 = 
mš
-
v®ue
;

335 ià(
v®ue
 > 
max
 || (
b™s
 !ğ64 && 
šü
 > 
maxšü
) || (value >= 0 && incr > 0 && incr > maxincr))

337 ià(
lim™
) {

338 ià(
owty³
 =ğ
BFOVERFLOW_WRAP
) {

339 
hªdË_w¿p
;

340 } ià(
owty³
 =ğ
BFOVERFLOW_SAT
) {

341 *
lim™
 = 
max
;

345 } ià(
v®ue
 < 
mš
 || (
b™s
 !ğ64 && 
šü
 < 
mššü
) || (value < 0 && incr < 0 && incr < minincr)) {

346 ià(
lim™
) {

347 ià(
owty³
 =ğ
BFOVERFLOW_WRAP
) {

348 
hªdË_w¿p
;

349 } ià(
owty³
 =ğ
BFOVERFLOW_SAT
) {

350 *
lim™
 = 
mš
;

357 
hªdË_w¿p
:

359 
ušt64_t
 
mask
 = ((ušt64_t)-1è<< 
b™s
;

360 
ušt64_t
 
msb
 = (ušt64_t)1 << (
b™s
-1);

361 
ušt64_t
 
a
 = 
v®ue
, 
b
 = 
šü
, 
c
;

362 
c
 = 
a
+
b
;

367 ià(
c
 & 
msb
) {

368 
c
 |ğ
mask
;

370 
c
 &ğ~
mask
;

372 *
lim™
 = 
c
;

375 
	}
}

379 
	$´štB™s
(*
p
, 
couÁ
) {

380 
j
, 
i
, 
by‹
;

382 
j
 = 0; j < 
couÁ
; j++) {

383 
by‹
 = 
p
[
j
];

384 
i
 = 0x80; i > 0; i /= 2)

385 
	`´štf
("%c", (
by‹
 & 
i
) ? '1' : '0');

386 
	`´štf
("|");

388 
	`´štf
("\n");

389 
	}
}

395 
	#BITOP_AND
 0

	)

396 
	#BITOP_OR
 1

	)

397 
	#BITOP_XOR
 2

	)

398 
	#BITOP_NOT
 3

	)

400 
	#BITFIELDOP_GET
 0

	)

401 
	#BITFIELDOP_SET
 1

	)

402 
	#BITFIELDOP_INCRBY
 2

	)

411 
	$g‘B™Off£tFromArgum’t
(
ş›Á
 *
c
, 
robj
 *
o
, 
size_t
 *
off£t
, 
hash
, 
b™s
) {

412 
loff£t
;

413 *
”r
 = "bit offset is‚ot‡n integer or out of„ange";

414 *
p
 = 
o
->
±r
;

415 
size_t
 
¶’
 = 
	`sd¦’
(
p
);

416 
u£hash
 = 0;

419 ià(
p
[0] =ğ'#' && 
hash
 && 
b™s
 > 0è
u£hash
 = 1;

421 ià(
	`¡ršg2Î
(
p
+
u£hash
,
¶’
-u£hash,&
loff£t
) == 0) {

422 
	`addR•lyE¼Ü
(
c
,
”r
);

423  
C_ERR
;

427 ià(
u£hash
è
loff£t
 *ğ
b™s
;

430 ià((
loff£t
 < 0) || (()loffset >> 3) >= (512*1024*1024))

432 
	`addR•lyE¼Ü
(
c
,
”r
);

433  
C_ERR
;

436 *
off£t
 = (
size_t
)
loff£t
;

437  
C_OK
;

438 
	}
}

447 
	$g‘B™f›ldTy³FromArgum’t
(
ş›Á
 *
c
, 
robj
 *
o
, *
sign
, *
b™s
) {

448 *
p
 = 
o
->
±r
;

449 *
”r
 = "Invalid bitfieldype. Use something†ike i16 u8. Notehat u64 is‚ot supported but i64 is.";

450 
Îb™s
;

452 ià(
p
[0] == 'i') {

453 *
sign
 = 1;

454 } ià(
p
[0] == 'u') {

455 *
sign
 = 0;

457 
	`addR•lyE¼Ü
(
c
,
”r
);

458  
C_ERR
;

461 ià((
	`¡ršg2Î
(
p
+1,
	`¡¾’
Õ+1),&
Îb™s
)) == 0 ||

462 
Îb™s
 < 1 ||

463 (*
sign
 =ğ1 && 
Îb™s
 > 64) ||

464 (*
sign
 =ğ0 && 
Îb™s
 > 63))

466 
	`addR•lyE¼Ü
(
c
,
”r
);

467  
C_ERR
;

469 *
b™s
 = 
Îb™s
;

470  
C_OK
;

471 
	}
}

478 
robj
 *
	$lookupSŒšgFÜB™Commªd
(
ş›Á
 *
c
, 
size_t
 
maxb™
) {

479 
size_t
 
by‹
 = 
maxb™
 >> 3;

480 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

482 ià(
o
 =ğ
NULL
) {

483 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ewËn
(
NULL
, 
by‹
+1));

484 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
o
);

486 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
)è 
NULL
;

487 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

488 
o
->
±r
 = 
	`sdsgrowz”o
(o->±r,
by‹
+1);

490  
o
;

491 
	}
}

506 *
	$g‘ObjeùR—dOÆySŒšg
(
robj
 *
o
, *
Ën
, *
Îbuf
) {

507 
	`£rv”As£¹
(
o
->
ty³
 =ğ
OBJ_STRING
);

508 *
p
 = 
NULL
;

512 ià(
o
 && o->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

513 
p
 = (*è
Îbuf
;

514 ià(
Ën
è*ËÀğ
	`Î2¡ršg
(
Îbuf
,
LONG_STR_SIZE
,()
o
->
±r
);

515 } ià(
o
) {

516 
p
 = (*è
o
->
±r
;

517 ià(
Ën
è*ËÀğ
	`sd¦’
(
o
->
±r
);

519 ià(
Ën
) *len = 0;

521  
p
;

522 
	}
}

525 
	$£tb™Commªd
(
ş›Á
 *
c
) {

526 
robj
 *
o
;

527 *
”r
 = "bit is‚ot‡n integer or out of„ange";

528 
size_t
 
b™off£t
;

529 
ssize_t
 
by‹
, 
b™
;

530 
by‹v®
, 
b™v®
;

531 
Ú
;

533 ià(
	`g‘B™Off£tFromArgum’t
(
c
,c->
¬gv
[2],&
b™off£t
,0,0è!ğ
C_OK
)

536 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
Ú
,
”r
è!ğ
C_OK
)

540 ià(
Ú
 & ~1) {

541 
	`addR•lyE¼Ü
(
c
,
”r
);

545 ià((
o
 = 
	`lookupSŒšgFÜB™Commªd
(
c
,
b™off£t
)è=ğ
NULL
) ;

548 
by‹
 = 
b™off£t
 >> 3;

549 
by‹v®
 = ((
ušt8_t
*)
o
->
±r
)[
by‹
];

550 
b™
 = 7 - (
b™off£t
 & 0x7);

551 
b™v®
 = 
by‹v®
 & (1 << 
b™
);

554 
by‹v®
 &ğ~(1 << 
b™
);

555 
by‹v®
 |ğ((
Ú
 & 0x1è<< 
b™
);

556 ((
ušt8_t
*)
o
->
±r
)[
by‹
] = 
by‹v®
;

557 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

558 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£tb™",
c
->
¬gv
[1],c->
db
->
id
);

559 
£rv”
.
dœty
++;

560 
	`addR•ly
(
c
, 
b™v®
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

561 
	}
}

564 
	$g‘b™Commªd
(
ş›Á
 *
c
) {

565 
robj
 *
o
;

566 
Îbuf
[32];

567 
size_t
 
b™off£t
;

568 
size_t
 
by‹
, 
b™
;

569 
size_t
 
b™v®
 = 0;

571 ià(
	`g‘B™Off£tFromArgum’t
(
c
,c->
¬gv
[2],&
b™off£t
,0,0è!ğ
C_OK
)

574 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

575 
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) ;

577 
by‹
 = 
b™off£t
 >> 3;

578 
b™
 = 7 - (
b™off£t
 & 0x7);

579 ià(
	`sdsEncodedObjeù
(
o
)) {

580 ià(
by‹
 < 
	`sd¦’
(
o
->
±r
))

581 
b™v®
 = ((
ušt8_t
*)
o
->
±r
)[
by‹
] & (1 << 
b™
);

583 ià(
by‹
 < (
size_t
)
	`Î2¡ršg
(
Îbuf
,Ölbuf),()
o
->
±r
))

584 
b™v®
 = 
Îbuf
[
by‹
] & (1 << 
b™
);

587 
	`addR•ly
(
c
, 
b™v®
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

588 
	}
}

591 
	$b™İCommªd
(
ş›Á
 *
c
) {

592 *
İÇme
 = 
c
->
¬gv
[1]->
±r
;

593 
robj
 *
o
, *
rg‘key
 = 
c
->
¬gv
[2];

594 
İ
, 
j
, 
numkeys
;

595 
robj
 **
objeùs
;

596 **
¤c
;

597 *
Ën
, 
maxËn
 = 0;

599 
mšËn
 = 0;

600 *
»s
 = 
NULL
;

603 ià((
İÇme
[0] =ğ'a' || o²ame[0] =ğ'A'è&& !
	`¡rÿ£cmp
(opname,"and"))

604 
İ
 = 
BITOP_AND
;

605 if((
İÇme
[0] =ğ'o' || o²ame[0] =ğ'O'è&& !
	`¡rÿ£cmp
(opname,"or"))

606 
İ
 = 
BITOP_OR
;

607 if((
İÇme
[0] =ğ'x' || o²ame[0] =ğ'X'è&& !
	`¡rÿ£cmp
(opname,"xor"))

608 
İ
 = 
BITOP_XOR
;

609 if((
İÇme
[0] =ğ'n' || o²ame[0] =ğ'N'è&& !
	`¡rÿ£cmp
(opname,"not"))

610 
İ
 = 
BITOP_NOT
;

612 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

617 ià(
İ
 =ğ
BITOP_NOT
 && 
c
->
¬gc
 != 4) {

618 
	`addR•lyE¼Ü
(
c
,"BITOP NOT must be called with‡ single source key.");

623 
numkeys
 = 
c
->
¬gc
 - 3;

624 
¤c
 = 
	`zm®loc
((*è* 
numkeys
);

625 
Ën
 = 
	`zm®loc
((è* 
numkeys
);

626 
objeùs
 = 
	`zm®loc
((
robj
*è* 
numkeys
);

627 
j
 = 0; j < 
numkeys
; j++) {

628 
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
+3]);

630 ià(
o
 =ğ
NULL
) {

631 
objeùs
[
j
] = 
NULL
;

632 
¤c
[
j
] = 
NULL
;

633 
Ën
[
j
] = 0;

634 
mšËn
 = 0;

638 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) {

639 
i
;

640 
i
 = 0; i < 
j
; i++) {

641 ià(
objeùs
[
i
])

642 
	`deüRefCouÁ
(
objeùs
[
i
]);

644 
	`zä“
(
¤c
);

645 
	`zä“
(
Ën
);

646 
	`zä“
(
objeùs
);

649 
objeùs
[
j
] = 
	`g‘DecodedObjeù
(
o
);

650 
¤c
[
j
] = 
objeùs
[j]->
±r
;

651 
Ën
[
j
] = 
	`sd¦’
(
objeùs
[j]->
±r
);

652 ià(
Ën
[
j
] > 
maxËn
) maxlen =†en[j];

653 ià(
j
 =ğ0 || 
Ën
[j] < 
mšËn
) minlen =†en[j];

657 ià(
maxËn
) {

658 
»s
 = (*è
	`sd¢ewËn
(
NULL
,
maxËn
);

659 
ouut
, 
by‹
;

660 
i
;

667 
j
 = 0;

668 #iâdeà
USE_ALIGNED_ACCESS


669 ià(
mšËn
 >ğ()*4 && 
numkeys
 <= 16) {

670 *
Í
[16];

671 *
Ìes
 = (*è
»s
;

674 
	`memıy
(
Í
,
¤c
,(*)*
numkeys
);

675 
	`memıy
(
»s
,
¤c
[0],
mšËn
);

678 ià(
İ
 =ğ
BITOP_AND
) {

679 
mšËn
 >= ()*4) {

680 
i
 = 1; i < 
numkeys
; i++) {

681 
Ìes
[0] &ğ
Í
[
i
][0];

682 
Ìes
[1] &ğ
Í
[
i
][1];

683 
Ìes
[2] &ğ
Í
[
i
][2];

684 
Ìes
[3] &ğ
Í
[
i
][3];

685 
Í
[
i
]+=4;

687 
Ìes
+=4;

688 
j
 += ()*4;

689 
mšËn
 -= ()*4;

691 } ià(
İ
 =ğ
BITOP_OR
) {

692 
mšËn
 >= ()*4) {

693 
i
 = 1; i < 
numkeys
; i++) {

694 
Ìes
[0] |ğ
Í
[
i
][0];

695 
Ìes
[1] |ğ
Í
[
i
][1];

696 
Ìes
[2] |ğ
Í
[
i
][2];

697 
Ìes
[3] |ğ
Í
[
i
][3];

698 
Í
[
i
]+=4;

700 
Ìes
+=4;

701 
j
 += ()*4;

702 
mšËn
 -= ()*4;

704 } ià(
İ
 =ğ
BITOP_XOR
) {

705 
mšËn
 >= ()*4) {

706 
i
 = 1; i < 
numkeys
; i++) {

707 
Ìes
[0] ^ğ
Í
[
i
][0];

708 
Ìes
[1] ^ğ
Í
[
i
][1];

709 
Ìes
[2] ^ğ
Í
[
i
][2];

710 
Ìes
[3] ^ğ
Í
[
i
][3];

711 
Í
[
i
]+=4;

713 
Ìes
+=4;

714 
j
 += ()*4;

715 
mšËn
 -= ()*4;

717 } ià(
İ
 =ğ
BITOP_NOT
) {

718 
mšËn
 >= ()*4) {

719 
Ìes
[0] = ~lres[0];

720 
Ìes
[1] = ~lres[1];

721 
Ìes
[2] = ~lres[2];

722 
Ìes
[3] = ~lres[3];

723 
Ìes
+=4;

724 
j
 += ()*4;

725 
mšËn
 -= ()*4;

732 ; 
j
 < 
maxËn
; j++) {

733 
ouut
 = (
Ën
[0] <ğ
j
è? 0 : 
¤c
[0][j];

734 ià(
İ
 =ğ
BITOP_NOT
è
ouut
 = ~output;

735 
i
 = 1; i < 
numkeys
; i++) {

736 
by‹
 = (
Ën
[
i
] <ğ
j
è? 0 : 
¤c
[i][j];

737 
İ
) {

738 
BITOP_AND
: 
ouut
 &ğ
by‹
; ;

739 
BITOP_OR
: 
ouut
 |ğ
by‹
; ;

740 
BITOP_XOR
: 
ouut
 ^ğ
by‹
; ;

743 
»s
[
j
] = 
ouut
;

746 
j
 = 0; j < 
numkeys
; j++) {

747 ià(
objeùs
[
j
])

748 
	`deüRefCouÁ
(
objeùs
[
j
]);

750 
	`zä“
(
¤c
);

751 
	`zä“
(
Ën
);

752 
	`zä“
(
objeùs
);

755 ià(
maxËn
) {

756 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
»s
);

757 
	`£tKey
(
c
,c->
db
,
rg‘key
,
o
);

758 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£t",
rg‘key
,
c
->
db
->
id
);

759 
	`deüRefCouÁ
(
o
);

760 } ià(
	`dbD–‘e
(
c
->
db
,
rg‘key
)) {

761 
	`sigÇlModif›dKey
(
c
,c->
db
,
rg‘key
);

762 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
rg‘key
,
c
->
db
->
id
);

764 
£rv”
.
dœty
++;

765 
	`addR•lyLÚgLÚg
(
c
,
maxËn
);

766 
	}
}

769 
	$b™couÁCommªd
(
ş›Á
 *
c
) {

770 
robj
 *
o
;

771 
¡¬t
, 
’d
, 
¡¾’
;

772 *
p
;

773 
Îbuf
[
LONG_STR_SIZE
];

776 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

777 
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) ;

778 
p
 = 
	`g‘ObjeùR—dOÆySŒšg
(
o
,&
¡¾’
,
Îbuf
);

781 ià(
c
->
¬gc
 == 4) {

782 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
¡¬t
,
NULL
è!ğ
C_OK
)

784 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
’d
,
NULL
è!ğ
C_OK
)

787 ià(
¡¬t
 < 0 && 
’d
 < 0 && start >ƒnd) {

788 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

791 ià(
¡¬t
 < 0è¡¬ˆğ
¡¾’
+start;

792 ià(
’d
 < 0è’d = 
¡¾’
+end;

793 ià(
¡¬t
 < 0) start = 0;

794 ià(
’d
 < 0)ƒnd = 0;

795 ià(
’d
 >ğ
¡¾’
)ƒnd = strlen-1;

796 } ià(
c
->
¬gc
 == 2) {

798 
¡¬t
 = 0;

799 
’d
 = 
¡¾’
-1;

802 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

808 ià(
¡¬t
 > 
’d
) {

809 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

811 
by‹s
 = 
’d
-
¡¬t
+1;

813 
	`addR•lyLÚgLÚg
(
c
,
	`»disPİcouÁ
(
p
+
¡¬t
,
by‹s
));

815 
	}
}

818 
	$b™posCommªd
(
ş›Á
 *
c
) {

819 
robj
 *
o
;

820 
b™
, 
¡¬t
, 
’d
, 
¡¾’
;

821 *
p
;

822 
Îbuf
[
LONG_STR_SIZE
];

823 
’d_giv’
 = 0;

827 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
b™
,
NULL
è!ğ
C_OK
)

829 ià(
b™
 != 0 && bit != 1) {

830 
	`addR•lyE¼Ü
(
c
, "The bit‡rgument must be 1 or 0.");

837 ià((
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1])è=ğ
NULL
) {

838 
	`addR•lyLÚgLÚg
(
c
, 
b™
 ? -1 : 0);

841 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) ;

842 
p
 = 
	`g‘ObjeùR—dOÆySŒšg
(
o
,&
¡¾’
,
Îbuf
);

845 ià(
c
->
¬gc
 == 4 || c->argc == 5) {

846 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
¡¬t
,
NULL
è!ğ
C_OK
)

848 ià(
c
->
¬gc
 == 5) {

849 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[4],&
’d
,
NULL
è!ğ
C_OK
)

851 
’d_giv’
 = 1;

853 
’d
 = 
¡¾’
-1;

856 ià(
¡¬t
 < 0è¡¬ˆğ
¡¾’
+start;

857 ià(
’d
 < 0è’d = 
¡¾’
+end;

858 ià(
¡¬t
 < 0) start = 0;

859 ià(
’d
 < 0)ƒnd = 0;

860 ià(
’d
 >ğ
¡¾’
)ƒnd = strlen-1;

861 } ià(
c
->
¬gc
 == 3) {

863 
¡¬t
 = 0;

864 
’d
 = 
¡¾’
-1;

867 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

873 ià(
¡¬t
 > 
’d
) {

874 
	`addR•lyLÚgLÚg
(
c
, -1);

876 
by‹s
 = 
’d
-
¡¬t
+1;

877 
pos
 = 
	`»disB™pos
(
p
+
¡¬t
,
by‹s
,
b™
);

886 ià(
’d_giv’
 && 
b™
 =ğ0 && 
pos
 =ğ
by‹s
*8) {

887 
	`addR•lyLÚgLÚg
(
c
,-1);

890 ià(
pos
 !ğ-1èpo +ğ
¡¬t
*8;

891 
	`addR•lyLÚgLÚg
(
c
,
pos
);

893 
	}
}

905 
	#BITFIELD_FLAG_NONE
 0

	)

906 
	#BITFIELD_FLAG_READONLY
 (1<<0)

	)

908 
	sb™f›ldOp
 {

909 
ušt64_t
 
	moff£t
;

910 
št64_t
 
	mi64
;

911 
	mİcode
;

912 
	mowty³
;

913 
	mb™s
;

914 
	msign
;

920 
	$b™f›ldG’”ic
(
ş›Á
 *
c
, 
æags
) {

921 
robj
 *
o
;

922 
size_t
 
b™off£t
;

923 
j
, 
numİs
 = 0, 
chªges
 = 0;

924 
b™f›ldOp
 *
İs
 = 
NULL
;

925 
owty³
 = 
BFOVERFLOW_WRAP
;

926 
»adÚly
 = 1;

927 
size_t
 
highe¡_wr™e_off£t
 = 0;

929 
j
 = 2; j < 
c
->
¬gc
; j++) {

930 
»m¬gs
 = 
c
->
¬gc
-
j
-1;

931 *
subcmd
 = 
c
->
¬gv
[
j
]->
±r
;

932 
İcode
;

933 
i64
 = 0;

934 
sign
 = 0;

935 
b™s
 = 0;

937 ià(!
	`¡rÿ£cmp
(
subcmd
,"g‘"è&& 
»m¬gs
 >= 2)

938 
İcode
 = 
BITFIELDOP_GET
;

939 ià(!
	`¡rÿ£cmp
(
subcmd
,"£t"è&& 
»m¬gs
 >= 3)

940 
İcode
 = 
BITFIELDOP_SET
;

941 ià(!
	`¡rÿ£cmp
(
subcmd
,"šüby"è&& 
»m¬gs
 >= 3)

942 
İcode
 = 
BITFIELDOP_INCRBY
;

943 ià(!
	`¡rÿ£cmp
(
subcmd
,"ov”æow"è&& 
»m¬gs
 >= 1) {

944 *
owty³Çme
 = 
c
->
¬gv
[
j
+1]->
±r
;

945 
j
++;

946 ià(!
	`¡rÿ£cmp
(
owty³Çme
,"wrap"))

947 
owty³
 = 
BFOVERFLOW_WRAP
;

948 ià(!
	`¡rÿ£cmp
(
owty³Çme
,"sat"))

949 
owty³
 = 
BFOVERFLOW_SAT
;

950 ià(!
	`¡rÿ£cmp
(
owty³Çme
,"fail"))

951 
owty³
 = 
BFOVERFLOW_FAIL
;

953 
	`addR•lyE¼Ü
(
c
,"Invalid OVERFLOWype specified");

954 
	`zä“
(
İs
);

959 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

960 
	`zä“
(
İs
);

965 ià(
	`g‘B™f›ldTy³FromArgum’t
(
c
,c->
¬gv
[
j
+1],&
sign
,&
b™s
è!ğ
C_OK
) {

966 
	`zä“
(
İs
);

970 ià(
	`g‘B™Off£tFromArgum’t
(
c
,c->
¬gv
[
j
+2],&
b™off£t
,1,
b™s
è!ğ
C_OK
){

971 
	`zä“
(
İs
);

975 ià(
İcode
 !ğ
BITFIELDOP_GET
) {

976 
»adÚly
 = 0;

977 ià(
highe¡_wr™e_off£t
 < 
b™off£t
 + 
b™s
 - 1)

978 
highe¡_wr™e_off£t
 = 
b™off£t
 + 
b™s
 - 1;

980 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+3],&
i64
,
NULL
è!ğ
C_OK
){

981 
	`zä“
(
İs
);

987 
İs
 = 
	`z»®loc
(İs,(*İs)*(
numİs
+1));

988 
İs
[
numİs
].
off£t
 = 
b™off£t
;

989 
İs
[
numİs
].
i64
 = i64;

990 
İs
[
numİs
].
İcode
 = opcode;

991 
İs
[
numİs
].
owty³
 = owtype;

992 
İs
[
numİs
].
b™s
 = bits;

993 
İs
[
numİs
].
sign
 = sign;

994 
numİs
++;

996 
j
 +ğ3 - (
İcode
 =ğ
BITFIELDOP_GET
);

999 ià(
»adÚly
) {

1002 
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1]);

1003 ià(
o
 !ğ
NULL
 && 
	`checkTy³
(
c
,o,
OBJ_STRING
)) {

1004 
	`zä“
(
İs
);

1008 ià(
æags
 & 
BITFIELD_FLAG_READONLY
) {

1009 
	`zä“
(
İs
);

1010 
	`addR•lyE¼Ü
(
c
, "BITFIELD_RO only supportshe GET subcommand");

1016 ià((
o
 = 
	`lookupSŒšgFÜB™Commªd
(
c
,

1017 
highe¡_wr™e_off£t
)è=ğ
NULL
) {

1018 
	`zä“
(
İs
);

1023 
	`addR•lyA¼ayL’
(
c
,
numİs
);

1026 
j
 = 0; j < 
numİs
; j++) {

1027 
b™f›ldOp
 *
thisİ
 = 
İs
+
j
;

1030 ià(
thisİ
->
İcode
 =ğ
BITFIELDOP_SET
 ||

1031 
thisİ
->
İcode
 =ğ
BITFIELDOP_INCRBY
)

1040 ià(
thisİ
->
sign
) {

1041 
št64_t
 
Şdv®
, 
Ãwv®
, 
w¿µed
, 
»tv®
;

1042 
ov”æow
;

1044 
Şdv®
 = 
	`g‘SigÃdB™f›ld
(
o
->
±r
,
thisİ
->
off£t
,

1045 
thisİ
->
b™s
);

1047 ià(
thisİ
->
İcode
 =ğ
BITFIELDOP_INCRBY
) {

1048 
Ãwv®
 = 
Şdv®
 + 
thisİ
->
i64
;

1049 
ov”æow
 = 
	`checkSigÃdB™f›ldOv”æow
(
Şdv®
,

1050 
thisİ
->
i64
,thisİ->
b™s
,thisİ->
owty³
,&
w¿µed
);

1051 ià(
ov”æow
è
Ãwv®
 = 
w¿µed
;

1052 
»tv®
 = 
Ãwv®
;

1054 
Ãwv®
 = 
thisİ
->
i64
;

1055 
ov”æow
 = 
	`checkSigÃdB™f›ldOv”æow
(
Ãwv®
,

1056 0,
thisİ
->
b™s
,thisİ->
owty³
,&
w¿µed
);

1057 ià(
ov”æow
è
Ãwv®
 = 
w¿µed
;

1058 
»tv®
 = 
Şdv®
;

1063 ià(!(
ov”æow
 && 
thisİ
->
owty³
 =ğ
BFOVERFLOW_FAIL
)) {

1064 
	`addR•lyLÚgLÚg
(
c
,
»tv®
);

1065 
	`£tSigÃdB™f›ld
(
o
->
±r
,
thisİ
->
off£t
,

1066 
thisİ
->
b™s
,
Ãwv®
);

1068 
	`addR•lyNuÎ
(
c
);

1071 
ušt64_t
 
Şdv®
, 
Ãwv®
, 
w¿µed
, 
»tv®
;

1072 
ov”æow
;

1074 
Şdv®
 = 
	`g‘UnsigÃdB™f›ld
(
o
->
±r
,
thisİ
->
off£t
,

1075 
thisİ
->
b™s
);

1077 ià(
thisİ
->
İcode
 =ğ
BITFIELDOP_INCRBY
) {

1078 
Ãwv®
 = 
Şdv®
 + 
thisİ
->
i64
;

1079 
ov”æow
 = 
	`checkUnsigÃdB™f›ldOv”æow
(
Şdv®
,

1080 
thisİ
->
i64
,thisİ->
b™s
,thisİ->
owty³
,&
w¿µed
);

1081 ià(
ov”æow
è
Ãwv®
 = 
w¿µed
;

1082 
»tv®
 = 
Ãwv®
;

1084 
Ãwv®
 = 
thisİ
->
i64
;

1085 
ov”æow
 = 
	`checkUnsigÃdB™f›ldOv”æow
(
Ãwv®
,

1086 0,
thisİ
->
b™s
,thisİ->
owty³
,&
w¿µed
);

1087 ià(
ov”æow
è
Ãwv®
 = 
w¿µed
;

1088 
»tv®
 = 
Şdv®
;

1092 ià(!(
ov”æow
 && 
thisİ
->
owty³
 =ğ
BFOVERFLOW_FAIL
)) {

1093 
	`addR•lyLÚgLÚg
(
c
,
»tv®
);

1094 
	`£tUnsigÃdB™f›ld
(
o
->
±r
,
thisİ
->
off£t
,

1095 
thisİ
->
b™s
,
Ãwv®
);

1097 
	`addR•lyNuÎ
(
c
);

1100 
chªges
++;

1103 
buf
[9];

1104 
¡¾’
 = 0;

1105 *
¤c
 = 
NULL
;

1106 
Îbuf
[
LONG_STR_SIZE
];

1108 ià(
o
 !ğ
NULL
)

1109 
¤c
 = 
	`g‘ObjeùR—dOÆySŒšg
(
o
,&
¡¾’
,
Îbuf
);

1115 
	`mem£t
(
buf
,0,9);

1116 
i
;

1117 
size_t
 
by‹
 = 
thisİ
->
off£t
 >> 3;

1118 
i
 = 0; i < 9; i++) {

1119 ià(
¤c
 =ğ
NULL
 || 
i
+
by‹
 >ğ(
size_t
)
¡¾’
) ;

1120 
buf
[
i
] = 
¤c
[i+
by‹
];

1125 ià(
thisİ
->
sign
) {

1126 
št64_t
 
v®
 = 
	`g‘SigÃdB™f›ld
(
buf
,
thisİ
->
off£t
-(
by‹
*8),

1127 
thisİ
->
b™s
);

1128 
	`addR•lyLÚgLÚg
(
c
,
v®
);

1130 
ušt64_t
 
v®
 = 
	`g‘UnsigÃdB™f›ld
(
buf
,
thisİ
->
off£t
-(
by‹
*8),

1131 
thisİ
->
b™s
);

1132 
	`addR•lyLÚgLÚg
(
c
,
v®
);

1137 ià(
chªges
) {

1138 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1139 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£tb™",
c
->
¬gv
[1],c->
db
->
id
);

1140 
£rv”
.
dœty
 +ğ
chªges
;

1142 
	`zä“
(
İs
);

1143 
	}
}

1145 
	$b™f›ldCommªd
(
ş›Á
 *
c
) {

1146 
	`b™f›ldG’”ic
(
c
, 
BITFIELD_FLAG_NONE
);

1147 
	}
}

1149 
	$b™f›ldroCommªd
(
ş›Á
 *
c
) {

1150 
	`b™f›ldG’”ic
(
c
, 
BITFIELD_FLAG_READONLY
);

1151 
	}
}

	@blocked.c

63 
	~"£rv”.h
"

65 
£rveCl›ÁBlockedOnLi¡
(
ş›Á
 *
»ûiv”
, 
robj
 *
key
,„obj *
d¡key
, 
»disDb
 *
db
,„obj *
v®ue
, 
wh”e
);

77 
	sbkšfo
 {

78 
li¡Node
 *
	mli¡node
;

79 
¡»amID
 
	m¡»am_id
;

80 } 
	tbkšfo
;

85 
	$blockCl›Á
(
ş›Á
 *
c
, 
bty³
) {

86 
c
->
æags
 |ğ
CLIENT_BLOCKED
;

87 
c
->
bty³
 = btype;

88 
£rv”
.
blocked_ş›Ás
++;

89 
£rv”
.
blocked_ş›Ás_by_ty³
[
bty³
]++;

90 
	`addCl›ÁToTimeoutTabË
(
c
);

91 
	}
}

96 
	$´oûssUnblockedCl›Ás
() {

97 
li¡Node
 *
Ê
;

98 
ş›Á
 *
c
;

100 
	`li¡L’gth
(
£rv”
.
unblocked_ş›Ás
)) {

101 
Ê
 = 
	`li¡Fœ¡
(
£rv”
.
unblocked_ş›Ás
);

102 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

103 
c
 = 
Ê
->
v®ue
;

104 
	`li¡D–Node
(
£rv”
.
unblocked_ş›Ás
,
Ê
);

105 
c
->
æags
 &ğ~
CLIENT_UNBLOCKED
;

111 ià(!(
c
->
æags
 & 
CLIENT_BLOCKED
)) {

112 ià(
c
->
qu”ybuf
 && 
	`sd¦’
(c->querybuf) > 0) {

113 
	`´oûssIÅutBufãr
(
c
);

117 
	}
}

135 
	$queueCl›ÁFÜR•roûssšg
(
ş›Á
 *
c
) {

138 ià(!(
c
->
æags
 & 
CLIENT_UNBLOCKED
)) {

139 
c
->
æags
 |ğ
CLIENT_UNBLOCKED
;

140 
	`li¡AddNodeTa
(
£rv”
.
unblocked_ş›Ás
,
c
);

142 
	}
}

146 
	$unblockCl›Á
(
ş›Á
 *
c
) {

147 ià(
c
->
bty³
 =ğ
BLOCKED_LIST
 ||

148 
c
->
bty³
 =ğ
BLOCKED_ZSET
 ||

149 
c
->
bty³
 =ğ
BLOCKED_STREAM
) {

150 
	`unblockCl›ÁWa™šgD©a
(
c
);

151 } ià(
c
->
bty³
 =ğ
BLOCKED_WAIT
) {

152 
	`unblockCl›ÁWa™šgR•liÿs
(
c
);

153 } ià(
c
->
bty³
 =ğ
BLOCKED_MODULE
) {

154 ià(
	`moduËCl›ÁIsBlockedOnKeys
(
c
)è
	`unblockCl›ÁWa™šgD©a
(c);

155 
	`unblockCl›ÁFromModuË
(
c
);

157 
	`£rv”Pªic
("Unknown btype in unblockClient().");

161 
£rv”
.
blocked_ş›Ás
--;

162 
£rv”
.
blocked_ş›Ás_by_ty³
[
c
->
bty³
]--;

163 
c
->
æags
 &ğ~
CLIENT_BLOCKED
;

164 
c
->
bty³
 = 
BLOCKED_NONE
;

165 
	`»moveCl›ÁFromTimeoutTabË
(
c
);

166 
	`queueCl›ÁFÜR•roûssšg
(
c
);

167 
	}
}

172 
	$»¶yToBlockedCl›ÁTimedOut
(
ş›Á
 *
c
) {

173 ià(
c
->
bty³
 =ğ
BLOCKED_LIST
 ||

174 
c
->
bty³
 =ğ
BLOCKED_ZSET
 ||

175 
c
->
bty³
 =ğ
BLOCKED_STREAM
) {

176 
	`addR•lyNuÎA¼ay
(
c
);

177 } ià(
c
->
bty³
 =ğ
BLOCKED_WAIT
) {

178 
	`addR•lyLÚgLÚg
(
c
,
	`»¶iÿtiÚCouÁAcksByOff£t
(c->
bpİ
.
»¶off£t
));

179 } ià(
c
->
bty³
 =ğ
BLOCKED_MODULE
) {

180 
	`moduËBlockedCl›ÁTimedOut
(
c
);

182 
	`£rv”Pªic
("Unknown btype in„eplyToBlockedClientTimedOut().");

184 
	}
}

193 
	$discÚÃùAÎBlockedCl›Ás
() {

194 
li¡Node
 *
Ê
;

195 
li¡I‹r
 
li
;

197 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

198 (
Ê
 = 
	`li¡Next
(&
li
))) {

199 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

201 ià(
c
->
æags
 & 
CLIENT_BLOCKED
) {

202 
	`addR•lySds
(
c
,
	`sd¢ew
(

205 
	`unblockCl›Á
(
c
);

206 
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

209 
	}
}

214 
	$£rveCl›ÁsBlockedOnLi¡Key
(
robj
 *
o
, 
»adyLi¡
 *
¾
) {

217 
diùEÁry
 *
de
 = 
	`diùFšd
(
¾
->
db
->
blockšg_keys
,¾->
key
);

218 ià(
de
) {

219 
li¡
 *
ş›Ás
 = 
	`diùG‘V®
(
de
);

220 
numş›Ás
 = 
	`li¡L’gth
(
ş›Ás
);

222 
numş›Ás
--) {

223 
li¡Node
 *
ş›Ánode
 = 
	`li¡Fœ¡
(
ş›Ás
);

224 
ş›Á
 *
»ûiv”
 = 
ş›Ánode
->
v®ue
;

226 ià(
»ûiv”
->
bty³
 !ğ
BLOCKED_LIST
) {

229 
	`li¡RÙ©eH—dToTa
(
ş›Ás
);

233 
robj
 *
d¡key
 = 
»ûiv”
->
bpİ
.
rg‘
;

234 
wh”e
 = (
»ûiv”
->
Ï¡cmd
 &&

235 
»ûiv”
->
Ï¡cmd
->
´oc
 =ğ
bÍİCommªd
) ?

236 
LIST_HEAD
 : 
LIST_TAIL
;

237 
robj
 *
v®ue
 = 
	`li¡Ty³Pİ
(
o
,
wh”e
);

239 ià(
v®ue
) {

243 ià(
d¡key
è
	`šüRefCouÁ
(dstkey);

244 
	`unblockCl›Á
(
»ûiv”
);

246 ià(
	`£rveCl›ÁBlockedOnLi¡
(
»ûiv”
,

247 
¾
->
key
,
d¡key
,¾->
db
,
v®ue
,

248 
wh”e
è=ğ
C_ERR
)

252 
	`li¡Ty³Push
(
o
,
v®ue
,
wh”e
);

255 ià(
d¡key
è
	`deüRefCouÁ
(dstkey);

256 
	`deüRefCouÁ
(
v®ue
);

263 ià(
	`li¡Ty³L’gth
(
o
) == 0) {

264 
	`dbD–‘e
(
¾
->
db
,¾->
key
);

265 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
¾
->
key
,¾->
db
->
id
);

269 
	}
}

274 
	$£rveCl›ÁsBlockedOnSÜ‹dS‘Key
(
robj
 *
o
, 
»adyLi¡
 *
¾
) {

277 
diùEÁry
 *
de
 = 
	`diùFšd
(
¾
->
db
->
blockšg_keys
,¾->
key
);

278 ià(
de
) {

279 
li¡
 *
ş›Ás
 = 
	`diùG‘V®
(
de
);

280 
numş›Ás
 = 
	`li¡L’gth
(
ş›Ás
);

281 
zÿrd
 = 
	`z£tL’gth
(
o
);

283 
numş›Ás
-- && 
zÿrd
) {

284 
li¡Node
 *
ş›Ánode
 = 
	`li¡Fœ¡
(
ş›Ás
);

285 
ş›Á
 *
»ûiv”
 = 
ş›Ánode
->
v®ue
;

287 ià(
»ûiv”
->
bty³
 !ğ
BLOCKED_ZSET
) {

290 
	`li¡RÙ©eH—dToTa
(
ş›Ás
);

294 
wh”e
 = (
»ûiv”
->
Ï¡cmd
 &&

295 
»ûiv”
->
Ï¡cmd
->
´oc
 =ğ
bzpİmšCommªd
)

296 ? 
ZSET_MIN
 : 
ZSET_MAX
;

297 
	`unblockCl›Á
(
»ûiv”
);

298 
	`g’”icZpİCommªd
(
»ûiv”
,&
¾
->
key
,1,
wh”e
,1,
NULL
);

299 
zÿrd
--;

302 
robj
 *
¬gv
[2];

303 
»disCommªd
 *
cmd
 = 
wh”e
 =ğ
ZSET_MIN
 ?

304 
£rv”
.
zpİmšCommªd
 :

305 
£rv”
.
zpİmaxCommªd
;

306 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
(
cmd
->
Çme
,
	`¡¾’
(cmd->name));

307 
¬gv
[1] = 
¾
->
key
;

308 
	`šüRefCouÁ
(
¾
->
key
);

309 
	`´İag©e
(
cmd
,
»ûiv”
->
db
->
id
,

310 
¬gv
,2,
PROPAGATE_AOF
|
PROPAGATE_REPL
);

311 
	`deüRefCouÁ
(
¬gv
[0]);

312 
	`deüRefCouÁ
(
¬gv
[1]);

315 
	}
}

320 
	$£rveCl›ÁsBlockedOnSŒ—mKey
(
robj
 *
o
, 
»adyLi¡
 *
¾
) {

321 
diùEÁry
 *
de
 = 
	`diùFšd
(
¾
->
db
->
blockšg_keys
,¾->
key
);

322 
¡»am
 *
s
 = 
o
->
±r
;

327 ià(
de
) {

328 
li¡
 *
ş›Ás
 = 
	`diùG‘V®
(
de
);

329 
li¡Node
 *
Ê
;

330 
li¡I‹r
 
li
;

331 
	`li¡Rewšd
(
ş›Ás
,&
li
);

333 (
Ê
 = 
	`li¡Next
(&
li
))) {

334 
ş›Á
 *
»ûiv”
 = 
	`li¡NodeV®ue
(
Ê
);

335 ià(
»ûiv”
->
bty³
 !ğ
BLOCKED_STREAM
) ;

336 
bkšfo
 *
bki
 = 
	`diùF‘chV®ue
(
»ûiv”
->
bpİ
.
keys
,
¾
->
key
);

337 
¡»amID
 *
gt
 = &
bki
->
¡»am_id
;

348 
¡»amCG
 *
group
 = 
NULL
;

349 ià(
»ûiv”
->
bpİ
.
x»ad_group
) {

350 
group
 = 
	`¡»amLookupCG
(
s
,

351 
»ûiv”
->
bpİ
.
x»ad_group
->
±r
);

354 ià(!
group
) {

355 
	`addR•lyE¼Ü
(
»ûiv”
,

358 
	`unblockCl›Á
(
»ûiv”
);

361 *
gt
 = 
group
->
Ï¡_id
;

365 ià(
	`¡»amCom·»ID
(&
s
->
Ï¡_id
, 
gt
) > 0) {

366 
¡»amID
 
¡¬t
 = *
gt
;

367 
	`¡»amInüID
(&
¡¬t
);

370 
¡»amCÚsum”
 *
cÚsum”
 = 
NULL
;

371 
nßck
 = 0;

373 ià(
group
) {

374 
cÚsum”
 =

375 
	`¡»amLookupCÚsum”
(
group
,

376 
»ûiv”
->
bpİ
.
x»ad_cÚsum”
->
±r
,

377 
SLC_NONE
);

378 
nßck
 = 
»ûiv”
->
bpİ
.
x»ad_group_nßck
;

385 ià(
»ûiv”
->
»¥
 == 2) {

386 
	`addR•lyA¼ayL’
(
»ûiv”
,1);

387 
	`addR•lyA¼ayL’
(
»ûiv”
,2);

389 
	`addR•lyM­L’
(
»ûiv”
,1);

391 
	`addR•lyBulk
(
»ûiv”
,
¾
->
key
);

393 
¡»amPrİInfo
 
pi
 = {

394 
¾
->
key
,

395 
»ûiv”
->
bpİ
.
x»ad_group


397 
	`¡»amR•lyW™hRªge
(
»ûiv”
,
s
,&
¡¬t
,
NULL
,

398 
»ûiv”
->
bpİ
.
x»ad_couÁ
,

399 0, 
group
, 
cÚsum”
, 
nßck
, &
pi
);

405 
	`unblockCl›Á
(
»ûiv”
);

409 
	}
}

417 
	$£rveCl›ÁsBlockedOnKeyByModuË
(
»adyLi¡
 *
¾
) {

418 
diùEÁry
 *
de
;

422 
de
 = 
	`diùFšd
(
¾
->
db
->
blockšg_keys
,¾->
key
);

423 ià(
de
) {

424 
li¡
 *
ş›Ás
 = 
	`diùG‘V®
(
de
);

425 
numş›Ás
 = 
	`li¡L’gth
(
ş›Ás
);

427 
numş›Ás
--) {

428 
li¡Node
 *
ş›Ánode
 = 
	`li¡Fœ¡
(
ş›Ás
);

429 
ş›Á
 *
»ûiv”
 = 
ş›Ánode
->
v®ue
;

436 
	`li¡RÙ©eH—dToTa
(
ş›Ás
);

438 ià(
»ûiv”
->
bty³
 !ğ
BLOCKED_MODULE
) ;

446 ià(!
	`moduËTryS”veCl›ÁBlockedOnKey
(
»ûiv”
, 
¾
->
key
)) ;

448 
	`moduËUnblockCl›Á
(
»ûiv”
);

451 
	}
}

474 
	$hªdËCl›ÁsBlockedOnKeys
() {

475 
	`li¡L’gth
(
£rv”
.
»ady_keys
) != 0) {

476 
li¡
 *
l
;

482 
l
 = 
£rv”
.
»ady_keys
;

483 
£rv”
.
»ady_keys
 = 
	`li¡C»©e
();

485 
	`li¡L’gth
(
l
) != 0) {

486 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
l
);

487 
»adyLi¡
 *
¾
 = 
Ê
->
v®ue
;

491 
	`diùD–‘e
(
¾
->
db
->
»ady_keys
,¾->
key
);

500 
£rv”
.
fixed_time_expœe
++;

501 
	`upd©eCachedTime
(0);

504 
robj
 *
o
 = 
	`lookupKeyWr™e
(
¾
->
db
,¾->
key
);

506 ià(
o
 !ğ
NULL
) {

507 ià(
o
->
ty³
 =ğ
OBJ_LIST
)

508 
	`£rveCl›ÁsBlockedOnLi¡Key
(
o
,
¾
);

509 ià(
o
->
ty³
 =ğ
OBJ_ZSET
)

510 
	`£rveCl›ÁsBlockedOnSÜ‹dS‘Key
(
o
,
¾
);

511 ià(
o
->
ty³
 =ğ
OBJ_STREAM
)

512 
	`£rveCl›ÁsBlockedOnSŒ—mKey
(
o
,
¾
);

516 
	`£rveCl›ÁsBlockedOnKeyByModuË
(
¾
);

518 
£rv”
.
fixed_time_expœe
--;

521 
	`deüRefCouÁ
(
¾
->
key
);

522 
	`zä“
(
¾
);

523 
	`li¡D–Node
(
l
,
Ê
);

525 
	`li¡R–—£
(
l
);

527 
	}
}

556 
	$blockFÜKeys
(
ş›Á
 *
c
, 
bty³
, 
robj
 **
keys
, 
numkeys
, 
m¡ime_t
 
timeout
,„obj *
rg‘
, 
¡»amID
 *
ids
) {

557 
diùEÁry
 *
de
;

558 
li¡
 *
l
;

559 
j
;

561 
c
->
bpİ
.
timeout
 =imeout;

562 
c
->
bpİ
.
rg‘
 =arget;

564 ià(
rg‘
 !ğ
NULL
è
	`šüRefCouÁ
(target);

566 
j
 = 0; j < 
numkeys
; j++) {

569 
bkšfo
 *
bki
 = 
	`zm®loc
((*bki));

570 ià(
bty³
 =ğ
BLOCKED_STREAM
)

571 
bki
->
¡»am_id
 = 
ids
[
j
];

574 ià(
	`diùAdd
(
c
->
bpİ
.
keys
,keys[
j
],
bki
è!ğ
DICT_OK
) {

575 
	`zä“
(
bki
);

578 
	`šüRefCouÁ
(
keys
[
j
]);

581 
de
 = 
	`diùFšd
(
c
->
db
->
blockšg_keys
,
keys
[
j
]);

582 ià(
de
 =ğ
NULL
) {

583 
»tv®
;

586 
l
 = 
	`li¡C»©e
();

587 
»tv®
 = 
	`diùAdd
(
c
->
db
->
blockšg_keys
,
keys
[
j
],
l
);

588 
	`šüRefCouÁ
(
keys
[
j
]);

589 
	`£rv”As£¹W™hInfo
(
c
,
keys
[
j
],
»tv®
 =ğ
DICT_OK
);

591 
l
 = 
	`diùG‘V®
(
de
);

593 
	`li¡AddNodeTa
(
l
,
c
);

594 
bki
->
li¡node
 = 
	`li¡La¡
(
l
);

596 
	`blockCl›Á
(
c
,
bty³
);

597 
	}
}

601 
	$unblockCl›ÁWa™šgD©a
(
ş›Á
 *
c
) {

602 
diùEÁry
 *
de
;

603 
diùI‹¿tÜ
 *
di
;

604 
li¡
 *
l
;

606 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`diùSize
(c->
bpİ
.
keys
) != 0);

607 
di
 = 
	`diùG‘I‹¿tÜ
(
c
->
bpİ
.
keys
);

609 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

610 
robj
 *
key
 = 
	`diùG‘Key
(
de
);

611 
bkšfo
 *
bki
 = 
	`diùG‘V®
(
de
);

614 
l
 = 
	`diùF‘chV®ue
(
c
->
db
->
blockšg_keys
,
key
);

615 
	`£rv”As£¹W™hInfo
(
c
,
key
,
l
 !ğ
NULL
);

616 
	`li¡D–Node
(
l
,
bki
->
li¡node
);

618 ià(
	`li¡L’gth
(
l
) == 0)

619 
	`diùD–‘e
(
c
->
db
->
blockšg_keys
,
key
);

621 
	`diùR–—£I‹¿tÜ
(
di
);

624 
	`diùEm±y
(
c
->
bpİ
.
keys
,
NULL
);

625 ià(
c
->
bpİ
.
rg‘
) {

626 
	`deüRefCouÁ
(
c
->
bpİ
.
rg‘
);

627 
c
->
bpİ
.
rg‘
 = 
NULL
;

629 ià(
c
->
bpİ
.
x»ad_group
) {

630 
	`deüRefCouÁ
(
c
->
bpİ
.
x»ad_group
);

631 
	`deüRefCouÁ
(
c
->
bpİ
.
x»ad_cÚsum”
);

632 
c
->
bpİ
.
x»ad_group
 = 
NULL
;

633 
c
->
bpİ
.
x»ad_cÚsum”
 = 
NULL
;

635 
	}
}

644 
	$sigÇlKeyAsR—dy
(
»disDb
 *
db
, 
robj
 *
key
) {

645 
»adyLi¡
 *
¾
;

648 ià(
	`diùFšd
(
db
->
blockšg_keys
,
key
è=ğ
NULL
) ;

651 ià(
	`diùFšd
(
db
->
»ady_keys
,
key
è!ğ
NULL
) ;

654 
¾
 = 
	`zm®loc
((*rl));

655 
¾
->
key
 = key;

656 
¾
->
db
 = db;

657 
	`šüRefCouÁ
(
key
);

658 
	`li¡AddNodeTa
(
£rv”
.
»ady_keys
,
¾
);

663 
	`šüRefCouÁ
(
key
);

664 
	`£rv”As£¹
(
	`diùAdd
(
db
->
»ady_keys
,
key
,
NULL
è=ğ
DICT_OK
);

665 
	}
}

	@childinfo.c

30 
	~"£rv”.h
"

31 
	~<uni¡d.h
>

36 
	$İ’ChdInfoPe
() {

37 ià(
	`pe
(
£rv”
.
chd_šfo_pe
) == -1) {

40 
	`şo£ChdInfoPe
();

41 } ià(
	`ª‘NÚBlock
(
NULL
,
£rv”
.
chd_šfo_pe
[0]è!ğ
ANET_OK
) {

42 
	`şo£ChdInfoPe
();

44 
	`mem£t
(&
£rv”
.
chd_šfo_d©a
,0,(server.child_info_data));

46 
	}
}

49 
	$şo£ChdInfoPe
() {

50 ià(
£rv”
.
chd_šfo_pe
[0] != -1 ||

51 
£rv”
.
chd_šfo_pe
[1] != -1)

53 
	`şo£
(
£rv”
.
chd_šfo_pe
[0]);

54 
	`şo£
(
£rv”
.
chd_šfo_pe
[1]);

55 
£rv”
.
chd_šfo_pe
[0] = -1;

56 
£rv”
.
chd_šfo_pe
[1] = -1;

58 
	}
}

62 
	$£ndChdInfo
(
±y³
) {

63 ià(
£rv”
.
chd_šfo_pe
[1] == -1) ;

64 
£rv”
.
chd_šfo_d©a
.
magic
 = 
CHILD_INFO_MAGIC
;

65 
£rv”
.
chd_šfo_d©a
.
´oûss_ty³
 = 
±y³
;

66 
ssize_t
 
wËn
 = (
£rv”
.
chd_šfo_d©a
);

67 ià(
	`wr™e
(
£rv”
.
chd_šfo_pe
[1],&£rv”.
chd_šfo_d©a
,
wËn
) != wlen) {

70 
	}
}

73 
	$»ûiveChdInfo
() {

74 ià(
£rv”
.
chd_šfo_pe
[0] == -1) ;

75 
ssize_t
 
wËn
 = (
£rv”
.
chd_šfo_d©a
);

76 ià(
	`»ad
(
£rv”
.
chd_šfo_pe
[0],&£rv”.
chd_šfo_d©a
,
wËn
) == wlen &&

77 
£rv”
.
chd_šfo_d©a
.
magic
 =ğ
CHILD_INFO_MAGIC
)

79 ià(
£rv”
.
chd_šfo_d©a
.
´oûss_ty³
 =ğ
CHILD_INFO_TYPE_RDB
) {

80 
£rv”
.
¡©_rdb_cow_by‹s
 = s”v”.
chd_šfo_d©a
.
cow_size
;

81 } ià(
£rv”
.
chd_šfo_d©a
.
´oûss_ty³
 =ğ
CHILD_INFO_TYPE_AOF
) {

82 
£rv”
.
¡©_aof_cow_by‹s
 = s”v”.
chd_šfo_d©a
.
cow_size
;

83 } ià(
£rv”
.
chd_šfo_d©a
.
´oûss_ty³
 =ğ
CHILD_INFO_TYPE_MODULE
) {

84 
£rv”
.
¡©_moduË_cow_by‹s
 = s”v”.
chd_šfo_d©a
.
cow_size
;

87 
	}
}

	@cluster.c

31 
	~"£rv”.h
"

32 
	~"şu¡”.h
"

33 
	~"’dŸncÚv.h
"

35 
	~<sys/ty³s.h
>

36 
	~<sys/sock‘.h
>

37 
	~<¬·/š‘.h
>

38 
	~<fú.h
>

39 
	~<uni¡d.h
>

40 
	~<sys/¡©.h
>

41 
	~<sys/fe.h
>

42 
	~<m©h.h
>

47 
şu¡”Node
 *
	gmy£lf
 = 
NULL
;

49 
şu¡”Node
 *
ü—‹Clu¡”Node
(*
nod’ame
, 
æags
);

50 
şu¡”AddNode
(
şu¡”Node
 *
node
);

51 
şu¡”Acû±HªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

52 
şu¡”R—dHªdËr
(
cÚÃùiÚ
 *
cÚn
);

53 
şu¡”S’dPšg
(
şu¡”Lšk
 *
lšk
, 
ty³
);

54 
şu¡”S’dFa
(*
nod’ame
);

55 
şu¡”S’dFaov”AuthIfN“ded
(
şu¡”Node
 *
node
, 
şu¡”Msg
 *
»que¡
);

56 
şu¡”Upd©eS‹
();

57 
şu¡”NodeG‘SlÙB™
(
şu¡”Node
 *
n
, 
¦Ù
);

58 
sds
 
şu¡”G’NodesDesütiÚ
(
f‹r
);

59 
şu¡”Node
 *
şu¡”LookupNode
(cÚ¡ *
Çme
);

60 
şu¡”NodeAddSÏve
(
şu¡”Node
 *
ma¡”
, clu¡”Nod*
¦ave
);

61 
şu¡”AddSlÙ
(
şu¡”Node
 *
n
, 
¦Ù
);

62 
şu¡”D–SlÙ
(
¦Ù
);

63 
şu¡”D–NodeSlÙs
(
şu¡”Node
 *
node
);

64 
şu¡”NodeS‘SlÙB™
(
şu¡”Node
 *
n
, 
¦Ù
);

65 
şu¡”S‘Ma¡”
(
şu¡”Node
 *
n
);

66 
şu¡”HªdËSÏveFaov”
();

67 
şu¡”HªdËSÏveMig¿tiÚ
(
max_¦aves
);

68 
b™m­Te¡B™
(*
b™m­
, 
pos
);

69 
şu¡”DoBefÜeSË•
(
æags
);

70 
şu¡”S’dUpd©e
(
şu¡”Lšk
 *
lšk
, 
şu¡”Node
 *
node
);

71 
»£tMªu®Faov”
();

72 
şu¡”Clo£AÎSlÙs
();

73 
şu¡”S‘NodeAsMa¡”
(
şu¡”Node
 *
n
);

74 
şu¡”D–Node
(
şu¡”Node
 *
d–node
);

75 
sds
 
»´e£ÁClu¡”NodeFÏgs
(sd 
ci
, 
ušt16_t
 
æags
);

76 
ušt64_t
 
şu¡”G‘MaxEpoch
();

77 
şu¡”BumpCÚfigEpochW™houtCÚ£nsus
();

78 
moduËC®lClu¡”Reûiv”s
(cÚ¡ *
£nd”_id
, 
ušt64_t
 
moduË_id
, 
ušt8_t
 
ty³
, cÚ¡ *
·ylßd
, 
ušt32_t
 
Ën
);

90 
	$şu¡”LßdCÚfig
(*
f’ame
) {

91 
FILE
 *
å
 = 
	`fİ’
(
f’ame
,"r");

92 
¡©
 
sb
;

93 *
lše
;

94 
maxlše
, 
j
;

96 ià(
å
 =ğ
NULL
) {

97 ià(
”ºo
 =ğ
ENOENT
) {

98  
C_ERR
;

100 
	`£rv”Log
(
LL_WARNING
,

102 
f’ame
, 
	`¡»¼Ü
(
”ºo
));

103 
	`ex™
(1);

109 ià(
	`f¡©
(
	`f’o
(
å
),&
sb
è!ğ-1 && sb.
¡_size
 == 0) {

110 
	`fşo£
(
å
);

111  
C_ERR
;

121 
maxlše
 = 1024+
CLUSTER_SLOTS
*128;

122 
lše
 = 
	`zm®loc
(
maxlše
);

123 
	`fg‘s
(
lše
,
maxlše
,
å
è!ğ
NULL
) {

124 
¬gc
;

125 
sds
 *
¬gv
;

126 
şu¡”Node
 *
n
, *
ma¡”
;

127 *
p
, *
s
;

132 ià(
lše
[0] == '\n' ||†ine[0] == '\0') ;

135 
¬gv
 = 
	`sds¥l™¬gs
(
lše
,&
¬gc
);

136 ià(
¬gv
 =ğ
NULL
è
fm‹¼
;

140 ià(
	`¡rÿ£cmp
(
¬gv
[0],"vars") == 0) {

141 ià(!(
¬gc
 % 2)è
fm‹¼
;

142 
j
 = 1; j < 
¬gc
; j += 2) {

143 ià(
	`¡rÿ£cmp
(
¬gv
[
j
],"currentEpoch") == 0) {

144 
£rv”
.
şu¡”
->
cu¼’tEpoch
 =

145 
	`¡¹ouÎ
(
¬gv
[
j
+1],
NULL
,10);

146 } ià(
	`¡rÿ£cmp
(
¬gv
[
j
],"lastVoteEpoch") == 0) {

147 
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
 =

148 
	`¡¹ouÎ
(
¬gv
[
j
+1],
NULL
,10);

150 
	`£rv”Log
(
LL_WARNING
,

152 
¬gv
[
j
]);

155 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

160 ià(
¬gc
 < 8) {

161 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

162 
fm‹¼
;

166 
n
 = 
	`şu¡”LookupNode
(
¬gv
[0]);

167 ià(!
n
) {

168 
n
 = 
	`ü—‹Clu¡”Node
(
¬gv
[0],0);

169 
	`şu¡”AddNode
(
n
);

172 ià((
p
 = 
	`¡¼chr
(
¬gv
[1],':')è=ğ
NULL
) {

173 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

174 
fm‹¼
;

176 *
p
 = '\0';

177 
	`memıy
(
n
->

,
¬gv
[1],
	`¡¾’
(argv[1])+1);

178 *
pÜt
 = 
p
+1;

179 *
bu¥
 = 
	`¡rchr
(
pÜt
,'@');

180 ià(
bu¥
) {

181 *
bu¥
 = '\0';

182 
bu¥
++;

184 
n
->
pÜt
 = 
	`©oi
(port);

188 
n
->
ıÜt
 = 
bu¥
 ? 
	`©oi
(bu¥è:‚->
pÜt
 + 
CLUSTER_PORT_INCR
;

191 
p
 = 
s
 = 
¬gv
[2];

192 
p
) {

193 
p
 = 
	`¡rchr
(
s
,',');

194 ià(
p
) *p = '\0';

195 ià(!
	`¡rÿ£cmp
(
s
,"myself")) {

196 
	`£rv”As£¹
(
£rv”
.
şu¡”
->
my£lf
 =ğ
NULL
);

197 
my£lf
 = 
£rv”
.
şu¡”
->my£làğ
n
;

198 
n
->
æags
 |ğ
CLUSTER_NODE_MYSELF
;

199 } ià(!
	`¡rÿ£cmp
(
s
,"master")) {

200 
n
->
æags
 |ğ
CLUSTER_NODE_MASTER
;

201 } ià(!
	`¡rÿ£cmp
(
s
,"slave")) {

202 
n
->
æags
 |ğ
CLUSTER_NODE_SLAVE
;

203 } ià(!
	`¡rÿ£cmp
(
s
,"fail?")) {

204 
n
->
æags
 |ğ
CLUSTER_NODE_PFAIL
;

205 } ià(!
	`¡rÿ£cmp
(
s
,"fail")) {

206 
n
->
æags
 |ğ
CLUSTER_NODE_FAIL
;

207 
n
->
ç_time
 = 
	`m¡ime
();

208 } ià(!
	`¡rÿ£cmp
(
s
,"handshake")) {

209 
n
->
æags
 |ğ
CLUSTER_NODE_HANDSHAKE
;

210 } ià(!
	`¡rÿ£cmp
(
s
,"noaddr")) {

211 
n
->
æags
 |ğ
CLUSTER_NODE_NOADDR
;

212 } ià(!
	`¡rÿ£cmp
(
s
,"nofailover")) {

213 
n
->
æags
 |ğ
CLUSTER_NODE_NOFAILOVER
;

214 } ià(!
	`¡rÿ£cmp
(
s
,"noflags")) {

217 
	`£rv”Pªic
("Unknown flag in„edis cluster config file");

219 ià(
p
è
s
 =…+1;

224 ià(
¬gv
[3][0] != '-') {

225 
ma¡”
 = 
	`şu¡”LookupNode
(
¬gv
[3]);

226 ià(!
ma¡”
) {

227 
ma¡”
 = 
	`ü—‹Clu¡”Node
(
¬gv
[3],0);

228 
	`şu¡”AddNode
(
ma¡”
);

230 
n
->
¦aveof
 = 
ma¡”
;

231 
	`şu¡”NodeAddSÏve
(
ma¡”
,
n
);

235 ià(
	`©oi
(
¬gv
[4])è
n
->
pšg_£Á
 = 
	`m¡ime
();

236 ià(
	`©oi
(
¬gv
[5])è
n
->
pÚg_»ûived
 = 
	`m¡ime
();

239 
n
->
cÚfigEpoch
 = 
	`¡¹ouÎ
(
¬gv
[6],
NULL
,10);

242 
j
 = 8; j < 
¬gc
; j++) {

243 
¡¬t
, 
¡İ
;

245 ià(
¬gv
[
j
][0] == '[') {

247 
¦Ù
;

248 
dœeùiÚ
;

249 
şu¡”Node
 *
ú
;

251 
p
 = 
	`¡rchr
(
¬gv
[
j
],'-');

252 
	`£rv”As£¹
(
p
 !ğ
NULL
);

253 *
p
 = '\0';

254 
dœeùiÚ
 = 
p
[1];

255 
¦Ù
 = 
	`©oi
(
¬gv
[
j
]+1);

256 ià(
¦Ù
 < 0 || slÙ >ğ
CLUSTER_SLOTS
) {

257 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

258 
fm‹¼
;

260 
p
 += 3;

261 
ú
 = 
	`şu¡”LookupNode
(
p
);

262 ià(!
ú
) {

263 
ú
 = 
	`ü—‹Clu¡”Node
(
p
,0);

264 
	`şu¡”AddNode
(
ú
);

266 ià(
dœeùiÚ
 == '>') {

267 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
] = 
ú
;

269 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] = 
ú
;

272 } ià((
p
 = 
	`¡rchr
(
¬gv
[
j
],'-')è!ğ
NULL
) {

273 *
p
 = '\0';

274 
¡¬t
 = 
	`©oi
(
¬gv
[
j
]);

275 
¡İ
 = 
	`©oi
(
p
+1);

277 
¡¬t
 = 
¡İ
 = 
	`©oi
(
¬gv
[
j
]);

279 ià(
¡¬t
 < 0 || s¹ >ğ
CLUSTER_SLOTS
 ||

280 
¡İ
 < 0 || stİ >ğ
CLUSTER_SLOTS
)

282 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

283 
fm‹¼
;

285 
¡¬t
 <ğ
¡İ
è
	`şu¡”AddSlÙ
(
n
, start++);

288 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

291 ià(
£rv”
.
şu¡”
->
my£lf
 =ğ
NULL
è
fm‹¼
;

293 
	`zä“
(
lše
);

294 
	`fşo£
(
å
);

296 
	`£rv”Log
(
LL_NOTICE
,"NodcÚfigu¿tiÚ†ßded, I'm %.40s", 
my£lf
->
Çme
);

301 ià(
	`şu¡”G‘MaxEpoch
(è> 
£rv”
.
şu¡”
->
cu¼’tEpoch
) {

302 
£rv”
.
şu¡”
->
cu¼’tEpoch
 = 
	`şu¡”G‘MaxEpoch
();

304  
C_OK
;

306 
fm‹¼
:

307 
	`£rv”Log
(
LL_WARNING
,

309 
	`zä“
(
lše
);

310 ià(
å
è
	`fşo£
(fp);

311 
	`ex™
(1);

312 
	}
}

326 
	$şu¡”SaveCÚfig
(
do_fsync
) {

327 
sds
 
ci
;

328 
size_t
 
cÚ‹Á_size
;

329 
¡©
 
sb
;

330 
fd
;

332 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 &ğ~
CLUSTER_TODO_SAVE_CONFIG
;

336 
ci
 = 
	`şu¡”G’NodesDesütiÚ
(
CLUSTER_NODE_HANDSHAKE
);

337 
ci
 = 
	`sdsÿrštf
(ci,"vars currentEpoch %llu†astVoteEpoch %llu\n",

338 (è
£rv”
.
şu¡”
->
cu¼’tEpoch
,

339 (è
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
);

340 
cÚ‹Á_size
 = 
	`sd¦’
(
ci
);

342 ià((
fd
 = 
	`İ’
(
£rv”
.
şu¡”_cÚfigfe
,
O_WRONLY
|
O_CREAT
,0644))

343 =ğ-1è
”r
;

346 ià(
	`f¡©
(
fd
,&
sb
) != -1) {

347 ià(
sb
.
¡_size
 > (
off_t
)
cÚ‹Á_size
) {

348 
ci
 = 
	`sdsgrowz”o
(ci,
sb
.
¡_size
);

349 
	`mem£t
(
ci
+
cÚ‹Á_size
,'\n',
sb
.
¡_size
-content_size);

352 ià(
	`wr™e
(
fd
,
ci
,
	`sd¦’
(ci)è!ğ(
ssize_t
)sd¦’(ci)è
”r
;

353 ià(
do_fsync
) {

354 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 &ğ~
CLUSTER_TODO_FSYNC_CONFIG
;

355 
	`fsync
(
fd
);

360 ià(
cÚ‹Á_size
 !ğ
	`sd¦’
(
ci
è&& 
	`árunÿ‹
(
fd
,content_size) == -1) {

363 
	`şo£
(
fd
);

364 
	`sdsä“
(
ci
);

367 
”r
:

368 ià(
fd
 !ğ-1è
	`şo£
(fd);

369 
	`sdsä“
(
ci
);

371 
	}
}

373 
	$şu¡”SaveCÚfigOrD›
(
do_fsync
) {

374 ià(
	`şu¡”SaveCÚfig
(
do_fsync
) == -1) {

375 
	`£rv”Log
(
LL_WARNING
,"Fatal: can't update cluster config file.");

376 
	`ex™
(1);

378 
	}
}

389 
	$şu¡”LockCÚfig
(*
f’ame
) {

394 #ià!
	`defšed
(
__sun
)

398 
fd
 = 
	`İ’
(
f’ame
,
O_WRONLY
|
O_CREAT
,0644);

399 ià(
fd
 == -1) {

400 
	`£rv”Log
(
LL_WARNING
,

402 
f’ame
, 
	`¡»¼Ü
(
”ºo
));

403  
C_ERR
;

406 ià(
	`æock
(
fd
,
LOCK_EX
|
LOCK_NB
) == -1) {

407 ià(
”ºo
 =ğ
EWOULDBLOCK
) {

408 
	`£rv”Log
(
LL_WARNING
,

412 "fes.", 
f’ame
);

414 
	`£rv”Log
(
LL_WARNING
,

415 "ImpossibËØlock %s: %s", 
f’ame
, 
	`¡»¼Ü
(
”ºo
));

417 
	`şo£
(
fd
);

418  
C_ERR
;

424  
C_OK
;

425 
	}
}

431 
	$şu¡”Upd©eMy£lfFÏgs
() {

432 
Şdæags
 = 
my£lf
->
æags
;

433 
noçov”
 = 
£rv”
.
şu¡”_¦ave_no_çov”
 ?

434 
CLUSTER_NODE_NOFAILOVER
 : 0;

435 
my£lf
->
æags
 &ğ~
CLUSTER_NODE_NOFAILOVER
;

436 
my£lf
->
æags
 |ğ
noçov”
;

437 ià(
my£lf
->
æags
 !ğ
Şdæags
) {

438 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

439 
CLUSTER_TODO_UPDATE_STATE
);

441 
	}
}

443 
	$şu¡”In™
() {

444 
§vecÚf
 = 0;

446 
£rv”
.
şu¡”
 = 
	`zm®loc
((
şu¡”S‹
));

447 
£rv”
.
şu¡”
->
my£lf
 = 
NULL
;

448 
£rv”
.
şu¡”
->
cu¼’tEpoch
 = 0;

449 
£rv”
.
şu¡”
->
¡©e
 = 
CLUSTER_FAIL
;

450 
£rv”
.
şu¡”
->
size
 = 1;

451 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 = 0;

452 
£rv”
.
şu¡”
->
nodes
 = 
	`diùC»©e
(&
şu¡”NodesDiùTy³
,
NULL
);

453 
£rv”
.
şu¡”
->
nodes_bÏck_li¡
 =

454 
	`diùC»©e
(&
şu¡”NodesBÏckLi¡DiùTy³
,
NULL
);

455 
£rv”
.
şu¡”
->
çov”_auth_time
 = 0;

456 
£rv”
.
şu¡”
->
çov”_auth_couÁ
 = 0;

457 
£rv”
.
şu¡”
->
çov”_auth_¿nk
 = 0;

458 
£rv”
.
şu¡”
->
çov”_auth_•och
 = 0;

459 
£rv”
.
şu¡”
->
ÿÁ_çov”_»asÚ
 = 
CLUSTER_CANT_FAILOVER_NONE
;

460 
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
 = 0;

461 
i
 = 0; i < 
CLUSTERMSG_TYPE_COUNT
; i++) {

462 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_£Á
[
i
] = 0;

463 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_»ûived
[
i
] = 0;

465 
£rv”
.
şu¡”
->
¡©s_pç_nodes
 = 0;

466 
	`mem£t
(
£rv”
.
şu¡”
->
¦Ùs
,0, (server.cluster->slots));

467 
	`şu¡”Clo£AÎSlÙs
();

471 ià(
	`şu¡”LockCÚfig
(
£rv”
.
şu¡”_cÚfigfe
è=ğ
C_ERR
)

472 
	`ex™
(1);

475 ià(
	`şu¡”LßdCÚfig
(
£rv”
.
şu¡”_cÚfigfe
è=ğ
C_ERR
) {

478 
my£lf
 = 
£rv”
.
şu¡”
->myself =

479 
	`ü—‹Clu¡”Node
(
NULL
,
CLUSTER_NODE_MYSELF
|
CLUSTER_NODE_MASTER
);

480 
	`£rv”Log
(
LL_NOTICE
,"No cluster configuration found, I'm %.40s",

481 
my£lf
->
Çme
);

482 
	`şu¡”AddNode
(
my£lf
);

483 
§vecÚf
 = 1;

485 ià(
§vecÚf
è
	`şu¡”SaveCÚfigOrD›
(1);

488 
£rv”
.
cfd_couÁ
 = 0;

493 
pÜt
 = 
£rv”
.
s_şu¡”
 ? s”v”.
s_pÜt
 : server.port;

494 ià(
pÜt
 > (65535-
CLUSTER_PORT_INCR
)) {

495 
	`£rv”Log
(
LL_WARNING
, "Redis…ort‚umberoo high. "

500 
	`ex™
(1);

502 ià(
	`li¡’ToPÜt
(
pÜt
+
CLUSTER_PORT_INCR
,

503 
£rv”
.
cfd
,&£rv”.
cfd_couÁ
è=ğ
C_ERR
)

505 
	`ex™
(1);

507 
j
;

509 
j
 = 0; j < 
£rv”
.
cfd_couÁ
; j++) {

510 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
cfd
[
j
], 
AE_READABLE
,

511 
şu¡”Acû±HªdËr
, 
NULL
è=ğ
AE_ERR
)

512 
	`£rv”Pªic
("Unrecoverableƒrror creating Redis Cluster "

518 
£rv”
.
şu¡”
->
¦Ùs_to_keys
 = 
	`¿xNew
();

519 
	`mem£t
(
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
,0,

520 (
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
));

524 
my£lf
->
pÜt
 =…ort;

525 
my£lf
->
ıÜt
 = 
pÜt
+
CLUSTER_PORT_INCR
;

526 ià(
£rv”
.
şu¡”_ªnounû_pÜt
)

527 
my£lf
->
pÜt
 = 
£rv”
.
şu¡”_ªnounû_pÜt
;

528 ià(
£rv”
.
şu¡”_ªnounû_bus_pÜt
)

529 
my£lf
->
ıÜt
 = 
£rv”
.
şu¡”_ªnounû_bus_pÜt
;

531 
£rv”
.
şu¡”
->
mf_’d
 = 0;

532 
	`»£tMªu®Faov”
();

533 
	`şu¡”Upd©eMy£lfFÏgs
();

534 
	}
}

545 
	$şu¡”Re£t
(
h¬d
) {

546 
diùI‹¿tÜ
 *
di
;

547 
diùEÁry
 *
de
;

548 
j
;

551 ià(
	`nodeIsSÏve
(
my£lf
)) {

552 
	`şu¡”S‘NodeAsMa¡”
(
my£lf
);

553 
	`»¶iÿtiÚUn£tMa¡”
();

554 
	`em±yDb
(-1,
EMPTYDB_NO_FLAGS
,
NULL
);

558 
	`şu¡”Clo£AÎSlÙs
();

559 
	`»£tMªu®Faov”
();

562 
j
 = 0; j < 
CLUSTER_SLOTS
; j++è
	`şu¡”D–SlÙ
(j);

565 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

566 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

567 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

569 ià(
node
 =ğ
my£lf
) ;

570 
	`şu¡”D–Node
(
node
);

572 
	`diùR–—£I‹¿tÜ
(
di
);

575 ià(
h¬d
) {

576 
sds
 
ŞdÇme
;

578 
£rv”
.
şu¡”
->
cu¼’tEpoch
 = 0;

579 
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
 = 0;

580 
my£lf
->
cÚfigEpoch
 = 0;

581 
	`£rv”Log
(
LL_WARNING
, "configEpoch seto 0 via CLUSTER RESET HARD");

585 
ŞdÇme
 = 
	`sd¢ewËn
(
my£lf
->
Çme
, 
CLUSTER_NAMELEN
);

586 
	`diùD–‘e
(
£rv”
.
şu¡”
->
nodes
,
ŞdÇme
);

587 
	`sdsä“
(
ŞdÇme
);

588 
	`g‘RªdomHexCh¬s
(
my£lf
->
Çme
, 
CLUSTER_NAMELEN
);

589 
	`şu¡”AddNode
(
my£lf
);

590 
	`£rv”Log
(
LL_NOTICE
,"Nodh¬d„e£t,‚ow I'm %.40s", 
my£lf
->
Çme
);

594 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

595 
CLUSTER_TODO_UPDATE_STATE
|

596 
CLUSTER_TODO_FSYNC_CONFIG
);

597 
	}
}

603 
şu¡”Lšk
 *
	$ü—‹Clu¡”Lšk
(
şu¡”Node
 *
node
) {

604 
şu¡”Lšk
 *
lšk
 = 
	`zm®loc
((*link));

605 
lšk
->
ùime
 = 
	`m¡ime
();

606 
lšk
->
¢dbuf
 = 
	`sd£m±y
();

607 
lšk
->
rcvbuf
 = 
	`sd£m±y
();

608 
lšk
->
node
 =‚ode;

609 
lšk
->
cÚn
 = 
NULL
;

610  
lšk
;

611 
	}
}

616 
	$ä“Clu¡”Lšk
(
şu¡”Lšk
 *
lšk
) {

617 ià(
lšk
->
cÚn
) {

618 
	`cÚnClo£
(
lšk
->
cÚn
);

619 
lšk
->
cÚn
 = 
NULL
;

621 
	`sdsä“
(
lšk
->
¢dbuf
);

622 
	`sdsä“
(
lšk
->
rcvbuf
);

623 ià(
lšk
->
node
)

624 
lšk
->
node
->lšk = 
NULL
;

625 
	`zä“
(
lšk
);

626 
	}
}

628 
	$şu¡”CÚnAcû±HªdËr
(
cÚÃùiÚ
 *
cÚn
) {

629 
şu¡”Lšk
 *
lšk
;

631 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

632 
	`£rv”Log
(
LL_VERBOSE
,

633 "E¼Ü‡cû±šg clu¡”‚odcÚÃùiÚ: %s", 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

634 
	`cÚnClo£
(
cÚn
);

643 
lšk
 = 
	`ü—‹Clu¡”Lšk
(
NULL
);

644 
lšk
->
cÚn
 = conn;

645 
	`cÚnS‘Priv©eD©a
(
cÚn
, 
lšk
);

648 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
şu¡”R—dHªdËr
);

649 
	}
}

651 
	#MAX_CLUSTER_ACCEPTS_PER_CALL
 1000

	)

652 
	$şu¡”Acû±HªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

653 
ıÜt
, 
cfd
;

654 
max
 = 
MAX_CLUSTER_ACCEPTS_PER_CALL
;

655 
c
[
NET_IP_STR_LEN
];

656 
	`UNUSED
(
–
);

657 
	`UNUSED
(
mask
);

658 
	`UNUSED
(
´ivd©a
);

662 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
 && s”v”.
lßdšg
) ;

664 
max
--) {

665 
cfd
 = 
	`ª‘TıAcû±
(
£rv”
.
Ã‹¼
, 
fd
, 
c
, (c), &
ıÜt
);

666 ià(
cfd
 =ğ
ANET_ERR
) {

667 ià(
”ºo
 !ğ
EWOULDBLOCK
)

668 
	`£rv”Log
(
LL_VERBOSE
,

669 "E¼Ü‡cû±šg clu¡”‚ode: %s", 
£rv”
.
Ã‹¼
);

673 
cÚÃùiÚ
 *
cÚn
 = 
£rv”
.
s_şu¡”
 ? 
	`cÚnC»©eAcû±edTLS
(
cfd
,1è: 
	`cÚnC»©eAcû±edSock‘
(cfd);

674 
	`cÚnNÚBlock
(
cÚn
);

675 
	`cÚnEÇbËTıNoD–ay
(
cÚn
);

678 
	`£rv”Log
(
LL_VERBOSE
,"Acû±šg clu¡”‚odcÚÃùiÚ from %s:%d", 
c
, 
ıÜt
);

683 ià(
	`cÚnAcû±
(
cÚn
, 
şu¡”CÚnAcû±HªdËr
è=ğ
C_ERR
) {

684 ià(
	`cÚnG‘S‹
(
cÚn
è=ğ
CONN_STATE_ERROR
)

685 
	`£rv”Log
(
LL_VERBOSE
,

687 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

688 
	`cÚnClo£
(
cÚn
);

692 
	}
}

704 
	$keyHashSlÙ
(*
key
, 
keyËn
) {

705 
s
, 
e
;

707 
s
 = 0; s < 
keyËn
; s++)

708 ià(
key
[
s
] == '{') ;

711 ià(
s
 =ğ
keyËn
è 
	`üc16
(
key
,keylen) & 0x3FFF;

714 
e
 = 
s
+1;ƒ < 
keyËn
;ƒ++)

715 ià(
key
[
e
] == '}') ;

718 ià(
e
 =ğ
keyËn
 ||ƒ =ğ
s
+1è 
	`üc16
(
key
,keylen) & 0x3FFF;

722  
	`üc16
(
key
+
s
+1,
e
-s-1) & 0x3FFF;

723 
	}
}

736 
şu¡”Node
 *
	$ü—‹Clu¡”Node
(*
nod’ame
, 
æags
) {

737 
şu¡”Node
 *
node
 = 
	`zm®loc
((*node));

739 ià(
nod’ame
)

740 
	`memıy
(
node
->
Çme
, 
nod’ame
, 
CLUSTER_NAMELEN
);

742 
	`g‘RªdomHexCh¬s
(
node
->
Çme
, 
CLUSTER_NAMELEN
);

743 
node
->
ùime
 = 
	`m¡ime
();

744 
node
->
cÚfigEpoch
 = 0;

745 
node
->
æags
 = flags;

746 
	`mem£t
(
node
->
¦Ùs
,0,(node->slots));

747 
node
->
num¦Ùs
 = 0;

748 
node
->
num¦aves
 = 0;

749 
node
->
¦aves
 = 
NULL
;

750 
node
->
¦aveof
 = 
NULL
;

751 
node
->
pšg_£Á
 =‚ode->
pÚg_»ûived
 = 0;

752 
node
->
ç_time
 = 0;

753 
node
->
lšk
 = 
NULL
;

754 
	`mem£t
(
node
->

,0,(node->ip));

755 
node
->
pÜt
 = 0;

756 
node
->
ıÜt
 = 0;

757 
node
->
ç_»pÜts
 = 
	`li¡C»©e
();

758 
node
->
vÙed_time
 = 0;

759 
node
->
Üphªed_time
 = 0;

760 
node
->
»¶_off£t_time
 = 0;

761 
node
->
»¶_off£t
 = 0;

762 
	`li¡S‘F»eM‘hod
(
node
->
ç_»pÜts
,
zä“
);

763  
node
;

764 
	}
}

776 
	$şu¡”NodeAddFau»R•Üt
(
şu¡”Node
 *
çšg
, clu¡”Nod*
£nd”
) {

777 
li¡
 *
l
 = 
çšg
->
ç_»pÜts
;

778 
li¡Node
 *
Ê
;

779 
li¡I‹r
 
li
;

780 
şu¡”NodeFaR•Üt
 *
ä
;

784 
	`li¡Rewšd
(
l
,&
li
);

785 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

786 
ä
 = 
Ê
->
v®ue
;

787 ià(
ä
->
node
 =ğ
£nd”
) {

788 
ä
->
time
 = 
	`m¡ime
();

794 
ä
 = 
	`zm®loc
((*fr));

795 
ä
->
node
 = 
£nd”
;

796 
ä
->
time
 = 
	`m¡ime
();

797 
	`li¡AddNodeTa
(
l
,
ä
);

799 
	}
}

806 
	$şu¡”NodeCËªupFau»R•Üts
(
şu¡”Node
 *
node
) {

807 
li¡
 *
l
 = 
node
->
ç_»pÜts
;

808 
li¡Node
 *
Ê
;

809 
li¡I‹r
 
li
;

810 
şu¡”NodeFaR•Üt
 *
ä
;

811 
m¡ime_t
 
maxtime
 = 
£rv”
.
şu¡”_node_timeout
 *

812 
CLUSTER_FAIL_REPORT_VALIDITY_MULT
;

813 
m¡ime_t
 
now
 = 
	`m¡ime
();

815 
	`li¡Rewšd
(
l
,&
li
);

816 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

817 
ä
 = 
Ê
->
v®ue
;

818 ià(
now
 - 
ä
->
time
 > 
maxtime
è
	`li¡D–Node
(
l
,
Ê
);

820 
	}
}

833 
	$şu¡”NodeD–Fau»R•Üt
(
şu¡”Node
 *
node
, clu¡”Nod*
£nd”
) {

834 
li¡
 *
l
 = 
node
->
ç_»pÜts
;

835 
li¡Node
 *
Ê
;

836 
li¡I‹r
 
li
;

837 
şu¡”NodeFaR•Üt
 *
ä
;

840 
	`li¡Rewšd
(
l
,&
li
);

841 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

842 
ä
 = 
Ê
->
v®ue
;

843 ià(
ä
->
node
 =ğ
£nd”
) ;

845 ià(!
Ê
)  0;

848 
	`li¡D–Node
(
l
,
Ê
);

849 
	`şu¡”NodeCËªupFau»R•Üts
(
node
);

851 
	}
}

856 
	$şu¡”NodeFau»R•ÜtsCouÁ
(
şu¡”Node
 *
node
) {

857 
	`şu¡”NodeCËªupFau»R•Üts
(
node
);

858  
	`li¡L’gth
(
node
->
ç_»pÜts
);

859 
	}
}

861 
	$şu¡”NodeRemoveSÏve
(
şu¡”Node
 *
ma¡”
, clu¡”Nod*
¦ave
) {

862 
j
;

864 
j
 = 0; j < 
ma¡”
->
num¦aves
; j++) {

865 ià(
ma¡”
->
¦aves
[
j
] =ğ
¦ave
) {

866 ià((
j
+1è< 
ma¡”
->
num¦aves
) {

867 
»maššg_¦aves
 = (
ma¡”
->
num¦aves
 - 
j
) - 1;

868 
	`memmove
(
ma¡”
->
¦aves
+
j
,master->slaves+(j+1),

869 ((*
ma¡”
->
¦aves
è* 
»maššg_¦aves
));

871 
ma¡”
->
num¦aves
--;

872 ià(
ma¡”
->
num¦aves
 == 0)

873 
ma¡”
->
æags
 &ğ~
CLUSTER_NODE_MIGRATE_TO
;

874  
C_OK
;

877  
C_ERR
;

878 
	}
}

880 
	$şu¡”NodeAddSÏve
(
şu¡”Node
 *
ma¡”
, clu¡”Nod*
¦ave
) {

881 
j
;

884 
j
 = 0; j < 
ma¡”
->
num¦aves
; j++)

885 ià(
ma¡”
->
¦aves
[
j
] =ğ
¦ave
è 
C_ERR
;

886 
ma¡”
->
¦aves
 = 
	`z»®loc
(master->slaves,

887 (
şu¡”Node
*)*(
ma¡”
->
num¦aves
+1));

888 
ma¡”
->
¦aves
[ma¡”->
num¦aves
] = 
¦ave
;

889 
ma¡”
->
num¦aves
++;

890 
ma¡”
->
æags
 |ğ
CLUSTER_NODE_MIGRATE_TO
;

891  
C_OK
;

892 
	}
}

894 
	$şu¡”CouÁNÚFašgSÏves
(
şu¡”Node
 *
n
) {

895 
j
, 
ok¦aves
 = 0;

897 
j
 = 0; j < 
n
->
num¦aves
; j++)

898 ià(!
	`nodeFaed
(
n
->
¦aves
[
j
])è
ok¦aves
++;

899  
ok¦aves
;

900 
	}
}

903 
	$ä“Clu¡”Node
(
şu¡”Node
 *
n
) {

904 
sds
 
nod’ame
;

905 
j
;

909 
j
 = 0; j < 
n
->
num¦aves
; j++)

910 
n
->
¦aves
[
j
]->
¦aveof
 = 
NULL
;

913 ià(
	`nodeIsSÏve
(
n
è&&‚->
¦aveof
è
	`şu¡”NodeRemoveSÏve
(n->slaveof,n);

916 
nod’ame
 = 
	`sd¢ewËn
(
n
->
Çme
, 
CLUSTER_NAMELEN
);

917 
	`£rv”As£¹
(
	`diùD–‘e
(
£rv”
.
şu¡”
->
nodes
,
nod’ame
è=ğ
DICT_OK
);

918 
	`sdsä“
(
nod’ame
);

921 ià(
n
->
lšk
è
	`ä“Clu¡”Lšk
(n->link);

922 
	`li¡R–—£
(
n
->
ç_»pÜts
);

923 
	`zä“
(
n
->
¦aves
);

924 
	`zä“
(
n
);

925 
	}
}

928 
	$şu¡”AddNode
(
şu¡”Node
 *
node
) {

929 
»tv®
;

931 
»tv®
 = 
	`diùAdd
(
£rv”
.
şu¡”
->
nodes
,

932 
	`sd¢ewËn
(
node
->
Çme
,
CLUSTER_NAMELEN
),‚ode);

933  (
»tv®
 =ğ
DICT_OK
è? 
C_OK
 : 
C_ERR
;

934 
	}
}

947 
	$şu¡”D–Node
(
şu¡”Node
 *
d–node
) {

948 
j
;

949 
diùI‹¿tÜ
 *
di
;

950 
diùEÁry
 *
de
;

953 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

954 ià(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
] =ğ
d–node
)

955 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
] = 
NULL
;

956 ià(
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
j
] =ğ
d–node
)

957 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
j
] = 
NULL
;

958 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
d–node
)

959 
	`şu¡”D–SlÙ
(
j
);

963 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

964 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

965 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

967 ià(
node
 =ğ
d–node
) ;

968 
	`şu¡”NodeD–Fau»R•Üt
(
node
,
d–node
);

970 
	`diùR–—£I‹¿tÜ
(
di
);

973 
	`ä“Clu¡”Node
(
d–node
);

974 
	}
}

977 
şu¡”Node
 *
	$şu¡”LookupNode
(cÚ¡ *
Çme
) {

978 
sds
 
s
 = 
	`sd¢ewËn
(
Çme
, 
CLUSTER_NAMELEN
);

979 
diùEÁry
 *
de
;

981 
de
 = 
	`diùFšd
(
£rv”
.
şu¡”
->
nodes
,
s
);

982 
	`sdsä“
(
s
);

983 ià(
de
 =ğ
NULL
)  NULL;

984  
	`diùG‘V®
(
de
);

985 
	}
}

991 
	$şu¡”R’ameNode
(
şu¡”Node
 *
node
, *
ÃwÇme
) {

992 
»tv®
;

993 
sds
 
s
 = 
	`sd¢ewËn
(
node
->
Çme
, 
CLUSTER_NAMELEN
);

995 
	`£rv”Log
(
LL_DEBUG
,"Renaming‚ode %.40s into %.40s",

996 
node
->
Çme
, 
ÃwÇme
);

997 
»tv®
 = 
	`diùD–‘e
(
£rv”
.
şu¡”
->
nodes
, 
s
);

998 
	`sdsä“
(
s
);

999 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

1000 
	`memıy
(
node
->
Çme
, 
ÃwÇme
, 
CLUSTER_NAMELEN
);

1001 
	`şu¡”AddNode
(
node
);

1002 
	}
}

1010 
ušt64_t
 
	$şu¡”G‘MaxEpoch
() {

1011 
ušt64_t
 
max
 = 0;

1012 
diùI‹¿tÜ
 *
di
;

1013 
diùEÁry
 *
de
;

1015 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

1016 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1017 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

1018 ià(
node
->
cÚfigEpoch
 > 
max
) max =‚ode->configEpoch;

1020 
	`diùR–—£I‹¿tÜ
(
di
);

1021 ià(
max
 < 
£rv”
.
şu¡”
->
cu¼’tEpoch
) max = server.cluster->currentEpoch;

1022  
max
;

1023 
	}
}

1054 
	$şu¡”BumpCÚfigEpochW™houtCÚ£nsus
() {

1055 
ušt64_t
 
maxEpoch
 = 
	`şu¡”G‘MaxEpoch
();

1057 ià(
my£lf
->
cÚfigEpoch
 == 0 ||

1058 
my£lf
->
cÚfigEpoch
 !ğ
maxEpoch
)

1060 
£rv”
.
şu¡”
->
cu¼’tEpoch
++;

1061 
my£lf
->
cÚfigEpoch
 = 
£rv”
.
şu¡”
->
cu¼’tEpoch
;

1062 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1063 
CLUSTER_TODO_FSYNC_CONFIG
);

1064 
	`£rv”Log
(
LL_WARNING
,

1066 (è
my£lf
->
cÚfigEpoch
);

1067  
C_OK
;

1069  
C_ERR
;

1071 
	}
}

1119 
	$şu¡”HªdËCÚfigEpochCŞlisiÚ
(
şu¡”Node
 *
£nd”
) {

1121 ià(
£nd”
->
cÚfigEpoch
 !ğ
my£lf
->configEpoch ||

1122 !
	`nodeIsMa¡”
(
£nd”
è|| !nodeIsMa¡”(
my£lf
)) ;

1124 ià(
	`memcmp
(
£nd”
->
Çme
,
my£lf
->Çme,
CLUSTER_NAMELEN
) <= 0) ;

1126 
£rv”
.
şu¡”
->
cu¼’tEpoch
++;

1127 
my£lf
->
cÚfigEpoch
 = 
£rv”
.
şu¡”
->
cu¼’tEpoch
;

1128 
	`şu¡”SaveCÚfigOrD›
(1);

1129 
	`£rv”Log
(
LL_VERBOSE
,

1132 
£nd”
->
Çme
,

1133 (è
my£lf
->
cÚfigEpoch
);

1134 
	}
}

1158 
	#CLUSTER_BLACKLIST_TTL
 60

	)

1167 
	$şu¡”BÏckli¡CËªup
() {

1168 
diùI‹¿tÜ
 *
di
;

1169 
diùEÁry
 *
de
;

1171 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes_bÏck_li¡
);

1172 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1173 
št64_t
 
expœe
 = 
	`diùG‘UnsigÃdIÁeg”V®
(
de
);

1175 ià(
expœe
 < 
£rv”
.
unixtime
)

1176 
	`diùD–‘e
(
£rv”
.
şu¡”
->
nodes_bÏck_li¡
,
	`diùG‘Key
(
de
));

1178 
	`diùR–—£I‹¿tÜ
(
di
);

1179 
	}
}

1182 
	$şu¡”BÏckli¡AddNode
(
şu¡”Node
 *
node
) {

1183 
diùEÁry
 *
de
;

1184 
sds
 
id
 = 
	`sd¢ewËn
(
node
->
Çme
,
CLUSTER_NAMELEN
);

1186 
	`şu¡”BÏckli¡CËªup
();

1187 ià(
	`diùAdd
(
£rv”
.
şu¡”
->
nodes_bÏck_li¡
,
id
,
NULL
è=ğ
DICT_OK
) {

1190 
id
 = 
	`sdsdup
(id);

1192 
de
 = 
	`diùFšd
(
£rv”
.
şu¡”
->
nodes_bÏck_li¡
,
id
);

1193 
	`diùS‘UnsigÃdIÁeg”V®
(
de
,
	`time
(
NULL
)+
CLUSTER_BLACKLIST_TTL
);

1194 
	`sdsä“
(
id
);

1195 
	}
}

1200 
	$şu¡”BÏckli¡Exi¡s
(*
nodeid
) {

1201 
sds
 
id
 = 
	`sd¢ewËn
(
nodeid
,
CLUSTER_NAMELEN
);

1202 
»tv®
;

1204 
	`şu¡”BÏckli¡CËªup
();

1205 
»tv®
 = 
	`diùFšd
(
£rv”
.
şu¡”
->
nodes_bÏck_li¡
,
id
è!ğ
NULL
;

1206 
	`sdsä“
(
id
);

1207  
»tv®
;

1208 
	}
}

1235 
	$m¬kNodeAsFašgIfN“ded
(
şu¡”Node
 *
node
) {

1236 
çu»s
;

1237 
Ãeded_quÜum
 = (
£rv”
.
şu¡”
->
size
 / 2) + 1;

1239 ià(!
	`nodeTimedOut
(
node
)) ;

1240 ià(
	`nodeFaed
(
node
)) ;

1242 
çu»s
 = 
	`şu¡”NodeFau»R•ÜtsCouÁ
(
node
);

1244 ià(
	`nodeIsMa¡”
(
my£lf
)è
çu»s
++;

1245 ià(
çu»s
 < 
Ãeded_quÜum
) ;

1247 
	`£rv”Log
(
LL_NOTICE
,

1248 "M¬kšg‚od%.40 a çšg (quÜum„—ched).", 
node
->
Çme
);

1251 
node
->
æags
 &ğ~
CLUSTER_NODE_PFAIL
;

1252 
node
->
æags
 |ğ
CLUSTER_NODE_FAIL
;

1253 
node
->
ç_time
 = 
	`m¡ime
();

1257 ià(
	`nodeIsMa¡”
(
my£lf
)è
	`şu¡”S’dFa
(
node
->
Çme
);

1258 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

1259 
	}
}

1264 
	$ş—rNodeFau»IfN“ded
(
şu¡”Node
 *
node
) {

1265 
m¡ime_t
 
now
 = 
	`m¡ime
();

1267 
	`£rv”As£¹
(
	`nodeFaed
(
node
));

1271 ià(
	`nodeIsSÏve
(
node
è||‚ode->
num¦Ùs
 == 0) {

1272 
	`£rv”Log
(
LL_NOTICE
,

1274 
node
->
Çme
,

1275 
	`nodeIsSÏve
(
node
) ? "replica" : "master without slots");

1276 
node
->
æags
 &ğ~
CLUSTER_NODE_FAIL
;

1277 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

1284 ià(
	`nodeIsMa¡”
(
node
è&&‚ode->
num¦Ùs
 > 0 &&

1285 (
now
 - 
node
->
ç_time
) >

1286 (
£rv”
.
şu¡”_node_timeout
 * 
CLUSTER_FAIL_UNDO_TIME_MULT
))

1288 
	`£rv”Log
(
LL_NOTICE
,

1290 
node
->
Çme
);

1291 
node
->
æags
 &ğ~
CLUSTER_NODE_FAIL
;

1292 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

1294 
	}
}

1299 
	$şu¡”HªdshakeInProg»ss
(*

, 
pÜt
, 
ıÜt
) {

1300 
diùI‹¿tÜ
 *
di
;

1301 
diùEÁry
 *
de
;

1303 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

1304 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1305 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

1307 ià(!
	`nodeInHªdshake
(
node
)) ;

1308 ià(!
	`¡rÿ£cmp
(
node
->

,ip) &&

1309 
node
->
pÜt
 ==…ort &&

1310 
node
->
ıÜt
 == cport) ;

1312 
	`diùR–—£I‹¿tÜ
(
di
);

1313  
de
 !ğ
NULL
;

1314 
	}
}

1323 
	$şu¡”S¹Hªdshake
(*

, 
pÜt
, 
ıÜt
) {

1324 
şu¡”Node
 *
n
;

1325 
nÜm_
[
NET_IP_STR_LEN
];

1326 
sockaddr_¡Üage
 
§
;

1329 ià(
	`š‘_±Ú
(
AF_INET
,

,

1330 &(((
sockaddr_š
 *)&
§
)->
sš_addr
)))

1332 
§
.
ss_çmy
 = 
AF_INET
;

1333 } ià(
	`š‘_±Ú
(
AF_INET6
,

,

1334 &(((
sockaddr_š6
 *)&
§
)->
sš6_addr
)))

1336 
§
.
ss_çmy
 = 
AF_INET6
;

1338 
”ºo
 = 
EINVAL
;

1343 ià(
pÜt
 <ğ0 ||…Üˆ> 65535 || 
ıÜt
 <= 0 || cport > 65535) {

1344 
”ºo
 = 
EINVAL
;

1350 
	`mem£t
(
nÜm_
,0,
NET_IP_STR_LEN
);

1351 ià(
§
.
ss_çmy
 =ğ
AF_INET
)

1352 
	`š‘_Áİ
(
AF_INET
,

1353 (*)&(((
sockaddr_š
 *)&
§
)->
sš_addr
),

1354 
nÜm_
,
NET_IP_STR_LEN
);

1356 
	`š‘_Áİ
(
AF_INET6
,

1357 (*)&(((
sockaddr_š6
 *)&
§
)->
sš6_addr
),

1358 
nÜm_
,
NET_IP_STR_LEN
);

1360 ià(
	`şu¡”HªdshakeInProg»ss
(
nÜm_
,
pÜt
,
ıÜt
)) {

1361 
”ºo
 = 
EAGAIN
;

1368 
n
 = 
	`ü—‹Clu¡”Node
(
NULL
,
CLUSTER_NODE_HANDSHAKE
|
CLUSTER_NODE_MEET
);

1369 
	`memıy
(
n
->

,
nÜm_
,(n->ip));

1370 
n
->
pÜt
 =…ort;

1371 
n
->
ıÜt
 = cport;

1372 
	`şu¡”AddNode
(
n
);

1374 
	}
}

1380 
	$şu¡”ProûssGossSeùiÚ
(
şu¡”Msg
 *
hdr
, 
şu¡”Lšk
 *
lšk
) {

1381 
ušt16_t
 
couÁ
 = 
	`Áohs
(
hdr
->count);

1382 
şu¡”MsgD©aGoss
 *
g
 = (şu¡”MsgD©aGoss*è
hdr
->
d©a
.
pšg
.
goss
;

1383 
şu¡”Node
 *
£nd”
 = 
lšk
->
node
 ?†šk->nod: 
	`şu¡”LookupNode
(
hdr
->sender);

1385 
couÁ
--) {

1386 
ušt16_t
 
æags
 = 
	`Áohs
(
g
->flags);

1387 
şu¡”Node
 *
node
;

1388 
sds
 
ci
;

1390 ià(
£rv”
.
v”bos™y
 =ğ
LL_DEBUG
) {

1391 
ci
 = 
	`»´e£ÁClu¡”NodeFÏgs
(
	`sd£m±y
(), 
æags
);

1392 
	`£rv”Log
(
LL_DEBUG
,"GOSSIP %.40s %s:%d@%d %s",

1393 
g
->
nod’ame
,

1394 
g
->

,

1395 
	`Áohs
(
g
->
pÜt
),

1396 
	`Áohs
(
g
->
ıÜt
),

1397 
ci
);

1398 
	`sdsä“
(
ci
);

1402 
node
 = 
	`şu¡”LookupNode
(
g
->
nod’ame
);

1403 ià(
node
) {

1406 ià(
£nd”
 && 
	`nodeIsMa¡”
(£nd”è&& 
node
 !ğ
my£lf
) {

1407 ià(
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_PFAIL
)) {

1408 ià(
	`şu¡”NodeAddFau»R•Üt
(
node
,
£nd”
)) {

1409 
	`£rv”Log
(
LL_VERBOSE
,

1411 
£nd”
->
Çme
, 
node
->name);

1413 
	`m¬kNodeAsFašgIfN“ded
(
node
);

1415 ià(
	`şu¡”NodeD–Fau»R•Üt
(
node
,
£nd”
)) {

1416 
	`£rv”Log
(
LL_VERBOSE
,

1418 
£nd”
->
Çme
, 
node
->name);

1427 ià(!(
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_PFAIL
)) &&

1428 
node
->
pšg_£Á
 == 0 &&

1429 
	`şu¡”NodeFau»R•ÜtsCouÁ
(
node
) == 0)

1431 
m¡ime_t
 
pÚgtime
 = 
	`Áohl
(
g
->
pÚg_»ûived
);

1432 
pÚgtime
 *= 1000;

1438 ià(
pÚgtime
 <ğ(
£rv”
.
m¡ime
+500) &&

1439 
pÚgtime
 > 
node
->
pÚg_»ûived
)

1441 
node
->
pÚg_»ûived
 = 
pÚgtime
;

1450 ià(
node
->
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_PFAIL
) &&

1451 !(
æags
 & 
CLUSTER_NODE_NOADDR
) &&

1452 !(
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_PFAIL
)) &&

1453 (
	`¡rÿ£cmp
(
node
->

,
g
->ip) ||

1454 
node
->
pÜt
 !ğ
	`Áohs
(
g
->port) ||

1455 
node
->
ıÜt
 !ğ
	`Áohs
(
g
->cport)))

1457 ià(
node
->
lšk
è
	`ä“Clu¡”Lšk
(node->link);

1458 
	`memıy
(
node
->

,
g
->,
NET_IP_STR_LEN
);

1459 
node
->
pÜt
 = 
	`Áohs
(
g
->port);

1460 
node
->
ıÜt
 = 
	`Áohs
(
g
->cport);

1461 
node
->
æags
 &ğ~
CLUSTER_NODE_NOADDR
;

1470 ià(
£nd”
 &&

1471 !(
æags
 & 
CLUSTER_NODE_NOADDR
) &&

1472 !
	`şu¡”BÏckli¡Exi¡s
(
g
->
nod’ame
))

1474 
	`şu¡”S¹Hªdshake
(
g
->

,
	`Áohs
(g->
pÜt
),Áohs(g->
ıÜt
));

1479 
g
++;

1481 
	}
}

1486 
	$nodeIp2SŒšg
(*
buf
, 
şu¡”Lšk
 *
lšk
, *
ªnounûd_
) {

1487 ià(
ªnounûd_
[0] != '\0') {

1488 
	`memıy
(
buf
,
ªnounûd_
,
NET_IP_STR_LEN
);

1489 
buf
[
NET_IP_STR_LEN
-1] = '\0';

1491 
	`cÚnP“rToSŒšg
(
lšk
->
cÚn
, 
buf
, 
NET_IP_STR_LEN
, 
NULL
);

1493 
	}
}

1507 
	$nodeUpd©eAdd»ssIfN“ded
(
şu¡”Node
 *
node
, 
şu¡”Lšk
 *
lšk
,

1508 
şu¡”Msg
 *
hdr
)

1510 

[
NET_IP_STR_LEN
] = {0};

1511 
pÜt
 = 
	`Áohs
(
hdr
->port);

1512 
ıÜt
 = 
	`Áohs
(
hdr
->cport);

1520 ià(
lšk
 =ğ
node
->link)  0;

1522 
	`nodeIp2SŒšg
(

,
lšk
,
hdr
->
my
);

1523 ià(
node
->
pÜt
 =ğpÜˆ&&‚ode->
ıÜt
 == cport &&

1524 
	`¡rcmp
(

,
node
->ip) == 0)  0;

1527 
	`memıy
(
node
->

,ip,(ip));

1528 
node
->
pÜt
 =…ort;

1529 
node
->
ıÜt
 = cport;

1530 ià(
node
->
lšk
è
	`ä“Clu¡”Lšk
(node->link);

1531 
node
->
æags
 &ğ~
CLUSTER_NODE_NOADDR
;

1532 
	`£rv”Log
(
LL_WARNING
,"Address updated for‚ode %.40s,‚ow %s:%d",

1533 
node
->
Çme
,‚ode->

,‚ode->
pÜt
);

1537 ià(
	`nodeIsSÏve
(
my£lf
è&& my£lf->
¦aveof
 =ğ
node
)

1538 
	`»¶iÿtiÚS‘Ma¡”
(
node
->

,‚ode->
pÜt
);

1540 
	}
}

1545 
	$şu¡”S‘NodeAsMa¡”
(
şu¡”Node
 *
n
) {

1546 ià(
	`nodeIsMa¡”
(
n
)) ;

1548 ià(
n
->
¦aveof
) {

1549 
	`şu¡”NodeRemoveSÏve
(
n
->
¦aveof
,n);

1550 ià(
n
 !ğ
my£lf
èn->
æags
 |ğ
CLUSTER_NODE_MIGRATE_TO
;

1552 
n
->
æags
 &ğ~
CLUSTER_NODE_SLAVE
;

1553 
n
->
æags
 |ğ
CLUSTER_NODE_MASTER
;

1554 
n
->
¦aveof
 = 
NULL
;

1557 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1558 
CLUSTER_TODO_UPDATE_STATE
);

1559 
	}
}

1572 
	$şu¡”Upd©eSlÙsCÚfigW™h
(
şu¡”Node
 *
£nd”
, 
ušt64_t
 
£nd”CÚfigEpoch
, *
¦Ùs
) {

1573 
j
;

1574 
şu¡”Node
 *
curma¡”
, *
Ãwma¡”
 = 
NULL
;

1582 
ušt16_t
 
dœty_¦Ùs
[
CLUSTER_SLOTS
];

1583 
dœty_¦Ùs_couÁ
 = 0;

1588 
curma¡”
 = 
	`nodeIsMa¡”
(
my£lf
è? my£là: my£lf->
¦aveof
;

1590 ià(
£nd”
 =ğ
my£lf
) {

1591 
	`£rv”Log
(
LL_WARNING
,"Discarding UPDATE message‡bout myself.");

1595 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

1596 ià(
	`b™m­Te¡B™
(
¦Ùs
,
j
)) {

1598 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
£nd”
) ;

1604 ià(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
]) ;

1610 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
NULL
 ||

1611 
£rv”
.
şu¡”
->
¦Ùs
[
j
]->
cÚfigEpoch
 < 
£nd”CÚfigEpoch
)

1615 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
my£lf
 &&

1616 
	`couÁKeysInSlÙ
(
j
) &&

1617 
£nd”
 !ğ
my£lf
)

1619 
dœty_¦Ùs
[
dœty_¦Ùs_couÁ
] = 
j
;

1620 
dœty_¦Ùs_couÁ
++;

1623 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
curma¡”
)

1624 
Ãwma¡”
 = 
£nd”
;

1625 
	`şu¡”D–SlÙ
(
j
);

1626 
	`şu¡”AddSlÙ
(
£nd”
,
j
);

1627 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1628 
CLUSTER_TODO_UPDATE_STATE
|

1629 
CLUSTER_TODO_FSYNC_CONFIG
);

1637 ià(
£rv”
.
şu¡”_moduË_æags
 & 
CLUSTER_MODULE_FLAG_NO_REDIRECTION
)

1647 ià(
Ãwma¡”
 && 
curma¡”
->
num¦Ùs
 == 0) {

1648 
	`£rv”Log
(
LL_WARNING
,

1650 "a ¨»¶iÿ oà%.40s", 
£nd”
->
Çme
);

1651 
	`şu¡”S‘Ma¡”
(
£nd”
);

1652 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1653 
CLUSTER_TODO_UPDATE_STATE
|

1654 
CLUSTER_TODO_FSYNC_CONFIG
);

1655 } ià(
dœty_¦Ùs_couÁ
) {

1663 
j
 = 0; j < 
dœty_¦Ùs_couÁ
; j++)

1664 
	`d–KeysInSlÙ
(
dœty_¦Ùs
[
j
]);

1666 
	}
}

1677 
	$şu¡”ProûssPack‘
(
şu¡”Lšk
 *
lšk
) {

1678 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
lšk
->
rcvbuf
;

1679 
ušt32_t
 
tÙËn
 = 
	`Áohl
(
hdr
->totlen);

1680 
ušt16_t
 
ty³
 = 
	`Áohs
(
hdr
->type);

1682 ià(
ty³
 < 
CLUSTERMSG_TYPE_COUNT
)

1683 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_»ûived
[
ty³
]++;

1684 
	`£rv”Log
(
LL_DEBUG
,"--- Processing…acket ofype %d, %lu bytes",

1685 
ty³
, (è
tÙËn
);

1688 ià(
tÙËn
 < 16)  1;

1689 ià(
tÙËn
 > 
	`sd¦’
(
lšk
->
rcvbuf
))  1;

1691 ià(
	`Áohs
(
hdr
->
v”
è!ğ
CLUSTER_PROTO_VER
) {

1696 
ušt16_t
 
æags
 = 
	`Áohs
(
hdr
->flags);

1697 
ušt64_t
 
£nd”Cu¼’tEpoch
 = 0, 
£nd”CÚfigEpoch
 = 0;

1698 
şu¡”Node
 *
£nd”
;

1700 ià(
ty³
 =ğ
CLUSTERMSG_TYPE_PING
 ||y³ =ğ
CLUSTERMSG_TYPE_PONG
 ||

1701 
ty³
 =ğ
CLUSTERMSG_TYPE_MEET
)

1703 
ušt16_t
 
couÁ
 = 
	`Áohs
(
hdr
->count);

1704 
ušt32_t
 
ex¶’
;

1706 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1707 
ex¶’
 +ğ((
şu¡”MsgD©aGoss
)*
couÁ
);

1708 ià(
tÙËn
 !ğ
ex¶’
)  1;

1709 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAIL
) {

1710 
ušt32_t
 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1712 
ex¶’
 +ğ(
şu¡”MsgD©aFa
);

1713 ià(
tÙËn
 !ğ
ex¶’
)  1;

1714 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_PUBLISH
) {

1715 
ušt32_t
 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1717 
ex¶’
 +ğ(
şu¡”MsgD©aPublish
) -

1719 
	`Áohl
(
hdr
->
d©a
.
publish
.
msg
.
chªÃl_Ën
) +

1720 
	`Áohl
(
hdr
->
d©a
.
publish
.
msg
.
mes§ge_Ën
);

1721 ià(
tÙËn
 !ğ
ex¶’
)  1;

1722 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST
 ||

1723 
ty³
 =ğ
CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK
 ||

1724 
ty³
 =ğ
CLUSTERMSG_TYPE_MFSTART
)

1726 
ušt32_t
 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1728 ià(
tÙËn
 !ğ
ex¶’
)  1;

1729 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_UPDATE
) {

1730 
ušt32_t
 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1732 
ex¶’
 +ğ(
şu¡”MsgD©aUpd©e
);

1733 ià(
tÙËn
 !ğ
ex¶’
)  1;

1734 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_MODULE
) {

1735 
ušt32_t
 
ex¶’
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

1737 
ex¶’
 +ğ(
şu¡”MsgD©aPublish
) -

1738 3 + 
	`Áohl
(
hdr
->
d©a
.
moduË
.
msg
.
Ën
);

1739 ià(
tÙËn
 !ğ
ex¶’
)  1;

1743 
£nd”
 = 
	`şu¡”LookupNode
(
hdr
->sender);

1744 ià(
£nd”
 && !
	`nodeInHªdshake
(sender)) {

1746 
£nd”Cu¼’tEpoch
 = 
	`Áohu64
(
hdr
->
cu¼’tEpoch
);

1747 
£nd”CÚfigEpoch
 = 
	`Áohu64
(
hdr
->
cÚfigEpoch
);

1748 ià(
£nd”Cu¼’tEpoch
 > 
£rv”
.
şu¡”
->
cu¼’tEpoch
)

1749 
£rv”
.
şu¡”
->
cu¼’tEpoch
 = 
£nd”Cu¼’tEpoch
;

1751 ià(
£nd”CÚfigEpoch
 > 
£nd”
->
cÚfigEpoch
) {

1752 
£nd”
->
cÚfigEpoch
 = 
£nd”CÚfigEpoch
;

1753 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1754 
CLUSTER_TODO_FSYNC_CONFIG
);

1757 
£nd”
->
»¶_off£t
 = 
	`Áohu64
(
hdr
->
off£t
);

1758 
£nd”
->
»¶_off£t_time
 = 
	`m¡ime
();

1761 ià(
£rv”
.
şu¡”
->
mf_’d
 &&

1762 
	`nodeIsSÏve
(
my£lf
) &&

1763 
my£lf
->
¦aveof
 =ğ
£nd”
 &&

1764 
hdr
->
mæags
[0] & 
CLUSTERMSG_FLAG0_PAUSED
 &&

1765 
£rv”
.
şu¡”
->
mf_ma¡”_off£t
 == 0)

1767 
£rv”
.
şu¡”
->
mf_ma¡”_off£t
 = 
£nd”
->
»¶_off£t
;

1768 
	`£rv”Log
(
LL_WARNING
,

1771 
£rv”
.
şu¡”
->
mf_ma¡”_off£t
);

1776 ià(
ty³
 =ğ
CLUSTERMSG_TYPE_PING
 ||y³ =ğ
CLUSTERMSG_TYPE_MEET
) {

1777 
	`£rv”Log
(
LL_DEBUG
,"Pšg…ack‘„eûived: %p", (*)
lšk
->
node
);

1790 ià((
ty³
 =ğ
CLUSTERMSG_TYPE_MEET
 || 
my£lf
->

[0] == '\0') &&

1791 
£rv”
.
şu¡”_ªnounû_
 =ğ
NULL
)

1793 

[
NET_IP_STR_LEN
];

1795 ià(
	`cÚnSockName
(
lšk
->
cÚn
,

,(),
NULL
) != -1 &&

1796 
	`¡rcmp
(

,
my£lf
->ip))

1798 
	`memıy
(
my£lf
->

,,
NET_IP_STR_LEN
);

1799 
	`£rv”Log
(
LL_WARNING
,"IP‡ddress forhis‚ode updatedo %s",

1800 
my£lf
->

);

1801 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
);

1809 ià(!
£nd”
 && 
ty³
 =ğ
CLUSTERMSG_TYPE_MEET
) {

1810 
şu¡”Node
 *
node
;

1812 
node
 = 
	`ü—‹Clu¡”Node
(
NULL
,
CLUSTER_NODE_HANDSHAKE
);

1813 
	`nodeIp2SŒšg
(
node
->

,
lšk
,
hdr
->
my
);

1814 
node
->
pÜt
 = 
	`Áohs
(
hdr
->port);

1815 
node
->
ıÜt
 = 
	`Áohs
(
hdr
->cport);

1816 
	`şu¡”AddNode
(
node
);

1817 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
);

1823 ià(!
£nd”
 && 
ty³
 =ğ
CLUSTERMSG_TYPE_MEET
)

1824 
	`şu¡”ProûssGossSeùiÚ
(
hdr
,
lšk
);

1827 
	`şu¡”S’dPšg
(
lšk
,
CLUSTERMSG_TYPE_PONG
);

1831 ià(
ty³
 =ğ
CLUSTERMSG_TYPE_PING
 ||y³ =ğ
CLUSTERMSG_TYPE_PONG
 ||

1832 
ty³
 =ğ
CLUSTERMSG_TYPE_MEET
)

1834 
	`£rv”Log
(
LL_DEBUG
,"%s…acket„eceived: %p",

1835 
ty³
 =ğ
CLUSTERMSG_TYPE_PING
 ? "ping" : "pong",

1836 (*)
lšk
->
node
);

1837 ià(
lšk
->
node
) {

1838 ià(
	`nodeInHªdshake
(
lšk
->
node
)) {

1841 ià(
£nd”
) {

1842 
	`£rv”Log
(
LL_VERBOSE
,

1844 "upd©šghadd»s iàÃeded.", 
£nd”
->
Çme
);

1845 ià(
	`nodeUpd©eAdd»ssIfN“ded
(
£nd”
,
lšk
,
hdr
))

1847 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1848 
CLUSTER_TODO_UPDATE_STATE
);

1852 
	`şu¡”D–Node
(
lšk
->
node
);

1858 
	`şu¡”R’ameNode
(
lšk
->
node
, 
hdr
->
£nd”
);

1859 
	`£rv”Log
(
LL_DEBUG
,"Handshake with‚ode %.40s completed.",

1860 
lšk
->
node
->
Çme
);

1861 
lšk
->
node
->
æags
 &ğ~
CLUSTER_NODE_HANDSHAKE
;

1862 
lšk
->
node
->
æags
 |ğæags&(
CLUSTER_NODE_MASTER
|
CLUSTER_NODE_SLAVE
);

1863 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
);

1864 } ià(
	`memcmp
(
lšk
->
node
->
Çme
,
hdr
->
£nd”
,

1865 
CLUSTER_NAMELEN
) != 0)

1870 
	`£rv”Log
(
LL_DEBUG
,"PONG contains mismatching sender ID. About‚ode %.40s‡dded %d ms‡go, having flags %d",

1871 
lšk
->
node
->
Çme
,

1872 ()(
	`m¡ime
()-(
lšk
->
node
->
ùime
)),

1873 
lšk
->
node
->
æags
);

1874 
lšk
->
node
->
æags
 |ğ
CLUSTER_NODE_NOADDR
;

1875 
lšk
->
node
->

[0] = '\0';

1876 
lšk
->
node
->
pÜt
 = 0;

1877 
lšk
->
node
->
ıÜt
 = 0;

1878 
	`ä“Clu¡”Lšk
(
lšk
);

1879 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
);

1890 ià(
£nd”
) {

1891 
noçov”
 = 
æags
 & 
CLUSTER_NODE_NOFAILOVER
;

1892 
£nd”
->
æags
 &ğ~
CLUSTER_NODE_NOFAILOVER
;

1893 
£nd”
->
æags
 |ğ
noçov”
;

1897 ià(
£nd”
 && 
ty³
 =ğ
CLUSTERMSG_TYPE_PING
 &&

1898 !
	`nodeInHªdshake
(
£nd”
) &&

1899 
	`nodeUpd©eAdd»ssIfN“ded
(
£nd”
,
lšk
,
hdr
))

1901 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1902 
CLUSTER_TODO_UPDATE_STATE
);

1906 ià(
lšk
->
node
 && 
ty³
 =ğ
CLUSTERMSG_TYPE_PONG
) {

1907 
lšk
->
node
->
pÚg_»ûived
 = 
	`m¡ime
();

1908 
lšk
->
node
->
pšg_£Á
 = 0;

1916 ià(
	`nodeTimedOut
(
lšk
->
node
)) {

1917 
lšk
->
node
->
æags
 &ğ~
CLUSTER_NODE_PFAIL
;

1918 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1919 
CLUSTER_TODO_UPDATE_STATE
);

1920 } ià(
	`nodeFaed
(
lšk
->
node
)) {

1921 
	`ş—rNodeFau»IfN“ded
(
lšk
->
node
);

1926 ià(
£nd”
) {

1927 ià(!
	`memcmp
(
hdr
->
¦aveof
,
CLUSTER_NODE_NULL_NAME
,

1928 (
hdr
->
¦aveof
)))

1931 
	`şu¡”S‘NodeAsMa¡”
(
£nd”
);

1934 
şu¡”Node
 *
ma¡”
 = 
	`şu¡”LookupNode
(
hdr
->
¦aveof
);

1936 ià(
	`nodeIsMa¡”
(
£nd”
)) {

1938 
	`şu¡”D–NodeSlÙs
(
£nd”
);

1939 
£nd”
->
æags
 &ğ~(
CLUSTER_NODE_MASTER
|

1940 
CLUSTER_NODE_MIGRATE_TO
);

1941 
£nd”
->
æags
 |ğ
CLUSTER_NODE_SLAVE
;

1944 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

1945 
CLUSTER_TODO_UPDATE_STATE
);

1949 ià(
ma¡”
 && 
£nd”
->
¦aveof
 != master) {

1950 ià(
£nd”
->
¦aveof
)

1951 
	`şu¡”NodeRemoveSÏve
(
£nd”
->
¦aveof
,sender);

1952 
	`şu¡”NodeAddSÏve
(
ma¡”
,
£nd”
);

1953 
£nd”
->
¦aveof
 = 
ma¡”
;

1956 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
);

1970 
şu¡”Node
 *
£nd”_ma¡”
 = 
NULL
;

1971 
dœty_¦Ùs
 = 0;

1973 ià(
£nd”
) {

1974 
£nd”_ma¡”
 = 
	`nodeIsMa¡”
(
£nd”
è? s’d” : s’d”->
¦aveof
;

1975 ià(
£nd”_ma¡”
) {

1976 
dœty_¦Ùs
 = 
	`memcmp
(
£nd”_ma¡”
->
¦Ùs
,

1977 
hdr
->
my¦Ùs
,(hdr->myslots)) != 0;

1984 ià(
£nd”
 && 
	`nodeIsMa¡”
(£nd”è&& 
dœty_¦Ùs
)

1985 
	`şu¡”Upd©eSlÙsCÚfigW™h
(
£nd”
,
£nd”CÚfigEpoch
,
hdr
->
my¦Ùs
);

2005 ià(
£nd”
 && 
dœty_¦Ùs
) {

2006 
j
;

2008 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

2009 ià(
	`b™m­Te¡B™
(
hdr
->
my¦Ùs
,
j
)) {

2010 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
£nd”
 ||

2011 
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
NULL
) ;

2012 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
]->
cÚfigEpoch
 >

2013 
£nd”CÚfigEpoch
)

2015 
	`£rv”Log
(
LL_VERBOSE
,

2018 
£nd”
->
Çme
, 
£rv”
.
şu¡”
->
¦Ùs
[
j
]->name);

2019 
	`şu¡”S’dUpd©e
(
£nd”
->
lšk
,

2020 
£rv”
.
şu¡”
->
¦Ùs
[
j
]);

2033 ià(
£nd”
 &&

2034 
	`nodeIsMa¡”
(
my£lf
è&&‚odeIsMa¡”(
£nd”
) &&

2035 
£nd”CÚfigEpoch
 =ğ
my£lf
->
cÚfigEpoch
)

2037 
	`şu¡”HªdËCÚfigEpochCŞlisiÚ
(
£nd”
);

2041 ià(
£nd”
è
	`şu¡”ProûssGossSeùiÚ
(
hdr
,
lšk
);

2042 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAIL
) {

2043 
şu¡”Node
 *
çšg
;

2045 ià(
£nd”
) {

2046 
çšg
 = 
	`şu¡”LookupNode
(
hdr
->
d©a
.
ç
.
about
.
nod’ame
);

2047 ià(
çšg
 &&

2048 !(
çšg
->
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_MYSELF
)))

2050 
	`£rv”Log
(
LL_NOTICE
,

2052 
hdr
->
£nd”
, hdr->
d©a
.
ç
.
about
.
nod’ame
);

2053 
çšg
->
æags
 |ğ
CLUSTER_NODE_FAIL
;

2054 
çšg
->
ç_time
 = 
	`m¡ime
();

2055 
çšg
->
æags
 &ğ~
CLUSTER_NODE_PFAIL
;

2056 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

2057 
CLUSTER_TODO_UPDATE_STATE
);

2060 
	`£rv”Log
(
LL_NOTICE
,

2062 
hdr
->
£nd”
, hdr->
d©a
.
ç
.
about
.
nod’ame
);

2064 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_PUBLISH
) {

2065 
robj
 *
chªÃl
, *
mes§ge
;

2066 
ušt32_t
 
chªÃl_Ën
, 
mes§ge_Ën
;

2070 ià(
	`diùSize
(
£rv”
.
pubsub_chªÃls
) ||

2071 
	`li¡L’gth
(
£rv”
.
pubsub_·‰”ns
))

2073 
chªÃl_Ën
 = 
	`Áohl
(
hdr
->
d©a
.
publish
.
msg
.channel_len);

2074 
mes§ge_Ën
 = 
	`Áohl
(
hdr
->
d©a
.
publish
.
msg
.message_len);

2075 
chªÃl
 = 
	`ü—‹SŒšgObjeù
(

2076 (*)
hdr
->
d©a
.
publish
.
msg
.
bulk_d©a
,
chªÃl_Ën
);

2077 
mes§ge
 = 
	`ü—‹SŒšgObjeù
(

2078 (*)
hdr
->
d©a
.
publish
.
msg
.
bulk_d©a
+
chªÃl_Ën
,

2079 
mes§ge_Ën
);

2080 
	`pubsubPublishMes§ge
(
chªÃl
,
mes§ge
);

2081 
	`deüRefCouÁ
(
chªÃl
);

2082 
	`deüRefCouÁ
(
mes§ge
);

2084 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST
) {

2085 ià(!
£nd”
)  1;

2086 
	`şu¡”S’dFaov”AuthIfN“ded
(
£nd”
,
hdr
);

2087 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK
) {

2088 ià(!
£nd”
)  1;

2092 ià(
	`nodeIsMa¡”
(
£nd”
è&& s’d”->
num¦Ùs
 > 0 &&

2093 
£nd”Cu¼’tEpoch
 >ğ
£rv”
.
şu¡”
->
çov”_auth_•och
)

2095 
£rv”
.
şu¡”
->
çov”_auth_couÁ
++;

2098 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_HANDLE_FAILOVER
);

2100 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_MFSTART
) {

2103 ià(!
£nd”
 || s’d”->
¦aveof
 !ğ
my£lf
)  1;

2106 
	`»£tMªu®Faov”
();

2107 
£rv”
.
şu¡”
->
mf_’d
 = 
	`m¡ime
(è+ 
CLUSTER_MF_TIMEOUT
;

2108 
£rv”
.
şu¡”
->
mf_¦ave
 = 
£nd”
;

2109 
	`·u£Cl›Ás
(
	`m¡ime
()+(
CLUSTER_MF_TIMEOUT
*
CLUSTER_MF_PAUSE_MULT
));

2110 
	`£rv”Log
(
LL_WARNING
,"Manual failover„equested by„eplica %.40s.",

2111 
£nd”
->
Çme
);

2112 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_UPDATE
) {

2113 
şu¡”Node
 *
n
;

2114 
ušt64_t
 
»pÜ‹dCÚfigEpoch
 =

2115 
	`Áohu64
(
hdr
->
d©a
.
upd©e
.
nodecfg
.
cÚfigEpoch
);

2117 ià(!
£nd”
)  1;

2118 
n
 = 
	`şu¡”LookupNode
(
hdr
->
d©a
.
upd©e
.
nodecfg
.
nod’ame
);

2119 ià(!
n
)  1;

2120 ià(
n
->
cÚfigEpoch
 >ğ
»pÜ‹dCÚfigEpoch
)  1;

2123 ià(
	`nodeIsSÏve
(
n
)è
	`şu¡”S‘NodeAsMa¡”
(n);

2126 
n
->
cÚfigEpoch
 = 
»pÜ‹dCÚfigEpoch
;

2127 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

2128 
CLUSTER_TODO_FSYNC_CONFIG
);

2132 
	`şu¡”Upd©eSlÙsCÚfigW™h
(
n
,
»pÜ‹dCÚfigEpoch
,

2133 
hdr
->
d©a
.
upd©e
.
nodecfg
.
¦Ùs
);

2134 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_MODULE
) {

2135 ià(!
£nd”
)  1;

2138 
ušt64_t
 
moduË_id
 = 
hdr
->
d©a
.
moduË
.
msg
.module_id;

2139 
ušt32_t
 
Ën
 = 
	`Áohl
(
hdr
->
d©a
.
moduË
.
msg
.len);

2140 
ušt8_t
 
ty³
 = 
hdr
->
d©a
.
moduË
.
msg
.type;

2141 *
·ylßd
 = 
hdr
->
d©a
.
moduË
.
msg
.
bulk_d©a
;

2142 
	`moduËC®lClu¡”Reûiv”s
(
£nd”
->
Çme
,
moduË_id
,
ty³
,
·ylßd
,
Ën
);

2144 
	`£rv”Log
(
LL_WARNING
,"Reûived unknowÀ·ck‘y³: %d", 
ty³
);

2147 
	}
}

2155 
	$hªdËLškIOE¼Ü
(
şu¡”Lšk
 *
lšk
) {

2156 
	`ä“Clu¡”Lšk
(
lšk
);

2157 
	}
}

2162 
	$şu¡”Wr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

2163 
şu¡”Lšk
 *
lšk
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

2164 
ssize_t
 
nwr™‹n
;

2166 
nwr™‹n
 = 
	`cÚnWr™e
(
cÚn
, 
lšk
->
¢dbuf
, 
	`sd¦’
(link->sndbuf));

2167 ià(
nwr™‹n
 <= 0) {

2168 
	`£rv”Log
(
LL_DEBUG
,"I/Oƒrror writingo‚ode†ink: %s",

2169 (
nwr™‹n
 =ğ-1è? 
	`cÚnG‘La¡E¼Ü
(
cÚn
) : "short write");

2170 
	`hªdËLškIOE¼Ü
(
lšk
);

2173 
	`sd¤ªge
(
lšk
->
¢dbuf
,
nwr™‹n
,-1);

2174 ià(
	`sd¦’
(
lšk
->
¢dbuf
) == 0)

2175 
	`cÚnS‘Wr™eHªdËr
(
lšk
->
cÚn
, 
NULL
);

2176 
	}
}

2181 
	$şu¡”LškCÚÃùHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

2182 
şu¡”Lšk
 *
lšk
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

2183 
şu¡”Node
 *
node
 = 
lšk
->node;

2186 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

2187 
	`£rv”Log
(
LL_VERBOSE
, "Connection with Node %.40s‡t %s:%d failed: %s",

2188 
node
->
Çme
,‚ode->

,‚ode->
ıÜt
,

2189 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

2190 
	`ä“Clu¡”Lšk
(
lšk
);

2195 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
şu¡”R—dHªdËr
);

2203 
m¡ime_t
 
Şd_pšg_£Á
 = 
node
->
pšg_£Á
;

2204 
	`şu¡”S’dPšg
(
lšk
, 
node
->
æags
 & 
CLUSTER_NODE_MEET
 ?

2205 
CLUSTERMSG_TYPE_MEET
 : 
CLUSTERMSG_TYPE_PING
);

2206 ià(
Şd_pšg_£Á
) {

2210 
node
->
pšg_£Á
 = 
Şd_pšg_£Á
;

2217 
node
->
æags
 &ğ~
CLUSTER_NODE_MEET
;

2219 
	`£rv”Log
(
LL_DEBUG
,"Connecting with Node %.40s‡t %s:%d",

2220 
node
->
Çme
,‚ode->

,‚ode->
ıÜt
);

2221 
	}
}

2226 
	$şu¡”R—dHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

2227 
şu¡”Msg
 
buf
[1];

2228 
ssize_t
 
Ä—d
;

2229 
şu¡”Msg
 *
hdr
;

2230 
şu¡”Lšk
 *
lšk
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

2231 
»adËn
, 
rcvbuæ’
;

2234 
rcvbuæ’
 = 
	`sd¦’
(
lšk
->
rcvbuf
);

2235 ià(
rcvbuæ’
 < 8) {

2238 
»adËn
 = 8 - 
rcvbuæ’
;

2241 
hdr
 = (
şu¡”Msg
*è
lšk
->
rcvbuf
;

2242 ià(
rcvbuæ’
 == 8) {

2245 ià(
	`memcmp
(
hdr
->
sig
,"RCmb",4) != 0 ||

2246 
	`Áohl
(
hdr
->
tÙËn
è< 
CLUSTERMSG_MIN_LEN
)

2248 
	`£rv”Log
(
LL_WARNING
,

2251 
	`hªdËLškIOE¼Ü
(
lšk
);

2255 
»adËn
 = 
	`Áohl
(
hdr
->
tÙËn
è- 
rcvbuæ’
;

2256 ià(
»adËn
 > (
buf
))„eadlen = (buf);

2259 
Ä—d
 = 
	`cÚnR—d
(
cÚn
,
buf
,
»adËn
);

2260 ià(
Ä—d
 =ğ-1 && (
	`cÚnG‘S‹
(
cÚn
è=ğ
CONN_STATE_CONNECTED
)) ;

2262 ià(
Ä—d
 <= 0) {

2264 
	`£rv”Log
(
LL_DEBUG
,"I/Oƒrror„eading from‚ode†ink: %s",

2265 (
Ä—d
 =ğ0è? "cÚÃùiÚ clo£d" : 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

2266 
	`hªdËLškIOE¼Ü
(
lšk
);

2270 
lšk
->
rcvbuf
 = 
	`sdsÿ’
Öšk->rcvbuf,
buf
,
Ä—d
);

2271 
hdr
 = (
şu¡”Msg
*è
lšk
->
rcvbuf
;

2272 
rcvbuæ’
 +ğ
Ä—d
;

2276 ià(
rcvbuæ’
 >ğ8 &&„cvbuæ’ =ğ
	`Áohl
(
hdr
->
tÙËn
)) {

2277 ià(
	`şu¡”ProûssPack‘
(
lšk
)) {

2278 
	`sdsä“
(
lšk
->
rcvbuf
);

2279 
lšk
->
rcvbuf
 = 
	`sd£m±y
();

2285 
	}
}

2292 
	$şu¡”S’dMes§ge
(
şu¡”Lšk
 *
lšk
, *
msg
, 
size_t
 
msgËn
) {

2293 ià(
	`sd¦’
(
lšk
->
¢dbuf
è=ğ0 && 
msgËn
 != 0)

2294 
	`cÚnS‘Wr™eHªdËrW™hB¬r›r
(
lšk
->
cÚn
, 
şu¡”Wr™eHªdËr
, 1);

2296 
lšk
->
¢dbuf
 = 
	`sdsÿ’
Öšk->¢dbuf, 
msg
, 
msgËn
);

2299 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
msg
;

2300 
ušt16_t
 
ty³
 = 
	`Áohs
(
hdr
->type);

2301 ià(
ty³
 < 
CLUSTERMSG_TYPE_COUNT
)

2302 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_£Á
[
ty³
]++;

2303 
	}
}

2311 
	$şu¡”Brßdÿ¡Mes§ge
(*
buf
, 
size_t
 
Ën
) {

2312 
diùI‹¿tÜ
 *
di
;

2313 
diùEÁry
 *
de
;

2315 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

2316 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

2317 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

2319 ià(!
node
->
lšk
) ;

2320 ià(
node
->
æags
 & (
CLUSTER_NODE_MYSELF
|
CLUSTER_NODE_HANDSHAKE
))

2322 
	`şu¡”S’dMes§ge
(
node
->
lšk
,
buf
,
Ën
);

2324 
	`diùR–—£I‹¿tÜ
(
di
);

2325 
	}
}

2329 
	$şu¡”BudMes§geHdr
(
şu¡”Msg
 *
hdr
, 
ty³
) {

2330 
tÙËn
 = 0;

2331 
ušt64_t
 
off£t
;

2332 
şu¡”Node
 *
ma¡”
;

2338 
ma¡”
 = (
	`nodeIsSÏve
(
my£lf
è&& my£lf->
¦aveof
) ?

2339 
my£lf
->
¦aveof
 : myself;

2341 
	`mem£t
(
hdr
,0,(*hdr));

2342 
hdr
->
v”
 = 
	`htÚs
(
CLUSTER_PROTO_VER
);

2343 
hdr
->
sig
[0] = 'R';

2344 
hdr
->
sig
[1] = 'C';

2345 
hdr
->
sig
[2] = 'm';

2346 
hdr
->
sig
[3] = 'b';

2347 
hdr
->
ty³
 = 
	`htÚs
(type);

2348 
	`memıy
(
hdr
->
£nd”
,
my£lf
->
Çme
,
CLUSTER_NAMELEN
);

2353 
	`mem£t
(
hdr
->
my
,0,
NET_IP_STR_LEN
);

2354 ià(
£rv”
.
şu¡”_ªnounû_
) {

2355 
	`¡ºıy
(
hdr
->
my
,
£rv”
.
şu¡”_ªnounû_
,
NET_IP_STR_LEN
);

2356 
hdr
->
my
[
NET_IP_STR_LEN
-1] = '\0';

2360 
pÜt
 = 
£rv”
.
s_şu¡”
 ? s”v”.
s_pÜt
 : server.port;

2361 
ªnounûd_pÜt
 = 
£rv”
.
şu¡”_ªnounû_pÜt
 ?

2362 
£rv”
.
şu¡”_ªnounû_pÜt
 : 
pÜt
;

2363 
ªnounûd_ıÜt
 = 
£rv”
.
şu¡”_ªnounû_bus_pÜt
 ?

2364 
£rv”
.
şu¡”_ªnounû_bus_pÜt
 :

2365 (
pÜt
 + 
CLUSTER_PORT_INCR
);

2367 
	`memıy
(
hdr
->
my¦Ùs
,
ma¡”
->
¦Ùs
,(hdr->myslots));

2368 
	`mem£t
(
hdr
->
¦aveof
,0,
CLUSTER_NAMELEN
);

2369 ià(
my£lf
->
¦aveof
 !ğ
NULL
)

2370 
	`memıy
(
hdr
->
¦aveof
,
my£lf
->¦aveof->
Çme
, 
CLUSTER_NAMELEN
);

2371 
hdr
->
pÜt
 = 
	`htÚs
(
ªnounûd_pÜt
);

2372 
hdr
->
ıÜt
 = 
	`htÚs
(
ªnounûd_ıÜt
);

2373 
hdr
->
æags
 = 
	`htÚs
(
my£lf
->flags);

2374 
hdr
->
¡©e
 = 
£rv”
.
şu¡”
->state;

2377 
hdr
->
cu¼’tEpoch
 = 
	`htÚu64
(
£rv”
.
şu¡”
->currentEpoch);

2378 
hdr
->
cÚfigEpoch
 = 
	`htÚu64
(
ma¡”
->configEpoch);

2381 ià(
	`nodeIsSÏve
(
my£lf
))

2382 
off£t
 = 
	`»¶iÿtiÚG‘SÏveOff£t
();

2384 
off£t
 = 
£rv”
.
ma¡”_»¶_off£t
;

2385 
hdr
->
off£t
 = 
	`htÚu64
(offset);

2388 ià(
	`nodeIsMa¡”
(
my£lf
è&& 
£rv”
.
şu¡”
->
mf_’d
)

2389 
hdr
->
mæags
[0] |ğ
CLUSTERMSG_FLAG0_PAUSED
;

2393 ià(
ty³
 =ğ
CLUSTERMSG_TYPE_FAIL
) {

2394 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2395 
tÙËn
 +ğ(
şu¡”MsgD©aFa
);

2396 } ià(
ty³
 =ğ
CLUSTERMSG_TYPE_UPDATE
) {

2397 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2398 
tÙËn
 +ğ(
şu¡”MsgD©aUpd©e
);

2400 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2402 
	}
}

2407 
	$şu¡”NodeIsInGossSeùiÚ
(
şu¡”Msg
 *
hdr
, 
couÁ
, 
şu¡”Node
 *
n
) {

2408 
j
;

2409 
j
 = 0; j < 
couÁ
; j++) {

2410 ià(
	`memcmp
(
hdr
->
d©a
.
pšg
.
goss
[
j
].
nod’ame
,
n
->
Çme
,

2411 
CLUSTER_NAMELEN
) == 0) ;

2413  
j
 !ğ
couÁ
;

2414 
	}
}

2418 
	$şu¡”S‘GossEÁry
(
şu¡”Msg
 *
hdr
, 
i
, 
şu¡”Node
 *
n
) {

2419 
şu¡”MsgD©aGoss
 *
goss
;

2420 
goss
 = &(
hdr
->
d©a
.
pšg
.goss[
i
]);

2421 
	`memıy
(
goss
->
nod’ame
,
n
->
Çme
,
CLUSTER_NAMELEN
);

2422 
goss
->
pšg_£Á
 = 
	`htÚl
(
n
->ping_sent/1000);

2423 
goss
->
pÚg_»ûived
 = 
	`htÚl
(
n
->pong_received/1000);

2424 
	`memıy
(
goss
->

,
n
->ip,(n->ip));

2425 
goss
->
pÜt
 = 
	`htÚs
(
n
->port);

2426 
goss
->
ıÜt
 = 
	`htÚs
(
n
->cport);

2427 
goss
->
æags
 = 
	`htÚs
(
n
->flags);

2428 
goss
->
nÙu£d1
 = 0;

2429 
	}
}

2433 
	$şu¡”S’dPšg
(
şu¡”Lšk
 *
lšk
, 
ty³
) {

2434 *
buf
;

2435 
şu¡”Msg
 *
hdr
;

2436 
gosscouÁ
 = 0;

2437 
wª‹d
;

2438 
tÙËn
;

2443 
äeshnodes
 = 
	`diùSize
(
£rv”
.
şu¡”
->
nodes
)-2;

2471 
wª‹d
 = 
	`æoÜ
(
	`diùSize
(
£rv”
.
şu¡”
->
nodes
)/10);

2472 ià(
wª‹d
 < 3) wanted = 3;

2473 ià(
wª‹d
 > 
äeshnodes
) wanted = freshnodes;

2477 
pç_wª‹d
 = 
£rv”
.
şu¡”
->
¡©s_pç_nodes
;

2482 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2483 
tÙËn
 +ğ((
şu¡”MsgD©aGoss
)*(
wª‹d
+
pç_wª‹d
));

2486 ià(
tÙËn
 < ()(
şu¡”Msg
))otlen = (clusterMsg);

2487 
buf
 = 
	`zÿÎoc
(
tÙËn
);

2488 
hdr
 = (
şu¡”Msg
*è
buf
;

2491 ià(
lšk
->
node
 && 
ty³
 =ğ
CLUSTERMSG_TYPE_PING
)

2492 
lšk
->
node
->
pšg_£Á
 = 
	`m¡ime
();

2493 
	`şu¡”BudMes§geHdr
(
hdr
,
ty³
);

2496 
max™”©iÚs
 = 
wª‹d
*3;

2497 
äeshnodes
 > 0 && 
gosscouÁ
 < 
wª‹d
 && 
max™”©iÚs
--) {

2498 
diùEÁry
 *
de
 = 
	`diùG‘RªdomKey
(
£rv”
.
şu¡”
->
nodes
);

2499 
şu¡”Node
 *
this
 = 
	`diùG‘V®
(
de
);

2503 ià(
this
 =ğ
my£lf
) ;

2506 ià(
this
->
æags
 & 
CLUSTER_NODE_PFAIL
) ;

2513 ià(
this
->
æags
 & (
CLUSTER_NODE_HANDSHAKE
|
CLUSTER_NODE_NOADDR
) ||

2514 (
this
->
lšk
 =ğ
NULL
 &&his->
num¦Ùs
 == 0))

2516 
äeshnodes
--;

2521 ià(
	`şu¡”NodeIsInGossSeùiÚ
(
hdr
,
gosscouÁ
,
this
)) ;

2524 
	`şu¡”S‘GossEÁry
(
hdr
,
gosscouÁ
,
this
);

2525 
äeshnodes
--;

2526 
gosscouÁ
++;

2530 ià(
pç_wª‹d
) {

2531 
diùI‹¿tÜ
 *
di
;

2532 
diùEÁry
 *
de
;

2534 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

2535 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
 && 
pç_wª‹d
 > 0) {

2536 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

2537 ià(
node
->
æags
 & 
CLUSTER_NODE_HANDSHAKE
) ;

2538 ià(
node
->
æags
 & 
CLUSTER_NODE_NOADDR
) ;

2539 ià(!(
node
->
æags
 & 
CLUSTER_NODE_PFAIL
)) ;

2540 
	`şu¡”S‘GossEÁry
(
hdr
,
gosscouÁ
,
node
);

2541 
äeshnodes
--;

2542 
gosscouÁ
++;

2546 
pç_wª‹d
--;

2548 
	`diùR–—£I‹¿tÜ
(
di
);

2553 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2554 
tÙËn
 +ğ((
şu¡”MsgD©aGoss
)*
gosscouÁ
);

2555 
hdr
->
couÁ
 = 
	`htÚs
(
gosscouÁ
);

2556 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2557 
	`şu¡”S’dMes§ge
(
lšk
,
buf
,
tÙËn
);

2558 
	`zä“
(
buf
);

2559 
	}
}

2575 
	#CLUSTER_BROADCAST_ALL
 0

	)

2576 
	#CLUSTER_BROADCAST_LOCAL_SLAVES
 1

	)

2577 
	$şu¡”Brßdÿ¡PÚg
(
rg‘
) {

2578 
diùI‹¿tÜ
 *
di
;

2579 
diùEÁry
 *
de
;

2581 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

2582 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

2583 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

2585 ià(!
node
->
lšk
) ;

2586 ià(
node
 =ğ
my£lf
 || 
	`nodeInHªdshake
(node)) ;

2587 ià(
rg‘
 =ğ
CLUSTER_BROADCAST_LOCAL_SLAVES
) {

2588 
loÿl_¦ave
 =

2589 
	`nodeIsSÏve
(
node
è&&‚ode->
¦aveof
 &&

2590 (
node
->
¦aveof
 =ğ
my£lf
 ||‚ode->slaveof == myself->slaveof);

2591 ià(!
loÿl_¦ave
) ;

2593 
	`şu¡”S’dPšg
(
node
->
lšk
,
CLUSTERMSG_TYPE_PONG
);

2595 
	`diùR–—£I‹¿tÜ
(
di
);

2596 
	}
}

2601 
	$şu¡”S’dPublish
(
şu¡”Lšk
 *
lšk
, 
robj
 *
chªÃl
,„obj *
mes§ge
) {

2602 *
·ylßd
;

2603 
şu¡”Msg
 
buf
[1];

2604 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2605 
ušt32_t
 
tÙËn
;

2606 
ušt32_t
 
chªÃl_Ën
, 
mes§ge_Ën
;

2608 
chªÃl
 = 
	`g‘DecodedObjeù
(channel);

2609 
mes§ge
 = 
	`g‘DecodedObjeù
(message);

2610 
chªÃl_Ën
 = 
	`sd¦’
(
chªÃl
->
±r
);

2611 
mes§ge_Ën
 = 
	`sd¦’
(
mes§ge
->
±r
);

2613 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_PUBLISH
);

2614 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2615 
tÙËn
 +ğ(
şu¡”MsgD©aPublish
è- 8 + 
chªÃl_Ën
 + 
mes§ge_Ën
;

2617 
hdr
->
d©a
.
publish
.
msg
.
chªÃl_Ën
 = 
	`htÚl
(channel_len);

2618 
hdr
->
d©a
.
publish
.
msg
.
mes§ge_Ën
 = 
	`htÚl
(message_len);

2619 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2622 ià(
tÙËn
 < (
buf
)) {

2623 
·ylßd
 = (*)
buf
;

2625 
·ylßd
 = 
	`zm®loc
(
tÙËn
);

2626 
	`memıy
(
·ylßd
,
hdr
,(*hdr));

2627 
hdr
 = (
şu¡”Msg
*è
·ylßd
;

2629 
	`memıy
(
hdr
->
d©a
.
publish
.
msg
.
bulk_d©a
,
chªÃl
->
±r
,
	`sd¦’
(channel->ptr));

2630 
	`memıy
(
hdr
->
d©a
.
publish
.
msg
.
bulk_d©a
+
	`sd¦’
(
chªÃl
->
±r
),

2631 
mes§ge
->
±r
,
	`sd¦’
(message->ptr));

2633 ià(
lšk
)

2634 
	`şu¡”S’dMes§ge
(
lšk
,
·ylßd
,
tÙËn
);

2636 
	`şu¡”Brßdÿ¡Mes§ge
(
·ylßd
,
tÙËn
);

2638 
	`deüRefCouÁ
(
chªÃl
);

2639 
	`deüRefCouÁ
(
mes§ge
);

2640 ià(
·ylßd
 !ğ(*)
buf
è
	`zä“
(payload);

2641 
	}
}

2648 
	$şu¡”S’dFa
(*
nod’ame
) {

2649 
şu¡”Msg
 
buf
[1];

2650 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2652 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_FAIL
);

2653 
	`memıy
(
hdr
->
d©a
.
ç
.
about
.
nod’ame
,nod’ame,
CLUSTER_NAMELEN
);

2654 
	`şu¡”Brßdÿ¡Mes§ge
(
buf
,
	`Áohl
(
hdr
->
tÙËn
));

2655 
	}
}

2660 
	$şu¡”S’dUpd©e
(
şu¡”Lšk
 *
lšk
, 
şu¡”Node
 *
node
) {

2661 
şu¡”Msg
 
buf
[1];

2662 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2664 ià(
lšk
 =ğ
NULL
) ;

2665 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_UPDATE
);

2666 
	`memıy
(
hdr
->
d©a
.
upd©e
.
nodecfg
.
nod’ame
,
node
->
Çme
,
CLUSTER_NAMELEN
);

2667 
hdr
->
d©a
.
upd©e
.
nodecfg
.
cÚfigEpoch
 = 
	`htÚu64
(
node
->configEpoch);

2668 
	`memıy
(
hdr
->
d©a
.
upd©e
.
nodecfg
.
¦Ùs
,
node
->slots,(node->slots));

2669 
	`şu¡”S’dMes§ge
(
lšk
,(*)
buf
,
	`Áohl
(
hdr
->
tÙËn
));

2670 
	}
}

2675 
	$şu¡”S’dModuË
(
şu¡”Lšk
 *
lšk
, 
ušt64_t
 
moduË_id
, 
ušt8_t
 
ty³
,

2676 *
·ylßd
, 
ušt32_t
 
Ën
) {

2677 *
h—pbuf
;

2678 
şu¡”Msg
 
buf
[1];

2679 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2680 
ušt32_t
 
tÙËn
;

2682 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_MODULE
);

2683 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2684 
tÙËn
 +ğ(
şu¡”MsgModuË
è- 3 + 
Ën
;

2686 
hdr
->
d©a
.
moduË
.
msg
.
moduË_id
 = module_id;

2687 
hdr
->
d©a
.
moduË
.
msg
.
ty³
 =ype;

2688 
hdr
->
d©a
.
moduË
.
msg
.
Ën
 = 
	`htÚl
(len);

2689 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2692 ià(
tÙËn
 < (
buf
)) {

2693 
h—pbuf
 = (*)
buf
;

2695 
h—pbuf
 = 
	`zm®loc
(
tÙËn
);

2696 
	`memıy
(
h—pbuf
,
hdr
,(*hdr));

2697 
hdr
 = (
şu¡”Msg
*è
h—pbuf
;

2699 
	`memıy
(
hdr
->
d©a
.
moduË
.
msg
.
bulk_d©a
,
·ylßd
,
Ën
);

2701 ià(
lšk
)

2702 
	`şu¡”S’dMes§ge
(
lšk
,
h—pbuf
,
tÙËn
);

2704 
	`şu¡”Brßdÿ¡Mes§ge
(
h—pbuf
,
tÙËn
);

2706 ià(
h—pbuf
 !ğ(*)
buf
è
	`zä“
(heapbuf);

2707 
	}
}

2715 
	$şu¡”S’dModuËMes§geToT¬g‘
(cÚ¡ *
rg‘
, 
ušt64_t
 
moduË_id
, 
ušt8_t
 
ty³
, *
·ylßd
, 
ušt32_t
 
Ën
) {

2716 
şu¡”Node
 *
node
 = 
NULL
;

2718 ià(
rg‘
 !ğ
NULL
) {

2719 
node
 = 
	`şu¡”LookupNode
(
rg‘
);

2720 ià(
node
 =ğ
NULL
 ||‚ode->
lšk
 =ğNULLè 
C_ERR
;

2723 
	`şu¡”S’dModuË
(
rg‘
 ? 
node
->
lšk
 : 
NULL
,

2724 
moduË_id
, 
ty³
, 
·ylßd
, 
Ën
);

2725  
C_OK
;

2726 
	}
}

2735 
	$şu¡”Prİag©ePublish
(
robj
 *
chªÃl
,„obj *
mes§ge
) {

2736 
	`şu¡”S’dPublish
(
NULL
, 
chªÃl
, 
mes§ge
);

2737 
	}
}

2749 
	$şu¡”Reque¡Faov”Auth
() {

2750 
şu¡”Msg
 
buf
[1];

2751 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2752 
ušt32_t
 
tÙËn
;

2754 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST
);

2758 ià(
£rv”
.
şu¡”
->
mf_’d
è
hdr
->
mæags
[0] |ğ
CLUSTERMSG_FLAG0_FORCEACK
;

2759 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2760 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2761 
	`şu¡”Brßdÿ¡Mes§ge
(
buf
,
tÙËn
);

2762 
	}
}

2765 
	$şu¡”S’dFaov”Auth
(
şu¡”Node
 *
node
) {

2766 
şu¡”Msg
 
buf
[1];

2767 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2768 
ušt32_t
 
tÙËn
;

2770 ià(!
node
->
lšk
) ;

2771 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK
);

2772 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2773 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2774 
	`şu¡”S’dMes§ge
(
node
->
lšk
,(*)
buf
,
tÙËn
);

2775 
	}
}

2778 
	$şu¡”S’dMFS¹
(
şu¡”Node
 *
node
) {

2779 
şu¡”Msg
 
buf
[1];

2780 
şu¡”Msg
 *
hdr
 = (şu¡”Msg*è
buf
;

2781 
ušt32_t
 
tÙËn
;

2783 ià(!
node
->
lšk
) ;

2784 
	`şu¡”BudMes§geHdr
(
hdr
,
CLUSTERMSG_TYPE_MFSTART
);

2785 
tÙËn
 = (
şu¡”Msg
)-(
şu¡”MsgD©a
);

2786 
hdr
->
tÙËn
 = 
	`htÚl
(totlen);

2787 
	`şu¡”S’dMes§ge
(
node
->
lšk
,(*)
buf
,
tÙËn
);

2788 
	}
}

2791 
	$şu¡”S’dFaov”AuthIfN“ded
(
şu¡”Node
 *
node
, 
şu¡”Msg
 *
»que¡
) {

2792 
şu¡”Node
 *
ma¡”
 = 
node
->
¦aveof
;

2793 
ušt64_t
 
»que¡Cu¼’tEpoch
 = 
	`Áohu64
(
»que¡
->
cu¼’tEpoch
);

2794 
ušt64_t
 
»que¡CÚfigEpoch
 = 
	`Áohu64
(
»que¡
->
cÚfigEpoch
);

2795 *
şaimed_¦Ùs
 = 
»que¡
->
my¦Ùs
;

2796 
fÜû_ack
 = 
»que¡
->
mæags
[0] & 
CLUSTERMSG_FLAG0_FORCEACK
;

2797 
j
;

2803 ià(
	`nodeIsSÏve
(
my£lf
è|| my£lf->
num¦Ùs
 == 0) ;

2809 ià(
»que¡Cu¼’tEpoch
 < 
£rv”
.
şu¡”
->
cu¼’tEpoch
) {

2810 
	`£rv”Log
(
LL_WARNING
,

2812 
node
->
Çme
,

2813 (è
»que¡Cu¼’tEpoch
,

2814 (è
£rv”
.
şu¡”
->
cu¼’tEpoch
);

2819 ià(
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
 =ğ£rv”.şu¡”->
cu¼’tEpoch
) {

2820 
	`£rv”Log
(
LL_WARNING
,

2822 
node
->
Çme
,

2823 (è
£rv”
.
şu¡”
->
cu¼’tEpoch
);

2830 ià(
	`nodeIsMa¡”
(
node
è|| 
ma¡”
 =ğ
NULL
 ||

2831 (!
	`nodeFaed
(
ma¡”
è&& !
fÜû_ack
))

2833 ià(
	`nodeIsMa¡”
(
node
)) {

2834 
	`£rv”Log
(
LL_WARNING
,

2836 
node
->
Çme
);

2837 } ià(
ma¡”
 =ğ
NULL
) {

2838 
	`£rv”Log
(
LL_WARNING
,

2840 
node
->
Çme
);

2841 } ià(!
	`nodeFaed
(
ma¡”
)) {

2842 
	`£rv”Log
(
LL_WARNING
,

2844 
node
->
Çme
);

2852 ià(
	`m¡ime
(è- 
node
->
¦aveof
->
vÙed_time
 < 
£rv”
.
şu¡”_node_timeout
 * 2)

2854 
	`£rv”Log
(
LL_WARNING
,

2857 
node
->
Çme
,

2858 (è((
£rv”
.
şu¡”_node_timeout
*2)-

2859 (
	`m¡ime
(è- 
node
->
¦aveof
->
vÙed_time
)));

2866 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

2867 ià(
	`b™m­Te¡B™
(
şaimed_¦Ùs
, 
j
) == 0) ;

2868 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
NULL
 ||

2869 
£rv”
.
şu¡”
->
¦Ùs
[
j
]->
cÚfigEpoch
 <ğ
»que¡CÚfigEpoch
)

2876 
	`£rv”Log
(
LL_WARNING
,

2879 
node
->
Çme
, 
j
,

2880 (è
£rv”
.
şu¡”
->
¦Ùs
[
j
]->
cÚfigEpoch
,

2881 (è
»que¡CÚfigEpoch
);

2886 
£rv”
.
şu¡”
->
Ï¡VÙeEpoch
 = s”v”.şu¡”->
cu¼’tEpoch
;

2887 
node
->
¦aveof
->
vÙed_time
 = 
	`m¡ime
();

2888 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|
CLUSTER_TODO_FSYNC_CONFIG
);

2889 
	`şu¡”S’dFaov”Auth
(
node
);

2890 
	`£rv”Log
(
LL_WARNING
, "Failover‡uth grantedo %.40s forƒpoch %llu",

2891 
node
->
Çme
, (è
£rv”
.
şu¡”
->
cu¼’tEpoch
);

2892 
	}
}

2906 
	$şu¡”G‘SÏveRªk
() {

2907 
myoff£t
;

2908 
j
, 
¿nk
 = 0;

2909 
şu¡”Node
 *
ma¡”
;

2911 
	`£rv”As£¹
(
	`nodeIsSÏve
(
my£lf
));

2912 
ma¡”
 = 
my£lf
->
¦aveof
;

2913 ià(
ma¡”
 =ğ
NULL
)  0;

2915 
myoff£t
 = 
	`»¶iÿtiÚG‘SÏveOff£t
();

2916 
j
 = 0; j < 
ma¡”
->
num¦aves
; j++)

2917 ià(
ma¡”
->
¦aves
[
j
] !ğ
my£lf
 &&

2918 !
	`nodeCªtFaov”
(
ma¡”
->
¦aves
[
j
]) &&

2919 
ma¡”
->
¦aves
[
j
]->
»¶_off£t
 > 
myoff£t
è
¿nk
++;

2920  
¿nk
;

2921 
	}
}

2945 
	$şu¡”LogCªtFaov”
(
»asÚ
) {

2946 *
msg
;

2947 
time_t
 
Ï¡log_time
 = 0;

2948 
m¡ime_t
 
nŞog_ç_time
 = 
£rv”
.
şu¡”_node_timeout
 + 5000;

2951 ià(
»asÚ
 =ğ
£rv”
.
şu¡”
->
ÿÁ_çov”_»asÚ
 &&

2952 
	`time
(
NULL
)-
Ï¡log_time
 < 
CLUSTER_CANT_FAILOVER_RELOG_PERIOD
)

2955 
£rv”
.
şu¡”
->
ÿÁ_çov”_»asÚ
 = 
»asÚ
;

2960 ià(
my£lf
->
¦aveof
 &&

2961 
	`nodeFaed
(
my£lf
->
¦aveof
) &&

2962 (
	`m¡ime
(è- 
my£lf
->
¦aveof
->
ç_time
è< 
nŞog_ç_time
) ;

2964 
»asÚ
) {

2965 
CLUSTER_CANT_FAILOVER_DATA_AGE
:

2966 
msg
 = "Disconnected from master for†ongerhan‡llowed. "

2970 
CLUSTER_CANT_FAILOVER_WAITING_DELAY
:

2971 
msg
 = "Waitinghe delay before I can start‡‚ew failover.";

2973 
CLUSTER_CANT_FAILOVER_EXPIRED
:

2974 
msg
 = "Failover‡ttemptƒxpired.";

2976 
CLUSTER_CANT_FAILOVER_WAITING_VOTES
:

2977 
msg
 = "Waiting for votes, but majority still‚ot„eached.";

2980 
msg
 = "Unknown„eason code.";

2983 
Ï¡log_time
 = 
	`time
(
NULL
);

2984 
	`£rv”Log
(
LL_WARNING
,"Cu¼’y uÇbËØçov”: %s", 
msg
);

2985 
	}
}

2993 
	$şu¡”Faov”R•ÏûYourMa¡”
() {

2994 
j
;

2995 
şu¡”Node
 *
Şdma¡”
 = 
my£lf
->
¦aveof
;

2997 ià(
	`nodeIsMa¡”
(
my£lf
è|| 
Şdma¡”
 =ğ
NULL
) ;

3000 
	`şu¡”S‘NodeAsMa¡”
(
my£lf
);

3001 
	`»¶iÿtiÚUn£tMa¡”
();

3004 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

3005 ià(
	`şu¡”NodeG‘SlÙB™
(
Şdma¡”
,
j
)) {

3006 
	`şu¡”D–SlÙ
(
j
);

3007 
	`şu¡”AddSlÙ
(
my£lf
,
j
);

3012 
	`şu¡”Upd©eS‹
();

3013 
	`şu¡”SaveCÚfigOrD›
(1);

3017 
	`şu¡”Brßdÿ¡PÚg
(
CLUSTER_BROADCAST_ALL
);

3020 
	`»£tMªu®Faov”
();

3021 
	}
}

3031 
	$şu¡”HªdËSÏveFaov”
() {

3032 
m¡ime_t
 
d©a_age
;

3033 
m¡ime_t
 
auth_age
 = 
	`m¡ime
(è- 
£rv”
.
şu¡”
->
çov”_auth_time
;

3034 
Ãeded_quÜum
 = (
£rv”
.
şu¡”
->
size
 / 2) + 1;

3035 
mªu®_çov”
 = 
£rv”
.
şu¡”
->
mf_’d
 != 0 &&

3036 
£rv”
.
şu¡”
->
mf_ÿn_¡¬t
;

3037 
m¡ime_t
 
auth_timeout
, 
auth_»Œy_time
;

3039 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 &ğ~
CLUSTER_TODO_HANDLE_FAILOVER
;

3048 
auth_timeout
 = 
£rv”
.
şu¡”_node_timeout
*2;

3049 ià(
auth_timeout
 < 2000)‡uth_timeout = 2000;

3050 
auth_»Œy_time
 = 
auth_timeout
*2;

3059 ià(
	`nodeIsMa¡”
(
my£lf
) ||

3060 
my£lf
->
¦aveof
 =ğ
NULL
 ||

3061 (!
	`nodeFaed
(
my£lf
->
¦aveof
è&& !
mªu®_çov”
) ||

3062 (
£rv”
.
şu¡”_¦ave_no_çov”
 && !
mªu®_çov”
) ||

3063 
my£lf
->
¦aveof
->
num¦Ùs
 == 0)

3067 
£rv”
.
şu¡”
->
ÿÁ_çov”_»asÚ
 = 
CLUSTER_CANT_FAILOVER_NONE
;

3073 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
) {

3074 
d©a_age
 = (
m¡ime_t
)(
£rv”
.
unixtime
 - s”v”.
ma¡”
->
Ï¡š‹¿ùiÚ
)

3077 
d©a_age
 = (
m¡ime_t
)(
£rv”
.
unixtime
 - s”v”.
»¶_down_sšû
) * 1000;

3083 ià(
d©a_age
 > 
£rv”
.
şu¡”_node_timeout
)

3084 
d©a_age
 -ğ
£rv”
.
şu¡”_node_timeout
;

3090 ià(
£rv”
.
şu¡”_¦ave_v®id™y_çùÜ
 &&

3091 
d©a_age
 >

3092 (((
m¡ime_t
)
£rv”
.
»¶_pšg_¦ave_³riod
 * 1000) +

3093 (
£rv”
.
şu¡”_node_timeout
 * s”v”.
şu¡”_¦ave_v®id™y_çùÜ
)))

3095 ià(!
mªu®_çov”
) {

3096 
	`şu¡”LogCªtFaov”
(
CLUSTER_CANT_FAILOVER_DATA_AGE
);

3103 ià(
auth_age
 > 
auth_»Œy_time
) {

3104 
£rv”
.
şu¡”
->
çov”_auth_time
 = 
	`m¡ime
() +

3106 
	`¿ndom
() % 500;

3107 
£rv”
.
şu¡”
->
çov”_auth_couÁ
 = 0;

3108 
£rv”
.
şu¡”
->
çov”_auth_£Á
 = 0;

3109 
£rv”
.
şu¡”
->
çov”_auth_¿nk
 = 
	`şu¡”G‘SÏveRªk
();

3113 
£rv”
.
şu¡”
->
çov”_auth_time
 +=

3114 
£rv”
.
şu¡”
->
çov”_auth_¿nk
 * 1000;

3116 ià(
£rv”
.
şu¡”
->
mf_’d
) {

3117 
£rv”
.
şu¡”
->
çov”_auth_time
 = 
	`m¡ime
();

3118 
£rv”
.
şu¡”
->
çov”_auth_¿nk
 = 0;

3119 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_HANDLE_FAILOVER
);

3121 
	`£rv”Log
(
LL_WARNING
,

3124 
£rv”
.
şu¡”
->
çov”_auth_time
 - 
	`m¡ime
(),

3125 
£rv”
.
şu¡”
->
çov”_auth_¿nk
,

3126 
	`»¶iÿtiÚG‘SÏveOff£t
());

3130 
	`şu¡”Brßdÿ¡PÚg
(
CLUSTER_BROADCAST_LOCAL_SLAVES
);

3139 ià(
£rv”
.
şu¡”
->
çov”_auth_£Á
 == 0 &&

3140 
£rv”
.
şu¡”
->
mf_’d
 == 0)

3142 
Ãw¿nk
 = 
	`şu¡”G‘SÏveRªk
();

3143 ià(
Ãw¿nk
 > 
£rv”
.
şu¡”
->
çov”_auth_¿nk
) {

3144 
added_d–ay
 =

3145 (
Ãw¿nk
 - 
£rv”
.
şu¡”
->
çov”_auth_¿nk
) * 1000;

3146 
£rv”
.
şu¡”
->
çov”_auth_time
 +ğ
added_d–ay
;

3147 
£rv”
.
şu¡”
->
çov”_auth_¿nk
 = 
Ãw¿nk
;

3148 
	`£rv”Log
(
LL_WARNING
,

3150 
Ãw¿nk
, 
added_d–ay
);

3155 ià(
	`m¡ime
(è< 
£rv”
.
şu¡”
->
çov”_auth_time
) {

3156 
	`şu¡”LogCªtFaov”
(
CLUSTER_CANT_FAILOVER_WAITING_DELAY
);

3161 ià(
auth_age
 > 
auth_timeout
) {

3162 
	`şu¡”LogCªtFaov”
(
CLUSTER_CANT_FAILOVER_EXPIRED
);

3167 ià(
£rv”
.
şu¡”
->
çov”_auth_£Á
 == 0) {

3168 
£rv”
.
şu¡”
->
cu¼’tEpoch
++;

3169 
£rv”
.
şu¡”
->
çov”_auth_•och
 = s”v”.şu¡”->
cu¼’tEpoch
;

3170 
	`£rv”Log
(
LL_WARNING
,"Starting‡ failoverƒlection forƒpoch %llu.",

3171 (è
£rv”
.
şu¡”
->
cu¼’tEpoch
);

3172 
	`şu¡”Reque¡Faov”Auth
();

3173 
£rv”
.
şu¡”
->
çov”_auth_£Á
 = 1;

3174 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|

3175 
CLUSTER_TODO_UPDATE_STATE
|

3176 
CLUSTER_TODO_FSYNC_CONFIG
);

3181 ià(
£rv”
.
şu¡”
->
çov”_auth_couÁ
 >ğ
Ãeded_quÜum
) {

3184 
	`£rv”Log
(
LL_WARNING
,

3188 ià(
my£lf
->
cÚfigEpoch
 < 
£rv”
.
şu¡”
->
çov”_auth_•och
) {

3189 
my£lf
->
cÚfigEpoch
 = 
£rv”
.
şu¡”
->
çov”_auth_•och
;

3190 
	`£rv”Log
(
LL_WARNING
,

3192 (è
my£lf
->
cÚfigEpoch
);

3196 
	`şu¡”Faov”R•ÏûYourMa¡”
();

3198 
	`şu¡”LogCªtFaov”
(
CLUSTER_CANT_FAILOVER_WAITING_VOTES
);

3200 
	}
}

3229 
	$şu¡”HªdËSÏveMig¿tiÚ
(
max_¦aves
) {

3230 
j
, 
ok¦aves
 = 0;

3231 
şu¡”Node
 *
myma¡”
 = 
my£lf
->
¦aveof
, *
rg‘
 = 
NULL
, *
ÿndid©e
 = NULL;

3232 
diùI‹¿tÜ
 *
di
;

3233 
diùEÁry
 *
de
;

3236 ià(
£rv”
.
şu¡”
->
¡©e
 !ğ
CLUSTER_OK
) ;

3240 ià(
myma¡”
 =ğ
NULL
) ;

3241 
j
 = 0; j < 
myma¡”
->
num¦aves
; j++)

3242 ià(!
	`nodeFaed
(
myma¡”
->
¦aves
[
j
]) &&

3243 !
	`nodeTimedOut
(
myma¡”
->
¦aves
[
j
])è
ok¦aves
++;

3244 ià(
ok¦aves
 <ğ
£rv”
.
şu¡”_mig¿tiÚ_b¬r›r
) ;

3256 
ÿndid©e
 = 
my£lf
;

3257 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

3258 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3259 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

3260 
ok¦aves
 = 0, 
is_Üphªed
 = 1;

3266 ià(
	`nodeIsSÏve
(
node
è|| 
	`nodeFaed
Òode)è
is_Üphªed
 = 0;

3267 ià(!(
node
->
æags
 & 
CLUSTER_NODE_MIGRATE_TO
)è
is_Üphªed
 = 0;

3270 ià(
	`nodeIsMa¡”
(
node
)è
ok¦aves
 = 
	`şu¡”CouÁNÚFašgSÏves
(node);

3271 ià(
ok¦aves
 > 0è
is_Üphªed
 = 0;

3273 ià(
is_Üphªed
) {

3274 ià(!
rg‘
 && 
node
->
num¦Ùs
 > 0)arget =‚ode;

3278 ià(!
node
->
Üphªed_time
ènode->Üphªed_timğ
	`m¡ime
();

3280 
node
->
Üphªed_time
 = 0;

3286 ià(
ok¦aves
 =ğ
max_¦aves
) {

3287 
j
 = 0; j < 
node
->
num¦aves
; j++) {

3288 ià(
	`memcmp
(
node
->
¦aves
[
j
]->
Çme
,

3289 
ÿndid©e
->
Çme
,

3290 
CLUSTER_NAMELEN
) < 0)

3292 
ÿndid©e
 = 
node
->
¦aves
[
j
];

3297 
	`diùR–—£I‹¿tÜ
(
di
);

3304 ià(
rg‘
 && 
ÿndid©e
 =ğ
my£lf
 &&

3305 (
	`m¡ime
()-
rg‘
->
Üphªed_time
è> 
CLUSTER_SLAVE_MIGRATION_DELAY
 &&

3306 !(
£rv”
.
şu¡”_moduË_æags
 & 
CLUSTER_MODULE_FLAG_NO_FAILOVER
))

3308 
	`£rv”Log
(
LL_WARNING
,"Migratingo orphaned master %.40s",

3309 
rg‘
->
Çme
);

3310 
	`şu¡”S‘Ma¡”
(
rg‘
);

3312 
	}
}

3348 
	$»£tMªu®Faov”
() {

3349 ià(
£rv”
.
şu¡”
->
mf_’d
 && 
	`ş›ÁsA»Pau£d
()) {

3350 
£rv”
.
ş›Ás_·u£_’d_time
 = 0;

3351 
	`ş›ÁsA»Pau£d
();

3353 
£rv”
.
şu¡”
->
mf_’d
 = 0;

3354 
£rv”
.
şu¡”
->
mf_ÿn_¡¬t
 = 0;

3355 
£rv”
.
şu¡”
->
mf_¦ave
 = 
NULL
;

3356 
£rv”
.
şu¡”
->
mf_ma¡”_off£t
 = 0;

3357 
	}
}

3360 
	$mªu®Faov”CheckTimeout
() {

3361 ià(
£rv”
.
şu¡”
->
mf_’d
 && s”v”.şu¡”->mf_’d < 
	`m¡ime
()) {

3362 
	`£rv”Log
(
LL_WARNING
,"Manual failoverimed out.");

3363 
	`»£tMªu®Faov”
();

3365 
	}
}

3369 
	$şu¡”HªdËMªu®Faov”
() {

3371 ià(
£rv”
.
şu¡”
->
mf_’d
 == 0) ;

3375 ià(
£rv”
.
şu¡”
->
mf_ÿn_¡¬t
) ;

3377 ià(
£rv”
.
şu¡”
->
mf_ma¡”_off£t
 == 0) ;

3379 ià(
£rv”
.
şu¡”
->
mf_ma¡”_off£t
 =ğ
	`»¶iÿtiÚG‘SÏveOff£t
()) {

3382 
£rv”
.
şu¡”
->
mf_ÿn_¡¬t
 = 1;

3383 
	`£rv”Log
(
LL_WARNING
,

3387 
	}
}

3394 
	$şu¡”CrÚ
() {

3395 
diùI‹¿tÜ
 *
di
;

3396 
diùEÁry
 *
de
;

3397 
upd©e_¡©e
 = 0;

3398 
Üphªed_ma¡”s
;

3399 
max_¦aves
;

3400 
this_¦aves
;

3401 
m¡ime_t
 
mš_pÚg
 = 0, 
now
 = 
	`m¡ime
();

3402 
şu¡”Node
 *
mš_pÚg_node
 = 
NULL
;

3403 
™”©iÚ
 = 0;

3404 
m¡ime_t
 
hªdshake_timeout
;

3406 
™”©iÚ
++;

3412 *
´ev_
 = 
NULL
;

3413 *
cu¼_
 = 
£rv”
.
şu¡”_ªnounû_
;

3414 
chªged
 = 0;

3416 ià(
´ev_
 =ğ
NULL
 && 
cu¼_
 !ğNULLè
chªged
 = 1;

3417 ià(
´ev_
 !ğ
NULL
 && 
cu¼_
 =ğNULLè
chªged
 = 1;

3418 ià(
´ev_
 && 
cu¼_
 && 
	`¡rcmp
Õ»v_,cu¼_)è
chªged
 = 1;

3420 ià(
chªged
) {

3421 ià(
´ev_
è
	`zä“
(prev_ip);

3422 
´ev_
 = 
cu¼_
;

3424 ià(
cu¼_
) {

3428 
´ev_
 = 
	`z¡rdup
(prev_ip);

3429 
	`¡ºıy
(
my£lf
->

,
£rv”
.
şu¡”_ªnounû_
,
NET_IP_STR_LEN
);

3430 
my£lf
->

[
NET_IP_STR_LEN
-1] = '\0';

3432 
my£lf
->

[0] = '\0';

3441 
hªdshake_timeout
 = 
£rv”
.
şu¡”_node_timeout
;

3442 ià(
hªdshake_timeout
 < 1000) handshake_timeout = 1000;

3445 
	`şu¡”Upd©eMy£lfFÏgs
();

3450 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

3451 
£rv”
.
şu¡”
->
¡©s_pç_nodes
 = 0;

3452 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3453 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

3457 ià(
node
->
æags
 & (
CLUSTER_NODE_MYSELF
|
CLUSTER_NODE_NOADDR
)) ;

3459 ià(
node
->
æags
 & 
CLUSTER_NODE_PFAIL
)

3460 
£rv”
.
şu¡”
->
¡©s_pç_nodes
++;

3464 ià(
	`nodeInHªdshake
(
node
è&& 
now
 -‚ode->
ùime
 > 
hªdshake_timeout
) {

3465 
	`şu¡”D–Node
(
node
);

3469 ià(
node
->
lšk
 =ğ
NULL
) {

3470 
şu¡”Lšk
 *
lšk
 = 
	`ü—‹Clu¡”Lšk
(
node
);

3471 
lšk
->
cÚn
 = 
£rv”
.
s_şu¡”
 ? 
	`cÚnC»©eTLS
(è: 
	`cÚnC»©eSock‘
();

3472 
	`cÚnS‘Priv©eD©a
(
lšk
->
cÚn
,†ink);

3473 ià(
	`cÚnCÚÃù
(
lšk
->
cÚn
, 
node
->

,‚ode->
ıÜt
, 
NET_FIRST_BIND_ADDR
,

3474 
şu¡”LškCÚÃùHªdËr
) == -1) {

3480 ià(
node
->
pšg_£Á
 =ğ0ènode->pšg_£Á = 
	`m¡ime
();

3481 
	`£rv”Log
(
LL_DEBUG
, "Unableo connecto "

3482 "Clu¡” Nod[%s]:%d -> %s", 
node
->

,

3483 
node
->
ıÜt
, 
£rv”
.
Ã‹¼
);

3485 
	`ä“Clu¡”Lšk
(
lšk
);

3488 
node
->
lšk
 =†ink;

3491 
	`diùR–—£I‹¿tÜ
(
di
);

3495 ià(!(
™”©iÚ
 % 10)) {

3496 
j
;

3500 
j
 = 0; j < 5; j++) {

3501 
de
 = 
	`diùG‘RªdomKey
(
£rv”
.
şu¡”
->
nodes
);

3502 
şu¡”Node
 *
this
 = 
	`diùG‘V®
(
de
);

3505 ià(
this
->
lšk
 =ğ
NULL
 ||his->
pšg_£Á
 != 0) ;

3506 ià(
this
->
æags
 & (
CLUSTER_NODE_MYSELF
|
CLUSTER_NODE_HANDSHAKE
))

3508 ià(
mš_pÚg_node
 =ğ
NULL
 || 
mš_pÚg
 > 
this
->
pÚg_»ûived
) {

3509 
mš_pÚg_node
 = 
this
;

3510 
mš_pÚg
 = 
this
->
pÚg_»ûived
;

3513 ià(
mš_pÚg_node
) {

3514 
	`£rv”Log
(
LL_DEBUG
,"Pšgšg‚od%.40s", 
mš_pÚg_node
->
Çme
);

3515 
	`şu¡”S’dPšg
(
mš_pÚg_node
->
lšk
, 
CLUSTERMSG_TYPE_PING
);

3525 
Üphªed_ma¡”s
 = 0;

3526 
max_¦aves
 = 0;

3527 
this_¦aves
 = 0;

3528 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

3529 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3530 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

3531 
now
 = 
	`m¡ime
();

3532 
m¡ime_t
 
d–ay
;

3534 ià(
node
->
æags
 &

3535 (
CLUSTER_NODE_MYSELF
|
CLUSTER_NODE_NOADDR
|
CLUSTER_NODE_HANDSHAKE
))

3540 ià(
	`nodeIsSÏve
(
my£lf
è&& 
	`nodeIsMa¡”
(
node
è&& !
	`nodeFaed
(node)) {

3541 
ok¦aves
 = 
	`şu¡”CouÁNÚFašgSÏves
(
node
);

3546 ià(
ok¦aves
 =ğ0 && 
node
->
num¦Ùs
 > 0 &&

3547 
node
->
æags
 & 
CLUSTER_NODE_MIGRATE_TO
)

3549 
Üphªed_ma¡”s
++;

3551 ià(
ok¦aves
 > 
max_¦aves
) max_slaves = okslaves;

3552 ià(
	`nodeIsSÏve
(
my£lf
è&& my£lf->
¦aveof
 =ğ
node
)

3553 
this_¦aves
 = 
ok¦aves
;

3559 ià(
node
->
lšk
 &&

3560 
now
 - 
node
->
lšk
->
ùime
 >

3561 
£rv”
.
şu¡”_node_timeout
 &&

3562 
node
->
pšg_£Á
 &&

3563 
node
->
pÚg_»ûived
 <‚ode->
pšg_£Á
 &&

3565 
now
 - 
node
->
pšg_£Á
 > 
£rv”
.
şu¡”_node_timeout
/2)

3568 
	`ä“Clu¡”Lšk
(
node
->
lšk
);

3575 ià(
node
->
lšk
 &&

3576 
node
->
pšg_£Á
 == 0 &&

3577 (
now
 - 
node
->
pÚg_»ûived
è> 
£rv”
.
şu¡”_node_timeout
/2)

3579 
	`şu¡”S’dPšg
(
node
->
lšk
, 
CLUSTERMSG_TYPE_PING
);

3585 ià(
£rv”
.
şu¡”
->
mf_’d
 &&

3586 
	`nodeIsMa¡”
(
my£lf
) &&

3587 
£rv”
.
şu¡”
->
mf_¦ave
 =ğ
node
 &&

3588 
node
->
lšk
)

3590 
	`şu¡”S’dPšg
(
node
->
lšk
, 
CLUSTERMSG_TYPE_PING
);

3595 ià(
node
->
pšg_£Á
 == 0) ;

3600 
d–ay
 = 
now
 - 
node
->
pšg_£Á
;

3602 ià(
d–ay
 > 
£rv”
.
şu¡”_node_timeout
) {

3605 ià(!(
node
->
æags
 & (
CLUSTER_NODE_PFAIL
|
CLUSTER_NODE_FAIL
))) {

3606 
	`£rv”Log
(
LL_DEBUG
,"*** NODE %.40s…ossibly failing",

3607 
node
->
Çme
);

3608 
node
->
æags
 |ğ
CLUSTER_NODE_PFAIL
;

3609 
upd©e_¡©e
 = 1;

3613 
	`diùR–—£I‹¿tÜ
(
di
);

3618 ià(
	`nodeIsSÏve
(
my£lf
) &&

3619 
£rv”
.
ma¡”ho¡
 =ğ
NULL
 &&

3620 
my£lf
->
¦aveof
 &&

3621 
	`nodeHasAddr
(
my£lf
->
¦aveof
))

3623 
	`»¶iÿtiÚS‘Ma¡”
(
my£lf
->
¦aveof
->

, my£lf->¦aveof->
pÜt
);

3627 
	`mªu®Faov”CheckTimeout
();

3629 ià(
	`nodeIsSÏve
(
my£lf
)) {

3630 
	`şu¡”HªdËMªu®Faov”
();

3631 ià(!(
£rv”
.
şu¡”_moduË_æags
 & 
CLUSTER_MODULE_FLAG_NO_FAILOVER
))

3632 
	`şu¡”HªdËSÏveFaov”
();

3638 ià(
Üphªed_ma¡”s
 && 
max_¦aves
 >ğ2 && 
this_¦aves
 == max_slaves)

3639 
	`şu¡”HªdËSÏveMig¿tiÚ
(
max_¦aves
);

3642 ià(
upd©e_¡©e
 || 
£rv”
.
şu¡”
->
¡©e
 =ğ
CLUSTER_FAIL
)

3643 
	`şu¡”Upd©eS‹
();

3644 
	}
}

3651 
	$şu¡”BefÜeSË•
() {

3654 ià(
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 & 
CLUSTER_TODO_HANDLE_FAILOVER
)

3655 
	`şu¡”HªdËSÏveFaov”
();

3658 ià(
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 & 
CLUSTER_TODO_UPDATE_STATE
)

3659 
	`şu¡”Upd©eS‹
();

3662 ià(
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 & 
CLUSTER_TODO_SAVE_CONFIG
) {

3663 
fsync
 = 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 &

3664 
CLUSTER_TODO_FSYNC_CONFIG
;

3665 
	`şu¡”SaveCÚfigOrD›
(
fsync
);

3670 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 = 0;

3671 
	}
}

3673 
	$şu¡”DoBefÜeSË•
(
æags
) {

3674 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 |ğ
æags
;

3675 
	}
}

3683 
	$b™m­Te¡B™
(*
b™m­
, 
pos
) {

3684 
off_t
 
by‹
 = 
pos
/8;

3685 
b™
 = 
pos
&7;

3686  (
b™m­
[
by‹
] & (1<<
b™
)) != 0;

3687 
	}
}

3690 
	$b™m­S‘B™
(*
b™m­
, 
pos
) {

3691 
off_t
 
by‹
 = 
pos
/8;

3692 
b™
 = 
pos
&7;

3693 
b™m­
[
by‹
] |ğ1<<
b™
;

3694 
	}
}

3697 
	$b™m­CË¬B™
(*
b™m­
, 
pos
) {

3698 
off_t
 
by‹
 = 
pos
/8;

3699 
b™
 = 
pos
&7;

3700 
b™m­
[
by‹
] &ğ~(1<<
b™
);

3701 
	}
}

3706 
	$şu¡”Ma¡”sHaveSÏves
() {

3707 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

3708 
diùEÁry
 *
de
;

3709 
¦aves
 = 0;

3710 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3711 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

3713 ià(
	`nodeIsSÏve
(
node
)) ;

3714 
¦aves
 +ğ
node
->
num¦aves
;

3716 
	`diùR–—£I‹¿tÜ
(
di
);

3717  
¦aves
 != 0;

3718 
	}
}

3721 
	$şu¡”NodeS‘SlÙB™
(
şu¡”Node
 *
n
, 
¦Ù
) {

3722 
Şd
 = 
	`b™m­Te¡B™
(
n
->
¦Ùs
,
¦Ù
);

3723 
	`b™m­S‘B™
(
n
->
¦Ùs
,
¦Ù
);

3724 ià(!
Şd
) {

3725 
n
->
num¦Ùs
++;

3739 ià(
n
->
num¦Ùs
 =ğ1 && 
	`şu¡”Ma¡”sHaveSÏves
())

3740 
n
->
æags
 |ğ
CLUSTER_NODE_MIGRATE_TO
;

3742  
Şd
;

3743 
	}
}

3746 
	$şu¡”NodeCË¬SlÙB™
(
şu¡”Node
 *
n
, 
¦Ù
) {

3747 
Şd
 = 
	`b™m­Te¡B™
(
n
->
¦Ùs
,
¦Ù
);

3748 
	`b™m­CË¬B™
(
n
->
¦Ùs
,
¦Ù
);

3749 ià(
Şd
è
n
->
num¦Ùs
--;

3750  
Şd
;

3751 
	}
}

3754 
	$şu¡”NodeG‘SlÙB™
(
şu¡”Node
 *
n
, 
¦Ù
) {

3755  
	`b™m­Te¡B™
(
n
->
¦Ùs
,
¦Ù
);

3756 
	}
}

3762 
	$şu¡”AddSlÙ
(
şu¡”Node
 *
n
, 
¦Ù
) {

3763 ià(
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
]è 
C_ERR
;

3764 
	`şu¡”NodeS‘SlÙB™
(
n
,
¦Ù
);

3765 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] = 
n
;

3766  
C_OK
;

3767 
	}
}

3772 
	$şu¡”D–SlÙ
(
¦Ù
) {

3773 
şu¡”Node
 *
n
 = 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
];

3775 ià(!
n
è 
C_ERR
;

3776 
	`£rv”As£¹
(
	`şu¡”NodeCË¬SlÙB™
(
n
,
¦Ù
) == 1);

3777 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] = 
NULL
;

3778  
C_OK
;

3779 
	}
}

3783 
	$şu¡”D–NodeSlÙs
(
şu¡”Node
 *
node
) {

3784 
d–‘ed
 = 0, 
j
;

3786 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

3787 ià(
	`şu¡”NodeG‘SlÙB™
(
node
,
j
)) {

3788 
	`şu¡”D–SlÙ
(
j
);

3789 
d–‘ed
++;

3792  
d–‘ed
;

3793 
	}
}

3797 
	$şu¡”Clo£AÎSlÙs
() {

3798 
	`mem£t
(
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
,0,

3799 (
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
));

3800 
	`mem£t
(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
,0,

3801 (
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
));

3802 
	}
}

3812 
	#CLUSTER_MAX_REJOIN_DELAY
 5000

	)

3813 
	#CLUSTER_MIN_REJOIN_DELAY
 500

	)

3814 
	#CLUSTER_WRITABLE_DELAY
 2000

	)

3816 
	$şu¡”Upd©eS‹
() {

3817 
j
, 
Ãw_¡©e
;

3818 
»achabË_ma¡”s
 = 0;

3819 
m¡ime_t
 
amÚg_mšÜ™y_time
;

3820 
m¡ime_t
 
fœ¡_ÿÎ_time
 = 0;

3822 
£rv”
.
şu¡”
->
todo_befÜe_¦“p
 &ğ~
CLUSTER_TODO_UPDATE_STATE
;

3830 ià(
fœ¡_ÿÎ_time
 =ğ0èfœ¡_ÿÎ_timğ
	`m¡ime
();

3831 ià(
	`nodeIsMa¡”
(
my£lf
) &&

3832 
£rv”
.
şu¡”
->
¡©e
 =ğ
CLUSTER_FAIL
 &&

3833 
	`m¡ime
(è- 
fœ¡_ÿÎ_time
 < 
CLUSTER_WRITABLE_DELAY
) ;

3837 
Ãw_¡©e
 = 
CLUSTER_OK
;

3840 ià(
£rv”
.
şu¡”_»quœe_fuÎ_cov”age
) {

3841 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

3842 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
NULL
 ||

3843 
£rv”
.
şu¡”
->
¦Ùs
[
j
]->
æags
 & (
CLUSTER_NODE_FAIL
))

3845 
Ãw_¡©e
 = 
CLUSTER_FAIL
;

3857 
diùI‹¿tÜ
 *
di
;

3858 
diùEÁry
 *
de
;

3860 
£rv”
.
şu¡”
->
size
 = 0;

3861 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

3862 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3863 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

3865 ià(
	`nodeIsMa¡”
(
node
è&&‚ode->
num¦Ùs
) {

3866 
£rv”
.
şu¡”
->
size
++;

3867 ià((
node
->
æags
 & (
CLUSTER_NODE_FAIL
|
CLUSTER_NODE_PFAIL
)) == 0)

3868 
»achabË_ma¡”s
++;

3871 
	`diùR–—£I‹¿tÜ
(
di
);

3877 
Ãeded_quÜum
 = (
£rv”
.
şu¡”
->
size
 / 2) + 1;

3879 ià(
»achabË_ma¡”s
 < 
Ãeded_quÜum
) {

3880 
Ãw_¡©e
 = 
CLUSTER_FAIL
;

3881 
amÚg_mšÜ™y_time
 = 
	`m¡ime
();

3886 ià(
Ãw_¡©e
 !ğ
£rv”
.
şu¡”
->
¡©e
) {

3887 
m¡ime_t
 
»još_d–ay
 = 
£rv”
.
şu¡”_node_timeout
;

3893 ià(
»još_d–ay
 > 
CLUSTER_MAX_REJOIN_DELAY
)

3894 
»još_d–ay
 = 
CLUSTER_MAX_REJOIN_DELAY
;

3895 ià(
»još_d–ay
 < 
CLUSTER_MIN_REJOIN_DELAY
)

3896 
»još_d–ay
 = 
CLUSTER_MIN_REJOIN_DELAY
;

3898 ià(
Ãw_¡©e
 =ğ
CLUSTER_OK
 &&

3899 
	`nodeIsMa¡”
(
my£lf
) &&

3900 
	`m¡ime
(è- 
amÚg_mšÜ™y_time
 < 
»još_d–ay
)

3906 
	`£rv”Log
(
LL_WARNING
,"Cluster state changed: %s",

3907 
Ãw_¡©e
 =ğ
CLUSTER_OK
 ? "ok" : "fail");

3908 
£rv”
.
şu¡”
->
¡©e
 = 
Ãw_¡©e
;

3910 
	}
}

3934 
	$v”ifyClu¡”CÚfigW™hD©a
() {

3935 
j
;

3936 
upd©e_cÚfig
 = 0;

3940 ià(
£rv”
.
şu¡”_moduË_æags
 & 
CLUSTER_MODULE_FLAG_NO_REDIRECTION
)

3941  
C_OK
;

3945 ià(
	`nodeIsSÏve
(
my£lf
)è 
C_OK
;

3948 
j
 = 1; j < 
£rv”
.
dbnum
; j++) {

3949 ià(
	`diùSize
(
£rv”
.
db
[
j
].
diù
)è 
C_ERR
;

3954 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

3955 ià(!
	`couÁKeysInSlÙ
(
j
)) ;

3959 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
my£lf
 ||

3960 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
] !ğ
NULL
) ;

3966 
upd©e_cÚfig
++;

3968 ià(
£rv”
.
şu¡”
->
¦Ùs
[
j
] =ğ
NULL
) {

3969 
	`£rv”Log
(
LL_WARNING
, "I have keys for unassigned slot %d. "

3970 "Takšg„e¥Úsib™y fÜ it.",
j
);

3971 
	`şu¡”AddSlÙ
(
my£lf
,
j
);

3973 
	`£rv”Log
(
LL_WARNING
, "I have keys for slot %d, buthe slot is "

3975 "S‘tšg iˆtØimpÜtšg s‹.",
j
);

3976 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
] = s”v”.şu¡”->
¦Ùs
[j];

3979 ià(
upd©e_cÚfig
è
	`şu¡”SaveCÚfigOrD›
(1);

3980  
C_OK
;

3981 
	}
}

3989 
	$şu¡”S‘Ma¡”
(
şu¡”Node
 *
n
) {

3990 
	`£rv”As£¹
(
n
 !ğ
my£lf
);

3991 
	`£rv”As£¹
(
my£lf
->
num¦Ùs
 == 0);

3993 ià(
	`nodeIsMa¡”
(
my£lf
)) {

3994 
my£lf
->
æags
 &ğ~(
CLUSTER_NODE_MASTER
|
CLUSTER_NODE_MIGRATE_TO
);

3995 
my£lf
->
æags
 |ğ
CLUSTER_NODE_SLAVE
;

3996 
	`şu¡”Clo£AÎSlÙs
();

3998 ià(
my£lf
->
¦aveof
)

3999 
	`şu¡”NodeRemoveSÏve
(
my£lf
->
¦aveof
,myself);

4001 
my£lf
->
¦aveof
 = 
n
;

4002 
	`şu¡”NodeAddSÏve
(
n
,
my£lf
);

4003 
	`»¶iÿtiÚS‘Ma¡”
(
n
->

,‚->
pÜt
);

4004 
	`»£tMªu®Faov”
();

4005 
	}
}

4011 
	s»disNodeFÏgs
 {

4012 
ušt16_t
 
	mæag
;

4013 *
	mÇme
;

4016 
»disNodeFÏgs
 
	g»disNodeFÏgsTabË
[] = {

4017 {
CLUSTER_NODE_MYSELF
, "myself,"},

4018 {
CLUSTER_NODE_MASTER
, "master,"},

4019 {
CLUSTER_NODE_SLAVE
, "slave,"},

4020 {
CLUSTER_NODE_PFAIL
, "fail?,"},

4021 {
CLUSTER_NODE_FAIL
, "fail,"},

4022 {
CLUSTER_NODE_HANDSHAKE
, "handshake,"},

4023 {
CLUSTER_NODE_NOADDR
, "noaddr,"},

4024 {
CLUSTER_NODE_NOFAILOVER
, "nofailover,"}

4029 
sds
 
	$»´e£ÁClu¡”NodeFÏgs
(
sds
 
ci
, 
ušt16_t
 
æags
) {

4030 
size_t
 
Üig_Ën
 = 
	`sd¦’
(
ci
);

4031 
i
, 
size
 = (
»disNodeFÏgsTabË
)/(
»disNodeFÏgs
);

4032 
i
 = 0; i < 
size
; i++) {

4033 
»disNodeFÏgs
 *
nodeæag
 = 
»disNodeFÏgsTabË
 + 
i
;

4034 ià(
æags
 & 
nodeæag
->
æag
è
ci
 = 
	`sdsÿt
(ci,‚odeæag->
Çme
);

4037 ià(
	`sd¦’
(
ci
è=ğ
Üig_Ën
èc˜ğ
	`sdsÿt
(ci,"noflags,");

4038 
	`sdsInüL’
(
ci
,-1);

4039  
ci
;

4040 
	}
}

4046 
sds
 
	$şu¡”G’NodeDesütiÚ
(
şu¡”Node
 *
node
) {

4047 
j
, 
¡¬t
;

4048 
sds
 
ci
;

4051 
ci
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"%.40s %s:%d@%d ",

4052 
node
->
Çme
,

4053 
node
->

,

4054 
node
->
pÜt
,

4055 
node
->
ıÜt
);

4058 
ci
 = 
	`»´e£ÁClu¡”NodeFÏgs
(ci, 
node
->
æags
);

4061 ià(
node
->
¦aveof
)

4062 
ci
 = 
	`sdsÿrštf
(ci," %.40 ",
node
->
¦aveof
->
Çme
);

4064 
ci
 = 
	`sdsÿ’
(ci," - ",3);

4067 
ci
 = 
	`sdsÿrštf
(ci,"%lld %lld %llu %s",

4068 (è
node
->
pšg_£Á
,

4069 (è
node
->
pÚg_»ûived
,

4070 (è
node
->
cÚfigEpoch
,

4071 (
node
->
lšk
 ||‚ode->
æags
 & 
CLUSTER_NODE_MYSELF
) ?

4075 
¡¬t
 = -1;

4076 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

4077 
b™
;

4079 ià((
b™
 = 
	`şu¡”NodeG‘SlÙB™
(
node
,
j
)) != 0) {

4080 ià(
¡¬t
 =ğ-1è¡¬ˆğ
j
;

4082 ià(
¡¬t
 !ğ-1 && (!
b™
 || 
j
 =ğ
CLUSTER_SLOTS
-1)) {

4083 ià(
b™
 && 
j
 =ğ
CLUSTER_SLOTS
-1) j++;

4085 ià(
¡¬t
 =ğ
j
-1) {

4086 
ci
 = 
	`sdsÿrštf
(ci," %d",
¡¬t
);

4088 
ci
 = 
	`sdsÿrštf
(ci," %d-%d",
¡¬t
,
j
-1);

4090 
¡¬t
 = -1;

4097 ià(
node
->
æags
 & 
CLUSTER_NODE_MYSELF
) {

4098 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

4099 ià(
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
j
]) {

4100 
ci
 = 
	`sdsÿrštf
(ci," [%d->-%.40s]",
j
,

4101 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
j
]->
Çme
);

4102 } ià(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
]) {

4103 
ci
 = 
	`sdsÿrštf
(ci," [%d-<-%.40s]",
j
,

4104 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
]->
Çme
);

4108  
ci
;

4109 
	}
}

4123 
sds
 
	$şu¡”G’NodesDesütiÚ
(
f‹r
) {

4124 
sds
 
ci
 = 
	`sd£m±y
(), 
ni
;

4125 
diùI‹¿tÜ
 *
di
;

4126 
diùEÁry
 *
de
;

4128 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

4129 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4130 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

4132 ià(
node
->
æags
 & 
f‹r
) ;

4133 
ni
 = 
	`şu¡”G’NodeDesütiÚ
(
node
);

4134 
ci
 = 
	`sdsÿtsds
(ci,
ni
);

4135 
	`sdsä“
(
ni
);

4136 
ci
 = 
	`sdsÿ’
(ci,"\n",1);

4138 
	`diùR–—£I‹¿tÜ
(
di
);

4139  
ci
;

4140 
	}
}

4146 cÚ¡ *
	$şu¡”G‘Mes§geTy³SŒšg
(
ty³
) {

4147 
ty³
) {

4148 
CLUSTERMSG_TYPE_PING
:  "ping";

4149 
CLUSTERMSG_TYPE_PONG
:  "pong";

4150 
CLUSTERMSG_TYPE_MEET
:  "meet";

4151 
CLUSTERMSG_TYPE_FAIL
:  "fail";

4152 
CLUSTERMSG_TYPE_PUBLISH
:  "publish";

4153 
CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST
:  "auth-req";

4154 
CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK
:  "auth-ack";

4155 
CLUSTERMSG_TYPE_UPDATE
:  "update";

4156 
CLUSTERMSG_TYPE_MFSTART
:  "mfstart";

4157 
CLUSTERMSG_TYPE_MODULE
:  "module";

4160 
	}
}

4162 
	$g‘SlÙOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
) {

4163 
¦Ù
;

4165 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
¦Ù
è!ğ
C_OK
 ||

4166 
¦Ù
 < 0 || slÙ >ğ
CLUSTER_SLOTS
)

4168 
	`addR•lyE¼Ü
(
c
,"Invalid or out of„ange slot");

4171  (è
¦Ù
;

4172 
	}
}

4174 
	$şu¡”R•lyMuÉiBulkSlÙs
(
ş›Á
 *
c
) {

4186 
num_ma¡”s
 = 0;

4187 *
¦Ù_»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

4189 
diùEÁry
 *
de
;

4190 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

4191 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4192 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

4193 
j
 = 0, 
¡¬t
 = -1;

4194 
i
, 
Ã¡ed_–em’ts
 = 0;

4198 ià(!
	`nodeIsMa¡”
(
node
è||‚ode->
num¦Ùs
 == 0) ;

4200 
i
 = 0; i < 
node
->
num¦aves
; i++) {

4201 ià(
	`nodeFaed
(
node
->
¦aves
[
i
])) ;

4202 
Ã¡ed_–em’ts
++;

4205 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

4206 
b™
, 
i
;

4208 ià((
b™
 = 
	`şu¡”NodeG‘SlÙB™
(
node
,
j
)) != 0) {

4209 ià(
¡¬t
 =ğ-1è¡¬ˆğ
j
;

4211 ià(
¡¬t
 !ğ-1 && (!
b™
 || 
j
 =ğ
CLUSTER_SLOTS
-1)) {

4212 
	`addR•lyA¼ayL’
(
c
, 
Ã¡ed_–em’ts
 + 3);

4214 ià(
b™
 && 
j
 =ğ
CLUSTER_SLOTS
-1) j++;

4218 ià(
¡¬t
 =ğ
j
-1) {

4219 
	`addR•lyLÚgLÚg
(
c
, 
¡¬t
);

4220 
	`addR•lyLÚgLÚg
(
c
, 
¡¬t
);

4222 
	`addR•lyLÚgLÚg
(
c
, 
¡¬t
);

4223 
	`addR•lyLÚgLÚg
(
c
, 
j
-1);

4225 
¡¬t
 = -1;

4228 
	`addR•lyA¼ayL’
(
c
, 3);

4229 
	`addR•lyBulkCSŒšg
(
c
, 
node
->

);

4230 
	`addR•lyLÚgLÚg
(
c
, 
node
->
pÜt
);

4231 
	`addR•lyBulkCBufãr
(
c
, 
node
->
Çme
, 
CLUSTER_NAMELEN
);

4234 
i
 = 0; i < 
node
->
num¦aves
; i++) {

4237 ià(
	`nodeFaed
(
node
->
¦aves
[
i
])) ;

4238 
	`addR•lyA¼ayL’
(
c
, 3);

4239 
	`addR•lyBulkCSŒšg
(
c
, 
node
->
¦aves
[
i
]->

);

4240 
	`addR•lyLÚgLÚg
(
c
, 
node
->
¦aves
[
i
]->
pÜt
);

4241 
	`addR•lyBulkCBufãr
(
c
, 
node
->
¦aves
[
i
]->
Çme
, 
CLUSTER_NAMELEN
);

4243 
num_ma¡”s
++;

4247 
	`diùR–—£I‹¿tÜ
(
di
);

4248 
	`£tDeã¼edA¼ayL’
(
c
, 
¦Ù_»¶yËn
, 
num_ma¡”s
);

4249 
	}
}

4251 
	$şu¡”Commªd
(
ş›Á
 *
c
) {

4252 ià(
£rv”
.
şu¡”_’abËd
 == 0) {

4253 
	`addR•lyE¼Ü
(
c
,"This instance has cluster support disabled");

4257 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

4258 cÚ¡ *
h–p
[] = {

4282 
NULL


4284 
	`addR•lyH–p
(
c
, 
h–p
);

4285 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"m“t"è&& (c->
¬gc
 == 4 || c->argc == 5)) {

4287 
pÜt
, 
ıÜt
;

4289 ià(
	`g‘LÚgLÚgFromObjeù
(
c
->
¬gv
[3], &
pÜt
è!ğ
C_OK
) {

4290 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid TCP base…ort specified: %s",

4291 (*)
c
->
¬gv
[3]->
±r
);

4295 ià(
c
->
¬gc
 == 5) {

4296 ià(
	`g‘LÚgLÚgFromObjeù
(
c
->
¬gv
[4], &
ıÜt
è!ğ
C_OK
) {

4297 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid TCP bus…ort specified: %s",

4298 (*)
c
->
¬gv
[4]->
±r
);

4302 
ıÜt
 = 
pÜt
 + 
CLUSTER_PORT_INCR
;

4305 ià(
	`şu¡”S¹Hªdshake
(
c
->
¬gv
[2]->
±r
,
pÜt
,
ıÜt
) == 0 &&

4306 
”ºo
 =ğ
EINVAL
)

4308 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid‚ode‡ddress specified: %s:%s",

4309 (*)
c
->
¬gv
[2]->
±r
, (*)c->argv[3]->ptr);

4311 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4313 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"nodes"è&& c->
¬gc
 == 2) {

4315 
sds
 
nodes
 = 
	`şu¡”G’NodesDesütiÚ
(0);

4316 
	`addR•lyV”b©im
(
c
,
nodes
,
	`sd¦’
(nodes),"txt");

4317 
	`sdsä“
(
nodes
);

4318 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"myid"è&& c->
¬gc
 == 2) {

4320 
	`addR•lyBulkCBufãr
(
c
,
my£lf
->
Çme
, 
CLUSTER_NAMELEN
);

4321 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"¦Ùs"è&& c->
¬gc
 == 2) {

4323 
	`şu¡”R•lyMuÉiBulkSlÙs
(
c
);

4324 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"æush¦Ùs"è&& c->
¬gc
 == 2) {

4326 ià(
	`diùSize
(
£rv”
.
db
[0].
diù
) != 0) {

4327 
	`addR•lyE¼Ü
(
c
,"DB must beƒmptyo…erform CLUSTER FLUSHSLOTS.");

4330 
	`şu¡”D–NodeSlÙs
(
my£lf
);

4331 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

4332 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4333 } ià((!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"addslots") ||

4334 !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"d–¦Ùs")è&& c->
¬gc
 >= 3)

4338 
j
, 
¦Ù
;

4339 *
¦Ùs
 = 
	`zm®loc
(
CLUSTER_SLOTS
);

4340 
d–
 = !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"delslots");

4342 
	`mem£t
(
¦Ùs
,0,
CLUSTER_SLOTS
);

4345 
j
 = 2; j < 
c
->
¬gc
; j++) {

4346 ià((
¦Ù
 = 
	`g‘SlÙOrR•ly
(
c
,c->
¬gv
[
j
])) == -1) {

4347 
	`zä“
(
¦Ùs
);

4350 ià(
d–
 && 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] =ğ
NULL
) {

4351 
	`addR•lyE¼ÜFÜm©
(
c
,"SlÙ %d i ®»ady uÇssigÃd", 
¦Ù
);

4352 
	`zä“
(
¦Ùs
);

4354 } ià(!
d–
 && 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
]) {

4355 
	`addR•lyE¼ÜFÜm©
(
c
,"SlÙ %d i ®»ady busy", 
¦Ù
);

4356 
	`zä“
(
¦Ùs
);

4359 ià(
¦Ùs
[
¦Ù
]++ == 1) {

4360 
	`addR•lyE¼ÜFÜm©
(
c
,"Slot %d specified multipleimes",

4361 ()
¦Ù
);

4362 
	`zä“
(
¦Ùs
);

4366 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

4367 ià(
¦Ùs
[
j
]) {

4368 
»tv®
;

4372 ià(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
])

4373 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
j
] = 
NULL
;

4375 
»tv®
 = 
d–
 ? 
	`şu¡”D–SlÙ
(
j
) :

4376 
	`şu¡”AddSlÙ
(
my£lf
,
j
);

4377 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
»tv®
 =ğ
C_OK
);

4380 
	`zä“
(
¦Ùs
);

4381 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

4382 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4383 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"£t¦Ù"è&& c->
¬gc
 >= 4) {

4388 
¦Ù
;

4389 
şu¡”Node
 *
n
;

4391 ià(
	`nodeIsSÏve
(
my£lf
)) {

4392 
	`addR•lyE¼Ü
(
c
,"Please use SETSLOT only with masters.");

4396 ià((
¦Ù
 = 
	`g‘SlÙOrR•ly
(
c
,c->
¬gv
[2])) == -1) ;

4398 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"mig¿tšg"è&& c->
¬gc
 == 5) {

4399 ià(
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] !ğ
my£lf
) {

4400 
	`addR•lyE¼ÜFÜm©
(
c
,"I'm‚ÙhowÃ¸oàhash slÙ %u",
¦Ù
);

4403 ià((
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[4]->
±r
)è=ğ
NULL
) {

4404 
	`addR•lyE¼ÜFÜm©
(
c
,"I don't know‡bout‚ode %s",

4405 (*)
c
->
¬gv
[4]->
±r
);

4408 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
] = 
n
;

4409 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"impÜtšg"è&& c->
¬gc
 == 5) {

4410 ià(
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] =ğ
my£lf
) {

4411 
	`addR•lyE¼ÜFÜm©
(
c
,

4412 "I'm‡Ì—dyhowÃ¸oàhash slÙ %u",
¦Ù
);

4415 ià((
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[4]->
±r
)è=ğ
NULL
) {

4416 
	`addR•lyE¼ÜFÜm©
(
c
,"I don't know‡bout‚ode %s",

4417 (*)
c
->
¬gv
[4]->
±r
);

4420 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] = 
n
;

4421 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"¡abË"è&& c->
¬gc
 == 4) {

4423 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] = 
NULL
;

4424 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
] = 
NULL
;

4425 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"node"è&& c->
¬gc
 == 5) {

4427 
şu¡”Node
 *
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[4]->
±r
);

4429 ià(!
n
) {

4430 
	`addR•lyE¼ÜFÜm©
(
c
,"Unknown‚ode %s",

4431 (*)
c
->
¬gv
[4]->
±r
);

4436 ià(
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
] =ğ
my£lf
 && 
n
 != myself) {

4437 ià(
	`couÁKeysInSlÙ
(
¦Ù
) != 0) {

4438 
	`addR•lyE¼ÜFÜm©
(
c
,

4440 "whI stÈhŞd key fÜhi hash slÙ.", 
¦Ù
);

4447 ià(
	`couÁKeysInSlÙ
(
¦Ù
) == 0 &&

4448 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
])

4449 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
] = 
NULL
;

4453 ià(
n
 =ğ
my£lf
 &&

4454 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
])

4465 ià(
	`şu¡”BumpCÚfigEpochW™houtCÚ£nsus
(è=ğ
C_OK
) {

4466 
	`£rv”Log
(
LL_WARNING
,

4467 "cÚfigEpoch upd©ed‡á” impÜtšg slÙ %d", 
¦Ù
);

4469 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] = 
NULL
;

4471 
	`şu¡”D–SlÙ
(
¦Ù
);

4472 
	`şu¡”AddSlÙ
(
n
,
¦Ù
);

4474 
	`addR•lyE¼Ü
(
c
,

4478 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_SAVE_CONFIG
|
CLUSTER_TODO_UPDATE_STATE
);

4479 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4480 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"bum³poch"è&& c->
¬gc
 == 2) {

4482 
»tv®
 = 
	`şu¡”BumpCÚfigEpochW™houtCÚ£nsus
();

4483 
sds
 
»¶y
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"+%s %llu\r\n",

4484 (
»tv®
 =ğ
C_OK
) ? "BUMPED" : "STILL",

4485 (è
my£lf
->
cÚfigEpoch
);

4486 
	`addR•lySds
(
c
,
»¶y
);

4487 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"šfo"è&& c->
¬gc
 == 2) {

4489 *
¡©e¡r
[] = {"ok","fail","needhelp"};

4490 
¦Ùs_assigÃd
 = 0, 
¦Ùs_ok
 = 0, 
¦Ùs_pç
 = 0, 
¦Ùs_ç
 = 0;

4491 
ušt64_t
 
my•och
;

4492 
j
;

4494 
j
 = 0; j < 
CLUSTER_SLOTS
; j++) {

4495 
şu¡”Node
 *
n
 = 
£rv”
.
şu¡”
->
¦Ùs
[
j
];

4497 ià(
n
 =ğ
NULL
) ;

4498 
¦Ùs_assigÃd
++;

4499 ià(
	`nodeFaed
(
n
)) {

4500 
¦Ùs_ç
++;

4501 } ià(
	`nodeTimedOut
(
n
)) {

4502 
¦Ùs_pç
++;

4504 
¦Ùs_ok
++;

4508 
my•och
 = (
	`nodeIsSÏve
(
my£lf
è&& my£lf->
¦aveof
) ?

4509 
my£lf
->
¦aveof
->
cÚfigEpoch
 : myself->configEpoch;

4511 
sds
 
šfo
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

4521 , 
¡©e¡r
[
£rv”
.
şu¡”
->
¡©e
],

4522 
¦Ùs_assigÃd
,

4523 
¦Ùs_ok
,

4524 
¦Ùs_pç
,

4525 
¦Ùs_ç
,

4526 
	`diùSize
(
£rv”
.
şu¡”
->
nodes
),

4527 
£rv”
.
şu¡”
->
size
,

4528 (è
£rv”
.
şu¡”
->
cu¼’tEpoch
,

4529 (è
my•och


4533 
tÙ_msg_£Á
 = 0;

4534 
tÙ_msg_»ûived
 = 0;

4536 
i
 = 0; i < 
CLUSTERMSG_TYPE_COUNT
; i++) {

4537 ià(
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_£Á
[
i
] == 0) ;

4538 
tÙ_msg_£Á
 +ğ
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_£Á
[
i
];

4539 
šfo
 = 
	`sdsÿrštf
(info,

4541 
	`şu¡”G‘Mes§geTy³SŒšg
(
i
),

4542 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_£Á
[
i
]);

4544 
šfo
 = 
	`sdsÿrštf
(info,

4545 "şu¡”_¡©s_mes§ges_£Á:%Îd\r\n", 
tÙ_msg_£Á
);

4547 
i
 = 0; i < 
CLUSTERMSG_TYPE_COUNT
; i++) {

4548 ià(
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_»ûived
[
i
] == 0) ;

4549 
tÙ_msg_»ûived
 +ğ
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_»ûived
[
i
];

4550 
šfo
 = 
	`sdsÿrštf
(info,

4552 
	`şu¡”G‘Mes§geTy³SŒšg
(
i
),

4553 
£rv”
.
şu¡”
->
¡©s_bus_mes§ges_»ûived
[
i
]);

4555 
šfo
 = 
	`sdsÿrštf
(info,

4556 "şu¡”_¡©s_mes§ges_»ûived:%Îd\r\n", 
tÙ_msg_»ûived
);

4559 
	`addR•lyV”b©im
(
c
,
šfo
,
	`sd¦’
(info),"txt");

4560 
	`sdsä“
(
šfo
);

4561 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"§vecÚfig"è&& c->
¬gc
 == 2) {

4562 
»tv®
 = 
	`şu¡”SaveCÚfig
(1);

4564 ià(
»tv®
 == 0)

4565 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4567 
	`addR•lyE¼ÜFÜm©
(
c
,"error savinghe cluster‚ode config: %s",

4568 
	`¡»¼Ü
(
”ºo
));

4569 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"key¦Ù"è&& c->
¬gc
 == 3) {

4571 
sds
 
key
 = 
c
->
¬gv
[2]->
±r
;

4573 
	`addR•lyLÚgLÚg
(
c
,
	`keyHashSlÙ
(
key
,
	`sd¦’
(key)));

4574 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"couÁkeysš¦Ù"è&& c->
¬gc
 == 3) {

4576 
¦Ù
;

4578 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
¦Ù
,
NULL
è!ğ
C_OK
)

4580 ià(
¦Ù
 < 0 || slÙ >ğ
CLUSTER_SLOTS
) {

4581 
	`addR•lyE¼Ü
(
c
,"Invalid slot");

4584 
	`addR•lyLÚgLÚg
(
c
,
	`couÁKeysInSlÙ
(
¦Ù
));

4585 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g‘keysš¦Ù"è&& c->
¬gc
 == 4) {

4587 
maxkeys
, 
¦Ù
;

4588 
numkeys
, 
j
;

4589 
robj
 **
keys
;

4591 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
¦Ù
,
NULL
è!ğ
C_OK
)

4593 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
maxkeys
,
NULL
)

4594 !ğ
C_OK
)

4596 ià(
¦Ù
 < 0 || slÙ >ğ
CLUSTER_SLOTS
 || 
maxkeys
 < 0) {

4597 
	`addR•lyE¼Ü
(
c
,"Invalid slot or‚umber of keys");

4603 
keys_š_¦Ù
 = 
	`couÁKeysInSlÙ
(
¦Ù
);

4604 ià(
maxkeys
 > 
keys_š_¦Ù
) maxkeys = keys_in_slot;

4606 
keys
 = 
	`zm®loc
((
robj
*)*
maxkeys
);

4607 
numkeys
 = 
	`g‘KeysInSlÙ
(
¦Ù
, 
keys
, 
maxkeys
);

4608 
	`addR•lyA¼ayL’
(
c
,
numkeys
);

4609 
j
 = 0; j < 
numkeys
; j++) {

4610 
	`addR•lyBulk
(
c
,
keys
[
j
]);

4611 
	`deüRefCouÁ
(
keys
[
j
]);

4613 
	`zä“
(
keys
);

4614 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"fÜg‘"è&& c->
¬gc
 == 3) {

4616 
şu¡”Node
 *
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[2]->
±r
);

4618 ià(!
n
) {

4619 
	`addR•lyE¼ÜFÜm©
(
c
,"UnknowÀnod%s", (*)c->
¬gv
[2]->
±r
);

4621 } ià(
n
 =ğ
my£lf
) {

4622 
	`addR•lyE¼Ü
(
c
,"Iried hard but I can't forget myself...");

4624 } ià(
	`nodeIsSÏve
(
my£lf
è&& my£lf->
¦aveof
 =ğ
n
) {

4625 
	`addR•lyE¼Ü
(
c
,"Can't forget my master!");

4628 
	`şu¡”BÏckli¡AddNode
(
n
);

4629 
	`şu¡”D–Node
(
n
);

4630 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|

4631 
CLUSTER_TODO_SAVE_CONFIG
);

4632 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4633 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»¶iÿ‹"è&& c->
¬gc
 == 3) {

4635 
şu¡”Node
 *
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[2]->
±r
);

4638 ià(!
n
) {

4639 
	`addR•lyE¼ÜFÜm©
(
c
,"UnknowÀnod%s", (*)c->
¬gv
[2]->
±r
);

4644 ià(
n
 =ğ
my£lf
) {

4645 
	`addR•lyE¼Ü
(
c
,"Can't„eplicate myself");

4650 ià(
	`nodeIsSÏve
(
n
)) {

4651 
	`addR•lyE¼Ü
(
c
,"I can only„eplicate‡ master,‚ot‡„eplica.");

4658 ià(
	`nodeIsMa¡”
(
my£lf
) &&

4659 (
my£lf
->
num¦Ùs
 !ğ0 || 
	`diùSize
(
£rv”
.
db
[0].
diù
) != 0)) {

4660 
	`addR•lyE¼Ü
(
c
,

4667 
	`şu¡”S‘Ma¡”
(
n
);

4668 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|
CLUSTER_TODO_SAVE_CONFIG
);

4669 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4670 } ià((!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"slaves") ||

4671 !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»¶iÿs")è&& c->
¬gc
 == 3) {

4673 
şu¡”Node
 *
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[2]->
±r
);

4674 
j
;

4677 ià(!
n
) {

4678 
	`addR•lyE¼ÜFÜm©
(
c
,"UnknowÀnod%s", (*)c->
¬gv
[2]->
±r
);

4682 ià(
	`nodeIsSÏve
(
n
)) {

4683 
	`addR•lyE¼Ü
(
c
,"The specified‚ode is‚ot‡ master");

4687 
	`addR•lyA¼ayL’
(
c
,
n
->
num¦aves
);

4688 
j
 = 0; j < 
n
->
num¦aves
; j++) {

4689 
sds
 
ni
 = 
	`şu¡”G’NodeDesütiÚ
(
n
->
¦aves
[
j
]);

4690 
	`addR•lyBulkCSŒšg
(
c
,
ni
);

4691 
	`sdsä“
(
ni
);

4693 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"count-failure-reports") &&

4694 
c
->
¬gc
 == 3)

4697 
şu¡”Node
 *
n
 = 
	`şu¡”LookupNode
(
c
->
¬gv
[2]->
±r
);

4699 ià(!
n
) {

4700 
	`addR•lyE¼ÜFÜm©
(
c
,"UnknowÀnod%s", (*)c->
¬gv
[2]->
±r
);

4703 
	`addR•lyLÚgLÚg
(
c
,
	`şu¡”NodeFau»R•ÜtsCouÁ
(
n
));

4705 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"failover") &&

4706 (
c
->
¬gc
 == 2 || c->argc == 3))

4709 
fÜû
 = 0, 
keov”
 = 0;

4711 ià(
c
->
¬gc
 == 3) {

4712 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"force")) {

4713 
fÜû
 = 1;

4714 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"takeover")) {

4715 
keov”
 = 1;

4716 
fÜû
 = 1;

4718 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

4724 ià(
	`nodeIsMa¡”
(
my£lf
)) {

4725 
	`addR•lyE¼Ü
(
c
,"You should send CLUSTER FAILOVERo‡„eplica");

4727 } ià(
my£lf
->
¦aveof
 =ğ
NULL
) {

4728 
	`addR•lyE¼Ü
(
c
,"I'm‡„eplica but my master is unknowno me");

4730 } ià(!
fÜû
 &&

4731 (
	`nodeFaed
(
my£lf
->
¦aveof
) ||

4732 
my£lf
->
¦aveof
->
lšk
 =ğ
NULL
))

4734 
	`addR•lyE¼Ü
(
c
,"Master is down or failed, "

4738 
	`»£tMªu®Faov”
();

4739 
£rv”
.
şu¡”
->
mf_’d
 = 
	`m¡ime
(è+ 
CLUSTER_MF_TIMEOUT
;

4741 ià(
keov”
) {

4746 
	`£rv”Log
(
LL_WARNING
,"Taking overhe master (user„equest).");

4747 
	`şu¡”BumpCÚfigEpochW™houtCÚ£nsus
();

4748 
	`şu¡”Faov”R•ÏûYourMa¡”
();

4749 } ià(
fÜû
) {

4753 
	`£rv”Log
(
LL_WARNING
,"Forced failover user„equest‡ccepted.");

4754 
£rv”
.
şu¡”
->
mf_ÿn_¡¬t
 = 1;

4756 
	`£rv”Log
(
LL_WARNING
,"Manual failover user„equest‡ccepted.");

4757 
	`şu¡”S’dMFS¹
(
my£lf
->
¦aveof
);

4759 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4760 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"£t-cÚfig-•och"è&& c->
¬gc
 == 3)

4769 
•och
;

4771 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
•och
,
NULL
è!ğ
C_OK
)

4774 ià(
•och
 < 0) {

4775 
	`addR•lyE¼ÜFÜm©
(
c
,"Inv®id cÚfigƒpoch s³cif›d: %Îd",
•och
);

4776 } ià(
	`diùSize
(
£rv”
.
şu¡”
->
nodes
) > 1) {

4777 
	`addR•lyE¼Ü
(
c
,"The user can‡ssign‡ configƒpoch only whenhe "

4779 } ià(
my£lf
->
cÚfigEpoch
 != 0) {

4780 
	`addR•lyE¼Ü
(
c
,"Node configƒpoch is‡lready‚on-zero");

4782 
my£lf
->
cÚfigEpoch
 = 
•och
;

4783 
	`£rv”Log
(
LL_WARNING
,

4785 (è
my£lf
->
cÚfigEpoch
);

4787 ià(
£rv”
.
şu¡”
->
cu¼’tEpoch
 < (
ušt64_t
)
•och
)

4788 
£rv”
.
şu¡”
->
cu¼’tEpoch
 = 
•och
;

4792 
	`şu¡”DoBefÜeSË•
(
CLUSTER_TODO_UPDATE_STATE
|

4793 
CLUSTER_TODO_SAVE_CONFIG
);

4794 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4796 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"reset") &&

4797 (
c
->
¬gc
 == 2 || c->argc == 3))

4800 
h¬d
 = 0;

4803 ià(
c
->
¬gc
 == 3) {

4804 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"hard")) {

4805 
h¬d
 = 1;

4806 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"soft")) {

4807 
h¬d
 = 0;

4809 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

4816 ià(
	`nodeIsMa¡”
(
my£lf
è&& 
	`diùSize
(
c
->
db
->
diù
) != 0) {

4817 
	`addR•lyE¼Ü
(
c
,"CLUSTER RESET can't be called with "

4821 
	`şu¡”Re£t
(
h¬d
);

4822 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4824 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

4827 
	}
}

4835 
	$ü—‹DumpPaylßd
(
rio
 *
·ylßd
, 
robj
 *
o
,„obj *
key
) {

4836 
buf
[2];

4837 
ušt64_t
 
üc
;

4841 
	`rioIn™W™hBufãr
(
·ylßd
,
	`sd£m±y
());

4842 
	`£rv”As£¹
(
	`rdbSaveObjeùTy³
(
·ylßd
,
o
));

4843 
	`£rv”As£¹
(
	`rdbSaveObjeù
(
·ylßd
,
o
,
key
));

4853 
buf
[0] = 
RDB_VERSION
 & 0xff;

4854 
buf
[1] = (
RDB_VERSION
 >> 8) & 0xff;

4855 
·ylßd
->
io
.
bufãr
.
±r
 = 
	`sdsÿ’
Õaylßd->io.bufãr.±r,
buf
,2);

4858 
üc
 = 
	`üc64
(0,(*)
·ylßd
->
io
.
bufãr
.
±r
,

4859 
	`sd¦’
(
·ylßd
->
io
.
bufãr
.
±r
));

4860 
	`mem»v64ifbe
(&
üc
);

4861 
·ylßd
->
io
.
bufãr
.
±r
 = 
	`sdsÿ’
Õaylßd->io.bufãr.±r,&
üc
,8);

4862 
	}
}

4868 
	$v”ifyDumpPaylßd
(*
p
, 
size_t
 
Ën
) {

4869 *
foÙ”
;

4870 
ušt16_t
 
rdbv”
;

4871 
ušt64_t
 
üc
;

4874 ià(
Ën
 < 10è 
C_ERR
;

4875 
foÙ”
 = 
p
+(
Ën
-10);

4878 
rdbv”
 = (
foÙ”
[1] << 8) | footer[0];

4879 ià(
rdbv”
 > 
RDB_VERSION
è 
C_ERR
;

4882 
üc
 = 
	`üc64
(0,
p
,
Ën
-8);

4883 
	`mem»v64ifbe
(&
üc
);

4884  (
	`memcmp
(&
üc
,
foÙ”
+2,8è=ğ0è? 
C_OK
 : 
C_ERR
;

4885 
	}
}

4890 
	$dumpCommªd
(
ş›Á
 *
c
) {

4891 
robj
 *
o
;

4892 
rio
 
·ylßd
;

4895 ià((
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1])è=ğ
NULL
) {

4896 
	`addR•lyNuÎ
(
c
);

4901 
	`ü—‹DumpPaylßd
(&
·ylßd
,
o
,
c
->
¬gv
[1]);

4904 
	`addR•lyBulkSds
(
c
,
·ylßd
.
io
.
bufãr
.
±r
);

4906 
	}
}

4909 
	$»¡ÜeCommªd
(
ş›Á
 *
c
) {

4910 
‰l
, 
lfu_äeq
 = -1, 
Ìu_idË
 = -1, 
Ìu_şock
 = -1;

4911 
rio
 
·ylßd
;

4912 
j
, 
ty³
, 
»¶aû
 = 0, 
ab¡
 = 0;

4913 
robj
 *
obj
;

4916 
j
 = 4; j < 
c
->
¬gc
; j++) {

4917 
add™iÚ®
 = 
c
->
¬gc
-
j
-1;

4918 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"replace")) {

4919 
»¶aû
 = 1;

4920 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"absttl")) {

4921 
ab¡
 = 1;

4922 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"idËtime"è&& 
add™iÚ®
 >= 1 &&

4923 
lfu_äeq
 == -1)

4925 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],&
Ìu_idË
,
NULL
)

4926 !ğ
C_OK
) ;

4927 ià(
Ìu_idË
 < 0) {

4928 
	`addR•lyE¼Ü
(
c
,"Invalid IDLETIME value, must be >= 0");

4931 
Ìu_şock
 = 
	`LRU_CLOCK
();

4932 
j
++;

4933 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"äeq"è&& 
add™iÚ®
 >= 1 &&

4934 
Ìu_idË
 == -1)

4936 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],&
lfu_äeq
,
NULL
)

4937 !ğ
C_OK
) ;

4938 ià(
lfu_äeq
 < 0 ||†fu_freq > 255) {

4939 
	`addR•lyE¼Ü
(
c
,"Invalid FREQ value, must be >= 0‡nd <= 255");

4942 
j
++;

4944 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

4950 ià(!
»¶aû
 && 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]è!ğ
NULL
) {

4951 
	`addR•ly
(
c
,
sh¬ed
.
busykey”r
);

4956 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
‰l
,
NULL
è!ğ
C_OK
) {

4958 } ià(
‰l
 < 0) {

4959 
	`addR•lyE¼Ü
(
c
,"Invalid TTL value, must be >= 0");

4964 ià(
	`v”ifyDumpPaylßd
(
c
->
¬gv
[3]->
±r
,
	`sd¦’
(c->¬gv[3]->±r)è=ğ
C_ERR
)

4966 
	`addR•lyE¼Ü
(
c
,"DUMP…ayload version or checksum‡re wrong");

4970 
	`rioIn™W™hBufãr
(&
·ylßd
,
c
->
¬gv
[3]->
±r
);

4971 ià(((
ty³
 = 
	`rdbLßdObjeùTy³
(&
·ylßd
)) == -1) ||

4972 ((
obj
 = 
	`rdbLßdObjeù
(
ty³
,&
·ylßd
,
c
->
¬gv
[1]->
±r
)è=ğ
NULL
))

4974 
	`addR•lyE¼Ü
(
c
,"Bad data format");

4979 ià(
»¶aû
è
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

4982 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
obj
);

4983 ià(
‰l
) {

4984 ià(!
ab¡
è
‰l
+=
	`m¡ime
();

4985 
	`£tExpœe
(
c
,c->
db
,c->
¬gv
[1],
‰l
);

4987 
	`objeùS‘LRUOrLFU
(
obj
,
lfu_äeq
,
Ìu_idË
,
Ìu_şock
,1000);

4988 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

4989 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"»¡Üe",
c
->
¬gv
[1],c->
db
->
id
);

4990 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4991 
£rv”
.
dœty
++;

4992 
	}
}

5000 
	#MIGRATE_SOCKET_CACHE_ITEMS
 64

	)

5001 
	#MIGRATE_SOCKET_CACHE_TTL
 10

	)

5003 
	smig¿‹CachedSock‘
 {

5004 
cÚÃùiÚ
 *
	mcÚn
;

5005 
	mÏ¡_dbid
;

5006 
time_t
 
	mÏ¡_u£_time
;

5007 } 
	tmig¿‹CachedSock‘
;

5020 
mig¿‹CachedSock‘
* 
	$mig¿‹G‘Sock‘
(
ş›Á
 *
c
, 
robj
 *
ho¡
,„obj *
pÜt
, 
timeout
) {

5021 
cÚÃùiÚ
 *
cÚn
;

5022 
sds
 
Çme
 = 
	`sd£m±y
();

5023 
mig¿‹CachedSock‘
 *
cs
;

5026 
Çme
 = 
	`sdsÿ’
Òame,
ho¡
->
±r
,
	`sd¦’
(host->ptr));

5027 
Çme
 = 
	`sdsÿ’
(name,":",1);

5028 
Çme
 = 
	`sdsÿ’
Òame,
pÜt
->
±r
,
	`sd¦’
(port->ptr));

5029 
cs
 = 
	`diùF‘chV®ue
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
Çme
);

5030 ià(
cs
) {

5031 
	`sdsä“
(
Çme
);

5032 
cs
->
Ï¡_u£_time
 = 
£rv”
.
unixtime
;

5033  
cs
;

5037 ià(
	`diùSize
(
£rv”
.
mig¿‹_ÿched_sock‘s
è=ğ
MIGRATE_SOCKET_CACHE_ITEMS
) {

5039 
diùEÁry
 *
de
 = 
	`diùG‘RªdomKey
(
£rv”
.
mig¿‹_ÿched_sock‘s
);

5040 
cs
 = 
	`diùG‘V®
(
de
);

5041 
	`cÚnClo£
(
cs
->
cÚn
);

5042 
	`zä“
(
cs
);

5043 
	`diùD–‘e
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
	`diùG‘Key
(
de
));

5047 
cÚn
 = 
£rv”
.
s_şu¡”
 ? 
	`cÚnC»©eTLS
(è: 
	`cÚnC»©eSock‘
();

5048 ià(
	`cÚnBlockšgCÚÃù
(
cÚn
, 
c
->
¬gv
[1]->
±r
, 
	`©oi
(c->¬gv[2]->±r), 
timeout
)

5049 !ğ
C_OK
) {

5050 
	`addR•lySds
(
c
,

5051 
	`sd¢ew
("-IOERRƒrror orimeout connectingohe client\r\n"));

5052 
	`cÚnClo£
(
cÚn
);

5053 
	`sdsä“
(
Çme
);

5054  
NULL
;

5056 
	`cÚnEÇbËTıNoD–ay
(
cÚn
);

5059 
cs
 = 
	`zm®loc
((*cs));

5060 
cs
->
cÚn
 = conn;

5062 
cs
->
Ï¡_dbid
 = -1;

5063 
cs
->
Ï¡_u£_time
 = 
£rv”
.
unixtime
;

5064 
	`diùAdd
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
Çme
,
cs
);

5065  
cs
;

5066 
	}
}

5069 
	$mig¿‹Clo£Sock‘
(
robj
 *
ho¡
,„obj *
pÜt
) {

5070 
sds
 
Çme
 = 
	`sd£m±y
();

5071 
mig¿‹CachedSock‘
 *
cs
;

5073 
Çme
 = 
	`sdsÿ’
Òame,
ho¡
->
±r
,
	`sd¦’
(host->ptr));

5074 
Çme
 = 
	`sdsÿ’
(name,":",1);

5075 
Çme
 = 
	`sdsÿ’
Òame,
pÜt
->
±r
,
	`sd¦’
(port->ptr));

5076 
cs
 = 
	`diùF‘chV®ue
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
Çme
);

5077 ià(!
cs
) {

5078 
	`sdsä“
(
Çme
);

5082 
	`cÚnClo£
(
cs
->
cÚn
);

5083 
	`zä“
(
cs
);

5084 
	`diùD–‘e
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
Çme
);

5085 
	`sdsä“
(
Çme
);

5086 
	}
}

5088 
	$mig¿‹Clo£TimedoutSock‘s
() {

5089 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
mig¿‹_ÿched_sock‘s
);

5090 
diùEÁry
 *
de
;

5092 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

5093 
mig¿‹CachedSock‘
 *
cs
 = 
	`diùG‘V®
(
de
);

5095 ià((
£rv”
.
unixtime
 - 
cs
->
Ï¡_u£_time
è> 
MIGRATE_SOCKET_CACHE_TTL
) {

5096 
	`cÚnClo£
(
cs
->
cÚn
);

5097 
	`zä“
(
cs
);

5098 
	`diùD–‘e
(
£rv”
.
mig¿‹_ÿched_sock‘s
,
	`diùG‘Key
(
de
));

5101 
	`diùR–—£I‹¿tÜ
(
di
);

5102 
	}
}

5111 
	$mig¿‹Commªd
(
ş›Á
 *
c
) {

5112 
mig¿‹CachedSock‘
 *
cs
;

5113 
cİy
 = 0, 
»¶aû
 = 0, 
j
;

5114 *
u£ºame
 = 
NULL
;

5115 *
·sswÜd
 = 
NULL
;

5116 
timeout
;

5117 
dbid
;

5118 
robj
 **
ov
 = 
NULL
;

5119 
robj
 **
kv
 = 
NULL
;

5120 
robj
 **
Ãw¬gv
 = 
NULL
;

5121 
rio
 
cmd
, 
·ylßd
;

5122 
may_»Œy
 = 1;

5123 
wr™e_”rÜ
 = 0;

5124 
¬gv_»wr™‹n
 = 0;

5127 
fœ¡_key
 = 3;

5128 
num_keys
 = 1;

5131 
j
 = 6; j < 
c
->
¬gc
; j++) {

5132 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

5133 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"copy")) {

5134 
cİy
 = 1;

5135 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"replace")) {

5136 
»¶aû
 = 1;

5137 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"auth")) {

5138 ià(!
mÜ—rgs
) {

5139 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

5142 
j
++;

5143 
·sswÜd
 = 
c
->
¬gv
[
j
]->
±r
;

5144 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"auth2")) {

5145 ià(
mÜ—rgs
 < 2) {

5146 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

5149 
u£ºame
 = 
c
->
¬gv
[++
j
]->
±r
;

5150 
·sswÜd
 = 
c
->
¬gv
[++
j
]->
±r
;

5151 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"keys")) {

5152 ià(
	`sd¦’
(
c
->
¬gv
[3]->
±r
) != 0) {

5153 
	`addR•lyE¼Ü
(
c
,

5158 
fœ¡_key
 = 
j
+1;

5159 
num_keys
 = 
c
->
¬gc
 - 
j
 - 1;

5162 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

5168 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[5],&
timeout
,
NULL
è!ğ
C_OK
 ||

5169 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[4],&
dbid
,
NULL
è!ğ
C_OK
)

5173 ià(
timeout
 <= 0)imeout = 1000;

5180 
ov
 = 
	`z»®loc
(ov,(
robj
*)*
num_keys
);

5181 
kv
 = 
	`z»®loc
(kv,(
robj
*)*
num_keys
);

5182 
oi
 = 0;

5184 
j
 = 0; j < 
num_keys
; j++) {

5185 ià((
ov
[
oi
] = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
fœ¡_key
+
j
])è!ğ
NULL
) {

5186 
kv
[
oi
] = 
c
->
¬gv
[
fœ¡_key
+
j
];

5187 
oi
++;

5190 
num_keys
 = 
oi
;

5191 ià(
num_keys
 == 0) {

5192 
	`zä“
(
ov
); zä“(
kv
);

5193 
	`addR•lySds
(
c
,
	`sd¢ew
("+NOKEY\r\n"));

5197 
Œy_agaš
:

5198 
wr™e_”rÜ
 = 0;

5201 
cs
 = 
	`mig¿‹G‘Sock‘
(
c
,c->
¬gv
[1],c->¬gv[2],
timeout
);

5202 ià(
cs
 =ğ
NULL
) {

5203 
	`zä“
(
ov
); zä“(
kv
);

5207 
	`rioIn™W™hBufãr
(&
cmd
,
	`sd£m±y
());

5210 ià(
·sswÜd
) {

5211 
¬™y
 = 
u£ºame
 ? 3 : 2;

5212 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkCouÁ
(&
cmd
,'*',
¬™y
));

5213 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,"AUTH",4));

5214 ià(
u£ºame
) {

5215 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,
u£ºame
,

5216 
	`sd¦’
(
u£ºame
)));

5218 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,
·sswÜd
,

5219 
	`sd¦’
(
·sswÜd
)));

5223 
£Ëù
 = 
cs
->
Ï¡_dbid
 !ğ
dbid
;

5224 ià(
£Ëù
) {

5225 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkCouÁ
(&
cmd
,'*',2));

5226 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,"SELECT",6));

5227 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkLÚgLÚg
(&
cmd
,
dbid
));

5230 
nÚ_expœed
 = 0;

5236 
j
 = 0; j < 
num_keys
; j++) {

5237 
‰l
 = 0;

5238 
expœ—t
 = 
	`g‘Expœe
(
c
->
db
,
kv
[
j
]);

5240 ià(
expœ—t
 != -1) {

5241 
‰l
 = 
expœ—t
-
	`m¡ime
();

5242 ià(
‰l
 < 0) {

5245 ià(
‰l
 < 1)tl = 1;

5251 
kv
[
nÚ_expœed
++] = kv[
j
];

5253 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,

5254 
	`rioWr™eBulkCouÁ
(&
cmd
,'*',
»¶aû
 ? 5 : 4));

5256 ià(
£rv”
.
şu¡”_’abËd
)

5257 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,

5258 
	`rioWr™eBulkSŒšg
(&
cmd
,"RESTORE-ASKING",14));

5260 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,"RESTORE",7));

5261 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`sdsEncodedObjeù
(
kv
[
j
]));

5262 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,
kv
[
j
]->
±r
,

5263 
	`sd¦’
(
kv
[
j
]->
±r
)));

5264 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkLÚgLÚg
(&
cmd
,
‰l
));

5268 
	`ü—‹DumpPaylßd
(&
·ylßd
,
ov
[
j
],
kv
[j]);

5269 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,

5270 
	`rioWr™eBulkSŒšg
(&
cmd
,
·ylßd
.
io
.
bufãr
.
±r
,

5271 
	`sd¦’
(
·ylßd
.
io
.
bufãr
.
±r
)));

5272 
	`sdsä“
(
·ylßd
.
io
.
bufãr
.
±r
);

5276 ià(
»¶aû
)

5277 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
	`rioWr™eBulkSŒšg
(&
cmd
,"REPLACE",7));

5281 
num_keys
 = 
nÚ_expœed
;

5284 
”ºo
 = 0;

5286 
sds
 
buf
 = 
cmd
.
io
.
bufãr
.
±r
;

5287 
size_t
 
pos
 = 0, 
towr™e
;

5288 
nwr™‹n
 = 0;

5290 (
towr™e
 = 
	`sd¦’
(
buf
)-
pos
) > 0) {

5291 
towr™e
 = (towrite > (64*1024) ? (64*1024) :owrite);

5292 
nwr™‹n
 = 
	`cÚnSyncWr™e
(
cs
->
cÚn
,
buf
+
pos
,
towr™e
,
timeout
);

5293 ià(
nwr™‹n
 !ğ(sigÃd)
towr™e
) {

5294 
wr™e_”rÜ
 = 1;

5295 
sock‘_”r
;

5297 
pos
 +ğ
nwr™‹n
;

5301 
buf0
[1024];

5302 
buf1
[1024];

5303 
buf2
[1024];

5306 ià(
·sswÜd
 && 
	`cÚnSyncR—dLše
(
cs
->
cÚn
, 
buf0
, (buf0), 
timeout
) <= 0)

5307 
sock‘_”r
;

5310 ià(
£Ëù
 && 
	`cÚnSyncR—dLše
(
cs
->
cÚn
, 
buf1
, (buf1), 
timeout
) <= 0)

5311 
sock‘_”r
;

5314 
”rÜ_äom_rg‘
 = 0;

5315 
sock‘_”rÜ
 = 0;

5316 
d–_idx
 = 1;

5322 ià(!
cİy
è
Ãw¬gv
 = 
	`zm®loc
((
robj
*)*(
num_keys
+1));

5324 
j
 = 0; j < 
num_keys
; j++) {

5325 ià(
	`cÚnSyncR—dLše
(
cs
->
cÚn
, 
buf2
, (buf2), 
timeout
) <= 0) {

5326 
sock‘_”rÜ
 = 1;

5329 ià((
·sswÜd
 && 
buf0
[0] == '-') ||

5330 (
£Ëù
 && 
buf1
[0] == '-') ||

5331 
buf2
[0] == '-')

5334 ià(!
”rÜ_äom_rg‘
) {

5335 
cs
->
Ï¡_dbid
 = -1;

5336 *
”rbuf
;

5337 ià(
·sswÜd
 && 
buf0
[0] =ğ'-'è
”rbuf
 = buf0;

5338 ià(
£Ëù
 && 
buf1
[0] =ğ'-'è
”rbuf
 = buf1;

5339 
”rbuf
 = 
buf2
;

5341 
”rÜ_äom_rg‘
 = 1;

5342 
	`addR•lyE¼ÜFÜm©
(
c
,"Target instance„eplied withƒrror: %s",

5343 
”rbuf
+1);

5346 ià(!
cİy
) {

5348 
	`dbD–‘e
(
c
->
db
,
kv
[
j
]);

5349 
	`sigÇlModif›dKey
(
c
,c->
db
,
kv
[
j
]);

5350 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
kv
[
j
],
c
->
db
->
id
);

5351 
£rv”
.
dœty
++;

5354 
Ãw¬gv
[
d–_idx
++] = 
kv
[
j
];

5355 
	`šüRefCouÁ
(
kv
[
j
]);

5363 ià(!
”rÜ_äom_rg‘
 && 
sock‘_”rÜ
 && 
j
 =ğ0 && 
may_»Œy
 &&

5364 
”ºo
 !ğ
ETIMEDOUT
)

5366 
sock‘_”r
;

5372 ià(
sock‘_”rÜ
è
	`mig¿‹Clo£Sock‘
(
c
->
¬gv
[1],c->argv[2]);

5374 ià(!
cİy
) {

5378 ià(
d–_idx
 > 1) {

5379 
Ãw¬gv
[0] = 
	`ü—‹SŒšgObjeù
("DEL",3);

5381 
	`»¶aûCl›ÁCommªdVeùÜ
(
c
,
d–_idx
,
Ãw¬gv
);

5382 
¬gv_»wr™‹n
 = 1;

5385 
	`zä“
(
Ãw¬gv
);

5387 
Ãw¬gv
 = 
NULL
;

5393 ià(!
”rÜ_äom_rg‘
 && 
sock‘_”rÜ
) {

5394 
may_»Œy
 = 0;

5395 
sock‘_”r
;

5398 ià(!
”rÜ_äom_rg‘
) {

5405 
cs
->
Ï¡_dbid
 = 
dbid
;

5406 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

5412 
	`sdsä“
(
cmd
.
io
.
bufãr
.
±r
);

5413 
	`zä“
(
ov
); zä“(
kv
); zä“(
Ãw¬gv
);

5419 
sock‘_”r
:

5422 
	`sdsä“
(
cmd
.
io
.
bufãr
.
±r
);

5428 ià(!
¬gv_»wr™‹n
è
	`mig¿‹Clo£Sock‘
(
c
->
¬gv
[1],c->argv[2]);

5429 
	`zä“
(
Ãw¬gv
);

5430 
Ãw¬gv
 = 
NULL
;

5434 ià(
”ºo
 !ğ
ETIMEDOUT
 && 
may_»Œy
) {

5435 
may_»Œy
 = 0;

5436 
Œy_agaš
;

5440 
	`zä“
(
ov
); zä“(
kv
);

5441 
	`addR•lySds
(
c
,

5442 
	`sdsÿrštf
(
	`sd£m±y
(),

5444 
wr™e_”rÜ
 ? "writing" : "reading"));

5446 
	}
}

5456 
	$askšgCommªd
(
ş›Á
 *
c
) {

5457 ià(
£rv”
.
şu¡”_’abËd
 == 0) {

5458 
	`addR•lyE¼Ü
(
c
,"This instance has cluster support disabled");

5461 
c
->
æags
 |ğ
CLIENT_ASKING
;

5462 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

5463 
	}
}

5468 
	$»adÚlyCommªd
(
ş›Á
 *
c
) {

5469 ià(
£rv”
.
şu¡”_’abËd
 == 0) {

5470 
	`addR•lyE¼Ü
(
c
,"This instance has cluster support disabled");

5473 
c
->
æags
 |ğ
CLIENT_READONLY
;

5474 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

5475 
	}
}

5478 
	$»adwr™eCommªd
(
ş›Á
 *
c
) {

5479 
c
->
æags
 &ğ~
CLIENT_READONLY
;

5480 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

5481 
	}
}

5515 
şu¡”Node
 *
	$g‘NodeByQu”y
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
hash¦Ù
, *
”rÜ_code
) {

5516 
şu¡”Node
 *
n
 = 
NULL
;

5517 
robj
 *
fœ¡key
 = 
NULL
;

5518 
muÉË_keys
 = 0;

5519 
muÉiS‹
 *
ms
, 
_ms
;

5520 
muÉiCmd
 
mc
;

5521 
i
, 
¦Ù
 = 0, 
mig¿tšg_¦Ù
 = 0, 
impÜtšg_¦Ù
 = 0, 
missšg_keys
 = 0;

5524 ià(
£rv”
.
şu¡”_moduË_æags
 & 
CLUSTER_MODULE_FLAG_NO_REDIRECTION
)

5525  
my£lf
;

5528 ià(
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_NONE
;

5536 ià(
cmd
->
´oc
 =ğ
execCommªd
) {

5539 ià(!(
c
->
æags
 & 
CLIENT_MULTI
)è 
my£lf
;

5540 
ms
 = &
c
->
m¡©e
;

5545 
ms
 = &
_ms
;

5546 
_ms
.
commªds
 = &
mc
;

5547 
_ms
.
couÁ
 = 1;

5548 
mc
.
¬gv
 =‡rgv;

5549 
mc
.
¬gc
 =‡rgc;

5550 
mc
.
cmd
 = cmd;

5555 
i
 = 0; i < 
ms
->
couÁ
; i++) {

5556 
»disCommªd
 *
mcmd
;

5557 
robj
 **
m¬gv
;

5558 
m¬gc
, *
keyšdex
, 
numkeys
, 
j
;

5560 
mcmd
 = 
ms
->
commªds
[
i
].
cmd
;

5561 
m¬gc
 = 
ms
->
commªds
[
i
].
¬gc
;

5562 
m¬gv
 = 
ms
->
commªds
[
i
].
¬gv
;

5564 
keyšdex
 = 
	`g‘KeysFromCommªd
(
mcmd
,
m¬gv
,
m¬gc
,&
numkeys
);

5565 
j
 = 0; j < 
numkeys
; j++) {

5566 
robj
 *
thiskey
 = 
m¬gv
[
keyšdex
[
j
]];

5567 
this¦Ù
 = 
	`keyHashSlÙ
((*)
thiskey
->
±r
,

5568 
	`sd¦’
(
thiskey
->
±r
));

5570 ià(
fœ¡key
 =ğ
NULL
) {

5573 
fœ¡key
 = 
thiskey
;

5574 
¦Ù
 = 
this¦Ù
;

5575 
n
 = 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
];

5581 ià(
n
 =ğ
NULL
) {

5582 
	`g‘KeysF»eResuÉ
(
keyšdex
);

5583 ià(
”rÜ_code
)

5584 *
”rÜ_code
 = 
CLUSTER_REDIR_DOWN_UNBOUND
;

5585  
NULL
;

5593 ià(
n
 =ğ
my£lf
 &&

5594 
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
] !ğ
NULL
)

5596 
mig¿tšg_¦Ù
 = 1;

5597 } ià(
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] !ğ
NULL
) {

5598 
impÜtšg_¦Ù
 = 1;

5603 ià(!
	`equ®SŒšgObjeùs
(
fœ¡key
,
thiskey
)) {

5604 ià(
¦Ù
 !ğ
this¦Ù
) {

5606 
	`g‘KeysF»eResuÉ
(
keyšdex
);

5607 ià(
”rÜ_code
)

5608 *
”rÜ_code
 = 
CLUSTER_REDIR_CROSS_SLOT
;

5609  
NULL
;

5613 
muÉË_keys
 = 1;

5619 ià((
mig¿tšg_¦Ù
 || 
impÜtšg_¦Ù
) &&

5620 
	`lookupKeyR—d
(&
£rv”
.
db
[0],
thiskey
è=ğ
NULL
)

5622 
missšg_keys
++;

5625 
	`g‘KeysF»eResuÉ
(
keyšdex
);

5630 ià(
n
 =ğ
NULL
è 
my£lf
;

5634 ià(
£rv”
.
şu¡”
->
¡©e
 !ğ
CLUSTER_OK
) {

5635 ià(!
£rv”
.
şu¡”_®low_»ads_wh’_down
) {

5638 ià(
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_DOWN_STATE
;

5639  
NULL
;

5640 } ià(!(
cmd
->
æags
 & 
CMD_READONLY
è&& !(cmd->
´oc
 =ğ
ev®Commªd
)

5641 && !(
cmd
->
´oc
 =ğ
ev®ShaCommªd
))

5646 ià(
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_DOWN_RO_STATE
;

5647  
NULL
;

5656 ià(
hash¦Ù
è*hash¦Ù = 
¦Ù
;

5661 ià((
mig¿tšg_¦Ù
 || 
impÜtšg_¦Ù
è&& 
cmd
->
´oc
 =ğ
mig¿‹Commªd
)

5662  
my£lf
;

5666 ià(
mig¿tšg_¦Ù
 && 
missšg_keys
) {

5667 ià(
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_ASK
;

5668  
£rv”
.
şu¡”
->
mig¿tšg_¦Ùs_to
[
¦Ù
];

5675 ià(
impÜtšg_¦Ù
 &&

5676 (
c
->
æags
 & 
CLIENT_ASKING
 || 
cmd
->æag & 
CMD_ASKING
))

5678 ià(
muÉË_keys
 && 
missšg_keys
) {

5679 ià(
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_UNSTABLE
;

5680  
NULL
;

5682  
my£lf
;

5689 ià(
c
->
æags
 & 
CLIENT_READONLY
 &&

5690 (
cmd
->
æags
 & 
CMD_READONLY
 || cmd->
´oc
 =ğ
ev®Commªd
 ||

5691 
cmd
->
´oc
 =ğ
ev®ShaCommªd
) &&

5692 
	`nodeIsSÏve
(
my£lf
) &&

5693 
my£lf
->
¦aveof
 =ğ
n
)

5695  
my£lf
;

5700 ià(
n
 !ğ
my£lf
 && 
”rÜ_code
è*”rÜ_codğ
CLUSTER_REDIR_MOVED
;

5701  
n
;

5702 
	}
}

5711 
	$şu¡”RedœeùCl›Á
(
ş›Á
 *
c
, 
şu¡”Node
 *
n
, 
hash¦Ù
, 
”rÜ_code
) {

5712 ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_CROSS_SLOT
) {

5713 
	`addR•lySds
(
c
,
	`sd¢ew
("-CROSSSLOT Keys in„equest don't hashohe same slot\r\n"));

5714 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_UNSTABLE
) {

5718 
	`addR•lySds
(
c
,
	`sd¢ew
("-TRYAGAIN Multiple keys„equest during„ehashing of slot\r\n"));

5719 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_STATE
) {

5720 
	`addR•lySds
(
c
,
	`sd¢ew
("-CLUSTERDOWN The cluster is down\r\n"));

5721 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_RO_STATE
) {

5722 
	`addR•lySds
(
c
,
	`sd¢ew
("-CLUSTERDOWN The cluster is down‡nd only‡ccepts„ead commands\r\n"));

5723 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_UNBOUND
) {

5724 
	`addR•lySds
(
c
,
	`sd¢ew
("-CLUSTERDOWN Hash slot‚ot served\r\n"));

5725 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_MOVED
 ||

5726 
”rÜ_code
 =ğ
CLUSTER_REDIR_ASK
)

5728 
	`addR•lySds
(
c
,
	`sdsÿrštf
(
	`sd£m±y
(),

5730 (
”rÜ_code
 =ğ
CLUSTER_REDIR_ASK
) ? "ASK" : "MOVED",

5731 
hash¦Ù
,
n
->

,n->
pÜt
));

5733 
	`£rv”Pªic
("getNodeByQuery() unknownƒrror.");

5735 
	}
}

5748 
	$şu¡”RedœeùBlockedCl›ÁIfN“ded
(
ş›Á
 *
c
) {

5749 ià(
c
->
æags
 & 
CLIENT_BLOCKED
 &&

5750 (
c
->
bty³
 =ğ
BLOCKED_LIST
 ||

5751 
c
->
bty³
 =ğ
BLOCKED_ZSET
 ||

5752 
c
->
bty³
 =ğ
BLOCKED_STREAM
))

5754 
diùEÁry
 *
de
;

5755 
diùI‹¿tÜ
 *
di
;

5761 ià(
£rv”
.
şu¡”
->
¡©e
 =ğ
CLUSTER_FAIL
) {

5762 
	`şu¡”RedœeùCl›Á
(
c
,
NULL
,0,
CLUSTER_REDIR_DOWN_STATE
);

5767 
di
 = 
	`diùG‘I‹¿tÜ
(
c
->
bpİ
.
keys
);

5768 ià((
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

5769 
robj
 *
key
 = 
	`diùG‘Key
(
de
);

5770 
¦Ù
 = 
	`keyHashSlÙ
((*)
key
->
±r
, 
	`sd¦’
(key->ptr));

5771 
şu¡”Node
 *
node
 = 
£rv”
.
şu¡”
->
¦Ùs
[
¦Ù
];

5776 ià(
node
 !ğ
my£lf
 &&

5777 
£rv”
.
şu¡”
->
impÜtšg_¦Ùs_äom
[
¦Ù
] =ğ
NULL
)

5779 ià(
node
 =ğ
NULL
) {

5780 
	`şu¡”RedœeùCl›Á
(
c
,
NULL
,0,

5781 
CLUSTER_REDIR_DOWN_UNBOUND
);

5783 
	`şu¡”RedœeùCl›Á
(
c
,
node
,
¦Ù
,

5784 
CLUSTER_REDIR_MOVED
);

5786 
	`diùR–—£I‹¿tÜ
(
di
);

5790 
	`diùR–—£I‹¿tÜ
(
di
);

5793 
	}
}

	@cluster.h

1 #iâdeà
__CLUSTER_H


2 
	#__CLUSTER_H


	)

8 
	#CLUSTER_SLOTS
 16384

	)

9 
	#CLUSTER_OK
 0

	)

10 
	#CLUSTER_FAIL
 1

	)

11 
	#CLUSTER_NAMELEN
 40

	)

12 
	#CLUSTER_PORT_INCR
 10000

	)

16 
	#CLUSTER_FAIL_REPORT_VALIDITY_MULT
 2

	)

17 
	#CLUSTER_FAIL_UNDO_TIME_MULT
 2

	)

18 
	#CLUSTER_FAIL_UNDO_TIME_ADD
 10

	)

19 
	#CLUSTER_FAILOVER_DELAY
 5

	)

20 
	#CLUSTER_MF_TIMEOUT
 5000

	)

21 
	#CLUSTER_MF_PAUSE_MULT
 2

	)

22 
	#CLUSTER_SLAVE_MIGRATION_DELAY
 5000

	)

25 
	#CLUSTER_REDIR_NONE
 0

	)

26 
	#CLUSTER_REDIR_CROSS_SLOT
 1

	)

27 
	#CLUSTER_REDIR_UNSTABLE
 2

	)

28 
	#CLUSTER_REDIR_ASK
 3

	)

29 
	#CLUSTER_REDIR_MOVED
 4

	)

30 
	#CLUSTER_REDIR_DOWN_STATE
 5

	)

31 
	#CLUSTER_REDIR_DOWN_UNBOUND
 6

	)

32 
	#CLUSTER_REDIR_DOWN_RO_STATE
 7

	)

34 
	gşu¡”Node
;

37 
	sşu¡”Lšk
 {

38 
m¡ime_t
 
	mùime
;

39 
cÚÃùiÚ
 *
	mcÚn
;

40 
sds
 
	m¢dbuf
;

41 
sds
 
	mrcvbuf
;

42 
şu¡”Node
 *
	mnode
;

43 } 
	tşu¡”Lšk
;

46 
	#CLUSTER_NODE_MASTER
 1

	)

47 
	#CLUSTER_NODE_SLAVE
 2

	)

48 
	#CLUSTER_NODE_PFAIL
 4

	)

49 
	#CLUSTER_NODE_FAIL
 8

	)

50 
	#CLUSTER_NODE_MYSELF
 16

	)

51 
	#CLUSTER_NODE_HANDSHAKE
 32

	)

52 
	#CLUSTER_NODE_NOADDR
 64

	)

53 
	#CLUSTER_NODE_MEET
 128

	)

54 
	#CLUSTER_NODE_MIGRATE_TO
 256

	)

55 
	#CLUSTER_NODE_NOFAILOVER
 512

	)

56 
	#CLUSTER_NODE_NULL_NAME
 "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"

	)

58 
	#nodeIsMa¡”
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_MASTER
)

	)

59 
	#nodeIsSÏve
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_SLAVE
)

	)

60 
	#nodeInHªdshake
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_HANDSHAKE
)

	)

61 
	#nodeHasAddr
(
n
è(!(Ò)->
æags
 & 
CLUSTER_NODE_NOADDR
))

	)

62 
	#nodeW™houtAddr
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_NOADDR
)

	)

63 
	#nodeTimedOut
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_PFAIL
)

	)

64 
	#nodeFaed
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_FAIL
)

	)

65 
	#nodeCªtFaov”
(
n
è(Ò)->
æags
 & 
CLUSTER_NODE_NOFAILOVER
)

	)

68 
	#CLUSTER_CANT_FAILOVER_NONE
 0

	)

69 
	#CLUSTER_CANT_FAILOVER_DATA_AGE
 1

	)

70 
	#CLUSTER_CANT_FAILOVER_WAITING_DELAY
 2

	)

71 
	#CLUSTER_CANT_FAILOVER_EXPIRED
 3

	)

72 
	#CLUSTER_CANT_FAILOVER_WAITING_VOTES
 4

	)

73 
	#CLUSTER_CANT_FAILOVER_RELOG_PERIOD
 (60*5è

	)

76 
	#CLUSTER_TODO_HANDLE_FAILOVER
 (1<<0)

	)

77 
	#CLUSTER_TODO_UPDATE_STATE
 (1<<1)

	)

78 
	#CLUSTER_TODO_SAVE_CONFIG
 (1<<2)

	)

79 
	#CLUSTER_TODO_FSYNC_CONFIG
 (1<<3)

	)

87 
	#CLUSTERMSG_TYPE_PING
 0

	)

88 
	#CLUSTERMSG_TYPE_PONG
 1

	)

89 
	#CLUSTERMSG_TYPE_MEET
 2

	)

90 
	#CLUSTERMSG_TYPE_FAIL
 3

	)

91 
	#CLUSTERMSG_TYPE_PUBLISH
 4

	)

92 
	#CLUSTERMSG_TYPE_FAILOVER_AUTH_REQUEST
 5

	)

93 
	#CLUSTERMSG_TYPE_FAILOVER_AUTH_ACK
 6

	)

94 
	#CLUSTERMSG_TYPE_UPDATE
 7

	)

95 
	#CLUSTERMSG_TYPE_MFSTART
 8

	)

96 
	#CLUSTERMSG_TYPE_MODULE
 9

	)

97 
	#CLUSTERMSG_TYPE_COUNT
 10

	)

102 
	#CLUSTER_MODULE_FLAG_NONE
 0

	)

103 
	#CLUSTER_MODULE_FLAG_NO_FAILOVER
 (1<<1)

	)

104 
	#CLUSTER_MODULE_FLAG_NO_REDIRECTION
 (1<<2)

	)

107 
	sşu¡”NodeFaR•Üt
 {

108 
şu¡”Node
 *
	mnode
;

109 
m¡ime_t
 
	mtime
;

110 } 
	tşu¡”NodeFaR•Üt
;

112 
	sşu¡”Node
 {

113 
m¡ime_t
 
	mùime
;

114 
	mÇme
[
CLUSTER_NAMELEN
];

115 
	mæags
;

116 
ušt64_t
 
	mcÚfigEpoch
;

117 
	m¦Ùs
[
CLUSTER_SLOTS
/8];

118 
	mnum¦Ùs
;

119 
	mnum¦aves
;

120 
şu¡”Node
 **
	m¦aves
;

121 
şu¡”Node
 *
	m¦aveof
;

125 
m¡ime_t
 
	mpšg_£Á
;

126 
m¡ime_t
 
	mpÚg_»ûived
;

127 
m¡ime_t
 
	mç_time
;

128 
m¡ime_t
 
	mvÙed_time
;

129 
m¡ime_t
 
	m»¶_off£t_time
;

130 
m¡ime_t
 
	mÜphªed_time
;

131 
	m»¶_off£t
;

132 
	m
[
NET_IP_STR_LEN
];

133 
	mpÜt
;

134 
	mıÜt
;

135 
şu¡”Lšk
 *
	mlšk
;

136 
li¡
 *
	mç_»pÜts
;

137 } 
	tşu¡”Node
;

139 
	sşu¡”S‹
 {

140 
şu¡”Node
 *
	mmy£lf
;

141 
ušt64_t
 
	mcu¼’tEpoch
;

142 
	m¡©e
;

143 
	msize
;

144 
diù
 *
	mnodes
;

145 
diù
 *
	mnodes_bÏck_li¡
;

146 
şu¡”Node
 *
	mmig¿tšg_¦Ùs_to
[
CLUSTER_SLOTS
];

147 
şu¡”Node
 *
	mimpÜtšg_¦Ùs_äom
[
CLUSTER_SLOTS
];

148 
şu¡”Node
 *
	m¦Ùs
[
CLUSTER_SLOTS
];

149 
ušt64_t
 
	m¦Ùs_keys_couÁ
[
CLUSTER_SLOTS
];

150 
¿x
 *
	m¦Ùs_to_keys
;

152 
m¡ime_t
 
	mçov”_auth_time
;

153 
	mçov”_auth_couÁ
;

154 
	mçov”_auth_£Á
;

155 
	mçov”_auth_¿nk
;

156 
ušt64_t
 
	mçov”_auth_•och
;

157 
	mÿÁ_çov”_»asÚ
;

160 
m¡ime_t
 
	mmf_’d
;

163 
şu¡”Node
 *
	mmf_¦ave
;

165 
	mmf_ma¡”_off£t
;

167 
	mmf_ÿn_¡¬t
;

170 
ušt64_t
 
	mÏ¡VÙeEpoch
;

171 
	mtodo_befÜe_¦“p
;

173 
	m¡©s_bus_mes§ges_£Á
[
CLUSTERMSG_TYPE_COUNT
];

174 
	m¡©s_bus_mes§ges_»ûived
[
CLUSTERMSG_TYPE_COUNT
];

175 
	m¡©s_pç_nodes
;

177 } 
	tşu¡”S‹
;

185 
	mnod’ame
[
CLUSTER_NAMELEN
];

186 
ušt32_t
 
	mpšg_£Á
;

187 
ušt32_t
 
	mpÚg_»ûived
;

188 
	m
[
NET_IP_STR_LEN
];

189 
ušt16_t
 
	mpÜt
;

190 
ušt16_t
 
	mıÜt
;

191 
ušt16_t
 
	mæags
;

192 
ušt32_t
 
	mnÙu£d1
;

193 } 
	tşu¡”MsgD©aGoss
;

196 
	mnod’ame
[
CLUSTER_NAMELEN
];

197 } 
	tşu¡”MsgD©aFa
;

200 
ušt32_t
 
	mchªÃl_Ën
;

201 
ušt32_t
 
	mmes§ge_Ën
;

202 
	mbulk_d©a
[8];

203 } 
	tşu¡”MsgD©aPublish
;

206 
ušt64_t
 
	mcÚfigEpoch
;

207 
	mnod’ame
[
CLUSTER_NAMELEN
];

208 
	m¦Ùs
[
CLUSTER_SLOTS
/8];

209 } 
	tşu¡”MsgD©aUpd©e
;

212 
ušt64_t
 
	mmoduË_id
;

213 
ušt32_t
 
	mËn
;

214 
ušt8_t
 
	mty³
;

215 
	mbulk_d©a
[3];

216 } 
	tşu¡”MsgModuË
;

218 
	uşu¡”MsgD©a
 {

222 
şu¡”MsgD©aGoss
 
	mgoss
[1];

223 } 
	mpšg
;

227 
şu¡”MsgD©aFa
 
	mabout
;

228 } 
	mç
;

232 
şu¡”MsgD©aPublish
 
	mmsg
;

233 } 
	mpublish
;

237 
şu¡”MsgD©aUpd©e
 
	mnodecfg
;

238 } 
	mupd©e
;

242 
şu¡”MsgModuË
 
	mmsg
;

243 } 
	mmoduË
;

246 
	#CLUSTER_PROTO_VER
 1

	)

249 
	msig
[4];

250 
ušt32_t
 
	mtÙËn
;

251 
ušt16_t
 
	mv”
;

252 
ušt16_t
 
	mpÜt
;

253 
ušt16_t
 
	mty³
;

254 
ušt16_t
 
	mcouÁ
;

255 
ušt64_t
 
	mcu¼’tEpoch
;

256 
ušt64_t
 
	mcÚfigEpoch
;

259 
ušt64_t
 
	moff£t
;

261 
	m£nd”
[
CLUSTER_NAMELEN
];

262 
	mmy¦Ùs
[
CLUSTER_SLOTS
/8];

263 
	m¦aveof
[
CLUSTER_NAMELEN
];

264 
	mmy
[
NET_IP_STR_LEN
];

265 
	mnÙu£d1
[34];

266 
ušt16_t
 
	mıÜt
;

267 
ušt16_t
 
	mæags
;

268 
	m¡©e
;

269 
	mmæags
[3];

270 
şu¡”MsgD©a
 
	md©a
;

271 } 
	tşu¡”Msg
;

273 
	#CLUSTERMSG_MIN_LEN
 ((
şu¡”Msg
)-(
şu¡”MsgD©a
))

	)

277 
	#CLUSTERMSG_FLAG0_PAUSED
 (1<<0è

	)

278 
	#CLUSTERMSG_FLAG0_FORCEACK
 (1<<1è

	)

282 
şu¡”Node
 *
g‘NodeByQu”y
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
hash¦Ù
, *
ask
);

283 
şu¡”RedœeùBlockedCl›ÁIfN“ded
(
ş›Á
 *
c
);

284 
şu¡”RedœeùCl›Á
(
ş›Á
 *
c
, 
şu¡”Node
 *
n
, 
hash¦Ù
, 
”rÜ_code
);

	@config.c

31 
	~"£rv”.h
"

32 
	~"şu¡”.h
"

34 
	~<fú.h
>

35 
	~<sys/¡©.h
>

41 
	scÚfigEnum
 {

42 cÚ¡ *
	mÇme
;

43 cÚ¡ 
	mv®
;

44 } 
	tcÚfigEnum
;

46 
cÚfigEnum
 
	gmaxmemÜy_pŞicy_’um
[] = {

47 {"vŞ©e-Ìu", 
MAXMEMORY_VOLATILE_LRU
},

48 {"vŞ©e-lfu", 
MAXMEMORY_VOLATILE_LFU
},

49 {"vŞ©e-¿ndom",
MAXMEMORY_VOLATILE_RANDOM
},

50 {"vŞ©e-‰l",
MAXMEMORY_VOLATILE_TTL
},

51 {"®lkeys-Ìu",
MAXMEMORY_ALLKEYS_LRU
},

52 {"®lkeys-lfu",
MAXMEMORY_ALLKEYS_LFU
},

53 {"®lkeys-¿ndom",
MAXMEMORY_ALLKEYS_RANDOM
},

54 {"nÛviùiÚ",
MAXMEMORY_NO_EVICTION
},

55 {
NULL
, 0}

58 
cÚfigEnum
 
	gsy¦og_çc™y_’um
[] = {

59 {"u£r", 
LOG_USER
},

60 {"loÿl0", 
LOG_LOCAL0
},

61 {"loÿl1", 
LOG_LOCAL1
},

62 {"loÿl2", 
LOG_LOCAL2
},

63 {"loÿl3", 
LOG_LOCAL3
},

64 {"loÿl4", 
LOG_LOCAL4
},

65 {"loÿl5", 
LOG_LOCAL5
},

66 {"loÿl6", 
LOG_LOCAL6
},

67 {"loÿl7", 
LOG_LOCAL7
},

68 {
NULL
, 0}

71 
cÚfigEnum
 
	glogËv–_’um
[] = {

72 {"debug", 
LL_DEBUG
},

73 {"v”bo£", 
LL_VERBOSE
},

74 {"nÙiû", 
LL_NOTICE
},

75 {"w¬nšg", 
LL_WARNING
},

76 {
NULL
,0}

79 
cÚfigEnum
 
	gsu³rvi£d_mode_’um
[] = {

80 {"up¡¬t", 
SUPERVISED_UPSTART
},

81 {"sy¡emd", 
SUPERVISED_SYSTEMD
},

82 {"auto", 
SUPERVISED_AUTODETECT
},

83 {"no", 
SUPERVISED_NONE
},

84 {
NULL
, 0}

87 
cÚfigEnum
 
	gaof_fsync_’um
[] = {

88 {"ev”y£c", 
AOF_FSYNC_EVERYSEC
},

89 {"®ways", 
AOF_FSYNC_ALWAYS
},

90 {"no", 
AOF_FSYNC_NO
},

91 {
NULL
, 0}

94 
cÚfigEnum
 
	g»¶_diskËss_lßd_’um
[] = {

95 {"di§bËd", 
REPL_DISKLESS_LOAD_DISABLED
},

96 {"Ú-em±y-db", 
REPL_DISKLESS_LOAD_WHEN_DB_EMPTY
},

97 {"sw­db", 
REPL_DISKLESS_LOAD_SWAPDB
},

98 {
NULL
, 0}

102 
ş›ÁBufãrLim™sCÚfig
 
	gş›ÁBufãrLim™sDeçuÉs
[
CLIENT_TYPE_OBUF_COUNT
] = {

122 
	sboŞCÚfigD©a
 {

123 *
	mcÚfig
;

124 cÚ¡ 
	mdeçuÉ_v®ue
;

125 (*
	mis_v®id_â
)(
	mv®
, **
	m”r
);

126 (*
	mupd©e_â
)(
	mv®
, 
	m´ev
, **
	m”r
);

127 } 
	tboŞCÚfigD©a
;

129 
	s¡ršgCÚfigD©a
 {

130 **
	mcÚfig
;

131 cÚ¡ *
	mdeçuÉ_v®ue
;

132 (*
	mis_v®id_â
)(* 
	mv®
, **
	m”r
);

133 (*
	mupd©e_â
)(* 
	mv®
, * 
	m´ev
, **
	m”r
);

134 
	mcÚv”t_em±y_to_nuÎ
;

136 } 
	t¡ršgCÚfigD©a
;

138 
	s’umCÚfigD©a
 {

139 *
	mcÚfig
;

140 
cÚfigEnum
 *
	m’um_v®ue
;

141 cÚ¡ 
	mdeçuÉ_v®ue
;

142 (*
	mis_v®id_â
)(
	mv®
, **
	m”r
);

143 (*
	mupd©e_â
)(
	mv®
, 
	m´ev
, **
	m”r
);

144 } 
	t’umCÚfigD©a
;

146 
	enum”icTy³
 {

147 
	mNUMERIC_TYPE_INT
,

148 
	mNUMERIC_TYPE_UINT
,

149 
	mNUMERIC_TYPE_LONG
,

150 
	mNUMERIC_TYPE_ULONG
,

151 
	mNUMERIC_TYPE_LONG_LONG
,

152 
	mNUMERIC_TYPE_ULONG_LONG
,

153 
	mNUMERIC_TYPE_SIZE_T
,

154 
	mNUMERIC_TYPE_SSIZE_T
,

155 
	mNUMERIC_TYPE_OFF_T
,

156 
	mNUMERIC_TYPE_TIME_T
,

157 } 
	tnum”icTy³
;

159 
	snum”icCÚfigD©a
 {

161 *
	mi
;

162 *
	mui
;

163 *
	ml
;

164 *
	mul
;

165 *
	mÎ
;

166 *
	muÎ
;

167 
size_t
 *
	m¡
;

168 
ssize_t
 *
	ms¡
;

169 
off_t
 *
	mÙ
;

170 
time_t
 *
	m‰
;

171 } 
	mcÚfig
;

172 
	mis_memÜy
;

173 
num”icTy³
 
	mnum”ic_ty³
;

174 
	mlow”_bound
;

175 
	muµ”_bound
;

176 cÚ¡ 
	mdeçuÉ_v®ue
;

177 (*
	mis_v®id_â
)(
	mv®
, **
	m”r
);

178 (*
	mupd©e_â
)(
	mv®
, 
	m´ev
, **
	m”r
);

179 } 
	tnum”icCÚfigD©a
;

181 
	uty³D©a
 {

182 
boŞCÚfigD©a
 
	mye¢o
;

183 
¡ršgCÚfigD©a
 
	m¡ršg
;

184 
’umCÚfigD©a
 
	m’umd
;

185 
num”icCÚfigD©a
 
	mnum”ic
;

186 } 
	tty³D©a
;

188 
	sty³IÁ”çû
 {

190 (*
	mš™
)(
ty³D©a
 
	md©a
);

192 (*
	mlßd
)(
ty³D©a
 
	md©a
, 
sds
 *
	m¬gc
, 
	m¬gv
, **
	m”r
);

195 (*
	m£t
)(
ty³D©a
 
	md©a
, 
sds
 
	mv®ue
, 
	mupd©e
, **
	m”r
);

197 (*
	mg‘
)(
ş›Á
 *
	mc
, 
ty³D©a
 
	md©a
);

199 (*
	m»wr™e
)(
ty³D©a
 
	md©a
, cÚ¡ *
	mÇme
, 
»wr™eCÚfigS‹
 *
	m¡©e
);

200 } 
	tty³IÁ”çû
;

202 
	s¡ªd¬dCÚfig
 {

203 cÚ¡ *
	mÇme
;

204 cÚ¡ *
	m®Ÿs
;

205 cÚ¡ 
	mmodifŸbË
;

206 
ty³IÁ”çû
 
	mš‹rçû
;

207 
ty³D©a
 
	md©a
;

208 } 
	t¡ªd¬dCÚfig
;

210 
¡ªd¬dCÚfig
 
	gcÚfigs
[];

217 
	$cÚfigEnumG‘V®ue
(
cÚfigEnum
 *
û
, *
Çme
) {

218 
û
->
Çme
 !ğ
NULL
) {

219 ià(!
	`¡rÿ£cmp
(
û
->
Çme
,Çme)è ce->
v®
;

220 
û
++;

222  
INT_MIN
;

223 
	}
}

226 cÚ¡ *
	$cÚfigEnumG‘Name
(
cÚfigEnum
 *
û
, 
v®
) {

227 
û
->
Çme
 !ğ
NULL
) {

228 ià(
û
->
v®
 =ğv®è ce->
Çme
;

229 
û
++;

231  
NULL
;

232 
	}
}

236 cÚ¡ *
	$cÚfigEnumG‘NameOrUnknown
(
cÚfigEnum
 *
û
, 
v®
) {

237 cÚ¡ *
Çme
 = 
	`cÚfigEnumG‘Name
(
û
,
v®
);

238  
Çme
 ?‚ame : "unknown";

239 
	}
}

242 cÚ¡ *
	$eviùPŞicyToSŒšg
() {

243  
	`cÚfigEnumG‘NameOrUnknown
(
maxmemÜy_pŞicy_’um
,
£rv”
.
maxmemÜy_pŞicy
);

244 
	}
}

250 
	$ye¢Ùoi
(*
s
) {

251 ià(!
	`¡rÿ£cmp
(
s
,"yes"))  1;

252 ià(!
	`¡rÿ£cmp
(
s
,"no"))  0;

254 
	}
}

256 
	$­³ndS”v”SaveP¬ams
(
time_t
 
£cÚds
, 
chªges
) {

257 
£rv”
.
§v•¬ams
 = 
	`z»®loc
(£rv”.§v•¬ams,(
§v•¬am
)*(£rv”.
§v•¬am¦’
+1));

258 
£rv”
.
§v•¬ams
[£rv”.
§v•¬am¦’
].
£cÚds
 = seconds;

259 
£rv”
.
§v•¬ams
[£rv”.
§v•¬am¦’
].
chªges
 = changes;

260 
£rv”
.
§v•¬am¦’
++;

261 
	}
}

263 
	$»£tS”v”SaveP¬ams
() {

264 
	`zä“
(
£rv”
.
§v•¬ams
);

265 
£rv”
.
§v•¬ams
 = 
NULL
;

266 
£rv”
.
§v•¬am¦’
 = 0;

267 
	}
}

269 
	$queueLßdModuË
(
sds
 
·th
, sd *
¬gv
, 
¬gc
) {

270 
i
;

271 
moduËLßdQueueEÁry
 *
lßdmod
;

273 
lßdmod
 = 
	`zm®loc
((
moduËLßdQueueEÁry
));

274 
lßdmod
->
¬gv
 = 
	`zm®loc
((
robj
*)*
¬gc
);

275 
lßdmod
->
·th
 = 
	`sd¢ew
(path);

276 
lßdmod
->
¬gc
 =‡rgc;

277 
i
 = 0; i < 
¬gc
; i++) {

278 
lßdmod
->
¬gv
[
i
] = 
	`ü—‹RawSŒšgObjeù
×rgv[i],
	`sd¦’
(argv[i]));

280 
	`li¡AddNodeTa
(
£rv”
.
lßdmoduË_queue
,
lßdmod
);

281 
	}
}

283 
	$š™CÚfigV®ues
() {

284 
¡ªd¬dCÚfig
 *
cÚfig
 = 
cÚfigs
; cÚfig->
Çme
 !ğ
NULL
; config++) {

285 
cÚfig
->
š‹rçû
.
	`š™
(cÚfig->
d©a
);

287 
	}
}

289 
	$lßdS”v”CÚfigFromSŒšg
(*
cÚfig
) {

290 *
”r
 = 
NULL
;

291 
lš’um
 = 0, 
tÙlšes
, 
i
;

292 
¦aveof_lš’um
 = 0;

293 
sds
 *
lšes
;

295 
lšes
 = 
	`sds¥l™Ën
(
cÚfig
,
	`¡¾’
(cÚfig),"\n",1,&
tÙlšes
);

297 
i
 = 0; i < 
tÙlšes
; i++) {

298 
sds
 *
¬gv
;

299 
¬gc
;

301 
lš’um
 = 
i
+1;

302 
lšes
[
i
] = 
	`sd¡rim
(lines[i]," \t\r\n");

305 ià(
lšes
[
i
][0] == '#' ||†ines[i][0] == '\0') ;

308 
¬gv
 = 
	`sds¥l™¬gs
(
lšes
[
i
],&
¬gc
);

309 ià(
¬gv
 =ğ
NULL
) {

310 
”r
 = "Unbalanced quotes in configuration†ine";

311 
lßd”r
;

315 ià(
¬gc
 == 0) {

316 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

319 
	`sd¡Şow”
(
¬gv
[0]);

322 
m©ch
 = 0;

323 
¡ªd¬dCÚfig
 *
cÚfig
 = 
cÚfigs
; cÚfig->
Çme
 !ğ
NULL
; config++) {

324 ià((!
	`¡rÿ£cmp
(
¬gv
[0],
cÚfig
->
Çme
) ||

325 (
cÚfig
->
®Ÿs
 && !
	`¡rÿ£cmp
(
¬gv
[0],config->alias))))

327 ià(
¬gc
 != 2) {

328 
”r
 = "wrong‚umber of‡rguments";

329 
lßd”r
;

331 ià(!
cÚfig
->
š‹rçû
.
	`£t
(cÚfig->
d©a
, 
¬gv
[1], 0, &
”r
)) {

332 
lßd”r
;

335 
m©ch
 = 1;

340 ià(
m©ch
) {

341 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

346 ià(!
	`¡rÿ£cmp
(
¬gv
[0],"bšd"è&& 
¬gc
 >= 2) {

347 
j
, 
add»s£s
 = 
¬gc
-1;

349 ià(
add»s£s
 > 
CONFIG_BINDADDR_MAX
) {

350 
”r
 = "ToØmªy bšd‡dd»s£ ¥ecif›d"; 
lßd”r
;

353 
j
 = 0; j < 
£rv”
.
bšdaddr_couÁ
; j++) {

354 
	`zä“
(
£rv”
.
bšdaddr
[
j
]);

356 
j
 = 0; j < 
add»s£s
; j++)

357 
£rv”
.
bšdaddr
[
j
] = 
	`z¡rdup
(
¬gv
[j+1]);

358 
£rv”
.
bšdaddr_couÁ
 = 
add»s£s
;

359 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"unixsock‘³rm"è&& 
¬gc
 == 2) {

360 
”ºo
 = 0;

361 
£rv”
.
unixsock‘³rm
 = (
mode_t
)
	`¡¹Ş
(
¬gv
[1], 
NULL
, 8);

362 ià(
”ºo
 || 
£rv”
.
unixsock‘³rm
 > 0777) {

363 
”r
 = "Inv®id sock‘ f³rmissiÚs"; 
lßd”r
;

365 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"save")) {

366 ià(
¬gc
 == 3) {

367 
£cÚds
 = 
	`©oi
(
¬gv
[1]);

368 
chªges
 = 
	`©oi
(
¬gv
[2]);

369 ià(
£cÚds
 < 1 || 
chªges
 < 0) {

370 
”r
 = "Inv®id sav·¿m‘”s"; 
lßd”r
;

372 
	`­³ndS”v”SaveP¬ams
(
£cÚds
,
chªges
);

373 } ià(
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(
¬gv
[1],"")) {

374 
	`»£tS”v”SaveP¬ams
();

376 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"dœ"è&& 
¬gc
 == 2) {

377 ià(
	`chdœ
(
¬gv
[1]) == -1) {

378 
	`£rv”Log
(
LL_WARNING
,"Can't chdiro '%s': %s",

379 
¬gv
[1], 
	`¡»¼Ü
(
”ºo
));

380 
	`ex™
(1);

382 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"logfe"è&& 
¬gc
 == 2) {

383 
FILE
 *
logå
;

385 
	`zä“
(
£rv”
.
logfe
);

386 
£rv”
.
logfe
 = 
	`z¡rdup
(
¬gv
[1]);

387 ià(
£rv”
.
logfe
[0] != '\0') {

390 
logå
 = 
	`fİ’
(
£rv”
.
logfe
,"a");

391 ià(
logå
 =ğ
NULL
) {

392 
”r
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

393 "Cª'ˆİ’hlog fe: %s", 
	`¡»¼Ü
(
”ºo
));

394 
lßd”r
;

396 
	`fşo£
(
logå
);

398 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"šşude"è&& 
¬gc
 == 2) {

399 
	`lßdS”v”CÚfig
(
¬gv
[1],
NULL
);

400 } ià((!
	`¡rÿ£cmp
(
¬gv
[0],"ş›Á-qu”y-bufãr-lim™")è&& 
¬gc
 == 2) {

401 
£rv”
.
ş›Á_max_qu”ybuf_Ën
 = 
	`memtŞl
(
¬gv
[1],
NULL
);

402 } ià((!
	`¡rÿ£cmp
(
¬gv
[0],"slaveof") ||

403 !
	`¡rÿ£cmp
(
¬gv
[0],"»¶iÿof")è&& 
¬gc
 == 3) {

404 
¦aveof_lš’um
 = 
lš’um
;

405 
£rv”
.
ma¡”ho¡
 = 
	`sd¢ew
(
¬gv
[1]);

406 
£rv”
.
ma¡”pÜt
 = 
	`©oi
(
¬gv
[2]);

407 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

408 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"»quœ•ass"è&& 
¬gc
 == 2) {

409 ià(
	`¡¾’
(
¬gv
[1]è> 
CONFIG_AUTHPASS_MAX_LEN
) {

410 
”r
 = "Password is†ongerhan CONFIG_AUTHPASS_MAX_LEN";

411 
lßd”r
;

417 
	`ACLS‘U£r
(
DeçuÉU£r
,"resetpass",-1);

418 
sds
 
aşİ
 = 
	`sdsÿrštf
(
	`sd£m±y
(),">%s",
¬gv
[1]);

419 
	`ACLS‘U£r
(
DeçuÉU£r
,
aşİ
,
	`sd¦’
(aclop));

420 
	`sdsä“
(
aşİ
);

421 
	`sdsä“
(
£rv”
.
»quœ•ass
);

422 
£rv”
.
»quœ•ass
 = 
	`sd¢ew
(
¬gv
[1]);

423 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"li¡-max-zli¡-’Œ›s"è&& 
¬gc
 == 2){

425 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"li¡-max-zli¡-v®ue"è&& 
¬gc
 == 2) {

427 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"»Çme-commªd"è&& 
¬gc
 == 3) {

428 
»disCommªd
 *
cmd
 = 
	`lookupCommªd
(
¬gv
[1]);

429 
»tv®
;

431 ià(!
cmd
) {

432 
”r
 = "No such command in„ename-command";

433 
lßd”r
;

438 
»tv®
 = 
	`diùD–‘e
(
£rv”
.
commªds
, 
¬gv
[1]);

439 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

442 ià(
	`sd¦’
(
¬gv
[2]) != 0) {

443 
sds
 
cİy
 = 
	`sdsdup
(
¬gv
[2]);

445 
»tv®
 = 
	`diùAdd
(
£rv”
.
commªds
, 
cİy
, 
cmd
);

446 ià(
»tv®
 !ğ
DICT_OK
) {

447 
	`sdsä“
(
cİy
);

448 
”r
 = "T¬g‘ commªd‚am®»adyƒxi¡s"; 
lßd”r
;

451 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"şu¡”-cÚfig-fe"è&& 
¬gc
 == 2) {

452 
	`zä“
(
£rv”
.
şu¡”_cÚfigfe
);

453 
£rv”
.
şu¡”_cÚfigfe
 = 
	`z¡rdup
(
¬gv
[1]);

454 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"client-output-buffer-limit") &&

455 
¬gc
 == 5)

457 
şass
 = 
	`g‘Cl›ÁTy³ByName
(
¬gv
[1]);

458 
h¬d
, 
soá
;

459 
soá_£cÚds
;

461 ià(
şass
 =ğ-1 || cÏs =ğ
CLIENT_TYPE_MASTER
) {

462 
”r
 = "Unrecognized client†imit class:he user specified "

464 
lßd”r
;

466 
h¬d
 = 
	`memtŞl
(
¬gv
[2],
NULL
);

467 
soá
 = 
	`memtŞl
(
¬gv
[3],
NULL
);

468 
soá_£cÚds
 = 
	`©oi
(
¬gv
[4]);

469 ià(
soá_£cÚds
 < 0) {

470 
”r
 = "Negative‚umber of seconds in soft†imit is invalid";

471 
lßd”r
;

473 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
h¬d_lim™_by‹s
 = 
h¬d
;

474 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_by‹s
 = 
soá
;

475 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_£cÚds
 = 
soá_£cÚds
;

476 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"nÙify-key¥aû-ev’ts"è&& 
¬gc
 == 2) {

477 
æags
 = 
	`key¥aûEv’tsSŒšgToFÏgs
(
¬gv
[1]);

479 ià(
æags
 == -1) {

480 
”r
 = "Invalidƒvent class character. Use 'g$lshzxeA'.";

481 
lßd”r
;

483 
£rv”
.
nÙify_key¥aû_ev’ts
 = 
æags
;

484 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"u£r"è&& 
¬gc
 >= 2) {

485 
¬gc_”r
;

486 ià(
	`ACLAµ’dU£rFÜLßdšg
(
¬gv
,
¬gc
,&
¬gc_”r
è=ğ
C_ERR
) {

487 
buf
[1024];

488 *
”rmsg
 = 
	`ACLS‘U£rSŒšgE¼Ü
();

489 
	`¢´štf
(
buf
,(buf),"Error in user declaration '%s': %s",

490 
¬gv
[
¬gc_”r
],
”rmsg
);

491 
”r
 = 
buf
;

492 
lßd”r
;

494 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"lßdmoduË"è&& 
¬gc
 >= 2) {

495 
	`queueLßdModuË
(
¬gv
[1],&¬gv[2],
¬gc
-2);

496 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"sentinel")) {

499 ià(
¬gc
 != 1) {

500 ià(!
£rv”
.
£Áš–_mode
) {

501 
”r
 = "sentinel directive while‚ot in sentinel mode";

502 
lßd”r
;

504 
”r
 = 
	`£Áš–HªdËCÚfigu¿tiÚ
(
¬gv
+1,
¬gc
-1);

505 ià(
”r
è
lßd”r
;

508 
”r
 = "Bad dœeùivÜ wrÚg‚umb” oà¬gum’ts"; 
lßd”r
;

510 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

514 ià(
£rv”
.
şu¡”_’abËd
 && s”v”.
ma¡”ho¡
) {

515 
lš’um
 = 
¦aveof_lš’um
;

516 
i
 = 
lš’um
-1;

517 
”r
 = "replicaof directive‚ot‡llowed in cluster mode";

518 
lßd”r
;

521 
	`sdsä“¥l™»s
(
lšes
,
tÙlšes
);

524 
lßd”r
:

525 
	`årštf
(
¡d”r
, "\n*** FATAL CONFIG FILE ERROR (Redis %s) ***\n",

526 
REDIS_VERSION
);

527 
	`årštf
(
¡d”r
, "R—dšghcÚfigu¿tiÚ fe,‡ˆlš%d\n", 
lš’um
);

528 
	`årštf
(
¡d”r
, ">>> '%s'\n", 
lšes
[
i
]);

529 
	`årštf
(
¡d”r
, "%s\n", 
”r
);

530 
	`ex™
(1);

531 
	}
}

540 
	$lßdS”v”CÚfig
(*
f’ame
, *
İtiÚs
) {

541 
sds
 
cÚfig
 = 
	`sd£m±y
();

542 
buf
[
CONFIG_MAX_LINE
+1];

545 ià(
f’ame
) {

546 
FILE
 *
å
;

548 ià(
f’ame
[0] == '-' && filename[1] == '\0') {

549 
å
 = 
¡dš
;

551 ià((
å
 = 
	`fİ’
(
f’ame
,"r")è=ğ
NULL
) {

552 
	`£rv”Log
(
LL_WARNING
,

553 "F©®ƒ¼Ü, cª'ˆİ’ cÚfig f'%s'", 
f’ame
);

554 
	`ex™
(1);

557 
	`fg‘s
(
buf
,
CONFIG_MAX_LINE
+1,
å
è!ğ
NULL
)

558 
cÚfig
 = 
	`sdsÿt
(cÚfig,
buf
);

559 ià(
å
 !ğ
¡dš
è
	`fşo£
(fp);

562 ià(
İtiÚs
) {

563 
cÚfig
 = 
	`sdsÿt
(config,"\n");

564 
cÚfig
 = 
	`sdsÿt
(cÚfig,
İtiÚs
);

566 
	`lßdS”v”CÚfigFromSŒšg
(
cÚfig
);

567 
	`sdsä“
(
cÚfig
);

568 
	}
}

574 
	#cÚfig_£t_boŞ_f›ld
(
_Çme
,
_v¬
) \

575 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme
)) { \

576 
yn
 = 
	`ye¢Ùoi
(
o
->
±r
); \

577 ià(
yn
 =ğ-1è
badfmt
; \

578 
_v¬
 = 
yn
;

	)

580 
	#cÚfig_£t_num”iÿl_f›ld
(
_Çme
,
_v¬
,
mš
,
max
) \

581 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme
)) { \

582 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
Î
è=ğ
C_ERR
è
badfmt
; \

583 ià(
mš
 !ğ
LLONG_MIN
 && 
Î
 < mšè
badfmt
; \

584 ià(
max
 !ğ
LLONG_MAX
 && 
Î
 > maxè
badfmt
; \

585 
_v¬
 = 
Î
;

	)

587 
	#cÚfig_£t_memÜy_f›ld
(
_Çme
,
_v¬
) \

588 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme
)) { \

589 
Î
 = 
	`memtŞl
(
o
->
±r
,&
”r
); \

590 ià(
”r
 || 
Î
 < 0è
badfmt
; \

591 
_v¬
 = 
Î
;

	)

593 
	#cÚfig_£t_¥ecŸl_f›ld
(
_Çme
) \

594 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme
)è{

	)

596 
	#cÚfig_£t_¥ecŸl_f›ld_w™h_®Ÿs
(
_Çme1
,
_Çme2
) \

597 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme1
) || \

598 !
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,
_Çme2
)è{

	)

600 
	#cÚfig_£t_–£
 } 

	)

602 
	$cÚfigS‘Commªd
(
ş›Á
 *
c
) {

603 
robj
 *
o
;

604 
Î
;

605 
”r
;

606 *
”r¡r
 = 
NULL
;

607 
	`£rv”As£¹W™hInfo
(
c
,c->
¬gv
[2],
	`sdsEncodedObjeù
(c->argv[2]));

608 
	`£rv”As£¹W™hInfo
(
c
,c->
¬gv
[3],
	`sdsEncodedObjeù
(c->argv[3]));

609 
o
 = 
c
->
¬gv
[3];

612 
¡ªd¬dCÚfig
 *
cÚfig
 = 
cÚfigs
; cÚfig->
Çme
 !ğ
NULL
; config++) {

613 if(
cÚfig
->
modifŸbË
 && (!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,cÚfig->
Çme
) ||

614 (
cÚfig
->
®Ÿs
 && !
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,config->alias))))

616 ià(!
cÚfig
->
š‹rçû
.
	`£t
(cÚfig->
d©a
,
o
->
±r
,1,&
”r¡r
)) {

617 
badfmt
;

619 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

627 
	`cÚfig_£t_¥ecŸl_f›ld
("requirepass") {

628 ià(
	`sd¦’
(
o
->
±r
è> 
CONFIG_AUTHPASS_MAX_LEN
è
badfmt
;

633 
	`ACLS‘U£r
(
DeçuÉU£r
,"resetpass",-1);

634 
sds
 
aşİ
 = 
	`sdsÿrštf
(
	`sd£m±y
(),">%s",(*)
o
->
±r
);

635 
	`ACLS‘U£r
(
DeçuÉU£r
,
aşİ
,
	`sd¦’
(aclop));

636 
	`sdsä“
(
aşİ
);

637 
	`sdsä“
(
£rv”
.
»quœ•ass
);

638 
£rv”
.
»quœ•ass
 = 
	`sd¢ew
(
o
->
±r
);

639 } 
	`cÚfig_£t_¥ecŸl_f›ld
("save") {

640 
vËn
, 
j
;

641 
sds
 *
v
 = 
	`sds¥l™Ën
(
o
->
±r
,
	`sd¦’
(o->±r)," ",1,&
vËn
);

646 ià(
vËn
 & 1) {

647 
	`sdsä“¥l™»s
(
v
,
vËn
);

648 
badfmt
;

650 
j
 = 0; j < 
vËn
; j++) {

651 *
•Œ
;

652 
v®
;

654 
v®
 = 
	`¡¹Şl
(
v
[
j
], &
•Œ
, 10);

655 ià(
•Œ
[0] != '\0' ||

656 ((
j
 & 1è=ğ0 && 
v®
 < 1) ||

657 ((
j
 & 1è=ğ1 && 
v®
 < 0)) {

658 
	`sdsä“¥l™»s
(
v
,
vËn
);

659 
badfmt
;

663 
	`»£tS”v”SaveP¬ams
();

664 
j
 = 0; j < 
vËn
; j += 2) {

665 
time_t
 
£cÚds
;

666 
chªges
;

668 
£cÚds
 = 
	`¡¹Şl
(
v
[
j
],
NULL
,10);

669 
chªges
 = 
	`¡¹Şl
(
v
[
j
+1],
NULL
,10);

670 
	`­³ndS”v”SaveP¬ams
(
£cÚds
, 
chªges
);

672 
	`sdsä“¥l™»s
(
v
,
vËn
);

673 } 
	`cÚfig_£t_¥ecŸl_f›ld
("dir") {

674 ià(
	`chdœ
((*)
o
->
±r
) == -1) {

675 
	`addR•lyE¼ÜFÜm©
(
c
,"Chªgšg dœeùÜy: %s", 
	`¡»¼Ü
(
”ºo
));

678 } 
	`cÚfig_£t_¥ecŸl_f›ld
("client-output-buffer-limit") {

679 
vËn
, 
j
;

680 
sds
 *
v
 = 
	`sds¥l™Ën
(
o
->
±r
,
	`sd¦’
(o->±r)," ",1,&
vËn
);

683 ià(
vËn
 % 4) {

684 
	`sdsä“¥l™»s
(
v
,
vËn
);

685 
badfmt
;

691 
j
 = 0; j < 
vËn
; j++) {

692 
v®
;

694 ià((
j
 % 4) == 0) {

695 
şass
 = 
	`g‘Cl›ÁTy³ByName
(
v
[
j
]);

696 ià(
şass
 =ğ-1 || cÏs =ğ
CLIENT_TYPE_MASTER
) {

697 
	`sdsä“¥l™»s
(
v
,
vËn
);

698 
badfmt
;

701 
v®
 = 
	`memtŞl
(
v
[
j
], &
”r
);

702 ià(
”r
 || 
v®
 < 0) {

703 
	`sdsä“¥l™»s
(
v
,
vËn
);

704 
badfmt
;

709 
j
 = 0; j < 
vËn
; j += 4) {

710 
şass
;

711 
h¬d
, 
soá
;

712 
soá_£cÚds
;

714 
şass
 = 
	`g‘Cl›ÁTy³ByName
(
v
[
j
]);

715 
h¬d
 = 
	`memtŞl
(
v
[
j
+1],
NULL
);

716 
soá
 = 
	`memtŞl
(
v
[
j
+2],
NULL
);

717 
soá_£cÚds
 = 
	`¡¹Şl
(
v
[
j
+3],
NULL
,10);

719 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
h¬d_lim™_by‹s
 = 
h¬d
;

720 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_by‹s
 = 
soá
;

721 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_£cÚds
 = 
soá_£cÚds
;

723 
	`sdsä“¥l™»s
(
v
,
vËn
);

724 } 
	`cÚfig_£t_¥ecŸl_f›ld
("notify-keyspace-events") {

725 
æags
 = 
	`key¥aûEv’tsSŒšgToFÏgs
(
o
->
±r
);

727 ià(
æags
 =ğ-1è
badfmt
;

728 
£rv”
.
nÙify_key¥aû_ev’ts
 = 
æags
;

731 } 
	`cÚfig_£t_num”iÿl_f›ld
(

732 "w©chdog-³riod",
Î
,0,
INT_MAX
) {

733 ià(
Î
)

734 
	`’abËW©chdog
(
Î
);

736 
	`di§bËW©chdog
();

739 } 
	`cÚfig_£t_memÜy_f›ld
(

740 "ş›Á-qu”y-bufãr-lim™",
£rv”
.
ş›Á_max_qu”ybuf_Ën
) {

742 } 
cÚfig_£t_–£
 {

743 
	`addR•lyE¼ÜFÜm©
(
c
,"Unsupported CONFIG…arameter: %s",

744 (*)
c
->
¬gv
[2]->
±r
);

749 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

752 
badfmt
:

753 ià(
”r¡r
) {

754 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid‡rgument '%s' for CONFIG SET '%s' - %s",

755 (*)
o
->
±r
,

756 (*)
c
->
¬gv
[2]->
±r
,

757 
”r¡r
);

759 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid‡rgument '%s' for CONFIG SET '%s'",

760 (*)
o
->
±r
,

761 (*)
c
->
¬gv
[2]->
±r
);

769 
	#cÚfig_g‘_¡ršg_f›ld
(
_Çme
,
_v¬
) do { \

770 ià(
	`¡ršgm©ch
(
·‰”n
,
_Çme
,1)) { \

771 
	`addR•lyBulkCSŒšg
(
c
,
_Çme
); \

772 
	`addR•lyBulkCSŒšg
(
c
,
_v¬
 ? _var : ""); \

773 
m©ches
++; \

775 } 0);

	)

777 
	#cÚfig_g‘_boŞ_f›ld
(
_Çme
,
_v¬
) do { \

778 ià(
	`¡ršgm©ch
(
·‰”n
,
_Çme
,1)) { \

779 
	`addR•lyBulkCSŒšg
(
c
,
_Çme
); \

780 
	`addR•lyBulkCSŒšg
(
c
,
_v¬
 ? "yes" : "no"); \

781 
m©ches
++; \

783 } 0);

	)

785 
	#cÚfig_g‘_num”iÿl_f›ld
(
_Çme
,
_v¬
) do { \

786 ià(
	`¡ršgm©ch
(
·‰”n
,
_Çme
,1)) { \

787 
	`Î2¡ršg
(
buf
,(buf),
_v¬
); \

788 
	`addR•lyBulkCSŒšg
(
c
,
_Çme
); \

789 
	`addR•lyBulkCSŒšg
(
c
,
buf
); \

790 
m©ches
++; \

792 } 0);

	)

795 
	`cÚfigG‘Commªd
(
ş›Á
 *
c
) {

796 
robj
 *
o
 = 
c
->
¬gv
[2];

797 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

798 *
·‰”n
 = 
o
->
±r
;

799 
buf
[128];

800 
m©ches
 = 0;

801 
	`£rv”As£¹W™hInfo
(
c
,
o
,
	`sdsEncodedObjeù
(o));

804 
¡ªd¬dCÚfig
 *
cÚfig
 = 
cÚfigs
; cÚfig->
Çme
 !ğ
NULL
; config++) {

805 ià(
	`¡ršgm©ch
(
·‰”n
,
cÚfig
->
Çme
,1)) {

806 
	`addR•lyBulkCSŒšg
(
c
,
cÚfig
->
Çme
);

807 
cÚfig
->
š‹rçû
.
	`g‘
(
c
,cÚfig->
d©a
);

808 
m©ches
++;

810 ià(
cÚfig
->
®Ÿs
 && 
	`¡ršgm©ch
(
·‰”n
,config->alias,1)) {

811 
	`addR•lyBulkCSŒšg
(
c
,
cÚfig
->
®Ÿs
);

812 
cÚfig
->
š‹rçû
.
	`g‘
(
c
,cÚfig->
d©a
);

813 
m©ches
++;

818 
	`cÚfig_g‘_¡ršg_f›ld
("logfe",
£rv”
.
logfe
);

821 
	`cÚfig_g‘_num”iÿl_f›ld
("ş›Á-qu”y-bufãr-lim™",
£rv”
.
ş›Á_max_qu”ybuf_Ën
);

822 
	`cÚfig_g‘_num”iÿl_f›ld
("w©chdog-³riod",
£rv”
.
w©chdog_³riod
);

826 ià(
	`¡ršgm©ch
(
·‰”n
,"dir",1)) {

827 
buf
[1024];

829 ià(
	`g‘cwd
(
buf
,(buf)è=ğ
NULL
)

830 
buf
[0] = '\0';

832 
	`addR•lyBulkCSŒšg
(
c
,"dir");

833 
	`addR•lyBulkCSŒšg
(
c
,
buf
);

834 
m©ches
++;

836 ià(
	`¡ršgm©ch
(
·‰”n
,"save",1)) {

837 
sds
 
buf
 = 
	`sd£m±y
();

838 
j
;

840 
j
 = 0; j < 
£rv”
.
§v•¬am¦’
; j++) {

841 
buf
 = 
	`sdsÿrštf
(buf,"%jd %d",

842 (
štmax_t
)
£rv”
.
§v•¬ams
[
j
].
£cÚds
,

843 
£rv”
.
§v•¬ams
[
j
].
chªges
);

844 ià(
j
 !ğ
£rv”
.
§v•¬am¦’
-1)

845 
buf
 = 
	`sdsÿ’
(buf," ",1);

847 
	`addR•lyBulkCSŒšg
(
c
,"save");

848 
	`addR•lyBulkCSŒšg
(
c
,
buf
);

849 
	`sdsä“
(
buf
);

850 
m©ches
++;

852 ià(
	`¡ršgm©ch
(
·‰”n
,"client-output-buffer-limit",1)) {

853 
sds
 
buf
 = 
	`sd£m±y
();

854 
j
;

856 
j
 = 0; j < 
CLIENT_TYPE_OBUF_COUNT
; j++) {

857 
buf
 = 
	`sdsÿrštf
(buf,"%s %llu %llu %ld",

858 
	`g‘Cl›ÁTy³Name
(
j
),

859 
£rv”
.
ş›Á_obuf_lim™s
[
j
].
h¬d_lim™_by‹s
,

860 
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_by‹s
,

861 (è
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_£cÚds
);

862 ià(
j
 !ğ
CLIENT_TYPE_OBUF_COUNT
-1)

863 
buf
 = 
	`sdsÿ’
(buf," ",1);

865 
	`addR•lyBulkCSŒšg
(
c
,"client-output-buffer-limit");

866 
	`addR•lyBulkCSŒšg
(
c
,
buf
);

867 
	`sdsä“
(
buf
);

868 
m©ches
++;

870 ià(
	`¡ršgm©ch
(
·‰”n
,"unixsocketperm",1)) {

871 
buf
[32];

872 
	`¢´štf
(
buf
,(buf),"%o",
£rv”
.
unixsock‘³rm
);

873 
	`addR•lyBulkCSŒšg
(
c
,"unixsocketperm");

874 
	`addR•lyBulkCSŒšg
(
c
,
buf
);

875 
m©ches
++;

877 ià(
	`¡ršgm©ch
(
·‰”n
,"slaveof",1) ||

878 
	`¡ršgm©ch
(
·‰”n
,"replicaof",1))

880 *
İŠame
 = 
	`¡ršgm©ch
(
·‰”n
,"slaveof",1) ?

882 
buf
[256];

884 
	`addR•lyBulkCSŒšg
(
c
,
İŠame
);

885 ià(
£rv”
.
ma¡”ho¡
)

886 
	`¢´štf
(
buf
,(buf),"%s %d",

887 
£rv”
.
ma¡”ho¡
, s”v”.
ma¡”pÜt
);

889 
buf
[0] = '\0';

890 
	`addR•lyBulkCSŒšg
(
c
,
buf
);

891 
m©ches
++;

893 ià(
	`¡ršgm©ch
(
·‰”n
,"notify-keyspace-events",1)) {

894 
sds
 
æags
 = 
	`key¥aûEv’tsFÏgsToSŒšg
(
£rv”
.
nÙify_key¥aû_ev’ts
);

896 
	`addR•lyBulkCSŒšg
(
c
,"notify-keyspace-events");

897 
	`addR•lyBulkSds
(
c
,
æags
);

898 
m©ches
++;

900 ià(
	`¡ršgm©ch
(
·‰”n
,"bind",1)) {

901 
sds
 
aux
 = 
	`sdsjoš
(
£rv”
.
bšdaddr
,£rv”.
bšdaddr_couÁ
," ");

903 
	`addR•lyBulkCSŒšg
(
c
,"bind");

904 
	`addR•lyBulkCSŒšg
(
c
,
aux
);

905 
	`sdsä“
(
aux
);

906 
m©ches
++;

908 ià(
	`¡ršgm©ch
(
·‰”n
,"requirepass",1)) {

909 
	`addR•lyBulkCSŒšg
(
c
,"requirepass");

910 
sds
 
·sswÜd
 = 
£rv”
.
»quœ•ass
;

911 ià(
·sswÜd
) {

912 
	`addR•lyBulkCBufãr
(
c
,
·sswÜd
,
	`sd¦’
(password));

914 
	`addR•lyBulkCSŒšg
(
c
,"");

916 
m©ches
++;

919 
	`£tDeã¼edM­L’
(
c
,
»¶yËn
,
m©ches
);

926 
	#REDIS_CONFIG_REWRITE_SIGNATURE
 "# G’”©ed by CONFIG REWRITE"

	)

931 
ušt64_t
 
	`diùSdsCa£Hash
(cÚ¡ *
key
);

932 
	`diùSdsKeyCa£Com·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
);

933 
	`diùSdsDe¡ruùÜ
(*
´ivd©a
, *
v®
);

934 
	`diùLi¡De¡ruùÜ
(*
´ivd©a
, *
v®
);

938 
	`»wr™eCÚfigS’tš–O±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
);

940 
diùTy³
 
İtiÚToLšeDiùTy³
 = {

941 
diùSdsCa£Hash
,

942 
NULL
,

943 
NULL
,

944 
diùSdsKeyCa£Com·»
,

945 
diùSdsDe¡ruùÜ
,

946 
diùLi¡De¡ruùÜ


949 
diùTy³
 
İtiÚS‘DiùTy³
 = {

950 
diùSdsCa£Hash
,

951 
NULL
,

952 
NULL
,

953 
diùSdsKeyCa£Com·»
,

954 
diùSdsDe¡ruùÜ
,

955 
NULL


959 
	s»wr™eCÚfigS‹
 {

960 
diù
 *
İtiÚ_to_lše
;

961 
diù
 *
»wr™‹n
;

962 
numlšes
;

963 
sds
 *
lšes
;

964 
has_
;

969 
	`»wr™eCÚfigAµ’dLše
(
»wr™eCÚfigS‹
 *
¡©e
, 
sds
 
lše
) {

970 
¡©e
->
lšes
 = 
	`z»®loc
(¡©e->lšes, (*è* (¡©e->
numlšes
+1));

971 
¡©e
->
lšes
[¡©e->
numlšes
++] = 
lše
;

975 
	`»wr™eCÚfigAddLšeNumb”ToO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, 
sds
 
İtiÚ
, 
lš’um
) {

976 
li¡
 *
l
 = 
	`diùF‘chV®ue
(
¡©e
->
İtiÚ_to_lše
,
İtiÚ
);

978 ià(
l
 =ğ
NULL
) {

979 
l
 = 
	`li¡C»©e
();

980 
	`diùAdd
(
¡©e
->
İtiÚ_to_lše
,
	`sdsdup
(
İtiÚ
),
l
);

982 
	`li¡AddNodeTa
(
l
,(*)()
lš’um
);

989 
	`»wr™eCÚfigM¬kAsProûs£d
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
) {

990 
sds
 
İt
 = 
	`sd¢ew
(
İtiÚ
);

992 ià(
	`diùAdd
(
¡©e
->
»wr™‹n
,
İt
,
NULL
è!ğ
DICT_OK
è
	`sdsä“
(opt);

1000 
»wr™eCÚfigS‹
 *
	`»wr™eCÚfigR—dOldFe
(*
·th
) {

1001 
FILE
 *
å
 = 
	`fİ’
(
·th
,"r");

1002 ià(
å
 =ğ
NULL
 && 
”ºo
 !ğ
ENOENT
)  NULL;

1004 
buf
[
CONFIG_MAX_LINE
+1];

1005 
lš’um
 = -1;

1006 
»wr™eCÚfigS‹
 *
¡©e
 = 
	`zm®loc
((*state));

1007 
¡©e
->
İtiÚ_to_lše
 = 
	`diùC»©e
(&
İtiÚToLšeDiùTy³
,
NULL
);

1008 
¡©e
->
»wr™‹n
 = 
	`diùC»©e
(&
İtiÚS‘DiùTy³
,
NULL
);

1009 
¡©e
->
numlšes
 = 0;

1010 
¡©e
->
lšes
 = 
NULL
;

1011 
¡©e
->
has_
 = 0;

1012 ià(
å
 =ğ
NULL
è 
¡©e
;

1015 
	`fg‘s
(
buf
,
CONFIG_MAX_LINE
+1,
å
è!ğ
NULL
) {

1016 
¬gc
;

1017 
sds
 *
¬gv
;

1018 
sds
 
lše
 = 
	`sd¡rim
(
	`sd¢ew
(
buf
),"\r\n\t ");

1020 
lš’um
++;

1023 ià(
lše
[0] == '#' ||†ine[0] == '\0') {

1024 ià(!
¡©e
->
has_
 && !
	`¡rcmp
(
lše
,
REDIS_CONFIG_REWRITE_SIGNATURE
))

1025 
¡©e
->
has_
 = 1;

1026 
	`»wr™eCÚfigAµ’dLše
(
¡©e
,
lše
);

1031 
¬gv
 = 
	`sds¥l™¬gs
(
lše
,&
¬gc
);

1032 ià(
¬gv
 =ğ
NULL
) {

1036 
sds
 
aux
 = 
	`sd¢ew
("# ??? ");

1037 
aux
 = 
	`sdsÿtsds
×ux,
lše
);

1038 
	`sdsä“
(
lše
);

1039 
	`»wr™eCÚfigAµ’dLše
(
¡©e
,
aux
);

1043 
	`sd¡Şow”
(
¬gv
[0]);

1047 
	`»wr™eCÚfigAµ’dLše
(
¡©e
,
lše
);

1052 *
p
 = 
	`¡r¡r
(
¬gv
[0],"slave");

1053 ià(
p
) {

1054 
sds
 
®t
 = 
	`sd£m±y
();

1055 
®t
 = 
	`sdsÿ’
×É,
¬gv
[0],
p
-argv[0]);;

1056 
®t
 = 
	`sdsÿ’
(alt,"replica",7);

1057 
®t
 = 
	`sdsÿ’
×É,
p
+5,
	`¡¾’
(p+5));

1058 
	`sdsä“
(
¬gv
[0]);

1059 
¬gv
[0] = 
®t
;

1061 
	`»wr™eCÚfigAddLšeNumb”ToO±iÚ
(
¡©e
,
¬gv
[0],
lš’um
);

1062 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1064 
	`fşo£
(
å
);

1065  
¡©e
;

1084 
	`»wr™eCÚfigRewr™eLše
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
sds
 
lše
, 
fÜû
) {

1085 
sds
 
o
 = 
	`sd¢ew
(
İtiÚ
);

1086 
li¡
 *
l
 = 
	`diùF‘chV®ue
(
¡©e
->
İtiÚ_to_lše
,
o
);

1088 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,
İtiÚ
);

1090 ià(!
l
 && !
fÜû
) {

1092 
	`sdsä“
(
lše
);

1093 
	`sdsä“
(
o
);

1097 ià(
l
) {

1098 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
l
);

1099 
lš’um
 = (è
Ê
->
v®ue
;

1103 
	`li¡D–Node
(
l
,
Ê
);

1104 ià(
	`li¡L’gth
(
l
è=ğ0è
	`diùD–‘e
(
¡©e
->
İtiÚ_to_lše
,
o
);

1105 
	`sdsä“
(
¡©e
->
lšes
[
lš’um
]);

1106 
¡©e
->
lšes
[
lš’um
] = 
lše
;

1109 ià(!
¡©e
->
has_
) {

1110 
	`»wr™eCÚfigAµ’dLše
(
¡©e
,

1111 
	`sd¢ew
(
REDIS_CONFIG_REWRITE_SIGNATURE
));

1112 
¡©e
->
has_
 = 1;

1114 
	`»wr™eCÚfigAµ’dLše
(
¡©e
,
lše
);

1116 
	`sdsä“
(
o
);

1121 
	`»wr™eCÚfigFÜm©MemÜy
(*
buf
, 
size_t
 
Ën
, 
by‹s
) {

1122 
gb
 = 1024*1024*1024;

1123 
mb
 = 1024*1024;

1124 
kb
 = 1024;

1126 ià(
by‹s
 && (by‹ % 
gb
) == 0) {

1127  
	`¢´štf
(
buf
,
Ën
,"%Îdgb",
by‹s
/
gb
);

1128 } ià(
by‹s
 && (by‹ % 
mb
) == 0) {

1129  
	`¢´štf
(
buf
,
Ën
,"%Îdmb",
by‹s
/
mb
);

1130 } ià(
by‹s
 && (by‹ % 
kb
) == 0) {

1131  
	`¢´štf
(
buf
,
Ën
,"%Îdkb",
by‹s
/
kb
);

1133  
	`¢´štf
(
buf
,
Ën
,"%Îd",
by‹s
);

1138 
	`»wr™eCÚfigBy‹sO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
v®ue
, 
defv®ue
) {

1139 
buf
[64];

1140 
fÜû
 = 
v®ue
 !ğ
defv®ue
;

1141 
sds
 
lše
;

1143 
	`»wr™eCÚfigFÜm©MemÜy
(
buf
,(buf),
v®ue
);

1144 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% %s",
İtiÚ
,
buf
);

1145 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1149 
	`»wr™eCÚfigYesNoO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
v®ue
, 
defv®ue
) {

1150 
fÜû
 = 
v®ue
 !ğ
defv®ue
;

1151 
sds
 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% %s",
İtiÚ
,

1152 
v®ue
 ? "yes" : "no");

1154 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1158 
	`»wr™eCÚfigSŒšgO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, *
v®ue
, cÚ¡ *
defv®ue
) {

1159 
fÜû
 = 1;

1160 
sds
 
lše
;

1164 ià(
v®ue
 =ğ
NULL
) {

1165 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,
İtiÚ
);

1170 ià(
defv®ue
 && 
	`¡rcmp
(
v®ue
,defv®ueè=ğ0è
fÜû
 = 0;

1172 
lše
 = 
	`sd¢ew
(
İtiÚ
);

1173 
lše
 = 
	`sdsÿ’
(line, " ", 1);

1174 
lše
 = 
	`sdsÿŒ•r
Öše, 
v®ue
, 
	`¡¾’
(value));

1176 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1180 
	`»wr™eCÚfigNum”iÿlO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
v®ue
, 
defv®ue
) {

1181 
fÜû
 = 
v®ue
 !ğ
defv®ue
;

1182 
sds
 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% %Îd",
İtiÚ
,
v®ue
);

1184 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1188 
	`»wr™eCÚfigOù®O±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, *
İtiÚ
, 
v®ue
, 
defv®ue
) {

1189 
fÜû
 = 
v®ue
 !ğ
defv®ue
;

1190 
sds
 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% %o",
İtiÚ
,
v®ue
);

1192 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1198 
	`»wr™eCÚfigEnumO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
v®ue
, 
cÚfigEnum
 *
û
, 
defv®
) {

1199 
sds
 
lše
;

1200 cÚ¡ *
Çme
 = 
	`cÚfigEnumG‘NameOrUnknown
(
û
,
v®ue
);

1201 
fÜû
 = 
v®ue
 !ğ
defv®
;

1203 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% %s",
İtiÚ
,
Çme
);

1204 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1208 
	`»wr™eCÚfigSaveO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1209 
j
;

1210 
sds
 
lše
;

1215 
j
 = 0; j < 
£rv”
.
§v•¬am¦’
; j++) {

1216 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"save %ld %d",

1217 (è
£rv”
.
§v•¬ams
[
j
].
£cÚds
, s”v”.§v•¬ams[j].
chªges
);

1218 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"§ve",
lše
,1);

1221 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,"save");

1225 
	`»wr™eCÚfigU£rO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1229 ià(
£rv”
.
aş_f’ame
[0] != '\0') {

1230 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,"user");

1237 
¿xI‹¿tÜ
 
ri
;

1238 
	`¿xS¹
(&
ri
,
U£rs
);

1239 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

1240 
	`¿xNext
(&
ri
)) {

1241 
u£r
 *
u
 = 
ri
.
d©a
;

1242 
sds
 
lše
 = 
	`sd¢ew
("user ");

1243 
lše
 = 
	`sdsÿtsds
Öše,
u
->
Çme
);

1244 
lše
 = 
	`sdsÿ’
(line," ",1);

1245 
sds
 
desü
 = 
	`ACLDesüibeU£r
(
u
);

1246 
lše
 = 
	`sdsÿtsds
Öše,
desü
);

1247 
	`sdsä“
(
desü
);

1248 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"u£r",
lše
,1);

1250 
	`¿xStİ
(&
ri
);

1253 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,"user");

1257 
	`»wr™eCÚfigDœO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1258 
cwd
[1024];

1260 ià(
	`g‘cwd
(
cwd
,(cwd)è=ğ
NULL
) {

1261 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,"dir");

1264 
	`»wr™eCÚfigSŒšgO±iÚ
(
¡©e
,"dœ",
cwd
,
NULL
);

1268 
	`»wr™eCÚfigSÏveofO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, *
İtiÚ
) {

1269 
sds
 
lše
;

1274 ià(
£rv”
.
şu¡”_’abËd
 || s”v”.
ma¡”ho¡
 =ğ
NULL
) {

1275 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,
İtiÚ
);

1278 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"% % %d", 
İtiÚ
,

1279 
£rv”
.
ma¡”ho¡
, s”v”.
ma¡”pÜt
);

1280 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,1);

1284 
	`»wr™eCÚfigNÙifykey¥aûev’tsO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1285 
fÜû
 = 
£rv”
.
nÙify_key¥aû_ev’ts
 != 0;

1286 *
İtiÚ
 = "notify-keyspace-events";

1287 
sds
 
lše
, 
æags
;

1289 
æags
 = 
	`key¥aûEv’tsFÏgsToSŒšg
(
£rv”
.
nÙify_key¥aû_ev’ts
);

1290 
lše
 = 
	`sd¢ew
(
İtiÚ
);

1291 
lše
 = 
	`sdsÿ’
(line, " ", 1);

1292 
lše
 = 
	`sdsÿŒ•r
Öše, 
æags
, 
	`sd¦’
(flags));

1293 
	`sdsä“
(
æags
);

1294 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1298 
	`»wr™eCÚfigCl›Áouutbufã¾im™O±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1299 
j
;

1300 *
İtiÚ
 = "client-output-buffer-limit";

1302 
j
 = 0; j < 
CLIENT_TYPE_OBUF_COUNT
; j++) {

1303 
fÜû
 = (
£rv”
.
ş›Á_obuf_lim™s
[
j
].
h¬d_lim™_by‹s
 !=

1304 
ş›ÁBufãrLim™sDeçuÉs
[
j
].
h¬d_lim™_by‹s
) ||

1305 (
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_by‹s
 !=

1306 
ş›ÁBufãrLim™sDeçuÉs
[
j
].
soá_lim™_by‹s
) ||

1307 (
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_£cÚds
 !=

1308 
ş›ÁBufãrLim™sDeçuÉs
[
j
].
soá_lim™_£cÚds
);

1309 
sds
 
lše
;

1310 
h¬d
[64], 
soá
[64];

1312 
	`»wr™eCÚfigFÜm©MemÜy
(
h¬d
,(hard),

1313 
£rv”
.
ş›Á_obuf_lim™s
[
j
].
h¬d_lim™_by‹s
);

1314 
	`»wr™eCÚfigFÜm©MemÜy
(
soá
,(soft),

1315 
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_by‹s
);

1317 *
ty³Çme
 = 
	`g‘Cl›ÁTy³Name
(
j
);

1318 ià(!
	`¡rcmp
(
ty³Çme
,"slave"))ypename = "replica";

1319 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"%s %s %s %s %ld",

1320 
İtiÚ
, 
ty³Çme
, 
h¬d
, 
soá
,

1321 (è
£rv”
.
ş›Á_obuf_lim™s
[
j
].
soá_lim™_£cÚds
);

1322 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1327 
	`»wr™eCÚfigBšdO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1328 
fÜû
 = 1;

1329 
sds
 
lše
, 
add»s£s
;

1330 *
İtiÚ
 = "bind";

1333 ià(
£rv”
.
bšdaddr_couÁ
 == 0) {

1334 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,
İtiÚ
);

1339 
add»s£s
 = 
	`sdsjoš
(
£rv”
.
bšdaddr
,£rv”.
bšdaddr_couÁ
," ");

1340 
lše
 = 
	`sd¢ew
(
İtiÚ
);

1341 
lše
 = 
	`sdsÿ’
(line, " ", 1);

1342 
lše
 = 
	`sdsÿtsds
Öše, 
add»s£s
);

1343 
	`sdsä“
(
add»s£s
);

1345 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1349 
	`»wr™eCÚfigRequœ•assO±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
, *
İtiÚ
) {

1350 
fÜû
 = 1;

1351 
sds
 
lše
;

1352 
sds
 
·sswÜd
 = 
£rv”
.
»quœ•ass
;

1356 ià(
·sswÜd
 =ğ
NULL
) {

1357 
	`»wr™eCÚfigM¬kAsProûs£d
(
¡©e
,
İtiÚ
);

1361 
lše
 = 
	`sd¢ew
(
İtiÚ
);

1362 
lše
 = 
	`sdsÿ’
(line, " ", 1);

1363 
lše
 = 
	`sdsÿtsds
Öše, 
·sswÜd
);

1365 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,
İtiÚ
,
lše
,
fÜû
);

1370 
sds
 
	`»wr™eCÚfigG‘CÚ‹ÁFromS‹
(
»wr™eCÚfigS‹
 *
¡©e
) {

1371 
sds
 
cÚ‹Á
 = 
	`sd£m±y
();

1372 
j
, 
was_em±y
 = 0;

1374 
j
 = 0; j < 
¡©e
->
numlšes
; j++) {

1376 ià(
	`sd¦’
(
¡©e
->
lšes
[
j
]) == 0) {

1377 ià(
was_em±y
) ;

1378 
was_em±y
 = 1;

1380 
was_em±y
 = 0;

1382 
cÚ‹Á
 = 
	`sdsÿtsds
(cÚ‹Á,
¡©e
->
lšes
[
j
]);

1383 
cÚ‹Á
 = 
	`sdsÿ’
(content,"\n",1);

1385  
cÚ‹Á
;

1389 
	`»wr™eCÚfigR–—£S‹
(
»wr™eCÚfigS‹
 *
¡©e
) {

1390 
	`sdsä“¥l™»s
(
¡©e
->
lšes
,¡©e->
numlšes
);

1391 
	`diùR–—£
(
¡©e
->
İtiÚ_to_lše
);

1392 
	`diùR–—£
(
¡©e
->
»wr™‹n
);

1393 
	`zä“
(
¡©e
);

1404 
	`»wr™eCÚfigRemoveO½hªed
(
»wr™eCÚfigS‹
 *
¡©e
) {

1405 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
¡©e
->
İtiÚ_to_lše
);

1406 
diùEÁry
 *
de
;

1408 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1409 
li¡
 *
l
 = 
	`diùG‘V®
(
de
);

1410 
sds
 
İtiÚ
 = 
	`diùG‘Key
(
de
);

1414 ià(
	`diùFšd
(
¡©e
->
»wr™‹n
,
İtiÚ
è=ğ
NULL
) {

1415 
	`£rv”Log
(
LL_DEBUG
,"NÙ„ewr™‹ÀİtiÚ: %s", 
İtiÚ
);

1419 
	`li¡L’gth
(
l
)) {

1420 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
l
);

1421 
lš’um
 = (è
Ê
->
v®ue
;

1423 
	`sdsä“
(
¡©e
->
lšes
[
lš’um
]);

1424 
¡©e
->
lšes
[
lš’um
] = 
	`sd£m±y
();

1425 
	`li¡D–Node
(
l
,
Ê
);

1428 
	`diùR–—£I‹¿tÜ
(
di
);

1443 
	`»wr™eCÚfigOv”wr™eFe
(*
cÚfigfe
, 
sds
 
cÚ‹Á
) {

1444 
»tv®
 = 0;

1445 
fd
 = 
	`İ’
(
cÚfigfe
,
O_RDWR
|
O_CREAT
,0644);

1446 
cÚ‹Á_size
 = 
	`sd¦’
(
cÚ‹Á
), 
·ddšg
 = 0;

1447 
¡©
 
sb
;

1448 
sds
 
cÚ‹Á_·dded
;

1452 ià(
fd
 == -1)  -1;

1453 ià(
	`f¡©
(
fd
,&
sb
) == -1) {

1454 
	`şo£
(
fd
);

1459 
cÚ‹Á_·dded
 = 
	`sdsdup
(
cÚ‹Á
);

1460 ià(
cÚ‹Á_size
 < 
sb
.
¡_size
) {

1463 
·ddšg
 = 
sb
.
¡_size
 - 
cÚ‹Á_size
;

1464 
cÚ‹Á_·dded
 = 
	`sdsgrowz”o
(cÚ‹Á_·dded,
sb
.
¡_size
);

1465 
cÚ‹Á_·dded
[
cÚ‹Á_size
] = '\n';

1466 
	`mem£t
(
cÚ‹Á_·dded
+
cÚ‹Á_size
+1,'#',
·ddšg
-1);

1470 ià(
	`wr™e
(
fd
,
cÚ‹Á_·dded
,
	`¡¾’
(content_padded)) == -1) {

1471 
»tv®
 = -1;

1472 
ş—nup
;

1476 ià(
·ddšg
) {

1477 ià(
	`árunÿ‹
(
fd
,
cÚ‹Á_size
) == -1) {

1482 
ş—nup
:

1483 
	`sdsä“
(
cÚ‹Á_·dded
);

1484 
	`şo£
(
fd
);

1485  
»tv®
;

1496 
	`»wr™eCÚfig
(*
·th
) {

1497 
»wr™eCÚfigS‹
 *
¡©e
;

1498 
sds
 
ÃwcÚ‹Á
;

1499 
»tv®
;

1502 ià((
¡©e
 = 
	`»wr™eCÚfigR—dOldFe
(
·th
)è=ğ
NULL
)  -1;

1508 
¡ªd¬dCÚfig
 *
cÚfig
 = 
cÚfigs
; cÚfig->
Çme
 !ğ
NULL
; config++) {

1509 
cÚfig
->
š‹rçû
.
	`»wr™e
(cÚfig->
d©a
, cÚfig->
Çme
, 
¡©e
);

1512 
	`»wr™eCÚfigBšdO±iÚ
(
¡©e
);

1513 
	`»wr™eCÚfigOù®O±iÚ
(
¡©e
,"unixsock‘³rm",
£rv”
.
unixsock‘³rm
,
CONFIG_DEFAULT_UNIX_SOCKET_PERM
);

1514 
	`»wr™eCÚfigSŒšgO±iÚ
(
¡©e
,"logfe",
£rv”
.
logfe
,
CONFIG_DEFAULT_LOGFILE
);

1515 
	`»wr™eCÚfigSaveO±iÚ
(
¡©e
);

1516 
	`»wr™eCÚfigU£rO±iÚ
(
¡©e
);

1517 
	`»wr™eCÚfigDœO±iÚ
(
¡©e
);

1518 
	`»wr™eCÚfigSÏveofO±iÚ
(
¡©e
,"replicaof");

1519 
	`»wr™eCÚfigRequœ•assO±iÚ
(
¡©e
,"requirepass");

1520 
	`»wr™eCÚfigBy‹sO±iÚ
(
¡©e
,"ş›Á-qu”y-bufãr-lim™",
£rv”
.
ş›Á_max_qu”ybuf_Ën
,
PROTO_MAX_QUERYBUF_LEN
);

1521 
	`»wr™eCÚfigSŒšgO±iÚ
(
¡©e
,"şu¡”-cÚfig-fe",
£rv”
.
şu¡”_cÚfigfe
,
CONFIG_DEFAULT_CLUSTER_CONFIG_FILE
);

1522 
	`»wr™eCÚfigNÙifykey¥aûev’tsO±iÚ
(
¡©e
);

1523 
	`»wr™eCÚfigCl›Áouutbufã¾im™O±iÚ
(
¡©e
);

1526 ià(
£rv”
.
£Áš–_mode
è
	`»wr™eCÚfigS’tš–O±iÚ
(
¡©e
);

1531 
	`»wr™eCÚfigRemoveO½hªed
(
¡©e
);

1535 
ÃwcÚ‹Á
 = 
	`»wr™eCÚfigG‘CÚ‹ÁFromS‹
(
¡©e
);

1536 
»tv®
 = 
	`»wr™eCÚfigOv”wr™eFe
(
£rv”
.
cÚfigfe
,
ÃwcÚ‹Á
);

1538 
	`sdsä“
(
ÃwcÚ‹Á
);

1539 
	`»wr™eCÚfigR–—£S‹
(
¡©e
);

1540  
»tv®
;

1546 
	#LOADBUF_SIZE
 256

	)

1547 
lßdbuf
[
LOADBUF_SIZE
];

1549 
	#MODIFIABLE_CONFIG
 1

	)

1550 
	#IMMUTABLE_CONFIG
 0

	)

1552 
	#embedCommÚCÚfig
(
cÚfig_Çme
, 
cÚfig_®Ÿs
, 
is_modifŸbË
) \

1553 .
Çme
 = (
cÚfig_Çme
), \

1554 .
®Ÿs
 = (
cÚfig_®Ÿs
), \

1555 .
modifŸbË
 = (
is_modifŸbË
),

	)

1557 
	#embedCÚfigIÁ”çû
(
š™â
, 
£tâ
, 
g‘â
, 
»wr™eâ
è.
š‹rçû
 = { \

1558 .
š™
 = (
š™â
), \

1559 .
£t
 = (
£tâ
), \

1560 .
g‘
 = (
g‘â
), \

1561 .
»wr™e
 = (
»wr™eâ
) \

1562 },

	)

1577 
	`boŞCÚfigIn™
(
ty³D©a
 
d©a
) {

1578 *
d©a
.
ye¢o
.
cÚfig
 = d©a.ye¢o.
deçuÉ_v®ue
;

1581 
	`boŞCÚfigS‘
(
ty³D©a
 
d©a
, 
sds
 
v®ue
, 
upd©e
, **
”r
) {

1582 
yn
 = 
	`ye¢Ùoi
(
v®ue
);

1583 ià(
yn
 == -1) {

1584 *
”r
 = "argument must be 'yes' or 'no'";

1587 ià(
d©a
.
ye¢o
.
is_v®id_â
 && !d©a.ye¢o.
	`is_v®id_â
(
yn
, 
”r
))

1589 
´ev
 = *(
d©a
.
ye¢o
.
cÚfig
);

1590 *(
d©a
.
ye¢o
.
cÚfig
èğ
yn
;

1591 ià(
upd©e
 && 
d©a
.
ye¢o
.
upd©e_â
 && !d©a.ye¢o.
	`upd©e_â
(
yn
, 
´ev
, 
”r
)) {

1592 *(
d©a
.
ye¢o
.
cÚfig
èğ
´ev
;

1598 
	`boŞCÚfigG‘
(
ş›Á
 *
c
, 
ty³D©a
 
d©a
) {

1599 
	`addR•lyBulkCSŒšg
(
c
, *
d©a
.
ye¢o
.
cÚfig
 ? "yes" : "no");

1602 
	`boŞCÚfigRewr™e
(
ty³D©a
 
d©a
, cÚ¡ *
Çme
, 
»wr™eCÚfigS‹
 *
¡©e
) {

1603 
	`»wr™eCÚfigYesNoO±iÚ
(
¡©e
, 
Çme
,*(
d©a
.
ye¢o
.
cÚfig
), d©a.ye¢o.
deçuÉ_v®ue
);

1606 
	#ü—‹BoŞCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
cÚfig_addr
, , 
is_v®id
, 
upd©e
) { \

1607 
	`embedCommÚCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
) \

1608 
	`embedCÚfigIÁ”çû
(
boŞCÚfigIn™
, 
boŞCÚfigS‘
, 
boŞCÚfigG‘
, 
boŞCÚfigRewr™e
) \

1609 .
d©a
.
ye¢o
 = { \

1610 .
cÚfig
 = &(
cÚfig_addr
), \

1611 .
deçuÉ_v®ue
 = (), \

1612 .
is_v®id_â
 = (
is_v®id
), \

1613 .
upd©e_â
 = (
upd©e
), \

1615 }

	)

1618 
	`¡ršgCÚfigIn™
(
ty³D©a
 
d©a
) {

1619 ià(
d©a
.
¡ršg
.
cÚv”t_em±y_to_nuÎ
) {

1620 *
d©a
.
¡ršg
.
cÚfig
 = d©a.¡ršg.
deçuÉ_v®ue
 ? 
	`z¡rdup
(d©a.¡ršg.deçuÉ_v®ueè: 
NULL
;

1622 *
d©a
.
¡ršg
.
cÚfig
 = 
	`z¡rdup
(d©a.¡ršg.
deçuÉ_v®ue
);

1626 
	`¡ršgCÚfigS‘
(
ty³D©a
 
d©a
, 
sds
 
v®ue
, 
upd©e
, **
”r
) {

1627 ià(
d©a
.
¡ršg
.
is_v®id_â
 && !d©a.¡ršg.
	`is_v®id_â
(
v®ue
, 
”r
))

1629 *
´ev
 = *
d©a
.
¡ršg
.
cÚfig
;

1630 ià(
d©a
.
¡ršg
.
cÚv”t_em±y_to_nuÎ
) {

1631 *
d©a
.
¡ršg
.
cÚfig
 = 
v®ue
[0] ? 
	`z¡rdup
(v®ueè: 
NULL
;

1633 *
d©a
.
¡ršg
.
cÚfig
 = 
	`z¡rdup
(
v®ue
);

1635 ià(
upd©e
 && 
d©a
.
¡ršg
.
upd©e_â
 && !d©a.¡ršg.
	`upd©e_â
(*d©a.¡ršg.
cÚfig
, 
´ev
, 
”r
)) {

1636 
	`zä“
(*
d©a
.
¡ršg
.
cÚfig
);

1637 *
d©a
.
¡ršg
.
cÚfig
 = 
´ev
;

1640 
	`zä“
(
´ev
);

1644 
	`¡ršgCÚfigG‘
(
ş›Á
 *
c
, 
ty³D©a
 
d©a
) {

1645 
	`addR•lyBulkCSŒšg
(
c
, *
d©a
.
¡ršg
.
cÚfig
 ? *data.string.config : "");

1648 
	`¡ršgCÚfigRewr™e
(
ty³D©a
 
d©a
, cÚ¡ *
Çme
, 
»wr™eCÚfigS‹
 *
¡©e
) {

1649 
	`»wr™eCÚfigSŒšgO±iÚ
(
¡©e
, 
Çme
,*(
d©a
.
¡ršg
.
cÚfig
), d©a.¡ršg.
deçuÉ_v®ue
);

1652 
	#ALLOW_EMPTY_STRING
 0

	)

1653 
	#EMPTY_STRING_IS_NULL
 1

	)

1655 
	#ü—‹SŒšgCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
em±y_to_nuÎ
, 
cÚfig_addr
, , 
is_v®id
, 
upd©e
) { \

1656 
	`embedCommÚCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
) \

1657 
	`embedCÚfigIÁ”çû
(
¡ršgCÚfigIn™
, 
¡ršgCÚfigS‘
, 
¡ršgCÚfigG‘
, 
¡ršgCÚfigRewr™e
) \

1658 .
d©a
.
¡ršg
 = { \

1659 .
cÚfig
 = &(
cÚfig_addr
), \

1660 .
deçuÉ_v®ue
 = (), \

1661 .
is_v®id_â
 = (
is_v®id
), \

1662 .
upd©e_â
 = (
upd©e
), \

1663 .
cÚv”t_em±y_to_nuÎ
 = (
em±y_to_nuÎ
), \

1665 }

	)

1668 
	`’umCÚfigIn™
(
ty³D©a
 
d©a
) {

1669 *
d©a
.
’umd
.
cÚfig
 = d©a.’umd.
deçuÉ_v®ue
;

1672 
	`’umCÚfigS‘
(
ty³D©a
 
d©a
, 
sds
 
v®ue
, 
upd©e
, **
”r
) {

1673 
’umv®
 = 
	`cÚfigEnumG‘V®ue
(
d©a
.
’umd
.
’um_v®ue
, 
v®ue
);

1674 ià(
’umv®
 =ğ
INT_MIN
) {

1675 
sds
 
’um”r
 = 
	`sd¢ew
("argument must be one ofhe following: ");

1676 
cÚfigEnum
 *
’umNode
 = 
d©a
.
’umd
.
’um_v®ue
;

1677 
’umNode
->
Çme
 !ğ
NULL
) {

1678 
’um”r
 = 
	`sdsÿ’
Ónum”r, 
’umNode
->
Çme
,

1679 
	`¡¾’
(
’umNode
->
Çme
));

1680 
’um”r
 = 
	`sdsÿ’
(enumerr, ", ", 2);

1681 
’umNode
++;

1683 
	`sd¤ªge
(
’um”r
,0,-3);

1685 
	`¡ºıy
(
lßdbuf
, 
’um”r
, 
LOADBUF_SIZE
);

1686 
lßdbuf
[
LOADBUF_SIZE
 - 1] = '\0';

1688 
	`sdsä“
(
’um”r
);

1689 *
”r
 = 
lßdbuf
;

1692 ià(
d©a
.
’umd
.
is_v®id_â
 && !d©a.’umd.
	`is_v®id_â
(
’umv®
, 
”r
))

1694 
´ev
 = *(
d©a
.
’umd
.
cÚfig
);

1695 *(
d©a
.
’umd
.
cÚfig
èğ
’umv®
;

1696 ià(
upd©e
 && 
d©a
.
’umd
.
upd©e_â
 && !d©a.’umd.
	`upd©e_â
(
’umv®
, 
´ev
, 
”r
)) {

1697 *(
d©a
.
’umd
.
cÚfig
èğ
´ev
;

1703 
	`’umCÚfigG‘
(
ş›Á
 *
c
, 
ty³D©a
 
d©a
) {

1704 
	`addR•lyBulkCSŒšg
(
c
, 
	`cÚfigEnumG‘NameOrUnknown
(
d©a
.
’umd
.
’um_v®ue
,*d©a.’umd.
cÚfig
));

1707 
	`’umCÚfigRewr™e
(
ty³D©a
 
d©a
, cÚ¡ *
Çme
, 
»wr™eCÚfigS‹
 *
¡©e
) {

1708 
	`»wr™eCÚfigEnumO±iÚ
(
¡©e
, 
Çme
,*(
d©a
.
’umd
.
cÚfig
), d©a.’umd.
’um_v®ue
, d©a.’umd.
deçuÉ_v®ue
);

1711 
	#ü—‹EnumCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, , 
cÚfig_addr
, , 
is_v®id
, 
upd©e
) { \

1712 
	`embedCommÚCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
) \

1713 
	`embedCÚfigIÁ”çû
(
’umCÚfigIn™
, 
’umCÚfigS‘
, 
’umCÚfigG‘
, 
’umCÚfigRewr™e
) \

1714 .
d©a
.
’umd
 = { \

1715 .
cÚfig
 = &(
cÚfig_addr
), \

1716 .
deçuÉ_v®ue
 = (), \

1717 .
is_v®id_â
 = (
is_v®id
), \

1718 .
upd©e_â
 = (
upd©e
), \

1719 .
’um_v®ue
 = (), \

1721 }

	)

1725 
	#SET_NUMERIC_TYPE
(
v®
) \

1726 ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_INT
) { \

1727 *(
d©a
.
num”ic
.
cÚfig
.
i
èğ(è
v®
; \

1728 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_UINT
) { \

1729 *(
d©a
.
num”ic
.
cÚfig
.
ui
èğ(è
v®
; \

1730 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_LONG
) { \

1731 *(
d©a
.
num”ic
.
cÚfig
.
l
èğ(è
v®
; \

1732 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_ULONG
) { \

1733 *(
d©a
.
num”ic
.
cÚfig
.
ul
èğ(è
v®
; \

1734 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_LONG_LONG
) { \

1735 *(
d©a
.
num”ic
.
cÚfig
.
Î
èğ(è
v®
; \

1736 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_ULONG_LONG
) { \

1737 *(
d©a
.
num”ic
.
cÚfig
.
uÎ
èğ(è
v®
; \

1738 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_SIZE_T
) { \

1739 *(
d©a
.
num”ic
.
cÚfig
.
¡
èğ(
size_t
è
v®
; \

1740 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_SSIZE_T
) { \

1741 *(
d©a
.
num”ic
.
cÚfig
.
s¡
èğ(
ssize_t
è
v®
; \

1742 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_OFF_T
) { \

1743 *(
d©a
.
num”ic
.
cÚfig
.
Ù
èğ(
off_t
è
v®
; \

1744 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_TIME_T
) { \

1745 *(
d©a
.
num”ic
.
cÚfig
.
‰
èğ(
time_t
è
v®
; \

1746 }

	)

1750 
	#GET_NUMERIC_TYPE
(
v®
) \

1751 ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_INT
) { \

1752 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
i
); \

1753 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_UINT
) { \

1754 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
ui
); \

1755 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_LONG
) { \

1756 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
l
); \

1757 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_ULONG
) { \

1758 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
ul
); \

1759 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_LONG_LONG
) { \

1760 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
Î
); \

1761 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_ULONG_LONG
) { \

1762 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
uÎ
); \

1763 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_SIZE_T
) { \

1764 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
¡
); \

1765 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_SSIZE_T
) { \

1766 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
s¡
); \

1767 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_OFF_T
) { \

1768 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
Ù
); \

1769 } ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_TIME_T
) { \

1770 
v®
 = *(
d©a
.
num”ic
.
cÚfig
.
‰
); \

1771 }

	)

1774 
	`num”icCÚfigIn™
(
ty³D©a
 
d©a
) {

1775 
	`SET_NUMERIC_TYPE
(
d©a
.
num”ic
.
deçuÉ_v®ue
)

1778 
	`num”icBound¬yCheck
(
ty³D©a
 
d©a
, 
Î
, **
”r
) {

1779 ià(
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_ULONG_LONG
 ||

1780 
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_UINT
 ||

1781 
d©a
.
num”ic
.
num”ic_ty³
 =ğ
NUMERIC_TYPE_SIZE_T
) {

1783 
uÎ
 = 
Î
;

1784 
uµ”_bound
 = 
d©a
.
num”ic
.upper_bound;

1785 
low”_bound
 = 
d©a
.
num”ic
.lower_bound;

1786 ià(
uÎ
 > 
uµ”_bound
 || uÎ < 
low”_bound
) {

1787 
	`¢´štf
(
lßdbuf
, 
LOADBUF_SIZE
,

1789 
low”_bound
,

1790 
uµ”_bound
);

1791 *
”r
 = 
lßdbuf
;

1796 ià(
Î
 > 
d©a
.
num”ic
.
uµ”_bound
 ||†È< d©a.num”ic.
low”_bound
) {

1797 
	`¢´štf
(
lßdbuf
, 
LOADBUF_SIZE
,

1799 
d©a
.
num”ic
.
low”_bound
,

1800 
d©a
.
num”ic
.
uµ”_bound
);

1801 *
”r
 = 
lßdbuf
;

1808 
	`num”icCÚfigS‘
(
ty³D©a
 
d©a
, 
sds
 
v®ue
, 
upd©e
, **
”r
) {

1809 
Î
, 
´ev
 = 0;

1810 ià(
d©a
.
num”ic
.
is_memÜy
) {

1811 
mem”r
;

1812 
Î
 = 
	`memtŞl
(
v®ue
, &
mem”r
);

1813 ià(
mem”r
 || 
Î
 < 0) {

1814 *
”r
 = "argument must be‡ memory value";

1818 ià(!
	`¡ršg2Î
(
v®ue
, 
	`sd¦’
(v®ue),&
Î
)) {

1819 *
”r
 = "argument couldn't be…arsed into‡n integer" ;

1824 ià(!
	`num”icBound¬yCheck
(
d©a
, 
Î
, 
”r
))

1827 ià(
d©a
.
num”ic
.
is_v®id_â
 && !d©a.num”ic.
	`is_v®id_â
(
Î
, 
”r
))

1830 
	`GET_NUMERIC_TYPE
(
´ev
)

1831 
	`SET_NUMERIC_TYPE
(
Î
)

1833 ià(
upd©e
 && 
d©a
.
num”ic
.
upd©e_â
 && !d©a.num”ic.
	`upd©e_â
(
Î
, 
´ev
, 
”r
)) {

1834 
	`SET_NUMERIC_TYPE
(
´ev
)

1840 
	`num”icCÚfigG‘
(
ş›Á
 *
c
, 
ty³D©a
 
d©a
) {

1841 
buf
[128];

1842 
v®ue
 = 0;

1844 
	`GET_NUMERIC_TYPE
(
v®ue
)

1846 
	`Î2¡ršg
(
buf
, (buf), 
v®ue
);

1847 
	`addR•lyBulkCSŒšg
(
c
, 
buf
);

1850 
	`num”icCÚfigRewr™e
(
ty³D©a
 
d©a
, cÚ¡ *
Çme
, 
»wr™eCÚfigS‹
 *
¡©e
) {

1851 
v®ue
 = 0;

1853 
	`GET_NUMERIC_TYPE
(
v®ue
)

1855 ià(
d©a
.
num”ic
.
is_memÜy
) {

1856 
	`»wr™eCÚfigBy‹sO±iÚ
(
¡©e
, 
Çme
, 
v®ue
, 
d©a
.
num”ic
.
deçuÉ_v®ue
);

1858 
	`»wr™eCÚfigNum”iÿlO±iÚ
(
¡©e
, 
Çme
, 
v®ue
, 
d©a
.
num”ic
.
deçuÉ_v®ue
);

1862 
	#INTEGER_CONFIG
 0

	)

1863 
	#MEMORY_CONFIG
 1

	)

1865 
	#embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) { \

1866 
	`embedCommÚCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
) \

1867 
	`embedCÚfigIÁ”çû
(
num”icCÚfigIn™
, 
num”icCÚfigS‘
, 
num”icCÚfigG‘
, 
num”icCÚfigRewr™e
) \

1868 .
d©a
.
num”ic
 = { \

1869 .
low”_bound
 = (
low”
), \

1870 .
uµ”_bound
 = (
uµ”
), \

1871 .
deçuÉ_v®ue
 = (), \

1872 .
is_v®id_â
 = (
is_v®id
), \

1873 .
upd©e_â
 = (
upd©e
), \

1874 .
is_memÜy
 = (
memÜy
),

	)

1876 
	#ü—‹IÁCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1877 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1878 .
num”ic_ty³
 = 
NUMERIC_TYPE_INT
, \

1879 .
cÚfig
.
i
 = &(
cÚfig_addr
) \

1881 }

	)

1883 
	#ü—‹UIÁCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1884 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1885 .
num”ic_ty³
 = 
NUMERIC_TYPE_UINT
, \

1886 .
cÚfig
.
ui
 = &(
cÚfig_addr
) \

1887 
	}
} \

1888 }

	)

1890 
	#ü—‹LÚgCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1891 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1892 .
num”ic_ty³
 = 
NUMERIC_TYPE_LONG
, \

1893 .
cÚfig
.
l
 = &(
cÚfig_addr
) \

1895 }

	)

1897 
	#ü—‹ULÚgCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1898 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1899 .
num”ic_ty³
 = 
NUMERIC_TYPE_ULONG
, \

1900 .
cÚfig
.
ul
 = &(
cÚfig_addr
) \

1902 }

	)

1904 
	#ü—‹LÚgLÚgCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1905 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1906 .
num”ic_ty³
 = 
NUMERIC_TYPE_LONG_LONG
, \

1907 .
cÚfig
.
Î
 = &(
cÚfig_addr
) \

1909 }

	)

1911 
	#ü—‹ULÚgLÚgCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1912 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1913 .
num”ic_ty³
 = 
NUMERIC_TYPE_ULONG_LONG
, \

1914 .
cÚfig
.
uÎ
 = &(
cÚfig_addr
) \

1916 }

	)

1918 
	#ü—‹SizeTCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1919 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1920 .
num”ic_ty³
 = 
NUMERIC_TYPE_SIZE_T
, \

1921 .
cÚfig
.
¡
 = &(
cÚfig_addr
) \

1923 }

	)

1925 
	#ü—‹SSizeTCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1926 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1927 .
num”ic_ty³
 = 
NUMERIC_TYPE_SSIZE_T
, \

1928 .
cÚfig
.
s¡
 = &(
cÚfig_addr
) \

1930 }

	)

1932 
	#ü—‹TimeTCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1933 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1934 .
num”ic_ty³
 = 
NUMERIC_TYPE_TIME_T
, \

1935 .
cÚfig
.
‰
 = &(
cÚfig_addr
) \

1937 }

	)

1939 
	#ü—‹OffTCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1940 
	`embedCommÚNum”iÿlCÚfig
(
Çme
, 
®Ÿs
, 
modifŸbË
, 
low”
, 
uµ”
, 
cÚfig_addr
, , 
memÜy
, 
is_v®id
, 
upd©e
) \

1941 .
num”ic_ty³
 = 
NUMERIC_TYPE_OFF_T
, \

1942 .
cÚfig
.
Ù
 = &(
cÚfig_addr
) \

1944 }

	)

1946 
	$isV®idAùiveDeäag
(
v®
, **
”r
) {

1947 #iâdeà
HAVE_DEFRAG


1948 ià(
v®
) {

1949 *
”r
 = "Active defragmentation cannot beƒnabled: it "

1956 
	`UNUSED
(
v®
);

1957 
	`UNUSED
(
”r
);

1960 
	}
}

1962 
	$isV®idDBf’ame
(*
v®
, **
”r
) {

1963 ià(!
	`·thIsBa£Name
(
v®
)) {

1964 *
”r
 = "dbfilename can't be‡…ath, just‡ filename";

1968 
	}
}

1970 
	$isV®idAOFf’ame
(*
v®
, **
”r
) {

1971 ià(!
	`·thIsBa£Name
(
v®
)) {

1972 *
”r
 = "appendfilename can't be‡…ath, just‡ filename";

1976 
	}
}

1978 
	$upd©eHZ
(
v®
, 
´ev
, **
”r
) {

1979 
	`UNUSED
(
´ev
);

1980 
	`UNUSED
(
”r
);

1983 
£rv”
.
cÚfig_hz
 = 
v®
;

1984 ià(
£rv”
.
cÚfig_hz
 < 
CONFIG_MIN_HZ
) server.config_hz = CONFIG_MIN_HZ;

1985 ià(
£rv”
.
cÚfig_hz
 > 
CONFIG_MAX_HZ
) server.config_hz = CONFIG_MAX_HZ;

1986 
£rv”
.
hz
 = s”v”.
cÚfig_hz
;

1988 
	}
}

1990 
	$upd©eJem®locBgTh»ad
(
v®
, 
´ev
, **
”r
) {

1991 
	`UNUSED
(
´ev
);

1992 
	`UNUSED
(
”r
);

1993 
	`£t_jem®loc_bg_th»ad
(
v®
);

1995 
	}
}

1997 
	$upd©eR•lBacklogSize
(
v®
, 
´ev
, **
”r
) {

2000 
	`UNUSED
(
”r
);

2001 
£rv”
.
»¶_backlog_size
 = 
´ev
;

2002 
	`»sizeR•liÿtiÚBacklog
(
v®
);

2004 
	}
}

2006 
	$upd©eMaxmemÜy
(
v®
, 
´ev
, **
”r
) {

2007 
	`UNUSED
(
´ev
);

2008 
	`UNUSED
(
”r
);

2009 ià(
v®
) {

2010 
size_t
 
u£d
 = 
	`zm®loc_u£d_memÜy
()-
	`ä“MemÜyG‘NÙCouÁedMemÜy
();

2011 ià(()
v®
 < 
u£d
) {

2012 
	`£rv”Log
(
LL_WARNING
,"WARNING:hÃw maxmemÜy v®u£ˆvŸ CONFIG SET (%Îuèi sm®Ë¸thªhcu¼’ˆmemÜy u§g(%zu). Thi wÈ»suÉ iÀkeyƒviùiÚ‡nd/Ühšab™yØacû±‚ew wr™commªd d•’dšg oÀthmaxmemÜy-pŞicy.", 
£rv”
.
maxmemÜy
, 
u£d
);

2014 
	`ä“MemÜyIfN“dedAndSaã
();

2017 
	}
}

2019 
	$upd©eGoodSÏves
(
v®
, 
´ev
, **
”r
) {

2020 
	`UNUSED
(
v®
);

2021 
	`UNUSED
(
´ev
);

2022 
	`UNUSED
(
”r
);

2023 
	`»äeshGoodSÏvesCouÁ
();

2025 
	}
}

2027 
	$upd©eAµ’dÚly
(
v®
, 
´ev
, **
”r
) {

2028 
	`UNUSED
(
´ev
);

2029 ià(
v®
 =ğ0 && 
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
) {

2030 
	`¡İAµ’dOÆy
();

2031 } ià(
v®
 && 
£rv”
.
aof_¡©e
 =ğ
AOF_OFF
) {

2032 ià(
	`¡¬tAµ’dOÆy
(è=ğ
C_ERR
) {

2033 *
”r
 = "Unableourn on AOF. Check server†ogs.";

2038 
	}
}

2040 
	$upd©eMaxş›Ás
(
v®
, 
´ev
, **
”r
) {

2042 ià(
v®
 > 
´ev
) {

2043 
	`adju¡O³nFesLim™
();

2044 ià(
£rv”
.
maxş›Ás
 !ğ
v®
) {

2045 
msg
[128];

2046 
	`¥rštf
(
msg
, "Thİ”©šg sy¡em i nÙ‡bËØhªdËh¥ecif›d‚umb” oàş›Ás,ry w™h %d", 
£rv”
.
maxş›Ás
);

2047 *
”r
 = 
msg
;

2048 ià(
£rv”
.
maxş›Ás
 > 
´ev
) {

2049 
£rv”
.
maxş›Ás
 = 
´ev
;

2050 
	`adju¡O³nFesLim™
();

2054 ià((è
	`«G‘S‘Size
(
£rv”
.
–
) <

2055 
£rv”
.
maxş›Ás
 + 
CONFIG_FDSET_INCR
)

2057 ià(
	`«ResizeS‘Size
(
£rv”
.
–
,

2058 
£rv”
.
maxş›Ás
 + 
CONFIG_FDSET_INCR
è=ğ
AE_ERR
)

2060 *
”r
 = "Theƒvent†oop API used by Redis is‚ot‡bleo handlehe specified‚umber of clients";

2066 
	}
}

2068 #ifdeà
USE_OPENSSL


2069 
	$upd©eTlsCfg
(*
v®
, *
´ev
, **
”r
) {

2070 
	`UNUSED
(
v®
);

2071 
	`UNUSED
(
´ev
);

2072 
	`UNUSED
(
”r
);

2073 ià(
	`sCÚfigu»
(&
£rv”
.
s_ùx_cÚfig
è=ğ
C_ERR
) {

2074 *
”r
 = "Unableo configurels-cert-file. Check server†ogs.";

2078 
	}
}

2079 
	$upd©eTlsCfgBoŞ
(
v®
, 
´ev
, **
”r
) {

2080 
	`UNUSED
(
v®
);

2081 
	`UNUSED
(
´ev
);

2082  
	`upd©eTlsCfg
(
NULL
, NULL, 
”r
);

2083 
	}
}

2086 
¡ªd¬dCÚfig
 
	gcÚfigs
[] = {

2088 
ü—‹BoŞCÚfig
("rdbchecksum", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
rdb_checksum
, 1, NULL, NULL),

2089 
ü—‹BoŞCÚfig
("d«mÚize", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
d«mÚize
, 0, NULL, NULL),

2090 
ü—‹BoŞCÚfig
("io-th»ads-do-»ads", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
io_th»ads_do_»ads
, 0,NULL, NULL),

2091 
ü—‹BoŞCÚfig
("lua-»¶iÿ‹-commªds", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
lua_®ways_»¶iÿ‹_commªds
, 1, NULL, NULL),

2092 
ü—‹BoŞCÚfig
("®ways-show-logo", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
®ways_show_logo
, 0, NULL, NULL),

2093 
ü—‹BoŞCÚfig
("´Ùeùed-mode", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
´Ùeùed_mode
, 1, NULL, NULL),

2094 
ü—‹BoŞCÚfig
("rdbcom´essiÚ", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
rdb_com´essiÚ
, 1, NULL, NULL),

2095 
ü—‹BoŞCÚfig
("rdb-d–-sync-fes", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
rdb_d–_sync_fes
, 0, NULL, NULL),

2096 
ü—‹BoŞCÚfig
("aùiv”ehashšg", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aùiv”ehashšg
, 1, NULL, NULL),

2097 
ü—‹BoŞCÚfig
("¡İ-wr™es-Ú-bg§ve-”rÜ", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
¡İ_wr™es_Ú_bg§ve_”r
, 1, NULL, NULL),

2098 
ü—‹BoŞCÚfig
("dyÇmic-hz", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
dyÇmic_hz
, 1, NULL, NULL),

2099 
ü—‹BoŞCÚfig
("Ïzyä“-Ïzy-eviùiÚ", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
Ïzyä“_Ïzy_eviùiÚ
, 0, NULL, NULL),

2100 
ü—‹BoŞCÚfig
("Ïzyä“-Ïzy-expœe", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
Ïzyä“_Ïzy_expœe
, 0, NULL, NULL),

2101 
ü—‹BoŞCÚfig
("Ïzyä“-Ïzy-£rv”-d–", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
Ïzyä“_Ïzy_£rv”_d–
, 0, NULL, NULL),

2102 
ü—‹BoŞCÚfig
("Ïzyä“-Ïzy-u£r-d–", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
Ïzyä“_Ïzy_u£r_d–
 , 0, NULL, NULL),

2103 
ü—‹BoŞCÚfig
("»¶-di§bË-tı-nod–ay", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_di§bË_tı_nod–ay
, 0, NULL, NULL),

2104 
ü—‹BoŞCÚfig
("»¶-diskËss-sync", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_diskËss_sync
, 0, NULL, NULL),

2105 
ü—‹BoŞCÚfig
("gİh”-’abËd", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
gİh”_’abËd
, 0, NULL, NULL),

2106 
ü—‹BoŞCÚfig
("aof-»wr™e-šüem’l-fsync", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aof_»wr™e_šüem’l_fsync
, 1, NULL, NULL),

2107 
ü—‹BoŞCÚfig
("no-­³ndfsync-Ú-»wr™e", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aof_no_fsync_Ú_»wr™e
, 0, NULL, NULL),

2108 
ü—‹BoŞCÚfig
("şu¡”-»quœe-fuÎ-cov”age", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
şu¡”_»quœe_fuÎ_cov”age
, 1, NULL, NULL),

2109 
ü—‹BoŞCÚfig
("rdb-§ve-šüem’l-fsync", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
rdb_§ve_šüem’l_fsync
, 1, NULL, NULL),

2110 
ü—‹BoŞCÚfig
("aof-lßd-Œunÿ‹d", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aof_lßd_Œunÿ‹d
, 1, NULL, NULL),

2111 
ü—‹BoŞCÚfig
("aof-u£-rdb-´—mbË", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aof_u£_rdb_´—mbË
, 1, NULL, NULL),

2112 
ü—‹BoŞCÚfig
("şu¡”-»¶iÿ-no-çov”", "şu¡”-¦ave-no-çov”", 
MODIFIABLE_CONFIG
, 
£rv”
.
şu¡”_¦ave_no_çov”
, 0, 
NULL
, NULL),

2113 
ü—‹BoŞCÚfig
("»¶iÿ-Ïzy-æush", "¦ave-Ïzy-æush", 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_¦ave_Ïzy_æush
, 0, 
NULL
, NULL),

2114 
ü—‹BoŞCÚfig
("»¶iÿ-£rve-¡®e-d©a", "¦ave-£rve-¡®e-d©a", 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_£rve_¡®e_d©a
, 1, 
NULL
, NULL),

2115 
ü—‹BoŞCÚfig
("»¶iÿ-»ad-Úly", "¦ave-»ad-Úly", 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_¦ave_ro
, 1, 
NULL
, NULL),

2116 
ü—‹BoŞCÚfig
("»¶iÿ-ignÜe-maxmemÜy", "¦ave-ignÜe-maxmemÜy", 
MODIFIABLE_CONFIG
, 
£rv”
.
»¶_¦ave_ignÜe_maxmemÜy
, 1, 
NULL
, NULL),

2117 
ü—‹BoŞCÚfig
("jem®loc-bg-th»ad", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
jem®loc_bg_th»ad
, 1, NULL, 
upd©eJem®locBgTh»ad
),

2118 
ü—‹BoŞCÚfig
("aùivedeäag", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aùive_deäag_’abËd
, 0, 
isV®idAùiveDeäag
, NULL),

2119 
ü—‹BoŞCÚfig
("sy¦og-’abËd", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
sy¦og_’abËd
, 0, NULL, NULL),

2120 
ü—‹BoŞCÚfig
("şu¡”-’abËd", 
NULL
, 
IMMUTABLE_CONFIG
, 
£rv”
.
şu¡”_’abËd
, 0, NULL, NULL),

2121 
ü—‹BoŞCÚfig
("­³ndÚly", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
aof_’abËd
, 0, NULL, 
upd©eAµ’dÚly
),

2122 
ü—‹BoŞCÚfig
("şu¡”-®low-»ads-wh’-down", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
şu¡”_®low_»ads_wh’_down
, 0, NULL, NULL),

2126 
ü—‹SŒšgCÚfig
("aşfe", 
NULL
, 
IMMUTABLE_CONFIG
, 
ALLOW_EMPTY_STRING
, 
£rv”
.
aş_f’ame
, "", NULL, NULL),

2127 
ü—‹SŒšgCÚfig
("unixsock‘", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
unixsock‘
, NULL, NULL, NULL),

2128 
ü—‹SŒšgCÚfig
("pidfe", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
pidfe
, NULL, NULL, NULL),

2129 
ü—‹SŒšgCÚfig
("»¶iÿ-ªnounû-", "¦ave-ªnounû-", 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
¦ave_ªnounû_
, 
NULL
, NULL, NULL),

2130 
ü—‹SŒšgCÚfig
("ma¡”u£r", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
ma¡”u£r
, NULL, NULL, NULL),

2131 
ü—‹SŒšgCÚfig
("ma¡”auth", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
ma¡”auth
, NULL, NULL, NULL),

2132 
ü—‹SŒšgCÚfig
("şu¡”-ªnounû-", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
şu¡”_ªnounû_
, NULL, NULL, NULL),

2133 
ü—‹SŒšgCÚfig
("sy¦og-id’t", 
NULL
, 
IMMUTABLE_CONFIG
, 
ALLOW_EMPTY_STRING
, 
£rv”
.
sy¦og_id’t
, "redis", NULL, NULL),

2134 
ü—‹SŒšgCÚfig
("dbf’ame", 
NULL
, 
MODIFIABLE_CONFIG
, 
ALLOW_EMPTY_STRING
, 
£rv”
.
rdb_f’ame
, "dump.rdb", 
isV®idDBf’ame
, NULL),

2135 
ü—‹SŒšgCÚfig
("­³ndf’ame", 
NULL
, 
IMMUTABLE_CONFIG
, 
ALLOW_EMPTY_STRING
, 
£rv”
.
aof_f’ame
, "­³ndÚly.aof", 
isV®idAOFf’ame
, NULL),

2136 
ü—‹SŒšgCÚfig
("£rv”_ıuli¡", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
£rv”_ıuli¡
, NULL, NULL, NULL),

2137 
ü—‹SŒšgCÚfig
("bio_ıuli¡", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
bio_ıuli¡
, NULL, NULL, NULL),

2138 
ü—‹SŒšgCÚfig
("aof_»wr™e_ıuli¡", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
aof_»wr™e_ıuli¡
, NULL, NULL, NULL),

2139 
ü—‹SŒšgCÚfig
("bg§ve_ıuli¡", 
NULL
, 
IMMUTABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
bg§ve_ıuli¡
, NULL, NULL, NULL),

2142 
ü—‹EnumCÚfig
("su³rvi£d", 
NULL
, 
IMMUTABLE_CONFIG
, 
su³rvi£d_mode_’um
, 
£rv”
.
su³rvi£d_mode
, 
SUPERVISED_NONE
, NULL, NULL),

2143 
ü—‹EnumCÚfig
("sy¦og-çc™y", 
NULL
, 
IMMUTABLE_CONFIG
, 
sy¦og_çc™y_’um
, 
£rv”
.
sy¦og_çc™y
, 
LOG_LOCAL0
, NULL, NULL),

2144 
ü—‹EnumCÚfig
("»¶-diskËss-lßd", 
NULL
, 
MODIFIABLE_CONFIG
, 
»¶_diskËss_lßd_’um
, 
£rv”
.
»¶_diskËss_lßd
, 
REPL_DISKLESS_LOAD_DISABLED
, NULL, NULL),

2145 
ü—‹EnumCÚfig
("logËv–", 
NULL
, 
MODIFIABLE_CONFIG
, 
logËv–_’um
, 
£rv”
.
v”bos™y
, 
LL_NOTICE
, NULL, NULL),

2146 
ü—‹EnumCÚfig
("maxmemÜy-pŞicy", 
NULL
, 
MODIFIABLE_CONFIG
, 
maxmemÜy_pŞicy_’um
, 
£rv”
.
maxmemÜy_pŞicy
, 
MAXMEMORY_NO_EVICTION
, NULL, NULL),

2147 
ü—‹EnumCÚfig
("­³ndfsync", 
NULL
, 
MODIFIABLE_CONFIG
, 
aof_fsync_’um
, 
£rv”
.
aof_fsync
, 
AOF_FSYNC_EVERYSEC
, NULL, NULL),

2150 
ü—‹IÁCÚfig
("d©aba£s", 
NULL
, 
IMMUTABLE_CONFIG
, 1, 
INT_MAX
, 
£rv”
.
dbnum
, 16, 
INTEGER_CONFIG
, NULL, NULL),

2151 
ü—‹IÁCÚfig
("pÜt", 
NULL
, 
IMMUTABLE_CONFIG
, 0, 65535, 
£rv”
.
pÜt
, 6379, 
INTEGER_CONFIG
, NULL, NULL),

2152 
ü—‹IÁCÚfig
("io-th»ads", 
NULL
, 
IMMUTABLE_CONFIG
, 1, 128, 
£rv”
.
io_th»ads_num
, 1, 
INTEGER_CONFIG
, NULL, NULL),

2153 
ü—‹IÁCÚfig
("auto-aof-»wr™e-³rûÁage", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
aof_»wr™e_³rc
, 100, 
INTEGER_CONFIG
, NULL, NULL),

2154 
ü—‹IÁCÚfig
("şu¡”-»¶iÿ-v®id™y-çùÜ", "şu¡”-¦ave-v®id™y-çùÜ", 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
şu¡”_¦ave_v®id™y_çùÜ
, 10, 
INTEGER_CONFIG
, 
NULL
, NULL),

2155 
ü—‹IÁCÚfig
("li¡-max-zli¡-size", 
NULL
, 
MODIFIABLE_CONFIG
, 
INT_MIN
, 
INT_MAX
, 
£rv”
.
li¡_max_zli¡_size
, -2, 
INTEGER_CONFIG
, NULL, NULL),

2156 
ü—‹IÁCÚfig
("tı-k“·live", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
tık“·live
, 300, 
INTEGER_CONFIG
, NULL, NULL),

2157 
ü—‹IÁCÚfig
("şu¡”-mig¿tiÚ-b¬r›r", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
şu¡”_mig¿tiÚ_b¬r›r
, 1, 
INTEGER_CONFIG
, NULL, NULL),

2158 
ü—‹IÁCÚfig
("aùive-deäag-cyşe-mš", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 99, 
£rv”
.
aùive_deäag_cyşe_mš
, 1, 
INTEGER_CONFIG
, NULL, NULL),

2159 
ü—‹IÁCÚfig
("aùive-deäag-cyşe-max", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 99, 
£rv”
.
aùive_deäag_cyşe_max
, 25, 
INTEGER_CONFIG
, NULL, NULL),

2160 
ü—‹IÁCÚfig
("aùive-deäag-th»shŞd-low”", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 1000, 
£rv”
.
aùive_deäag_th»shŞd_low”
, 10, 
INTEGER_CONFIG
, NULL, NULL),

2161 
ü—‹IÁCÚfig
("aùive-deäag-th»shŞd-uµ”", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 1000, 
£rv”
.
aùive_deäag_th»shŞd_uµ”
, 100, 
INTEGER_CONFIG
, NULL, NULL),

2162 
ü—‹IÁCÚfig
("lfu-log-çùÜ", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
lfu_log_çùÜ
, 10, 
INTEGER_CONFIG
, NULL, NULL),

2163 
ü—‹IÁCÚfig
("lfu-deÿy-time", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
lfu_deÿy_time
, 1, 
INTEGER_CONFIG
, NULL, NULL),

2164 
ü—‹IÁCÚfig
("»¶iÿ-´iÜ™y", "¦ave-´iÜ™y", 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
¦ave_´iÜ™y
, 100, 
INTEGER_CONFIG
, 
NULL
, NULL),

2165 
ü—‹IÁCÚfig
("»¶-diskËss-sync-d–ay", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
»¶_diskËss_sync_d–ay
, 5, 
INTEGER_CONFIG
, NULL, NULL),

2166 
ü—‹IÁCÚfig
("maxmemÜy-§m¶es", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
INT_MAX
, 
£rv”
.
maxmemÜy_§m¶es
, 5, 
INTEGER_CONFIG
, NULL, NULL),

2167 
ü—‹IÁCÚfig
("timeout", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
maxidËtime
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2168 
ü—‹IÁCÚfig
("»¶iÿ-ªnounû-pÜt", "¦ave-ªnounû-pÜt", 
MODIFIABLE_CONFIG
, 0, 65535, 
£rv”
.
¦ave_ªnounû_pÜt
, 0, 
INTEGER_CONFIG
, 
NULL
, NULL),

2169 
ü—‹IÁCÚfig
("tı-backlog", 
NULL
, 
IMMUTABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
tı_backlog
, 511, 
INTEGER_CONFIG
, NULL, NULL),

2170 
ü—‹IÁCÚfig
("şu¡”-ªnounû-bus-pÜt", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 65535, 
£rv”
.
şu¡”_ªnounû_bus_pÜt
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2171 
ü—‹IÁCÚfig
("şu¡”-ªnounû-pÜt", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 65535, 
£rv”
.
şu¡”_ªnounû_pÜt
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2172 
ü—‹IÁCÚfig
("»¶-timeout", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
INT_MAX
, 
£rv”
.
»¶_timeout
, 60, 
INTEGER_CONFIG
, NULL, NULL),

2173 
ü—‹IÁCÚfig
("»¶-pšg-»¶iÿ-³riod", "»¶-pšg-¦ave-³riod", 
MODIFIABLE_CONFIG
, 1, 
INT_MAX
, 
£rv”
.
»¶_pšg_¦ave_³riod
, 10, 
INTEGER_CONFIG
, 
NULL
, NULL),

2174 
ü—‹IÁCÚfig
("li¡-com´ess-d•th", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
li¡_com´ess_d•th
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2175 
ü—‹IÁCÚfig
("rdb-key-§ve-d–ay", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
rdb_key_§ve_d–ay
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2176 
ü—‹IÁCÚfig
("key-lßd-d–ay", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
key_lßd_d–ay
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2177 
ü—‹IÁCÚfig
("aùive-expœe-effÜt", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 10, 
£rv”
.
aùive_expœe_effÜt
, 1, 
INTEGER_CONFIG
, NULL, NULL),

2178 
ü—‹IÁCÚfig
("hz", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
cÚfig_hz
, 
CONFIG_DEFAULT_HZ
, 
INTEGER_CONFIG
, NULL, 
upd©eHZ
),

2179 
ü—‹IÁCÚfig
("mš-»¶iÿs-to-wr™e", "mš-¦aves-to-wr™e", 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
»¶_mš_¦aves_to_wr™e
, 0, 
INTEGER_CONFIG
, 
NULL
, 
upd©eGoodSÏves
),

2180 
ü—‹IÁCÚfig
("mš-»¶iÿs-max-Ïg", "mš-¦aves-max-Ïg", 
MODIFIABLE_CONFIG
, 0, 
INT_MAX
, 
£rv”
.
»¶_mš_¦aves_max_Ïg
, 10, 
INTEGER_CONFIG
, 
NULL
, 
upd©eGoodSÏves
),

2183 
ü—‹UIÁCÚfig
("maxş›Ás", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
UINT_MAX
, 
£rv”
.
maxş›Ás
, 10000, 
INTEGER_CONFIG
, NULL, 
upd©eMaxş›Ás
),

2186 
ü—‹ULÚgCÚfig
("aùive-deäag-max-sÿn-f›lds", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
LONG_MAX
, 
£rv”
.
aùive_deäag_max_sÿn_f›lds
, 1000, 
INTEGER_CONFIG
, NULL, NULL),

2187 
ü—‹ULÚgCÚfig
("¦owlog-max-Ën", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
¦owlog_max_Ën
, 128, 
INTEGER_CONFIG
, NULL, NULL),

2188 
ü—‹ULÚgCÚfig
("aşlog-max-Ën", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
aşlog_max_Ën
, 128, 
INTEGER_CONFIG
, NULL, NULL),

2191 
ü—‹LÚgLÚgCÚfig
("lua-time-lim™", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
lua_time_lim™
, 5000, 
INTEGER_CONFIG
, NULL, NULL),

2192 
ü—‹LÚgLÚgCÚfig
("şu¡”-node-timeout", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LLONG_MAX
, 
£rv”
.
şu¡”_node_timeout
, 15000, 
INTEGER_CONFIG
, NULL, NULL),

2193 
ü—‹LÚgLÚgCÚfig
("¦owlog-log-¦ow”-thª", 
NULL
, 
MODIFIABLE_CONFIG
, -1, 
LLONG_MAX
, 
£rv”
.
¦owlog_log_¦ow”_thª
, 10000, 
INTEGER_CONFIG
, NULL, NULL),

2194 
ü—‹LÚgLÚgCÚfig
("Ï‹ncy-mÚ™Ü-th»shŞd", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LLONG_MAX
, 
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2195 
ü—‹LÚgLÚgCÚfig
("´Ùo-max-bulk-Ën", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LLONG_MAX
, 
£rv”
.
´Ùo_max_bulk_Ën
, 512Î*1024*1024, 
MEMORY_CONFIG
, NULL, NULL),

2196 
ü—‹LÚgLÚgCÚfig
("¡»am-node-max-’Œ›s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LLONG_MAX
, 
£rv”
.
¡»am_node_max_’Œ›s
, 100, 
INTEGER_CONFIG
, NULL, NULL),

2197 
ü—‹LÚgLÚgCÚfig
("»¶-backlog-size", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
LLONG_MAX
, 
£rv”
.
»¶_backlog_size
, 1024*1024, 
MEMORY_CONFIG
, NULL, 
upd©eR•lBacklogSize
),

2200 
ü—‹ULÚgLÚgCÚfig
("maxmemÜy", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
ULLONG_MAX
, 
£rv”
.
maxmemÜy
, 0, 
MEMORY_CONFIG
, NULL, 
upd©eMaxmemÜy
),

2203 
ü—‹SizeTCÚfig
("hash-max-zli¡-’Œ›s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
hash_max_zli¡_’Œ›s
, 512, 
INTEGER_CONFIG
, NULL, NULL),

2204 
ü—‹SizeTCÚfig
("£t-max-št£t-’Œ›s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
£t_max_št£t_’Œ›s
, 512, 
INTEGER_CONFIG
, NULL, NULL),

2205 
ü—‹SizeTCÚfig
("z£t-max-zli¡-’Œ›s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
z£t_max_zli¡_’Œ›s
, 128, 
INTEGER_CONFIG
, NULL, NULL),

2206 
ü—‹SizeTCÚfig
("aùive-deäag-ignÜe-by‹s", 
NULL
, 
MODIFIABLE_CONFIG
, 1, 
LLONG_MAX
, 
£rv”
.
aùive_deäag_ignÜe_by‹s
, 100<<20, 
MEMORY_CONFIG
, NULL, NULL),

2207 
ü—‹SizeTCÚfig
("hash-max-zli¡-v®ue", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
hash_max_zli¡_v®ue
, 64, 
MEMORY_CONFIG
, NULL, NULL),

2208 
ü—‹SizeTCÚfig
("¡»am-node-max-by‹s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
¡»am_node_max_by‹s
, 4096, 
MEMORY_CONFIG
, NULL, NULL),

2209 
ü—‹SizeTCÚfig
("z£t-max-zli¡-v®ue", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
z£t_max_zli¡_v®ue
, 64, 
MEMORY_CONFIG
, NULL, NULL),

2210 
ü—‹SizeTCÚfig
("hÎ-¥¬£-max-by‹s", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
hÎ_¥¬£_max_by‹s
, 3000, 
MEMORY_CONFIG
, NULL, NULL),

2211 
ü—‹SizeTCÚfig
("Œackšg-bË-max-keys", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
Œackšg_bË_max_keys
, 1000000, 
INTEGER_CONFIG
, NULL, NULL),

2214 
ü—‹TimeTCÚfig
("»¶-backlog-‰l", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LONG_MAX
, 
£rv”
.
»¶_backlog_time_lim™
, 60*60, 
INTEGER_CONFIG
, NULL, NULL),

2215 
ü—‹OffTCÚfig
("auto-aof-»wr™e-mš-size", 
NULL
, 
MODIFIABLE_CONFIG
, 0, 
LLONG_MAX
, 
£rv”
.
aof_»wr™e_mš_size
, 64*1024*1024, 
MEMORY_CONFIG
, NULL, NULL),

2217 #ifdeà
USE_OPENSSL


2218 
ü—‹IÁCÚfig
("s-pÜt", 
NULL
, 
IMMUTABLE_CONFIG
, 0, 65535, 
£rv”
.
s_pÜt
, 0, 
INTEGER_CONFIG
, NULL, NULL),

2219 
ü—‹BoŞCÚfig
("s-şu¡”", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
s_şu¡”
, 0, NULL, NULL),

2220 
ü—‹BoŞCÚfig
("s-»¶iÿtiÚ", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
s_»¶iÿtiÚ
, 0, NULL, NULL),

2221 
ü—‹BoŞCÚfig
("s-auth-ş›Ás", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
s_auth_ş›Ás
, 1, NULL, NULL),

2222 
ü—‹BoŞCÚfig
("s-´eãr-£rv”-ch”s", 
NULL
, 
MODIFIABLE_CONFIG
, 
£rv”
.
s_ùx_cÚfig
.
´eãr_£rv”_ch”s
, 0, NULL, 
upd©eTlsCfgBoŞ
),

2223 
ü—‹SŒšgCÚfig
("s-û¹-fe", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
û¹_fe
, NULL, NULL, 
upd©eTlsCfg
),

2224 
ü—‹SŒšgCÚfig
("s-key-fe", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
key_fe
, NULL, NULL, 
upd©eTlsCfg
),

2225 
ü—‹SŒšgCÚfig
("s-dh-·¿ms-fe", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
dh_·¿ms_fe
, NULL, NULL, 
upd©eTlsCfg
),

2226 
ü—‹SŒšgCÚfig
("s-ÿ-û¹-fe", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
ÿ_û¹_fe
, NULL, NULL, 
upd©eTlsCfg
),

2227 
ü—‹SŒšgCÚfig
("s-ÿ-û¹-dœ", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
ÿ_û¹_dœ
, NULL, NULL, 
upd©eTlsCfg
),

2228 
ü—‹SŒšgCÚfig
("s-´ÙocŞs", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
´ÙocŞs
, NULL, NULL, 
upd©eTlsCfg
),

2229 
ü—‹SŒšgCÚfig
("s-ch”s", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
ch”s
, NULL, NULL, 
upd©eTlsCfg
),

2230 
ü—‹SŒšgCÚfig
("s-ch”su™es", 
NULL
, 
MODIFIABLE_CONFIG
, 
EMPTY_STRING_IS_NULL
, 
£rv”
.
s_ùx_cÚfig
.
ch”su™es
, NULL, NULL, 
upd©eTlsCfg
),

2234 {
NULL
}

2241 
	$cÚfigCommªd
(
ş›Á
 *
c
) {

2243 ià(
£rv”
.
lßdšg
 && 
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"get")) {

2244 
	`addR•lyE¼Ü
(
c
,"Only CONFIG GET is‡llowed during†oading");

2248 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

2249 cÚ¡ *
h–p
[] = {

2254 
NULL


2256 
	`addR•lyH–p
(
c
, 
h–p
);

2257 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"£t"è&& c->
¬gc
 == 4) {

2258 
	`cÚfigS‘Commªd
(
c
);

2259 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g‘"è&& c->
¬gc
 == 3) {

2260 
	`cÚfigG‘Commªd
(
c
);

2261 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»£t¡©"è&& c->
¬gc
 == 2) {

2262 
	`»£tS”v”Sts
();

2263 
	`»£tCommªdTabËSts
();

2264 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2265 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»wr™e"è&& c->
¬gc
 == 2) {

2266 ià(
£rv”
.
cÚfigfe
 =ğ
NULL
) {

2267 
	`addR•lyE¼Ü
(
c
,"The server is„unning without‡ config file");

2270 ià(
	`»wr™eCÚfig
(
£rv”
.
cÚfigfe
) == -1) {

2271 
	`£rv”Log
(
LL_WARNING
,"CONFIG REWRITE faed: %s", 
	`¡»¼Ü
(
”ºo
));

2272 
	`addR•lyE¼ÜFÜm©
(
c
,"Rewr™šg cÚfig fe: %s", 
	`¡»¼Ü
(
”ºo
));

2274 
	`£rv”Log
(
LL_WARNING
,"CONFIG REWRITEƒxecuted with success.");

2275 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2278 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

2281 
	}
}

	@config.h

30 #iâdeà
__CONFIG_H


31 
	#__CONFIG_H


	)

33 #ifdeà
__APPLE__


34 
	~<Avaab™yMaüos.h
>

37 #ifdeà
__lšux__


38 
	~<lšux/v”siÚ.h
>

39 
	~<ã©u»s.h
>

43 #ià
defšed
(
__APPLE__
è&& !defšed(
MAC_OS_X_VERSION_10_6
)

44 
	#»dis_f¡©
 
f¡©64


	)

45 
	#»dis_¡©
 
¡©64


	)

47 
	#»dis_f¡©
 
f¡©


	)

48 
	#»dis_¡©
 
¡©


	)

52 #ifdeà
__lšux__


53 
	#HAVE_PROC_STAT
 1

	)

54 
	#HAVE_PROC_MAPS
 1

	)

55 
	#HAVE_PROC_SMAPS
 1

	)

56 
	#HAVE_PROC_SOMAXCONN
 1

	)

60 #ià
defšed
(
__APPLE__
)

61 
	#HAVE_TASKINFO
 1

	)

65 #ià
defšed
(
__APPLE__
è|| (defšed(
__lšux__
è&& defšed(
__GLIBC__
)) || \

66 
defšed
(
__F»eBSD__
è|| (defšed(
__O³nBSD__
è&& defšed(
USE_BACKTRACE
))\

67 || 
	$defšed
(
__D¿gÚFly__
)

68 
	#HAVE_BACKTRACE
 1

	)

72 #ifdeà
__lšux__


73 
	#HAVE_MSG_NOSIGNAL
 1

	)

77 #ifdeà
__lšux__


78 
	#HAVE_EPOLL
 1

	)

81 #ià(
	`defšed
(
__APPLE__
è&& defšed(
MAC_OS_X_VERSION_10_6
)è|| defšed(
__F»eBSD__
è|| defšed(
__O³nBSD__
è|| defšed (
__N‘BSD__
)

82 
	#HAVE_KQUEUE
 1

	)

85 #ifdeà
__sun


86 
	~<sys/ã©u»_‹¡s.h
>

87 #ifdeà
_DTRACE_VERSION


88 
	#HAVE_EVPORT
 1

	)

93 #ifdeà
__lšux__


94 
	#»dis_fsync
 
fd©async


	)

96 
	#»dis_fsync
 
fsync


	)

101 #ifdeà
__lšux__


102 #ià
	`defšed
(
__GLIBC__
è&& defšed(
__GLIBC_PREREQ
)

103 #ià(
LINUX_VERSION_CODE
 >ğ0x020611 && 
	`__GLIBC_PREREQ
(2, 6))

104 
	#HAVE_SYNC_FILE_RANGE
 1

	)

107 #ià(
LINUX_VERSION_CODE
 >= 0x020611)

108 
	#HAVE_SYNC_FILE_RANGE
 1

	)

113 #ifdeà
HAVE_SYNC_FILE_RANGE


114 
	#rdb_fsync_¿nge
(
fd
,
off
,
size
è
	`sync_fe_¿nge
(fd,off,size,
SYNC_FILE_RANGE_WAIT_BEFORE
|
SYNC_FILE_RANGE_WRITE
)

	)

116 
	#rdb_fsync_¿nge
(
fd
,
off
,
size
è
	`fsync
(fd)

	)

122 #ià(
defšed
 
__N‘BSD__
 || defšed 
__F»eBSD__
 || defšed 
__O³nBSD__
)

123 
	#USE_SETPROCTITLE


	)

126 #ià((
defšed
 
__lšux
 && 
	`defšed
(
__GLIBC__
)è|| defšed 
__APPLE__
)

127 
	#USE_SETPROCTITLE


	)

128 
	#INIT_SETPROCTITLE_REPLACEMENT


	)

129 
	`¥t_š™
(
¬gc
, *
¬gv
[]);

130 
	`£roù™Ë
(cÚ¡ *
fmt
, ...);

134 
	~<sys/ty³s.h
>

136 #iâdeà
BYTE_ORDER


137 #ià(
BSD
 >= 199103)

138 
	~<machše/’dŸn.h
>

140 #ià
	`defšed
(
lšux
è|| defšed(
__lšux__
)

141 
	~<’dŸn.h
>

143 
	#LITTLE_ENDIAN
 1234

	)

144 
	#BIG_ENDIAN
 4321

	)

145 
	#PDP_ENDIAN
 3412

	)

147 #ià
	`defšed
(
__i386__
è|| defšed(
__x86_64__
è|| defšed(
__amd64__
) || \

148 
	`defšed
(
vax
è|| defšed(
ns32000
è|| defšed(
sun386
) || \

149 
	`defšed
(
MIPSEL
è|| defšed(
_MIPSEL
è|| defšed(
BIT_ZERO_ON_RIGHT
) || \

150 
	`defšed
(
__®pha__
è|| 
	$defšed
(
__®pha
)

151 
	#BYTE_ORDER
 
LITTLE_ENDIAN


	)

154 #ià
	`defšed
(
£l
è|| defšed(
pyr
è|| defšed(
mc68000
è|| defšed(
¥¬c
) || \

155 
	`defšed
(
is68k
è|| defšed(
hÛ
è|| defšed(
ibm032
è|| defšed(
ibm370
) || \

156 
	`defšed
(
MIPSEB
è|| defšed(
_MIPSEB
è|| defšed(
_IBMR2
è|| defšed(
DGUX
) ||\

157 
	`defšed
(
­Şlo
è|| defšed(
__cÚvex__
è|| defšed(
_CRAY
) || \

158 
	`defšed
(
__hµa
è|| defšed(
__hp9000
) || \

159 
	`defšed
(
__hp9000s300
è|| defšed(
__hp9000s700
) || \

160 
	`defšed
 (
BIT_ZERO_ON_LEFT
è|| defšed(
m68k
è|| 
	$defšed
(
__¥¬c
)

161 
	#BYTE_ORDER
 
BIG_ENDIAN


	)

171 #iâdeà
BYTE_ORDER


172 #ifdeà
__BYTE_ORDER


173 #ià
	`defšed
(
__LITTLE_ENDIAN
è&& defšed(
__BIG_ENDIAN
)

174 #iâdeà
LITTLE_ENDIAN


175 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

177 #iâdeà
BIG_ENDIAN


178 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

180 #ià(
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN
)

181 
	#BYTE_ORDER
 
LITTLE_ENDIAN


	)

183 
	#BYTE_ORDER
 
BIG_ENDIAN


	)

189 #ià!
	`defšed
(
BYTE_ORDER
) || \

190 (
BYTE_ORDER
 !ğ
BIG_ENDIAN
 && BYTE_ORDER !ğ
LITTLE_ENDIAN
)

199 #ià(
__i386
 || 
__amd64
 || 
__pow”pc__
è&& 
__GNUC__


200 
	#GNUC_VERSION
 (
__GNUC__
 * 10000 + 
__GNUC_MINOR__
 * 100 + 
__GNUC_PATCHLEVEL__
)

	)

201 #ià
	`defšed
(
__şªg__
)

202 
	#HAVE_ATOMIC


	)

204 #ià(
	`defšed
(
__GLIBC__
è&& defšed(
__GLIBC_PREREQ
))

205 #ià(
GNUC_VERSION
 >ğ40100 && 
	`__GLIBC_PREREQ
(2, 6))

206 
	#HAVE_ATOMIC


	)

213 #ià
	`defšed
(
__¬m
è&& !defšed(
__¬m__
)

214 
	#__¬m__


	)

216 #ià
	`defšed
 (
__¯rch64__
è&& !defšed(
__¬m64__
)

217 
	#__¬m64__


	)

221 #ià
	`defšed
(
__¥¬c
è&& !defšed(
__¥¬c__
)

222 
	#__¥¬c__


	)

225 #ià
	`defšed
(
__¥¬c__
è|| defšed(
__¬m__
)

226 
	#USE_ALIGNED_ACCESS


	)

230 #ifdeà
__lšux__


231 
	#»dis_£t_th»ad_t™Ë
(
Çme
è
	`±h»ad_£Šame_Å
(
	`±h»ad_£lf
(),‚ame)

	)

233 #ià(
defšed
 
__F»eBSD__
 || defšed 
__O³nBSD__
)

234 
	~<±h»ad_Å.h
>

235 
	#»dis_£t_th»ad_t™Ë
(
Çme
è
	`±h»ad_£t_Çme_Å
(
	`±h»ad_£lf
(),‚ame)

	)

236 #–ià
defšed
 
__N‘BSD__


237 
	~<±h»ad.h
>

238 
	#»dis_£t_th»ad_t™Ë
(
Çme
è
	`±h»ad_£Šame_Å
(
	`±h»ad_£lf
(),‚ame, 
NULL
)

	)

240 #ià(
defšed
 
__APPLE__
 && 
	`defšed
(
MAC_OS_X_VERSION_10_7
))

241 
	`±h»ad_£Šame_Å
(cÚ¡ *
Çme
);

242 
	~<±h»ad.h
>

243 
	#»dis_£t_th»ad_t™Ë
(
Çme
è
	`±h»ad_£Šame_Å
Òame)

	)

245 
	#»dis_£t_th»ad_t™Ë
(
Çme
)

	)

251 #ià(
defšed
 
__lšux
 || defšed 
__N‘BSD__
 || defšed 
__F»eBSD__
 || defšed 
__O³nBSD__
)

252 
	#USE_SETCPUAFFINITY


	)

253 
	`£tıuaffš™y
(cÚ¡ *
ıuli¡
);

	@connection.c

30 
	~"£rv”.h
"

31 
	~"cÚnh–³rs.h
"

52 
CÚÃùiÚTy³
 
	gCT_Sock‘
;

77 
cÚÃùiÚ
 *
	$cÚnC»©eSock‘
() {

78 
cÚÃùiÚ
 *
cÚn
 = 
	`zÿÎoc
((connection));

79 
cÚn
->
ty³
 = &
CT_Sock‘
;

80 
cÚn
->
fd
 = -1;

82  
cÚn
;

83 
	}
}

91 
cÚÃùiÚ
 *
	$cÚnC»©eAcû±edSock‘
(
fd
) {

92 
cÚÃùiÚ
 *
cÚn
 = 
	`cÚnC»©eSock‘
();

93 
cÚn
->
fd
 = fd;

94 
cÚn
->
¡©e
 = 
CONN_STATE_ACCEPTING
;

95  
cÚn
;

96 
	}
}

98 
	$cÚnSock‘CÚÃù
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
¤c_addr
,

99 
CÚÃùiÚC®lbackFunc
 
cÚÃù_hªdËr
) {

100 
fd
 = 
	`ª‘TıNÚBlockBe¡EffÜtBšdCÚÃù
(
NULL
,
addr
,
pÜt
,
¤c_addr
);

101 ià(
fd
 == -1) {

102 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

103 
cÚn
->
Ï¡_”ºo
 = 
”ºo
;

104  
C_ERR
;

107 
cÚn
->
fd
 = fd;

108 
cÚn
->
¡©e
 = 
CONN_STATE_CONNECTING
;

110 
cÚn
->
cÚn_hªdËr
 = 
cÚÃù_hªdËr
;

111 
	`«C»©eFeEv’t
(
£rv”
.
–
, 
cÚn
->
fd
, 
AE_WRITABLE
,

112 
cÚn
->
ty³
->
«_hªdËr
, conn);

114  
C_OK
;

115 
	}
}

118 
	$cÚnHasWr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

119  
cÚn
->
wr™e_hªdËr
 !ğ
NULL
;

120 
	}
}

123 
	$cÚnHasR—dHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

124  
cÚn
->
»ad_hªdËr
 !ğ
NULL
;

125 
	}
}

128 
	$cÚnS‘Priv©eD©a
(
cÚÃùiÚ
 *
cÚn
, *
d©a
) {

129 
cÚn
->
´iv©e_d©a
 = 
d©a
;

130 
	}
}

133 *
	$cÚnG‘Priv©eD©a
(
cÚÃùiÚ
 *
cÚn
) {

134  
cÚn
->
´iv©e_d©a
;

135 
	}
}

144 
	$cÚnSock‘Clo£
(
cÚÃùiÚ
 *
cÚn
) {

145 ià(
cÚn
->
fd
 != -1) {

146 
	`«D–‘eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,
AE_READABLE
);

147 
	`«D–‘eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,
AE_WRITABLE
);

148 
	`şo£
(
cÚn
->
fd
);

149 
cÚn
->
fd
 = -1;

155 ià(
	`cÚnHasRefs
(
cÚn
)) {

156 
cÚn
->
æags
 |ğ
CONN_FLAG_CLOSE_SCHEDULED
;

160 
	`zä“
(
cÚn
);

161 
	}
}

163 
	$cÚnSock‘Wr™e
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
d©a
, 
size_t
 
d©a_Ën
) {

164 
»t
 = 
	`wr™e
(
cÚn
->
fd
, 
d©a
, 
d©a_Ën
);

165 ià(
»t
 < 0 && 
”ºo
 !ğ
EAGAIN
) {

166 
cÚn
->
Ï¡_”ºo
 = 
”ºo
;

167 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

170  
»t
;

171 
	}
}

173 
	$cÚnSock‘R—d
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
) {

174 
»t
 = 
	`»ad
(
cÚn
->
fd
, 
buf
, 
buf_Ën
);

175 ià(!
»t
) {

176 
cÚn
->
¡©e
 = 
CONN_STATE_CLOSED
;

177 } ià(
»t
 < 0 && 
”ºo
 !ğ
EAGAIN
) {

178 
cÚn
->
Ï¡_”ºo
 = 
”ºo
;

179 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

182  
»t
;

183 
	}
}

185 
	$cÚnSock‘Acû±
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
acû±_hªdËr
) {

186 
»t
 = 
C_OK
;

188 ià(
cÚn
->
¡©e
 !ğ
CONN_STATE_ACCEPTING
è 
C_ERR
;

189 
cÚn
->
¡©e
 = 
CONN_STATE_CONNECTED
;

191 
	`cÚnInüRefs
(
cÚn
);

192 ià(!
	`ÿÎHªdËr
(
cÚn
, 
acû±_hªdËr
)è
»t
 = 
C_ERR
;

193 
	`cÚnDeüRefs
(
cÚn
);

195  
»t
;

196 
	}
}

206 
	$cÚnSock‘S‘Wr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
, 
b¬r›r
) {

207 ià(
func
 =ğ
cÚn
->
wr™e_hªdËr
è 
C_OK
;

209 
cÚn
->
wr™e_hªdËr
 = 
func
;

210 ià(
b¬r›r
)

211 
cÚn
->
æags
 |ğ
CONN_FLAG_WRITE_BARRIER
;

213 
cÚn
->
æags
 &ğ~
CONN_FLAG_WRITE_BARRIER
;

214 ià(!
cÚn
->
wr™e_hªdËr
)

215 
	`«D–‘eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,
AE_WRITABLE
);

217 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,
AE_WRITABLE
,

218 
cÚn
->
ty³
->
«_hªdËr
,cÚnè=ğ
AE_ERR
è 
C_ERR
;

219  
C_OK
;

220 
	}
}

225 
	$cÚnSock‘S‘R—dHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
) {

226 ià(
func
 =ğ
cÚn
->
»ad_hªdËr
è 
C_OK
;

228 
cÚn
->
»ad_hªdËr
 = 
func
;

229 ià(!
cÚn
->
»ad_hªdËr
)

230 
	`«D–‘eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,
AE_READABLE
);

232 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
,
cÚn
->
fd
,

233 
AE_READABLE
,
cÚn
->
ty³
->
«_hªdËr
,cÚnè=ğ
AE_ERR
è 
C_ERR
;

234  
C_OK
;

235 
	}
}

237 cÚ¡ *
	$cÚnSock‘G‘La¡E¼Ü
(
cÚÃùiÚ
 *
cÚn
) {

238  
	`¡»¼Ü
(
cÚn
->
Ï¡_”ºo
);

239 
	}
}

241 
	$cÚnSock‘Ev’tHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
ş›ÁD©a
, 
mask
)

243 
	`UNUSED
(
–
);

244 
	`UNUSED
(
fd
);

245 
cÚÃùiÚ
 *
cÚn
 = 
ş›ÁD©a
;

247 ià(
cÚn
->
¡©e
 =ğ
CONN_STATE_CONNECTING
 &&

248 (
mask
 & 
AE_WRITABLE
è&& 
cÚn
->
cÚn_hªdËr
) {

250 ià(
	`cÚnG‘Sock‘E¼Ü
(
cÚn
)) {

251 
cÚn
->
Ï¡_”ºo
 = 
”ºo
;

252 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

254 
cÚn
->
¡©e
 = 
CONN_STATE_CONNECTED
;

257 ià(!
cÚn
->
wr™e_hªdËr
è
	`«D–‘eFeEv’t
(
£rv”
.
–
,cÚn->
fd
,
AE_WRITABLE
);

259 ià(!
	`ÿÎHªdËr
(
cÚn
, cÚn->
cÚn_hªdËr
)) ;

260 
cÚn
->
cÚn_hªdËr
 = 
NULL
;

274 
šv”t
 = 
cÚn
->
æags
 & 
CONN_FLAG_WRITE_BARRIER
;

276 
ÿÎ_wr™e
 = (
mask
 & 
AE_WRITABLE
è&& 
cÚn
->
wr™e_hªdËr
;

277 
ÿÎ_»ad
 = (
mask
 & 
AE_READABLE
è&& 
cÚn
->
»ad_hªdËr
;

280 ià(!
šv”t
 && 
ÿÎ_»ad
) {

281 ià(!
	`ÿÎHªdËr
(
cÚn
, cÚn->
»ad_hªdËr
)) ;

284 ià(
ÿÎ_wr™e
) {

285 ià(!
	`ÿÎHªdËr
(
cÚn
, cÚn->
wr™e_hªdËr
)) ;

289 ià(
šv”t
 && 
ÿÎ_»ad
) {

290 ià(!
	`ÿÎHªdËr
(
cÚn
, cÚn->
»ad_hªdËr
)) ;

292 
	}
}

294 
	$cÚnSock‘BlockšgCÚÃù
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, 
timeout
) {

295 
fd
 = 
	`ª‘TıNÚBlockCÚÃù
(
NULL
,
addr
,
pÜt
);

296 ià(
fd
 == -1) {

297 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

298 
cÚn
->
Ï¡_”ºo
 = 
”ºo
;

299  
C_ERR
;

302 ià((
	`«Wa™
(
fd
, 
AE_WRITABLE
, 
timeout
) & AE_WRITABLE) == 0) {

303 
cÚn
->
¡©e
 = 
CONN_STATE_ERROR
;

304 
cÚn
->
Ï¡_”ºo
 = 
ETIMEDOUT
;

307 
cÚn
->
fd
 = fd;

308 
cÚn
->
¡©e
 = 
CONN_STATE_CONNECTED
;

309  
C_OK
;

310 
	}
}

316 
ssize_t
 
	$cÚnSock‘SyncWr™e
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

317  
	`syncWr™e
(
cÚn
->
fd
, 
±r
, 
size
, 
timeout
);

318 
	}
}

320 
ssize_t
 
	$cÚnSock‘SyncR—d
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

321  
	`syncR—d
(
cÚn
->
fd
, 
±r
, 
size
, 
timeout
);

322 
	}
}

324 
ssize_t
 
	$cÚnSock‘SyncR—dLše
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

325  
	`syncR—dLše
(
cÚn
->
fd
, 
±r
, 
size
, 
timeout
);

326 
	}
}

329 
CÚÃùiÚTy³
 
	gCT_Sock‘
 = {

330 .
«_hªdËr
 = 
cÚnSock‘Ev’tHªdËr
,

331 .
	gşo£
 = 
cÚnSock‘Clo£
,

332 .
	gwr™e
 = 
cÚnSock‘Wr™e
,

333 .
	g»ad
 = 
cÚnSock‘R—d
,

334 .
	gacû±
 = 
cÚnSock‘Acû±
,

335 .
	gcÚÃù
 = 
cÚnSock‘CÚÃù
,

336 .
	g£t_wr™e_hªdËr
 = 
cÚnSock‘S‘Wr™eHªdËr
,

337 .
	g£t_»ad_hªdËr
 = 
cÚnSock‘S‘R—dHªdËr
,

338 .
	gg‘_Ï¡_”rÜ
 = 
cÚnSock‘G‘La¡E¼Ü
,

339 .
	gblockšg_cÚÃù
 = 
cÚnSock‘BlockšgCÚÃù
,

340 .
	gsync_wr™e
 = 
cÚnSock‘SyncWr™e
,

341 .
	gsync_»ad
 = 
cÚnSock‘SyncR—d
,

342 .
	gsync_»adlše
 = 
cÚnSock‘SyncR—dLše


346 
	$cÚnG‘Sock‘E¼Ü
(
cÚÃùiÚ
 *
cÚn
) {

347 
sock”r
 = 0;

348 
sockËn_t
 
”¾’
 = (
sock”r
);

350 ià(
	`g‘sockİt
(
cÚn
->
fd
, 
SOL_SOCKET
, 
SO_ERROR
, &
sock”r
, &
”¾’
) == -1)

351 
sock”r
 = 
”ºo
;

352  
sock”r
;

353 
	}
}

355 
	$cÚnP“rToSŒšg
(
cÚÃùiÚ
 *
cÚn
, *

, 
size_t
 
_Ën
, *
pÜt
) {

356  
	`ª‘P“rToSŒšg
(
cÚn
 ? cÚn->
fd
 : -1, 

, 
_Ën
, 
pÜt
);

357 
	}
}

359 
	$cÚnFÜm©P“r
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
) {

360  
	`ª‘FÜm©P“r
(
cÚn
 ? cÚn->
fd
 : -1, 
buf
, 
buf_Ën
);

361 
	}
}

363 
	$cÚnSockName
(
cÚÃùiÚ
 *
cÚn
, *

, 
size_t
 
_Ën
, *
pÜt
) {

364  
	`ª‘SockName
(
cÚn
->
fd
, 

, 
_Ën
, 
pÜt
);

365 
	}
}

367 
	$cÚnBlock
(
cÚÃùiÚ
 *
cÚn
) {

368 ià(
cÚn
->
fd
 =ğ-1è 
C_ERR
;

369  
	`ª‘Block
(
NULL
, 
cÚn
->
fd
);

370 
	}
}

372 
	$cÚnNÚBlock
(
cÚÃùiÚ
 *
cÚn
) {

373 ià(
cÚn
->
fd
 =ğ-1è 
C_ERR
;

374  
	`ª‘NÚBlock
(
NULL
, 
cÚn
->
fd
);

375 
	}
}

377 
	$cÚnEÇbËTıNoD–ay
(
cÚÃùiÚ
 *
cÚn
) {

378 ià(
cÚn
->
fd
 =ğ-1è 
C_ERR
;

379  
	`ª‘EÇbËTıNoD–ay
(
NULL
, 
cÚn
->
fd
);

380 
	}
}

382 
	$cÚnDi§bËTıNoD–ay
(
cÚÃùiÚ
 *
cÚn
) {

383 ià(
cÚn
->
fd
 =ğ-1è 
C_ERR
;

384  
	`ª‘Di§bËTıNoD–ay
(
NULL
, 
cÚn
->
fd
);

385 
	}
}

387 
	$cÚnK“pAlive
(
cÚÃùiÚ
 *
cÚn
, 
š‹rv®
) {

388 ià(
cÚn
->
fd
 =ğ-1è 
C_ERR
;

389  
	`ª‘K“pAlive
(
NULL
, 
cÚn
->
fd
, 
š‹rv®
);

390 
	}
}

392 
	$cÚnS’dTimeout
(
cÚÃùiÚ
 *
cÚn
, 
ms
) {

393  
	`ª‘S’dTimeout
(
NULL
, 
cÚn
->
fd
, 
ms
);

394 
	}
}

396 
	$cÚnRecvTimeout
(
cÚÃùiÚ
 *
cÚn
, 
ms
) {

397  
	`ª‘RecvTimeout
(
NULL
, 
cÚn
->
fd
, 
ms
);

398 
	}
}

400 
	$cÚnG‘S‹
(
cÚÃùiÚ
 *
cÚn
) {

401  
cÚn
->
¡©e
;

402 
	}
}

409 cÚ¡ *
	$cÚnG‘Info
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
) {

410 
	`¢´štf
(
buf
, 
buf_Ën
-1, "fd=%i", 
cÚn
->
fd
);

411  
buf
;

412 
	}
}

	@connection.h

31 #iâdeà
__REDIS_CONNECTION_H


32 
	#__REDIS_CONNECTION_H


	)

34 
	#CONN_INFO_LEN
 32

	)

36 
	g«Ev’tLoİ
;

37 
cÚÃùiÚ
 
	tcÚÃùiÚ
;

40 
	mCONN_STATE_NONE
 = 0,

41 
	mCONN_STATE_CONNECTING
,

42 
	mCONN_STATE_ACCEPTING
,

43 
	mCONN_STATE_CONNECTED
,

44 
	mCONN_STATE_CLOSED
,

45 
	mCONN_STATE_ERROR


46 } 
	tCÚÃùiÚS‹
;

48 
	#CONN_FLAG_CLOSE_SCHEDULED
 (1<<0è

	)

49 
	#CONN_FLAG_WRITE_BARRIER
 (1<<1è

	)

51 (*
	tCÚÃùiÚC®lbackFunc
)(
	tcÚÃùiÚ
 *
	tcÚn
);

53 
	sCÚÃùiÚTy³
 {

54 (*
«_hªdËr
)(
«Ev’tLoİ
 *
–
, 
fd
, *
ş›ÁD©a
, 
mask
);

55 (*
cÚÃù
)(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
sourû_addr
, 
CÚÃùiÚC®lbackFunc
 
cÚÃù_hªdËr
);

56 (*
wr™e
)(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
d©a
, 
size_t
 
d©a_Ën
);

57 (*
»ad
)(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
);

58 (*
şo£
)(
cÚÃùiÚ
 *
cÚn
);

59 (*
acû±
)(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
acû±_hªdËr
);

60 (*
£t_wr™e_hªdËr
)(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
hªdËr
, 
b¬r›r
);

61 (*
£t_»ad_hªdËr
)(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
hªdËr
);

62 cÚ¡ *(*
g‘_Ï¡_”rÜ
)(
cÚÃùiÚ
 *
cÚn
);

63 (*
blockšg_cÚÃù
)(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, 
timeout
);

64 
	`ssize_t
 (*
sync_wr™e
)(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
);

65 
	`ssize_t
 (*
sync_»ad
)(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
);

66 
	`ssize_t
 (*
sync_»adlše
)(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
);

67 } 
	tCÚÃùiÚTy³
;

69 
	scÚÃùiÚ
 {

70 
CÚÃùiÚTy³
 *
ty³
;

71 
CÚÃùiÚS‹
 
¡©e
;

72 
æags
;

73 
»fs
;

74 
Ï¡_”ºo
;

75 *
´iv©e_d©a
;

76 
CÚÃùiÚC®lbackFunc
 
cÚn_hªdËr
;

77 
CÚÃùiÚC®lbackFunc
 
wr™e_hªdËr
;

78 
CÚÃùiÚC®lbackFunc
 
»ad_hªdËr
;

79 
fd
;

100 
šlše
 
	$cÚnAcû±
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
acû±_hªdËr
) {

101  
cÚn
->
ty³
->
	`acû±
(cÚn, 
acû±_hªdËr
);

102 
	}
}

113 
šlše
 
	$cÚnCÚÃù
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
¤c_addr
,

114 
CÚÃùiÚC®lbackFunc
 
cÚÃù_hªdËr
) {

115  
cÚn
->
ty³
->
	`cÚÃù
(cÚn, 
addr
, 
pÜt
, 
¤c_addr
, 
cÚÃù_hªdËr
);

116 
	}
}

124 
šlše
 
	$cÚnBlockšgCÚÃù
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
addr
, 
pÜt
, 
timeout
) {

125  
cÚn
->
ty³
->
	`blockšg_cÚÃù
(cÚn, 
addr
, 
pÜt
, 
timeout
);

126 
	}
}

135 
šlše
 
	$cÚnWr™e
(
cÚÃùiÚ
 *
cÚn
, cÚ¡ *
d©a
, 
size_t
 
d©a_Ën
) {

136  
cÚn
->
ty³
->
	`wr™e
(cÚn, 
d©a
, 
d©a_Ën
);

137 
	}
}

147 
šlše
 
	$cÚnR—d
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
) {

148  
cÚn
->
ty³
->
	`»ad
(cÚn, 
buf
, 
buf_Ën
);

149 
	}
}

154 
šlše
 
	$cÚnS‘Wr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
) {

155  
cÚn
->
ty³
->
	`£t_wr™e_hªdËr
(cÚn, 
func
, 0);

156 
	}
}

161 
šlše
 
	$cÚnS‘R—dHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
) {

162  
cÚn
->
ty³
->
	`£t_»ad_hªdËr
(cÚn, 
func
);

163 
	}
}

170 
šlše
 
	$cÚnS‘Wr™eHªdËrW™hB¬r›r
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
, 
b¬r›r
) {

171  
cÚn
->
ty³
->
	`£t_wr™e_hªdËr
(cÚn, 
func
, 
b¬r›r
);

172 
	}
}

174 
šlše
 
	$cÚnClo£
(
cÚÃùiÚ
 *
cÚn
) {

175 
cÚn
->
ty³
->
	`şo£
(conn);

176 
	}
}

181 
šlše
 cÚ¡ *
	$cÚnG‘La¡E¼Ü
(
cÚÃùiÚ
 *
cÚn
) {

182  
cÚn
->
ty³
->
	`g‘_Ï¡_”rÜ
(conn);

183 
	}
}

185 
šlše
 
ssize_t
 
	$cÚnSyncWr™e
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

186  
cÚn
->
ty³
->
	`sync_wr™e
(cÚn, 
±r
, 
size
, 
timeout
);

187 
	}
}

189 
šlše
 
ssize_t
 
	$cÚnSyncR—d
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

190  
cÚn
->
ty³
->
	`sync_»ad
(cÚn, 
±r
, 
size
, 
timeout
);

191 
	}
}

193 
šlše
 
ssize_t
 
	$cÚnSyncR—dLše
(
cÚÃùiÚ
 *
cÚn
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

194  
cÚn
->
ty³
->
	`sync_»adlše
(cÚn, 
±r
, 
size
, 
timeout
);

195 
	}
}

197 
cÚÃùiÚ
 *
cÚnC»©eSock‘
();

198 
cÚÃùiÚ
 *
cÚnC»©eAcû±edSock‘
(
fd
);

200 
cÚÃùiÚ
 *
cÚnC»©eTLS
();

201 
cÚÃùiÚ
 *
cÚnC»©eAcû±edTLS
(
fd
, 
»quœe_auth
);

203 
cÚnS‘Priv©eD©a
(
cÚÃùiÚ
 *
cÚn
, *
d©a
);

204 *
cÚnG‘Priv©eD©a
(
cÚÃùiÚ
 *
cÚn
);

205 
cÚnG‘S‹
(
cÚÃùiÚ
 *
cÚn
);

206 
cÚnHasWr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
);

207 
cÚnHasR—dHªdËr
(
cÚÃùiÚ
 *
cÚn
);

208 
cÚnG‘Sock‘E¼Ü
(
cÚÃùiÚ
 *
cÚn
);

211 
cÚnBlock
(
cÚÃùiÚ
 *
cÚn
);

212 
cÚnNÚBlock
(
cÚÃùiÚ
 *
cÚn
);

213 
cÚnEÇbËTıNoD–ay
(
cÚÃùiÚ
 *
cÚn
);

214 
cÚnDi§bËTıNoD–ay
(
cÚÃùiÚ
 *
cÚn
);

215 
cÚnK“pAlive
(
cÚÃùiÚ
 *
cÚn
, 
š‹rv®
);

216 
cÚnS’dTimeout
(
cÚÃùiÚ
 *
cÚn
, 
ms
);

217 
cÚnRecvTimeout
(
cÚÃùiÚ
 *
cÚn
, 
ms
);

218 
cÚnP“rToSŒšg
(
cÚÃùiÚ
 *
cÚn
, *

, 
size_t
 
_Ën
, *
pÜt
);

219 
cÚnFÜm©P“r
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
);

220 
cÚnSockName
(
cÚÃùiÚ
 *
cÚn
, *

, 
size_t
 
_Ën
, *
pÜt
);

221 cÚ¡ *
cÚnG‘Info
(
cÚÃùiÚ
 *
cÚn
, *
buf
, 
size_t
 
buf_Ën
);

224 
sHasP’dšgD©a
();

225 
sProûssP’dšgD©a
();

	@connhelpers.h

31 #iâdeà
__REDIS_CONNHELPERS_H


32 
	#__REDIS_CONNHELPERS_H


	)

34 
	~"cÚÃùiÚ.h
"

52 
šlše
 
	$cÚnInüRefs
(
cÚÃùiÚ
 *
cÚn
) {

53 
cÚn
->
»fs
++;

54 
	}
}

64 
šlše
 
	$cÚnDeüRefs
(
cÚÃùiÚ
 *
cÚn
) {

65 
cÚn
->
»fs
--;

66 
	}
}

68 
šlše
 
	$cÚnHasRefs
(
cÚÃùiÚ
 *
cÚn
) {

69  
cÚn
->
»fs
;

70 
	}
}

77 
šlše
 
	$ÿÎHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
hªdËr
) {

78 
	`cÚnInüRefs
(
cÚn
);

79 ià(
hªdËr
è
	`hªdËr
(
cÚn
);

80 
	`cÚnDeüRefs
(
cÚn
);

81 ià(
cÚn
->
æags
 & 
CONN_FLAG_CLOSE_SCHEDULED
) {

82 ià(!
	`cÚnHasRefs
(
cÚn
)è
	`cÚnClo£
(conn);

86 
	}
}

	@crc16.c

1 
	~"£rv”.h
"

47 cÚ¡ 
ušt16_t
 
	güc16b
[256]= {

82 
ušt16_t
 
	$üc16
(cÚ¡ *
buf
, 
Ën
) {

83 
couÁ”
;

84 
ušt16_t
 
üc
 = 0;

85 
couÁ”
 = 0; couÁ” < 
Ën
; counter++)

86 
üc
 = (üc<<8è^ 
üc16b
[((üc>>8è^ *
buf
++)&0x00FF];

87  
üc
;

88 
	}
}

	@crc16_slottable.h

1 #iâdeà
_CRC16_TABLE_H__


2 
	#_CRC16_TABLE_H__


	)

11 cÚ¡ *
	güc16_¦Ù_bË
[] = {

	@crc64.c

29 
	~"üc64.h
"

30 
	~"üc¥“d.h
"

31 
ušt64_t
 
	güc64_bË
[8][256] = {{0}};

33 
	#POLY
 
	`UINT64_C
(0xad93d23594c935a9)

	)

69 
šlše
 
ušt_ç¡64_t
 
	$üc_»æeù
(
ušt_ç¡64_t
 
d©a
, 
size_t
 
d©a_Ën
) {

70 
ušt_ç¡64_t
 
»t
 = 
d©a
 & 0x01;

72 
size_t
 
i
 = 1; i < 
d©a_Ën
; i++) {

73 
d©a
 >>= 1;

74 
»t
 = (»ˆ<< 1è| (
d©a
 & 0x01);

77  
»t
;

78 
	}
}

88 
ušt64_t
 
	$_üc64
(
ušt_ç¡64_t
 
üc
, cÚ¡ *
š_d©a
, cÚ¡ 
ušt64_t
 
Ën
) {

89 cÚ¡ 
ušt8_t
 *
d©a
 = 
š_d©a
;

90 
b™
;

92 
ušt64_t
 
off£t
 = 0; off£ˆ< 
Ën
; offset++) {

93 
ušt8_t
 
c
 = 
d©a
[
off£t
];

94 
ušt_ç¡8_t
 
i
 = 0x01; i & 0xff; i <<= 1) {

95 
b™
 = 
üc
 & 0x8000000000000000;

96 ià(
c
 & 
i
) {

97 
b™
 = !bit;

100 
üc
 <<= 1;

101 ià(
b™
) {

102 
üc
 ^ğ
POLY
;

106 
üc
 &= 0xffffffffffffffff;

109 
üc
 = crc & 0xffffffffffffffff;

110  
	`üc_»æeù
(
üc
, 64) ^ 0x0000000000000000;

111 
	}
}

116 
	$üc64_š™
() {

117 
	`üc¥“d64Çtive_š™
(
_üc64
, 
üc64_bË
);

118 
	}
}

121 
ušt64_t
 
	$üc64
(
ušt64_t
 
üc
, cÚ¡ *
s
, ušt64_ˆ
l
) {

122  
	`üc¥“d64Çtive
(
üc64_bË
, 
üc
, (*è
s
, 
l
);

123 
	}
}

126 #ifdeà
REDIS_TEST


127 
	~<¡dio.h
>

129 
	#UNUSED
(
x
è()(x)

	)

130 
	$üc64Te¡
(
¬gc
, *
¬gv
[]) {

131 
	`UNUSED
(
¬gc
);

132 
	`UNUSED
(
¬gv
);

133 
	`üc64_š™
();

134 
	`´štf
("[ÿlcuÏ]:ƒ9c6d914c4b8d9ÿ =ğ%016" 
PRIx64
 "\n",

135 (
ušt64_t
)
	`_üc64
(0, "123456789", 9));

136 
	`´štf
("[64¥“d]:ƒ9c6d914c4b8d9ÿ =ğ%016" 
PRIx64
 "\n",

137 (
ušt64_t
)
	`üc64
(0, "123456789", 9));

138 
li
[] = "Lorem ipsum dolor sit‡met, consectetur‡dipiscingƒlit, sed "

146 
	`´štf
("[ÿlcuÏ]: c7794709e69683b3 =ğ%016" 
PRIx64
 "\n",

147 (
ušt64_t
)
	`_üc64
(0, 
li
, (li)));

148 
	`´štf
("[64¥“d]: c7794709e69683b3 =ğ%016" 
PRIx64
 "\n",

149 (
ušt64_t
)
	`üc64
(0, 
li
, (li)));

151 
	}
}

155 #ifdeà
REDIS_TEST_MAIN


156 
	$maš
(
¬gc
, *
¬gv
[]) {

157  
	`üc64Te¡
(
¬gc
, 
¬gv
);

158 
	}
}

	@crc64.h

1 #iâdeà
CRC64_H


2 
	#CRC64_H


	)

4 
	~<¡dšt.h
>

6 
üc64_š™
();

7 
ušt64_t
 
üc64
(ušt64_ˆ
üc
, cÚ¡ *
s
, ušt64_ˆ
l
);

9 #ifdeà
REDIS_TEST


10 
üc64Te¡
(
¬gc
, *
¬gv
[]);

	@crcspeed.c

30 
	~"üc¥“d.h
"

33 
	$üc¥“d64l™e_š™
(
ücâ64
 
ücâ
, 
ušt64_t
 
bË
[8][256]) {

34 
ušt64_t
 
üc
;

37 
n
 = 0;‚ < 256;‚++) {

38 
bË
[0][
n
] = 
	`ücâ
(0, &n, 1);

42 
n
 = 0;‚ < 256;‚++) {

43 
üc
 = 
bË
[0][
n
];

44 
k
 = 1; k < 8; k++) {

45 
üc
 = 
bË
[0][crc & 0xff] ^ (crc >> 8);

46 
bË
[
k
][
n
] = 
üc
;

49 
	}
}

51 
	$üc¥“d16l™e_š™
(
ücâ16
 
ücâ
, 
ušt16_t
 
bË
[8][256]) {

52 
ušt16_t
 
üc
;

55 
n
 = 0;‚ < 256;‚++) {

56 
bË
[0][
n
] = 
	`ücâ
(0, &n, 1);

60 
n
 = 0;‚ < 256;‚++) {

61 
üc
 = 
bË
[0][
n
];

62 
k
 = 1; k < 8; k++) {

63 
üc
 = 
bË
[0][(crc >> 8) & 0xff] ^ (crc << 8);

64 
bË
[
k
][
n
] = 
üc
;

67 
	}
}

70 
šlše
 
ušt64_t
 
	$»v8
(
ušt64_t
 
a
) {

71 #ià
	`defšed
(
__GNUC__
è|| defšed(
__şªg__
)

72  
	`__butš_bsw­64
(
a
);

74 
ušt64_t
 
m
;

76 
m
 = 
	`UINT64_C
(0xff00ff00ff00ff);

77 
a
 = (× >> 8è& 
m
) | (a & m) << 8;

78 
m
 = 
	`UINT64_C
(0xffff0000ffff);

79 
a
 = (× >> 16è& 
m
) | (a & m) << 16;

80  
a
 >> 32 |‡ << 32;

82 
	}
}

86 
	$üc¥“d64big_š™
(
ücâ64
 
â
, 
ušt64_t
 
big_bË
[8][256]) {

88 
	`üc¥“d64l™e_š™
(
â
, 
big_bË
);

89 
k
 = 0; k < 8; k++) {

90 
n
 = 0;‚ < 256;‚++) {

91 
big_bË
[
k
][
n
] = 
	`»v8
(big_table[k][n]);

94 
	}
}

96 
	$üc¥“d16big_š™
(
ücâ16
 
â
, 
ušt16_t
 
big_bË
[8][256]) {

98 
	`üc¥“d16l™e_š™
(
â
, 
big_bË
);

99 
k
 = 0; k < 8; k++) {

100 
n
 = 0;‚ < 256;‚++) {

101 
big_bË
[
k
][
n
] = 
	`»v8
(big_table[k][n]);

104 
	}
}

111 
ušt64_t
 
	$üc¥“d64l™e
(
ušt64_t
 
l™e_bË
[8][256], ušt64_ˆ
üc
,

112 *
buf
, 
size_t
 
Ën
) {

113 *
Ãxt
 = 
buf
;

116 
Ën
 && ((
ušŒ_t
)
Ãxt
 & 7) != 0) {

117 
üc
 = 
l™e_bË
[0][(üø^ *
Ãxt
++) & 0xff] ^ (crc >> 8);

118 
Ën
--;

122 
Ën
 >= 8) {

123 
üc
 ^ğ*(
ušt64_t
 *)
Ãxt
;

124 
üc
 = 
l™e_bË
[7][crc & 0xff] ^

125 
l™e_bË
[6][(
üc
 >> 8) & 0xff] ^

126 
l™e_bË
[5][(
üc
 >> 16) & 0xff] ^

127 
l™e_bË
[4][(
üc
 >> 24) & 0xff] ^

128 
l™e_bË
[3][(
üc
 >> 32) & 0xff] ^

129 
l™e_bË
[2][(
üc
 >> 40) & 0xff] ^

130 
l™e_bË
[1][(
üc
 >> 48) & 0xff] ^

131 
l™e_bË
[0][
üc
 >> 56];

132 
Ãxt
 += 8;

133 
Ën
 -= 8;

137 
Ën
) {

138 
üc
 = 
l™e_bË
[0][(üø^ *
Ãxt
++) & 0xff] ^ (crc >> 8);

139 
Ën
--;

142  
üc
;

143 
	}
}

145 
ušt16_t
 
	$üc¥“d16l™e
(
ušt16_t
 
l™e_bË
[8][256], ušt16_ˆ
üc
,

146 *
buf
, 
size_t
 
Ën
) {

147 *
Ãxt
 = 
buf
;

150 
Ën
 && ((
ušŒ_t
)
Ãxt
 & 7) != 0) {

151 
üc
 = 
l™e_bË
[0][((üø>> 8è^ *
Ãxt
++) & 0xff] ^ (crc << 8);

152 
Ën
--;

156 
Ën
 >= 8) {

157 
ušt64_t
 
n
 = *(ušt64_ˆ*)
Ãxt
;

158 
üc
 = 
l™e_bË
[7][(
n
 & 0xff) ^ ((crc >> 8) & 0xff)] ^

159 
l™e_bË
[6][((
n
 >> 8è& 0xffè^ (
üc
 & 0xff)] ^

160 
l™e_bË
[5][(
n
 >> 16) & 0xff] ^

161 
l™e_bË
[4][(
n
 >> 24) & 0xff] ^

162 
l™e_bË
[3][(
n
 >> 32) & 0xff] ^

163 
l™e_bË
[2][(
n
 >> 40) & 0xff] ^

164 
l™e_bË
[1][(
n
 >> 48) & 0xff] ^

165 
l™e_bË
[0][
n
 >> 56];

166 
Ãxt
 += 8;

167 
Ën
 -= 8;

171 
Ën
) {

172 
üc
 = 
l™e_bË
[0][((üø>> 8è^ *
Ãxt
++) & 0xff] ^ (crc << 8);

173 
Ën
--;

176  
üc
;

177 
	}
}

182 
ušt64_t
 
	$üc¥“d64big
(
ušt64_t
 
big_bË
[8][256], ušt64_ˆ
üc
, *
buf
,

183 
size_t
 
Ën
) {

184 *
Ãxt
 = 
buf
;

186 
üc
 = 
	`»v8
(crc);

187 
Ën
 && ((
ušŒ_t
)
Ãxt
 & 7) != 0) {

188 
üc
 = 
big_bË
[0][(üø>> 56è^ *
Ãxt
++] ^ (crc << 8);

189 
Ën
--;

192 
Ën
 >= 8) {

193 
üc
 ^ğ*(
ušt64_t
 *)
Ãxt
;

194 
üc
 = 
big_bË
[0][crc & 0xff] ^

195 
big_bË
[1][(
üc
 >> 8) & 0xff] ^

196 
big_bË
[2][(
üc
 >> 16) & 0xff] ^

197 
big_bË
[3][(
üc
 >> 24) & 0xff] ^

198 
big_bË
[4][(
üc
 >> 32) & 0xff] ^

199 
big_bË
[5][(
üc
 >> 40) & 0xff] ^

200 
big_bË
[6][(
üc
 >> 48) & 0xff] ^

201 
big_bË
[7][
üc
 >> 56];

202 
Ãxt
 += 8;

203 
Ën
 -= 8;

206 
Ën
) {

207 
üc
 = 
big_bË
[0][(üø>> 56è^ *
Ãxt
++] ^ (crc << 8);

208 
Ën
--;

211  
	`»v8
(
üc
);

212 
	}
}

215 
ušt16_t
 
	$üc¥“d16big
(
ušt16_t
 
big_bË
[8][256], ušt16_ˆ
üc_š
, *
buf
,

216 
size_t
 
Ën
) {

217 *
Ãxt
 = 
buf
;

218 
ušt64_t
 
üc
 = 
üc_š
;

220 
üc
 = 
	`»v8
(crc);

221 
Ën
 && ((
ušŒ_t
)
Ãxt
 & 7) != 0) {

222 
üc
 = 
big_bË
[0][((üø>> (56 - 8)è^ *
Ãxt
++) & 0xff] ^ (crc >> 8);

223 
Ën
--;

226 
Ën
 >= 8) {

227 
ušt64_t
 
n
 = *(ušt64_ˆ*)
Ãxt
;

228 
üc
 = 
big_bË
[0][(
n
 & 0xff) ^ ((crc >> (56 - 8)) & 0xff)] ^

229 
big_bË
[1][((
n
 >> 8è& 0xffè^ (
üc
 & 0xff)] ^

230 
big_bË
[2][(
n
 >> 16) & 0xff] ^

231 
big_bË
[3][(
n
 >> 24) & 0xff] ^

232 
big_bË
[4][(
n
 >> 32) & 0xff] ^

233 
big_bË
[5][(
n
 >> 40) & 0xff] ^

234 
big_bË
[6][(
n
 >> 48) & 0xff] ^

235 
big_bË
[7][
n
 >> 56];

236 
Ãxt
 += 8;

237 
Ën
 -= 8;

240 
Ën
) {

241 
üc
 = 
big_bË
[0][((üø>> (56 - 8)è^ *
Ãxt
++) & 0xff] ^ (crc >> 8);

242 
Ën
--;

245  
	`»v8
(
üc
);

246 
	}
}

252 
ušt64_t
 
	$üc¥“d64Çtive
(
ušt64_t
 
bË
[8][256], ušt64_ˆ
üc
, *
buf
,

253 
size_t
 
Ën
) {

254 
ušt64_t
 
n
 = 1;

256  *(*)&
n
 ? 
	`üc¥“d64l™e
(
bË
, 
üc
, 
buf
, 
Ën
)

257 : 
	`üc¥“d64big
(
bË
, 
üc
, 
buf
, 
Ën
);

258 
	}
}

260 
ušt16_t
 
	$üc¥“d16Çtive
(
ušt16_t
 
bË
[8][256], ušt16_ˆ
üc
, *
buf
,

261 
size_t
 
Ën
) {

262 
ušt64_t
 
n
 = 1;

264  *(*)&
n
 ? 
	`üc¥“d16l™e
(
bË
, 
üc
, 
buf
, 
Ën
)

265 : 
	`üc¥“d16big
(
bË
, 
üc
, 
buf
, 
Ën
);

266 
	}
}

269 
	$üc¥“d64Çtive_š™
(
ücâ64
 
â
, 
ušt64_t
 
bË
[8][256]) {

270 
ušt64_t
 
n
 = 1;

272 *(*)&
n
 ? 
	`üc¥“d64l™e_š™
(
â
, 
bË
)

273 : 
	`üc¥“d64big_š™
(
â
, 
bË
);

274 
	}
}

276 
	$üc¥“d16Çtive_š™
(
ücâ16
 
â
, 
ušt16_t
 
bË
[8][256]) {

277 
ušt64_t
 
n
 = 1;

279 *(*)&
n
 ? 
	`üc¥“d16l™e_š™
(
â
, 
bË
)

280 : 
	`üc¥“d16big_š™
(
â
, 
bË
);

281 
	}
}

	@crcspeed.h

28 #iâdeà
CRCSPEED_H


29 
	#CRCSPEED_H


	)

31 
	~<š‰y³s.h
>

32 
	~<¡dio.h
>

34 
	$ušt64_t
 (*
	tücâ64
)(
	tušt64_t
, const *, const uint64_t);

35 
	$ušt16_t
 (*
	tücâ16
)(
	tušt16_t
, cÚ¡ *, cÚ¡ 
	tušt64_t
);

38 
	`üc¥“d64l™e_š™
(
ücâ64
 
â
, 
ušt64_t
 
bË
[8][256]);

39 
	`üc¥“d64big_š™
(
ücâ64
 
â
, 
ušt64_t
 
bË
[8][256]);

40 
	`üc¥“d64Çtive_š™
(
ücâ64
 
â
, 
ušt64_t
 
bË
[8][256]);

42 
ušt64_t
 
	`üc¥“d64l™e
(ušt64_ˆ
bË
[8][256], ušt64_ˆ
üc
, *
buf
,

43 
size_t
 
Ën
);

44 
ušt64_t
 
	`üc¥“d64big
(ušt64_ˆ
bË
[8][256], ušt64_ˆ
üc
, *
buf
,

45 
size_t
 
Ën
);

46 
ušt64_t
 
	`üc¥“d64Çtive
(ušt64_ˆ
bË
[8][256], ušt64_ˆ
üc
, *
buf
,

47 
size_t
 
Ën
);

50 
	`üc¥“d16l™e_š™
(
ücâ16
 
â
, 
ušt16_t
 
bË
[8][256]);

51 
	`üc¥“d16big_š™
(
ücâ16
 
â
, 
ušt16_t
 
bË
[8][256]);

52 
	`üc¥“d16Çtive_š™
(
ücâ16
 
â
, 
ušt16_t
 
bË
[8][256]);

54 
ušt16_t
 
	`üc¥“d16l™e
(ušt16_ˆ
bË
[8][256], ušt16_ˆ
üc
, *
buf
,

55 
size_t
 
Ën
);

56 
ušt16_t
 
	`üc¥“d16big
(ušt16_ˆ
bË
[8][256], ušt16_ˆ
üc
, *
buf
,

57 
size_t
 
Ën
);

58 
ušt16_t
 
	`üc¥“d16Çtive
(ušt16_ˆ
bË
[8][256], ušt16_ˆ
üc
, *
buf
,

59 
size_t
 
Ën
);

	@db.c

30 
	~"£rv”.h
"

31 
	~"şu¡”.h
"

32 
	~"©omicv¬.h
"

34 
	~<sigÇl.h
>

35 
	~<ùy³.h
>

41 
keyIsExpœed
(
»disDb
 *
db
, 
robj
 *
key
);

46 
	$upd©eLFU
(
robj
 *
v®
) {

47 
couÁ”
 = 
	`LFUDeüAndR‘uº
(
v®
);

48 
couÁ”
 = 
	`LFULogInü
(counter);

49 
v®
->
Ìu
 = (
	`LFUG‘TimeInMšu‹s
()<<8è| 
couÁ”
;

50 
	}
}

55 
robj
 *
	$lookupKey
(
»disDb
 *
db
, 
robj
 *
key
, 
æags
) {

56 
diùEÁry
 *
de
 = 
	`diùFšd
(
db
->
diù
,
key
->
±r
);

57 ià(
de
) {

58 
robj
 *
v®
 = 
	`diùG‘V®
(
de
);

63 ià(!
	`hasAùiveChdProûss
(è&& !(
æags
 & 
LOOKUP_NOTOUCH
)){

64 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

65 
	`upd©eLFU
(
v®
);

67 
v®
->
Ìu
 = 
	`LRU_CLOCK
();

70  
v®
;

72  
NULL
;

74 
	}
}

98 
robj
 *
	$lookupKeyR—dW™hFÏgs
(
»disDb
 *
db
, 
robj
 *
key
, 
æags
) {

99 
robj
 *
v®
;

101 ià(
	`expœeIfN“ded
(
db
,
key
) == 1) {

105 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
) {

106 
£rv”
.
¡©_key¥aû_mis£s
++;

107 
	`nÙifyKey¥aûEv’t
(
NOTIFY_KEY_MISS
, "keymiss", 
key
, 
db
->
id
);

108  
NULL
;

123 ià(
£rv”
.
cu¼’t_ş›Á
 &&

124 
£rv”
.
cu¼’t_ş›Á
 !ğ£rv”.
ma¡”
 &&

125 
£rv”
.
cu¼’t_ş›Á
->
cmd
 &&

126 
£rv”
.
cu¼’t_ş›Á
->
cmd
->
æags
 & 
CMD_READONLY
)

128 
£rv”
.
¡©_key¥aû_mis£s
++;

129 
	`nÙifyKey¥aûEv’t
(
NOTIFY_KEY_MISS
, "keymiss", 
key
, 
db
->
id
);

130  
NULL
;

133 
v®
 = 
	`lookupKey
(
db
,
key
,
æags
);

134 ià(
v®
 =ğ
NULL
) {

135 
£rv”
.
¡©_key¥aû_mis£s
++;

136 
	`nÙifyKey¥aûEv’t
(
NOTIFY_KEY_MISS
, "keymiss", 
key
, 
db
->
id
);

139 
£rv”
.
¡©_key¥aû_h™s
++;

140  
v®
;

141 
	}
}

145 
robj
 *
	$lookupKeyR—d
(
»disDb
 *
db
, 
robj
 *
key
) {

146  
	`lookupKeyR—dW™hFÏgs
(
db
,
key
,
LOOKUP_NONE
);

147 
	}
}

154 
robj
 *
	$lookupKeyWr™eW™hFÏgs
(
»disDb
 *
db
, 
robj
 *
key
, 
æags
) {

155 
	`expœeIfN“ded
(
db
,
key
);

156  
	`lookupKey
(
db
,
key
,
æags
);

157 
	}
}

159 
robj
 *
	$lookupKeyWr™e
(
»disDb
 *
db
, 
robj
 *
key
) {

160  
	`lookupKeyWr™eW™hFÏgs
(
db
, 
key
, 
LOOKUP_NONE
);

161 
	}
}

163 
robj
 *
	$lookupKeyR—dOrR•ly
(
ş›Á
 *
c
, 
robj
 *
key
,„obj *
»¶y
) {

164 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
, 
key
);

165 ià(!
o
è
	`addR•ly
(
c
,
»¶y
);

166  
o
;

167 
	}
}

169 
robj
 *
	$lookupKeyWr™eOrR•ly
(
ş›Á
 *
c
, 
robj
 *
key
,„obj *
»¶y
) {

170 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
, 
key
);

171 ià(!
o
è
	`addR•ly
(
c
,
»¶y
);

172  
o
;

173 
	}
}

179 
	$dbAdd
(
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
) {

180 
sds
 
cİy
 = 
	`sdsdup
(
key
->
±r
);

181 
»tv®
 = 
	`diùAdd
(
db
->
diù
, 
cİy
, 
v®
);

183 
	`£rv”As£¹W™hInfo
(
NULL
,
key
,
»tv®
 =ğ
DICT_OK
);

184 ià(
v®
->
ty³
 =ğ
OBJ_LIST
 ||

185 
v®
->
ty³
 =ğ
OBJ_ZSET
 ||

186 
v®
->
ty³
 =ğ
OBJ_STREAM
)

187 
	`sigÇlKeyAsR—dy
(
db
, 
key
);

188 ià(
£rv”
.
şu¡”_’abËd
è
	`¦ÙToKeyAdd
(
key
->
±r
);

189 
	}
}

202 
	$dbAddRDBLßd
(
»disDb
 *
db
, 
sds
 
key
, 
robj
 *
v®
) {

203 
»tv®
 = 
	`diùAdd
(
db
->
diù
, 
key
, 
v®
);

204 ià(
»tv®
 !ğ
DICT_OK
)  0;

205 ià(
£rv”
.
şu¡”_’abËd
è
	`¦ÙToKeyAdd
(
key
);

207 
	}
}

214 
	$dbOv”wr™e
(
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
) {

215 
diùEÁry
 *
de
 = 
	`diùFšd
(
db
->
diù
,
key
->
±r
);

217 
	`£rv”As£¹W™hInfo
(
NULL
,
key
,
de
 != NULL);

218 
diùEÁry
 
aux’Œy
 = *
de
;

219 
robj
 *
Şd
 = 
	`diùG‘V®
(
de
);

220 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

221 
v®
->
Ìu
 = 
Şd
->lru;

223 
	`diùS‘V®
(
db
->
diù
, 
de
, 
v®
);

225 ià(
£rv”
.
Ïzyä“_Ïzy_£rv”_d–
) {

226 
	`ä“ObjAsync
(
Şd
);

227 
	`diùS‘V®
(
db
->
diù
, &
aux’Œy
, 
NULL
);

230 
	`diùF»eV®
(
db
->
diù
, &
aux’Œy
);

231 
	}
}

244 
	$g’”icS‘Key
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
, 
k“±
, 
sigÇl
) {

245 ià(
	`lookupKeyWr™e
(
db
,
key
è=ğ
NULL
) {

246 
	`dbAdd
(
db
,
key
,
v®
);

248 
	`dbOv”wr™e
(
db
,
key
,
v®
);

250 
	`šüRefCouÁ
(
v®
);

251 ià(!
k“±
è
	`»moveExpœe
(
db
,
key
);

252 ià(
sigÇl
è
	`sigÇlModif›dKey
(
c
,
db
,
key
);

253 
	}
}

256 
	$£tKey
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
) {

257 
	`g’”icS‘Key
(
c
,
db
,
key
,
v®
,0,1);

258 
	}
}

262 
	$dbExi¡s
(
»disDb
 *
db
, 
robj
 *
key
) {

263  
	`diùFšd
(
db
->
diù
,
key
->
±r
è!ğ
NULL
;

264 
	}
}

270 
robj
 *
	$dbRªdomKey
(
»disDb
 *
db
) {

271 
diùEÁry
 *
de
;

272 
maxŒ›s
 = 100;

273 
®lvŞ©e
 = 
	`diùSize
(
db
->
diù
è=ğdiùSize(db->
expœes
);

276 
sds
 
key
;

277 
robj
 *
keyobj
;

279 
de
 = 
	`diùG‘FaœRªdomKey
(
db
->
diù
);

280 ià(
de
 =ğ
NULL
)  NULL;

282 
key
 = 
	`diùG‘Key
(
de
);

283 
keyobj
 = 
	`ü—‹SŒšgObjeù
(
key
,
	`sd¦’
(key));

284 ià(
	`diùFšd
(
db
->
expœes
,
key
)) {

285 ià(
®lvŞ©e
 && 
£rv”
.
ma¡”ho¡
 && --
maxŒ›s
 == 0) {

294  
keyobj
;

296 ià(
	`expœeIfN“ded
(
db
,
keyobj
)) {

297 
	`deüRefCouÁ
(
keyobj
);

301  
keyobj
;

303 
	}
}

306 
	$dbSyncD–‘e
(
»disDb
 *
db
, 
robj
 *
key
) {

309 ià(
	`diùSize
(
db
->
expœes
è> 0è
	`diùD–‘e
(db->expœes,
key
->
±r
);

310 ià(
	`diùD–‘e
(
db
->
diù
,
key
->
±r
è=ğ
DICT_OK
) {

311 ià(
£rv”
.
şu¡”_’abËd
è
	`¦ÙToKeyD–
(
key
->
±r
);

316 
	}
}

320 
	$dbD–‘e
(
»disDb
 *
db
, 
robj
 *
key
) {

321  
£rv”
.
Ïzyä“_Ïzy_£rv”_d–
 ? 
	`dbAsyncD–‘e
(
db
,
key
) :

322 
	`dbSyncD–‘e
(
db
,
key
);

323 
	}
}

352 
robj
 *
	$dbUnsh¬eSŒšgV®ue
(
»disDb
 *
db
, 
robj
 *
key
,„obj *
o
) {

353 
	`£rv”As£¹
(
o
->
ty³
 =ğ
OBJ_STRING
);

354 ià(
o
->
»fcouÁ
 !ğ1 || o->
’codšg
 !ğ
OBJ_ENCODING_RAW
) {

355 
robj
 *
decoded
 = 
	`g‘DecodedObjeù
(
o
);

356 
o
 = 
	`ü—‹RawSŒšgObjeù
(
decoded
->
±r
, 
	`sd¦’
(decoded->ptr));

357 
	`deüRefCouÁ
(
decoded
);

358 
	`dbOv”wr™e
(
db
,
key
,
o
);

360  
o
;

361 
	}
}

380 
em±yDbG’”ic
(
»disDb
 *
db¬¿y
, 
dbnum
, 
æags
, (
ÿÎback
)(*)) {

381 
async
 = (
æags
 & 
EMPTYDB_ASYNC
);

382 
backup
 = (
æags
 & 
EMPTYDB_BACKUP
);

383 
RedisModuËFlushInfoV1
 
fi
 = {
REDISMODULE_FLUSHINFO_VERSION
,!
async
,
dbnum
};

384 
»moved
 = 0;

386 ià(
dbnum
 < -1 || dbnum >ğ
£rv”
.dbnum) {

387 
”ºo
 = 
EINVAL
;

392 ià(!
backup
) {

394 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_FLUSHDB
,

395 
REDISMODULE_SUBEVENT_FLUSHDB_START
,

396 &
fi
);

401 
	`sigÇlFlushedDb
(
dbnum
);

404 
¡¬tdb
, 
’ddb
;

405 ià(
dbnum
 == -1) {

406 
¡¬tdb
 = 0;

407 
’ddb
 = 
£rv”
.
dbnum
-1;

409 
¡¬tdb
 = 
’ddb
 = 
dbnum
;

412 
j
 = 
¡¬tdb
; j <ğ
’ddb
; j++) {

413 
»moved
 +ğ
	`diùSize
(
db¬¿y
[
j
].
diù
);

414 ià(
async
) {

415 
	`em±yDbAsync
(&
db¬¿y
[
j
]);

417 
	`diùEm±y
(
db¬¿y
[
j
].
diù
,
ÿÎback
);

418 
	`diùEm±y
(
db¬¿y
[
j
].
expœes
,
ÿÎback
);

423 ià(!
backup
) {

424 ià(
£rv”
.
şu¡”_’abËd
) {

425 ià(
async
) {

426 
	`¦ÙToKeyFlushAsync
();

428 
	`¦ÙToKeyFlush
();

431 ià(
dbnum
 =ğ-1è
	`æushSÏveKeysW™hExpœeLi¡
();

435 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_FLUSHDB
,

436 
REDISMODULE_SUBEVENT_FLUSHDB_END
,

437 &
fi
);

440  
»moved
;

441 
	}
}

443 
em±yDb
(
dbnum
, 
æags
, (
ÿÎback
)(*)) {

444  
	`em±yDbG’”ic
(
£rv”
.
db
, 
dbnum
, 
æags
, 
ÿÎback
);

445 
	}
}

447 
	$£ËùDb
(
ş›Á
 *
c
, 
id
) {

448 ià(
id
 < 0 || id >ğ
£rv”
.
dbnum
)

449  
C_ERR
;

450 
c
->
db
 = &
£rv”
.db[
id
];

451  
C_OK
;

452 
	}
}

454 
	$dbTÙ®S”v”KeyCouÁ
() {

455 
tÙ®
 = 0;

456 
j
;

457 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

458 
tÙ®
 +ğ
	`diùSize
(
£rv”
.
db
[
j
].
diù
);

460  
tÙ®
;

461 
	}
}

474 
	$sigÇlModif›dKey
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
) {

475 
	`touchW©chedKey
(
db
,
key
);

476 
	`ŒackšgInv®id©eKey
(
c
,
key
);

477 
	}
}

479 
	$sigÇlFlushedDb
(
dbid
) {

480 
	`touchW©chedKeysOnFlush
(
dbid
);

481 
	`ŒackšgInv®id©eKeysOnFlush
(
dbid
);

482 
	}
}

496 
	$g‘FlushCommªdFÏgs
(
ş›Á
 *
c
, *
æags
) {

498 ià(
c
->
¬gc
 > 1) {

499 ià(
c
->
¬gc
 > 2 || 
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"async")) {

500 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

501  
C_ERR
;

503 *
æags
 = 
EMPTYDB_ASYNC
;

505 *
æags
 = 
EMPTYDB_NO_FLAGS
;

507  
C_OK
;

508 
	}
}

511 
	$æushAÎD©aAndRe£tRDB
(
æags
) {

512 
£rv”
.
dœty
 +ğ
	`em±yDb
(-1,
æags
,
NULL
);

513 ià(
£rv”
.
rdb_chd_pid
 !ğ-1è
	`klRDBChd
();

514 ià(
£rv”
.
§v•¬am¦’
 > 0) {

517 
§ved_dœty
 = 
£rv”
.
dœty
;

518 
rdbSaveInfo
 
rsi
, *
rsŒ
;

519 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

520 
	`rdbSave
(
£rv”
.
rdb_f’ame
,
rsŒ
);

521 
£rv”
.
dœty
 = 
§ved_dœty
;

523 
£rv”
.
dœty
++;

524 #ià
	`defšed
(
USE_JEMALLOC
)

528 ià(!(
æags
 & 
EMPTYDB_ASYNC
))

529 
	`jem®loc_purge
();

531 
	}
}

536 
	$æushdbCommªd
(
ş›Á
 *
c
) {

537 
æags
;

539 ià(
	`g‘FlushCommªdFÏgs
(
c
,&
æags
è=ğ
C_ERR
) ;

540 
£rv”
.
dœty
 +ğ
	`em±yDb
(
c
->
db
->
id
,
æags
,
NULL
);

541 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

542 #ià
	`defšed
(
USE_JEMALLOC
)

546 ià(!(
æags
 & 
EMPTYDB_ASYNC
))

547 
	`jem®loc_purge
();

549 
	}
}

554 
	$æush®lCommªd
(
ş›Á
 *
c
) {

555 
æags
;

556 ià(
	`g‘FlushCommªdFÏgs
(
c
,&
æags
è=ğ
C_ERR
) ;

557 
	`æushAÎD©aAndRe£tRDB
(
æags
);

558 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

559 
	}
}

562 
	$d–G’”icCommªd
(
ş›Á
 *
c
, 
Ïzy
) {

563 
numd–
 = 0, 
j
;

565 
j
 = 1; j < 
c
->
¬gc
; j++) {

566 
	`expœeIfN“ded
(
c
->
db
,c->
¬gv
[
j
]);

567 
d–‘ed
 = 
Ïzy
 ? 
	`dbAsyncD–‘e
(
c
->
db
,c->
¬gv
[
j
]) :

568 
	`dbSyncD–‘e
(
c
->
db
,c->
¬gv
[
j
]);

569 ià(
d–‘ed
) {

570 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[
j
]);

571 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,

572 "d–",
c
->
¬gv
[
j
],c->
db
->
id
);

573 
£rv”
.
dœty
++;

574 
numd–
++;

577 
	`addR•lyLÚgLÚg
(
c
,
numd–
);

578 
	}
}

580 
	$d–Commªd
(
ş›Á
 *
c
) {

581 
	`d–G’”icCommªd
(
c
,
£rv”
.
Ïzyä“_Ïzy_u£r_d–
);

582 
	}
}

584 
	$uÆškCommªd
(
ş›Á
 *
c
) {

585 
	`d–G’”icCommªd
(
c
,1);

586 
	}
}

590 
	$exi¡sCommªd
(
ş›Á
 *
c
) {

591 
couÁ
 = 0;

592 
j
;

594 
j
 = 1; j < 
c
->
¬gc
; j++) {

595 ià(
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
])è
couÁ
++;

597 
	`addR•lyLÚgLÚg
(
c
,
couÁ
);

598 
	}
}

600 
	$£ËùCommªd
(
ş›Á
 *
c
) {

601 
id
;

603 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[1], &
id
,

604 "šv®id DB index"è!ğ
C_OK
)

607 ià(
£rv”
.
şu¡”_’abËd
 && 
id
 != 0) {

608 
	`addR•lyE¼Ü
(
c
,"SELECT is‚ot‡llowed in cluster mode");

611 ià(
	`£ËùDb
(
c
,
id
è=ğ
C_ERR
) {

612 
	`addR•lyE¼Ü
(
c
,"DB index is out of„ange");

614 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

616 
	}
}

618 
	$¿ndomkeyCommªd
(
ş›Á
 *
c
) {

619 
robj
 *
key
;

621 ià((
key
 = 
	`dbRªdomKey
(
c
->
db
)è=ğ
NULL
) {

622 
	`addR•lyNuÎ
(
c
);

626 
	`addR•lyBulk
(
c
,
key
);

627 
	`deüRefCouÁ
(
key
);

628 
	}
}

630 
	$keysCommªd
(
ş›Á
 *
c
) {

631 
diùI‹¿tÜ
 *
di
;

632 
diùEÁry
 *
de
;

633 
sds
 
·‰”n
 = 
c
->
¬gv
[1]->
±r
;

634 
¶’
 = 
	`sd¦’
(
·‰”n
), 
®lkeys
;

635 
numkeys
 = 0;

636 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

638 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
c
->
db
->
diù
);

639 
®lkeys
 = (
·‰”n
[0] =ğ'*' && 
¶’
 == 1);

640 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

641 
sds
 
key
 = 
	`diùG‘Key
(
de
);

642 
robj
 *
keyobj
;

644 ià(
®lkeys
 || 
	`¡ršgm©chËn
(
·‰”n
,
¶’
,
key
,
	`sd¦’
(key),0)) {

645 
keyobj
 = 
	`ü—‹SŒšgObjeù
(
key
,
	`sd¦’
(key));

646 ià(!
	`keyIsExpœed
(
c
->
db
,
keyobj
)) {

647 
	`addR•lyBulk
(
c
,
keyobj
);

648 
numkeys
++;

650 
	`deüRefCouÁ
(
keyobj
);

653 
	`diùR–—£I‹¿tÜ
(
di
);

654 
	`£tDeã¼edA¼ayL’
(
c
,
»¶yËn
,
numkeys
);

655 
	}
}

659 
	$sÿnC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
de
) {

660 **
pd
 = (**è
´ivd©a
;

661 
li¡
 *
keys
 = 
pd
[0];

662 
robj
 *
o
 = 
pd
[1];

663 
robj
 *
key
, *
v®
 = 
NULL
;

665 ià(
o
 =ğ
NULL
) {

666 
sds
 
sdskey
 = 
	`diùG‘Key
(
de
);

667 
key
 = 
	`ü—‹SŒšgObjeù
(
sdskey
, 
	`sd¦’
(sdskey));

668 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

669 
sds
 
keysds
 = 
	`diùG‘Key
(
de
);

670 
key
 = 
	`ü—‹SŒšgObjeù
(
keysds
,
	`sd¦’
(keysds));

671 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

672 
sds
 
sdskey
 = 
	`diùG‘Key
(
de
);

673 
sds
 
sdsv®
 = 
	`diùG‘V®
(
de
);

674 
key
 = 
	`ü—‹SŒšgObjeù
(
sdskey
,
	`sd¦’
(sdskey));

675 
v®
 = 
	`ü—‹SŒšgObjeù
(
sdsv®
,
	`sd¦’
(sdsval));

676 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

677 
sds
 
sdskey
 = 
	`diùG‘Key
(
de
);

678 
key
 = 
	`ü—‹SŒšgObjeù
(
sdskey
,
	`sd¦’
(sdskey));

679 
v®
 = 
	`ü—‹SŒšgObjeùFromLÚgDoubË
(*(*)
	`diùG‘V®
(
de
),0);

681 
	`£rv”Pªic
("Type‚ot handled in SCAN callback.");

684 
	`li¡AddNodeTa
(
keys
, 
key
);

685 ià(
v®
è
	`li¡AddNodeTa
(
keys
, val);

686 
	}
}

692 
	$·r£SÿnCursÜOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
cursÜ
) {

693 *
•Œ
;

697 
”ºo
 = 0;

698 *
cursÜ
 = 
	`¡¹oul
(
o
->
±r
, &
•Œ
, 10);

699 ià(
	`is¥aû
(((*)
o
->
±r
)[0]è|| 
•Œ
[0] !ğ'\0' || 
”ºo
 =ğ
ERANGE
)

701 
	`addR•lyE¼Ü
(
c
, "invalid cursor");

702  
C_ERR
;

704  
C_OK
;

705 
	}
}

718 
	$sÿnG’”icCommªd
(
ş›Á
 *
c
, 
robj
 *
o
, 
cursÜ
) {

719 
i
, 
j
;

720 
li¡
 *
keys
 = 
	`li¡C»©e
();

721 
li¡Node
 *
node
, *
ÃxŠode
;

722 
couÁ
 = 10;

723 
sds
 
·t
 = 
NULL
;

724 
sds
 
ty³Çme
 = 
NULL
;

725 
·’
 = 0, 
u£_·‰”n
 = 0;

726 
diù
 *
ht
;

730 
	`£rv”As£¹
(
o
 =ğ
NULL
 || o->
ty³
 =ğ
OBJ_SET
 || o->ty³ =ğ
OBJ_HASH
 ||

731 
o
->
ty³
 =ğ
OBJ_ZSET
);

734 
i
 = (
o
 =ğ
NULL
) ? 2 : 3;

737 
i
 < 
c
->
¬gc
) {

738 
j
 = 
c
->
¬gc
 - 
i
;

739 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
, "couÁ"è&& 
j
 >= 2) {

740 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
i
+1], &
couÁ
, 
NULL
)

741 !ğ
C_OK
)

743 
ş—nup
;

746 ià(
couÁ
 < 1) {

747 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

748 
ş—nup
;

751 
i
 += 2;

752 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
, "m©ch"è&& 
j
 >= 2) {

753 
·t
 = 
c
->
¬gv
[
i
+1]->
±r
;

754 
·’
 = 
	`sd¦’
(
·t
);

758 
u£_·‰”n
 = !(
·t
[0] =ğ'*' && 
·’
 == 1);

760 
i
 += 2;

761 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
, "ty³"è&& 
o
 =ğ
NULL
 && 
j
 >= 2) {

763 
ty³Çme
 = 
c
->
¬gv
[
i
+1]->
±r
;

764 
i
+= 2;

766 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

767 
ş—nup
;

780 
ht
 = 
NULL
;

781 ià(
o
 =ğ
NULL
) {

782 
ht
 = 
c
->
db
->
diù
;

783 } ià(
o
->
ty³
 =ğ
OBJ_SET
 && o->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

784 
ht
 = 
o
->
±r
;

785 } ià(
o
->
ty³
 =ğ
OBJ_HASH
 && o->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

786 
ht
 = 
o
->
±r
;

787 
couÁ
 *= 2;

788 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
 && o->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

789 
z£t
 *
zs
 = 
o
->
±r
;

790 
ht
 = 
zs
->
diù
;

791 
couÁ
 *= 2;

794 ià(
ht
) {

795 *
´ivd©a
[2];

800 
max™”©iÚs
 = 
couÁ
*10;

805 
´ivd©a
[0] = 
keys
;

806 
´ivd©a
[1] = 
o
;

808 
cursÜ
 = 
	`diùSÿn
(
ht
, cursÜ, 
sÿnC®lback
, 
NULL
, 
´ivd©a
);

809 } 
cursÜ
 &&

810 
max™”©iÚs
-- &&

811 
	`li¡L’gth
(
keys
è< ()
couÁ
);

812 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

813 
pos
 = 0;

814 
št64_t
 
Î
;

816 
	`št£tG‘
(
o
->
±r
,
pos
++,&
Î
))

817 
	`li¡AddNodeTa
(
keys
,
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î
));

818 
cursÜ
 = 0;

819 } ià(
o
->
ty³
 =ğ
OBJ_HASH
 || o->ty³ =ğ
OBJ_ZSET
) {

820 *
p
 = 
	`zli¡Index
(
o
->
±r
,0);

821 *
v¡r
;

822 
vËn
;

823 
vÎ
;

825 
p
) {

826 
	`zli¡G‘
(
p
,&
v¡r
,&
vËn
,&
vÎ
);

827 
	`li¡AddNodeTa
(
keys
,

828 (
v¡r
 !ğ
NULL
è? 
	`ü—‹SŒšgObjeù
((*)v¡r,
vËn
) :

829 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
vÎ
));

830 
p
 = 
	`zli¡Next
(
o
->
±r
,p);

832 
cursÜ
 = 0;

834 
	`£rv”Pªic
("Not handledƒncoding in SCAN.");

838 
node
 = 
	`li¡Fœ¡
(
keys
);

839 
node
) {

840 
robj
 *
kobj
 = 
	`li¡NodeV®ue
(
node
);

841 
ÃxŠode
 = 
	`li¡NextNode
(
node
);

842 
f‹r
 = 0;

845 ià(!
f‹r
 && 
u£_·‰”n
) {

846 ià(
	`sdsEncodedObjeù
(
kobj
)) {

847 ià(!
	`¡ršgm©chËn
(
·t
, 
·’
, 
kobj
->
±r
, 
	`sd¦’
(kobj->ptr), 0))

848 
f‹r
 = 1;

850 
buf
[
LONG_STR_SIZE
];

851 
Ën
;

853 
	`£rv”As£¹
(
kobj
->
’codšg
 =ğ
OBJ_ENCODING_INT
);

854 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),()
kobj
->
±r
);

855 ià(!
	`¡ršgm©chËn
(
·t
, 
·’
, 
buf
, 
Ën
, 0)è
f‹r
 = 1;

860 ià(!
f‹r
 && 
o
 =ğ
NULL
 && 
ty³Çme
){

861 
robj
* 
ty³check
 = 
	`lookupKeyR—dW™hFÏgs
(
c
->
db
, 
kobj
, 
LOOKUP_NOTOUCH
);

862 * 
ty³
 = 
	`g‘ObjeùTy³Name
(
ty³check
);

863 ià(
	`¡rÿ£cmp
((*è
ty³Çme
, 
ty³
)è
f‹r
 = 1;

867 ià(!
f‹r
 && 
o
 =ğ
NULL
 && 
	`expœeIfN“ded
(
c
->
db
, 
kobj
)) filter = 1;

870 ià(
f‹r
) {

871 
	`deüRefCouÁ
(
kobj
);

872 
	`li¡D–Node
(
keys
, 
node
);

878 ià(
o
 && (o->
ty³
 =ğ
OBJ_ZSET
 || o->ty³ =ğ
OBJ_HASH
)) {

879 
node
 = 
ÃxŠode
;

880 
ÃxŠode
 = 
	`li¡NextNode
(
node
);

881 ià(
f‹r
) {

882 
kobj
 = 
	`li¡NodeV®ue
(
node
);

883 
	`deüRefCouÁ
(
kobj
);

884 
	`li¡D–Node
(
keys
, 
node
);

887 
node
 = 
ÃxŠode
;

891 
	`addR•lyA¼ayL’
(
c
, 2);

892 
	`addR•lyBulkLÚgLÚg
(
c
,
cursÜ
);

894 
	`addR•lyA¼ayL’
(
c
, 
	`li¡L’gth
(
keys
));

895 (
node
 = 
	`li¡Fœ¡
(
keys
)è!ğ
NULL
) {

896 
robj
 *
kobj
 = 
	`li¡NodeV®ue
(
node
);

897 
	`addR•lyBulk
(
c
, 
kobj
);

898 
	`deüRefCouÁ
(
kobj
);

899 
	`li¡D–Node
(
keys
, 
node
);

902 
ş—nup
:

903 
	`li¡S‘F»eM‘hod
(
keys
,
deüRefCouÁVoid
);

904 
	`li¡R–—£
(
keys
);

905 
	}
}

908 
	$sÿnCommªd
(
ş›Á
 *
c
) {

909 
cursÜ
;

910 ià(
	`·r£SÿnCursÜOrR•ly
(
c
,c->
¬gv
[1],&
cursÜ
è=ğ
C_ERR
) ;

911 
	`sÿnG’”icCommªd
(
c
,
NULL
,
cursÜ
);

912 
	}
}

914 
	$dbsizeCommªd
(
ş›Á
 *
c
) {

915 
	`addR•lyLÚgLÚg
(
c
,
	`diùSize
(c->
db
->
diù
));

916 
	}
}

918 
	$Ï¡§veCommªd
(
ş›Á
 *
c
) {

919 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
Ï¡§ve
);

920 
	}
}

922 * 
	$g‘ObjeùTy³Name
(
robj
 *
o
) {

923 * 
ty³
;

924 ià(
o
 =ğ
NULL
) {

925 
ty³
 = "none";

927 
o
->
ty³
) {

928 
OBJ_STRING
: 
ty³
 = "string"; ;

929 
OBJ_LIST
: 
ty³
 = "list"; ;

930 
OBJ_SET
: 
ty³
 = "set"; ;

931 
OBJ_ZSET
: 
ty³
 = "zset"; ;

932 
OBJ_HASH
: 
ty³
 = "hash"; ;

933 
OBJ_STREAM
: 
ty³
 = "stream"; ;

934 
OBJ_MODULE
: {

935 
moduËV®ue
 *
mv
 = 
o
->
±r
;

936 
ty³
 = 
mv
->ty³->
Çme
;

938 : 
ty³
 = "unknown"; ;

941  
ty³
;

942 
	}
}

944 
	$ty³Commªd
(
ş›Á
 *
c
) {

945 
robj
 *
o
;

946 
o
 = 
	`lookupKeyR—dW™hFÏgs
(
c
->
db
,c->
¬gv
[1],
LOOKUP_NOTOUCH
);

947 
	`addR•lyStus
(
c
, 
	`g‘ObjeùTy³Name
(
o
));

948 
	}
}

950 
	$shutdownCommªd
(
ş›Á
 *
c
) {

951 
æags
 = 0;

953 ià(
c
->
¬gc
 > 2) {

954 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

956 } ià(
c
->
¬gc
 == 2) {

957 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"nosave")) {

958 
æags
 |ğ
SHUTDOWN_NOSAVE
;

959 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"save")) {

960 
æags
 |ğ
SHUTDOWN_SAVE
;

962 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

972 ià(
£rv”
.
lßdšg
 || s”v”.
£Áš–_mode
)

973 
æags
 = (æag & ~
SHUTDOWN_SAVE
è| 
SHUTDOWN_NOSAVE
;

974 ià(
	`´•¬eFÜShutdown
(
æags
è=ğ
C_OK
è
	`ex™
(0);

975 
	`addR•lyE¼Ü
(
c
,"Errorsryingo SHUTDOWN. Check†ogs.");

976 
	}
}

978 
	$»ÇmeG’”icCommªd
(
ş›Á
 *
c
, 
nx
) {

979 
robj
 *
o
;

980 
expœe
;

981 
§mekey
 = 0;

985 ià(
	`sdscmp
(
c
->
¬gv
[1]->
±r
,c->¬gv[2]->±rè=ğ0è
§mekey
 = 1;

987 ià((
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nokey”r
)è=ğ
NULL
)

990 ià(
§mekey
) {

991 
	`addR•ly
(
c
,
nx
 ? 
sh¬ed
.
cz”o
 : sh¬ed.
ok
);

995 
	`šüRefCouÁ
(
o
);

996 
expœe
 = 
	`g‘Expœe
(
c
->
db
,c->
¬gv
[1]);

997 ià(
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[2]è!ğ
NULL
) {

998 ià(
nx
) {

999 
	`deüRefCouÁ
(
o
);

1000 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1005 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[2]);

1007 
	`dbAdd
(
c
->
db
,c->
¬gv
[2],
o
);

1008 ià(
expœe
 !ğ-1è
	`£tExpœe
(
c
,c->
db
,c->
¬gv
[2],expire);

1009 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

1010 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1011 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[2]);

1012 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"rename_from",

1013 
c
->
¬gv
[1],c->
db
->
id
);

1014 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"rename_to",

1015 
c
->
¬gv
[2],c->
db
->
id
);

1016 
£rv”
.
dœty
++;

1017 
	`addR•ly
(
c
,
nx
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
ok
);

1018 
	}
}

1020 
	$»ÇmeCommªd
(
ş›Á
 *
c
) {

1021 
	`»ÇmeG’”icCommªd
(
c
,0);

1022 
	}
}

1024 
	$»Çm’xCommªd
(
ş›Á
 *
c
) {

1025 
	`»ÇmeG’”icCommªd
(
c
,1);

1026 
	}
}

1028 
	$moveCommªd
(
ş›Á
 *
c
) {

1029 
robj
 *
o
;

1030 
»disDb
 *
¤c
, *
d¡
;

1031 
¤cid
;

1032 
dbid
, 
expœe
;

1034 ià(
£rv”
.
şu¡”_’abËd
) {

1035 
	`addR•lyE¼Ü
(
c
,"MOVE is‚ot‡llowed in cluster mode");

1040 
¤c
 = 
c
->
db
;

1041 
¤cid
 = 
c
->
db
->
id
;

1043 ià(
	`g‘LÚgLÚgFromObjeù
(
c
->
¬gv
[2],&
dbid
è=ğ
C_ERR
 ||

1044 
dbid
 < 
INT_MIN
 || dbid > 
INT_MAX
 ||

1045 
	`£ËùDb
(
c
,
dbid
è=ğ
C_ERR
)

1047 
	`addR•ly
(
c
,
sh¬ed
.
outoäªg“¼
);

1050 
d¡
 = 
c
->
db
;

1051 
	`£ËùDb
(
c
,
¤cid
);

1055 ià(
¤c
 =ğ
d¡
) {

1056 
	`addR•ly
(
c
,
sh¬ed
.
§meobjeù”r
);

1061 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

1062 ià(!
o
) {

1063 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1066 
expœe
 = 
	`g‘Expœe
(
c
->
db
,c->
¬gv
[1]);

1069 ià(
	`lookupKeyWr™e
(
d¡
,
c
->
¬gv
[1]è!ğ
NULL
) {

1070 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1073 
	`dbAdd
(
d¡
,
c
->
¬gv
[1],
o
);

1074 ià(
expœe
 !ğ-1è
	`£tExpœe
(
c
,
d¡
,c->
¬gv
[1],expire);

1075 
	`šüRefCouÁ
(
o
);

1078 
	`dbD–‘e
(
¤c
,
c
->
¬gv
[1]);

1079 
	`sigÇlModif›dKey
(
c
,
¤c
,c->
¬gv
[1]);

1080 
	`sigÇlModif›dKey
(
c
,
d¡
,c->
¬gv
[1]);

1081 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,

1082 "move_äom",
c
->
¬gv
[1],
¤c
->
id
);

1083 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,

1084 "move_to",
c
->
¬gv
[1],
d¡
->
id
);

1086 
£rv”
.
dœty
++;

1087 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

1088 
	}
}

1094 
	$sÿnD©aba£FÜR—dyLi¡s
(
»disDb
 *
db
) {

1095 
diùEÁry
 *
de
;

1096 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
db
->
blockšg_keys
);

1097 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1098 
robj
 *
key
 = 
	`diùG‘Key
(
de
);

1099 
robj
 *
v®ue
 = 
	`lookupKey
(
db
,
key
,
LOOKUP_NOTOUCH
);

1100 ià(
v®ue
 && (v®ue->
ty³
 =ğ
OBJ_LIST
 ||

1101 
v®ue
->
ty³
 =ğ
OBJ_STREAM
 ||

1102 
v®ue
->
ty³
 =ğ
OBJ_ZSET
))

1103 
	`sigÇlKeyAsR—dy
(
db
, 
key
);

1105 
	`diùR–—£I‹¿tÜ
(
di
);

1106 
	}
}

1116 
	$dbSw­D©aba£s
(
id1
, 
id2
) {

1117 ià(
id1
 < 0 || id1 >ğ
£rv”
.
dbnum
 ||

1118 
id2
 < 0 || id2 >ğ
£rv”
.
dbnum
è 
C_ERR
;

1119 ià(
id1
 =ğ
id2
è 
C_OK
;

1120 
»disDb
 
aux
 = 
£rv”
.
db
[
id1
];

1121 
»disDb
 *
db1
 = &
£rv”
.
db
[
id1
], *
db2
 = &£rv”.db[
id2
];

1126 
db1
->
diù
 = 
db2
->dict;

1127 
db1
->
expœes
 = 
db2
->expires;

1128 
db1
->
avg_‰l
 = 
db2
->avg_ttl;

1129 
db1
->
expœes_cursÜ
 = 
db2
->expires_cursor;

1131 
db2
->
diù
 = 
aux
.dict;

1132 
db2
->
expœes
 = 
aux
.expires;

1133 
db2
->
avg_‰l
 = 
aux
.avg_ttl;

1134 
db2
->
expœes_cursÜ
 = 
aux
.expires_cursor;

1145 
	`sÿnD©aba£FÜR—dyLi¡s
(
db1
);

1146 
	`sÿnD©aba£FÜR—dyLi¡s
(
db2
);

1147  
C_OK
;

1148 
	}
}

1151 
	$sw­dbCommªd
(
ş›Á
 *
c
) {

1152 
id1
, 
id2
;

1155 ià(
£rv”
.
şu¡”_’abËd
) {

1156 
	`addR•lyE¼Ü
(
c
,"SWAPDB is‚ot‡llowed in cluster mode");

1161 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[1], &
id1
,

1162 "šv®id fœ¡ DB index"è!ğ
C_OK
)

1165 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
id2
,

1166 "šv®id secÚd DB index"è!ğ
C_OK
)

1170 ià(
	`dbSw­D©aba£s
(
id1
,
id2
è=ğ
C_ERR
) {

1171 
	`addR•lyE¼Ü
(
c
,"DB index is out of„ange");

1174 
£rv”
.
dœty
++;

1175 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1177 
	}
}

1183 
	$»moveExpœe
(
»disDb
 *
db
, 
robj
 *
key
) {

1186 
	`£rv”As£¹W™hInfo
(
NULL
,
key
,
	`diùFšd
(
db
->
diù
,key->
±r
) != NULL);

1187  
	`diùD–‘e
(
db
->
expœes
,
key
->
±r
è=ğ
DICT_OK
;

1188 
	}
}

1194 
	$£tExpœe
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
, 
wh’
) {

1195 
diùEÁry
 *
kde
, *
de
;

1198 
kde
 = 
	`diùFšd
(
db
->
diù
,
key
->
±r
);

1199 
	`£rv”As£¹W™hInfo
(
NULL
,
key
,
kde
 != NULL);

1200 
de
 = 
	`diùAddOrFšd
(
db
->
expœes
,
	`diùG‘Key
(
kde
));

1201 
	`diùS‘SigÃdIÁeg”V®
(
de
,
wh’
);

1203 
wr™abË_¦ave
 = 
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¦ave_ro
 == 0;

1204 ià(
c
 && 
wr™abË_¦ave
 && !(c->
æags
 & 
CLIENT_MASTER
))

1205 
	`»memb”SÏveKeyW™hExpœe
(
db
,
key
);

1206 
	}
}

1210 
	$g‘Expœe
(
»disDb
 *
db
, 
robj
 *
key
) {

1211 
diùEÁry
 *
de
;

1214 ià(
	`diùSize
(
db
->
expœes
) == 0 ||

1215 (
de
 = 
	`diùFšd
(
db
->
expœes
,
key
->
±r
)è=ğ
NULL
)  -1;

1219 
	`£rv”As£¹W™hInfo
(
NULL
,
key
,
	`diùFšd
(
db
->
diù
,key->
±r
) != NULL);

1220  
	`diùG‘SigÃdIÁeg”V®
(
de
);

1221 
	}
}

1231 
	$´İag©eExpœe
(
»disDb
 *
db
, 
robj
 *
key
, 
Ïzy
) {

1232 
robj
 *
¬gv
[2];

1234 
¬gv
[0] = 
Ïzy
 ? 
sh¬ed
.
uÆšk
 : sh¬ed.
d–
;

1235 
¬gv
[1] = 
key
;

1236 
	`šüRefCouÁ
(
¬gv
[0]);

1237 
	`šüRefCouÁ
(
¬gv
[1]);

1239 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
)

1240 
	`ãedAµ’dOÆyFe
(
£rv”
.
d–Commªd
,
db
->
id
,
¬gv
,2);

1241 
	`»¶iÿtiÚF“dSÏves
(
£rv”
.
¦aves
,
db
->
id
,
¬gv
,2);

1243 
	`deüRefCouÁ
(
¬gv
[0]);

1244 
	`deüRefCouÁ
(
¬gv
[1]);

1245 
	}
}

1248 
	$keyIsExpœed
(
»disDb
 *
db
, 
robj
 *
key
) {

1249 
m¡ime_t
 
wh’
 = 
	`g‘Expœe
(
db
,
key
);

1250 
m¡ime_t
 
now
;

1252 ià(
wh’
 < 0)  0;

1255 ià(
£rv”
.
lßdšg
)  0;

1262 ià(
£rv”
.
lua_ÿÎ”
) {

1263 
now
 = 
£rv”
.
lua_time_¡¬t
;

1272 ià(
£rv”
.
fixed_time_expœe
 > 0) {

1273 
now
 = 
£rv”
.
m¡ime
;

1277 
now
 = 
	`m¡ime
();

1282  
now
 > 
wh’
;

1283 
	}
}

1304 
	$expœeIfN“ded
(
»disDb
 *
db
, 
robj
 *
key
) {

1305 ià(!
	`keyIsExpœed
(
db
,
key
))  0;

1315 ià(
£rv”
.
ma¡”ho¡
 !ğ
NULL
)  1;

1318 
£rv”
.
¡©_expœedkeys
++;

1319 
	`´İag©eExpœe
(
db
,
key
,
£rv”
.
Ïzyä“_Ïzy_expœe
);

1320 
	`nÙifyKey¥aûEv’t
(
NOTIFY_EXPIRED
,

1321 "expœed",
key
,
db
->
id
);

1322 
»tv®
 = 
£rv”
.
Ïzyä“_Ïzy_expœe
 ? 
	`dbAsyncD–‘e
(
db
,
key
) :

1323 
	`dbSyncD–‘e
(
db
,
key
);

1324 ià(
»tv®
è
	`sigÇlModif›dKey
(
NULL
,
db
,
key
);

1325  
»tv®
;

1326 
	}
}

1331 
	#MAX_KEYS_BUFFER
 256

	)

1332 
	gg‘KeysTempBufãr
[
MAX_KEYS_BUFFER
];

1336 *
	$g‘KeysUsšgCommªdTabË
(
»disCommªd
 *
cmd
,
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1337 
j
, 
i
 = 0, 
Ï¡
, *
keys
;

1338 
	`UNUSED
(
¬gv
);

1340 ià(
cmd
->
fœ¡key
 == 0) {

1341 *
numkeys
 = 0;

1342  
NULL
;

1345 
Ï¡
 = 
cmd
->
Ï¡key
;

1346 ià(
Ï¡
 < 0èÏ¡ = 
¬gc
+last;

1348 
couÁ
 = ((
Ï¡
 - 
cmd
->
fœ¡key
)+1);

1349 
keys
 = 
g‘KeysTempBufãr
;

1350 ià(
couÁ
 > 
MAX_KEYS_BUFFER
)

1351 
keys
 = 
	`zm®loc
(()*
couÁ
);

1353 
j
 = 
cmd
->
fœ¡key
; j <ğ
Ï¡
; j +ğcmd->
key¡•
) {

1354 ià(
j
 >ğ
¬gc
) {

1361 ià(
cmd
->
æags
 & 
CMD_MODULE
 || cmd->
¬™y
 < 0) {

1362 
	`g‘KeysF»eResuÉ
(
keys
);

1363 *
numkeys
 = 0;

1364  
NULL
;

1366 
	`£rv”Pªic
("Redis built-in command declared keys…ositions‚ot matchinghe‡rity„equirements.");

1369 
keys
[
i
++] = 
j
;

1371 *
numkeys
 = 
i
;

1372  
keys
;

1373 
	}
}

1386 *
	$g‘KeysFromCommªd
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1387 ià(
cmd
->
æags
 & 
CMD_MODULE_GETKEYS
) {

1388  
	`moduËG‘CommªdKeysVŸAPI
(
cmd
,
¬gv
,
¬gc
,
numkeys
);

1389 } ià(!(
cmd
->
æags
 & 
CMD_MODULE
è&& cmd->
g‘keys_´oc
) {

1390  
cmd
->
	`g‘keys_´oc
(cmd,
¬gv
,
¬gc
,
numkeys
);

1392  
	`g‘KeysUsšgCommªdTabË
(
cmd
,
¬gv
,
¬gc
,
numkeys
);

1394 
	}
}

1397 
	$g‘KeysF»eResuÉ
(*
»suÉ
) {

1398 ià(
»suÉ
 !ğ
g‘KeysTempBufãr
)

1399 
	`zä“
(
»suÉ
);

1400 
	}
}

1405 *
	$zuniÚIÁ”G‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1406 
i
, 
num
, *
keys
;

1407 
	`UNUSED
(
cmd
);

1409 
num
 = 
	`©oi
(
¬gv
[2]->
±r
);

1412 ià(
num
 < 1 ||‚um > (
¬gc
-3)) {

1413 *
numkeys
 = 0;

1414  
NULL
;

1420 
keys
 = 
g‘KeysTempBufãr
;

1421 ià(
num
+1>
MAX_KEYS_BUFFER
)

1422 
keys
 = 
	`zm®loc
(()*(
num
+1));

1425 
i
 = 0; i < 
num
; i++è
keys
[i] = 3+i;

1428 
keys
[
num
] = 1;

1429 *
numkeys
 = 
num
+1;

1430  
keys
;

1431 
	}
}

1436 *
	$ev®G‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1437 
i
, 
num
, *
keys
;

1438 
	`UNUSED
(
cmd
);

1440 
num
 = 
	`©oi
(
¬gv
[2]->
±r
);

1443 ià(
num
 <ğ0 ||‚um > (
¬gc
-3)) {

1444 *
numkeys
 = 0;

1445  
NULL
;

1448 
keys
 = 
g‘KeysTempBufãr
;

1449 ià(
num
>
MAX_KEYS_BUFFER
)

1450 
keys
 = 
	`zm®loc
(()*
num
);

1452 *
numkeys
 = 
num
;

1455 
i
 = 0; i < 
num
; i++è
keys
[i] = 3+i;

1457  
keys
;

1458 
	}
}

1467 *
	$sÜtG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1468 
i
, 
j
, 
num
, *
keys
, 
found_¡Üe
 = 0;

1469 
	`UNUSED
(
cmd
);

1471 
num
 = 0;

1472 
keys
 = 
g‘KeysTempBufãr
;

1474 
keys
[
num
++] = 1;

1481 *
Çme
;

1482 
sk
;

1483 } 
skli¡
[] = {

1487 {
NULL
, 0}

1490 
i
 = 2; i < 
¬gc
; i++) {

1491 
j
 = 0; 
skli¡
[j].
Çme
 !ğ
NULL
; j++) {

1492 ià(!
	`¡rÿ£cmp
(
¬gv
[
i
]->
±r
,
skli¡
[
j
].
Çme
)) {

1493 
i
 +ğ
skli¡
[
j
].
sk
;

1495 } ià(!
	`¡rÿ£cmp
(
¬gv
[
i
]->
±r
,"¡Üe"è&& i+1 < 
¬gc
) {

1499 
found_¡Üe
 = 1;

1500 
keys
[
num
] = 
i
+1;

1505 *
numkeys
 = 
num
 + 
found_¡Üe
;

1506  
keys
;

1507 
	}
}

1509 *
	$mig¿‹G‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1510 
i
, 
num
, 
fœ¡
, *
keys
;

1511 
	`UNUSED
(
cmd
);

1514 
fœ¡
 = 3;

1515 
num
 = 1;

1518 ià(
¬gc
 > 6) {

1519 
i
 = 6; i < 
¬gc
; i++) {

1520 ià(!
	`¡rÿ£cmp
(
¬gv
[
i
]->
±r
,"keys") &&

1521 
	`sd¦’
(
¬gv
[3]->
±r
) == 0)

1523 
fœ¡
 = 
i
+1;

1524 
num
 = 
¬gc
-
fœ¡
;

1530 
keys
 = 
g‘KeysTempBufãr
;

1531 ià(
num
>
MAX_KEYS_BUFFER
)

1532 
keys
 = 
	`zm®loc
(()*
num
);

1534 
i
 = 0; i < 
num
; i++è
keys
[i] = 
fœ¡
+i;

1535 *
numkeys
 = 
num
;

1536  
keys
;

1537 
	}
}

1543 *
	$geÜadiusG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1544 
i
, 
num
, *
keys
;

1545 
	`UNUSED
(
cmd
);

1548 
¡Üed_key
 = -1;

1549 
i
 = 5; i < 
¬gc
; i++) {

1550 *
¬g
 = 
¬gv
[
i
]->
±r
;

1555 ià((!
	`¡rÿ£cmp
(
¬g
, "¡Üe"è|| !¡rÿ£cmp×rg, "¡Üedi¡")è&& ((
i
+1è< 
¬gc
)) {

1556 
¡Üed_key
 = 
i
+1;

1557 
i
++;

1560 
num
 = 1 + (
¡Üed_key
 == -1 ? 0 : 1);

1566 
keys
 = 
g‘KeysTempBufãr
;

1567 ià(
num
>
MAX_KEYS_BUFFER
)

1568 
keys
 = 
	`zm®loc
((è* 
num
);

1571 
keys
[0] = 1;

1572 if(
num
 > 1) {

1573 
keys
[1] = 
¡Üed_key
;

1575 *
numkeys
 = 
num
;

1576  
keys
;

1577 
	}
}

1580 *
	$lcsG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
)

1582 
i
;

1583 *
keys
 = 
g‘KeysTempBufãr
;

1584 
	`UNUSED
(
cmd
);

1588 
i
 = 1; i < 
¬gc
; i++) {

1589 *
¬g
 = 
¬gv
[
i
]->
±r
;

1590 
mÜ—rgs
 = (
¬gc
-1è- 
i
;

1592 ià(!
	`¡rÿ£cmp
(
¬g
, "strings")) {

1594 } ià(!
	`¡rÿ£cmp
(
¬g
, "keys"è&& 
mÜ—rgs
 >= 2) {

1595 
keys
[0] = 
i
+1;

1596 
keys
[1] = 
i
+2;

1597 *
numkeys
 = 2;

1598  
keys
;

1601 *
numkeys
 = 0;

1602  
keys
;

1603 
	}
}

1607 *
	$memÜyG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1608 *
keys
;

1609 
	`UNUSED
(
cmd
);

1611 ià(
¬gc
 >ğ3 && !
	`¡rÿ£cmp
(
¬gv
[1]->
±r
,"usage")) {

1612 
keys
 = 
g‘KeysTempBufãr
;

1613 
keys
[0] = 2;

1614 *
numkeys
 = 1;

1615  
keys
;

1617 *
numkeys
 = 0;

1618  
NULL
;

1619 
	}
}

1623 *
	$x»adG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

1624 
i
, 
num
 = 0, *
keys
;

1625 
	`UNUSED
(
cmd
);

1631 
¡»ams_pos
 = -1;

1632 
i
 = 1; i < 
¬gc
; i++) {

1633 *
¬g
 = 
¬gv
[
i
]->
±r
;

1634 ià(!
	`¡rÿ£cmp
(
¬g
, "block")) {

1635 
i
++;

1636 } ià(!
	`¡rÿ£cmp
(
¬g
, "count")) {

1637 
i
++;

1638 } ià(!
	`¡rÿ£cmp
(
¬g
, "group")) {

1639 
i
 += 2;

1640 } ià(!
	`¡rÿ£cmp
(
¬g
, "noack")) {

1642 } ià(!
	`¡rÿ£cmp
(
¬g
, "streams")) {

1643 
¡»ams_pos
 = 
i
;

1649 ià(
¡»ams_pos
 !ğ-1è
num
 = 
¬gc
 - streams_pos - 1;

1652 ià(
¡»ams_pos
 =ğ-1 || 
num
 == 0 ||‚um % 2 != 0) {

1653 *
numkeys
 = 0;

1654  
NULL
;

1656 
num
 /= 2;

1659 
keys
 = 
g‘KeysTempBufãr
;

1660 ià(
num
>
MAX_KEYS_BUFFER
)

1661 
keys
 = 
	`zm®loc
((è* 
num
);

1663 
i
 = 
¡»ams_pos
+1; i < 
¬gc
-
num
; i++è
keys
[i-streams_pos-1] = i;

1664 *
numkeys
 = 
num
;

1665  
keys
;

1666 
	}
}

1672 
	$¦ÙToKeyUpd©eKey
(
sds
 
key
, 
add
) {

1673 
size_t
 
keyËn
 = 
	`sd¦’
(
key
);

1674 
hash¦Ù
 = 
	`keyHashSlÙ
(
key
,
keyËn
);

1675 
buf
[64];

1676 *
šdexed
 = 
buf
;

1678 
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
[
hash¦Ù
] +ğ
add
 ? 1 : -1;

1679 ià(
keyËn
+2 > 64è
šdexed
 = 
	`zm®loc
(keylen+2);

1680 
šdexed
[0] = (
hash¦Ù
 >> 8) & 0xff;

1681 
šdexed
[1] = 
hash¦Ù
 & 0xff;

1682 
	`memıy
(
šdexed
+2,
key
,
keyËn
);

1683 ià(
add
) {

1684 
	`¿xIn£¹
(
£rv”
.
şu¡”
->
¦Ùs_to_keys
,
šdexed
,
keyËn
+2,
NULL
,NULL);

1686 
	`¿xRemove
(
£rv”
.
şu¡”
->
¦Ùs_to_keys
,
šdexed
,
keyËn
+2,
NULL
);

1688 ià(
šdexed
 !ğ
buf
è
	`zä“
(indexed);

1689 
	}
}

1691 
	$¦ÙToKeyAdd
(
sds
 
key
) {

1692 
	`¦ÙToKeyUpd©eKey
(
key
,1);

1693 
	}
}

1695 
	$¦ÙToKeyD–
(
sds
 
key
) {

1696 
	`¦ÙToKeyUpd©eKey
(
key
,0);

1697 
	}
}

1699 
	$¦ÙToKeyFlush
() {

1700 
	`¿xF»e
(
£rv”
.
şu¡”
->
¦Ùs_to_keys
);

1701 
£rv”
.
şu¡”
->
¦Ùs_to_keys
 = 
	`¿xNew
();

1702 
	`mem£t
(
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
,0,

1703 (
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
));

1704 
	}
}

1709 
	$g‘KeysInSlÙ
(
hash¦Ù
, 
robj
 **
keys
, 
couÁ
) {

1710 
¿xI‹¿tÜ
 
™”
;

1711 
j
 = 0;

1712 
šdexed
[2];

1714 
šdexed
[0] = (
hash¦Ù
 >> 8) & 0xff;

1715 
šdexed
[1] = 
hash¦Ù
 & 0xff;

1716 
	`¿xS¹
(&
™”
,
£rv”
.
şu¡”
->
¦Ùs_to_keys
);

1717 
	`¿xS“k
(&
™”
,">=",
šdexed
,2);

1718 
couÁ
-- && 
	`¿xNext
(&
™”
)) {

1719 ià(
™”
.
key
[0] !ğ
šdexed
[0] || iter.key[1] != indexed[1]) ;

1720 
keys
[
j
++] = 
	`ü—‹SŒšgObjeù
((*)
™”
.
key
+2,™”.
key_Ën
-2);

1722 
	`¿xStİ
(&
™”
);

1723  
j
;

1724 
	}
}

1728 
	$d–KeysInSlÙ
(
hash¦Ù
) {

1729 
¿xI‹¿tÜ
 
™”
;

1730 
j
 = 0;

1731 
šdexed
[2];

1733 
šdexed
[0] = (
hash¦Ù
 >> 8) & 0xff;

1734 
šdexed
[1] = 
hash¦Ù
 & 0xff;

1735 
	`¿xS¹
(&
™”
,
£rv”
.
şu¡”
->
¦Ùs_to_keys
);

1736 
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
[
hash¦Ù
]) {

1737 
	`¿xS“k
(&
™”
,">=",
šdexed
,2);

1738 
	`¿xNext
(&
™”
);

1740 
robj
 *
key
 = 
	`ü—‹SŒšgObjeù
((*)
™”
.key+2,™”.
key_Ën
-2);

1741 
	`dbD–‘e
(&
£rv”
.
db
[0],
key
);

1742 
	`deüRefCouÁ
(
key
);

1743 
j
++;

1745 
	`¿xStİ
(&
™”
);

1746  
j
;

1747 
	}
}

1749 
	$couÁKeysInSlÙ
(
hash¦Ù
) {

1750  
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
[
hash¦Ù
];

1751 
	}
}

	@debug.c

30 
	~"£rv”.h
"

31 
	~"sha1.h
"

32 
	~"üc64.h
"

34 
	~<¬·/š‘.h
>

35 
	~<sigÇl.h
>

36 
	~<dlfú.h
>

38 #ifdeà
HAVE_BACKTRACE


39 
	~<execšfo.h
>

40 #iâdeà
__O³nBSD__


41 
	~<ucÚ‹xt.h
>

43 
ucÚ‹xt_t
 
	tsigcÚ‹xt_t
;

45 
	~<fú.h
>

46 
	~"bio.h
"

47 
	~<uni¡d.h
>

50 #ifdeà
__CYGWIN__


51 #iâdeà
SA_ONSTACK


52 
	#SA_ONSTACK
 0x08000000

	)

64 
	$xÜDige¡
(*
dige¡
, *
±r
, 
size_t
 
Ën
) {

65 
SHA1_CTX
 
ùx
;

66 
hash
[20], *
s
 = 
±r
;

67 
j
;

69 
	`SHA1In™
(&
ùx
);

70 
	`SHA1Upd©e
(&
ùx
,
s
,
Ën
);

71 
	`SHA1Fš®
(
hash
,&
ùx
);

73 
j
 = 0; j < 20; j++)

74 
dige¡
[
j
] ^ğ
hash
[j];

75 
	}
}

77 
	$xÜSŒšgObjeùDige¡
(*
dige¡
, 
robj
 *
o
) {

78 
o
 = 
	`g‘DecodedObjeù
(o);

79 
	`xÜDige¡
(
dige¡
,
o
->
±r
,
	`sd¦’
(o->ptr));

80 
	`deüRefCouÁ
(
o
);

81 
	}
}

97 
	$mixDige¡
(*
dige¡
, *
±r
, 
size_t
 
Ën
) {

98 
SHA1_CTX
 
ùx
;

99 *
s
 = 
±r
;

101 
	`xÜDige¡
(
dige¡
,
s
,
Ën
);

102 
	`SHA1In™
(&
ùx
);

103 
	`SHA1Upd©e
(&
ùx
,
dige¡
,20);

104 
	`SHA1Fš®
(
dige¡
,&
ùx
);

105 
	}
}

107 
	$mixSŒšgObjeùDige¡
(*
dige¡
, 
robj
 *
o
) {

108 
o
 = 
	`g‘DecodedObjeù
(o);

109 
	`mixDige¡
(
dige¡
,
o
->
±r
,
	`sd¦’
(o->ptr));

110 
	`deüRefCouÁ
(
o
);

111 
	}
}

121 
	$xÜObjeùDige¡
(
»disDb
 *
db
, 
robj
 *
keyobj
, *
dige¡
,„obj *
o
) {

122 
ušt32_t
 
aux
 = 
	`htÚl
(
o
->
ty³
);

123 
	`mixDige¡
(
dige¡
,&
aux
,(aux));

124 
expœ‘ime
 = 
	`g‘Expœe
(
db
,
keyobj
);

125 
buf
[128];

128 ià(
o
->
ty³
 =ğ
OBJ_STRING
) {

129 
	`mixSŒšgObjeùDige¡
(
dige¡
,
o
);

130 } ià(
o
->
ty³
 =ğ
OBJ_LIST
) {

131 
li¡Ty³I‹¿tÜ
 *
li
 = 
	`li¡Ty³In™I‹¿tÜ
(
o
,0,
LIST_TAIL
);

132 
li¡Ty³EÁry
 
’Œy
;

133 
	`li¡Ty³Next
(
li
,&
’Œy
)) {

134 
robj
 *
–eobj
 = 
	`li¡Ty³G‘
(&
’Œy
);

135 
	`mixSŒšgObjeùDige¡
(
dige¡
,
–eobj
);

136 
	`deüRefCouÁ
(
–eobj
);

138 
	`li¡Ty³R–—£I‹¿tÜ
(
li
);

139 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

140 
£tTy³I‹¿tÜ
 *
si
 = 
	`£tTy³In™I‹¿tÜ
(
o
);

141 
sds
 
sd£Ë
;

142 (
sd£Ë
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

143 
	`xÜDige¡
(
dige¡
,
sd£Ë
,
	`sd¦’
(sdsele));

144 
	`sdsä“
(
sd£Ë
);

146 
	`£tTy³R–—£I‹¿tÜ
(
si
);

147 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

148 
–edige¡
[20];

150 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

151 *
zl
 = 
o
->
±r
;

152 *
•Œ
, *
¥Œ
;

153 *
v¡r
;

154 
vËn
;

155 
vÎ
;

156 
scÜe
;

158 
•Œ
 = 
	`zli¡Index
(
zl
,0);

159 
	`£rv”As£¹
(
•Œ
 !ğ
NULL
);

160 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

161 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

163 
•Œ
 !ğ
NULL
) {

164 
	`£rv”As£¹
(
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vÎ
));

165 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

167 
	`mem£t
(
–edige¡
,0,20);

168 ià(
v¡r
 !ğ
NULL
) {

169 
	`mixDige¡
(
–edige¡
,
v¡r
,
vËn
);

171 
	`Î2¡ršg
(
buf
,(buf),
vÎ
);

172 
	`mixDige¡
(
–edige¡
,
buf
,
	`¡¾’
(buf));

175 
	`¢´štf
(
buf
,(buf),"%.17g",
scÜe
);

176 
	`mixDige¡
(
–edige¡
,
buf
,
	`¡¾’
(buf));

177 
	`xÜDige¡
(
dige¡
,
–edige¡
,20);

178 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

180 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

181 
z£t
 *
zs
 = 
o
->
±r
;

182 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
zs
->
diù
);

183 
diùEÁry
 *
de
;

185 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

186 
sds
 
sd£Ë
 = 
	`diùG‘Key
(
de
);

187 *
scÜe
 = 
	`diùG‘V®
(
de
);

189 
	`¢´štf
(
buf
,(buf),"%.17g",*
scÜe
);

190 
	`mem£t
(
–edige¡
,0,20);

191 
	`mixDige¡
(
–edige¡
,
sd£Ë
,
	`sd¦’
(sdsele));

192 
	`mixDige¡
(
–edige¡
,
buf
,
	`¡¾’
(buf));

193 
	`xÜDige¡
(
dige¡
,
–edige¡
,20);

195 
	`diùR–—£I‹¿tÜ
(
di
);

197 
	`£rv”Pªic
("Unknown sorted setƒncoding");

199 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

200 
hashTy³I‹¿tÜ
 *
hi
 = 
	`hashTy³In™I‹¿tÜ
(
o
);

201 
	`hashTy³Next
(
hi
è!ğ
C_ERR
) {

202 
–edige¡
[20];

203 
sds
 
sd£Ë
;

205 
	`mem£t
(
–edige¡
,0,20);

206 
sd£Ë
 = 
	`hashTy³Cu¼’tObjeùNewSds
(
hi
,
OBJ_HASH_KEY
);

207 
	`mixDige¡
(
–edige¡
,
sd£Ë
,
	`sd¦’
(sdsele));

208 
	`sdsä“
(
sd£Ë
);

209 
sd£Ë
 = 
	`hashTy³Cu¼’tObjeùNewSds
(
hi
,
OBJ_HASH_VALUE
);

210 
	`mixDige¡
(
–edige¡
,
sd£Ë
,
	`sd¦’
(sdsele));

211 
	`sdsä“
(
sd£Ë
);

212 
	`xÜDige¡
(
dige¡
,
–edige¡
,20);

214 
	`hashTy³R–—£I‹¿tÜ
(
hi
);

215 } ià(
o
->
ty³
 =ğ
OBJ_STREAM
) {

216 
¡»amI‹¿tÜ
 
si
;

217 
	`¡»amI‹¿tÜS¹
(&
si
,
o
->
±r
,
NULL
,NULL,0);

218 
¡»amID
 
id
;

219 
št64_t
 
numf›lds
;

221 
	`¡»amI‹¿tÜG‘ID
(&
si
,&
id
,&
numf›lds
)) {

222 
sds
 
™emid
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),"%U.%U",
id
.
ms
,id.
£q
);

223 
	`mixDige¡
(
dige¡
,
™emid
,
	`sd¦’
(itemid));

224 
	`sdsä“
(
™emid
);

226 
numf›lds
--) {

227 *
f›ld
, *
v®ue
;

228 
št64_t
 
f›ld_Ën
, 
v®ue_Ën
;

229 
	`¡»amI‹¿tÜG‘F›ld
(&
si
,&
f›ld
,&
v®ue
,

230 &
f›ld_Ën
,&
v®ue_Ën
);

231 
	`mixDige¡
(
dige¡
,
f›ld
,
f›ld_Ën
);

232 
	`mixDige¡
(
dige¡
,
v®ue
,
v®ue_Ën
);

235 
	`¡»amI‹¿tÜStİ
(&
si
);

236 } ià(
o
->
ty³
 =ğ
OBJ_MODULE
) {

237 
RedisModuËDige¡
 
md
;

238 
moduËV®ue
 *
mv
 = 
o
->
±r
;

239 
moduËTy³
 *
mt
 = 
mv
->
ty³
;

240 
	`moduËIn™Dige¡CÚ‹xt
(
md
);

241 ià(
mt
->
dige¡
) {

242 
mt
->
	`dige¡
(&
md
,
mv
->
v®ue
);

243 
	`xÜDige¡
(
dige¡
,
md
.
x
,(md.x));

246 
	`£rv”Pªic
("Unknown objectype");

249 ià(
expœ‘ime
 !ğ-1è
	`xÜDige¡
(
dige¡
,"!!expire!!",10);

250 
	}
}

258 
	$compu‹D©a£tDige¡
(*
fš®
) {

259 
dige¡
[20];

260 
diùI‹¿tÜ
 *
di
 = 
NULL
;

261 
diùEÁry
 *
de
;

262 
j
;

263 
ušt32_t
 
aux
;

265 
	`mem£t
(
fš®
,0,20);

267 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

268 
»disDb
 *
db
 = 
£rv”
.db+
j
;

270 ià(
	`diùSize
(
db
->
diù
) == 0) ;

271 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
db
->
diù
);

275 
aux
 = 
	`htÚl
(
j
);

276 
	`mixDige¡
(
fš®
,&
aux
,(aux));

279 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

280 
sds
 
key
;

281 
robj
 *
keyobj
, *
o
;

283 
	`mem£t
(
dige¡
,0,20);

284 
key
 = 
	`diùG‘Key
(
de
);

285 
keyobj
 = 
	`ü—‹SŒšgObjeù
(
key
,
	`sd¦’
(key));

287 
	`mixDige¡
(
dige¡
,
key
,
	`sd¦’
(key));

289 
o
 = 
	`diùG‘V®
(
de
);

290 
	`xÜObjeùDige¡
(
db
,
keyobj
,
dige¡
,
o
);

293 
	`xÜDige¡
(
fš®
,
dige¡
,20);

294 
	`deüRefCouÁ
(
keyobj
);

296 
	`diùR–—£I‹¿tÜ
(
di
);

298 
	}
}

300 #ifdeà
USE_JEMALLOC


301 
	$m®lùl_št
(
ş›Á
 *
c
, 
robj
 **
¬gv
, 
¬gc
) {

302 
»t
;

304 
št64_t
 
Şd
 = 0, 
v®
;

305 ià(
¬gc
 > 1) {

306 
Î
;

307 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, 
¬gv
[1], &
Î
, 
NULL
è!ğ
C_OK
)

309 
v®
 = 
Î
;

311 
size_t
 
sz
 = (
Şd
);

312 
sz
 > 0) {

313 ià((
»t
=
	`je_m®lùl
(
¬gv
[0]->
±r
, &
Şd
, &
sz
, 
¬gc
 > 1? &
v®
: 
NULL
,‡rgc > 1?sz: 0))) {

314 ià(
»t
==
EINVAL
) {

316 
sz
 /= 2;

317 #ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


318 
v®
 <<ğ8*
sz
;

322 
	`addR•lyE¼ÜFÜm©
(
c
,"%s", 
	`¡»¼Ü
(
»t
));

325 #ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


326 
Şd
 >>ğ64 - 8*
sz
;

328 
	`addR•lyLÚgLÚg
(
c
, 
Şd
);

332 
	`addR•lyE¼ÜFÜm©
(
c
,"%s", 
	`¡»¼Ü
(
EINVAL
));

333 
	}
}

335 
	$m®lùl_¡ršg
(
ş›Á
 *
c
, 
robj
 **
¬gv
, 
¬gc
) {

336 
»t
;

337 *
Şd
;

338 
size_t
 
sz
 = (
Şd
);

340 ià((
»t
=
	`je_m®lùl
(
¬gv
[0]->
±r
, &
Şd
, &
sz
, 
NULL
, 0))) {

341 
	`addR•lyE¼ÜFÜm©
(
c
,"%s", 
	`¡»¼Ü
(
»t
));

344 
	`addR•lyBulkCSŒšg
(
c
, 
Şd
);

345 if(
¬gc
 > 1)

346 
	`je_m®lùl
(
¬gv
[0]->
±r
, 
NULL
, 0, &argv[1]->ptr, (*));

347 
	}
}

350 
	$debugCommªd
(
ş›Á
 *
c
) {

351 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

352 cÚ¡ *
h–p
[] = {

379 #ifdeà
USE_JEMALLOC


383 
NULL


385 
	`addR•lyH–p
(
c
, 
h–p
);

386 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"segfault")) {

388 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"panic")) {

389 
	`£rv”Pªic
("DEBUG PANIC c®Ëd‡ˆUnixim%ld", 
	`time
(
NULL
));

390 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"restart") ||

391 !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"crash-and-recover"))

393 
d–ay
 = 0;

394 ià(
c
->
¬gc
 >= 3) {

395 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
d–ay
, 
NULL
)

396 !ğ
C_OK
) ;

397 ià(
d–ay
 < 0) delay = 0;

399 
æags
 = !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"restart") ?

400 (
RESTART_SERVER_GRACEFULLY
|
RESTART_SERVER_CONFIG_REWRITE
) :

401 
RESTART_SERVER_NONE
;

402 
	`»¡¬tS”v”
(
æags
,
d–ay
);

403 
	`addR•lyE¼Ü
(
c
,"failedo„estarthe server. Check server†ogs.");

404 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"oom")) {

405 *
±r
 = 
	`zm®loc
(
ULONG_MAX
);

406 
	`zä“
(
±r
);

407 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

408 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"assert")) {

409 
	`£rv”As£¹W™hInfo
(
c
,c->
¬gv
[0],1 == 2);

410 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"log"è&& c->
¬gc
 == 3) {

411 
	`£rv”Log
(
LL_WARNING
, "DEBUG LOG: %s", (*)
c
->
¬gv
[2]->
±r
);

412 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

413 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"reload")) {

414 
æush
 = 1, 
§ve
 = 1;

415 
æags
 = 
RDBFLAGS_NONE
;

419 
j
 = 2; j < 
c
->
¬gc
; j++) {

420 *
İt
 = 
c
->
¬gv
[
j
]->
±r
;

421 ià(!
	`¡rÿ£cmp
(
İt
,"MERGE")) {

422 
æags
 |ğ
RDBFLAGS_ALLOW_DUP
;

423 } ià(!
	`¡rÿ£cmp
(
İt
,"NOFLUSH")) {

424 
æush
 = 0;

425 } ià(!
	`¡rÿ£cmp
(
İt
,"NOSAVE")) {

426 
§ve
 = 0;

428 
	`addR•lyE¼Ü
(
c
,"DEBUG RELOAD only supportshe "

436 ià(
§ve
) {

437 
rdbSaveInfo
 
rsi
, *
rsŒ
;

438 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

439 ià(
	`rdbSave
(
£rv”
.
rdb_f’ame
,
rsŒ
è!ğ
C_OK
) {

440 
	`addR•ly
(
c
,
sh¬ed
.
”r
);

448 ià(
æush
è
	`em±yDb
(-1,
EMPTYDB_NO_FLAGS
,
NULL
);

450 
	`´ÙeùCl›Á
(
c
);

451 
»t
 = 
	`rdbLßd
(
£rv”
.
rdb_f’ame
,
NULL
,
æags
);

452 
	`uÅrÙeùCl›Á
(
c
);

453 ià(
»t
 !ğ
C_OK
) {

454 
	`addR•lyE¼Ü
(
c
,"Errorryingo†oadhe RDB dump");

457 
	`£rv”Log
(
LL_WARNING
,"DB„eloaded by DEBUG RELOAD");

458 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

459 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"loadaof")) {

460 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
è
	`æushAµ’dOÆyFe
(1);

461 
	`em±yDb
(-1,
EMPTYDB_NO_FLAGS
,
NULL
);

462 
	`´ÙeùCl›Á
(
c
);

463 
»t
 = 
	`lßdAµ’dOÆyFe
(
£rv”
.
aof_f’ame
);

464 
	`uÅrÙeùCl›Á
(
c
);

465 ià(
»t
 !ğ
C_OK
) {

466 
	`addR•ly
(
c
,
sh¬ed
.
”r
);

469 
£rv”
.
dœty
 = 0;

470 
	`£rv”Log
(
LL_WARNING
,"Append Only File†oaded by DEBUG LOADAOF");

471 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

472 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"objeù"è&& c->
¬gc
 == 3) {

473 
diùEÁry
 *
de
;

474 
robj
 *
v®
;

475 *
¡»nc
;

477 ià((
de
 = 
	`diùFšd
(
c
->
db
->
diù
,c->
¬gv
[2]->
±r
)è=ğ
NULL
) {

478 
	`addR•ly
(
c
,
sh¬ed
.
nokey”r
);

481 
v®
 = 
	`diùG‘V®
(
de
);

482 
¡»nc
 = 
	`¡rEncodšg
(
v®
->
’codšg
);

484 
exŒa
[138] = {0};

485 ià(
v®
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

486 *
ÃxŒa
 = 
exŒa
;

487 
»maššg
 = (
exŒa
);

488 
quickli¡
 *
ql
 = 
v®
->
±r
;

490 
u£d
 = 
	`¢´štf
(
ÃxŒa
, 
»maššg
, " ql_nodes:%lu", 
ql
->
Ën
);

491 
ÃxŒa
 +ğ
u£d
;

492 
»maššg
 -ğ
u£d
;

494 
avg
 = ()
ql
->
couÁ
/ql->
Ën
;

495 
u£d
 = 
	`¢´štf
(
ÃxŒa
, 
»maššg
, " ql_avg_node:%.2f", 
avg
);

496 
ÃxŒa
 +ğ
u£d
;

497 
»maššg
 -ğ
u£d
;

499 
u£d
 = 
	`¢´štf
(
ÃxŒa
, 
»maššg
, " ql_zli¡_max:%d", 
ql
->
fl
);

500 
ÃxŒa
 +ğ
u£d
;

501 
»maššg
 -ğ
u£d
;

503 
com´es£d
 = 
ql
->
com´ess
 != 0;

504 
u£d
 = 
	`¢´štf
(
ÃxŒa
, 
»maššg
, " ql_com´es£d:%d", 
com´es£d
);

505 
ÃxŒa
 +ğ
u£d
;

506 
»maššg
 -ğ
u£d
;

508 
sz
 = 0;

509 
quickli¡Node
 *
node
 = 
ql
->
h—d
;‚ode;‚odğnode->
Ãxt
) {

510 
sz
 +ğ
node
->sz;

512 
u£d
 = 
	`¢´štf
(
ÃxŒa
, 
»maššg
, " ql_uncom´es£d_size:%lu", 
sz
);

513 
ÃxŒa
 +ğ
u£d
;

514 
»maššg
 -ğ
u£d
;

517 
	`addR•lyStusFÜm©
(
c
,

521 (*)
v®
, v®->
»fcouÁ
,

522 
¡»nc
, 
	`rdbSavedObjeùL’
(
v®
, 
c
->
¬gv
[2]),

523 
v®
->
Ìu
, 
	`e¡im©eObjeùIdËTime
(v®)/1000, 
exŒa
);

524 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"sd¦’"è&& c->
¬gc
 == 3) {

525 
diùEÁry
 *
de
;

526 
robj
 *
v®
;

527 
sds
 
key
;

529 ià((
de
 = 
	`diùFšd
(
c
->
db
->
diù
,c->
¬gv
[2]->
±r
)è=ğ
NULL
) {

530 
	`addR•ly
(
c
,
sh¬ed
.
nokey”r
);

533 
v®
 = 
	`diùG‘V®
(
de
);

534 
key
 = 
	`diùG‘Key
(
de
);

536 ià(
v®
->
ty³
 !ğ
OBJ_STRING
 || !
	`sdsEncodedObjeù
(val)) {

537 
	`addR•lyE¼Ü
(
c
,"Not‡n sdsƒncoded string.");

539 
	`addR•lyStusFÜm©
(
c
,

542 (è
	`sd¦’
(
key
),

543 (è
	`sd§va
(
key
),

544 (è
	`sdsZm®locSize
(
key
),

545 (è
	`sd¦’
(
v®
->
±r
),

546 (è
	`sd§va
(
v®
->
±r
),

547 (è
	`g‘SŒšgObjeùSdsU£dMemÜy
(
v®
));

549 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"zli¡"è&& c->
¬gc
 == 3) {

550 
robj
 *
o
;

552 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nokey”r
))

553 =ğ
NULL
) ;

555 ià(
o
->
’codšg
 !ğ
OBJ_ENCODING_ZIPLIST
) {

556 
	`addR•lyE¼Ü
(
c
,"Not‡n sdsƒncoded string.");

558 
	`zli¡R•r
(
o
->
±r
);

559 
	`addR•lyStus
(
c
,"Ziplist structure…rinted on stdout");

561 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"populate") &&

562 
c
->
¬gc
 >= 3 && c->argc <= 5) {

563 
keys
, 
j
;

564 
robj
 *
key
, *
v®
;

565 
buf
[128];

567 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
keys
, 
NULL
è!ğ
C_OK
)

569 
	`diùEx·nd
(
c
->
db
->
diù
,
keys
);

570 
j
 = 0; j < 
keys
; j++) {

571 
v®size
 = 0;

572 
	`¢´štf
(
buf
,(buf),"%s:%lu",

573 (
c
->
¬gc
 =ğ3è? "key" : (*)c->
¬gv
[3]->
±r
, 
j
);

574 
key
 = 
	`ü—‹SŒšgObjeù
(
buf
,
	`¡¾’
(buf));

575 ià(
c
->
¬gc
 == 5)

576 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[4], &
v®size
, 
NULL
è!ğ
C_OK
)

578 ià(
	`lookupKeyWr™e
(
c
->
db
,
key
è!ğ
NULL
) {

579 
	`deüRefCouÁ
(
key
);

582 
	`¢´štf
(
buf
,(buf),"v®ue:%lu",
j
);

583 ià(
v®size
==0)

584 
v®
 = 
	`ü—‹SŒšgObjeù
(
buf
,
	`¡¾’
(buf));

586 
buæ’
 = 
	`¡¾’
(
buf
);

587 
v®
 = 
	`ü—‹SŒšgObjeù
(
NULL
,
v®size
);

588 
	`memıy
(
v®
->
±r
, 
buf
, 
v®size
<=
buæ’
? valsize: buflen);

590 
	`dbAdd
(
c
->
db
,
key
,
v®
);

591 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

592 
	`deüRefCouÁ
(
key
);

594 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

595 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"dige¡"è&& c->
¬gc
 == 2) {

597 
dige¡
[20];

598 
sds
 
d
 = 
	`sd£m±y
();

600 
	`compu‹D©a£tDige¡
(
dige¡
);

601 
i
 = 0; i < 20; i++è
d
 = 
	`sdsÿrštf
(d, "%02x",
dige¡
[i]);

602 
	`addR•lyStus
(
c
,
d
);

603 
	`sdsä“
(
d
);

604 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"dige¡-v®ue"è&& c->
¬gc
 >= 2) {

606 
	`addR•lyA¼ayL’
(
c
,c->
¬gc
-2);

607 
j
 = 2; j < 
c
->
¬gc
; j++) {

608 
dige¡
[20];

609 
	`mem£t
(
dige¡
,0,20);

610 
robj
 *
o
 = 
	`lookupKeyR—dW™hFÏgs
(
c
->
db
,c->
¬gv
[
j
],
LOOKUP_NOTOUCH
);

611 ià(
o
è
	`xÜObjeùDige¡
(
c
->
db
,c->
¬gv
[
j
],
dige¡
,o);

613 
sds
 
d
 = 
	`sd£m±y
();

614 
i
 = 0; i < 20; i++è
d
 = 
	`sdsÿrštf
(d, "%02x",
dige¡
[i]);

615 
	`addR•lyStus
(
c
,
d
);

616 
	`sdsä“
(
d
);

618 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"´ÙocŞ"è&& c->
¬gc
 == 3) {

621 *
Çme
 = 
c
->
¬gv
[2]->
±r
;

622 ià(!
	`¡rÿ£cmp
(
Çme
,"string")) {

623 
	`addR•lyBulkCSŒšg
(
c
,"Hello World");

624 } ià(!
	`¡rÿ£cmp
(
Çme
,"integer")) {

625 
	`addR•lyLÚgLÚg
(
c
,12345);

626 } ià(!
	`¡rÿ£cmp
(
Çme
,"double")) {

627 
	`addR•lyDoubË
(
c
,3.14159265359);

628 } ià(!
	`¡rÿ£cmp
(
Çme
,"bignum")) {

629 
	`addR•lyPrÙo
(
c
,"(1234567999999999999999999999999999999\r\n",40);

630 } ià(!
	`¡rÿ£cmp
(
Çme
,"null")) {

631 
	`addR•lyNuÎ
(
c
);

632 } ià(!
	`¡rÿ£cmp
(
Çme
,"array")) {

633 
	`addR•lyA¼ayL’
(
c
,3);

634 
j
 = 0; j < 3; j++è
	`addR•lyLÚgLÚg
(
c
,j);

635 } ià(!
	`¡rÿ£cmp
(
Çme
,"set")) {

636 
	`addR•lyS‘L’
(
c
,3);

637 
j
 = 0; j < 3; j++è
	`addR•lyLÚgLÚg
(
c
,j);

638 } ià(!
	`¡rÿ£cmp
(
Çme
,"map")) {

639 
	`addR•lyM­L’
(
c
,3);

640 
j
 = 0; j < 3; j++) {

641 
	`addR•lyLÚgLÚg
(
c
,
j
);

642 
	`addR•lyBoŞ
(
c
, 
j
 == 1);

644 } ià(!
	`¡rÿ£cmp
(
Çme
,"attrib")) {

645 
	`addR•lyA‰ribu‹L’
(
c
,1);

646 
	`addR•lyBulkCSŒšg
(
c
,"key-popularity");

647 
	`addR•lyA¼ayL’
(
c
,2);

648 
	`addR•lyBulkCSŒšg
(
c
,"key:123");

649 
	`addR•lyLÚgLÚg
(
c
,90);

652 
	`addR•lyBulkCSŒšg
(
c
,"Some„eal„eply followinghe‡ttribute");

653 } ià(!
	`¡rÿ£cmp
(
Çme
,"push")) {

654 
	`addR•lyPushL’
(
c
,2);

655 
	`addR•lyBulkCSŒšg
(
c
,"server-cpu-usage");

656 
	`addR•lyLÚgLÚg
(
c
,42);

660 
	`addR•lyBulkCSŒšg
(
c
,"Some„eal„eply followinghe…ush„eply");

661 } ià(!
	`¡rÿ£cmp
(
Çme
,"true")) {

662 
	`addR•lyBoŞ
(
c
,1);

663 } ià(!
	`¡rÿ£cmp
(
Çme
,"false")) {

664 
	`addR•lyBoŞ
(
c
,0);

665 } ià(!
	`¡rÿ£cmp
(
Çme
,"verbatim")) {

666 
	`addR•lyV”b©im
(
c
,"This is‡ verbatim\nstring",25,"txt");

668 
	`addR•lyE¼Ü
(
c
,"Wrong…rotocolype‚ame. Please use one ofhe following: string|integer|double|bignum|null|array|set|map|attrib|push|verbatim|true|false");

670 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"¦“p"è&& c->
¬gc
 == 3) {

671 
dtime
 = 
	`¡¹od
(
c
->
¬gv
[2]->
±r
,
NULL
);

672 
utime
 = 
dtime
*1000000;

673 
time¥ec
 
tv
;

675 
tv
.
tv_£c
 = 
utime
 / 1000000;

676 
tv
.
tv_n£c
 = (
utime
 % 1000000) * 1000;

677 
	`Çno¦“p
(&
tv
, 
NULL
);

678 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

679 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"set-active-expire") &&

680 
c
->
¬gc
 == 3)

682 
£rv”
.
aùive_expœe_’abËd
 = 
	`©oi
(
c
->
¬gv
[2]->
±r
);

683 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

684 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"aof-flush-sleep") &&

685 
c
->
¬gc
 == 3)

687 
£rv”
.
aof_æush_¦“p
 = 
	`©oi
(
c
->
¬gv
[2]->
±r
);

688 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

689 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"lua-always-replicate-commands") &&

690 
c
->
¬gc
 == 3)

692 
£rv”
.
lua_®ways_»¶iÿ‹_commªds
 = 
	`©oi
(
c
->
¬gv
[2]->
±r
);

693 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

694 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"”rÜ"è&& c->
¬gc
 == 3) {

695 
sds
 
”r¡r
 = 
	`sd¢ewËn
("-",1);

697 
”r¡r
 = 
	`sdsÿtsds
Ó¼¡r,
c
->
¬gv
[2]->
±r
);

698 
”r¡r
 = 
	`sdsm­ch¬s
(errstr,"\n\r"," ",2);

699 
”r¡r
 = 
	`sdsÿ’
(errstr,"\r\n",2);

700 
	`addR•lySds
(
c
,
”r¡r
);

701 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"¡ruùsize"è&& c->
¬gc
 == 2) {

702 
sds
 
sizes
 = 
	`sd£m±y
();

703 
sizes
 = 
	`sdsÿrštf
(sizes,"bits:%d ",((*) == 8)?64:32);

704 
sizes
 = 
	`sdsÿrštf
(sizes,"robj:%d ",()(
robj
));

705 
sizes
 = 
	`sdsÿrštf
(sizes,"diù’Œy:%d ",()(
diùEÁry
));

706 
sizes
 = 
	`sdsÿrštf
(sizes,"sdshdr5:%d ",()(
sdshdr5
));

707 
sizes
 = 
	`sdsÿrštf
(sizes,"sdshdr8:%d ",()(
sdshdr8
));

708 
sizes
 = 
	`sdsÿrštf
(sizes,"sdshdr16:%d ",()(
sdshdr16
));

709 
sizes
 = 
	`sdsÿrštf
(sizes,"sdshdr32:%d ",()(
sdshdr32
));

710 
sizes
 = 
	`sdsÿrštf
(sizes,"sdshdr64:%d ",()(
sdshdr64
));

711 
	`addR•lyBulkSds
(
c
,
sizes
);

712 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"ht¡©s"è&& c->
¬gc
 == 3) {

713 
dbid
;

714 
sds
 
¡©s
 = 
	`sd£m±y
();

715 
buf
[4096];

717 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
dbid
, 
NULL
è!ğ
C_OK
) {

718 
	`sdsä“
(
¡©s
);

721 ià(
dbid
 < 0 || dbid >ğ
£rv”
.
dbnum
) {

722 
	`sdsä“
(
¡©s
);

723 
	`addR•lyE¼Ü
(
c
,"Out of„ange database");

727 
¡©s
 = 
	`sdsÿrštf
(stats,"[Dictionary HT]\n");

728 
	`diùG‘Sts
(
buf
,(buf),
£rv”
.
db
[
dbid
].
diù
);

729 
¡©s
 = 
	`sdsÿt
(¡©s,
buf
);

731 
¡©s
 = 
	`sdsÿrštf
(stats,"[Expires HT]\n");

732 
	`diùG‘Sts
(
buf
,(buf),
£rv”
.
db
[
dbid
].
expœes
);

733 
¡©s
 = 
	`sdsÿt
(¡©s,
buf
);

735 
	`addR•lyV”b©im
(
c
,
¡©s
,
	`sd¦’
(stats),"txt");

736 
	`sdsä“
(
¡©s
);

737 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"ht¡©s-key"è&& c->
¬gc
 == 3) {

738 
robj
 *
o
;

739 
diù
 *
ht
 = 
NULL
;

741 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nokey”r
))

742 =ğ
NULL
) ;

745 
o
->
’codšg
) {

746 
OBJ_ENCODING_SKIPLIST
:

748 
z£t
 *
zs
 = 
o
->
±r
;

749 
ht
 = 
zs
->
diù
;

752 
OBJ_ENCODING_HT
:

753 
ht
 = 
o
->
±r
;

757 ià(
ht
 =ğ
NULL
) {

758 
	`addR•lyE¼Ü
(
c
,"The value stored‡the specified key is‚ot "

761 
buf
[4096];

762 
	`diùG‘Sts
(
buf
,(buf),
ht
);

763 
	`addR•lyV”b©im
(
c
,
buf
,
	`¡¾’
(buf),"txt");

765 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"chªge-»¶-id"è&& c->
¬gc
 == 2) {

766 
	`£rv”Log
(
LL_WARNING
,"Changing„eplication IDs‡fter„eceiving DEBUG change-repl-id");

767 
	`chªgeR•liÿtiÚId
();

768 
	`ş—rR•liÿtiÚId2
();

769 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

770 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"¡ršgm©ch-‹¡"è&& c->
¬gc
 == 2)

772 
	`¡ršgm©chËn_fuzz_‹¡
();

773 
	`addR•lyStus
(
c
,"Apparently Redis did‚ot crash:est…assed");

774 #ifdeà
USE_JEMALLOC


775 } if(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"m®lùl"è&& c->
¬gc
 >= 3) {

776 
	`m®lùl_št
(
c
, c->
¬gv
+2, c->
¬gc
-2);

778 } if(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"m®lùl-¡r"è&& c->
¬gc
 >= 3) {

779 
	`m®lùl_¡ršg
(
c
, c->
¬gv
+2, c->
¬gc
-2);

783 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

786 
	}
}

790 
	$_£rv”As£¹
(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
) {

791 
	`bugR•ÜtS¹
();

792 
	`£rv”Log
(
LL_WARNING
,"=== ASSERTION FAILED ===");

793 
	`£rv”Log
(
LL_WARNING
,"==> %s:%d '%s' i nÙrue",
fe
,
lše
,
e¡r
);

794 #ifdeà
HAVE_BACKTRACE


795 
£rv”
.
as£¹_çed
 = 
e¡r
;

796 
£rv”
.
as£¹_fe
 = 
fe
;

797 
£rv”
.
as£¹_lše
 = 
lše
;

798 
	`£rv”Log
(
LL_WARNING
,"(forcing SIGSEGVo…rinthe bug„eport.)");

801 
	}
}

803 
	$_£rv”As£¹PrštCl›ÁInfo
(cÚ¡ 
ş›Á
 *
c
) {

804 
j
;

805 
cÚnšfo
[
CONN_INFO_LEN
];

807 
	`bugR•ÜtS¹
();

808 
	`£rv”Log
(
LL_WARNING
,"=== ASSERTION FAILED CLIENT CONTEXT ===");

809 
	`£rv”Log
(
LL_WARNING
,"ş›Á->æag ğ%Îu", (è
c
->
æags
);

810 
	`£rv”Log
(
LL_WARNING
,"ş›Á->cÚÀğ%s", 
	`cÚnG‘Info
(
c
->
cÚn
, 
cÚnšfo
, (conninfo)));

811 
	`£rv”Log
(
LL_WARNING
,"ş›Á->¬gøğ%d", 
c
->
¬gc
);

812 
j
=0; j < 
c
->
¬gc
; j++) {

813 
buf
[128];

814 *
¬g
;

816 ià(
c
->
¬gv
[
j
]->
ty³
 =ğ
OBJ_STRING
 && 
	`sdsEncodedObjeù
(c->argv[j])) {

817 
¬g
 = (*è
c
->
¬gv
[
j
]->
±r
;

819 
	`¢´štf
(
buf
,(buf),"Objectype: %u,ƒncoding: %u",

820 
c
->
¬gv
[
j
]->
ty³
, c->¬gv[j]->
’codšg
);

821 
¬g
 = 
buf
;

823 
	`£rv”Log
(
LL_WARNING
,"client->argv[%d] = \"%s\" (refcount: %d)",

824 
j
, 
¬g
, 
c
->
¬gv
[j]->
»fcouÁ
);

826 
	}
}

828 
	$£rv”LogObjeùDebugInfo
(cÚ¡ 
robj
 *
o
) {

829 
	`£rv”Log
(
LL_WARNING
,"Objeùy³: %d", 
o
->
ty³
);

830 
	`£rv”Log
(
LL_WARNING
,"Objeùƒncodšg: %d", 
o
->
’codšg
);

831 
	`£rv”Log
(
LL_WARNING
,"Objeù„efcouÁ: %d", 
o
->
»fcouÁ
);

832 ià(
o
->
ty³
 =ğ
OBJ_STRING
 && 
	`sdsEncodedObjeù
(o)) {

833 
	`£rv”Log
(
LL_WARNING
,"Objeù„aw sŒšg†’: %zu", 
	`sd¦’
(
o
->
±r
));

834 ià(
	`sd¦’
(
o
->
±r
) < 4096) {

835 
sds
 
»´
 = 
	`sdsÿŒ•r
(
	`sd£m±y
(),
o
->
±r
,
	`sd¦’
(o->ptr));

836 
	`£rv”Log
(
LL_WARNING
,"Objeù„aw sŒšg cÚ‹Á: %s", 
»´
);

837 
	`sdsä“
(
»´
);

839 } ià(
o
->
ty³
 =ğ
OBJ_LIST
) {

840 
	`£rv”Log
(
LL_WARNING
,"Li¡†’gth: %d", (è
	`li¡Ty³L’gth
(
o
));

841 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

842 
	`£rv”Log
(
LL_WARNING
,"S‘ size: %d", (è
	`£tTy³Size
(
o
));

843 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

844 
	`£rv”Log
(
LL_WARNING
,"Hash size: %d", (è
	`hashTy³L’gth
(
o
));

845 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

846 
	`£rv”Log
(
LL_WARNING
,"SÜ‹d s‘ size: %d", (è
	`z£tL’gth
(
o
));

847 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
)

848 
	`£rv”Log
(
LL_WARNING
,"Skli¡†ev–: %d", (è((cÚ¡ 
z£t
*)
o
->
±r
)->
z¦
->
Ëv–
);

849 } ià(
o
->
ty³
 =ğ
OBJ_STREAM
) {

850 
	`£rv”Log
(
LL_WARNING
,"SŒ—m size: %d", (è
	`¡»amL’gth
(
o
));

852 
	}
}

854 
	$_£rv”As£¹PrštObjeù
(cÚ¡ 
robj
 *
o
) {

855 
	`bugR•ÜtS¹
();

856 
	`£rv”Log
(
LL_WARNING
,"=== ASSERTION FAILED OBJECT CONTEXT ===");

857 
	`£rv”LogObjeùDebugInfo
(
o
);

858 
	}
}

860 
	$_£rv”As£¹W™hInfo
(cÚ¡ 
ş›Á
 *
c
, cÚ¡ 
robj
 *
o
, cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
) {

861 ià(
c
è
	`_£rv”As£¹PrštCl›ÁInfo
(c);

862 ià(
o
è
	`_£rv”As£¹PrštObjeù
(o);

863 
	`_£rv”As£¹
(
e¡r
,
fe
,
lše
);

864 
	}
}

866 
	$_£rv”Pªic
(cÚ¡ *
fe
, 
lše
, cÚ¡ *
msg
, ...) {

867 
va_li¡
 
­
;

868 
	`va_¡¬t
(
­
,
msg
);

869 
fmtmsg
[256];

870 
	`v¢´štf
(
fmtmsg
,(fmtmsg),
msg
,
­
);

871 
	`va_’d
(
­
);

873 
	`bugR•ÜtS¹
();

874 
	`£rv”Log
(
LL_WARNING
,"------------------------------------------------");

875 
	`£rv”Log
(
LL_WARNING
,"!!! Software Failure. Press†eft mouse buttono continue");

876 
	`£rv”Log
(
LL_WARNING
,"Guru Med™©iÚ: % #%s:%d",
fmtmsg
,
fe
,
lše
);

877 #ifdeà
HAVE_BACKTRACE


878 
	`£rv”Log
(
LL_WARNING
,"(forcing SIGSEGV in ordero…rinthe stackrace)");

880 
	`£rv”Log
(
LL_WARNING
,"------------------------------------------------");

882 
	}
}

884 
	$bugR•ÜtS¹
() {

885 ià(
£rv”
.
bug_»pÜt_¡¬t
 == 0) {

886 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
,

888 
£rv”
.
bug_»pÜt_¡¬t
 = 1;

890 
	}
}

892 #ifdeà
HAVE_BACKTRACE


893 *
	$g‘McÚ‹xtE
(
ucÚ‹xt_t
 *
uc
) {

894 #ià
	`defšed
(
__APPLE__
è&& !defšed(
MAC_OS_X_VERSION_10_6
)

896 #ià
	`defšed
(
__x86_64__
)

897  (*è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r
;

898 #–ià
	`defšed
(
__i386__
)

899  (*è
uc
->
uc_mcÚ‹xt
->
__ss
.
__e
;

901  (*è
uc
->
uc_mcÚ‹xt
->
__ss
.
__¤r0
;

903 #–ià
	`defšed
(
__APPLE__
è&& defšed(
MAC_OS_X_VERSION_10_6
)

905 #ià
	`defšed
(
_STRUCT_X86_THREAD_STATE64
è&& !defšed(
__i386__
)

906  (*è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r
;

908  (*è
uc
->
uc_mcÚ‹xt
->
__ss
.
__e
;

910 #–ià
	`defšed
(
__lšux__
)

912 #ià
	`defšed
(
__i386__
è|| defšed(
__ILP32__
)

913  (*è
uc
->
uc_mcÚ‹xt
.
g»gs
[14];

914 #–ià
	`defšed
(
__X86_64__
è|| defšed(
__x86_64__
)

915  (*è
uc
->
uc_mcÚ‹xt
.
g»gs
[16];

916 #–ià
	`defšed
(
__Ÿ64__
)

917  (*è
uc
->
uc_mcÚ‹xt
.
sc_
;

918 #–ià
	`defšed
(
__¬m__
)

919  (*è
uc
->
uc_mcÚ‹xt
.
¬m_pc
;

920 #–ià
	`defšed
(
__¯rch64__
)

921  (*è
uc
->
uc_mcÚ‹xt
.
pc
;

923 #–ià
	`defšed
(
__F»eBSD__
)

925 #ià
	`defšed
(
__i386__
)

926  (*è
uc
->
uc_mcÚ‹xt
.
mc_e
;

927 #–ià
	`defšed
(
__x86_64__
)

928  (*è
uc
->
uc_mcÚ‹xt
.
mc_r
;

930 #–ià
	`defšed
(
__O³nBSD__
)

932 #ià
	`defšed
(
__i386__
)

933  (*è
uc
->
sc_e
;

934 #–ià
	`defšed
(
__x86_64__
)

935  (*è
uc
->
sc_r
;

937 #–ià
	`defšed
(
__D¿gÚFly__
)

938  (*è
uc
->
uc_mcÚ‹xt
.
mc_r
;

940  
NULL
;

942 
	}
}

944 
	$logSckCÚ‹Á
(**
¥
) {

945 
i
;

946 
i
 = 15; i >= 0; i--) {

947 
addr
 = (è
¥
+
i
;

948 
v®
 = (è
¥
[
i
];

951 
	`£rv”Log
(
LL_WARNING
, "(%08lxè-> %08lx", 
addr
, 
v®
);

953 
	`£rv”Log
(
LL_WARNING
, "(%016lxè-> %016lx", 
addr
, 
v®
);

955 
	}
}

957 
	$logRegi¡”s
(
ucÚ‹xt_t
 *
uc
) {

958 
	`£rv”Log
(
LL_WARNING
|
LL_RAW
, "\n------ REGISTERS ------\n");

961 #ià
	`defšed
(
__APPLE__
è&& defšed(
MAC_OS_X_VERSION_10_6
)

963 #ià
	`defšed
(
_STRUCT_X86_THREAD_STATE64
è&& !defšed(
__i386__
)

964 
	`£rv”Log
(
LL_WARNING
,

971 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__¿x
,

972 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rbx
,

973 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rcx
,

974 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rdx
,

975 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rdi
,

976 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rsi
,

977 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__rbp
,

978 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r¥
,

979 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r8
,

980 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r9
,

981 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r10
,

982 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r11
,

983 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r12
,

984 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r13
,

985 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r14
,

986 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r15
,

987 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__r
,

988 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__ræags
,

989 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__cs
,

990 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__fs
,

991 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__gs


993 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
->
__ss
.
__r¥
);

996 
	`£rv”Log
(
LL_WARNING
,

1002 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__—x
,

1003 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__ebx
,

1004 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__ecx
,

1005 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__edx
,

1006 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__edi
,

1007 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__esi
,

1008 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__ebp
,

1009 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__e¥
,

1010 (è
uc
->
uc_mcÚ‹xt
->
__ss
.__ss,

1011 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__eæags
,

1012 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__e
,

1013 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__cs
,

1014 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__ds
,

1015 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__es
,

1016 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__fs
,

1017 (è
uc
->
uc_mcÚ‹xt
->
__ss
.
__gs


1019 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
->
__ss
.
__e¥
);

1022 #–ià
	`defšed
(
__lšux__
)

1024 #ià
	`defšed
(
__i386__
è|| defšed(
__ILP32__
)

1025 
	`£rv”Log
(
LL_WARNING
,

1031 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[11],

1032 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[8],

1033 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[10],

1034 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[9],

1035 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[4],

1036 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[5],

1037 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[6],

1038 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[7],

1039 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[18],

1040 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[17],

1041 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[14],

1042 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[15],

1043 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[3],

1044 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[2],

1045 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[1],

1046 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[0]

1048 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
g»gs
[7]);

1049 #–ià
	`defšed
(
__X86_64__
è|| defšed(
__x86_64__
)

1051 
	`£rv”Log
(
LL_WARNING
,

1058 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[13],

1059 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[11],

1060 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[14],

1061 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[12],

1062 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[8],

1063 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[9],

1064 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[10],

1065 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[15],

1066 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[0],

1067 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[1],

1068 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[2],

1069 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[3],

1070 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[4],

1071 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[5],

1072 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[6],

1073 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[7],

1074 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[16],

1075 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[17],

1076 (è
uc
->
uc_mcÚ‹xt
.
g»gs
[18]

1078 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
g»gs
[15]);

1079 #–ià
	`defšed
(
__¯rch64__
)

1080 
	`£rv”Log
(
LL_WARNING
,

1087 (è
uc
->
uc_mcÚ‹xt
.
»gs
[18],

1088 (è
uc
->
uc_mcÚ‹xt
.
»gs
[19],

1089 (è
uc
->
uc_mcÚ‹xt
.
»gs
[20],

1090 (è
uc
->
uc_mcÚ‹xt
.
»gs
[21],

1091 (è
uc
->
uc_mcÚ‹xt
.
»gs
[22],

1092 (è
uc
->
uc_mcÚ‹xt
.
»gs
[23],

1093 (è
uc
->
uc_mcÚ‹xt
.
»gs
[24],

1094 (è
uc
->
uc_mcÚ‹xt
.
»gs
[25],

1095 (è
uc
->
uc_mcÚ‹xt
.
»gs
[26],

1096 (è
uc
->
uc_mcÚ‹xt
.
»gs
[27],

1097 (è
uc
->
uc_mcÚ‹xt
.
»gs
[28],

1098 (è
uc
->
uc_mcÚ‹xt
.
»gs
[29],

1099 (è
uc
->
uc_mcÚ‹xt
.
»gs
[30],

1100 (è
uc
->
uc_mcÚ‹xt
.
pc
,

1101 (è
uc
->
uc_mcÚ‹xt
.
¥
,

1102 (è
uc
->
uc_mcÚ‹xt
.
p¡©e
,

1103 (è
uc
->
uc_mcÚ‹xt
.
çuÉ_add»ss


1105 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
¥
);

1106 #–ià
	`defšed
(
__¬m__
)

1107 
	`£rv”Log
(
LL_WARNING
,

1114 (è
uc
->
uc_mcÚ‹xt
.
¬m_r10
,

1115 (è
uc
->
uc_mcÚ‹xt
.
¬m_r9
,

1116 (è
uc
->
uc_mcÚ‹xt
.
¬m_r8
,

1117 (è
uc
->
uc_mcÚ‹xt
.
¬m_r7
,

1118 (è
uc
->
uc_mcÚ‹xt
.
¬m_r6
,

1119 (è
uc
->
uc_mcÚ‹xt
.
¬m_r5
,

1120 (è
uc
->
uc_mcÚ‹xt
.
¬m_r4
,

1121 (è
uc
->
uc_mcÚ‹xt
.
¬m_r3
,

1122 (è
uc
->
uc_mcÚ‹xt
.
¬m_r2
,

1123 (è
uc
->
uc_mcÚ‹xt
.
¬m_r1
,

1124 (è
uc
->
uc_mcÚ‹xt
.
¬m_r0
,

1125 (è
uc
->
uc_mcÚ‹xt
.
”rÜ_code
,

1126 (è
uc
->
uc_mcÚ‹xt
.
¬m_å
,

1127 (è
uc
->
uc_mcÚ‹xt
.
¬m_
,

1128 (è
uc
->
uc_mcÚ‹xt
.
¬m_pc
,

1129 (è
uc
->
uc_mcÚ‹xt
.
¬m_¥
,

1130 (è
uc
->
uc_mcÚ‹xt
.
¬m_ı¤
,

1131 (è
uc
->
uc_mcÚ‹xt
.
çuÉ_add»ss


1133 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
¬m_¥
);

1135 #–ià
	`defšed
(
__F»eBSD__
)

1136 #ià
	`defšed
(
__x86_64__
)

1137 
	`£rv”Log
(
LL_WARNING
,

1144 (è
uc
->
uc_mcÚ‹xt
.
mc_¿x
,

1145 (è
uc
->
uc_mcÚ‹xt
.
mc_rbx
,

1146 (è
uc
->
uc_mcÚ‹xt
.
mc_rcx
,

1147 (è
uc
->
uc_mcÚ‹xt
.
mc_rdx
,

1148 (è
uc
->
uc_mcÚ‹xt
.
mc_rdi
,

1149 (è
uc
->
uc_mcÚ‹xt
.
mc_rsi
,

1150 (è
uc
->
uc_mcÚ‹xt
.
mc_rbp
,

1151 (è
uc
->
uc_mcÚ‹xt
.
mc_r¥
,

1152 (è
uc
->
uc_mcÚ‹xt
.
mc_r8
,

1153 (è
uc
->
uc_mcÚ‹xt
.
mc_r9
,

1154 (è
uc
->
uc_mcÚ‹xt
.
mc_r10
,

1155 (è
uc
->
uc_mcÚ‹xt
.
mc_r11
,

1156 (è
uc
->
uc_mcÚ‹xt
.
mc_r12
,

1157 (è
uc
->
uc_mcÚ‹xt
.
mc_r13
,

1158 (è
uc
->
uc_mcÚ‹xt
.
mc_r14
,

1159 (è
uc
->
uc_mcÚ‹xt
.
mc_r15
,

1160 (è
uc
->
uc_mcÚ‹xt
.
mc_r
,

1161 (è
uc
->
uc_mcÚ‹xt
.
mc_ræags
,

1162 (è
uc
->
uc_mcÚ‹xt
.
mc_cs


1164 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
mc_r¥
);

1165 #–ià
	`defšed
(
__i386__
)

1166 
	`£rv”Log
(
LL_WARNING
,

1172 (è
uc
->
uc_mcÚ‹xt
.
mc_—x
,

1173 (è
uc
->
uc_mcÚ‹xt
.
mc_ebx
,

1174 (è
uc
->
uc_mcÚ‹xt
.
mc_ebx
,

1175 (è
uc
->
uc_mcÚ‹xt
.
mc_edx
,

1176 (è
uc
->
uc_mcÚ‹xt
.
mc_edi
,

1177 (è
uc
->
uc_mcÚ‹xt
.
mc_esi
,

1178 (è
uc
->
uc_mcÚ‹xt
.
mc_ebp
,

1179 (è
uc
->
uc_mcÚ‹xt
.
mc_e¥
,

1180 (è
uc
->
uc_mcÚ‹xt
.
mc_ss
,

1181 (è
uc
->
uc_mcÚ‹xt
.
mc_eæags
,

1182 (è
uc
->
uc_mcÚ‹xt
.
mc_e
,

1183 (è
uc
->
uc_mcÚ‹xt
.
mc_cs
,

1184 (è
uc
->
uc_mcÚ‹xt
.
mc_es
,

1185 (è
uc
->
uc_mcÚ‹xt
.
mc_fs
,

1186 (è
uc
->
uc_mcÚ‹xt
.
mc_gs


1188 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
mc_e¥
);

1190 #–ià
	`defšed
(
__O³nBSD__
)

1191 #ià
	`defšed
(
__x86_64__
)

1192 
	`£rv”Log
(
LL_WARNING
,

1199 (è
uc
->
sc_¿x
,

1200 (è
uc
->
sc_rbx
,

1201 (è
uc
->
sc_rcx
,

1202 (è
uc
->
sc_rdx
,

1203 (è
uc
->
sc_rdi
,

1204 (è
uc
->
sc_rsi
,

1205 (è
uc
->
sc_rbp
,

1206 (è
uc
->
sc_r¥
,

1207 (è
uc
->
sc_r8
,

1208 (è
uc
->
sc_r9
,

1209 (è
uc
->
sc_r10
,

1210 (è
uc
->
sc_r11
,

1211 (è
uc
->
sc_r12
,

1212 (è
uc
->
sc_r13
,

1213 (è
uc
->
sc_r14
,

1214 (è
uc
->
sc_r15
,

1215 (è
uc
->
sc_r
,

1216 (è
uc
->
sc_ræags
,

1217 (è
uc
->
sc_cs


1219 
	`logSckCÚ‹Á
((**)
uc
->
sc_r¥
);

1220 #–ià
	`defšed
(
__i386__
)

1221 
	`£rv”Log
(
LL_WARNING
,

1227 (è
uc
->
sc_—x
,

1228 (è
uc
->
sc_ebx
,

1229 (è
uc
->
sc_ebx
,

1230 (è
uc
->
sc_edx
,

1231 (è
uc
->
sc_edi
,

1232 (è
uc
->
sc_esi
,

1233 (è
uc
->
sc_ebp
,

1234 (è
uc
->
sc_e¥
,

1235 (è
uc
->
sc_ss
,

1236 (è
uc
->
sc_eæags
,

1237 (è
uc
->
sc_e
,

1238 (è
uc
->
sc_cs
,

1239 (è
uc
->
sc_es
,

1240 (è
uc
->
sc_fs
,

1241 (è
uc
->
sc_gs


1243 
	`logSckCÚ‹Á
((**)
uc
->
sc_e¥
);

1245 #–ià
	`defšed
(
__D¿gÚFly__
)

1246 
	`£rv”Log
(
LL_WARNING
,

1253 (è
uc
->
uc_mcÚ‹xt
.
mc_¿x
,

1254 (è
uc
->
uc_mcÚ‹xt
.
mc_rbx
,

1255 (è
uc
->
uc_mcÚ‹xt
.
mc_rcx
,

1256 (è
uc
->
uc_mcÚ‹xt
.
mc_rdx
,

1257 (è
uc
->
uc_mcÚ‹xt
.
mc_rdi
,

1258 (è
uc
->
uc_mcÚ‹xt
.
mc_rsi
,

1259 (è
uc
->
uc_mcÚ‹xt
.
mc_rbp
,

1260 (è
uc
->
uc_mcÚ‹xt
.
mc_r¥
,

1261 (è
uc
->
uc_mcÚ‹xt
.
mc_r8
,

1262 (è
uc
->
uc_mcÚ‹xt
.
mc_r9
,

1263 (è
uc
->
uc_mcÚ‹xt
.
mc_r10
,

1264 (è
uc
->
uc_mcÚ‹xt
.
mc_r11
,

1265 (è
uc
->
uc_mcÚ‹xt
.
mc_r12
,

1266 (è
uc
->
uc_mcÚ‹xt
.
mc_r13
,

1267 (è
uc
->
uc_mcÚ‹xt
.
mc_r14
,

1268 (è
uc
->
uc_mcÚ‹xt
.
mc_r15
,

1269 (è
uc
->
uc_mcÚ‹xt
.
mc_r
,

1270 (è
uc
->
uc_mcÚ‹xt
.
mc_ræags
,

1271 (è
uc
->
uc_mcÚ‹xt
.
mc_cs


1273 
	`logSckCÚ‹Á
((**)
uc
->
uc_mcÚ‹xt
.
mc_r¥
);

1275 
	`£rv”Log
(
LL_WARNING
,

1278 
	}
}

1286 
	$İ’DœeùLogFedes
() {

1287 
log_to_¡dout
 = 
£rv”
.
logfe
[0] == '\0';

1288 
fd
 = 
log_to_¡dout
 ?

1289 
STDOUT_FILENO
 :

1290 
	`İ’
(
£rv”
.
logfe
, 
O_APPEND
|
O_CREAT
|
O_WRONLY
, 0644);

1291  
fd
;

1292 
	}
}

1295 
	$şo£DœeùLogFedes
(
fd
) {

1296 
log_to_¡dout
 = 
£rv”
.
logfe
[0] == '\0';

1297 ià(!
log_to_¡dout
è
	`şo£
(
fd
);

1298 
	}
}

1302 
	$logSckT¿û
(
ucÚ‹xt_t
 *
uc
) {

1303 *
Œaû
[101];

1304 
Œaû_size
 = 0, 
fd
 = 
	`İ’DœeùLogFedes
();

1306 ià(
fd
 == -1) ;

1309 
Œaû_size
 = 
	`backŒaû
(
Œaû
+1, 100);

1311 ià(
	`g‘McÚ‹xtE
(
uc
è!ğ
NULL
) {

1312 *
msg1
 = "EIP:\n";

1313 *
msg2
 = "\nBacktrace:\n";

1314 ià(
	`wr™e
(
fd
,
msg1
,
	`¡¾’
(msg1)) == -1) { };

1315 
Œaû
[0] = 
	`g‘McÚ‹xtE
(
uc
);

1316 
	`backŒaû_symbŞs_fd
(
Œaû
, 1, 
fd
);

1317 ià(
	`wr™e
(
fd
,
msg2
,
	`¡¾’
(msg2)) == -1) { };

1321 
	`backŒaû_symbŞs_fd
(
Œaû
+1, 
Œaû_size
, 
fd
);

1324 
	`şo£DœeùLogFedes
(
fd
);

1325 
	}
}

1330 
	$logCu¼’tCl›Á
() {

1331 ià(
£rv”
.
cu¼’t_ş›Á
 =ğ
NULL
) ;

1333 
ş›Á
 *
cc
 = 
£rv”
.
cu¼’t_ş›Á
;

1334 
sds
 
ş›Á
;

1335 
j
;

1337 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ CURRENT CLIENT INFO ------\n");

1338 
ş›Á
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
cc
);

1339 
	`£rv”Log
(
LL_WARNING
|
LL_RAW
,"%s\n", 
ş›Á
);

1340 
	`sdsä“
(
ş›Á
);

1341 
j
 = 0; j < 
cc
->
¬gc
; j++) {

1342 
robj
 *
decoded
;

1344 
decoded
 = 
	`g‘DecodedObjeù
(
cc
->
¬gv
[
j
]);

1345 
	`£rv”Log
(
LL_WARNING
|
LL_RAW
,"¬gv[%d]: '%s'\n", 
j
,

1346 (*)
decoded
->
±r
);

1347 
	`deüRefCouÁ
(
decoded
);

1351 ià(
cc
->
¬gc
 >= 1) {

1352 
robj
 *
v®
, *
key
;

1353 
diùEÁry
 *
de
;

1355 
key
 = 
	`g‘DecodedObjeù
(
cc
->
¬gv
[1]);

1356 
de
 = 
	`diùFšd
(
cc
->
db
->
diù
, 
key
->
±r
);

1357 ià(
de
) {

1358 
v®
 = 
	`diùG‘V®
(
de
);

1359 
	`£rv”Log
(
LL_WARNING
,"key '%s' found iÀDB cÚššghfŞlowšg objeù:", (*)
key
->
±r
);

1360 
	`£rv”LogObjeùDebugInfo
(
v®
);

1362 
	`deüRefCouÁ
(
key
);

1364 
	}
}

1366 #ià
defšed
(
HAVE_PROC_MAPS
)

1368 
	#MEMTEST_MAX_REGIONS
 128

	)

1371 
	$mem‹¡_‹¡_lšux_ªÚymous_m­s
() {

1372 
FILE
 *
å
;

1373 
lše
[1024];

1374 
logbuf
[1024];

1375 
size_t
 
¡¬t_addr
, 
’d_addr
, 
size
;

1376 
size_t
 
¡¬t_veù
[
MEMTEST_MAX_REGIONS
];

1377 
size_t
 
size_veù
[
MEMTEST_MAX_REGIONS
];

1378 
»giÚs
 = 0, 
j
;

1380 
fd
 = 
	`İ’DœeùLogFedes
();

1381 ià(!
fd
)  0;

1383 
å
 = 
	`fİ’
("/proc/self/maps","r");

1384 ià(!
å
)  0;

1385 
	`fg‘s
(
lše
,Öše),
å
è!ğ
NULL
) {

1386 *
¡¬t
, *
’d
, *
p
 = 
lše
;

1388 
¡¬t
 = 
p
;

1389 
p
 = 
	`¡rchr
(p,'-');

1390 ià(!
p
) ;

1391 *
p
++ = '\0';

1392 
’d
 = 
p
;

1393 
p
 = 
	`¡rchr
(p,' ');

1394 ià(!
p
) ;

1395 *
p
++ = '\0';

1396 ià(
	`¡r¡r
(
p
,"stack") ||

1397 
	`¡r¡r
(
p
,"vdso") ||

1398 
	`¡r¡r
(
p
,"vsyscall")) ;

1399 ià(!
	`¡r¡r
(
p
,"00:00")) ;

1400 ià(!
	`¡r¡r
(
p
,"rw")) ;

1402 
¡¬t_addr
 = 
	`¡¹oul
(
¡¬t
,
NULL
,16);

1403 
’d_addr
 = 
	`¡¹oul
(
’d
,
NULL
,16);

1404 
size
 = 
’d_addr
-
¡¬t_addr
;

1406 
¡¬t_veù
[
»giÚs
] = 
¡¬t_addr
;

1407 
size_veù
[
»giÚs
] = 
size
;

1408 
	`¢´štf
(
logbuf
,(logbuf),

1410 (è
¡¬t_veù
[
»giÚs
],

1411 (è
size_veù
[
»giÚs
]);

1412 ià(
	`wr™e
(
fd
,
logbuf
,
	`¡¾’
(logbuf)) == -1) { }

1413 
»giÚs
++;

1416 
”rÜs
 = 0;

1417 
j
 = 0; j < 
»giÚs
; j++) {

1418 ià(
	`wr™e
(
fd
,".",1) == -1) { }

1419 
”rÜs
 +ğ
	`mem‹¡_´e£rvšg_‹¡
((*)
¡¬t_veù
[
j
],
size_veù
[j],1);

1420 ià(
	`wr™e
(
fd
, 
”rÜs
 ? "E" : "O",1) == -1) { }

1422 ià(
	`wr™e
(
fd
,"\n",1) == -1) { }

1427 
	`fşo£
(
å
);

1428 
	`şo£DœeùLogFedes
(
fd
);

1429  
”rÜs
;

1430 
	}
}

1436 
	$dumpX86C®ls
(*
addr
, 
size_t
 
Ën
) {

1437 
size_t
 
j
;

1438 *
p
 = 
addr
;

1439 
Dl_šfo
 
šfo
;

1442 
ht
[256] = {0};

1444 ià(
Ën
 < 5) ;

1445 
j
 = 0; j < 
Ën
-4; j++) {

1446 ià(
p
[
j
] != 0xE8) ;

1447 
rg‘
 = ()
addr
+
j
+5;

1448 
rg‘
 +ğ*((
št32_t
*)(
p
+
j
+1));

1449 ià(
	`dÏddr
((*)
rg‘
, &
šfo
è!ğ0 && info.
dli_¢ame
 !ğ
NULL
) {

1450 ià(
ht
[
rg‘
&0xff] !=arget) {

1451 
	`´štf
("FunùiÚ‡ˆ0x%lx i %s\n",
rg‘
,
šfo
.
dli_¢ame
);

1452 
ht
[
rg‘
&0xff] =arget;

1454 
j
 += 4;

1457 
	}
}

1459 
	$sig£gvHªdËr
(
sig
, 
sigšfo_t
 *
šfo
, *
£ü‘
) {

1460 
ucÚ‹xt_t
 *
uc
 = (ucÚ‹xt_t*è
£ü‘
;

1461 *
e
 = 
	`g‘McÚ‹xtE
(
uc
);

1462 
sds
 
šfo¡ršg
, 
ş›Ás
;

1463 
sigaùiÚ
 
aù
;

1464 
	`UNUSED
(
šfo
);

1466 
	`bugR•ÜtS¹
();

1467 
	`£rv”Log
(
LL_WARNING
,

1468 "Redi % üashed by sigÇl: %d", 
REDIS_VERSION
, 
sig
);

1469 ià(
e
 !ğ
NULL
) {

1470 
	`£rv”Log
(
LL_WARNING
,

1471 "C¿shed„uÂšghš¡ruùiÚ‡t: %p", 
e
);

1473 ià(
sig
 =ğ
SIGSEGV
 || sig =ğ
SIGBUS
) {

1474 
	`£rv”Log
(
LL_WARNING
,

1475 "Acûssšg‡dd»ss: %p", (*)
šfo
->
si_addr
);

1477 
	`£rv”Log
(
LL_WARNING
,

1478 "Faed‡s£¹iÚ: % (%s:%d)", 
£rv”
.
as£¹_çed
,

1479 
£rv”
.
as£¹_fe
, s”v”.
as£¹_lše
);

1482 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ STACK TRACE ------\n");

1483 
	`logSckT¿û
(
uc
);

1486 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ INFO OUTPUT ------\n");

1487 
šfo¡ršg
 = 
	`g’RedisInfoSŒšg
("all");

1488 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, 
šfo¡ršg
);

1489 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ CLIENT LIST OUTPUT ------\n");

1490 
ş›Ás
 = 
	`g‘AÎCl›ÁsInfoSŒšg
(-1);

1491 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, 
ş›Ás
);

1492 
	`sdsä“
(
šfo¡ršg
);

1493 
	`sdsä“
(
ş›Ás
);

1496 
	`logCu¼’tCl›Á
();

1499 
	`logRegi¡”s
(
uc
);

1502 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ MODULES INFO OUTPUT ------\n");

1503 
šfo¡ršg
 = 
	`moduËsCŞËùInfo
(
	`sd£m±y
(), 
NULL
, 1, 0);

1504 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, 
šfo¡ršg
);

1505 
	`sdsä“
(
šfo¡ršg
);

1507 #ià
	`defšed
(
HAVE_PROC_MAPS
)

1509 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
, "\n------ FAST MEMORY TEST ------\n");

1510 
	`bioKlTh»ads
();

1511 ià(
	`mem‹¡_‹¡_lšux_ªÚymous_m­s
()) {

1512 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
,

1515 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
,

1520 ià(
e
 !ğ
NULL
) {

1521 
Dl_šfo
 
šfo
;

1522 ià(
	`dÏddr
(
e
, &
šfo
) != 0) {

1523 
	`£rv”Log
(
LL_WARNING
|
LL_RAW
,

1530 
šfo
.
dli_¢ame
, info.
dli_§ddr
, info.
dli_âame
, info.
dli_fba£
,

1531 
šfo
.
dli_§ddr
);

1532 
size_t
 
Ën
 = ()
e
 - ()
šfo
.
dli_§ddr
;

1533 
sz
 = 
	`syscÚf
(
_SC_PAGESIZE
);

1534 ià(
Ën
 < 1<<13) {

1538 
Ãxt
 = (()
e
 + 
sz
) & ~(sz-1);

1539 
’d
 = ()
e
 + 128;

1540 ià(
’d
 > 
Ãxt
)ƒnd =‚ext;

1541 
Ën
 = 
’d
 - ()
šfo
.
dli_§ddr
;

1542 
	`£rv”LogHexDump
(
LL_WARNING
, "dump of function",

1543 
šfo
.
dli_§ddr
 ,
Ën
);

1544 
	`dumpX86C®ls
(
šfo
.
dli_§ddr
,
Ën
);

1549 
	`£rv”LogRaw
(
LL_WARNING
|
LL_RAW
,

1557 ià(
£rv”
.
d«mÚize
 && s”v”.
su³rvi£d
 =ğ0è
	`uÆšk
(£rv”.
pidfe
);

1561 
	`sigem±y£t
 (&
aù
.
§_mask
);

1562 
aù
.
§_æags
 = 
SA_NODEFER
 | 
SA_ONSTACK
 | 
SA_RESETHAND
;

1563 
aù
.
§_hªdËr
 = 
SIG_DFL
;

1564 
	`sigaùiÚ
 (
sig
, &
aù
, 
NULL
);

1565 
	`kl
(
	`g‘pid
(),
sig
);

1566 
	}
}

1571 
	$£rv”LogHexDump
(
Ëv–
, *
desü
, *
v®ue
, 
size_t
 
Ën
) {

1572 
buf
[65], *
b
;

1573 *
v
 = 
v®ue
;

1574 
ch¬£t
[] = "0123456789abcdef";

1576 
	`£rv”Log
(
Ëv–
,"% (hexdum°oà%zu by‹s):", 
desü
, 
Ën
);

1577 
b
 = 
buf
;

1578 
Ën
) {

1579 
b
[0] = 
ch¬£t
[(*
v
)>>4];

1580 
b
[1] = 
ch¬£t
[(*
v
)&0xf];

1581 
b
[2] = '\0';

1582 
b
 += 2;

1583 
Ën
--;

1584 
v
++;

1585 ià(
b
-
buf
 =ğ64 || 
Ën
 == 0) {

1586 
	`£rv”LogRaw
(
Ëv–
|
LL_RAW
,
buf
);

1587 
b
 = 
buf
;

1590 
	`£rv”LogRaw
(
Ëv–
|
LL_RAW
,"\n");

1591 
	}
}

1594 
	~<sys/time.h
>

1596 
	$w©chdogSigÇlHªdËr
(
sig
, 
sigšfo_t
 *
šfo
, *
£ü‘
) {

1597 #ifdeà
HAVE_BACKTRACE


1598 
ucÚ‹xt_t
 *
uc
 = (ucÚ‹xt_t*è
£ü‘
;

1600 ()
£ü‘
;

1602 
	`UNUSED
(
šfo
);

1603 
	`UNUSED
(
sig
);

1605 
	`£rv”LogFromHªdËr
(
LL_WARNING
,"\n--- WATCHDOG TIMER EXPIRED ---");

1606 #ifdeà
HAVE_BACKTRACE


1607 
	`logSckT¿û
(
uc
);

1609 
	`£rv”LogFromHªdËr
(
LL_WARNING
,"Sorry:‚o support for backtrace().");

1611 
	`£rv”LogFromHªdËr
(
LL_WARNING
,"--------\n");

1612 
	}
}

1617 
	$w©chdogScheduËSigÇl
(
³riod
) {

1618 
™im”v®
 
™
;

1621 
™
.
™_v®ue
.
tv_£c
 = 
³riod
/1000;

1622 
™
.
™_v®ue
.
tv_u£c
 = (
³riod
%1000)*1000;

1624 
™
.
™_š‹rv®
.
tv_£c
 = 0;

1625 
™
.
™_š‹rv®
.
tv_u£c
 = 0;

1626 
	`£t™im”
(
ITIMER_REAL
, &
™
, 
NULL
);

1627 
	}
}

1630 
	$’abËW©chdog
(
³riod
) {

1631 
mš_³riod
;

1633 ià(
£rv”
.
w©chdog_³riod
 == 0) {

1634 
sigaùiÚ
 
aù
;

1638 
	`sigem±y£t
(&
aù
.
§_mask
);

1639 
aù
.
§_æags
 = 
SA_SIGINFO
;

1640 
aù
.
§_sigaùiÚ
 = 
w©chdogSigÇlHªdËr
;

1641 
	`sigaùiÚ
(
SIGALRM
, &
aù
, 
NULL
);

1646 
mš_³riod
 = (1000/
£rv”
.
hz
)*2;

1647 ià(
³riod
 < 
mš_³riod
)…eriod = min_period;

1648 
	`w©chdogScheduËSigÇl
(
³riod
);

1649 
£rv”
.
w©chdog_³riod
 = 
³riod
;

1650 
	}
}

1653 
	$di§bËW©chdog
() {

1654 
sigaùiÚ
 
aù
;

1655 ià(
£rv”
.
w©chdog_³riod
 == 0) ;

1656 
	`w©chdogScheduËSigÇl
(0);

1660 
	`sigem±y£t
(&
aù
.
§_mask
);

1661 
aù
.
§_æags
 = 0;

1662 
aù
.
§_hªdËr
 = 
SIG_IGN
;

1663 
	`sigaùiÚ
(
SIGALRM
, &
aù
, 
NULL
);

1664 
£rv”
.
w©chdog_³riod
 = 0;

1665 
	}
}

	@debugmacro.h

33 
	~<¡dio.h
>

34 
	#D
(...) \

36 
FILE
 *
å
 = 
	`fİ’
("/tmp/log.txt","a"); \

37 
	`årštf
(
å
,"%s:%s:%d:\t", 
__FILE__
, 
__func__
, 
__LINE__
); \

38 
	`årštf
(
å
,
__VA_ARGS__
); \

39 
	`årštf
(
å
,"\n"); \

40 
	`fşo£
(
å
); \

41 } 0);

	)

	@defrag.c

37 
	~"£rv”.h
"

38 
	~<time.h
>

39 
	~<as£¹.h
>

40 
	~<¡ddef.h
>

42 #ifdeà
HAVE_DEFRAG


46 
je_g‘_deäag_hšt
(* 
±r
, *
bš_ut
, *
run_ut
);

49 
deäagDiùBuck‘C®lback
(*
´ivd©a
, 
diùEÁry
 **
buck‘»f
);

50 
diùEÁry
* 
»¶aûS©–™eDiùKeyPŒAndOrDeäagDiùEÁry
(
diù
 *
d
, 
sds
 
Şdkey
, sd 
Ãwkey
, 
ušt64_t
 
hash
, *
deäagged
);

57 * 
	$aùiveDeäagAÎoc
(*
±r
) {

58 
bš_ut
, 
run_ut
;

59 
size_t
 
size
;

60 *
Ãw±r
;

61 if(!
	`je_g‘_deäag_hšt
(
±r
, &
bš_ut
, &
run_ut
)) {

62 
£rv”
.
¡©_aùive_deäag_mis£s
++;

63  
NULL
;

68 ià(
run_ut
 > 
bš_ut
 ||„un_util == 1<<16) {

69 
£rv”
.
¡©_aùive_deäag_mis£s
++;

70  
NULL
;

75 
size
 = 
	`zm®loc_size
(
±r
);

76 
Ãw±r
 = 
	`zm®loc_no_tÿche
(
size
);

77 
	`memıy
(
Ãw±r
, 
±r
, 
size
);

78 
	`zä“_no_tÿche
(
±r
);

79  
Ãw±r
;

80 
	}
}

87 
sds
 
	$aùiveDeäagSds
(
sds
 
sd¥Œ
) {

88 * 
±r
 = 
	`sdsAÎocPŒ
(
sd¥Œ
);

89 * 
Ãw±r
 = 
	`aùiveDeäagAÎoc
(
±r
);

90 ià(
Ãw±r
) {

91 
size_t
 
off£t
 = 
sd¥Œ
 - (*)
±r
;

92 
sd¥Œ
 = (*)
Ãw±r
 + 
off£t
;

93  
sd¥Œ
;

95  
NULL
;

96 
	}
}

103 
robj
 *
	$aùiveDeäagSŒšgOb
(
robj
* 
ob
, *
deäagged
) {

104 
robj
 *
»t
 = 
NULL
;

105 ià(
ob
->
»fcouÁ
!=1)

106  
NULL
;

109 ià(
ob
->
ty³
!=
OBJ_STRING
 || ob->
’codšg
!=
OBJ_ENCODING_EMBSTR
) {

110 ià((
»t
 = 
	`aùiveDeäagAÎoc
(
ob
))) {

111 
ob
 = 
»t
;

112 (*
deäagged
)++;

117 ià(
ob
->
ty³
 =ğ
OBJ_STRING
) {

118 if(
ob
->
’codšg
==
OBJ_ENCODING_RAW
) {

119 
sds
 
Ãwsds
 = 
	`aùiveDeäagSds
((sds)
ob
->
±r
);

120 ià(
Ãwsds
) {

121 
ob
->
±r
 = 
Ãwsds
;

122 (*
deäagged
)++;

124 } ià(
ob
->
’codšg
==
OBJ_ENCODING_EMBSTR
) {

127 
ofs
 = (
šŒ_t
)
ob
->
±r
 - (intptr_t)ob;

128 ià((
»t
 = 
	`aùiveDeäagAÎoc
(
ob
))) {

129 
»t
->
±r
 = (*)((
šŒ_t
ì‘ + 
ofs
);

130 (*
deäagged
)++;

132 } ià(
ob
->
’codšg
!=
OBJ_ENCODING_INT
) {

133 
	`£rv”Pªic
("Unknown stringƒncoding");

136  
»t
;

137 
	}
}

141 
	$diùI‹rDeäagEÁry
(
diùI‹¿tÜ
 *
™”
) {

145 
deäagged
 = 0;

146 
diùht
 *
ht
;

149 ià(
™”
->
ÃxtEÁry
) {

150 
diùEÁry
 *
Ãwde
 = 
	`aùiveDeäagAÎoc
(
™”
->
ÃxtEÁry
);

151 ià(
Ãwde
) {

152 
deäagged
++;

153 
™”
->
ÃxtEÁry
 = 
Ãwde
;

154 
™”
->
’Œy
->
Ãxt
 = 
Ãwde
;

158 
ht
 = &
™”
->
d
->ht[™”->
bË
];

159 ià(
ht
->
bË
[
™”
->
šdex
] =ğ™”->
’Œy
) {

160 
diùEÁry
 *
Ãwde
 = 
	`aùiveDeäagAÎoc
(
™”
->
’Œy
);

161 ià(
Ãwde
) {

162 
™”
->
’Œy
 = 
Ãwde
;

163 
ht
->
bË
[
™”
->
šdex
] = 
Ãwde
;

164 
deäagged
++;

167  
deäagged
;

168 
	}
}

173 
	$diùDeäagTabËs
(
diù
* 
d
) {

174 
diùEÁry
 **
ÃwbË
;

175 
deäagged
 = 0;

177 
ÃwbË
 = 
	`aùiveDeäagAÎoc
(
d
->
ht
[0].
bË
);

178 ià(
ÃwbË
)

179 
deäagged
++, 
d
->
ht
[0].
bË
 = 
ÃwbË
;

181 ià(
d
->
ht
[1].
bË
) {

182 
ÃwbË
 = 
	`aùiveDeäagAÎoc
(
d
->
ht
[1].
bË
);

183 ià(
ÃwbË
)

184 
deäagged
++, 
d
->
ht
[1].
bË
 = 
ÃwbË
;

186  
deäagged
;

187 
	}
}

190 
	$z¦Upd©eNode
(
zskli¡
 *
z¦
, 
zskli¡Node
 *
Şdnode
, zskli¡Nod*
Ãwnode
, zskli¡Nod**
upd©e
) {

191 
i
;

192 
i
 = 0; i < 
z¦
->
Ëv–
; i++) {

193 ià(
upd©e
[
i
]->
Ëv–
[i].
fÜw¬d
 =ğ
Şdnode
)

194 
upd©e
[
i
]->
Ëv–
[i].
fÜw¬d
 = 
Ãwnode
;

196 
	`£rv”As£¹
(
z¦
->
h—d”
!=
Şdnode
);

197 ià(
Ãwnode
->
Ëv–
[0].
fÜw¬d
) {

198 
	`£rv”As£¹
(
Ãwnode
->
Ëv–
[0].
fÜw¬d
->
backw¬d
==
Şdnode
);

199 
Ãwnode
->
Ëv–
[0].
fÜw¬d
->
backw¬d
 =‚ewnode;

201 
	`£rv”As£¹
(
z¦
->

==
Şdnode
);

202 
z¦
->

 = 
Ãwnode
;

204 
	}
}

213 *
	$z¦Deäag
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
Şd–e
, sd 
Ãw–e
) {

214 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
, *
Ãwx
;

215 
i
;

216 
sds
 
–e
 = 
Ãw–e
?‚ew–e: 
Şd–e
;

220 
x
 = 
z¦
->
h—d”
;

221 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

222 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

223 
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
 !ğ
Şd–e
 &&

226 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < score ||

227 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 == score &&

228 
	`sdscmp
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,ele) < 0)))

229 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

230 
upd©e
[
i
] = 
x
;

234 
x
 = x->
Ëv–
[0].
fÜw¬d
;

235 
	`£rv”As£¹
(
x
 && 
scÜe
 =ğx->scÜ&& x->
–e
==
Şd–e
);

236 ià(
Ãw–e
)

237 
x
->
–e
 = 
Ãw–e
;

240 
Ãwx
 = 
	`aùiveDeäagAÎoc
(
x
);

241 ià(
Ãwx
) {

242 
	`z¦Upd©eNode
(
z¦
, 
x
, 
Ãwx
, 
upd©e
);

243  &
Ãwx
->
scÜe
;

245  
NULL
;

246 
	}
}

250 
	$aùiveDeäagZ£tEÁry
(
z£t
 *
zs
, 
diùEÁry
 *
de
) {

251 
sds
 
Ãwsds
;

252 * 
ÃwscÜe
;

253 
deäagged
 = 0;

254 
sds
 
sd£Ë
 = 
	`diùG‘Key
(
de
);

255 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

256 
deäagged
++, 
de
->
key
 = 
Ãwsds
;

257 
ÃwscÜe
 = 
	`z¦Deäag
(
zs
->
z¦
, *(*)
	`diùG‘V®
(
de
), 
sd£Ë
, 
Ãwsds
);

258 ià(
ÃwscÜe
) {

259 
	`diùS‘V®
(
zs
->
diù
, 
de
, 
ÃwscÜe
);

260 
deäagged
++;

262  
deäagged
;

263 
	}
}

265 
	#DEFRAG_SDS_DICT_NO_VAL
 0

	)

266 
	#DEFRAG_SDS_DICT_VAL_IS_SDS
 1

	)

267 
	#DEFRAG_SDS_DICT_VAL_IS_STROB
 2

	)

268 
	#DEFRAG_SDS_DICT_VAL_VOID_PTR
 3

	)

271 
	$aùiveDeäagSdsDiù
(
diù
* 
d
, 
v®_ty³
) {

272 
diùI‹¿tÜ
 *
di
;

273 
diùEÁry
 *
de
;

274 
deäagged
 = 0;

275 
di
 = 
	`diùG‘I‹¿tÜ
(
d
);

276 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

277 
sds
 
sd£Ë
 = 
	`diùG‘Key
(
de
), 
Ãwsds
;

278 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

279 
de
->
key
 = 
Ãwsds
, 
deäagged
++;

281 ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_SDS
) {

282 
sd£Ë
 = 
	`diùG‘V®
(
de
);

283 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

284 
de
->
v
.
v®
 = 
Ãwsds
, 
deäagged
++;

285 } ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_STROB
) {

286 
robj
 *
Ãw–e
, *
–e
 = 
	`diùG‘V®
(
de
);

287 ià((
Ãw–e
 = 
	`aùiveDeäagSŒšgOb
(
–e
, &
deäagged
)))

288 
de
->
v
.
v®
 = 
Ãw–e
;

289 } ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_VOID_PTR
) {

290 *
Ãw±r
, *
±r
 = 
	`diùG‘V®
(
de
);

291 ià((
Ãw±r
 = 
	`aùiveDeäagAÎoc
(
±r
)))

292 
de
->
v
.
v®
 = 
Ãw±r
, 
deäagged
++;

294 
deäagged
 +ğ
	`diùI‹rDeäagEÁry
(
di
);

296 
	`diùR–—£I‹¿tÜ
(
di
);

297  
deäagged
;

298 
	}
}

301 
	$aùiveDeäagLi¡
(
li¡
 *
l
, 
v®_ty³
) {

302 
deäagged
 = 0;

303 
li¡Node
 *
Ê
, *
ÃwÊ
;

304 
Ê
 = 
l
->
h—d
;†n;†ÀğÊ->
Ãxt
) {

305 ià((
ÃwÊ
 = 
	`aùiveDeäagAÎoc
(
Ê
))) {

306 ià(
ÃwÊ
->
´ev
)

307 
ÃwÊ
->
´ev
->
Ãxt
 =‚ewln;

309 
l
->
h—d
 = 
ÃwÊ
;

310 ià(
ÃwÊ
->
Ãxt
)

311 
ÃwÊ
->
Ãxt
->
´ev
 =‚ewln;

313 
l
->

 = 
ÃwÊ
;

314 
Ê
 = 
ÃwÊ
;

315 
deäagged
++;

317 ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_SDS
) {

318 
sds
 
Ãwsds
, 
sd£Ë
 = 
Ê
->
v®ue
;

319 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

320 
Ê
->
v®ue
 = 
Ãwsds
, 
deäagged
++;

321 } ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_STROB
) {

322 
robj
 *
Ãw–e
, *
–e
 = 
Ê
->
v®ue
;

323 ià((
Ãw–e
 = 
	`aùiveDeäagSŒšgOb
(
–e
, &
deäagged
)))

324 
Ê
->
v®ue
 = 
Ãw–e
;

325 } ià(
v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_VOID_PTR
) {

326 *
Ãw±r
, *
±r
 = 
Ê
->
v®ue
;

327 ià((
Ãw±r
 = 
	`aùiveDeäagAÎoc
(
±r
)))

328 
Ê
->
v®ue
 = 
Ãw±r
, 
deäagged
++;

331  
deäagged
;

332 
	}
}

335 
	$aùiveDeäagSdsLi¡AndDiù
(
li¡
 *
l
, 
diù
 *
d
, 
diù_v®_ty³
) {

336 
deäagged
 = 0;

337 
sds
 
Ãwsds
, 
sd£Ë
;

338 
li¡Node
 *
Ê
, *
ÃwÊ
;

339 
diùI‹¿tÜ
 *
di
;

340 
diùEÁry
 *
de
;

342 
Ê
 = 
l
->
h—d
;†n;†ÀğÊ->
Ãxt
) {

343 ià((
ÃwÊ
 = 
	`aùiveDeäagAÎoc
(
Ê
))) {

344 ià(
ÃwÊ
->
´ev
)

345 
ÃwÊ
->
´ev
->
Ãxt
 =‚ewln;

347 
l
->
h—d
 = 
ÃwÊ
;

348 ià(
ÃwÊ
->
Ãxt
)

349 
ÃwÊ
->
Ãxt
->
´ev
 =‚ewln;

351 
l
->

 = 
ÃwÊ
;

352 
Ê
 = 
ÃwÊ
;

353 
deäagged
++;

355 
sd£Ë
 = 
Ê
->
v®ue
;

356 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
))) {

358 
ušt64_t
 
hash
 = 
	`diùG‘Hash
(
d
, 
sd£Ë
);

359 
	`»¶aûS©–™eDiùKeyPŒAndOrDeäagDiùEÁry
(
d
, 
sd£Ë
, 
Ãwsds
, 
hash
, &
deäagged
);

360 
Ê
->
v®ue
 = 
Ãwsds
;

361 
deäagged
++;

366 
di
 = 
	`diùG‘I‹¿tÜ
(
d
);

367 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

368 ià(
diù_v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_SDS
) {

369 
sds
 
Ãwsds
, 
sd£Ë
 = 
	`diùG‘V®
(
de
);

370 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

371 
de
->
v
.
v®
 = 
Ãwsds
, 
deäagged
++;

372 } ià(
diù_v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_IS_STROB
) {

373 
robj
 *
Ãw–e
, *
–e
 = 
	`diùG‘V®
(
de
);

374 ià((
Ãw–e
 = 
	`aùiveDeäagSŒšgOb
(
–e
, &
deäagged
)))

375 
de
->
v
.
v®
 = 
Ãw–e
, 
deäagged
++;

376 } ià(
diù_v®_ty³
 =ğ
DEFRAG_SDS_DICT_VAL_VOID_PTR
) {

377 *
Ãw±r
, *
±r
 = 
	`diùG‘V®
(
de
);

378 ià((
Ãw±r
 = 
	`aùiveDeäagAÎoc
(
±r
)))

379 
Ê
->
v®ue
 = 
Ãw±r
, 
deäagged
++;

381 
deäagged
 +ğ
	`diùI‹rDeäagEÁry
(
di
);

383 
	`diùR–—£I‹¿tÜ
(
di
);

385  
deäagged
;

386 
	}
}

395 
diùEÁry
* 
	$»¶aûS©–™eDiùKeyPŒAndOrDeäagDiùEÁry
(
diù
 *
d
, 
sds
 
Şdkey
, sd 
Ãwkey
, 
ušt64_t
 
hash
, *
deäagged
) {

396 
diùEÁry
 **
d”ef
 = 
	`diùFšdEÁryRefByPŒAndHash
(
d
, 
Şdkey
, 
hash
);

397 ià(
d”ef
) {

398 
diùEÁry
 *
de
 = *
d”ef
;

399 
diùEÁry
 *
Ãwde
 = 
	`aùiveDeäagAÎoc
(
de
);

400 ià(
Ãwde
) {

401 
de
 = *
d”ef
 = 
Ãwde
;

402 (*
deäagged
)++;

404 ià(
Ãwkey
)

405 
de
->
key
 = 
Ãwkey
;

406  
de
;

408  
NULL
;

409 
	}
}

411 
	$aùiveDeäagQuickLi¡Node
(
quickli¡
 *
ql
, 
quickli¡Node
 **
node_»f
) {

412 
quickli¡Node
 *
Ãwnode
, *
node
 = *
node_»f
;

413 
deäagged
 = 0;

414 *
Ãwzl
;

415 ià((
Ãwnode
 = 
	`aùiveDeäagAÎoc
(
node
))) {

416 ià(
Ãwnode
->
´ev
)

417 
Ãwnode
->
´ev
->
Ãxt
 =‚ewnode;

419 
ql
->
h—d
 = 
Ãwnode
;

420 ià(
Ãwnode
->
Ãxt
)

421 
Ãwnode
->
Ãxt
->
´ev
 =‚ewnode;

423 
ql
->

 = 
Ãwnode
;

424 *
node_»f
 = 
node
 = 
Ãwnode
;

425 
deäagged
++;

427 ià((
Ãwzl
 = 
	`aùiveDeäagAÎoc
(
node
->
zl
)))

428 
deäagged
++, 
node
->
zl
 = 
Ãwzl
;

429  
deäagged
;

430 
	}
}

432 
	$aùiveDeäagQuickLi¡Nodes
(
quickli¡
 *
ql
) {

433 
quickli¡Node
 *
node
 = 
ql
->
h—d
;

434 
deäagged
 = 0;

435 
node
) {

436 
deäagged
 +ğ
	`aùiveDeäagQuickLi¡Node
(
ql
, &
node
);

437 
node
 =‚ode->
Ãxt
;

439  
deäagged
;

440 
	}
}

445 
	$deäagL©”
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

446 
sds
 
key
 = 
	`sdsdup
(
	`diùG‘Key
(
kde
));

447 
	`li¡AddNodeTa
(
db
->
deäag_Ï‹r
, 
key
);

448 
	}
}

451 
	$sÿnL©”Li¡
(
robj
 *
ob
, *
cursÜ
, 
’dtime
, *
deäagged
) {

452 
quickli¡
 *
ql
 = 
ob
->
±r
;

453 
quickli¡Node
 *
node
;

454 
™”©iÚs
 = 0;

455 
bookm¬k_çed
 = 0;

456 ià(
ob
->
ty³
 !ğ
OBJ_LIST
 || ob->
’codšg
 !ğ
OBJ_ENCODING_QUICKLIST
)

459 ià(*
cursÜ
 == 0) {

461 
node
 = 
ql
->
h—d
;

463 
node
 = 
	`quickli¡Bookm¬kFšd
(
ql
, "_AD");

464 ià(!
node
) {

466 *
cursÜ
 = 0;

469 
node
 =‚ode->
Ãxt
;

472 (*
cursÜ
)++;

473 
node
) {

474 (*
deäagged
è+ğ
	`aùiveDeäagQuickLi¡Node
(
ql
, &
node
);

475 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

476 ià(++
™”©iÚs
 > 128 && !
bookm¬k_çed
) {

477 ià(
	`u¡ime
(è> 
’dtime
) {

478 ià(!
	`quickli¡Bookm¬kC»©e
(&
ql
, "_AD", 
node
)) {

479 
bookm¬k_çed
 = 1;

481 
ob
->
±r
 = 
ql
;

485 
™”©iÚs
 = 0;

487 
node
 =‚ode->
Ãxt
;

489 
	`quickli¡Bookm¬kD–‘e
(
ql
, "_AD");

490 *
cursÜ
 = 0;

491  
bookm¬k_çed
? 1: 0;

492 
	}
}

495 
z£t
 *
	mzs
;

496 
	mdeäagged
;

497 } 
	tsÿnL©”Z£tD©a
;

499 
	$sÿnL©”Z£tC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
_de
) {

500 
diùEÁry
 *
de
 = (diùEÁry*)
_de
;

501 
sÿnL©”Z£tD©a
 *
d©a
 = 
´ivd©a
;

502 
d©a
->
deäagged
 +ğ
	`aùiveDeäagZ£tEÁry
(d©a->
zs
, 
de
);

503 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

504 
	}
}

506 
	$sÿnL©”Z£t
(
robj
 *
ob
, *
cursÜ
) {

507 ià(
ob
->
ty³
 !ğ
OBJ_ZSET
 || ob->
’codšg
 !ğ
OBJ_ENCODING_SKIPLIST
)

509 
z£t
 *
zs
 = (z£t*)
ob
->
±r
;

510 
diù
 *
d
 = 
zs
->dict;

511 
sÿnL©”Z£tD©a
 
d©a
 = {
zs
, 0};

512 *
cursÜ
 = 
	`diùSÿn
(
d
, *cursÜ, 
sÿnL©”Z£tC®lback
, 
deäagDiùBuck‘C®lback
, &
d©a
);

513  
d©a
.
deäagged
;

514 
	}
}

516 
	$sÿnL©”S‘C®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
_de
) {

517 
diùEÁry
 *
de
 = (diùEÁry*)
_de
;

518 *
deäagged
 = 
´ivd©a
;

519 
sds
 
sd£Ë
 = 
	`diùG‘Key
(
de
), 
Ãwsds
;

520 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

521 (*
deäagged
)++, 
de
->
key
 = 
Ãwsds
;

522 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

523 
	}
}

525 
	$sÿnL©”S‘
(
robj
 *
ob
, *
cursÜ
) {

526 
deäagged
 = 0;

527 ià(
ob
->
ty³
 !ğ
OBJ_SET
 || ob->
’codšg
 !ğ
OBJ_ENCODING_HT
)

529 
diù
 *
d
 = 
ob
->
±r
;

530 *
cursÜ
 = 
	`diùSÿn
(
d
, *cursÜ, 
sÿnL©”S‘C®lback
, 
deäagDiùBuck‘C®lback
, &
deäagged
);

531  
deäagged
;

532 
	}
}

534 
	$sÿnL©”HashC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
_de
) {

535 
diùEÁry
 *
de
 = (diùEÁry*)
_de
;

536 *
deäagged
 = 
´ivd©a
;

537 
sds
 
sd£Ë
 = 
	`diùG‘Key
(
de
), 
Ãwsds
;

538 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

539 (*
deäagged
)++, 
de
->
key
 = 
Ãwsds
;

540 
sd£Ë
 = 
	`diùG‘V®
(
de
);

541 ià((
Ãwsds
 = 
	`aùiveDeäagSds
(
sd£Ë
)))

542 (*
deäagged
)++, 
de
->
v
.
v®
 = 
Ãwsds
;

543 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

544 
	}
}

546 
	$sÿnL©”Hash
(
robj
 *
ob
, *
cursÜ
) {

547 
deäagged
 = 0;

548 ià(
ob
->
ty³
 !ğ
OBJ_HASH
 || ob->
’codšg
 !ğ
OBJ_ENCODING_HT
)

550 
diù
 *
d
 = 
ob
->
±r
;

551 *
cursÜ
 = 
	`diùSÿn
(
d
, *cursÜ, 
sÿnL©”HashC®lback
, 
deäagDiùBuck‘C®lback
, &
deäagged
);

552  
deäagged
;

553 
	}
}

555 
	$deäagQuickli¡
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

556 
robj
 *
ob
 = 
	`diùG‘V®
(
kde
);

557 
deäagged
 = 0;

558 
quickli¡
 *
ql
 = 
ob
->
±r
, *
Ãwql
;

559 
	`£rv”As£¹
(
ob
->
ty³
 =ğ
OBJ_LIST
 && ob->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
);

560 ià((
Ãwql
 = 
	`aùiveDeäagAÎoc
(
ql
)))

561 
deäagged
++, 
ob
->
±r
 = 
ql
 = 
Ãwql
;

562 ià(
ql
->
Ën
 > 
£rv”
.
aùive_deäag_max_sÿn_f›lds
)

563 
	`deäagL©”
(
db
, 
kde
);

565 
deäagged
 +ğ
	`aùiveDeäagQuickLi¡Nodes
(
ql
);

566  
deäagged
;

567 
	}
}

569 
	$deäagZ£tSkli¡
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

570 
robj
 *
ob
 = 
	`diùG‘V®
(
kde
);

571 
deäagged
 = 0;

572 
z£t
 *
zs
 = (z£t*)
ob
->
±r
;

573 
z£t
 *
Ãwzs
;

574 
zskli¡
 *
Ãwz¦
;

575 
diù
 *
Ãwdiù
;

576 
diùEÁry
 *
de
;

577 
zskli¡Node
 *
Ãwh—d”
;

578 
	`£rv”As£¹
(
ob
->
ty³
 =ğ
OBJ_ZSET
 && ob->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
);

579 ià((
Ãwzs
 = 
	`aùiveDeäagAÎoc
(
zs
)))

580 
deäagged
++, 
ob
->
±r
 = 
zs
 = 
Ãwzs
;

581 ià((
Ãwz¦
 = 
	`aùiveDeäagAÎoc
(
zs
->
z¦
)))

582 
deäagged
++, 
zs
->
z¦
 = 
Ãwz¦
;

583 ià((
Ãwh—d”
 = 
	`aùiveDeäagAÎoc
(
zs
->
z¦
->
h—d”
)))

584 
deäagged
++, 
zs
->
z¦
->
h—d”
 = 
Ãwh—d”
;

585 ià(
	`diùSize
(
zs
->
diù
è> 
£rv”
.
aùive_deäag_max_sÿn_f›lds
)

586 
	`deäagL©”
(
db
, 
kde
);

588 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
zs
->
diù
);

589 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

590 
deäagged
 +ğ
	`aùiveDeäagZ£tEÁry
(
zs
, 
de
);

592 
	`diùR–—£I‹¿tÜ
(
di
);

595 ià((
Ãwdiù
 = 
	`aùiveDeäagAÎoc
(
zs
->
diù
)))

596 
deäagged
++, 
zs
->
diù
 = 
Ãwdiù
;

598 
deäagged
 +ğ
	`diùDeäagTabËs
(
zs
->
diù
);

599  
deäagged
;

600 
	}
}

602 
	$deäagHash
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

603 
deäagged
 = 0;

604 
robj
 *
ob
 = 
	`diùG‘V®
(
kde
);

605 
diù
 *
d
, *
Ãwd
;

606 
	`£rv”As£¹
(
ob
->
ty³
 =ğ
OBJ_HASH
 && ob->
’codšg
 =ğ
OBJ_ENCODING_HT
);

607 
d
 = 
ob
->
±r
;

608 ià(
	`diùSize
(
d
è> 
£rv”
.
aùive_deäag_max_sÿn_f›lds
)

609 
	`deäagL©”
(
db
, 
kde
);

611 
deäagged
 +ğ
	`aùiveDeäagSdsDiù
(
d
, 
DEFRAG_SDS_DICT_VAL_IS_SDS
);

613 ià((
Ãwd
 = 
	`aùiveDeäagAÎoc
(
ob
->
±r
)))

614 
deäagged
++, 
ob
->
±r
 = 
Ãwd
;

616 
deäagged
 +ğ
	`diùDeäagTabËs
(
ob
->
±r
);

617  
deäagged
;

618 
	}
}

620 
	$deäagS‘
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

621 
deäagged
 = 0;

622 
robj
 *
ob
 = 
	`diùG‘V®
(
kde
);

623 
diù
 *
d
, *
Ãwd
;

624 
	`£rv”As£¹
(
ob
->
ty³
 =ğ
OBJ_SET
 && ob->
’codšg
 =ğ
OBJ_ENCODING_HT
);

625 
d
 = 
ob
->
±r
;

626 ià(
	`diùSize
(
d
è> 
£rv”
.
aùive_deäag_max_sÿn_f›lds
)

627 
	`deäagL©”
(
db
, 
kde
);

629 
deäagged
 +ğ
	`aùiveDeäagSdsDiù
(
d
, 
DEFRAG_SDS_DICT_NO_VAL
);

631 ià((
Ãwd
 = 
	`aùiveDeäagAÎoc
(
ob
->
±r
)))

632 
deäagged
++, 
ob
->
±r
 = 
Ãwd
;

634 
deäagged
 +ğ
	`diùDeäagTabËs
(
ob
->
±r
);

635  
deäagged
;

636 
	}
}

640 
	$deäagRaxNode
(
¿xNode
 **
nod”ef
) {

641 
¿xNode
 *
Ãwnode
 = 
	`aùiveDeäagAÎoc
(*
nod”ef
);

642 ià(
Ãwnode
) {

643 *
nod”ef
 = 
Ãwnode
;

647 
	}
}

650 
	$sÿnL©”SŒ«mLi¡·cks
(
robj
 *
ob
, *
cursÜ
, 
’dtime
, *
deäagged
) {

651 
Ï¡
[(
¡»amID
)];

652 
¿xI‹¿tÜ
 
ri
;

653 
™”©iÚs
 = 0;

654 ià(
ob
->
ty³
 !ğ
OBJ_STREAM
 || ob->
’codšg
 !ğ
OBJ_ENCODING_STREAM
) {

655 *
cursÜ
 = 0;

659 
¡»am
 *
s
 = 
ob
->
±r
;

660 
	`¿xS¹
(&
ri
,
s
->
¿x
);

661 ià(*
cursÜ
 == 0) {

663 
	`deäagRaxNode
(&
s
->
¿x
->
h—d
);

666 
ri
.
node_cb
 = 
deäagRaxNode
;

667 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

670 ià(!
	`¿xS“k
(&
ri
,">", 
Ï¡
, (last))) {

671 *
cursÜ
 = 0;

676 
ri
.
node_cb
 = 
deäagRaxNode
;

679 (*
cursÜ
)++;

680 
	`¿xNext
(&
ri
)) {

681 *
Ãwd©a
 = 
	`aùiveDeäagAÎoc
(
ri
.
d©a
);

682 ià(
Ãwd©a
)

683 
	`¿xS‘D©a
(
ri
.
node
,„i.
d©a
=
Ãwd©a
), (*
deäagged
)++;

684 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

685 ià(++
™”©iÚs
 > 128) {

686 ià(
	`u¡ime
(è> 
’dtime
) {

687 
	`£rv”As£¹
(
ri
.
key_Ën
==(
Ï¡
));

688 
	`memıy
(
Ï¡
,
ri
.
key
,ri.
key_Ën
);

689 
	`¿xStİ
(&
ri
);

692 
™”©iÚs
 = 0;

695 
	`¿xStİ
(&
ri
);

696 *
cursÜ
 = 0;

698 
	}
}

701 *(
	t¿xDeäagFunùiÚ
)(
	t¿xI‹¿tÜ
 *
	tri
, *
	t´ivd©a
, *
	tdeäagged
);

708 
	$deäagRadixT»e
(
¿x
 **
¿x»f
, 
deäag_d©a
, 
¿xDeäagFunùiÚ
 *
–em’t_cb
, *
–em’t_cb_d©a
) {

709 
deäagged
 = 0;

710 
¿xI‹¿tÜ
 
ri
;

711 
¿x
*„ax;

712 ià((
¿x
 = 
	`aùiveDeäagAÎoc
(*
¿x»f
)))

713 
deäagged
++, *
¿x»f
 = 
¿x
;

714 
¿x
 = *
¿x»f
;

715 
	`¿xS¹
(&
ri
,
¿x
);

716 
ri
.
node_cb
 = 
deäagRaxNode
;

717 
	`deäagRaxNode
(&
¿x
->
h—d
);

718 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

719 
	`¿xNext
(&
ri
)) {

720 *
Ãwd©a
 = 
NULL
;

721 ià(
–em’t_cb
)

722 
Ãwd©a
 = 
	`–em’t_cb
(&
ri
, 
–em’t_cb_d©a
, &
deäagged
);

723 ià(
deäag_d©a
 && !
Ãwd©a
)

724 
Ãwd©a
 = 
	`aùiveDeäagAÎoc
(
ri
.
d©a
);

725 ià(
Ãwd©a
)

726 
	`¿xS‘D©a
(
ri
.
node
,„i.
d©a
=
Ãwd©a
), 
deäagged
++;

728 
	`¿xStİ
(&
ri
);

729  
deäagged
;

730 
	}
}

733 
¡»amCG
 *
	mcg
;

734 
¡»amCÚsum”
 *
	mc
;

735 } 
	tP’dšgEÁryCÚ‹xt
;

737 * 
	$deäagSŒ—mCÚsum”P’dšgEÁry
(
¿xI‹¿tÜ
 *
ri
, *
´ivd©a
, *
deäagged
) {

738 
	`UNUSED
(
deäagged
);

739 
P’dšgEÁryCÚ‹xt
 *
ùx
 = 
´ivd©a
;

740 
¡»amNACK
 *
Çck
 = 
ri
->
d©a
, *
ÃwÇck
;

741 
Çck
->
cÚsum”
 = 
ùx
->
c
;

742 
ÃwÇck
 = 
	`aùiveDeäagAÎoc
(
Çck
);

743 ià(
ÃwÇck
) {

745 *
´ev
;

746 
	`¿xIn£¹
(
ùx
->
cg
->
³l
, 
ri
->
key
,„i->
key_Ën
, 
ÃwÇck
, &
´ev
);

747 
	`£rv”As£¹
(
´ev
==
Çck
);

750  
ÃwÇck
;

751 
	}
}

753 * 
	$deäagSŒ—mCÚsum”
(
¿xI‹¿tÜ
 *
ri
, *
´ivd©a
, *
deäagged
) {

754 
¡»amCÚsum”
 *
c
 = 
ri
->
d©a
;

755 
¡»amCG
 *
cg
 = 
´ivd©a
;

756 *
Ãwc
 = 
	`aùiveDeäagAÎoc
(
c
);

757 ià(
Ãwc
) {

759 
c
 = 
Ãwc
;

761 
sds
 
Ãwsds
 = 
	`aùiveDeäagSds
(
c
->
Çme
);

762 ià(
Ãwsds
)

763 (*
deäagged
)++, 
c
->
Çme
 = 
Ãwsds
;

764 ià(
c
->
³l
) {

765 
P’dšgEÁryCÚ‹xt
 
³l_ùx
 = {
cg
, 
c
};

766 *
deäagged
 +ğ
	`deäagRadixT»e
(&
c
->
³l
, 0, 
deäagSŒ—mCÚsum”P’dšgEÁry
, &
³l_ùx
);

768  
Ãwc
;

769 
	}
}

771 * 
	$deäagSŒ—mCÚsum”Group
(
¿xI‹¿tÜ
 *
ri
, *
´ivd©a
, *
deäagged
) {

772 
¡»amCG
 *
cg
 = 
ri
->
d©a
;

773 
	`UNUSED
(
´ivd©a
);

774 ià(
cg
->
cÚsum”s
)

775 *
deäagged
 +ğ
	`deäagRadixT»e
(&
cg
->
cÚsum”s
, 0, 
deäagSŒ—mCÚsum”
, cg);

776 ià(
cg
->
³l
)

777 *
deäagged
 +ğ
	`deäagRadixT»e
(&
cg
->
³l
, 0, 
NULL
, NULL);

778  
NULL
;

779 
	}
}

781 
	$deäagSŒ—m
(
»disDb
 *
db
, 
diùEÁry
 *
kde
) {

782 
deäagged
 = 0;

783 
robj
 *
ob
 = 
	`diùG‘V®
(
kde
);

784 
	`£rv”As£¹
(
ob
->
ty³
 =ğ
OBJ_STREAM
 && ob->
’codšg
 =ğ
OBJ_ENCODING_STREAM
);

785 
¡»am
 *
s
 = 
ob
->
±r
, *
Ãws
;

788 ià((
Ãws
 = 
	`aùiveDeäagAÎoc
(
s
)))

789 
deäagged
++, 
ob
->
±r
 = 
s
 = 
Ãws
;

791 ià(
	`¿xSize
(
s
->
¿x
è> 
£rv”
.
aùive_deäag_max_sÿn_f›lds
) {

792 
¿x
 *
Ãw¿x
 = 
	`aùiveDeäagAÎoc
(
s
->rax);

793 ià(
Ãw¿x
)

794 
deäagged
++, 
s
->
¿x
 = 
Ãw¿x
;

795 
	`deäagL©”
(
db
, 
kde
);

797 
deäagged
 +ğ
	`deäagRadixT»e
(&
s
->
¿x
, 1, 
NULL
, NULL);

799 ià(
s
->
cgroups
)

800 
deäagged
 +ğ
	`deäagRadixT»e
(&
s
->
cgroups
, 1, 
deäagSŒ—mCÚsum”Group
, 
NULL
);

801  
deäagged
;

802 
	}
}

807 
	$deäagKey
(
»disDb
 *
db
, 
diùEÁry
 *
de
) {

808 
sds
 
keysds
 = 
	`diùG‘Key
(
de
);

809 
robj
 *
Ãwob
, *
ob
;

810 *
Ãwzl
;

811 
deäagged
 = 0;

812 
sds
 
Ãwsds
;

815 
Ãwsds
 = 
	`aùiveDeäagSds
(
keysds
);

816 ià(
Ãwsds
)

817 
deäagged
++, 
de
->
key
 = 
Ãwsds
;

818 ià(
	`diùSize
(
db
->
expœes
)) {

822 
ušt64_t
 
hash
 = 
	`diùG‘Hash
(
db
->
diù
, 
de
->
key
);

823 
	`»¶aûS©–™eDiùKeyPŒAndOrDeäagDiùEÁry
(
db
->
expœes
, 
keysds
, 
Ãwsds
, 
hash
, &
deäagged
);

827 
ob
 = 
	`diùG‘V®
(
de
);

828 ià((
Ãwob
 = 
	`aùiveDeäagSŒšgOb
(
ob
, &
deäagged
))) {

829 
de
->
v
.
v®
 = 
Ãwob
;

830 
ob
 = 
Ãwob
;

833 ià(
ob
->
ty³
 =ğ
OBJ_STRING
) {

835 } ià(
ob
->
ty³
 =ğ
OBJ_LIST
) {

836 ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

837 
deäagged
 +ğ
	`deäagQuickli¡
(
db
, 
de
);

838 } ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

839 ià((
Ãwzl
 = 
	`aùiveDeäagAÎoc
(
ob
->
±r
)))

840 
deäagged
++, 
ob
->
±r
 = 
Ãwzl
;

842 
	`£rv”Pªic
("Unknown†istƒncoding");

844 } ià(
ob
->
ty³
 =ğ
OBJ_SET
) {

845 ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

846 
deäagged
 +ğ
	`deäagS‘
(
db
, 
de
);

847 } ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

848 
št£t
 *
Ãwis
, *
is
 = 
ob
->
±r
;

849 ià((
Ãwis
 = 
	`aùiveDeäagAÎoc
(
is
)))

850 
deäagged
++, 
ob
->
±r
 = 
Ãwis
;

852 
	`£rv”Pªic
("Unknown setƒncoding");

854 } ià(
ob
->
ty³
 =ğ
OBJ_ZSET
) {

855 ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

856 ià((
Ãwzl
 = 
	`aùiveDeäagAÎoc
(
ob
->
±r
)))

857 
deäagged
++, 
ob
->
±r
 = 
Ãwzl
;

858 } ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

859 
deäagged
 +ğ
	`deäagZ£tSkli¡
(
db
, 
de
);

861 
	`£rv”Pªic
("Unknown sorted setƒncoding");

863 } ià(
ob
->
ty³
 =ğ
OBJ_HASH
) {

864 ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

865 ià((
Ãwzl
 = 
	`aùiveDeäagAÎoc
(
ob
->
±r
)))

866 
deäagged
++, 
ob
->
±r
 = 
Ãwzl
;

867 } ià(
ob
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

868 
deäagged
 +ğ
	`deäagHash
(
db
, 
de
);

870 
	`£rv”Pªic
("Unknown hashƒncoding");

872 } ià(
ob
->
ty³
 =ğ
OBJ_STREAM
) {

873 
deäagged
 +ğ
	`deäagSŒ—m
(
db
, 
de
);

874 } ià(
ob
->
ty³
 =ğ
OBJ_MODULE
) {

878 
	`£rv”Pªic
("Unknown objectype");

880  
deäagged
;

881 
	}
}

884 
	$deäagSÿnC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
de
) {

885 
deäagged
 = 
	`deäagKey
((
»disDb
*)
´ivd©a
, (
diùEÁry
*)
de
);

886 
£rv”
.
¡©_aùive_deäag_h™s
 +ğ
deäagged
;

887 if(
deäagged
)

888 
£rv”
.
¡©_aùive_deäag_key_h™s
++;

890 
£rv”
.
¡©_aùive_deäag_key_mis£s
++;

891 
£rv”
.
¡©_aùive_deäag_sÿÂed
++;

892 
	}
}

896 
	$deäagDiùBuck‘C®lback
(*
´ivd©a
, 
diùEÁry
 **
buck‘»f
) {

897 
	`UNUSED
(
´ivd©a
);

898 *
buck‘»f
) {

899 
diùEÁry
 *
de
 = *
buck‘»f
, *
Ãwde
;

900 ià((
Ãwde
 = 
	`aùiveDeäagAÎoc
(
de
))) {

901 *
buck‘»f
 = 
Ãwde
;

903 
buck‘»f
 = &(*buck‘»f)->
Ãxt
;

905 
	}
}

913 
	$g‘AÎoÿtÜF¿gm’tiÚ
(
size_t
 *
out_äag_by‹s
) {

914 
size_t
 
»sid’t
, 
aùive
, 
®loÿ‹d
;

915 
	`zm®loc_g‘_®loÿtÜ_šfo
(&
®loÿ‹d
, &
aùive
, &
»sid’t
);

916 
äag_pù
 = (()
aùive
 / 
®loÿ‹d
)*100 - 100;

917 
size_t
 
äag_by‹s
 = 
aùive
 - 
®loÿ‹d
;

918 
rss_pù
 = (()
»sid’t
 / 
®loÿ‹d
)*100 - 100;

919 
size_t
 
rss_by‹s
 = 
»sid’t
 - 
®loÿ‹d
;

920 if(
out_äag_by‹s
)

921 *
out_äag_by‹s
 = 
äag_by‹s
;

922 
	`£rv”Log
(
LL_DEBUG
,

924 
®loÿ‹d
, 
aùive
, 
»sid’t
, 
äag_pù
, 
rss_pù
, 
äag_by‹s
, 
rss_by‹s
);

925  
äag_pù
;

926 
	}
}

930 
	$deäagOth”Glob®s
() {

931 
deäagged
 = 0;

936 
deäagged
 +ğ
	`aùiveDeäagSdsDiù
(
£rv”
.
lua_süts
, 
DEFRAG_SDS_DICT_VAL_IS_STROB
);

937 
deäagged
 +ğ
	`aùiveDeäagSdsLi¡AndDiù
(
£rv”
.
»¶_sütÿche_fifo
, s”v”.
»¶_sütÿche_diù
, 
DEFRAG_SDS_DICT_NO_VAL
);

938  
deäagged
;

939 
	}
}

943 
	$deäagL©”I‹m
(
diùEÁry
 *
de
, *
cursÜ
, 
’dtime
) {

944 ià(
de
) {

945 
robj
 *
ob
 = 
	`diùG‘V®
(
de
);

946 ià(
ob
->
ty³
 =ğ
OBJ_LIST
) {

947  
	`sÿnL©”Li¡
(
ob
, 
cursÜ
, 
’dtime
, &
£rv”
.
¡©_aùive_deäag_h™s
);

948 } ià(
ob
->
ty³
 =ğ
OBJ_SET
) {

949 
£rv”
.
¡©_aùive_deäag_h™s
 +ğ
	`sÿnL©”S‘
(
ob
, 
cursÜ
);

950 } ià(
ob
->
ty³
 =ğ
OBJ_ZSET
) {

951 
£rv”
.
¡©_aùive_deäag_h™s
 +ğ
	`sÿnL©”Z£t
(
ob
, 
cursÜ
);

952 } ià(
ob
->
ty³
 =ğ
OBJ_HASH
) {

953 
£rv”
.
¡©_aùive_deäag_h™s
 +ğ
	`sÿnL©”Hash
(
ob
, 
cursÜ
);

954 } ià(
ob
->
ty³
 =ğ
OBJ_STREAM
) {

955  
	`sÿnL©”SŒ«mLi¡·cks
(
ob
, 
cursÜ
, 
’dtime
, &
£rv”
.
¡©_aùive_deäag_h™s
);

957 *
cursÜ
 = 0;

960 *
cursÜ
 = 0;

963 
	}
}

966 
sds
 
	gdeäag_Ï‹r_cu¼’t_key
 = 
NULL
;

967 
	gdeäag_Ï‹r_cursÜ
 = 0;

970 
	$deäagL©”S‹p
(
»disDb
 *
db
, 
’dtime
) {

971 
™”©iÚs
 = 0;

972 
´ev_deäagged
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

973 
´ev_sÿÂed
 = 
£rv”
.
¡©_aùive_deäag_sÿÂed
;

974 
key_deäagged
;

978 ià(!
deäag_Ï‹r_cursÜ
) {

979 
li¡Node
 *
h—d
 = 
	`li¡Fœ¡
(
db
->
deäag_Ï‹r
);

982 ià(
deäag_Ï‹r_cu¼’t_key
) {

983 
	`£rv”As£¹
(
deäag_Ï‹r_cu¼’t_key
 =ğ
h—d
->
v®ue
);

984 
	`li¡D–Node
(
db
->
deäag_Ï‹r
, 
h—d
);

985 
deäag_Ï‹r_cursÜ
 = 0;

986 
deäag_Ï‹r_cu¼’t_key
 = 
NULL
;

990 
h—d
 = 
	`li¡Fœ¡
(
db
->
deäag_Ï‹r
);

991 ià(!
h—d
)

995 
deäag_Ï‹r_cu¼’t_key
 = 
h—d
->
v®ue
;

996 
deäag_Ï‹r_cursÜ
 = 0;

1000 
diùEÁry
 *
de
 = 
	`diùFšd
(
db
->
diù
, 
deäag_Ï‹r_cu¼’t_key
);

1001 
key_deäagged
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

1003 
qu™
 = 0;

1004 ià(
	`deäagL©”I‹m
(
de
, &
deäag_Ï‹r_cursÜ
, 
’dtime
))

1005 
qu™
 = 1;

1010 ià(
qu™
 || (++
™”©iÚs
 > 16 ||

1011 
£rv”
.
¡©_aùive_deäag_h™s
 - 
´ev_deäagged
 > 512 ||

1012 
£rv”
.
¡©_aùive_deäag_sÿÂed
 - 
´ev_sÿÂed
 > 64)) {

1013 ià(
qu™
 || 
	`u¡ime
(è> 
’dtime
) {

1014 if(
key_deäagged
 !ğ
£rv”
.
¡©_aùive_deäag_h™s
)

1015 
£rv”
.
¡©_aùive_deäag_key_h™s
++;

1017 
£rv”
.
¡©_aùive_deäag_key_mis£s
++;

1020 
™”©iÚs
 = 0;

1021 
´ev_deäagged
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

1022 
´ev_sÿÂed
 = 
£rv”
.
¡©_aùive_deäag_sÿÂed
;

1024 } 
deäag_Ï‹r_cursÜ
);

1025 if(
key_deäagged
 !ğ
£rv”
.
¡©_aùive_deäag_h™s
)

1026 
£rv”
.
¡©_aùive_deäag_key_h™s
++;

1028 
£rv”
.
¡©_aùive_deäag_key_mis£s
++;

1030 
	}
}

1032 
	#INTERPOLATE
(
x
, 
x1
, 
x2
, 
y1
, 
y2
èĞ(y1è+ ((x)-(x1)è* ((y2)-(y1)è/ ((x2)-(x1)è)

	)

1033 
	#LIMIT
(
y
, 
mš
, 
max
è((y)<(mš)? mš: ((y)>(max)? max: (y)))

	)

1036 
	$compu‹DeäagCyşes
() {

1037 
size_t
 
äag_by‹s
;

1038 
äag_pù
 = 
	`g‘AÎoÿtÜF¿gm’tiÚ
(&
äag_by‹s
);

1040 ià(!
£rv”
.
aùive_deäag_ruÂšg
) {

1041 if(
äag_pù
 < 
£rv”
.
aùive_deäag_th»shŞd_low”
 || 
äag_by‹s
 < s”v”.
aùive_deäag_ignÜe_by‹s
)

1046 
ıu_pù
 = 
	`INTERPOLATE
(
äag_pù
,

1047 
£rv”
.
aùive_deäag_th»shŞd_low”
,

1048 
£rv”
.
aùive_deäag_th»shŞd_uµ”
,

1049 
£rv”
.
aùive_deäag_cyşe_mš
,

1050 
£rv”
.
aùive_deäag_cyşe_max
);

1051 
ıu_pù
 = 
	`LIMIT
(cpu_pct,

1052 
£rv”
.
aùive_deäag_cyşe_mš
,

1053 
£rv”
.
aùive_deäag_cyşe_max
);

1056 ià(!
£rv”
.
aùive_deäag_ruÂšg
 ||

1057 
ıu_pù
 > 
£rv”
.
aùive_deäag_ruÂšg
)

1059 
£rv”
.
aùive_deäag_ruÂšg
 = 
ıu_pù
;

1060 
	`£rv”Log
(
LL_VERBOSE
,

1062 
äag_pù
, 
äag_by‹s
, 
ıu_pù
);

1064 
	}
}

1069 
	$aùiveDeäagCyşe
() {

1070 
cu¼’t_db
 = -1;

1071 
cursÜ
 = 0;

1072 
»disDb
 *
db
 = 
NULL
;

1073 
¡¬t_sÿn
, 
¡¬t_¡©
;

1074 
™”©iÚs
 = 0;

1075 
´ev_deäagged
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

1076 
´ev_sÿÂed
 = 
£rv”
.
¡©_aùive_deäag_sÿÂed
;

1077 
¡¬t
, 
tim–im™
, 
’dtime
;

1078 
m¡ime_t
 
Ï‹ncy
;

1079 
qu™
 = 0;

1081 ià(!
£rv”
.
aùive_deäag_’abËd
) {

1082 ià(
£rv”
.
aùive_deäag_ruÂšg
) {

1084 
£rv”
.
aùive_deäag_ruÂšg
 = 0;

1085 ià(
db
)

1086 
	`li¡Em±y
(
db
->
deäag_Ï‹r
);

1087 
deäag_Ï‹r_cu¼’t_key
 = 
NULL
;

1088 
deäag_Ï‹r_cursÜ
 = 0;

1089 
cu¼’t_db
 = -1;

1090 
cursÜ
 = 0;

1091 
db
 = 
NULL
;

1096 ià(
	`hasAùiveChdProûss
())

1101 
	`run_w™h_³riod
(1000) {

1102 
	`compu‹DeäagCyşes
();

1104 ià(!
£rv”
.
aùive_deäag_ruÂšg
)

1108 
¡¬t
 = 
	`u¡ime
();

1109 
tim–im™
 = 1000000*
£rv”
.
aùive_deäag_ruÂšg
/£rv”.
hz
/100;

1110 ià(
tim–im™
 <= 0)imelimit = 1;

1111 
’dtime
 = 
¡¬t
 + 
tim–im™
;

1112 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

1116 ià(!
cursÜ
) {

1118 ià(
db
 && 
	`deäagL©”S‹p
(db, 
’dtime
)) {

1119 
qu™
 = 1;

1124 ià(++
cu¼’t_db
 >ğ
£rv”
.
dbnum
) {

1126 
	`deäagOth”Glob®s
();

1128 
now
 = 
	`u¡ime
();

1129 
size_t
 
äag_by‹s
;

1130 
äag_pù
 = 
	`g‘AÎoÿtÜF¿gm’tiÚ
(&
äag_by‹s
);

1131 
	`£rv”Log
(
LL_VERBOSE
,

1133 ()((
now
 - 
¡¬t_sÿn
)/1000), ()(
£rv”
.
¡©_aùive_deäag_h™s
 - 
¡¬t_¡©
), 
äag_pù
, 
äag_by‹s
);

1135 
¡¬t_sÿn
 = 
now
;

1136 
cu¼’t_db
 = -1;

1137 
cursÜ
 = 0;

1138 
db
 = 
NULL
;

1139 
£rv”
.
aùive_deäag_ruÂšg
 = 0;

1141 
	`compu‹DeäagCyşes
();

1142 ià(
£rv”
.
aùive_deäag_ruÂšg
 !ğ0 && 
	`u¡ime
(è< 
’dtime
)

1146 ià(
cu¼’t_db
==0) {

1148 
¡¬t_sÿn
 = 
	`u¡ime
();

1149 
¡¬t_¡©
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

1152 
db
 = &
£rv”
.db[
cu¼’t_db
];

1153 
cursÜ
 = 0;

1158 ià(
	`deäagL©”S‹p
(
db
, 
’dtime
)) {

1159 
qu™
 = 1;

1163 
cursÜ
 = 
	`diùSÿn
(
db
->
diù
, cursÜ, 
deäagSÿnC®lback
, 
deäagDiùBuck‘C®lback
, db);

1170 ià(!
cursÜ
 || (++
™”©iÚs
 > 16 ||

1171 
£rv”
.
¡©_aùive_deäag_h™s
 - 
´ev_deäagged
 > 512 ||

1172 
£rv”
.
¡©_aùive_deäag_sÿÂed
 - 
´ev_sÿÂed
 > 64)) {

1173 ià(!
cursÜ
 || 
	`u¡ime
(è> 
’dtime
) {

1174 
qu™
 = 1;

1177 
™”©iÚs
 = 0;

1178 
´ev_deäagged
 = 
£rv”
.
¡©_aùive_deäag_h™s
;

1179 
´ev_sÿÂed
 = 
£rv”
.
¡©_aùive_deäag_sÿÂed
;

1181 } 
cursÜ
 && !
qu™
);

1182 } !
qu™
);

1184 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

1185 
	`Ï‹ncyAddSam¶eIfN“ded
("aùive-deäag-cyşe",
Ï‹ncy
);

1186 
	}
}

1190 
	$aùiveDeäagCyşe
() {

1192 
	}
}

	@dict.c

36 
	~"fmaüos.h
"

38 
	~<¡dio.h
>

39 
	~<¡dlib.h
>

40 
	~<¡dšt.h
>

41 
	~<¡ršg.h
>

42 
	~<¡d¬g.h
>

43 
	~<lim™s.h
>

44 
	~<sys/time.h
>

46 
	~"diù.h
"

47 
	~"zm®loc.h
"

48 #iâdeà
DICT_BENCHMARK_MAIN


49 
	~"»di§s£¹.h
"

51 
	~<as£¹.h
>

62 
	gdiù_ÿn_»size
 = 1;

63 
	gdiù_fÜû_»size_¿tio
 = 5;

67 
_diùEx·ndIfN“ded
(
diù
 *
ht
);

68 
_diùNextPow”
(
size
);

69 
_diùKeyIndex
(
diù
 *
ht
, cÚ¡ *
key
, 
ušt64_t
 
hash
, 
diùEÁry
 **
exi¡šg
);

70 
_diùIn™
(
diù
 *
ht
, 
diùTy³
 *
ty³
, *
´ivD©aPŒ
);

74 
ušt8_t
 
	gdiù_hash_funùiÚ_£ed
[16];

76 
	$diùS‘HashFunùiÚS“d
(
ušt8_t
 *
£ed
) {

77 
	`memıy
(
diù_hash_funùiÚ_£ed
,
£ed
,(dict_hash_function_seed));

78 
	}
}

80 
ušt8_t
 *
	$diùG‘HashFunùiÚS“d
() {

81  
diù_hash_funùiÚ_£ed
;

82 
	}
}

87 
ušt64_t
 
shash
(cÚ¡ 
ušt8_t
 *
š
, cÚ¡ 
size_t
 
šËn
, cÚ¡ ušt8_ˆ*
k
);

88 
ušt64_t
 
shash_noÿ£
(cÚ¡ 
ušt8_t
 *
š
, cÚ¡ 
size_t
 
šËn
, cÚ¡ ušt8_ˆ*
k
);

90 
ušt64_t
 
	$diùG’HashFunùiÚ
(cÚ¡ *
key
, 
Ën
) {

91  
	`shash
(
key
,
Ën
,
diù_hash_funùiÚ_£ed
);

92 
	}
}

94 
ušt64_t
 
	$diùG’Ca£HashFunùiÚ
(cÚ¡ *
buf
, 
Ën
) {

95  
	`shash_noÿ£
(
buf
,
Ën
,
diù_hash_funùiÚ_£ed
);

96 
	}
}

102 
	$_diùRe£t
(
diùht
 *
ht
)

104 
ht
->
bË
 = 
NULL
;

105 
ht
->
size
 = 0;

106 
ht
->
sizemask
 = 0;

107 
ht
->
u£d
 = 0;

108 
	}
}

111 
diù
 *
	$diùC»©e
(
diùTy³
 *
ty³
,

112 *
´ivD©aPŒ
)

114 
diù
 *
d
 = 
	`zm®loc
((*d));

116 
	`_diùIn™
(
d
,
ty³
,
´ivD©aPŒ
);

117  
d
;

118 
	}
}

121 
	$_diùIn™
(
diù
 *
d
, 
diùTy³
 *
ty³
,

122 *
´ivD©aPŒ
)

124 
	`_diùRe£t
(&
d
->
ht
[0]);

125 
	`_diùRe£t
(&
d
->
ht
[1]);

126 
d
->
ty³
 =ype;

127 
d
->
´ivd©a
 = 
´ivD©aPŒ
;

128 
d
->
»hashidx
 = -1;

129 
d
->
™”©Üs
 = 0;

130  
DICT_OK
;

131 
	}
}

135 
	$diùResize
(
diù
 *
d
)

137 
mšim®
;

139 ià(!
diù_ÿn_»size
 || 
	`diùIsRehashšg
(
d
)è 
DICT_ERR
;

140 
mšim®
 = 
d
->
ht
[0].
u£d
;

141 ià(
mšim®
 < 
DICT_HT_INITIAL_SIZE
)

142 
mšim®
 = 
DICT_HT_INITIAL_SIZE
;

143  
	`diùEx·nd
(
d
, 
mšim®
);

144 
	}
}

147 
	$diùEx·nd
(
diù
 *
d
, 
size
)

151 ià(
	`diùIsRehashšg
(
d
è|| d->
ht
[0].
u£d
 > 
size
)

152  
DICT_ERR
;

154 
diùht
 
n
;

155 
»®size
 = 
	`_diùNextPow”
(
size
);

158 ià(
»®size
 =ğ
d
->
ht
[0].
size
è 
DICT_ERR
;

161 
n
.
size
 = 
»®size
;

162 
n
.
sizemask
 = 
»®size
-1;

163 
n
.
bË
 = 
	`zÿÎoc
(
»®size
*(
diùEÁry
*));

164 
n
.
u£d
 = 0;

168 ià(
d
->
ht
[0].
bË
 =ğ
NULL
) {

169 
d
->
ht
[0] = 
n
;

170  
DICT_OK
;

174 
d
->
ht
[1] = 
n
;

175 
d
->
»hashidx
 = 0;

176  
DICT_OK
;

177 
	}
}

188 
	$diùRehash
(
diù
 *
d
, 
n
) {

189 
em±y_vis™s
 = 
n
*10;

190 ià(!
	`diùIsRehashšg
(
d
))  0;

192 
n
-- && 
d
->
ht
[0].
u£d
 != 0) {

193 
diùEÁry
 *
de
, *
Ãxtde
;

197 
	`as£¹
(
d
->
ht
[0].
size
 > ()d->
»hashidx
);

198 
d
->
ht
[0].
bË
[d->
»hashidx
] =ğ
NULL
) {

199 
d
->
»hashidx
++;

200 ià(--
em±y_vis™s
 == 0)  1;

202 
de
 = 
d
->
ht
[0].
bË
[d->
»hashidx
];

204 
de
) {

205 
ušt64_t
 
h
;

207 
Ãxtde
 = 
de
->
Ãxt
;

209 
h
 = 
	`diùHashKey
(
d
, 
de
->
key
è& d->
ht
[1].
sizemask
;

210 
de
->
Ãxt
 = 
d
->
ht
[1].
bË
[
h
];

211 
d
->
ht
[1].
bË
[
h
] = 
de
;

212 
d
->
ht
[0].
u£d
--;

213 
d
->
ht
[1].
u£d
++;

214 
de
 = 
Ãxtde
;

216 
d
->
ht
[0].
bË
[d->
»hashidx
] = 
NULL
;

217 
d
->
»hashidx
++;

221 ià(
d
->
ht
[0].
u£d
 == 0) {

222 
	`zä“
(
d
->
ht
[0].
bË
);

223 
d
->
ht
[0] = d->ht[1];

224 
	`_diùRe£t
(&
d
->
ht
[1]);

225 
d
->
»hashidx
 = -1;

231 
	}
}

233 
	$timeInMli£cÚds
() {

234 
timev®
 
tv
;

236 
	`g‘timeofday
(&
tv
,
NULL
);

237  ((()
tv
.
tv_£c
)*1000)+Ñv.
tv_u£c
/1000);

238 
	}
}

241 
	$diùRehashMli£cÚds
(
diù
 *
d
, 
ms
) {

242 
¡¬t
 = 
	`timeInMli£cÚds
();

243 
»hashes
 = 0;

245 
	`diùRehash
(
d
,100)) {

246 
»hashes
 += 100;

247 ià(
	`timeInMli£cÚds
()-
¡¬t
 > 
ms
) ;

249  
»hashes
;

250 
	}
}

260 
	$_diùRehashS‹p
(
diù
 *
d
) {

261 ià(
d
->
™”©Üs
 =ğ0è
	`diùRehash
(d,1);

262 
	}
}

265 
	$diùAdd
(
diù
 *
d
, *
key
, *
v®
)

267 
diùEÁry
 *
’Œy
 = 
	`diùAddRaw
(
d
,
key
,
NULL
);

269 ià(!
’Œy
è 
DICT_ERR
;

270 
	`diùS‘V®
(
d
, 
’Œy
, 
v®
);

271  
DICT_OK
;

272 
	}
}

292 
diùEÁry
 *
	$diùAddRaw
(
diù
 *
d
, *
key
, 
diùEÁry
 **
exi¡šg
)

294 
šdex
;

295 
diùEÁry
 *
’Œy
;

296 
diùht
 *
ht
;

298 ià(
	`diùIsRehashšg
(
d
)è
	`_diùRehashS‹p
(d);

302 ià((
šdex
 = 
	`_diùKeyIndex
(
d
, 
key
, 
	`diùHashKey
(d,key), 
exi¡šg
)) == -1)

303  
NULL
;

309 
ht
 = 
	`diùIsRehashšg
(
d
) ? &d->ht[1] : &d->ht[0];

310 
’Œy
 = 
	`zm®loc
((*entry));

311 
’Œy
->
Ãxt
 = 
ht
->
bË
[
šdex
];

312 
ht
->
bË
[
šdex
] = 
’Œy
;

313 
ht
->
u£d
++;

316 
	`diùS‘Key
(
d
, 
’Œy
, 
key
);

317  
’Œy
;

318 
	}
}

325 
	$diùR•Ïû
(
diù
 *
d
, *
key
, *
v®
)

327 
diùEÁry
 *
’Œy
, *
exi¡šg
, 
aux’Œy
;

331 
’Œy
 = 
	`diùAddRaw
(
d
,
key
,&
exi¡šg
);

332 ià(
’Œy
) {

333 
	`diùS‘V®
(
d
, 
’Œy
, 
v®
);

342 
aux’Œy
 = *
exi¡šg
;

343 
	`diùS‘V®
(
d
, 
exi¡šg
, 
v®
);

344 
	`diùF»eV®
(
d
, &
aux’Œy
);

346 
	}
}

355 
diùEÁry
 *
	$diùAddOrFšd
(
diù
 *
d
, *
key
) {

356 
diùEÁry
 *
’Œy
, *
exi¡šg
;

357 
’Œy
 = 
	`diùAddRaw
(
d
,
key
,&
exi¡šg
);

358  
’Œy
 ?ƒÁry : 
exi¡šg
;

359 
	}
}

364 
diùEÁry
 *
	$diùG’”icD–‘e
(
diù
 *
d
, cÚ¡ *
key
, 
noä“
) {

365 
ušt64_t
 
h
, 
idx
;

366 
diùEÁry
 *
he
, *
´evHe
;

367 
bË
;

369 ià(
d
->
ht
[0].
u£d
 =ğ0 && d->ht[1].u£d =ğ0è 
NULL
;

371 ià(
	`diùIsRehashšg
(
d
)è
	`_diùRehashS‹p
(d);

372 
h
 = 
	`diùHashKey
(
d
, 
key
);

374 
bË
 = 0;able <= 1;able++) {

375 
idx
 = 
h
 & 
d
->
ht
[
bË
].
sizemask
;

376 
he
 = 
d
->
ht
[
bË
].bË[
idx
];

377 
´evHe
 = 
NULL
;

378 
he
) {

379 ià(
key
==
he
->key || 
	`diùCom·»Keys
(
d
, key, he->key)) {

381 ià(
´evHe
)

382 
´evHe
->
Ãxt
 = 
he
->next;

384 
d
->
ht
[
bË
].bË[
idx
] = 
he
->
Ãxt
;

385 ià(!
noä“
) {

386 
	`diùF»eKey
(
d
, 
he
);

387 
	`diùF»eV®
(
d
, 
he
);

388 
	`zä“
(
he
);

390 
d
->
ht
[
bË
].
u£d
--;

391  
he
;

393 
´evHe
 = 
he
;

394 
he
 = he->
Ãxt
;

396 ià(!
	`diùIsRehashšg
(
d
)) ;

398  
NULL
;

399 
	}
}

403 
	$diùD–‘e
(
diù
 *
ht
, cÚ¡ *
key
) {

404  
	`diùG’”icD–‘e
(
ht
,
key
,0è? 
DICT_OK
 : 
DICT_ERR
;

405 
	}
}

428 
diùEÁry
 *
	$diùUÆšk
(
diù
 *
ht
, cÚ¡ *
key
) {

429  
	`diùG’”icD–‘e
(
ht
,
key
,1);

430 
	}
}

434 
	$diùF»eUÆškedEÁry
(
diù
 *
d
, 
diùEÁry
 *
he
) {

435 ià(
he
 =ğ
NULL
) ;

436 
	`diùF»eKey
(
d
, 
he
);

437 
	`diùF»eV®
(
d
, 
he
);

438 
	`zä“
(
he
);

439 
	}
}

442 
_diùCË¬
(
diù
 *
d
, 
diùht
 *
ht
, (
ÿÎback
)(*)) {

443 
i
;

446 
i
 = 0; i < 
ht
->
size
 && ht->
u£d
 > 0; i++) {

447 
diùEÁry
 *
he
, *
ÃxtHe
;

449 ià(
ÿÎback
 && (
i
 & 65535è=ğ0è
	`ÿÎback
(
d
->
´ivd©a
);

451 ià((
he
 = 
ht
->
bË
[
i
]è=ğ
NULL
) ;

452 
he
) {

453 
ÃxtHe
 = 
he
->
Ãxt
;

454 
	`diùF»eKey
(
d
, 
he
);

455 
	`diùF»eV®
(
d
, 
he
);

456 
	`zä“
(
he
);

457 
ht
->
u£d
--;

458 
he
 = 
ÃxtHe
;

462 
	`zä“
(
ht
->
bË
);

464 
	`_diùRe£t
(
ht
);

465  
DICT_OK
;

466 
	}
}

469 
	$diùR–—£
(
diù
 *
d
)

471 
	`_diùCË¬
(
d
,&d->
ht
[0],
NULL
);

472 
	`_diùCË¬
(
d
,&d->
ht
[1],
NULL
);

473 
	`zä“
(
d
);

474 
	}
}

476 
diùEÁry
 *
	$diùFšd
(
diù
 *
d
, cÚ¡ *
key
)

478 
diùEÁry
 *
he
;

479 
ušt64_t
 
h
, 
idx
, 
bË
;

481 ià(
d
->
ht
[0].
u£d
 + d->ht[1].u£d =ğ0è 
NULL
;

482 ià(
	`diùIsRehashšg
(
d
)è
	`_diùRehashS‹p
(d);

483 
h
 = 
	`diùHashKey
(
d
, 
key
);

484 
bË
 = 0;able <= 1;able++) {

485 
idx
 = 
h
 & 
d
->
ht
[
bË
].
sizemask
;

486 
he
 = 
d
->
ht
[
bË
].bË[
idx
];

487 
he
) {

488 ià(
key
==
he
->key || 
	`diùCom·»Keys
(
d
, key, he->key))

489  
he
;

490 
he
 = he->
Ãxt
;

492 ià(!
	`diùIsRehashšg
(
d
)è 
NULL
;

494  
NULL
;

495 
	}
}

497 *
	$diùF‘chV®ue
(
diù
 *
d
, cÚ¡ *
key
) {

498 
diùEÁry
 *
he
;

500 
he
 = 
	`diùFšd
(
d
,
key
);

501  
he
 ? 
	`diùG‘V®
(heè: 
NULL
;

502 
	}
}

510 
	$diùFšg”´št
(
diù
 *
d
) {

511 
š‹g”s
[6], 
hash
 = 0;

512 
j
;

514 
š‹g”s
[0] = (è
d
->
ht
[0].
bË
;

515 
š‹g”s
[1] = 
d
->
ht
[0].
size
;

516 
š‹g”s
[2] = 
d
->
ht
[0].
u£d
;

517 
š‹g”s
[3] = (è
d
->
ht
[1].
bË
;

518 
š‹g”s
[4] = 
d
->
ht
[1].
size
;

519 
š‹g”s
[5] = 
d
->
ht
[1].
u£d
;

528 
j
 = 0; j < 6; j++) {

529 
hash
 +ğ
š‹g”s
[
j
];

531 
hash
 = (~hash) + (hash << 21);

532 
hash
 = hash ^ (hash >> 24);

533 
hash
 = (hash + (hash << 3)) + (hash << 8);

534 
hash
 = hash ^ (hash >> 14);

535 
hash
 = (hash + (hash << 2)) + (hash << 4);

536 
hash
 = hash ^ (hash >> 28);

537 
hash
 = hash + (hash << 31);

539  
hash
;

540 
	}
}

542 
diùI‹¿tÜ
 *
	$diùG‘I‹¿tÜ
(
diù
 *
d
)

544 
diùI‹¿tÜ
 *
™”
 = 
	`zm®loc
((*iter));

546 
™”
->
d
 = d;

547 
™”
->
bË
 = 0;

548 
™”
->
šdex
 = -1;

549 
™”
->
§ã
 = 0;

550 
™”
->
’Œy
 = 
NULL
;

551 
™”
->
ÃxtEÁry
 = 
NULL
;

552  
™”
;

553 
	}
}

555 
diùI‹¿tÜ
 *
	$diùG‘SaãI‹¿tÜ
(
diù
 *
d
) {

556 
diùI‹¿tÜ
 *
i
 = 
	`diùG‘I‹¿tÜ
(
d
);

558 
i
->
§ã
 = 1;

559  
i
;

560 
	}
}

562 
diùEÁry
 *
	$diùNext
(
diùI‹¿tÜ
 *
™”
)

565 ià(
™”
->
’Œy
 =ğ
NULL
) {

566 
diùht
 *
ht
 = &
™”
->
d
->ht[™”->
bË
];

567 ià(
™”
->
šdex
 =ğ-1 && i‹r->
bË
 == 0) {

568 ià(
™”
->
§ã
)

569 
™”
->
d
->
™”©Üs
++;

571 
™”
->
fšg”´št
 = 
	`diùFšg”´št
(™”->
d
);

573 
™”
->
šdex
++;

574 ià(
™”
->
šdex
 >ğ(è
ht
->
size
) {

575 ià(
	`diùIsRehashšg
(
™”
->
d
è&& i‹r->
bË
 == 0) {

576 
™”
->
bË
++;

577 
™”
->
šdex
 = 0;

578 
ht
 = &
™”
->
d
->ht[1];

583 
™”
->
’Œy
 = 
ht
->
bË
[™”->
šdex
];

585 
™”
->
’Œy
 = i‹r->
ÃxtEÁry
;

587 ià(
™”
->
’Œy
) {

590 
™”
->
ÃxtEÁry
 = i‹r->
’Œy
->
Ãxt
;

591  
™”
->
’Œy
;

594  
NULL
;

595 
	}
}

597 
	$diùR–—£I‹¿tÜ
(
diùI‹¿tÜ
 *
™”
)

599 ià(!(
™”
->
šdex
 =ğ-1 && i‹r->
bË
 == 0)) {

600 ià(
™”
->
§ã
)

601 
™”
->
d
->
™”©Üs
--;

603 
	`as£¹
(
™”
->
fšg”´št
 =ğ
	`diùFšg”´št
(™”->
d
));

605 
	`zä“
(
™”
);

606 
	}
}

610 
diùEÁry
 *
	$diùG‘RªdomKey
(
diù
 *
d
)

612 
diùEÁry
 *
he
, *
Üighe
;

613 
h
;

614 
li¡Ën
, 
li¡–e
;

616 ià(
	`diùSize
(
d
è=ğ0è 
NULL
;

617 ià(
	`diùIsRehashšg
(
d
)è
	`_diùRehashS‹p
(d);

618 ià(
	`diùIsRehashšg
(
d
)) {

622 
h
 = 
d
->
»hashidx
 + (
	`¿ndom
(è% (d->
ht
[0].
size
 +

623 
d
->
ht
[1].
size
 -

624 
d
->
»hashidx
));

625 
he
 = (
h
 >ğ
d
->
ht
[0].
size
è? d->ht[1].
bË
[h - d->ht[0].size] :

626 
d
->
ht
[0].
bË
[
h
];

627 } 
he
 =ğ
NULL
);

630 
h
 = 
	`¿ndom
(è& 
d
->
ht
[0].
sizemask
;

631 
he
 = 
d
->
ht
[0].
bË
[
h
];

632 } 
he
 =ğ
NULL
);

639 
li¡Ën
 = 0;

640 
Üighe
 = 
he
;

641 
he
) {

642 
he
 = he->
Ãxt
;

643 
li¡Ën
++;

645 
li¡–e
 = 
	`¿ndom
(è% 
li¡Ën
;

646 
he
 = 
Üighe
;

647 
li¡–e
--è
he
 = he->
Ãxt
;

648  
he
;

649 
	}
}

673 
	$diùG‘SomeKeys
(
diù
 *
d
, 
diùEÁry
 **
des
, 
couÁ
) {

674 
j
;

675 
bËs
;

676 
¡Üed
 = 0, 
maxsizemask
;

677 
max¡•s
;

679 ià(
	`diùSize
(
d
è< 
couÁ
) count = dictSize(d);

680 
max¡•s
 = 
couÁ
*10;

683 
j
 = 0; j < 
couÁ
; j++) {

684 ià(
	`diùIsRehashšg
(
d
))

685 
	`_diùRehashS‹p
(
d
);

690 
bËs
 = 
	`diùIsRehashšg
(
d
) ? 2 : 1;

691 
maxsizemask
 = 
d
->
ht
[0].
sizemask
;

692 ià(
bËs
 > 1 && 
maxsizemask
 < 
d
->
ht
[1].
sizemask
)

693 
maxsizemask
 = 
d
->
ht
[1].
sizemask
;

696 
i
 = 
	`¿ndom
(è& 
maxsizemask
;

697 
em±yËn
 = 0;

698 
¡Üed
 < 
couÁ
 && 
max¡•s
--) {

699 
j
 = 0; j < 
bËs
; j++) {

703 ià(
bËs
 =ğ2 && 
j
 =ğ0 && 
i
 < (è
d
->
»hashidx
) {

708 ià(
i
 >ğ
d
->
ht
[1].
size
)

709 
i
 = 
d
->
»hashidx
;

713 ià(
i
 >ğ
d
->
ht
[
j
].
size
) ;

714 
diùEÁry
 *
he
 = 
d
->
ht
[
j
].
bË
[
i
];

718 ià(
he
 =ğ
NULL
) {

719 
em±yËn
++;

720 ià(
em±yËn
 >ğ5 &&ƒm±yËÀ> 
couÁ
) {

721 
i
 = 
	`¿ndom
(è& 
maxsizemask
;

722 
em±yËn
 = 0;

725 
em±yËn
 = 0;

726 
he
) {

729 *
des
 = 
he
;

730 
des
++;

731 
he
 = he->
Ãxt
;

732 
¡Üed
++;

733 ià(
¡Üed
 =ğ
couÁ
)  stored;

737 
i
 = (i+1è& 
maxsizemask
;

739  
¡Üed
;

740 
	}
}

753 
	#GETFAIR_NUM_ENTRIES
 15

	)

754 
diùEÁry
 *
	$diùG‘FaœRªdomKey
(
diù
 *
d
) {

755 
diùEÁry
 *
’Œ›s
[
GETFAIR_NUM_ENTRIES
];

756 
couÁ
 = 
	`diùG‘SomeKeys
(
d
,
’Œ›s
,
GETFAIR_NUM_ENTRIES
);

761 ià(
couÁ
 =ğ0è 
	`diùG‘RªdomKey
(
d
);

762 
idx
 = 
	`¿nd
(è% 
couÁ
;

763  
’Œ›s
[
idx
];

764 
	}
}

768 
	$»v
(
v
) {

769 
s
 = 
CHAR_BIT
 * (
v
);

770 
mask
 = ~0UL;

771 (
s
 >>= 1) > 0) {

772 
mask
 ^ğ(mask << 
s
);

773 
v
 = ((v >> 
s
è& 
mask
) | ((v << s) & ~mask);

775  
v
;

776 
	}
}

862 
	$diùSÿn
(
diù
 *
d
,

863 
v
,

864 
diùSÿnFunùiÚ
 *
â
,

865 
diùSÿnBuck‘FunùiÚ
* 
buck‘â
,

866 *
´ivd©a
)

868 
diùht
 *
t0
, *
t1
;

869 cÚ¡ 
diùEÁry
 *
de
, *
Ãxt
;

870 
m0
, 
m1
;

872 ià(
	`diùSize
(
d
) == 0)  0;

876 
d
->
™”©Üs
++;

878 ià(!
	`diùIsRehashšg
(
d
)) {

879 
t0
 = &(
d
->
ht
[0]);

880 
m0
 = 
t0
->
sizemask
;

883 ià(
buck‘â
è
	`buck‘â
(
´ivd©a
, &
t0
->
bË
[
v
 & 
m0
]);

884 
de
 = 
t0
->
bË
[
v
 & 
m0
];

885 
de
) {

886 
Ãxt
 = 
de
->next;

887 
	`â
(
´ivd©a
, 
de
);

888 
de
 = 
Ãxt
;

893 
v
 |ğ~
m0
;

896 
v
 = 
	`»v
(v);

897 
v
++;

898 
v
 = 
	`»v
(v);

901 
t0
 = &
d
->
ht
[0];

902 
t1
 = &
d
->
ht
[1];

905 ià(
t0
->
size
 > 
t1
->size) {

906 
t0
 = &
d
->
ht
[1];

907 
t1
 = &
d
->
ht
[0];

910 
m0
 = 
t0
->
sizemask
;

911 
m1
 = 
t1
->
sizemask
;

914 ià(
buck‘â
è
	`buck‘â
(
´ivd©a
, &
t0
->
bË
[
v
 & 
m0
]);

915 
de
 = 
t0
->
bË
[
v
 & 
m0
];

916 
de
) {

917 
Ãxt
 = 
de
->next;

918 
	`â
(
´ivd©a
, 
de
);

919 
de
 = 
Ãxt
;

926 ià(
buck‘â
è
	`buck‘â
(
´ivd©a
, &
t1
->
bË
[
v
 & 
m1
]);

927 
de
 = 
t1
->
bË
[
v
 & 
m1
];

928 
de
) {

929 
Ãxt
 = 
de
->next;

930 
	`â
(
´ivd©a
, 
de
);

931 
de
 = 
Ãxt
;

935 
v
 |ğ~
m1
;

936 
v
 = 
	`»v
(v);

937 
v
++;

938 
v
 = 
	`»v
(v);

941 } 
v
 & (
m0
 ^ 
m1
));

945 
d
->
™”©Üs
--;

947  
v
;

948 
	}
}

953 
	$_diùEx·ndIfN“ded
(
diù
 *
d
)

956 ià(
	`diùIsRehashšg
(
d
)è 
DICT_OK
;

959 ià(
d
->
ht
[0].
size
 =ğ0è 
	`diùEx·nd
(d, 
DICT_HT_INITIAL_SIZE
);

965 ià(
d
->
ht
[0].
u£d
 >ğd->ht[0].
size
 &&

966 (
diù_ÿn_»size
 ||

967 
d
->
ht
[0].
u£d
/d->ht[0].
size
 > 
diù_fÜû_»size_¿tio
))

969  
	`diùEx·nd
(
d
, d->
ht
[0].
u£d
*2);

971  
DICT_OK
;

972 
	}
}

975 
	$_diùNextPow”
(
size
)

977 
i
 = 
DICT_HT_INITIAL_SIZE
;

979 ià(
size
 >ğ
LONG_MAX
)  LONG_MAX + 1LU;

981 ià(
i
 >ğ
size
)

982  
i
;

983 
i
 *= 2;

985 
	}
}

994 
	$_diùKeyIndex
(
diù
 *
d
, cÚ¡ *
key
, 
ušt64_t
 
hash
, 
diùEÁry
 **
exi¡šg
)

996 
idx
, 
bË
;

997 
diùEÁry
 *
he
;

998 ià(
exi¡šg
è*exi¡šg = 
NULL
;

1001 ià(
	`_diùEx·ndIfN“ded
(
d
è=ğ
DICT_ERR
)

1003 
bË
 = 0;able <= 1;able++) {

1004 
idx
 = 
hash
 & 
d
->
ht
[
bË
].
sizemask
;

1006 
he
 = 
d
->
ht
[
bË
].bË[
idx
];

1007 
he
) {

1008 ià(
key
==
he
->key || 
	`diùCom·»Keys
(
d
, key, he->key)) {

1009 ià(
exi¡šg
è*exi¡šg = 
he
;

1012 
he
 = he->
Ãxt
;

1014 ià(!
	`diùIsRehashšg
(
d
)) ;

1016  
idx
;

1017 
	}
}

1019 
diùEm±y
(
diù
 *
d
, (
ÿÎback
)(*)) {

1020 
	`_diùCË¬
(
d
,&d->
ht
[0],
ÿÎback
);

1021 
	`_diùCË¬
(
d
,&d->
ht
[1],
ÿÎback
);

1022 
d
->
»hashidx
 = -1;

1023 
d
->
™”©Üs
 = 0;

1024 
	}
}

1026 
	$diùEÇbËResize
() {

1027 
diù_ÿn_»size
 = 1;

1028 
	}
}

1030 
	$diùDi§bËResize
() {

1031 
diù_ÿn_»size
 = 0;

1032 
	}
}

1034 
ušt64_t
 
	$diùG‘Hash
(
diù
 *
d
, cÚ¡ *
key
) {

1035  
	`diùHashKey
(
d
, 
key
);

1036 
	}
}

1043 
diùEÁry
 **
	$diùFšdEÁryRefByPŒAndHash
(
diù
 *
d
, cÚ¡ *
Şd±r
, 
ušt64_t
 
hash
) {

1044 
diùEÁry
 *
he
, **
h”ef
;

1045 
idx
, 
bË
;

1047 ià(
d
->
ht
[0].
u£d
 + d->ht[1].u£d =ğ0è 
NULL
;

1048 
bË
 = 0;able <= 1;able++) {

1049 
idx
 = 
hash
 & 
d
->
ht
[
bË
].
sizemask
;

1050 
h”ef
 = &
d
->
ht
[
bË
].bË[
idx
];

1051 
he
 = *
h”ef
;

1052 
he
) {

1053 ià(
Şd±r
==
he
->
key
)

1054  
h”ef
;

1055 
h”ef
 = &
he
->
Ãxt
;

1056 
he
 = *
h”ef
;

1058 ià(!
	`diùIsRehashšg
(
d
)è 
NULL
;

1060  
NULL
;

1061 
	}
}

1065 
	#DICT_STATS_VECTLEN
 50

	)

1066 
size_t
 
	$_diùG‘StsHt
(*
buf
, 
size_t
 
bufsize
, 
diùht
 *
ht
, 
bËid
) {

1067 
i
, 
¦Ùs
 = 0, 
chašËn
, 
maxchašËn
 = 0;

1068 
tÙchašËn
 = 0;

1069 
şveùÜ
[
DICT_STATS_VECTLEN
];

1070 
size_t
 
l
 = 0;

1072 ià(
ht
->
u£d
 == 0) {

1073  
	`¢´štf
(
buf
,
bufsize
,

1078 
i
 = 0; i < 
DICT_STATS_VECTLEN
; i++è
şveùÜ
[i] = 0;

1079 
i
 = 0; i < 
ht
->
size
; i++) {

1080 
diùEÁry
 *
he
;

1082 ià(
ht
->
bË
[
i
] =ğ
NULL
) {

1083 
şveùÜ
[0]++;

1086 
¦Ùs
++;

1088 
chašËn
 = 0;

1089 
he
 = 
ht
->
bË
[
i
];

1090 
he
) {

1091 
chašËn
++;

1092 
he
 = he->
Ãxt
;

1094 
şveùÜ
[(
chašËn
 < 
DICT_STATS_VECTLEN
) ? chainlen : (DICT_STATS_VECTLEN-1)]++;

1095 ià(
chašËn
 > 
maxchašËn
) maxchainlen = chainlen;

1096 
tÙchašËn
 +ğ
chašËn
;

1100 
l
 +ğ
	`¢´štf
(
buf
+l,
bufsize
-l,

1109 
bËid
, (tableid == 0) ? "main hashable" : "rehashingarget",

1110 
ht
->
size
, ht->
u£d
, 
¦Ùs
, 
maxchašËn
,

1111 ()
tÙchašËn
/
¦Ùs
, ()
ht
->
u£d
/slots);

1113 
i
 = 0; i < 
DICT_STATS_VECTLEN
-1; i++) {

1114 ià(
şveùÜ
[
i
] == 0) ;

1115 ià(
l
 >ğ
bufsize
) ;

1116 
l
 +ğ
	`¢´štf
(
buf
+l,
bufsize
-l,

1118 (
i
 =ğ
DICT_STATS_VECTLEN
-1)?">= ":"",

1119 
i
, 
şveùÜ
[i], (()şveùÜ[i]/
ht
->
size
)*100);

1123 ià(
bufsize
è
buf
[bufsize-1] = '\0';

1124  
	`¡¾’
(
buf
);

1125 
	}
}

1127 
	$diùG‘Sts
(*
buf
, 
size_t
 
bufsize
, 
diù
 *
d
) {

1128 
size_t
 
l
;

1129 *
Üig_buf
 = 
buf
;

1130 
size_t
 
Üig_bufsize
 = 
bufsize
;

1132 
l
 = 
	`_diùG‘StsHt
(
buf
,
bufsize
,&
d
->
ht
[0],0);

1133 
buf
 +ğ
l
;

1134 
bufsize
 -ğ
l
;

1135 ià(
	`diùIsRehashšg
(
d
è&& 
bufsize
 > 0) {

1136 
	`_diùG‘StsHt
(
buf
,
bufsize
,&
d
->
ht
[1],1);

1139 ià(
Üig_bufsize
è
Üig_buf
[orig_bufsize-1] = '\0';

1140 
	}
}

1144 #ifdeà
DICT_BENCHMARK_MAIN


1146 
	~"sds.h
"

1148 
ušt64_t
 
	$hashC®lback
(cÚ¡ *
key
) {

1149  
	`diùG’HashFunùiÚ
((*)
key
, 
	`sd¦’
((*)key));

1150 
	}
}

1152 
	$com·»C®lback
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
) {

1153 
l1
,
l2
;

1154 
	`DICT_NOTUSED
(
´ivd©a
);

1156 
l1
 = 
	`sd¦’
((
sds
)
key1
);

1157 
l2
 = 
	`sd¦’
((
sds
)
key2
);

1158 ià(
l1
 !ğ
l2
)  0;

1159  
	`memcmp
(
key1
, 
key2
, 
l1
) == 0;

1160 
	}
}

1162 
	$ä“C®lback
(*
´ivd©a
, *
v®
) {

1163 
	`DICT_NOTUSED
(
´ivd©a
);

1165 
	`sdsä“
(
v®
);

1166 
	}
}

1168 
diùTy³
 
	gB’chm¬kDiùTy³
 = {

1169 
hashC®lback
,

1170 
NULL
,

1171 
NULL
,

1172 
com·»C®lback
,

1173 
ä“C®lback
,

1174 
NULL


1177 
	#¡¬t_b’chm¬k
(è
¡¬t
 = 
	`timeInMli£cÚds
()

	)

1178 
	#’d_b’chm¬k
(
msg
) do { \

1179 
–­£d
 = 
	`timeInMli£cÚds
()-
¡¬t
; \

1180 
	`´štf
(
msg
 ": %ld i‹m š %Îd ms\n", 
couÁ
, 
–­£d
); \

1181 } 0);

	)

1184 
	$maš
(
¬gc
, **
¬gv
) {

1185 
j
;

1186 
¡¬t
, 
–­£d
;

1187 
diù
 *diù = 
	`diùC»©e
(&
B’chm¬kDiùTy³
,
NULL
);

1188 
couÁ
 = 0;

1190 ià(
¬gc
 == 2) {

1191 
couÁ
 = 
	`¡¹Ş
(
¬gv
[1],
NULL
,10);

1193 
couÁ
 = 5000000;

1196 
	`¡¬t_b’chm¬k
();

1197 
j
 = 0; j < 
couÁ
; j++) {

1198 
»tv®
 = 
	`diùAdd
(
diù
,
	`sdsäomlÚglÚg
(
j
),(*)j);

1199 
	`as£¹
(
»tv®
 =ğ
DICT_OK
);

1201 
	`’d_b’chm¬k
("Inserting");

1202 
	`as£¹
(()
	`diùSize
(
diù
è=ğ
couÁ
);

1205 
	`diùIsRehashšg
(
diù
)) {

1206 
	`diùRehashMli£cÚds
(
diù
,100);

1209 
	`¡¬t_b’chm¬k
();

1210 
j
 = 0; j < 
couÁ
; j++) {

1211 
sds
 
key
 = 
	`sdsäomlÚglÚg
(
j
);

1212 
diùEÁry
 *
de
 = 
	`diùFšd
(
diù
,
key
);

1213 
	`as£¹
(
de
 !ğ
NULL
);

1214 
	`sdsä“
(
key
);

1216 
	`’d_b’chm¬k
("Linear‡ccess ofƒxistingƒlements");

1218 
	`¡¬t_b’chm¬k
();

1219 
j
 = 0; j < 
couÁ
; j++) {

1220 
sds
 
key
 = 
	`sdsäomlÚglÚg
(
j
);

1221 
diùEÁry
 *
de
 = 
	`diùFšd
(
diù
,
key
);

1222 
	`as£¹
(
de
 !ğ
NULL
);

1223 
	`sdsä“
(
key
);

1225 
	`’d_b’chm¬k
("Linear‡ccess ofƒxistingƒlements (2nd„ound)");

1227 
	`¡¬t_b’chm¬k
();

1228 
j
 = 0; j < 
couÁ
; j++) {

1229 
sds
 
key
 = 
	`sdsäomlÚglÚg
(
	`¿nd
(è% 
couÁ
);

1230 
diùEÁry
 *
de
 = 
	`diùFšd
(
diù
,
key
);

1231 
	`as£¹
(
de
 !ğ
NULL
);

1232 
	`sdsä“
(
key
);

1234 
	`’d_b’chm¬k
("Random‡ccess ofƒxistingƒlements");

1236 
	`¡¬t_b’chm¬k
();

1237 
j
 = 0; j < 
couÁ
; j++) {

1238 
sds
 
key
 = 
	`sdsäomlÚglÚg
(
	`¿nd
(è% 
couÁ
);

1239 
key
[0] = 'X';

1240 
diùEÁry
 *
de
 = 
	`diùFšd
(
diù
,
key
);

1241 
	`as£¹
(
de
 =ğ
NULL
);

1242 
	`sdsä“
(
key
);

1244 
	`’d_b’chm¬k
("Accessing missing");

1246 
	`¡¬t_b’chm¬k
();

1247 
j
 = 0; j < 
couÁ
; j++) {

1248 
sds
 
key
 = 
	`sdsäomlÚglÚg
(
j
);

1249 
»tv®
 = 
	`diùD–‘e
(
diù
,
key
);

1250 
	`as£¹
(
»tv®
 =ğ
DICT_OK
);

1251 
key
[0] += 17;

1252 
»tv®
 = 
	`diùAdd
(
diù
,
key
,(*)
j
);

1253 
	`as£¹
(
»tv®
 =ğ
DICT_OK
);

1255 
	`’d_b’chm¬k
("Removing‡nd‡dding");

1256 
	}
}

	@dict.h

36 
	~<¡dšt.h
>

38 #iâdeà
__DICT_H


39 
	#__DICT_H


	)

41 
	#DICT_OK
 0

	)

42 
	#DICT_ERR
 1

	)

45 
	#DICT_NOTUSED
(
V
è((èV)

	)

47 
	sdiùEÁry
 {

48 *
	mkey
;

50 *
	mv®
;

51 
ušt64_t
 
	mu64
;

52 
št64_t
 
	ms64
;

53 
	md
;

54 } 
	mv
;

55 
diùEÁry
 *
	mÃxt
;

56 } 
	tdiùEÁry
;

58 
	sdiùTy³
 {

59 
ušt64_t
 (*
hashFunùiÚ
)(cÚ¡ *
	mkey
);

60 *(*
	mkeyDup
)(*
	m´ivd©a
, cÚ¡ *
	mkey
);

61 *(*
	mv®Dup
)(*
	m´ivd©a
, cÚ¡ *
	mobj
);

62 (*
	mkeyCom·»
)(*
	m´ivd©a
, cÚ¡ *
	mkey1
, cÚ¡ *
	mkey2
);

63 (*
	mkeyDe¡ruùÜ
)(*
	m´ivd©a
, *
	mkey
);

64 (*
	mv®De¡ruùÜ
)(*
	m´ivd©a
, *
	mobj
);

65 } 
	tdiùTy³
;

69 
	sdiùht
 {

70 
diùEÁry
 **
	mbË
;

71 
	msize
;

72 
	msizemask
;

73 
	mu£d
;

74 } 
	tdiùht
;

76 
	sdiù
 {

77 
diùTy³
 *
	mty³
;

78 *
	m´ivd©a
;

79 
diùht
 
	mht
[2];

80 
	m»hashidx
;

81 
	m™”©Üs
;

82 } 
	tdiù
;

88 
	sdiùI‹¿tÜ
 {

89 
diù
 *
	md
;

90 
	mšdex
;

91 
	mbË
, 
	m§ã
;

92 
diùEÁry
 *
	m’Œy
, *
	mÃxtEÁry
;

94 
	mfšg”´št
;

95 } 
	tdiùI‹¿tÜ
;

97 (
	tdiùSÿnFunùiÚ
)(*
	t´ivd©a
, cÚ¡ 
	tdiùEÁry
 *
	tde
);

98 (
	tdiùSÿnBuck‘FunùiÚ
)(*
	t´ivd©a
, 
	tdiùEÁry
 **
	tbuck‘»f
);

101 
	#DICT_HT_INITIAL_SIZE
 4

	)

104 
	#diùF»eV®
(
d
, 
’Œy
) \

105 ià((
d
)->
ty³
->
v®De¡ruùÜ
) \

106 (
d
)->
ty³
->
	`v®De¡ruùÜ
((d)->
´ivd©a
, (
’Œy
)->
v
.
v®
)

	)

108 
	#diùS‘V®
(
d
, 
’Œy
, 
_v®_
) do { \

109 ià((
d
)->
ty³
->
v®Dup
) \

110 (
’Œy
)->
v
.
v®
 = (
d
)->
ty³
->
	`v®Dup
((d)->
´ivd©a
, 
_v®_
); \

112 (
’Œy
)->
v
.
v®
 = (
_v®_
); \

113 
	}
} 0)

	)

115 
	#diùS‘SigÃdIÁeg”V®
(
’Œy
, 
_v®_
) \

116 dØ{ (
’Œy
)->
v
.
s64
 = 
_v®_
; } 0)

	)

118 
	#diùS‘UnsigÃdIÁeg”V®
(
’Œy
, 
_v®_
) \

119 dØ{ (
’Œy
)->
v
.
u64
 = 
_v®_
; } 0)

	)

121 
	#diùS‘DoubËV®
(
’Œy
, 
_v®_
) \

122 dØ{ (
’Œy
)->
v
.
d
 = 
_v®_
; } 0)

	)

124 
	#diùF»eKey
(
d
, 
’Œy
) \

125 ià((
d
)->
ty³
->
keyDe¡ruùÜ
) \

126 (
d
)->
ty³
->
	`keyDe¡ruùÜ
((d)->
´ivd©a
, (
’Œy
)->
key
)

	)

128 
	#diùS‘Key
(
d
, 
’Œy
, 
_key_
) do { \

129 ià((
d
)->
ty³
->
keyDup
) \

130 (
’Œy
)->
key
 = (
d
)->
ty³
->
	`keyDup
((d)->
´ivd©a
, 
_key_
); \

132 (
’Œy
)->
key
 = (
_key_
); \

133 } 0)

	)

135 
	#diùCom·»Keys
(
d
, 
key1
, 
key2
) \

136 (((
d
)->
ty³
->
keyCom·»
) ? \

137 (
d
)->
ty³
->
	`keyCom·»
((d)->
´ivd©a
, 
key1
, 
key2
) : \

138 (
key1
è=ğ(
key2
))

	)

140 
	#diùHashKey
(
d
, 
key
è(d)->
ty³
->
	`hashFunùiÚ
(key)

	)

141 
	#diùG‘Key
(
he
è((he)->
key
)

	)

142 
	#diùG‘V®
(
he
è((he)->
v
.
v®
)

	)

143 
	#diùG‘SigÃdIÁeg”V®
(
he
è((he)->
v
.
s64
)

	)

144 
	#diùG‘UnsigÃdIÁeg”V®
(
he
è((he)->
v
.
u64
)

	)

145 
	#diùG‘DoubËV®
(
he
è((he)->
v
.
d
)

	)

146 
	#diùSlÙs
(
d
è((d)->
ht
[0].
size
+(d)->ht[1].size)

	)

147 
	#diùSize
(
d
è((d)->
ht
[0].
u£d
+(d)->ht[1].u£d)

	)

148 
	#diùIsRehashšg
(
d
è((d)->
»hashidx
 !ğ-1)

	)

151 
diù
 *
diùC»©e
(
diùTy³
 *
ty³
, *
´ivD©aPŒ
);

152 
diùEx·nd
(
diù
 *
d
, 
size
);

153 
diùAdd
(
diù
 *
d
, *
key
, *
v®
);

154 
diùEÁry
 *
diùAddRaw
(
diù
 *
d
, *
key
, diùEÁry **
exi¡šg
);

155 
diùEÁry
 *
diùAddOrFšd
(
diù
 *
d
, *
key
);

156 
diùR•Ïû
(
diù
 *
d
, *
key
, *
v®
);

157 
diùD–‘e
(
diù
 *
d
, cÚ¡ *
key
);

158 
diùEÁry
 *
diùUÆšk
(
diù
 *
ht
, cÚ¡ *
key
);

159 
diùF»eUÆškedEÁry
(
diù
 *
d
, 
diùEÁry
 *
he
);

160 
diùR–—£
(
diù
 *
d
);

161 
diùEÁry
 * 
diùFšd
(
diù
 *
d
, cÚ¡ *
key
);

162 *
diùF‘chV®ue
(
diù
 *
d
, cÚ¡ *
key
);

163 
diùResize
(
diù
 *
d
);

164 
diùI‹¿tÜ
 *
diùG‘I‹¿tÜ
(
diù
 *
d
);

165 
diùI‹¿tÜ
 *
diùG‘SaãI‹¿tÜ
(
diù
 *
d
);

166 
diùEÁry
 *
diùNext
(
diùI‹¿tÜ
 *
™”
);

167 
diùR–—£I‹¿tÜ
(
diùI‹¿tÜ
 *
™”
);

168 
diùEÁry
 *
diùG‘RªdomKey
(
diù
 *
d
);

169 
diùEÁry
 *
diùG‘FaœRªdomKey
(
diù
 *
d
);

170 
diùG‘SomeKeys
(
diù
 *
d
, 
diùEÁry
 **
des
, 
couÁ
);

171 
diùG‘Sts
(*
buf
, 
size_t
 
bufsize
, 
diù
 *
d
);

172 
ušt64_t
 
diùG’HashFunùiÚ
(cÚ¡ *
key
, 
Ën
);

173 
ušt64_t
 
diùG’Ca£HashFunùiÚ
(cÚ¡ *
buf
, 
Ën
);

174 
diùEm±y
(
diù
 *
d
, (
ÿÎback
)(*));

175 
	`diùEÇbËResize
();

176 
	`diùDi§bËResize
();

177 
	`diùRehash
(
diù
 *
d
, 
n
);

178 
	`diùRehashMli£cÚds
(
diù
 *
d
, 
ms
);

179 
	`diùS‘HashFunùiÚS“d
(
ušt8_t
 *
£ed
);

180 
ušt8_t
 *
	`diùG‘HashFunùiÚS“d
();

181 
	`diùSÿn
(
diù
 *
d
, 
v
, 
diùSÿnFunùiÚ
 *
â
, 
diùSÿnBuck‘FunùiÚ
 *
buck‘â
, *
´ivd©a
);

182 
ušt64_t
 
	`diùG‘Hash
(
diù
 *
d
, cÚ¡ *
key
);

183 
diùEÁry
 **
	`diùFšdEÁryRefByPŒAndHash
(
diù
 *
d
, cÚ¡ *
Şd±r
, 
ušt64_t
 
hash
);

186 
diùTy³
 
diùTy³H—pSŒšgCİyKey
;

187 
diùTy³
 
diùTy³H—pSŒšgs
;

188 
diùTy³
 
diùTy³H—pSŒšgCİyKeyV®ue
;

	@endianconv.c

45 
	~<¡dšt.h
>

49 
	$mem»v16
(*
p
) {

50 *
x
 = 
p
, 
t
;

52 
t
 = 
x
[0];

53 
x
[0] = x[1];

54 
x
[1] = 
t
;

55 
	}
}

59 
	$mem»v32
(*
p
) {

60 *
x
 = 
p
, 
t
;

62 
t
 = 
x
[0];

63 
x
[0] = x[3];

64 
x
[3] = 
t
;

65 
t
 = 
x
[1];

66 
x
[1] = x[2];

67 
x
[2] = 
t
;

68 
	}
}

72 
	$mem»v64
(*
p
) {

73 *
x
 = 
p
, 
t
;

75 
t
 = 
x
[0];

76 
x
[0] = x[7];

77 
x
[7] = 
t
;

78 
t
 = 
x
[1];

79 
x
[1] = x[6];

80 
x
[6] = 
t
;

81 
t
 = 
x
[2];

82 
x
[2] = x[5];

83 
x
[5] = 
t
;

84 
t
 = 
x
[3];

85 
x
[3] = x[4];

86 
x
[4] = 
t
;

87 
	}
}

89 
ušt16_t
 
	$šŒev16
(
ušt16_t
 
v
) {

90 
	`mem»v16
(&
v
);

91  
v
;

92 
	}
}

94 
ušt32_t
 
	$šŒev32
(
ušt32_t
 
v
) {

95 
	`mem»v32
(&
v
);

96  
v
;

97 
	}
}

99 
ušt64_t
 
	$šŒev64
(
ušt64_t
 
v
) {

100 
	`mem»v64
(&
v
);

101  
v
;

102 
	}
}

104 #ifdeà
REDIS_TEST


105 
	~<¡dio.h
>

107 
	#UNUSED
(
x
è()(x)

	)

108 
	$’dŸncÚvTe¡
(
¬gc
, *
¬gv
[]) {

109 
buf
[32];

111 
	`UNUSED
(
¬gc
);

112 
	`UNUSED
(
¬gv
);

114 
	`¥rštf
(
buf
,"ciaoroma");

115 
	`mem»v16
(
buf
);

116 
	`´štf
("%s\n", 
buf
);

118 
	`¥rštf
(
buf
,"ciaoroma");

119 
	`mem»v32
(
buf
);

120 
	`´štf
("%s\n", 
buf
);

122 
	`¥rštf
(
buf
,"ciaoroma");

123 
	`mem»v64
(
buf
);

124 
	`´štf
("%s\n", 
buf
);

127 
	}
}

	@endianconv.h

33 #iâdeà
__ENDIANCONV_H


34 
	#__ENDIANCONV_H


	)

36 
	~"cÚfig.h
"

37 
	~<¡dšt.h
>

39 
mem»v16
(*
p
);

40 
mem»v32
(*
p
);

41 
mem»v64
(*
p
);

42 
ušt16_t
 
šŒev16
(ušt16_ˆ
v
);

43 
ušt32_t
 
šŒev32
(ušt32_ˆ
v
);

44 
ušt64_t
 
šŒev64
(ušt64_ˆ
v
);

48 #ià(
BYTE_ORDER
 =ğ
LITTLE_ENDIAN
)

49 
	#mem»v16ifbe
(
p
è(()(0))

	)

50 
	#mem»v32ifbe
(
p
è(()(0))

	)

51 
	#mem»v64ifbe
(
p
è(()(0))

	)

52 
	#šŒev16ifbe
(
v
è(v)

	)

53 
	#šŒev32ifbe
(
v
è(v)

	)

54 
	#šŒev64ifbe
(
v
è(v)

	)

56 
	#mem»v16ifbe
(
p
è
	`mem»v16
Õ)

	)

57 
	#mem»v32ifbe
(
p
è
	`mem»v32
Õ)

	)

58 
	#mem»v64ifbe
(
p
è
	`mem»v64
Õ)

	)

59 
	#šŒev16ifbe
(
v
è
	`šŒev16
(v)

	)

60 
	#šŒev32ifbe
(
v
è
	`šŒev32
(v)

	)

61 
	#šŒev64ifbe
(
v
è
	`šŒev64
(v)

	)

66 #ià(
BYTE_ORDER
 =ğ
BIG_ENDIAN
)

67 
	#htÚu64
(
v
è(v)

	)

68 
	#Áohu64
(
v
è(v)

	)

70 
	#htÚu64
(
v
è
	`šŒev64
(v)

	)

71 
	#Áohu64
(
v
è
	`šŒev64
(v)

	)

74 #ifdeà
REDIS_TEST


75 
’dŸncÚvTe¡
(
¬gc
, *
¬gv
[]);

	@evict.c

33 
	~"£rv”.h
"

34 
	~"bio.h
"

35 
	~"©omicv¬.h
"

52 
	#EVPOOL_SIZE
 16

	)

53 
	#EVPOOL_CACHED_SDS_SIZE
 255

	)

54 
	seviùiÚPoŞEÁry
 {

55 
	midË
;

56 
sds
 
	mkey
;

57 
sds
 
	mÿched
;

58 
	mdbid
;

61 
eviùiÚPoŞEÁry
 *
	gEviùiÚPoŞLRU
;

70 
	$g‘LRUClock
() {

71  (
	`m¡ime
()/
LRU_CLOCK_RESOLUTION
è& 
LRU_CLOCK_MAX
;

72 
	}
}

78 
	$LRU_CLOCK
() {

79 
Ìuşock
;

80 ià(1000/
£rv”
.
hz
 <ğ
LRU_CLOCK_RESOLUTION
) {

81 
Ìuşock
 = 
£rv”
.lruclock;

83 
Ìuşock
 = 
	`g‘LRUClock
();

85  
Ìuşock
;

86 
	}
}

90 
	$e¡im©eObjeùIdËTime
(
robj
 *
o
) {

91 
Ìuşock
 = 
	`LRU_CLOCK
();

92 ià(
Ìuşock
 >ğ
o
->
Ìu
) {

93  (
Ìuşock
 - 
o
->
Ìu
è* 
LRU_CLOCK_RESOLUTION
;

95  (
Ìuşock
 + (
LRU_CLOCK_MAX
 - 
o
->
Ìu
)) *

96 
LRU_CLOCK_RESOLUTION
;

98 
	}
}

139 
	$eviùiÚPoŞAÎoc
() {

140 
eviùiÚPoŞEÁry
 *
•
;

141 
j
;

143 
•
 = 
	`zm®loc
((*•)*
EVPOOL_SIZE
);

144 
j
 = 0; j < 
EVPOOL_SIZE
; j++) {

145 
•
[
j
].
idË
 = 0;

146 
•
[
j
].
key
 = 
NULL
;

147 
•
[
j
].
ÿched
 = 
	`sd¢ewËn
(
NULL
,
EVPOOL_CACHED_SDS_SIZE
);

148 
•
[
j
].
dbid
 = 0;

150 
EviùiÚPoŞLRU
 = 
•
;

151 
	}
}

162 
	$eviùiÚPoŞPİuÏ‹
(
dbid
, 
diù
 *
§m¶ediù
, diù *
keydiù
, 
eviùiÚPoŞEÁry
 *
poŞ
) {

163 
j
, 
k
, 
couÁ
;

164 
diùEÁry
 *
§m¶es
[
£rv”
.
maxmemÜy_§m¶es
];

166 
couÁ
 = 
	`diùG‘SomeKeys
(
§m¶ediù
,
§m¶es
,
£rv”
.
maxmemÜy_§m¶es
);

167 
j
 = 0; j < 
couÁ
; j++) {

168 
idË
;

169 
sds
 
key
;

170 
robj
 *
o
;

171 
diùEÁry
 *
de
;

173 
de
 = 
§m¶es
[
j
];

174 
key
 = 
	`diùG‘Key
(
de
);

179 ià(
£rv”
.
maxmemÜy_pŞicy
 !ğ
MAXMEMORY_VOLATILE_TTL
) {

180 ià(
§m¶ediù
 !ğ
keydiù
è
de
 = 
	`diùFšd
(keydiù, 
key
);

181 
o
 = 
	`diùG‘V®
(
de
);

187 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LRU
) {

188 
idË
 = 
	`e¡im©eObjeùIdËTime
(
o
);

189 } ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

197 
idË
 = 255-
	`LFUDeüAndR‘uº
(
o
);

198 } ià(
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_VOLATILE_TTL
) {

200 
idË
 = 
ULLONG_MAX
 - ()
	`diùG‘V®
(
de
);

202 
	`£rv”Pªic
("Unknownƒviction…olicy inƒvictionPoolPopulate()");

208 
k
 = 0;

209 
k
 < 
EVPOOL_SIZE
 &&

210 
poŞ
[
k
].
key
 &&

211 
poŞ
[
k
].
idË
 < idle) k++;

212 ià(
k
 =ğ0 && 
poŞ
[
EVPOOL_SIZE
-1].
key
 !ğ
NULL
) {

216 } ià(
k
 < 
EVPOOL_SIZE
 && 
poŞ
[k].
key
 =ğ
NULL
) {

221 ià(
poŞ
[
EVPOOL_SIZE
-1].
key
 =ğ
NULL
) {

226 
sds
 
ÿched
 = 
poŞ
[
EVPOOL_SIZE
-1].cached;

227 
	`memmove
(
poŞ
+
k
+1,pool+k,

228 (
poŞ
[0])*(
EVPOOL_SIZE
-
k
-1));

229 
poŞ
[
k
].
ÿched
 = cached;

232 
k
--;

235 
sds
 
ÿched
 = 
poŞ
[0].cached;

236 ià(
poŞ
[0].
key
 !ğpoŞ[0].
ÿched
è
	`sdsä“
(pool[0].key);

237 
	`memmove
(
poŞ
,poŞ+1,ÕoŞ[0])*
k
);

238 
poŞ
[
k
].
ÿched
 = cached;

246 
kËn
 = 
	`sd¦’
(
key
);

247 ià(
kËn
 > 
EVPOOL_CACHED_SDS_SIZE
) {

248 
poŞ
[
k
].
key
 = 
	`sdsdup
(key);

250 
	`memıy
(
poŞ
[
k
].
ÿched
,
key
,
kËn
+1);

251 
	`sds£’
(
poŞ
[
k
].
ÿched
,
kËn
);

252 
poŞ
[
k
].
key
 =…oŞ[k].
ÿched
;

254 
poŞ
[
k
].
idË
 = idle;

255 
poŞ
[
k
].
dbid
 = dbid;

257 
	}
}

299 
	$LFUG‘TimeInMšu‹s
() {

300  (
£rv”
.
unixtime
/60) & 65535;

301 
	}
}

307 
	$LFUTimeEÏp£d
(
ldt
) {

308 
now
 = 
	`LFUG‘TimeInMšu‹s
();

309 ià(
now
 >ğ
ldt
) ‚ow-ldt;

310  65535-
ldt
+
now
;

311 
	}
}

315 
ušt8_t
 
	$LFULogInü
(
ušt8_t
 
couÁ”
) {

316 ià(
couÁ”
 == 255)  255;

317 
r
 = ()
	`¿nd
()/
RAND_MAX
;

318 
ba£v®
 = 
couÁ”
 - 
LFU_INIT_VAL
;

319 ià(
ba£v®
 < 0) baseval = 0;

320 
p
 = 1.0/(
ba£v®
*
£rv”
.
lfu_log_çùÜ
+1);

321 ià(
r
 < 
p
è
couÁ”
++;

322  
couÁ”
;

323 
	}
}

335 
	$LFUDeüAndR‘uº
(
robj
 *
o
) {

336 
ldt
 = 
o
->
Ìu
 >> 8;

337 
couÁ”
 = 
o
->
Ìu
 & 255;

338 
num_³riods
 = 
£rv”
.
lfu_deÿy_time
 ? 
	`LFUTimeEÏp£d
(
ldt
) / server.lfu_decay_time : 0;

339 ià(
num_³riods
)

340 
couÁ”
 = (
num_³riods
 > counter) ? 0 : counter -‚um_periods;

341  
couÁ”
;

342 
	}
}

352 
size_t
 
	$ä“MemÜyG‘NÙCouÁedMemÜy
() {

353 
size_t
 
ov”h—d
 = 0;

354 
¦aves
 = 
	`li¡L’gth
(
£rv”
.slaves);

356 ià(
¦aves
) {

357 
li¡I‹r
 
li
;

358 
li¡Node
 *
Ê
;

360 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

361 (
Ê
 = 
	`li¡Next
(&
li
))) {

362 
ş›Á
 *
¦ave
 = 
	`li¡NodeV®ue
(
Ê
);

363 
ov”h—d
 +ğ
	`g‘Cl›ÁOuutBufãrMemÜyU§ge
(
¦ave
);

366 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
) {

367 
ov”h—d
 +ğ
	`sd§Îoc
(
£rv”
.
aof_buf
)+
	`aofRewr™eBufãrSize
();

369  
ov”h—d
;

370 
	}
}

396 
	$g‘MaxmemÜyS‹
(
size_t
 *
tÙ®
, size_ˆ*
logiÿl
, size_ˆ*
toä“
, *
Ëv–
) {

397 
size_t
 
mem_»pÜ‹d
, 
mem_u£d
, 
mem_toä“
;

401 
mem_»pÜ‹d
 = 
	`zm®loc_u£d_memÜy
();

402 ià(
tÙ®
è*tÙ® = 
mem_»pÜ‹d
;

405 
»tuº_ok_a§p
 = !
£rv”
.
maxmemÜy
 || 
mem_»pÜ‹d
 <= server.maxmemory;

406 ià(
»tuº_ok_a§p
 && !
Ëv–
è 
C_OK
;

410 
mem_u£d
 = 
mem_»pÜ‹d
;

411 
size_t
 
ov”h—d
 = 
	`ä“MemÜyG‘NÙCouÁedMemÜy
();

412 
mem_u£d
 = (mem_u£d > 
ov”h—d
) ? mem_used-overhead : 0;

415 ià(
Ëv–
) {

416 ià(!
£rv”
.
maxmemÜy
) {

417 *
Ëv–
 = 0;

419 *
Ëv–
 = ()
mem_u£d
 / ()
£rv”
.
maxmemÜy
;

423 ià(
»tuº_ok_a§p
è 
C_OK
;

426 ià(
mem_u£d
 <ğ
£rv”
.
maxmemÜy
è 
C_OK
;

429 
mem_toä“
 = 
mem_u£d
 - 
£rv”
.
maxmemÜy
;

431 ià(
logiÿl
è*logiÿÈğ
mem_u£d
;

432 ià(
toä“
è*toä“ = 
mem_toä“
;

434  
C_ERR
;

435 
	}
}

446 
	$ä“MemÜyIfN“ded
() {

447 
keys_ä“d
 = 0;

450 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¦ave_ignÜe_maxmemÜy
è 
C_OK
;

452 
size_t
 
mem_»pÜ‹d
, 
mem_toä“
, 
mem_ä“d
;

453 
m¡ime_t
 
Ï‹ncy
, 
eviùiÚ_Ï‹ncy
, 
Ïzyä“_Ï‹ncy
;

454 
d–
;

455 
¦aves
 = 
	`li¡L’gth
(
£rv”
.slaves);

456 
»suÉ
 = 
C_ERR
;

461 ià(
	`ş›ÁsA»Pau£d
()è 
C_OK
;

462 ià(
	`g‘MaxmemÜyS‹
(&
mem_»pÜ‹d
,
NULL
,&
mem_toä“
,NULLè=ğ
C_OK
)

463  
C_OK
;

465 
mem_ä“d
 = 0;

467 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

468 ià(
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_NO_EVICTION
)

469 
ÿÁ_ä“
;

471 
mem_ä“d
 < 
mem_toä“
) {

472 
j
, 
k
, 
i
;

473 
Ãxt_db
 = 0;

474 
sds
 
be¡key
 = 
NULL
;

475 
be¡dbid
;

476 
»disDb
 *
db
;

477 
diù
 *dict;

478 
diùEÁry
 *
de
;

480 ià(
£rv”
.
maxmemÜy_pŞicy
 & (
MAXMEMORY_FLAG_LRU
|
MAXMEMORY_FLAG_LFU
) ||

481 
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_VOLATILE_TTL
)

483 
eviùiÚPoŞEÁry
 *
poŞ
 = 
EviùiÚPoŞLRU
;

485 
be¡key
 =ğ
NULL
) {

486 
tÙ®_keys
 = 0, 
keys
;

491 
i
 = 0; i < 
£rv”
.
dbnum
; i++) {

492 
db
 = 
£rv”
.db+
i
;

493 
diù
 = (
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_ALLKEYS
) ?

494 
db
->
diù
 : db->
expœes
;

495 ià((
keys
 = 
	`diùSize
(
diù
)) != 0) {

496 
	`eviùiÚPoŞPİuÏ‹
(
i
, 
diù
, 
db
->diù, 
poŞ
);

497 
tÙ®_keys
 +ğ
keys
;

500 ià(!
tÙ®_keys
) ;

503 
k
 = 
EVPOOL_SIZE
-1; k >= 0; k--) {

504 ià(
poŞ
[
k
].
key
 =ğ
NULL
) ;

505 
be¡dbid
 = 
poŞ
[
k
].
dbid
;

507 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_ALLKEYS
) {

508 
de
 = 
	`diùFšd
(
£rv”
.
db
[
poŞ
[
k
].
dbid
].
diù
,

509 
poŞ
[
k
].
key
);

511 
de
 = 
	`diùFšd
(
£rv”
.
db
[
poŞ
[
k
].
dbid
].
expœes
,

512 
poŞ
[
k
].
key
);

516 ià(
poŞ
[
k
].
key
 !ğpoŞ[k].
ÿched
)

517 
	`sdsä“
(
poŞ
[
k
].
key
);

518 
poŞ
[
k
].
key
 = 
NULL
;

519 
poŞ
[
k
].
idË
 = 0;

523 ià(
de
) {

524 
be¡key
 = 
	`diùG‘Key
(
de
);

534 ià(
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_ALLKEYS_RANDOM
 ||

535 
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_VOLATILE_RANDOM
)

540 
i
 = 0; i < 
£rv”
.
dbnum
; i++) {

541 
j
 = (++
Ãxt_db
è% 
£rv”
.
dbnum
;

542 
db
 = 
£rv”
.db+
j
;

543 
diù
 = (
£rv”
.
maxmemÜy_pŞicy
 =ğ
MAXMEMORY_ALLKEYS_RANDOM
) ?

544 
db
->
diù
 : db->
expœes
;

545 ià(
	`diùSize
(
diù
) != 0) {

546 
de
 = 
	`diùG‘RªdomKey
(
diù
);

547 
be¡key
 = 
	`diùG‘Key
(
de
);

548 
be¡dbid
 = 
j
;

555 ià(
be¡key
) {

556 
db
 = 
£rv”
.db+
be¡dbid
;

557 
robj
 *
keyobj
 = 
	`ü—‹SŒšgObjeù
(
be¡key
,
	`sd¦’
(bestkey));

558 
	`´İag©eExpœe
(
db
,
keyobj
,
£rv”
.
Ïzyä“_Ïzy_eviùiÚ
);

567 
d–
 = (è
	`zm®loc_u£d_memÜy
();

568 
	`Ï‹ncyS¹MÚ™Ü
(
eviùiÚ_Ï‹ncy
);

569 ià(
£rv”
.
Ïzyä“_Ïzy_eviùiÚ
)

570 
	`dbAsyncD–‘e
(
db
,
keyobj
);

572 
	`dbSyncD–‘e
(
db
,
keyobj
);

573 
	`sigÇlModif›dKey
(
NULL
,
db
,
keyobj
);

574 
	`Ï‹ncyEndMÚ™Ü
(
eviùiÚ_Ï‹ncy
);

575 
	`Ï‹ncyAddSam¶eIfN“ded
("eviùiÚ-d–",
eviùiÚ_Ï‹ncy
);

576 
d–
 -ğ(è
	`zm®loc_u£d_memÜy
();

577 
mem_ä“d
 +ğ
d–
;

578 
£rv”
.
¡©_eviùedkeys
++;

579 
	`nÙifyKey¥aûEv’t
(
NOTIFY_EVICTED
, "evicted",

580 
keyobj
, 
db
->
id
);

581 
	`deüRefCouÁ
(
keyobj
);

582 
keys_ä“d
++;

588 ià(
¦aves
è
	`æushSÏvesOuutBufãrs
();

597 ià(
£rv”
.
Ïzyä“_Ïzy_eviùiÚ
 && !(
keys_ä“d
 % 16)) {

598 ià(
	`g‘MaxmemÜyS‹
(
NULL
,NULL,NULL,NULLè=ğ
C_OK
) {

600 
mem_ä“d
 = 
mem_toä“
;

604 
ÿÁ_ä“
;

607 
»suÉ
 = 
C_OK
;

609 
ÿÁ_ä“
:

613 ià(
»suÉ
 !ğ
C_OK
) {

614 
	`Ï‹ncyS¹MÚ™Ü
(
Ïzyä“_Ï‹ncy
);

615 
	`bioP’dšgJobsOfTy³
(
BIO_LAZY_FREE
)) {

616 ià(
	`g‘MaxmemÜyS‹
(
NULL
,NULL,NULL,NULLè=ğ
C_OK
) {

617 
»suÉ
 = 
C_OK
;

620 
	`u¦“p
(1000);

622 
	`Ï‹ncyEndMÚ™Ü
(
Ïzyä“_Ï‹ncy
);

623 
	`Ï‹ncyAddSam¶eIfN“ded
("eviùiÚ-Ïzyä“",
Ïzyä“_Ï‹ncy
);

625 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

626 
	`Ï‹ncyAddSam¶eIfN“ded
("eviùiÚ-cyşe",
Ï‹ncy
);

627  
»suÉ
;

628 
	}
}

637 
	$ä“MemÜyIfN“dedAndSaã
() {

638 ià(
£rv”
.
lua_timedout
 || s”v”.
lßdšg
è 
C_OK
;

639  
	`ä“MemÜyIfN“ded
();

640 
	}
}

	@expire.c

33 
	~"£rv”.h
"

54 
	$aùiveExpœeCyşeTryExpœe
(
»disDb
 *
db
, 
diùEÁry
 *
de
, 
now
) {

55 
t
 = 
	`diùG‘SigÃdIÁeg”V®
(
de
);

56 ià(
now
 > 
t
) {

57 
sds
 
key
 = 
	`diùG‘Key
(
de
);

58 
robj
 *
keyobj
 = 
	`ü—‹SŒšgObjeù
(
key
,
	`sd¦’
(key));

60 
	`´İag©eExpœe
(
db
,
keyobj
,
£rv”
.
Ïzyä“_Ïzy_expœe
);

61 ià(
£rv”
.
Ïzyä“_Ïzy_expœe
)

62 
	`dbAsyncD–‘e
(
db
,
keyobj
);

64 
	`dbSyncD–‘e
(
db
,
keyobj
);

65 
	`nÙifyKey¥aûEv’t
(
NOTIFY_EXPIRED
,

66 "expœed",
keyobj
,
db
->
id
);

67 
	`ŒackšgInv®id©eKey
(
NULL
,
keyobj
);

68 
	`deüRefCouÁ
(
keyobj
);

69 
£rv”
.
¡©_expœedkeys
++;

74 
	}
}

117 
	#ACTIVE_EXPIRE_CYCLE_KEYS_PER_LOOP
 20

	)

118 
	#ACTIVE_EXPIRE_CYCLE_FAST_DURATION
 1000

	)

119 
	#ACTIVE_EXPIRE_CYCLE_SLOW_TIME_PERC
 25

	)

120 
	#ACTIVE_EXPIRE_CYCLE_ACCEPTABLE_STALE
 10

	)

123 
	$aùiveExpœeCyşe
(
ty³
) {

128 
effÜt
 = 
£rv”
.
aùive_expœe_effÜt
-1,

129 
cÚfig_keys_³r_loİ
 = 
ACTIVE_EXPIRE_CYCLE_KEYS_PER_LOOP
 +

130 
ACTIVE_EXPIRE_CYCLE_KEYS_PER_LOOP
/4*
effÜt
,

131 
cÚfig_cyşe_ç¡_du¿tiÚ
 = 
ACTIVE_EXPIRE_CYCLE_FAST_DURATION
 +

132 
ACTIVE_EXPIRE_CYCLE_FAST_DURATION
/4*
effÜt
,

133 
cÚfig_cyşe_¦ow_time_³rc
 = 
ACTIVE_EXPIRE_CYCLE_SLOW_TIME_PERC
 +

134 2*
effÜt
,

135 
cÚfig_cyşe_acû±abË_¡®e
 = 
ACTIVE_EXPIRE_CYCLE_ACCEPTABLE_STALE
-

136 
effÜt
;

140 
cu¼’t_db
 = 0;

141 
tim–im™_ex™
 = 0;

142 
Ï¡_ç¡_cyşe
 = 0;

144 
j
, 
™”©iÚ
 = 0;

145 
dbs_³r_ÿÎ
 = 
CRON_DBS_PER_CALL
;

146 
¡¬t
 = 
	`u¡ime
(), 
tim–im™
, 
–­£d
;

151 ià(
	`ş›ÁsA»Pau£d
()) ;

153 ià(
ty³
 =ğ
ACTIVE_EXPIRE_CYCLE_FAST
) {

158 ià(!
tim–im™_ex™
 &&

159 
£rv”
.
¡©_expœed_¡®e_³rc
 < 
cÚfig_cyşe_acû±abË_¡®e
)

162 ià(
¡¬t
 < 
Ï¡_ç¡_cyşe
 + ()
cÚfig_cyşe_ç¡_du¿tiÚ
*2)

165 
Ï¡_ç¡_cyşe
 = 
¡¬t
;

175 ià(
dbs_³r_ÿÎ
 > 
£rv”
.
dbnum
 || 
tim–im™_ex™
)

176 
dbs_³r_ÿÎ
 = 
£rv”
.
dbnum
;

182 
tim–im™
 = 
cÚfig_cyşe_¦ow_time_³rc
*1000000/
£rv”
.
hz
/100;

183 
tim–im™_ex™
 = 0;

184 ià(
tim–im™
 <= 0)imelimit = 1;

186 ià(
ty³
 =ğ
ACTIVE_EXPIRE_CYCLE_FAST
)

187 
tim–im™
 = 
cÚfig_cyşe_ç¡_du¿tiÚ
;

192 
tÙ®_§m¶ed
 = 0;

193 
tÙ®_expœed
 = 0;

195 
j
 = 0; j < 
dbs_³r_ÿÎ
 && 
tim–im™_ex™
 == 0; j++) {

197 
expœed
, 
§m¶ed
;

199 
»disDb
 *
db
 = 
£rv”
.db+(
cu¼’t_db
 % s”v”.
dbnum
);

204 
cu¼’t_db
++;

211 
num
, 
¦Ùs
;

212 
now
, 
‰l_sum
;

213 
‰l_§m¶es
;

214 
™”©iÚ
++;

217 ià((
num
 = 
	`diùSize
(
db
->
expœes
)) == 0) {

218 
db
->
avg_‰l
 = 0;

221 
¦Ùs
 = 
	`diùSlÙs
(
db
->
expœes
);

222 
now
 = 
	`m¡ime
();

227 ià(
num
 && 
¦Ùs
 > 
DICT_HT_INITIAL_SIZE
 &&

228 (
num
*100/
¦Ùs
 < 1)) ;

232 
expœed
 = 0;

233 
§m¶ed
 = 0;

234 
‰l_sum
 = 0;

235 
‰l_§m¶es
 = 0;

237 ià(
num
 > 
cÚfig_keys_³r_loİ
)

238 
num
 = 
cÚfig_keys_³r_loİ
;

250 
max_buck‘s
 = 
num
*20;

251 
checked_buck‘s
 = 0;

253 
§m¶ed
 < 
num
 && 
checked_buck‘s
 < 
max_buck‘s
) {

254 
bË
 = 0;able < 2;able++) {

255 ià(
bË
 =ğ1 && !
	`diùIsRehashšg
(
db
->
expœes
)) ;

257 
idx
 = 
db
->
expœes_cursÜ
;

258 
idx
 &ğ
db
->
expœes
->
ht
[
bË
].
sizemask
;

259 
diùEÁry
 *
de
 = 
db
->
expœes
->
ht
[
bË
].bË[
idx
];

260 
‰l
;

263 
checked_buck‘s
++;

264 
de
) {

267 
diùEÁry
 *
e
 = 
de
;

268 
de
 = de->
Ãxt
;

270 
‰l
 = 
	`diùG‘SigÃdIÁeg”V®
(
e
)-
now
;

271 ià(
	`aùiveExpœeCyşeTryExpœe
(
db
,
e
,
now
)è
expœed
++;

272 ià(
‰l
 > 0) {

275 
‰l_sum
 +ğ
‰l
;

276 
‰l_§m¶es
++;

278 
§m¶ed
++;

281 
db
->
expœes_cursÜ
++;

283 
tÙ®_expœed
 +ğ
expœed
;

284 
tÙ®_§m¶ed
 +ğ
§m¶ed
;

287 ià(
‰l_§m¶es
) {

288 
avg_‰l
 = 
‰l_sum
/
‰l_§m¶es
;

293 ià(
db
->
avg_‰l
 == 0) db->avg_ttl =‡vg_ttl;

294 
db
->
avg_‰l
 = (db->avg_ttl/50)*49 + (avg_ttl/50);

300 ià((
™”©iÚ
 & 0xf) == 0) {

301 
–­£d
 = 
	`u¡ime
()-
¡¬t
;

302 ià(
–­£d
 > 
tim–im™
) {

303 
tim–im™_ex™
 = 1;

304 
£rv”
.
¡©_expœed_time_ÿp_»ached_couÁ
++;

311 } 
§m¶ed
 == 0 ||

312 (
expœed
*100/
§m¶ed
è> 
cÚfig_cyşe_acû±abË_¡®e
);

315 
–­£d
 = 
	`u¡ime
()-
¡¬t
;

316 
£rv”
.
¡©_expœe_cyşe_time_u£d
 +ğ
–­£d
;

317 
	`Ï‹ncyAddSam¶eIfN“ded
("expœe-cyşe",
–­£d
/1000);

321 
cu¼’t_³rc
;

322 ià(
tÙ®_§m¶ed
) {

323 
cu¼’t_³rc
 = ()
tÙ®_expœed
/
tÙ®_§m¶ed
;

325 
cu¼’t_³rc
 = 0;

326 
£rv”
.
¡©_expœed_¡®e_³rc
 = (
cu¼’t_³rc
*0.05)+

327 (
£rv”
.
¡©_expœed_¡®e_³rc
*0.95);

328 
	}
}

365 
diù
 *
	g¦aveKeysW™hExpœe
 = 
NULL
;

369 
	$expœeSÏveKeys
() {

370 ià(
¦aveKeysW™hExpœe
 =ğ
NULL
 ||

371 
	`diùSize
(
¦aveKeysW™hExpœe
) == 0) ;

373 
cyşes
 = 0, 
nÛxpœe
 = 0;

374 
m¡ime_t
 
¡¬t
 = 
	`m¡ime
();

376 
diùEÁry
 *
de
 = 
	`diùG‘RªdomKey
(
¦aveKeysW™hExpœe
);

377 
sds
 
keyÇme
 = 
	`diùG‘Key
(
de
);

378 
ušt64_t
 
dbids
 = 
	`diùG‘UnsigÃdIÁeg”V®
(
de
);

379 
ušt64_t
 
Ãw_dbids
 = 0;

383 
dbid
 = 0;

384 
dbids
 && 
dbid
 < 
£rv”
.
dbnum
) {

385 ià((
dbids
 & 1) != 0) {

386 
»disDb
 *
db
 = 
£rv”
.db+
dbid
;

387 
diùEÁry
 *
expœe
 = 
	`diùFšd
(
db
->
expœes
,
keyÇme
);

388 
expœed
 = 0;

390 ià(
expœe
 &&

391 
	`aùiveExpœeCyşeTryExpœe
(
£rv”
.
db
+
dbid
,
expœe
,
¡¬t
))

393 
expœed
 = 1;

400 ià(
expœe
 && !
expœed
) {

401 
nÛxpœe
++;

402 
Ãw_dbids
 |ğ(
ušt64_t
)1 << 
dbid
;

405 
dbid
++;

406 
dbids
 >>= 1;

412 ià(
Ãw_dbids
)

413 
	`diùS‘UnsigÃdIÁeg”V®
(
de
,
Ãw_dbids
);

415 
	`diùD–‘e
(
¦aveKeysW™hExpœe
,
keyÇme
);

419 
cyşes
++;

420 ià(
nÛxpœe
 > 3) ;

421 ià((
cyşes
 % 64è=ğ0 && 
	`m¡ime
()-
¡¬t
 > 1) ;

422 ià(
	`diùSize
(
¦aveKeysW™hExpœe
) == 0) ;

424 
	}
}

428 
	$»memb”SÏveKeyW™hExpœe
(
»disDb
 *
db
, 
robj
 *
key
) {

429 ià(
¦aveKeysW™hExpœe
 =ğ
NULL
) {

430 
diùTy³
 
dt
 = {

431 
diùSdsHash
,

432 
NULL
,

433 
NULL
,

434 
diùSdsKeyCom·»
,

435 
diùSdsDe¡ruùÜ
,

436 
NULL


438 
¦aveKeysW™hExpœe
 = 
	`diùC»©e
(&
dt
,
NULL
);

440 ià(
db
->
id
 > 63) ;

442 
diùEÁry
 *
de
 = 
	`diùAddOrFšd
(
¦aveKeysW™hExpœe
,
key
->
±r
);

447 ià(
de
->
key
 =ğkey->
±r
) {

448 
de
->
key
 = 
	`sdsdup
(key->
±r
);

449 
	`diùS‘UnsigÃdIÁeg”V®
(
de
,0);

452 
ušt64_t
 
dbids
 = 
	`diùG‘UnsigÃdIÁeg”V®
(
de
);

453 
dbids
 |ğ(
ušt64_t
)1 << 
db
->
id
;

454 
	`diùS‘UnsigÃdIÁeg”V®
(
de
,
dbids
);

455 
	}
}

458 
size_t
 
	$g‘SÏveKeyW™hExpœeCouÁ
() {

459 ià(
¦aveKeysW™hExpœe
 =ğ
NULL
)  0;

460  
	`diùSize
(
¦aveKeysW™hExpœe
);

461 
	}
}

471 
	$æushSÏveKeysW™hExpœeLi¡
() {

472 ià(
¦aveKeysW™hExpœe
) {

473 
	`diùR–—£
(
¦aveKeysW™hExpœe
);

474 
¦aveKeysW™hExpœe
 = 
NULL
;

476 
	}
}

489 
	$expœeG’”icCommªd
(
ş›Á
 *
c
, 
ba£time
, 
un™
) {

490 
robj
 *
key
 = 
c
->
¬gv
[1], *
·¿m
 = c->argv[2];

491 
wh’
;

493 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, 
·¿m
, &
wh’
, 
NULL
è!ğ
C_OK
)

496 ià(
un™
 =ğ
UNIT_SECONDS
è
wh’
 *= 1000;

497 
wh’
 +ğ
ba£time
;

500 ià(
	`lookupKeyWr™e
(
c
->
db
,
key
è=ğ
NULL
) {

501 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

511 ià(
wh’
 <ğ
	`m¡ime
(è&& !
£rv”
.
lßdšg
 && !£rv”.
ma¡”ho¡
) {

512 
robj
 *
aux
;

514 
d–‘ed
 = 
£rv”
.
Ïzyä“_Ïzy_expœe
 ? 
	`dbAsyncD–‘e
(
c
->
db
,
key
) :

515 
	`dbSyncD–‘e
(
c
->
db
,
key
);

516 
	`£rv”As£¹W™hInfo
(
c
,
key
,
d–‘ed
);

517 
£rv”
.
dœty
++;

520 
aux
 = 
£rv”
.
Ïzyä“_Ïzy_expœe
 ? 
sh¬ed
.
uÆšk
 : sh¬ed.
d–
;

521 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,2,
aux
,
key
);

522 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

523 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
key
,
c
->
db
->
id
);

524 
	`addR•ly
(
c
, 
sh¬ed
.
cÚe
);

527 
	`£tExpœe
(
c
,c->
db
,
key
,
wh’
);

528 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

529 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

530 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"expœe",
key
,
c
->
db
->
id
);

531 
£rv”
.
dœty
++;

534 
	}
}

537 
	$expœeCommªd
(
ş›Á
 *
c
) {

538 
	`expœeG’”icCommªd
(
c
,
	`m¡ime
(),
UNIT_SECONDS
);

539 
	}
}

542 
	$expœ—tCommªd
(
ş›Á
 *
c
) {

543 
	`expœeG’”icCommªd
(
c
,0,
UNIT_SECONDS
);

544 
	}
}

547 
	$³xpœeCommªd
(
ş›Á
 *
c
) {

548 
	`expœeG’”icCommªd
(
c
,
	`m¡ime
(),
UNIT_MILLISECONDS
);

549 
	}
}

552 
	$³xpœ—tCommªd
(
ş›Á
 *
c
) {

553 
	`expœeG’”icCommªd
(
c
,0,
UNIT_MILLISECONDS
);

554 
	}
}

557 
	$‰lG’”icCommªd
(
ş›Á
 *
c
, 
ouut_ms
) {

558 
expœe
, 
‰l
 = -1;

561 ià(
	`lookupKeyR—dW™hFÏgs
(
c
->
db
,c->
¬gv
[1],
LOOKUP_NOTOUCH
è=ğ
NULL
) {

562 
	`addR•lyLÚgLÚg
(
c
,-2);

567 
expœe
 = 
	`g‘Expœe
(
c
->
db
,c->
¬gv
[1]);

568 ià(
expœe
 != -1) {

569 
‰l
 = 
expœe
-
	`m¡ime
();

570 ià(
‰l
 < 0)tl = 0;

572 ià(
‰l
 == -1) {

573 
	`addR•lyLÚgLÚg
(
c
,-1);

575 
	`addR•lyLÚgLÚg
(
c
,
ouut_ms
 ? 
‰l
 : ((ttl+500)/1000));

577 
	}
}

580 
	$‰lCommªd
(
ş›Á
 *
c
) {

581 
	`‰lG’”icCommªd
(
c
, 0);

582 
	}
}

585 
	$±Commªd
(
ş›Á
 *
c
) {

586 
	`‰lG’”icCommªd
(
c
, 1);

587 
	}
}

590 
	$³rsi¡Commªd
(
ş›Á
 *
c
) {

591 ià(
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1])) {

592 ià(
	`»moveExpœe
(
c
->
db
,c->
¬gv
[1])) {

593 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"³rsi¡",
c
->
¬gv
[1],c->
db
->
id
);

594 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

595 
£rv”
.
dœty
++;

597 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

600 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

602 
	}
}

605 
	$touchCommªd
(
ş›Á
 *
c
) {

606 
touched
 = 0;

607 
j
 = 1; j < 
c
->
¬gc
; j++)

608 ià(
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
]è!ğ
NULL
è
touched
++;

609 
	`addR•lyLÚgLÚg
(
c
,
touched
);

610 
	}
}

	@fmacros.h

30 #iâdeà
_REDIS_FMACRO_H


31 
	#_REDIS_FMACRO_H


	)

33 
	#_BSD_SOURCE


	)

35 #ià
defšed
(
__lšux__
)

36 
	#_GNU_SOURCE


	)

37 
	#_DEFAULT_SOURCE


	)

40 #ià
defšed
(
_AIX
)

41 
	#_ALL_SOURCE


	)

44 #ià
defšed
(
__lšux__
è|| defšed(
__O³nBSD__
)

45 
	#_XOPEN_SOURCE
 700

	)

50 #–ià!
defšed
(
__N‘BSD__
)

51 
	#_XOPEN_SOURCE


	)

54 #ià
defšed
(
__sun
)

55 
	#_POSIX_C_SOURCE
 199506L

	)

58 
	#_LARGEFILE_SOURCE


	)

59 
	#_FILE_OFFSET_BITS
 64

	)

	@geo.c

31 
	~"geo.h
"

32 
	~"geohash_h–³r.h
"

33 
	~"debugmaüo.h
"

37 *
zzlFœ¡InRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
);

38 
z¦V®ueL‹Max
(
v®ue
, 
z¿nge¥ec
 *
¥ec
);

53 
geoA¼ay
 *
	$geoA¼ayC»©e
() {

54 
geoA¼ay
 *
ga
 = 
	`zm®loc
((*ga));

56 
ga
->
¬¿y
 = 
NULL
;

57 
ga
->
buck‘s
 = 0;

58 
ga
->
u£d
 = 0;

59  
ga
;

60 
	}
}

64 
geoPošt
 *
	$geoA¼ayAµ’d
(
geoA¼ay
 *
ga
) {

65 ià(
ga
->
u£d
 =ğga->
buck‘s
) {

66 
ga
->
buck‘s
 = (ga->buckets == 0) ? 8 : ga->buckets*2;

67 
ga
->
¬¿y
 = 
	`z»®loc
(ga->¬¿y,(
geoPošt
)*ga->
buck‘s
);

69 
geoPošt
 *
gp
 = 
ga
->
¬¿y
+ga->
u£d
;

70 
ga
->
u£d
++;

71  
gp
;

72 
	}
}

75 
	$geoA¼ayF»e
(
geoA¼ay
 *
ga
) {

76 
size_t
 
i
;

77 
i
 = 0; i < 
ga
->
u£d
; i++è
	`sdsä“
(ga->
¬¿y
[i].
memb”
);

78 
	`zä“
(
ga
->
¬¿y
);

79 
	`zä“
(
ga
);

80 
	}
}

85 
	$decodeGeohash
(
b™s
, *
xy
) {

86 
GeoHashB™s
 
hash
 = { .
b™s
 = (
ušt64_t
)b™s, .
¡•
 = 
GEO_STEP_MAX
 };

87  
	`geohashDecodeToLÚgL©WGS84
(
hash
, 
xy
);

88 
	}
}

93 
	$exŒaùLÚgL©OrR•ly
(
ş›Á
 *
c
, 
robj
 **
¬gv
, *
xy
) {

94 
i
;

95 
i
 = 0; i < 2; i++) {

96 ià(
	`g‘DoubËFromObjeùOrR•ly
(
c
, 
¬gv
[
i
], 
xy
 + i, 
NULL
) !=

97 
C_OK
) {

98  
C_ERR
;

101 ià(
xy
[0] < 
GEO_LONG_MIN
 || xy[0] > 
GEO_LONG_MAX
 ||

102 
xy
[1] < 
GEO_LAT_MIN
 || xy[1] > 
GEO_LAT_MAX
) {

103 
	`addR•lySds
(
c
, 
	`sdsÿrštf
(
	`sd£m±y
(),

104 "-ERR inv®id†Úg™ude,Ït™ud·œ %f,%f\r\n",
xy
[0],xy[1]));

105  
C_ERR
;

107  
C_OK
;

108 
	}
}

113 
	$lÚgL©FromMemb”
(
robj
 *
zobj
,„obj *
memb”
, *
xy
) {

114 
scÜe
 = 0;

116 ià(
	`z£tScÜe
(
zobj
, 
memb”
->
±r
, &
scÜe
è=ğ
C_ERR
)  C_ERR;

117 ià(!
	`decodeGeohash
(
scÜe
, 
xy
)è 
C_ERR
;

118  
C_OK
;

119 
	}
}

127 
	$exŒaùUn™OrR•ly
(
ş›Á
 *
c
, 
robj
 *
un™
) {

128 *
u
 = 
un™
->
±r
;

130 ià(!
	`¡rcmp
(
u
, "m")) {

132 } ià(!
	`¡rcmp
(
u
, "km")) {

134 } ià(!
	`¡rcmp
(
u
, "ft")) {

136 } ià(!
	`¡rcmp
(
u
, "mi")) {

139 
	`addR•lyE¼Ü
(
c
,

143 
	}
}

152 
	$exŒaùDi¡ªûOrR•ly
(
ş›Á
 *
c
, 
robj
 **
¬gv
,

153 *
cÚv”siÚ
) {

154 
di¡ªû
;

155 ià(
	`g‘DoubËFromObjeùOrR•ly
(
c
, 
¬gv
[0], &
di¡ªû
,

156 "Ãed‚um”iø¿dius"è!ğ
C_OK
) {

160 ià(
di¡ªû
 < 0) {

161 
	`addR•lyE¼Ü
(
c
,"radius cannot be‚egative");

165 
to_m‘”s
 = 
	`exŒaùUn™OrR•ly
(
c
,
¬gv
[1]);

166 ià(
to_m‘”s
 < 0) {

170 ià(
cÚv”siÚ
è*cÚv”siÚ = 
to_m‘”s
;

171  
di¡ªû
 * 
to_m‘”s
;

172 
	}
}

179 
	$addR•lyDoubËDi¡ªû
(
ş›Á
 *
c
, 
d
) {

180 
dbuf
[128];

181 
dËn
 = 
	`¢´štf
(
dbuf
, (dbuf), "%.4f", 
d
);

182 
	`addR•lyBulkCBufãr
(
c
, 
dbuf
, 
dËn
);

183 
	}
}

191 
	$geoAµ’dIfW™hšRadius
(
geoA¼ay
 *
ga
, 
lÚ
, 
Ït
, 
¿dius
, 
scÜe
, 
sds
 
memb”
) {

192 
di¡ªû
, 
xy
[2];

194 ià(!
	`decodeGeohash
(
scÜe
,
xy
)è 
C_ERR
;

197 ià(!
	`geohashG‘Di¡ªûIfInRadiusWGS84
(
lÚ
,
Ït
, 
xy
[0], xy[1],

198 
¿dius
, &
di¡ªû
))

200  
C_ERR
;

204 
geoPošt
 *
gp
 = 
	`geoA¼ayAµ’d
(
ga
);

205 
gp
->
lÚg™ude
 = 
xy
[0];

206 
gp
->
Ït™ude
 = 
xy
[1];

207 
gp
->
di¡
 = 
di¡ªû
;

208 
gp
->
memb”
 = member;

209 
gp
->
scÜe
 = score;

210  
C_OK
;

211 
	}
}

225 
	$geoG‘PoštsInRªge
(
robj
 *
zobj
, 
mš
, 
max
, 
lÚ
, 
Ït
, 
¿dius
, 
geoA¼ay
 *
ga
) {

228 
z¿nge¥ec
 
¿nge
 = { .
mš
 = mš, .
max
 = max, .
mšex
 = 0, .
maxex
 = 1 };

229 
size_t
 
ÜigšcouÁ
 = 
ga
->
u£d
;

230 
sds
 
memb”
;

232 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

233 *
zl
 = 
zobj
->
±r
;

234 *
•Œ
, *
¥Œ
;

235 *
v¡r
 = 
NULL
;

236 
vËn
 = 0;

237 
vlÚg
 = 0;

238 
scÜe
 = 0;

240 ià((
•Œ
 = 
	`zzlFœ¡InRªge
(
zl
, &
¿nge
)è=ğ
NULL
) {

245 
¥Œ
 = 
	`zli¡Next
(
zl
, 
•Œ
);

246 
•Œ
) {

247 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

250 ià(!
	`z¦V®ueL‹Max
(
scÜe
, &
¿nge
))

254 
	`zli¡G‘
(
•Œ
, &
v¡r
, &
vËn
, &
vlÚg
);

255 
memb”
 = (
v¡r
 =ğ
NULL
è? 
	`sdsäomlÚglÚg
(
vlÚg
) :

256 
	`sd¢ewËn
(
v¡r
,
vËn
);

257 ià(
	`geoAµ’dIfW™hšRadius
(
ga
,
lÚ
,
Ït
,
¿dius
,
scÜe
,
memb”
)

258 =ğ
C_ERR
è
	`sdsä“
(
memb”
);

259 
	`zzlNext
(
zl
, &
•Œ
, &
¥Œ
);

261 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

262 
z£t
 *
zs
 = 
zobj
->
±r
;

263 
zskli¡
 *
z¦
 = 
zs
->zsl;

264 
zskli¡Node
 *
Ê
;

266 ià((
Ê
 = 
	`z¦Fœ¡InRªge
(
z¦
, &
¿nge
)è=ğ
NULL
) {

271 
Ê
) {

272 
sds
 
–e
 = 
Ê
->ele;

274 ià(!
	`z¦V®ueL‹Max
(
Ê
->
scÜe
, &
¿nge
))

277 
–e
 = 
	`sdsdup
(ele);

278 ià(
	`geoAµ’dIfW™hšRadius
(
ga
,
lÚ
,
Ït
,
¿dius
,
Ê
->
scÜe
,
–e
)

279 =ğ
C_ERR
è
	`sdsä“
(
–e
);

280 
Ê
 =†n->
Ëv–
[0].
fÜw¬d
;

283  
ga
->
u£d
 - 
ÜigšcouÁ
;

284 
	}
}

289 
	$scÜesOfGeoHashBox
(
GeoHashB™s
 
hash
, 
GeoHashFix52B™s
 *
mš
, GeoHashFix52B™ *
max
) {

310 *
mš
 = 
	`geohashAlign52B™s
(
hash
);

311 
hash
.
b™s
++;

312 *
max
 = 
	`geohashAlign52B™s
(
hash
);

313 
	}
}

318 
	$memb”sOfGeoHashBox
(
robj
 *
zobj
, 
GeoHashB™s
 
hash
, 
geoA¼ay
 *
ga
, 
lÚ
, 
Ït
, 
¿dius
) {

319 
GeoHashFix52B™s
 
mš
, 
max
;

321 
	`scÜesOfGeoHashBox
(
hash
,&
mš
,&
max
);

322  
	`geoG‘PoštsInRªge
(
zobj
, 
mš
, 
max
, 
lÚ
, 
Ït
, 
¿dius
, 
ga
);

323 
	}
}

326 
	$memb”sOfAÎNeighbÜs
(
robj
 *
zobj
, 
GeoHashRadius
 
n
, 
lÚ
, 
Ït
, 
¿dius
, 
geoA¼ay
 *
ga
) {

327 
GeoHashB™s
 
ÃighbÜs
[9];

328 
i
, 
couÁ
 = 0, 
Ï¡_´oûs£d
 = 0;

329 
debugmsg
 = 0;

331 
ÃighbÜs
[0] = 
n
.
hash
;

332 
ÃighbÜs
[1] = 
n
.ÃighbÜs.
nÜth
;

333 
ÃighbÜs
[2] = 
n
.ÃighbÜs.
south
;

334 
ÃighbÜs
[3] = 
n
.ÃighbÜs.
—¡
;

335 
ÃighbÜs
[4] = 
n
.ÃighbÜs.
we¡
;

336 
ÃighbÜs
[5] = 
n
.ÃighbÜs.
nÜth_—¡
;

337 
ÃighbÜs
[6] = 
n
.ÃighbÜs.
nÜth_we¡
;

338 
ÃighbÜs
[7] = 
n
.ÃighbÜs.
south_—¡
;

339 
ÃighbÜs
[8] = 
n
.ÃighbÜs.
south_we¡
;

343 
i
 = 0; i < (
ÃighbÜs
) / (*neighbors); i++) {

344 ià(
	`HASHISZERO
(
ÃighbÜs
[
i
])) {

345 ià(
debugmsg
è
	`D
("ÃighbÜs[%d] i z”o",
i
);

350 ià(
debugmsg
) {

351 
GeoHashRªge
 
lÚg_¿nge
, 
Ït_¿nge
;

352 
	`geohashG‘CoÜdRªge
(&
lÚg_¿nge
,&
Ït_¿nge
);

353 
GeoHashA»a
 
my¬—
 = {{0}};

354 
	`geohashDecode
(
lÚg_¿nge
, 
Ït_¿nge
, 
ÃighbÜs
[
i
], &
my¬—
);

357 
	`D
("ÃighbÜs[%d]:\n",
i
);

358 
	`D
("¬—.lÚg™ude.mš: %f\n", 
my¬—
.
lÚg™ude
.
mš
);

359 
	`D
("¬—.lÚg™ude.max: %f\n", 
my¬—
.
lÚg™ude
.
max
);

360 
	`D
("¬—.Ït™ude.mš: %f\n", 
my¬—
.
Ït™ude
.
mš
);

361 
	`D
("¬—.Ït™ude.max: %f\n", 
my¬—
.
Ït™ude
.
max
);

362 
	`D
("\n");

369 ià(
Ï¡_´oûs£d
 &&

370 
ÃighbÜs
[
i
].
b™s
 =ğÃighbÜs[
Ï¡_´oûs£d
].bits &&

371 
ÃighbÜs
[
i
].
¡•
 =ğÃighbÜs[
Ï¡_´oûs£d
].step)

373 ià(
debugmsg
)

374 
	`D
("Skpšg…roûssšg oà%d, sama ´evious\n",
i
);

377 
couÁ
 +ğ
	`memb”sOfGeoHashBox
(
zobj
, 
ÃighbÜs
[
i
], 
ga
, 
lÚ
, 
Ït
, 
¿dius
);

378 
Ï¡_´oûs£d
 = 
i
;

380  
couÁ
;

381 
	}
}

384 
	$sÜt_gp_asc
(cÚ¡ *
a
, cÚ¡ *
b
) {

385 cÚ¡ 
geoPošt
 *
g·
 = 
a
, *
gpb
 = 
b
;

388 ià(
g·
->
di¡
 > 
gpb
->dist)

390 ià(
g·
->
di¡
 =ğ
gpb
->dist)

394 
	}
}

396 
	$sÜt_gp_desc
(cÚ¡ *
a
, cÚ¡ *
b
) {

397  -
	`sÜt_gp_asc
(
a
, 
b
);

398 
	}
}

405 
	$geßddCommªd
(
ş›Á
 *
c
) {

407 ià((
c
->
¬gc
 - 2) % 3 != 0) {

409 
	`addR•lyE¼Ü
(
c
, "syntaxƒrror. Try GEOADD key [x1] [y1] [name1] "

414 
–em’ts
 = (
c
->
¬gc
 - 2) / 3;

415 
¬gc
 = 2+
–em’ts
*2;

416 
robj
 **
¬gv
 = 
	`zÿÎoc
(
¬gc
*(robj*));

417 
¬gv
[0] = 
	`ü—‹RawSŒšgObjeù
("zadd",4);

418 
¬gv
[1] = 
c
->argv[1];

419 
	`šüRefCouÁ
(
¬gv
[1]);

424 
i
;

425 
i
 = 0; i < 
–em’ts
; i++) {

426 
xy
[2];

428 ià(
	`exŒaùLÚgL©OrR•ly
(
c
, (c->
¬gv
+2)+(
i
*3),
xy
è=ğ
C_ERR
) {

429 
i
 = 0; i < 
¬gc
; i++)

430 ià(
¬gv
[
i
]è
	`deüRefCouÁ
(argv[i]);

431 
	`zä“
(
¬gv
);

436 
GeoHashB™s
 
hash
;

437 
	`geohashEncodeWGS84
(
xy
[0], xy[1], 
GEO_STEP_MAX
, &
hash
);

438 
GeoHashFix52B™s
 
b™s
 = 
	`geohashAlign52B™s
(
hash
);

439 
robj
 *
scÜe
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
	`sdsäomlÚglÚg
(
b™s
));

440 
robj
 *
v®
 = 
c
->
¬gv
[2 + 
i
 * 3 + 2];

441 
¬gv
[2+
i
*2] = 
scÜe
;

442 
¬gv
[3+
i
*2] = 
v®
;

443 
	`šüRefCouÁ
(
v®
);

447 
	`»¶aûCl›ÁCommªdVeùÜ
(
c
,
¬gc
,
¬gv
);

448 
	`zaddCommªd
(
c
);

449 
	}
}

451 
	#SORT_NONE
 0

	)

452 
	#SORT_ASC
 1

	)

453 
	#SORT_DESC
 2

	)

455 
	#RADIUS_COORDS
 (1<<0è

	)

456 
	#RADIUS_MEMBER
 (1<<1è

	)

457 
	#RADIUS_NOSTORE
 (1<<2è

	)

462 
	$geÜadiusG’”ic
(
ş›Á
 *
c
, 
æags
) {

463 
robj
 *
key
 = 
c
->
¬gv
[1];

464 
robj
 *
¡Üekey
 = 
NULL
;

465 
¡Üedi¡
 = 0;

468 
robj
 *
zobj
 = 
NULL
;

469 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
, 
key
, 
sh¬ed
.
em±y¬¿y
)è=ğ
NULL
 ||

470 
	`checkTy³
(
c
, 
zobj
, 
OBJ_ZSET
)) {

475 
ba£_¬gs
;

476 
xy
[2] = { 0 };

477 ià(
æags
 & 
RADIUS_COORDS
) {

478 
ba£_¬gs
 = 6;

479 ià(
	`exŒaùLÚgL©OrR•ly
(
c
, c->
¬gv
 + 2, 
xy
è=ğ
C_ERR
)

481 } ià(
æags
 & 
RADIUS_MEMBER
) {

482 
ba£_¬gs
 = 5;

483 
robj
 *
memb”
 = 
c
->
¬gv
[2];

484 ià(
	`lÚgL©FromMemb”
(
zobj
, 
memb”
, 
xy
è=ğ
C_ERR
) {

485 
	`addR•lyE¼Ü
(
c
, "could‚ot decode„equested zset member");

489 
	`addR•lyE¼Ü
(
c
, "Unknown georadius searchype");

494 
¿dius_m‘”s
 = 0, 
cÚv”siÚ
 = 1;

495 ià((
¿dius_m‘”s
 = 
	`exŒaùDi¡ªûOrR•ly
(
c
, c->
¬gv
 + 
ba£_¬gs
 - 2,

496 &
cÚv”siÚ
)) < 0) {

501 
w™hdi¡
 = 0, 
w™hhash
 = 0, 
w™hcoÜds
 = 0;

502 
sÜt
 = 
SORT_NONE
;

503 
couÁ
 = 0;

504 ià(
c
->
¬gc
 > 
ba£_¬gs
) {

505 
»maššg
 = 
c
->
¬gc
 - 
ba£_¬gs
;

506 
i
 = 0; i < 
»maššg
; i++) {

507 *
¬g
 = 
c
->
¬gv
[
ba£_¬gs
 + 
i
]->
±r
;

508 ià(!
	`¡rÿ£cmp
(
¬g
, "withdist")) {

509 
w™hdi¡
 = 1;

510 } ià(!
	`¡rÿ£cmp
(
¬g
, "withhash")) {

511 
w™hhash
 = 1;

512 } ià(!
	`¡rÿ£cmp
(
¬g
, "withcoord")) {

513 
w™hcoÜds
 = 1;

514 } ià(!
	`¡rÿ£cmp
(
¬g
, "asc")) {

515 
sÜt
 = 
SORT_ASC
;

516 } ià(!
	`¡rÿ£cmp
(
¬g
, "desc")) {

517 
sÜt
 = 
SORT_DESC
;

518 } ià(!
	`¡rÿ£cmp
(
¬g
, "couÁ"è&& (
i
+1è< 
»maššg
) {

519 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
ba£_¬gs
+
i
+1],

520 &
couÁ
, 
NULL
è!ğ
C_OK
) ;

521 ià(
couÁ
 <= 0) {

522 
	`addR•lyE¼Ü
(
c
,"COUNT must be > 0");

525 
i
++;

526 } ià(!
	`¡rÿ£cmp
(
¬g
, "store") &&

527 (
i
+1è< 
»maššg
 &&

528 !(
æags
 & 
RADIUS_NOSTORE
))

530 
¡Üekey
 = 
c
->
¬gv
[
ba£_¬gs
+
i
+1];

531 
¡Üedi¡
 = 0;

532 
i
++;

533 } ià(!
	`¡rÿ£cmp
(
¬g
, "storedist") &&

534 (
i
+1è< 
»maššg
 &&

535 !(
æags
 & 
RADIUS_NOSTORE
))

537 
¡Üekey
 = 
c
->
¬gv
[
ba£_¬gs
+
i
+1];

538 
¡Üedi¡
 = 1;

539 
i
++;

541 
	`addR•ly
(
c
, 
sh¬ed
.
syÁax”r
);

548 ià(
¡Üekey
 && (
w™hdi¡
 || 
w™hhash
 || 
w™hcoÜds
)) {

549 
	`addR•lyE¼Ü
(
c
,

557 ià(
couÁ
 !ğ0 && 
sÜt
 =ğ
SORT_NONE
èsÜˆğ
SORT_ASC
;

560 
GeoHashRadius
 
geÜadius
 =

561 
	`geohashG‘A»asByRadiusWGS84
(
xy
[0], xy[1], 
¿dius_m‘”s
);

564 
geoA¼ay
 *
ga
 = 
	`geoA¼ayC»©e
();

565 
	`memb”sOfAÎNeighbÜs
(
zobj
, 
geÜadius
, 
xy
[0], xy[1], 
¿dius_m‘”s
, 
ga
);

568 ià(
ga
->
u£d
 =ğ0 && 
¡Üekey
 =ğ
NULL
) {

569 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

570 
	`geoA¼ayF»e
(
ga
);

574 
»suÉ_Ëngth
 = 
ga
->
u£d
;

575 
»tuºed_™ems
 = (
couÁ
 =ğ0 || 
»suÉ_Ëngth
 < count) ?

576 
»suÉ_Ëngth
 : 
couÁ
;

577 
İtiÚ_Ëngth
 = 0;

580 ià(
sÜt
 =ğ
SORT_ASC
) {

581 
	`qsÜt
(
ga
->
¬¿y
, 
»suÉ_Ëngth
, (
geoPošt
), 
sÜt_gp_asc
);

582 } ià(
sÜt
 =ğ
SORT_DESC
) {

583 
	`qsÜt
(
ga
->
¬¿y
, 
»suÉ_Ëngth
, (
geoPošt
), 
sÜt_gp_desc
);

586 ià(
¡Üekey
 =ğ
NULL
) {

591 ià(
w™hdi¡
)

592 
İtiÚ_Ëngth
++;

594 ià(
w™hcoÜds
)

595 
İtiÚ_Ëngth
++;

597 ià(
w™hhash
)

598 
İtiÚ_Ëngth
++;

604 
	`addR•lyA¼ayL’
(
c
, 
»tuºed_™ems
);

607 
i
;

608 
i
 = 0; i < 
»tuºed_™ems
; i++) {

609 
geoPošt
 *
gp
 = 
ga
->
¬¿y
+
i
;

610 
gp
->
di¡
 /ğ
cÚv”siÚ
;

615 ià(
İtiÚ_Ëngth
)

616 
	`addR•lyA¼ayL’
(
c
, 
İtiÚ_Ëngth
 + 1);

618 
	`addR•lyBulkSds
(
c
,
gp
->
memb”
);

619 
gp
->
memb”
 = 
NULL
;

621 ià(
w™hdi¡
)

622 
	`addR•lyDoubËDi¡ªû
(
c
, 
gp
->
di¡
);

624 ià(
w™hhash
)

625 
	`addR•lyLÚgLÚg
(
c
, 
gp
->
scÜe
);

627 ià(
w™hcoÜds
) {

628 
	`addR•lyA¼ayL’
(
c
, 2);

629 
	`addR•lyHumªLÚgDoubË
(
c
, 
gp
->
lÚg™ude
);

630 
	`addR•lyHumªLÚgDoubË
(
c
, 
gp
->
Ït™ude
);

635 
robj
 *
zobj
;

636 
z£t
 *
zs
;

637 
i
;

638 
size_t
 
max––’
 = 0;

640 ià(
»tuºed_™ems
) {

641 
zobj
 = 
	`ü—‹Z£tObjeù
();

642 
zs
 = 
zobj
->
±r
;

645 
i
 = 0; i < 
»tuºed_™ems
; i++) {

646 
zskli¡Node
 *
znode
;

647 
geoPošt
 *
gp
 = 
ga
->
¬¿y
+
i
;

648 
gp
->
di¡
 /ğ
cÚv”siÚ
;

649 
scÜe
 = 
¡Üedi¡
 ? 
gp
->
di¡
 : gp->score;

650 
size_t
 
––’
 = 
	`sd¦’
(
gp
->
memb”
);

652 ià(
max––’
 < 
––’
) maxelelen =ƒlelen;

653 
znode
 = 
	`z¦In£¹
(
zs
->
z¦
,
scÜe
,
gp
->
memb”
);

654 
	`£rv”As£¹
(
	`diùAdd
(
zs
->
diù
,
gp
->
memb”
,&
znode
->
scÜe
è=ğ
DICT_OK
);

655 
gp
->
memb”
 = 
NULL
;

658 ià(
»tuºed_™ems
) {

659 
	`z£tCÚv”tToZli¡IfN“ded
(
zobj
,
max––’
);

660 
	`£tKey
(
c
,c->
db
,
¡Üekey
,
zobj
);

661 
	`deüRefCouÁ
(
zobj
);

662 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,"geÜadius¡Üe",
¡Üekey
,

663 
c
->
db
->
id
);

664 
£rv”
.
dœty
 +ğ
»tuºed_™ems
;

665 } ià(
	`dbD–‘e
(
c
->
db
,
¡Üekey
)) {

666 
	`sigÇlModif›dKey
(
c
,c->
db
,
¡Üekey
);

667 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
¡Üekey
,
c
->
db
->
id
);

668 
£rv”
.
dœty
++;

670 
	`addR•lyLÚgLÚg
(
c
, 
»tuºed_™ems
);

672 
	`geoA¼ayF»e
(
ga
);

673 
	}
}

676 
	$geÜadiusCommªd
(
ş›Á
 *
c
) {

677 
	`geÜadiusG’”ic
(
c
, 
RADIUS_COORDS
);

678 
	}
}

681 
	$geÜadiusbymemb”Commªd
(
ş›Á
 *
c
) {

682 
	`geÜadiusG’”ic
(
c
, 
RADIUS_MEMBER
);

683 
	}
}

686 
	$geÜadiu¤oCommªd
(
ş›Á
 *
c
) {

687 
	`geÜadiusG’”ic
(
c
, 
RADIUS_COORDS
|
RADIUS_NOSTORE
);

688 
	}
}

691 
	$geÜadiusbymemb”roCommªd
(
ş›Á
 *
c
) {

692 
	`geÜadiusG’”ic
(
c
, 
RADIUS_MEMBER
|
RADIUS_NOSTORE
);

693 
	}
}

699 
	$geohashCommªd
(
ş›Á
 *
c
) {

700 *
geßÍhab‘
= "0123456789bcdefghjkmnpqrstuvwxyz";

701 
j
;

704 
robj
 *
zobj
 = 
	`lookupKeyR—d
(
c
->
db
, c->
¬gv
[1]);

705 ià(
zobj
 && 
	`checkTy³
(
c
, zobj, 
OBJ_ZSET
)) ;

709 
	`addR•lyA¼ayL’
(
c
,c->
¬gc
-2);

710 
j
 = 2; j < 
c
->
¬gc
; j++) {

711 
scÜe
;

712 ià(!
zobj
 || 
	`z£tScÜe
(zobj, 
c
->
¬gv
[
j
]->
±r
, &
scÜe
è=ğ
C_ERR
) {

713 
	`addR•lyNuÎ
(
c
);

722 
xy
[2];

723 ià(!
	`decodeGeohash
(
scÜe
,
xy
)) {

724 
	`addR•lyNuÎ
(
c
);

729 
GeoHashRªge
 
r
[2];

730 
GeoHashB™s
 
hash
;

731 
r
[0].
mš
 = -180;

732 
r
[0].
max
 = 180;

733 
r
[1].
mš
 = -90;

734 
r
[1].
max
 = 90;

735 
	`geohashEncode
(&
r
[0],&r[1],
xy
[0],xy[1],26,&
hash
);

737 
buf
[12];

738 
i
;

739 
i
 = 0; i < 11; i++) {

740 
idx
;

741 ià(
i
 == 10) {

745 
idx
 = 0;

747 
idx
 = (
hash
.
b™s
 >> (52-((
i
+1)*5))) & 0x1f;

749 
buf
[
i
] = 
geßÍhab‘
[
idx
];

751 
buf
[11] = '\0';

752 
	`addR•lyBulkCBufãr
(
c
,
buf
,11);

755 
	}
}

761 
	$geİosCommªd
(
ş›Á
 *
c
) {

762 
j
;

765 
robj
 *
zobj
 = 
	`lookupKeyR—d
(
c
->
db
, c->
¬gv
[1]);

766 ià(
zobj
 && 
	`checkTy³
(
c
, zobj, 
OBJ_ZSET
)) ;

770 
	`addR•lyA¼ayL’
(
c
,c->
¬gc
-2);

771 
j
 = 2; j < 
c
->
¬gc
; j++) {

772 
scÜe
;

773 ià(!
zobj
 || 
	`z£tScÜe
(zobj, 
c
->
¬gv
[
j
]->
±r
, &
scÜe
è=ğ
C_ERR
) {

774 
	`addR•lyNuÎA¼ay
(
c
);

777 
xy
[2];

778 ià(!
	`decodeGeohash
(
scÜe
,
xy
)) {

779 
	`addR•lyNuÎA¼ay
(
c
);

782 
	`addR•lyA¼ayL’
(
c
,2);

783 
	`addR•lyHumªLÚgDoubË
(
c
,
xy
[0]);

784 
	`addR•lyHumªLÚgDoubË
(
c
,
xy
[1]);

787 
	}
}

794 
	$geodi¡Commªd
(
ş›Á
 *
c
) {

795 
to_m‘”
 = 1;

798 ià(
c
->
¬gc
 == 5) {

799 
to_m‘”
 = 
	`exŒaùUn™OrR•ly
(
c
,c->
¬gv
[4]);

800 ià(
to_m‘”
 < 0) ;

801 } ià(
c
->
¬gc
 > 5) {

802 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

807 
robj
 *
zobj
 = 
NULL
;

808 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
, c->
¬gv
[1], 
sh¬ed
.
nuÎ
[c->
»¥
]))

809 =ğ
NULL
 || 
	`checkTy³
(
c
, 
zobj
, 
OBJ_ZSET
)) ;

812 
scÜe1
, 
scÜe2
, 
xyxy
[4];

813 ià(
	`z£tScÜe
(
zobj
, 
c
->
¬gv
[2]->
±r
, &
scÜe1
è=ğ
C_ERR
 ||

814 
	`z£tScÜe
(
zobj
, 
c
->
¬gv
[3]->
±r
, &
scÜe2
è=ğ
C_ERR
)

816 
	`addR•lyNuÎ
(
c
);

821 ià(!
	`decodeGeohash
(
scÜe1
,
xyxy
è|| !decodeGeohash(
scÜe2
,xyxy+2))

822 
	`addR•lyNuÎ
(
c
);

824 
	`addR•lyDoubËDi¡ªû
(
c
,

825 
	`geohashG‘Di¡ªû
(
xyxy
[0],xyxy[1],xyxy[2],xyxy[3]è/ 
to_m‘”
);

826 
	}
}

	@geo.h

1 #iâdeà
__GEO_H__


2 
	#__GEO_H__


	)

4 
	~"£rv”.h
"

8 
	sgeoPošt
 {

9 
	mlÚg™ude
;

10 
	mÏt™ude
;

11 
	mdi¡
;

12 
	mscÜe
;

13 *
	mmemb”
;

14 } 
	tgeoPošt
;

16 
	sgeoA¼ay
 {

17 
geoPošt
 *
	m¬¿y
;

18 
size_t
 
	mbuck‘s
;

19 
size_t
 
	mu£d
;

20 } 
	tgeoA¼ay
;

	@geohash.c

31 
	~"geohash.h
"

52 
šlše
 
ušt64_t
 
	$š‹¾—ve64
(
ušt32_t
 
xlo
, ušt32_ˆ
ylo
) {

53 cÚ¡ 
ušt64_t
 
B
[] = {0x5555555555555555ULL, 0x3333333333333333ULL,

56 cÚ¡ 
S
[] = {1, 2, 4, 8, 16};

58 
ušt64_t
 
x
 = 
xlo
;

59 
ušt64_t
 
y
 = 
ylo
;

61 
x
 = (x | (x << 
S
[4])è& 
B
[4];

62 
y
 = (y | (y << 
S
[4])è& 
B
[4];

64 
x
 = (x | (x << 
S
[3])è& 
B
[3];

65 
y
 = (y | (y << 
S
[3])è& 
B
[3];

67 
x
 = (x | (x << 
S
[2])è& 
B
[2];

68 
y
 = (y | (y << 
S
[2])è& 
B
[2];

70 
x
 = (x | (x << 
S
[1])è& 
B
[1];

71 
y
 = (y | (y << 
S
[1])è& 
B
[1];

73 
x
 = (x | (x << 
S
[0])è& 
B
[0];

74 
y
 = (y | (y << 
S
[0])è& 
B
[0];

76  
x
 | (
y
 << 1);

77 
	}
}

82 
šlše
 
ušt64_t
 
	$deš‹¾—ve64
(
ušt64_t
 
š‹¾—ved
) {

83 cÚ¡ 
ušt64_t
 
B
[] = {0x5555555555555555ULL, 0x3333333333333333ULL,

86 cÚ¡ 
S
[] = {0, 1, 2, 4, 8, 16};

88 
ušt64_t
 
x
 = 
š‹¾—ved
;

89 
ušt64_t
 
y
 = 
š‹¾—ved
 >> 1;

91 
x
 = (x | (x >> 
S
[0])è& 
B
[0];

92 
y
 = (y | (y >> 
S
[0])è& 
B
[0];

94 
x
 = (x | (x >> 
S
[1])è& 
B
[1];

95 
y
 = (y | (y >> 
S
[1])è& 
B
[1];

97 
x
 = (x | (x >> 
S
[2])è& 
B
[2];

98 
y
 = (y | (y >> 
S
[2])è& 
B
[2];

100 
x
 = (x | (x >> 
S
[3])è& 
B
[3];

101 
y
 = (y | (y >> 
S
[3])è& 
B
[3];

103 
x
 = (x | (x >> 
S
[4])è& 
B
[4];

104 
y
 = (y | (y >> 
S
[4])è& 
B
[4];

106 
x
 = (x | (x >> 
S
[5])è& 
B
[5];

107 
y
 = (y | (y >> 
S
[5])è& 
B
[5];

109  
x
 | (
y
 << 32);

110 
	}
}

112 
	$geohashG‘CoÜdRªge
(
GeoHashRªge
 *
lÚg_¿nge
, GeoHashRªg*
Ït_¿nge
) {

115 
lÚg_¿nge
->
max
 = 
GEO_LONG_MAX
;

116 
lÚg_¿nge
->
mš
 = 
GEO_LONG_MIN
;

117 
Ït_¿nge
->
max
 = 
GEO_LAT_MAX
;

118 
Ït_¿nge
->
mš
 = 
GEO_LAT_MIN
;

119 
	}
}

121 
	$geohashEncode
(cÚ¡ 
GeoHashRªge
 *
lÚg_¿nge
, cÚ¡ GeoHashRªg*
Ït_¿nge
,

122 
lÚg™ude
, 
Ït™ude
, 
ušt8_t
 
¡•
,

123 
GeoHashB™s
 *
hash
) {

125 ià(
hash
 =ğ
NULL
 || 
¡•
 > 32 || step == 0 ||

126 
	`RANGEPISZERO
(
Ït_¿nge
è|| RANGEPISZERO(
lÚg_¿nge
))  0;

130 ià(
lÚg™ude
 > 
GEO_LONG_MAX
 ||†Úg™ud< 
GEO_LONG_MIN
 ||

131 
Ït™ude
 > 
GEO_LAT_MAX
 ||†©™ud< 
GEO_LAT_MIN
)  0;

133 
hash
->
b™s
 = 0;

134 
hash
->
¡•
 = step;

136 ià(
Ït™ude
 < 
Ït_¿nge
->
mš
 ||†©™ud>†©_¿nge->
max
 ||

137 
lÚg™ude
 < 
lÚg_¿nge
->
mš
 ||†Úg™ud>†Úg_¿nge->
max
) {

141 
Ït_off£t
 =

142 (
Ït™ude
 - 
Ït_¿nge
->
mš
è/ (Ït_¿nge->
max
 -†at_range->min);

143 
lÚg_off£t
 =

144 (
lÚg™ude
 - 
lÚg_¿nge
->
mš
è/ (lÚg_¿nge->
max
 -†ong_range->min);

147 
Ït_off£t
 *ğ(1ULL << 
¡•
);

148 
lÚg_off£t
 *ğ(1ULL << 
¡•
);

149 
hash
->
b™s
 = 
	`š‹¾—ve64
(
Ït_off£t
, 
lÚg_off£t
);

151 
	}
}

153 
	$geohashEncodeTy³
(
lÚg™ude
, 
Ït™ude
, 
ušt8_t
 
¡•
, 
GeoHashB™s
 *
hash
) {

154 
GeoHashRªge
 
r
[2] = {{0}};

155 
	`geohashG‘CoÜdRªge
(&
r
[0], &r[1]);

156  
	`geohashEncode
(&
r
[0], &r[1], 
lÚg™ude
, 
Ït™ude
, 
¡•
, 
hash
);

157 
	}
}

159 
	$geohashEncodeWGS84
(
lÚg™ude
, 
Ït™ude
, 
ušt8_t
 
¡•
,

160 
GeoHashB™s
 *
hash
) {

161  
	`geohashEncodeTy³
(
lÚg™ude
, 
Ït™ude
, 
¡•
, 
hash
);

162 
	}
}

164 
	$geohashDecode
(cÚ¡ 
GeoHashRªge
 
lÚg_¿nge
, cÚ¡ GeoHashRªg
Ït_¿nge
,

165 cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
) {

166 ià(
	`HASHISZERO
(
hash
è|| 
NULL
 =ğ
¬—
 || 
	`RANGEISZERO
(
Ït_¿nge
) ||

167 
	`RANGEISZERO
(
lÚg_¿nge
)) {

171 
¬—
->
hash
 = hash;

172 
ušt8_t
 
¡•
 = 
hash
.step;

173 
ušt64_t
 
hash_£p
 = 
	`deš‹¾—ve64
(
hash
.
b™s
);

175 
Ït_sÿË
 = 
Ït_¿nge
.
max
 -†©_¿nge.
mš
;

176 
lÚg_sÿË
 = 
lÚg_¿nge
.
max
 -†Úg_¿nge.
mš
;

178 
ušt32_t
 
©o
 = 
hash_£p
;

179 
ušt32_t
 
Úo
 = 
hash_£p
 >> 32;

184 
¬—
->
Ït™ude
.
mš
 =

185 
Ït_¿nge
.
mš
 + (
©o
 * 1.0 / (1uÎ << 
¡•
)è* 
Ït_sÿË
;

186 
¬—
->
Ït™ude
.
max
 =

187 
Ït_¿nge
.
mš
 + ((
©o
 + 1è* 1.0 / (1uÎ << 
¡•
)è* 
Ït_sÿË
;

188 
¬—
->
lÚg™ude
.
mš
 =

189 
lÚg_¿nge
.
mš
 + (
Úo
 * 1.0 / (1uÎ << 
¡•
)è* 
lÚg_sÿË
;

190 
¬—
->
lÚg™ude
.
max
 =

191 
lÚg_¿nge
.
mš
 + ((
Úo
 + 1è* 1.0 / (1uÎ << 
¡•
)è* 
lÚg_sÿË
;

194 
	}
}

196 
	$geohashDecodeTy³
(cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
) {

197 
GeoHashRªge
 
r
[2] = {{0}};

198 
	`geohashG‘CoÜdRªge
(&
r
[0], &r[1]);

199  
	`geohashDecode
(
r
[0],„[1], 
hash
, 
¬—
);

200 
	}
}

202 
	$geohashDecodeWGS84
(cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
) {

203  
	`geohashDecodeTy³
(
hash
, 
¬—
);

204 
	}
}

206 
	$geohashDecodeA»aToLÚgL©
(cÚ¡ 
GeoHashA»a
 *
¬—
, *
xy
) {

207 ià(!
xy
)  0;

208 
xy
[0] = (
¬—
->
lÚg™ude
.
mš
 +‡»a->lÚg™ude.
max
) / 2;

209 ià(
xy
[0] > 
GEO_LONG_MAX
) xy[0] = GEO_LONG_MAX;

210 ià(
xy
[0] < 
GEO_LONG_MIN
) xy[0] = GEO_LONG_MIN;

211 
xy
[1] = (
¬—
->
Ït™ude
.
mš
 +‡»a->Ït™ude.
max
) / 2;

212 ià(
xy
[1] > 
GEO_LAT_MAX
) xy[1] = GEO_LAT_MAX;

213 ià(
xy
[1] < 
GEO_LAT_MIN
) xy[1] = GEO_LAT_MIN;

215 
	}
}

217 
	$geohashDecodeToLÚgL©Ty³
(cÚ¡ 
GeoHashB™s
 
hash
, *
xy
) {

218 
GeoHashA»a
 
¬—
 = {{0}};

219 ià(!
xy
 || !
	`geohashDecodeTy³
(
hash
, &
¬—
))

221  
	`geohashDecodeA»aToLÚgL©
(&
¬—
, 
xy
);

222 
	}
}

224 
	$geohashDecodeToLÚgL©WGS84
(cÚ¡ 
GeoHashB™s
 
hash
, *
xy
) {

225  
	`geohashDecodeToLÚgL©Ty³
(
hash
, 
xy
);

226 
	}
}

228 
	$geohash_move_x
(
GeoHashB™s
 *
hash
, 
št8_t
 
d
) {

229 ià(
d
 == 0)

232 
ušt64_t
 
x
 = 
hash
->
b™s
 & 0xaaaaaaaaaaaaaaaaULL;

233 
ušt64_t
 
y
 = 
hash
->
b™s
 & 0x5555555555555555ULL;

235 
ušt64_t
 
zz
 = 0x5555555555555555ULL >> (64 - 
hash
->
¡•
 * 2);

237 ià(
d
 > 0) {

238 
x
 = x + (
zz
 + 1);

240 
x
 = x | 
zz
;

241 
x
 = x - (
zz
 + 1);

244 
x
 &ğ(0x¯¯¯¯¯¯¯¯ULL >> (64 - 
hash
->
¡•
 * 2));

245 
hash
->
b™s
 = (
x
 | 
y
);

246 
	}
}

248 
	$geohash_move_y
(
GeoHashB™s
 *
hash
, 
št8_t
 
d
) {

249 ià(
d
 == 0)

252 
ušt64_t
 
x
 = 
hash
->
b™s
 & 0xaaaaaaaaaaaaaaaaULL;

253 
ušt64_t
 
y
 = 
hash
->
b™s
 & 0x5555555555555555ULL;

255 
ušt64_t
 
zz
 = 0x¯¯¯¯¯¯¯¯ULL >> (64 - 
hash
->
¡•
 * 2);

256 ià(
d
 > 0) {

257 
y
 = y + (
zz
 + 1);

259 
y
 = y | 
zz
;

260 
y
 = y - (
zz
 + 1);

262 
y
 &ğ(0x5555555555555555ULL >> (64 - 
hash
->
¡•
 * 2));

263 
hash
->
b™s
 = (
x
 | 
y
);

264 
	}
}

266 
	$geohashNeighbÜs
(cÚ¡ 
GeoHashB™s
 *
hash
, 
GeoHashNeighbÜs
 *
ÃighbÜs
) {

267 
ÃighbÜs
->
—¡
 = *
hash
;

268 
ÃighbÜs
->
we¡
 = *
hash
;

269 
ÃighbÜs
->
nÜth
 = *
hash
;

270 
ÃighbÜs
->
south
 = *
hash
;

271 
ÃighbÜs
->
south_—¡
 = *
hash
;

272 
ÃighbÜs
->
south_we¡
 = *
hash
;

273 
ÃighbÜs
->
nÜth_—¡
 = *
hash
;

274 
ÃighbÜs
->
nÜth_we¡
 = *
hash
;

276 
	`geohash_move_x
(&
ÃighbÜs
->
—¡
, 1);

277 
	`geohash_move_y
(&
ÃighbÜs
->
—¡
, 0);

279 
	`geohash_move_x
(&
ÃighbÜs
->
we¡
, -1);

280 
	`geohash_move_y
(&
ÃighbÜs
->
we¡
, 0);

282 
	`geohash_move_x
(&
ÃighbÜs
->
south
, 0);

283 
	`geohash_move_y
(&
ÃighbÜs
->
south
, -1);

285 
	`geohash_move_x
(&
ÃighbÜs
->
nÜth
, 0);

286 
	`geohash_move_y
(&
ÃighbÜs
->
nÜth
, 1);

288 
	`geohash_move_x
(&
ÃighbÜs
->
nÜth_we¡
, -1);

289 
	`geohash_move_y
(&
ÃighbÜs
->
nÜth_we¡
, 1);

291 
	`geohash_move_x
(&
ÃighbÜs
->
nÜth_—¡
, 1);

292 
	`geohash_move_y
(&
ÃighbÜs
->
nÜth_—¡
, 1);

294 
	`geohash_move_x
(&
ÃighbÜs
->
south_—¡
, 1);

295 
	`geohash_move_y
(&
ÃighbÜs
->
south_—¡
, -1);

297 
	`geohash_move_x
(&
ÃighbÜs
->
south_we¡
, -1);

298 
	`geohash_move_y
(&
ÃighbÜs
->
south_we¡
, -1);

299 
	}
}

	@geohash.h

32 #iâdeà
GEOHASH_H_


33 
	#GEOHASH_H_


	)

35 
	~<¡ddef.h
>

36 
	~<¡dšt.h
>

37 
	~<¡dšt.h
>

39 #ià
defšed
(
__ılu¥lus
)

43 
	#HASHISZERO
(
r
è(!Ô).
b™s
 && !Ô).
¡•
)

	)

44 
	#RANGEISZERO
(
r
è(!Ô).
max
 && !Ô).
mš
)

	)

45 
	#RANGEPISZERO
(
r
èÔ =ğ
NULL
 || 
	`RANGEISZERO
(*r))

	)

47 
	#GEO_STEP_MAX
 26

	)

50 
	#GEO_LAT_MIN
 -85.05112878

	)

51 
	#GEO_LAT_MAX
 85.05112878

	)

52 
	#GEO_LONG_MIN
 -180

	)

53 
	#GEO_LONG_MAX
 180

	)

56 
GEOHASH_NORTH
 = 0,

57 
GEOHASH_EAST
,

58 
GEOHASH_WEST
,

59 
GEOHASH_SOUTH
,

60 
GEOHASH_SOUTH_WEST
,

61 
GEOHASH_SOUTH_EAST
,

62 
GEOHASH_NORT_WEST
,

63 
GEOHASH_NORT_EAST


64 } 
	tGeoDœeùiÚ
;

67 
ušt64_t
 
b™s
;

68 
ušt8_t
 
¡•
;

69 } 
	tGeoHashB™s
;

72 
mš
;

73 
max
;

74 } 
	tGeoHashRªge
;

77 
GeoHashB™s
 
hash
;

78 
GeoHashRªge
 
lÚg™ude
;

79 
GeoHashRªge
 
Ït™ude
;

80 } 
	tGeoHashA»a
;

83 
GeoHashB™s
 
nÜth
;

84 
GeoHashB™s
 
—¡
;

85 
GeoHashB™s
 
we¡
;

86 
GeoHashB™s
 
south
;

87 
GeoHashB™s
 
nÜth_—¡
;

88 
GeoHashB™s
 
south_—¡
;

89 
GeoHashB™s
 
nÜth_we¡
;

90 
GeoHashB™s
 
south_we¡
;

91 } 
	tGeoHashNeighbÜs
;

97 
geohashG‘CoÜdRªge
(
GeoHashRªge
 *
lÚg_¿nge
, GeoHashRªg*
Ït_¿nge
);

98 
geohashEncode
(cÚ¡ 
GeoHashRªge
 *
lÚg_¿nge
, cÚ¡ GeoHashRªg*
Ït_¿nge
,

99 
lÚg™ude
, 
Ït™ude
, 
ušt8_t
 
¡•
,

100 
GeoHashB™s
 *
hash
);

101 
geohashEncodeTy³
(
lÚg™ude
, 
Ït™ude
,

102 
ušt8_t
 
¡•
, 
GeoHashB™s
 *
hash
);

103 
geohashEncodeWGS84
(
lÚg™ude
, 
Ït™ude
, 
ušt8_t
 
¡•
,

104 
GeoHashB™s
 *
hash
);

105 
geohashDecode
(cÚ¡ 
GeoHashRªge
 
lÚg_¿nge
, cÚ¡ GeoHashRªg
Ït_¿nge
,

106 cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
);

107 
geohashDecodeTy³
(cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
);

108 
geohashDecodeWGS84
(cÚ¡ 
GeoHashB™s
 
hash
, 
GeoHashA»a
 *
¬—
);

109 
geohashDecodeA»aToLÚgL©
(cÚ¡ 
GeoHashA»a
 *
¬—
, *
xy
);

110 
geohashDecodeToLÚgL©Ty³
(cÚ¡ 
GeoHashB™s
 
hash
, *
xy
);

111 
geohashDecodeToLÚgL©WGS84
(cÚ¡ 
GeoHashB™s
 
hash
, *
xy
);

112 
geohashDecodeToLÚgL©M”ÿtÜ
(cÚ¡ 
GeoHashB™s
 
hash
, *
xy
);

113 
geohashNeighbÜs
(cÚ¡ 
GeoHashB™s
 *
hash
, 
GeoHashNeighbÜs
 *
ÃighbÜs
);

115 #ià
defšed
(
__ılu¥lus
)

	@geohash_helper.c

37 
	~"fmaüos.h
"

38 
	~"geohash_h–³r.h
"

39 
	~"debugmaüo.h
"

40 
	~<m©h.h
>

42 
	#D_R
 (
M_PI
 / 180.0)

	)

43 
	#R_MAJOR
 6378137.0

	)

44 
	#R_MINOR
 6356752.3142

	)

45 
	#RATIO
 (
R_MINOR
 / 
R_MAJOR
)

	)

46 
	#ECCENT
 (
	`sq¹
(1.0 - (
RATIO
 *RATIO)))

	)

47 
	#COM
 (0.5 * 
ECCENT
)

	)

50 cÚ¡ 
	gDEG_TO_RAD
 = 0.017453292519943295769236907684886;

52 cÚ¡ 
	gEARTH_RADIUS_IN_METERS
 = 6372797.560856;

54 cÚ¡ 
	gMERCATOR_MAX
 = 20037726.37;

55 cÚ¡ 
	gMERCATOR_MIN
 = -20037726.37;

57 
šlše
 
	$deg_¿d
(
ªg
è{ ‡ng * 
D_R
; 
	}
}

58 
šlše
 
	$¿d_deg
(
ªg
è{ ‡ng / 
D_R
; 
	}
}

62 
ušt8_t
 
	$geohashE¡im©eS‹psByRadius
(
¿nge_m‘”s
, 
Ït
) {

63 ià(
¿nge_m‘”s
 == 0)  26;

64 
¡•
 = 1;

65 
¿nge_m‘”s
 < 
MERCATOR_MAX
) {

66 
¿nge_m‘”s
 *= 2;

67 
¡•
++;

69 
¡•
 -= 2;

74 ià(
Ït
 > 66 ||†at < -66) {

75 
¡•
--;

76 ià(
Ït
 > 80 ||†© < -80è
¡•
--;

80 ià(
¡•
 < 1) step = 1;

81 ià(
¡•
 > 26) step = 26;

82  
¡•
;

83 
	}
}

103 
	$geohashBoundšgBox
(
lÚg™ude
, 
Ït™ude
, 
¿dius_m‘”s
,

104 *
bounds
) {

105 ià(!
bounds
)  0;

107 
bounds
[0] = 
lÚg™ude
 - 
	`¿d_deg
(
¿dius_m‘”s
/
EARTH_RADIUS_IN_METERS
/
	`cos
(
	`deg_¿d
(
Ït™ude
)));

108 
bounds
[2] = 
lÚg™ude
 + 
	`¿d_deg
(
¿dius_m‘”s
/
EARTH_RADIUS_IN_METERS
/
	`cos
(
	`deg_¿d
(
Ït™ude
)));

109 
bounds
[1] = 
Ït™ude
 - 
	`¿d_deg
(
¿dius_m‘”s
/
EARTH_RADIUS_IN_METERS
);

110 
bounds
[3] = 
Ït™ude
 + 
	`¿d_deg
(
¿dius_m‘”s
/
EARTH_RADIUS_IN_METERS
);

112 
	}
}

116 
GeoHashRadius
 
	$geohashG‘A»asByRadius
(
lÚg™ude
, 
Ït™ude
, 
¿dius_m‘”s
) {

117 
GeoHashRªge
 
lÚg_¿nge
, 
Ït_¿nge
;

118 
GeoHashRadius
 
¿dius
;

119 
GeoHashB™s
 
hash
;

120 
GeoHashNeighbÜs
 
ÃighbÜs
;

121 
GeoHashA»a
 
¬—
;

122 
mš_lÚ
, 
max_lÚ
, 
mš_Ït
, 
max_Ït
;

123 
bounds
[4];

124 
¡•s
;

126 
	`geohashBoundšgBox
(
lÚg™ude
, 
Ït™ude
, 
¿dius_m‘”s
, 
bounds
);

127 
mš_lÚ
 = 
bounds
[0];

128 
mš_Ït
 = 
bounds
[1];

129 
max_lÚ
 = 
bounds
[2];

130 
max_Ït
 = 
bounds
[3];

132 
¡•s
 = 
	`geohashE¡im©eS‹psByRadius
(
¿dius_m‘”s
,
Ït™ude
);

134 
	`geohashG‘CoÜdRªge
(&
lÚg_¿nge
,&
Ït_¿nge
);

135 
	`geohashEncode
(&
lÚg_¿nge
,&
Ït_¿nge
,
lÚg™ude
,
Ït™ude
,
¡•s
,&
hash
);

136 
	`geohashNeighbÜs
(&
hash
,&
ÃighbÜs
);

137 
	`geohashDecode
(
lÚg_¿nge
,
Ït_¿nge
,
hash
,&
¬—
);

144 
deü—£_¡•
 = 0;

146 
GeoHashA»a
 
nÜth
, 
south
, 
—¡
, 
we¡
;

148 
	`geohashDecode
(
lÚg_¿nge
, 
Ït_¿nge
, 
ÃighbÜs
.
nÜth
, &north);

149 
	`geohashDecode
(
lÚg_¿nge
, 
Ït_¿nge
, 
ÃighbÜs
.
south
, &south);

150 
	`geohashDecode
(
lÚg_¿nge
, 
Ït_¿nge
, 
ÃighbÜs
.
—¡
, &east);

151 
	`geohashDecode
(
lÚg_¿nge
, 
Ït_¿nge
, 
ÃighbÜs
.
we¡
, &west);

153 ià(
	`geohashG‘Di¡ªû
(
lÚg™ude
,
Ït™ude
,lÚg™ude,
nÜth
.Ït™ude.
max
)

154 < 
¿dius_m‘”s
è
deü—£_¡•
 = 1;

155 ià(
	`geohashG‘Di¡ªû
(
lÚg™ude
,
Ït™ude
,lÚg™ude,
south
.Ït™ude.
mš
)

156 < 
¿dius_m‘”s
è
deü—£_¡•
 = 1;

157 ià(
	`geohashG‘Di¡ªû
(
lÚg™ude
,
Ït™ude
,
—¡
.lÚg™ude.
max
,latitude)

158 < 
¿dius_m‘”s
è
deü—£_¡•
 = 1;

159 ià(
	`geohashG‘Di¡ªû
(
lÚg™ude
,
Ït™ude
,
we¡
.lÚg™ude.
mš
,latitude)

160 < 
¿dius_m‘”s
è
deü—£_¡•
 = 1;

163 ià(
¡•s
 > 1 && 
deü—£_¡•
) {

164 
¡•s
--;

165 
	`geohashEncode
(&
lÚg_¿nge
,&
Ït_¿nge
,
lÚg™ude
,
Ït™ude
,
¡•s
,&
hash
);

166 
	`geohashNeighbÜs
(&
hash
,&
ÃighbÜs
);

167 
	`geohashDecode
(
lÚg_¿nge
,
Ït_¿nge
,
hash
,&
¬—
);

171 ià(
¡•s
 >= 2) {

172 ià(
¬—
.
Ït™ude
.
mš
 < 
mš_Ït
) {

173 
	`GZERO
(
ÃighbÜs
.
south
);

174 
	`GZERO
(
ÃighbÜs
.
south_we¡
);

175 
	`GZERO
(
ÃighbÜs
.
south_—¡
);

177 ià(
¬—
.
Ït™ude
.
max
 > 
max_Ït
) {

178 
	`GZERO
(
ÃighbÜs
.
nÜth
);

179 
	`GZERO
(
ÃighbÜs
.
nÜth_—¡
);

180 
	`GZERO
(
ÃighbÜs
.
nÜth_we¡
);

182 ià(
¬—
.
lÚg™ude
.
mš
 < 
mš_lÚ
) {

183 
	`GZERO
(
ÃighbÜs
.
we¡
);

184 
	`GZERO
(
ÃighbÜs
.
south_we¡
);

185 
	`GZERO
(
ÃighbÜs
.
nÜth_we¡
);

187 ià(
¬—
.
lÚg™ude
.
max
 > 
max_lÚ
) {

188 
	`GZERO
(
ÃighbÜs
.
—¡
);

189 
	`GZERO
(
ÃighbÜs
.
south_—¡
);

190 
	`GZERO
(
ÃighbÜs
.
nÜth_—¡
);

193 
¿dius
.
hash
 = hash;

194 
¿dius
.
ÃighbÜs
 =‚eighbors;

195 
¿dius
.
¬—
 =‡rea;

196  
¿dius
;

197 
	}
}

199 
GeoHashRadius
 
	$geohashG‘A»asByRadiusWGS84
(
lÚg™ude
, 
Ït™ude
,

200 
¿dius_m‘”s
) {

201  
	`geohashG‘A»asByRadius
(
lÚg™ude
, 
Ït™ude
, 
¿dius_m‘”s
);

202 
	}
}

204 
GeoHashFix52B™s
 
	$geohashAlign52B™s
(cÚ¡ 
GeoHashB™s
 
hash
) {

205 
ušt64_t
 
b™s
 = 
hash
.bits;

206 
b™s
 <<ğ(52 - 
hash
.
¡•
 * 2);

207  
b™s
;

208 
	}
}

211 
	$geohashG‘Di¡ªû
(
lÚ1d
, 
Ït1d
, 
lÚ2d
, 
Ït2d
) {

212 
Ït1r
, 
lÚ1r
, 
Ït2r
, 
lÚ2r
, 
u
, 
v
;

213 
Ït1r
 = 
	`deg_¿d
(
Ït1d
);

214 
lÚ1r
 = 
	`deg_¿d
(
lÚ1d
);

215 
Ït2r
 = 
	`deg_¿d
(
Ït2d
);

216 
lÚ2r
 = 
	`deg_¿d
(
lÚ2d
);

217 
u
 = 
	`sš
((
Ït2r
 - 
Ït1r
) / 2);

218 
v
 = 
	`sš
((
lÚ2r
 - 
lÚ1r
) / 2);

219  2.0 * 
EARTH_RADIUS_IN_METERS
 *

220 
	`asš
(
	`sq¹
(
u
 * u + 
	`cos
(
Ït1r
è* cos(
Ït2r
è* 
v
 * v));

221 
	}
}

223 
	$geohashG‘Di¡ªûIfInRadius
(
x1
, 
y1
,

224 
x2
, 
y2
, 
¿dius
,

225 *
di¡ªû
) {

226 *
di¡ªû
 = 
	`geohashG‘Di¡ªû
(
x1
, 
y1
, 
x2
, 
y2
);

227 ià(*
di¡ªû
 > 
¿dius
)  0;

229 
	}
}

231 
	$geohashG‘Di¡ªûIfInRadiusWGS84
(
x1
, 
y1
, 
x2
,

232 
y2
, 
¿dius
,

233 *
di¡ªû
) {

234  
	`geohashG‘Di¡ªûIfInRadius
(
x1
, 
y1
, 
x2
, 
y2
, 
¿dius
, 
di¡ªû
);

235 
	}
}

	@geohash_helper.h

32 #iâdeà
GEOHASH_HELPER_HPP_


33 
	#GEOHASH_HELPER_HPP_


	)

35 
	~"geohash.h
"

37 
	#GZERO
(
s
ès.
b™s
 = s.
¡•
 = 0;

	)

38 
	#GISZERO
(
s
è(!s.
b™s
 && !s.
¡•
)

	)

39 
	#GISNOTZERO
(
s
è(s.
b™s
 || s.
¡•
)

	)

41 
ušt64_t
 
	tGeoHashFix52B™s
;

42 
ušt64_t
 
	tGeoHashV¬B™s
;

45 
GeoHashB™s
 
	mhash
;

46 
GeoHashA»a
 
	m¬—
;

47 
GeoHashNeighbÜs
 
	mÃighbÜs
;

48 } 
	tGeoHashRadius
;

50 
GeoHashB™sCom·¿tÜ
(cÚ¡ 
GeoHashB™s
 *
a
, cÚ¡ GeoHashB™ *
b
);

51 
ušt8_t
 
geohashE¡im©eS‹psByRadius
(
¿nge_m‘”s
, 
Ït
);

52 
geohashBoundšgBox
(
lÚg™ude
, 
Ït™ude
, 
¿dius_m‘”s
,

53 *
bounds
);

54 
GeoHashRadius
 
geohashG‘A»asByRadius
(
lÚg™ude
,

55 
Ït™ude
, 
¿dius_m‘”s
);

56 
GeoHashRadius
 
geohashG‘A»asByRadiusWGS84
(
lÚg™ude
, 
Ït™ude
,

57 
¿dius_m‘”s
);

58 
GeoHashRadius
 
geohashG‘A»asByRadiusM”ÿtÜ
(
lÚg™ude
, 
Ït™ude
,

59 
¿dius_m‘”s
);

60 
GeoHashFix52B™s
 
geohashAlign52B™s
(cÚ¡ 
GeoHashB™s
 
hash
);

61 
geohashG‘Di¡ªû
(
lÚ1d
, 
Ït1d
,

62 
lÚ2d
, 
Ït2d
);

63 
geohashG‘Di¡ªûIfInRadius
(
x1
, 
y1
,

64 
x2
, 
y2
, 
¿dius
,

65 *
di¡ªû
);

66 
geohashG‘Di¡ªûIfInRadiusWGS84
(
x1
, 
y1
, 
x2
,

67 
y2
, 
¿dius
,

68 *
di¡ªû
);

	@gopher.c

30 
	~"£rv”.h
"

35 
	$addR•lyGİh”I‹m
(
ş›Á
 *
c
, cÚ¡ *
ty³
, cÚ¡ *
desü
,

36 cÚ¡ *
£ËùÜ
, cÚ¡ *
ho¡Çme
, 
pÜt
)

38 
sds
 
™em
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),"%s%s\t%s\t%s\t%i\r\n",

39 
ty³
, 
desü
,

40 
£ËùÜ
 ? selector : "(NULL)",

41 
ho¡Çme
 ? hostname : "(NULL)",

42 
pÜt
);

43 
	`addR•lyPrÙo
(
c
,
™em
,
	`sd¦’
(item));

44 
	`sdsä“
(
™em
);

45 
	}
}

51 
	$´oûssGİh”Reque¡
(
ş›Á
 *
c
) {

52 
robj
 *
keyÇme
 = 
c
->
¬gc
 =ğ0 ? 
	`ü—‹SŒšgObjeù
("/",1è: c->
¬gv
[0];

53 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,
keyÇme
);

56 ià(
o
 =ğ
NULL
 || o->
ty³
 !ğ
OBJ_STRING
) {

57 *
”r¡r
;

58 ià(
o
 =ğ
NULL
)

59 
”r¡r
 = "Error:‚o content‡the specified key";

61 
”r¡r
 = "Error: selected keyype is invalid "

63 
	`addR•lyGİh”I‹m
(
c
,"i",
”r¡r
,
NULL
,NULL,0);

64 
	`addR•lyGİh”I‹m
(
c
,"i","Redi Gİh” s”v”",
NULL
,NULL,0);

66 
	`addR•ly
(
c
,
o
);

73 ià(
c
->
¬gc
 =ğ0è
	`deüRefCouÁ
(
keyÇme
);

97 
	}
}

	@help.h

3 #iâdeà
__REDIS_HELP_H


4 
	#__REDIS_HELP_H


	)

6 *
	gcommªdGroups
[] = {

24 
	scommªdH–p
 {

25 *
	mÇme
;

26 *
	m·¿ms
;

27 *
	msumm¬y
;

28 
	mgroup
;

29 *
	msšû
;

30 } 
	gcommªdH–p
[] = {

	@hyperloglog.c

32 
	~"£rv”.h
"

34 
	~<¡dšt.h
>

35 
	~<m©h.h
>

182 
	shÎhdr
 {

183 
	mmagic
[4];

184 
ušt8_t
 
	m’codšg
;

185 
ušt8_t
 
	mnÙu£d
[3];

186 
ušt8_t
 
	mÿrd
[8];

187 
ušt8_t
 
	m»gi¡”s
[];

191 
	#HLL_INVALIDATE_CACHE
(
hdr
è(hdr)->
ÿrd
[7] |ğ(1<<7)

	)

192 
	#HLL_VALID_CACHE
(
hdr
è(((hdr)->
ÿrd
[7] & (1<<7)è=ğ0)

	)

194 
	#HLL_P
 14

	)

195 
	#HLL_Q
 (64-
HLL_P
è

	)

197 
	#HLL_REGISTERS
 (1<<
HLL_P
è

	)

198 
	#HLL_P_MASK
 (
HLL_REGISTERS
-1è

	)

199 
	#HLL_BITS
 6

	)

200 
	#HLL_REGISTER_MAX
 ((1<<
HLL_BITS
)-1)

	)

201 
	#HLL_HDR_SIZE
 (
hÎhdr
)

	)

202 
	#HLL_DENSE_SIZE
 (
HLL_HDR_SIZE
+((
HLL_REGISTERS
*
HLL_BITS
+7)/8))

	)

203 
	#HLL_DENSE
 0

	)

204 
	#HLL_SPARSE
 1

	)

205 
	#HLL_RAW
 255

	)

206 
	#HLL_MAX_ENCODING
 1

	)

208 *
	gšv®id_hÎ_”r
 = "-INVALIDOBJ Corrupted HLL object detected\r\n";

339 
	#HLL_DENSE_GET_REGISTER
(
rg‘
,
p
,
»gnum
) do { \

340 
ušt8_t
 *
_p
 = (ušt8_t*è
p
; \

341 
_by‹
 = 
»gnum
*
HLL_BITS
/8; \

342 
_fb
 = 
»gnum
*
HLL_BITS
&7; \

343 
_fb8
 = 8 - 
_fb
; \

344 
b0
 = 
_p
[
_by‹
]; \

345 
b1
 = 
_p
[
_by‹
+1]; \

346 
rg‘
 = ((
b0
 >> 
_fb
è| (
b1
 << 
_fb8
)è& 
HLL_REGISTER_MAX
; \

347 } 0)

	)

351 
	#HLL_DENSE_SET_REGISTER
(
p
,
»gnum
,
v®
) do { \

352 
ušt8_t
 *
_p
 = (ušt8_t*è
p
; \

353 
_by‹
 = 
»gnum
*
HLL_BITS
/8; \

354 
_fb
 = 
»gnum
*
HLL_BITS
&7; \

355 
_fb8
 = 8 - 
_fb
; \

356 
_v
 = 
v®
; \

357 
_p
[
_by‹
] &ğ~(
HLL_REGISTER_MAX
 << 
_fb
); \

358 
_p
[
_by‹
] |ğ
_v
 << 
_fb
; \

359 
_p
[
_by‹
+1] &ğ~(
HLL_REGISTER_MAX
 >> 
_fb8
); \

360 
_p
[
_by‹
+1] |ğ
_v
 >> 
_fb8
; \

361 } 0)

	)

365 
	#HLL_SPARSE_XZERO_BIT
 0x40

	)

366 
	#HLL_SPARSE_VAL_BIT
 0x80

	)

367 
	#HLL_SPARSE_IS_ZERO
(
p
è(((*Õ)è& 0xc0è=ğ0è

	)

368 
	#HLL_SPARSE_IS_XZERO
(
p
è(((*Õ)è& 0xc0è=ğ
HLL_SPARSE_XZERO_BIT
)

	)

369 
	#HLL_SPARSE_IS_VAL
(
p
è((*Õ)è& 
HLL_SPARSE_VAL_BIT
)

	)

370 
	#HLL_SPARSE_ZERO_LEN
(
p
è(((*Õ)è& 0x3f)+1)

	)

371 
	#HLL_SPARSE_XZERO_LEN
(
p
è(((((*Õ)è& 0x3fè<< 8è| (*(Õ)+1)))+1)

	)

372 
	#HLL_SPARSE_VAL_VALUE
(
p
è((((*Õ)è>> 2è& 0x1f)+1)

	)

373 
	#HLL_SPARSE_VAL_LEN
(
p
è(((*Õ)è& 0x3)+1)

	)

374 
	#HLL_SPARSE_VAL_MAX_VALUE
 32

	)

375 
	#HLL_SPARSE_VAL_MAX_LEN
 4

	)

376 
	#HLL_SPARSE_ZERO_MAX_LEN
 64

	)

377 
	#HLL_SPARSE_XZERO_MAX_LEN
 16384

	)

378 
	#HLL_SPARSE_VAL_SET
(
p
,
v®
,
Ën
) do { \

379 *(
p
èğ(((
v®
)-1)<<2|((
Ën
)-1))|
HLL_SPARSE_VAL_BIT
; \

380 } 0)

	)

381 
	#HLL_SPARSE_ZERO_SET
(
p
,
Ën
) do { \

382 *(
p
èğ(
Ën
)-1; \

383 } 0)

	)

384 
	#HLL_SPARSE_XZERO_SET
(
p
,
Ën
) do { \

385 
_l
 = (
Ën
)-1; \

386 *(
p
èğ(
_l
>>8è| 
HLL_SPARSE_XZERO_BIT
; \

387 *((
p
)+1èğ(
_l
&0xff); \

388 } 0)

	)

389 
	#HLL_ALPHA_INF
 0.721347520444481703680

	)

396 
ušt64_t
 
	$MurmurHash64A
 (cÚ¡ * 
key
, 
Ën
, 
£ed
) {

397 cÚ¡ 
ušt64_t
 
m
 = 0xc6a4a7935bd1e995;

398 cÚ¡ 
r
 = 47;

399 
ušt64_t
 
h
 = 
£ed
 ^ (
Ën
 * 
m
);

400 cÚ¡ 
ušt8_t
 *
d©a
 = (cÚ¡ ušt8_ˆ*)
key
;

401 cÚ¡ 
ušt8_t
 *
’d
 = 
d©a
 + (
Ën
-(len&7));

403 
d©a
 !ğ
’d
) {

404 
ušt64_t
 
k
;

406 #ià(
BYTE_ORDER
 =ğ
LITTLE_ENDIAN
)

407 #ifdeà
USE_ALIGNED_ACCESS


408 
	`memıy
(&
k
,
d©a
,(
ušt64_t
));

410 
k
 = *((
ušt64_t
*)
d©a
);

413 
k
 = (
ušt64_t
è
d©a
[0];

414 
k
 |ğ(
ušt64_t
è
d©a
[1] << 8;

415 
k
 |ğ(
ušt64_t
è
d©a
[2] << 16;

416 
k
 |ğ(
ušt64_t
è
d©a
[3] << 24;

417 
k
 |ğ(
ušt64_t
è
d©a
[4] << 32;

418 
k
 |ğ(
ušt64_t
è
d©a
[5] << 40;

419 
k
 |ğ(
ušt64_t
è
d©a
[6] << 48;

420 
k
 |ğ(
ušt64_t
è
d©a
[7] << 56;

423 
k
 *ğ
m
;

424 
k
 ^ğk >> 
r
;

425 
k
 *ğ
m
;

426 
h
 ^ğ
k
;

427 
h
 *ğ
m
;

428 
d©a
 += 8;

431 
Ën
 & 7) {

432 7: 
h
 ^ğ(
ušt64_t
)
d©a
[6] << 48;

433 6: 
h
 ^ğ(
ušt64_t
)
d©a
[5] << 40;

434 5: 
h
 ^ğ(
ušt64_t
)
d©a
[4] << 32;

435 4: 
h
 ^ğ(
ušt64_t
)
d©a
[3] << 24;

436 3: 
h
 ^ğ(
ušt64_t
)
d©a
[2] << 16;

437 2: 
h
 ^ğ(
ušt64_t
)
d©a
[1] << 8;

438 1: 
h
 ^ğ(
ušt64_t
)
d©a
[0];

439 
h
 *ğ
m
;

442 
h
 ^ğh >> 
r
;

443 
h
 *ğ
m
;

444 
h
 ^ğh >> 
r
;

445  
h
;

446 
	}
}

451 
	$hÎP©L’
(*
–e
, 
size_t
 
–esize
, *
»gp
) {

452 
ušt64_t
 
hash
, 
b™
, 
šdex
;

453 
couÁ
;

466 
hash
 = 
	`MurmurHash64A
(
–e
,
–esize
,0xadc83b19ULL);

467 
šdex
 = 
hash
 & 
HLL_P_MASK
;

468 
hash
 >>ğ
HLL_P
;

469 
hash
 |ğ((
ušt64_t
)1<<
HLL_Q
);

471 
b™
 = 1;

472 
couÁ
 = 1;

473 (
hash
 & 
b™
) == 0) {

474 
couÁ
++;

475 
b™
 <<= 1;

477 *
»gp
 = (è
šdex
;

478  
couÁ
;

479 
	}
}

493 
	$hÎD’£S‘
(
ušt8_t
 *
»gi¡”s
, 
šdex
, ušt8_ˆ
couÁ
) {

494 
ušt8_t
 
ŞdcouÁ
;

496 
	`HLL_DENSE_GET_REGISTER
(
ŞdcouÁ
,
»gi¡”s
,
šdex
);

497 ià(
couÁ
 > 
ŞdcouÁ
) {

498 
	`HLL_DENSE_SET_REGISTER
(
»gi¡”s
,
šdex
,
couÁ
);

503 
	}
}

511 
	$hÎD’£Add
(
ušt8_t
 *
»gi¡”s
, *
–e
, 
size_t
 
–esize
) {

512 
šdex
;

513 
ušt8_t
 
couÁ
 = 
	`hÎP©L’
(
–e
,
–esize
,&
šdex
);

515  
	`hÎD’£S‘
(
»gi¡”s
,
šdex
,
couÁ
);

516 
	}
}

519 
	$hÎD’£RegHi¡o
(
ušt8_t
 *
»gi¡”s
, * 
»ghi¡o
) {

520 
j
;

525 ià(
HLL_REGISTERS
 =ğ16384 && 
HLL_BITS
 == 6) {

526 
ušt8_t
 *
r
 = 
»gi¡”s
;

527 
r0
, 
r1
, 
r2
, 
r3
, 
r4
, 
r5
, 
r6
, 
r7
, 
r8
, 
r9
,

528 
r10
, 
r11
, 
r12
, 
r13
, 
r14
, 
r15
;

529 
j
 = 0; j < 1024; j++) {

531 
r0
 = 
r
[0] & 63;

532 
r1
 = (
r
[0] >> 6 |„[1] << 2) & 63;

533 
r2
 = (
r
[1] >> 4 |„[2] << 4) & 63;

534 
r3
 = (
r
[2] >> 2) & 63;

535 
r4
 = 
r
[3] & 63;

536 
r5
 = (
r
[3] >> 6 |„[4] << 2) & 63;

537 
r6
 = (
r
[4] >> 4 |„[5] << 4) & 63;

538 
r7
 = (
r
[5] >> 2) & 63;

539 
r8
 = 
r
[6] & 63;

540 
r9
 = (
r
[6] >> 6 |„[7] << 2) & 63;

541 
r10
 = (
r
[7] >> 4 |„[8] << 4) & 63;

542 
r11
 = (
r
[8] >> 2) & 63;

543 
r12
 = 
r
[9] & 63;

544 
r13
 = (
r
[9] >> 6 |„[10] << 2) & 63;

545 
r14
 = (
r
[10] >> 4 |„[11] << 4) & 63;

546 
r15
 = (
r
[11] >> 2) & 63;

548 
»ghi¡o
[
r0
]++;

549 
»ghi¡o
[
r1
]++;

550 
»ghi¡o
[
r2
]++;

551 
»ghi¡o
[
r3
]++;

552 
»ghi¡o
[
r4
]++;

553 
»ghi¡o
[
r5
]++;

554 
»ghi¡o
[
r6
]++;

555 
»ghi¡o
[
r7
]++;

556 
»ghi¡o
[
r8
]++;

557 
»ghi¡o
[
r9
]++;

558 
»ghi¡o
[
r10
]++;

559 
»ghi¡o
[
r11
]++;

560 
»ghi¡o
[
r12
]++;

561 
»ghi¡o
[
r13
]++;

562 
»ghi¡o
[
r14
]++;

563 
»ghi¡o
[
r15
]++;

565 
r
 += 12;

568 
j
 = 0; j < 
HLL_REGISTERS
; j++) {

569 
»g
;

570 
	`HLL_DENSE_GET_REGISTER
(
»g
,
»gi¡”s
,
j
);

571 
»ghi¡o
[
»g
]++;

574 
	}
}

584 
	$hÎS·r£ToD’£
(
robj
 *
o
) {

585 
sds
 
¥¬£
 = 
o
->
±r
, 
d’£
;

586 
hÎhdr
 *
hdr
, *
Şdhdr
 = (hÎhdr*)
¥¬£
;

587 
idx
 = 0, 
ruÆ’
, 
»gv®
;

588 
ušt8_t
 *
p
 = (ušt8_t*)
¥¬£
, *
’d
 =…+
	`sd¦’
(sparse);

591 
hdr
 = (
hÎhdr
*è
¥¬£
;

592 ià(
hdr
->
’codšg
 =ğ
HLL_DENSE
è 
C_OK
;

597 
d’£
 = 
	`sd¢ewËn
(
NULL
,
HLL_DENSE_SIZE
);

598 
hdr
 = (
hÎhdr
*è
d’£
;

599 *
hdr
 = *
Şdhdr
;

600 
hdr
->
’codšg
 = 
HLL_DENSE
;

604 
p
 +ğ
HLL_HDR_SIZE
;

605 
p
 < 
’d
) {

606 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

607 
ruÆ’
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

608 
idx
 +ğ
ruÆ’
;

609 
p
++;

610 } ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

611 
ruÆ’
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

612 
idx
 +ğ
ruÆ’
;

613 
p
 += 2;

615 
ruÆ’
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

616 
»gv®
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

617 ià((
ruÆ’
 + 
idx
è> 
HLL_REGISTERS
) ;

618 
ruÆ’
--) {

619 
	`HLL_DENSE_SET_REGISTER
(
hdr
->
»gi¡”s
,
idx
,
»gv®
);

620 
idx
++;

622 
p
++;

628 ià(
idx
 !ğ
HLL_REGISTERS
) {

629 
	`sdsä“
(
d’£
);

630  
C_ERR
;

634 
	`sdsä“
(
o
->
±r
);

635 
o
->
±r
 = 
d’£
;

636  
C_OK
;

637 
	}
}

654 
	$hÎS·r£S‘
(
robj
 *
o
, 
šdex
, 
ušt8_t
 
couÁ
) {

655 
hÎhdr
 *
hdr
;

656 
ušt8_t
 
ŞdcouÁ
, *
¥¬£
, *
’d
, *
p
, *
´ev
, *
Ãxt
;

657 
fœ¡
, 
¥ª
;

658 
is_z”o
 = 0, 
is_xz”o
 = 0, 
is_v®
 = 0, 
ruÆ’
 = 0;

662 ià(
couÁ
 > 
HLL_SPARSE_VAL_MAX_VALUE
è
´omÙe
;

669 
o
->
±r
 = 
	`sdsMakeRoomFÜ
(o->ptr,3);

673 
¥¬£
 = 
p
 = ((
ušt8_t
*)
o
->
±r
è+ 
HLL_HDR_SIZE
;

674 
’d
 = 
p
 + 
	`sd¦’
(
o
->
±r
è- 
HLL_HDR_SIZE
;

676 
fœ¡
 = 0;

677 
´ev
 = 
NULL
;

678 
Ãxt
 = 
NULL
;

679 
¥ª
 = 0;

680 
p
 < 
’d
) {

681 
İËn
;

688 
İËn
 = 1;

689 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

690 
¥ª
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

691 } ià(
	`HLL_SPARSE_IS_VAL
(
p
)) {

692 
¥ª
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

694 
¥ª
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

695 
İËn
 = 2;

698 ià(
šdex
 <ğ
fœ¡
+
¥ª
-1) ;

699 
´ev
 = 
p
;

700 
p
 +ğ
İËn
;

701 
fœ¡
 +ğ
¥ª
;

703 ià(
¥ª
 =ğ0 || 
p
 >ğ
’d
)  -1;

705 
Ãxt
 = 
	`HLL_SPARSE_IS_XZERO
(
p
) ?…+2 :…+1;

706 ià(
Ãxt
 >ğ
’d
èÃxˆğ
NULL
;

711 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

712 
is_z”o
 = 1;

713 
ruÆ’
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

714 } ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

715 
is_xz”o
 = 1;

716 
ruÆ’
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

718 
is_v®
 = 1;

719 
ruÆ’
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

743 ià(
is_v®
) {

744 
ŞdcouÁ
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

746 ià(
ŞdcouÁ
 >ğ
couÁ
)  0;

749 ià(
ruÆ’
 == 1) {

750 
	`HLL_SPARSE_VAL_SET
(
p
,
couÁ
,1);

751 
upd©ed
;

757 ià(
is_z”o
 && 
ruÆ’
 == 1) {

758 
	`HLL_SPARSE_VAL_SET
(
p
,
couÁ
,1);

759 
upd©ed
;

777 
ušt8_t
 
£q
[5], *
n
 = seq;

778 
Ï¡
 = 
fœ¡
+
¥ª
-1;

779 
Ën
;

781 ià(
is_z”o
 || 
is_xz”o
) {

783 ià(
šdex
 !ğ
fœ¡
) {

784 
Ën
 = 
šdex
-
fœ¡
;

785 ià(
Ën
 > 
HLL_SPARSE_ZERO_MAX_LEN
) {

786 
	`HLL_SPARSE_XZERO_SET
(
n
,
Ën
);

787 
n
 += 2;

789 
	`HLL_SPARSE_ZERO_SET
(
n
,
Ën
);

790 
n
++;

793 
	`HLL_SPARSE_VAL_SET
(
n
,
couÁ
,1);

794 
n
++;

795 ià(
šdex
 !ğ
Ï¡
) {

796 
Ën
 = 
Ï¡
-
šdex
;

797 ià(
Ën
 > 
HLL_SPARSE_ZERO_MAX_LEN
) {

798 
	`HLL_SPARSE_XZERO_SET
(
n
,
Ën
);

799 
n
 += 2;

801 
	`HLL_SPARSE_ZERO_SET
(
n
,
Ën
);

802 
n
++;

807 
curv®
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

809 ià(
šdex
 !ğ
fœ¡
) {

810 
Ën
 = 
šdex
-
fœ¡
;

811 
	`HLL_SPARSE_VAL_SET
(
n
,
curv®
,
Ën
);

812 
n
++;

814 
	`HLL_SPARSE_VAL_SET
(
n
,
couÁ
,1);

815 
n
++;

816 ià(
šdex
 !ğ
Ï¡
) {

817 
Ën
 = 
Ï¡
-
šdex
;

818 
	`HLL_SPARSE_VAL_SET
(
n
,
curv®
,
Ën
);

819 
n
++;

827 
£qËn
 = 
n
-
£q
;

828 
ŞdËn
 = 
is_xz”o
 ? 2 : 1;

829 
d–Ën
 = 
£qËn
-
ŞdËn
;

831 ià(
d–Ën
 > 0 &&

832 
	`sd¦’
(
o
->
±r
)+
d–Ën
 > 
£rv”
.
hÎ_¥¬£_max_by‹s
è
´omÙe
;

833 ià(
d–Ën
 && 
Ãxt
è
	`memmove
Òext+d–Ën,Ãxt,
’d
-next);

834 
	`sdsInüL’
(
o
->
±r
,
d–Ën
);

835 
	`memıy
(
p
,
£q
,
£qËn
);

836 
’d
 +ğ
d–Ën
;

838 
upd©ed
:

844 
p
 = 
´ev
 ?…»v : 
¥¬£
;

845 
sÿÆ’
 = 5;

846 
p
 < 
’d
 && 
sÿÆ’
--) {

847 ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

848 
p
 += 2;

850 } ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

851 
p
++;

856 ià(
p
+1 < 
’d
 && 
	`HLL_SPARSE_IS_VAL
(p+1)) {

857 
v1
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

858 
v2
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
+1);

859 ià(
v1
 =ğ
v2
) {

860 
Ën
 = 
	`HLL_SPARSE_VAL_LEN
(
p
)+HLL_SPARSE_VAL_LEN(p+1);

861 ià(
Ën
 <ğ
HLL_SPARSE_VAL_MAX_LEN
) {

862 
	`HLL_SPARSE_VAL_SET
(
p
+1,
v1
,
Ën
);

863 
	`memmove
(
p
,p+1,
’d
-p);

864 
	`sdsInüL’
(
o
->
±r
,-1);

865 
’d
--;

873 
p
++;

877 
hdr
 = 
o
->
±r
;

878 
	`HLL_INVALIDATE_CACHE
(
hdr
);

881 
´omÙe
:

882 ià(
	`hÎS·r£ToD’£
(
o
è=ğ
C_ERR
)  -1;

883 
hdr
 = 
o
->
±r
;

892 
d’£_»tv®
 = 
	`hÎD’£S‘
(
hdr
->
»gi¡”s
,
šdex
,
couÁ
);

893 
	`£rv”As£¹
(
d’£_»tv®
 == 1);

894  
d’£_»tv®
;

895 
	}
}

903 
	$hÎS·r£Add
(
robj
 *
o
, *
–e
, 
size_t
 
–esize
) {

904 
šdex
;

905 
ušt8_t
 
couÁ
 = 
	`hÎP©L’
(
–e
,
–esize
,&
šdex
);

907  
	`hÎS·r£S‘
(
o
,
šdex
,
couÁ
);

908 
	}
}

911 
	$hÎS·r£RegHi¡o
(
ušt8_t
 *
¥¬£
, 
¥¬£Ën
, *
šv®id
, * 
»ghi¡o
) {

912 
idx
 = 0, 
ruÆ’
, 
»gv®
;

913 
ušt8_t
 *
’d
 = 
¥¬£
+
¥¬£Ën
, *
p
 = sparse;

915 
p
 < 
’d
) {

916 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

917 
ruÆ’
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

918 
idx
 +ğ
ruÆ’
;

919 
»ghi¡o
[0] +ğ
ruÆ’
;

920 
p
++;

921 } ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

922 
ruÆ’
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

923 
idx
 +ğ
ruÆ’
;

924 
»ghi¡o
[0] +ğ
ruÆ’
;

925 
p
 += 2;

927 
ruÆ’
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

928 
»gv®
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

929 
idx
 +ğ
ruÆ’
;

930 
»ghi¡o
[
»gv®
] +ğ
ruÆ’
;

931 
p
++;

934 ià(
idx
 !ğ
HLL_REGISTERS
 && 
šv®id
) *invalid = 1;

935 
	}
}

945 
	$hÎRawRegHi¡o
(
ušt8_t
 *
»gi¡”s
, * 
»ghi¡o
) {

946 
ušt64_t
 *
wÜd
 = (ušt64_t*è
»gi¡”s
;

947 
ušt8_t
 *
by‹s
;

948 
j
;

950 
j
 = 0; j < 
HLL_REGISTERS
/8; j++) {

951 ià(*
wÜd
 == 0) {

952 
»ghi¡o
[0] += 8;

954 
by‹s
 = (
ušt8_t
*è
wÜd
;

955 
»ghi¡o
[
by‹s
[0]]++;

956 
»ghi¡o
[
by‹s
[1]]++;

957 
»ghi¡o
[
by‹s
[2]]++;

958 
»ghi¡o
[
by‹s
[3]]++;

959 
»ghi¡o
[
by‹s
[4]]++;

960 
»ghi¡o
[
by‹s
[5]]++;

961 
»ghi¡o
[
by‹s
[6]]++;

962 
»ghi¡o
[
by‹s
[7]]++;

964 
wÜd
++;

966 
	}
}

971 
	$hÎSigma
(
x
) {

972 ià(
x
 =ğ1.è 
INFINITY
;

973 
zPrime
;

974 
y
 = 1;

975 
z
 = 
x
;

977 
x
 *= x;

978 
zPrime
 = 
z
;

979 
z
 +ğ
x
 * 
y
;

980 
y
 += y;

981 } 
zPrime
 !ğ
z
);

982  
z
;

983 
	}
}

988 
	$hÎTau
(
x
) {

989 ià(
x
 == 0. || x == 1.)  0.;

990 
zPrime
;

991 
y
 = 1.0;

992 
z
 = 1 - 
x
;

994 
x
 = 
	`sq¹
(x);

995 
zPrime
 = 
z
;

996 
y
 *= 0.5;

997 
z
 -ğ
	`pow
(1 - 
x
, 2)*
y
;

998 } 
zPrime
 !ğ
z
);

999  
z
 / 3;

1000 
	}
}

1013 
ušt64_t
 
	$hÎCouÁ
(
hÎhdr
 *
hdr
, *
šv®id
) {

1014 
m
 = 
HLL_REGISTERS
;

1015 
E
;

1016 
j
;

1022 
»ghi¡o
[64] = {0};

1025 ià(
hdr
->
’codšg
 =ğ
HLL_DENSE
) {

1026 
	`hÎD’£RegHi¡o
(
hdr
->
»gi¡”s
,
»ghi¡o
);

1027 } ià(
hdr
->
’codšg
 =ğ
HLL_SPARSE
) {

1028 
	`hÎS·r£RegHi¡o
(
hdr
->
»gi¡”s
,

1029 
	`sd¦’
((
sds
)
hdr
)-
HLL_HDR_SIZE
,
šv®id
,
»ghi¡o
);

1030 } ià(
hdr
->
’codšg
 =ğ
HLL_RAW
) {

1031 
	`hÎRawRegHi¡o
(
hdr
->
»gi¡”s
,
»ghi¡o
);

1033 
	`£rv”Pªic
("Unknown HyperLogLogƒncoding in hllCount()");

1039 
z
 = 
m
 * 
	`hÎTau
((m-
»ghi¡o
[
HLL_Q
+1])/()m);

1040 
j
 = 
HLL_Q
; j >= 1; --j) {

1041 
z
 +ğ
»ghi¡o
[
j
];

1042 
z
 *= 0.5;

1044 
z
 +ğ
m
 * 
	`hÎSigma
(
»ghi¡o
[0]/()m);

1045 
E
 = 
	`Îroundl
(
HLL_ALPHA_INF
*
m
*m/
z
);

1047  (
ušt64_t
è
E
;

1048 
	}
}

1051 
	$hÎAdd
(
robj
 *
o
, *
–e
, 
size_t
 
–esize
) {

1052 
hÎhdr
 *
hdr
 = 
o
->
±r
;

1053 
hdr
->
’codšg
) {

1054 
HLL_DENSE
:  
	`hÎD’£Add
(
hdr
->
»gi¡”s
,
–e
,
–esize
);

1055 
HLL_SPARSE
:  
	`hÎS·r£Add
(
o
,
–e
,
–esize
);

1058 
	}
}

1068 
	$hÎM”ge
(
ušt8_t
 *
max
, 
robj
 *
hÎ
) {

1069 
hÎhdr
 *
hdr
 = 
hÎ
->
±r
;

1070 
i
;

1072 ià(
hdr
->
’codšg
 =ğ
HLL_DENSE
) {

1073 
ušt8_t
 
v®
;

1075 
i
 = 0; i < 
HLL_REGISTERS
; i++) {

1076 
	`HLL_DENSE_GET_REGISTER
(
v®
,
hdr
->
»gi¡”s
,
i
);

1077 ià(
v®
 > 
max
[
i
]) max[i] = val;

1080 
ušt8_t
 *
p
 = 
hÎ
->
±r
, *
’d
 =… + 
	`sd¦’
(hll->ptr);

1081 
ruÆ’
, 
»gv®
;

1083 
p
 +ğ
HLL_HDR_SIZE
;

1084 
i
 = 0;

1085 
p
 < 
’d
) {

1086 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

1087 
ruÆ’
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

1088 
i
 +ğ
ruÆ’
;

1089 
p
++;

1090 } ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

1091 
ruÆ’
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

1092 
i
 +ğ
ruÆ’
;

1093 
p
 += 2;

1095 
ruÆ’
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

1096 
»gv®
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

1097 ià((
ruÆ’
 + 
i
è> 
HLL_REGISTERS
) ;

1098 
ruÆ’
--) {

1099 ià(
»gv®
 > 
max
[
i
]) max[i] =„egval;

1100 
i
++;

1102 
p
++;

1105 ià(
i
 !ğ
HLL_REGISTERS
è 
C_ERR
;

1107  
C_OK
;

1108 
	}
}

1114 
robj
 *
	$ü—‹HLLObjeù
() {

1115 
robj
 *
o
;

1116 
hÎhdr
 *
hdr
;

1117 
sds
 
s
;

1118 
ušt8_t
 *
p
;

1119 
¥¬£Ën
 = 
HLL_HDR_SIZE
 +

1120 (((
HLL_REGISTERS
+(
HLL_SPARSE_XZERO_MAX_LEN
-1)) /

1121 
HLL_SPARSE_XZERO_MAX_LEN
)*2);

1122 
aux
;

1126 
aux
 = 
HLL_REGISTERS
;

1127 
s
 = 
	`sd¢ewËn
(
NULL
,
¥¬£Ën
);

1128 
p
 = (
ušt8_t
*)
s
 + 
HLL_HDR_SIZE
;

1129 
aux
) {

1130 
xz”o
 = 
HLL_SPARSE_XZERO_MAX_LEN
;

1131 ià(
xz”o
 > 
aux
) xzero =‡ux;

1132 
	`HLL_SPARSE_XZERO_SET
(
p
,
xz”o
);

1133 
p
 += 2;

1134 
aux
 -ğ
xz”o
;

1136 
	`£rv”As£¹
((
p
-(
ušt8_t
*)
s
è=ğ
¥¬£Ën
);

1139 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
s
);

1140 
hdr
 = 
o
->
±r
;

1141 
	`memıy
(
hdr
->
magic
,"HYLL",4);

1142 
hdr
->
’codšg
 = 
HLL_SPARSE
;

1143  
o
;

1144 
	}
}

1149 
	$isHLLObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
) {

1150 
hÎhdr
 *
hdr
;

1153 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
))

1154  
C_ERR
;

1156 ià(!
	`sdsEncodedObjeù
(
o
)è
šv®id
;

1157 ià(
	`¡ršgObjeùL’
(
o
è< (*
hdr
)è
šv®id
;

1158 
hdr
 = 
o
->
±r
;

1161 ià(
hdr
->
magic
[0] != 'H' || hdr->magic[1] != 'Y' ||

1162 
hdr
->
magic
[2] !ğ'L' || hdr->magic[3] !ğ'L'è
šv®id
;

1164 ià(
hdr
->
’codšg
 > 
HLL_MAX_ENCODING
è
šv®id
;

1167 ià(
hdr
->
’codšg
 =ğ
HLL_DENSE
 &&

1168 
	`¡ršgObjeùL’
(
o
è!ğ
HLL_DENSE_SIZE
è
šv®id
;

1171  
C_OK
;

1173 
šv®id
:

1174 
	`addR•lySds
(
c
,

1175 
	`sd¢ew
("-WRONGTYPE Key is‚ot‡ valid "

1177  
C_ERR
;

1178 
	}
}

1181 
	$pçddCommªd
(
ş›Á
 *
c
) {

1182 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

1183 
hÎhdr
 *
hdr
;

1184 
upd©ed
 = 0, 
j
;

1186 ià(
o
 =ğ
NULL
) {

1190 
o
 = 
	`ü—‹HLLObjeù
();

1191 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
o
);

1192 
upd©ed
++;

1194 ià(
	`isHLLObjeùOrR•ly
(
c
,
o
è!ğ
C_OK
) ;

1195 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

1198 
j
 = 2; j < 
c
->
¬gc
; j++) {

1199 
»tv®
 = 
	`hÎAdd
(
o
, (*)
c
->
¬gv
[
j
]->
±r
,

1200 
	`sd¦’
(
c
->
¬gv
[
j
]->
±r
));

1201 
»tv®
) {

1203 
upd©ed
++;

1206 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1210 
hdr
 = 
o
->
±r
;

1211 ià(
upd©ed
) {

1212 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1213 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"pçdd",
c
->
¬gv
[1],c->
db
->
id
);

1214 
£rv”
.
dœty
++;

1215 
	`HLL_INVALIDATE_CACHE
(
hdr
);

1217 
	`addR•ly
(
c
, 
upd©ed
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

1218 
	}
}

1221 
	$pfcouÁCommªd
(
ş›Á
 *
c
) {

1222 
robj
 *
o
;

1223 
hÎhdr
 *
hdr
;

1224 
ušt64_t
 
ÿrd
;

1230 ià(
c
->
¬gc
 > 2) {

1231 
ušt8_t
 
max
[
HLL_HDR_SIZE
+
HLL_REGISTERS
], *
»gi¡”s
;

1232 
j
;

1235 
	`mem£t
(
max
,0,(max));

1236 
hdr
 = (
hÎhdr
*è
max
;

1237 
hdr
->
’codšg
 = 
HLL_RAW
;

1238 
»gi¡”s
 = 
max
 + 
HLL_HDR_SIZE
;

1239 
j
 = 1; j < 
c
->
¬gc
; j++) {

1241 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
]);

1242 ià(
o
 =ğ
NULL
) ;

1243 ià(
	`isHLLObjeùOrR•ly
(
c
,
o
è!ğ
C_OK
) ;

1247 ià(
	`hÎM”ge
(
»gi¡”s
,
o
è=ğ
C_ERR
) {

1248 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1254 
	`addR•lyLÚgLÚg
(
c
,
	`hÎCouÁ
(
hdr
,
NULL
));

1262 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

1263 ià(
o
 =ğ
NULL
) {

1266 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1268 ià(
	`isHLLObjeùOrR•ly
(
c
,
o
è!ğ
C_OK
) ;

1269 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

1272 
hdr
 = 
o
->
±r
;

1273 ià(
	`HLL_VALID_CACHE
(
hdr
)) {

1275 
ÿrd
 = (
ušt64_t
)
hdr
->card[0];

1276 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[1] << 8;

1277 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[2] << 16;

1278 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[3] << 24;

1279 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[4] << 32;

1280 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[5] << 40;

1281 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[6] << 48;

1282 
ÿrd
 |ğ(
ušt64_t
)
hdr
->card[7] << 56;

1284 
šv®id
 = 0;

1286 
ÿrd
 = 
	`hÎCouÁ
(
hdr
,&
šv®id
);

1287 ià(
šv®id
) {

1288 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1291 
hdr
->
ÿrd
[0] = card & 0xff;

1292 
hdr
->
ÿrd
[1] = (card >> 8) & 0xff;

1293 
hdr
->
ÿrd
[2] = (card >> 16) & 0xff;

1294 
hdr
->
ÿrd
[3] = (card >> 24) & 0xff;

1295 
hdr
->
ÿrd
[4] = (card >> 32) & 0xff;

1296 
hdr
->
ÿrd
[5] = (card >> 40) & 0xff;

1297 
hdr
->
ÿrd
[6] = (card >> 48) & 0xff;

1298 
hdr
->
ÿrd
[7] = (card >> 56) & 0xff;

1303 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1304 
£rv”
.
dœty
++;

1306 
	`addR•lyLÚgLÚg
(
c
,
ÿrd
);

1308 
	}
}

1311 
	$pfm”geCommªd
(
ş›Á
 *
c
) {

1312 
ušt8_t
 
max
[
HLL_REGISTERS
];

1313 
hÎhdr
 *
hdr
;

1314 
j
;

1315 
u£_d’£
 = 0;

1320 
	`mem£t
(
max
,0,(max));

1321 
j
 = 1; j < 
c
->
¬gc
; j++) {

1323 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
]);

1324 ià(
o
 =ğ
NULL
) ;

1325 ià(
	`isHLLObjeùOrR•ly
(
c
,
o
è!ğ
C_OK
) ;

1329 
hdr
 = 
o
->
±r
;

1330 ià(
hdr
->
’codšg
 =ğ
HLL_DENSE
è
u£_d’£
 = 1;

1334 ià(
	`hÎM”ge
(
max
,
o
è=ğ
C_ERR
) {

1335 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1341 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

1342 ià(
o
 =ğ
NULL
) {

1346 
o
 = 
	`ü—‹HLLObjeù
();

1347 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
o
);

1352 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

1357 ià(
u£_d’£
 && 
	`hÎS·r£ToD’£
(
o
è=ğ
C_ERR
) {

1358 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1364 
j
 = 0; j < 
HLL_REGISTERS
; j++) {

1365 ià(
max
[
j
] == 0) ;

1366 
hdr
 = 
o
->
±r
;

1367 
hdr
->
’codšg
) {

1368 
HLL_DENSE
: 
	`hÎD’£S‘
(
hdr
->
»gi¡”s
,
j
,
max
[j]); ;

1369 
HLL_SPARSE
: 
	`hÎS·r£S‘
(
o
,
j
,
max
[j]); ;

1372 
hdr
 = 
o
->
±r
;

1374 
	`HLL_INVALIDATE_CACHE
(
hdr
);

1376 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1379 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"pçdd",
c
->
¬gv
[1],c->
db
->
id
);

1380 
£rv”
.
dœty
++;

1381 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1382 
	}
}

1389 
	#HLL_TEST_CYCLES
 1000

	)

1390 
	$pf£láe¡Commªd
(
ş›Á
 *
c
) {

1391 
j
, 
i
;

1392 
sds
 
b™couÁ”s
 = 
	`sd¢ewËn
(
NULL
,
HLL_DENSE_SIZE
);

1393 
hÎhdr
 *
hdr
 = (hÎhdr*è
b™couÁ”s
, *
hdr2
;

1394 
robj
 *
o
 = 
NULL
;

1395 
ušt8_t
 
by‹couÁ”s
[
HLL_REGISTERS
];

1401 
j
 = 0; j < 
HLL_TEST_CYCLES
; j++) {

1404 
i
 = 0; i < 
HLL_REGISTERS
; i++) {

1405 
r
 = 
	`¿nd
(è& 
HLL_REGISTER_MAX
;

1407 
by‹couÁ”s
[
i
] = 
r
;

1408 
	`HLL_DENSE_SET_REGISTER
(
hdr
->
»gi¡”s
,
i
,
r
);

1411 
i
 = 0; i < 
HLL_REGISTERS
; i++) {

1412 
v®
;

1414 
	`HLL_DENSE_GET_REGISTER
(
v®
,
hdr
->
»gi¡”s
,
i
);

1415 ià(
v®
 !ğ
by‹couÁ”s
[
i
]) {

1416 
	`addR•lyE¼ÜFÜm©
(
c
,

1418 
i
, (è
by‹couÁ”s
[i], (è
v®
);

1419 
ş—nup
;

1434 
	`mem£t
(
hdr
->
»gi¡”s
,0,
HLL_DENSE_SIZE
-
HLL_HDR_SIZE
);

1435 
o
 = 
	`ü—‹HLLObjeù
();

1436 
»Ë¼
 = 1.04/
	`sq¹
(
HLL_REGISTERS
);

1437 
št64_t
 
checkpošt
 = 1;

1438 
ušt64_t
 
£ed
 = (ušt64_t)
	`¿nd
() | (uint64_t)rand() << 32;

1439 
ušt64_t
 
–e
;

1440 
j
 = 1; j <= 10000000; j++) {

1441 
–e
 = 
j
 ^ 
£ed
;

1442 
	`hÎD’£Add
(
hdr
->
»gi¡”s
,(*)&
–e
,(ele));

1443 
	`hÎAdd
(
o
,(*)&
–e
,(ele));

1447 ià(
j
 =ğ
checkpošt
 && j < 
£rv”
.
hÎ_¥¬£_max_by‹s
/2) {

1448 
hdr2
 = 
o
->
±r
;

1449 ià(
hdr2
->
’codšg
 !ğ
HLL_SPARSE
) {

1450 
	`addR•lyE¼Ü
(
c
, "TESTFAILED sparseƒncoding‚ot used");

1451 
ş—nup
;

1456 ià(
j
 =ğ
checkpošt
 && 
	`hÎCouÁ
(
hdr
,
NULL
è!ğhÎCouÁ(
o
->
±r
,NULL)) {

1457 
	`addR•lyE¼Ü
(
c
, "TESTFAILED dense/sparse disagree");

1458 
ş—nup
;

1462 ià(
j
 =ğ
checkpošt
) {

1463 
št64_t
 
ab£¼
 = 
checkpošt
 - (št64_t)
	`hÎCouÁ
(
hdr
,
NULL
);

1464 
ušt64_t
 
max”r
 = 
	`û
(
»Ë¼
*6*
checkpošt
);

1470 ià(
j
 =ğ10è
max”r
 = 1;

1472 ià(
ab£¼
 < 0)‡bserr = -abserr;

1473 ià(
ab£¼
 > (
št64_t
)
max”r
) {

1474 
	`addR•lyE¼ÜFÜm©
(
c
,

1476 (è
checkpošt
,

1477 (è
ab£¼
);

1478 
ş—nup
;

1480 
checkpošt
 *= 10;

1485 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1487 
ş—nup
:

1488 
	`sdsä“
(
b™couÁ”s
);

1489 ià(
o
è
	`deüRefCouÁ
(o);

1490 
	}
}

1494 
	$pfdebugCommªd
(
ş›Á
 *
c
) {

1495 *
cmd
 = 
c
->
¬gv
[1]->
±r
;

1496 
hÎhdr
 *
hdr
;

1497 
robj
 *
o
;

1498 
j
;

1500 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[2]);

1501 ià(
o
 =ğ
NULL
) {

1502 
	`addR•lyE¼Ü
(
c
,"The specified key does‚otƒxist");

1505 ià(
	`isHLLObjeùOrR•ly
(
c
,
o
è!ğ
C_OK
) ;

1506 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[2],o);

1507 
hdr
 = 
o
->
±r
;

1510 ià(!
	`¡rÿ£cmp
(
cmd
,"getreg")) {

1511 ià(
c
->
¬gc
 !ğ3è
¬™y”r
;

1513 ià(
hdr
->
’codšg
 =ğ
HLL_SPARSE
) {

1514 ià(
	`hÎS·r£ToD’£
(
o
è=ğ
C_ERR
) {

1515 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1518 
£rv”
.
dœty
++;

1521 
hdr
 = 
o
->
±r
;

1522 
	`addR•lyA¼ayL’
(
c
,
HLL_REGISTERS
);

1523 
j
 = 0; j < 
HLL_REGISTERS
; j++) {

1524 
ušt8_t
 
v®
;

1526 
	`HLL_DENSE_GET_REGISTER
(
v®
,
hdr
->
»gi¡”s
,
j
);

1527 
	`addR•lyLÚgLÚg
(
c
,
v®
);

1531 ià(!
	`¡rÿ£cmp
(
cmd
,"decode")) {

1532 ià(
c
->
¬gc
 !ğ3è
¬™y”r
;

1534 
ušt8_t
 *
p
 = 
o
->
±r
, *
’d
 =…+
	`sd¦’
(o->ptr);

1535 
sds
 
decoded
 = 
	`sd£m±y
();

1537 ià(
hdr
->
’codšg
 !ğ
HLL_SPARSE
) {

1538 
	`sdsä“
(
decoded
);

1539 
	`addR•lyE¼Ü
(
c
,"HLLƒncoding is‚ot sparse");

1543 
p
 +ğ
HLL_HDR_SIZE
;

1544 
p
 < 
’d
) {

1545 
ruÆ’
, 
»gv®
;

1547 ià(
	`HLL_SPARSE_IS_ZERO
(
p
)) {

1548 
ruÆ’
 = 
	`HLL_SPARSE_ZERO_LEN
(
p
);

1549 
p
++;

1550 
decoded
 = 
	`sdsÿrštf
(decoded,"z:%d ",
ruÆ’
);

1551 } ià(
	`HLL_SPARSE_IS_XZERO
(
p
)) {

1552 
ruÆ’
 = 
	`HLL_SPARSE_XZERO_LEN
(
p
);

1553 
p
 += 2;

1554 
decoded
 = 
	`sdsÿrštf
(decoded,"Z:%d ",
ruÆ’
);

1556 
ruÆ’
 = 
	`HLL_SPARSE_VAL_LEN
(
p
);

1557 
»gv®
 = 
	`HLL_SPARSE_VAL_VALUE
(
p
);

1558 
p
++;

1559 
decoded
 = 
	`sdsÿrštf
(decoded,"v:%d,%d ",
»gv®
,
ruÆ’
);

1562 
decoded
 = 
	`sd¡rim
(decoded," ");

1563 
	`addR•lyBulkCBufãr
(
c
,
decoded
,
	`sd¦’
(decoded));

1564 
	`sdsä“
(
decoded
);

1567 ià(!
	`¡rÿ£cmp
(
cmd
,"encoding")) {

1568 *
’codšg¡r
[2] = {"dense","sparse"};

1569 ià(
c
->
¬gc
 !ğ3è
¬™y”r
;

1571 
	`addR•lyStus
(
c
,
’codšg¡r
[
hdr
->
’codšg
]);

1574 ià(!
	`¡rÿ£cmp
(
cmd
,"todense")) {

1575 
cÚv
 = 0;

1576 ià(
c
->
¬gc
 !ğ3è
¬™y”r
;

1578 ià(
hdr
->
’codšg
 =ğ
HLL_SPARSE
) {

1579 ià(
	`hÎS·r£ToD’£
(
o
è=ğ
C_ERR
) {

1580 
	`addR•lySds
(
c
,
	`sd¢ew
(
šv®id_hÎ_”r
));

1583 
cÚv
 = 1;

1584 
£rv”
.
dœty
++;

1586 
	`addR•ly
(
c
,
cÚv
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

1588 
	`addR•lyE¼ÜFÜm©
(
c
,"UnknowÀPFDEBUG subcommªd '%s'", 
cmd
);

1592 
¬™y”r
:

1593 
	`addR•lyE¼ÜFÜm©
(
c
,

1594 "WrÚg‚umb” oà¬gum’t fÜh'%s' subcommªd",
cmd
);

1595 
	}
}

	@intset.c

31 
	~<¡dio.h
>

32 
	~<¡dlib.h
>

33 
	~<¡ršg.h
>

34 
	~"št£t.h
"

35 
	~"zm®loc.h
"

36 
	~"’dŸncÚv.h
"

40 
	#INTSET_ENC_INT16
 ((
št16_t
))

	)

41 
	#INTSET_ENC_INT32
 ((
št32_t
))

	)

42 
	#INTSET_ENC_INT64
 ((
št64_t
))

	)

45 
ušt8_t
 
	$_št£tV®ueEncodšg
(
št64_t
 
v
) {

46 ià(
v
 < 
INT32_MIN
 || v > 
INT32_MAX
)

47  
INTSET_ENC_INT64
;

48 ià(
v
 < 
INT16_MIN
 || v > 
INT16_MAX
)

49  
INTSET_ENC_INT32
;

51  
INTSET_ENC_INT16
;

52 
	}
}

55 
št64_t
 
	$_št£tG‘Encoded
(
št£t
 *
is
, 
pos
, 
ušt8_t
 
’c
) {

56 
št64_t
 
v64
;

57 
št32_t
 
v32
;

58 
št16_t
 
v16
;

60 ià(
’c
 =ğ
INTSET_ENC_INT64
) {

61 
	`memıy
(&
v64
,((
št64_t
*)
is
->
cÚ‹Ás
)+
pos
,(v64));

62 
	`mem»v64ifbe
(&
v64
);

63  
v64
;

64 } ià(
’c
 =ğ
INTSET_ENC_INT32
) {

65 
	`memıy
(&
v32
,((
št32_t
*)
is
->
cÚ‹Ás
)+
pos
,(v32));

66 
	`mem»v32ifbe
(&
v32
);

67  
v32
;

69 
	`memıy
(&
v16
,((
št16_t
*)
is
->
cÚ‹Ás
)+
pos
,(v16));

70 
	`mem»v16ifbe
(&
v16
);

71  
v16
;

73 
	}
}

76 
št64_t
 
	$_št£tG‘
(
št£t
 *
is
, 
pos
) {

77  
	`_št£tG‘Encoded
(
is
,
pos
,
	`šŒev32ifbe
(is->
’codšg
));

78 
	}
}

81 
	$_št£tS‘
(
št£t
 *
is
, 
pos
, 
št64_t
 
v®ue
) {

82 
ušt32_t
 
’codšg
 = 
	`šŒev32ifbe
(
is
->encoding);

84 ià(
’codšg
 =ğ
INTSET_ENC_INT64
) {

85 ((
št64_t
*)
is
->
cÚ‹Ás
)[
pos
] = 
v®ue
;

86 
	`mem»v64ifbe
(((
št64_t
*)
is
->
cÚ‹Ás
)+
pos
);

87 } ià(
’codšg
 =ğ
INTSET_ENC_INT32
) {

88 ((
št32_t
*)
is
->
cÚ‹Ás
)[
pos
] = 
v®ue
;

89 
	`mem»v32ifbe
(((
št32_t
*)
is
->
cÚ‹Ás
)+
pos
);

91 ((
št16_t
*)
is
->
cÚ‹Ás
)[
pos
] = 
v®ue
;

92 
	`mem»v16ifbe
(((
št16_t
*)
is
->
cÚ‹Ás
)+
pos
);

94 
	}
}

97 
št£t
 *
	$št£tNew
() {

98 
št£t
 *
is
 = 
	`zm®loc
((intset));

99 
is
->
’codšg
 = 
	`šŒev32ifbe
(
INTSET_ENC_INT16
);

100 
is
->
Ëngth
 = 0;

101  
is
;

102 
	}
}

105 
št£t
 *
	$št£tResize
(
št£t
 *
is
, 
ušt32_t
 
Ën
) {

106 
ušt32_t
 
size
 = 
Ën
*
	`šŒev32ifbe
(
is
->
’codšg
);

107 
is
 = 
	`z»®loc
(is,(
št£t
)+
size
);

108  
is
;

109 
	}
}

115 
ušt8_t
 
	$št£tS—rch
(
št£t
 *
is
, 
št64_t
 
v®ue
, 
ušt32_t
 *
pos
) {

116 
mš
 = 0, 
max
 = 
	`šŒev32ifbe
(
is
->
Ëngth
)-1, 
mid
 = -1;

117 
št64_t
 
cur
 = -1;

120 ià(
	`šŒev32ifbe
(
is
->
Ëngth
) == 0) {

121 ià(
pos
) *pos = 0;

126 ià(
v®ue
 > 
	`_št£tG‘
(
is
,
max
)) {

127 ià(
pos
è*po ğ
	`šŒev32ifbe
(
is
->
Ëngth
);

129 } ià(
v®ue
 < 
	`_št£tG‘
(
is
,0)) {

130 ià(
pos
) *pos = 0;

135 
max
 >ğ
mš
) {

136 
mid
 = (()
mš
 + ()
max
) >> 1;

137 
cur
 = 
	`_št£tG‘
(
is
,
mid
);

138 ià(
v®ue
 > 
cur
) {

139 
mš
 = 
mid
+1;

140 } ià(
v®ue
 < 
cur
) {

141 
max
 = 
mid
-1;

147 ià(
v®ue
 =ğ
cur
) {

148 ià(
pos
è*po ğ
mid
;

151 ià(
pos
è*po ğ
mš
;

154 
	}
}

157 
št£t
 *
	$št£tUpg¿deAndAdd
(
št£t
 *
is
, 
št64_t
 
v®ue
) {

158 
ušt8_t
 
cu»nc
 = 
	`šŒev32ifbe
(
is
->
’codšg
);

159 
ušt8_t
 
Ãw’c
 = 
	`_št£tV®ueEncodšg
(
v®ue
);

160 
Ëngth
 = 
	`šŒev32ifbe
(
is
->length);

161 
´•’d
 = 
v®ue
 < 0 ? 1 : 0;

164 
is
->
’codšg
 = 
	`šŒev32ifbe
(
Ãw’c
);

165 
is
 = 
	`št£tResize
(is,
	`šŒev32ifbe
(is->
Ëngth
)+1);

170 
Ëngth
--)

171 
	`_št£tS‘
(
is
,
Ëngth
+
´•’d
,
	`_št£tG‘Encoded
(is,Ëngth,
cu»nc
));

174 ià(
´•’d
)

175 
	`_št£tS‘
(
is
,0,
v®ue
);

177 
	`_št£tS‘
(
is
,
	`šŒev32ifbe
(is->
Ëngth
),
v®ue
);

178 
is
->
Ëngth
 = 
	`šŒev32ifbe
(intrev32ifbe(is->length)+1);

179  
is
;

180 
	}
}

182 
	$št£tMoveTa
(
št£t
 *
is
, 
ušt32_t
 
äom
, ušt32_ˆ
to
) {

183 *
¤c
, *
d¡
;

184 
ušt32_t
 
by‹s
 = 
	`šŒev32ifbe
(
is
->
Ëngth
)-
äom
;

185 
ušt32_t
 
’codšg
 = 
	`šŒev32ifbe
(
is
->encoding);

187 ià(
’codšg
 =ğ
INTSET_ENC_INT64
) {

188 
¤c
 = (
št64_t
*)
is
->
cÚ‹Ás
+
äom
;

189 
d¡
 = (
št64_t
*)
is
->
cÚ‹Ás
+
to
;

190 
by‹s
 *ğ(
št64_t
);

191 } ià(
’codšg
 =ğ
INTSET_ENC_INT32
) {

192 
¤c
 = (
št32_t
*)
is
->
cÚ‹Ás
+
äom
;

193 
d¡
 = (
št32_t
*)
is
->
cÚ‹Ás
+
to
;

194 
by‹s
 *ğ(
št32_t
);

196 
¤c
 = (
št16_t
*)
is
->
cÚ‹Ás
+
äom
;

197 
d¡
 = (
št16_t
*)
is
->
cÚ‹Ás
+
to
;

198 
by‹s
 *ğ(
št16_t
);

200 
	`memmove
(
d¡
,
¤c
,
by‹s
);

201 
	}
}

204 
št£t
 *
	$št£tAdd
(
št£t
 *
is
, 
št64_t
 
v®ue
, 
ušt8_t
 *
sucûss
) {

205 
ušt8_t
 
v®’c
 = 
	`_št£tV®ueEncodšg
(
v®ue
);

206 
ušt32_t
 
pos
;

207 ià(
sucûss
) *success = 1;

212 ià(
v®’c
 > 
	`šŒev32ifbe
(
is
->
’codšg
)) {

214  
	`št£tUpg¿deAndAdd
(
is
,
v®ue
);

219 ià(
	`št£tS—rch
(
is
,
v®ue
,&
pos
)) {

220 ià(
sucûss
) *success = 0;

221  
is
;

224 
is
 = 
	`št£tResize
(is,
	`šŒev32ifbe
(is->
Ëngth
)+1);

225 ià(
pos
 < 
	`šŒev32ifbe
(
is
->
Ëngth
)è
	`št£tMoveTa
(is,pos,pos+1);

228 
	`_št£tS‘
(
is
,
pos
,
v®ue
);

229 
is
->
Ëngth
 = 
	`šŒev32ifbe
(intrev32ifbe(is->length)+1);

230  
is
;

231 
	}
}

234 
št£t
 *
	$št£tRemove
(
št£t
 *
is
, 
št64_t
 
v®ue
, *
sucûss
) {

235 
ušt8_t
 
v®’c
 = 
	`_št£tV®ueEncodšg
(
v®ue
);

236 
ušt32_t
 
pos
;

237 ià(
sucûss
) *success = 0;

239 ià(
v®’c
 <ğ
	`šŒev32ifbe
(
is
->
’codšg
è&& 
	`št£tS—rch
(is,
v®ue
,&
pos
)) {

240 
ušt32_t
 
Ën
 = 
	`šŒev32ifbe
(
is
->
Ëngth
);

243 ià(
sucûss
) *success = 1;

246 ià(
pos
 < (
Ën
-1)è
	`št£tMoveTa
(
is
,pos+1,pos);

247 
is
 = 
	`št£tResize
(is,
Ën
-1);

248 
is
->
Ëngth
 = 
	`šŒev32ifbe
(
Ën
-1);

250  
is
;

251 
	}
}

254 
ušt8_t
 
	$št£tFšd
(
št£t
 *
is
, 
št64_t
 
v®ue
) {

255 
ušt8_t
 
v®’c
 = 
	`_št£tV®ueEncodšg
(
v®ue
);

256  
v®’c
 <ğ
	`šŒev32ifbe
(
is
->
’codšg
è&& 
	`št£tS—rch
(is,
v®ue
,
NULL
);

257 
	}
}

260 
št64_t
 
	$št£tRªdom
(
št£t
 *
is
) {

261  
	`_št£tG‘
(
is
,
	`¿nd
()%
	`šŒev32ifbe
(is->
Ëngth
));

262 
	}
}

266 
ušt8_t
 
	$št£tG‘
(
št£t
 *
is
, 
ušt32_t
 
pos
, 
št64_t
 *
v®ue
) {

267 ià(
pos
 < 
	`šŒev32ifbe
(
is
->
Ëngth
)) {

268 *
v®ue
 = 
	`_št£tG‘
(
is
,
pos
);

272 
	}
}

275 
ušt32_t
 
	$št£tL’
(cÚ¡ 
št£t
 *
is
) {

276  
	`šŒev32ifbe
(
is
->
Ëngth
);

277 
	}
}

280 
size_t
 
	$št£tBlobL’
(
št£t
 *
is
) {

281  (
št£t
)+
	`šŒev32ifbe
(
is
->
Ëngth
)*šŒev32ifbe(is->
’codšg
);

282 
	}
}

284 #ifdeà
REDIS_TEST


285 
	~<sys/time.h
>

286 
	~<time.h
>

289 
	$št£tR•r
(
št£t
 *
is
) {

290 
ušt32_t
 
i
 = 0; i < 
	`šŒev32ifbe
(
is
->
Ëngth
); i++) {

291 
	`´štf
("%Îd\n", (
ušt64_t
)
	`_št£tG‘
(
is
,
i
));

293 
	`´štf
("\n");

294 
	}
}

296 
	$”rÜ
(*
”r
) {

297 
	`´štf
("%s\n", 
”r
);

298 
	`ex™
(1);

299 
	}
}

302 
	$ok
() {

303 
	`´štf
("OK\n");

304 
	}
}

306 
	$u£c
() {

307 
timev®
 
tv
;

308 
	`g‘timeofday
(&
tv
,
NULL
);

309  ((()
tv
.
tv_£c
)*1000000)+tv.
tv_u£c
;

310 
	}
}

312 
	#as£¹
(
_e
è((_e)?()0:(
	`_as£¹
(#_e,
__FILE__
,
__LINE__
),
	`ex™
(1)))

	)

313 
	$_as£¹
(*
e¡r
, *
fe
, 
lše
) {

314 
	`´štf
("\n\n=== ASSERTION FAILED ===\n");

315 
	`´štf
("==> %s:%d '%s' i nÙrue\n",
fe
,
lše
,
e¡r
);

316 
	}
}

318 
št£t
 *
	$ü—‹S‘
(
b™s
, 
size
) {

319 
ušt64_t
 
mask
 = (1<<
b™s
)-1;

320 
ušt64_t
 
v®ue
;

321 
št£t
 *
is
 = 
	`št£tNew
();

323 
i
 = 0; i < 
size
; i++) {

324 ià(
b™s
 > 32) {

325 
v®ue
 = (
	`¿nd
()*¿nd()è& 
mask
;

327 
v®ue
 = 
	`¿nd
(è& 
mask
;

329 
is
 = 
	`št£tAdd
(is,
v®ue
,
NULL
);

331  
is
;

332 
	}
}

334 
	$checkCÚsi¡’cy
(
št£t
 *
is
) {

335 
ušt32_t
 
i
 = 0; i < (
	`šŒev32ifbe
(
is
->
Ëngth
)-1); i++) {

336 
ušt32_t
 
’codšg
 = 
	`šŒev32ifbe
(
is
->encoding);

338 ià(
’codšg
 =ğ
INTSET_ENC_INT16
) {

339 
št16_t
 *
i16
 = (št16_t*)
is
->
cÚ‹Ás
;

340 
	`as£¹
(
i16
[
i
] < i16[i+1]);

341 } ià(
’codšg
 =ğ
INTSET_ENC_INT32
) {

342 
št32_t
 *
i32
 = (št32_t*)
is
->
cÚ‹Ás
;

343 
	`as£¹
(
i32
[
i
] < i32[i+1]);

345 
št64_t
 *
i64
 = (št64_t*)
is
->
cÚ‹Ás
;

346 
	`as£¹
(
i64
[
i
] < i64[i+1]);

349 
	}
}

351 
	#UNUSED
(
x
è()(x)

	)

352 
	$št£tTe¡
(
¬gc
, **
¬gv
) {

353 
ušt8_t
 
sucûss
;

354 
i
;

355 
št£t
 *
is
;

356 
	`¤ªd
(
	`time
(
NULL
));

358 
	`UNUSED
(
¬gc
);

359 
	`UNUSED
(
¬gv
);

361 
	`´štf
("Valueƒncodings: "); {

362 
	`as£¹
(
	`_št£tV®ueEncodšg
(-32768è=ğ
INTSET_ENC_INT16
);

363 
	`as£¹
(
	`_št£tV®ueEncodšg
(+32767è=ğ
INTSET_ENC_INT16
);

364 
	`as£¹
(
	`_št£tV®ueEncodšg
(-32769è=ğ
INTSET_ENC_INT32
);

365 
	`as£¹
(
	`_št£tV®ueEncodšg
(+32768è=ğ
INTSET_ENC_INT32
);

366 
	`as£¹
(
	`_št£tV®ueEncodšg
(-2147483648è=ğ
INTSET_ENC_INT32
);

367 
	`as£¹
(
	`_št£tV®ueEncodšg
(+2147483647è=ğ
INTSET_ENC_INT32
);

368 
	`as£¹
(
	`_št£tV®ueEncodšg
(-2147483649è=ğ
INTSET_ENC_INT64
);

369 
	`as£¹
(
	`_št£tV®ueEncodšg
(+2147483648è=ğ
INTSET_ENC_INT64
);

370 
	`as£¹
(
	`_št£tV®ueEncodšg
(-9223372036854775808ull) ==

371 
INTSET_ENC_INT64
);

372 
	`as£¹
(
	`_št£tV®ueEncodšg
(+9223372036854775807ull) ==

373 
INTSET_ENC_INT64
);

374 
	`ok
();

377 
	`´štf
("Basic‡dding: "); {

378 
is
 = 
	`št£tNew
();

379 
is
 = 
	`št£tAdd
(is,5,&
sucûss
); 
	`as£¹
(success);

380 
is
 = 
	`št£tAdd
(is,6,&
sucûss
); 
	`as£¹
(success);

381 
is
 = 
	`št£tAdd
(is,4,&
sucûss
); 
	`as£¹
(success);

382 
is
 = 
	`št£tAdd
(is,4,&
sucûss
); 
	`as£¹
(!success);

383 
	`ok
();

386 
	`´štf
("Large‚umber of„andom‡dds: "); {

387 
ušt32_t
 
š£¹s
 = 0;

388 
is
 = 
	`št£tNew
();

389 
i
 = 0; i < 1024; i++) {

390 
is
 = 
	`št£tAdd
(is,
	`¿nd
()%0x800,&
sucûss
);

391 ià(
sucûss
è
š£¹s
++;

393 
	`as£¹
(
	`šŒev32ifbe
(
is
->
Ëngth
è=ğ
š£¹s
);

394 
	`checkCÚsi¡’cy
(
is
);

395 
	`ok
();

398 
	`´štf
("Upgrade from int16o int32: "); {

399 
is
 = 
	`št£tNew
();

400 
is
 = 
	`št£tAdd
(is,32,
NULL
);

401 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT16
);

402 
is
 = 
	`št£tAdd
(is,65535,
NULL
);

403 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT32
);

404 
	`as£¹
(
	`št£tFšd
(
is
,32));

405 
	`as£¹
(
	`št£tFšd
(
is
,65535));

406 
	`checkCÚsi¡’cy
(
is
);

408 
is
 = 
	`št£tNew
();

409 
is
 = 
	`št£tAdd
(is,32,
NULL
);

410 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT16
);

411 
is
 = 
	`št£tAdd
(is,-65535,
NULL
);

412 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT32
);

413 
	`as£¹
(
	`št£tFšd
(
is
,32));

414 
	`as£¹
(
	`št£tFšd
(
is
,-65535));

415 
	`checkCÚsi¡’cy
(
is
);

416 
	`ok
();

419 
	`´štf
("Upgrade from int16o int64: "); {

420 
is
 = 
	`št£tNew
();

421 
is
 = 
	`št£tAdd
(is,32,
NULL
);

422 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT16
);

423 
is
 = 
	`št£tAdd
(is,4294967295,
NULL
);

424 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT64
);

425 
	`as£¹
(
	`št£tFšd
(
is
,32));

426 
	`as£¹
(
	`št£tFšd
(
is
,4294967295));

427 
	`checkCÚsi¡’cy
(
is
);

429 
is
 = 
	`št£tNew
();

430 
is
 = 
	`št£tAdd
(is,32,
NULL
);

431 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT16
);

432 
is
 = 
	`št£tAdd
(is,-4294967295,
NULL
);

433 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT64
);

434 
	`as£¹
(
	`št£tFšd
(
is
,32));

435 
	`as£¹
(
	`št£tFšd
(
is
,-4294967295));

436 
	`checkCÚsi¡’cy
(
is
);

437 
	`ok
();

440 
	`´štf
("Upgrade from int32o int64: "); {

441 
is
 = 
	`št£tNew
();

442 
is
 = 
	`št£tAdd
(is,65535,
NULL
);

443 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT32
);

444 
is
 = 
	`št£tAdd
(is,4294967295,
NULL
);

445 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT64
);

446 
	`as£¹
(
	`št£tFšd
(
is
,65535));

447 
	`as£¹
(
	`št£tFšd
(
is
,4294967295));

448 
	`checkCÚsi¡’cy
(
is
);

450 
is
 = 
	`št£tNew
();

451 
is
 = 
	`št£tAdd
(is,65535,
NULL
);

452 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT32
);

453 
is
 = 
	`št£tAdd
(is,-4294967295,
NULL
);

454 
	`as£¹
(
	`šŒev32ifbe
(
is
->
’codšg
è=ğ
INTSET_ENC_INT64
);

455 
	`as£¹
(
	`št£tFšd
(
is
,65535));

456 
	`as£¹
(
	`št£tFšd
(
is
,-4294967295));

457 
	`checkCÚsi¡’cy
(
is
);

458 
	`ok
();

461 
	`´štf
("Stress†ookups: "); {

462 
num
 = 100000, 
size
 = 10000;

463 
i
, 
b™s
 = 20;

464 
¡¬t
;

465 
is
 = 
	`ü—‹S‘
(
b™s
,
size
);

466 
	`checkCÚsi¡’cy
(
is
);

468 
¡¬t
 = 
	`u£c
();

469 
i
 = 0; i < 
num
; i++è
	`št£tS—rch
(
is
,
	`¿nd
(è% ((1<<
b™s
)-1),
NULL
);

470 
	`´štf
("%ld†ookups, %ldƒlement set, %lldusec\n",

471 
num
,
size
,
	`u£c
()-
¡¬t
);

474 
	`´štf
("Stress‡dd+delete: "); {

475 
i
, 
v1
, 
v2
;

476 
is
 = 
	`št£tNew
();

477 
i
 = 0; i < 0xffff; i++) {

478 
v1
 = 
	`¿nd
() % 0xfff;

479 
is
 = 
	`št£tAdd
(is,
v1
,
NULL
);

480 
	`as£¹
(
	`št£tFšd
(
is
,
v1
));

482 
v2
 = 
	`¿nd
() % 0xfff;

483 
is
 = 
	`št£tRemove
(is,
v2
,
NULL
);

484 
	`as£¹
(!
	`št£tFšd
(
is
,
v2
));

486 
	`checkCÚsi¡’cy
(
is
);

487 
	`ok
();

491 
	}
}

	@intset.h

31 #iâdeà
__INTSET_H


32 
	#__INTSET_H


	)

33 
	~<¡dšt.h
>

35 
	sšt£t
 {

36 
ušt32_t
 
	m’codšg
;

37 
ušt32_t
 
	mËngth
;

38 
št8_t
 
	mcÚ‹Ás
[];

39 } 
	tšt£t
;

41 
št£t
 *
št£tNew
();

42 
št£t
 *
št£tAdd
(št£ˆ*
is
, 
št64_t
 
v®ue
, 
ušt8_t
 *
sucûss
);

43 
št£t
 *
št£tRemove
(št£ˆ*
is
, 
št64_t
 
v®ue
, *
sucûss
);

44 
ušt8_t
 
št£tFšd
(
št£t
 *
is
, 
št64_t
 
v®ue
);

45 
št64_t
 
št£tRªdom
(
št£t
 *
is
);

46 
ušt8_t
 
št£tG‘
(
št£t
 *
is
, 
ušt32_t
 
pos
, 
št64_t
 *
v®ue
);

47 
ušt32_t
 
št£tL’
(cÚ¡ 
št£t
 *
is
);

48 
size_t
 
št£tBlobL’
(
št£t
 *
is
);

50 #ifdeà
REDIS_TEST


51 
št£tTe¡
(
¬gc
, *
¬gv
[]);

	@latency.c

36 
	~"£rv”.h
"

39 
	$diùSŒšgKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
) {

40 
	`UNUSED
(
´ivd©a
);

41  
	`¡rcmp
(
key1
,
key2
) == 0;

42 
	}
}

44 
ušt64_t
 
	$diùSŒšgHash
(cÚ¡ *
key
) {

45  
	`diùG’HashFunùiÚ
(
key
, 
	`¡¾’
(key));

46 
	}
}

48 
diùVªÏF»e
(*
´ivd©a
, *
v®
);

50 
diùTy³
 
	gÏ‹ncyTimeS”›sDiùTy³
 = {

51 
diùSŒšgHash
,

52 
NULL
,

53 
NULL
,

54 
diùSŒšgKeyCom·»
,

55 
diùVªÏF»e
,

56 
diùVªÏF»e


61 #ifdeà
__lšux__


64 
	$THPIsEÇbËd
() {

65 
buf
[1024];

67 
FILE
 *
å
 = 
	`fİ’
("/sys/kernel/mm/transparent_hugepage/enabled","r");

68 ià(!
å
)  0;

69 ià(
	`fg‘s
(
buf
,(buf),
å
è=ğ
NULL
) {

70 
	`fşo£
(
å
);

73 
	`fşo£
(
å
);

74  (
	`¡r¡r
(
buf
,"[Ãv”]"è=ğ
NULL
) ? 1 : 0;

75 
	}
}

81 
	$THPG‘AnÚHugePagesSize
() {

82  
	`zm®loc_g‘_sm­_by‹s_by_f›ld
("AnonHugePages:",-1);

83 
	}
}

90 
	$Ï‹ncyMÚ™ÜIn™
() {

91 
£rv”
.
Ï‹ncy_ev’ts
 = 
	`diùC»©e
(&
Ï‹ncyTimeS”›sDiùTy³
,
NULL
);

92 
	}
}

98 
	$Ï‹ncyAddSam¶e
(cÚ¡ *
ev’t
, 
m¡ime_t
 
Ï‹ncy
) {

99 
Ï‹ncyTimeS”›s
 *
ts
 = 
	`diùF‘chV®ue
(
£rv”
.
Ï‹ncy_ev’ts
,
ev’t
);

100 
time_t
 
now
 = 
	`time
(
NULL
);

101 
´ev
;

104 ià(
ts
 =ğ
NULL
) {

105 
ts
 = 
	`zm®loc
((*ts));

106 
ts
->
idx
 = 0;

107 
ts
->
max
 = 0;

108 
	`mem£t
(
ts
->
§m¶es
,0,(ts->samples));

109 
	`diùAdd
(
£rv”
.
Ï‹ncy_ev’ts
,
	`z¡rdup
(
ev’t
),
ts
);

112 ià(
Ï‹ncy
 > 
ts
->
max
)s->max =†atency;

116 
´ev
 = (
ts
->
idx
 + 
LATENCY_TS_LEN
 - 1) % LATENCY_TS_LEN;

117 ià(
ts
->
§m¶es
[
´ev
].
time
 =ğ
now
) {

118 ià(
Ï‹ncy
 > 
ts
->
§m¶es
[
´ev
].latency)

119 
ts
->
§m¶es
[
´ev
].
Ï‹ncy
 =†atency;

123 
ts
->
§m¶es
[ts->
idx
].
time
 = 
	`time
(
NULL
);

124 
ts
->
§m¶es
[ts->
idx
].
Ï‹ncy
 =†atency;

126 
ts
->
idx
++;

127 ià(
ts
->
idx
 =ğ
LATENCY_TS_LEN
)s->idx = 0;

128 
	}
}

135 
	$Ï‹ncyRe£tEv’t
(*
ev’t_to_»£t
) {

136 
diùI‹¿tÜ
 *
di
;

137 
diùEÁry
 *
de
;

138 
»£ts
 = 0;

140 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
Ï‹ncy_ev’ts
);

141 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

142 *
ev’t
 = 
	`diùG‘Key
(
de
);

144 ià(
ev’t_to_»£t
 =ğ
NULL
 || 
	`¡rÿ£cmp
(
ev’t
,event_to_reset) == 0) {

145 
	`diùD–‘e
(
£rv”
.
Ï‹ncy_ev’ts
, 
ev’t
);

146 
»£ts
++;

149 
	`diùR–—£I‹¿tÜ
(
di
);

150  
»£ts
;

151 
	}
}

160 
	$ª®yzeL©’cyFÜEv’t
(*
ev’t
, 
Ï‹ncySts
 *
ls
) {

161 
Ï‹ncyTimeS”›s
 *
ts
 = 
	`diùF‘chV®ue
(
£rv”
.
Ï‹ncy_ev’ts
,
ev’t
);

162 
j
;

163 
ušt64_t
 
sum
;

165 
ls
->
®l_time_high
 = 
ts
 ?s->
max
 : 0;

166 
ls
->
avg
 = 0;

167 
ls
->
mš
 = 0;

168 
ls
->
max
 = 0;

169 
ls
->
mad
 = 0;

170 
ls
->
§m¶es
 = 0;

171 
ls
->
³riod
 = 0;

172 ià(!
ts
) ;

175 
sum
 = 0;

176 
j
 = 0; j < 
LATENCY_TS_LEN
; j++) {

177 ià(
ts
->
§m¶es
[
j
].
time
 == 0) ;

178 
ls
->
§m¶es
++;

179 ià(
ls
->
§m¶es
 == 1) {

180 
ls
->
mš
 =†s->
max
 = 
ts
->
§m¶es
[
j
].
Ï‹ncy
;

182 ià(
ls
->
mš
 > 
ts
->
§m¶es
[
j
].
Ï‹ncy
)

183 
ls
->
mš
 = 
ts
->
§m¶es
[
j
].
Ï‹ncy
;

184 ià(
ls
->
max
 < 
ts
->
§m¶es
[
j
].
Ï‹ncy
)

185 
ls
->
max
 = 
ts
->
§m¶es
[
j
].
Ï‹ncy
;

187 
sum
 +ğ
ts
->
§m¶es
[
j
].
Ï‹ncy
;

190 ià(
ls
->
³riod
 =ğ0 || 
ts
->
§m¶es
[
j
].
time
 <†s->period)

191 
ls
->
³riod
 = 
ts
->
§m¶es
[
j
].
time
;

197 ià(
ls
->
§m¶es
) {

198 
ls
->
avg
 = 
sum
 /†s->
§m¶es
;

199 
ls
->
³riod
 = 
	`time
(
NULL
) -†s->period;

200 ià(
ls
->
³riod
 == 0)†s->period = 1;

204 
sum
 = 0;

205 
j
 = 0; j < 
LATENCY_TS_LEN
; j++) {

206 
št64_t
 
d–
;

208 ià(
ts
->
§m¶es
[
j
].
time
 == 0) ;

209 
d–
 = (
št64_t
)
ls
->
avg
 - 
ts
->
§m¶es
[
j
].
Ï‹ncy
;

210 ià(
d–
 < 0) delta = -delta;

211 
sum
 +ğ
d–
;

213 ià(
ls
->
§m¶es
èls->
mad
 = 
sum
 /†s->samples;

214 
	}
}

217 
sds
 
	$ü—‹L©’cyR•Üt
() {

218 
sds
 
»pÜt
 = 
	`sd£m±y
();

219 
advi£_b‘‹r_vm
 = 0;

220 
advi£_¦owlog_’abËd
 = 0;

221 
advi£_¦owlog_tunšg
 = 0;

222 
advi£_¦owlog_š¥eù
 = 0;

223 
advi£_disk_cÚ‹ÁiÚ
 = 0;

224 
advi£_scheduËr
 = 0;

225 
advi£_d©a_wr™eback
 = 0;

226 
advi£_no_­³ndfsync
 = 0;

227 
advi£_loÿl_disk
 = 0;

228 
advi£_ssd
 = 0;

229 
advi£_wr™e_lßd_šfo
 = 0;

230 
advi£_hz
 = 0;

231 
advi£_Ïrge_objeùs
 = 0;

232 
advi£_mass_eviùiÚ
 = 0;

233 
advi£_»Ïx_fsync_pŞicy
 = 0;

234 
advi£_di§bË_thp
 = 0;

235 
adviûs
 = 0;

239 ià(
	`diùSize
(
£rv”
.
Ï‹ncy_ev’ts
) == 0 &&

240 
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
 == 0)

242 
»pÜt
 = 
	`sdsÿt
(report,"I'm sorry, Dave, I can't dohat. Latency monitoring is disabled inhis Redis instance. You may use \"CONFIG SET†atency-monitor-threshold <milliseconds>.\" in orderoƒnable it. If we weren't in‡ deep space mission I'd suggestoake‡†ook‡t http://redis.io/topics/latency-monitor.\n");

243  
»pÜt
;

248 
diùI‹¿tÜ
 *
di
;

249 
diùEÁry
 *
de
;

250 
ev’Šum
 = 0;

252 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
Ï‹ncy_ev’ts
);

253 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

254 *
ev’t
 = 
	`diùG‘Key
(
de
);

255 
Ï‹ncyTimeS”›s
 *
ts
 = 
	`diùG‘V®
(
de
);

256 
Ï‹ncySts
 
ls
;

258 ià(
ts
 =ğ
NULL
) ;

259 
ev’Šum
++;

260 ià(
ev’Šum
 == 1) {

261 
»pÜt
 = 
	`sdsÿt
(report,"Dave, I have observed†atency spikes inhis Redis instance. You don't mindalking‡bout it, do you Dave?\n\n");

263 
	`ª®yzeL©’cyFÜEv’t
(
ev’t
,&
ls
);

265 
»pÜt
 = 
	`sdsÿrštf
(report,

267 
ev’Šum
, 
ev’t
,

268 
ls
.
§m¶es
,

269 (è
ls
.
avg
,

270 (è
ls
.
mad
,

271 (è
ls
.
³riod
/ls.
§m¶es
,

272 (è
ts
->
max
);

275 ià(!
	`¡rÿ£cmp
(
ev’t
,"fork")) {

276 *
fÜk_qu®™y
;

277 ià(
£rv”
.
¡©_fÜk_¿‹
 < 10) {

278 
fÜk_qu®™y
 = "terrible";

279 
advi£_b‘‹r_vm
 = 1;

280 
adviûs
++;

281 } ià(
£rv”
.
¡©_fÜk_¿‹
 < 25) {

282 
fÜk_qu®™y
 = "poor";

283 
advi£_b‘‹r_vm
 = 1;

284 
adviûs
++;

285 } ià(
£rv”
.
¡©_fÜk_¿‹
 < 100) {

286 
fÜk_qu®™y
 = "good";

288 
fÜk_qu®™y
 = "excellent";

290 
»pÜt
 = 
	`sdsÿrštf
(report,

291 " FÜk„©i %.2àGB/£ø(%s).", 
£rv”
.
¡©_fÜk_¿‹
,

292 
fÜk_qu®™y
);

296 ià(!
	`¡rÿ£cmp
(
ev’t
,"command")) {

297 ià(
£rv”
.
¦owlog_log_¦ow”_thª
 < 0) {

298 
advi£_¦owlog_’abËd
 = 1;

299 
adviûs
++;

300 } ià(
£rv”
.
¦owlog_log_¦ow”_thª
/1000 >

301 
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
)

303 
advi£_¦owlog_tunšg
 = 1;

304 
adviûs
++;

306 
advi£_¦owlog_š¥eù
 = 1;

307 
advi£_Ïrge_objeùs
 = 1;

308 
adviûs
 += 2;

312 ià(!
	`¡rÿ£cmp
(
ev’t
,"fast-command")) {

313 
advi£_scheduËr
 = 1;

314 
adviûs
++;

318 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-write-pending-fsync")) {

319 
advi£_loÿl_disk
 = 1;

320 
advi£_disk_cÚ‹ÁiÚ
 = 1;

321 
advi£_ssd
 = 1;

322 
advi£_d©a_wr™eback
 = 1;

323 
adviûs
 += 4;

326 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-write-active-child")) {

327 
advi£_no_­³ndfsync
 = 1;

328 
advi£_d©a_wr™eback
 = 1;

329 
advi£_ssd
 = 1;

330 
adviûs
 += 3;

333 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-write-alone")) {

334 
advi£_loÿl_disk
 = 1;

335 
advi£_d©a_wr™eback
 = 1;

336 
advi£_ssd
 = 1;

337 
adviûs
 += 3;

340 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-fsync-always")) {

341 
advi£_»Ïx_fsync_pŞicy
 = 1;

342 
adviûs
++;

345 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-fstat") ||

346 !
	`¡rÿ£cmp
(
ev’t
,"rdb-unlik-temp-file")) {

347 
advi£_disk_cÚ‹ÁiÚ
 = 1;

348 
advi£_loÿl_disk
 = 1;

349 
adviûs
 += 2;

352 ià(!
	`¡rÿ£cmp
(
ev’t
,"aof-rewrite-diff-write") ||

353 !
	`¡rÿ£cmp
(
ev’t
,"aof-rename")) {

354 
advi£_wr™e_lßd_šfo
 = 1;

355 
advi£_d©a_wr™eback
 = 1;

356 
advi£_ssd
 = 1;

357 
advi£_loÿl_disk
 = 1;

358 
adviûs
 += 4;

362 ià(!
	`¡rÿ£cmp
(
ev’t
,"expire-cycle")) {

363 
advi£_hz
 = 1;

364 
advi£_Ïrge_objeùs
 = 1;

365 
adviûs
 += 2;

369 ià(!
	`¡rÿ£cmp
(
ev’t
,"eviction-del")) {

370 
advi£_Ïrge_objeùs
 = 1;

371 
adviûs
++;

374 ià(!
	`¡rÿ£cmp
(
ev’t
,"eviction-cycle")) {

375 
advi£_mass_eviùiÚ
 = 1;

376 
adviûs
++;

379 
»pÜt
 = 
	`sdsÿ’
(report,"\n",1);

381 
	`diùR–—£I‹¿tÜ
(
di
);

384 ià(
	`THPG‘AnÚHugePagesSize
() > 0) {

385 
advi£_di§bË_thp
 = 1;

386 
adviûs
++;

389 ià(
ev’Šum
 =ğ0 && 
adviûs
 == 0) {

390 
»pÜt
 = 
	`sdsÿt
(report,"Dave,‚o†atency spike was observed duringhe†ifetime ofhis Redis instance,‚ot inhe slightest bit. I honestlyhink you oughto sit down calmly,ake‡ stress…ill,‡ndhinkhings over.\n");

391 } ià(
ev’Šum
 > 0 && 
adviûs
 == 0) {

392 
»pÜt
 = 
	`sdsÿt
(report,"\nWhilehere‡re†atencyƒvents†ogged, I'm‚ot‡bleo suggest‡nyƒasy fix. Please usehe Redis communityo get some help,…rovidinghis„eport in your help„equest.\n");

397 
»pÜt
 = 
	`sdsÿt
(report,"\nI have‡ few‡dvices for you:\n\n");

398 ià(
advi£_b‘‹r_vm
) {

399 
»pÜt
 = 
	`sdsÿt
(report,"- If you‡re using‡ virtual machine, consider upgrading it with‡ faster one using‡n hypervisiorhat…rovides†ess†atency during fork() calls. Xen is knowno have…oor fork()…erformance. Even inhe context ofhe same VM…rovider, certain kinds of instances canƒxecute fork fasterhan others.\n");

403 ià(
advi£_¦owlog_’abËd
) {

404 
»pÜt
 = 
	`sdsÿrštf
Ô•Üt,"- Th”¬Ï‹ncy issue w™h…Ù’tŸÎy slow commªd you‡» usšg. TryØ’abËhSlow Log Redi ã©u» usšghcommªd 'CONFIG SET slowlog-log-¦ow”-thª %Îu'. IàthSlow†og i di§bËd Redi i nÙ‡bËØlog slow commªd executiÚ fÜ you.\n", ()
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
*1000);

407 ià(
advi£_¦owlog_tunšg
) {

408 
»pÜt
 = 
	`sdsÿrštf
Ô•Üt,"- You¸cu¼’ˆSlow Log cÚfigu¿tiÚ oÆy†og ev’t th©‡» slow”hª you¸cÚfigu»d†©’cy mÚ™Üh»shŞd. PËa£ u£ 'CONFIG SET slowlog-log-¦ow”-thª %Îu'.\n", ()
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
*1000);

411 ià(
advi£_¦owlog_š¥eù
) {

412 
»pÜt
 = 
	`sdsÿt
(report,"- Check your Slow Logo understand what‡rehe commands you‡re„unning which‡reoo slowoƒxecute. Please check http://redis.io/commands/slowlog for more information.\n");

416 ià(
advi£_scheduËr
) {

417 
»pÜt
 = 
	`sdsÿt
(report,"- The system is slowoƒxecute Redis code…aths‚ot containing system calls. This usually meanshe system does‚ot…rovide Redis CPUimeo„un for†ong…eriods. You shouldryo:\n"

426 ià(
advi£_loÿl_disk
) {

427 
»pÜt
 = 
	`sdsÿt
(report,"- It is strongly‡dvisedo use†ocal disks for…ersistence,ƒspecially if you‡re using AOF. Remote disks…rovided by…latform-as-a-service…roviders‡re knowno be slow.\n");

430 ià(
advi£_ssd
) {

431 
»pÜt
 = 
	`sdsÿt
(report,"- SSD disks‡re‡bleo„educe fsync†atency,‡ndotalime‚eeded for snapshotting‡nd AOF†og„ewriting (resulting in smaller memory usage‡nd smaller final AOF„ewrite buffer flushes). Withƒxtremely high write†oad SSD disks can be‡ good option. However Redis should…erform„easonably with high†oad using‚ormal disks. Usehis‡dvice‡s‡†ast„esort.\n");

434 ià(
advi£_d©a_wr™eback
) {

435 
»pÜt
 = 
	`sdsÿt
(report,"- Mountingƒxt3/4 filesystems with data=writeback can…rovide‡…erformance boost comparedo data=ordered, howeverhis mode of operation…rovides†ess guarantees,‡nd sometimes it can happenhat‡fter‡ hard crashhe AOF file will have‡n half-written command‡theƒnd‡nd will„equireo be„epaired before Redis„estarts.\n");

438 ià(
advi£_disk_cÚ‹ÁiÚ
) {

439 
»pÜt
 = 
	`sdsÿt
(report,"- Tryo†owerhe disk contention. This is often caused by other disk intensive…rocesses„unning inhe same computer (including other Redis instances).\n");

442 ià(
advi£_no_­³ndfsync
) {

443 
»pÜt
 = 
	`sdsÿt
(report,"- Assuming fromhe…oint of view of data safetyhis is viable in yourƒnvironment, you couldryoƒnablehe 'no-appendfsync-on-rewrite' option, sohat fsync will‚ot be…erformed whilehere is‡ child„ewritinghe AOF file or…roducing‡n RDB file (the moment wherehere is high disk contention).\n");

446 ià(
advi£_»Ïx_fsync_pŞicy
 && 
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_ALWAYS
) {

447 
»pÜt
 = 
	`sdsÿt
(report,"- Your fsync…olicy is seto 'always'. It is very hardo get good…erformances with such‡ setup, if…ossibleryo„elaxhe fsync…olicyo 'onesec'.\n");

450 ià(
advi£_wr™e_lßd_šfo
) {

451 
»pÜt
 = 
	`sdsÿt
(report,"- Latency duringhe AOF‡tomic„ename operation or whenhe final difference is flushedohe AOF file‡theƒnd ofhe„ewrite, sometimes is caused by very high write†oad, causinghe AOF buffero get very†arge. If…ossibleryo send†ess commandso‡ccomplishhe same work, or use Lua scriptso group multiple operations into‡ single EVALSHA call.\n");

454 ià(
advi£_hz
 && 
£rv”
.
hz
 < 100) {

455 
»pÜt
 = 
	`sdsÿt
(report,"- In ordero makehe Redis keysƒxpiring…rocess more incremental,ryo sethe 'hz' configuration…arametero 100 using 'CONFIG SET hz 100'.\n");

458 ià(
advi£_Ïrge_objeùs
) {

459 
»pÜt
 = 
	`sdsÿt
(report,"- Deleting,ƒxpiring orƒvicting (because of maxmemory…olicy)†arge objects is‡ blocking operation. If you have very†arge objectshat‡re often deleted,ƒxpired, orƒvicted,ryo fragmenthose objects into multiple smaller objects.\n");

462 ià(
advi£_mass_eviùiÚ
) {

463 
»pÜt
 = 
	`sdsÿt
(report,"- Sudden changesohe 'maxmemory' setting via 'CONFIG SET', or‡llocation of†arge objects via sets or sorted sets intersections, STORE option of SORT, Redis Cluster†arge keys migrations (RESTORE command), may create sudden memory…ressure forcinghe servero blockryingoƒvict keys. \n");

466 ià(
advi£_di§bË_thp
) {

467 
»pÜt
 = 
	`sdsÿt
(report,"- I detected‡‚on zero‡mount of‡nonymous huge…ages used by your…rocess. This creates very serious†atencyƒvents in different conditions,ƒspecially when Redis is…ersisting on disk. To disable THP support usehe command 'echo‚ever > /sys/kernel/mm/transparent_hugepage/enabled', make sureo‡lso‡dd it into /etc/rc.local sohathe command will beƒxecuted‡gain‡fter‡„eboot. Notehatƒven if you have‡lready disabled THP, you still‚eedo„estarthe Redis…rocesso get„id ofhe huge…ages‡lready created.\n");

471  
»pÜt
;

472 
	}
}

478 
	$Ï‹ncyCommªdR•lyW™hSam¶es
(
ş›Á
 *
c
, 
Ï‹ncyTimeS”›s
 *
ts
) {

479 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

480 
§m¶es
 = 0, 
j
;

482 
j
 = 0; j < 
LATENCY_TS_LEN
; j++) {

483 
i
 = (
ts
->
idx
 + 
j
è% 
LATENCY_TS_LEN
;

485 ià(
ts
->
§m¶es
[
i
].
time
 == 0) ;

486 
	`addR•lyA¼ayL’
(
c
,2);

487 
	`addR•lyLÚgLÚg
(
c
,
ts
->
§m¶es
[
i
].
time
);

488 
	`addR•lyLÚgLÚg
(
c
,
ts
->
§m¶es
[
i
].
Ï‹ncy
);

489 
§m¶es
++;

491 
	`£tDeã¼edA¼ayL’
(
c
,
»¶yËn
,
§m¶es
);

492 
	}
}

496 
	$Ï‹ncyCommªdR•lyW™hL©e¡Ev’ts
(
ş›Á
 *
c
) {

497 
diùI‹¿tÜ
 *
di
;

498 
diùEÁry
 *
de
;

500 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
£rv”
.
Ï‹ncy_ev’ts
));

501 
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
Ï‹ncy_ev’ts
);

502 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

503 *
ev’t
 = 
	`diùG‘Key
(
de
);

504 
Ï‹ncyTimeS”›s
 *
ts
 = 
	`diùG‘V®
(
de
);

505 
Ï¡
 = (
ts
->
idx
 + 
LATENCY_TS_LEN
 - 1) % LATENCY_TS_LEN;

507 
	`addR•lyA¼ayL’
(
c
,4);

508 
	`addR•lyBulkCSŒšg
(
c
,
ev’t
);

509 
	`addR•lyLÚgLÚg
(
c
,
ts
->
§m¶es
[
Ï¡
].
time
);

510 
	`addR•lyLÚgLÚg
(
c
,
ts
->
§m¶es
[
Ï¡
].
Ï‹ncy
);

511 
	`addR•lyLÚgLÚg
(
c
,
ts
->
max
);

513 
	`diùR–—£I‹¿tÜ
(
di
);

514 
	}
}

516 
	#LATENCY_GRAPH_COLS
 80

	)

517 
sds
 
	$Ï‹ncyCommªdG’S·rk–še
(*
ev’t
, 
Ï‹ncyTimeS”›s
 *
ts
) {

518 
j
;

519 
£qu’û
 *
£q
 = 
	`ü—‹S·rklšeSequ’û
();

520 
sds
 
g¿ph
 = 
	`sd£m±y
();

521 
ušt32_t
 
mš
 = 0, 
max
 = 0;

523 
j
 = 0; j < 
LATENCY_TS_LEN
; j++) {

524 
i
 = (
ts
->
idx
 + 
j
è% 
LATENCY_TS_LEN
;

525 
–­£d
;

526 
buf
[64];

528 ià(
ts
->
§m¶es
[
i
].
time
 == 0) ;

530 ià(
£q
->
Ëngth
 == 0) {

531 
mš
 = 
max
 = 
ts
->
§m¶es
[
i
].
Ï‹ncy
;

533 ià(
ts
->
§m¶es
[
i
].
Ï‹ncy
 > 
max
) max =s->samples[i].latency;

534 ià(
ts
->
§m¶es
[
i
].
Ï‹ncy
 < 
mš
) min =s->samples[i].latency;

538 
–­£d
 = 
	`time
(
NULL
è- 
ts
->
§m¶es
[
i
].
time
;

539 ià(
–­£d
 < 60)

540 
	`¢´štf
(
buf
,(buf),"%ds",
–­£d
);

541 ià(
–­£d
 < 3600)

542 
	`¢´štf
(
buf
,(buf),"%dm",
–­£d
/60);

543 ià(
–­£d
 < 3600*24)

544 
	`¢´štf
(
buf
,(buf),"%dh",
–­£d
/3600);

546 
	`¢´štf
(
buf
,(buf),"%dd",
–­£d
/(3600*24));

547 
	`¥¬klšeSequ’ûAddSam¶e
(
£q
,
ts
->
§m¶es
[
i
].
Ï‹ncy
,
buf
);

550 
g¿ph
 = 
	`sdsÿrštf
(graph,

551 "% - high %lu ms,†ow %lu m ×Îimhigh %lu ms)\n", 
ev’t
,

552 (è
max
, (è
mš
, (è
ts
->max);

553 
j
 = 0; j < 
LATENCY_GRAPH_COLS
; j++)

554 
g¿ph
 = 
	`sdsÿ’
(graph,"-",1);

555 
g¿ph
 = 
	`sdsÿ’
(graph,"\n",1);

556 
g¿ph
 = 
	`¥¬klšeR’d”
(g¿ph,
£q
,
LATENCY_GRAPH_COLS
,4,
SPARKLINE_FILL
);

557 
	`ä“S·rklšeSequ’û
(
£q
);

558  
g¿ph
;

559 
	}
}

569 
	$Ï‹ncyCommªd
(
ş›Á
 *
c
) {

570 cÚ¡ *
h–p
[] = {

578 
NULL


580 
Ï‹ncyTimeS”›s
 *
ts
;

582 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"hi¡Üy"è&& c->
¬gc
 == 3) {

584 
ts
 = 
	`diùF‘chV®ue
(
£rv”
.
Ï‹ncy_ev’ts
,
c
->
¬gv
[2]->
±r
);

585 ià(
ts
 =ğ
NULL
) {

586 
	`addR•lyA¼ayL’
(
c
,0);

588 
	`Ï‹ncyCommªdR•lyW™hSam¶es
(
c
,
ts
);

590 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g¿ph"è&& c->
¬gc
 == 3) {

592 
sds
 
g¿ph
;

593 
diùEÁry
 *
de
;

594 *
ev’t
;

596 
de
 = 
	`diùFšd
(
£rv”
.
Ï‹ncy_ev’ts
,
c
->
¬gv
[2]->
±r
);

597 ià(
de
 =ğ
NULL
è
nod©«¼
;

598 
ts
 = 
	`diùG‘V®
(
de
);

599 
ev’t
 = 
	`diùG‘Key
(
de
);

601 
g¿ph
 = 
	`Ï‹ncyCommªdG’S·rk–še
(
ev’t
,
ts
);

602 
	`addR•lyV”b©im
(
c
,
g¿ph
,
	`sd¦’
(graph),"txt");

603 
	`sdsä“
(
g¿ph
);

604 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"Ï‹¡"è&& c->
¬gc
 == 2) {

606 
	`Ï‹ncyCommªdR•lyW™hL©e¡Ev’ts
(
c
);

607 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"doùÜ"è&& c->
¬gc
 == 2) {

609 
sds
 
»pÜt
 = 
	`ü—‹L©’cyR•Üt
();

611 
	`addR•lyV”b©im
(
c
,
»pÜt
,
	`sd¦’
(report),"txt");

612 
	`sdsä“
(
»pÜt
);

613 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»£t"è&& c->
¬gc
 >= 2) {

615 ià(
c
->
¬gc
 == 2) {

616 
	`addR•lyLÚgLÚg
(
c
,
	`Ï‹ncyRe£tEv’t
(
NULL
));

618 
j
, 
»£ts
 = 0;

620 
j
 = 2; j < 
c
->
¬gc
; j++)

621 
»£ts
 +ğ
	`Ï‹ncyRe£tEv’t
(
c
->
¬gv
[
j
]->
±r
);

622 
	`addR•lyLÚgLÚg
(
c
,
»£ts
);

624 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"h–p"è&& c->
¬gc
 >= 2) {

625 
	`addR•lyH–p
(
c
, 
h–p
);

627 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

631 
nod©«¼
:

634 
	`addR•lyE¼ÜFÜm©
(
c
,

635 "NØ§m¶e avaabË fÜƒv’ˆ'%s'", (*è
c
->
¬gv
[2]->
±r
);

636 
	}
}

	@latency.h

34 #iâdeà
__LATENCY_H


35 
	#__LATENCY_H


	)

37 
	#LATENCY_TS_LEN
 160

	)

41 
	sÏ‹ncySam¶e
 {

42 
št32_t
 
	mtime
;

43 
ušt32_t
 
	mÏ‹ncy
;

47 
	sÏ‹ncyTimeS”›s
 {

48 
	midx
;

49 
ušt32_t
 
	mmax
;

50 
Ï‹ncySam¶e
 
	m§m¶es
[
LATENCY_TS_LEN
];

54 
	sÏ‹ncySts
 {

55 
ušt32_t
 
	m®l_time_high
;

56 
ušt32_t
 
	mavg
;

57 
ušt32_t
 
	mmš
;

58 
ušt32_t
 
	mmax
;

59 
ušt32_t
 
	mmad
;

60 
ušt32_t
 
	m§m¶es
;

61 
time_t
 
	m³riod
;

64 
Ï‹ncyMÚ™ÜIn™
();

65 
Ï‹ncyAddSam¶e
(cÚ¡ *
ev’t
, 
m¡ime_t
 
Ï‹ncy
);

66 
THPIsEÇbËd
();

71 
	#Ï‹ncyS¹MÚ™Ü
(
v¬
èià(
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
) { \

72 
v¬
 = 
	`m¡ime
(); \

74 
v¬
 = 0; \

75 }

	)

79 
	#Ï‹ncyEndMÚ™Ü
(
v¬
èià(
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
) { \

80 
v¬
 = 
	`m¡ime
() - var; \

81 }

	)

84 
	#Ï‹ncyAddSam¶eIfN“ded
(
ev’t
,
v¬
) \

85 ià(
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
 && \

86 (
v¬
è>ğ
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
) \

87 
	`Ï‹ncyAddSam¶e
((
ev’t
),(
v¬
));

	)

90 
	#Ï‹ncyRemoveNe¡edEv’t
(
ev’t_v¬
,
Ã¡ed_v¬
) \

91 
ev’t_v¬
 +ğ
Ã¡ed_v¬
;

	)

	@lazyfree.c

1 
	~"£rv”.h
"

2 
	~"bio.h
"

3 
	~"©omicv¬.h
"

4 
	~"şu¡”.h
"

6 
size_t
 
	gÏzyä“_objeùs
 = 0;

7 
±h»ad_mu‹x_t
 
	gÏzyä“_objeùs_mu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

10 
size_t
 
	$Ïzyä“G‘P’dšgObjeùsCouÁ
() {

11 
size_t
 
aux
;

12 
	`©omicG‘
(
Ïzyä“_objeùs
,
aux
);

13  
aux
;

14 
	}
}

31 
size_t
 
	$Ïzyä“G‘F»eEffÜt
(
robj
 *
obj
) {

32 ià(
obj
->
ty³
 =ğ
OBJ_LIST
) {

33 
quickli¡
 *
ql
 = 
obj
->
±r
;

34  
ql
->
Ën
;

35 } ià(
obj
->
ty³
 =ğ
OBJ_SET
 && obj->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

36 
diù
 *
ht
 = 
obj
->
±r
;

37  
	`diùSize
(
ht
);

38 } ià(
obj
->
ty³
 =ğ
OBJ_ZSET
 && obj->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
){

39 
z£t
 *
zs
 = 
obj
->
±r
;

40  
zs
->
z¦
->
Ëngth
;

41 } ià(
obj
->
ty³
 =ğ
OBJ_HASH
 && obj->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

42 
diù
 *
ht
 = 
obj
->
±r
;

43  
	`diùSize
(
ht
);

47 
	}
}

53 
	#LAZYFREE_THRESHOLD
 64

	)

54 
	$dbAsyncD–‘e
(
»disDb
 *
db
, 
robj
 *
key
) {

57 ià(
	`diùSize
(
db
->
expœes
è> 0è
	`diùD–‘e
(db->expœes,
key
->
±r
);

62 
diùEÁry
 *
de
 = 
	`diùUÆšk
(
db
->
diù
,
key
->
±r
);

63 ià(
de
) {

64 
robj
 *
v®
 = 
	`diùG‘V®
(
de
);

65 
size_t
 
ä“_effÜt
 = 
	`Ïzyä“G‘F»eEffÜt
(
v®
);

75 ià(
ä“_effÜt
 > 
LAZYFREE_THRESHOLD
 && 
v®
->
»fcouÁ
 == 1) {

76 
	`©omicInü
(
Ïzyä“_objeùs
,1);

77 
	`bioC»©eBackgroundJob
(
BIO_LAZY_FREE
,
v®
,
NULL
,NULL);

78 
	`diùS‘V®
(
db
->
diù
,
de
,
NULL
);

84 ià(
de
) {

85 
	`diùF»eUÆškedEÁry
(
db
->
diù
,
de
);

86 ià(
£rv”
.
şu¡”_’abËd
è
	`¦ÙToKeyD–
(
key
->
±r
);

91 
	}
}

94 
	$ä“ObjAsync
(
robj
 *
o
) {

95 
size_t
 
ä“_effÜt
 = 
	`Ïzyä“G‘F»eEffÜt
(
o
);

96 ià(
ä“_effÜt
 > 
LAZYFREE_THRESHOLD
 && 
o
->
»fcouÁ
 == 1) {

97 
	`©omicInü
(
Ïzyä“_objeùs
,1);

98 
	`bioC»©eBackgroundJob
(
BIO_LAZY_FREE
,
o
,
NULL
,NULL);

100 
	`deüRefCouÁ
(
o
);

102 
	}
}

107 
	$em±yDbAsync
(
»disDb
 *
db
) {

108 
diù
 *
Şdht1
 = 
db
->diù, *
Şdht2
 = db->
expœes
;

109 
db
->
diù
 = 
	`diùC»©e
(&
dbDiùTy³
,
NULL
);

110 
db
->
expœes
 = 
	`diùC»©e
(&
key±rDiùTy³
,
NULL
);

111 
	`©omicInü
(
Ïzyä“_objeùs
,
	`diùSize
(
Şdht1
));

112 
	`bioC»©eBackgroundJob
(
BIO_LAZY_FREE
,
NULL
,
Şdht1
,
Şdht2
);

113 
	}
}

117 
	$¦ÙToKeyFlushAsync
() {

118 
¿x
 *
Şd
 = 
£rv”
.
şu¡”
->
¦Ùs_to_keys
;

120 
£rv”
.
şu¡”
->
¦Ùs_to_keys
 = 
	`¿xNew
();

121 
	`mem£t
(
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
,0,

122 (
£rv”
.
şu¡”
->
¦Ùs_keys_couÁ
));

123 
	`©omicInü
(
Ïzyä“_objeùs
,
Şd
->
num–e
);

124 
	`bioC»©eBackgroundJob
(
BIO_LAZY_FREE
,
NULL
,NULL,
Şd
);

125 
	}
}

129 
	$Ïzyä“F»eObjeùFromBioTh»ad
(
robj
 *
o
) {

130 
	`deüRefCouÁ
(
o
);

131 
	`©omicDeü
(
Ïzyä“_objeùs
,1);

132 
	}
}

139 
	$Ïzyä“F»eD©aba£FromBioTh»ad
(
diù
 *
ht1
, diù *
ht2
) {

140 
size_t
 
numkeys
 = 
	`diùSize
(
ht1
);

141 
	`diùR–—£
(
ht1
);

142 
	`diùR–—£
(
ht2
);

143 
	`©omicDeü
(
Ïzyä“_objeùs
,
numkeys
);

144 
	}
}

148 
	$Ïzyä“F»eSlÙsM­FromBioTh»ad
(
¿x
 *
¹
) {

149 
size_t
 
Ën
 = 
¹
->
num–e
;

150 
	`¿xF»e
(
¹
);

151 
	`©omicDeü
(
Ïzyä“_objeùs
,
Ën
);

152 
	}
}

	@listpack.c

35 
	~<¡dšt.h
>

36 
	~<lim™s.h
>

37 
	~<sys/ty³s.h
>

38 
	~<¡dlib.h
>

39 
	~<¡ršg.h
>

40 
	~<¡dio.h
>

42 
	~"li¡·ck.h
"

43 
	~"li¡·ck_m®loc.h
"

45 
	#LP_HDR_SIZE
 6

	)

46 
	#LP_HDR_NUMELE_UNKNOWN
 
UINT16_MAX


	)

47 
	#LP_MAX_INT_ENCODING_LEN
 9

	)

48 
	#LP_MAX_BACKLEN_SIZE
 5

	)

49 
	#LP_MAX_ENTRY_BACKLEN
 34359738367ULL

	)

50 
	#LP_ENCODING_INT
 0

	)

51 
	#LP_ENCODING_STRING
 1

	)

53 
	#LP_ENCODING_7BIT_UINT
 0

	)

54 
	#LP_ENCODING_7BIT_UINT_MASK
 0x80

	)

55 
	#LP_ENCODING_IS_7BIT_UINT
(
by‹
è(((by‹)&
LP_ENCODING_7BIT_UINT_MASK
)==
LP_ENCODING_7BIT_UINT
)

	)

57 
	#LP_ENCODING_6BIT_STR
 0x80

	)

58 
	#LP_ENCODING_6BIT_STR_MASK
 0xC0

	)

59 
	#LP_ENCODING_IS_6BIT_STR
(
by‹
è(((by‹)&
LP_ENCODING_6BIT_STR_MASK
)==
LP_ENCODING_6BIT_STR
)

	)

61 
	#LP_ENCODING_13BIT_INT
 0xC0

	)

62 
	#LP_ENCODING_13BIT_INT_MASK
 0xE0

	)

63 
	#LP_ENCODING_IS_13BIT_INT
(
by‹
è(((by‹)&
LP_ENCODING_13BIT_INT_MASK
)==
LP_ENCODING_13BIT_INT
)

	)

65 
	#LP_ENCODING_12BIT_STR
 0xE0

	)

66 
	#LP_ENCODING_12BIT_STR_MASK
 0xF0

	)

67 
	#LP_ENCODING_IS_12BIT_STR
(
by‹
è(((by‹)&
LP_ENCODING_12BIT_STR_MASK
)==
LP_ENCODING_12BIT_STR
)

	)

69 
	#LP_ENCODING_16BIT_INT
 0xF1

	)

70 
	#LP_ENCODING_16BIT_INT_MASK
 0xFF

	)

71 
	#LP_ENCODING_IS_16BIT_INT
(
by‹
è(((by‹)&
LP_ENCODING_16BIT_INT_MASK
)==
LP_ENCODING_16BIT_INT
)

	)

73 
	#LP_ENCODING_24BIT_INT
 0xF2

	)

74 
	#LP_ENCODING_24BIT_INT_MASK
 0xFF

	)

75 
	#LP_ENCODING_IS_24BIT_INT
(
by‹
è(((by‹)&
LP_ENCODING_24BIT_INT_MASK
)==
LP_ENCODING_24BIT_INT
)

	)

77 
	#LP_ENCODING_32BIT_INT
 0xF3

	)

78 
	#LP_ENCODING_32BIT_INT_MASK
 0xFF

	)

79 
	#LP_ENCODING_IS_32BIT_INT
(
by‹
è(((by‹)&
LP_ENCODING_32BIT_INT_MASK
)==
LP_ENCODING_32BIT_INT
)

	)

81 
	#LP_ENCODING_64BIT_INT
 0xF4

	)

82 
	#LP_ENCODING_64BIT_INT_MASK
 0xFF

	)

83 
	#LP_ENCODING_IS_64BIT_INT
(
by‹
è(((by‹)&
LP_ENCODING_64BIT_INT_MASK
)==
LP_ENCODING_64BIT_INT
)

	)

85 
	#LP_ENCODING_32BIT_STR
 0xF0

	)

86 
	#LP_ENCODING_32BIT_STR_MASK
 0xFF

	)

87 
	#LP_ENCODING_IS_32BIT_STR
(
by‹
è(((by‹)&
LP_ENCODING_32BIT_STR_MASK
)==
LP_ENCODING_32BIT_STR
)

	)

89 
	#LP_EOF
 0xFF

	)

91 
	#LP_ENCODING_6BIT_STR_LEN
(
p
è(Õ)[0] & 0x3F)

	)

92 
	#LP_ENCODING_12BIT_STR_LEN
(
p
è(((Õ)[0] & 0xFè<< 8è| (p)[1])

	)

93 
	#LP_ENCODING_32BIT_STR_LEN
(
p
è(((
ušt32_t
)(p)[1]<<0) | \

94 ((
ušt32_t
)(
p
)[2]<<8) | \

95 ((
ušt32_t
)(
p
)[3]<<16) | \

96 ((
ušt32_t
)(
p
)[4]<<24))

	)

98 
	#ÍG‘TÙ®By‹s
(
p
è(((
ušt32_t
)(p)[0]<<0) | \

99 ((
ušt32_t
)(
p
)[1]<<8) | \

100 ((
ušt32_t
)(
p
)[2]<<16) | \

101 ((
ušt32_t
)(
p
)[3]<<24))

	)

103 
	#ÍG‘NumEËm’ts
(
p
è(((
ušt32_t
)(p)[4]<<0) | \

104 ((
ušt32_t
)(
p
)[5]<<8))

	)

105 
	#ÍS‘TÙ®By‹s
(
p
,
v
) do { \

106 (
p
)[0] = (
v
)&0xff; \

107 (
p
)[1] = ((
v
)>>8)&0xff; \

108 (
p
)[2] = ((
v
)>>16)&0xff; \

109 (
p
)[3] = ((
v
)>>24)&0xff; \

110 } 0)

	)

112 
	#ÍS‘NumEËm’ts
(
p
,
v
) do { \

113 (
p
)[4] = (
v
)&0xff; \

114 (
p
)[5] = ((
v
)>>8)&0xff; \

115 } 0)

	)

141 
	$ÍSŒšgToIÁ64
(cÚ¡ *
s
, 
¦’
, 
št64_t
 *
v®ue
) {

142 cÚ¡ *
p
 = 
s
;

143 
¶’
 = 0;

144 
Ãg©ive
 = 0;

145 
ušt64_t
 
v
;

147 ià(
¶’
 =ğ
¦’
)

151 ià(
¦’
 =ğ1 && 
p
[0] == '0') {

152 ià(
v®ue
 !ğ
NULL
) *value = 0;

156 ià(
p
[0] == '-') {

157 
Ãg©ive
 = 1;

158 
p
++; 
¶’
++;

161 ià(
¶’
 =ğ
¦’
)

166 ià(
p
[0] >= '1' &&…[0] <= '9') {

167 
v
 = 
p
[0]-'0';

168 
p
++; 
¶’
++;

169 } ià(
p
[0] =ğ'0' && 
¦’
 == 1) {

170 *
v®ue
 = 0;

176 
¶’
 < 
¦’
 && 
p
[0] >= '0' &&…[0] <= '9') {

177 ià(
v
 > (
UINT64_MAX
 / 10))

179 
v
 *= 10;

181 ià(
v
 > (
UINT64_MAX
 - (
p
[0]-'0')))

183 
v
 +ğ
p
[0]-'0';

185 
p
++; 
¶’
++;

189 ià(
¶’
 < 
¦’
)

192 ià(
Ãg©ive
) {

193 ià(
v
 > ((
ušt64_t
)(-(
INT64_MIN
+1))+1))

195 ià(
v®ue
 !ğ
NULL
è*v®uğ-
v
;

197 ià(
v
 > 
INT64_MAX
)

199 ià(
v®ue
 !ğ
NULL
è*v®uğ
v
;

202 
	}
}

206 *
	$ÍNew
() {

207 *
Í
 = 
	`Í_m®loc
(
LP_HDR_SIZE
+1);

208 ià(
Í
 =ğ
NULL
)  NULL;

209 
	`ÍS‘TÙ®By‹s
(
Í
,
LP_HDR_SIZE
+1);

210 
	`ÍS‘NumEËm’ts
(
Í
,0);

211 
Í
[
LP_HDR_SIZE
] = 
LP_EOF
;

212  
Í
;

213 
	}
}

216 
	$ÍF»e
(*
Í
) {

217 
	`Í_ä“
(
Í
);

218 
	}
}

231 
	$ÍEncodeG‘Ty³
(*
–e
, 
ušt32_t
 
size
, *
š‹nc
, 
ušt64_t
 *
’ş’
) {

232 
št64_t
 
v
;

233 ià(
	`ÍSŒšgToIÁ64
((cÚ¡ *)
–e
, 
size
, &
v
)) {

234 ià(
v
 >= 0 && v <= 127) {

236 
š‹nc
[0] = 
v
;

237 *
’ş’
 = 1;

238 } ià(
v
 >= -4096 && v <= 4095) {

240 ià(
v
 < 0èv = ((
št64_t
)1<<13)+v;

241 
š‹nc
[0] = (
v
>>8)|
LP_ENCODING_13BIT_INT
;

242 
š‹nc
[1] = 
v
&0xff;

243 *
’ş’
 = 2;

244 } ià(
v
 >= -32768 && v <= 32767) {

246 ià(
v
 < 0èv = ((
št64_t
)1<<16)+v;

247 
š‹nc
[0] = 
LP_ENCODING_16BIT_INT
;

248 
š‹nc
[1] = 
v
&0xff;

249 
š‹nc
[2] = 
v
>>8;

250 *
’ş’
 = 3;

251 } ià(
v
 >= -8388608 && v <= 8388607) {

253 ià(
v
 < 0èv = ((
št64_t
)1<<24)+v;

254 
š‹nc
[0] = 
LP_ENCODING_24BIT_INT
;

255 
š‹nc
[1] = 
v
&0xff;

256 
š‹nc
[2] = (
v
>>8)&0xff;

257 
š‹nc
[3] = 
v
>>16;

258 *
’ş’
 = 4;

259 } ià(
v
 >= -2147483648 && v <= 2147483647) {

261 ià(
v
 < 0èv = ((
št64_t
)1<<32)+v;

262 
š‹nc
[0] = 
LP_ENCODING_32BIT_INT
;

263 
š‹nc
[1] = 
v
&0xff;

264 
š‹nc
[2] = (
v
>>8)&0xff;

265 
š‹nc
[3] = (
v
>>16)&0xff;

266 
š‹nc
[4] = 
v
>>24;

267 *
’ş’
 = 5;

270 
ušt64_t
 
uv
 = 
v
;

271 
š‹nc
[0] = 
LP_ENCODING_64BIT_INT
;

272 
š‹nc
[1] = 
uv
&0xff;

273 
š‹nc
[2] = (
uv
>>8)&0xff;

274 
š‹nc
[3] = (
uv
>>16)&0xff;

275 
š‹nc
[4] = (
uv
>>24)&0xff;

276 
š‹nc
[5] = (
uv
>>32)&0xff;

277 
š‹nc
[6] = (
uv
>>40)&0xff;

278 
š‹nc
[7] = (
uv
>>48)&0xff;

279 
š‹nc
[8] = 
uv
>>56;

280 *
’ş’
 = 9;

282  
LP_ENCODING_INT
;

284 ià(
size
 < 64è*
’ş’
 = 1+size;

285 ià(
size
 < 4096è*
’ş’
 = 2+size;

286 *
’ş’
 = 5+
size
;

287  
LP_ENCODING_STRING
;

289 
	}
}

296 
	$ÍEncodeBackËn
(*
buf
, 
ušt64_t
 
l
) {

297 ià(
l
 <= 127) {

298 ià(
buf
èbuf[0] = 
l
;

300 } ià(
l
 < 16383) {

301 ià(
buf
) {

302 
buf
[0] = 
l
>>7;

303 
buf
[1] = (
l
&127)|128;

306 } ià(
l
 < 2097151) {

307 ià(
buf
) {

308 
buf
[0] = 
l
>>14;

309 
buf
[1] = ((
l
>>7)&127)|128;

310 
buf
[2] = (
l
&127)|128;

313 } ià(
l
 < 268435455) {

314 ià(
buf
) {

315 
buf
[0] = 
l
>>21;

316 
buf
[1] = ((
l
>>14)&127)|128;

317 
buf
[2] = ((
l
>>7)&127)|128;

318 
buf
[3] = (
l
&127)|128;

322 ià(
buf
) {

323 
buf
[0] = 
l
>>28;

324 
buf
[1] = ((
l
>>21)&127)|128;

325 
buf
[2] = ((
l
>>14)&127)|128;

326 
buf
[3] = ((
l
>>7)&127)|128;

327 
buf
[4] = (
l
&127)|128;

331 
	}
}

335 
ušt64_t
 
	$ÍDecodeBackËn
(*
p
) {

336 
ušt64_t
 
v®
 = 0;

337 
ušt64_t
 
shiá
 = 0;

339 
v®
 |ğ(
ušt64_t
)(
p
[0] & 127è<< 
shiá
;

340 ià(!(
p
[0] & 128)) ;

341 
shiá
 += 7;

342 
p
--;

343 ià(
shiá
 > 28è 
UINT64_MAX
;

345  
v®
;

346 
	}
}

352 
	$ÍEncodeSŒšg
(*
buf
, *
s
, 
ušt32_t
 
Ën
) {

353 ià(
Ën
 < 64) {

354 
buf
[0] = 
Ën
 | 
LP_ENCODING_6BIT_STR
;

355 
	`memıy
(
buf
+1,
s
,
Ën
);

356 } ià(
Ën
 < 4096) {

357 
buf
[0] = (
Ën
 >> 8è| 
LP_ENCODING_12BIT_STR
;

358 
buf
[1] = 
Ën
 & 0xff;

359 
	`memıy
(
buf
+2,
s
,
Ën
);

361 
buf
[0] = 
LP_ENCODING_32BIT_STR
;

362 
buf
[1] = 
Ën
 & 0xff;

363 
buf
[2] = (
Ën
 >> 8) & 0xff;

364 
buf
[3] = (
Ën
 >> 16) & 0xff;

365 
buf
[4] = (
Ën
 >> 24) & 0xff;

366 
	`memıy
(
buf
+5,
s
,
Ën
);

368 
	}
}

372 
ušt32_t
 
	$ÍCu¼’tEncodedSize
(*
p
) {

373 ià(
	`LP_ENCODING_IS_7BIT_UINT
(
p
[0]))  1;

374 ià(
	`LP_ENCODING_IS_6BIT_STR
(
p
[0])è 1+
	`LP_ENCODING_6BIT_STR_LEN
(p);

375 ià(
	`LP_ENCODING_IS_13BIT_INT
(
p
[0]))  2;

376 ià(
	`LP_ENCODING_IS_16BIT_INT
(
p
[0]))  3;

377 ià(
	`LP_ENCODING_IS_24BIT_INT
(
p
[0]))  4;

378 ià(
	`LP_ENCODING_IS_32BIT_INT
(
p
[0]))  5;

379 ià(
	`LP_ENCODING_IS_64BIT_INT
(
p
[0]))  9;

380 ià(
	`LP_ENCODING_IS_12BIT_STR
(
p
[0])è 2+
	`LP_ENCODING_12BIT_STR_LEN
(p);

381 ià(
	`LP_ENCODING_IS_32BIT_STR
(
p
[0])è 5+
	`LP_ENCODING_32BIT_STR_LEN
(p);

382 ià(
p
[0] =ğ
LP_EOF
)  1;

384 
	}
}

390 *
	$ÍSk
(*
p
) {

391 
’ŒyËn
 = 
	`ÍCu¼’tEncodedSize
(
p
);

392 
’ŒyËn
 +ğ
	`ÍEncodeBackËn
(
NULL
,entrylen);

393 
p
 +ğ
’ŒyËn
;

394  
p
;

395 
	}
}

400 *
	$ÍNext
(*
Í
, *
p
) {

401 ((è
Í
);

402 
p
 = 
	`ÍSk
(p);

403 ià(
p
[0] =ğ
LP_EOF
è 
NULL
;

404  
p
;

405 
	}
}

410 *
	$ÍP»v
(*
Í
, *
p
) {

411 ià(
p
-
Í
 =ğ
LP_HDR_SIZE
è 
NULL
;

412 
p
--;

413 
ušt64_t
 
´evËn
 = 
	`ÍDecodeBackËn
(
p
);

414 
´evËn
 +ğ
	`ÍEncodeBackËn
(
NULL
,prevlen);

415  
p
-
´evËn
+1;

416 
	}
}

420 *
	$ÍFœ¡
(*
Í
) {

421 
Í
 +ğ
LP_HDR_SIZE
;

422 ià(
Í
[0] =ğ
LP_EOF
è 
NULL
;

423  
Í
;

424 
	}
}

428 *
	$ÍLa¡
(*
Í
) {

429 *
p
 = 
Í
+
	`ÍG‘TÙ®By‹s
(lp)-1;

430  
	`ÍP»v
(
Í
,
p
);

431 
	}
}

438 
ušt32_t
 
	$ÍL’gth
(*
Í
) {

439 
ušt32_t
 
num–e
 = 
	`ÍG‘NumEËm’ts
(
Í
);

440 ià(
num–e
 !ğ
LP_HDR_NUMELE_UNKNOWN
) ‚umele;

444 
ušt32_t
 
couÁ
 = 0;

445 *
p
 = 
	`ÍFœ¡
(
Í
);

446 
p
) {

447 
couÁ
++;

448 
p
 = 
	`ÍNext
(
Í
,p);

453 ià(
couÁ
 < 
LP_HDR_NUMELE_UNKNOWN
è
	`ÍS‘NumEËm’ts
(
Í
,count);

454  
couÁ
;

455 
	}
}

491 *
	$ÍG‘
(*
p
, 
št64_t
 *
couÁ
, *
štbuf
) {

492 
št64_t
 
v®
;

493 
ušt64_t
 
uv®
, 
Ãg¡¬t
, 
Ãgmax
;

495 ià(
	`LP_ENCODING_IS_7BIT_UINT
(
p
[0])) {

496 
Ãg¡¬t
 = 
UINT64_MAX
;

497 
Ãgmax
 = 0;

498 
uv®
 = 
p
[0] & 0x7f;

499 } ià(
	`LP_ENCODING_IS_6BIT_STR
(
p
[0])) {

500 *
couÁ
 = 
	`LP_ENCODING_6BIT_STR_LEN
(
p
);

501  
p
+1;

502 } ià(
	`LP_ENCODING_IS_13BIT_INT
(
p
[0])) {

503 
uv®
 = ((
p
[0]&0x1f)<<8) |…[1];

504 
Ãg¡¬t
 = (
ušt64_t
)1<<12;

505 
Ãgmax
 = 8191;

506 } ià(
	`LP_ENCODING_IS_16BIT_INT
(
p
[0])) {

507 
uv®
 = (
ušt64_t
)
p
[1] |

508 (
ušt64_t
)
p
[2]<<8;

509 
Ãg¡¬t
 = (
ušt64_t
)1<<15;

510 
Ãgmax
 = 
UINT16_MAX
;

511 } ià(
	`LP_ENCODING_IS_24BIT_INT
(
p
[0])) {

512 
uv®
 = (
ušt64_t
)
p
[1] |

513 (
ušt64_t
)
p
[2]<<8 |

514 (
ušt64_t
)
p
[3]<<16;

515 
Ãg¡¬t
 = (
ušt64_t
)1<<23;

516 
Ãgmax
 = 
UINT32_MAX
>>8;

517 } ià(
	`LP_ENCODING_IS_32BIT_INT
(
p
[0])) {

518 
uv®
 = (
ušt64_t
)
p
[1] |

519 (
ušt64_t
)
p
[2]<<8 |

520 (
ušt64_t
)
p
[3]<<16 |

521 (
ušt64_t
)
p
[4]<<24;

522 
Ãg¡¬t
 = (
ušt64_t
)1<<31;

523 
Ãgmax
 = 
UINT32_MAX
;

524 } ià(
	`LP_ENCODING_IS_64BIT_INT
(
p
[0])) {

525 
uv®
 = (
ušt64_t
)
p
[1] |

526 (
ušt64_t
)
p
[2]<<8 |

527 (
ušt64_t
)
p
[3]<<16 |

528 (
ušt64_t
)
p
[4]<<24 |

529 (
ušt64_t
)
p
[5]<<32 |

530 (
ušt64_t
)
p
[6]<<40 |

531 (
ušt64_t
)
p
[7]<<48 |

532 (
ušt64_t
)
p
[8]<<56;

533 
Ãg¡¬t
 = (
ušt64_t
)1<<63;

534 
Ãgmax
 = 
UINT64_MAX
;

535 } ià(
	`LP_ENCODING_IS_12BIT_STR
(
p
[0])) {

536 *
couÁ
 = 
	`LP_ENCODING_12BIT_STR_LEN
(
p
);

537  
p
+2;

538 } ià(
	`LP_ENCODING_IS_32BIT_STR
(
p
[0])) {

539 *
couÁ
 = 
	`LP_ENCODING_32BIT_STR_LEN
(
p
);

540  
p
+5;

542 
uv®
 = 12345678900000000ULL + 
p
[0];

543 
Ãg¡¬t
 = 
UINT64_MAX
;

544 
Ãgmax
 = 0;

550 ià(
uv®
 >ğ
Ãg¡¬t
) {

553 
uv®
 = 
Ãgmax
-uval;

554 
v®
 = 
uv®
;

555 
v®
 = -val-1;

557 
v®
 = 
uv®
;

562 ià(
štbuf
) {

563 *
couÁ
 = 
	`¢´štf
((*)
štbuf
,
LP_INTBUF_SIZE
,"%Îd",()
v®
);

564  
štbuf
;

566 *
couÁ
 = 
v®
;

567  
NULL
;

569 
	}
}

595 *
	$ÍIn£¹
(*
Í
, *
–e
, 
ušt32_t
 
size
, *
p
, 
wh”e
, **
Ãwp
) {

596 
š‹nc
[
LP_MAX_INT_ENCODING_LEN
];

597 
backËn
[
LP_MAX_BACKLEN_SIZE
];

599 
ušt64_t
 
’ş’
;

604 ià(
–e
 =ğ
NULL
è
wh”e
 = 
LP_REPLACE
;

610 ià(
wh”e
 =ğ
LP_AFTER
) {

611 
p
 = 
	`ÍSk
(p);

612 
wh”e
 = 
LP_BEFORE
;

617 
poff
 = 
p
-
Í
;

627 
’ùy³
;

628 ià(
–e
) {

629 
’ùy³
 = 
	`ÍEncodeG‘Ty³
(
–e
,
size
,
š‹nc
,&
’ş’
);

631 
’ùy³
 = -1;

632 
’ş’
 = 0;

638 
backËn_size
 = 
–e
 ? 
	`ÍEncodeBackËn
(
backËn
,
’ş’
) : 0;

639 
ušt64_t
 
Şd_li¡·ck_by‹s
 = 
	`ÍG‘TÙ®By‹s
(
Í
);

640 
ušt32_t
 
»¶aûd_Ën
 = 0;

641 ià(
wh”e
 =ğ
LP_REPLACE
) {

642 
»¶aûd_Ën
 = 
	`ÍCu¼’tEncodedSize
(
p
);

643 
»¶aûd_Ën
 +ğ
	`ÍEncodeBackËn
(
NULL
,replaced_len);

646 
ušt64_t
 
Ãw_li¡·ck_by‹s
 = 
Şd_li¡·ck_by‹s
 + 
’ş’
 + 
backËn_size


647 - 
»¶aûd_Ën
;

648 ià(
Ãw_li¡·ck_by‹s
 > 
UINT32_MAX
è 
NULL
;

656 *
d¡
 = 
Í
 + 
poff
;

659 ià(
Ãw_li¡·ck_by‹s
 > 
Şd_li¡·ck_by‹s
) {

660 ià((
Í
 = 
	`Í_»®loc
Öp,
Ãw_li¡·ck_by‹s
)è=ğ
NULL
)  NULL;

661 
d¡
 = 
Í
 + 
poff
;

666 ià(
wh”e
 =ğ
LP_BEFORE
) {

667 
	`memmove
(
d¡
+
’ş’
+
backËn_size
,d¡,
Şd_li¡·ck_by‹s
-
poff
);

669 
Ëndiff
 = (
’ş’
+
backËn_size
)-
»¶aûd_Ën
;

670 
	`memmove
(
d¡
+
»¶aûd_Ën
+
Ëndiff
,

671 
d¡
+
»¶aûd_Ën
,

672 
Şd_li¡·ck_by‹s
-
poff
-
»¶aûd_Ën
);

676 ià(
Ãw_li¡·ck_by‹s
 < 
Şd_li¡·ck_by‹s
) {

677 ià((
Í
 = 
	`Í_»®loc
Öp,
Ãw_li¡·ck_by‹s
)è=ğ
NULL
)  NULL;

678 
d¡
 = 
Í
 + 
poff
;

682 ià(
Ãwp
) {

683 *
Ãwp
 = 
d¡
;

686 ià(!
–e
 && 
d¡
[0] =ğ
LP_EOF
è*
Ãwp
 = 
NULL
;

688 ià(
–e
) {

689 ià(
’ùy³
 =ğ
LP_ENCODING_INT
) {

690 
	`memıy
(
d¡
,
š‹nc
,
’ş’
);

692 
	`ÍEncodeSŒšg
(
d¡
,
–e
,
size
);

694 
d¡
 +ğ
’ş’
;

695 
	`memıy
(
d¡
,
backËn
,
backËn_size
);

696 
d¡
 +ğ
backËn_size
;

700 ià(
wh”e
 !ğ
LP_REPLACE
 || 
–e
 =ğ
NULL
) {

701 
ušt32_t
 
num_–em’ts
 = 
	`ÍG‘NumEËm’ts
(
Í
);

702 ià(
num_–em’ts
 !ğ
LP_HDR_NUMELE_UNKNOWN
) {

703 ià(
–e
)

704 
	`ÍS‘NumEËm’ts
(
Í
,
num_–em’ts
+1);

706 
	`ÍS‘NumEËm’ts
(
Í
,
num_–em’ts
-1);

709 
	`ÍS‘TÙ®By‹s
(
Í
,
Ãw_li¡·ck_by‹s
);

718 *
ŞdÍ
 = 
Í
;

719 
Í
 = 
	`Í_m®loc
(
Ãw_li¡·ck_by‹s
);

720 
	`memıy
(
Í
,
ŞdÍ
,
Ãw_li¡·ck_by‹s
);

721 ià(
Ãwp
) {

722 
off£t
 = (*
Ãwp
)-
ŞdÍ
;

723 *
Ãwp
 = 
Í
 + 
off£t
;

726 
	`mem£t
(
ŞdÍ
,'A',
Ãw_li¡·ck_by‹s
);

727 
	`Í_ä“
(
ŞdÍ
);

730  
Í
;

731 
	}
}

736 *
	$ÍAµ’d
(*
Í
, *
–e
, 
ušt32_t
 
size
) {

737 
ušt64_t
 
li¡·ck_by‹s
 = 
	`ÍG‘TÙ®By‹s
(
Í
);

738 *
eoåŒ
 = 
Í
 + 
li¡·ck_by‹s
 - 1;

739  
	`ÍIn£¹
(
Í
,
–e
,
size
,
eoåŒ
,
LP_BEFORE
,
NULL
);

740 
	}
}

746 *
	$ÍD–‘e
(*
Í
, *
p
, **
Ãwp
) {

747  
	`ÍIn£¹
(
Í
,
NULL
,0,
p
,
LP_REPLACE
,
Ãwp
);

748 
	}
}

751 
ušt32_t
 
	$ÍBy‹s
(*
Í
) {

752  
	`ÍG‘TÙ®By‹s
(
Í
);

753 
	}
}

760 *
	$ÍS“k
(*
Í
, 
šdex
) {

761 
fÜw¬d
 = 1;

767 
ušt32_t
 
num–e
 = 
	`ÍG‘NumEËm’ts
(
Í
);

768 ià(
num–e
 !ğ
LP_HDR_NUMELE_UNKNOWN
) {

769 ià(
šdex
 < 0èšdex = ()
num–e
+index;

770 ià(
šdex
 < 0è 
NULL
;

771 ià(
šdex
 >ğ
num–e
è 
NULL
;

774 ià(
šdex
 > 
num–e
/2) {

775 
fÜw¬d
 = 0;

778 
šdex
 -ğ
num–e
;

783 ià(
šdex
 < 0è
fÜw¬d
 = 0;

787 ià(
fÜw¬d
) {

788 *
–e
 = 
	`ÍFœ¡
(
Í
);

789 
šdex
 > 0 && 
–e
) {

790 
–e
 = 
	`ÍNext
(
Í
,ele);

791 
šdex
--;

793  
–e
;

795 *
–e
 = 
	`ÍLa¡
(
Í
);

796 
šdex
 < -1 && 
–e
) {

797 
–e
 = 
	`ÍP»v
(
Í
,ele);

798 
šdex
++;

800  
–e
;

802 
	}
}

	@listpack.h

35 #iâdeà
__LISTPACK_H


36 
	#__LISTPACK_H


	)

38 
	~<¡dšt.h
>

40 
	#LP_INTBUF_SIZE
 21

	)

43 
	#LP_BEFORE
 0

	)

44 
	#LP_AFTER
 1

	)

45 
	#LP_REPLACE
 2

	)

47 *
ÍNew
();

48 
ÍF»e
(*
Í
);

49 *
ÍIn£¹
(*
Í
, *
–e
, 
ušt32_t
 
size
, *
p
, 
wh”e
, **
Ãwp
);

50 *
ÍAµ’d
(*
Í
, *
–e
, 
ušt32_t
 
size
);

51 *
ÍD–‘e
(*
Í
, *
p
, **
Ãwp
);

52 
ušt32_t
 
ÍL’gth
(*
Í
);

53 *
ÍG‘
(*
p
, 
št64_t
 *
couÁ
, *
štbuf
);

54 *
ÍFœ¡
(*
Í
);

55 *
ÍLa¡
(*
Í
);

56 *
ÍNext
(*
Í
, *
p
);

57 *
ÍP»v
(*
Í
, *
p
);

58 
ušt32_t
 
ÍBy‹s
(*
Í
);

59 *
ÍS“k
(*
Í
, 
šdex
);

	@listpack_malloc.h

39 #iâdeà
LISTPACK_ALLOC_H


40 
	#LISTPACK_ALLOC_H


	)

41 
	~"zm®loc.h
"

42 
	#Í_m®loc
 
zm®loc


	)

43 
	#Í_»®loc
 
z»®loc


	)

44 
	#Í_ä“
 
zä“


	)

	@localtime.c

30 
	~<time.h
>

52 
	$is_Ë­_y—r
(
time_t
 
y—r
) {

53 ià(
y—r
 % 4)  0;

54 ià(
y—r
 % 100)  1;

55 ià(
y—r
 % 400)  0;

57 
	}
}

59 
	$nŞocks_loÿÉime
(
tm
 *
tmp
, 
time_t
 
t
,ime_ˆ
tz
, 
d¡
) {

60 cÚ¡ 
time_t
 
£cs_mš
 = 60;

61 cÚ¡ 
time_t
 
£cs_hour
 = 3600;

62 cÚ¡ 
time_t
 
£cs_day
 = 3600*24;

64 
t
 -ğ
tz
;

65 
t
 +ğ3600*
d¡
;

66 
time_t
 
days
 = 
t
 / 
£cs_day
;

67 
time_t
 
£cÚds
 = 
t
 % 
£cs_day
;

69 
tmp
->
tm_isd¡
 = 
d¡
;

70 
tmp
->
tm_hour
 = 
£cÚds
 / 
£cs_hour
;

71 
tmp
->
tm_mš
 = (
£cÚds
 % 
£cs_hour
è/ 
£cs_mš
;

72 
tmp
->
tm_£c
 = (
£cÚds
 % 
£cs_hour
è% 
£cs_mš
;

77 
tmp
->
tm_wday
 = (
days
+4)%7;

80 
tmp
->
tm_y—r
 = 1970;

83 
time_t
 
days_this_y—r
 = 365 + 
	`is_Ë­_y—r
(
tmp
->
tm_y—r
);

84 ià(
days_this_y—r
 > 
days
) ;

85 
days
 -ğ
days_this_y—r
;

86 
tmp
->
tm_y—r
++;

88 
tmp
->
tm_yday
 = 
days
;

93 
mdays
[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

94 
mdays
[1] +ğ
	`is_Ë­_y—r
(
tmp
->
tm_y—r
);

96 
tmp
->
tm_mÚ
 = 0;

97 
days
 >ğ
mdays
[
tmp
->
tm_mÚ
]) {

98 
days
 -ğ
mdays
[
tmp
->
tm_mÚ
];

99 
tmp
->
tm_mÚ
++;

102 
tmp
->
tm_mday
 = 
days
+1;

103 
tmp
->
tm_y—r
 -= 1900;

104 
	}
}

106 #ifdeà
LOCALTIME_TEST_MAIN


107 
	~<¡dio.h
>

109 
	$maš
() {

111 
	`tz£t
();

112 
time_t
 
t
 = 
	`time
(
NULL
);

113 
tm
 *
aux
 = 
	`loÿÉime
(&
t
);

114 
daylight_aùive
 = 
aux
->
tm_isd¡
;

116 
tm
m;

117 
buf
[1024];

119 
	`nŞocks_loÿÉime
(&
tm
,
t
,
timezÚe
,
daylight_aùive
);

120 
	`¡ráime
(
buf
,(buf),"%d %b %H:%M:%S",&
tm
);

121 
	`´štf
("[timezÚe: %d, dl: %d] %s\n", ()
timezÚe
, ()
daylight_aùive
, 
buf
);

122 
	}
}

	@lolwut.c

36 
	~"£rv”.h
"

37 
	~"lŞwut.h
"

38 
	~<m©h.h
>

40 
lŞwut5Commªd
(
ş›Á
 *
c
);

41 
lŞwut6Commªd
(
ş›Á
 *
c
);

45 
	$lŞwutUn¡abËCommªd
(
ş›Á
 *
c
) {

46 
sds
 
»nd”ed
 = 
	`sd¢ew
("Redis ver. ");

47 
»nd”ed
 = 
	`sdsÿt
Ô’d”ed,
REDIS_VERSION
);

48 
»nd”ed
 = 
	`sdsÿ’
(rendered,"\n",1);

49 
	`addR•lyV”b©im
(
c
,
»nd”ed
,
	`sd¦’
(rendered),"txt");

50 
	`sdsä“
(
»nd”ed
);

51 
	}
}

54 
	$lŞwutCommªd
(
ş›Á
 *
c
) {

55 *
v
 = 
REDIS_VERSION
;

56 
v”¡r
[64];

58 ià(
c
->
¬gc
 >ğ3 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"version")) {

59 
v”
;

60 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
v”
,
NULL
è!ğ
C_OK
) ;

61 
	`¢´štf
(
v”¡r
,(v”¡r),"%u.0.0",()
v”
);

62 
v
 = 
v”¡r
;

67 
c
->
¬gv
 += 2;

68 
c
->
¬gc
 -= 2;

71 ià((
v
[0] == '5' && v[1] == '.' && v[2] != '9') ||

72 (
v
[0] == '4' && v[1] == '.' && v[2] == '9'))

73 
	`lŞwut5Commªd
(
c
);

74 ià((
v
[0] == '6' && v[1] == '.' && v[2] != '9') ||

75 (
v
[0] == '5' && v[1] == '.' && v[2] == '9'))

76 
	`lŞwut6Commªd
(
c
);

78 
	`lŞwutUn¡abËCommªd
(
c
);

81 ià(
v
 =ğ
v”¡r
) {

82 
c
->
¬gv
 -= 2;

83 
c
->
¬gc
 += 2;

85 
	}
}

93 
lwCªvas
 *
	$lwC»©eCªvas
(
width
, 
height
, 
bgcŞÜ
) {

94 
lwCªvas
 *
ÿnvas
 = 
	`zm®loc
((*canvas));

95 
ÿnvas
->
width
 = width;

96 
ÿnvas
->
height
 = height;

97 
ÿnvas
->
pix–s
 = 
	`zm®loc
(
width
*
height
);

98 
	`mem£t
(
ÿnvas
->
pix–s
,
bgcŞÜ
,
width
*
height
);

99  
ÿnvas
;

100 
	}
}

103 
	$lwF»eCªvas
(
lwCªvas
 *
ÿnvas
) {

104 
	`zä“
(
ÿnvas
->
pix–s
);

105 
	`zä“
(
ÿnvas
);

106 
	}
}

112 
	$lwD¿wPix–
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
, 
cŞÜ
) {

113 ià(
x
 < 0 || x >ğ
ÿnvas
->
width
 ||

114 
y
 < 0 || y >ğ
ÿnvas
->
height
) ;

115 
ÿnvas
->
pix–s
[
x
+
y
*ÿnvas->
width
] = 
cŞÜ
;

116 
	}
}

119 
	$lwG‘Pix–
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
) {

120 ià(
x
 < 0 || x >ğ
ÿnvas
->
width
 ||

121 
y
 < 0 || y >ğ
ÿnvas
->
height
)  0;

122  
ÿnvas
->
pix–s
[
x
+
y
*ÿnvas->
width
];

123 
	}
}

126 
	$lwD¿wLše
(
lwCªvas
 *
ÿnvas
, 
x1
, 
y1
, 
x2
, 
y2
, 
cŞÜ
) {

127 
dx
 = 
	`abs
(
x2
-
x1
);

128 
dy
 = 
	`abs
(
y2
-
y1
);

129 
sx
 = (
x1
 < 
x2
) ? 1 : -1;

130 
sy
 = (
y1
 < 
y2
) ? 1 : -1;

131 
”r
 = 
dx
-
dy
, 
e2
;

134 
	`lwD¿wPix–
(
ÿnvas
,
x1
,
y1
,
cŞÜ
);

135 ià(
x1
 =ğ
x2
 && 
y1
 =ğ
y2
) ;

136 
e2
 = 
”r
*2;

137 ià(
e2
 > -
dy
) {

138 
”r
 -ğ
dy
;

139 
x1
 +ğ
sx
;

141 ià(
e2
 < 
dx
) {

142 
”r
 +ğ
dx
;

143 
y1
 +ğ
sy
;

146 
	}
}

167 
	$lwD¿wSqu¬e
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
, 
size
, 
ªgË
, 
cŞÜ
) {

168 
px
[4], 
py
[4];

174 
size
 /= 1.4142135623;

175 
size
 = 
	`round
(size);

178 
k
 = 
M_PI
/4 + 
ªgË
;

179 
j
 = 0; j < 4; j++) {

180 
px
[
j
] = 
	`round
(
	`sš
(
k
è* 
size
 + 
x
);

181 
py
[
j
] = 
	`round
(
	`cos
(
k
è* 
size
 + 
y
);

182 
k
 +ğ
M_PI
/2;

186 
j
 = 0; j < 4; j++)

187 
	`lwD¿wLše
(
ÿnvas
,
px
[
j
],
py
[j],px[(j+1)%4],py[(j+1)%4],
cŞÜ
);

188 
	}
}

	@lolwut.h

38 #iâdeà
__LOLWUT_H


39 
	#__LOLWUT_H


	)

41 
	slwCªvas
 {

42 
	mwidth
;

43 
	mheight
;

44 *
	mpix–s
;

45 } 
	tlwCªvas
;

48 
lwCªvas
 *
lwC»©eCªvas
(
width
, 
height
, 
bgcŞÜ
);

49 
lwF»eCªvas
(
lwCªvas
 *
ÿnvas
);

50 
lwD¿wPix–
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
, 
cŞÜ
);

51 
lwG‘Pix–
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
);

52 
lwD¿wLše
(
lwCªvas
 *
ÿnvas
, 
x1
, 
y1
, 
x2
, 
y2
, 
cŞÜ
);

53 
lwD¿wSqu¬e
(
lwCªvas
 *
ÿnvas
, 
x
, 
y
, 
size
, 
ªgË
, 
cŞÜ
);

	@lolwut5.c

36 
	~"£rv”.h
"

37 
	~"lŞwut.h
"

38 
	~<m©h.h
>

53 
	~<¡dio.h
>

54 
	$lwT¿n¦©ePix–sGroup
(
by‹
, *
ouut
) {

55 
code
 = 0x2800 + 
by‹
;

59 
ouut
[0] = 0xE0 | (
code
 >> 12);

60 
ouut
[1] = 0x80 | ((
code
 >> 6) & 0x3F);

61 
ouut
[2] = 0x80 | (
code
 & 0x3F);

62 
	}
}

71 
lwCªvas
 *
	$lwD¿wSchÙ‹r
(
cÚsŞe_cŞs
, 
squ¬es_³r_row
, 
squ¬es_³r_cŞ
) {

73 
ÿnvas_width
 = 
cÚsŞe_cŞs
*2;

74 
·ddšg
 = 
ÿnvas_width
 > 4 ? 2 : 0;

75 
squ¬e_side
 = ()(
ÿnvas_width
-
·ddšg
*2è/ 
squ¬es_³r_row
;

76 
ÿnvas_height
 = 
squ¬e_side
 * 
squ¬es_³r_cŞ
 + 
·ddšg
*2;

77 
lwCªvas
 *
ÿnvas
 = 
	`lwC»©eCªvas
(
ÿnvas_width
, 
ÿnvas_height
, 0);

79 
y
 = 0; y < 
squ¬es_³r_cŞ
; y++) {

80 
x
 = 0; x < 
squ¬es_³r_row
; x++) {

81 
sx
 = 
x
 * 
squ¬e_side
 + squ¬e_side/2 + 
·ddšg
;

82 
sy
 = 
y
 * 
squ¬e_side
 + squ¬e_side/2 + 
·ddšg
;

85 
ªgË
 = 0;

86 ià(
y
 > 1) {

87 
r1
 = ()
	`¿nd
(è/ 
RAND_MAX
 / 
squ¬es_³r_cŞ
 * 
y
;

88 
r2
 = ()
	`¿nd
(è/ 
RAND_MAX
 / 
squ¬es_³r_cŞ
 * 
y
;

89 
r3
 = ()
	`¿nd
(è/ 
RAND_MAX
 / 
squ¬es_³r_cŞ
 * 
y
;

90 ià(
	`¿nd
(è% 2è
r1
 = -r1;

91 ià(
	`¿nd
(è% 2è
r2
 = -r2;

92 ià(
	`¿nd
(è% 2è
r3
 = -r3;

93 
ªgË
 = 
r1
;

94 
sx
 +ğ
r2
*
squ¬e_side
/3;

95 
sy
 +ğ
r3
*
squ¬e_side
/3;

97 
	`lwD¿wSqu¬e
(
ÿnvas
,
sx
,
sy
,
squ¬e_side
,
ªgË
,1);

101  
ÿnvas
;

102 
	}
}

109 
sds
 
	$»nd”Cªvas
(
lwCªvas
 *
ÿnvas
) {

110 
sds
 
‹xt
 = 
	`sd£m±y
();

111 
y
 = 0; y < 
ÿnvas
->
height
; y += 4) {

112 
x
 = 0; x < 
ÿnvas
->
width
; x += 2) {

115 
by‹
 = 0;

116 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
,
y
)è
by‹
 |= (1<<0);

117 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
,
y
+1)è
by‹
 |= (1<<1);

118 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
,
y
+2)è
by‹
 |= (1<<2);

119 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
+1,
y
)è
by‹
 |= (1<<3);

120 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
+1,
y
+1)è
by‹
 |= (1<<4);

121 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
+1,
y
+2)è
by‹
 |= (1<<5);

122 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
,
y
+3)è
by‹
 |= (1<<6);

123 ià(
	`lwG‘Pix–
(
ÿnvas
,
x
+1,
y
+3)è
by‹
 |= (1<<7);

124 
unicode
[3];

125 
	`lwT¿n¦©ePix–sGroup
(
by‹
,
unicode
);

126 
‹xt
 = 
	`sdsÿ’
Ñext,
unicode
,3);

128 ià(
y
 !ğ
ÿnvas
->
height
-1è
‹xt
 = 
	`sdsÿ’
(text,"\n",1);

130  
‹xt
;

131 
	}
}

140 
	$lŞwut5Commªd
(
ş›Á
 *
c
) {

141 
cŞs
 = 66;

142 
squ¬es_³r_row
 = 8;

143 
squ¬es_³r_cŞ
 = 12;

146 ià(
c
->
¬gc
 > 1 &&

147 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[1],&
cŞs
,
NULL
è!ğ
C_OK
)

150 ià(
c
->
¬gc
 > 2 &&

151 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
squ¬es_³r_row
,
NULL
è!ğ
C_OK
)

154 ià(
c
->
¬gc
 > 3 &&

155 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
squ¬es_³r_cŞ
,
NULL
è!ğ
C_OK
)

160 ià(
cŞs
 < 1) cols = 1;

161 ià(
cŞs
 > 1000) cols = 1000;

162 ià(
squ¬es_³r_row
 < 1) squares_per_row = 1;

163 ià(
squ¬es_³r_row
 > 200) squares_per_row = 200;

164 ià(
squ¬es_³r_cŞ
 < 1) squares_per_col = 1;

165 ià(
squ¬es_³r_cŞ
 > 200) squares_per_col = 200;

168 
lwCªvas
 *
ÿnvas
 = 
	`lwD¿wSchÙ‹r
(
cŞs
,
squ¬es_³r_row
,
squ¬es_³r_cŞ
);

169 
sds
 
»nd”ed
 = 
	`»nd”Cªvas
(
ÿnvas
);

170 
»nd”ed
 = 
	`sdsÿt
(rendered,

172 
»nd”ed
 = 
	`sdsÿt
Ô’d”ed,
REDIS_VERSION
);

173 
»nd”ed
 = 
	`sdsÿ’
(rendered,"\n",1);

174 
	`addR•lyV”b©im
(
c
,
»nd”ed
,
	`sd¦’
(rendered),"txt");

175 
	`sdsä“
(
»nd”ed
);

176 
	`lwF»eCªvas
(
ÿnvas
);

177 
	}
}

	@lolwut6.c

42 
	~"£rv”.h
"

43 
	~"lŞwut.h
"

47 
sds
 
	$»nd”Cªvas
(
lwCªvas
 *
ÿnvas
) {

48 
sds
 
‹xt
 = 
	`sd£m±y
();

49 
y
 = 0; y < 
ÿnvas
->
height
; y++) {

50 
x
 = 0; x < 
ÿnvas
->
width
; x++) {

51 
cŞÜ
 = 
	`lwG‘Pix–
(
ÿnvas
,
x
,
y
);

52 *
û
;

57 
cŞÜ
) {

58 0: 
û
 = "0;30;40m"; ;

59 1: 
û
 = "0;90;100m"; ;

60 2: 
û
 = "0;37;47m"; ;

61 3: 
û
 = "0;97;107m"; ;

62 : 
û
 = "0;30;40m"; ;

64 
‹xt
 = 
	`sdsÿrštf
Ñext,"\033[% \033[0m",
û
);

66 ià(
y
 !ğ
ÿnvas
->
height
-1è
‹xt
 = 
	`sdsÿ’
(text,"\n",1);

68  
‹xt
;

69 
	}
}

74 
	sskysü­”
 {

75 
	mxoff
;

76 
	mwidth
;

77 
	mheight
;

78 
	mwšdows
;

79 
	mcŞÜ
;

82 
	$g’”©eSkysü­”
(
lwCªvas
 *
ÿnvas
, 
skysü­”
 *
si
) {

83 
¡¬ty
 = 
ÿnvas
->
height
-1;

84 
’dy
 = 
¡¬ty
 - 
si
->
height
 + 1;

85 
y
 = 
¡¬ty
; y >ğ
’dy
; y--) {

86 
x
 = 
si
->
xoff
; x < si->xoff+si->
width
; x++) {

88 ià(
y
 =ğ
’dy
 && (
x
 <ğ
si
->
xoff
+1 || x >ğsi->xoff+si->
width
-2))

90 
cŞÜ
 = 
si
->color;

94 ià(
si
->
wšdows
 &&

95 
x
 > 
si
->
xoff
+1 &&

96 
x
 < 
si
->
xoff
+si->
width
-2 &&

97 
y
 > 
’dy
+1 &&

98 
y
 < 
¡¬ty
-1)

102 
»lx
 = 
x
 - (
si
->
xoff
+1);

103 
»ly
 = 
y
 - (
’dy
+1);

108 ià(
»lx
/2 % 2 && 
»ly
 % 2) {

110 
cŞÜ
 = 1 + 
	`¿nd
() % 2;

111 } 
cŞÜ
 =ğ
si
->color);

114 ià(
»lx
 % 2è
cŞÜ
 = 
	`lwG‘Pix–
(
ÿnvas
,
x
-1,
y
);

117 
	`lwD¿wPix–
(
ÿnvas
,
x
,
y
,
cŞÜ
);

120 
	}
}

123 
	$g’”©eSkylše
(
lwCªvas
 *
ÿnvas
) {

124 
skysü­”
 
si
;

129 
cŞÜ
 = 2; color >= 1; color--) {

130 
si
.
cŞÜ
 = color;

131 
off£t
 = -10; off£ˆ< 
ÿnvas
->
width
;) {

132 
off£t
 +ğ
	`¿nd
() % 8;

133 
si
.
xoff
 = 
off£t
;

134 
si
.
width
 = 10 + 
	`¿nd
()%9;

135 ià(
cŞÜ
 == 2)

136 
si
.
height
 = 
ÿnvas
->height/2 + 
	`¿nd
()%canvas->height/2;

138 
si
.
height
 = 
ÿnvas
->height/2 + 
	`¿nd
()%canvas->height/3;

139 
si
.
wšdows
 = 0;

140 
	`g’”©eSkysü­”
(
ÿnvas
, &
si
);

141 ià(
cŞÜ
 == 2)

142 
off£t
 +ğ
si
.
width
/2;

144 
off£t
 +ğ
si
.
width
+1;

149 
si
.
cŞÜ
 = 0;

150 
off£t
 = -10; off£ˆ< 
ÿnvas
->
width
;) {

151 
off£t
 +ğ
	`¿nd
() % 8;

152 
si
.
xoff
 = 
off£t
;

153 
si
.
width
 = 5 + 
	`¿nd
()%14;

154 ià(
si
.
width
 % 4) si.width += (si.width % 3);

155 
si
.
height
 = 
ÿnvas
->height/3 + 
	`¿nd
()%canvas->height/2;

156 
si
.
wšdows
 = 1;

157 
	`g’”©eSkysü­”
(
ÿnvas
, &
si
);

158 
off£t
 +ğ
si
.
width
+5;

160 
	}
}

169 
	$lŞwut6Commªd
(
ş›Á
 *
c
) {

170 
cŞs
 = 80;

171 
rows
 = 20;

174 ià(
c
->
¬gc
 > 1 &&

175 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[1],&
cŞs
,
NULL
è!ğ
C_OK
)

178 ià(
c
->
¬gc
 > 2 &&

179 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
rows
,
NULL
è!ğ
C_OK
)

184 ià(
cŞs
 < 1) cols = 1;

185 ià(
cŞs
 > 1000) cols = 1000;

186 ià(
rows
 < 1)„ows = 1;

187 ià(
rows
 > 1000)„ows = 1000;

190 
lwCªvas
 *
ÿnvas
 = 
	`lwC»©eCªvas
(
cŞs
,
rows
,3);

191 
	`g’”©eSkylše
(
ÿnvas
);

192 
sds
 
»nd”ed
 = 
	`»nd”Cªvas
(
ÿnvas
);

193 
»nd”ed
 = 
	`sdsÿt
(rendered,

196 
»nd”ed
 = 
	`sdsÿt
Ô’d”ed,
REDIS_VERSION
);

197 
»nd”ed
 = 
	`sdsÿ’
(rendered,"\n",1);

198 
	`addR•lyV”b©im
(
c
,
»nd”ed
,
	`sd¦’
(rendered),"txt");

199 
	`sdsä“
(
»nd”ed
);

200 
	`lwF»eCªvas
(
ÿnvas
);

201 
	}
}

	@lzf.h

37 #iâdeà
LZF_H


38 
	#LZF_H


	)

49 
	#LZF_VERSION
 0x0105

	)

77 
lzf_com´ess
 (cÚ¡ *cÚ¡ 
š_d©a
, 
š_Ën
,

78 *
out_d©a
, 
out_Ën
);

96 
lzf_decom´ess
 (cÚ¡ *cÚ¡ 
š_d©a
, 
š_Ën
,

97 *
out_d©a
, 
out_Ën
);

	@lzfP.h

37 #iâdeà
LZFP_h


38 
	#LZFP_h


	)

40 
	#STANDALONE
 1

	)

42 #iâdeà
STANDALONE


43 
	~"lzf.h
"

54 #iâdeà
HLOG


55 
	#HLOG
 16

	)

63 #iâdeà
VERY_FAST


64 
	#VERY_FAST
 1

	)

74 #iâdeà
ULTRA_FAST


75 
	#ULTRA_FAST
 0

	)

81 #iâdeà
STRICT_ALIGN


82 #ià!(
defšed
(
__i386
è|| defšed (
__amd64
))

83 
	#STRICT_ALIGN
 1

	)

85 
	#STRICT_ALIGN
 0

	)

94 #iâdeà
INIT_HTAB


95 
	#INIT_HTAB
 0

	)

103 #iâdeà
AVOID_ERRNO


104 
	#AVOID_ERRNO
 0

	)

112 #iâdeà
LZF_STATE_ARG


113 
	#LZF_STATE_ARG
 0

	)

124 #iâdeà
CHECK_INPUT


125 
	#CHECK_INPUT
 1

	)

138 #ifdeà
__ılu¥lus


139 
	~<c¡ršg
>

140 
	~<şim™s
>

141 
usšg
 
Çme¥aû
 
	g¡d
;

143 
	~<¡ršg.h
>

144 
	~<lim™s.h
>

147 #iâdeà
LZF_USE_OFFSETS


148 #ià
defšed
 (
WIN32
)

149 
	#LZF_USE_OFFSETS
 
	`defšed
(
_M_X64
)

	)

151 #ià
__ılu¥lus
 > 199711L

152 
	~<c¡dšt
>

154 
	~<¡dšt.h
>

156 
	#LZF_USE_OFFSETS
 (
UINTPTR_MAX
 > 0xffffffffU)

	)

160 
	tu8
;

162 #ià
LZF_USE_OFFSETS


163 
	#LZF_HSLOT_BIAS
 ((cÚ¡ 
u8
 *)
š_d©a
)

	)

164 
	tLZF_HSLOT
;

166 
	#LZF_HSLOT_BIAS
 0

	)

167 cÚ¡ 
	tu8
 *
	tLZF_HSLOT
;

170 
LZF_HSLOT
 
	tLZF_STATE
[1 << (
HLOG
)];

172 #ià!
STRICT_ALIGN


174 #ià
USHRT_MAX
 == 65535

175 
	tu16
;

176 #–ià
UINT_MAX
 == 65535

177 
	tu16
;

179 #undeà
STRICT_ALIGN


180 
	#STRICT_ALIGN
 1

	)

184 #ià
ULTRA_FAST


185 #undeà
VERY_FAST


	@lzf_c.c

37 
	~"lzfP.h
"

39 
	#HSIZE
 (1 << (
HLOG
))

	)

47 #iâdeà
FRST


48 
	#FRST
(
p
è((Õ[0]è<< 8è|…[1])

	)

49 
	#NEXT
(
v
,
p
è(((vè<< 8è|…[2])

	)

50 #ià
ULTRA_FAST


51 
	#IDX
(
h
è((Ğh >> (3*8 - 
HLOG
)è- h ) & (
HSIZE
 - 1))

	)

52 #–ià
VERY_FAST


53 
	#IDX
(
h
è((Ğh >> (3*8 - 
HLOG
)è- h*5è& (
HSIZE
 - 1))

	)

55 
	#IDX
(
h
è((((h ^ (h << 5)è>> (3*8 - 
HLOG
)è- h*5è& (
HSIZE
 - 1))

	)

69 
	#FRST
(
p
èÕ[0] << 5è^…[1]

	)

70 
	#NEXT
(
v
,
p
è((vè<< 5è^…[2]

	)

71 
	#IDX
(
h
è((hè& (
HSIZE
 - 1))

	)

74 
	#MAX_LIT
 (1 << 5)

	)

75 
	#MAX_OFF
 (1 << 13)

	)

76 
	#MAX_REF
 ((1 << 8è+ (1 << 3))

	)

78 #ià
__GNUC__
 >= 3

79 
	#ex³ù
(
ex´
,
v®ue
è
	`__butš_ex³ù
 (Óx´),(v®ue))

	)

80 
	#šlše
 
šlše


	)

82 
	#ex³ù
(
ex´
,
v®ue
èÓx´)

	)

83 
	#šlše
 

	)

86 
	#ex³ù_çl£
(
ex´
è
	`ex³ù
 (Óx´è!ğ0, 0)

	)

87 
	#ex³ù_Œue
(
ex´
è
	`ex³ù
 (Óx´è!ğ0, 1)

	)

99 
lzf_com´ess
 (cÚ¡ *cÚ¡ 
š_d©a
, 
š_Ën
,

100 *
out_d©a
, 
out_Ën


101 #ià
LZF_STATE_ARG


102 , 
LZF_STATE
 
hb


106 #ià!
LZF_STATE_ARG


107 
LZF_STATE
 
	ghb
;

109 cÚ¡ 
u8
 *
	g
 = (cÚ¡ u8 *)
š_d©a
;

110 
u8
 *
	gİ
 = (u8 *)
out_d©a
;

111 cÚ¡ 
u8
 *
	gš_’d
 = 

 + 
š_Ën
;

112 
u8
 *
	gout_’d
 = 
İ
 + 
out_Ën
;

113 cÚ¡ 
u8
 *
	g»f
;

122 #ià
defšed
 (
WIN32
è&& defšed (
_M_X64
)

123 
_št64
 
	goff
;

125 
	goff
;

127 
	ghv®
;

128 
	gl™
;

130 ià(!
	gš_Ën
 || !
	gout_Ën
)

133 #ià
INIT_HTAB


134 
mem£t
 (
hb
, 0,  (htab));

137 
	gl™
 = 0; 
	gİ
++;

139 
	ghv®
 = 
FRST
 (

);

140 
	g
 < 
	gš_’d
 - 2)

142 
LZF_HSLOT
 *
	gh¦Ù
;

144 
	ghv®
 = 
NEXT
 (
hv®
, 

);

145 
	gh¦Ù
 = 
hb
 + 
IDX
 (
hv®
);

146 
	g»f
 = *
h¦Ù
 + 
LZF_HSLOT_BIAS
; *
	gh¦Ù
 = 

 - LZF_HSLOT_BIAS;

149 #ià
INIT_HTAB


150 && 
	g»f
 < 
	g


152 && (
	goff
 = 

 - 
»f
 - 1è< 
MAX_OFF


153 && 
»f
 > (
u8
 *)
š_d©a


154 && 
»f
[2] =ğ

[2]

155 #ià
STRICT_ALIGN


156 && ((
»f
[1] << 8è|„ef[0]è=ğ((

[1] << 8) | ip[0])

158 && *(
u16
 *)
»f
 =ğ*(u16 *)



163 
Ën
 = 2;

164 
	gmaxËn
 = 
š_’d
 - 

 - 
Ën
;

165 
	gmaxËn
 = 
maxËn
 > 
MAX_REF
 ? MAX_REF : maxlen;

167 ià(
ex³ù_çl£
 (
İ
 + 3 + 1 >ğ
out_’d
))

168 ià(
İ
 - !
l™
 + 3 + 1 >ğ
out_’d
)

171 
	gİ
 [- 
l™
 - 1] =†it - 1;

172 
	gİ
 -ğ!
l™
;

176 ià(
ex³ù_Œue
 (
maxËn
 > 16))

178 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

179 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

180 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

181 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

183 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

184 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

185 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

186 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

188 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

189 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

190 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

191 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

193 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

194 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

195 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

196 
	gËn
++; ià(
	g»f
 [
Ën
] !ğ

 [len]) ;

200 
	gËn
++;

201 
	gËn
 < 
	gmaxËn
 && 
	g»f
[
Ën
] =ğ

[len]);

206 
	gËn
 -= 2;

207 
	g
++;

209 ià(
	gËn
 < 7)

211 *
	gİ
++ = (
off
 >> 8è+ (
Ën
 << 5);

215 *
	gİ
++ = (
off
 >> 8) + ( 7 << 5);

216 *
	gİ
++ = 
Ën
 - 7;

219 *
	gİ
++ = 
off
;

221 
	gl™
 = 0; 
	gİ
++;

223 
	g
 +ğ
Ën
 + 1;

225 ià(
ex³ù_çl£
 (

 >ğ
š_’d
 - 2))

228 #ià
ULTRA_FAST
 || 
VERY_FAST


229 --
	g
;

230 #ià
VERY_FAST
 && !
ULTRA_FAST


231 --
	g
;

233 
	ghv®
 = 
FRST
 (

);

235 
	ghv®
 = 
NEXT
 (
hv®
, 

);

236 
	ghb
[
IDX
 (
hv®
)] = 

 - 
LZF_HSLOT_BIAS
;

237 
	g
++;

239 #ià
VERY_FAST
 && !
ULTRA_FAST


240 
	ghv®
 = 
NEXT
 (
hv®
, 

);

241 
	ghb
[
IDX
 (
hv®
)] = 

 - 
LZF_HSLOT_BIAS
;

242 
	g
++;

245 
	g
 -ğ
Ën
 + 1;

249 
	ghv®
 = 
NEXT
 (
hv®
, 

);

250 
	ghb
[
IDX
 (
hv®
)] = 

 - 
LZF_HSLOT_BIAS
;

251 
	g
++;

253 
	gËn
--);

259 ià(
ex³ù_çl£
 (
İ
 >ğ
out_’d
))

262 
	gl™
++; *
	gİ
++ = *

++;

264 ià(
ex³ù_çl£
 (
l™
 =ğ
MAX_LIT
))

266 
İ
 [- 
l™
 - 1] =†it - 1;

267 
	gl™
 = 0; 
	gİ
++;

272 ià(
	gİ
 + 3 > 
	gout_’d
)

275 
	g
 < 
	gš_’d
)

277 
	gl™
++; *
	gİ
++ = *

++;

279 ià(
ex³ù_çl£
 (
l™
 =ğ
MAX_LIT
))

281 
İ
 [- 
l™
 - 1] =†it - 1;

282 
	gl™
 = 0; 
	gİ
++;

286 
	gİ
 [- 
l™
 - 1] =†it - 1;

287 
	gİ
 -ğ!
l™
;

289  
	gİ
 - (
	gu8
 *)
	gout_d©a
;

	@lzf_d.c

37 
	~"lzfP.h
"

39 #ià
AVOID_ERRNO


40 
	#SET_ERRNO
(
n
)

	)

42 
	~<”ºo.h
>

43 
	#SET_ERRNO
(
n
è
”ºo
 = (n)

	)

46 #ià
USE_REP_MOVSB


47 #ià(
__i386
 || 
__amd64
è&& 
__GNUC__
 >= 3

48 
	#lzf_movsb
(
d¡
, 
¤c
, 
Ën
) \

49 
	`asm
 ("rep movsb" \

50 : "=D" (
d¡
), "=S" (
¤c
), "=c" (
Ën
) \

51 : "0" (
d¡
), "1" (
¤c
), "2" (
Ën
));

	)

55 #ià
defšed
(
__GNUC__
) && __GNUC__ >= 5

56 #´agm¨
GCC
 
dŸgno¡ic
 
push


57 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wimplicit-fallthrough"

60 
	$lzf_decom´ess
 (cÚ¡ *cÚ¡ 
š_d©a
, 
š_Ën
,

61 *
out_d©a
, 
out_Ën
)

63 
u8
 cÚ¡ *

 = (cÚ¡ u8 *)
š_d©a
;

64 
u8
 *
İ
 = (u8 *)
out_d©a
;

65 
u8
 cÚ¡ *cÚ¡ 
š_’d
 = 

 + 
š_Ën
;

66 
u8
 *cÚ¡ 
out_’d
 = 
İ
 + 
out_Ën
;

70 
ù¾
 = *

++;

72 ià(
ù¾
 < (1 << 5))

74 
ù¾
++;

76 ià(
İ
 + 
ù¾
 > 
out_’d
)

78 
	`SET_ERRNO
 (
E2BIG
);

82 #ià
CHECK_INPUT


83 ià(

 + 
ù¾
 > 
š_’d
)

85 
	`SET_ERRNO
 (
EINVAL
);

90 #ifdeà
lzf_movsb


91 
	`lzf_movsb
 (
İ
, 

, 
ù¾
);

93 
ù¾
)

95 32: *
İ
++ = *

++; 31: *op++ = *ip++; 30: *op++ = *ip++; 29: *op++ = *ip++;

96 28: *
İ
++ = *

++; 27: *op++ = *ip++; 26: *op++ = *ip++; 25: *op++ = *ip++;

97 24: *
İ
++ = *

++; 23: *op++ = *ip++; 22: *op++ = *ip++; 21: *op++ = *ip++;

98 20: *
İ
++ = *

++; 19: *op++ = *ip++; 18: *op++ = *ip++; 17: *op++ = *ip++;

99 16: *
İ
++ = *

++; 15: *op++ = *ip++; 14: *op++ = *ip++; 13: *op++ = *ip++;

100 12: *
İ
++ = *

++; 11: *op++ = *ip++; 10: *op++ = *ip++; 9: *op++ = *ip++;

101 8: *
İ
++ = *

++; 7: *op++ = *ip++; 6: *op++ = *ip++; 5: *op++ = *ip++;

102 4: *
İ
++ = *

++; 3: *op++ = *ip++; 2: *op++ = *ip++; 1: *op++ = *ip++;

108 
Ën
 = 
ù¾
 >> 5;

110 
u8
 *
»f
 = 
İ
 - ((
ù¾
 & 0x1f) << 8) - 1;

112 #ià
CHECK_INPUT


113 ià(

 >ğ
š_’d
)

115 
	`SET_ERRNO
 (
EINVAL
);

119 ià(
Ën
 == 7)

121 
Ën
 +ğ*

++;

122 #ià
CHECK_INPUT


123 ià(

 >ğ
š_’d
)

125 
	`SET_ERRNO
 (
EINVAL
);

131 
»f
 -ğ*

++;

133 ià(
İ
 + 
Ën
 + 2 > 
out_’d
)

135 
	`SET_ERRNO
 (
E2BIG
);

139 ià(
»f
 < (
u8
 *)
out_d©a
)

141 
	`SET_ERRNO
 (
EINVAL
);

145 #ifdeà
lzf_movsb


146 
Ën
 += 2;

147 
	`lzf_movsb
 (
İ
, 
»f
, 
Ën
);

149 
Ën
)

152 
Ën
 += 2;

154 ià(
İ
 >ğ
»f
 + 
Ën
)

157 
	`memıy
 (
İ
, 
»f
, 
Ën
);

158 
İ
 +ğ
Ën
;

164 *
İ
++ = *
»f
++;

165 --
Ën
);

170 9: *
İ
++ = *
»f
++;

171 8: *
İ
++ = *
»f
++;

172 7: *
İ
++ = *
»f
++;

173 6: *
İ
++ = *
»f
++;

174 5: *
İ
++ = *
»f
++;

175 4: *
İ
++ = *
»f
++;

176 3: *
İ
++ = *
»f
++;

177 2: *
İ
++ = *
»f
++;

178 1: *
İ
++ = *
»f
++;

179 0: *
İ
++ = *
»f
++;

180 *
İ
++ = *
»f
++;

185 

 < 
š_’d
);

187  
İ
 - (
u8
 *)
out_d©a
;

188 
	}
}

189 #ià
defšed
(
__GNUC__
) && __GNUC__ >= 5

190 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


	@memtest.c

29 
	~<¡dšt.h
>

30 
	~<¡dlib.h
>

31 
	~<¡dio.h
>

32 
	~<¡ršg.h
>

33 
	~<as£¹.h
>

34 
	~<lim™s.h
>

35 
	~<”ºo.h
>

36 
	~<‹rmios.h
>

37 
	~<sys/ioùl.h
>

38 #ià
defšed
(
__sun
)

39 
	~<¡rİts.h
>

41 
	~"cÚfig.h
"

43 #ià(
ULONG_MAX
 == 4294967295UL)

44 
	#MEMTEST_32BIT


	)

45 #–ià(
ULONG_MAX
 == 18446744073709551615ULL)

46 
	#MEMTEST_64BIT


	)

51 #ifdeà
MEMTEST_32BIT


52 
	#ULONG_ONEZERO
 0x¯¯¯¯UL

	)

53 
	#ULONG_ZEROONE
 0x55555555UL

	)

55 
	#ULONG_ONEZERO
 0x¯¯¯¯¯¯¯¯UL

	)

56 
	#ULONG_ZEROONE
 0x5555555555555555UL

	)

59 
wšsize
 
	gws
;

60 
size_t
 
	g´og»ss_´š‹d
;

61 
size_t
 
	g´og»ss_fuÎ
;

63 
	$mem‹¡_´og»ss_¡¬t
(*
t™Ë
, 
·ss
) {

64 
j
;

66 
	`´štf
("\x1b[H\x1b[2J");

68 
j
 = 0; j < 
ws
.
ws_cŞ
*(ws.
ws_row
-2); j++è
	`´štf
(".");

69 
	`´štf
("Please keepheest„unning several minutes…er GB of memory.\n");

70 
	`´štf
("Also check http://www.memtest86.com/‡nd http://pyropus.ca/software/memtester/");

71 
	`´štf
("\x1b[H\x1b[2K");

72 
	`´štf
("% [%d]\n", 
t™Ë
, 
·ss
);

73 
´og»ss_´š‹d
 = 0;

74 
´og»ss_fuÎ
 = 
ws
.
ws_cŞ
*(ws.
ws_row
-3);

75 
	`fæush
(
¡dout
);

76 
	}
}

78 
	$mem‹¡_´og»ss_’d
() {

79 
	`´štf
("\x1b[H\x1b[2J");

80 
	}
}

82 
	$mem‹¡_´og»ss_¡•
(
size_t
 
cu¼
, size_ˆ
size
, 
c
) {

83 
size_t
 
ch¬s
 = (()
cu¼
*
´og»ss_fuÎ
)/
size
, 
j
;

85 
j
 = 0; j < 
ch¬s
-
´og»ss_´š‹d
; j++è
	`´štf
("%c",
c
);

86 
´og»ss_´š‹d
 = 
ch¬s
;

87 
	`fæush
(
¡dout
);

88 
	}
}

93 
	$mem‹¡_add»ssšg
(*
l
, 
size_t
 
by‹s
, 
š‹¿ùive
) {

94 
wÜds
 = 
by‹s
/();

95 
j
, *
p
;

98 
p
 = 
l
;

99 
j
 = 0; j < 
wÜds
; j++) {

100 *
p
 = ()p;

101 
p
++;

102 ià((
j
 & 0xffffè=ğ0 && 
š‹¿ùive
)

103 
	`mem‹¡_´og»ss_¡•
(
j
,
wÜds
*2,'A');

106 
p
 = 
l
;

107 
j
 = 0; j < 
wÜds
; j++) {

108 ià(*
p
 != ()p) {

109 ià(
š‹¿ùive
) {

110 
	`´štf
("\n*** MEMORY ADDRESSING ERROR: %p contains %lu\n",

111 (*è
p
, *p);

112 
	`ex™
(1);

116 
p
++;

117 ià((
j
 & 0xffffè=ğ0 && 
š‹¿ùive
)

118 
	`mem‹¡_´og»ss_¡•
(
j
+
wÜds
,words*2,'A');

121 
	}
}

131 
	#xÜshiá64¡¬_Ãxt
() do { \

132 
r£ed
 ^=„seed >> 12; \

133 
r£ed
 ^=„seed << 25; \

134 
r£ed
 ^=„seed >> 27; \

135 
rout
 = 
r£ed
 * 
	`UINT64_C
(2685821657736338717); \

136 } 0)

	)

138 
	$mem‹¡_fl_¿ndom
(*
l
, 
size_t
 
by‹s
, 
š‹¿ùive
) {

139 
¡•
 = 4096/();

140 
wÜds
 = 
by‹s
/()/2;

141 
iwÜds
 = 
wÜds
/
¡•
;

142 
off
, 
w
, *
l1
, *
l2
;

143 
ušt64_t
 
r£ed
 = 
	`UINT64_C
(0xd13133de9afdb566);

144 
ušt64_t
 
rout
 = 0;

146 
	`as£¹
((
by‹s
 & 4095) == 0);

147 
off
 = 0; ofà< 
¡•
; off++) {

148 
l1
 = 
l
+
off
;

149 
l2
 = 
l1
+
wÜds
;

150 
w
 = 0; w < 
iwÜds
; w++) {

151 
	`xÜshiá64¡¬_Ãxt
();

152 *
l1
 = *
l2
 = (è
rout
;

153 
l1
 +ğ
¡•
;

154 
l2
 +ğ
¡•
;

155 ià((
w
 & 0xffffè=ğ0 && 
š‹¿ùive
)

156 
	`mem‹¡_´og»ss_¡•
(
w
+
iwÜds
*
off
,
wÜds
,'R');

159 
	}
}

163 
	$mem‹¡_fl_v®ue
(*
l
, 
size_t
 
by‹s
, 
v1
,

164 
v2
, 
sym
, 
š‹¿ùive
)

166 
¡•
 = 4096/();

167 
wÜds
 = 
by‹s
/()/2;

168 
iwÜds
 = 
wÜds
/
¡•
;

169 
off
, 
w
, *
l1
, *
l2
, 
v
;

171 
	`as£¹
((
by‹s
 & 4095) == 0);

172 
off
 = 0; ofà< 
¡•
; off++) {

173 
l1
 = 
l
+
off
;

174 
l2
 = 
l1
+
wÜds
;

175 
v
 = (
off
 & 1è? 
v2
 : 
v1
;

176 
w
 = 0; w < 
iwÜds
; w++) {

177 #ifdeà
MEMTEST_32BIT


178 *
l1
 = *
l2
 = ((è
v
) |

179 (((è
v
) << 16);

181 *
l1
 = *
l2
 = ((è
v
) |

182 (((è
v
) << 16) |

183 (((è
v
) << 32) |

184 (((è
v
) << 48);

186 
l1
 +ğ
¡•
;

187 
l2
 +ğ
¡•
;

188 ià((
w
 & 0xffffè=ğ0 && 
š‹¿ùive
)

189 
	`mem‹¡_´og»ss_¡•
(
w
+
iwÜds
*
off
,
wÜds
,
sym
);

192 
	}
}

194 
	$mem‹¡_com·»
(*
l
, 
size_t
 
by‹s
, 
š‹¿ùive
) {

195 
wÜds
 = 
by‹s
/()/2;

196 
w
, *
l1
, *
l2
;

198 
	`as£¹
((
by‹s
 & 4095) == 0);

199 
l1
 = 
l
;

200 
l2
 = 
l1
+
wÜds
;

201 
w
 = 0; w < 
wÜds
; w++) {

202 ià(*
l1
 !ğ*
l2
) {

203 ià(
š‹¿ùive
) {

204 
	`´štf
("\n*** MEMORY ERROR DETECTED: %p != %p (%lu vs %lu)\n",

205 (*)
l1
, (*)
l2
, *l1, *l2);

206 
	`ex™
(1);

210 
l1
 ++;

211 
l2
 ++;

212 ià((
w
 & 0xffffè=ğ0 && 
š‹¿ùive
)

213 
	`mem‹¡_´og»ss_¡•
(
w
,
wÜds
,'=');

216 
	}
}

218 
	$mem‹¡_com·»_times
(*
m
, 
size_t
 
by‹s
, 
·ss
, 
times
,

219 
š‹¿ùive
)

221 
j
;

222 
”rÜs
 = 0;

224 
j
 = 0; j < 
times
; j++) {

225 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_¡¬t
("Com·»",
·ss
);

226 
”rÜs
 +ğ
	`mem‹¡_com·»
(
m
,
by‹s
,
š‹¿ùive
);

227 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_’d
();

229  
”rÜs
;

230 
	}
}

237 
	$mem‹¡_‹¡
(*
m
, 
size_t
 
by‹s
, 
·s£s
, 
š‹¿ùive
) {

238 
·ss
 = 0;

239 
”rÜs
 = 0;

241 
·ss
 !ğ
·s£s
) {

242 
·ss
++;

244 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_¡¬t
("Add»ssšge¡",
·ss
);

245 
”rÜs
 +ğ
	`mem‹¡_add»ssšg
(
m
,
by‹s
,
š‹¿ùive
);

246 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_’d
();

248 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_¡¬t
("Rªdom fl",
·ss
);

249 
	`mem‹¡_fl_¿ndom
(
m
,
by‹s
,
š‹¿ùive
);

250 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_’d
();

251 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
m
,
by‹s
,
·ss
,4,
š‹¿ùive
);

253 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_¡¬t
("SŞid fl",
·ss
);

254 
	`mem‹¡_fl_v®ue
(
m
,
by‹s
,0,()-1,'S',
š‹¿ùive
);

255 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_’d
();

256 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
m
,
by‹s
,
·ss
,4,
š‹¿ùive
);

258 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_¡¬t
("Check”bßrd fl",
·ss
);

259 
	`mem‹¡_fl_v®ue
(
m
,
by‹s
,
ULONG_ONEZERO
,
ULONG_ZEROONE
,'C',
š‹¿ùive
);

260 ià(
š‹¿ùive
è
	`mem‹¡_´og»ss_’d
();

261 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
m
,
by‹s
,
·ss
,4,
š‹¿ùive
);

263  
”rÜs
;

264 
	}
}

275 
	#MEMTEST_BACKUP_WORDS
 (1024*(1024/()))

	)

279 
	#MEMTEST_DECACHE_SIZE
 (1024*8)

	)

280 
	$mem‹¡_´e£rvšg_‹¡
(*
m
, 
size_t
 
by‹s
, 
·s£s
) {

281 
backup
[
MEMTEST_BACKUP_WORDS
];

282 *
p
 = 
m
;

283 *
’d
 = (*è(((*)
m
)+(
by‹s
-
MEMTEST_DECACHE_SIZE
));

284 
size_t
 
Ëá
 = 
by‹s
;

285 
”rÜs
 = 0;

287 ià(
by‹s
 & 4095)  0;

288 ià(
by‹s
 < 4096*2)  0;

290 
Ëá
) {

294 ià(
Ëá
 == 4096) {

295 
Ëá
 += 4096;

296 
p
 -= 4096/();

299 
·ss
 = 0;

300 
size_t
 
Ën
 = (
Ëá
 > (
backup
)) ? (backup) :†eft;

303 ià(
Ën
/4096 % 2)†en -= 4096;

305 
	`memıy
(
backup
,
p
,
Ën
);

306 
·ss
 !ğ
·s£s
) {

307 
·ss
++;

308 
”rÜs
 +ğ
	`mem‹¡_add»ssšg
(
p
,
Ën
,0);

309 
	`mem‹¡_fl_¿ndom
(
p
,
Ën
,0);

310 ià(
by‹s
 >ğ
MEMTEST_DECACHE_SIZE
) {

311 
	`mem‹¡_com·»_times
(
m
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

312 
	`mem‹¡_com·»_times
(
’d
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

314 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
p
,
Ën
,
·ss
,4,0);

315 
	`mem‹¡_fl_v®ue
(
p
,
Ën
,0,()-1,'S',0);

316 ià(
by‹s
 >ğ
MEMTEST_DECACHE_SIZE
) {

317 
	`mem‹¡_com·»_times
(
m
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

318 
	`mem‹¡_com·»_times
(
’d
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

320 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
p
,
Ën
,
·ss
,4,0);

321 
	`mem‹¡_fl_v®ue
(
p
,
Ën
,
ULONG_ONEZERO
,
ULONG_ZEROONE
,'C',0);

322 ià(
by‹s
 >ğ
MEMTEST_DECACHE_SIZE
) {

323 
	`mem‹¡_com·»_times
(
m
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

324 
	`mem‹¡_com·»_times
(
’d
,
MEMTEST_DECACHE_SIZE
,
·ss
,1,0);

326 
”rÜs
 +ğ
	`mem‹¡_com·»_times
(
p
,
Ën
,
·ss
,4,0);

328 
	`memıy
(
p
,
backup
,
Ën
);

329 
Ëá
 -ğ
Ën
;

330 
p
 +ğ
Ën
/();

332  
”rÜs
;

333 
	}
}

336 
	$mem‹¡_®loc_ªd_‹¡
(
size_t
 
megaby‹s
, 
·s£s
) {

337 
size_t
 
by‹s
 = 
megaby‹s
*1024*1024;

338 *
m
 = 
	`m®loc
(
by‹s
);

340 ià(
m
 =ğ
NULL
) {

341 
	`årštf
(
¡d”r
,"Unableo‡llocate %zu megabytes: %s",

342 
megaby‹s
, 
	`¡»¼Ü
(
”ºo
));

343 
	`ex™
(1);

345 
	`mem‹¡_‹¡
(
m
,
by‹s
,
·s£s
,1);

346 
	`ä“
(
m
);

347 
	}
}

349 
	$mem‹¡
(
size_t
 
megaby‹s
, 
·s£s
) {

350 ià(
	`ioùl
(1, 
TIOCGWINSZ
, &
ws
) == -1) {

351 
ws
.
ws_cŞ
 = 80;

352 
ws
.
ws_row
 = 20;

354 
	`mem‹¡_®loc_ªd_‹¡
(
megaby‹s
,
·s£s
);

355 
	`´štf
("\nYour memory…assedhisest.\n");

356 
	`´štf
("Please if you‡re still in doubt usehe followingwoools:\n");

357 
	`´štf
("1) memtest86: http://www.memtest86.com/\n");

358 
	`´štf
("2) memtester: http://pyropus.ca/software/memtester/\n");

359 
	`ex™
(0);

360 
	}
}

	@module.c

30 
	~"£rv”.h
"

31 
	~"şu¡”.h
"

32 
	~"rdb.h
"

33 
	~<dlfú.h
>

34 
	~<sys/¡©.h
>

35 
	~<sys/wa™.h
>

43 
	sRedisModuËInfoCtx
 {

44 
RedisModuË
 *
	mmoduË
;

45 cÚ¡ *
	m»que¡ed_£ùiÚ
;

46 
sds
 
	mšfo
;

47 
	m£ùiÚs
;

48 
	mš_£ùiÚ
;

49 
	mš_diù_f›ld
;

50 } 
	tRedisModuËInfoCtx
;

52 (*
	tRedisModuËInfoFunc
)(
	tRedisModuËInfoCtx
 *
	tùx
, 
	tfÜ_üash_»pÜt
);

55 
	sRedisModuË
 {

56 *
hªdË
;

57 *
Çme
;

58 
v”
;

59 
­iv”
;

60 
li¡
 *
ty³s
;

61 
li¡
 *
u£dby
;

62 
li¡
 *
usšg
;

63 
li¡
 *
f‹rs
;

64 
š_ÿÎ
;

65 
š_hook
;

66 
İtiÚs
;

67 
blocked_ş›Ás
;

68 
RedisModuËInfoFunc
 
šfo_cb
;

70 
RedisModuË
 
	tRedisModuË
;

76 
	sRedisModuËSh¬edAPI
 {

77 *
func
;

78 
RedisModuË
 *
moduË
;

80 
RedisModuËSh¬edAPI
 
	tRedisModuËSh¬edAPI
;

82 
diù
 *
moduËs
;

86 
	sAutoMemEÁry
 {

87 *
±r
;

88 
ty³
;

92 
	#REDISMODULE_AM_KEY
 0

	)

93 
	#REDISMODULE_AM_STRING
 1

	)

94 
	#REDISMODULE_AM_REPLY
 2

	)

95 
	#REDISMODULE_AM_FREED
 3

	)

96 
	#REDISMODULE_AM_DICT
 4

	)

97 
	#REDISMODULE_AM_INFO
 5

	)

112 
	#REDISMODULE_POOL_ALLOC_MIN_SIZE
 (1024*8)

	)

113 
	#REDISMODULE_POOL_ALLOC_ALIGN
 ((*))

	)

115 
	sRedisModuËPoŞAÎocBlock
 {

116 
ušt32_t
 
size
;

117 
ušt32_t
 
u£d
;

118 
RedisModuËPoŞAÎocBlock
 *
Ãxt
;

119 
memÜy
[];

120 } 
	tRedisModuËPoŞAÎocBlock
;

130 
RedisModuËBlockedCl›Á
;

132 
	sRedisModuËCtx
 {

133 *
g‘­ifunıŒ
;

134 
RedisModuË
 *
moduË
;

135 
ş›Á
 *client;

136 
RedisModuËBlockedCl›Á
 *
blocked_ş›Á
;

138 
AutoMemEÁry
 *
amqueue
;

139 
amqueue_Ën
;

140 
amqueue_u£d
;

141 
æags
;

142 **
po¡pÚed_¬¿ys
;

143 
po¡pÚed_¬¿ys_couÁ
;

144 *
blocked_´ivd©a
;

145 
RedisModuËSŒšg
 *
blocked_»ady_key
;

150 *
keys_pos
;

151 
keys_couÁ
;

153 
RedisModuËPoŞAÎocBlock
 *
·_h—d
;

154 
»disOpA¼ay
 
§ved_İ¬¿y
;

159 
RedisModuËCtx
 
	tRedisModuËCtx
;

161 
	#REDISMODULE_CTX_INIT
 {(*)()&
RM_G‘Api
, 
NULL
, NULL, NULL, NULL, 0, 0, 0, NULL, 0, NULL, NULL, NULL, 0, NULL, {0}
	}

	)
}

162 
	#REDISMODULE_CTX_MULTI_EMITTED
 (1<<0)

	)

163 
	#REDISMODULE_CTX_AUTO_MEMORY
 (1<<1)

	)

164 
	#REDISMODULE_CTX_KEYS_POS_REQUEST
 (1<<2)

	)

165 
	#REDISMODULE_CTX_BLOCKED_REPLY
 (1<<3)

	)

166 
	#REDISMODULE_CTX_BLOCKED_TIMEOUT
 (1<<4)

	)

167 
	#REDISMODULE_CTX_THREAD_SAFE
 (1<<5)

	)

168 
	#REDISMODULE_CTX_BLOCKED_DISCONNECTED
 (1<<6)

	)

169 
	#REDISMODULE_CTX_MODULE_COMMAND_CALL
 (1<<7)

	)

172 
	sRedisModuËKey
 {

173 
RedisModuËCtx
 *
	mùx
;

174 
»disDb
 *
	mdb
;

175 
robj
 *
	mkey
;

176 
robj
 *
	mv®ue
;

177 *
	m™”
;

178 
	mmode
;

181 
ušt32_t
 
	mzty³
;

182 
z¿nge¥ec
 
	mzrs
;

183 
zËx¿nge¥ec
 
	mzÌs
;

184 
ušt32_t
 
	mz¡¬t
;

185 
ušt32_t
 
	mz’d
;

186 *
	mzcu¼’t
;

187 
	mz”
;

190 
RedisModuËKey
 
	tRedisModuËKey
;

193 
	#REDISMODULE_ZSET_RANGE_NONE
 0

	)

194 
	#REDISMODULE_ZSET_RANGE_LEX
 1

	)

195 
	#REDISMODULE_ZSET_RANGE_SCORE
 2

	)

196 
	#REDISMODULE_ZSET_RANGE_POS
 3

	)

200 
	gRedisModuËBlockedCl›Á
;

201 (*
	tRedisModuËCmdFunc
è(
	tRedisModuËCtx
 *
	tùx
, **
	t¬gv
, 
	t¬gc
);

202 (*
	tRedisModuËDiscÚÃùFunc
è(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËBlockedCl›Á
 *
	tbc
);

205 
	sRedisModuËCommªdProxy
 {

206 
RedisModuË
 *
moduË
;

207 
RedisModuËCmdFunc
 
func
;

208 
»disCommªd
 *
»discmd
;

210 
RedisModuËCommªdProxy
 
	tRedisModuËCommªdProxy
;

212 
	#REDISMODULE_REPLYFLAG_NONE
 0

	)

213 
	#REDISMODULE_REPLYFLAG_TOPARSE
 (1<<0è

	)

214 
	#REDISMODULE_REPLYFLAG_NESTED
 (1<<1è

	)

220 
	sRedisModuËC®lR•ly
 {

221 
RedisModuËCtx
 *
ùx
;

222 
ty³
;

223 
æags
;

224 
size_t
 
Ën
;

225 *
´Ùo
;

226 
size_t
 
´ÙŞ’
;

228 cÚ¡ *
¡r
;

232 
Î
;

233 
RedisModuËC®lR•ly
 *
¬¿y
;

234 } 
v®
;

235 } 
	tRedisModuËC®lR•ly
;

239 
	sRedisModuËBlockedCl›Á
 {

240 
ş›Á
 *client;

242 
RedisModuË
 *
moduË
;

243 
RedisModuËCmdFunc
 
»¶y_ÿÎback
;

244 
RedisModuËCmdFunc
 
timeout_ÿÎback
;

245 
RedisModuËDiscÚÃùFunc
 
discÚÃù_ÿÎback
;

246 (*
ä“_´ivd©a
)(
RedisModuËCtx
*,*);

247 *
´ivd©a
;

250 
ş›Á
 *
»¶y_ş›Á
;

252 
dbid
;

253 
blocked_Ú_keys
;

254 
unblocked
;

255 } 
	tRedisModuËBlockedCl›Á
;

257 
±h»ad_mu‹x_t
 
moduËUnblockedCl›ÁsMu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

258 
li¡
 *
moduËUnblockedCl›Ás
;

262 
±h»ad_mu‹x_t
 
moduËGIL
 = 
PTHREAD_MUTEX_INITIALIZER
;

266 (*
	tRedisModuËNÙifiÿtiÚFunc
è(
	tRedisModuËCtx
 *
	tùx
, 
	tty³
, cÚ¡ *
	tev’t
, 
	tRedisModuËSŒšg
 *
	tkey
);

270 
	sRedisModuËKey¥aûSubsüib”
 {

272 
RedisModuË
 *
moduË
;

274 
RedisModuËNÙifiÿtiÚFunc
 
nÙify_ÿÎback
;

276 
ev’t_mask
;

279 
aùive
;

280 } 
	tRedisModuËKey¥aûSubsüib”
;

283 
li¡
 *
moduËKey¥aûSubsüib”s
;

289 
ş›Á
 *
moduËF»eCÚ‹xtReu£dCl›Á
;

292 
	sRedisModuËDiù
 {

293 
¿x
 *rax;

294 } 
	tRedisModuËDiù
;

296 
	sRedisModuËDiùI‹r
 {

297 
RedisModuËDiù
 *
diù
;

298 
¿xI‹¿tÜ
 
ri
;

299 } 
	tRedisModuËDiùI‹r
;

301 
	sRedisModuËCommªdF‹rCtx
 {

302 
RedisModuËSŒšg
 **
¬gv
;

303 
¬gc
;

304 } 
	tRedisModuËCommªdF‹rCtx
;

306 (*
	tRedisModuËCommªdF‹rFunc
è(
	tRedisModuËCommªdF‹rCtx
 *
	tf‹r
);

308 
	sRedisModuËCommªdF‹r
 {

310 
RedisModuË
 *
moduË
;

312 
RedisModuËCommªdF‹rFunc
 
ÿÎback
;

314 
æags
;

315 } 
	tRedisModuËCommªdF‹r
;

318 
li¡
 *
moduËCommªdF‹rs
;

320 (*
	tRedisModuËFÜkDÚeHªdËr
è(
	tex™code
, 
	tbysigÇl
, *
	tu£r_d©a
);

322 
	sRedisModuËFÜkInfo
 {

323 
RedisModuËFÜkDÚeHªdËr
 
dÚe_hªdËr
;

324 * 
dÚe_hªdËr_u£r_d©a
;

325 } 
moduËFÜkInfo
 = {0
	}
};

327 
	sRedisModuËS”v”InfoD©a
 {

328 
¿x
 *
	m¿x
;

329 } 
	tRedisModuËS”v”InfoD©a
;

332 
	#REDISMODULE_ARGV_REPLICATE
 (1<<0)

	)

333 
	#REDISMODULE_ARGV_NO_AOF
 (1<<1)

	)

334 
	#REDISMODULE_ARGV_NO_REPLICAS
 (1<<2)

	)

340 
	#SHOULD_SIGNAL_MODIFIED_KEYS
(
ùx
) \

341 
ùx
->
moduË
? !(ùx->moduË->
İtiÚs
 & 
REDISMODULE_OPTION_NO_IMPLICIT_SIGNAL_MODIFIED
è: 1

	)

348 
	sRedisModuËEv’tLi¡’”
 {

349 
RedisModuË
 *
	mmoduË
;

350 
RedisModuËEv’t
 
	mev’t
;

351 
RedisModuËEv’tC®lback
 
	mÿÎback
;

352 } 
	tRedisModuËEv’tLi¡’”
;

354 
li¡
 *
	gRedisModuË_Ev’tLi¡’”s
;

355 
	gModuËsInHooks
 = 0;

363 (*
	tRedisModuËU£rChªgedFunc
è(
	tušt64_t
 
	tş›Á_id
, *
	t´ivd©a
);

368 
	sRedisModuËU£r
 {

369 
u£r
 *user;

370 } 
	tRedisModuËU£r
;

377 
	`RM_F»eC®lR•ly
(
RedisModuËC®lR•ly
 *
»¶y
);

378 
	`RM_Clo£Key
(
RedisModuËKey
 *
key
);

379 
	`autoMemÜyCŞËù
(
RedisModuËCtx
 *
ùx
);

380 
robj
 **
	`moduËC»©eArgvFromU£rFÜm©
(cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, *
¬gı
, *
æags
, 
va_li¡
 
­
);

381 
	`moduËR•liÿ‹MuÉiIfN“ded
(
RedisModuËCtx
 *
ùx
);

382 
	`RM_Z£tRªgeStİ
(
RedisModuËKey
 *
kp
);

383 
	`z£tKeyRe£t
(
RedisModuËKey
 *
key
);

384 
	`RM_F»eDiù
(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiù
 *
d
);

385 
	`RM_F»eS”v”Info
(
RedisModuËCtx
 *
ùx
, 
RedisModuËS”v”InfoD©a
 *
d©a
);

395 *
	$RM_AÎoc
(
size_t
 
by‹s
) {

396  
	`zm®loc
(
by‹s
);

397 
	}
}

403 *
	$RM_C®loc
(
size_t
 
nmemb
, size_ˆ
size
) {

404  
	`zÿÎoc
(
nmemb
*
size
);

405 
	}
}

408 * 
	$RM_R—Îoc
(*
±r
, 
size_t
 
by‹s
) {

409  
	`z»®loc
(
±r
,
by‹s
);

410 
	}
}

415 
	$RM_F»e
(*
±r
) {

416 
	`zä“
(
±r
);

417 
	}
}

420 *
	$RM_SŒdup
(cÚ¡ *
¡r
) {

421  
	`z¡rdup
(
¡r
);

422 
	}
}

429 
	$poŞAÎocR–—£
(
RedisModuËCtx
 *
ùx
) {

430 
RedisModuËPoŞAÎocBlock
 *
h—d
 = 
ùx
->
·_h—d
, *
Ãxt
;

432 
h—d
 !ğ
NULL
) {

433 
Ãxt
 = 
h—d
->next;

434 
	`zä“
(
h—d
);

435 
h—d
 = 
Ãxt
;

437 
ùx
->
·_h—d
 = 
NULL
;

438 
	}
}

452 *
	$RM_PoŞAÎoc
(
RedisModuËCtx
 *
ùx
, 
size_t
 
by‹s
) {

453 ià(
by‹s
 =ğ0è 
NULL
;

454 
RedisModuËPoŞAÎocBlock
 *
b
 = 
ùx
->
·_h—d
;

455 
size_t
 
Ëá
 = 
b
 ? b->
size
 - b->
u£d
 : 0;

458 ià(
Ëá
 >ğ
by‹s
) {

459 
size_t
 
®ignm’t
 = 
REDISMODULE_POOL_ALLOC_ALIGN
;

460 
by‹s
 < 
®ignm’t
 &&‡lignment/2 >= bytes)‡lignment /= 2;

461 ià(
b
->
u£d
 % 
®ignm’t
)

462 
b
->
u£d
 +ğ
®ignm’t
 - (b->used %‡lignment);

463 
Ëá
 = (
b
->
u£d
 > b->
size
) ? 0 : b->size - b->used;

467 ià(
Ëá
 < 
by‹s
) {

468 
size_t
 
blocksize
 = 
REDISMODULE_POOL_ALLOC_MIN_SIZE
;

469 ià(
blocksize
 < 
by‹s
) blocksize = bytes;

470 
b
 = 
	`zm®loc
((*bè+ 
blocksize
);

471 
b
->
size
 = 
blocksize
;

472 
b
->
u£d
 = 0;

473 
b
->
Ãxt
 = 
ùx
->
·_h—d
;

474 
ùx
->
·_h—d
 = 
b
;

477 *
»tv®
 = 
b
->
memÜy
 + b->
u£d
;

478 
b
->
u£d
 +ğ
by‹s
;

479  
»tv®
;

480 
	}
}

498 
	$moduËC»©eEm±yKey
(
RedisModuËKey
 *
key
, 
ty³
) {

499 
robj
 *
obj
;

502 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
v®ue
)

503  
REDISMODULE_ERR
;

505 
ty³
) {

506 
REDISMODULE_KEYTYPE_LIST
:

507 
obj
 = 
	`ü—‹Quickli¡Objeù
();

508 
	`quickli¡S‘O±iÚs
(
obj
->
±r
, 
£rv”
.
li¡_max_zli¡_size
,

509 
£rv”
.
li¡_com´ess_d•th
);

511 
REDISMODULE_KEYTYPE_ZSET
:

512 
obj
 = 
	`ü—‹Z£tZli¡Objeù
();

514 
REDISMODULE_KEYTYPE_HASH
:

515 
obj
 = 
	`ü—‹HashObjeù
();

517 :  
REDISMODULE_ERR
;

519 
	`dbAdd
(
key
->
db
,key->key,
obj
);

520 
key
->
v®ue
 = 
obj
;

521  
REDISMODULE_OK
;

522 
	}
}

534 
	$moduËD–KeyIfEm±y
(
RedisModuËKey
 *
key
) {

535 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
v®ue
 =ğ
NULL
)  0;

536 
i£m±y
;

537 
robj
 *
o
 = 
key
->
v®ue
;

539 
o
->
ty³
) {

540 
OBJ_LIST
: 
i£m±y
 = 
	`li¡Ty³L’gth
(
o
) == 0; ;

541 
OBJ_SET
: 
i£m±y
 = 
	`£tTy³Size
(
o
) == 0; ;

542 
OBJ_ZSET
: 
i£m±y
 = 
	`z£tL’gth
(
o
) == 0; ;

543 
OBJ_HASH
: 
i£m±y
 = 
	`hashTy³L’gth
(
o
) == 0; ;

544 
OBJ_STREAM
: 
i£m±y
 = 
	`¡»amL’gth
(
o
) == 0; ;

545 : 
i£m±y
 = 0;

548 ià(
i£m±y
) {

549 
	`dbD–‘e
(
key
->
db
,key->key);

550 
key
->
v®ue
 = 
NULL
;

555 
	}
}

573 
	$RM_G‘Api
(cÚ¡ *
funúame
, **
rg‘PŒPŒ
) {

574 
diùEÁry
 *
he
 = 
	`diùFšd
(
£rv”
.
moduË­i
, 
funúame
);

575 ià(!
he
è 
REDISMODULE_ERR
;

576 *
rg‘PŒPŒ
 = 
	`diùG‘V®
(
he
);

577  
REDISMODULE_OK
;

578 
	}
}

582 
	$moduËHªdËPrİag©iÚAá”CommªdC®lback
(
RedisModuËCtx
 *
ùx
) {

583 
ş›Á
 *
c
 = 
ùx
->client;

587 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_MULTI_EMITTED
)) ;

589 ià(
c
->
æags
 & 
CLIENT_LUA
) ;

593 
	`®soPrİag©e
(
£rv”
.
execCommªd
,
c
->
db
->
id
,&
sh¬ed
.
exec
,1,

594 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

600 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_MODULE_COMMAND_CALL
) &&

601 
£rv”
.
®so_´İag©e
.
numİs
)

603 
j
 = 0; j < 
£rv”
.
®so_´İag©e
.
numİs
; j++) {

604 
»disOp
 *
rİ
 = &
£rv”
.
®so_´İag©e
.
İs
[
j
];

605 
rg‘
 = 
rİ
->target;

606 ià(
rg‘
)

607 
	`´İag©e
(
rİ
->
cmd
,rİ->
dbid
,rİ->
¬gv
,rİ->
¬gc
,
rg‘
);

609 
	`»disOpA¼ayF»e
(&
£rv”
.
®so_´İag©e
);

611 
£rv”
.
®so_´İag©e
 = 
ùx
->
§ved_İ¬¿y
;

613 
	}
}

616 
	$moduËF»eCÚ‹xt
(
RedisModuËCtx
 *
ùx
) {

617 
	`moduËHªdËPrİag©iÚAá”CommªdC®lback
(
ùx
);

618 
	`autoMemÜyCŞËù
(
ùx
);

619 
	`poŞAÎocR–—£
(
ùx
);

620 ià(
ùx
->
po¡pÚed_¬¿ys
) {

621 
	`zä“
(
ùx
->
po¡pÚed_¬¿ys
);

622 
ùx
->
po¡pÚed_¬¿ys_couÁ
 = 0;

623 
	`£rv”Log
(
LL_WARNING
,

628 
ùx
->
moduË
->
Çme
);

630 ià(
ùx
->
æags
 & 
REDISMODULE_CTX_THREAD_SAFE
è
	`ä“Cl›Á
(ùx->
ş›Á
);

631 
	}
}

635 
	$RedisModuËCommªdDi¥©ch”
(
ş›Á
 *
c
) {

636 
RedisModuËCommªdProxy
 *
ı
 = (*)()
c
->
cmd
->
g‘keys_´oc
;

637 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

639 
ùx
.
æags
 |ğ
REDISMODULE_CTX_MODULE_COMMAND_CALL
;

640 
ùx
.
moduË
 = 
ı
->module;

641 
ùx
.
ş›Á
 = 
c
;

642 
ı
->
	`func
(&
ùx
,(**)
c
->
¬gv
,c->
¬gc
);

643 
	`moduËF»eCÚ‹xt
(&
ùx
);

654 
i
 = 0; i < 
c
->
¬gc
; i++) {

657 ià(
c
->
¬gv
[
i
]->
»fcouÁ
 > 1)

658 
	`ŒimSŒšgObjeùIfN“ded
(
c
->
¬gv
[
i
]);

660 
	}
}

671 *
	$moduËG‘CommªdKeysVŸAPI
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
) {

672 
RedisModuËCommªdProxy
 *
ı
 = (*)()
cmd
->
g‘keys_´oc
;

673 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

675 
ùx
.
moduË
 = 
ı
->module;

676 
ùx
.
ş›Á
 = 
NULL
;

677 
ùx
.
æags
 |ğ
REDISMODULE_CTX_KEYS_POS_REQUEST
;

678 
ı
->
	`func
(&
ùx
,(**)
¬gv
,
¬gc
);

679 *
»s
 = 
ùx
.
keys_pos
;

680 ià(
numkeys
è*numkey ğ
ùx
.
keys_couÁ
;

681 
	`moduËF»eCÚ‹xt
(&
ùx
);

682  
»s
;

683 
	}
}

688 
	$RM_IsKeysPos™iÚReque¡
(
RedisModuËCtx
 *
ùx
) {

689  (
ùx
->
æags
 & 
REDISMODULE_CTX_KEYS_POS_REQUEST
) != 0;

690 
	}
}

706 
	$RM_KeyAtPos
(
RedisModuËCtx
 *
ùx
, 
pos
) {

707 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_KEYS_POS_REQUEST
)) ;

708 ià(
pos
 <= 0) ;

709 
ùx
->
keys_pos
 = 
	`z»®loc
(ùx->keys_pos,()*(ùx->
keys_couÁ
+1));

710 
ùx
->
keys_pos
[ùx->
keys_couÁ
++] = 
pos
;

711 
	}
}

717 
št64_t
 
	$commªdFÏgsFromSŒšg
(*
s
) {

718 
couÁ
, 
j
;

719 
št64_t
 
æags
 = 0;

720 
sds
 *
tok’s
 = 
	`sds¥l™Ën
(
s
,
	`¡¾’
(s)," ",1,&
couÁ
);

721 
j
 = 0; j < 
couÁ
; j++) {

722 *
t
 = 
tok’s
[
j
];

723 ià(!
	`¡rÿ£cmp
(
t
,"wr™e")è
æags
 |ğ
CMD_WRITE
;

724 ià(!
	`¡rÿ£cmp
(
t
,"»adÚly")è
æags
 |ğ
CMD_READONLY
;

725 ià(!
	`¡rÿ£cmp
(
t
,"admš")è
æags
 |ğ
CMD_ADMIN
;

726 ià(!
	`¡rÿ£cmp
(
t
,"d’y-oom")è
æags
 |ğ
CMD_DENYOOM
;

727 ià(!
	`¡rÿ£cmp
(
t
,"d’y-süt")è
æags
 |ğ
CMD_NOSCRIPT
;

728 ià(!
	`¡rÿ£cmp
(
t
,"®low-lßdšg")è
æags
 |ğ
CMD_LOADING
;

729 ià(!
	`¡rÿ£cmp
(
t
,"pubsub")è
æags
 |ğ
CMD_PUBSUB
;

730 ià(!
	`¡rÿ£cmp
(
t
,"¿ndom")è
æags
 |ğ
CMD_RANDOM
;

731 ià(!
	`¡rÿ£cmp
(
t
,"®low-¡®e")è
æags
 |ğ
CMD_STALE
;

732 ià(!
	`¡rÿ£cmp
(
t
,"no-mÚ™Ü")è
æags
 |ğ
CMD_SKIP_MONITOR
;

733 ià(!
	`¡rÿ£cmp
(
t
,"no-¦owlog")è
æags
 |ğ
CMD_SKIP_SLOWLOG
;

734 ià(!
	`¡rÿ£cmp
(
t
,"ç¡")è
æags
 |ğ
CMD_FAST
;

735 ià(!
	`¡rÿ£cmp
(
t
,"no-auth")è
æags
 |ğ
CMD_NO_AUTH
;

736 ià(!
	`¡rÿ£cmp
(
t
,"g‘keys-­i")è
æags
 |ğ
CMD_MODULE_GETKEYS
;

737 ià(!
	`¡rÿ£cmp
(
t
,"no-şu¡”")è
æags
 |ğ
CMD_MODULE_NO_CLUSTER
;

740 
	`sdsä“¥l™»s
(
tok’s
,
couÁ
);

741 ià(
j
 !ğ
couÁ
)  -1;

742  
æags
;

743 
	}
}

803 
	$RM_C»©eCommªd
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
RedisModuËCmdFunc
 
cmdfunc
, cÚ¡ *
¡ræags
, 
fœ¡key
, 
Ï¡key
, 
key¡•
) {

804 
št64_t
 
æags
 = 
¡ræags
 ? 
	`commªdFÏgsFromSŒšg
((*)strflags) : 0;

805 ià(
æags
 =ğ-1è 
REDISMODULE_ERR
;

806 ià((
æags
 & 
CMD_MODULE_NO_CLUSTER
è&& 
£rv”
.
şu¡”_’abËd
)

807  
REDISMODULE_ERR
;

809 
»disCommªd
 *
»discmd
;

810 
RedisModuËCommªdProxy
 *
ı
;

811 
sds
 
cmdÇme
 = 
	`sd¢ew
(
Çme
);

814 ià(
	`lookupCommªd
(
cmdÇme
è!ğ
NULL
) {

815 
	`sdsä“
(
cmdÇme
);

816  
REDISMODULE_ERR
;

826 
ı
 = 
	`zm®loc
((*cp));

827 
ı
->
moduË
 = 
ùx
->module;

828 
ı
->
func
 = 
cmdfunc
;

829 
ı
->
»discmd
 = 
	`zm®loc
((*rediscmd));

830 
ı
->
»discmd
->
Çme
 = 
cmdÇme
;

831 
ı
->
»discmd
->
´oc
 = 
RedisModuËCommªdDi¥©ch”
;

832 
ı
->
»discmd
->
¬™y
 = -1;

833 
ı
->
»discmd
->
æags
 = fÏg | 
CMD_MODULE
;

834 
ı
->
»discmd
->
g‘keys_´oc
 = (
»disG‘KeysProc
*)()cp;

835 
ı
->
»discmd
->
fœ¡key
 = firstkey;

836 
ı
->
»discmd
->
Ï¡key
 =†astkey;

837 
ı
->
»discmd
->
key¡•
 = keystep;

838 
ı
->
»discmd
->
miüo£cÚds
 = 0;

839 
ı
->
»discmd
->
ÿÎs
 = 0;

840 
	`diùAdd
(
£rv”
.
commªds
,
	`sdsdup
(
cmdÇme
),
ı
->
»discmd
);

841 
	`diùAdd
(
£rv”
.
Üig_commªds
,
	`sdsdup
(
cmdÇme
),
ı
->
»discmd
);

842 
ı
->
»discmd
->
id
 = 
	`ACLG‘CommªdID
(
cmdÇme
);

843  
REDISMODULE_OK
;

844 
	}
}

850 
	$RM_S‘ModuËA‰ribs
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
v”
, 
­iv”
) {

851 
RedisModuË
 *
moduË
;

853 ià(
ùx
->
moduË
 !ğ
NULL
) ;

854 
moduË
 = 
	`zm®loc
((*module));

855 
moduË
->
Çme
 = 
	`sd¢ew
((*)name);

856 
moduË
->
v”
 = ver;

857 
moduË
->
­iv”
 =‡piver;

858 
moduË
->
ty³s
 = 
	`li¡C»©e
();

859 
moduË
->
u£dby
 = 
	`li¡C»©e
();

860 
moduË
->
usšg
 = 
	`li¡C»©e
();

861 
moduË
->
f‹rs
 = 
	`li¡C»©e
();

862 
moduË
->
š_ÿÎ
 = 0;

863 
moduË
->
š_hook
 = 0;

864 
moduË
->
İtiÚs
 = 0;

865 
moduË
->
šfo_cb
 = 0;

866 
ùx
->
moduË
 = module;

867 
	}
}

871 
	$RM_IsModuËNameBusy
(cÚ¡ *
Çme
) {

872 
sds
 
moduËÇme
 = 
	`sd¢ew
(
Çme
);

873 
diùEÁry
 *
de
 = 
	`diùFšd
(
moduËs
,
moduËÇme
);

874 
	`sdsä“
(
moduËÇme
);

875  
de
 !ğ
NULL
;

876 
	}
}

879 
	$RM_Mli£cÚds
() {

880  
	`m¡ime
();

881 
	}
}

892 
	$RM_S‘ModuËO±iÚs
(
RedisModuËCtx
 *
ùx
, 
İtiÚs
) {

893 
ùx
->
moduË
->
İtiÚs
 = options;

894 
	}
}

898 
	$RM_SigÇlModif›dKey
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
keyÇme
) {

899 
	`sigÇlModif›dKey
(
ùx
->
ş›Á
,ùx->ş›Á->
db
,
keyÇme
);

900  
REDISMODULE_OK
;

901 
	}
}

911 
	$RM_AutoMemÜy
(
RedisModuËCtx
 *
ùx
) {

912 
ùx
->
æags
 |ğ
REDISMODULE_CTX_AUTO_MEMORY
;

913 
	}
}

916 
	$autoMemÜyAdd
(
RedisModuËCtx
 *
ùx
, 
ty³
, *
±r
) {

917 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_AUTO_MEMORY
)) ;

918 ià(
ùx
->
amqueue_u£d
 =ğùx->
amqueue_Ën
) {

919 
ùx
->
amqueue_Ën
 *= 2;

920 ià(
ùx
->
amqueue_Ën
 < 16) ctx->amqueue_len = 16;

921 
ùx
->
amqueue
 = 
	`z»®loc
(ùx->amqueue,(
AutoMemEÁry
)*ùx->
amqueue_Ën
);

923 
ùx
->
amqueue
[ùx->
amqueue_u£d
].
ty³
 =ype;

924 
ùx
->
amqueue
[ùx->
amqueue_u£d
].
±r
 =…tr;

925 
ùx
->
amqueue_u£d
++;

926 
	}
}

933 
	$autoMemÜyF»ed
(
RedisModuËCtx
 *
ùx
, 
ty³
, *
±r
) {

934 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_AUTO_MEMORY
))  0;

936 
couÁ
 = (
ùx
->
amqueue_u£d
+1)/2;

937 
j
 = 0; j < 
couÁ
; j++) {

938 
side
 = 0; side < 2; side++) {

941 
i
 = (
side
 =ğ0è? (
ùx
->
amqueue_u£d
 - 1 - 
j
) : j;

942 ià(
ùx
->
amqueue
[
i
].
ty³
 ==ype &&

943 
ùx
->
amqueue
[
i
].
±r
 ==…tr)

945 
ùx
->
amqueue
[
i
].
ty³
 = 
REDISMODULE_AM_FREED
;

949 ià(
i
 !ğ
ùx
->
amqueue_u£d
-1) {

950 
ùx
->
amqueue
[
i
] = ctx->amqueue[ùx->
amqueue_u£d
-1];

955 
ùx
->
amqueue_u£d
--;

961 
	}
}

964 
	$autoMemÜyCŞËù
(
RedisModuËCtx
 *
ùx
) {

965 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_AUTO_MEMORY
)) ;

969 
ùx
->
æags
 &ğ~
REDISMODULE_CTX_AUTO_MEMORY
;

970 
j
;

971 
j
 = 0; j < 
ùx
->
amqueue_u£d
; j++) {

972 *
±r
 = 
ùx
->
amqueue
[
j
].ptr;

973 
ùx
->
amqueue
[
j
].
ty³
) {

974 
REDISMODULE_AM_STRING
: 
	`deüRefCouÁ
(
±r
); ;

975 
REDISMODULE_AM_REPLY
: 
	`RM_F»eC®lR•ly
(
±r
); ;

976 
REDISMODULE_AM_KEY
: 
	`RM_Clo£Key
(
±r
); ;

977 
REDISMODULE_AM_DICT
: 
	`RM_F»eDiù
(
NULL
,
±r
); ;

978 
REDISMODULE_AM_INFO
: 
	`RM_F»eS”v”Info
(
NULL
,
±r
); ;

981 
ùx
->
æags
 |ğ
REDISMODULE_CTX_AUTO_MEMORY
;

982 
	`zä“
(
ùx
->
amqueue
);

983 
ùx
->
amqueue
 = 
NULL
;

984 
ùx
->
amqueue_Ën
 = 0;

985 
ùx
->
amqueue_u£d
 = 0;

986 
	}
}

1002 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšg
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
±r
, 
size_t
 
Ën
) {

1003 
RedisModuËSŒšg
 *
o
 = 
	`ü—‹SŒšgObjeù
(
±r
,
Ën
);

1004 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_STRING
,
o
);

1005  
o
;

1006 
	}
}

1016 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgPrštf
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
fmt
, ...) {

1017 
sds
 
s
 = 
	`sd£m±y
();

1019 
va_li¡
 
­
;

1020 
	`va_¡¬t
(
­
, 
fmt
);

1021 
s
 = 
	`sdsÿtv´štf
(s, 
fmt
, 
­
);

1022 
	`va_’d
(
­
);

1024 
RedisModuËSŒšg
 *
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
s
);

1025 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_STRING
,
o
);

1027  
o
;

1028 
	}
}

1039 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgFromLÚgLÚg
(
RedisModuËCtx
 *
ùx
, 
Î
) {

1040 
buf
[
LONG_STR_SIZE
];

1041 
size_t
 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
Î
);

1042  
	`RM_C»©eSŒšg
(
ùx
,
buf
,
Ën
);

1043 
	}
}

1050 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgFromDoubË
(
RedisModuËCtx
 *
ùx
, 
d
) {

1051 
buf
[128];

1052 
size_t
 
Ën
 = 
	`d2¡ršg
(
buf
,(buf),
d
);

1053  
	`RM_C»©eSŒšg
(
ùx
,
buf
,
Ën
);

1054 
	}
}

1064 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgFromLÚgDoubË
(
RedisModuËCtx
 *
ùx
, 
ld
, 
humªä›ndly
) {

1065 
buf
[
MAX_LONG_DOUBLE_CHARS
];

1066 
size_t
 
Ën
 = 
	`ld2¡ršg
(
buf
,(buf),
ld
,

1067 (
humªä›ndly
 ? 
LD_STR_HUMAN
 : 
LD_STR_AUTO
));

1068  
	`RM_C»©eSŒšg
(
ùx
,
buf
,
Ën
);

1069 
	}
}

1079 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgFromSŒšg
(
RedisModuËCtx
 *
ùx
, cÚ¡ 
RedisModuËSŒšg
 *
¡r
) {

1080 
RedisModuËSŒšg
 *
o
 = 
	`dupSŒšgObjeù
(
¡r
);

1081 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_STRING
,
o
);

1082  
o
;

1083 
	}
}

1097 
	$RM_F»eSŒšg
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
) {

1098 
	`deüRefCouÁ
(
¡r
);

1099 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyF»ed
(ùx,
REDISMODULE_AM_STRING
,
¡r
);

1100 
	}
}

1126 
	$RM_R‘ašSŒšg
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
) {

1127 ià(
ùx
 =ğ
NULL
 || !
	`autoMemÜyF»ed
(ùx,
REDISMODULE_AM_STRING
,
¡r
)) {

1137 
	`šüRefCouÁ
(
¡r
);

1139 
	}
}

1144 cÚ¡ *
	$RM_SŒšgPŒL’
(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, 
size_t
 *
Ën
) {

1145 ià(
¡r
 =ğ
NULL
) {

1146 cÚ¡ *
”rmsg
 = "(NULL string„eply„eferenced in module)";

1147 ià(
Ën
è*ËÀğ
	`¡¾’
(
”rmsg
);

1148  
”rmsg
;

1150 ià(
Ën
è*ËÀğ
	`sd¦’
(
¡r
->
±r
);

1151  
¡r
->
±r
;

1152 
	}
}

1162 
	$RM_SŒšgToLÚgLÚg
(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
Î
) {

1163  
	`¡ršg2Î
(
¡r
->
±r
,
	`sd¦’
(¡r->±r),
Î
è? 
REDISMODULE_OK
 :

1164 
REDISMODULE_ERR
;

1165 
	}
}

1170 
	$RM_SŒšgToDoubË
(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
d
) {

1171 
»tv®
 = 
	`g‘DoubËFromObjeù
(
¡r
,
d
);

1172  (
»tv®
 =ğ
C_OK
è? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

1173 
	}
}

1178 
	$RM_SŒšgToLÚgDoubË
(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
ld
) {

1179 
»tv®
 = 
	`¡ršg2ld
(
¡r
->
±r
,
	`sd¦’
(¡r->±r),
ld
);

1180  
»tv®
 ? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

1181 
	}
}

1186 
	$RM_SŒšgCom·»
(
RedisModuËSŒšg
 *
a
, RedisModuËSŒšg *
b
) {

1187  
	`com·»SŒšgObjeùs
(
a
,
b
);

1188 
	}
}

1192 
RedisModuËSŒšg
 *
	$moduËAs£¹Unsh¬edSŒšg
(
RedisModuËSŒšg
 *
¡r
) {

1193 ià(
¡r
->
»fcouÁ
 != 1) {

1194 
	`£rv”Log
(
LL_WARNING
,

1198  
NULL
;

1200 ià(
¡r
->
’codšg
 =ğ
OBJ_ENCODING_EMBSTR
) {

1203 
¡r
->
±r
 = 
	`sd¢ewËn
(¡r->±r,
	`sd¦’
(str->ptr));

1204 
¡r
->
’codšg
 = 
OBJ_ENCODING_RAW
;

1205 } ià(
¡r
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

1207 
¡r
->
±r
 = 
	`sdsäomlÚglÚg
(()str->ptr);

1208 
¡r
->
’codšg
 = 
OBJ_ENCODING_RAW
;

1210  
¡r
;

1211 
	}
}

1216 
	$RM_SŒšgAµ’dBufãr
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

1217 
	`UNUSED
(
ùx
);

1218 
¡r
 = 
	`moduËAs£¹Unsh¬edSŒšg
(str);

1219 ià(
¡r
 =ğ
NULL
è 
REDISMODULE_ERR
;

1220 
¡r
->
±r
 = 
	`sdsÿ’
(¡r->±r,
buf
,
Ën
);

1221  
REDISMODULE_OK
;

1222 
	}
}

1241 
	$RM_WrÚgAr™y
(
RedisModuËCtx
 *
ùx
) {

1242 
	`addR•lyE¼ÜFÜm©
(
ùx
->
ş›Á
,

1244 (*)
ùx
->
ş›Á
->
¬gv
[0]->
±r
);

1245  
REDISMODULE_OK
;

1246 
	}
}

1262 
ş›Á
 *
	$moduËG‘R•lyCl›Á
(
RedisModuËCtx
 *
ùx
) {

1263 ià(
ùx
->
æags
 & 
REDISMODULE_CTX_THREAD_SAFE
) {

1264 ià(
ùx
->
blocked_ş›Á
)

1265  
ùx
->
blocked_ş›Á
->
»¶y_ş›Á
;

1267  
NULL
;

1273  
ùx
->
ş›Á
;

1275 
	}
}

1279 
	$RM_R•lyW™hLÚgLÚg
(
RedisModuËCtx
 *
ùx
, 
Î
) {

1280 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1281 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1282 
	`addR•lyLÚgLÚg
(
c
,
Î
);

1283  
REDISMODULE_OK
;

1284 
	}
}

1289 
	$»¶yW™hStus
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
msg
, *
´efix
) {

1290 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1291 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1292 
	`addR•lyPrÙo
(
c
,
´efix
,
	`¡¾’
(prefix));

1293 
	`addR•lyPrÙo
(
c
,
msg
,
	`¡¾’
(msg));

1294 
	`addR•lyPrÙo
(
c
,"\r\n",2);

1295  
REDISMODULE_OK
;

1296 
	}
}

1312 
	$RM_R•lyW™hE¼Ü
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
”r
) {

1313  
	`»¶yW™hStus
(
ùx
,
”r
,"-");

1314 
	}
}

1321 
	$RM_R•lyW™hSim¶eSŒšg
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
msg
) {

1322  
	`»¶yW™hStus
(
ùx
,
msg
,"+");

1323 
	}
}

1336 
	$RM_R•lyW™hA¼ay
(
RedisModuËCtx
 *
ùx
, 
Ën
) {

1337 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1338 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1339 ià(
Ën
 =ğ
REDISMODULE_POSTPONED_ARRAY_LEN
) {

1340 
ùx
->
po¡pÚed_¬¿ys
 = 
	`z»®loc
(ctx->postponed_arrays,(*)*

1341 (
ùx
->
po¡pÚed_¬¿ys_couÁ
+1));

1342 
ùx
->
po¡pÚed_¬¿ys
[ùx->
po¡pÚed_¬¿ys_couÁ
] =

1343 
	`addR•lyDeã¼edL’
(
c
);

1344 
ùx
->
po¡pÚed_¬¿ys_couÁ
++;

1346 
	`addR•lyA¼ayL’
(
c
,
Ën
);

1348  
REDISMODULE_OK
;

1349 
	}
}

1355 
	$RM_R•lyW™hNuÎA¼ay
(
RedisModuËCtx
 *
ùx
) {

1356 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1357 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1358 
	`addR•lyNuÎA¼ay
(
c
);

1359  
REDISMODULE_OK
;

1360 
	}
}

1365 
	$RM_R•lyW™hEm±yA¼ay
(
RedisModuËCtx
 *
ùx
) {

1366 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1367 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1368 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

1369  
REDISMODULE_OK
;

1370 
	}
}

1398 
	$RM_R•lyS‘A¼ayL’gth
(
RedisModuËCtx
 *
ùx
, 
Ën
) {

1399 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1400 ià(
c
 =ğ
NULL
) ;

1401 ià(
ùx
->
po¡pÚed_¬¿ys_couÁ
 == 0) {

1402 
	`£rv”Log
(
LL_WARNING
,

1406 "ÿÎ.", 
ùx
->
moduË
->
Çme
);

1409 
ùx
->
po¡pÚed_¬¿ys_couÁ
--;

1410 
	`£tDeã¼edA¼ayL’
(
c
,

1411 
ùx
->
po¡pÚed_¬¿ys
[ùx->
po¡pÚed_¬¿ys_couÁ
],

1412 
Ën
);

1413 ià(
ùx
->
po¡pÚed_¬¿ys_couÁ
 == 0) {

1414 
	`zä“
(
ùx
->
po¡pÚed_¬¿ys
);

1415 
ùx
->
po¡pÚed_¬¿ys
 = 
NULL
;

1417 
	}
}

1422 
	$RM_R•lyW™hSŒšgBufãr
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

1423 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1424 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1425 
	`addR•lyBulkCBufãr
(
c
,(*)
buf
,
Ën
);

1426  
REDISMODULE_OK
;

1427 
	}
}

1433 
	$RM_R•lyW™hCSŒšg
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
) {

1434 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1435 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1436 
	`addR•lyBulkCSŒšg
(
c
,(*)
buf
);

1437  
REDISMODULE_OK
;

1438 
	}
}

1443 
	$RM_R•lyW™hSŒšg
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
) {

1444 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1445 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1446 
	`addR•lyBulk
(
c
,
¡r
);

1447  
REDISMODULE_OK
;

1448 
	}
}

1453 
	$RM_R•lyW™hEm±ySŒšg
(
RedisModuËCtx
 *
ùx
) {

1454 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1455 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1456 
	`addR•ly
(
c
,
sh¬ed
.
em±ybulk
);

1457  
REDISMODULE_OK
;

1458 
	}
}

1464 
	$RM_R•lyW™hV”b©imSŒšg
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

1465 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1466 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1467 
	`addR•lyV”b©im
(
c
, 
buf
, 
Ën
, "txt");

1468  
REDISMODULE_OK
;

1469 
	}
}

1474 
	$RM_R•lyW™hNuÎ
(
RedisModuËCtx
 *
ùx
) {

1475 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1476 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1477 
	`addR•lyNuÎ
(
c
);

1478  
REDISMODULE_OK
;

1479 
	}
}

1487 
	$RM_R•lyW™hC®lR•ly
(
RedisModuËCtx
 *
ùx
, 
RedisModuËC®lR•ly
 *
»¶y
) {

1488 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1489 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1490 
sds
 
´Ùo
 = 
	`sd¢ewËn
(
»¶y
->´Ùo,„•ly->
´ÙŞ’
);

1491 
	`addR•lySds
(
c
,
´Ùo
);

1492  
REDISMODULE_OK
;

1493 
	}
}

1501 
	$RM_R•lyW™hDoubË
(
RedisModuËCtx
 *
ùx
, 
d
) {

1502 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1503 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1504 
	`addR•lyDoubË
(
c
,
d
);

1505  
REDISMODULE_OK
;

1506 
	}
}

1516 
	$RM_R•lyW™hLÚgDoubË
(
RedisModuËCtx
 *
ùx
, 
ld
) {

1517 
ş›Á
 *
c
 = 
	`moduËG‘R•lyCl›Á
(
ùx
);

1518 ià(
c
 =ğ
NULL
è 
REDISMODULE_OK
;

1519 
	`addR•lyHumªLÚgDoubË
(
c
, 
ld
);

1520  
REDISMODULE_OK
;

1521 
	}
}

1530 
	$moduËR•liÿ‹MuÉiIfN“ded
(
RedisModuËCtx
 *
ùx
) {

1533 ià(
ùx
->
ş›Á
->
æags
 & (
CLIENT_MULTI
|
CLIENT_LUA
)) ;

1535 ià(
ùx
->
æags
 & 
REDISMODULE_CTX_MULTI_EMITTED
) ;

1539 ià(
ùx
->
æags
 & 
REDISMODULE_CTX_THREAD_SAFE
) ;

1543 ià(!(
ùx
->
æags
 & 
REDISMODULE_CTX_MODULE_COMMAND_CALL
)) {

1544 
ùx
->
§ved_İ¬¿y
 = 
£rv”
.
®so_´İag©e
;

1545 
	`»disOpA¼ayIn™
(&
£rv”
.
®so_´İag©e
);

1547 
	`execCommªdPrİag©eMuÉi
(
ùx
->
ş›Á
);

1548 
ùx
->
æags
 |ğ
REDISMODULE_CTX_MULTI_EMITTED
;

1549 
	}
}

1588 
	$RM_R•liÿ‹
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...) {

1589 
»disCommªd
 *
cmd
;

1590 
robj
 **
¬gv
 = 
NULL
;

1591 
¬gc
 = 0, 
æags
 = 0, 
j
;

1592 
va_li¡
 
­
;

1594 
cmd
 = 
	`lookupCommªdByCSŒšg
((*)
cmdÇme
);

1595 ià(!
cmd
è 
REDISMODULE_ERR
;

1598 
	`va_¡¬t
(
­
, 
fmt
);

1599 
¬gv
 = 
	`moduËC»©eArgvFromU£rFÜm©
(
cmdÇme
,
fmt
,&
¬gc
,&
æags
,
­
);

1600 
	`va_’d
(
­
);

1601 ià(
¬gv
 =ğ
NULL
è 
REDISMODULE_ERR
;

1606 
rg‘
 = 0;

1607 ià(!(
æags
 & 
REDISMODULE_ARGV_NO_AOF
)è
rg‘
 |ğ
PROPAGATE_AOF
;

1608 ià(!(
æags
 & 
REDISMODULE_ARGV_NO_REPLICAS
)è
rg‘
 |ğ
PROPAGATE_REPL
;

1614 ià(
ùx
->
æags
 & 
REDISMODULE_CTX_THREAD_SAFE
) {

1615 
	`´İag©e
(
cmd
,
ùx
->
ş›Á
->
db
->
id
,
¬gv
,
¬gc
,
rg‘
);

1617 
	`moduËR•liÿ‹MuÉiIfN“ded
(
ùx
);

1618 
	`®soPrİag©e
(
cmd
,
ùx
->
ş›Á
->
db
->
id
,
¬gv
,
¬gc
,
rg‘
);

1622 
j
 = 0; j < 
¬gc
; j++è
	`deüRefCouÁ
(
¬gv
[j]);

1623 
	`zä“
(
¬gv
);

1624 
£rv”
.
dœty
++;

1625  
REDISMODULE_OK
;

1626 
	}
}

1639 
	$RM_R•liÿ‹V”b©im
(
RedisModuËCtx
 *
ùx
) {

1640 
	`®soPrİag©e
(
ùx
->
ş›Á
->
cmd
,ùx->ş›Á->
db
->
id
,

1641 
ùx
->
ş›Á
->
¬gv
,ùx->ş›Á->
¬gc
,

1642 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

1643 
£rv”
.
dœty
++;

1644  
REDISMODULE_OK
;

1645 
	}
}

1670 
	$RM_G‘Cl›ÁId
(
RedisModuËCtx
 *
ùx
) {

1671 ià(
ùx
->
ş›Á
 =ğ
NULL
)  0;

1672  
ùx
->
ş›Á
->
id
;

1673 
	}
}

1681 
	$moduËPİuÏ‹Cl›ÁInfoSŒuùu»
(*
ci
, 
ş›Á
 *ş›Á, 
¡ruùv”
) {

1682 ià(
¡ruùv”
 !ğ1è 
REDISMODULE_ERR
;

1684 
RedisModuËCl›ÁInfoV1
 *
ci1
 = 
ci
;

1685 
	`mem£t
(
ci1
,0,(*ci1));

1686 
ci1
->
v”siÚ
 = 
¡ruùv”
;

1687 ià(
ş›Á
->
æags
 & 
CLIENT_MULTI
)

1688 
ci1
->
æags
 |ğ
REDISMODULE_CLIENTINFO_FLAG_MULTI
;

1689 ià(
ş›Á
->
æags
 & 
CLIENT_PUBSUB
)

1690 
ci1
->
æags
 |ğ
REDISMODULE_CLIENTINFO_FLAG_PUBSUB
;

1691 ià(
ş›Á
->
æags
 & 
CLIENT_UNIX_SOCKET
)

1692 
ci1
->
æags
 |ğ
REDISMODULE_CLIENTINFO_FLAG_UNIXSOCKET
;

1693 ià(
ş›Á
->
æags
 & 
CLIENT_TRACKING
)

1694 
ci1
->
æags
 |ğ
REDISMODULE_CLIENTINFO_FLAG_TRACKING
;

1695 ià(
ş›Á
->
æags
 & 
CLIENT_BLOCKED
)

1696 
ci1
->
æags
 |ğ
REDISMODULE_CLIENTINFO_FLAG_BLOCKED
;

1698 
pÜt
;

1699 
	`cÚnP“rToSŒšg
(
ş›Á
->
cÚn
,
ci1
->
addr
,(ci1->addr),&
pÜt
);

1700 
ci1
->
pÜt
 =…ort;

1701 
ci1
->
db
 = 
ş›Á
->db->
id
;

1702 
ci1
->
id
 = 
ş›Á
->id;

1703  
REDISMODULE_OK
;

1704 
	}
}

1711 
	$moduËPİuÏ‹R•liÿtiÚInfoSŒuùu»
(*
ri
, 
¡ruùv”
) {

1712 ià(
¡ruùv”
 !ğ1è 
REDISMODULE_ERR
;

1714 
RedisModuËR•liÿtiÚInfoV1
 *
ri1
 = 
ri
;

1715 
	`mem£t
(
ri1
,0,(*ri1));

1716 
ri1
->
v”siÚ
 = 
¡ruùv”
;

1717 
ri1
->
ma¡”
 = 
£rv”
.
ma¡”ho¡
==
NULL
;

1718 
ri1
->
ma¡”ho¡
 = 
£rv”
.masterhost? server.masterhost: "";

1719 
ri1
->
ma¡”pÜt
 = 
£rv”
.masterport;

1720 
ri1
->
»¶id1
 = 
£rv”
.
»¶id
;

1721 
ri1
->
»¶id2
 = 
£rv”
.replid2;

1722 
ri1
->
»¶1_off£t
 = 
£rv”
.
ma¡”_»¶_off£t
;

1723 
ri1
->
»¶2_off£t
 = 
£rv”
.
£cÚd_»¶id_off£t
;

1724  
REDISMODULE_OK
;

1725 
	}
}

1769 
	$RM_G‘Cl›ÁInfoById
(*
ci
, 
ušt64_t
 
id
) {

1770 
ş›Á
 *ş›Á = 
	`lookupCl›ÁByID
(
id
);

1771 ià(
ş›Á
 =ğ
NULL
è 
REDISMODULE_ERR
;

1772 ià(
ci
 =ğ
NULL
è 
REDISMODULE_OK
;

1775 
ušt64_t
 
¡ruùv”
 = ((ušt64_t*)
ci
)[0];

1776  
	`moduËPİuÏ‹Cl›ÁInfoSŒuùu»
(
ci
,
ş›Á
,
¡ruùv”
);

1777 
	}
}

1780 
	$RM_PublishMes§ge
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
chªÃl
, RedisModuËSŒšg *
mes§ge
) {

1781 
	`UNUSED
(
ùx
);

1782 
»ûiv”s
 = 
	`pubsubPublishMes§ge
(
chªÃl
, 
mes§ge
);

1783 ià(
£rv”
.
şu¡”_’abËd
)

1784 
	`şu¡”Prİag©ePublish
(
chªÃl
, 
mes§ge
);

1785  
»ûiv”s
;

1786 
	}
}

1789 
	$RM_G‘S–eùedDb
(
RedisModuËCtx
 *
ùx
) {

1790  
ùx
->
ş›Á
->
db
->
id
;

1791 
	}
}

1852 
	$RM_G‘CÚ‹xtFÏgs
(
RedisModuËCtx
 *
ùx
) {

1854 
æags
 = 0;

1856 ià(
ùx
) {

1857 ià(
ùx
->
ş›Á
) {

1858 ià(
ùx
->
ş›Á
->
æags
 & 
CLIENT_LUA
)

1859 
æags
 |ğ
REDISMODULE_CTX_FLAGS_LUA
;

1860 ià(
ùx
->
ş›Á
->
æags
 & 
CLIENT_MULTI
)

1861 
æags
 |ğ
REDISMODULE_CTX_FLAGS_MULTI
;

1863 ià(
ùx
->
ş›Á
->
æags
 & 
CLIENT_MASTER
)

1864 
æags
 |ğ
REDISMODULE_CTX_FLAGS_REPLICATED
;

1868 
ş›Á
 *
c
 = 
ùx
->
blocked_ş›Á
 ? ctx->blocked_client->client : ctx->client;

1869 ià(
c
 && (c->
æags
 & (
CLIENT_DIRTY_CAS
|
CLIENT_DIRTY_EXEC
))) {

1870 
æags
 |ğ
REDISMODULE_CTX_FLAGS_MULTI_DIRTY
;

1874 ià(
£rv”
.
şu¡”_’abËd
)

1875 
æags
 |ğ
REDISMODULE_CTX_FLAGS_CLUSTER
;

1877 ià(
£rv”
.
lßdšg
)

1878 
æags
 |ğ
REDISMODULE_CTX_FLAGS_LOADING
;

1881 ià(
£rv”
.
maxmemÜy
 > 0) {

1882 
æags
 |ğ
REDISMODULE_CTX_FLAGS_MAXMEMORY
;

1884 ià(
£rv”
.
maxmemÜy_pŞicy
 !ğ
MAXMEMORY_NO_EVICTION
)

1885 
æags
 |ğ
REDISMODULE_CTX_FLAGS_EVICT
;

1889 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
)

1890 
æags
 |ğ
REDISMODULE_CTX_FLAGS_AOF
;

1891 ià(
£rv”
.
§v•¬am¦’
 > 0)

1892 
æags
 |ğ
REDISMODULE_CTX_FLAGS_RDB
;

1895 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
) {

1896 
æags
 |ğ
REDISMODULE_CTX_FLAGS_MASTER
;

1898 
æags
 |ğ
REDISMODULE_CTX_FLAGS_SLAVE
;

1899 ià(
£rv”
.
»¶_¦ave_ro
)

1900 
æags
 |ğ
REDISMODULE_CTX_FLAGS_READONLY
;

1903 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECT
 ||

1904 
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTING
)

1906 
æags
 |ğ
REDISMODULE_CTX_FLAGS_REPLICA_IS_CONNECTING
;

1907 } ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
) {

1908 
æags
 |ğ
REDISMODULE_CTX_FLAGS_REPLICA_IS_TRANSFERRING
;

1909 } ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
) {

1910 
æags
 |ğ
REDISMODULE_CTX_FLAGS_REPLICA_IS_ONLINE
;

1913 ià(
£rv”
.
»¶_¡©e
 !ğ
REPL_STATE_CONNECTED
)

1914 
æags
 |ğ
REDISMODULE_CTX_FLAGS_REPLICA_IS_STALE
;

1918 
Ëv–
;

1919 
»tv®
 = 
	`g‘MaxmemÜyS‹
(
NULL
,NULL,NULL,&
Ëv–
);

1920 ià(
»tv®
 =ğ
C_ERR
è
æags
 |ğ
REDISMODULE_CTX_FLAGS_OOM
;

1921 ià(
Ëv–
 > 0.75è
æags
 |ğ
REDISMODULE_CTX_FLAGS_OOM_WARNING
;

1924 ià(
	`hasAùiveChdProûss
()è
æags
 |ğ
REDISMODULE_CTX_FLAGS_ACTIVE_CHILD
;

1926  
æags
;

1927 
	}
}

1949 
	$RM_AvoidR•liÿT¿ffic
() {

1950  
	`ş›ÁsA»Pau£d
();

1951 
	}
}

1963 
	$RM_S–eùDb
(
RedisModuËCtx
 *
ùx
, 
Ãwid
) {

1964 
»tv®
 = 
	`£ËùDb
(
ùx
->
ş›Á
,
Ãwid
);

1965  (
»tv®
 =ğ
C_OK
è? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

1966 
	}
}

1969 
	$moduËIn™Key
(
RedisModuËKey
 *
kp
, 
RedisModuËCtx
 *
ùx
, 
robj
 *
keyÇme
,„obj *
v®ue
, 
mode
){

1970 
kp
->
ùx
 = ctx;

1971 
kp
->
db
 = 
ùx
->
ş›Á
->db;

1972 
kp
->
key
 = 
keyÇme
;

1973 
	`šüRefCouÁ
(
keyÇme
);

1974 
kp
->
v®ue
 = value;

1975 
kp
->
™”
 = 
NULL
;

1976 
kp
->
mode
 = mode;

1977 
	`z£tKeyRe£t
(
kp
);

1978 
	}
}

1994 *
	$RM_O³nKey
(
RedisModuËCtx
 *
ùx
, 
robj
 *
keyÇme
, 
mode
) {

1995 
RedisModuËKey
 *
kp
;

1996 
robj
 *
v®ue
;

1997 
æags
 = 
mode
 & 
REDISMODULE_OPEN_KEY_NOTOUCH
? 
LOOKUP_NOTOUCH
: 0;

1999 ià(
mode
 & 
REDISMODULE_WRITE
) {

2000 
v®ue
 = 
	`lookupKeyWr™eW™hFÏgs
(
ùx
->
ş›Á
->
db
,
keyÇme
, 
æags
);

2002 
v®ue
 = 
	`lookupKeyR—dW™hFÏgs
(
ùx
->
ş›Á
->
db
,
keyÇme
, 
æags
);

2003 ià(
v®ue
 =ğ
NULL
) {

2004  
NULL
;

2009 
kp
 = 
	`zm®loc
((*kp));

2010 
	`moduËIn™Key
(
kp
, 
ùx
, 
keyÇme
, 
v®ue
, 
mode
);

2011 
	`autoMemÜyAdd
(
ùx
,
REDISMODULE_AM_KEY
,
kp
);

2012  (*)
kp
;

2013 
	}
}

2016 
	$moduËClo£Key
(
RedisModuËKey
 *
key
) {

2017 
sigÇl
 = 
	`SHOULD_SIGNAL_MODIFIED_KEYS
(
key
->
ùx
);

2018 ià((
key
->
mode
 & 
REDISMODULE_WRITE
è&& 
sigÇl
)

2019 
	`sigÇlModif›dKey
(
key
->
ùx
->
ş›Á
,key->
db
,key->key);

2021 
	`RM_Z£tRªgeStİ
(
key
);

2022 
	`deüRefCouÁ
(
key
->key);

2023 
	}
}

2026 
	$RM_Clo£Key
(
RedisModuËKey
 *
key
) {

2027 ià(
key
 =ğ
NULL
) ;

2028 
	`moduËClo£Key
(
key
);

2029 
	`autoMemÜyF»ed
(
key
->
ùx
,
REDISMODULE_AM_KEY
,key);

2030 
	`zä“
(
key
);

2031 
	}
}

2035 
	$RM_KeyTy³
(
RedisModuËKey
 *
key
) {

2036 ià(
key
 =ğ
NULL
 || key->
v®ue
 =ğNULLè 
REDISMODULE_KEYTYPE_EMPTY
;

2039 
key
->
v®ue
->
ty³
) {

2040 
OBJ_STRING
:  
REDISMODULE_KEYTYPE_STRING
;

2041 
OBJ_LIST
:  
REDISMODULE_KEYTYPE_LIST
;

2042 
OBJ_SET
:  
REDISMODULE_KEYTYPE_SET
;

2043 
OBJ_ZSET
:  
REDISMODULE_KEYTYPE_ZSET
;

2044 
OBJ_HASH
:  
REDISMODULE_KEYTYPE_HASH
;

2045 
OBJ_MODULE
:  
REDISMODULE_KEYTYPE_MODULE
;

2046 
OBJ_STREAM
:  
REDISMODULE_KEYTYPE_STREAM
;

2049 
	}
}

2056 
size_t
 
	$RM_V®ueL’gth
(
RedisModuËKey
 *
key
) {

2057 ià(
key
 =ğ
NULL
 || key->
v®ue
 == NULL)  0;

2058 
key
->
v®ue
->
ty³
) {

2059 
OBJ_STRING
:  
	`¡ršgObjeùL’
(
key
->
v®ue
);

2060 
OBJ_LIST
:  
	`li¡Ty³L’gth
(
key
->
v®ue
);

2061 
OBJ_SET
:  
	`£tTy³Size
(
key
->
v®ue
);

2062 
OBJ_ZSET
:  
	`z£tL’gth
(
key
->
v®ue
);

2063 
OBJ_HASH
:  
	`hashTy³L’gth
(
key
->
v®ue
);

2064 
OBJ_STREAM
:  
	`¡»amL’gth
(
key
->
v®ue
);

2067 
	}
}

2073 
	$RM_D–‘eKey
(
RedisModuËKey
 *
key
) {

2074 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2075 ià(
key
->
v®ue
) {

2076 
	`dbD–‘e
(
key
->
db
,key->key);

2077 
key
->
v®ue
 = 
NULL
;

2079  
REDISMODULE_OK
;

2080 
	}
}

2087 
	$RM_UÆškKey
(
RedisModuËKey
 *
key
) {

2088 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2089 ià(
key
->
v®ue
) {

2090 
	`dbAsyncD–‘e
(
key
->
db
,key->key);

2091 
key
->
v®ue
 = 
NULL
;

2093  
REDISMODULE_OK
;

2094 
	}
}

2099 
m¡ime_t
 
	$RM_G‘Expœe
(
RedisModuËKey
 *
key
) {

2100 
m¡ime_t
 
expœe
 = 
	`g‘Expœe
(
key
->
db
,key->key);

2101 ià(
expœe
 =ğ-1 || 
key
->
v®ue
 =ğ
NULL
)  -1;

2102 
expœe
 -ğ
	`m¡ime
();

2103  
expœe
 >= 0 ?ƒxpire : 0;

2104 
	}
}

2115 
	$RM_S‘Expœe
(
RedisModuËKey
 *
key
, 
m¡ime_t
 
expœe
) {

2116 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
v®ue
 =ğ
NULL
)

2117  
REDISMODULE_ERR
;

2118 ià(
expœe
 !ğ
REDISMODULE_NO_EXPIRE
) {

2119 
expœe
 +ğ
	`m¡ime
();

2120 
	`£tExpœe
(
key
->
ùx
->
ş›Á
,key->
db
,key->key,
expœe
);

2122 
	`»moveExpœe
(
key
->
db
,key->key);

2124  
REDISMODULE_OK
;

2125 
	}
}

2131 
	$RM_Re£tD©a£t
(
»¡¬t_aof
, 
async
) {

2132 ià(
»¡¬t_aof
 && 
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
è
	`¡İAµ’dOÆy
();

2133 
	`æushAÎD©aAndRe£tRDB
(
async
? 
EMPTYDB_ASYNC
: 
EMPTYDB_NO_FLAGS
);

2134 ià(
£rv”
.
aof_’abËd
 && 
»¡¬t_aof
è
	`»¡¬tAOFAá”SYNC
();

2135 
	}
}

2138 
	$RM_DbSize
(
RedisModuËCtx
 *
ùx
) {

2139  
	`diùSize
(
ùx
->
ş›Á
->
db
->
diù
);

2140 
	}
}

2143 
RedisModuËSŒšg
 *
	$RM_RªdomKey
(
RedisModuËCtx
 *
ùx
) {

2144 
robj
 *
key
 = 
	`dbRªdomKey
(
ùx
->
ş›Á
->
db
);

2145 
	`autoMemÜyAdd
(
ùx
,
REDISMODULE_AM_STRING
,
key
);

2146  
key
;

2147 
	}
}

2157 
	$RM_SŒšgS‘
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
¡r
) {

2158 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
™”
è 
REDISMODULE_ERR
;

2159 
	`RM_D–‘eKey
(
key
);

2160 
	`g’”icS‘Key
(
key
->
ùx
->
ş›Á
,key->
db
,key->key,
¡r
,0,0);

2161 
key
->
v®ue
 = 
¡r
;

2162  
REDISMODULE_OK
;

2163 
	}
}

2194 *
	$RM_SŒšgDMA
(
RedisModuËKey
 *
key
, 
size_t
 *
Ën
, 
mode
) {

2199 *
em±y¡ršg
 = "<dma-empty-string>";

2200 ià(
key
->
v®ue
 =ğ
NULL
) {

2201 *
Ën
 = 0;

2202  
em±y¡ršg
;

2205 ià(
key
->
v®ue
->
ty³
 !ğ
OBJ_STRING
è 
NULL
;

2209 ià((
mode
 & 
REDISMODULE_WRITE
è|| 
key
->
v®ue
->
’codšg
 !ğ
OBJ_ENCODING_RAW
)

2210 
key
->
v®ue
 = 
	`dbUnsh¬eSŒšgV®ue
(key->
db
, key->key, key->value);

2212 *
Ën
 = 
	`sd¦’
(
key
->
v®ue
->
±r
);

2213  
key
->
v®ue
->
±r
;

2214 
	}
}

2228 
	$RM_SŒšgTrunÿ‹
(
RedisModuËKey
 *
key
, 
size_t
 
ÃwËn
) {

2229 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2230 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_STRING
è 
REDISMODULE_ERR
;

2231 ià(
ÃwËn
 > 512*1024*1024è 
REDISMODULE_ERR
;

2235 ià(
key
->
v®ue
 =ğ
NULL
 && 
ÃwËn
 =ğ0è 
REDISMODULE_OK
;

2237 ià(
key
->
v®ue
 =ğ
NULL
) {

2239 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ewËn
(
NULL
, 
ÃwËn
));

2240 
	`g’”icS‘Key
(
key
->
ùx
->
ş›Á
,key->
db
,key->key,
o
,0,0);

2241 
key
->
v®ue
 = 
o
;

2242 
	`deüRefCouÁ
(
o
);

2245 
key
->
v®ue
 = 
	`dbUnsh¬eSŒšgV®ue
(key->
db
, key->key, key->value);

2246 
size_t
 
cu¾’
 = 
	`sd¦’
(
key
->
v®ue
->
±r
);

2247 ià(
ÃwËn
 > 
cu¾’
) {

2248 
key
->
v®ue
->
±r
 = 
	`sdsgrowz”o
(key->v®ue->±r,
ÃwËn
);

2249 } ià(
ÃwËn
 < 
cu¾’
) {

2250 
	`sd¤ªge
(
key
->
v®ue
->
±r
,0,
ÃwËn
-1);

2252 ià(
	`sd¦’
(
key
->
v®ue
->
±r
è< 
	`sd§va
(key->value->ptr))

2253 
key
->
v®ue
->
±r
 = 
	`sdsRemoveF»eS·û
(key->value->ptr);

2256  
REDISMODULE_OK
;

2257 
	}
}

2267 
	$RM_Li¡Push
(
RedisModuËKey
 *
key
, 
wh”e
, 
RedisModuËSŒšg
 *
–e
) {

2268 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2269 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_LIST
è 
REDISMODULE_ERR
;

2270 ià(
key
->
v®ue
 =ğ
NULL
è
	`moduËC»©eEm±yKey
(key,
REDISMODULE_KEYTYPE_LIST
);

2271 
	`li¡Ty³Push
(
key
->
v®ue
, 
–e
,

2272 (
wh”e
 =ğ
REDISMODULE_LIST_HEAD
è? 
QUICKLIST_HEAD
 : 
QUICKLIST_TAIL
);

2273  
REDISMODULE_OK
;

2274 
	}
}

2283 
RedisModuËSŒšg
 *
	$RM_Li¡Pİ
(
RedisModuËKey
 *
key
, 
wh”e
) {

2284 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
) ||

2285 
key
->
v®ue
 =ğ
NULL
 ||

2286 
key
->
v®ue
->
ty³
 !ğ
OBJ_LIST
è 
NULL
;

2287 
robj
 *
–e
 = 
	`li¡Ty³Pİ
(
key
->
v®ue
,

2288 (
wh”e
 =ğ
REDISMODULE_LIST_HEAD
è? 
QUICKLIST_HEAD
 : 
QUICKLIST_TAIL
);

2289 
robj
 *
decoded
 = 
	`g‘DecodedObjeù
(
–e
);

2290 
	`deüRefCouÁ
(
–e
);

2291 
	`moduËD–KeyIfEm±y
(
key
);

2292 
	`autoMemÜyAdd
(
key
->
ùx
,
REDISMODULE_AM_STRING
,
decoded
);

2293  
decoded
;

2294 
	}
}

2302 
	$RM_Z£tAddFÏgsToCÜeFÏgs
(
æags
) {

2303 
»tæags
 = 0;

2304 ià(
æags
 & 
REDISMODULE_ZADD_XX
è
»tæags
 |ğ
ZADD_XX
;

2305 ià(
æags
 & 
REDISMODULE_ZADD_NX
è
»tæags
 |ğ
ZADD_NX
;

2306  
»tæags
;

2307 
	}
}

2310 
	$RM_Z£tAddFÏgsFromCÜeFÏgs
(
æags
) {

2311 
»tæags
 = 0;

2312 ià(
æags
 & 
ZADD_ADDED
è
»tæags
 |ğ
REDISMODULE_ZADD_ADDED
;

2313 ià(
æags
 & 
ZADD_UPDATED
è
»tæags
 |ğ
REDISMODULE_ZADD_UPDATED
;

2314 ià(
æags
 & 
ZADD_NOP
è
»tæags
 |ğ
REDISMODULE_ZADD_NOP
;

2315  
»tæags
;

2316 
	}
}

2346 
	$RM_Z£tAdd
(
RedisModuËKey
 *
key
, 
scÜe
, 
RedisModuËSŒšg
 *
–e
, *
æag¥Œ
) {

2347 
æags
 = 0;

2348 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2349 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2350 ià(
key
->
v®ue
 =ğ
NULL
è
	`moduËC»©eEm±yKey
(key,
REDISMODULE_KEYTYPE_ZSET
);

2351 ià(
æag¥Œ
è
æags
 = 
	`RM_Z£tAddFÏgsToCÜeFÏgs
(*flagsptr);

2352 ià(
	`z£tAdd
(
key
->
v®ue
,
scÜe
,
–e
->
±r
,&
æags
,
NULL
) == 0) {

2353 ià(
æag¥Œ
) *flagsptr = 0;

2354  
REDISMODULE_ERR
;

2356 ià(
æag¥Œ
è*æag¥Œ = 
	`RM_Z£tAddFÏgsFromCÜeFÏgs
(
æags
);

2357  
REDISMODULE_OK
;

2358 
	}
}

2373 
	$RM_Z£tInüby
(
RedisModuËKey
 *
key
, 
scÜe
, 
RedisModuËSŒšg
 *
–e
, *
æag¥Œ
, *
ÃwscÜe
) {

2374 
æags
 = 0;

2375 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2376 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2377 ià(
key
->
v®ue
 =ğ
NULL
è
	`moduËC»©eEm±yKey
(key,
REDISMODULE_KEYTYPE_ZSET
);

2378 ià(
æag¥Œ
è
æags
 = 
	`RM_Z£tAddFÏgsToCÜeFÏgs
(*flagsptr);

2379 
æags
 |ğ
ZADD_INCR
;

2380 ià(
	`z£tAdd
(
key
->
v®ue
,
scÜe
,
–e
->
±r
,&
æags
,
ÃwscÜe
) == 0) {

2381 ià(
æag¥Œ
) *flagsptr = 0;

2382  
REDISMODULE_ERR
;

2385 ià(
æag¥Œ
 && (*æag¥Œ & 
ZADD_NAN
)) {

2386 *
æag¥Œ
 = 0;

2387  
REDISMODULE_ERR
;

2389 ià(
æag¥Œ
è*æag¥Œ = 
	`RM_Z£tAddFÏgsFromCÜeFÏgs
(
æags
);

2390  
REDISMODULE_OK
;

2391 
	}
}

2411 
	$RM_Z£tRem
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
–e
, *
d–‘ed
) {

2412 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
)è 
REDISMODULE_ERR
;

2413 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2414 ià(
key
->
v®ue
 !ğ
NULL
 && 
	`z£tD–
(key->v®ue,
–e
->
±r
)) {

2415 ià(
d–‘ed
) *deleted = 1;

2417 ià(
d–‘ed
) *deleted = 0;

2419  
REDISMODULE_OK
;

2420 
	}
}

2430 
	$RM_Z£tScÜe
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
–e
, *
scÜe
) {

2431 ià(
key
->
v®ue
 =ğ
NULL
è 
REDISMODULE_ERR
;

2432 ià(
key
->
v®ue
->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2433 ià(
	`z£tScÜe
(
key
->
v®ue
,
–e
->
±r
,
scÜe
è=ğ
C_ERR
è 
REDISMODULE_ERR
;

2434  
REDISMODULE_OK
;

2435 
	}
}

2441 
	$z£tKeyRe£t
(
RedisModuËKey
 *
key
) {

2442 
key
->
zty³
 = 
REDISMODULE_ZSET_RANGE_NONE
;

2443 
key
->
zcu¼’t
 = 
NULL
;

2444 
key
->
z”
 = 1;

2445 
	}
}

2448 
	$RM_Z£tRªgeStİ
(
RedisModuËKey
 *
key
) {

2450 ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_LEX
)

2451 
	`z¦F»eLexRªge
(&
key
->
zÌs
);

2455 
	`z£tKeyRe£t
(
key
);

2456 
	}
}

2459 
	$RM_Z£tRªgeEndR—ched
(
RedisModuËKey
 *
key
) {

2460  
key
->
z”
;

2461 
	}
}

2469 
	$z£tIn™ScÜeRªge
(
RedisModuËKey
 *
key
, 
mš
, 
max
, 
mšex
, 
maxex
, 
fœ¡
) {

2470 ià(!
key
->
v®ue
 || key->v®ue->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2472 
	`RM_Z£tRªgeStİ
(
key
);

2473 
key
->
zty³
 = 
REDISMODULE_ZSET_RANGE_SCORE
;

2474 
key
->
z”
 = 0;

2478 
z¿nge¥ec
 *
zrs
 = &
key
->zrs;

2479 
zrs
->
mš
 = min;

2480 
zrs
->
max
 = max;

2481 
zrs
->
mšex
 = minex;

2482 
zrs
->
maxex
 = maxex;

2484 ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2485 
key
->
zcu¼’t
 = 
fœ¡
 ? 
	`zzlFœ¡InRªge
(key->
v®ue
->
±r
,
zrs
) :

2486 
	`zzlLa¡InRªge
(
key
->
v®ue
->
±r
,
zrs
);

2487 } ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2488 
z£t
 *
zs
 = 
key
->
v®ue
->
±r
;

2489 
zskli¡
 *
z¦
 = 
zs
->zsl;

2490 
key
->
zcu¼’t
 = 
fœ¡
 ? 
	`z¦Fœ¡InRªge
(
z¦
,
zrs
) :

2491 
	`z¦La¡InRªge
(
z¦
,
zrs
);

2493 
	`£rv”Pªic
("Unsupported zsetƒncoding");

2495 ià(
key
->
zcu¼’t
 =ğ
NULL
èkey->
z”
 = 1;

2496  
REDISMODULE_OK
;

2497 
	}
}

2514 
	$RM_Z£tFœ¡InScÜeRªge
(
RedisModuËKey
 *
key
, 
mš
, 
max
, 
mšex
, 
maxex
) {

2515  
	`z£tIn™ScÜeRªge
(
key
,
mš
,
max
,
mšex
,
maxex
,1);

2516 
	}
}

2520 
	$RM_Z£tLa¡InScÜeRªge
(
RedisModuËKey
 *
key
, 
mš
, 
max
, 
mšex
, 
maxex
) {

2521  
	`z£tIn™ScÜeRªge
(
key
,
mš
,
max
,
mšex
,
maxex
,0);

2522 
	}
}

2533 
	$z£tIn™LexRªge
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
mš
, RedisModuËSŒšg *
max
, 
fœ¡
) {

2534 ià(!
key
->
v®ue
 || key->v®ue->
ty³
 !ğ
OBJ_ZSET
è 
REDISMODULE_ERR
;

2536 
	`RM_Z£tRªgeStİ
(
key
);

2537 
key
->
z”
 = 0;

2541 
zËx¿nge¥ec
 *
zÌs
 = &
key
->zlrs;

2542 ià(
	`z¦P¬£LexRªge
(
mš
, 
max
, 
zÌs
è=ğ
C_ERR
è 
REDISMODULE_ERR
;

2546 
key
->
zty³
 = 
REDISMODULE_ZSET_RANGE_LEX
;

2548 ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2549 
key
->
zcu¼’t
 = 
fœ¡
 ? 
	`zzlFœ¡InLexRªge
(key->
v®ue
->
±r
,
zÌs
) :

2550 
	`zzlLa¡InLexRªge
(
key
->
v®ue
->
±r
,
zÌs
);

2551 } ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2552 
z£t
 *
zs
 = 
key
->
v®ue
->
±r
;

2553 
zskli¡
 *
z¦
 = 
zs
->zsl;

2554 
key
->
zcu¼’t
 = 
fœ¡
 ? 
	`z¦Fœ¡InLexRªge
(
z¦
,
zÌs
) :

2555 
	`z¦La¡InLexRªge
(
z¦
,
zÌs
);

2557 
	`£rv”Pªic
("Unsupported zsetƒncoding");

2559 ià(
key
->
zcu¼’t
 =ğ
NULL
èkey->
z”
 = 1;

2561  
REDISMODULE_OK
;

2562 
	}
}

2576 
	$RM_Z£tFœ¡InLexRªge
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
mš
, RedisModuËSŒšg *
max
) {

2577  
	`z£tIn™LexRªge
(
key
,
mš
,
max
,1);

2578 
	}
}

2582 
	$RM_Z£tLa¡InLexRªge
(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
mš
, RedisModuËSŒšg *
max
) {

2583  
	`z£tIn™LexRªge
(
key
,
mš
,
max
,0);

2584 
	}
}

2589 
RedisModuËSŒšg
 *
	$RM_Z£tRªgeCu¼’tEËm’t
(
RedisModuËKey
 *
key
, *
scÜe
) {

2590 
RedisModuËSŒšg
 *
¡r
;

2592 ià(
key
->
zcu¼’t
 =ğ
NULL
)  NULL;

2593 ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2594 *
•Œ
, *
¥Œ
;

2595 
•Œ
 = 
key
->
zcu¼’t
;

2596 
sds
 
–e
 = 
	`zli¡G‘Objeù
(
•Œ
);

2597 ià(
scÜe
) {

2598 
¥Œ
 = 
	`zli¡Next
(
key
->
v®ue
->
±r
,
•Œ
);

2599 *
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

2601 
¡r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
–e
);

2602 } ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2603 
zskli¡Node
 *
Ê
 = 
key
->
zcu¼’t
;

2604 ià(
scÜe
è*scÜğ
Ê
->score;

2605 
¡r
 = 
	`ü—‹SŒšgObjeù
(
Ê
->
–e
,
	`sd¦’
(ln->ele));

2607 
	`£rv”Pªic
("Unsupported zsetƒncoding");

2609 
	`autoMemÜyAdd
(
key
->
ùx
,
REDISMODULE_AM_STRING
,
¡r
);

2610  
¡r
;

2611 
	}
}

2616 
	$RM_Z£tRªgeNext
(
RedisModuËKey
 *
key
) {

2617 ià(!
key
->
zty³
 || !key->
zcu¼’t
)  0;

2619 ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2620 *
zl
 = 
key
->
v®ue
->
±r
;

2621 *
•Œ
 = 
key
->
zcu¼’t
;

2622 *
Ãxt
;

2623 
Ãxt
 = 
	`zli¡Next
(
zl
,
•Œ
);

2624 ià(
Ãxt
èÃxˆğ
	`zli¡Next
(
zl
,next);

2625 ià(
Ãxt
 =ğ
NULL
) {

2626 
key
->
z”
 = 1;

2630 ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_SCORE
) {

2633 *
§ved_Ãxt
 = 
Ãxt
;

2634 
Ãxt
 = 
	`zli¡Next
(
zl
,next);

2635 
scÜe
 = 
	`zzlG‘ScÜe
(
Ãxt
);

2636 ià(!
	`z¦V®ueL‹Max
(
scÜe
,&
key
->
zrs
)) {

2637 
key
->
z”
 = 1;

2640 
Ãxt
 = 
§ved_Ãxt
;

2641 } ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_LEX
) {

2642 ià(!
	`zzlLexV®ueL‹Max
(
Ãxt
,&
key
->
zÌs
)) {

2643 
key
->
z”
 = 1;

2647 
key
->
zcu¼’t
 = 
Ãxt
;

2650 } ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2651 
zskli¡Node
 *
Ê
 = 
key
->
zcu¼’t
, *
Ãxt
 =†n->
Ëv–
[0].
fÜw¬d
;

2652 ià(
Ãxt
 =ğ
NULL
) {

2653 
key
->
z”
 = 1;

2657 ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_SCORE
 &&

2658 !
	`z¦V®ueL‹Max
(
Ãxt
->
scÜe
,&
key
->
zrs
))

2660 
key
->
z”
 = 1;

2662 } ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_LEX
) {

2663 ià(!
	`z¦LexV®ueL‹Max
(
Ãxt
->
–e
,&
key
->
zÌs
)) {

2664 
key
->
z”
 = 1;

2668 
key
->
zcu¼’t
 = 
Ãxt
;

2672 
	`£rv”Pªic
("Unsupported zsetƒncoding");

2674 
	}
}

2679 
	$RM_Z£tRªgeP»v
(
RedisModuËKey
 *
key
) {

2680 ià(!
key
->
zty³
 || !key->
zcu¼’t
)  0;

2682 ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2683 *
zl
 = 
key
->
v®ue
->
±r
;

2684 *
•Œ
 = 
key
->
zcu¼’t
;

2685 *
´ev
;

2686 
´ev
 = 
	`zli¡P»v
(
zl
,
•Œ
);

2687 ià(
´ev
è´ev = 
	`zli¡P»v
(
zl
,prev);

2688 ià(
´ev
 =ğ
NULL
) {

2689 
key
->
z”
 = 1;

2693 ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_SCORE
) {

2696 *
§ved_´ev
 = 
´ev
;

2697 
´ev
 = 
	`zli¡Next
(
zl
,prev);

2698 
scÜe
 = 
	`zzlG‘ScÜe
(
´ev
);

2699 ià(!
	`z¦V®ueG‹Mš
(
scÜe
,&
key
->
zrs
)) {

2700 
key
->
z”
 = 1;

2703 
´ev
 = 
§ved_´ev
;

2704 } ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_LEX
) {

2705 ià(!
	`zzlLexV®ueG‹Mš
(
´ev
,&
key
->
zÌs
)) {

2706 
key
->
z”
 = 1;

2710 
key
->
zcu¼’t
 = 
´ev
;

2713 } ià(
key
->
v®ue
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2714 
zskli¡Node
 *
Ê
 = 
key
->
zcu¼’t
, *
´ev
 =†n->
backw¬d
;

2715 ià(
´ev
 =ğ
NULL
) {

2716 
key
->
z”
 = 1;

2720 ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_SCORE
 &&

2721 !
	`z¦V®ueG‹Mš
(
´ev
->
scÜe
,&
key
->
zrs
))

2723 
key
->
z”
 = 1;

2725 } ià(
key
->
zty³
 =ğ
REDISMODULE_ZSET_RANGE_LEX
) {

2726 ià(!
	`z¦LexV®ueG‹Mš
(
´ev
->
–e
,&
key
->
zÌs
)) {

2727 
key
->
z”
 = 1;

2731 
key
->
zcu¼’t
 = 
´ev
;

2735 
	`£rv”Pªic
("Unsupported zsetƒncoding");

2737 
	}
}

2795 
	$RM_HashS‘
(
RedisModuËKey
 *
key
, 
æags
, ...) {

2796 
va_li¡
 
­
;

2797 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
))  0;

2798 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_HASH
)  0;

2799 ià(
key
->
v®ue
 =ğ
NULL
è
	`moduËC»©eEm±yKey
(key,
REDISMODULE_KEYTYPE_HASH
);

2801 
upd©ed
 = 0;

2802 
	`va_¡¬t
(
­
, 
æags
);

2804 
RedisModuËSŒšg
 *
f›ld
, *
v®ue
;

2806 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
) {

2807 *
cf›ld
 = 
	`va_¬g
(
­
,*);

2808 ià(
cf›ld
 =ğ
NULL
) ;

2809 
f›ld
 = 
	`ü—‹RawSŒšgObjeù
(
cf›ld
,
	`¡¾’
(cfield));

2811 
f›ld
 = 
	`va_¬g
(
­
,
RedisModuËSŒšg
*);

2812 ià(
f›ld
 =ğ
NULL
) ;

2814 
v®ue
 = 
	`va_¬g
(
­
,
RedisModuËSŒšg
*);

2817 ià(
æags
 & (
REDISMODULE_HASH_XX
|
REDISMODULE_HASH_NX
)) {

2818 
exi¡s
 = 
	`hashTy³Exi¡s
(
key
->
v®ue
, 
f›ld
->
±r
);

2819 ià(((
æags
 & 
REDISMODULE_HASH_XX
è&& !
exi¡s
) ||

2820 ((
æags
 & 
REDISMODULE_HASH_NX
è&& 
exi¡s
))

2822 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
è
	`deüRefCouÁ
(
f›ld
);

2828 ià(
v®ue
 =ğ
REDISMODULE_HASH_DELETE
) {

2829 
upd©ed
 +ğ
	`hashTy³D–‘e
(
key
->
v®ue
, 
f›ld
->
±r
);

2830 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
è
	`deüRefCouÁ
(
f›ld
);

2834 
low_æags
 = 
HASH_SET_COPY
;

2838 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
)

2839 
low_æags
 |ğ
HASH_SET_TAKE_FIELD
;

2841 
robj
 *
¬gv
[2] = {
f›ld
,
v®ue
};

2842 
	`hashTy³TryCÚv”siÚ
(
key
->
v®ue
,
¬gv
,0,1);

2843 
upd©ed
 +ğ
	`hashTy³S‘
(
key
->
v®ue
, 
f›ld
->
±r
, v®ue->±r, 
low_æags
);

2847 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
) {

2848 
f›ld
->
±r
 = 
NULL
;

2849 
	`deüRefCouÁ
(
f›ld
);

2852 
	`va_’d
(
­
);

2853 
	`moduËD–KeyIfEm±y
(
key
);

2854  
upd©ed
;

2855 
	}
}

2898 
	$RM_HashG‘
(
RedisModuËKey
 *
key
, 
æags
, ...) {

2899 
va_li¡
 
­
;

2900 ià(
key
->
v®ue
 && key->v®ue->
ty³
 !ğ
OBJ_HASH
è 
REDISMODULE_ERR
;

2902 
	`va_¡¬t
(
­
, 
æags
);

2904 
RedisModuËSŒšg
 *
f›ld
, **
v®u•Œ
;

2905 *
exi¡¥Œ
;

2907 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
) {

2908 *
cf›ld
 = 
	`va_¬g
(
­
,*);

2909 ià(
cf›ld
 =ğ
NULL
) ;

2910 
f›ld
 = 
	`ü—‹RawSŒšgObjeù
(
cf›ld
,
	`¡¾’
(cfield));

2912 
f›ld
 = 
	`va_¬g
(
­
,
RedisModuËSŒšg
*);

2913 ià(
f›ld
 =ğ
NULL
) ;

2917 ià(
æags
 & 
REDISMODULE_HASH_EXISTS
) {

2918 
exi¡¥Œ
 = 
	`va_¬g
(
­
,*);

2919 ià(
key
->
v®ue
)

2920 *
exi¡¥Œ
 = 
	`hashTy³Exi¡s
(
key
->
v®ue
,
f›ld
->
±r
);

2922 *
exi¡¥Œ
 = 0;

2924 
v®u•Œ
 = 
	`va_¬g
(
­
,
RedisModuËSŒšg
**);

2925 ià(
key
->
v®ue
) {

2926 *
v®u•Œ
 = 
	`hashTy³G‘V®ueObjeù
(
key
->
v®ue
,
f›ld
->
±r
);

2927 ià(*
v®u•Œ
) {

2928 
robj
 *
decoded
 = 
	`g‘DecodedObjeù
(*
v®u•Œ
);

2929 
	`deüRefCouÁ
(*
v®u•Œ
);

2930 *
v®u•Œ
 = 
decoded
;

2932 ià(*
v®u•Œ
)

2933 
	`autoMemÜyAdd
(
key
->
ùx
,
REDISMODULE_AM_STRING
,*
v®u•Œ
);

2935 *
v®u•Œ
 = 
NULL
;

2940 ià(
æags
 & 
REDISMODULE_HASH_CFIELDS
è
	`deüRefCouÁ
(
f›ld
);

2942 
	`va_’d
(
­
);

2943  
REDISMODULE_OK
;

2944 
	}
}

2954 
RedisModuËC®lR•ly
 *
	$moduËC»©eC®lR•lyFromPrÙo
(
RedisModuËCtx
 *
ùx
, 
sds
 
´Ùo
) {

2955 
RedisModuËC®lR•ly
 *
»¶y
 = 
	`zm®loc
((*reply));

2956 
»¶y
->
ùx
 = ctx;

2957 
»¶y
->
´Ùo
 =…roto;

2958 
»¶y
->
´ÙŞ’
 = 
	`sd¦’
(
´Ùo
);

2959 
»¶y
->
æags
 = 
REDISMODULE_REPLYFLAG_TOPARSE
;

2960 
´Ùo
[0]) {

2962 '+': 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_STRING
; ;

2963 '-': 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_ERROR
; ;

2964 ':': 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_INTEGER
; ;

2965 '*': 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_ARRAY
; ;

2966 : 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_UNKNOWN
; ;

2968 ià((
´Ùo
[0] == '*' ||…roto[0] == '$') &&…roto[1] == '-')

2969 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_NULL
;

2970  
»¶y
;

2971 
	}
}

2973 
moduËP¬£C®lR•ly_IÁ
(
RedisModuËC®lR•ly
 *
»¶y
);

2974 
moduËP¬£C®lR•ly_BulkSŒšg
(
RedisModuËC®lR•ly
 *
»¶y
);

2975 
moduËP¬£C®lR•ly_Sim¶eSŒšg
(
RedisModuËC®lR•ly
 *
»¶y
);

2976 
moduËP¬£C®lR•ly_A¼ay
(
RedisModuËC®lR•ly
 *
»¶y
);

2981 
	$moduËP¬£C®lR•ly
(
RedisModuËC®lR•ly
 *
»¶y
) {

2982 ià(!(
»¶y
->
æags
 & 
REDISMODULE_REPLYFLAG_TOPARSE
)) ;

2983 
»¶y
->
æags
 &ğ~
REDISMODULE_REPLYFLAG_TOPARSE
;

2985 
»¶y
->
´Ùo
[0]) {

2986 ':': 
	`moduËP¬£C®lR•ly_IÁ
(
»¶y
); ;

2987 '$': 
	`moduËP¬£C®lR•ly_BulkSŒšg
(
»¶y
); ;

2989 '+': 
	`moduËP¬£C®lR•ly_Sim¶eSŒšg
(
»¶y
); ;

2990 '*': 
	`moduËP¬£C®lR•ly_A¼ay
(
»¶y
); ;

2992 
	}
}

2994 
	$moduËP¬£C®lR•ly_IÁ
(
RedisModuËC®lR•ly
 *
»¶y
) {

2995 *
´Ùo
 = 
»¶y
->proto;

2996 *
p
 = 
	`¡rchr
(
´Ùo
+1,'\r');

2998 
	`¡ršg2Î
(
´Ùo
+1,
p
-´Ùo-1,&
»¶y
->
v®
.
Î
);

2999 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
+2;

3000 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_INTEGER
;

3001 
	}
}

3003 
	$moduËP¬£C®lR•ly_BulkSŒšg
(
RedisModuËC®lR•ly
 *
»¶y
) {

3004 *
´Ùo
 = 
»¶y
->proto;

3005 *
p
 = 
	`¡rchr
(
´Ùo
+1,'\r');

3006 
bulkËn
;

3008 
	`¡ršg2Î
(
´Ùo
+1,
p
-´Ùo-1,&
bulkËn
);

3009 ià(
bulkËn
 == -1) {

3010 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
+2;

3011 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_NULL
;

3013 
»¶y
->
v®
.
¡r
 = 
p
+2;

3014 
»¶y
->
Ën
 = 
bulkËn
;

3015 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
+2+
bulkËn
+2;

3016 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_STRING
;

3018 
	}
}

3020 
	$moduËP¬£C®lR•ly_Sim¶eSŒšg
(
RedisModuËC®lR•ly
 *
»¶y
) {

3021 *
´Ùo
 = 
»¶y
->proto;

3022 *
p
 = 
	`¡rchr
(
´Ùo
+1,'\r');

3024 
»¶y
->
v®
.
¡r
 = 
´Ùo
+1;

3025 
»¶y
->
Ën
 = 
p
-
´Ùo
-1;

3026 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
+2;

3027 
»¶y
->
ty³
 = 
´Ùo
[0] =ğ'+' ? 
REDISMODULE_REPLY_STRING
 :

3028 
REDISMODULE_REPLY_ERROR
;

3029 
	}
}

3031 
	$moduËP¬£C®lR•ly_A¼ay
(
RedisModuËC®lR•ly
 *
»¶y
) {

3032 *
´Ùo
 = 
»¶y
->proto;

3033 *
p
 = 
	`¡rchr
(
´Ùo
+1,'\r');

3034 
¬¿yËn
, 
j
;

3036 
	`¡ršg2Î
(
´Ùo
+1,
p
-´Ùo-1,&
¬¿yËn
);

3037 
p
 += 2;

3039 ià(
¬¿yËn
 == -1) {

3040 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
;

3041 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_NULL
;

3045 
»¶y
->
v®
.
¬¿y
 = 
	`zm®loc
((
RedisModuËC®lR•ly
)*
¬¿yËn
);

3046 
»¶y
->
Ën
 = 
¬¿yËn
;

3047 
j
 = 0; j < 
¬¿yËn
; j++) {

3048 
RedisModuËC®lR•ly
 *
–e
 = 
»¶y
->
v®
.
¬¿y
+
j
;

3049 
–e
->
æags
 = 
REDISMODULE_REPLYFLAG_NESTED
 |

3050 
REDISMODULE_REPLYFLAG_TOPARSE
;

3051 
–e
->
´Ùo
 = 
p
;

3052 
–e
->
ùx
 = 
»¶y
->ctx;

3053 
	`moduËP¬£C®lR•ly
(
–e
);

3054 
p
 +ğ
–e
->
´ÙŞ’
;

3056 
»¶y
->
´ÙŞ’
 = 
p
-
´Ùo
;

3057 
»¶y
->
ty³
 = 
REDISMODULE_REPLY_ARRAY
;

3058 
	}
}

3062 
	$RM_F»eC®lR•ly_Rec
(
RedisModuËC®lR•ly
 *
»¶y
, 
ä“Ã¡ed
){

3066 ià(!
ä“Ã¡ed
 && 
»¶y
->
æags
 & 
REDISMODULE_REPLYFLAG_NESTED
) ;

3068 ià(!(
»¶y
->
æags
 & 
REDISMODULE_REPLYFLAG_TOPARSE
)) {

3069 ià(
»¶y
->
ty³
 =ğ
REDISMODULE_REPLY_ARRAY
) {

3070 
size_t
 
j
;

3071 
j
 = 0; j < 
»¶y
->
Ën
; j++)

3072 
	`RM_F»eC®lR•ly_Rec
(
»¶y
->
v®
.
¬¿y
+
j
,1);

3073 
	`zä“
(
»¶y
->
v®
.
¬¿y
);

3081 ià(!(
»¶y
->
æags
 & 
REDISMODULE_REPLYFLAG_NESTED
)) {

3082 ià(
»¶y
->
´Ùo
è
	`sdsä“
(reply->proto);

3083 
	`zä“
(
»¶y
);

3085 
	}
}

3090 
	$RM_F»eC®lR•ly
(
RedisModuËC®lR•ly
 *
»¶y
) {

3092 
RedisModuËCtx
 *
ùx
 = 
»¶y
->ctx;

3093 
	`RM_F»eC®lR•ly_Rec
(
»¶y
,0);

3094 
	`autoMemÜyF»ed
(
ùx
,
REDISMODULE_AM_REPLY
,
»¶y
);

3095 
	}
}

3098 
	$RM_C®lR•lyTy³
(
RedisModuËC®lR•ly
 *
»¶y
) {

3099 ià(!
»¶y
è 
REDISMODULE_REPLY_UNKNOWN
;

3100  
»¶y
->
ty³
;

3101 
	}
}

3104 
size_t
 
	$RM_C®lR•lyL’gth
(
RedisModuËC®lR•ly
 *
»¶y
) {

3105 
	`moduËP¬£C®lR•ly
(
»¶y
);

3106 
»¶y
->
ty³
) {

3107 
REDISMODULE_REPLY_STRING
:

3108 
REDISMODULE_REPLY_ERROR
:

3109 
REDISMODULE_REPLY_ARRAY
:

3110  
»¶y
->
Ën
;

3114 
	}
}

3118 
RedisModuËC®lR•ly
 *
	$RM_C®lR•lyA¼ayEËm’t
(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 
idx
) {

3119 
	`moduËP¬£C®lR•ly
(
»¶y
);

3120 ià(
»¶y
->
ty³
 !ğ
REDISMODULE_REPLY_ARRAY
è 
NULL
;

3121 ià(
idx
 >ğ
»¶y
->
Ën
è 
NULL
;

3122  
»¶y
->
v®
.
¬¿y
+
idx
;

3123 
	}
}

3126 
	$RM_C®lR•lyIÁeg”
(
RedisModuËC®lR•ly
 *
»¶y
) {

3127 
	`moduËP¬£C®lR•ly
(
»¶y
);

3128 ià(
»¶y
->
ty³
 !ğ
REDISMODULE_REPLY_INTEGER
è 
LLONG_MIN
;

3129  
»¶y
->
v®
.
Î
;

3130 
	}
}

3133 cÚ¡ *
	$RM_C®lR•lySŒšgPŒ
(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 *
Ën
) {

3134 
	`moduËP¬£C®lR•ly
(
»¶y
);

3135 ià(
»¶y
->
ty³
 !ğ
REDISMODULE_REPLY_STRING
 &&

3136 
»¶y
->
ty³
 !ğ
REDISMODULE_REPLY_ERROR
è 
NULL
;

3137 ià(
Ën
è*ËÀğ
»¶y
->len;

3138  
»¶y
->
v®
.
¡r
;

3139 
	}
}

3143 
RedisModuËSŒšg
 *
	$RM_C»©eSŒšgFromC®lR•ly
(
RedisModuËC®lR•ly
 *
»¶y
) {

3144 
	`moduËP¬£C®lR•ly
(
»¶y
);

3145 
»¶y
->
ty³
) {

3146 
REDISMODULE_REPLY_STRING
:

3147 
REDISMODULE_REPLY_ERROR
:

3148  
	`RM_C»©eSŒšg
(
»¶y
->
ùx
,»¶y->
v®
.
¡r
,»¶y->
Ën
);

3149 
REDISMODULE_REPLY_INTEGER
: {

3150 
buf
[64];

3151 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
»¶y
->
v®
.
Î
);

3152  
	`RM_C»©eSŒšg
(
»¶y
->
ùx
,
buf
,
Ën
);

3154 :  
NULL
;

3156 
	}
}

3171 
robj
 **
	$moduËC»©eArgvFromU£rFÜm©
(cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, *
¬gı
, *
æags
, 
va_li¡
 
­
) {

3172 
¬gc
 = 0, 
¬gv_size
, 
j
;

3173 
robj
 **
¬gv
 = 
NULL
;

3177 
¬gv_size
 = 
	`¡¾’
(
fmt
)+1;

3178 
¬gv
 = 
	`z»®loc
×rgv,(
robj
*)*
¬gv_size
);

3181 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
(
cmdÇme
,
	`¡¾’
(cmdname));

3182 
¬gc
++;

3185 cÚ¡ *
p
 = 
fmt
;

3186 *
p
) {

3187 ià(*
p
 == 'c') {

3188 *
c¡r
 = 
	`va_¬g
(
­
,*);

3189 
¬gv
[
¬gc
++] = 
	`ü—‹SŒšgObjeù
(
c¡r
,
	`¡¾’
(cstr));

3190 } ià(*
p
 == 's') {

3191 
robj
 *
obj
 = 
	`va_¬g
(
­
,*);

3192 
¬gv
[
¬gc
++] = 
obj
;

3193 
	`šüRefCouÁ
(
obj
);

3194 } ià(*
p
 == 'b') {

3195 *
buf
 = 
	`va_¬g
(
­
,*);

3196 
size_t
 
Ën
 = 
	`va_¬g
(
­
,size_t);

3197 
¬gv
[
¬gc
++] = 
	`ü—‹SŒšgObjeù
(
buf
,
Ën
);

3198 } ià(*
p
 == 'l') {

3199 
Î
 = 
	`va_¬g
(
­
,);

3200 
¬gv
[
¬gc
++] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sdsäomlÚglÚg
(
Î
));

3201 } ià(*
p
 == 'v') {

3203 
robj
 **
v
 = 
	`va_¬g
(
­
, *);

3204 
size_t
 
vËn
 = 
	`va_¬g
(
­
, size_t);

3209 
¬gv_size
 +ğ
vËn
-1;

3210 
¬gv
 = 
	`z»®loc
×rgv,(
robj
*)*
¬gv_size
);

3212 
size_t
 
i
 = 0;

3213 
i
 = 0; i < 
vËn
; i++) {

3214 
	`šüRefCouÁ
(
v
[
i
]);

3215 
¬gv
[
¬gc
++] = 
v
[
i
];

3217 } ià(*
p
 == '!') {

3218 ià(
æags
è(*æagsè|ğ
REDISMODULE_ARGV_REPLICATE
;

3219 } ià(*
p
 == 'A') {

3220 ià(
æags
è(*æagsè|ğ
REDISMODULE_ARGV_NO_AOF
;

3221 } ià(*
p
 == 'R') {

3222 ià(
æags
è(*æagsè|ğ
REDISMODULE_ARGV_NO_REPLICAS
;

3224 
fm‹¼
;

3226 
p
++;

3228 *
¬gı
 = 
¬gc
;

3229  
¬gv
;

3231 
fm‹¼
:

3232 
j
 = 0; j < 
¬gc
; j++)

3233 
	`deüRefCouÁ
(
¬gv
[
j
]);

3234 
	`zä“
(
¬gv
);

3235  
NULL
;

3236 
	}
}

3252 
RedisModuËC®lR•ly
 *
	$RM_C®l
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...) {

3253 
»disCommªd
 *
cmd
;

3254 
ş›Á
 *
c
 = 
NULL
;

3255 
robj
 **
¬gv
 = 
NULL
;

3256 
¬gc
 = 0, 
æags
 = 0;

3257 
va_li¡
 
­
;

3258 
RedisModuËC®lR•ly
 *
»¶y
 = 
NULL
;

3259 
»¶iÿ‹
 = 0;

3262 
	`va_¡¬t
(
­
, 
fmt
);

3263 
c
 = 
	`ü—‹Cl›Á
(
NULL
);

3264 
c
->
u£r
 = 
NULL
;

3265 
¬gv
 = 
	`moduËC»©eArgvFromU£rFÜm©
(
cmdÇme
,
fmt
,&
¬gc
,&
æags
,
­
);

3266 
»¶iÿ‹
 = 
æags
 & 
REDISMODULE_ARGV_REPLICATE
;

3267 
	`va_’d
(
­
);

3270 
c
->
æags
 |ğ
CLIENT_MODULE
;

3271 
c
->
db
 = 
ùx
->
ş›Á
->db;

3272 
c
->
¬gv
 =‡rgv;

3273 
c
->
¬gc
 =‡rgc;

3274 ià(
ùx
->
moduË
èùx->moduË->
š_ÿÎ
++;

3278 ià(
¬gv
 =ğ
NULL
) {

3279 
”ºo
 = 
EBADF
;

3280 
ş—nup
;

3284 
	`moduËC®lCommªdF‹rs
(
c
);

3289 
cmd
 = 
	`lookupCommªd
(
c
->
¬gv
[0]->
±r
);

3290 ià(!
cmd
) {

3291 
”ºo
 = 
ENOENT
;

3292 
ş—nup
;

3294 
c
->
cmd
 = c->
Ï¡cmd
 = cmd;

3297 ià((
cmd
->
¬™y
 > 0 && cmd->¬™y !ğ
¬gc
) || (argc < -cmd->arity)) {

3298 
”ºo
 = 
EINVAL
;

3299 
ş—nup
;

3305 ià(
£rv”
.
şu¡”_’abËd
 && !(
ùx
->
ş›Á
->
æags
 & 
CLIENT_MASTER
)) {

3306 
”rÜ_code
;

3308 
c
->
æags
 &ğ~(
CLIENT_READONLY
|
CLIENT_ASKING
);

3309 
c
->
æags
 |ğ
ùx
->
ş›Á
->æag & (
CLIENT_READONLY
|
CLIENT_ASKING
);

3310 ià(
	`g‘NodeByQu”y
(
c
,c->
cmd
,c->
¬gv
,c->
¬gc
,
NULL
,&
”rÜ_code
) !=

3311 
£rv”
.
şu¡”
->
my£lf
)

3313 ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_RO_STATE
) {

3314 
”ºo
 = 
EROFS
;

3315 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_STATE
) {

3316 
”ºo
 = 
ENETDOWN
;

3318 
”ºo
 = 
EPERM
;

3320 
ş—nup
;

3327 ià(
»¶iÿ‹
è
	`moduËR•liÿ‹MuÉiIfN“ded
(
ùx
);

3330 
ÿÎ_æags
 = 
CMD_CALL_SLOWLOG
 | 
CMD_CALL_STATS
 | 
CMD_CALL_NOWRAP
;

3331 ià(
»¶iÿ‹
) {

3332 ià(!(
æags
 & 
REDISMODULE_ARGV_NO_AOF
))

3333 
ÿÎ_æags
 |ğ
CMD_CALL_PROPAGATE_AOF
;

3334 ià(!(
æags
 & 
REDISMODULE_ARGV_NO_REPLICAS
))

3335 
ÿÎ_æags
 |ğ
CMD_CALL_PROPAGATE_REPL
;

3337 
	`ÿÎ
(
c
,
ÿÎ_æags
);

3340 
sds
 
´Ùo
 = 
	`sd¢ewËn
(
c
->
buf
,c->
buåos
);

3341 
c
->
buåos
 = 0;

3342 
	`li¡L’gth
(
c
->
»¶y
)) {

3343 
ş›ÁR•lyBlock
 *
o
 = 
	`li¡NodeV®ue
(
	`li¡Fœ¡
(
c
->
»¶y
));

3345 
´Ùo
 = 
	`sdsÿ’
ÕrÙo,
o
->
buf
,o->
u£d
);

3346 
	`li¡D–Node
(
c
->
»¶y
,
	`li¡Fœ¡
(c->reply));

3348 
»¶y
 = 
	`moduËC»©eC®lR•lyFromPrÙo
(
ùx
,
´Ùo
);

3349 
	`autoMemÜyAdd
(
ùx
,
REDISMODULE_AM_REPLY
,
»¶y
);

3351 
ş—nup
:

3352 ià(
ùx
->
moduË
èùx->moduË->
š_ÿÎ
--;

3353 
	`ä“Cl›Á
(
c
);

3354  
»¶y
;

3355 
	}
}

3359 cÚ¡ *
	$RM_C®lR•lyPrÙo
(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 *
Ën
) {

3360 ià(
»¶y
->
´Ùo
è*
Ën
 = 
	`sd¦’
(reply->proto);

3361  
»¶y
->
´Ùo
;

3362 
	}
}

3397 cÚ¡ *
	gModuËTy³NameCh¬S‘
 =

3402 
ušt64_t
 
	$moduËTy³EncodeId
(cÚ¡ *
Çme
, 
’cv”
) {

3405 cÚ¡ *
c£t
 = 
ModuËTy³NameCh¬S‘
;

3406 ià(
	`¡¾’
(
Çme
) != 9)  0;

3407 ià(
’cv”
 < 0 ||ƒncver > 1023)  0;

3409 
ušt64_t
 
id
 = 0;

3410 
j
 = 0; j < 9; j++) {

3411 *
p
 = 
	`¡rchr
(
c£t
,
Çme
[
j
]);

3412 ià(!
p
)  0;

3413 
pos
 = 
p
-
c£t
;

3414 
id
 = (id << 6è| 
pos
;

3416 
id
 = (id << 10è| 
’cv”
;

3417  
id
;

3418 
	}
}

3423 
moduËTy³
 *
	$moduËTy³LookupModuËByName
(cÚ¡ *
Çme
) {

3424 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

3425 
diùEÁry
 *
de
;

3427 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3428 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

3429 
li¡I‹r
 
li
;

3430 
li¡Node
 *
Ê
;

3432 
	`li¡Rewšd
(
moduË
->
ty³s
,&
li
);

3433 (
Ê
 = 
	`li¡Next
(&
li
))) {

3434 
moduËTy³
 *
mt
 = 
Ê
->
v®ue
;

3435 ià(
	`memcmp
(
Çme
,
mt
->name,(mt->name)) == 0) {

3436 
	`diùR–—£I‹¿tÜ
(
di
);

3437  
mt
;

3441 
	`diùR–—£I‹¿tÜ
(
di
);

3442  
NULL
;

3443 
	}
}

3448 
	#MODULE_LOOKUP_CACHE_SIZE
 3

	)

3450 
moduËTy³
 *
	$moduËTy³LookupModuËByID
(
ušt64_t
 
id
) {

3452 
ušt64_t
 
id
;

3453 
moduËTy³
 *
mt
;

3454 } 
ÿche
[
MODULE_LOOKUP_CACHE_SIZE
];

3457 
j
;

3458 
j
 = 0; j < 
MODULE_LOOKUP_CACHE_SIZE
 && 
ÿche
[j].
mt
 !ğ
NULL
; j++)

3459 ià(
ÿche
[
j
].
id
 =ğidè cache[j].
mt
;

3462 
moduËTy³
 *
mt
 = 
NULL
;

3463 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

3464 
diùEÁry
 *
de
;

3466 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
 && 
mt
 == NULL) {

3467 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

3468 
li¡I‹r
 
li
;

3469 
li¡Node
 *
Ê
;

3471 
	`li¡Rewšd
(
moduË
->
ty³s
,&
li
);

3472 (
Ê
 = 
	`li¡Next
(&
li
))) {

3473 
moduËTy³
 *
this_mt
 = 
Ê
->
v®ue
;

3476 ià(
this_mt
->
id
 >> 10 == id >> 10) {

3477 
mt
 = 
this_mt
;

3482 
	`diùR–—£I‹¿tÜ
(
di
);

3485 ià(
mt
 && 
j
 < 
MODULE_LOOKUP_CACHE_SIZE
) {

3486 
ÿche
[
j
].
id
 = id;

3487 
ÿche
[
j
].
mt
 = mt;

3489  
mt
;

3490 
	}
}

3496 
	$moduËTy³NameByID
(*
Çme
, 
ušt64_t
 
moduËid
) {

3497 cÚ¡ *
c£t
 = 
ModuËTy³NameCh¬S‘
;

3499 
Çme
[9] = '\0';

3500 *
p
 = 
Çme
+8;

3501 
moduËid
 >>= 10;

3502 
j
 = 0; j < 9; j++) {

3503 *
p
-- = 
c£t
[
moduËid
 & 63];

3504 
moduËid
 >>= 6;

3506 
	}
}

3578 
moduËTy³
 *
	$RM_C»©eD©aTy³
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
’cv”
, *
ty³m‘hods_±r
) {

3579 
ušt64_t
 
id
 = 
	`moduËTy³EncodeId
(
Çme
,
’cv”
);

3580 ià(
id
 =ğ0è 
NULL
;

3581 ià(
	`moduËTy³LookupModuËByName
(
Çme
è!ğ
NULL
)  NULL;

3583 
ty³m‘hods_v”siÚ
 = ((*)
ty³m‘hods_±r
)[0];

3584 ià(
ty³m‘hods_v”siÚ
 =ğ0è 
NULL
;

3586 
	sty³m‘hods
 {

3587 
ušt64_t
 
v”siÚ
;

3588 
moduËTy³LßdFunc
 
rdb_lßd
;

3589 
moduËTy³SaveFunc
 
rdb_§ve
;

3590 
moduËTy³Rewr™eFunc
 
aof_»wr™e
;

3591 
moduËTy³MemU§geFunc
 
mem_u§ge
;

3592 
moduËTy³Dige¡Func
 
dige¡
;

3593 
moduËTy³F»eFunc
 
ä“
;

3595 
moduËTy³AuxLßdFunc
 
aux_lßd
;

3596 
moduËTy³AuxSaveFunc
 
aux_§ve
;

3597 
aux_§ve_Œigg”s
;

3598 } 
v2
;

3599 } *
tms
 = (
ty³m‘hods
*è
ty³m‘hods_±r
;

3601 
moduËTy³
 *
mt
 = 
	`zÿÎoc
((*mt));

3602 
mt
->
id
 = id;

3603 
mt
->
moduË
 = 
ùx
->module;

3604 
mt
->
rdb_lßd
 = 
tms
->rdb_load;

3605 
mt
->
rdb_§ve
 = 
tms
->rdb_save;

3606 
mt
->
aof_»wr™e
 = 
tms
->aof_rewrite;

3607 
mt
->
mem_u§ge
 = 
tms
->mem_usage;

3608 
mt
->
dige¡
 = 
tms
->digest;

3609 
mt
->
ä“
 = 
tms
->free;

3610 ià(
tms
->
v”siÚ
 >= 2) {

3611 
mt
->
aux_lßd
 = 
tms
->
v2
.aux_load;

3612 
mt
->
aux_§ve
 = 
tms
->
v2
.aux_save;

3613 
mt
->
aux_§ve_Œigg”s
 = 
tms
->
v2
.aux_save_triggers;

3615 
	`memıy
(
mt
->
Çme
,name,(mt->name));

3616 
	`li¡AddNodeTa
(
ùx
->
moduË
->
ty³s
,
mt
);

3617  
mt
;

3618 
	}
}

3624 
	$RM_ModuËTy³S‘V®ue
(
RedisModuËKey
 *
key
, 
moduËTy³
 *
mt
, *
v®ue
) {

3625 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
™”
è 
REDISMODULE_ERR
;

3626 
	`RM_D–‘eKey
(
key
);

3627 
robj
 *
o
 = 
	`ü—‹ModuËObjeù
(
mt
,
v®ue
);

3628 
	`g’”icS‘Key
(
key
->
ùx
->
ş›Á
,key->
db
,key->key,
o
,0,0);

3629 
	`deüRefCouÁ
(
o
);

3630 
key
->
v®ue
 = 
o
;

3631  
REDISMODULE_OK
;

3632 
	}
}

3639 
moduËTy³
 *
	$RM_ModuËTy³G‘Ty³
(
RedisModuËKey
 *
key
) {

3640 ià(
key
 =ğ
NULL
 ||

3641 
key
->
v®ue
 =ğ
NULL
 ||

3642 
	`RM_KeyTy³
(
key
è!ğ
REDISMODULE_KEYTYPE_MODULE
è 
NULL
;

3643 
moduËV®ue
 *
mv
 = 
key
->
v®ue
->
±r
;

3644  
mv
->
ty³
;

3645 
	}
}

3653 *
	$RM_ModuËTy³G‘V®ue
(
RedisModuËKey
 *
key
) {

3654 ià(
key
 =ğ
NULL
 ||

3655 
key
->
v®ue
 =ğ
NULL
 ||

3656 
	`RM_KeyTy³
(
key
è!ğ
REDISMODULE_KEYTYPE_MODULE
è 
NULL
;

3657 
moduËV®ue
 *
mv
 = 
key
->
v®ue
->
±r
;

3658  
mv
->
v®ue
;

3659 
	}
}

3668 
	$moduËRDBLßdE¼Ü
(
RedisModuËIO
 *
io
) {

3669 ià(
io
->
ty³
->
moduË
->
İtiÚs
 & 
REDISMODULE_OPTIONS_HANDLE_IO_ERRORS
) {

3670 
io
->
”rÜ
 = 1;

3673 
	`£rv”Pªic
(

3678 
io
->
ty³
->
moduË
->
Çme
,

3679 
io
->
ty³
->
Çme
,

3680 ()
io
->
by‹s
,

3681 
io
->
key
? (*)io->key->
±r
: "(null)");

3682 
	}
}

3687 
	$moduËAÎD©©y³sHªdËE¼Üs
() {

3688 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

3689 
diùEÁry
 *
de
;

3691 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3692 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

3693 ià(
	`li¡L’gth
(
moduË
->
ty³s
) &&

3694 !(
moduË
->
İtiÚs
 & 
REDISMODULE_OPTIONS_HANDLE_IO_ERRORS
))

3696 
	`diùR–—£I‹¿tÜ
(
di
);

3700 
	`diùR–—£I‹¿tÜ
(
di
);

3702 
	}
}

3707 
	$RM_IsIOE¼Ü
(
RedisModuËIO
 *
io
) {

3708  
io
->
”rÜ
;

3709 
	}
}

3714 
	$RM_SaveUnsigÃd
(
RedisModuËIO
 *
io
, 
ušt64_t
 
v®ue
) {

3715 ià(
io
->
”rÜ
) ;

3717 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
RDB_MODULE_OPCODE_UINT
);

3718 ià(
»tv®
 =ğ-1è
§v“¼
;

3719 
io
->
by‹s
 +ğ
»tv®
;

3721 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
v®ue
);

3722 ià(
»tv®
 =ğ-1è
§v“¼
;

3723 
io
->
by‹s
 +ğ
»tv®
;

3726 
§v“¼
:

3727 
io
->
”rÜ
 = 1;

3728 
	}
}

3733 
ušt64_t
 
	$RM_LßdUnsigÃd
(
RedisModuËIO
 *
io
) {

3734 ià(
io
->
”rÜ
)  0;

3735 ià(
io
->
v”
 == 2) {

3736 
ušt64_t
 
İcode
 = 
	`rdbLßdL’
(
io
->
rio
,
NULL
);

3737 ià(
İcode
 !ğ
RDB_MODULE_OPCODE_UINT
è
lßd”r
;

3739 
ušt64_t
 
v®ue
;

3740 
»tv®
 = 
	`rdbLßdL’ByRef
(
io
->
rio
, 
NULL
, &
v®ue
);

3741 ià(
»tv®
 =ğ-1è
lßd”r
;

3742  
v®ue
;

3744 
lßd”r
:

3745 
	`moduËRDBLßdE¼Ü
(
io
);

3747 
	}
}

3750 
	$RM_SaveSigÃd
(
RedisModuËIO
 *
io
, 
št64_t
 
v®ue
) {

3751 uniÚ {
ušt64_t
 
u
; 
št64_t
 
i
;} 
cÚv
;

3752 
cÚv
.
i
 = 
v®ue
;

3753 
	`RM_SaveUnsigÃd
(
io
,
cÚv
.
u
);

3754 
	}
}

3757 
št64_t
 
	$RM_LßdSigÃd
(
RedisModuËIO
 *
io
) {

3758 uniÚ {
ušt64_t
 
u
; 
št64_t
 
i
;} 
cÚv
;

3759 
cÚv
.
u
 = 
	`RM_LßdUnsigÃd
(
io
);

3760  
cÚv
.
i
;

3761 
	}
}

3769 
	$RM_SaveSŒšg
(
RedisModuËIO
 *
io
, 
RedisModuËSŒšg
 *
s
) {

3770 ià(
io
->
”rÜ
) ;

3772 
ssize_t
 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
RDB_MODULE_OPCODE_STRING
);

3773 ià(
»tv®
 =ğ-1è
§v“¼
;

3774 
io
->
by‹s
 +ğ
»tv®
;

3776 
»tv®
 = 
	`rdbSaveSŒšgObjeù
(
io
->
rio
, 
s
);

3777 ià(
»tv®
 =ğ-1è
§v“¼
;

3778 
io
->
by‹s
 +ğ
»tv®
;

3781 
§v“¼
:

3782 
io
->
”rÜ
 = 1;

3783 
	}
}

3787 
	$RM_SaveSŒšgBufãr
(
RedisModuËIO
 *
io
, cÚ¡ *
¡r
, 
size_t
 
Ën
) {

3788 ià(
io
->
”rÜ
) ;

3790 
ssize_t
 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
RDB_MODULE_OPCODE_STRING
);

3791 ià(
»tv®
 =ğ-1è
§v“¼
;

3792 
io
->
by‹s
 +ğ
»tv®
;

3794 
»tv®
 = 
	`rdbSaveRawSŒšg
(
io
->
rio
, (*)
¡r
,
Ën
);

3795 ià(
»tv®
 =ğ-1è
§v“¼
;

3796 
io
->
by‹s
 +ğ
»tv®
;

3799 
§v“¼
:

3800 
io
->
”rÜ
 = 1;

3801 
	}
}

3804 *
	$moduËLßdSŒšg
(
RedisModuËIO
 *
io
, 
¶aš
, 
size_t
 *
ËÅŒ
) {

3805 ià(
io
->
”rÜ
è 
NULL
;

3806 ià(
io
->
v”
 == 2) {

3807 
ušt64_t
 
İcode
 = 
	`rdbLßdL’
(
io
->
rio
,
NULL
);

3808 ià(
İcode
 !ğ
RDB_MODULE_OPCODE_STRING
è
lßd”r
;

3810 *
s
 = 
	`rdbG’”icLßdSŒšgObjeù
(
io
->
rio
,

3811 
¶aš
 ? 
RDB_LOAD_PLAIN
 : 
RDB_LOAD_NONE
, 
ËÅŒ
);

3812 ià(
s
 =ğ
NULL
è
lßd”r
;

3813  
s
;

3815 
lßd”r
:

3816 
	`moduËRDBLßdE¼Ü
(
io
);

3817  
NULL
;

3818 
	}
}

3829 
RedisModuËSŒšg
 *
	$RM_LßdSŒšg
(
RedisModuËIO
 *
io
) {

3830  
	`moduËLßdSŒšg
(
io
,0,
NULL
);

3831 
	}
}

3840 *
	$RM_LßdSŒšgBufãr
(
RedisModuËIO
 *
io
, 
size_t
 *
ËÅŒ
) {

3841  
	`moduËLßdSŒšg
(
io
,1,
ËÅŒ
);

3842 
	}
}

3847 
	$RM_SaveDoubË
(
RedisModuËIO
 *
io
, 
v®ue
) {

3848 ià(
io
->
”rÜ
) ;

3850 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
RDB_MODULE_OPCODE_DOUBLE
);

3851 ià(
»tv®
 =ğ-1è
§v“¼
;

3852 
io
->
by‹s
 +ğ
»tv®
;

3854 
»tv®
 = 
	`rdbSaveBš¬yDoubËV®ue
(
io
->
rio
, 
v®ue
);

3855 ià(
»tv®
 =ğ-1è
§v“¼
;

3856 
io
->
by‹s
 +ğ
»tv®
;

3859 
§v“¼
:

3860 
io
->
”rÜ
 = 1;

3861 
	}
}

3865 
	$RM_LßdDoubË
(
RedisModuËIO
 *
io
) {

3866 ià(
io
->
”rÜ
)  0;

3867 ià(
io
->
v”
 == 2) {

3868 
ušt64_t
 
İcode
 = 
	`rdbLßdL’
(
io
->
rio
,
NULL
);

3869 ià(
İcode
 !ğ
RDB_MODULE_OPCODE_DOUBLE
è
lßd”r
;

3871 
v®ue
;

3872 
»tv®
 = 
	`rdbLßdBš¬yDoubËV®ue
(
io
->
rio
, &
v®ue
);

3873 ià(
»tv®
 =ğ-1è
lßd”r
;

3874  
v®ue
;

3876 
lßd”r
:

3877 
	`moduËRDBLßdE¼Ü
(
io
);

3879 
	}
}

3884 
	$RM_SaveFlßt
(
RedisModuËIO
 *
io
, 
v®ue
) {

3885 ià(
io
->
”rÜ
) ;

3887 
»tv®
 = 
	`rdbSaveL’
(
io
->
rio
, 
RDB_MODULE_OPCODE_FLOAT
);

3888 ià(
»tv®
 =ğ-1è
§v“¼
;

3889 
io
->
by‹s
 +ğ
»tv®
;

3891 
»tv®
 = 
	`rdbSaveBš¬yFlßtV®ue
(
io
->
rio
, 
v®ue
);

3892 ià(
»tv®
 =ğ-1è
§v“¼
;

3893 
io
->
by‹s
 +ğ
»tv®
;

3896 
§v“¼
:

3897 
io
->
”rÜ
 = 1;

3898 
	}
}

3902 
	$RM_LßdFlßt
(
RedisModuËIO
 *
io
) {

3903 ià(
io
->
”rÜ
)  0;

3904 ià(
io
->
v”
 == 2) {

3905 
ušt64_t
 
İcode
 = 
	`rdbLßdL’
(
io
->
rio
,
NULL
);

3906 ià(
İcode
 !ğ
RDB_MODULE_OPCODE_FLOAT
è
lßd”r
;

3908 
v®ue
;

3909 
»tv®
 = 
	`rdbLßdBš¬yFlßtV®ue
(
io
->
rio
, &
v®ue
);

3910 ià(
»tv®
 =ğ-1è
lßd”r
;

3911  
v®ue
;

3913 
lßd”r
:

3914 
	`moduËRDBLßdE¼Ü
(
io
);

3916 
	}
}

3921 
	$RM_SaveLÚgDoubË
(
RedisModuËIO
 *
io
, 
v®ue
) {

3922 ià(
io
->
”rÜ
) ;

3923 
buf
[
MAX_LONG_DOUBLE_CHARS
];

3926 
size_t
 
Ën
 = 
	`ld2¡ršg
(
buf
,(buf),
v®ue
,
LD_STR_HEX
);

3927 
	`RM_SaveSŒšgBufãr
(
io
,
buf
,
Ën
);

3928 
	}
}

3932 
	$RM_LßdLÚgDoubË
(
RedisModuËIO
 *
io
) {

3933 ià(
io
->
”rÜ
)  0;

3934 
v®ue
;

3935 
size_t
 
Ën
;

3936 * 
¡r
 = 
	`RM_LßdSŒšgBufãr
(
io
,&
Ën
);

3937 ià(!
¡r
)  0;

3938 
	`¡ršg2ld
(
¡r
,
Ën
,&
v®ue
);

3939 
	`RM_F»e
(
¡r
);

3940  
v®ue
;

3941 
	}
}

3945 
ssize_t
 
	$rdbSaveModuËsAux
(
rio
 *
rdb
, 
wh’
) {

3946 
size_t
 
tÙ®_wr™‹n
 = 0;

3947 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

3948 
diùEÁry
 *
de
;

3950 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3951 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

3952 
li¡I‹r
 
li
;

3953 
li¡Node
 *
Ê
;

3955 
	`li¡Rewšd
(
moduË
->
ty³s
,&
li
);

3956 (
Ê
 = 
	`li¡Next
(&
li
))) {

3957 
moduËTy³
 *
mt
 = 
Ê
->
v®ue
;

3958 ià(!
mt
->
aux_§ve
 || !(mt->
aux_§ve_Œigg”s
 & 
wh’
))

3960 
ssize_t
 
»t
 = 
	`rdbSaveSšgËModuËAux
(
rdb
, 
wh’
, 
mt
);

3961 ià(
»t
==-1) {

3962 
	`diùR–—£I‹¿tÜ
(
di
);

3965 
tÙ®_wr™‹n
 +ğ
»t
;

3969 
	`diùR–—£I‹¿tÜ
(
di
);

3970  
tÙ®_wr™‹n
;

3971 
	}
}

4015 
	$RM_Dige¡AddSŒšgBufãr
(
RedisModuËDige¡
 *
md
, *
–e
, 
size_t
 
Ën
) {

4016 
	`mixDige¡
(
md
->
o
,
–e
,
Ën
);

4017 
	}
}

4021 
	$RM_Dige¡AddLÚgLÚg
(
RedisModuËDige¡
 *
md
, 
Î
) {

4022 
buf
[
LONG_STR_SIZE
];

4023 
size_t
 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
Î
);

4024 
	`mixDige¡
(
md
->
o
,
buf
,
Ën
);

4025 
	}
}

4028 
	$RM_Dige¡EndSequ’û
(
RedisModuËDige¡
 *
md
) {

4029 
	`xÜDige¡
(
md
->
x
,md->
o
,(md->o));

4030 
	`mem£t
(
md
->
o
,0,(md->o));

4031 
	}
}

4048 *
	$RM_LßdD©aTy³FromSŒšg
(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, cÚ¡ 
moduËTy³
 *
mt
) {

4049 
rio
 
·ylßd
;

4050 
RedisModuËIO
 
io
;

4051 *
»t
;

4053 
	`rioIn™W™hBufãr
(&
·ylßd
, 
¡r
->
±r
);

4054 
	`moduËIn™IOCÚ‹xt
(
io
,(
moduËTy³
 *)
mt
,&
·ylßd
,
NULL
);

4059 
io
.
v”
 = 2;

4060 
»t
 = 
mt
->
	`rdb_lßd
(&
io
,0);

4061 ià(
io
.
ùx
) {

4062 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

4063 
	`zä“
(
io
.
ùx
);

4065  
»t
;

4066 
	}
}

4076 
RedisModuËSŒšg
 *
	$RM_SaveD©aTy³ToSŒšg
(
RedisModuËCtx
 *
ùx
, *
d©a
, cÚ¡ 
moduËTy³
 *
mt
) {

4077 
rio
 
·ylßd
;

4078 
RedisModuËIO
 
io
;

4080 
	`rioIn™W™hBufãr
(&
·ylßd
,
	`sd£m±y
());

4081 
	`moduËIn™IOCÚ‹xt
(
io
,(
moduËTy³
 *)
mt
,&
·ylßd
,
NULL
);

4082 
mt
->
	`rdb_§ve
(&
io
,
d©a
);

4083 ià(
io
.
ùx
) {

4084 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

4085 
	`zä“
(
io
.
ùx
);

4087 ià(
io
.
”rÜ
) {

4088  
NULL
;

4090 
robj
 *
¡r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
·ylßd
.
io
.
bufãr
.
±r
);

4091 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_STRING
,
¡r
);

4092  
¡r
;

4094 
	}
}

4105 
	$RM_Em™AOF
(
RedisModuËIO
 *
io
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...) {

4106 ià(
io
->
”rÜ
) ;

4107 
»disCommªd
 *
cmd
;

4108 
robj
 **
¬gv
 = 
NULL
;

4109 
¬gc
 = 0, 
æags
 = 0, 
j
;

4110 
va_li¡
 
­
;

4112 
cmd
 = 
	`lookupCommªdByCSŒšg
((*)
cmdÇme
);

4113 ià(!
cmd
) {

4114 
	`£rv”Log
(
LL_WARNING
,

4117 
io
->
ty³
->
Çme
, 
cmdÇme
);

4118 
io
->
”rÜ
 = 1;

4119 
”ºo
 = 
EINVAL
;

4124 
	`va_¡¬t
(
­
, 
fmt
);

4125 
¬gv
 = 
	`moduËC»©eArgvFromU£rFÜm©
(
cmdÇme
,
fmt
,&
¬gc
,&
æags
,
­
);

4126 
	`va_’d
(
­
);

4127 ià(
¬gv
 =ğ
NULL
) {

4128 
	`£rv”Log
(
LL_WARNING
,

4131 
io
->
ty³
->
Çme
, 
fmt
);

4132 
io
->
”rÜ
 = 1;

4133 
”ºo
 = 
EINVAL
;

4138 ià(!
io
->
”rÜ
 && 
	`rioWr™eBulkCouÁ
(io->
rio
,'*',
¬gc
) == 0)

4139 
io
->
”rÜ
 = 1;

4142 
j
 = 0; j < 
¬gc
; j++) {

4143 ià(!
io
->
”rÜ
 && 
	`rioWr™eBulkObjeù
(io->
rio
,
¬gv
[
j
]) == 0)

4144 
io
->
”rÜ
 = 1;

4145 
	`deüRefCouÁ
(
¬gv
[
j
]);

4147 
	`zä“
(
¬gv
);

4149 
	}
}

4155 
RedisModuËCtx
 *
	$RM_G‘CÚ‹xtFromIO
(
RedisModuËIO
 *
io
) {

4156 ià(
io
->
ùx
)  io->ctx;

4157 
RedisModuËCtx
 
ùx‹m¶©e
 = 
REDISMODULE_CTX_INIT
;

4158 
io
->
ùx
 = 
	`zm®loc
((
RedisModuËCtx
));

4159 *(
io
->
ùx
èğ
ùx‹m¶©e
;

4160 
io
->
ùx
->
moduË
 = io->
ty³
->module;

4161 
io
->
ùx
->
ş›Á
 = 
NULL
;

4162  
io
->
ùx
;

4163 
	}
}

4169 cÚ¡ 
RedisModuËSŒšg
 *
	$RM_G‘KeyNameFromIO
(
RedisModuËIO
 *
io
) {

4170  
io
->
key
;

4171 
	}
}

4174 cÚ¡ 
RedisModuËSŒšg
 *
	$RM_G‘KeyNameFromModuËKey
(
RedisModuËKey
 *
key
) {

4175  
key
 ? key->key : 
NULL
;

4176 
	}
}

4188 
	$RM_LogRaw
(
RedisModuË
 *
moduË
, cÚ¡ *
Ëv–¡r
, cÚ¡ *
fmt
, 
va_li¡
 
­
) {

4189 
msg
[
LOG_MAX_LEN
];

4190 
size_t
 
Çme_Ën
;

4191 
Ëv–
;

4193 ià(!
	`¡rÿ£cmp
(
Ëv–¡r
,"debug")è
Ëv–
 = 
LL_DEBUG
;

4194 ià(!
	`¡rÿ£cmp
(
Ëv–¡r
,"v”bo£")è
Ëv–
 = 
LL_VERBOSE
;

4195 ià(!
	`¡rÿ£cmp
(
Ëv–¡r
,"nÙiû")è
Ëv–
 = 
LL_NOTICE
;

4196 ià(!
	`¡rÿ£cmp
(
Ëv–¡r
,"w¬nšg")è
Ëv–
 = 
LL_WARNING
;

4197 
Ëv–
 = 
LL_VERBOSE
;

4199 ià(
Ëv–
 < 
£rv”
.
v”bos™y
) ;

4201 
Çme_Ën
 = 
	`¢´štf
(
msg
, (msg),"<%s> ", 
moduË
? moduË->
Çme
: "module");

4202 
	`v¢´štf
(
msg
 + 
Çme_Ën
, (msgè-‚ame_Ën, 
fmt
, 
­
);

4203 
	`£rv”LogRaw
(
Ëv–
,
msg
);

4204 
	}
}

4224 
	$RM_Log
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Ëv–¡r
, cÚ¡ *
fmt
, ...) {

4225 
va_li¡
 
­
;

4226 
	`va_¡¬t
(
­
, 
fmt
);

4227 
	`RM_LogRaw
(
ùx
? ctx->
moduË
: 
NULL
,
Ëv–¡r
,
fmt
,
­
);

4228 
	`va_’d
(
­
);

4229 
	}
}

4236 
	$RM_LogIOE¼Ü
(
RedisModuËIO
 *
io
, cÚ¡ *
Ëv–¡r
, cÚ¡ *
fmt
, ...) {

4237 
va_li¡
 
­
;

4238 
	`va_¡¬t
(
­
, 
fmt
);

4239 
	`RM_LogRaw
(
io
->
ty³
->
moduË
,
Ëv–¡r
,
fmt
,
­
);

4240 
	`va_’d
(
­
);

4241 
	}
}

4248 
	$RM__As£¹
(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
) {

4249 
	`_£rv”As£¹
(
e¡r
, 
fe
, 
lše
);

4250 
	}
}

4255 
	$RM_L©’cyAddSam¶e
(cÚ¡ *
ev’t
, 
m¡ime_t
 
Ï‹ncy
) {

4256 ià(
Ï‹ncy
 >ğ
£rv”
.
Ï‹ncy_mÚ™Ü_th»shŞd
)

4257 
	`Ï‹ncyAddSam¶e
(
ev’t
, 
Ï‹ncy
);

4258 
	}
}

4268 
	$moduËBlockedCl›ÁPeR—dabË
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

4269 
	`UNUSED
(
–
);

4270 
	`UNUSED
(
fd
);

4271 
	`UNUSED
(
mask
);

4272 
	`UNUSED
(
´ivd©a
);

4273 
	}
}

4287 
	$unblockCl›ÁFromModuË
(
ş›Á
 *
c
) {

4288 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4294 ià(
bc
->
discÚÃù_ÿÎback
) {

4295 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4296 
ùx
.
blocked_´ivd©a
 = 
bc
->
´ivd©a
;

4297 
ùx
.
moduË
 = 
bc
->module;

4298 
ùx
.
ş›Á
 = 
bc
->client;

4299 
bc
->
	`discÚÃù_ÿÎback
(&
ùx
,bc);

4300 
	`moduËF»eCÚ‹xt
(&
ùx
);

4318 ià(
bc
->
blocked_Ú_keys
 && !bc->
unblocked
)

4319 
	`moduËUnblockCl›Á
(
c
);

4321 
bc
->
ş›Á
 = 
NULL
;

4326 
	`»£tCl›Á
(
c
);

4327 
	}
}

4348 
RedisModuËBlockedCl›Á
 *
	$moduËBlockCl›Á
(
RedisModuËCtx
 *
ùx
, 
RedisModuËCmdFunc
 
»¶y_ÿÎback
, RedisModuËCmdFunø
timeout_ÿÎback
, (*
ä“_´ivd©a
)(RedisModuËCtx*,*), 
timeout_ms
, 
RedisModuËSŒšg
 **
keys
, 
numkeys
, *
´ivd©a
) {

4349 
ş›Á
 *
c
 = 
ùx
->client;

4350 
i¦ua
 = 
c
->
æags
 & 
CLIENT_LUA
;

4351 
ismuÉi
 = 
c
->
æags
 & 
CLIENT_MULTI
;

4353 
c
->
bpİ
.
moduË_blocked_hªdË
 = 
	`zm®loc
((
RedisModuËBlockedCl›Á
));

4354 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4355 
ùx
->
moduË
->
blocked_ş›Ás
++;

4361 
m¡ime_t
 
timeout
 = 
timeout_ms
 ? (
	`m¡ime
()+timeout_ms) : 0;

4362 
bc
->
ş›Á
 = (
i¦ua
 || 
ismuÉi
è? 
NULL
 : 
c
;

4363 
bc
->
moduË
 = 
ùx
->module;

4364 
bc
->
»¶y_ÿÎback
 =„eply_callback;

4365 
bc
->
timeout_ÿÎback
 =imeout_callback;

4366 
bc
->
discÚÃù_ÿÎback
 = 
NULL
;

4367 
bc
->
ä“_´ivd©a
 = free_privdata;

4368 
bc
->
´ivd©a
 =…rivdata;

4369 
bc
->
»¶y_ş›Á
 = 
	`ü—‹Cl›Á
(
NULL
);

4370 
bc
->
»¶y_ş›Á
->
æags
 |ğ
CLIENT_MODULE
;

4371 
bc
->
dbid
 = 
c
->
db
->
id
;

4372 
bc
->
blocked_Ú_keys
 = 
keys
 !ğ
NULL
;

4373 
bc
->
unblocked
 = 0;

4374 
c
->
bpİ
.
timeout
 =imeout;

4376 ià(
i¦ua
 || 
ismuÉi
) {

4377 
c
->
bpİ
.
moduË_blocked_hªdË
 = 
NULL
;

4378 
	`addR•lyE¼Ü
(
c
, 
i¦ua
 ?

4382 ià(
keys
) {

4383 
	`blockFÜKeys
(
c
,
BLOCKED_MODULE
,
keys
,
numkeys
,
timeout
,
NULL
,NULL);

4385 
	`blockCl›Á
(
c
,
BLOCKED_MODULE
);

4388  
bc
;

4389 
	}
}

4398 
	$moduËTryS”veCl›ÁBlockedOnKey
(
ş›Á
 *
c
, 
robj
 *
key
) {

4399 
£rved
 = 0;

4400 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4405 ià(
bc
->
unblocked
)  0;

4407 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4408 
ùx
.
æags
 |ğ
REDISMODULE_CTX_BLOCKED_REPLY
;

4409 
ùx
.
blocked_»ady_key
 = 
key
;

4410 
ùx
.
blocked_´ivd©a
 = 
bc
->
´ivd©a
;

4411 
ùx
.
moduË
 = 
bc
->module;

4412 
ùx
.
ş›Á
 = 
bc
->client;

4413 
ùx
.
blocked_ş›Á
 = 
bc
;

4414 ià(
bc
->
	`»¶y_ÿÎback
(&
ùx
,(**)
c
->
¬gv
,c->
¬gc
è=ğ
REDISMODULE_OK
)

4415 
£rved
 = 1;

4416 
	`moduËF»eCÚ‹xt
(&
ùx
);

4417  
£rved
;

4418 
	}
}

4440 
RedisModuËBlockedCl›Á
 *
	$RM_BlockCl›Á
(
RedisModuËCtx
 *
ùx
, 
RedisModuËCmdFunc
 
»¶y_ÿÎback
, RedisModuËCmdFunø
timeout_ÿÎback
, (*
ä“_´ivd©a
)(RedisModuËCtx*,*), 
timeout_ms
) {

4441  
	`moduËBlockCl›Á
(
ùx
,
»¶y_ÿÎback
,
timeout_ÿÎback
,
ä“_´ivd©a
,
timeout_ms
, 
NULL
,0,NULL);

4442 
	}
}

4502 
RedisModuËBlockedCl›Á
 *
	$RM_BlockCl›ÁOnKeys
(
RedisModuËCtx
 *
ùx
, 
RedisModuËCmdFunc
 
»¶y_ÿÎback
, RedisModuËCmdFunø
timeout_ÿÎback
, (*
ä“_´ivd©a
)(RedisModuËCtx*,*), 
timeout_ms
, 
RedisModuËSŒšg
 **
keys
, 
numkeys
, *
´ivd©a
) {

4503  
	`moduËBlockCl›Á
(
ùx
,
»¶y_ÿÎback
,
timeout_ÿÎback
,
ä“_´ivd©a
,
timeout_ms
, 
keys
,
numkeys
,
´ivd©a
);

4504 
	}
}

4510 
	$RM_SigÇlKeyAsR—dy
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
key
) {

4511 
	`sigÇlKeyAsR—dy
(
ùx
->
ş›Á
->
db
, 
key
);

4512 
	}
}

4515 
	$moduËUnblockCl›ÁByHªdË
(
RedisModuËBlockedCl›Á
 *
bc
, *
´ivd©a
) {

4516 
	`±h»ad_mu‹x_lock
(&
moduËUnblockedCl›ÁsMu‹x
);

4517 ià(!
bc
->
blocked_Ú_keys
èbc->
´ivd©a
 =…rivdata;

4518 
bc
->
unblocked
 = 1;

4519 
	`li¡AddNodeTa
(
moduËUnblockedCl›Ás
,
bc
);

4520 ià(
	`wr™e
(
£rv”
.
moduË_blocked_pe
[1],"A",1) != 1) {

4523 
	`±h»ad_mu‹x_uÆock
(&
moduËUnblockedCl›ÁsMu‹x
);

4524  
REDISMODULE_OK
;

4525 
	}
}

4529 
	$moduËUnblockCl›Á
(
ş›Á
 *
c
) {

4530 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4531 
	`moduËUnblockCl›ÁByHªdË
(
bc
,
NULL
);

4532 
	}
}

4536 
	$moduËCl›ÁIsBlockedOnKeys
(
ş›Á
 *
c
) {

4537 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4538  
bc
->
blocked_Ú_keys
;

4539 
	}
}

4561 
	$RM_UnblockCl›Á
(
RedisModuËBlockedCl›Á
 *
bc
, *
´ivd©a
) {

4562 ià(
bc
->
blocked_Ú_keys
) {

4565 ià(
bc
->
timeout_ÿÎback
 =ğ
NULL
è 
REDISMODULE_ERR
;

4566 ià(
bc
->
unblocked
è 
REDISMODULE_OK
;

4567 ià(
bc
->
ş›Á
è
	`moduËBlockedCl›ÁTimedOut
(bc->client);

4569 
	`moduËUnblockCl›ÁByHªdË
(
bc
,
´ivd©a
);

4570  
REDISMODULE_OK
;

4571 
	}
}

4575 
	$RM_AbÜtBlock
(
RedisModuËBlockedCl›Á
 *
bc
) {

4576 
bc
->
»¶y_ÿÎback
 = 
NULL
;

4577 
bc
->
discÚÃù_ÿÎback
 = 
NULL
;

4578  
	`RM_UnblockCl›Á
(
bc
,
NULL
);

4579 
	}
}

4597 
	$RM_S‘DiscÚÃùC®lback
(
RedisModuËBlockedCl›Á
 *
bc
, 
RedisModuËDiscÚÃùFunc
 
ÿÎback
) {

4598 
bc
->
discÚÃù_ÿÎback
 = 
ÿÎback
;

4599 
	}
}

4609 
	$moduËHªdËBlockedCl›Ás
() {

4610 
li¡Node
 *
Ê
;

4611 
RedisModuËBlockedCl›Á
 *
bc
;

4613 
	`±h»ad_mu‹x_lock
(&
moduËUnblockedCl›ÁsMu‹x
);

4616 
buf
[1];

4617 
	`»ad
(
£rv”
.
moduË_blocked_pe
[0],
buf
,1) == 1);

4618 
	`li¡L’gth
(
moduËUnblockedCl›Ás
)) {

4619 
Ê
 = 
	`li¡Fœ¡
(
moduËUnblockedCl›Ás
);

4620 
bc
 = 
Ê
->
v®ue
;

4621 
ş›Á
 *
c
 = 
bc
->client;

4622 
	`li¡D–Node
(
moduËUnblockedCl›Ás
,
Ê
);

4623 
	`±h»ad_mu‹x_uÆock
(&
moduËUnblockedCl›ÁsMu‹x
);

4633 ià(
c
 && !
bc
->
blocked_Ú_keys
 && bc->
»¶y_ÿÎback
) {

4634 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4635 
ùx
.
æags
 |ğ
REDISMODULE_CTX_BLOCKED_REPLY
;

4636 
ùx
.
blocked_´ivd©a
 = 
bc
->
´ivd©a
;

4637 
ùx
.
blocked_»ady_key
 = 
NULL
;

4638 
ùx
.
moduË
 = 
bc
->module;

4639 
ùx
.
ş›Á
 = 
bc
->client;

4640 
ùx
.
blocked_ş›Á
 = 
bc
;

4641 
bc
->
	`»¶y_ÿÎback
(&
ùx
,(**)
c
->
¬gv
,c->
¬gc
);

4642 
	`moduËF»eCÚ‹xt
(&
ùx
);

4646 ià(
bc
->
´ivd©a
 && bc->
ä“_´ivd©a
) {

4647 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4648 ià(
c
 =ğ
NULL
)

4649 
ùx
.
æags
 |ğ
REDISMODULE_CTX_BLOCKED_DISCONNECTED
;

4650 
ùx
.
blocked_´ivd©a
 = 
bc
->
´ivd©a
;

4651 
ùx
.
moduË
 = 
bc
->module;

4652 
ùx
.
ş›Á
 = 
bc
->client;

4653 
bc
->
	`ä“_´ivd©a
(&
ùx
,bc->
´ivd©a
);

4654 
	`moduËF»eCÚ‹xt
(&
ùx
);

4661 ià(
c
è
	`AddR•lyFromCl›Á
(c, 
bc
->
»¶y_ş›Á
);

4662 
	`ä“Cl›Á
(
bc
->
»¶y_ş›Á
);

4664 ià(
c
 !ğ
NULL
) {

4668 
bc
->
discÚÃù_ÿÎback
 = 
NULL
;

4669 
	`unblockCl›Á
(
c
);

4673 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
) &&

4674 !(
c
->
æags
 & 
CLIENT_PENDING_WRITE
))

4676 
c
->
æags
 |ğ
CLIENT_PENDING_WRITE
;

4677 
	`li¡AddNodeH—d
(
£rv”
.
ş›Ás_³ndšg_wr™e
,
c
);

4684 
bc
->
moduË
->
blocked_ş›Ás
--;

4685 
	`zä“
(
bc
);

4688 
	`±h»ad_mu‹x_lock
(&
moduËUnblockedCl›ÁsMu‹x
);

4690 
	`±h»ad_mu‹x_uÆock
(&
moduËUnblockedCl›ÁsMu‹x
);

4691 
	}
}

4697 
	$moduËBlockedCl›ÁTimedOut
(
ş›Á
 *
c
) {

4698 
RedisModuËBlockedCl›Á
 *
bc
 = 
c
->
bpİ
.
moduË_blocked_hªdË
;

4699 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4700 
ùx
.
æags
 |ğ
REDISMODULE_CTX_BLOCKED_TIMEOUT
;

4701 
ùx
.
moduË
 = 
bc
->module;

4702 
ùx
.
ş›Á
 = 
bc
->client;

4703 
ùx
.
blocked_ş›Á
 = 
bc
;

4704 
bc
->
	`timeout_ÿÎback
(&
ùx
,(**)
c
->
¬gv
,c->
¬gc
);

4705 
	`moduËF»eCÚ‹xt
(&
ùx
);

4709 
bc
->
discÚÃù_ÿÎback
 = 
NULL
;

4710 
	}
}

4714 
	$RM_IsBlockedR•lyReque¡
(
RedisModuËCtx
 *
ùx
) {

4715  (
ùx
->
æags
 & 
REDISMODULE_CTX_BLOCKED_REPLY
) != 0;

4716 
	}
}

4720 
	$RM_IsBlockedTimeoutReque¡
(
RedisModuËCtx
 *
ùx
) {

4721  (
ùx
->
æags
 & 
REDISMODULE_CTX_BLOCKED_TIMEOUT
) != 0;

4722 
	}
}

4725 *
	$RM_G‘BlockedCl›ÁPriv©eD©a
(
RedisModuËCtx
 *
ùx
) {

4726  
ùx
->
blocked_´ivd©a
;

4727 
	}
}

4731 
RedisModuËSŒšg
 *
	$RM_G‘BlockedCl›ÁR—dyKey
(
RedisModuËCtx
 *
ùx
) {

4732  
ùx
->
blocked_»ady_key
;

4733 
	}
}

4739 
RedisModuËBlockedCl›Á
 *
	$RM_G‘BlockedCl›ÁHªdË
(
RedisModuËCtx
 *
ùx
) {

4740  
ùx
->
blocked_ş›Á
;

4741 
	}
}

4746 
	$RM_BlockedCl›ÁDiscÚÃùed
(
RedisModuËCtx
 *
ùx
) {

4747  (
ùx
->
æags
 & 
REDISMODULE_CTX_BLOCKED_DISCONNECTED
) != 0;

4748 
	}
}

4773 
RedisModuËCtx
 *
	$RM_G‘Th»adSaãCÚ‹xt
(
RedisModuËBlockedCl›Á
 *
bc
) {

4774 
RedisModuËCtx
 *
ùx
 = 
	`zm®loc
((*ctx));

4775 
RedisModuËCtx
 
em±y
 = 
REDISMODULE_CTX_INIT
;

4776 
	`memıy
(
ùx
,&
em±y
,(empty));

4777 ià(
bc
) {

4778 
ùx
->
blocked_ş›Á
 = 
bc
;

4779 
ùx
->
moduË
 = 
bc
->module;

4781 
ùx
->
æags
 |ğ
REDISMODULE_CTX_THREAD_SAFE
;

4786 
ùx
->
ş›Á
 = 
	`ü—‹Cl›Á
(
NULL
);

4787 ià(
bc
) {

4788 
	`£ËùDb
(
ùx
->
ş›Á
,
bc
->
dbid
);

4789 ià(
bc
->
ş›Á
è
ùx
->ş›Á->
id
 = bc->client->id;

4791  
ùx
;

4792 
	}
}

4795 
	$RM_F»eTh»adSaãCÚ‹xt
(
RedisModuËCtx
 *
ùx
) {

4796 
	`moduËF»eCÚ‹xt
(
ùx
);

4797 
	`zä“
(
ùx
);

4798 
	}
}

4803 
	$RM_Th»adSaãCÚ‹xtLock
(
RedisModuËCtx
 *
ùx
) {

4804 
	`UNUSED
(
ùx
);

4805 
	`moduËAcquœeGIL
();

4806 
	}
}

4809 
	$RM_Th»adSaãCÚ‹xtUÆock
(
RedisModuËCtx
 *
ùx
) {

4810 
	`UNUSED
(
ùx
);

4811 
	`moduËR–—£GIL
();

4812 
	}
}

4814 
	$moduËAcquœeGIL
() {

4815 
	`±h»ad_mu‹x_lock
(&
moduËGIL
);

4816 
	}
}

4818 
	$moduËR–—£GIL
() {

4819 
	`±h»ad_mu‹x_uÆock
(&
moduËGIL
);

4820 
	}
}

4877 
	$RM_SubsüibeToKey¥aûEv’ts
(
RedisModuËCtx
 *
ùx
, 
ty³s
, 
RedisModuËNÙifiÿtiÚFunc
 
ÿÎback
) {

4878 
RedisModuËKey¥aûSubsüib”
 *
sub
 = 
	`zm®loc
((*sub));

4879 
sub
->
moduË
 = 
ùx
->module;

4880 
sub
->
ev’t_mask
 = 
ty³s
;

4881 
sub
->
nÙify_ÿÎback
 = 
ÿÎback
;

4882 
sub
->
aùive
 = 0;

4884 
	`li¡AddNodeTa
(
moduËKey¥aûSubsüib”s
, 
sub
);

4885  
REDISMODULE_OK
;

4886 
	}
}

4890 
	$RM_G‘NÙifyKey¥aûEv’ts
() {

4891  
£rv”
.
nÙify_key¥aû_ev’ts
;

4892 
	}
}

4895 
	$RM_NÙifyKey¥aûEv’t
(
RedisModuËCtx
 *
ùx
, 
ty³
, cÚ¡ *
ev’t
, 
RedisModuËSŒšg
 *
key
) {

4896 ià(!
ùx
 || !ùx->
ş›Á
)

4897  
REDISMODULE_ERR
;

4898 
	`nÙifyKey¥aûEv’t
(
ty³
, (*)
ev’t
, 
key
, 
ùx
->
ş›Á
->
db
->
id
);

4899  
REDISMODULE_OK
;

4900 
	}
}

4905 
	$moduËNÙifyKey¥aûEv’t
(
ty³
, cÚ¡ *
ev’t
, 
robj
 *
key
, 
dbid
) {

4907 ià(
	`li¡L’gth
(
moduËKey¥aûSubsüib”s
) == 0) ;

4909 
li¡I‹r
 
li
;

4910 
li¡Node
 *
Ê
;

4911 
	`li¡Rewšd
(
moduËKey¥aûSubsüib”s
,&
li
);

4914 
ty³
 &ğ~(
NOTIFY_KEYEVENT
 | 
NOTIFY_KEYSPACE
);

4916 (
Ê
 = 
	`li¡Next
(&
li
))) {

4917 
RedisModuËKey¥aûSubsüib”
 *
sub
 = 
Ê
->
v®ue
;

4920 ià((
sub
->
ev’t_mask
 & 
ty³
è&& sub->
aùive
 == 0) {

4921 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4922 
ùx
.
moduË
 = 
sub
->module;

4923 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

4924 
	`£ËùDb
(
ùx
.
ş›Á
, 
dbid
);

4929 
sub
->
aùive
 = 1;

4930 
sub
->
	`nÙify_ÿÎback
(&
ùx
, 
ty³
, 
ev’t
, 
key
);

4931 
sub
->
aùive
 = 0;

4932 
	`moduËF»eCÚ‹xt
(&
ùx
);

4935 
	}
}

4938 
	$moduËUnsubsüibeNÙifiÿtiÚs
(
RedisModuË
 *
moduË
) {

4939 
li¡I‹r
 
li
;

4940 
li¡Node
 *
Ê
;

4941 
	`li¡Rewšd
(
moduËKey¥aûSubsüib”s
,&
li
);

4942 (
Ê
 = 
	`li¡Next
(&
li
))) {

4943 
RedisModuËKey¥aûSubsüib”
 *
sub
 = 
Ê
->
v®ue
;

4944 ià(
sub
->
moduË
 == module) {

4945 
	`li¡D–Node
(
moduËKey¥aûSubsüib”s
, 
Ê
);

4946 
	`zä“
(
sub
);

4949 
	}
}

4956 (*
	tRedisModuËClu¡”Mes§geReûiv”
)(
	tRedisModuËCtx
 *
	tùx
, cÚ¡ *
	t£nd”_id
, 
	tušt8_t
 
	tty³
, cÚ¡ *
	t·ylßd
, 
	tušt32_t
 
	tËn
);

4961 
	smoduËClu¡”Reûiv”
 {

4962 
ušt64_t
 
moduË_id
;

4963 
RedisModuËClu¡”Mes§geReûiv”
 
ÿÎback
;

4964 
RedisModuË
 *
moduË
;

4965 
moduËClu¡”Reûiv”
 *
Ãxt
;

4966 } 
	tmoduËClu¡”Reûiv”
;

4968 
	smoduËClu¡”NodeInfo
 {

4969 
æags
;

4970 

[
NET_IP_STR_LEN
];

4971 
pÜt
;

4972 
ma¡”_id
[40];

4973 } 
	tmdouËClu¡”NodeInfo
;

4977 
moduËClu¡”Reûiv”
 *
şu¡”Reûiv”s
[
UINT8_MAX
];

4980 
	$moduËC®lClu¡”Reûiv”s
(cÚ¡ *
£nd”_id
, 
ušt64_t
 
moduË_id
, 
ušt8_t
 
ty³
, cÚ¡ *
·ylßd
, 
ušt32_t
 
Ën
) {

4981 
moduËClu¡”Reûiv”
 *
r
 = 
şu¡”Reûiv”s
[
ty³
];

4982 
r
) {

4983 ià(
r
->
moduË_id
 == module_id) {

4984 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

4985 
ùx
.
moduË
 = 
r
->module;

4986 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

4987 
	`£ËùDb
(
ùx
.
ş›Á
, 0);

4988 
r
->
	`ÿÎback
(&
ùx
,
£nd”_id
,
ty³
,
·ylßd
,
Ën
);

4989 
	`moduËF»eCÚ‹xt
(&
ùx
);

4992 
r
 =„->
Ãxt
;

4994 
	}
}

5001 
	$RM_Regi¡”Clu¡”Mes§geReûiv”
(
RedisModuËCtx
 *
ùx
, 
ušt8_t
 
ty³
, 
RedisModuËClu¡”Mes§geReûiv”
 
ÿÎback
) {

5002 ià(!
£rv”
.
şu¡”_’abËd
) ;

5004 
ušt64_t
 
moduË_id
 = 
	`moduËTy³EncodeId
(
ùx
->
moduË
->
Çme
,0);

5005 
moduËClu¡”Reûiv”
 *
r
 = 
şu¡”Reûiv”s
[
ty³
], *
´ev
 = 
NULL
;

5006 
r
) {

5007 ià(
r
->
moduË_id
 == module_id) {

5009 ià(
ÿÎback
) {

5010 
r
->
ÿÎback
 = callback;

5015 ià(
´ev
)

5016 
´ev
->
Ãxt
 = 
r
->next;

5018 
şu¡”Reûiv”s
[
ty³
]->
Ãxt
 = 
r
->next;

5019 
	`zä“
(
r
);

5023 
´ev
 = 
r
;

5024 
r
 =„->
Ãxt
;

5028 ià(
ÿÎback
) {

5029 
r
 = 
	`zm®loc
((*r));

5030 
r
->
moduË_id
 = module_id;

5031 
r
->
moduË
 = 
ùx
->module;

5032 
r
->
ÿÎback
 = callback;

5033 
r
->
Ãxt
 = 
şu¡”Reûiv”s
[
ty³
];

5034 
şu¡”Reûiv”s
[
ty³
] = 
r
;

5036 
	}
}

5045 
	$RM_S’dClu¡”Mes§ge
(
RedisModuËCtx
 *
ùx
, *
rg‘_id
, 
ušt8_t
 
ty³
, *
msg
, 
ušt32_t
 
Ën
) {

5046 ià(!
£rv”
.
şu¡”_’abËd
è 
REDISMODULE_ERR
;

5047 
ušt64_t
 
moduË_id
 = 
	`moduËTy³EncodeId
(
ùx
->
moduË
->
Çme
,0);

5048 ià(
	`şu¡”S’dModuËMes§geToT¬g‘
(
rg‘_id
,
moduË_id
,
ty³
,
msg
,
Ën
è=ğ
C_OK
)

5049  
REDISMODULE_OK
;

5051  
REDISMODULE_ERR
;

5052 
	}
}

5076 **
	$RM_G‘Clu¡”NodesLi¡
(
RedisModuËCtx
 *
ùx
, 
size_t
 *
numnodes
) {

5077 
	`UNUSED
(
ùx
);

5079 ià(!
£rv”
.
şu¡”_’abËd
è 
NULL
;

5080 
size_t
 
couÁ
 = 
	`diùSize
(
£rv”
.
şu¡”
->
nodes
);

5081 **
ids
 = 
	`zm®loc
((
couÁ
+1)*
REDISMODULE_NODE_ID_LEN
);

5082 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
şu¡”
->
nodes
);

5083 
diùEÁry
 *
de
;

5084 
j
 = 0;

5085 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

5086 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
de
);

5087 ià(
node
->
æags
 & (
CLUSTER_NODE_NOADDR
|
CLUSTER_NODE_HANDSHAKE
)) ;

5088 
ids
[
j
] = 
	`zm®loc
(
REDISMODULE_NODE_ID_LEN
);

5089 
	`memıy
(
ids
[
j
],
node
->
Çme
,
REDISMODULE_NODE_ID_LEN
);

5090 
j
++;

5092 *
numnodes
 = 
j
;

5093 
ids
[
j
] = 
NULL
;

5095 
	`diùR–—£I‹¿tÜ
(
di
);

5096  
ids
;

5097 
	}
}

5100 
	$RM_F»eClu¡”NodesLi¡
(**
ids
) {

5101 ià(
ids
 =ğ
NULL
) ;

5102 
j
 = 0; 
ids
[j]; j++è
	`zä“
(ids[j]);

5103 
	`zä“
(
ids
);

5104 
	}
}

5108 cÚ¡ *
	$RM_G‘MyClu¡”ID
() {

5109 ià(!
£rv”
.
şu¡”_’abËd
è 
NULL
;

5110  
£rv”
.
şu¡”
->
my£lf
->
Çme
;

5111 
	}
}

5117 
size_t
 
	$RM_G‘Clu¡”Size
() {

5118 ià(!
£rv”
.
şu¡”_’abËd
)  0;

5119  
	`diùSize
(
£rv”
.
şu¡”
->
nodes
);

5120 
	}
}

5142 
şu¡”Node
 *
şu¡”LookupNode
(cÚ¡ *
Çme
);

5144 
	$RM_G‘Clu¡”NodeInfo
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
id
, *

, *
ma¡”_id
, *
pÜt
, *
æags
) {

5145 
	`UNUSED
(
ùx
);

5147 
şu¡”Node
 *
node
 = 
	`şu¡”LookupNode
(
id
);

5148 ià(
node
 =ğ
NULL
 ||

5149 
node
->
æags
 & (
CLUSTER_NODE_NOADDR
|
CLUSTER_NODE_HANDSHAKE
))

5151  
REDISMODULE_ERR
;

5154 ià(

è
	`¡ºıy
(,
node
->,
NET_IP_STR_LEN
);

5156 ià(
ma¡”_id
) {

5160 ià(
node
->
æags
 & 
CLUSTER_NODE_MASTER
 &&‚ode->
¦aveof
)

5161 
	`memıy
(
ma¡”_id
,
node
->
¦aveof
->
Çme
,
REDISMODULE_NODE_ID_LEN
);

5163 
	`mem£t
(
ma¡”_id
,0,
REDISMODULE_NODE_ID_LEN
);

5165 ià(
pÜt
è*pÜˆğ
node
->port;

5169 ià(
æags
) {

5170 *
æags
 = 0;

5171 ià(
node
->
æags
 & 
CLUSTER_NODE_MYSELF
è*æag |ğ
REDISMODULE_NODE_MYSELF
;

5172 ià(
node
->
æags
 & 
CLUSTER_NODE_MASTER
è*æag |ğ
REDISMODULE_NODE_MASTER
;

5173 ià(
node
->
æags
 & 
CLUSTER_NODE_SLAVE
è*æag |ğ
REDISMODULE_NODE_SLAVE
;

5174 ià(
node
->
æags
 & 
CLUSTER_NODE_PFAIL
è*æag |ğ
REDISMODULE_NODE_PFAIL
;

5175 ià(
node
->
æags
 & 
CLUSTER_NODE_FAIL
è*æag |ğ
REDISMODULE_NODE_FAIL
;

5176 ià(
node
->
æags
 & 
CLUSTER_NODE_NOFAILOVER
è*æag |ğ
REDISMODULE_NODE_NOFAILOVER
;

5178  
REDISMODULE_OK
;

5179 
	}
}

5199 
	$RM_S‘Clu¡”FÏgs
(
RedisModuËCtx
 *
ùx
, 
ušt64_t
 
æags
) {

5200 
	`UNUSED
(
ùx
);

5201 ià(
æags
 & 
REDISMODULE_CLUSTER_FLAG_NO_FAILOVER
)

5202 
£rv”
.
şu¡”_moduË_æags
 |ğ
CLUSTER_MODULE_FLAG_NO_FAILOVER
;

5203 ià(
æags
 & 
REDISMODULE_CLUSTER_FLAG_NO_REDIRECTION
)

5204 
£rv”
.
şu¡”_moduË_æags
 |ğ
CLUSTER_MODULE_FLAG_NO_REDIRECTION
;

5205 
	}
}

5226 
¿x
 *
	gTim”s
;

5227 
	g«Tim”
 = -1;

5229 (*
	tRedisModuËTim”Proc
)(
	tRedisModuËCtx
 *
	tùx
, *
	td©a
);

5232 
	sRedisModuËTim”
 {

5233 
RedisModuË
 *
moduË
;

5234 
RedisModuËTim”Proc
 
ÿÎback
;

5235 *
d©a
;

5236 
dbid
;

5237 } 
	tRedisModuËTim”
;

5241 
	$moduËTim”HªdËr
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
, *
ş›ÁD©a
) {

5242 
	`UNUSED
(
ev’tLoİ
);

5243 
	`UNUSED
(
id
);

5244 
	`UNUSED
(
ş›ÁD©a
);

5247 
¿xI‹¿tÜ
 
ri
;

5248 
	`¿xS¹
(&
ri
,
Tim”s
);

5249 
ušt64_t
 
now
 = 
	`u¡ime
();

5250 
Ãxt_³riod
 = 0;

5252 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

5253 ià(!
	`¿xNext
(&
ri
)) ;

5254 
ušt64_t
 
expœ‘ime
;

5255 
	`memıy
(&
expœ‘ime
,
ri
.
key
,(expiretime));

5256 
expœ‘ime
 = 
	`Áohu64
(expiretime);

5257 ià(
now
 >ğ
expœ‘ime
) {

5258 
RedisModuËTim”
 *
tim”
 = 
ri
.
d©a
;

5259 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

5261 
ùx
.
moduË
 = 
tim”
->module;

5262 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

5263 
	`£ËùDb
(
ùx
.
ş›Á
, 
tim”
->
dbid
);

5264 
tim”
->
	`ÿÎback
(&
ùx
,tim”->
d©a
);

5265 
	`moduËF»eCÚ‹xt
(&
ùx
);

5266 
	`¿xRemove
(
Tim”s
,(*)
ri
.
key
,ri.
key_Ën
,
NULL
);

5267 
	`zä“
(
tim”
);

5269 
Ãxt_³riod
 = (
expœ‘ime
-
now
)/1000;

5273 
	`¿xStİ
(&
ri
);

5276 ià(
Ãxt_³riod
 <= 0)‚ext_period = 1;

5277  (
	`¿xSize
(
Tim”s
è> 0è? 
Ãxt_³riod
 : 
AE_NOMORE
;

5278 
	}
}

5283 
RedisModuËTim”ID
 
	$RM_C»©eTim”
(
RedisModuËCtx
 *
ùx
, 
m¡ime_t
 
³riod
, 
RedisModuËTim”Proc
 
ÿÎback
, *
d©a
) {

5284 
RedisModuËTim”
 *
tim”
 = 
	`zm®loc
((*timer));

5285 
tim”
->
moduË
 = 
ùx
->module;

5286 
tim”
->
ÿÎback
 = callback;

5287 
tim”
->
d©a
 = data;

5288 
tim”
->
dbid
 = 
ùx
->
ş›Á
 ? ctx->ş›Á->
db
->
id
 : 0;

5289 
ušt64_t
 
expœ‘ime
 = 
	`u¡ime
()+
³riod
*1000;

5290 
ušt64_t
 
key
;

5293 
key
 = 
	`htÚu64
(
expœ‘ime
);

5294 ià(
	`¿xFšd
(
Tim”s
, (*)&
key
,(key)è=ğ
¿xNÙFound
) {

5295 
	`¿xIn£¹
(
Tim”s
,(*)&
key
,(key),
tim”
,
NULL
);

5298 
expœ‘ime
++;

5305 ià(
«Tim”
 != -1) {

5306 
¿xI‹¿tÜ
 
ri
;

5307 
	`¿xS¹
(&
ri
,
Tim”s
);

5308 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

5309 
	`¿xNext
(&
ri
);

5310 ià(
	`memcmp
(
ri
.
key
,&key,(key)) == 0) {

5313 
	`«D–‘eTimeEv’t
(
£rv”
.
–
,
«Tim”
);

5314 
«Tim”
 = -1;

5316 
	`¿xStİ
(&
ri
);

5321 ià(
«Tim”
 == -1)

5322 
«Tim”
 = 
	`«C»©eTimeEv’t
(
£rv”
.
–
,
³riod
,
moduËTim”HªdËr
,
NULL
,NULL);

5324  
key
;

5325 
	}
}

5331 
	$RM_StİTim”
(
RedisModuËCtx
 *
ùx
, 
RedisModuËTim”ID
 
id
, **
d©a
) {

5332 
RedisModuËTim”
 *
tim”
 = 
	`¿xFšd
(
Tim”s
,(*)&
id
,(id));

5333 ià(
tim”
 =ğ
¿xNÙFound
 ||im”->
moduË
 !ğ
ùx
->module)

5334  
REDISMODULE_ERR
;

5335 ià(
d©a
è*d©¨ğ
tim”
->data;

5336 
	`¿xRemove
(
Tim”s
,(*)&
id
,(id),
NULL
);

5337 
	`zä“
(
tim”
);

5338  
REDISMODULE_OK
;

5339 
	}
}

5347 
	$RM_G‘Tim”Info
(
RedisModuËCtx
 *
ùx
, 
RedisModuËTim”ID
 
id
, 
ušt64_t
 *
»maššg
, **
d©a
) {

5348 
RedisModuËTim”
 *
tim”
 = 
	`¿xFšd
(
Tim”s
,(*)&
id
,(id));

5349 ià(
tim”
 =ğ
¿xNÙFound
 ||im”->
moduË
 !ğ
ùx
->module)

5350  
REDISMODULE_ERR
;

5351 ià(
»maššg
) {

5352 
št64_t
 
»m
 = 
	`Áohu64
(
id
)-
	`u¡ime
();

5353 ià(
»m
 < 0)„em = 0;

5354 *
»maššg
 = 
»m
/1000;

5356 ià(
d©a
è*d©¨ğ
tim”
->data;

5357  
REDISMODULE_OK
;

5358 
	}
}

5372 
	$moduËNÙifyU£rChªged
(
ş›Á
 *
c
) {

5373 ià(
c
->
auth_ÿÎback
) {

5374 
c
->
	`auth_ÿÎback
(c->
id
, c->
auth_ÿÎback_´ivd©a
);

5379 
c
->
auth_ÿÎback
 = 
NULL
;

5380 
c
->
auth_ÿÎback_´ivd©a
 = 
NULL
;

5381 
c
->
auth_moduË
 = 
NULL
;

5383 
	}
}

5385 
	$»vokeCl›ÁAuth’tiÿtiÚ
(
ş›Á
 *
c
) {

5391 
	`moduËNÙifyU£rChªged
(
c
);

5393 
c
->
u£r
 = 
DeçuÉU£r
;

5394 
c
->
auth’tiÿ‹d
 = 0;

5395 
	`ä“Cl›ÁAsync
(
c
);

5396 
	}
}

5401 
	$moduËF»eAuth’tiÿ‹dCl›Ás
(
RedisModuË
 *
moduË
) {

5402 
li¡I‹r
 
li
;

5403 
li¡Node
 *
Ê
;

5404 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

5405 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5406 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

5407 ià(!
c
->
auth_moduË
) ;

5409 
RedisModuË
 *
auth_moduË
 = (RedisModuË *è
c
->auth_module;

5410 ià(
auth_moduË
 =ğ
moduË
) {

5411 
	`»vokeCl›ÁAuth’tiÿtiÚ
(
c
);

5414 
	}
}

5436 
RedisModuËU£r
 *
	$RM_C»©eModuËU£r
(cÚ¡ *
Çme
) {

5437 
RedisModuËU£r
 *
Ãw_u£r
 = 
	`zm®loc
((RedisModuleUser));

5438 
Ãw_u£r
->
u£r
 = 
	`ACLC»©eUÆškedU£r
();

5441 
	`sdsä“
(
Ãw_u£r
->
u£r
->
Çme
);

5442 
Ãw_u£r
->
u£r
->
Çme
 = 
	`sd¢ew
(name);

5443  
Ãw_u£r
;

5444 
	}
}

5448 
	$RM_F»eModuËU£r
(
RedisModuËU£r
 *
u£r
) {

5449 
	`ACLF»eU£rAndKlCl›Ás
(
u£r
->user);

5450 
	`zä“
(
u£r
);

5451  
REDISMODULE_OK
;

5452 
	}
}

5461 
	$RM_S‘ModuËU£rACL
(
RedisModuËU£r
 *
u£r
, cÚ¡ * 
aş
) {

5462  
	`ACLS‘U£r
(
u£r
->u£r, 
aş
, -1);

5463 
	}
}

5485 
	$auth’tiÿ‹Cl›ÁW™hU£r
(
RedisModuËCtx
 *
ùx
, 
u£r
 *u£r, 
RedisModuËU£rChªgedFunc
 
ÿÎback
, *
´ivd©a
, 
ušt64_t
 *
ş›Á_id
) {

5486 ià(
u£r
->
æags
 & 
USER_FLAG_DISABLED
) {

5487  
REDISMODULE_ERR
;

5490 
	`moduËNÙifyU£rChªged
(
ùx
->
ş›Á
);

5492 
ùx
->
ş›Á
->
u£r
 = user;

5493 
ùx
->
ş›Á
->
auth’tiÿ‹d
 = 1;

5495 ià(
ÿÎback
) {

5496 
ùx
->
ş›Á
->
auth_ÿÎback
 = 
ÿÎback
;

5497 
ùx
->
ş›Á
->
auth_ÿÎback_´ivd©a
 = 
´ivd©a
;

5498 
ùx
->
ş›Á
->
auth_moduË
 = ctx->
moduË
;

5501 ià(
ş›Á_id
) {

5502 *
ş›Á_id
 = 
ùx
->
ş›Á
->
id
;

5505  
REDISMODULE_OK
;

5506 
	}
}

5514 
	$RM_Auth’tiÿ‹Cl›ÁW™hU£r
(
RedisModuËCtx
 *
ùx
, 
RedisModuËU£r
 *
moduË_u£r
, 
RedisModuËU£rChªgedFunc
 
ÿÎback
, *
´ivd©a
, 
ušt64_t
 *
ş›Á_id
) {

5515  
	`auth’tiÿ‹Cl›ÁW™hU£r
(
ùx
, 
moduË_u£r
->
u£r
, 
ÿÎback
, 
´ivd©a
, 
ş›Á_id
);

5516 
	}
}

5523 
	$RM_Auth’tiÿ‹Cl›ÁW™hACLU£r
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
size_t
 
Ën
, 
RedisModuËU£rChªgedFunc
 
ÿÎback
, *
´ivd©a
, 
ušt64_t
 *
ş›Á_id
) {

5524 
u£r
 *
aş_u£r
 = 
	`ACLG‘U£rByName
(
Çme
, 
Ën
);

5526 ià(!
aş_u£r
) {

5527  
REDISMODULE_ERR
;

5529  
	`auth’tiÿ‹Cl›ÁW™hU£r
(
ùx
, 
aş_u£r
, 
ÿÎback
, 
´ivd©a
, 
ş›Á_id
);

5530 
	}
}

5544 
	$RM_D—uth’tiÿ‹AndClo£Cl›Á
(
RedisModuËCtx
 *
ùx
, 
ušt64_t
 
ş›Á_id
) {

5545 
	`UNUSED
(
ùx
);

5546 
ş›Á
 *
c
 = 
	`lookupCl›ÁByID
(
ş›Á_id
);

5547 ià(
c
 =ğ
NULL
è 
REDISMODULE_ERR
;

5550 
	`»vokeCl›ÁAuth’tiÿtiÚ
(
c
);

5551  
REDISMODULE_OK
;

5552 
	}
}

5575 
RedisModuËDiù
 *
	$RM_C»©eDiù
(
RedisModuËCtx
 *
ùx
) {

5576 
RedisModuËDiù
 *
d
 = 
	`zm®loc
((*d));

5577 
d
->
¿x
 = 
	`¿xNew
();

5578 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_DICT
,
d
);

5579  
d
;

5580 
	}
}

5585 
	$RM_F»eDiù
(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiù
 *
d
) {

5586 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyF»ed
(ùx,
REDISMODULE_AM_DICT
,
d
);

5587 
	`¿xF»e
(
d
->
¿x
);

5588 
	`zä“
(
d
);

5589 
	}
}

5592 
ušt64_t
 
	$RM_DiùSize
(
RedisModuËDiù
 *
d
) {

5593  
	`¿xSize
(
d
->
¿x
);

5594 
	}
}

5600 
	$RM_DiùS‘C
(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
±r
) {

5601 
»tv®
 = 
	`¿xTryIn£¹
(
d
->
¿x
,
key
,
keyËn
,
±r
,
NULL
);

5602  (
»tv®
 =ğ1è? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

5603 
	}
}

5607 
	$RM_DiùR•ÏûC
(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
±r
) {

5608 
»tv®
 = 
	`¿xIn£¹
(
d
->
¿x
,
key
,
keyËn
,
±r
,
NULL
);

5609  (
»tv®
 =ğ1è? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

5610 
	}
}

5613 
	$RM_DiùS‘
(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
±r
) {

5614  
	`RM_DiùS‘C
(
d
,
key
->
±r
,
	`sd¦’
(key->ptr),ptr);

5615 
	}
}

5618 
	$RM_DiùR•Ïû
(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
±r
) {

5619  
	`RM_DiùR•ÏûC
(
d
,
key
->
±r
,
	`sd¦’
(key->ptr),ptr);

5620 
	}
}

5627 *
	$RM_DiùG‘C
(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
nokey
) {

5628 *
»s
 = 
	`¿xFšd
(
d
->
¿x
,
key
,
keyËn
);

5629 ià(
nokey
è*nokey = (
»s
 =ğ
¿xNÙFound
);

5630  (
»s
 =ğ
¿xNÙFound
è? 
NULL
 :„es;

5631 
	}
}

5634 *
	$RM_DiùG‘
(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
nokey
) {

5635  
	`RM_DiùG‘C
(
d
,
key
->
±r
,
	`sd¦’
(key->±r),
nokey
);

5636 
	}
}

5645 
	$RM_DiùD–C
(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
Şdv®
) {

5646 
»tv®
 = 
	`¿xRemove
(
d
->
¿x
,
key
,
keyËn
,
Şdv®
);

5647  
»tv®
 ? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

5648 
	}
}

5651 
	$RM_DiùD–
(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
Şdv®
) {

5652  
	`RM_DiùD–C
(
d
,
key
->
±r
,
	`sd¦’
(key->±r),
Şdv®
);

5653 
	}
}

5675 
RedisModuËDiùI‹r
 *
	$RM_DiùI‹¿tÜS¹C
(
RedisModuËDiù
 *
d
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
) {

5676 
RedisModuËDiùI‹r
 *
di
 = 
	`zm®loc
((*di));

5677 
di
->
diù
 = 
d
;

5678 
	`¿xS¹
(&
di
->
ri
,
d
->
¿x
);

5679 
	`¿xS“k
(&
di
->
ri
,
İ
,
key
,
keyËn
);

5680  
di
;

5681 
	}
}

5685 
RedisModuËDiùI‹r
 *
	$RM_DiùI‹¿tÜS¹
(
RedisModuËDiù
 *
d
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
) {

5686  
	`RM_DiùI‹¿tÜS¹C
(
d
,
İ
,
key
->
±r
,
	`sd¦’
(key->ptr));

5687 
	}
}

5691 
	$RM_DiùI‹¿tÜStİ
(
RedisModuËDiùI‹r
 *
di
) {

5692 
	`¿xStİ
(&
di
->
ri
);

5693 
	`zä“
(
di
);

5694 
	}
}

5703 
	$RM_DiùI‹¿tÜRe£ekC
(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
) {

5704  
	`¿xS“k
(&
di
->
ri
,
İ
,
key
,
keyËn
);

5705 
	}
}

5709 
	$RM_DiùI‹¿tÜRe£ek
(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
) {

5710  
	`RM_DiùI‹¿tÜRe£ekC
(
di
,
İ
,
key
->
±r
,
	`sd¦’
(key->ptr));

5711 
	}
}

5738 *
	$RM_DiùNextC
(
RedisModuËDiùI‹r
 *
di
, 
size_t
 *
keyËn
, **
d©­Œ
) {

5739 ià(!
	`¿xNext
(&
di
->
ri
)è 
NULL
;

5740 ià(
keyËn
è*keyËÀğ
di
->
ri
.
key_Ën
;

5741 ià(
d©­Œ
è*d©­Œ = 
di
->
ri
.
d©a
;

5742  
di
->
ri
.
key
;

5743 
	}
}

5748 *
	$RM_DiùP»vC
(
RedisModuËDiùI‹r
 *
di
, 
size_t
 *
keyËn
, **
d©­Œ
) {

5749 ià(!
	`¿xP»v
(&
di
->
ri
)è 
NULL
;

5750 ià(
keyËn
è*keyËÀğ
di
->
ri
.
key_Ën
;

5751 ià(
d©­Œ
è*d©­Œ = 
di
->
ri
.
d©a
;

5752  
di
->
ri
.
key
;

5753 
	}
}

5762 
RedisModuËSŒšg
 *
	$RM_DiùNext
(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiùI‹r
 *
di
, **
d©­Œ
) {

5763 
size_t
 
keyËn
;

5764 *
key
 = 
	`RM_DiùNextC
(
di
,&
keyËn
,
d©­Œ
);

5765 ià(
key
 =ğ
NULL
)  NULL;

5766  
	`RM_C»©eSŒšg
(
ùx
,
key
,
keyËn
);

5767 
	}
}

5772 
RedisModuËSŒšg
 *
	$RM_DiùP»v
(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiùI‹r
 *
di
, **
d©­Œ
) {

5773 
size_t
 
keyËn
;

5774 *
key
 = 
	`RM_DiùP»vC
(
di
,&
keyËn
,
d©­Œ
);

5775 ià(
key
 =ğ
NULL
)  NULL;

5776  
	`RM_C»©eSŒšg
(
ùx
,
key
,
keyËn
);

5777 
	}
}

5791 
	$RM_DiùCom·»C
(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
) {

5792 ià(
	`¿xEOF
(&
di
->
ri
)è 
REDISMODULE_ERR
;

5793 
»s
 = 
	`¿xCom·»
(&
di
->
ri
,
İ
,
key
,
keyËn
);

5794  
»s
 ? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

5795 
	}
}

5799 
	$RM_DiùCom·»
(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
) {

5800 ià(
	`¿xEOF
(&
di
->
ri
)è 
REDISMODULE_ERR
;

5801 
»s
 = 
	`¿xCom·»
(&
di
->
ri
,
İ
,
key
->
±r
,
	`sd¦’
(key->ptr));

5802  
»s
 ? 
REDISMODULE_OK
 : 
REDISMODULE_ERR
;

5803 
	}
}

5812 
RM_InfoEndDiùF›ld
(
RedisModuËInfoCtx
 *
ùx
);

5818 
	$RM_InfoAddSeùiÚ
(
RedisModuËInfoCtx
 *
ùx
, *
Çme
) {

5819 
sds
 
fuÎ_Çme
 = 
	`sdsdup
(
ùx
->
moduË
->
Çme
);

5820 ià(
Çme
 !ğ
NULL
 && 
	`¡¾’
(name) > 0)

5821 
fuÎ_Çme
 = 
	`sdsÿtfmt
(fuÎ_Çme, "_%s", 
Çme
);

5824 ià(
ùx
->
š_diù_f›ld
)

5825 
	`RM_InfoEndDiùF›ld
(
ùx
);

5831 ià(
ùx
->
»que¡ed_£ùiÚ
) {

5832 ià(
	`¡rÿ£cmp
(
ùx
->
»que¡ed_£ùiÚ
, 
fuÎ_Çme
) &&

5833 
	`¡rÿ£cmp
(
ùx
->
»que¡ed_£ùiÚ
, ctx->
moduË
->
Çme
)) {

5834 
	`sdsä“
(
fuÎ_Çme
);

5835 
ùx
->
š_£ùiÚ
 = 0;

5836  
REDISMODULE_ERR
;

5839 ià(
ùx
->
£ùiÚs
++èùx->
šfo
 = 
	`sdsÿt
(ctx->info,"\r\n");

5840 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ùx->šfo, "# %S\r\n", 
fuÎ_Çme
);

5841 
ùx
->
š_£ùiÚ
 = 1;

5842 
	`sdsä“
(
fuÎ_Çme
);

5843  
REDISMODULE_OK
;

5844 
	}
}

5849 
	$RM_InfoBegšDiùF›ld
(
RedisModuËInfoCtx
 *
ùx
, *
Çme
) {

5850 ià(!
ùx
->
š_£ùiÚ
)

5851  
REDISMODULE_ERR
;

5853 ià(
ùx
->
š_diù_f›ld
)

5854 
	`RM_InfoEndDiùF›ld
(
ùx
);

5855 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5857 
ùx
->
moduË
->
Çme
,

5858 
Çme
);

5859 
ùx
->
š_diù_f›ld
 = 1;

5860  
REDISMODULE_OK
;

5861 
	}
}

5864 
	$RM_InfoEndDiùF›ld
(
RedisModuËInfoCtx
 *
ùx
) {

5865 ià(!
ùx
->
š_diù_f›ld
)

5866  
REDISMODULE_ERR
;

5868 ià(
ùx
->
šfo
[
	`sd¦’
(ctx->info)-1]==',')

5869 
	`sdsInüL’
(
ùx
->
šfo
, -1);

5870 
ùx
->
šfo
 = 
	`sdsÿt
(ctx->info, "\r\n");

5871 
ùx
->
š_diù_f›ld
 = 0;

5872  
REDISMODULE_OK
;

5873 
	}
}

5878 
	$RM_InfoAddF›ldSŒšg
(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
RedisModuËSŒšg
 *
v®ue
) {

5879 ià(!
ùx
->
š_£ùiÚ
)

5880  
REDISMODULE_ERR
;

5881 ià(
ùx
->
š_diù_f›ld
) {

5882 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5884 
f›ld
,

5885 (
sds
)
v®ue
->
±r
);

5886  
REDISMODULE_OK
;

5888 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5890 
ùx
->
moduË
->
Çme
,

5891 
f›ld
,

5892 (
sds
)
v®ue
->
±r
);

5893  
REDISMODULE_OK
;

5894 
	}
}

5896 
	$RM_InfoAddF›ldCSŒšg
(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, *
v®ue
) {

5897 ià(!
ùx
->
š_£ùiÚ
)

5898  
REDISMODULE_ERR
;

5899 ià(
ùx
->
š_diù_f›ld
) {

5900 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5902 
f›ld
,

5903 
v®ue
);

5904  
REDISMODULE_OK
;

5906 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5908 
ùx
->
moduË
->
Çme
,

5909 
f›ld
,

5910 
v®ue
);

5911  
REDISMODULE_OK
;

5912 
	}
}

5914 
	$RM_InfoAddF›ldDoubË
(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
) {

5915 ià(!
ùx
->
š_£ùiÚ
)

5916  
REDISMODULE_ERR
;

5917 ià(
ùx
->
š_diù_f›ld
) {

5918 
ùx
->
šfo
 = 
	`sdsÿrštf
(ctx->info,

5920 
f›ld
,

5921 
v®ue
);

5922  
REDISMODULE_OK
;

5924 
ùx
->
šfo
 = 
	`sdsÿrštf
(ctx->info,

5926 
ùx
->
moduË
->
Çme
,

5927 
f›ld
,

5928 
v®ue
);

5929  
REDISMODULE_OK
;

5930 
	}
}

5932 
	$RM_InfoAddF›ldLÚgLÚg
(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
) {

5933 ià(!
ùx
->
š_£ùiÚ
)

5934  
REDISMODULE_ERR
;

5935 ià(
ùx
->
š_diù_f›ld
) {

5936 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5938 
f›ld
,

5939 
v®ue
);

5940  
REDISMODULE_OK
;

5942 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5944 
ùx
->
moduË
->
Çme
,

5945 
f›ld
,

5946 
v®ue
);

5947  
REDISMODULE_OK
;

5948 
	}
}

5950 
	$RM_InfoAddF›ldULÚgLÚg
(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
) {

5951 ià(!
ùx
->
š_£ùiÚ
)

5952  
REDISMODULE_ERR
;

5953 ià(
ùx
->
š_diù_f›ld
) {

5954 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5956 
f›ld
,

5957 
v®ue
);

5958  
REDISMODULE_OK
;

5960 
ùx
->
šfo
 = 
	`sdsÿtfmt
(ctx->info,

5962 
ùx
->
moduË
->
Çme
,

5963 
f›ld
,

5964 
v®ue
);

5965  
REDISMODULE_OK
;

5966 
	}
}

5968 
	$RM_Regi¡”InfoFunc
(
RedisModuËCtx
 *
ùx
, 
RedisModuËInfoFunc
 
cb
) {

5969 
ùx
->
moduË
->
šfo_cb
 = 
cb
;

5970  
REDISMODULE_OK
;

5971 
	}
}

5973 
sds
 
	$moduËsCŞËùInfo
(
sds
 
šfo
, cÚ¡ *
£ùiÚ
, 
fÜ_üash_»pÜt
, 
£ùiÚs
) {

5974 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

5975 
diùEÁry
 *
de
;

5977 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

5978 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

5979 ià(!
moduË
->
šfo_cb
)

5981 
RedisModuËInfoCtx
 
šfo_ùx
 = {
moduË
, 
£ùiÚ
, 
šfo
, 
£ùiÚs
, 0, 0};

5982 
moduË
->
	`šfo_cb
(&
šfo_ùx
, 
fÜ_üash_»pÜt
);

5984 ià(
šfo_ùx
.
š_diù_f›ld
)

5985 
	`RM_InfoEndDiùF›ld
(&
šfo_ùx
);

5986 
šfo
 = 
šfo_ùx
.info;

5987 
£ùiÚs
 = 
šfo_ùx
.sections;

5989 
	`diùR–—£I‹¿tÜ
(
di
);

5990  
šfo
;

5991 
	}
}

5999 
RedisModuËS”v”InfoD©a
 *
	$RM_G‘S”v”Info
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
£ùiÚ
) {

6000 
RedisModuËS”v”InfoD©a
 *
d
 = 
	`zm®loc
((*d));

6001 
d
->
¿x
 = 
	`¿xNew
();

6002 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_INFO
,
d
);

6003 
sds
 
šfo
 = 
	`g’RedisInfoSŒšg
(
£ùiÚ
);

6004 
tÙlšes
, 
i
;

6005 
sds
 *
lšes
 = 
	`sds¥l™Ën
(
šfo
, 
	`sd¦’
(šfo), "\r\n", 2, &
tÙlšes
);

6006 
i
=0; i<
tÙlšes
; i++) {

6007 
sds
 
lše
 = 
lšes
[
i
];

6008 ià(
lše
[0]=='#') ;

6009 *
£p
 = 
	`¡rchr
(
lše
, ':');

6010 ià(!
£p
) ;

6011 *
key
 = (*)
lše
;

6012 
size_t
 
keyËn
 = (
šŒ_t
)
£p
-(šŒ_t)
lše
;

6013 
sds
 
v®
 = 
	`sd¢ewËn
(
£p
+1,
	`sd¦’
(
lše
)-((
šŒ_t
)sep-(intptr_t)line)-1);

6014 ià(!
	`¿xTryIn£¹
(
d
->
¿x
,
key
,
keyËn
,
v®
,
NULL
))

6015 
	`sdsä“
(
v®
);

6017 
	`sdsä“
(
šfo
);

6018 
	`sdsä“¥l™»s
(
lšes
,
tÙlšes
);

6019  
d
;

6020 
	}
}

6025 
	$RM_F»eS”v”Info
(
RedisModuËCtx
 *
ùx
, 
RedisModuËS”v”InfoD©a
 *
d©a
) {

6026 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyF»ed
(ùx,
REDISMODULE_AM_INFO
,
d©a
);

6027 
¿xI‹¿tÜ
 
ri
;

6028 
	`¿xS¹
(&
ri
,
d©a
->
¿x
);

6030 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

6031 ià(!
	`¿xNext
(&
ri
)) ;

6032 
	`¿xRemove
(
d©a
->
¿x
,(*)
ri
.
key
,ri.
key_Ën
,
NULL
);

6033 
	`sdsä“
(
ri
.
d©a
);

6035 
	`¿xStİ
(&
ri
);

6036 
	`¿xF»e
(
d©a
->
¿x
);

6037 
	`zä“
(
d©a
);

6038 
	}
}

6044 
RedisModuËSŒšg
 *
	$RM_S”v”InfoG‘F›ld
(
RedisModuËCtx
 *
ùx
, 
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
) {

6045 
sds
 
v®
 = 
	`¿xFšd
(
d©a
->
¿x
, (*)
f›ld
, 
	`¡¾’
(field));

6046 ià(
v®
 =ğ
¿xNÙFound
è 
NULL
;

6047 
RedisModuËSŒšg
 *
o
 = 
	`ü—‹SŒšgObjeù
(
v®
,
	`sd¦’
(val));

6048 ià(
ùx
 !ğ
NULL
è
	`autoMemÜyAdd
(ùx,
REDISMODULE_AM_STRING
,
o
);

6049  
o
;

6050 
	}
}

6053 cÚ¡ *
	$RM_S”v”InfoG‘F›ldC
(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
) {

6054 
sds
 
v®
 = 
	`¿xFšd
(
d©a
->
¿x
, (*)
f›ld
, 
	`¡¾’
(field));

6055 ià(
v®
 =ğ
¿xNÙFound
è 
NULL
;

6056  
v®
;

6057 
	}
}

6062 
	$RM_S”v”InfoG‘F›ldSigÃd
(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
) {

6063 
Î
;

6064 
sds
 
v®
 = 
	`¿xFšd
(
d©a
->
¿x
, (*)
f›ld
, 
	`¡¾’
(field));

6065 ià(
v®
 =ğ
¿xNÙFound
) {

6066 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6069 ià(!
	`¡ršg2Î
(
v®
,
	`sd¦’
(v®),&
Î
)) {

6070 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6073 ià(
out_”r
è*out_”¸ğ
REDISMODULE_OK
;

6074  
Î
;

6075 
	}
}

6080 
	$RM_S”v”InfoG‘F›ldUnsigÃd
(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
) {

6081 
Î
;

6082 
sds
 
v®
 = 
	`¿xFšd
(
d©a
->
¿x
, (*)
f›ld
, 
	`¡¾’
(field));

6083 ià(
v®
 =ğ
¿xNÙFound
) {

6084 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6087 ià(!
	`¡ršg2uÎ
(
v®
,&
Î
)) {

6088 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6091 ià(
out_”r
è*out_”¸ğ
REDISMODULE_OK
;

6092  
Î
;

6093 
	}
}

6098 
	$RM_S”v”InfoG‘F›ldDoubË
(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
) {

6099 
dbl
;

6100 
sds
 
v®
 = 
	`¿xFšd
(
d©a
->
¿x
, (*)
f›ld
, 
	`¡¾’
(field));

6101 ià(
v®
 =ğ
¿xNÙFound
) {

6102 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6105 ià(!
	`¡ršg2d
(
v®
,
	`sd¦’
(v®),&
dbl
)) {

6106 ià(
out_”r
è*out_”¸ğ
REDISMODULE_ERR
;

6109 ià(
out_”r
è*out_”¸ğ
REDISMODULE_OK
;

6110  
dbl
;

6111 
	}
}

6121 
	$RM_G‘RªdomBy‹s
(*
d¡
, 
size_t
 
Ën
) {

6122 
	`g‘RªdomBy‹s
(
d¡
,
Ën
);

6123 
	}
}

6128 
	$RM_G‘RªdomHexCh¬s
(*
d¡
, 
size_t
 
Ën
) {

6129 
	`g‘RªdomHexCh¬s
(
d¡
,
Ën
);

6130 
	}
}

6148 
	$RM_ExpÜtSh¬edAPI
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
­šame
, *
func
) {

6149 
RedisModuËSh¬edAPI
 *
§pi
 = 
	`zm®loc
((*sapi));

6150 
§pi
->
moduË
 = 
ùx
->module;

6151 
§pi
->
func
 = func;

6152 ià(
	`diùAdd
(
£rv”
.
sh¬ed­i
, (*)
­šame
, 
§pi
è!ğ
DICT_OK
) {

6153 
	`zä“
(
§pi
);

6154  
REDISMODULE_ERR
;

6156  
REDISMODULE_OK
;

6157 
	}
}

6192 *
	$RM_G‘Sh¬edAPI
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
­šame
) {

6193 
diùEÁry
 *
de
 = 
	`diùFšd
(
£rv”
.
sh¬ed­i
, 
­šame
);

6194 ià(
de
 =ğ
NULL
)  NULL;

6195 
RedisModuËSh¬edAPI
 *
§pi
 = 
	`diùG‘V®
(
de
);

6196 ià(
	`li¡S—rchKey
(
§pi
->
moduË
->
u£dby
,
ùx
->moduËè=ğ
NULL
) {

6197 
	`li¡AddNodeTa
(
§pi
->
moduË
->
u£dby
,
ùx
->module);

6198 
	`li¡AddNodeTa
(
ùx
->
moduË
->
usšg
,
§pi
->module);

6200  
§pi
->
func
;

6201 
	}
}

6209 
	$moduËUÄegi¡”Sh¬edAPI
(
RedisModuË
 *
moduË
) {

6210 
couÁ
 = 0;

6211 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
sh¬ed­i
);

6212 
diùEÁry
 *
de
;

6213 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

6214 cÚ¡ *
­šame
 = 
	`diùG‘Key
(
de
);

6215 
RedisModuËSh¬edAPI
 *
§pi
 = 
	`diùG‘V®
(
de
);

6216 ià(
§pi
->
moduË
 == module) {

6217 
	`diùD–‘e
(
£rv”
.
sh¬ed­i
,
­šame
);

6218 
	`zä“
(
§pi
);

6219 
couÁ
++;

6222 
	`diùR–—£I‹¿tÜ
(
di
);

6223  
couÁ
;

6224 
	}
}

6230 
	$moduËUÄegi¡”U£dAPI
(
RedisModuË
 *
moduË
) {

6231 
li¡I‹r
 
li
;

6232 
li¡Node
 *
Ê
;

6233 
couÁ
 = 0;

6235 
	`li¡Rewšd
(
moduË
->
usšg
,&
li
);

6236 (
Ê
 = 
	`li¡Next
(&
li
))) {

6237 
RedisModuË
 *
u£d
 = 
Ê
->
v®ue
;

6238 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
u£d
->
u£dby
,
moduË
);

6239 ià(
Ê
) {

6240 
	`li¡D–Node
(
u£d
->
u£dby
,
Ê
);

6241 
couÁ
++;

6244  
couÁ
;

6245 
	}
}

6251 
	$moduËUÄegi¡”F‹rs
(
RedisModuË
 *
moduË
) {

6252 
li¡I‹r
 
li
;

6253 
li¡Node
 *
Ê
;

6254 
couÁ
 = 0;

6256 
	`li¡Rewšd
(
moduË
->
f‹rs
,&
li
);

6257 (
Ê
 = 
	`li¡Next
(&
li
))) {

6258 
RedisModuËCommªdF‹r
 *
f‹r
 = 
Ê
->
v®ue
;

6259 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
moduËCommªdF‹rs
,
f‹r
);

6260 ià(
Ê
) {

6261 
	`li¡D–Node
(
moduËCommªdF‹rs
,
Ê
);

6262 
couÁ
++;

6264 
	`zä“
(
f‹r
);

6266  
couÁ
;

6267 
	}
}

6325 
RedisModuËCommªdF‹r
 *
	$RM_Regi¡”CommªdF‹r
(
RedisModuËCtx
 *
ùx
, 
RedisModuËCommªdF‹rFunc
 
ÿÎback
, 
æags
) {

6326 
RedisModuËCommªdF‹r
 *
f‹r
 = 
	`zm®loc
((*filter));

6327 
f‹r
->
moduË
 = 
ùx
->module;

6328 
f‹r
->
ÿÎback
 = callback;

6329 
f‹r
->
æags
 = flags;

6331 
	`li¡AddNodeTa
(
moduËCommªdF‹rs
, 
f‹r
);

6332 
	`li¡AddNodeTa
(
ùx
->
moduË
->
f‹rs
, 
f‹r
);

6333  
f‹r
;

6334 
	}
}

6338 
	$RM_UÄegi¡”CommªdF‹r
(
RedisModuËCtx
 *
ùx
, 
RedisModuËCommªdF‹r
 *
f‹r
) {

6339 
li¡Node
 *
Ê
;

6342 ià(
f‹r
->
moduË
 !ğ
ùx
->moduËè 
REDISMODULE_ERR
;

6344 
Ê
 = 
	`li¡S—rchKey
(
moduËCommªdF‹rs
,
f‹r
);

6345 ià(!
Ê
è 
REDISMODULE_ERR
;

6346 
	`li¡D–Node
(
moduËCommªdF‹rs
,
Ê
);

6348 
Ê
 = 
	`li¡S—rchKey
(
ùx
->
moduË
->
f‹rs
,
f‹r
);

6349 ià(!
Ê
è 
REDISMODULE_ERR
;

6350 
	`li¡D–Node
(
ùx
->
moduË
->
f‹rs
,
Ê
);

6352 
	`zä“
(
f‹r
);

6354  
REDISMODULE_OK
;

6355 
	}
}

6357 
	$moduËC®lCommªdF‹rs
(
ş›Á
 *
c
) {

6358 ià(
	`li¡L’gth
(
moduËCommªdF‹rs
) == 0) ;

6360 
li¡I‹r
 
li
;

6361 
li¡Node
 *
Ê
;

6362 
	`li¡Rewšd
(
moduËCommªdF‹rs
,&
li
);

6364 
RedisModuËCommªdF‹rCtx
 
f‹r
 = {

6365 .
¬gv
 = 
c
->argv,

6366 .
¬gc
 = 
c
->argc

6369 (
Ê
 = 
	`li¡Next
(&
li
))) {

6370 
RedisModuËCommªdF‹r
 *
f
 = 
Ê
->
v®ue
;

6375 ià((
f
->
æags
 & 
REDISMODULE_CMDFILTER_NOSELF
è&& f->
moduË
->
š_ÿÎ
) ;

6378 
f
->
	`ÿÎback
(&
f‹r
);

6381 
c
->
¬gv
 = 
f‹r
.argv;

6382 
c
->
¬gc
 = 
f‹r
.argc;

6383 
	}
}

6388 
	$RM_CommªdF‹rArgsCouÁ
(
RedisModuËCommªdF‹rCtx
 *
fùx
)

6390  
fùx
->
¬gc
;

6391 
	}
}

6396 cÚ¡ 
RedisModuËSŒšg
 *
	$RM_CommªdF‹rArgG‘
(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
)

6398 ià(
pos
 < 0 ||…o >ğ
fùx
->
¬gc
è 
NULL
;

6399  
fùx
->
¬gv
[
pos
];

6400 
	}
}

6408 
	$RM_CommªdF‹rArgIn£¹
(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
, 
RedisModuËSŒšg
 *
¬g
)

6410 
i
;

6412 ià(
pos
 < 0 ||…o > 
fùx
->
¬gc
è 
REDISMODULE_ERR
;

6414 
fùx
->
¬gv
 = 
	`z»®loc
(fùx->¬gv, (fùx->
¬gc
+1)*(
RedisModuËSŒšg
 *));

6415 
i
 = 
fùx
->
¬gc
; i > 
pos
; i--) {

6416 
fùx
->
¬gv
[
i
] = fctx->argv[i-1];

6418 
fùx
->
¬gv
[
pos
] = 
¬g
;

6419 
fùx
->
¬gc
++;

6421  
REDISMODULE_OK
;

6422 
	}
}

6430 
	$RM_CommªdF‹rArgR•Ïû
(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
, 
RedisModuËSŒšg
 *
¬g
)

6432 ià(
pos
 < 0 ||…o >ğ
fùx
->
¬gc
è 
REDISMODULE_ERR
;

6434 
	`deüRefCouÁ
(
fùx
->
¬gv
[
pos
]);

6435 
fùx
->
¬gv
[
pos
] = 
¬g
;

6437  
REDISMODULE_OK
;

6438 
	}
}

6443 
	$RM_CommªdF‹rArgD–‘e
(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
)

6445 
i
;

6446 ià(
pos
 < 0 ||…o >ğ
fùx
->
¬gc
è 
REDISMODULE_ERR
;

6448 
	`deüRefCouÁ
(
fùx
->
¬gv
[
pos
]);

6449 
i
 = 
pos
; i < 
fùx
->
¬gc
-1; i++) {

6450 
fùx
->
¬gv
[
i
] = fctx->argv[i+1];

6452 
fùx
->
¬gc
--;

6454  
REDISMODULE_OK
;

6455 
	}
}

6463 
size_t
 
	$RM_M®locSize
(* 
±r
){

6464  
	`zm®loc_size
(
±r
);

6465 
	}
}

6475 
	$RM_G‘U£dMemÜyR©io
(){

6476 
Ëv–
;

6477 
	`g‘MaxmemÜyS‹
(
NULL
, NULL, NULL, &
Ëv–
);

6478  
Ëv–
;

6479 
	}
}

6485 (*
	tRedisModuËSÿnCB
)(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËSŒšg
 *
	tkeyÇme
, 
	tRedisModuËKey
 *
	tkey
, *
	t´ivd©a
);

6487 
RedisModuËCtx
 *
ùx
;

6488 * 
u£r_d©a
;

6489 
RedisModuËSÿnCB
 
â
;

6490 } 
	tSÿnCBD©a
;

6492 
	sRedisModuËSÿnCursÜ
{

6493 
cursÜ
;

6494 
dÚe
;

6495 }
	tRedisModuËSÿnCursÜ
;

6497 
	$moduËSÿnC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
de
) {

6498 
SÿnCBD©a
 *
d©a
 = 
´ivd©a
;

6499 
sds
 
key
 = 
	`diùG‘Key
(
de
);

6500 
robj
* 
v®
 = 
	`diùG‘V®
(
de
);

6501 
RedisModuËSŒšg
 *
keyÇme
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sdsdup
(
key
));

6504 
RedisModuËKey
 
kp
 = {0};

6505 
	`moduËIn™Key
(&
kp
, 
d©a
->
ùx
, 
keyÇme
, 
v®
, 
REDISMODULE_READ
);

6507 
d©a
->
	`â
(d©a->
ùx
, 
keyÇme
, &
kp
, d©a->
u£r_d©a
);

6509 
	`moduËClo£Key
(&
kp
);

6510 
	`deüRefCouÁ
(
keyÇme
);

6511 
	}
}

6514 
RedisModuËSÿnCursÜ
 *
	$RM_SÿnCursÜC»©e
() {

6515 
RedisModuËSÿnCursÜ
* 
cursÜ
 = 
	`zm®loc
((*cursor));

6516 
cursÜ
->cursor = 0;

6517 
cursÜ
->
dÚe
 = 0;

6518  
cursÜ
;

6519 
	}
}

6522 
	$RM_SÿnCursÜRe¡¬t
(
RedisModuËSÿnCursÜ
 *
cursÜ
) {

6523 
cursÜ
->cursor = 0;

6524 
cursÜ
->
dÚe
 = 0;

6525 
	}
}

6528 
	$RM_SÿnCursÜDe¡roy
(
RedisModuËSÿnCursÜ
 *
cursÜ
) {

6529 
	`zä“
(
cursÜ
);

6530 
	}
}

6587 
	$RM_Sÿn
(
RedisModuËCtx
 *
ùx
, 
RedisModuËSÿnCursÜ
 *
cursÜ
, 
RedisModuËSÿnCB
 
â
, *
´ivd©a
) {

6588 ià(
cursÜ
->
dÚe
) {

6589 
”ºo
 = 
ENOENT
;

6592 
»t
 = 1;

6593 
SÿnCBD©a
 
d©a
 = { 
ùx
, 
´ivd©a
, 
â
 };

6594 
cursÜ
->cursÜ = 
	`diùSÿn
(
ùx
->
ş›Á
->
db
->
diù
, cursÜ->cursÜ, 
moduËSÿnC®lback
, 
NULL
, &
d©a
);

6595 ià(
cursÜ
->cursor == 0) {

6596 
cursÜ
->
dÚe
 = 1;

6597 
»t
 = 0;

6599 
”ºo
 = 0;

6600  
»t
;

6601 
	}
}

6603 (*
	tRedisModuËSÿnKeyCB
)(
	tRedisModuËKey
 *
	tkey
, 
	tRedisModuËSŒšg
 *
	tf›ld
, RedisModuËSŒšg *
	tv®ue
, *
	t´ivd©a
);

6605 
RedisModuËKey
 *
key
;

6606 * 
u£r_d©a
;

6607 
RedisModuËSÿnKeyCB
 
â
;

6608 } 
	tSÿnKeyCBD©a
;

6610 
	$moduËSÿnKeyC®lback
(*
´ivd©a
, cÚ¡ 
diùEÁry
 *
de
) {

6611 
SÿnKeyCBD©a
 *
d©a
 = 
´ivd©a
;

6612 
sds
 
key
 = 
	`diùG‘Key
(
de
);

6613 
robj
 *
o
 = 
d©a
->
key
->
v®ue
;

6614 
robj
 *
f›ld
 = 
	`ü—‹SŒšgObjeù
(
key
, 
	`sd¦’
(key));

6615 
robj
 *
v®ue
 = 
NULL
;

6616 ià(
o
->
ty³
 =ğ
OBJ_SET
) {

6617 
v®ue
 = 
NULL
;

6618 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

6619 
sds
 
v®
 = 
	`diùG‘V®
(
de
);

6620 
v®ue
 = 
	`ü—‹SŒšgObjeù
(
v®
, 
	`sd¦’
(val));

6621 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

6622 *
v®
 = (*)
	`diùG‘V®
(
de
);

6623 
v®ue
 = 
	`ü—‹SŒšgObjeùFromLÚgDoubË
(*
v®
, 0);

6626 
d©a
->
	`â
(d©a->
key
, 
f›ld
, 
v®ue
, d©a->
u£r_d©a
);

6627 
	`deüRefCouÁ
(
f›ld
);

6628 ià(
v®ue
è
	`deüRefCouÁ
(value);

6629 
	}
}

6675 
	$RM_SÿnKey
(
RedisModuËKey
 *
key
, 
RedisModuËSÿnCursÜ
 *
cursÜ
, 
RedisModuËSÿnKeyCB
 
â
, *
´ivd©a
) {

6676 ià(
key
 =ğ
NULL
 || key->
v®ue
 == NULL) {

6677 
”ºo
 = 
EINVAL
;

6680 
diù
 *
ht
 = 
NULL
;

6681 
robj
 *
o
 = 
key
->
v®ue
;

6682 ià(
o
->
ty³
 =ğ
OBJ_SET
) {

6683 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

6684 
ht
 = 
o
->
±r
;

6685 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

6686 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

6687 
ht
 = 
o
->
±r
;

6688 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

6689 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
)

6690 
ht
 = ((
z£t
 *)
o
->
±r
)->
diù
;

6692 
”ºo
 = 
EINVAL
;

6695 ià(
cursÜ
->
dÚe
) {

6696 
”ºo
 = 
ENOENT
;

6699 
»t
 = 1;

6700 ià(
ht
) {

6701 
SÿnKeyCBD©a
 
d©a
 = { 
key
, 
´ivd©a
, 
â
 };

6702 
cursÜ
->cursÜ = 
	`diùSÿn
(
ht
, cursÜ->cursÜ, 
moduËSÿnKeyC®lback
, 
NULL
, &
d©a
);

6703 ià(
cursÜ
->cursor == 0) {

6704 
cursÜ
->
dÚe
 = 1;

6705 
»t
 = 0;

6707 } ià(
o
->
ty³
 =ğ
OBJ_SET
 && o->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

6708 
pos
 = 0;

6709 
št64_t
 
Î
;

6710 
	`št£tG‘
(
o
->
±r
,
pos
++,&
Î
)) {

6711 
robj
 *
f›ld
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î
);

6712 
	`â
(
key
, 
f›ld
, 
NULL
, 
´ivd©a
);

6713 
	`deüRefCouÁ
(
f›ld
);

6715 
cursÜ
->cursor = 1;

6716 
cursÜ
->
dÚe
 = 1;

6717 
»t
 = 0;

6718 } ià(
o
->
ty³
 =ğ
OBJ_HASH
 || o->ty³ =ğ
OBJ_ZSET
) {

6719 *
p
 = 
	`zli¡Index
(
o
->
±r
,0);

6720 *
v¡r
;

6721 
vËn
;

6722 
vÎ
;

6723 
p
) {

6724 
	`zli¡G‘
(
p
,&
v¡r
,&
vËn
,&
vÎ
);

6725 
robj
 *
f›ld
 = (
v¡r
 !ğ
NULL
) ?

6726 
	`ü—‹SŒšgObjeù
((*)
v¡r
,
vËn
) :

6727 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
vÎ
);

6728 
p
 = 
	`zli¡Next
(
o
->
±r
,p);

6729 
	`zli¡G‘
(
p
,&
v¡r
,&
vËn
,&
vÎ
);

6730 
robj
 *
v®ue
 = (
v¡r
 !ğ
NULL
) ?

6731 
	`ü—‹SŒšgObjeù
((*)
v¡r
,
vËn
) :

6732 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
vÎ
);

6733 
	`â
(
key
, 
f›ld
, 
v®ue
, 
´ivd©a
);

6734 
p
 = 
	`zli¡Next
(
o
->
±r
,p);

6735 
	`deüRefCouÁ
(
f›ld
);

6736 
	`deüRefCouÁ
(
v®ue
);

6738 
cursÜ
->cursor = 1;

6739 
cursÜ
->
dÚe
 = 1;

6740 
»t
 = 0;

6742 
”ºo
 = 0;

6743  
»t
;

6744 
	}
}

6762 
	$RM_FÜk
(
RedisModuËFÜkDÚeHªdËr
 
cb
, *
u£r_d©a
) {

6763 
pid_t
 
chdpid
;

6764 ià(
	`hasAùiveChdProûss
()) {

6768 
	`İ’ChdInfoPe
();

6769 ià((
chdpid
 = 
	`»disFÜk
()) == 0) {

6771 
	`»disS‘ProcT™Ë
("redis-module-fork");

6772 } ià(
chdpid
 == -1) {

6773 
	`şo£ChdInfoPe
();

6774 
	`£rv”Log
(
LL_WARNING
,"Cª'ˆfÜk fÜ moduË: %s", 
	`¡»¼Ü
(
”ºo
));

6777 
£rv”
.
moduË_chd_pid
 = 
chdpid
;

6778 
moduËFÜkInfo
.
dÚe_hªdËr
 = 
cb
;

6779 
moduËFÜkInfo
.
dÚe_hªdËr_u£r_d©a
 = 
u£r_d©a
;

6780 
	`£rv”Log
(
LL_VERBOSE
, "ModuË fÜk s¹ed…id: %d ", 
chdpid
);

6782  
chdpid
;

6783 
	}
}

6788 
	$RM_Ex™FromChd
(
»tcode
) {

6789 
	`£ndChdCOWInfo
(
CHILD_INFO_TYPE_MODULE
, "Module fork");

6790 
	`ex™FromChd
(
»tcode
);

6791  
REDISMODULE_OK
;

6792 
	}
}

6797 
	$T”mš©eModuËFÜkChd
(
chd_pid
, 
wa™
) {

6799 ià(
£rv”
.
moduË_chd_pid
 == -1 ||

6800 
£rv”
.
moduË_chd_pid
 !ğ
chd_pid
è 
C_ERR
;

6802 
¡©loc
;

6803 
	`£rv”Log
(
LL_VERBOSE
,"Killing„unning module fork child: %ld",

6804 (è
£rv”
.
moduË_chd_pid
);

6805 ià(
	`kl
(
£rv”
.
moduË_chd_pid
,
SIGUSR1
è!ğ-1 && 
wa™
) {

6806 
	`wa™4
(
£rv”
.
moduË_chd_pid
,&
¡©loc
,0,
NULL
) !=

6807 
£rv”
.
moduË_chd_pid
);

6810 
£rv”
.
moduË_chd_pid
 = -1;

6811 
moduËFÜkInfo
.
dÚe_hªdËr
 = 
NULL
;

6812 
moduËFÜkInfo
.
dÚe_hªdËr_u£r_d©a
 = 
NULL
;

6813 
	`şo£ChdInfoPe
();

6814 
	`upd©eDiùResizePŞicy
();

6815  
C_OK
;

6816 
	}
}

6820 
	$RM_KlFÜkChd
(
chd_pid
) {

6822 ià(
	`T”mš©eModuËFÜkChd
(
chd_pid
,1è=ğ
C_OK
)

6823  
REDISMODULE_OK
;

6825  
REDISMODULE_ERR
;

6826 
	}
}

6828 
	$ModuËFÜkDÚeHªdËr
(
ex™code
, 
bysigÇl
) {

6829 
	`£rv”Log
(
LL_NOTICE
,

6831 
£rv”
.
moduË_chd_pid
, 
ex™code
, 
bysigÇl
);

6832 ià(
moduËFÜkInfo
.
dÚe_hªdËr
) {

6833 
moduËFÜkInfo
.
	`dÚe_hªdËr
(
ex™code
, 
bysigÇl
,

6834 
moduËFÜkInfo
.
dÚe_hªdËr_u£r_d©a
);

6836 
£rv”
.
moduË_chd_pid
 = -1;

6837 
moduËFÜkInfo
.
dÚe_hªdËr
 = 
NULL
;

6838 
moduËFÜkInfo
.
dÚe_hªdËr_u£r_d©a
 = 
NULL
;

6839 
	}
}

7047 
	$RM_SubsüibeToS”v”Ev’t
(
RedisModuËCtx
 *
ùx
, 
RedisModuËEv’t
 
ev’t
, 
RedisModuËEv’tC®lback
 
ÿÎback
) {

7048 
RedisModuËEv’tLi¡’”
 *
–
;

7051 ià(
ùx
->
moduË
 =ğ
NULL
è 
REDISMODULE_ERR
;

7054 
li¡I‹r
 
li
;

7055 
li¡Node
 *
Ê
;

7056 
	`li¡Rewšd
(
RedisModuË_Ev’tLi¡’”s
,&
li
);

7057 (
Ê
 = 
	`li¡Next
(&
li
))) {

7058 
–
 = 
Ê
->
v®ue
;

7059 ià(
–
->
moduË
 =ğ
ùx
->moduË &&ƒl->
ev’t
.
id
 ==ƒvent.id)

7064 ià(
Ê
) {

7065 ià(
ÿÎback
 =ğ
NULL
) {

7066 
	`li¡D–Node
(
RedisModuË_Ev’tLi¡’”s
,
Ê
);

7067 
	`zä“
(
–
);

7069 
–
->
ÿÎback
 = callback;

7071  
REDISMODULE_OK
;

7075 
–
 = 
	`zm®loc
((*el));

7076 
–
->
moduË
 = 
ùx
->module;

7077 
–
->
ev’t
 =ƒvent;

7078 
–
->
ÿÎback
 = callback;

7079 
	`li¡AddNodeTa
(
RedisModuË_Ev’tLi¡’”s
,
–
);

7080  
REDISMODULE_OK
;

7081 
	}
}

7090 
	$moduËFœeS”v”Ev’t
(
ušt64_t
 
eid
, 
subid
, *
d©a
) {

7094 ià(
	`li¡L’gth
(
RedisModuË_Ev’tLi¡’”s
) == 0) ;

7096 
li¡I‹r
 
li
;

7097 
li¡Node
 *
Ê
;

7098 
	`li¡Rewšd
(
RedisModuË_Ev’tLi¡’”s
,&
li
);

7099 (
Ê
 = 
	`li¡Next
(&
li
))) {

7100 
RedisModuËEv’tLi¡’”
 *
–
 = 
Ê
->
v®ue
;

7101 ià(
–
->
ev’t
.
id
 =ğ
eid
) {

7102 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

7103 
ùx
.
moduË
 = 
–
->module;

7105 ià(
ModuËsInHooks
 == 0) {

7106 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

7108 
ùx
.
ş›Á
 = 
	`ü—‹Cl›Á
(
NULL
);

7109 
ùx
.
ş›Á
->
æags
 |ğ
CLIENT_MODULE
;

7110 
ùx
.
ş›Á
->
u£r
 = 
NULL
;

7113 *
moduËd©a
 = 
NULL
;

7114 
RedisModuËCl›ÁInfoV1
 
civ1
;

7115 
RedisModuËR•liÿtiÚInfoV1
 
riv1
;

7116 
RedisModuËModuËChªgeV1
 
mcv1
;

7121 
	`£ËùDb
(
ùx
.
ş›Á
, 0);

7124 ià(
eid
 =ğ
REDISMODULE_EVENT_CLIENT_CHANGE
) {

7125 
	`moduËPİuÏ‹Cl›ÁInfoSŒuùu»
(&
civ1
,
d©a
,

7126 
–
->
ev’t
.
d©av”
);

7127 
moduËd©a
 = &
civ1
;

7128 } ià(
eid
 =ğ
REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED
) {

7129 
	`moduËPİuÏ‹R•liÿtiÚInfoSŒuùu»
(&
riv1
,
–
->
ev’t
.
d©av”
);

7130 
moduËd©a
 = &
riv1
;

7131 } ià(
eid
 =ğ
REDISMODULE_EVENT_FLUSHDB
) {

7132 
moduËd©a
 = 
d©a
;

7133 
RedisModuËFlushInfoV1
 *
fi
 = 
d©a
;

7134 ià(
fi
->
dbnum
 != -1)

7135 
	`£ËùDb
(
ùx
.
ş›Á
, 
fi
->
dbnum
);

7136 } ià(
eid
 =ğ
REDISMODULE_EVENT_MODULE_CHANGE
) {

7137 
RedisModuË
 *
m
 = 
d©a
;

7138 ià(
m
 =ğ
–
->
moduË
)

7140 
mcv1
.
v”siÚ
 = 
REDISMODULE_MODULE_CHANGE_VERSION
;

7141 
mcv1
.
moduË_Çme
 = 
m
->
Çme
;

7142 
mcv1
.
moduË_v”siÚ
 = 
m
->
v”
;

7143 
moduËd©a
 = &
mcv1
;

7144 } ià(
eid
 =ğ
REDISMODULE_EVENT_LOADING_PROGRESS
) {

7145 
moduËd©a
 = 
d©a
;

7146 } ià(
eid
 =ğ
REDISMODULE_EVENT_CRON_LOOP
) {

7147 
moduËd©a
 = 
d©a
;

7150 
ModuËsInHooks
++;

7151 
–
->
moduË
->
š_hook
++;

7152 
–
->
	`ÿÎback
(&
ùx
,–->
ev’t
,
subid
,
moduËd©a
);

7153 
–
->
moduË
->
š_hook
--;

7154 
ModuËsInHooks
--;

7156 ià(
ModuËsInHooks
 !ğ0è
	`ä“Cl›Á
(
ùx
.
ş›Á
);

7157 
	`moduËF»eCÚ‹xt
(&
ùx
);

7160 
	}
}

7164 
	$moduËUnsubsüibeAÎS”v”Ev’ts
(
RedisModuË
 *
moduË
) {

7165 
RedisModuËEv’tLi¡’”
 *
–
;

7166 
li¡I‹r
 
li
;

7167 
li¡Node
 *
Ê
;

7168 
	`li¡Rewšd
(
RedisModuË_Ev’tLi¡’”s
,&
li
);

7170 (
Ê
 = 
	`li¡Next
(&
li
))) {

7171 
–
 = 
Ê
->
v®ue
;

7172 ià(
–
->
moduË
 == module) {

7173 
	`li¡D–Node
(
RedisModuË_Ev’tLi¡’”s
,
Ê
);

7174 
	`zä“
(
–
);

7177 
	}
}

7179 
	$´oûssModuËLßdšgProg»ssEv’t
(
is_aof
) {

7180 
now
 = 
	`u¡ime
();

7181 
Ãxt_ev’t
 = 0;

7182 ià(
now
 >ğ
Ãxt_ev’t
) {

7184 
´og»ss
 = -1;

7185 ià(
£rv”
.
lßdšg_tÙ®_by‹s
)

7186 
´og»ss
 = (
£rv”
.
lßdšg_tÙ®_by‹s
<<10) / server.loading_total_bytes;

7187 
RedisModuËFlushInfoV1
 
fi
 = {
REDISMODULE_LOADING_PROGRESS_VERSION
,

7188 
£rv”
.
hz
,

7189 
´og»ss
};

7190 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_LOADING_PROGRESS
,

7191 
is_aof
?

7192 
REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF
:

7193 
REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB
,

7194 &
fi
);

7196 
Ãxt_ev’t
 = 
now
 + 1000000 / 
£rv”
.
hz
;

7198 
	}
}

7207 
ušt64_t
 
	$diùCSŒšgKeyHash
(cÚ¡ *
key
) {

7208  
	`diùG’HashFunùiÚ
((*)
key
, 
	`¡¾’
((*)key));

7209 
	}
}

7211 
	$diùCSŒšgKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
) {

7212 
	`UNUSED
(
´ivd©a
);

7213  
	`¡rcmp
(
key1
,
key2
) == 0;

7214 
	}
}

7216 
diùTy³
 
	gmoduËAPIDiùTy³
 = {

7217 
diùCSŒšgKeyHash
,

7218 
NULL
,

7219 
NULL
,

7220 
diùCSŒšgKeyCom·»
,

7221 
NULL
,

7222 
NULL


7225 
	$moduËRegi¡”Api
(cÚ¡ *
funúame
, *
funıŒ
) {

7226  
	`diùAdd
(
£rv”
.
moduË­i
, (*)
funúame
, 
funıŒ
);

7227 
	}
}

7229 
	#REGISTER_API
(
Çme
) \

7230 
	`moduËRegi¡”Api
("RedisModuË_" #Çme, (*)()
RM_
 ## 
Çme
)

	)

7233 
moduËRegi¡”CÜeAPI
();

7235 
	$moduËIn™ModuËsSy¡em
() {

7236 
moduËUnblockedCl›Ás
 = 
	`li¡C»©e
();

7237 
£rv”
.
lßdmoduË_queue
 = 
	`li¡C»©e
();

7238 
moduËs
 = 
	`diùC»©e
(&
moduËsDiùTy³
,
NULL
);

7241 
moduËKey¥aûSubsüib”s
 = 
	`li¡C»©e
();

7242 
moduËF»eCÚ‹xtReu£dCl›Á
 = 
	`ü—‹Cl›Á
(
NULL
);

7243 
moduËF»eCÚ‹xtReu£dCl›Á
->
æags
 |ğ
CLIENT_MODULE
;

7244 
moduËF»eCÚ‹xtReu£dCl›Á
->
u£r
 = 
NULL
;

7247 
moduËCommªdF‹rs
 = 
	`li¡C»©e
();

7249 
	`moduËRegi¡”CÜeAPI
();

7250 ià(
	`pe
(
£rv”
.
moduË_blocked_pe
) == -1) {

7251 
	`£rv”Log
(
LL_WARNING
,

7253 
	`¡»¼Ü
(
”ºo
));

7254 
	`ex™
(1);

7258 
	`ª‘NÚBlock
(
NULL
,
£rv”
.
moduË_blocked_pe
[0]);

7259 
	`ª‘NÚBlock
(
NULL
,
£rv”
.
moduË_blocked_pe
[1]);

7262 
Tim”s
 = 
	`¿xNew
();

7265 
RedisModuË_Ev’tLi¡’”s
 = 
	`li¡C»©e
();

7269 
	`±h»ad_mu‹x_lock
(&
moduËGIL
);

7270 
	}
}

7281 
	$moduËLßdFromQueue
() {

7282 
li¡I‹r
 
li
;

7283 
li¡Node
 *
Ê
;

7285 
	`li¡Rewšd
(
£rv”
.
lßdmoduË_queue
,&
li
);

7286 (
Ê
 = 
	`li¡Next
(&
li
))) {

7287 
moduËLßdQueueEÁry
 *
lßdmod
 = 
Ê
->
v®ue
;

7288 ià(
	`moduËLßd
(
lßdmod
->
·th
,(**îßdmod->
¬gv
,lßdmod->
¬gc
)

7289 =ğ
C_ERR
)

7291 
	`£rv”Log
(
LL_WARNING
,

7293 
lßdmod
->
·th
);

7294 
	`ex™
(1);

7297 
	}
}

7299 
	$moduËF»eModuËSŒuùu»
(
RedisModuË
 *
moduË
) {

7300 
	`li¡R–—£
(
moduË
->
ty³s
);

7301 
	`li¡R–—£
(
moduË
->
f‹rs
);

7302 
	`li¡R–—£
(
moduË
->
u£dby
);

7303 
	`li¡R–—£
(
moduË
->
usšg
);

7304 
	`sdsä“
(
moduË
->
Çme
);

7305 
	`zä“
(
moduË
);

7306 
	}
}

7308 
	$moduËUÄegi¡”Commªds
(
RedisModuË
 *
moduË
) {

7310 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
commªds
);

7311 
diùEÁry
 *
de
;

7312 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

7313 
»disCommªd
 *
cmd
 = 
	`diùG‘V®
(
de
);

7314 ià(
cmd
->
´oc
 =ğ
RedisModuËCommªdDi¥©ch”
) {

7315 
RedisModuËCommªdProxy
 *
ı
 =

7316 (*)()
cmd
->
g‘keys_´oc
;

7317 
sds
 
cmdÇme
 = 
ı
->
»discmd
->
Çme
;

7318 ià(
ı
->
moduË
 == module) {

7319 
	`diùD–‘e
(
£rv”
.
commªds
,
cmdÇme
);

7320 
	`diùD–‘e
(
£rv”
.
Üig_commªds
,
cmdÇme
);

7321 
	`sdsä“
(
cmdÇme
);

7322 
	`zä“
(
ı
->
»discmd
);

7323 
	`zä“
(
ı
);

7327 
	`diùR–—£I‹¿tÜ
(
di
);

7328 
	}
}

7332 
	$moduËLßd
(cÚ¡ *
·th
, **
moduË_¬gv
, 
moduË_¬gc
) {

7333 (*
Úlßd
)(*, **, );

7334 *
hªdË
;

7335 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

7336 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

7337 
	`£ËùDb
(
ùx
.
ş›Á
, 0);

7339 
¡©
 
¡
;

7340 ià(
	`¡©
(
·th
, &
¡
) == 0)

7342 ià(!(
¡
.
¡_mode
 & (
S_IXUSR
 | 
S_IXGRP
 | 
S_IXOTH
))) {

7343 
	`£rv”Log
(
LL_WARNING
, "ModuË % çedØlßd: IˆdÛ nÙ havexecu‹…”missiÚs.", 
·th
);

7344  
C_ERR
;

7348 
hªdË
 = 
	`dlİ’
(
·th
,
RTLD_NOW
|
RTLD_LOCAL
);

7349 ià(
hªdË
 =ğ
NULL
) {

7350 
	`£rv”Log
(
LL_WARNING
, "ModuË % çedØlßd: %s", 
·th
, 
	`dË¼Ü
());

7351  
C_ERR
;

7353 
Úlßd
 = ((*)(*, **, ))(è
	`dlsym
(
hªdË
,"RedisModule_OnLoad");

7354 ià(
Úlßd
 =ğ
NULL
) {

7355 
	`dlşo£
(
hªdË
);

7356 
	`£rv”Log
(
LL_WARNING
,

7358 "symbŞ. ModuË‚Ù†ßded.",
·th
);

7359  
C_ERR
;

7361 ià(
	`Úlßd
((*)&
ùx
,
moduË_¬gv
,
moduË_¬gc
è=ğ
REDISMODULE_ERR
) {

7362 ià(
ùx
.
moduË
) {

7363 
	`moduËUÄegi¡”Commªds
(
ùx
.
moduË
);

7364 
	`moduËUÄegi¡”Sh¬edAPI
(
ùx
.
moduË
);

7365 
	`moduËUÄegi¡”U£dAPI
(
ùx
.
moduË
);

7366 
	`moduËF»eModuËSŒuùu»
(
ùx
.
moduË
);

7368 
	`dlşo£
(
hªdË
);

7369 
	`£rv”Log
(
LL_WARNING
,

7370 "ModuË % š™Ÿliz©iÚ faed. ModuË‚Ù†ßded",
·th
);

7371  
C_ERR
;

7375 
	`diùAdd
(
moduËs
,
ùx
.
moduË
->
Çme
,ctx.module);

7376 
ùx
.
moduË
->
blocked_ş›Ás
 = 0;

7377 
ùx
.
moduË
->
hªdË
 = handle;

7378 
	`£rv”Log
(
LL_NOTICE
,"ModuË '%s'†ßded from %s",
ùx
.
moduË
->
Çme
,
·th
);

7380 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MODULE_CHANGE
,

7381 
REDISMODULE_SUBEVENT_MODULE_LOADED
,

7382 
ùx
.
moduË
);

7384 
	`moduËF»eCÚ‹xt
(&
ùx
);

7385  
C_OK
;

7386 
	}
}

7395 
	$moduËUÆßd
(
sds
 
Çme
) {

7396 
RedisModuË
 *
moduË
 = 
	`diùF‘chV®ue
(
moduËs
,
Çme
);

7398 ià(
moduË
 =ğ
NULL
) {

7399 
”ºo
 = 
ENOENT
;

7400  
REDISMODULE_ERR
;

7401 } ià(
	`li¡L’gth
(
moduË
->
ty³s
)) {

7402 
”ºo
 = 
EBUSY
;

7403  
REDISMODULE_ERR
;

7404 } ià(
	`li¡L’gth
(
moduË
->
u£dby
)) {

7405 
”ºo
 = 
EPERM
;

7406  
REDISMODULE_ERR
;

7407 } ià(
moduË
->
blocked_ş›Ás
) {

7408 
”ºo
 = 
EAGAIN
;

7409  
REDISMODULE_ERR
;

7413 (*
ÚuÆßd
)(*);

7414 
ÚuÆßd
 = ((*)(*))(è
	`dlsym
(
moduË
->
hªdË
, "RedisModule_OnUnload");

7415 ià(
ÚuÆßd
) {

7416 
RedisModuËCtx
 
ùx
 = 
REDISMODULE_CTX_INIT
;

7417 
ùx
.
moduË
 = module;

7418 
ùx
.
ş›Á
 = 
moduËF»eCÚ‹xtReu£dCl›Á
;

7419 
uÆßd_¡©us
 = 
	`ÚuÆßd
((*)&
ùx
);

7420 
	`moduËF»eCÚ‹xt
(&
ùx
);

7422 ià(
uÆßd_¡©us
 =ğ
REDISMODULE_ERR
) {

7423 
	`£rv”Log
(
LL_WARNING
, "ModuË % OnUÆßd faed. UÆßd cªûËd.", 
Çme
);

7424 
”ºo
 = 
ECANCELED
;

7425  
REDISMODULE_ERR
;

7429 
	`moduËF»eAuth’tiÿ‹dCl›Ás
(
moduË
);

7430 
	`moduËUÄegi¡”Commªds
(
moduË
);

7431 
	`moduËUÄegi¡”Sh¬edAPI
(
moduË
);

7432 
	`moduËUÄegi¡”U£dAPI
(
moduË
);

7433 
	`moduËUÄegi¡”F‹rs
(
moduË
);

7436 
	`moduËUnsubsüibeNÙifiÿtiÚs
(
moduË
);

7437 
	`moduËUnsubsüibeAÎS”v”Ev’ts
(
moduË
);

7440 ià(
	`dlşo£
(
moduË
->
hªdË
) == -1) {

7441 *
”rÜ
 = 
	`dË¼Ü
();

7442 ià(
”rÜ
 =ğ
NULL
)ƒrror = "Unknownƒrror";

7443 
	`£rv”Log
(
LL_WARNING
,"Error whenryingo closehe %s module: %s",

7444 
moduË
->
Çme
, 
”rÜ
);

7448 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MODULE_CHANGE
,

7449 
REDISMODULE_SUBEVENT_MODULE_UNLOADED
,

7450 
moduË
);

7453 
	`£rv”Log
(
LL_NOTICE
,"ModuË % uÆßded",
moduË
->
Çme
);

7454 
	`diùD–‘e
(
moduËs
,
moduË
->
Çme
);

7455 
moduË
->
Çme
 = 
NULL
;

7456 
	`moduËF»eModuËSŒuùu»
(
moduË
);

7458  
REDISMODULE_OK
;

7459 
	}
}

7463 
	$addR•lyLßdedModuËs
(
ş›Á
 *
c
) {

7464 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

7465 
diùEÁry
 *
de
;

7467 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
moduËs
));

7468 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

7469 
sds
 
Çme
 = 
	`diùG‘Key
(
de
);

7470 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

7471 
	`addR•lyM­L’
(
c
,2);

7472 
	`addR•lyBulkCSŒšg
(
c
,"name");

7473 
	`addR•lyBulkCBufãr
(
c
,
Çme
,
	`sd¦’
(name));

7474 
	`addR•lyBulkCSŒšg
(
c
,"ver");

7475 
	`addR•lyLÚgLÚg
(
c
,
moduË
->
v”
);

7477 
	`diùR–—£I‹¿tÜ
(
di
);

7478 
	}
}

7482 
sds
 
	$g’ModuËsInfoSŒšgR’d”ModuËsLi¡
(
li¡
 *
l
) {

7483 
li¡I‹r
 
li
;

7484 
li¡Node
 *
Ê
;

7485 
	`li¡Rewšd
(
l
,&
li
);

7486 
sds
 
ouut
 = 
	`sd¢ew
("[");

7487 (
Ê
 = 
	`li¡Next
(&
li
))) {

7488 
RedisModuË
 *
moduË
 = 
Ê
->
v®ue
;

7489 
ouut
 = 
	`sdsÿt
(ouut,
moduË
->
Çme
);

7491 
ouut
 = 
	`sd¡rim
(output,"|");

7492 
ouut
 = 
	`sdsÿt
(output,"]");

7493  
ouut
;

7494 
	}
}

7497 
sds
 
	$g’ModuËsInfoSŒšgR’d”ModuËO±iÚs
(
RedisModuË
 *
moduË
) {

7498 
sds
 
ouut
 = 
	`sd¢ew
("[");

7499 ià(
moduË
->
İtiÚs
 & 
REDISMODULE_OPTIONS_HANDLE_IO_ERRORS
)

7500 
ouut
 = 
	`sdsÿt
(output,"handle-io-errors|");

7501 
ouut
 = 
	`sd¡rim
(output,"|");

7502 
ouut
 = 
	`sdsÿt
(output,"]");

7503  
ouut
;

7504 
	}
}

7512 
sds
 
	$g’ModuËsInfoSŒšg
(
sds
 
šfo
) {

7513 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
moduËs
);

7514 
diùEÁry
 *
de
;

7516 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

7517 
sds
 
Çme
 = 
	`diùG‘Key
(
de
);

7518 
RedisModuË
 *
moduË
 = 
	`diùG‘V®
(
de
);

7520 
sds
 
u£dby
 = 
	`g’ModuËsInfoSŒšgR’d”ModuËsLi¡
(
moduË
->usedby);

7521 
sds
 
usšg
 = 
	`g’ModuËsInfoSŒšgR’d”ModuËsLi¡
(
moduË
->using);

7522 
sds
 
İtiÚs
 = 
	`g’ModuËsInfoSŒšgR’d”ModuËO±iÚs
(
moduË
);

7523 
šfo
 = 
	`sdsÿtfmt
(info,

7526 
Çme
, 
moduË
->
v”
, moduË->
­iv”
,

7527 ()
	`li¡L’gth
(
moduË
->
f‹rs
), 
u£dby
, 
usšg
, 
İtiÚs
);

7528 
	`sdsä“
(
u£dby
);

7529 
	`sdsä“
(
usšg
);

7530 
	`sdsä“
(
İtiÚs
);

7532 
	`diùR–—£I‹¿tÜ
(
di
);

7533  
šfo
;

7534 
	}
}

7539 
	$moduËCommªd
(
ş›Á
 *
c
) {

7540 *
subcmd
 = 
c
->
¬gv
[1]->
±r
;

7541 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(
subcmd
,"help")) {

7542 cÚ¡ *
h–p
[] = {

7546 
NULL


7548 
	`addR•lyH–p
(
c
, 
h–p
);

7550 ià(!
	`¡rÿ£cmp
(
subcmd
,"lßd"è&& 
c
->
¬gc
 >= 3) {

7551 
robj
 **
¬gv
 = 
NULL
;

7552 
¬gc
 = 0;

7554 ià(
c
->
¬gc
 > 3) {

7555 
¬gc
 = 
c
->argc - 3;

7556 
¬gv
 = &
c
->argv[3];

7559 ià(
	`moduËLßd
(
c
->
¬gv
[2]->
±r
,(**ïrgv,
¬gc
è=ğ
C_OK
)

7560 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

7562 
	`addR•lyE¼Ü
(
c
,

7564 } ià(!
	`¡rÿ£cmp
(
subcmd
,"uÆßd"è&& 
c
->
¬gc
 == 3) {

7565 ià(
	`moduËUÆßd
(
c
->
¬gv
[2]->
±r
è=ğ
C_OK
)

7566 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

7568 *
”rmsg
;

7569 
”ºo
) {

7570 
ENOENT
:

7571 
”rmsg
 = "no such module withhat‚ame";

7573 
EBUSY
:

7574 
”rmsg
 = "the moduleƒxports one or more module-side data "

7577 
EPERM
:

7578 
”rmsg
 = "the moduleƒxports APIs used by other modules. "

7581 
EAGAIN
:

7582 
”rmsg
 = "the module has blocked clients. "

7586 
”rmsg
 = "operation‚ot…ossible.";

7589 
	`addR•lyE¼ÜFÜm©
(
c
,"E¼Ü uÆßdšg moduË: %s",
”rmsg
);

7591 } ià(!
	`¡rÿ£cmp
(
subcmd
,"li¡"è&& 
c
->
¬gc
 == 2) {

7592 
	`addR•lyLßdedModuËs
(
c
);

7594 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

7597 
	}
}

7600 
size_t
 
	$moduËCouÁ
() {

7601  
	`diùSize
(
moduËs
);

7602 
	}
}

7607 
	$RM_S‘LRU
(
RedisModuËKey
 *
key
, 
m¡ime_t
 
Ìu_idË
) {

7608 ià(!
key
->
v®ue
)

7609  
REDISMODULE_ERR
;

7610 ià(
	`objeùS‘LRUOrLFU
(
key
->
v®ue
, -1, 
Ìu_idË
,†ru_idË>=0 ? 
	`LRU_CLOCK
() : 0, 1))

7611  
REDISMODULE_OK
;

7612  
REDISMODULE_ERR
;

7613 
	}
}

7619 
	$RM_G‘LRU
(
RedisModuËKey
 *
key
, 
m¡ime_t
 *
Ìu_idË
) {

7620 *
Ìu_idË
 = -1;

7621 ià(!
key
->
v®ue
)

7622  
REDISMODULE_ERR
;

7623 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
)

7624  
REDISMODULE_OK
;

7625 *
Ìu_idË
 = 
	`e¡im©eObjeùIdËTime
(
key
->
v®ue
);

7626  
REDISMODULE_OK
;

7627 
	}
}

7634 
	$RM_S‘LFU
(
RedisModuËKey
 *
key
, 
lfu_äeq
) {

7635 ià(!
key
->
v®ue
)

7636  
REDISMODULE_ERR
;

7637 ià(
	`objeùS‘LRUOrLFU
(
key
->
v®ue
, 
lfu_äeq
, -1, 0, 1))

7638  
REDISMODULE_OK
;

7639  
REDISMODULE_ERR
;

7640 
	}
}

7645 
	$RM_G‘LFU
(
RedisModuËKey
 *
key
, *
lfu_äeq
) {

7646 *
lfu_äeq
 = -1;

7647 ià(!
key
->
v®ue
)

7648  
REDISMODULE_ERR
;

7649 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
)

7650 *
lfu_äeq
 = 
	`LFUDeüAndR‘uº
(
key
->
v®ue
);

7651  
REDISMODULE_OK
;

7652 
	}
}

7671 
	$RM_ModuËTy³R•ÏûV®ue
(
RedisModuËKey
 *
key
, 
moduËTy³
 *
mt
, *
Ãw_v®ue
, **
Şd_v®ue
) {

7672 ià(!(
key
->
mode
 & 
REDISMODULE_WRITE
è|| key->
™”
)

7673  
REDISMODULE_ERR
;

7674 ià(!
key
->
v®ue
 || key->v®ue->
ty³
 !ğ
OBJ_MODULE
)

7675  
REDISMODULE_ERR
;

7677 
moduËV®ue
 *
mv
 = 
key
->
v®ue
->
±r
;

7678 ià(
mv
->
ty³
 !ğ
mt
)

7679  
REDISMODULE_ERR
;

7681 ià(
Şd_v®ue
)

7682 *
Şd_v®ue
 = 
mv
->
v®ue
;

7683 
mv
->
v®ue
 = 
Ãw_v®ue
;

7685  
REDISMODULE_OK
;

7686 
	}
}

7690 
	$moduËRegi¡”CÜeAPI
() {

7691 
£rv”
.
moduË­i
 = 
	`diùC»©e
(&
moduËAPIDiùTy³
,
NULL
);

7692 
£rv”
.
sh¬ed­i
 = 
	`diùC»©e
(&
moduËAPIDiùTy³
,
NULL
);

7693 
	`REGISTER_API
(
AÎoc
);

7694 
	`REGISTER_API
(
C®loc
);

7695 
	`REGISTER_API
(
R—Îoc
);

7696 
	`REGISTER_API
(
F»e
);

7697 
	`REGISTER_API
(
SŒdup
);

7698 
	`REGISTER_API
(
C»©eCommªd
);

7699 
	`REGISTER_API
(
S‘ModuËA‰ribs
);

7700 
	`REGISTER_API
(
IsModuËNameBusy
);

7701 
	`REGISTER_API
(
WrÚgAr™y
);

7702 
	`REGISTER_API
(
R•lyW™hLÚgLÚg
);

7703 
	`REGISTER_API
(
R•lyW™hE¼Ü
);

7704 
	`REGISTER_API
(
R•lyW™hSim¶eSŒšg
);

7705 
	`REGISTER_API
(
R•lyW™hA¼ay
);

7706 
	`REGISTER_API
(
R•lyW™hNuÎA¼ay
);

7707 
	`REGISTER_API
(
R•lyW™hEm±yA¼ay
);

7708 
	`REGISTER_API
(
R•lyS‘A¼ayL’gth
);

7709 
	`REGISTER_API
(
R•lyW™hSŒšg
);

7710 
	`REGISTER_API
(
R•lyW™hEm±ySŒšg
);

7711 
	`REGISTER_API
(
R•lyW™hV”b©imSŒšg
);

7712 
	`REGISTER_API
(
R•lyW™hSŒšgBufãr
);

7713 
	`REGISTER_API
(
R•lyW™hCSŒšg
);

7714 
	`REGISTER_API
(
R•lyW™hNuÎ
);

7715 
	`REGISTER_API
(
R•lyW™hC®lR•ly
);

7716 
	`REGISTER_API
(
R•lyW™hDoubË
);

7717 
	`REGISTER_API
(
R•lyW™hLÚgDoubË
);

7718 
	`REGISTER_API
(
G‘S–eùedDb
);

7719 
	`REGISTER_API
(
S–eùDb
);

7720 
	`REGISTER_API
(
O³nKey
);

7721 
	`REGISTER_API
(
Clo£Key
);

7722 
	`REGISTER_API
(
KeyTy³
);

7723 
	`REGISTER_API
(
V®ueL’gth
);

7724 
	`REGISTER_API
(
Li¡Push
);

7725 
	`REGISTER_API
(
Li¡Pİ
);

7726 
	`REGISTER_API
(
SŒšgToLÚgLÚg
);

7727 
	`REGISTER_API
(
SŒšgToDoubË
);

7728 
	`REGISTER_API
(
SŒšgToLÚgDoubË
);

7729 
	`REGISTER_API
(
C®l
);

7730 
	`REGISTER_API
(
C®lR•lyPrÙo
);

7731 
	`REGISTER_API
(
F»eC®lR•ly
);

7732 
	`REGISTER_API
(
C®lR•lyIÁeg”
);

7733 
	`REGISTER_API
(
C®lR•lyTy³
);

7734 
	`REGISTER_API
(
C®lR•lyL’gth
);

7735 
	`REGISTER_API
(
C®lR•lyA¼ayEËm’t
);

7736 
	`REGISTER_API
(
C®lR•lySŒšgPŒ
);

7737 
	`REGISTER_API
(
C»©eSŒšgFromC®lR•ly
);

7738 
	`REGISTER_API
(
C»©eSŒšg
);

7739 
	`REGISTER_API
(
C»©eSŒšgFromLÚgLÚg
);

7740 
	`REGISTER_API
(
C»©eSŒšgFromDoubË
);

7741 
	`REGISTER_API
(
C»©eSŒšgFromLÚgDoubË
);

7742 
	`REGISTER_API
(
C»©eSŒšgFromSŒšg
);

7743 
	`REGISTER_API
(
C»©eSŒšgPrštf
);

7744 
	`REGISTER_API
(
F»eSŒšg
);

7745 
	`REGISTER_API
(
SŒšgPŒL’
);

7746 
	`REGISTER_API
(
AutoMemÜy
);

7747 
	`REGISTER_API
(
R•liÿ‹
);

7748 
	`REGISTER_API
(
R•liÿ‹V”b©im
);

7749 
	`REGISTER_API
(
D–‘eKey
);

7750 
	`REGISTER_API
(
UÆškKey
);

7751 
	`REGISTER_API
(
SŒšgS‘
);

7752 
	`REGISTER_API
(
SŒšgDMA
);

7753 
	`REGISTER_API
(
SŒšgTrunÿ‹
);

7754 
	`REGISTER_API
(
S‘Expœe
);

7755 
	`REGISTER_API
(
G‘Expœe
);

7756 
	`REGISTER_API
(
Re£tD©a£t
);

7757 
	`REGISTER_API
(
DbSize
);

7758 
	`REGISTER_API
(
RªdomKey
);

7759 
	`REGISTER_API
(
Z£tAdd
);

7760 
	`REGISTER_API
(
Z£tInüby
);

7761 
	`REGISTER_API
(
Z£tScÜe
);

7762 
	`REGISTER_API
(
Z£tRem
);

7763 
	`REGISTER_API
(
Z£tRªgeStİ
);

7764 
	`REGISTER_API
(
Z£tFœ¡InScÜeRªge
);

7765 
	`REGISTER_API
(
Z£tLa¡InScÜeRªge
);

7766 
	`REGISTER_API
(
Z£tFœ¡InLexRªge
);

7767 
	`REGISTER_API
(
Z£tLa¡InLexRªge
);

7768 
	`REGISTER_API
(
Z£tRªgeCu¼’tEËm’t
);

7769 
	`REGISTER_API
(
Z£tRªgeNext
);

7770 
	`REGISTER_API
(
Z£tRªgeP»v
);

7771 
	`REGISTER_API
(
Z£tRªgeEndR—ched
);

7772 
	`REGISTER_API
(
HashS‘
);

7773 
	`REGISTER_API
(
HashG‘
);

7774 
	`REGISTER_API
(
IsKeysPos™iÚReque¡
);

7775 
	`REGISTER_API
(
KeyAtPos
);

7776 
	`REGISTER_API
(
G‘Cl›ÁId
);

7777 
	`REGISTER_API
(
G‘CÚ‹xtFÏgs
);

7778 
	`REGISTER_API
(
AvoidR•liÿT¿ffic
);

7779 
	`REGISTER_API
(
PoŞAÎoc
);

7780 
	`REGISTER_API
(
C»©eD©aTy³
);

7781 
	`REGISTER_API
(
ModuËTy³S‘V®ue
);

7782 
	`REGISTER_API
(
ModuËTy³R•ÏûV®ue
);

7783 
	`REGISTER_API
(
ModuËTy³G‘Ty³
);

7784 
	`REGISTER_API
(
ModuËTy³G‘V®ue
);

7785 
	`REGISTER_API
(
IsIOE¼Ü
);

7786 
	`REGISTER_API
(
S‘ModuËO±iÚs
);

7787 
	`REGISTER_API
(
SigÇlModif›dKey
);

7788 
	`REGISTER_API
(
SaveUnsigÃd
);

7789 
	`REGISTER_API
(
LßdUnsigÃd
);

7790 
	`REGISTER_API
(
SaveSigÃd
);

7791 
	`REGISTER_API
(
LßdSigÃd
);

7792 
	`REGISTER_API
(
SaveSŒšg
);

7793 
	`REGISTER_API
(
SaveSŒšgBufãr
);

7794 
	`REGISTER_API
(
LßdSŒšg
);

7795 
	`REGISTER_API
(
LßdSŒšgBufãr
);

7796 
	`REGISTER_API
(
SaveDoubË
);

7797 
	`REGISTER_API
(
LßdDoubË
);

7798 
	`REGISTER_API
(
SaveFlßt
);

7799 
	`REGISTER_API
(
LßdFlßt
);

7800 
	`REGISTER_API
(
SaveLÚgDoubË
);

7801 
	`REGISTER_API
(
LßdLÚgDoubË
);

7802 
	`REGISTER_API
(
SaveD©aTy³ToSŒšg
);

7803 
	`REGISTER_API
(
LßdD©aTy³FromSŒšg
);

7804 
	`REGISTER_API
(
Em™AOF
);

7805 
	`REGISTER_API
(
Log
);

7806 
	`REGISTER_API
(
LogIOE¼Ü
);

7807 
	`REGISTER_API
(
_As£¹
);

7808 
	`REGISTER_API
(
L©’cyAddSam¶e
);

7809 
	`REGISTER_API
(
SŒšgAµ’dBufãr
);

7810 
	`REGISTER_API
(
R‘ašSŒšg
);

7811 
	`REGISTER_API
(
SŒšgCom·»
);

7812 
	`REGISTER_API
(
G‘CÚ‹xtFromIO
);

7813 
	`REGISTER_API
(
G‘KeyNameFromIO
);

7814 
	`REGISTER_API
(
G‘KeyNameFromModuËKey
);

7815 
	`REGISTER_API
(
BlockCl›Á
);

7816 
	`REGISTER_API
(
UnblockCl›Á
);

7817 
	`REGISTER_API
(
IsBlockedR•lyReque¡
);

7818 
	`REGISTER_API
(
IsBlockedTimeoutReque¡
);

7819 
	`REGISTER_API
(
G‘BlockedCl›ÁPriv©eD©a
);

7820 
	`REGISTER_API
(
AbÜtBlock
);

7821 
	`REGISTER_API
(
Mli£cÚds
);

7822 
	`REGISTER_API
(
G‘Th»adSaãCÚ‹xt
);

7823 
	`REGISTER_API
(
F»eTh»adSaãCÚ‹xt
);

7824 
	`REGISTER_API
(
Th»adSaãCÚ‹xtLock
);

7825 
	`REGISTER_API
(
Th»adSaãCÚ‹xtUÆock
);

7826 
	`REGISTER_API
(
Dige¡AddSŒšgBufãr
);

7827 
	`REGISTER_API
(
Dige¡AddLÚgLÚg
);

7828 
	`REGISTER_API
(
Dige¡EndSequ’û
);

7829 
	`REGISTER_API
(
NÙifyKey¥aûEv’t
);

7830 
	`REGISTER_API
(
G‘NÙifyKey¥aûEv’ts
);

7831 
	`REGISTER_API
(
SubsüibeToKey¥aûEv’ts
);

7832 
	`REGISTER_API
(
Regi¡”Clu¡”Mes§geReûiv”
);

7833 
	`REGISTER_API
(
S’dClu¡”Mes§ge
);

7834 
	`REGISTER_API
(
G‘Clu¡”NodeInfo
);

7835 
	`REGISTER_API
(
G‘Clu¡”NodesLi¡
);

7836 
	`REGISTER_API
(
F»eClu¡”NodesLi¡
);

7837 
	`REGISTER_API
(
C»©eTim”
);

7838 
	`REGISTER_API
(
StİTim”
);

7839 
	`REGISTER_API
(
G‘Tim”Info
);

7840 
	`REGISTER_API
(
G‘MyClu¡”ID
);

7841 
	`REGISTER_API
(
G‘Clu¡”Size
);

7842 
	`REGISTER_API
(
G‘RªdomBy‹s
);

7843 
	`REGISTER_API
(
G‘RªdomHexCh¬s
);

7844 
	`REGISTER_API
(
BlockedCl›ÁDiscÚÃùed
);

7845 
	`REGISTER_API
(
S‘DiscÚÃùC®lback
);

7846 
	`REGISTER_API
(
G‘BlockedCl›ÁHªdË
);

7847 
	`REGISTER_API
(
S‘Clu¡”FÏgs
);

7848 
	`REGISTER_API
(
C»©eDiù
);

7849 
	`REGISTER_API
(
F»eDiù
);

7850 
	`REGISTER_API
(
DiùSize
);

7851 
	`REGISTER_API
(
DiùS‘C
);

7852 
	`REGISTER_API
(
DiùR•ÏûC
);

7853 
	`REGISTER_API
(
DiùS‘
);

7854 
	`REGISTER_API
(
DiùR•Ïû
);

7855 
	`REGISTER_API
(
DiùG‘C
);

7856 
	`REGISTER_API
(
DiùG‘
);

7857 
	`REGISTER_API
(
DiùD–C
);

7858 
	`REGISTER_API
(
DiùD–
);

7859 
	`REGISTER_API
(
DiùI‹¿tÜS¹C
);

7860 
	`REGISTER_API
(
DiùI‹¿tÜS¹
);

7861 
	`REGISTER_API
(
DiùI‹¿tÜStİ
);

7862 
	`REGISTER_API
(
DiùI‹¿tÜRe£ekC
);

7863 
	`REGISTER_API
(
DiùI‹¿tÜRe£ek
);

7864 
	`REGISTER_API
(
DiùNextC
);

7865 
	`REGISTER_API
(
DiùP»vC
);

7866 
	`REGISTER_API
(
DiùNext
);

7867 
	`REGISTER_API
(
DiùP»v
);

7868 
	`REGISTER_API
(
DiùCom·»C
);

7869 
	`REGISTER_API
(
DiùCom·»
);

7870 
	`REGISTER_API
(
ExpÜtSh¬edAPI
);

7871 
	`REGISTER_API
(
G‘Sh¬edAPI
);

7872 
	`REGISTER_API
(
Regi¡”CommªdF‹r
);

7873 
	`REGISTER_API
(
UÄegi¡”CommªdF‹r
);

7874 
	`REGISTER_API
(
CommªdF‹rArgsCouÁ
);

7875 
	`REGISTER_API
(
CommªdF‹rArgG‘
);

7876 
	`REGISTER_API
(
CommªdF‹rArgIn£¹
);

7877 
	`REGISTER_API
(
CommªdF‹rArgR•Ïû
);

7878 
	`REGISTER_API
(
CommªdF‹rArgD–‘e
);

7879 
	`REGISTER_API
(
FÜk
);

7880 
	`REGISTER_API
(
Ex™FromChd
);

7881 
	`REGISTER_API
(
KlFÜkChd
);

7882 
	`REGISTER_API
(
Regi¡”InfoFunc
);

7883 
	`REGISTER_API
(
InfoAddSeùiÚ
);

7884 
	`REGISTER_API
(
InfoBegšDiùF›ld
);

7885 
	`REGISTER_API
(
InfoEndDiùF›ld
);

7886 
	`REGISTER_API
(
InfoAddF›ldSŒšg
);

7887 
	`REGISTER_API
(
InfoAddF›ldCSŒšg
);

7888 
	`REGISTER_API
(
InfoAddF›ldDoubË
);

7889 
	`REGISTER_API
(
InfoAddF›ldLÚgLÚg
);

7890 
	`REGISTER_API
(
InfoAddF›ldULÚgLÚg
);

7891 
	`REGISTER_API
(
G‘S”v”Info
);

7892 
	`REGISTER_API
(
F»eS”v”Info
);

7893 
	`REGISTER_API
(
S”v”InfoG‘F›ld
);

7894 
	`REGISTER_API
(
S”v”InfoG‘F›ldC
);

7895 
	`REGISTER_API
(
S”v”InfoG‘F›ldSigÃd
);

7896 
	`REGISTER_API
(
S”v”InfoG‘F›ldUnsigÃd
);

7897 
	`REGISTER_API
(
S”v”InfoG‘F›ldDoubË
);

7898 
	`REGISTER_API
(
G‘Cl›ÁInfoById
);

7899 
	`REGISTER_API
(
PublishMes§ge
);

7900 
	`REGISTER_API
(
SubsüibeToS”v”Ev’t
);

7901 
	`REGISTER_API
(
S‘LRU
);

7902 
	`REGISTER_API
(
G‘LRU
);

7903 
	`REGISTER_API
(
S‘LFU
);

7904 
	`REGISTER_API
(
G‘LFU
);

7905 
	`REGISTER_API
(
BlockCl›ÁOnKeys
);

7906 
	`REGISTER_API
(
SigÇlKeyAsR—dy
);

7907 
	`REGISTER_API
(
G‘BlockedCl›ÁR—dyKey
);

7908 
	`REGISTER_API
(
G‘U£dMemÜyR©io
);

7909 
	`REGISTER_API
(
M®locSize
);

7910 
	`REGISTER_API
(
SÿnCursÜC»©e
);

7911 
	`REGISTER_API
(
SÿnCursÜDe¡roy
);

7912 
	`REGISTER_API
(
SÿnCursÜRe¡¬t
);

7913 
	`REGISTER_API
(
Sÿn
);

7914 
	`REGISTER_API
(
SÿnKey
);

7915 
	`REGISTER_API
(
C»©eModuËU£r
);

7916 
	`REGISTER_API
(
S‘ModuËU£rACL
);

7917 
	`REGISTER_API
(
F»eModuËU£r
);

7918 
	`REGISTER_API
(
D—uth’tiÿ‹AndClo£Cl›Á
);

7919 
	`REGISTER_API
(
Auth’tiÿ‹Cl›ÁW™hACLU£r
);

7920 
	`REGISTER_API
(
Auth’tiÿ‹Cl›ÁW™hU£r
);

7921 
	}
}

	@multi.c

30 
	~"£rv”.h
"

35 
	$š™Cl›ÁMuÉiS‹
(
ş›Á
 *
c
) {

36 
c
->
m¡©e
.
commªds
 = 
NULL
;

37 
c
->
m¡©e
.
couÁ
 = 0;

38 
c
->
m¡©e
.
cmd_æags
 = 0;

39 
	}
}

42 
	$ä“Cl›ÁMuÉiS‹
(
ş›Á
 *
c
) {

43 
j
;

45 
j
 = 0; j < 
c
->
m¡©e
.
couÁ
; j++) {

46 
i
;

47 
muÉiCmd
 *
mc
 = 
c
->
m¡©e
.
commªds
+
j
;

49 
i
 = 0; i < 
mc
->
¬gc
; i++)

50 
	`deüRefCouÁ
(
mc
->
¬gv
[
i
]);

51 
	`zä“
(
mc
->
¬gv
);

53 
	`zä“
(
c
->
m¡©e
.
commªds
);

54 
	}
}

57 
	$queueMuÉiCommªd
(
ş›Á
 *
c
) {

58 
muÉiCmd
 *
mc
;

59 
j
;

61 
c
->
m¡©e
.
commªds
 = 
	`z»®loc
(c->mstate.commands,

62 (
muÉiCmd
)*(
c
->
m¡©e
.
couÁ
+1));

63 
mc
 = 
c
->
m¡©e
.
commªds
+c->m¡©e.
couÁ
;

64 
mc
->
cmd
 = 
c
->cmd;

65 
mc
->
¬gc
 = 
c
->argc;

66 
mc
->
¬gv
 = 
	`zm®loc
((
robj
*)*
c
->
¬gc
);

67 
	`memıy
(
mc
->
¬gv
,
c
->¬gv,(
robj
*)*c->
¬gc
);

68 
j
 = 0; j < 
c
->
¬gc
; j++)

69 
	`šüRefCouÁ
(
mc
->
¬gv
[
j
]);

70 
c
->
m¡©e
.
couÁ
++;

71 
c
->
m¡©e
.
cmd_æags
 |ğc->
cmd
->
æags
;

72 
	}
}

74 
	$disÿrdT¿n§ùiÚ
(
ş›Á
 *
c
) {

75 
	`ä“Cl›ÁMuÉiS‹
(
c
);

76 
	`š™Cl›ÁMuÉiS‹
(
c
);

77 
c
->
æags
 &ğ~(
CLIENT_MULTI
|
CLIENT_DIRTY_CAS
|
CLIENT_DIRTY_EXEC
);

78 
	`unw©chAÎKeys
(
c
);

79 
	}
}

83 
	$æagT¿n§ùiÚ
(
ş›Á
 *
c
) {

84 ià(
c
->
æags
 & 
CLIENT_MULTI
)

85 
c
->
æags
 |ğ
CLIENT_DIRTY_EXEC
;

86 
	}
}

88 
	$muÉiCommªd
(
ş›Á
 *
c
) {

89 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

90 
	`addR•lyE¼Ü
(
c
,"MULTI calls can‚ot be‚ested");

93 
c
->
æags
 |ğ
CLIENT_MULTI
;

94 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

95 
	}
}

97 
	$disÿrdCommªd
(
ş›Á
 *
c
) {

98 ià(!(
c
->
æags
 & 
CLIENT_MULTI
)) {

99 
	`addR•lyE¼Ü
(
c
,"DISCARD without MULTI");

102 
	`disÿrdT¿n§ùiÚ
(
c
);

103 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

104 
	}
}

108 
	$execCommªdPrİag©eMuÉi
(
ş›Á
 *
c
) {

109 
	`´İag©e
(
£rv”
.
muÉiCommªd
,
c
->
db
->
id
,&
sh¬ed
.
muÉi
,1,

110 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

111 
	}
}

113 
	$execCommªdPrİag©eExec
(
ş›Á
 *
c
) {

114 
	`´İag©e
(
£rv”
.
execCommªd
,
c
->
db
->
id
,&
sh¬ed
.
exec
,1,

115 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

116 
	}
}

118 
	$execCommªd
(
ş›Á
 *
c
) {

119 
j
;

120 
robj
 **
Üig_¬gv
;

121 
Üig_¬gc
;

122 
»disCommªd
 *
Üig_cmd
;

123 
mu¡_´İag©e
 = 0;

124 
was_ma¡”
 = 
£rv”
.
ma¡”ho¡
 =ğ
NULL
;

126 ià(!(
c
->
æags
 & 
CLIENT_MULTI
)) {

127 
	`addR•lyE¼Ü
(
c
,"EXEC without MULTI");

137 ià(
c
->
æags
 & (
CLIENT_DIRTY_CAS
|
CLIENT_DIRTY_EXEC
)) {

138 
	`addR•ly
(
c
, c->
æags
 & 
CLIENT_DIRTY_EXEC
 ? 
sh¬ed
.
exeÿbÜ‹¼
 :

139 
sh¬ed
.
nuÎ¬¿y
[
c
->
»¥
]);

140 
	`disÿrdT¿n§ùiÚ
(
c
);

141 
hªdË_mÚ™Ü
;

149 ià(!
£rv”
.
lßdšg
 && s”v”.
ma¡”ho¡
 && s”v”.
»¶_¦ave_ro
 &&

150 !(
c
->
æags
 & 
CLIENT_MASTER
è&& c->
m¡©e
.
cmd_æags
 & 
CMD_WRITE
)

152 
	`addR•lyE¼Ü
(
c
,

155 
	`disÿrdT¿n§ùiÚ
(
c
);

156 
hªdË_mÚ™Ü
;

160 
	`unw©chAÎKeys
(
c
);

161 
Üig_¬gv
 = 
c
->
¬gv
;

162 
Üig_¬gc
 = 
c
->
¬gc
;

163 
Üig_cmd
 = 
c
->
cmd
;

164 
	`addR•lyA¼ayL’
(
c
,c->
m¡©e
.
couÁ
);

165 
j
 = 0; j < 
c
->
m¡©e
.
couÁ
; j++) {

166 
c
->
¬gc
 = c->
m¡©e
.
commªds
[
j
].argc;

167 
c
->
¬gv
 = c->
m¡©e
.
commªds
[
j
].argv;

168 
c
->
cmd
 = c->
m¡©e
.
commªds
[
j
].cmd;

175 ià(!
mu¡_´İag©e
 &&

176 !
£rv”
.
lßdšg
 &&

177 !(
c
->
cmd
->
æags
 & (
CMD_READONLY
|
CMD_ADMIN
)))

179 
	`execCommªdPrİag©eMuÉi
(
c
);

180 
mu¡_´İag©e
 = 1;

183 
aş_keypos
;

184 
aş_»tv®
 = 
	`ACLCheckCommªdP”m
(
c
,&
aş_keypos
);

185 ià(
aş_»tv®
 !ğ
ACL_OK
) {

186 
	`addACLLogEÁry
(
c
,
aş_»tv®
,
aş_keypos
,
NULL
);

187 
	`addR•lyE¼ÜFÜm©
(
c
,

192 (
aş_»tv®
 =ğ
ACL_DENIED_CMD
) ?

196 
	`ÿÎ
(
c
,
£rv”
.
lßdšg
 ? 
CMD_CALL_NONE
 : 
CMD_CALL_FULL
);

200 
c
->
m¡©e
.
commªds
[
j
].
¬gc
 = c->argc;

201 
c
->
m¡©e
.
commªds
[
j
].
¬gv
 = c->argv;

202 
c
->
m¡©e
.
commªds
[
j
].
cmd
 = c->cmd;

204 
c
->
¬gv
 = 
Üig_¬gv
;

205 
c
->
¬gc
 = 
Üig_¬gc
;

206 
c
->
cmd
 = 
Üig_cmd
;

207 
	`disÿrdT¿n§ùiÚ
(
c
);

211 ià(
mu¡_´İag©e
) {

212 
is_ma¡”
 = 
£rv”
.
ma¡”ho¡
 =ğ
NULL
;

213 
£rv”
.
dœty
++;

219 ià(
£rv”
.
»¶_backlog
 && 
was_ma¡”
 && !
is_ma¡”
) {

220 *
execcmd
 = "*1\r\n$4\r\nEXEC\r\n";

221 
	`ãedR•liÿtiÚBacklog
(
execcmd
,
	`¡¾’
(execcmd));

225 
hªdË_mÚ™Ü
:

231 ià(
	`li¡L’gth
(
£rv”
.
mÚ™Üs
è&& !£rv”.
lßdšg
)

232 
	`»¶iÿtiÚF“dMÚ™Üs
(
c
,
£rv”
.
mÚ™Üs
,c->
db
->
id
,c->
¬gv
,c->
¬gc
);

233 
	}
}

247 
	sw©chedKey
 {

248 
robj
 *
	mkey
;

249 
»disDb
 *
	mdb
;

250 } 
	tw©chedKey
;

253 
	$w©chFÜKey
(
ş›Á
 *
c
, 
robj
 *
key
) {

254 
li¡
 *
ş›Ás
 = 
NULL
;

255 
li¡I‹r
 
li
;

256 
li¡Node
 *
Ê
;

257 
w©chedKey
 *
wk
;

260 
	`li¡Rewšd
(
c
->
w©ched_keys
,&
li
);

261 (
Ê
 = 
	`li¡Next
(&
li
))) {

262 
wk
 = 
	`li¡NodeV®ue
(
Ê
);

263 ià(
wk
->
db
 =ğ
c
->db && 
	`equ®SŒšgObjeùs
(
key
,wk->key))

267 
ş›Ás
 = 
	`diùF‘chV®ue
(
c
->
db
->
w©ched_keys
,
key
);

268 ià(!
ş›Ás
) {

269 
ş›Ás
 = 
	`li¡C»©e
();

270 
	`diùAdd
(
c
->
db
->
w©ched_keys
,
key
,
ş›Ás
);

271 
	`šüRefCouÁ
(
key
);

273 
	`li¡AddNodeTa
(
ş›Ás
,
c
);

275 
wk
 = 
	`zm®loc
((*wk));

276 
wk
->
key
 = key;

277 
wk
->
db
 = 
c
->db;

278 
	`šüRefCouÁ
(
key
);

279 
	`li¡AddNodeTa
(
c
->
w©ched_keys
,
wk
);

280 
	}
}

284 
	$unw©chAÎKeys
(
ş›Á
 *
c
) {

285 
li¡I‹r
 
li
;

286 
li¡Node
 *
Ê
;

288 ià(
	`li¡L’gth
(
c
->
w©ched_keys
) == 0) ;

289 
	`li¡Rewšd
(
c
->
w©ched_keys
,&
li
);

290 (
Ê
 = 
	`li¡Next
(&
li
))) {

291 
li¡
 *
ş›Ás
;

292 
w©chedKey
 *
wk
;

296 
wk
 = 
	`li¡NodeV®ue
(
Ê
);

297 
ş›Ás
 = 
	`diùF‘chV®ue
(
wk
->
db
->
w©ched_keys
, wk->
key
);

298 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
ş›Ás
 != NULL);

299 
	`li¡D–Node
(
ş›Ás
,
	`li¡S—rchKey
(ş›Ás,
c
));

301 ià(
	`li¡L’gth
(
ş›Ás
) == 0)

302 
	`diùD–‘e
(
wk
->
db
->
w©ched_keys
, wk->
key
);

304 
	`li¡D–Node
(
c
->
w©ched_keys
,
Ê
);

305 
	`deüRefCouÁ
(
wk
->
key
);

306 
	`zä“
(
wk
);

308 
	}
}

312 
	$touchW©chedKey
(
»disDb
 *
db
, 
robj
 *
key
) {

313 
li¡
 *
ş›Ás
;

314 
li¡I‹r
 
li
;

315 
li¡Node
 *
Ê
;

317 ià(
	`diùSize
(
db
->
w©ched_keys
) == 0) ;

318 
ş›Ás
 = 
	`diùF‘chV®ue
(
db
->
w©ched_keys
, 
key
);

319 ià(!
ş›Ás
) ;

323 
	`li¡Rewšd
(
ş›Ás
,&
li
);

324 (
Ê
 = 
	`li¡Next
(&
li
))) {

325 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

327 
c
->
æags
 |ğ
CLIENT_DIRTY_CAS
;

329 
	}
}

335 
	$touchW©chedKeysOnFlush
(
dbid
) {

336 
li¡I‹r
 
li1
, 
li2
;

337 
li¡Node
 *
Ê
;

340 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li1
);

341 (
Ê
 = 
	`li¡Next
(&
li1
))) {

342 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

343 
	`li¡Rewšd
(
c
->
w©ched_keys
,&
li2
);

344 (
Ê
 = 
	`li¡Next
(&
li2
))) {

345 
w©chedKey
 *
wk
 = 
	`li¡NodeV®ue
(
Ê
);

350 ià(
dbid
 =ğ-1 || 
wk
->
db
->
id
 == dbid) {

351 ià(
	`diùFšd
(
wk
->
db
->
diù
, wk->
key
->
±r
è!ğ
NULL
)

352 
c
->
æags
 |ğ
CLIENT_DIRTY_CAS
;

356 
	}
}

358 
	$w©chCommªd
(
ş›Á
 *
c
) {

359 
j
;

361 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

362 
	`addR•lyE¼Ü
(
c
,"WATCH inside MULTI is‚ot‡llowed");

365 
j
 = 1; j < 
c
->
¬gc
; j++)

366 
	`w©chFÜKey
(
c
,c->
¬gv
[
j
]);

367 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

368 
	}
}

370 
	$unw©chCommªd
(
ş›Á
 *
c
) {

371 
	`unw©chAÎKeys
(
c
);

372 
c
->
æags
 &ğ(~
CLIENT_DIRTY_CAS
);

373 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

374 
	}
}

	@networking.c

30 
	~"£rv”.h
"

31 
	~"©omicv¬.h
"

32 
	~<sys/sock‘.h
>

33 
	~<sys/uio.h
>

34 
	~<m©h.h
>

35 
	~<ùy³.h
>

37 
£tPrÙocŞE¼Ü
(cÚ¡ *
”r¡r
, 
ş›Á
 *
c
);

38 
po¡pÚeCl›ÁR—d
(
ş›Á
 *
c
);

39 
	gProûssšgEv’tsWheBlocked
 = 0;

44 
size_t
 
	$sdsZm®locSize
(
sds
 
s
) {

45 *
sh
 = 
	`sdsAÎocPŒ
(
s
);

46  
	`zm®loc_size
(
sh
);

47 
	}
}

51 
size_t
 
	$g‘SŒšgObjeùSdsU£dMemÜy
(
robj
 *
o
) {

52 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

53 
o
->
’codšg
) {

54 
OBJ_ENCODING_RAW
:  
	`sdsZm®locSize
(
o
->
±r
);

55 
OBJ_ENCODING_EMBSTR
:  
	`zm®loc_size
(
o
)-(
robj
);

58 
	}
}

61 *
	$dupCl›ÁR•lyV®ue
(*
o
) {

62 
ş›ÁR•lyBlock
 *
Şd
 = 
o
;

63 
ş›ÁR•lyBlock
 *
buf
 = 
	`zm®loc
((ş›ÁR•lyBlockè+ 
Şd
->
size
);

64 
	`memıy
(
buf
, 
o
, (
ş›ÁR•lyBlock
è+ 
Şd
->
size
);

65  
buf
;

66 
	}
}

68 
	$ä“Cl›ÁR•lyV®ue
(*
o
) {

69 
	`zä“
(
o
);

70 
	}
}

72 
	$li¡M©chObjeùs
(*
a
, *
b
) {

73  
	`equ®SŒšgObjeùs
(
a
,
b
);

74 
	}
}

78 
	$lškCl›Á
(
ş›Á
 *
c
) {

79 
	`li¡AddNodeTa
(
£rv”
.
ş›Ás
,
c
);

83 
c
->
ş›Á_li¡_node
 = 
	`li¡La¡
(
£rv”
.
ş›Ás
);

84 
ušt64_t
 
id
 = 
	`htÚu64
(
c
->id);

85 
	`¿xIn£¹
(
£rv”
.
ş›Ás_šdex
,(*)&
id
,(id),
c
,
NULL
);

86 
	}
}

88 
ş›Á
 *
	$ü—‹Cl›Á
(
cÚÃùiÚ
 *
cÚn
) {

89 
ş›Á
 *
c
 = 
	`zm®loc
((client));

95 ià(
cÚn
) {

96 
	`cÚnNÚBlock
(
cÚn
);

97 
	`cÚnEÇbËTıNoD–ay
(
cÚn
);

98 ià(
£rv”
.
tık“·live
)

99 
	`cÚnK“pAlive
(
cÚn
,
£rv”
.
tık“·live
);

100 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
»adQu”yFromCl›Á
);

101 
	`cÚnS‘Priv©eD©a
(
cÚn
, 
c
);

104 
	`£ËùDb
(
c
,0);

105 
ušt64_t
 
ş›Á_id
 = ++
£rv”
.
Ãxt_ş›Á_id
;

106 
c
->
id
 = 
ş›Á_id
;

107 
c
->
»¥
 = 2;

108 
c
->
cÚn
 = conn;

109 
c
->
Çme
 = 
NULL
;

110 
c
->
buåos
 = 0;

111 
c
->
qb_pos
 = 0;

112 
c
->
qu”ybuf
 = 
	`sd£m±y
();

113 
c
->
³ndšg_qu”ybuf
 = 
	`sd£m±y
();

114 
c
->
qu”ybuf_³ak
 = 0;

115 
c
->
»qty³
 = 0;

116 
c
->
¬gc
 = 0;

117 
c
->
¬gv
 = 
NULL
;

118 
c
->
cmd
 = c->
Ï¡cmd
 = 
NULL
;

119 
c
->
u£r
 = 
DeçuÉU£r
;

120 
c
->
muÉibulkËn
 = 0;

121 
c
->
bulkËn
 = -1;

122 
c
->
£ÁËn
 = 0;

123 
c
->
æags
 = 0;

124 
c
->
ùime
 = c->
Ï¡š‹¿ùiÚ
 = 
£rv”
.
unixtime
;

127 
c
->
auth’tiÿ‹d
 = (c->
u£r
->
æags
 & 
USER_FLAG_NOPASS
) &&

128 !(
c
->
u£r
->
æags
 & 
USER_FLAG_DISABLED
);

129 
c
->
»¶¡©e
 = 
REPL_STATE_NONE
;

130 
c
->
»¶_put_Úlše_Ú_ack
 = 0;

131 
c
->
»¶off
 = 0;

132 
c
->
»ad_»¶off
 = 0;

133 
c
->
»¶_ack_off
 = 0;

134 
c
->
»¶_ack_time
 = 0;

135 
c
->
¦ave_li¡’šg_pÜt
 = 0;

136 
c
->
¦ave_
[0] = '\0';

137 
c
->
¦ave_ÿ·
 = 
SLAVE_CAPA_NONE
;

138 
c
->
»¶y
 = 
	`li¡C»©e
();

139 
c
->
»¶y_by‹s
 = 0;

140 
c
->
obuf_soá_lim™_»ached_time
 = 0;

141 
	`li¡S‘F»eM‘hod
(
c
->
»¶y
,
ä“Cl›ÁR•lyV®ue
);

142 
	`li¡S‘DupM‘hod
(
c
->
»¶y
,
dupCl›ÁR•lyV®ue
);

143 
c
->
bty³
 = 
BLOCKED_NONE
;

144 
c
->
bpİ
.
timeout
 = 0;

145 
c
->
bpİ
.
keys
 = 
	`diùC»©e
(&
objeùKeyH—pPoš‹rV®ueDiùTy³
,
NULL
);

146 
c
->
bpİ
.
rg‘
 = 
NULL
;

147 
c
->
bpİ
.
x»ad_group
 = 
NULL
;

148 
c
->
bpİ
.
x»ad_cÚsum”
 = 
NULL
;

149 
c
->
bpİ
.
x»ad_group_nßck
 = 0;

150 
c
->
bpİ
.
num»¶iÿs
 = 0;

151 
c
->
bpİ
.
»¶off£t
 = 0;

152 
c
->
woff
 = 0;

153 
c
->
w©ched_keys
 = 
	`li¡C»©e
();

154 
c
->
pubsub_chªÃls
 = 
	`diùC»©e
(&
objeùKeyPoš‹rV®ueDiùTy³
,
NULL
);

155 
c
->
pubsub_·‰”ns
 = 
	`li¡C»©e
();

156 
c
->
³”id
 = 
NULL
;

157 
c
->
ş›Á_li¡_node
 = 
NULL
;

158 
c
->
ş›Á_Œackšg_»dœeùiÚ
 = 0;

159 
c
->
ş›Á_Œackšg_´efixes
 = 
NULL
;

160 
c
->
ş›Á_üÚ_Ï¡_memÜy_u§ge
 = 0;

161 
c
->
ş›Á_üÚ_Ï¡_memÜy_ty³
 = 
CLIENT_TYPE_NORMAL
;

162 
c
->
auth_ÿÎback
 = 
NULL
;

163 
c
->
auth_ÿÎback_´ivd©a
 = 
NULL
;

164 
c
->
auth_moduË
 = 
NULL
;

165 
	`li¡S‘F»eM‘hod
(
c
->
pubsub_·‰”ns
,
deüRefCouÁVoid
);

166 
	`li¡S‘M©chM‘hod
(
c
->
pubsub_·‰”ns
,
li¡M©chObjeùs
);

167 ià(
cÚn
è
	`lškCl›Á
(
c
);

168 
	`š™Cl›ÁMuÉiS‹
(
c
);

169  
c
;

170 
	}
}

179 
	$ş›ÁIn¡®lWr™eHªdËr
(
ş›Á
 *
c
) {

183 ià(!(
c
->
æags
 & 
CLIENT_PENDING_WRITE
) &&

184 (
c
->
»¶¡©e
 =ğ
REPL_STATE_NONE
 ||

185 (
c
->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
 && !c->
»¶_put_Úlše_Ú_ack
)))

193 
c
->
æags
 |ğ
CLIENT_PENDING_WRITE
;

194 
	`li¡AddNodeH—d
(
£rv”
.
ş›Ás_³ndšg_wr™e
,
c
);

196 
	}
}

220 
	$´•¬eCl›ÁToWr™e
(
ş›Á
 *
c
) {

223 ià(
c
->
æags
 & (
CLIENT_LUA
|
CLIENT_MODULE
)è 
C_OK
;

226 ià(
c
->
æags
 & (
CLIENT_REPLY_OFF
|
CLIENT_REPLY_SKIP
)è 
C_ERR
;

230 ià((
c
->
æags
 & 
CLIENT_MASTER
) &&

231 !(
c
->
æags
 & 
CLIENT_MASTER_FORCE_REPLY
)è 
C_ERR
;

233 ià(!
c
->
cÚn
è 
C_ERR
;

237 ià(!
	`ş›ÁHasP’dšgR•l›s
(
c
)è
	`ş›ÁIn¡®lWr™eHªdËr
(c);

240  
C_OK
;

241 
	}
}

247 
	$_addR•lyToBufãr
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
) {

248 
size_t
 
avaabË
 = (
c
->
buf
)-c->
buåos
;

250 ià(
c
->
æags
 & 
CLIENT_CLOSE_AFTER_REPLY
è 
C_OK
;

254 ià(
	`li¡L’gth
(
c
->
»¶y
è> 0è 
C_ERR
;

257 ià(
Ën
 > 
avaabË
è 
C_ERR
;

259 
	`memıy
(
c
->
buf
+c->
buåos
,
s
,
Ën
);

260 
c
->
buåos
+=
Ën
;

261  
C_OK
;

262 
	}
}

264 
	$_addR•lyPrÙoToLi¡
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
) {

265 ià(
c
->
æags
 & 
CLIENT_CLOSE_AFTER_REPLY
) ;

267 
li¡Node
 *
Ê
 = 
	`li¡La¡
(
c
->
»¶y
);

268 
ş›ÁR•lyBlock
 *

 = 
Ê
? 
	`li¡NodeV®ue
Ön): 
NULL
;

275 ià(

) {

278 
size_t
 
ava
 = 

->
size
 -a->
u£d
;

279 
size_t
 
cİy
 = 
ava
 >ğ
Ën
?†en:‡vail;

280 
	`memıy
(

->
buf
 +a->
u£d
, 
s
, 
cİy
);

281 

->
u£d
 +ğ
cİy
;

282 
s
 +ğ
cİy
;

283 
Ën
 -ğ
cİy
;

285 ià(
Ën
) {

288 
size_t
 
size
 = 
Ën
 < 
PROTO_REPLY_CHUNK_BYTES
? PROTO_REPLY_CHUNK_BYTES:†en;

289 

 = 
	`zm®loc
(
size
 + (
ş›ÁR•lyBlock
));

291 

->
size
 = 
	`zm®loc_u§bË
Ñaè- (
ş›ÁR•lyBlock
);

292 

->
u£d
 = 
Ën
;

293 
	`memıy
(

->
buf
, 
s
, 
Ën
);

294 
	`li¡AddNodeTa
(
c
->
»¶y
, 

);

295 
c
->
»¶y_by‹s
 +ğ

->
size
;

297 
	`asyncClo£Cl›ÁOnOuutBufãrLim™R—ched
(
c
);

298 
	}
}

306 
	$addR•ly
(
ş›Á
 *
c
, 
robj
 *
obj
) {

307 ià(
	`´•¬eCl›ÁToWr™e
(
c
è!ğ
C_OK
) ;

309 ià(
	`sdsEncodedObjeù
(
obj
)) {

310 ià(
	`_addR•lyToBufãr
(
c
,
obj
->
±r
,
	`sd¦’
(obj->±r)è!ğ
C_OK
)

311 
	`_addR•lyPrÙoToLi¡
(
c
,
obj
->
±r
,
	`sd¦’
(obj->ptr));

312 } ià(
obj
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

316 
buf
[32];

317 
size_t
 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),()
obj
->
±r
);

318 ià(
	`_addR•lyToBufãr
(
c
,
buf
,
Ën
è!ğ
C_OK
)

319 
	`_addR•lyPrÙoToLi¡
(
c
,
buf
,
Ën
);

321 
	`£rv”Pªic
("Wrong obj->encoding in‡ddReply()");

323 
	}
}

327 
	$addR•lySds
(
ş›Á
 *
c
, 
sds
 
s
) {

328 ià(
	`´•¬eCl›ÁToWr™e
(
c
è!ğ
C_OK
) {

330 
	`sdsä“
(
s
);

333 ià(
	`_addR•lyToBufãr
(
c
,
s
,
	`sd¦’
(s)è!ğ
C_OK
)

334 
	`_addR•lyPrÙoToLi¡
(
c
,
s
,
	`sd¦’
(s));

335 
	`sdsä“
(
s
);

336 
	}
}

346 
	$addR•lyPrÙo
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
) {

347 ià(
	`´•¬eCl›ÁToWr™e
(
c
è!ğ
C_OK
) ;

348 ià(
	`_addR•lyToBufãr
(
c
,
s
,
Ën
è!ğ
C_OK
)

349 
	`_addR•lyPrÙoToLi¡
(
c
,
s
,
Ën
);

350 
	}
}

360 
	$addR•lyE¼ÜL’gth
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
) {

363 ià(!
Ën
 || 
s
[0] !ğ'-'è
	`addR•lyPrÙo
(
c
,"-ERR ",5);

364 
	`addR•lyPrÙo
(
c
,
s
,
Ën
);

365 
	`addR•lyPrÙo
(
c
,"\r\n",2);

377 
ùy³
 = 
	`g‘Cl›ÁTy³
(
c
);

378 ià(
ùy³
 =ğ
CLIENT_TYPE_MASTER
 || cty³ =ğ
CLIENT_TYPE_SLAVE
 || 
c
->
id
 =ğ
CLIENT_ID_AOF
) {

379 *
to
, *
äom
;

381 ià(
c
->
id
 =ğ
CLIENT_ID_AOF
) {

382 
to
 = "AOF-loading-client";

383 
äom
 = "server";

384 } ià(
ùy³
 =ğ
CLIENT_TYPE_MASTER
) {

385 
to
 = "master";

386 
äom
 = "replica";

388 
to
 = "replica";

389 
äom
 = "master";

392 *
cmdÇme
 = 
c
->
Ï¡cmd
 ? c->Ï¡cmd->
Çme
 : "<unknown>";

393 
	`£rv”Log
(
LL_WARNING
,"== CRITICAL == This %s is sending‡nƒrror "

395 "'%s'", 
äom
, 
to
, 
s
, 
cmdÇme
);

396 ià(
ùy³
 =ğ
CLIENT_TYPE_MASTER
 && 
£rv”
.
»¶_backlog
 &&

397 
£rv”
.
»¶_backlog_hi¡Ën
 > 0)

399 
dum¶’
 = 256;

400 ià(
£rv”
.
»¶_backlog_hi¡Ën
 < 
dum¶’
)

401 
dum¶’
 = 
£rv”
.
»¶_backlog_hi¡Ën
;

404 
idx
 =

405 (
£rv”
.
»¶_backlog_idx
 + (£rv”.
»¶_backlog_size
 - 
dum¶’
)) %

406 
£rv”
.
»¶_backlog_size
;

409 
sds
 
dump
 = 
	`sd£m±y
();

410 
dum¶’
) {

411 
thi¦’
 =

412 ((
£rv”
.
»¶_backlog_size
 - 
idx
è< 
dum¶’
) ?

413 (
£rv”
.
»¶_backlog_size
 - 
idx
è: 
dum¶’
;

415 
dump
 = 
	`sdsÿŒ•r
(dump,
£rv”
.
»¶_backlog
+
idx
,
thi¦’
);

416 
dum¶’
 -ğ
thi¦’
;

417 
idx
 = 0;

422 
	`£rv”Log
(
LL_WARNING
,"L©e¡ backlog is: '%s'", 
dump
);

423 
	`sdsä“
(
dump
);

425 
£rv”
.
¡©_uÃx³ùed_”rÜ_»¶›s
++;

427 
	}
}

429 
	$addR•lyE¼Ü
(
ş›Á
 *
c
, cÚ¡ *
”r
) {

430 
	`addR•lyE¼ÜL’gth
(
c
,
”r
,
	`¡¾’
(err));

431 
	}
}

433 
	$addR•lyE¼ÜFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...) {

434 
size_t
 
l
, 
j
;

435 
va_li¡
 
­
;

436 
	`va_¡¬t
(
­
,
fmt
);

437 
sds
 
s
 = 
	`sdsÿtv´štf
(
	`sd£m±y
(),
fmt
,
­
);

438 
	`va_’d
(
­
);

441 
l
 = 
	`sd¦’
(
s
);

442 
j
 = 0; j < 
l
; j++) {

443 ià(
s
[
j
] == '\r' || s[j] == '\n') s[j] = ' ';

445 
	`addR•lyE¼ÜL’gth
(
c
,
s
,
	`sd¦’
(s));

446 
	`sdsä“
(
s
);

447 
	}
}

449 
	$addR•lyStusL’gth
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
) {

450 
	`addR•lyPrÙo
(
c
,"+",1);

451 
	`addR•lyPrÙo
(
c
,
s
,
Ën
);

452 
	`addR•lyPrÙo
(
c
,"\r\n",2);

453 
	}
}

455 
	$addR•lyStus
(
ş›Á
 *
c
, cÚ¡ *
¡©us
) {

456 
	`addR•lyStusL’gth
(
c
,
¡©us
,
	`¡¾’
(status));

457 
	}
}

459 
	$addR•lyStusFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...) {

460 
va_li¡
 
­
;

461 
	`va_¡¬t
(
­
,
fmt
);

462 
sds
 
s
 = 
	`sdsÿtv´štf
(
	`sd£m±y
(),
fmt
,
­
);

463 
	`va_’d
(
­
);

464 
	`addR•lyStusL’gth
(
c
,
s
,
	`sd¦’
(s));

465 
	`sdsä“
(
s
);

466 
	}
}

471 
	$ŒimR•lyUnu£dTaS·û
(
ş›Á
 *
c
) {

472 
li¡Node
 *
Ê
 = 
	`li¡La¡
(
c
->
»¶y
);

473 
ş›ÁR•lyBlock
 *

 = 
Ê
? 
	`li¡NodeV®ue
Ön): 
NULL
;

477 ià(!

) ;

483 ià(

->
size
 -a->
u£d
 >ail->size / 4 &&

484 

->
u£d
 < 
PROTO_REPLY_CHUNK_BYTES
)

486 
size_t
 
Şd_size
 = 

->
size
;

487 

 = 
	`z»®loc
Ña,a->
u£d
 + (
ş›ÁR•lyBlock
));

490 

->
size
 = 
	`zm®loc_u§bË
Ñaè- (
ş›ÁR•lyBlock
);

491 
c
->
»¶y_by‹s
 +ğ

->
size
 - 
Şd_size
;

492 
	`li¡NodeV®ue
(
Ê
èğ

;

494 
	}
}

498 *
	$addR•lyDeã¼edL’
(
ş›Á
 *
c
) {

502 ià(
	`´•¬eCl›ÁToWr™e
(
c
è!ğ
C_OK
è 
NULL
;

503 
	`ŒimR•lyUnu£dTaS·û
(
c
);

504 
	`li¡AddNodeTa
(
c
->
»¶y
,
NULL
);

505  
	`li¡La¡
(
c
->
»¶y
);

506 
	}
}

509 
	$£tDeã¼edAgg»g©eL’
(
ş›Á
 *
c
, *
node
, 
Ëngth
, 
´efix
) {

510 
li¡Node
 *
Ê
 = (li¡Node*)
node
;

511 
ş›ÁR•lyBlock
 *
Ãxt
;

512 
Ën¡r
[128];

513 
size_t
 
Ën¡r_Ën
 = 
	`¥rštf
(
Ën¡r
, "%c%ld\r\n", 
´efix
, 
Ëngth
);

517 ià(
node
 =ğ
NULL
) ;

518 
	`£rv”As£¹
(!
	`li¡NodeV®ue
(
Ê
));

530 ià(
Ê
->
Ãxt
 !ğ
NULL
 && (Ãxˆğ
	`li¡NodeV®ue
(ln->next)) &&

531 
Ãxt
->
size
 -‚ext->
u£d
 >ğ
Ën¡r_Ën
 &&

532 
Ãxt
->
u£d
 < 
PROTO_REPLY_CHUNK_BYTES
 * 4) {

533 
	`memmove
(
Ãxt
->
buf
 + 
Ën¡r_Ën
,‚ext->buf,‚ext->
u£d
);

534 
	`memıy
(
Ãxt
->
buf
, 
Ën¡r
, 
Ën¡r_Ën
);

535 
Ãxt
->
u£d
 +ğ
Ën¡r_Ën
;

536 
	`li¡D–Node
(
c
->
»¶y
,
Ê
);

539 
ş›ÁR•lyBlock
 *
buf
 = 
	`zm®loc
(
Ën¡r_Ën
 + (clientReplyBlock));

541 
buf
->
size
 = 
	`zm®loc_u§bË
(bufè- (
ş›ÁR•lyBlock
);

542 
buf
->
u£d
 = 
Ën¡r_Ën
;

543 
	`memıy
(
buf
->buf, 
Ën¡r
, 
Ën¡r_Ën
);

544 
	`li¡NodeV®ue
(
Ê
èğ
buf
;

545 
c
->
»¶y_by‹s
 +ğ
buf
->
size
;

547 
	`asyncClo£Cl›ÁOnOuutBufãrLim™R—ched
(
c
);

548 
	}
}

550 
	$£tDeã¼edA¼ayL’
(
ş›Á
 *
c
, *
node
, 
Ëngth
) {

551 
	`£tDeã¼edAgg»g©eL’
(
c
,
node
,
Ëngth
,'*');

552 
	}
}

554 
	$£tDeã¼edM­L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
) {

555 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '%';

556 ià(
c
->
»¥
 =ğ2è
Ëngth
 *= 2;

557 
	`£tDeã¼edAgg»g©eL’
(
c
,
node
,
Ëngth
,
´efix
);

558 
	}
}

560 
	$£tDeã¼edS‘L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
) {

561 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '~';

562 
	`£tDeã¼edAgg»g©eL’
(
c
,
node
,
Ëngth
,
´efix
);

563 
	}
}

565 
	$£tDeã¼edA‰ribu‹L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
) {

566 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '|';

567 ià(
c
->
»¥
 =ğ2è
Ëngth
 *= 2;

568 
	`£tDeã¼edAgg»g©eL’
(
c
,
node
,
Ëngth
,
´efix
);

569 
	}
}

571 
	$£tDeã¼edPushL’
(
ş›Á
 *
c
, *
node
, 
Ëngth
) {

572 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '>';

573 
	`£tDeã¼edAgg»g©eL’
(
c
,
node
,
Ëngth
,
´efix
);

574 
	}
}

577 
	$addR•lyDoubË
(
ş›Á
 *
c
, 
d
) {

578 ià(
	`isšf
(
d
)) {

581 ià(
c
->
»¥
 == 2) {

582 
	`addR•lyBulkCSŒšg
(
c
, 
d
 > 0 ? "inf" : "-inf");

584 
	`addR•lyPrÙo
(
c
, 
d
 > 0 ? ",inf\r\n" : ",-inf\r\n",

585 
d
 > 0 ? 6 : 7);

588 
dbuf
[
MAX_LONG_DOUBLE_CHARS
+3],

589 
sbuf
[
MAX_LONG_DOUBLE_CHARS
+32];

590 
dËn
, 
¦’
;

591 ià(
c
->
»¥
 == 2) {

592 
dËn
 = 
	`¢´štf
(
dbuf
,(dbuf),"%.17g",
d
);

593 
¦’
 = 
	`¢´štf
(
sbuf
,(sbuf),"$%d\r\n%s\r\n",
dËn
,
dbuf
);

594 
	`addR•lyPrÙo
(
c
,
sbuf
,
¦’
);

596 
dËn
 = 
	`¢´štf
(
dbuf
,(dbuf),",%.17g\r\n",
d
);

597 
	`addR•lyPrÙo
(
c
,
dbuf
,
dËn
);

600 
	}
}

605 
	$addR•lyHumªLÚgDoubË
(
ş›Á
 *
c
, 
d
) {

606 ià(
c
->
»¥
 == 2) {

607 
robj
 *
o
 = 
	`ü—‹SŒšgObjeùFromLÚgDoubË
(
d
,1);

608 
	`addR•lyBulk
(
c
,
o
);

609 
	`deüRefCouÁ
(
o
);

611 
buf
[
MAX_LONG_DOUBLE_CHARS
];

612 
Ën
 = 
	`ld2¡ršg
(
buf
,(buf),
d
,
LD_STR_HUMAN
);

613 
	`addR•lyPrÙo
(
c
,",",1);

614 
	`addR•lyPrÙo
(
c
,
buf
,
Ën
);

615 
	`addR•lyPrÙo
(
c
,"\r\n",2);

617 
	}
}

621 
	$addR•lyLÚgLÚgW™hP»fix
(
ş›Á
 *
c
, 
Î
, 
´efix
) {

622 
buf
[128];

623 
Ën
;

628 ià(
´efix
 =ğ'*' && 
Î
 < 
OBJ_SHARED_BULKHDR_LEN
 &&†l >= 0) {

629 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[
Î
]);

631 } ià(
´efix
 =ğ'$' && 
Î
 < 
OBJ_SHARED_BULKHDR_LEN
 &&†l >= 0) {

632 
	`addR•ly
(
c
,
sh¬ed
.
bulkhdr
[
Î
]);

636 
buf
[0] = 
´efix
;

637 
Ën
 = 
	`Î2¡ršg
(
buf
+1,(buf)-1,
Î
);

638 
buf
[
Ën
+1] = '\r';

639 
buf
[
Ën
+2] = '\n';

640 
	`addR•lyPrÙo
(
c
,
buf
,
Ën
+3);

641 
	}
}

643 
	$addR•lyLÚgLÚg
(
ş›Á
 *
c
, 
Î
) {

644 ià(
Î
 == 0)

645 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

646 ià(
Î
 == 1)

647 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

649 
	`addR•lyLÚgLÚgW™hP»fix
(
c
,
Î
,':');

650 
	}
}

652 
	$addR•lyAgg»g©eL’
(
ş›Á
 *
c
, 
Ëngth
, 
´efix
) {

653 ià(
´efix
 =ğ'*' && 
Ëngth
 < 
OBJ_SHARED_BULKHDR_LEN
)

654 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[
Ëngth
]);

656 
	`addR•lyLÚgLÚgW™hP»fix
(
c
,
Ëngth
,
´efix
);

657 
	}
}

659 
	$addR•lyA¼ayL’
(
ş›Á
 *
c
, 
Ëngth
) {

660 
	`addR•lyAgg»g©eL’
(
c
,
Ëngth
,'*');

661 
	}
}

663 
	$addR•lyM­L’
(
ş›Á
 *
c
, 
Ëngth
) {

664 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '%';

665 ià(
c
->
»¥
 =ğ2è
Ëngth
 *= 2;

666 
	`addR•lyAgg»g©eL’
(
c
,
Ëngth
,
´efix
);

667 
	}
}

669 
	$addR•lyS‘L’
(
ş›Á
 *
c
, 
Ëngth
) {

670 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '~';

671 
	`addR•lyAgg»g©eL’
(
c
,
Ëngth
,
´efix
);

672 
	}
}

674 
	$addR•lyA‰ribu‹L’
(
ş›Á
 *
c
, 
Ëngth
) {

675 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '|';

676 ià(
c
->
»¥
 =ğ2è
Ëngth
 *= 2;

677 
	`addR•lyAgg»g©eL’
(
c
,
Ëngth
,
´efix
);

678 
	}
}

680 
	$addR•lyPushL’
(
ş›Á
 *
c
, 
Ëngth
) {

681 
´efix
 = 
c
->
»¥
 == 2 ? '*' : '>';

682 
	`addR•lyAgg»g©eL’
(
c
,
Ëngth
,
´efix
);

683 
	}
}

685 
	$addR•lyNuÎ
(
ş›Á
 *
c
) {

686 ià(
c
->
»¥
 == 2) {

687 
	`addR•lyPrÙo
(
c
,"$-1\r\n",5);

689 
	`addR•lyPrÙo
(
c
,"_\r\n",3);

691 
	}
}

693 
	$addR•lyBoŞ
(
ş›Á
 *
c
, 
b
) {

694 ià(
c
->
»¥
 == 2) {

695 
	`addR•ly
(
c
, 
b
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

697 
	`addR•lyPrÙo
(
c
, 
b
 ? "#t\r\n" : "#f\r\n",4);

699 
	}
}

705 
	$addR•lyNuÎA¼ay
(
ş›Á
 *
c
) {

706 ià(
c
->
»¥
 == 2) {

707 
	`addR•lyPrÙo
(
c
,"*-1\r\n",5);

709 
	`addR•lyPrÙo
(
c
,"_\r\n",3);

711 
	}
}

714 
	$addR•lyBulkL’
(
ş›Á
 *
c
, 
robj
 *
obj
) {

715 
size_t
 
Ën
 = 
	`¡ršgObjeùL’
(
obj
);

717 ià(
Ën
 < 
OBJ_SHARED_BULKHDR_LEN
)

718 
	`addR•ly
(
c
,
sh¬ed
.
bulkhdr
[
Ën
]);

720 
	`addR•lyLÚgLÚgW™hP»fix
(
c
,
Ën
,'$');

721 
	}
}

724 
	$addR•lyBulk
(
ş›Á
 *
c
, 
robj
 *
obj
) {

725 
	`addR•lyBulkL’
(
c
,
obj
);

726 
	`addR•ly
(
c
,
obj
);

727 
	`addR•ly
(
c
,
sh¬ed
.
ülf
);

728 
	}
}

731 
	$addR•lyBulkCBufãr
(
ş›Á
 *
c
, cÚ¡ *
p
, 
size_t
 
Ën
) {

732 
	`addR•lyLÚgLÚgW™hP»fix
(
c
,
Ën
,'$');

733 
	`addR•lyPrÙo
(
c
,
p
,
Ën
);

734 
	`addR•ly
(
c
,
sh¬ed
.
ülf
);

735 
	}
}

738 
	$addR•lyBulkSds
(
ş›Á
 *
c
, 
sds
 
s
) {

739 
	`addR•lyLÚgLÚgW™hP»fix
(
c
,
	`sd¦’
(
s
),'$');

740 
	`addR•lySds
(
c
,
s
);

741 
	`addR•ly
(
c
,
sh¬ed
.
ülf
);

742 
	}
}

745 
	$addR•lyBulkCSŒšg
(
ş›Á
 *
c
, cÚ¡ *
s
) {

746 ià(
s
 =ğ
NULL
) {

747 
	`addR•lyNuÎ
(
c
);

749 
	`addR•lyBulkCBufãr
(
c
,
s
,
	`¡¾’
(s));

751 
	}
}

754 
	$addR•lyBulkLÚgLÚg
(
ş›Á
 *
c
, 
Î
) {

755 
buf
[64];

756 
Ën
;

758 
Ën
 = 
	`Î2¡ršg
(
buf
,64,
Î
);

759 
	`addR•lyBulkCBufãr
(
c
,
buf
,
Ën
);

760 
	}
}

771 
	$addR•lyV”b©im
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
, cÚ¡ *
ext
) {

772 ià(
c
->
»¥
 == 2) {

773 
	`addR•lyBulkCBufãr
(
c
,
s
,
Ën
);

775 
buf
[32];

776 
size_t
 
´eæ’
 = 
	`¢´štf
(
buf
,(buf),"=%zu\r\nxxx:",
Ën
+4);

777 *
p
 = 
buf
+
´eæ’
-4;

778 
i
 = 0; i < 3; i++) {

779 ià(*
ext
 == '\0') {

780 
p
[
i
] = ' ';

782 
p
[
i
] = *
ext
++;

785 
	`addR•lyPrÙo
(
c
,
buf
,
´eæ’
);

786 
	`addR•lyPrÙo
(
c
,
s
,
Ën
);

787 
	`addR•lyPrÙo
(
c
,"\r\n",2);

789 
	}
}

795 
	$addR•lyH–p
(
ş›Á
 *
c
, cÚ¡ **
h–p
) {

796 
sds
 
cmd
 = 
	`sd¢ew
((*è
c
->
¬gv
[0]->
±r
);

797 *
bËÅ
 = 
	`addR•lyDeã¼edL’
(
c
);

798 
bËn
 = 0;

800 
	`sd¡ouµ”
(
cmd
);

801 
	`addR•lyStusFÜm©
(
c
,

802 "% <subcommªd>‡rg‡rg ...‡rg. Subcommªd ¬e:",
cmd
);

803 
	`sdsä“
(
cmd
);

805 
h–p
[
bËn
]è
	`addR•lyStus
(
c
,help[blen++]);

807 
bËn
++;

808 
	`£tDeã¼edA¼ayL’
(
c
,
bËÅ
,
bËn
);

809 
	}
}

814 
	$addR•lySubcommªdSyÁaxE¼Ü
(
ş›Á
 *
c
) {

815 
sds
 
cmd
 = 
	`sd¢ew
((*è
c
->
¬gv
[0]->
±r
);

816 
	`sd¡ouµ”
(
cmd
);

817 
	`addR•lyE¼ÜFÜm©
(
c
,

819 (*)
c
->
¬gv
[1]->
±r
,
cmd
);

820 
	`sdsä“
(
cmd
);

821 
	}
}

825 
	$AddR•lyFromCl›Á
(
ş›Á
 *
d¡
, cl›Á *
¤c
) {

826 ià(
	`´•¬eCl›ÁToWr™e
(
d¡
è!ğ
C_OK
)

828 
	`addR•lyPrÙo
(
d¡
,
¤c
->
buf
, src->
buåos
);

829 ià(
	`li¡L’gth
(
¤c
->
»¶y
))

830 
	`li¡Još
(
d¡
->
»¶y
,
¤c
->reply);

831 
d¡
->
»¶y_by‹s
 +ğ
¤c
->reply_bytes;

832 
¤c
->
»¶y_by‹s
 = 0;

833 
¤c
->
buåos
 = 0;

834 
	}
}

839 
	$cİyCl›ÁOuutBufãr
(
ş›Á
 *
d¡
, cl›Á *
¤c
) {

840 
	`li¡R–—£
(
d¡
->
»¶y
);

841 
d¡
->
£ÁËn
 = 0;

842 
d¡
->
»¶y
 = 
	`li¡Dup
(
¤c
->reply);

843 
	`memıy
(
d¡
->
buf
,
¤c
->buf,¤c->
buåos
);

844 
d¡
->
buåos
 = 
¤c
->bufpos;

845 
d¡
->
»¶y_by‹s
 = 
¤c
->reply_bytes;

846 
	}
}

850 
	$ş›ÁHasP’dšgR•l›s
(
ş›Á
 *
c
) {

851  
c
->
buåos
 || 
	`li¡L’gth
(c->
»¶y
);

852 
	}
}

854 
	$ş›ÁAcû±HªdËr
(
cÚÃùiÚ
 *
cÚn
) {

855 
ş›Á
 *
c
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

857 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

858 
	`£rv”Log
(
LL_WARNING
,

860 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

861 
	`ä“Cl›ÁAsync
(
c
);

869 ià(
£rv”
.
´Ùeùed_mode
 &&

870 
£rv”
.
bšdaddr_couÁ
 == 0 &&

871 
DeçuÉU£r
->
æags
 & 
USER_FLAG_NOPASS
 &&

872 !(
c
->
æags
 & 
CLIENT_UNIX_SOCKET
))

874 
c
[
NET_IP_STR_LEN
+1] = { 0 };

875 
	`cÚnP“rToSŒšg
(
cÚn
, 
c
, (c)-1, 
NULL
);

877 ià(
	`¡rcmp
(
c
,"127.0.0.1") && strcmp(cip,"::1")) {

878 *
”r
 =

899 ià(
	`cÚnWr™e
(
c
->
cÚn
,
”r
,
	`¡¾’
(err)) == -1) {

902 
£rv”
.
¡©_»jeùed_cÚn
++;

903 
	`ä“Cl›ÁAsync
(
c
);

908 
£rv”
.
¡©_numcÚÃùiÚs
++;

909 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_CLIENT_CHANGE
,

910 
REDISMODULE_SUBEVENT_CLIENT_CHANGE_CONNECTED
,

911 
c
);

912 
	}
}

914 
	#MAX_ACCEPTS_PER_CALL
 1000

	)

915 
	$acû±CommÚHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
æags
, *

) {

916 
ş›Á
 *
c
;

917 
	`UNUSED
(

);

923 ià(
	`li¡L’gth
(
£rv”
.
ş›Ás
è>ğ£rv”.
maxş›Ás
) {

924 *
”r
 = "-ERR max‚umber of clients„eached\r\n";

930 ià(
	`cÚnWr™e
(
cÚn
,
”r
,
	`¡¾’
(err)) == -1) {

933 
£rv”
.
¡©_»jeùed_cÚn
++;

934 
	`cÚnClo£
(
cÚn
);

939 ià((
c
 = 
	`ü—‹Cl›Á
(
cÚn
)è=ğ
NULL
) {

940 
cÚnšfo
[100];

941 
	`£rv”Log
(
LL_WARNING
,

943 
	`cÚnG‘La¡E¼Ü
(
cÚn
),

944 
	`cÚnG‘Info
(
cÚn
, 
cÚnšfo
, (conninfo)));

945 
	`cÚnClo£
(
cÚn
);

950 
c
->
æags
 |= flags;

960 ià(
	`cÚnAcû±
(
cÚn
, 
ş›ÁAcû±HªdËr
è=ğ
C_ERR
) {

961 
cÚnšfo
[100];

962 ià(
	`cÚnG‘S‹
(
cÚn
è=ğ
CONN_STATE_ERROR
)

963 
	`£rv”Log
(
LL_WARNING
,

965 
	`cÚnG‘La¡E¼Ü
(
cÚn
), 
	`cÚnG‘Info
(cÚn, 
cÚnšfo
, (conninfo)));

966 
	`ä“Cl›Á
(
	`cÚnG‘Priv©eD©a
(
cÚn
));

969 
	}
}

971 
	$acû±TıHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

972 
ıÜt
, 
cfd
, 
max
 = 
MAX_ACCEPTS_PER_CALL
;

973 
c
[
NET_IP_STR_LEN
];

974 
	`UNUSED
(
–
);

975 
	`UNUSED
(
mask
);

976 
	`UNUSED
(
´ivd©a
);

978 
max
--) {

979 
cfd
 = 
	`ª‘TıAcû±
(
£rv”
.
Ã‹¼
, 
fd
, 
c
, (c), &
ıÜt
);

980 ià(
cfd
 =ğ
ANET_ERR
) {

981 ià(
”ºo
 !ğ
EWOULDBLOCK
)

982 
	`£rv”Log
(
LL_WARNING
,

983 "Acû±šg cl›Á cÚÃùiÚ: %s", 
£rv”
.
Ã‹¼
);

986 
	`£rv”Log
(
LL_VERBOSE
,"Acû±ed %s:%d", 
c
, 
ıÜt
);

987 
	`acû±CommÚHªdËr
(
	`cÚnC»©eAcû±edSock‘
(
cfd
),0,
c
);

989 
	}
}

991 
	$acû±TLSHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

992 
ıÜt
, 
cfd
, 
max
 = 
MAX_ACCEPTS_PER_CALL
;

993 
c
[
NET_IP_STR_LEN
];

994 
	`UNUSED
(
–
);

995 
	`UNUSED
(
mask
);

996 
	`UNUSED
(
´ivd©a
);

998 
max
--) {

999 
cfd
 = 
	`ª‘TıAcû±
(
£rv”
.
Ã‹¼
, 
fd
, 
c
, (c), &
ıÜt
);

1000 ià(
cfd
 =ğ
ANET_ERR
) {

1001 ià(
”ºo
 !ğ
EWOULDBLOCK
)

1002 
	`£rv”Log
(
LL_WARNING
,

1003 "Acû±šg cl›Á cÚÃùiÚ: %s", 
£rv”
.
Ã‹¼
);

1006 
	`£rv”Log
(
LL_VERBOSE
,"Acû±ed %s:%d", 
c
, 
ıÜt
);

1007 
	`acû±CommÚHªdËr
(
	`cÚnC»©eAcû±edTLS
(
cfd
, 
£rv”
.
s_auth_ş›Ás
),0,
c
);

1009 
	}
}

1011 
	$acû±UnixHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

1012 
cfd
, 
max
 = 
MAX_ACCEPTS_PER_CALL
;

1013 
	`UNUSED
(
–
);

1014 
	`UNUSED
(
mask
);

1015 
	`UNUSED
(
´ivd©a
);

1017 
max
--) {

1018 
cfd
 = 
	`ª‘UnixAcû±
(
£rv”
.
Ã‹¼
, 
fd
);

1019 ià(
cfd
 =ğ
ANET_ERR
) {

1020 ià(
”ºo
 !ğ
EWOULDBLOCK
)

1021 
	`£rv”Log
(
LL_WARNING
,

1022 "Acû±šg cl›Á cÚÃùiÚ: %s", 
£rv”
.
Ã‹¼
);

1025 
	`£rv”Log
(
LL_VERBOSE
,"Acû±ed cÚÃùiÚØ%s", 
£rv”
.
unixsock‘
);

1026 
	`acû±CommÚHªdËr
(
	`cÚnC»©eAcû±edSock‘
(
cfd
),
CLIENT_UNIX_SOCKET
,
NULL
);

1028 
	}
}

1030 
	$ä“Cl›ÁArgv
(
ş›Á
 *
c
) {

1031 
j
;

1032 
j
 = 0; j < 
c
->
¬gc
; j++)

1033 
	`deüRefCouÁ
(
c
->
¬gv
[
j
]);

1034 
c
->
¬gc
 = 0;

1035 
c
->
cmd
 = 
NULL
;

1036 
	}
}

1041 
	$discÚÃùSÏves
() {

1042 
	`li¡L’gth
(
£rv”
.
¦aves
)) {

1043 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
£rv”
.
¦aves
);

1044 
	`ä“Cl›Á
((
ş›Á
*)
Ê
->
v®ue
);

1046 
	}
}

1051 
	$uÆškCl›Á
(
ş›Á
 *
c
) {

1052 
li¡Node
 *
Ê
;

1055 ià(
£rv”
.
cu¼’t_ş›Á
 =ğ
c
è£rv”.cu¼’t_ş›Á = 
NULL
;

1060 ià(
c
->
cÚn
) {

1062 ià(
c
->
ş›Á_li¡_node
) {

1063 
ušt64_t
 
id
 = 
	`htÚu64
(
c
->id);

1064 
	`¿xRemove
(
£rv”
.
ş›Ás_šdex
,(*)&
id
,(id),
NULL
);

1065 
	`li¡D–Node
(
£rv”
.
ş›Ás
,
c
->
ş›Á_li¡_node
);

1066 
c
->
ş›Á_li¡_node
 = 
NULL
;

1071 ià(
c
->
æags
 & 
CLIENT_SLAVE
 &&

1072 
c
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
 &&

1073 
£rv”
.
rdb_pe_cÚns
)

1075 
i
;

1076 
i
=0; i < 
£rv”
.
rdb_pe_numcÚns
; i++) {

1077 ià(
£rv”
.
rdb_pe_cÚns
[
i
] =ğ
c
->
cÚn
) {

1078 
	`rdbPeWr™eHªdËrCÚnRemoved
(
c
->
cÚn
);

1079 
£rv”
.
rdb_pe_cÚns
[
i
] = 
NULL
;

1084 
	`cÚnClo£
(
c
->
cÚn
);

1085 
c
->
cÚn
 = 
NULL
;

1089 ià(
c
->
æags
 & 
CLIENT_PENDING_WRITE
) {

1090 
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
ş›Ás_³ndšg_wr™e
,
c
);

1091 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

1092 
	`li¡D–Node
(
£rv”
.
ş›Ás_³ndšg_wr™e
,
Ê
);

1093 
c
->
æags
 &ğ~
CLIENT_PENDING_WRITE
;

1097 ià(
c
->
æags
 & 
CLIENT_PENDING_READ
) {

1098 
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
ş›Ás_³ndšg_»ad
,
c
);

1099 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

1100 
	`li¡D–Node
(
£rv”
.
ş›Ás_³ndšg_»ad
,
Ê
);

1101 
c
->
æags
 &ğ~
CLIENT_PENDING_READ
;

1106 ià(
c
->
æags
 & 
CLIENT_UNBLOCKED
) {

1107 
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
unblocked_ş›Ás
,
c
);

1108 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

1109 
	`li¡D–Node
(
£rv”
.
unblocked_ş›Ás
,
Ê
);

1110 
c
->
æags
 &ğ~
CLIENT_UNBLOCKED
;

1114 ià(
c
->
æags
 & 
CLIENT_TRACKING
è
	`di§bËT¿ckšg
(c);

1115 
	}
}

1117 
	$ä“Cl›Á
(
ş›Á
 *
c
) {

1118 
li¡Node
 *
Ê
;

1122 ià(
c
->
æags
 & 
CLIENT_PROTECTED
) {

1123 
	`ä“Cl›ÁAsync
(
c
);

1128 ià(
c
->
cÚn
) {

1129 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_CLIENT_CHANGE
,

1130 
REDISMODULE_SUBEVENT_CLIENT_CHANGE_DISCONNECTED
,

1131 
c
);

1135 
	`moduËNÙifyU£rChªged
(
c
);

1142 ià(
£rv”
.
ma¡”
 && 
c
->
æags
 & 
CLIENT_MASTER
) {

1143 
	`£rv”Log
(
LL_WARNING
,"Connection with master†ost.");

1144 ià(!(
c
->
æags
 & (
CLIENT_CLOSE_AFTER_REPLY
|

1145 
CLIENT_CLOSE_ASAP
|

1146 
CLIENT_BLOCKED
)))

1148 
	`»¶iÿtiÚCacheMa¡”
(
c
);

1154 ià(
	`g‘Cl›ÁTy³
(
c
è=ğ
CLIENT_TYPE_SLAVE
) {

1155 
	`£rv”Log
(
LL_WARNING
,"Connection with„eplica %s†ost.",

1156 
	`»¶iÿtiÚG‘SÏveName
(
c
));

1160 
	`sdsä“
(
c
->
qu”ybuf
);

1161 
	`sdsä“
(
c
->
³ndšg_qu”ybuf
);

1162 
c
->
qu”ybuf
 = 
NULL
;

1165 ià(
c
->
æags
 & 
CLIENT_BLOCKED
è
	`unblockCl›Á
(c);

1166 
	`diùR–—£
(
c
->
bpİ
.
keys
);

1169 
	`unw©chAÎKeys
(
c
);

1170 
	`li¡R–—£
(
c
->
w©ched_keys
);

1173 
	`pubsubUnsubsüibeAÎChªÃls
(
c
,0);

1174 
	`pubsubUnsubsüibeAÎP©‹ºs
(
c
,0);

1175 
	`diùR–—£
(
c
->
pubsub_chªÃls
);

1176 
	`li¡R–—£
(
c
->
pubsub_·‰”ns
);

1179 
	`li¡R–—£
(
c
->
»¶y
);

1180 
	`ä“Cl›ÁArgv
(
c
);

1185 
	`uÆškCl›Á
(
c
);

1189 ià(
c
->
æags
 & 
CLIENT_SLAVE
) {

1190 ià(
c
->
»¶¡©e
 =ğ
SLAVE_STATE_SEND_BULK
) {

1191 ià(
c
->
»¶dbfd
 !ğ-1è
	`şo£
(c->repldbfd);

1192 ià(
c
->
»¶´—mbË
è
	`sdsä“
(c->replpreamble);

1194 
li¡
 *
l
 = (
c
->
æags
 & 
CLIENT_MONITOR
è? 
£rv”
.
mÚ™Üs
 : s”v”.
¦aves
;

1195 
Ê
 = 
	`li¡S—rchKey
(
l
,
c
);

1196 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

1197 
	`li¡D–Node
(
l
,
Ê
);

1201 ià(
	`g‘Cl›ÁTy³
(
c
è=ğ
CLIENT_TYPE_SLAVE
 && 
	`li¡L’gth
(
£rv”
.
¦aves
) == 0)

1202 
£rv”
.
»¶_no_¦aves_sšû
 = s”v”.
unixtime
;

1203 
	`»äeshGoodSÏvesCouÁ
();

1205 ià(
c
->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
)

1206 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_REPLICA_CHANGE
,

1207 
REDISMODULE_SUBEVENT_REPLICA_CHANGE_OFFLINE
,

1208 
NULL
);

1213 ià(
c
->
æags
 & 
CLIENT_MASTER
è
	`»¶iÿtiÚHªdËMa¡”DiscÚÃùiÚ
();

1217 ià(
c
->
æags
 & 
CLIENT_CLOSE_ASAP
) {

1218 
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
ş›Ás_to_şo£
,
c
);

1219 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

1220 
	`li¡D–Node
(
£rv”
.
ş›Ás_to_şo£
,
Ê
);

1225 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
c
->
ş›Á_üÚ_Ï¡_memÜy_ty³
] -=

1226 
c
->
ş›Á_üÚ_Ï¡_memÜy_u§ge
;

1230 ià(
c
->
Çme
è
	`deüRefCouÁ
(c->name);

1231 
	`zä“
(
c
->
¬gv
);

1232 
	`ä“Cl›ÁMuÉiS‹
(
c
);

1233 
	`sdsä“
(
c
->
³”id
);

1234 
	`zä“
(
c
);

1235 
	}
}

1241 
	$ä“Cl›ÁAsync
(
ş›Á
 *
c
) {

1247 ià(
c
->
æags
 & 
CLIENT_CLOSE_ASAP
 || c->æag & 
CLIENT_LUA
) ;

1248 
c
->
æags
 |ğ
CLIENT_CLOSE_ASAP
;

1249 ià(
£rv”
.
io_th»ads_num
 == 1) {

1251 
	`li¡AddNodeTa
(
£rv”
.
ş›Ás_to_şo£
,
c
);

1254 
±h»ad_mu‹x_t
 
async_ä“_queue_mu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

1255 
	`±h»ad_mu‹x_lock
(&
async_ä“_queue_mu‹x
);

1256 
	`li¡AddNodeTa
(
£rv”
.
ş›Ás_to_şo£
,
c
);

1257 
	`±h»ad_mu‹x_uÆock
(&
async_ä“_queue_mu‹x
);

1258 
	}
}

1260 
	$ä“Cl›ÁsInAsyncF»eQueue
() {

1261 
	`li¡L’gth
(
£rv”
.
ş›Ás_to_şo£
)) {

1262 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
£rv”
.
ş›Ás_to_şo£
);

1263 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

1265 
c
->
æags
 &ğ~
CLIENT_CLOSE_ASAP
;

1266 
	`ä“Cl›Á
(
c
);

1267 
	`li¡D–Node
(
£rv”
.
ş›Ás_to_şo£
,
Ê
);

1269 
	}
}

1274 
ş›Á
 *
	$lookupCl›ÁByID
(
ušt64_t
 
id
) {

1275 
id
 = 
	`htÚu64
(id);

1276 
ş›Á
 *
c
 = 
	`¿xFšd
(
£rv”
.
ş›Ás_šdex
,(*)&
id
,(id));

1277  (
c
 =ğ
¿xNÙFound
è? 
NULL
 : c;

1278 
	}
}

1288 
	$wr™eToCl›Á
(
ş›Á
 *
c
, 
hªdËr_š¡®Ëd
) {

1289 
ssize_t
 
nwr™‹n
 = 0, 
tÙwr™‹n
 = 0;

1290 
size_t
 
objËn
;

1291 
ş›ÁR•lyBlock
 *
o
;

1293 
	`ş›ÁHasP’dšgR•l›s
(
c
)) {

1294 ià(
c
->
buåos
 > 0) {

1295 
nwr™‹n
 = 
	`cÚnWr™e
(
c
->
cÚn
,c->
buf
+c->
£ÁËn
,c->
buåos
-c->sentlen);

1296 ià(
nwr™‹n
 <= 0) ;

1297 
c
->
£ÁËn
 +ğ
nwr™‹n
;

1298 
tÙwr™‹n
 +ğ
nwr™‹n
;

1302 ià(()
c
->
£ÁËn
 =ğc->
buåos
) {

1303 
c
->
buåos
 = 0;

1304 
c
->
£ÁËn
 = 0;

1307 
o
 = 
	`li¡NodeV®ue
(
	`li¡Fœ¡
(
c
->
»¶y
));

1308 
objËn
 = 
o
->
u£d
;

1310 ià(
objËn
 == 0) {

1311 
c
->
»¶y_by‹s
 -ğ
o
->
size
;

1312 
	`li¡D–Node
(
c
->
»¶y
,
	`li¡Fœ¡
(c->reply));

1316 
nwr™‹n
 = 
	`cÚnWr™e
(
c
->
cÚn
, 
o
->
buf
 + c->
£ÁËn
, 
objËn
 - c->sentlen);

1317 ià(
nwr™‹n
 <= 0) ;

1318 
c
->
£ÁËn
 +ğ
nwr™‹n
;

1319 
tÙwr™‹n
 +ğ
nwr™‹n
;

1322 ià(
c
->
£ÁËn
 =ğ
objËn
) {

1323 
c
->
»¶y_by‹s
 -ğ
o
->
size
;

1324 
	`li¡D–Node
(
c
->
»¶y
,
	`li¡Fœ¡
(c->reply));

1325 
c
->
£ÁËn
 = 0;

1328 ià(
	`li¡L’gth
(
c
->
»¶y
) == 0)

1329 
	`£rv”As£¹
(
c
->
»¶y_by‹s
 == 0);

1344 ià(
tÙwr™‹n
 > 
NET_MAX_WRITES_PER_EVENT
 &&

1345 (
£rv”
.
maxmemÜy
 == 0 ||

1346 
	`zm®loc_u£d_memÜy
(è< 
£rv”
.
maxmemÜy
) &&

1347 !(
c
->
æags
 & 
CLIENT_SLAVE
)) ;

1349 
£rv”
.
¡©_Ãt_ouut_by‹s
 +ğ
tÙwr™‹n
;

1350 ià(
nwr™‹n
 == -1) {

1351 ià(
	`cÚnG‘S‹
(
c
->
cÚn
è=ğ
CONN_STATE_CONNECTED
) {

1352 
nwr™‹n
 = 0;

1354 
	`£rv”Log
(
LL_VERBOSE
,

1355 "E¼Ü wr™šgØş›Á: %s", 
	`cÚnG‘La¡E¼Ü
(
c
->
cÚn
));

1356 
	`ä“Cl›ÁAsync
(
c
);

1357  
C_ERR
;

1360 ià(
tÙwr™‹n
 > 0) {

1365 ià(!(
c
->
æags
 & 
CLIENT_MASTER
)èc->
Ï¡š‹¿ùiÚ
 = 
£rv”
.
unixtime
;

1367 ià(!
	`ş›ÁHasP’dšgR•l›s
(
c
)) {

1368 
c
->
£ÁËn
 = 0;

1373 ià(
hªdËr_š¡®Ëd
è
	`cÚnS‘Wr™eHªdËr
(
c
->
cÚn
, 
NULL
);

1376 ià(
c
->
æags
 & 
CLIENT_CLOSE_AFTER_REPLY
) {

1377 
	`ä“Cl›ÁAsync
(
c
);

1378  
C_ERR
;

1381  
C_OK
;

1382 
	}
}

1385 
	$£ndR•lyToCl›Á
(
cÚÃùiÚ
 *
cÚn
) {

1386 
ş›Á
 *
c
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

1387 
	`wr™eToCl›Á
(
c
,1);

1388 
	}
}

1394 
	$hªdËCl›ÁsW™hP’dšgWr™es
() {

1395 
li¡I‹r
 
li
;

1396 
li¡Node
 *
Ê
;

1397 
´oûs£d
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_wr™e
);

1399 
	`li¡Rewšd
(
£rv”
.
ş›Ás_³ndšg_wr™e
,&
li
);

1400 (
Ê
 = 
	`li¡Next
(&
li
))) {

1401 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

1402 
c
->
æags
 &ğ~
CLIENT_PENDING_WRITE
;

1403 
	`li¡D–Node
(
£rv”
.
ş›Ás_³ndšg_wr™e
,
Ê
);

1407 ià(
c
->
æags
 & 
CLIENT_PROTECTED
) ;

1410 ià(
	`wr™eToCl›Á
(
c
,0è=ğ
C_ERR
) ;

1414 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
)) {

1415 
«_b¬r›r
 = 0;

1421 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_ON
 &&

1422 
£rv”
.
aof_fsync
 =ğ
AOF_FSYNC_ALWAYS
)

1424 
«_b¬r›r
 = 1;

1426 ià(
	`cÚnS‘Wr™eHªdËrW™hB¬r›r
(
c
->
cÚn
, 
£ndR•lyToCl›Á
, 
«_b¬r›r
è=ğ
C_ERR
) {

1427 
	`ä“Cl›ÁAsync
(
c
);

1431  
´oûs£d
;

1432 
	}
}

1435 
	$»£tCl›Á
(
ş›Á
 *
c
) {

1436 
»disCommªdProc
 *
´evcmd
 = 
c
->
cmd
 ? c->cmd->
´oc
 : 
NULL
;

1438 
	`ä“Cl›ÁArgv
(
c
);

1439 
c
->
»qty³
 = 0;

1440 
c
->
muÉibulkËn
 = 0;

1441 
c
->
bulkËn
 = -1;

1445 ià(!(
c
->
æags
 & 
CLIENT_MULTI
è&& 
´evcmd
 !ğ
askšgCommªd
)

1446 
c
->
æags
 &ğ~
CLIENT_ASKING
;

1451 ià(!(
c
->
æags
 & 
CLIENT_MULTI
è&& 
´evcmd
 !ğ
ş›ÁCommªd
)

1452 
c
->
æags
 &ğ~
CLIENT_TRACKING_CACHING
;

1457 
c
->
æags
 &ğ~
CLIENT_REPLY_SKIP
;

1458 ià(
c
->
æags
 & 
CLIENT_REPLY_SKIP_NEXT
) {

1459 
c
->
æags
 |ğ
CLIENT_REPLY_SKIP
;

1460 
c
->
æags
 &ğ~
CLIENT_REPLY_SKIP_NEXT
;

1462 
	}
}

1477 
	$´ÙeùCl›Á
(
ş›Á
 *
c
) {

1478 
c
->
æags
 |ğ
CLIENT_PROTECTED
;

1479 
	`cÚnS‘R—dHªdËr
(
c
->
cÚn
,
NULL
);

1480 
	`cÚnS‘Wr™eHªdËr
(
c
->
cÚn
,
NULL
);

1481 
	}
}

1484 
	$uÅrÙeùCl›Á
(
ş›Á
 *
c
) {

1485 ià(
c
->
æags
 & 
CLIENT_PROTECTED
) {

1486 
c
->
æags
 &ğ~
CLIENT_PROTECTED
;

1487 
	`cÚnS‘R—dHªdËr
(
c
->
cÚn
,
»adQu”yFromCl›Á
);

1488 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
)è
	`ş›ÁIn¡®lWr™eHªdËr
(c);

1490 
	}
}

1499 
	$´oûssIÆšeBufãr
(
ş›Á
 *
c
) {

1500 *
Ãwlše
;

1501 
¬gc
, 
j
, 
lšeãed_ch¬s
 = 1;

1502 
sds
 *
¬gv
, 
aux
;

1503 
size_t
 
qu”yËn
;

1506 
Ãwlše
 = 
	`¡rchr
(
c
->
qu”ybuf
+c->
qb_pos
,'\n');

1509 ià(
Ãwlše
 =ğ
NULL
) {

1510 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 > 
PROTO_INLINE_MAX_SIZE
) {

1511 
	`addR•lyE¼Ü
(
c
,"Protocolƒrror:oo big inline„equest");

1512 
	`£tPrÙocŞE¼Ü
("toØbig iÆš»que¡",
c
);

1514  
C_ERR
;

1518 ià(
Ãwlše
 &&‚ewlš!ğ
c
->
qu”ybuf
+c->
qb_pos
 && *(newline-1) == '\r')

1519 
Ãwlše
--, 
lšeãed_ch¬s
++;

1522 
qu”yËn
 = 
Ãwlše
-(
c
->
qu”ybuf
+c->
qb_pos
);

1523 
aux
 = 
	`sd¢ewËn
(
c
->
qu”ybuf
+c->
qb_pos
,
qu”yËn
);

1524 
¬gv
 = 
	`sds¥l™¬gs
(
aux
,&
¬gc
);

1525 
	`sdsä“
(
aux
);

1526 ià(
¬gv
 =ğ
NULL
) {

1527 
	`addR•lyE¼Ü
(
c
,"Protocolƒrror: unbalanced quotes in„equest");

1528 
	`£tPrÙocŞE¼Ü
("unb®ªûd quÙe š iÆš»que¡",
c
);

1529  
C_ERR
;

1535 ià(
qu”yËn
 =ğ0 && 
	`g‘Cl›ÁTy³
(
c
è=ğ
CLIENT_TYPE_SLAVE
)

1536 
c
->
»¶_ack_time
 = 
£rv”
.
unixtime
;

1539 
c
->
qb_pos
 +ğ
qu”yËn
+
lšeãed_ch¬s
;

1542 ià(
¬gc
) {

1543 ià(
c
->
¬gv
è
	`zä“
(c->argv);

1544 
c
->
¬gv
 = 
	`zm®loc
((
robj
*)*
¬gc
);

1548 
c
->
¬gc
 = 0, 
j
 = 0; j <‡rgc; j++) {

1549 
c
->
¬gv
[c->
¬gc
] = 
	`ü—‹Objeù
(
OBJ_STRING
,¬gv[
j
]);

1550 
c
->
¬gc
++;

1552 
	`zä“
(
¬gv
);

1553  
C_OK
;

1554 
	}
}

1558 
	#PROTO_DUMP_LEN
 128

	)

1559 
	$£tPrÙocŞE¼Ü
(cÚ¡ *
”r¡r
, 
ş›Á
 *
c
) {

1560 ià(
£rv”
.
v”bos™y
 <ğ
LL_VERBOSE
) {

1561 
sds
 
ş›Á
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
c
);

1564 
buf
[256];

1565 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 < 
PROTO_DUMP_LEN
) {

1566 
	`¢´štf
(
buf
,(buf),"Qu”y bufã¸duršg…rÙocŞƒ¼Ü: '%s'", 
c
->
qu”ybuf
+c->
qb_pos
);

1568 
	`¢´štf
(
buf
,(buf),"Qu”y bufã¸duršg…rÙocŞƒ¼Ü: '%.*s' (... mÜ%zu by‹ ...è'%.*s'", 
PROTO_DUMP_LEN
/2, 
c
->
qu”ybuf
+c->
qb_pos
, 
	`sd¦’
(c->querybuf)-c->qb_pos-PROTO_DUMP_LEN, PROTO_DUMP_LEN/2, c->querybuf+sdslen(c->querybuf)-PROTO_DUMP_LEN/2);

1572 *
p
 = 
buf
;

1573 *
p
 != '\0') {

1574 ià(!
	`i¥ršt
(*
p
)) *p = '.';

1575 
p
++;

1579 
	`£rv”Log
(
LL_VERBOSE
,

1580 "PrÙocŞƒ¼Ü (%sèäom cl›Á: %s. %s", 
”r¡r
, 
ş›Á
, 
buf
);

1581 
	`sdsä“
(
ş›Á
);

1583 
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

1584 
	}
}

1597 
	$´oûssMuÉibulkBufãr
(
ş›Á
 *
c
) {

1598 *
Ãwlše
 = 
NULL
;

1599 
ok
;

1600 
Î
;

1602 ià(
c
->
muÉibulkËn
 == 0) {

1604 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
¬gc
 == 0);

1607 
Ãwlše
 = 
	`¡rchr
(
c
->
qu”ybuf
+c->
qb_pos
,'\r');

1608 ià(
Ãwlše
 =ğ
NULL
) {

1609 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 > 
PROTO_INLINE_MAX_SIZE
) {

1610 
	`addR•lyE¼Ü
(
c
,"Protocolƒrror:oo big mbulk count string");

1611 
	`£tPrÙocŞE¼Ü
("toØbig mbulk couÁ sŒšg",
c
);

1613  
C_ERR
;

1617 ià(
Ãwlše
-(
c
->
qu”ybuf
+c->
qb_pos
è> (
ssize_t
)(
	`sd¦’
(c->querybuf)-c->qb_pos-2))

1618  
C_ERR
;

1622 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
qu”ybuf
[c->
qb_pos
] == '*');

1623 
ok
 = 
	`¡ršg2Î
(
c
->
qu”ybuf
+1+c->
qb_pos
,
Ãwlše
-(c->qu”ybuf+1+c->qb_pos),&
Î
);

1624 ià(!
ok
 || 
Î
 > 1024*1024) {

1625 
	`addR•lyE¼Ü
(
c
,"Protocolƒrror: invalid multibulk†ength");

1626 
	`£tPrÙocŞE¼Ü
("šv®id mbulk couÁ",
c
);

1627  
C_ERR
;

1630 
c
->
qb_pos
 = (
Ãwlše
-c->
qu”ybuf
)+2;

1632 ià(
Î
 <ğ0è 
C_OK
;

1634 
c
->
muÉibulkËn
 = 
Î
;

1637 ià(
c
->
¬gv
è
	`zä“
(c->argv);

1638 
c
->
¬gv
 = 
	`zm®loc
((
robj
*)*c->
muÉibulkËn
);

1641 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
muÉibulkËn
 > 0);

1642 
c
->
muÉibulkËn
) {

1644 ià(
c
->
bulkËn
 == -1) {

1645 
Ãwlše
 = 
	`¡rchr
(
c
->
qu”ybuf
+c->
qb_pos
,'\r');

1646 ià(
Ãwlše
 =ğ
NULL
) {

1647 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 > 
PROTO_INLINE_MAX_SIZE
) {

1648 
	`addR•lyE¼Ü
(
c
,

1650 
	`£tPrÙocŞE¼Ü
("toØbig bulk couÁ sŒšg",
c
);

1651  
C_ERR
;

1657 ià(
Ãwlše
-(
c
->
qu”ybuf
+c->
qb_pos
è> (
ssize_t
)(
	`sd¦’
(c->querybuf)-c->qb_pos-2))

1660 ià(
c
->
qu”ybuf
[c->
qb_pos
] != '$') {

1661 
	`addR•lyE¼ÜFÜm©
(
c
,

1663 
c
->
qu”ybuf
[c->
qb_pos
]);

1664 
	`£tPrÙocŞE¼Ü
("ex³ùed $ buˆgÙ som‘hšgƒl£",
c
);

1665  
C_ERR
;

1668 
ok
 = 
	`¡ršg2Î
(
c
->
qu”ybuf
+c->
qb_pos
+1,
Ãwlše
-(c->qu”ybuf+c->qb_pos+1),&
Î
);

1669 ià(!
ok
 || 
Î
 < 0 ||†È> 
£rv”
.
´Ùo_max_bulk_Ën
) {

1670 
	`addR•lyE¼Ü
(
c
,"Protocolƒrror: invalid bulk†ength");

1671 
	`£tPrÙocŞE¼Ü
("šv®id bulk†’gth",
c
);

1672  
C_ERR
;

1675 
c
->
qb_pos
 = 
Ãwlše
-c->
qu”ybuf
+2;

1676 ià(
Î
 >ğ
PROTO_MBULK_BIG_ARG
) {

1686 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 <ğ(
size_t
)
Î
+2) {

1687 
	`sd¤ªge
(
c
->
qu”ybuf
,c->
qb_pos
,-1);

1688 
c
->
qb_pos
 = 0;

1691 
c
->
qu”ybuf
 = 
	`sdsMakeRoomFÜ
(c->qu”ybuf,
Î
+2);

1694 
c
->
bulkËn
 = 
Î
;

1698 ià(
	`sd¦’
(
c
->
qu”ybuf
)-c->
qb_pos
 < (
size_t
)(c->
bulkËn
+2)) {

1705 ià(
c
->
qb_pos
 == 0 &&

1706 
c
->
bulkËn
 >ğ
PROTO_MBULK_BIG_ARG
 &&

1707 
	`sd¦’
(
c
->
qu”ybuf
è=ğ(
size_t
)(c->
bulkËn
+2))

1709 
c
->
¬gv
[c->
¬gc
++] = 
	`ü—‹Objeù
(
OBJ_STRING
,c->
qu”ybuf
);

1710 
	`sdsInüL’
(
c
->
qu”ybuf
,-2);

1713 
c
->
qu”ybuf
 = 
	`sd¢ewËn
(
SDS_NOINIT
,c->
bulkËn
+2);

1714 
	`sdsş—r
(
c
->
qu”ybuf
);

1716 
c
->
¬gv
[c->
¬gc
++] =

1717 
	`ü—‹SŒšgObjeù
(
c
->
qu”ybuf
+c->
qb_pos
,c->
bulkËn
);

1718 
c
->
qb_pos
 +ğc->
bulkËn
+2;

1720 
c
->
bulkËn
 = -1;

1721 
c
->
muÉibulkËn
--;

1726 ià(
c
->
muÉibulkËn
 =ğ0è 
C_OK
;

1729  
C_ERR
;

1730 
	}
}

1737 
	$commªdProûs£d
(
ş›Á
 *
c
) {

1738 
cmd_is_pšg
 = 
c
->
cmd
 && c->cmd->
´oc
 =ğ
pšgCommªd
;

1739 
´ev_off£t
 = 
c
->
»¶off
;

1740 ià(
c
->
æags
 & 
CLIENT_MASTER
 && !(c->æag & 
CLIENT_MULTI
)) {

1742 
c
->
»¶off
 = c->
»ad_»¶off
 - 
	`sd¦’
(c->
qu”ybuf
è+ c->
qb_pos
;

1749 ià(!(
c
->
æags
 & 
CLIENT_BLOCKED
) ||

1750 
c
->
bty³
 !ğ
BLOCKED_MODULE
)

1752 
	`»£tCl›Á
(
c
);

1761 ià(
c
->
æags
 & 
CLIENT_MASTER
) {

1762 
­¶›d
 = 
c
->
»¶off
 - 
´ev_off£t
;

1763 
´ev_ma¡”_»¶_m—nšgful_off£t
 = 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
;

1764 ià(
­¶›d
) {

1765 
	`»¶iÿtiÚF“dSÏvesFromMa¡”SŒ—m
(
£rv”
.
¦aves
,

1766 
c
->
³ndšg_qu”ybuf
, 
­¶›d
);

1767 
	`sd¤ªge
(
c
->
³ndšg_qu”ybuf
,
­¶›d
,-1);

1771 ià(
cmd_is_pšg
)

1772 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = 
´ev_ma¡”_»¶_m—nšgful_off£t
;

1774 
	}
}

1784 
	$´oûssCommªdAndRe£tCl›Á
(
ş›Á
 *
c
) {

1785 
d—dş›Á
 = 0;

1786 
£rv”
.
cu¼’t_ş›Á
 = 
c
;

1787 ià(
	`´oûssCommªd
(
c
è=ğ
C_OK
) {

1788 
	`commªdProûs£d
(
c
);

1790 ià(
£rv”
.
cu¼’t_ş›Á
 =ğ
NULL
è
d—dş›Á
 = 1;

1791 
£rv”
.
cu¼’t_ş›Á
 = 
NULL
;

1795  
d—dş›Á
 ? 
C_ERR
 : 
C_OK
;

1796 
	}
}

1802 
	$´oûssIÅutBufãr
(
ş›Á
 *
c
) {

1804 
c
->
qb_pos
 < 
	`sd¦’
(c->
qu”ybuf
)) {

1806 ià(!(
c
->
æags
 & 
CLIENT_SLAVE
è&& 
	`ş›ÁsA»Pau£d
()) ;

1809 ià(
c
->
æags
 & 
CLIENT_BLOCKED
) ;

1813 ià(
c
->
æags
 & 
CLIENT_PENDING_COMMAND
) ;

1819 ià(
£rv”
.
lua_timedout
 && 
c
->
æags
 & 
CLIENT_MASTER
) ;

1826 ià(
c
->
æags
 & (
CLIENT_CLOSE_AFTER_REPLY
|
CLIENT_CLOSE_ASAP
)) ;

1829 ià(!
c
->
»qty³
) {

1830 ià(
c
->
qu”ybuf
[c->
qb_pos
] == '*') {

1831 
c
->
»qty³
 = 
PROTO_REQ_MULTIBULK
;

1833 
c
->
»qty³
 = 
PROTO_REQ_INLINE
;

1837 ià(
c
->
»qty³
 =ğ
PROTO_REQ_INLINE
) {

1838 ià(
	`´oûssIÆšeBufãr
(
c
è!ğ
C_OK
) ;

1841 ià(
£rv”
.
gİh”_’abËd
 &&

1842 ((
c
->
¬gc
 =ğ1 && ((*)(c->
¬gv
[0]->
±r
))[0] == '/') ||

1843 
c
->
¬gc
 == 0))

1845 
	`´oûssGİh”Reque¡
(
c
);

1846 
	`»£tCl›Á
(
c
);

1847 
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

1850 } ià(
c
->
»qty³
 =ğ
PROTO_REQ_MULTIBULK
) {

1851 ià(
	`´oûssMuÉibulkBufãr
(
c
è!ğ
C_OK
) ;

1853 
	`£rv”Pªic
("Unknown„equestype");

1857 ià(
c
->
¬gc
 == 0) {

1858 
	`»£tCl›Á
(
c
);

1863 ià(
c
->
æags
 & 
CLIENT_PENDING_READ
) {

1864 
c
->
æags
 |ğ
CLIENT_PENDING_COMMAND
;

1869 ià(
	`´oûssCommªdAndRe£tCl›Á
(
c
è=ğ
C_ERR
) {

1879 ià(
c
->
qb_pos
) {

1880 
	`sd¤ªge
(
c
->
qu”ybuf
,c->
qb_pos
,-1);

1881 
c
->
qb_pos
 = 0;

1883 
	}
}

1885 
	$»adQu”yFromCl›Á
(
cÚÃùiÚ
 *
cÚn
) {

1886 
ş›Á
 *
c
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

1887 
Ä—d
, 
»adËn
;

1888 
size_t
 
qbËn
;

1892 ià(
	`po¡pÚeCl›ÁR—d
(
c
)) ;

1894 
»adËn
 = 
PROTO_IOBUF_LEN
;

1901 ià(
c
->
»qty³
 =ğ
PROTO_REQ_MULTIBULK
 && c->
muÉibulkËn
 && c->
bulkËn
 != -1

1902 && 
c
->
bulkËn
 >ğ
PROTO_MBULK_BIG_ARG
)

1904 
ssize_t
 
»maššg
 = (
size_t
)(
c
->
bulkËn
+2)-
	`sd¦’
(c->
qu”ybuf
);

1908 ià(
»maššg
 > 0 &&„emaššg < 
»adËn
)„eadlen =„emaining;

1911 
qbËn
 = 
	`sd¦’
(
c
->
qu”ybuf
);

1912 ià(
c
->
qu”ybuf_³ak
 < 
qbËn
) c->querybuf_peak = qblen;

1913 
c
->
qu”ybuf
 = 
	`sdsMakeRoomFÜ
(c->qu”ybuf, 
»adËn
);

1914 
Ä—d
 = 
	`cÚnR—d
(
c
->
cÚn
, c->
qu”ybuf
+
qbËn
, 
»adËn
);

1915 ià(
Ä—d
 == -1) {

1916 ià(
	`cÚnG‘S‹
(
cÚn
è=ğ
CONN_STATE_CONNECTED
) {

1919 
	`£rv”Log
(
LL_VERBOSE
, "R—dšg from cl›Á: %s",
	`cÚnG‘La¡E¼Ü
(
c
->
cÚn
));

1920 
	`ä“Cl›ÁAsync
(
c
);

1923 } ià(
Ä—d
 == 0) {

1924 
	`£rv”Log
(
LL_VERBOSE
, "Client closed connection");

1925 
	`ä“Cl›ÁAsync
(
c
);

1927 } ià(
c
->
æags
 & 
CLIENT_MASTER
) {

1931 
c
->
³ndšg_qu”ybuf
 = 
	`sdsÿ’
(c->pending_querybuf,

1932 
c
->
qu”ybuf
+
qbËn
,
Ä—d
);

1935 
	`sdsInüL’
(
c
->
qu”ybuf
,
Ä—d
);

1936 
c
->
Ï¡š‹¿ùiÚ
 = 
£rv”
.
unixtime
;

1937 ià(
c
->
æags
 & 
CLIENT_MASTER
èc->
»ad_»¶off
 +ğ
Ä—d
;

1938 
£rv”
.
¡©_Ãt_šput_by‹s
 +ğ
Ä—d
;

1939 ià(
	`sd¦’
(
c
->
qu”ybuf
è> 
£rv”
.
ş›Á_max_qu”ybuf_Ën
) {

1940 
sds
 
ci
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
c
), 
by‹s
 = sdsempty();

1942 
by‹s
 = 
	`sdsÿŒ•r
(by‹s,
c
->
qu”ybuf
,64);

1943 
	`£rv”Log
(
LL_WARNING
,"Closšg cl›Áh©„—ched max qu”y bufã¸Ëngth: % (qbuàš™ŸÈby‹s: %s)", 
ci
, 
by‹s
);

1944 
	`sdsä“
(
ci
);

1945 
	`sdsä“
(
by‹s
);

1946 
	`ä“Cl›ÁAsync
(
c
);

1952 
	`´oûssIÅutBufãr
(
c
);

1953 
	}
}

1955 
	$g‘Cl›ÁsMaxBufãrs
(*
lÚge¡_ouut_li¡
,

1956 *
bigge¡_šput_bufãr
) {

1957 
ş›Á
 *
c
;

1958 
li¡Node
 *
Ê
;

1959 
li¡I‹r
 
li
;

1960 
lŞ
 = 0, 
bib
 = 0;

1962 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

1963 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

1964 
c
 = 
	`li¡NodeV®ue
(
Ê
);

1966 ià(
	`li¡L’gth
(
c
->
»¶y
è> 
lŞ
)†ol =†istLength(c->reply);

1967 ià(
	`sd¦’
(
c
->
qu”ybuf
è> 
bib
) bib = sdslen(c->querybuf);

1969 *
lÚge¡_ouut_li¡
 = 
lŞ
;

1970 *
bigge¡_šput_bufãr
 = 
bib
;

1971 
	}
}

1984 
	$g’Cl›ÁP“rId
(
ş›Á
 *ş›Á, *
³”id
,

1985 
size_t
 
³”id_Ën
) {

1986 ià(
ş›Á
->
æags
 & 
CLIENT_UNIX_SOCKET
) {

1988 
	`¢´štf
(
³”id
,
³”id_Ën
,"%s:0",
£rv”
.
unixsock‘
);

1991 
	`cÚnFÜm©P“r
(
ş›Á
->
cÚn
,
³”id
,
³”id_Ën
);

1993 
	}
}

1999 *
	$g‘Cl›ÁP“rId
(
ş›Á
 *
c
) {

2000 
³”id
[
NET_PEER_ID_LEN
];

2002 ià(
c
->
³”id
 =ğ
NULL
) {

2003 
	`g’Cl›ÁP“rId
(
c
,
³”id
,(peerid));

2004 
c
->
³”id
 = 
	`sd¢ew
(peerid);

2006  
c
->
³”id
;

2007 
	}
}

2011 
sds
 
	$ÿtCl›ÁInfoSŒšg
(
sds
 
s
, 
ş›Á
 *client) {

2012 
æags
[16], 
ev’ts
[3], 
cÚnšfo
[
CONN_INFO_LEN
], *
p
;

2014 
p
 = 
æags
;

2015 ià(
ş›Á
->
æags
 & 
CLIENT_SLAVE
) {

2016 ià(
ş›Á
->
æags
 & 
CLIENT_MONITOR
)

2017 *
p
++ = 'O';

2019 *
p
++ = 'S';

2021 ià(
ş›Á
->
æags
 & 
CLIENT_MASTER
è*
p
++ = 'M';

2022 ià(
ş›Á
->
æags
 & 
CLIENT_PUBSUB
è*
p
++ = 'P';

2023 ià(
ş›Á
->
æags
 & 
CLIENT_MULTI
è*
p
++ = 'x';

2024 ià(
ş›Á
->
æags
 & 
CLIENT_BLOCKED
è*
p
++ = 'b';

2025 ià(
ş›Á
->
æags
 & 
CLIENT_TRACKING
è*
p
++ = 't';

2026 ià(
ş›Á
->
æags
 & 
CLIENT_TRACKING_BROKEN_REDIR
è*
p
++ = 'R';

2027 ià(
ş›Á
->
æags
 & 
CLIENT_DIRTY_CAS
è*
p
++ = 'd';

2028 ià(
ş›Á
->
æags
 & 
CLIENT_CLOSE_AFTER_REPLY
è*
p
++ = 'c';

2029 ià(
ş›Á
->
æags
 & 
CLIENT_UNBLOCKED
è*
p
++ = 'u';

2030 ià(
ş›Á
->
æags
 & 
CLIENT_CLOSE_ASAP
è*
p
++ = 'A';

2031 ià(
ş›Á
->
æags
 & 
CLIENT_UNIX_SOCKET
è*
p
++ = 'U';

2032 ià(
ş›Á
->
æags
 & 
CLIENT_READONLY
è*
p
++ = 'r';

2033 ià(
p
 =ğ
æags
) *p++ = 'N';

2034 *
p
++ = '\0';

2036 
p
 = 
ev’ts
;

2037 ià(
ş›Á
->
cÚn
) {

2038 ià(
	`cÚnHasR—dHªdËr
(
ş›Á
->
cÚn
)è*
p
++ = 'r';

2039 ià(
	`cÚnHasWr™eHªdËr
(
ş›Á
->
cÚn
)è*
p
++ = 'w';

2041 *
p
 = '\0';

2042  
	`sdsÿtfmt
(
s
,

2044 (è
ş›Á
->
id
,

2045 
	`g‘Cl›ÁP“rId
(
ş›Á
),

2046 
	`cÚnG‘Info
(
ş›Á
->
cÚn
, 
cÚnšfo
, (conninfo)),

2047 
ş›Á
->
Çme
 ? (*)ş›Á->Çme->
±r
 : "",

2048 ()(
£rv”
.
unixtime
 - 
ş›Á
->
ùime
),

2049 ()(
£rv”
.
unixtime
 - 
ş›Á
->
Ï¡š‹¿ùiÚ
),

2050 
æags
,

2051 
ş›Á
->
db
->
id
,

2052 (è
	`diùSize
(
ş›Á
->
pubsub_chªÃls
),

2053 (è
	`li¡L’gth
(
ş›Á
->
pubsub_·‰”ns
),

2054 (
ş›Á
->
æags
 & 
CLIENT_MULTI
è? cl›Á->
m¡©e
.
couÁ
 : -1,

2055 (è
	`sd¦’
(
ş›Á
->
qu”ybuf
),

2056 (è
	`sd§va
(
ş›Á
->
qu”ybuf
),

2057 (è
ş›Á
->
buåos
,

2058 (è
	`li¡L’gth
(
ş›Á
->
»¶y
),

2059 (è
	`g‘Cl›ÁOuutBufãrMemÜyU§ge
(
ş›Á
),

2060 
ev’ts
,

2061 
ş›Á
->
Ï¡cmd
 ? cl›Á->Ï¡cmd->
Çme
 : "NULL",

2062 
ş›Á
->
u£r
 ? cl›Á->u£r->
Çme
 : "(superuser)");

2063 
	}
}

2065 
sds
 
	$g‘AÎCl›ÁsInfoSŒšg
(
ty³
) {

2066 
li¡Node
 *
Ê
;

2067 
li¡I‹r
 
li
;

2068 
ş›Á
 *client;

2069 
sds
 
o
 = 
	`sd¢ewËn
(
SDS_NOINIT
,200*
	`li¡L’gth
(
£rv”
.
ş›Ás
));

2070 
	`sdsş—r
(
o
);

2071 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

2072 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2073 
ş›Á
 = 
	`li¡NodeV®ue
(
Ê
);

2074 ià(
ty³
 !ğ-1 && 
	`g‘Cl›ÁTy³
(
ş›Á
) !=ype) ;

2075 
o
 = 
	`ÿtCl›ÁInfoSŒšg
(o,
ş›Á
);

2076 
o
 = 
	`sdsÿ’
(o,"\n",1);

2078  
o
;

2079 
	}
}

2090 
	$ş›ÁS‘NameOrR•ly
(
ş›Á
 *
c
, 
robj
 *
Çme
) {

2091 
Ën
 = 
	`sd¦’
(
Çme
->
±r
);

2092 *
p
 = 
Çme
->
±r
;

2096 ià(
Ën
 == 0) {

2097 ià(
c
->
Çme
è
	`deüRefCouÁ
(c->name);

2098 
c
->
Çme
 = 
NULL
;

2099  
C_OK
;

2105 
j
 = 0; j < 
Ën
; j++) {

2106 ià(
p
[
j
] < '!' ||…[j] > '~') {

2107 
	`addR•lyE¼Ü
(
c
,

2110  
C_ERR
;

2113 ià(
c
->
Çme
è
	`deüRefCouÁ
(c->name);

2114 
c
->
Çme
 =‚ame;

2115 
	`šüRefCouÁ
(
Çme
);

2116  
C_OK
;

2117 
	}
}

2119 
	$ş›ÁCommªd
(
ş›Á
 *
c
) {

2120 
li¡Node
 *
Ê
;

2121 
li¡I‹r
 
li
;

2123 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

2124 cÚ¡ *
h–p
[] = {

2141 
NULL


2143 
	`addR•lyH–p
(
c
, 
h–p
);

2144 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"id"è&& c->
¬gc
 == 2) {

2146 
	`addR•lyLÚgLÚg
(
c
,c->
id
);

2147 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"list")) {

2149 
ty³
 = -1;

2150 ià(
c
->
¬gc
 =ğ4 && !
	`¡rÿ£cmp
(c->
¬gv
[2]->
±r
,"type")) {

2151 
ty³
 = 
	`g‘Cl›ÁTy³ByName
(
c
->
¬gv
[3]->
±r
);

2152 ià(
ty³
 == -1) {

2153 
	`addR•lyE¼ÜFÜm©
(
c
,"Unknown clientype '%s'",

2154 (*è
c
->
¬gv
[3]->
±r
);

2157 } ià(
c
->
¬gc
 != 2) {

2158 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2161 
sds
 
o
 = 
	`g‘AÎCl›ÁsInfoSŒšg
(
ty³
);

2162 
	`addR•lyV”b©im
(
c
,
o
,
	`sd¦’
(o),"txt");

2163 
	`sdsä“
(
o
);

2164 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»¶y"è&& c->
¬gc
 == 3) {

2166 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"on")) {

2167 
c
->
æags
 &ğ~(
CLIENT_REPLY_SKIP
|
CLIENT_REPLY_OFF
);

2168 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2169 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"off")) {

2170 
c
->
æags
 |ğ
CLIENT_REPLY_OFF
;

2171 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"skip")) {

2172 ià(!(
c
->
æags
 & 
CLIENT_REPLY_OFF
))

2173 
c
->
æags
 |ğ
CLIENT_REPLY_SKIP_NEXT
;

2175 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2178 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"kill")) {

2181 *
addr
 = 
NULL
;

2182 
u£r
 *u£¸ğ
NULL
;

2183 
ty³
 = -1;

2184 
ušt64_t
 
id
 = 0;

2185 
skme
 = 1;

2186 
kËd
 = 0, 
şo£_this_ş›Á
 = 0;

2188 ià(
c
->
¬gc
 == 3) {

2190 
addr
 = 
c
->
¬gv
[2]->
±r
;

2191 
skme
 = 0;

2192 } ià(
c
->
¬gc
 > 3) {

2193 
i
 = 2;

2196 
i
 < 
c
->
¬gc
) {

2197 
mÜ—rgs
 = 
c
->
¬gc
 > 
i
+1;

2199 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
,"id"è&& 
mÜ—rgs
) {

2200 
tmp
;

2202 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
i
+1],&
tmp
,
NULL
)

2203 !ğ
C_OK
) ;

2204 
id
 = 
tmp
;

2205 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
,"ty³"è&& 
mÜ—rgs
) {

2206 
ty³
 = 
	`g‘Cl›ÁTy³ByName
(
c
->
¬gv
[
i
+1]->
±r
);

2207 ià(
ty³
 == -1) {

2208 
	`addR•lyE¼ÜFÜm©
(
c
,"Unknown clientype '%s'",

2209 (*è
c
->
¬gv
[
i
+1]->
±r
);

2212 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
,"addr"è&& 
mÜ—rgs
) {

2213 
addr
 = 
c
->
¬gv
[
i
+1]->
±r
;

2214 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
,"u£r"è&& 
mÜ—rgs
) {

2215 
u£r
 = 
	`ACLG‘U£rByName
(
c
->
¬gv
[
i
+1]->
±r
,

2216 
	`sd¦’
(
c
->
¬gv
[
i
+1]->
±r
));

2217 ià(
u£r
 =ğ
NULL
) {

2218 
	`addR•lyE¼ÜFÜm©
(
c
,"No such user '%s'",

2219 (*è
c
->
¬gv
[
i
+1]->
±r
);

2222 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
]->
±r
,"skme"è&& 
mÜ—rgs
) {

2223 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
+1]->
±r
,"yes")) {

2224 
skme
 = 1;

2225 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
i
+1]->
±r
,"no")) {

2226 
skme
 = 0;

2228 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2232 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2235 
i
 += 2;

2238 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2243 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

2244 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2245 
ş›Á
 *ş›Á = 
	`li¡NodeV®ue
(
Ê
);

2246 ià(
addr
 && 
	`¡rcmp
(
	`g‘Cl›ÁP“rId
(
ş›Á
),addr) != 0) ;

2247 ià(
ty³
 !ğ-1 && 
	`g‘Cl›ÁTy³
(
ş›Á
) !=ype) ;

2248 ià(
id
 !ğ0 && 
ş›Á
->id != id) ;

2249 ià(
u£r
 && 
ş›Á
->user != user) ;

2250 ià(
c
 =ğ
ş›Á
 && 
skme
) ;

2253 ià(
c
 =ğ
ş›Á
) {

2254 
şo£_this_ş›Á
 = 1;

2256 
	`ä“Cl›Á
(
ş›Á
);

2258 
kËd
++;

2262 ià(
c
->
¬gc
 == 3) {

2263 ià(
kËd
 == 0)

2264 
	`addR•lyE¼Ü
(
c
,"No such client");

2266 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2268 
	`addR•lyLÚgLÚg
(
c
,
kËd
);

2273 ià(
şo£_this_ş›Á
è
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

2274 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"unblock"è&& (c->
¬gc
 == 3 ||

2275 
c
->
¬gc
 == 4))

2278 
id
;

2279 
unblock_”rÜ
 = 0;

2281 ià(
c
->
¬gc
 == 4) {

2282 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"timeout")) {

2283 
unblock_”rÜ
 = 0;

2284 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[3]->
±r
,"error")) {

2285 
unblock_”rÜ
 = 1;

2287 
	`addR•lyE¼Ü
(
c
,

2292 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
id
,
NULL
)

2293 !ğ
C_OK
) ;

2294 
ş›Á
 *
rg‘
 = 
	`lookupCl›ÁByID
(
id
);

2295 ià(
rg‘
 &&¬g‘->
æags
 & 
CLIENT_BLOCKED
) {

2296 ià(
unblock_”rÜ
)

2297 
	`addR•lyE¼Ü
(
rg‘
,

2300 
	`»¶yToBlockedCl›ÁTimedOut
(
rg‘
);

2301 
	`unblockCl›Á
(
rg‘
);

2302 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

2304 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

2306 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"£Šame"è&& c->
¬gc
 == 3) {

2308 ià(
	`ş›ÁS‘NameOrR•ly
(
c
,c->
¬gv
[2]è=ğ
C_OK
)

2309 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2310 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g‘Çme"è&& c->
¬gc
 == 2) {

2312 ià(
c
->
Çme
)

2313 
	`addR•lyBulk
(
c
,c->
Çme
);

2315 
	`addR•lyNuÎ
(
c
);

2316 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"·u£"è&& c->
¬gc
 == 3) {

2318 
du¿tiÚ
;

2320 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
du¿tiÚ
,

2321 
UNIT_MILLISECONDS
è!ğ
C_OK
) ;

2322 
	`·u£Cl›Ás
(
du¿tiÚ
);

2323 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2324 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"Œackšg"è&& c->
¬gc
 >= 3) {

2327 
»dœ
 = 0;

2328 
ušt64_t
 
İtiÚs
 = 0;

2329 
robj
 **
´efix
 = 
NULL
;

2330 
size_t
 
num´efix
 = 0;

2333 
j
 = 3; j < 
c
->
¬gc
; j++) {

2334 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

2336 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"»dœeù"è&& 
mÜ—rgs
) {

2337 
j
++;

2338 ià(
»dœ
 != 0) {

2339 
	`addR•lyE¼Ü
(
c
,"A client can only„edirecto‡ single "

2341 
	`zä“
(
´efix
);

2345 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
],&
»dœ
,
NULL
) !=

2346 
C_OK
)

2348 
	`zä“
(
´efix
);

2354 ià(
	`lookupCl›ÁByID
(
»dœ
è=ğ
NULL
) {

2355 
	`addR•lyE¼Ü
(
c
,"The client ID you want„edirecto "

2357 
	`zä“
(
´efix
);

2360 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"bcast")) {

2361 
İtiÚs
 |ğ
CLIENT_TRACKING_BCAST
;

2362 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"optin")) {

2363 
İtiÚs
 |ğ
CLIENT_TRACKING_OPTIN
;

2364 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"optout")) {

2365 
İtiÚs
 |ğ
CLIENT_TRACKING_OPTOUT
;

2366 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"noloop")) {

2367 
İtiÚs
 |ğ
CLIENT_TRACKING_NOLOOP
;

2368 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"´efix"è&& 
mÜ—rgs
) {

2369 
j
++;

2370 
´efix
 = 
	`z»®loc
Õ»fix,(
robj
*)*(
num´efix
+1));

2371 
´efix
[
num´efix
++] = 
c
->
¬gv
[
j
];

2373 
	`zä“
(
´efix
);

2374 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2380 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"on")) {

2383 ià(!(
İtiÚs
 & 
CLIENT_TRACKING_BCAST
è&& 
num´efix
) {

2384 
	`addR•lyE¼Ü
(
c
,

2386 
	`zä“
(
´efix
);

2390 ià(
c
->
æags
 & 
CLIENT_TRACKING
) {

2391 
Şdbÿ¡
 = !!(
c
->
æags
 & 
CLIENT_TRACKING_BCAST
);

2392 
Ãwbÿ¡
 = !!(
İtiÚs
 & 
CLIENT_TRACKING_BCAST
);

2393 ià(
Şdbÿ¡
 !ğ
Ãwbÿ¡
) {

2394 
	`addR•lyE¼Ü
(
c
,

2398 
	`zä“
(
´efix
);

2403 ià(
İtiÚs
 & 
CLIENT_TRACKING_BCAST
 &&

2404 
İtiÚs
 & (
CLIENT_TRACKING_OPTIN
|
CLIENT_TRACKING_OPTOUT
))

2406 
	`addR•lyE¼Ü
(
c
,

2408 
	`zä“
(
´efix
);

2412 ià(
İtiÚs
 & 
CLIENT_TRACKING_OPTIN
 && o±iÚ & 
CLIENT_TRACKING_OPTOUT
)

2414 
	`addR•lyE¼Ü
(
c
,

2416 
	`zä“
(
´efix
);

2420 ià((
İtiÚs
 & 
CLIENT_TRACKING_OPTIN
 && 
c
->
æags
 & 
CLIENT_TRACKING_OPTOUT
) ||

2421 (
İtiÚs
 & 
CLIENT_TRACKING_OPTOUT
 && 
c
->
æags
 & 
CLIENT_TRACKING_OPTIN
))

2423 
	`addR•lyE¼Ü
(
c
,

2427 
	`zä“
(
´efix
);

2431 
	`’abËT¿ckšg
(
c
,
»dœ
,
İtiÚs
,
´efix
,
num´efix
);

2432 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"off")) {

2433 
	`di§bËT¿ckšg
(
c
);

2435 
	`zä“
(
´efix
);

2436 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2439 
	`zä“
(
´efix
);

2440 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2441 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"ÿchšg"è&& c->
¬gc
 >= 3) {

2442 ià(!(
c
->
æags
 & 
CLIENT_TRACKING
)) {

2443 
	`addR•lyE¼Ü
(
c
,"CLIENT CACHING can be called only whenhe "

2449 *
İt
 = 
c
->
¬gv
[2]->
±r
;

2450 ià(!
	`¡rÿ£cmp
(
İt
,"yes")) {

2451 ià(
c
->
æags
 & 
CLIENT_TRACKING_OPTIN
) {

2452 
c
->
æags
 |ğ
CLIENT_TRACKING_CACHING
;

2454 
	`addR•lyE¼Ü
(
c
,"CLIENT CACHING YES is only valid whenracking isƒnabled in OPTIN mode.");

2457 } ià(!
	`¡rÿ£cmp
(
İt
,"no")) {

2458 ià(
c
->
æags
 & 
CLIENT_TRACKING_OPTOUT
) {

2459 
c
->
æags
 |ğ
CLIENT_TRACKING_CACHING
;

2461 
	`addR•lyE¼Ü
(
c
,"CLIENT CACHING NO is only valid whenracking isƒnabled in OPTOUT mode.");

2465 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2470 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2471 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g‘»dœ"è&& c->
¬gc
 == 2) {

2473 ià(
c
->
æags
 & 
CLIENT_TRACKING
) {

2474 
	`addR•lyLÚgLÚg
(
c
,c->
ş›Á_Œackšg_»dœeùiÚ
);

2476 
	`addR•lyLÚgLÚg
(
c
,-1);

2479 
	`addR•lyE¼ÜFÜm©
(
c
, "UnknowÀsubcommªd o¸wrÚg‚umb” oà¬gum’t fÜ '%s'. Try CLIENT HELP", (*)c->
¬gv
[1]->
±r
);

2481 
	}
}

2484 
	$h–loCommªd
(
ş›Á
 *
c
) {

2485 
v”
;

2487 ià(
	`g‘LÚgLÚgFromObjeù
(
c
->
¬gv
[1],&
v”
è!ğ
C_OK
 ||

2488 
v”
 < 2 || ver > 3)

2490 
	`addR•lyE¼Ü
(
c
,"-NOPROTO unsupported…rotocol version");

2494 
j
 = 2; j < 
c
->
¬gc
; j++) {

2495 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

2496 cÚ¡ *
İt
 = 
c
->
¬gv
[
j
]->
±r
;

2497 ià(!
	`¡rÿ£cmp
(
İt
,"AUTH"è&& 
mÜ—rgs
 >= 2) {

2498 ià(
	`ACLAuth’tiÿ‹U£r
(
c
, c->
¬gv
[
j
+1], c->¬gv[j+2]è=ğ
C_ERR
) {

2499 
	`addR•lyE¼Ü
(
c
,"-WRONGPASS invalid username-password…air");

2502 
j
 += 2;

2503 } ià(!
	`¡rÿ£cmp
(
İt
,"SETNAME"è&& 
mÜ—rgs
) {

2504 ià(
	`ş›ÁS‘NameOrR•ly
(
c
, c->
¬gv
[
j
+1]è=ğ
C_ERR
) ;

2505 
j
++;

2507 
	`addR•lyE¼ÜFÜm©
(
c
,"SyÁaxƒ¼Ü iÀHELLO o±iÚ '%s'",
İt
);

2513 ià(!
c
->
auth’tiÿ‹d
) {

2514 
	`addR•lyE¼Ü
(
c
,"-NOAUTH HELLO must be called withhe client‡lready "

2522 
c
->
»¥
 = 
v”
;

2523 
	`addR•lyM­L’
(
c
,6 + !
£rv”
.
£Áš–_mode
);

2525 
	`addR•lyBulkCSŒšg
(
c
,"server");

2526 
	`addR•lyBulkCSŒšg
(
c
,"redis");

2528 
	`addR•lyBulkCSŒšg
(
c
,"version");

2529 
	`addR•lyBulkCSŒšg
(
c
,
REDIS_VERSION
);

2531 
	`addR•lyBulkCSŒšg
(
c
,"proto");

2532 
	`addR•lyLÚgLÚg
(
c
,3);

2534 
	`addR•lyBulkCSŒšg
(
c
,"id");

2535 
	`addR•lyLÚgLÚg
(
c
,c->
id
);

2537 
	`addR•lyBulkCSŒšg
(
c
,"mode");

2538 ià(
£rv”
.
£Áš–_mode
è
	`addR•lyBulkCSŒšg
(
c
,"sentinel");

2539 ià(
£rv”
.
şu¡”_’abËd
è
	`addR•lyBulkCSŒšg
(
c
,"cluster");

2540 
	`addR•lyBulkCSŒšg
(
c
,"standalone");

2542 ià(!
£rv”
.
£Áš–_mode
) {

2543 
	`addR•lyBulkCSŒšg
(
c
,"role");

2544 
	`addR•lyBulkCSŒšg
(
c
,
£rv”
.
ma¡”ho¡
 ? "replica" : "master");

2547 
	`addR•lyBulkCSŒšg
(
c
,"modules");

2548 
	`addR•lyLßdedModuËs
(
c
);

2549 
	}
}

2560 
	$£cur™yW¬nšgCommªd
(
ş›Á
 *
c
) {

2561 
time_t
 
logged_time
;

2562 
time_t
 
now
 = 
	`time
(
NULL
);

2564 ià(
	`Ïbs
(
now
-
logged_time
) > 60) {

2565 
	`£rv”Log
(
LL_WARNING
,"Possible SECURITY ATTACK detected. It†ooks†ike somebody is sending POST or Host: commandso Redis. This is†ikely dueo‡n‡ttacker‡ttemptingo use Cross Protocol Scriptingo compromise your Redis instance. Connection‡borted.");

2566 
logged_time
 = 
now
;

2568 
	`ä“Cl›ÁAsync
(
c
);

2569 
	}
}

2574 
	$»wr™eCl›ÁCommªdVeùÜ
(
ş›Á
 *
c
, 
¬gc
, ...) {

2575 
va_li¡
 
­
;

2576 
j
;

2577 
robj
 **
¬gv
;

2579 
¬gv
 = 
	`zm®loc
((
robj
*)*
¬gc
);

2580 
	`va_¡¬t
(
­
,
¬gc
);

2581 
j
 = 0; j < 
¬gc
; j++) {

2582 
robj
 *
a
;

2584 
a
 = 
	`va_¬g
(
­
, 
robj
*);

2585 
¬gv
[
j
] = 
a
;

2586 
	`šüRefCouÁ
(
a
);

2591 
j
 = 0; j < 
c
->
¬gc
; j++è
	`deüRefCouÁ
(c->
¬gv
[j]);

2592 
	`zä“
(
c
->
¬gv
);

2594 
c
->
¬gv
 =‡rgv;

2595 
c
->
¬gc
 =‡rgc;

2596 
c
->
cmd
 = 
	`lookupCommªdOrOrigš®
(c->
¬gv
[0]->
±r
);

2597 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
cmd
 != NULL);

2598 
	`va_’d
(
­
);

2599 
	}
}

2602 
	$»¶aûCl›ÁCommªdVeùÜ
(
ş›Á
 *
c
, 
¬gc
, 
robj
 **
¬gv
) {

2603 
	`ä“Cl›ÁArgv
(
c
);

2604 
	`zä“
(
c
->
¬gv
);

2605 
c
->
¬gv
 =‡rgv;

2606 
c
->
¬gc
 =‡rgc;

2607 
c
->
cmd
 = 
	`lookupCommªdOrOrigš®
(c->
¬gv
[0]->
±r
);

2608 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
cmd
 != NULL);

2609 
	}
}

2622 
	$»wr™eCl›ÁCommªdArgum’t
(
ş›Á
 *
c
, 
i
, 
robj
 *
Ãwv®
) {

2623 
robj
 *
Şdv®
;

2625 ià(
i
 >ğ
c
->
¬gc
) {

2626 
c
->
¬gv
 = 
	`z»®loc
(c->¬gv,(
robj
*)*(
i
+1));

2627 
c
->
¬gc
 = 
i
+1;

2628 
c
->
¬gv
[
i
] = 
NULL
;

2630 
Şdv®
 = 
c
->
¬gv
[
i
];

2631 
c
->
¬gv
[
i
] = 
Ãwv®
;

2632 
	`šüRefCouÁ
(
Ãwv®
);

2633 ià(
Şdv®
è
	`deüRefCouÁ
(oldval);

2636 ià(
i
 == 0) {

2637 
c
->
cmd
 = 
	`lookupCommªdOrOrigš®
(c->
¬gv
[0]->
±r
);

2638 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,c->
cmd
 != NULL);

2640 
	}
}

2648 
	$g‘Cl›ÁOuutBufãrMemÜyU§ge
(
ş›Á
 *
c
) {

2649 
li¡_™em_size
 = (
li¡Node
è+ (
ş›ÁR•lyBlock
);

2650  
c
->
»¶y_by‹s
 + (
li¡_™em_size
*
	`li¡L’gth
(c->
»¶y
));

2651 
	}
}

2662 
	$g‘Cl›ÁTy³
(
ş›Á
 *
c
) {

2663 ià(
c
->
æags
 & 
CLIENT_MASTER
è 
CLIENT_TYPE_MASTER
;

2666 ià((
c
->
æags
 & 
CLIENT_SLAVE
è&& !(c->æag & 
CLIENT_MONITOR
))

2667  
CLIENT_TYPE_SLAVE
;

2668 ià(
c
->
æags
 & 
CLIENT_PUBSUB
è 
CLIENT_TYPE_PUBSUB
;

2669  
CLIENT_TYPE_NORMAL
;

2670 
	}
}

2672 
	$g‘Cl›ÁTy³ByName
(*
Çme
) {

2673 ià(!
	`¡rÿ£cmp
(
Çme
,"nÜm®")è 
CLIENT_TYPE_NORMAL
;

2674 ià(!
	`¡rÿ£cmp
(
Çme
,"¦ave")è 
CLIENT_TYPE_SLAVE
;

2675 ià(!
	`¡rÿ£cmp
(
Çme
,"»¶iÿ")è 
CLIENT_TYPE_SLAVE
;

2676 ià(!
	`¡rÿ£cmp
(
Çme
,"pubsub")è 
CLIENT_TYPE_PUBSUB
;

2677 ià(!
	`¡rÿ£cmp
(
Çme
,"ma¡”")è 
CLIENT_TYPE_MASTER
;

2679 
	}
}

2681 *
	$g‘Cl›ÁTy³Name
(
şass
) {

2682 
şass
) {

2683 
CLIENT_TYPE_NORMAL
:  "normal";

2684 
CLIENT_TYPE_SLAVE
:  "slave";

2685 
CLIENT_TYPE_PUBSUB
:  "pubsub";

2686 
CLIENT_TYPE_MASTER
:  "master";

2687 :  
NULL
;

2689 
	}
}

2697 
	$checkCl›ÁOuutBufãrLim™s
(
ş›Á
 *
c
) {

2698 
soá
 = 0, 
h¬d
 = 0, 
şass
;

2699 
u£d_mem
 = 
	`g‘Cl›ÁOuutBufãrMemÜyU§ge
(
c
);

2701 
şass
 = 
	`g‘Cl›ÁTy³
(
c
);

2704 ià(
şass
 =ğ
CLIENT_TYPE_MASTER
èşas ğ
CLIENT_TYPE_NORMAL
;

2706 ià(
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
h¬d_lim™_by‹s
 &&

2707 
u£d_mem
 >ğ
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
h¬d_lim™_by‹s
)

2708 
h¬d
 = 1;

2709 ià(
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_by‹s
 &&

2710 
u£d_mem
 >ğ
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_by‹s
)

2711 
soá
 = 1;

2715 ià(
soá
) {

2716 ià(
c
->
obuf_soá_lim™_»ached_time
 == 0) {

2717 
c
->
obuf_soá_lim™_»ached_time
 = 
£rv”
.
unixtime
;

2718 
soá
 = 0;

2720 
time_t
 
–­£d
 = 
£rv”
.
unixtime
 - 
c
->
obuf_soá_lim™_»ached_time
;

2722 ià(
–­£d
 <=

2723 
£rv”
.
ş›Á_obuf_lim™s
[
şass
].
soá_lim™_£cÚds
) {

2724 
soá
 = 0;

2730 
c
->
obuf_soá_lim™_»ached_time
 = 0;

2732  
soá
 || 
h¬d
;

2733 
	}
}

2742 
	$asyncClo£Cl›ÁOnOuutBufãrLim™R—ched
(
ş›Á
 *
c
) {

2743 ià(!
c
->
cÚn
) ;

2744 
	`£rv”As£¹
(
c
->
»¶y_by‹s
 < 
SIZE_MAX
-(1024*64));

2745 ià(
c
->
»¶y_by‹s
 =ğ0 || c->
æags
 & 
CLIENT_CLOSE_ASAP
) ;

2746 ià(
	`checkCl›ÁOuutBufãrLim™s
(
c
)) {

2747 
sds
 
ş›Á
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
c
);

2749 
	`ä“Cl›ÁAsync
(
c
);

2750 
	`£rv”Log
(
LL_WARNING
,"Cl›Á % scheduËdØbşo£d ASAP fÜ ov”comšg oàouuˆbufã¸lim™s.", 
ş›Á
);

2751 
	`sdsä“
(
ş›Á
);

2753 
	}
}

2759 
	$æushSÏvesOuutBufãrs
() {

2760 
li¡I‹r
 
li
;

2761 
li¡Node
 *
Ê
;

2763 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2764 (
Ê
 = 
	`li¡Next
(&
li
))) {

2765 
ş›Á
 *
¦ave
 = 
	`li¡NodeV®ue
(
Ê
);

2766 
ÿn_»ûive_wr™es
 = 
	`cÚnHasWr™eHªdËr
(
¦ave
->
cÚn
) ||

2767 (
¦ave
->
æags
 & 
CLIENT_PENDING_WRITE
);

2783 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
 &&

2784 
ÿn_»ûive_wr™es
 &&

2785 !
¦ave
->
»¶_put_Úlše_Ú_ack
 &&

2786 
	`ş›ÁHasP’dšgR•l›s
(
¦ave
))

2788 
	`wr™eToCl›Á
(
¦ave
,0);

2791 
	}
}

2810 
	$·u£Cl›Ás
(
m¡ime_t
 
’d
) {

2811 ià(!
£rv”
.
ş›Ás_·u£d
 || 
’d
 > s”v”.
ş›Ás_·u£_’d_time
)

2812 
£rv”
.
ş›Ás_·u£_’d_time
 = 
’d
;

2813 
£rv”
.
ş›Ás_·u£d
 = 1;

2814 
	}
}

2818 
	$ş›ÁsA»Pau£d
() {

2819 ià(
£rv”
.
ş›Ás_·u£d
 &&

2820 
£rv”
.
ş›Ás_·u£_’d_time
 < s”v”.
m¡ime
)

2822 
li¡Node
 *
Ê
;

2823 
li¡I‹r
 
li
;

2824 
ş›Á
 *
c
;

2826 
£rv”
.
ş›Ás_·u£d
 = 0;

2830 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

2831 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2832 
c
 = 
	`li¡NodeV®ue
(
Ê
);

2836 ià(
c
->
æags
 & (
CLIENT_SLAVE
|
CLIENT_BLOCKED
)) ;

2837 
	`queueCl›ÁFÜR•roûssšg
(
c
);

2840  
£rv”
.
ş›Ás_·u£d
;

2841 
	}
}

2855 
	$´oûssEv’tsWheBlocked
() {

2856 
™”©iÚs
 = 4;

2857 
couÁ
 = 0;

2863 
ProûssšgEv’tsWheBlocked
 = 1;

2864 
™”©iÚs
--) {

2865 
ev’ts
 = 0;

2866 
ev’ts
 +ğ
	`«ProûssEv’ts
(
£rv”
.
–
, 
AE_FILE_EVENTS
|
AE_DONT_WAIT
);

2867 
ev’ts
 +ğ
	`hªdËCl›ÁsW™hP’dšgWr™es
();

2868 ià(!
ev’ts
) ;

2869 
couÁ
 +ğ
ev’ts
;

2871 
ProûssšgEv’tsWheBlocked
 = 0;

2872  
couÁ
;

2873 
	}
}

2879 
	gtio_debug
 = 0;

2881 
	#IO_THREADS_MAX_NUM
 128

	)

2882 
	#IO_THREADS_OP_READ
 0

	)

2883 
	#IO_THREADS_OP_WRITE
 1

	)

2885 
±h»ad_t
 
	gio_th»ads
[
IO_THREADS_MAX_NUM
];

2886 
±h»ad_mu‹x_t
 
	gio_th»ads_mu‹x
[
IO_THREADS_MAX_NUM
];

2887 
_Atomic
 
	gio_th»ads_³ndšg
[
IO_THREADS_MAX_NUM
];

2888 
	gio_th»ads_aùive
;

2889 
	gio_th»ads_İ
;

2894 
li¡
 *
	gio_th»ads_li¡
[
IO_THREADS_MAX_NUM
];

2896 *
	$IOTh»adMaš
(*
myid
) {

2899 
id
 = ()
myid
;

2900 
thdÇme
[16];

2902 
	`¢´štf
(
thdÇme
, ÑhdÇme), "io_thd_%ld", 
id
);

2903 
	`»dis_£t_th»ad_t™Ë
(
thdÇme
);

2904 
	`»disS‘CpuAffš™y
(
£rv”
.
£rv”_ıuli¡
);

2908 
j
 = 0; j < 1000000; j++) {

2909 ià(
io_th»ads_³ndšg
[
id
] != 0) ;

2913 ià(
io_th»ads_³ndšg
[
id
] == 0) {

2914 
	`±h»ad_mu‹x_lock
(&
io_th»ads_mu‹x
[
id
]);

2915 
	`±h»ad_mu‹x_uÆock
(&
io_th»ads_mu‹x
[
id
]);

2919 
	`£rv”As£¹
(
io_th»ads_³ndšg
[
id
] != 0);

2921 ià(
tio_debug
è
	`´štf
("[%ld] %dØhªdË\n", 
id
, ()
	`li¡L’gth
(
io_th»ads_li¡
[id]));

2925 
li¡I‹r
 
li
;

2926 
li¡Node
 *
Ê
;

2927 
	`li¡Rewšd
(
io_th»ads_li¡
[
id
],&
li
);

2928 (
Ê
 = 
	`li¡Next
(&
li
))) {

2929 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

2930 ià(
io_th»ads_İ
 =ğ
IO_THREADS_OP_WRITE
) {

2931 
	`wr™eToCl›Á
(
c
,0);

2932 } ià(
io_th»ads_İ
 =ğ
IO_THREADS_OP_READ
) {

2933 
	`»adQu”yFromCl›Á
(
c
->
cÚn
);

2935 
	`£rv”Pªic
("io_threads_op value is unknown");

2938 
	`li¡Em±y
(
io_th»ads_li¡
[
id
]);

2939 
io_th»ads_³ndšg
[
id
] = 0;

2941 ià(
tio_debug
è
	`´štf
("[%ld] DÚe\n", 
id
);

2943 
	}
}

2946 
	$š™Th»adedIO
() {

2947 
io_th»ads_aùive
 = 0;

2951 ià(
£rv”
.
io_th»ads_num
 == 1) ;

2953 ià(
£rv”
.
io_th»ads_num
 > 
IO_THREADS_MAX_NUM
) {

2954 
	`£rv”Log
(
LL_WARNING
,"Fatal:oo many I/Ohreads configured. "

2955 "Thmaximum‚umb” i %d.", 
IO_THREADS_MAX_NUM
);

2956 
	`ex™
(1);

2960 
i
 = 0; i < 
£rv”
.
io_th»ads_num
; i++) {

2962 
io_th»ads_li¡
[
i
] = 
	`li¡C»©e
();

2963 ià(
i
 == 0) ;

2966 
±h»ad_t
 
tid
;

2967 
	`±h»ad_mu‹x_š™
(&
io_th»ads_mu‹x
[
i
],
NULL
);

2968 
io_th»ads_³ndšg
[
i
] = 0;

2969 
	`±h»ad_mu‹x_lock
(&
io_th»ads_mu‹x
[
i
]);

2970 ià(
	`±h»ad_ü—‹
(&
tid
,
NULL
,
IOTh»adMaš
,(*)()
i
) != 0) {

2971 
	`£rv”Log
(
LL_WARNING
,"Fatal: Can't initialize IOhread.");

2972 
	`ex™
(1);

2974 
io_th»ads
[
i
] = 
tid
;

2976 
	}
}

2978 
	$¡¬tTh»adedIO
() {

2979 ià(
tio_debug
è{ 
	`´štf
("S"); 
	`fæush
(
¡dout
); }

2980 ià(
tio_debug
è
	`´štf
("--- STARTING THREADED IO ---\n");

2981 
	`£rv”As£¹
(
io_th»ads_aùive
 == 0);

2982 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++)

2983 
	`±h»ad_mu‹x_uÆock
(&
io_th»ads_mu‹x
[
j
]);

2984 
io_th»ads_aùive
 = 1;

2985 
	}
}

2987 
	$¡İTh»adedIO
() {

2990 
	`hªdËCl›ÁsW™hP’dšgR—dsUsšgTh»ads
();

2991 ià(
tio_debug
è{ 
	`´štf
("E"); 
	`fæush
(
¡dout
); }

2992 ià(
tio_debug
è
	`´štf
("--- STOPPING THREADED IO [R%d] [W%d] ---\n",

2993 (è
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_»ad
),

2994 (è
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_wr™e
));

2995 
	`£rv”As£¹
(
io_th»ads_aùive
 == 1);

2996 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++)

2997 
	`±h»ad_mu‹x_lock
(&
io_th»ads_mu‹x
[
j
]);

2998 
io_th»ads_aùive
 = 0;

2999 
	}
}

3010 
	$¡İTh»adedIOIfN“ded
() {

3011 
³ndšg
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_wr™e
);

3014 ià(
£rv”
.
io_th»ads_num
 == 1)  1;

3016 ià(
³ndšg
 < (
£rv”
.
io_th»ads_num
*2)) {

3017 ià(
io_th»ads_aùive
è
	`¡İTh»adedIO
();

3022 
	}
}

3024 
	$hªdËCl›ÁsW™hP’dšgWr™esUsšgTh»ads
() {

3025 
´oûs£d
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_wr™e
);

3026 ià(
´oûs£d
 == 0)  0;

3030 ià(
£rv”
.
io_th»ads_num
 =ğ1 || 
	`¡İTh»adedIOIfN“ded
()) {

3031  
	`hªdËCl›ÁsW™hP’dšgWr™es
();

3035 ià(!
io_th»ads_aùive
è
	`¡¬tTh»adedIO
();

3037 ià(
tio_debug
è
	`´štf
("%d TOTAL WRITE…’dšg cl›Ás\n", 
´oûs£d
);

3040 
li¡I‹r
 
li
;

3041 
li¡Node
 *
Ê
;

3042 
	`li¡Rewšd
(
£rv”
.
ş›Ás_³ndšg_wr™e
,&
li
);

3043 
™em_id
 = 0;

3044 (
Ê
 = 
	`li¡Next
(&
li
))) {

3045 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3046 
c
->
æags
 &ğ~
CLIENT_PENDING_WRITE
;

3047 
rg‘_id
 = 
™em_id
 % 
£rv”
.
io_th»ads_num
;

3048 
	`li¡AddNodeTa
(
io_th»ads_li¡
[
rg‘_id
],
c
);

3049 
™em_id
++;

3054 
io_th»ads_İ
 = 
IO_THREADS_OP_WRITE
;

3055 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++) {

3056 
couÁ
 = 
	`li¡L’gth
(
io_th»ads_li¡
[
j
]);

3057 
io_th»ads_³ndšg
[
j
] = 
couÁ
;

3061 
	`li¡Rewšd
(
io_th»ads_li¡
[0],&
li
);

3062 (
Ê
 = 
	`li¡Next
(&
li
))) {

3063 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3064 
	`wr™eToCl›Á
(
c
,0);

3066 
	`li¡Em±y
(
io_th»ads_li¡
[0]);

3070 
³ndšg
 = 0;

3071 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++)

3072 
³ndšg
 +ğ
io_th»ads_³ndšg
[
j
];

3073 ià(
³ndšg
 == 0) ;

3075 ià(
tio_debug
è
	`´štf
("I/O WRITE Allhreads finshed\n");

3079 
	`li¡Rewšd
(
£rv”
.
ş›Ás_³ndšg_wr™e
,&
li
);

3080 (
Ê
 = 
	`li¡Next
(&
li
))) {

3081 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3085 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
) &&

3086 
	`cÚnS‘Wr™eHªdËr
(
c
->
cÚn
, 
£ndR•lyToCl›Á
è=ğ
AE_ERR
)

3088 
	`ä“Cl›ÁAsync
(
c
);

3091 
	`li¡Em±y
(
£rv”
.
ş›Ás_³ndšg_wr™e
);

3092  
´oûs£d
;

3093 
	}
}

3099 
	$po¡pÚeCl›ÁR—d
(
ş›Á
 *
c
) {

3100 ià(
io_th»ads_aùive
 &&

3101 
£rv”
.
io_th»ads_do_»ads
 &&

3102 !
ProûssšgEv’tsWheBlocked
 &&

3103 !(
c
->
æags
 & (
CLIENT_MASTER
|
CLIENT_SLAVE
|
CLIENT_PENDING_READ
)))

3105 
c
->
æags
 |ğ
CLIENT_PENDING_READ
;

3106 
	`li¡AddNodeH—d
(
£rv”
.
ş›Ás_³ndšg_»ad
,
c
);

3111 
	}
}

3119 
	$hªdËCl›ÁsW™hP’dšgR—dsUsšgTh»ads
() {

3120 ià(!
io_th»ads_aùive
 || !
£rv”
.
io_th»ads_do_»ads
)  0;

3121 
´oûs£d
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_»ad
);

3122 ià(
´oûs£d
 == 0)  0;

3124 ià(
tio_debug
è
	`´štf
("%d TOTAL READ…’dšg cl›Ás\n", 
´oûs£d
);

3127 
li¡I‹r
 
li
;

3128 
li¡Node
 *
Ê
;

3129 
	`li¡Rewšd
(
£rv”
.
ş›Ás_³ndšg_»ad
,&
li
);

3130 
™em_id
 = 0;

3131 (
Ê
 = 
	`li¡Next
(&
li
))) {

3132 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3133 
rg‘_id
 = 
™em_id
 % 
£rv”
.
io_th»ads_num
;

3134 
	`li¡AddNodeTa
(
io_th»ads_li¡
[
rg‘_id
],
c
);

3135 
™em_id
++;

3140 
io_th»ads_İ
 = 
IO_THREADS_OP_READ
;

3141 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++) {

3142 
couÁ
 = 
	`li¡L’gth
(
io_th»ads_li¡
[
j
]);

3143 
io_th»ads_³ndšg
[
j
] = 
couÁ
;

3147 
	`li¡Rewšd
(
io_th»ads_li¡
[0],&
li
);

3148 (
Ê
 = 
	`li¡Next
(&
li
))) {

3149 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3150 
	`»adQu”yFromCl›Á
(
c
->
cÚn
);

3152 
	`li¡Em±y
(
io_th»ads_li¡
[0]);

3156 
³ndšg
 = 0;

3157 
j
 = 1; j < 
£rv”
.
io_th»ads_num
; j++)

3158 
³ndšg
 +ğ
io_th»ads_³ndšg
[
j
];

3159 ià(
³ndšg
 == 0) ;

3161 ià(
tio_debug
è
	`´štf
("I/O READ Allhreads finshed\n");

3164 
	`li¡L’gth
(
£rv”
.
ş›Ás_³ndšg_»ad
)) {

3165 
Ê
 = 
	`li¡Fœ¡
(
£rv”
.
ş›Ás_³ndšg_»ad
);

3166 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

3167 
c
->
æags
 &ğ~
CLIENT_PENDING_READ
;

3168 
	`li¡D–Node
(
£rv”
.
ş›Ás_³ndšg_»ad
,
Ê
);

3170 ià(
c
->
æags
 & 
CLIENT_PENDING_COMMAND
) {

3171 
c
->
æags
 &ğ~
CLIENT_PENDING_COMMAND
;

3172 ià(
	`´oûssCommªdAndRe£tCl›Á
(
c
è=ğ
C_ERR
) {

3179 
	`´oûssIÅutBufãr
(
c
);

3181  
´oûs£d
;

3182 
	}
}

	@notify.c

30 
	~"£rv”.h
"

40 
	$key¥aûEv’tsSŒšgToFÏgs
(*
şas£s
) {

41 *
p
 = 
şas£s
;

42 
c
, 
æags
 = 0;

44 (
c
 = *
p
++) != '\0') {

45 
c
) {

46 'A': 
æags
 |ğ
NOTIFY_ALL
; ;

47 'g': 
æags
 |ğ
NOTIFY_GENERIC
; ;

48 '$': 
æags
 |ğ
NOTIFY_STRING
; ;

49 'l': 
æags
 |ğ
NOTIFY_LIST
; ;

50 's': 
æags
 |ğ
NOTIFY_SET
; ;

51 'h': 
æags
 |ğ
NOTIFY_HASH
; ;

52 'z': 
æags
 |ğ
NOTIFY_ZSET
; ;

53 'x': 
æags
 |ğ
NOTIFY_EXPIRED
; ;

54 'e': 
æags
 |ğ
NOTIFY_EVICTED
; ;

55 'K': 
æags
 |ğ
NOTIFY_KEYSPACE
; ;

56 'E': 
æags
 |ğ
NOTIFY_KEYEVENT
; ;

57 't': 
æags
 |ğ
NOTIFY_STREAM
; ;

58 'm': 
æags
 |ğ
NOTIFY_KEY_MISS
; ;

62  
æags
;

63 
	}
}

69 
sds
 
	$key¥aûEv’tsFÏgsToSŒšg
(
æags
) {

70 
sds
 
»s
;

72 
»s
 = 
	`sd£m±y
();

73 ià((
æags
 & 
NOTIFY_ALL
) == NOTIFY_ALL) {

74 
»s
 = 
	`sdsÿ’
(res,"A",1);

76 ià(
æags
 & 
NOTIFY_GENERIC
è
»s
 = 
	`sdsÿ’
(res,"g",1);

77 ià(
æags
 & 
NOTIFY_STRING
è
»s
 = 
	`sdsÿ’
(res,"$",1);

78 ià(
æags
 & 
NOTIFY_LIST
è
»s
 = 
	`sdsÿ’
(res,"l",1);

79 ià(
æags
 & 
NOTIFY_SET
è
»s
 = 
	`sdsÿ’
(res,"s",1);

80 ià(
æags
 & 
NOTIFY_HASH
è
»s
 = 
	`sdsÿ’
(res,"h",1);

81 ià(
æags
 & 
NOTIFY_ZSET
è
»s
 = 
	`sdsÿ’
(res,"z",1);

82 ià(
æags
 & 
NOTIFY_EXPIRED
è
»s
 = 
	`sdsÿ’
(res,"x",1);

83 ià(
æags
 & 
NOTIFY_EVICTED
è
»s
 = 
	`sdsÿ’
(res,"e",1);

84 ià(
æags
 & 
NOTIFY_STREAM
è
»s
 = 
	`sdsÿ’
(res,"t",1);

86 ià(
æags
 & 
NOTIFY_KEYSPACE
è
»s
 = 
	`sdsÿ’
(res,"K",1);

87 ià(
æags
 & 
NOTIFY_KEYEVENT
è
»s
 = 
	`sdsÿ’
(res,"E",1);

88 ià(
æags
 & 
NOTIFY_KEY_MISS
è
»s
 = 
	`sdsÿ’
(res,"m",1);

89  
»s
;

90 
	}
}

99 
	$nÙifyKey¥aûEv’t
(
ty³
, *
ev’t
, 
robj
 *
key
, 
dbid
) {

100 
sds
 
chª
;

101 
robj
 *
chªobj
, *
ev’tobj
;

102 
Ën
 = -1;

103 
buf
[24];

109 
	`moduËNÙifyKey¥aûEv’t
(
ty³
, 
ev’t
, 
key
, 
dbid
);

112 ià(!(
£rv”
.
nÙify_key¥aû_ev’ts
 & 
ty³
)) ;

114 
ev’tobj
 = 
	`ü—‹SŒšgObjeù
(
ev’t
,
	`¡¾’
(event));

117 ià(
£rv”
.
nÙify_key¥aû_ev’ts
 & 
NOTIFY_KEYSPACE
) {

118 
chª
 = 
	`sd¢ewËn
("__keyspace@",11);

119 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
dbid
);

120 
chª
 = 
	`sdsÿ’
(chª, 
buf
, 
Ën
);

121 
chª
 = 
	`sdsÿ’
(chan, "__:", 3);

122 
chª
 = 
	`sdsÿtsds
(chª, 
key
->
±r
);

123 
chªobj
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
chª
);

124 
	`pubsubPublishMes§ge
(
chªobj
, 
ev’tobj
);

125 
	`deüRefCouÁ
(
chªobj
);

129 ià(
£rv”
.
nÙify_key¥aû_ev’ts
 & 
NOTIFY_KEYEVENT
) {

130 
chª
 = 
	`sd¢ewËn
("__keyevent@",11);

131 ià(
Ën
 =ğ-1èËÀğ
	`Î2¡ršg
(
buf
,(buf),
dbid
);

132 
chª
 = 
	`sdsÿ’
(chª, 
buf
, 
Ën
);

133 
chª
 = 
	`sdsÿ’
(chan, "__:", 3);

134 
chª
 = 
	`sdsÿtsds
(chª, 
ev’tobj
->
±r
);

135 
chªobj
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
chª
);

136 
	`pubsubPublishMes§ge
(
chªobj
, 
key
);

137 
	`deüRefCouÁ
(
chªobj
);

139 
	`deüRefCouÁ
(
ev’tobj
);

140 
	}
}

	@object.c

31 
	~"£rv”.h
"

32 
	~<m©h.h
>

33 
	~<ùy³.h
>

35 #ifdeà
__CYGWIN__


36 
	#¡¹Şd
(
a
,
b
è(()
	`¡¹od
(×),(b)))

	)

41 
robj
 *
	$ü—‹Objeù
(
ty³
, *
±r
) {

42 
robj
 *
o
 = 
	`zm®loc
((*o));

43 
o
->
ty³
 =ype;

44 
o
->
’codšg
 = 
OBJ_ENCODING_RAW
;

45 
o
->
±r
 =…tr;

46 
o
->
»fcouÁ
 = 1;

50 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

51 
o
->
Ìu
 = (
	`LFUG‘TimeInMšu‹s
()<<8è| 
LFU_INIT_VAL
;

53 
o
->
Ìu
 = 
	`LRU_CLOCK
();

55  
o
;

56 
	}
}

69 
robj
 *
	$makeObjeùSh¬ed
(
robj
 *
o
) {

70 
	`£rv”As£¹
(
o
->
»fcouÁ
 == 1);

71 
o
->
»fcouÁ
 = 
OBJ_SHARED_REFCOUNT
;

72  
o
;

73 
	}
}

77 
robj
 *
	$ü—‹RawSŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
) {

78  
	`ü—‹Objeù
(
OBJ_STRING
, 
	`sd¢ewËn
(
±r
,
Ën
));

79 
	}
}

84 
robj
 *
	$ü—‹EmbeddedSŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
) {

85 
robj
 *
o
 = 
	`zm®loc
(Ôobj)+(
sdshdr8
)+
Ën
+1);

86 
sdshdr8
 *
sh
 = (*)(
o
+1);

88 
o
->
ty³
 = 
OBJ_STRING
;

89 
o
->
’codšg
 = 
OBJ_ENCODING_EMBSTR
;

90 
o
->
±r
 = 
sh
+1;

91 
o
->
»fcouÁ
 = 1;

92 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

93 
o
->
Ìu
 = (
	`LFUG‘TimeInMšu‹s
()<<8è| 
LFU_INIT_VAL
;

95 
o
->
Ìu
 = 
	`LRU_CLOCK
();

98 
sh
->
Ën
 =†en;

99 
sh
->
®loc
 = 
Ën
;

100 
sh
->
æags
 = 
SDS_TYPE_8
;

101 ià(
±r
 =ğ
SDS_NOINIT
)

102 
sh
->
buf
[
Ën
] = '\0';

103 ià(
±r
) {

104 
	`memıy
(
sh
->
buf
,
±r
,
Ën
);

105 
sh
->
buf
[
Ën
] = '\0';

107 
	`mem£t
(
sh
->
buf
,0,
Ën
+1);

109  
o
;

110 
	}
}

118 
	#OBJ_ENCODING_EMBSTR_SIZE_LIMIT
 44

	)

119 
robj
 *
	$ü—‹SŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
) {

120 ià(
Ën
 <ğ
OBJ_ENCODING_EMBSTR_SIZE_LIMIT
)

121  
	`ü—‹EmbeddedSŒšgObjeù
(
±r
,
Ën
);

123  
	`ü—‹RawSŒšgObjeù
(
±r
,
Ën
);

124 
	}
}

133 
robj
 *
	$ü—‹SŒšgObjeùFromLÚgLÚgW™hO±iÚs
(
v®ue
, 
v®ueobj
) {

134 
robj
 *
o
;

136 ià(
£rv”
.
maxmemÜy
 == 0 ||

137 !(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_NO_SHARED_INTEGERS
))

141 
v®ueobj
 = 0;

144 ià(
v®ue
 >ğ0 && v®u< 
OBJ_SHARED_INTEGERS
 && 
v®ueobj
 == 0) {

145 
	`šüRefCouÁ
(
sh¬ed
.
š‹g”s
[
v®ue
]);

146 
o
 = 
sh¬ed
.
š‹g”s
[
v®ue
];

148 ià(
v®ue
 >ğ
LONG_MIN
 && v®u<ğ
LONG_MAX
) {

149 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
NULL
);

150 
o
->
’codšg
 = 
OBJ_ENCODING_INT
;

151 
o
->
±r
 = (*)(()
v®ue
);

153 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sdsäomlÚglÚg
(
v®ue
));

156  
o
;

157 
	}
}

161 
robj
 *
	$ü—‹SŒšgObjeùFromLÚgLÚg
(
v®ue
) {

162  
	`ü—‹SŒšgObjeùFromLÚgLÚgW™hO±iÚs
(
v®ue
,0);

163 
	}
}

169 
robj
 *
	$ü—‹SŒšgObjeùFromLÚgLÚgFÜV®ue
(
v®ue
) {

170  
	`ü—‹SŒšgObjeùFromLÚgLÚgW™hO±iÚs
(
v®ue
,1);

171 
	}
}

179 
robj
 *
	$ü—‹SŒšgObjeùFromLÚgDoubË
(
v®ue
, 
humªä›ndly
) {

180 
buf
[
MAX_LONG_DOUBLE_CHARS
];

181 
Ën
 = 
	`ld2¡ršg
(
buf
,(buf),
v®ue
,
humªä›ndly
? 
LD_STR_HUMAN
: 
LD_STR_AUTO
);

182  
	`ü—‹SŒšgObjeù
(
buf
,
Ën
);

183 
	}
}

193 
robj
 *
	$dupSŒšgObjeù
(cÚ¡ 
robj
 *
o
) {

194 
robj
 *
d
;

196 
	`£rv”As£¹
(
o
->
ty³
 =ğ
OBJ_STRING
);

198 
o
->
’codšg
) {

199 
OBJ_ENCODING_RAW
:

200  
	`ü—‹RawSŒšgObjeù
(
o
->
±r
,
	`sd¦’
(o->ptr));

201 
OBJ_ENCODING_EMBSTR
:

202  
	`ü—‹EmbeddedSŒšgObjeù
(
o
->
±r
,
	`sd¦’
(o->ptr));

203 
OBJ_ENCODING_INT
:

204 
d
 = 
	`ü—‹Objeù
(
OBJ_STRING
, 
NULL
);

205 
d
->
’codšg
 = 
OBJ_ENCODING_INT
;

206 
d
->
±r
 = 
o
->ptr;

207  
d
;

209 
	`£rv”Pªic
("Wrongƒncoding.");

212 
	}
}

214 
robj
 *
	$ü—‹Quickli¡Objeù
() {

215 
quickli¡
 *
l
 = 
	`quickli¡C»©e
();

216 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_LIST
,
l
);

217 
o
->
’codšg
 = 
OBJ_ENCODING_QUICKLIST
;

218  
o
;

219 
	}
}

221 
robj
 *
	$ü—‹Zli¡Objeù
() {

222 *
zl
 = 
	`zli¡New
();

223 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_LIST
,
zl
);

224 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

225  
o
;

226 
	}
}

228 
robj
 *
	$ü—‹S‘Objeù
() {

229 
diù
 *
d
 = 
	`diùC»©e
(&
£tDiùTy³
,
NULL
);

230 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_SET
,
d
);

231 
o
->
’codšg
 = 
OBJ_ENCODING_HT
;

232  
o
;

233 
	}
}

235 
robj
 *
	$ü—‹IÁ£tObjeù
() {

236 
št£t
 *
is
 = 
	`št£tNew
();

237 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_SET
,
is
);

238 
o
->
’codšg
 = 
OBJ_ENCODING_INTSET
;

239  
o
;

240 
	}
}

242 
robj
 *
	$ü—‹HashObjeù
() {

243 *
zl
 = 
	`zli¡New
();

244 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_HASH
, 
zl
);

245 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

246  
o
;

247 
	}
}

249 
robj
 *
	$ü—‹Z£tObjeù
() {

250 
z£t
 *
zs
 = 
	`zm®loc
((*zs));

251 
robj
 *
o
;

253 
zs
->
diù
 = 
	`diùC»©e
(&
z£tDiùTy³
,
NULL
);

254 
zs
->
z¦
 = 
	`z¦C»©e
();

255 
o
 = 
	`ü—‹Objeù
(
OBJ_ZSET
,
zs
);

256 
o
->
’codšg
 = 
OBJ_ENCODING_SKIPLIST
;

257  
o
;

258 
	}
}

260 
robj
 *
	$ü—‹Z£tZli¡Objeù
() {

261 *
zl
 = 
	`zli¡New
();

262 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_ZSET
,
zl
);

263 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

264  
o
;

265 
	}
}

267 
robj
 *
	$ü—‹SŒ—mObjeù
() {

268 
¡»am
 *
s
 = 
	`¡»amNew
();

269 
robj
 *
o
 = 
	`ü—‹Objeù
(
OBJ_STREAM
,
s
);

270 
o
->
’codšg
 = 
OBJ_ENCODING_STREAM
;

271  
o
;

272 
	}
}

274 
robj
 *
	$ü—‹ModuËObjeù
(
moduËTy³
 *
mt
, *
v®ue
) {

275 
moduËV®ue
 *
mv
 = 
	`zm®loc
((*mv));

276 
mv
->
ty³
 = 
mt
;

277 
mv
->
v®ue
 = value;

278  
	`ü—‹Objeù
(
OBJ_MODULE
,
mv
);

279 
	}
}

281 
	$ä“SŒšgObjeù
(
robj
 *
o
) {

282 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_RAW
) {

283 
	`sdsä“
(
o
->
±r
);

285 
	}
}

287 
	$ä“Li¡Objeù
(
robj
 *
o
) {

288 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

289 
	`quickli¡R–—£
(
o
->
±r
);

291 
	`£rv”Pªic
("Unknown†istƒncodingype");

293 
	}
}

295 
	$ä“S‘Objeù
(
robj
 *
o
) {

296 
o
->
’codšg
) {

297 
OBJ_ENCODING_HT
:

298 
	`diùR–—£
((
diù
*è
o
->
±r
);

300 
OBJ_ENCODING_INTSET
:

301 
	`zä“
(
o
->
±r
);

304 
	`£rv”Pªic
("Unknown setƒncodingype");

306 
	}
}

308 
	$ä“Z£tObjeù
(
robj
 *
o
) {

309 
z£t
 *
zs
;

310 
o
->
’codšg
) {

311 
OBJ_ENCODING_SKIPLIST
:

312 
zs
 = 
o
->
±r
;

313 
	`diùR–—£
(
zs
->
diù
);

314 
	`z¦F»e
(
zs
->
z¦
);

315 
	`zä“
(
zs
);

317 
OBJ_ENCODING_ZIPLIST
:

318 
	`zä“
(
o
->
±r
);

321 
	`£rv”Pªic
("Unknown sorted setƒncoding");

323 
	}
}

325 
	$ä“HashObjeù
(
robj
 *
o
) {

326 
o
->
’codšg
) {

327 
OBJ_ENCODING_HT
:

328 
	`diùR–—£
((
diù
*è
o
->
±r
);

330 
OBJ_ENCODING_ZIPLIST
:

331 
	`zä“
(
o
->
±r
);

334 
	`£rv”Pªic
("Unknown hashƒncodingype");

337 
	}
}

339 
	$ä“ModuËObjeù
(
robj
 *
o
) {

340 
moduËV®ue
 *
mv
 = 
o
->
±r
;

341 
mv
->
ty³
->
	`ä“
(mv->
v®ue
);

342 
	`zä“
(
mv
);

343 
	}
}

345 
	$ä“SŒ—mObjeù
(
robj
 *
o
) {

346 
	`ä“SŒ—m
(
o
->
±r
);

347 
	}
}

349 
	$šüRefCouÁ
(
robj
 *
o
) {

350 ià(
o
->
»fcouÁ
 < 
OBJ_FIRST_SPECIAL_REFCOUNT
) {

351 
o
->
»fcouÁ
++;

353 ià(
o
->
»fcouÁ
 =ğ
OBJ_SHARED_REFCOUNT
) {

355 } ià(
o
->
»fcouÁ
 =ğ
OBJ_STATIC_REFCOUNT
) {

356 
	`£rv”Pªic
("Youriedo„etain‡n object‡llocated inhe stack");

359 
	}
}

361 
	$deüRefCouÁ
(
robj
 *
o
) {

362 ià(
o
->
»fcouÁ
 == 1) {

363 
o
->
ty³
) {

364 
OBJ_STRING
: 
	`ä“SŒšgObjeù
(
o
); ;

365 
OBJ_LIST
: 
	`ä“Li¡Objeù
(
o
); ;

366 
OBJ_SET
: 
	`ä“S‘Objeù
(
o
); ;

367 
OBJ_ZSET
: 
	`ä“Z£tObjeù
(
o
); ;

368 
OBJ_HASH
: 
	`ä“HashObjeù
(
o
); ;

369 
OBJ_MODULE
: 
	`ä“ModuËObjeù
(
o
); ;

370 
OBJ_STREAM
: 
	`ä“SŒ—mObjeù
(
o
); ;

371 : 
	`£rv”Pªic
("Unknown objectype"); ;

373 
	`zä“
(
o
);

375 ià(
o
->
»fcouÁ
 <ğ0è
	`£rv”Pªic
("decrRefCount‡gainst„efcount <= 0");

376 ià(
o
->
»fcouÁ
 !ğ
OBJ_SHARED_REFCOUNT
) o->refcount--;

378 
	}
}

383 
	$deüRefCouÁVoid
(*
o
) {

384 
	`deüRefCouÁ
(
o
);

385 
	}
}

399 
robj
 *
	$»£tRefCouÁ
(
robj
 *
obj
) {

400 
obj
->
»fcouÁ
 = 0;

401  
obj
;

402 
	}
}

404 
	$checkTy³
(
ş›Á
 *
c
, 
robj
 *
o
, 
ty³
) {

405 ià(
o
->
ty³
 !=ype) {

406 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

410 
	}
}

412 
	$isSdsR•»£ÁabËAsLÚgLÚg
(
sds
 
s
, *
Îv®
) {

413  
	`¡ršg2Î
(
s
,
	`sd¦’
(s),
Îv®
è? 
C_OK
 : 
C_ERR
;

414 
	}
}

416 
	$isObjeùR•»£ÁabËAsLÚgLÚg
(
robj
 *
o
, *
Îv®
) {

417 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

418 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

419 ià(
Îv®
è*Îv® = (è
o
->
±r
;

420  
C_OK
;

422  
	`isSdsR•»£ÁabËAsLÚgLÚg
(
o
->
±r
,
Îv®
);

424 
	}
}

430 
	$ŒimSŒšgObjeùIfN“ded
(
robj
 *
o
) {

431 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_RAW
 &&

432 
	`sd§va
(
o
->
±r
è> 
	`sd¦’
(o->ptr)/10)

434 
o
->
±r
 = 
	`sdsRemoveF»eS·û
(o->ptr);

436 
	}
}

439 
robj
 *
	$ŒyObjeùEncodšg
(
robj
 *
o
) {

440 
v®ue
;

441 
sds
 
s
 = 
o
->
±r
;

442 
size_t
 
Ën
;

448 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

453 ià(!
	`sdsEncodedObjeù
(
o
))  o;

458 ià(
o
->
»fcouÁ
 > 1)  o;

463 
Ën
 = 
	`sd¦’
(
s
);

464 ià(
Ën
 <ğ20 && 
	`¡ršg2l
(
s
,Ën,&
v®ue
)) {

469 ià((
£rv”
.
maxmemÜy
 == 0 ||

470 !(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_NO_SHARED_INTEGERS
)) &&

471 
v®ue
 >= 0 &&

472 
v®ue
 < 
OBJ_SHARED_INTEGERS
)

474 
	`deüRefCouÁ
(
o
);

475 
	`šüRefCouÁ
(
sh¬ed
.
š‹g”s
[
v®ue
]);

476  
sh¬ed
.
š‹g”s
[
v®ue
];

478 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_RAW
) {

479 
	`sdsä“
(
o
->
±r
);

480 
o
->
’codšg
 = 
OBJ_ENCODING_INT
;

481 
o
->
±r
 = (*è
v®ue
;

482  
o
;

483 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_EMBSTR
) {

484 
	`deüRefCouÁ
(
o
);

485  
	`ü—‹SŒšgObjeùFromLÚgLÚgFÜV®ue
(
v®ue
);

494 ià(
Ën
 <ğ
OBJ_ENCODING_EMBSTR_SIZE_LIMIT
) {

495 
robj
 *
emb
;

497 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_EMBSTR
)  o;

498 
emb
 = 
	`ü—‹EmbeddedSŒšgObjeù
(
s
,
	`sd¦’
(s));

499 
	`deüRefCouÁ
(
o
);

500  
emb
;

512 
	`ŒimSŒšgObjeùIfN“ded
(
o
);

515  
o
;

516 
	}
}

520 
robj
 *
	$g‘DecodedObjeù
(
robj
 *
o
) {

521 
robj
 *
dec
;

523 ià(
	`sdsEncodedObjeù
(
o
)) {

524 
	`šüRefCouÁ
(
o
);

525  
o
;

527 ià(
o
->
ty³
 =ğ
OBJ_STRING
 && o->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

528 
buf
[32];

530 
	`Î2¡ršg
(
buf
,32,()
o
->
±r
);

531 
dec
 = 
	`ü—‹SŒšgObjeù
(
buf
,
	`¡¾’
(buf));

532  
dec
;

534 
	`£rv”Pªic
("Unknownƒncodingype");

536 
	}
}

546 
	#REDIS_COMPARE_BINARY
 (1<<0)

	)

547 
	#REDIS_COMPARE_COLL
 (1<<1)

	)

549 
	$com·»SŒšgObjeùsW™hFÏgs
(
robj
 *
a
,„obj *
b
, 
æags
) {

550 
	`£rv”As£¹W™hInfo
(
NULL
,
a
,a->
ty³
 =ğ
OBJ_STRING
 && 
b
->type == OBJ_STRING);

551 
buç
[128], 
bufb
[128], *
a¡r
, *
b¡r
;

552 
size_t
 
®’
, 
bËn
, 
mšËn
;

554 ià(
a
 =ğ
b
)  0;

555 ià(
	`sdsEncodedObjeù
(
a
)) {

556 
a¡r
 = 
a
->
±r
;

557 
®’
 = 
	`sd¦’
(
a¡r
);

559 
®’
 = 
	`Î2¡ršg
(
buç
,(buç),(è
a
->
±r
);

560 
a¡r
 = 
buç
;

562 ià(
	`sdsEncodedObjeù
(
b
)) {

563 
b¡r
 = 
b
->
±r
;

564 
bËn
 = 
	`sd¦’
(
b¡r
);

566 
bËn
 = 
	`Î2¡ršg
(
bufb
,(bufb),(è
b
->
±r
);

567 
b¡r
 = 
bufb
;

569 ià(
æags
 & 
REDIS_COMPARE_COLL
) {

570  
	`¡rcŞl
(
a¡r
,
b¡r
);

572 
cmp
;

574 
mšËn
 = (
®’
 < 
bËn
) ?‡len : blen;

575 
cmp
 = 
	`memcmp
(
a¡r
,
b¡r
,
mšËn
);

576 ià(
cmp
 =ğ0è 
®’
-
bËn
;

577  
cmp
;

579 
	}
}

582 
	$com·»SŒšgObjeùs
(
robj
 *
a
,„obj *
b
) {

583  
	`com·»SŒšgObjeùsW™hFÏgs
(
a
,
b
,
REDIS_COMPARE_BINARY
);

584 
	}
}

587 
	$cŞÏ‹SŒšgObjeùs
(
robj
 *
a
,„obj *
b
) {

588  
	`com·»SŒšgObjeùsW™hFÏgs
(
a
,
b
,
REDIS_COMPARE_COLL
);

589 
	}
}

595 
	$equ®SŒšgObjeùs
(
robj
 *
a
,„obj *
b
) {

596 ià(
a
->
’codšg
 =ğ
OBJ_ENCODING_INT
 &&

597 
b
->
’codšg
 =ğ
OBJ_ENCODING_INT
){

600  
a
->
±r
 =ğ
b
->ptr;

602  
	`com·»SŒšgObjeùs
(
a
,
b
) == 0;

604 
	}
}

606 
size_t
 
	$¡ršgObjeùL’
(
robj
 *
o
) {

607 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

608 ià(
	`sdsEncodedObjeù
(
o
)) {

609  
	`sd¦’
(
o
->
±r
);

611  
	`sdig™s10
(()
o
->
±r
);

613 
	}
}

615 
	$g‘DoubËFromObjeù
(cÚ¡ 
robj
 *
o
, *
rg‘
) {

616 
v®ue
;

618 ià(
o
 =ğ
NULL
) {

619 
v®ue
 = 0;

621 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

622 ià(
	`sdsEncodedObjeù
(
o
)) {

623 ià(!
	`¡ršg2d
(
o
->
±r
, 
	`sd¦’
(o->±r), &
v®ue
))

624  
C_ERR
;

625 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

626 
v®ue
 = ()
o
->
±r
;

628 
	`£rv”Pªic
("Unknown stringƒncoding");

631 *
rg‘
 = 
v®ue
;

632  
C_OK
;

633 
	}
}

635 
	$g‘DoubËFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
) {

636 
v®ue
;

637 ià(
	`g‘DoubËFromObjeù
(
o
, &
v®ue
è!ğ
C_OK
) {

638 ià(
msg
 !ğ
NULL
) {

639 
	`addR•lyE¼Ü
(
c
,(*)
msg
);

641 
	`addR•lyE¼Ü
(
c
,"value is‚ot‡ valid float");

643  
C_ERR
;

645 *
rg‘
 = 
v®ue
;

646  
C_OK
;

647 
	}
}

649 
	$g‘LÚgDoubËFromObjeù
(
robj
 *
o
, *
rg‘
) {

650 
v®ue
;

652 ià(
o
 =ğ
NULL
) {

653 
v®ue
 = 0;

655 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

656 ià(
	`sdsEncodedObjeù
(
o
)) {

657 ià(!
	`¡ršg2ld
(
o
->
±r
, 
	`sd¦’
(o->±r), &
v®ue
))

658  
C_ERR
;

659 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

660 
v®ue
 = ()
o
->
±r
;

662 
	`£rv”Pªic
("Unknown stringƒncoding");

665 *
rg‘
 = 
v®ue
;

666  
C_OK
;

667 
	}
}

669 
	$g‘LÚgDoubËFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
) {

670 
v®ue
;

671 ià(
	`g‘LÚgDoubËFromObjeù
(
o
, &
v®ue
è!ğ
C_OK
) {

672 ià(
msg
 !ğ
NULL
) {

673 
	`addR•lyE¼Ü
(
c
,(*)
msg
);

675 
	`addR•lyE¼Ü
(
c
,"value is‚ot‡ valid float");

677  
C_ERR
;

679 *
rg‘
 = 
v®ue
;

680  
C_OK
;

681 
	}
}

683 
	$g‘LÚgLÚgFromObjeù
(
robj
 *
o
, *
rg‘
) {

684 
v®ue
;

686 ià(
o
 =ğ
NULL
) {

687 
v®ue
 = 0;

689 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,o->
ty³
 =ğ
OBJ_STRING
);

690 ià(
	`sdsEncodedObjeù
(
o
)) {

691 ià(
	`¡ršg2Î
(
o
->
±r
,
	`sd¦’
(o->±r),&
v®ue
è=ğ0è 
C_ERR
;

692 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

693 
v®ue
 = ()
o
->
±r
;

695 
	`£rv”Pªic
("Unknown stringƒncoding");

698 ià(
rg‘
è*rg‘ = 
v®ue
;

699  
C_OK
;

700 
	}
}

702 
	$g‘LÚgLÚgFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
) {

703 
v®ue
;

704 ià(
	`g‘LÚgLÚgFromObjeù
(
o
, &
v®ue
è!ğ
C_OK
) {

705 ià(
msg
 !ğ
NULL
) {

706 
	`addR•lyE¼Ü
(
c
,(*)
msg
);

708 
	`addR•lyE¼Ü
(
c
,"value is‚ot‡n integer or out of„ange");

710  
C_ERR
;

712 *
rg‘
 = 
v®ue
;

713  
C_OK
;

714 
	}
}

716 
	$g‘LÚgFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
) {

717 
v®ue
;

719 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, 
o
, &
v®ue
, 
msg
è!ğ
C_OK
è 
C_ERR
;

720 ià(
v®ue
 < 
LONG_MIN
 || v®u> 
LONG_MAX
) {

721 ià(
msg
 !ğ
NULL
) {

722 
	`addR•lyE¼Ü
(
c
,(*)
msg
);

724 
	`addR•lyE¼Ü
(
c
,"value is out of„ange");

726  
C_ERR
;

728 *
rg‘
 = 
v®ue
;

729  
C_OK
;

730 
	}
}

732 *
	$¡rEncodšg
(
’codšg
) {

733 
’codšg
) {

734 
OBJ_ENCODING_RAW
:  "raw";

735 
OBJ_ENCODING_INT
:  "int";

736 
OBJ_ENCODING_HT
:  "hashtable";

737 
OBJ_ENCODING_QUICKLIST
:  "quicklist";

738 
OBJ_ENCODING_ZIPLIST
:  "ziplist";

739 
OBJ_ENCODING_INTSET
:  "intset";

740 
OBJ_ENCODING_SKIPLIST
:  "skiplist";

741 
OBJ_ENCODING_EMBSTR
:  "embstr";

744 
	}
}

763 
size_t
 
	$¡»amRadixT»eMemÜyU§ge
(
¿x
 *rax) {

764 
size_t
 
size
;

765 
size
 = 
¿x
->
num–e
 * (
¡»amID
);

766 
size
 +ğ
¿x
->
numnodes
 * (
¿xNode
);

768 
size
 +ğ
¿x
->
numnodes
 * ()*30;

769  
size
;

770 
	}
}

776 
	#OBJ_COMPUTE_SIZE_DEF_SAMPLES
 5

	)

777 
size_t
 
	$objeùCompu‹Size
(
robj
 *
o
, 
size_t
 
§m¶e_size
) {

778 
sds
 
–e
, 
–e2
;

779 
diù
 *
d
;

780 
diùI‹¿tÜ
 *
di
;

781 
diùEÁry
 *
de
;

782 
size_t
 
asize
 = 0, 
–esize
 = 0, 
§m¶es
 = 0;

784 ià(
o
->
ty³
 =ğ
OBJ_STRING
) {

785 if(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

786 
asize
 = (*
o
);

787 } if(
o
->
’codšg
 =ğ
OBJ_ENCODING_RAW
) {

788 
asize
 = 
	`sdsAÎocSize
(
o
->
±r
)+(*o);

789 } if(
o
->
’codšg
 =ğ
OBJ_ENCODING_EMBSTR
) {

790 
asize
 = 
	`sd¦’
(
o
->
±r
)+2+(*o);

792 
	`£rv”Pªic
("Unknown stringƒncoding");

794 } ià(
o
->
ty³
 =ğ
OBJ_LIST
) {

795 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

796 
quickli¡
 *
ql
 = 
o
->
±r
;

797 
quickli¡Node
 *
node
 = 
ql
->
h—d
;

798 
asize
 = (*
o
)+(
quickli¡
);

800 
–esize
 +ğ(
quickli¡Node
)+
	`zli¡BlobL’
(
node
->
zl
);

801 
§m¶es
++;

802 } (
node
 =‚ode->
Ãxt
è&& 
§m¶es
 < 
§m¶e_size
);

803 
asize
 +ğ()
–esize
/
§m¶es
*
ql
->
Ën
;

804 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

805 
asize
 = (*
o
)+
	`zli¡BlobL’
(o->
±r
);

807 
	`£rv”Pªic
("Unknown†istƒncoding");

809 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

810 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

811 
d
 = 
o
->
±r
;

812 
di
 = 
	`diùG‘I‹¿tÜ
(
d
);

813 
asize
 = (*
o
)+(
diù
)+((
diùEÁry
*)*
	`diùSlÙs
(
d
));

814 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
 && 
§m¶es
 < 
§m¶e_size
) {

815 
–e
 = 
	`diùG‘Key
(
de
);

816 
–esize
 +ğ(
diùEÁry
è+ 
	`sdsAÎocSize
(
–e
);

817 
§m¶es
++;

819 
	`diùR–—£I‹¿tÜ
(
di
);

820 ià(
§m¶es
è
asize
 +ğ()
–esize
/§m¶es*
	`diùSize
(
d
);

821 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

822 
št£t
 *
is
 = 
o
->
±r
;

823 
asize
 = (*
o
)+(*
is
)+is->
’codšg
*is->
Ëngth
;

825 
	`£rv”Pªic
("Unknown setƒncoding");

827 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

828 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

829 
asize
 = (*
o
)+(
	`zli¡BlobL’
(o->
±r
));

830 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

831 
d
 = ((
z£t
*)
o
->
±r
)->
diù
;

832 
zskli¡
 *
z¦
 = ((
z£t
*)
o
->
±r
)->zsl;

833 
zskli¡Node
 *
znode
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

834 
asize
 = (*
o
)+(
z£t
)+(
zskli¡
)+(
diù
)+

835 ((
diùEÁry
*)*
	`diùSlÙs
(
d
))+

836 
	`zm®loc_size
(
z¦
->
h—d”
);

837 
znode
 !ğ
NULL
 && 
§m¶es
 < 
§m¶e_size
) {

838 
–esize
 +ğ
	`sdsAÎocSize
(
znode
->
–e
);

839 
–esize
 +ğ(
diùEÁry
è+ 
	`zm®loc_size
(
znode
);

840 
§m¶es
++;

841 
znode
 = znode->
Ëv–
[0].
fÜw¬d
;

843 ià(
§m¶es
è
asize
 +ğ()
–esize
/§m¶es*
	`diùSize
(
d
);

845 
	`£rv”Pªic
("Unknown sorted setƒncoding");

847 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

848 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

849 
asize
 = (*
o
)+(
	`zli¡BlobL’
(o->
±r
));

850 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

851 
d
 = 
o
->
±r
;

852 
di
 = 
	`diùG‘I‹¿tÜ
(
d
);

853 
asize
 = (*
o
)+(
diù
)+((
diùEÁry
*)*
	`diùSlÙs
(
d
));

854 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
 && 
§m¶es
 < 
§m¶e_size
) {

855 
–e
 = 
	`diùG‘Key
(
de
);

856 
–e2
 = 
	`diùG‘V®
(
de
);

857 
–esize
 +ğ
	`sdsAÎocSize
(
–e
è+ sdsAÎocSize(
–e2
);

858 
–esize
 +ğ(
diùEÁry
);

859 
§m¶es
++;

861 
	`diùR–—£I‹¿tÜ
(
di
);

862 ià(
§m¶es
è
asize
 +ğ()
–esize
/§m¶es*
	`diùSize
(
d
);

864 
	`£rv”Pªic
("Unknown hashƒncoding");

866 } ià(
o
->
ty³
 =ğ
OBJ_STREAM
) {

867 
¡»am
 *
s
 = 
o
->
±r
;

868 
asize
 = (*
o
);

869 
asize
 +ğ
	`¡»amRadixT»eMemÜyU§ge
(
s
->
¿x
);

875 
¿xI‹¿tÜ
 
ri
;

876 
	`¿xS¹
(&
ri
,
s
->
¿x
);

877 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

878 
size_t
 
Ísize
 = 0, 
§m¶es
 = 0;

879 
§m¶es
 < 
§m¶e_size
 && 
	`¿xNext
(&
ri
)) {

880 *
Í
 = 
ri
.
d©a
;

881 
Ísize
 +ğ
	`ÍBy‹s
(
Í
);

882 
§m¶es
++;

884 ià(
s
->
¿x
->
num–e
 <ğ
§m¶es
) {

885 
asize
 +ğ
Ísize
;

887 ià(
§m¶es
è
Ísize
 /= samples;

888 
asize
 +ğ
Ísize
 * (
s
->
¿x
->
num–e
-1);

891 
	`¿xS“k
(&
ri
,"$",
NULL
,0);

892 
	`¿xNext
(&
ri
);

893 
asize
 +ğ
	`ÍBy‹s
(
ri
.
d©a
);

895 
	`¿xStİ
(&
ri
);

901 ià(
s
->
cgroups
) {

902 
	`¿xS¹
(&
ri
,
s
->
cgroups
);

903 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

904 
	`¿xNext
(&
ri
)) {

905 
¡»amCG
 *
cg
 = 
ri
.
d©a
;

906 
asize
 +ğ(*
cg
);

907 
asize
 +ğ
	`¡»amRadixT»eMemÜyU§ge
(
cg
->
³l
);

908 
asize
 +ğ(
¡»amNACK
)*
	`¿xSize
(
cg
->
³l
);

912 
¿xI‹¿tÜ
 
üi
;

913 
	`¿xS¹
(&
üi
,
cg
->
cÚsum”s
);

914 
	`¿xS“k
(&
üi
,"^",
NULL
,0);

915 
	`¿xNext
(&
üi
)) {

916 
¡»amCÚsum”
 *
cÚsum”
 = 
üi
.
d©a
;

917 
asize
 +ğ(*
cÚsum”
);

918 
asize
 +ğ
	`sd¦’
(
cÚsum”
->
Çme
);

919 
asize
 +ğ
	`¡»amRadixT»eMemÜyU§ge
(
cÚsum”
->
³l
);

923 
	`¿xStİ
(&
üi
);

925 
	`¿xStİ
(&
ri
);

927 } ià(
o
->
ty³
 =ğ
OBJ_MODULE
) {

928 
moduËV®ue
 *
mv
 = 
o
->
±r
;

929 
moduËTy³
 *
mt
 = 
mv
->
ty³
;

930 ià(
mt
->
mem_u§ge
 !ğ
NULL
) {

931 
asize
 = 
mt
->
	`mem_u§ge
(
mv
->
v®ue
);

933 
asize
 = 0;

936 
	`£rv”Pªic
("Unknown objectype");

938  
asize
;

939 
	}
}

942 
	$ä“MemÜyOv”h—dD©a
(
»disMemOv”h—d
 *
mh
) {

943 
	`zä“
(
mh
->
db
);

944 
	`zä“
(
mh
);

945 
	}
}

950 
»disMemOv”h—d
 *
	$g‘MemÜyOv”h—dD©a
() {

951 
j
;

952 
size_t
 
mem_tÙ®
 = 0;

953 
size_t
 
mem
 = 0;

954 
size_t
 
zm®loc_u£d
 = 
	`zm®loc_u£d_memÜy
();

955 
»disMemOv”h—d
 *
mh
 = 
	`zÿÎoc
((*mh));

957 
mh
->
tÙ®_®loÿ‹d
 = 
zm®loc_u£d
;

958 
mh
->
¡¬tup_®loÿ‹d
 = 
£rv”
.
š™Ÿl_memÜy_u§ge
;

959 
mh
->
³ak_®loÿ‹d
 = 
£rv”
.
¡©_³ak_memÜy
;

960 
mh
->
tÙ®_äag
 =

961 ()
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 / s”v”.üÚ_m®loc_¡©s.
zm®loc_u£d
;

962 
mh
->
tÙ®_äag_by‹s
 =

963 
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 - s”v”.üÚ_m®loc_¡©s.
zm®loc_u£d
;

964 
mh
->
®loÿtÜ_äag
 =

965 ()
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
 / s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_®loÿ‹d
;

966 
mh
->
®loÿtÜ_äag_by‹s
 =

967 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
 - s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_®loÿ‹d
;

968 
mh
->
®loÿtÜ_rss
 =

969 ()
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
 / s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_aùive
;

970 
mh
->
®loÿtÜ_rss_by‹s
 =

971 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
 - s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_aùive
;

972 
mh
->
rss_exŒa
 =

973 ()
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 / s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_»sid’t
;

974 
mh
->
rss_exŒa_by‹s
 =

975 
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 - s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_»sid’t
;

977 
mem_tÙ®
 +ğ
£rv”
.
š™Ÿl_memÜy_u§ge
;

979 
mem
 = 0;

980 ià(
£rv”
.
»¶_backlog
)

981 
mem
 +ğ
	`zm®loc_size
(
£rv”
.
»¶_backlog
);

982 
mh
->
»¶_backlog
 = 
mem
;

983 
mem_tÙ®
 +ğ
mem
;

988 
mh
->
ş›Ás_¦aves
 = 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
CLIENT_TYPE_SLAVE
];

989 
mh
->
ş›Ás_nÜm®
 = 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
CLIENT_TYPE_MASTER
]+

990 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
CLIENT_TYPE_PUBSUB
]+

991 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
CLIENT_TYPE_NORMAL
];

992 
mem_tÙ®
 +ğ
mh
->
ş›Ás_¦aves
;

993 
mem_tÙ®
 +ğ
mh
->
ş›Ás_nÜm®
;

995 
mem
 = 0;

996 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
) {

997 
mem
 +ğ
	`sd§Îoc
(
£rv”
.
aof_buf
);

998 
mem
 +ğ
	`aofRewr™eBufãrSize
();

1000 
mh
->
aof_bufãr
 = 
mem
;

1001 
mem_tÙ®
+=
mem
;

1003 
mem
 = 
£rv”
.
lua_süts_mem
;

1004 
mem
 +ğ
	`diùSize
(
£rv”
.
lua_süts
è* (
diùEÁry
) +

1005 
	`diùSlÙs
(
£rv”
.
lua_süts
è* (
diùEÁry
*);

1006 
mem
 +ğ
	`diùSize
(
£rv”
.
»¶_sütÿche_diù
è* (
diùEÁry
) +

1007 
	`diùSlÙs
(
£rv”
.
»¶_sütÿche_diù
è* (
diùEÁry
*);

1008 ià(
	`li¡L’gth
(
£rv”
.
»¶_sütÿche_fifo
) > 0) {

1009 
mem
 +ğ
	`li¡L’gth
(
£rv”
.
»¶_sütÿche_fifo
è* ((
li¡Node
) +

1010 
	`sdsZm®locSize
(
	`li¡NodeV®ue
(
	`li¡Fœ¡
(
£rv”
.
»¶_sütÿche_fifo
))));

1012 
mh
->
lua_ÿches
 = 
mem
;

1013 
mem_tÙ®
+=
mem
;

1015 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

1016 
»disDb
 *
db
 = 
£rv”
.db+
j
;

1017 
keyscouÁ
 = 
	`diùSize
(
db
->
diù
);

1018 ià(
keyscouÁ
==0) ;

1020 
mh
->
tÙ®_keys
 +ğ
keyscouÁ
;

1021 
mh
->
db
 = 
	`z»®loc
(mh->db,(mh->db[0])*(mh->
num_dbs
+1));

1022 
mh
->
db
[mh->
num_dbs
].
dbid
 = 
j
;

1024 
mem
 = 
	`diùSize
(
db
->
diù
è* (
diùEÁry
) +

1025 
	`diùSlÙs
(
db
->
diù
è* (
diùEÁry
*) +

1026 
	`diùSize
(
db
->
diù
è* (
robj
);

1027 
mh
->
db
[mh->
num_dbs
].
ov”h—d_ht_maš
 = 
mem
;

1028 
mem_tÙ®
+=
mem
;

1030 
mem
 = 
	`diùSize
(
db
->
expœes
è* (
diùEÁry
) +

1031 
	`diùSlÙs
(
db
->
expœes
è* (
diùEÁry
*);

1032 
mh
->
db
[mh->
num_dbs
].
ov”h—d_ht_expœes
 = 
mem
;

1033 
mem_tÙ®
+=
mem
;

1035 
mh
->
num_dbs
++;

1038 
mh
->
ov”h—d_tÙ®
 = 
mem_tÙ®
;

1039 
mh
->
d©a£t
 = 
zm®loc_u£d
 - 
mem_tÙ®
;

1040 
mh
->
³ak_³rc
 = ()
zm®loc_u£d
*100/mh->
³ak_®loÿ‹d
;

1044 
size_t
 
Ãt_u§ge
 = 1;

1045 ià(
zm®loc_u£d
 > 
mh
->
¡¬tup_®loÿ‹d
)

1046 
Ãt_u§ge
 = 
zm®loc_u£d
 - 
mh
->
¡¬tup_®loÿ‹d
;

1047 
mh
->
d©a£t_³rc
 = ()mh->
d©a£t
*100/
Ãt_u§ge
;

1048 
mh
->
by‹s_³r_key
 = mh->
tÙ®_keys
 ? (
Ãt_u§ge
 / mh->total_keys) : 0;

1050  
mh
;

1051 
	}
}

1055 
	$šputC©Sds
(*
»suÉ
, cÚ¡ *
¡r
) {

1057 
sds
 *
šfo
 = (sd *)
»suÉ
;

1058 *
šfo
 = 
	`sdsÿt
(*šfo, 
¡r
);

1059 
	}
}

1063 
sds
 
	$g‘MemÜyDoùÜR•Üt
() {

1064 
em±y
 = 0;

1065 
big_³ak
 = 0;

1066 
high_äag
 = 0;

1067 
high_®loc_äag
 = 0;

1068 
high_´oc_rss
 = 0;

1069 
high_®loc_rss
 = 0;

1070 
big_¦ave_buf
 = 0;

1071 
big_ş›Á_buf
 = 0;

1072 
mªy_süts
 = 0;

1073 
num_»pÜts
 = 0;

1074 
»disMemOv”h—d
 *
mh
 = 
	`g‘MemÜyOv”h—dD©a
();

1076 ià(
mh
->
tÙ®_®loÿ‹d
 < (1024*1024*5)) {

1077 
em±y
 = 1;

1078 
num_»pÜts
++;

1081 ià((()
mh
->
³ak_®loÿ‹d
 / mh->
tÙ®_®loÿ‹d
) > 1.5) {

1082 
big_³ak
 = 1;

1083 
num_»pÜts
++;

1087 ià(
mh
->
tÙ®_äag
 > 1.4 && mh->
tÙ®_äag_by‹s
 > 10<<20) {

1088 
high_äag
 = 1;

1089 
num_»pÜts
++;

1093 ià(
mh
->
®loÿtÜ_äag
 > 1.1 && mh->
®loÿtÜ_äag_by‹s
 > 10<<20) {

1094 
high_®loc_äag
 = 1;

1095 
num_»pÜts
++;

1099 ià(
mh
->
®loÿtÜ_rss
 > 1.1 && mh->
®loÿtÜ_rss_by‹s
 > 10<<20) {

1100 
high_®loc_rss
 = 1;

1101 
num_»pÜts
++;

1105 ià(
mh
->
rss_exŒa
 > 1.1 && mh->
rss_exŒa_by‹s
 > 10<<20) {

1106 
high_´oc_rss
 = 1;

1107 
num_»pÜts
++;

1111 
num¦aves
 = 
	`li¡L’gth
(
£rv”
.
¦aves
);

1112 
numş›Ás
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás
)-
num¦aves
;

1113 ià(
mh
->
ş›Ás_nÜm®
 / 
numş›Ás
 > (1024*200)) {

1114 
big_ş›Á_buf
 = 1;

1115 
num_»pÜts
++;

1119 ià(
num¦aves
 > 0 && 
mh
->
ş›Ás_¦aves
 /‚umslaves > (1024*1024*10)) {

1120 
big_¦ave_buf
 = 1;

1121 
num_»pÜts
++;

1125 ià(
	`diùSize
(
£rv”
.
lua_süts
) > 1000) {

1126 
mªy_süts
 = 1;

1127 
num_»pÜts
++;

1131 
sds
 
s
;

1132 ià(
num_»pÜts
 == 0) {

1133 
s
 = 
	`sd¢ew
(

1136 } ià(
em±y
 == 1) {

1137 
s
 = 
	`sd¢ew
(

1144 
s
 = 
	`sd¢ew
("Sam, I detected‡ few issues inhis Redis instance memory implants:\n\n");

1145 ià(
big_³ak
) {

1146 
s
 = 
	`sdsÿt
(s," * Peak memory: Inhe…asthis instance used morehan 150%he memoryhat is currently using. The‡llocator is‚ormally‚ot‡bleo„elease memory‡fter‡…eak, so you canƒxpecto see‡ big fragmentation„atio, howeverhis is‡ctually harmless‡nd is only dueohe memory…eak,‡nd ifhe Redis instance Resident Set Size (RSS) is currently biggerhanƒxpected,he memory will be used‡s soon‡s you fillhe Redis instance with more data. Ifhe memory…eak was only occasional‡nd you wantoryo„eclaim memory,…leaseryhe MEMORY PURGE command, otherwisehe only other option iso shutdown‡nd„estarthe instance.\n\n");

1148 ià(
high_äag
) {

1149 
s
 = 
	`sdsÿrštf
(s," * HighÙ® RSS: Thi š¡ªû ha ¨memÜy f¿gm’tiÚ‡nd RSS ov”h—d g»©”hª 1.4 (thi m—n th©hResid’ˆS‘ SizoàthRedi ´oûs i much†¬g”hªhsum oàthlogiÿÈ®loÿtiÚ Redi ³rfÜmed). Thi ´obËm i usu®ly due™h”Ø¨Ïrg³ak memÜy (check iàth”i ¨³ak memÜyƒÁry‡bovšh»pÜtèÜ may„esuÉ from‡ wÜklßdh© cau£ th®loÿtÜØäagm’ˆmemÜy‡†Ù. Iàth´obËm i ¨Ïrg³ak memÜy,h’h”i nØissue. Oth”wi£, maksu» you‡» usšghJem®loø®loÿtÜ‡nd‚ÙhdeçuÉ†ibøm®loc. NÙe: Thcu¼’y u£d‡ÎoÿtÜ i \"%s\".\n\n", 
ZMALLOC_LIB
);

1151 ià(
high_®loc_äag
) {

1152 
s
 = 
	`sdsÿrštf
(s," * High‡llocator fragmentation: This instance has‡n‡llocatorƒxternal fragmentation greaterhan 1.1. This…roblem is usually dueƒithero‡†arge…eak memory (check ifhere is‡…eak memoryƒntry‡bove inhe„eport) or may„esult from‡ workloadhat causeshe‡llocatoro fragment memory‡†ot. You canryƒnabling 'activedefrag' config option.\n\n");

1154 ià(
high_®loc_rss
) {

1155 
s
 = 
	`sdsÿrštf
(s," * High‡llocator RSS overhead: This instance has‡n RSS memory overhead is greaterhan 1.1 (this meanshathe Resident Set Size ofhe‡llocator is much†argerhanhe sum whathe‡llocator‡ctually holds). This…roblem is usually dueo‡†arge…eak memory (check ifhere is‡…eak memoryƒntry‡bove inhe„eport), you canryhe MEMORY PURGE commando„eclaim it.\n\n");

1157 ià(
high_´oc_rss
) {

1158 
s
 = 
	`sdsÿrštf
(s," * High…rocess RSS overhead: This instance has‚on-allocator RSS memory overhead is greaterhan 1.1 (this meanshathe Resident Set Size ofhe Redis…rocess is much†argerhanhe RSShe‡llocator holds). This…roblem may be dueo Lua scripts or Modules.\n\n");

1160 ià(
big_¦ave_buf
) {

1161 
s
 = 
	`sdsÿt
(s," * Big„eplica buffers: The„eplica output buffers inhis instance‡re greaterhan 10MB forƒach„eplica (on‡verage). This†ikely meanshathere is some„eplica instancehat is struggling„eceiving data,ƒither because it isoo slow or because of‚etworking issues. As‡„esult, data…iles onhe master output buffers. Pleaseryo identify what„eplica is‚ot„eceiving data correctly‡nd why. You can usehe INFO output in ordero checkhe„eplicas delays‡ndhe CLIENT LIST commando checkhe output buffers ofƒach„eplica.\n\n");

1163 ià(
big_ş›Á_buf
) {

1164 
s
 = 
	`sdsÿt
(s," * Big client buffers: The clients output buffers inhis instance‡re greaterhan 200K…er client (on‡verage). This may„esult from different causes,†ike Pub/Sub clients subscribedo channels bot‚ot„eceiving data fastƒnough, sohat data…iles onhe Redis instance output buffer, or clients sending commands with†arge„eplies or very†arge sequences of commands inhe same…ipeline. Please usehe CLIENT LIST command in ordero investigatehe issue if it causes…roblems in your instance, oro understand better why certain clients‡re using‡ big‡mount of memory.\n\n");

1166 ià(
mªy_süts
) {

1167 
s
 = 
	`sdsÿt
(s," * Many scripts: There seemo be many cached scripts inhis instance (morehan 1000). This may be because scripts‡re generated‡nd `EVAL`ed, instead of being…arameterized (with KEYS‡nd ARGV), `SCRIPT LOAD`ed‡nd `EVALSHA`ed. Unless `SCRIPT FLUSH` is called…eriodically,he scripts' caches mayƒnd up consuming most of your memory.\n\n");

1169 
s
 = 
	`sdsÿt
(s,"I'm hereo keep you safe, Sam. I wanto help you.\n");

1171 
	`ä“MemÜyOv”h—dD©a
(
mh
);

1172  
s
;

1173 
	}
}

1180 
	$objeùS‘LRUOrLFU
(
robj
 *
v®
, 
lfu_äeq
, 
Ìu_idË
,

1181 
Ìu_şock
, 
Ìu_muÉl›r
) {

1182 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

1183 ià(
lfu_äeq
 >= 0) {

1184 
	`£rv”As£¹
(
lfu_äeq
 <= 255);

1185 
v®
->
Ìu
 = (
	`LFUG‘TimeInMšu‹s
()<<8è| 
lfu_äeq
;

1188 } ià(
Ìu_idË
 >= 0) {

1193 
Ìu_idË
 =†ru_idË*
Ìu_muÉl›r
/
LRU_CLOCK_RESOLUTION
;

1194 
Ìu_abs
 = 
Ìu_şock
 - 
Ìu_idË
;

1200 ià(
Ìu_abs
 < 0)

1201 
Ìu_abs
 = (
Ìu_şock
+(
LRU_CLOCK_MAX
/2)) % LRU_CLOCK_MAX;

1202 
v®
->
Ìu
 = 
Ìu_abs
;

1206 
	}
}

1212 
robj
 *
	$objeùCommªdLookup
(
ş›Á
 *
c
, 
robj
 *
key
) {

1213 
diùEÁry
 *
de
;

1215 ià((
de
 = 
	`diùFšd
(
c
->
db
->
diù
,
key
->
±r
)è=ğ
NULL
)  NULL;

1216  (
robj
*è
	`diùG‘V®
(
de
);

1217 
	}
}

1219 
robj
 *
	$objeùCommªdLookupOrR•ly
(
ş›Á
 *
c
, 
robj
 *
key
,„obj *
»¶y
) {

1220 
robj
 *
o
 = 
	`objeùCommªdLookup
(
c
,
key
);

1222 ià(!
o
è
	`addR•ly
(
c
, 
»¶y
);

1223  
o
;

1224 
	}
}

1228 
	$objeùCommªd
(
ş›Á
 *
c
) {

1229 
robj
 *
o
;

1231 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

1232 cÚ¡ *
h–p
[] = {

1237 
NULL


1239 
	`addR•lyH–p
(
c
, 
h–p
);

1240 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"»fcouÁ"è&& c->
¬gc
 == 3) {

1241 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nuÎ
[c->
»¥
]))

1242 =ğ
NULL
) ;

1243 
	`addR•lyLÚgLÚg
(
c
,
o
->
»fcouÁ
);

1244 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"’codšg"è&& c->
¬gc
 == 3) {

1245 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nuÎ
[c->
»¥
]))

1246 =ğ
NULL
) ;

1247 
	`addR•lyBulkCSŒšg
(
c
,
	`¡rEncodšg
(
o
->
’codšg
));

1248 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"idËtime"è&& c->
¬gc
 == 3) {

1249 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nuÎ
[c->
»¥
]))

1250 =ğ
NULL
) ;

1251 ià(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
) {

1252 
	`addR•lyE¼Ü
(
c
,"An LFU maxmemory…olicy is selected, idleime‚otracked. Please‚otehat when switching between…olicies‡t„untime LRU‡nd LFU data willake someimeo‡djust.");

1255 
	`addR•lyLÚgLÚg
(
c
,
	`e¡im©eObjeùIdËTime
(
o
)/1000);

1256 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"äeq"è&& c->
¬gc
 == 3) {

1257 ià((
o
 = 
	`objeùCommªdLookupOrR•ly
(
c
,c->
¬gv
[2],
sh¬ed
.
nuÎ
[c->
»¥
]))

1258 =ğ
NULL
) ;

1259 ià(!(
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
)) {

1260 
	`addR•lyE¼Ü
(
c
,"An LFU maxmemory…olicy is‚ot selected,‡ccess frequency‚otracked. Please‚otehat when switching between…olicies‡t„untime LRU‡nd LFU data willake someimeo‡djust.");

1267 
	`addR•lyLÚgLÚg
(
c
,
	`LFUDeüAndR‘uº
(
o
));

1269 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

1271 
	}
}

1277 
	$memÜyCommªd
(
ş›Á
 *
c
) {

1278 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"h–p"è&& c->
¬gc
 == 2) {

1279 cÚ¡ *
h–p
[] = {

1285 
NULL


1287 
	`addR•lyH–p
(
c
, 
h–p
);

1288 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"u§ge"è&& c->
¬gc
 >= 3) {

1289 
diùEÁry
 *
de
;

1290 
§m¶es
 = 
OBJ_COMPUTE_SIZE_DEF_SAMPLES
;

1291 
j
 = 3; j < 
c
->
¬gc
; j++) {

1292 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"samples") &&

1293 
j
+1 < 
c
->
¬gc
)

1295 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],&
§m¶es
,
NULL
)

1296 =ğ
C_ERR
) ;

1297 ià(
§m¶es
 < 0) {

1298 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1301 ià(
§m¶es
 =ğ0è§m¶e ğ
LLONG_MAX
;;

1302 
j
++;

1304 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1308 ià((
de
 = 
	`diùFšd
(
c
->
db
->
diù
,c->
¬gv
[2]->
±r
)è=ğ
NULL
) {

1309 
	`addR•lyNuÎ
(
c
);

1312 
size_t
 
u§ge
 = 
	`objeùCompu‹Size
(
	`diùG‘V®
(
de
),
§m¶es
);

1313 
u§ge
 +ğ
	`sdsAÎocSize
(
	`diùG‘Key
(
de
));

1314 
u§ge
 +ğ(
diùEÁry
);

1315 
	`addR•lyLÚgLÚg
(
c
,
u§ge
);

1316 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"¡©s"è&& c->
¬gc
 == 2) {

1317 
»disMemOv”h—d
 *
mh
 = 
	`g‘MemÜyOv”h—dD©a
();

1319 
	`addR•lyM­L’
(
c
,25+
mh
->
num_dbs
);

1321 
	`addR•lyBulkCSŒšg
(
c
,"peak.allocated");

1322 
	`addR•lyLÚgLÚg
(
c
,
mh
->
³ak_®loÿ‹d
);

1324 
	`addR•lyBulkCSŒšg
(
c
,"total.allocated");

1325 
	`addR•lyLÚgLÚg
(
c
,
mh
->
tÙ®_®loÿ‹d
);

1327 
	`addR•lyBulkCSŒšg
(
c
,"startup.allocated");

1328 
	`addR•lyLÚgLÚg
(
c
,
mh
->
¡¬tup_®loÿ‹d
);

1330 
	`addR•lyBulkCSŒšg
(
c
,"replication.backlog");

1331 
	`addR•lyLÚgLÚg
(
c
,
mh
->
»¶_backlog
);

1333 
	`addR•lyBulkCSŒšg
(
c
,"clients.slaves");

1334 
	`addR•lyLÚgLÚg
(
c
,
mh
->
ş›Ás_¦aves
);

1336 
	`addR•lyBulkCSŒšg
(
c
,"clients.normal");

1337 
	`addR•lyLÚgLÚg
(
c
,
mh
->
ş›Ás_nÜm®
);

1339 
	`addR•lyBulkCSŒšg
(
c
,"aof.buffer");

1340 
	`addR•lyLÚgLÚg
(
c
,
mh
->
aof_bufãr
);

1342 
	`addR•lyBulkCSŒšg
(
c
,"lua.caches");

1343 
	`addR•lyLÚgLÚg
(
c
,
mh
->
lua_ÿches
);

1345 
size_t
 
j
 = 0; j < 
mh
->
num_dbs
; j++) {

1346 
dbÇme
[32];

1347 
	`¢´štf
(
dbÇme
,(dbÇme),"db.%zd",
mh
->
db
[
j
].
dbid
);

1348 
	`addR•lyBulkCSŒšg
(
c
,
dbÇme
);

1349 
	`addR•lyM­L’
(
c
,2);

1351 
	`addR•lyBulkCSŒšg
(
c
,"overhead.hashtable.main");

1352 
	`addR•lyLÚgLÚg
(
c
,
mh
->
db
[
j
].
ov”h—d_ht_maš
);

1354 
	`addR•lyBulkCSŒšg
(
c
,"overhead.hashtable.expires");

1355 
	`addR•lyLÚgLÚg
(
c
,
mh
->
db
[
j
].
ov”h—d_ht_expœes
);

1358 
	`addR•lyBulkCSŒšg
(
c
,"overhead.total");

1359 
	`addR•lyLÚgLÚg
(
c
,
mh
->
ov”h—d_tÙ®
);

1361 
	`addR•lyBulkCSŒšg
(
c
,"keys.count");

1362 
	`addR•lyLÚgLÚg
(
c
,
mh
->
tÙ®_keys
);

1364 
	`addR•lyBulkCSŒšg
(
c
,"keys.bytes-per-key");

1365 
	`addR•lyLÚgLÚg
(
c
,
mh
->
by‹s_³r_key
);

1367 
	`addR•lyBulkCSŒšg
(
c
,"dataset.bytes");

1368 
	`addR•lyLÚgLÚg
(
c
,
mh
->
d©a£t
);

1370 
	`addR•lyBulkCSŒšg
(
c
,"dataset.percentage");

1371 
	`addR•lyDoubË
(
c
,
mh
->
d©a£t_³rc
);

1373 
	`addR•lyBulkCSŒšg
(
c
,"peak.percentage");

1374 
	`addR•lyDoubË
(
c
,
mh
->
³ak_³rc
);

1376 
	`addR•lyBulkCSŒšg
(
c
,"allocator.allocated");

1377 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
);

1379 
	`addR•lyBulkCSŒšg
(
c
,"allocator.active");

1380 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
);

1382 
	`addR•lyBulkCSŒšg
(
c
,"allocator.resident");

1383 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
);

1385 
	`addR•lyBulkCSŒšg
(
c
,"allocator-fragmentation.ratio");

1386 
	`addR•lyDoubË
(
c
,
mh
->
®loÿtÜ_äag
);

1388 
	`addR•lyBulkCSŒšg
(
c
,"allocator-fragmentation.bytes");

1389 
	`addR•lyLÚgLÚg
(
c
,
mh
->
®loÿtÜ_äag_by‹s
);

1391 
	`addR•lyBulkCSŒšg
(
c
,"allocator-rss.ratio");

1392 
	`addR•lyDoubË
(
c
,
mh
->
®loÿtÜ_rss
);

1394 
	`addR•lyBulkCSŒšg
(
c
,"allocator-rss.bytes");

1395 
	`addR•lyLÚgLÚg
(
c
,
mh
->
®loÿtÜ_rss_by‹s
);

1397 
	`addR•lyBulkCSŒšg
(
c
,"rss-overhead.ratio");

1398 
	`addR•lyDoubË
(
c
,
mh
->
rss_exŒa
);

1400 
	`addR•lyBulkCSŒšg
(
c
,"rss-overhead.bytes");

1401 
	`addR•lyLÚgLÚg
(
c
,
mh
->
rss_exŒa_by‹s
);

1403 
	`addR•lyBulkCSŒšg
(
c
,"fragmentation");

1404 
	`addR•lyDoubË
(
c
,
mh
->
tÙ®_äag
);

1406 
	`addR•lyBulkCSŒšg
(
c
,"fragmentation.bytes");

1407 
	`addR•lyLÚgLÚg
(
c
,
mh
->
tÙ®_äag_by‹s
);

1409 
	`ä“MemÜyOv”h—dD©a
(
mh
);

1410 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"m®loc-¡©s"è&& c->
¬gc
 == 2) {

1411 #ià
	`defšed
(
USE_JEMALLOC
)

1412 
sds
 
šfo
 = 
	`sd£m±y
();

1413 
	`je_m®loc_¡©s_´št
(
šputC©Sds
, &
šfo
, 
NULL
);

1414 
	`addR•lyV”b©im
(
c
,
šfo
,
	`sd¦’
(info),"txt");

1415 
	`sdsä“
(
šfo
);

1417 
	`addR•lyBulkCSŒšg
(
c
,"Stats‚ot supported forhe current‡llocator");

1419 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"doùÜ"è&& c->
¬gc
 == 2) {

1420 
sds
 
»pÜt
 = 
	`g‘MemÜyDoùÜR•Üt
();

1421 
	`addR•lyV”b©im
(
c
,
»pÜt
,
	`sd¦’
(report),"txt");

1422 
	`sdsä“
(
»pÜt
);

1423 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"purge"è&& c->
¬gc
 == 2) {

1424 ià(
	`jem®loc_purge
() == 0)

1425 
	`addR•ly
(
c
, 
sh¬ed
.
ok
);

1427 
	`addR•lyE¼Ü
(
c
, "Error…urging dirty…ages");

1429 
	`addR•lyE¼ÜFÜm©
(
c
, "UnknowÀsubcommªd o¸wrÚg‚umb” oà¬gum’t fÜ '%s'. Try MEMORY HELP", (*)c->
¬gv
[1]->
±r
);

1431 
	}
}

	@pqsort.c

40 
	~<sys/ty³s.h
>

42 
	~<”ºo.h
>

43 
	~<¡dlib.h
>

45 
šlše
 *
med3
 (*, *, *,

47 
šlše
 
	`sw­func
 (*, *, 
size_t
, );

49 
	#mš
(
a
, 
b
è×è< (bè?‡ : 
	)
b

54 
	#sw­code
(
TYPE
, 
·rmi
, 
·rmj
, 
n
) { \

55 
size_t
 
i
 = (
n
è/  (
TYPE
); \

56 
TYPE
 *
pi
 = (TYPE *)(*)(
·rmi
); \

57 
TYPE
 *
pj
 = (TYPE *)(*)(
·rmj
); \

59 
TYPE
 
t
 = *
pi
; \

60 *
pi
++ = *
pj
; \

61 *
pj
++ = 
t
; \

62 } --
i
 > 0); \

63 
	}

	)
}

65 
	#SWAPINIT
(
a
, 
es
è
sw­ty³
 = ((*)a - (*)0) % () || \

66 
es
 % (è? 2 :ƒ =ğ()? 0 : 1;

	)

68 
šlše
 

69 
	$sw­func
(*
a
, *
b
, 
size_t
 
n
, 
sw­ty³
)

72 ià(
sw­ty³
 <= 1)

73 
	`sw­code
(, 
a
, 
b
, 
n
)

75 
	`sw­code
(, 
a
, 
b
, 
n
)

76 
	}
}

78 
	#sw­
(
a
, 
b
) \

79 ià(
sw­ty³
 == 0) { \

80 
t
 = *(*)(*)(
a
); \

81 *(*)(*)(
a
èğ*(*)(*)(
b
); \

82 *(*)(*)(
b
èğ
t
; \

84 
	`sw­func
(
a
, 
b
, 
es
, 
sw­ty³
)

	)

86 
	#vecsw­
(
a
, 
b
, 
n
èià(Òè> 0è
	`sw­func
(×), (b), (
size_t
)Ò), 
sw­ty³
)

	)

88 
šlše
 *

89 
	$med3
(*
a
, *
b
, *
c
,

90 (*
cmp
) (const *, const *))

93  
	`cmp
(
a
, 
b
) < 0 ?

94 (
	`cmp
(
b
, 
c
è< 0 ? b : (cmp(
a
, c) < 0 ? c :‡ ))

95 :(
	`cmp
(
b
, 
c
è> 0 ? b : (cmp(
a
, c) < 0 ?‡ : c ));

96 
	}
}

99 
	$_pqsÜt
(*
a
, 
size_t
 
n
, size_ˆ
es
,

100 (*
cmp
è(cÚ¡ *, cÚ¡ *), *
Ìªge
, *
¼ªge
)

102 *
·
, *
pb
, *
pc
, *
pd
, *
¶
, *
pm
, *
²
;

103 
size_t
 
d
, 
r
;

104 
sw­ty³
, 
cmp_»suÉ
;

106 
loİ
: 
	`SWAPINIT
(
a
, 
es
);

107 ià(
n
 < 7) {

108 
pm
 = (*è
a
 + 
es
;…m < (*è¨+ 
n
 *ƒs;…m +=ƒs)

109 
¶
 = 
pm
;…È> (*è
a
 && 
	`cmp
ÕÈ- 
es
,…l) > 0;

110 
¶
 -ğ
es
)

111 
	`sw­
(
¶
,…È- 
es
);

114 
pm
 = (*è
a
 + (
n
 / 2è* 
es
;

115 ià(
n
 > 7) {

116 
¶
 = (*è
a
;

117 
²
 = (*è
a
 + (
n
 - 1è* 
es
;

118 ià(
n
 > 40) {

119 
d
 = (
n
 / 8è* 
es
;

120 
¶
 = 
	`med3
Õl,…È+ 
d
,…È+ 2 * d, 
cmp
);

121 
pm
 = 
	`med3
Õm - 
d
,…m,…m + d, 
cmp
);

122 
²
 = 
	`med3
ÕÀ- 2 * 
d
,…À- d,…n, 
cmp
);

124 
pm
 = 
	`med3
(
¶
,…m, 
²
, 
cmp
);

126 
	`sw­
(
a
, 
pm
);

127 
·
 = 
pb
 = (*è
a
 + 
es
;

129 
pc
 = 
pd
 = (*è
a
 + (
n
 - 1è* 
es
;

131 
pb
 <ğ
pc
 && (
cmp_»suÉ
 = 
	`cmp
Õb, 
a
)) <= 0) {

132 ià(
cmp_»suÉ
 == 0) {

133 
	`sw­
(
·
, 
pb
);

134 
·
 +ğ
es
;

136 
pb
 +ğ
es
;

138 
pb
 <ğ
pc
 && (
cmp_»suÉ
 = 
	`cmp
Õc, 
a
)) >= 0) {

139 ià(
cmp_»suÉ
 == 0) {

140 
	`sw­
(
pc
, 
pd
);

141 
pd
 -ğ
es
;

143 
pc
 -ğ
es
;

145 ià(
pb
 > 
pc
)

147 
	`sw­
(
pb
, 
pc
);

148 
pb
 +ğ
es
;

149 
pc
 -ğ
es
;

152 
²
 = (*è
a
 + 
n
 * 
es
;

153 
r
 = 
	`mš
(
·
 - (*è
a
, 
pb
 -…a);

154 
	`vecsw­
(
a
, 
pb
 - 
r
,„);

155 
r
 = 
	`mš
((
size_t
)(
pd
 - 
pc
), 
²
 -…d - 
es
);

156 
	`vecsw­
(
pb
, 
²
 - 
r
,„);

157 ià((
r
 = 
pb
 - 
·
è> 
es
) {

158 *
_l
 = 
a
, *
_r
 = ((*ï)+
r
-1;

159 ià(!((
Ìªge
 < 
_l
 && 
¼ªge
 < _l) ||

160 (
Ìªge
 > 
_r
 && 
¼ªge
 > _r)))

161 
	`_pqsÜt
(
a
, 
r
 / 
es
,ƒs, 
cmp
, 
Ìªge
, 
¼ªge
);

163 ià((
r
 = 
pd
 - 
pc
è> 
es
) {

164 *
_l
, *
_r
;

167 
a
 = 
²
 - 
r
;

168 
n
 = 
r
 / 
es
;

170 
_l
 = 
a
;

171 
_r
 = ((*)
a
)+
r
-1;

172 ià(!((
Ìªge
 < 
_l
 && 
¼ªge
 < _l) ||

173 (
Ìªge
 > 
_r
 && 
¼ªge
 > _r)))

174 
loİ
;

177 
	}
}

180 
	$pqsÜt
(*
a
, 
size_t
 
n
, size_ˆ
es
,

181 (*
cmp
è(cÚ¡ *, cÚ¡ *), 
size_t
 
Ìªge
, size_ˆ
¼ªge
)

183 
	`_pqsÜt
(
a
,
n
,
es
,
cmp
,((*ï)+(
Ìªge
*es),

184 ((*)
a
)+((
¼ªge
+1)*
es
)-1);

185 
	}
}

	@pqsort.h

33 #iâdeà
__PQSORT_H


34 
	#__PQSORT_H


	)

37 
pqsÜt
(*
a
, 
size_t
 
n
, size_ˆ
es
,

38 (*
cmp
è(cÚ¡ *, cÚ¡ *), 
size_t
 
Ìªge
, size_ˆ
¼ªge
);

	@pubsub.c

30 
	~"£rv”.h
"

32 
ş›ÁSubsütiÚsCouÁ
(
ş›Á
 *
c
);

43 
	$addR•lyPubsubMes§ge
(
ş›Á
 *
c
, 
robj
 *
chªÃl
,„obj *
msg
) {

44 ià(
c
->
»¥
 == 2)

45 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[3]);

47 
	`addR•lyPushL’
(
c
,3);

48 
	`addR•ly
(
c
,
sh¬ed
.
mes§gebulk
);

49 
	`addR•lyBulk
(
c
,
chªÃl
);

50 ià(
msg
è
	`addR•lyBulk
(
c
,msg);

51 
	}
}

56 
	$addR•lyPubsubP©Mes§ge
(
ş›Á
 *
c
, 
robj
 *
·t
,„obj *
chªÃl
,„obj *
msg
) {

57 ià(
c
->
»¥
 == 2)

58 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[4]);

60 
	`addR•lyPushL’
(
c
,4);

61 
	`addR•ly
(
c
,
sh¬ed
.
pmes§gebulk
);

62 
	`addR•lyBulk
(
c
,
·t
);

63 
	`addR•lyBulk
(
c
,
chªÃl
);

64 
	`addR•lyBulk
(
c
,
msg
);

65 
	}
}

68 
	$addR•lyPubsubSubsüibed
(
ş›Á
 *
c
, 
robj
 *
chªÃl
) {

69 ià(
c
->
»¥
 == 2)

70 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[3]);

72 
	`addR•lyPushL’
(
c
,3);

73 
	`addR•ly
(
c
,
sh¬ed
.
subsüibebulk
);

74 
	`addR•lyBulk
(
c
,
chªÃl
);

75 
	`addR•lyLÚgLÚg
(
c
,
	`ş›ÁSubsütiÚsCouÁ
(c));

76 
	}
}

82 
	$addR•lyPubsubUnsubsüibed
(
ş›Á
 *
c
, 
robj
 *
chªÃl
) {

83 ià(
c
->
»¥
 == 2)

84 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[3]);

86 
	`addR•lyPushL’
(
c
,3);

87 
	`addR•ly
(
c
,
sh¬ed
.
unsubsüibebulk
);

88 ià(
chªÃl
)

89 
	`addR•lyBulk
(
c
,
chªÃl
);

91 
	`addR•lyNuÎ
(
c
);

92 
	`addR•lyLÚgLÚg
(
c
,
	`ş›ÁSubsütiÚsCouÁ
(c));

93 
	}
}

96 
	$addR•lyPubsubP©Subsüibed
(
ş›Á
 *
c
, 
robj
 *
·‰”n
) {

97 ià(
c
->
»¥
 == 2)

98 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[3]);

100 
	`addR•lyPushL’
(
c
,3);

101 
	`addR•ly
(
c
,
sh¬ed
.
psubsüibebulk
);

102 
	`addR•lyBulk
(
c
,
·‰”n
);

103 
	`addR•lyLÚgLÚg
(
c
,
	`ş›ÁSubsütiÚsCouÁ
(c));

104 
	}
}

110 
	$addR•lyPubsubP©Unsubsüibed
(
ş›Á
 *
c
, 
robj
 *
·‰”n
) {

111 ià(
c
->
»¥
 == 2)

112 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[3]);

114 
	`addR•lyPushL’
(
c
,3);

115 
	`addR•ly
(
c
,
sh¬ed
.
punsubsüibebulk
);

116 ià(
·‰”n
)

117 
	`addR•lyBulk
(
c
,
·‰”n
);

119 
	`addR•lyNuÎ
(
c
);

120 
	`addR•lyLÚgLÚg
(
c
,
	`ş›ÁSubsütiÚsCouÁ
(c));

121 
	}
}

127 
	$ä“PubsubP©‹º
(*
p
) {

128 
pubsubP©‹º
 *
·t
 = 
p
;

130 
	`deüRefCouÁ
(
·t
->
·‰”n
);

131 
	`zä“
(
·t
);

132 
	}
}

134 
	$li¡M©chPubsubP©‹º
(*
a
, *
b
) {

135 
pubsubP©‹º
 *
·
 = 
a
, *
pb
 = 
b
;

137  (
·
->
ş›Á
 =ğ
pb
->client) &&

138 (
	`equ®SŒšgObjeùs
(
·
->
·‰”n
,
pb
->pattern));

139 
	}
}

142 
	$ş›ÁSubsütiÚsCouÁ
(
ş›Á
 *
c
) {

143  
	`diùSize
(
c
->
pubsub_chªÃls
)+

144 
	`li¡L’gth
(
c
->
pubsub_·‰”ns
);

145 
	}
}

149 
	$pubsubSubsüibeChªÃl
(
ş›Á
 *
c
, 
robj
 *
chªÃl
) {

150 
diùEÁry
 *
de
;

151 
li¡
 *
ş›Ás
 = 
NULL
;

152 
»tv®
 = 0;

155 ià(
	`diùAdd
(
c
->
pubsub_chªÃls
,
chªÃl
,
NULL
è=ğ
DICT_OK
) {

156 
»tv®
 = 1;

157 
	`šüRefCouÁ
(
chªÃl
);

159 
de
 = 
	`diùFšd
(
£rv”
.
pubsub_chªÃls
,
chªÃl
);

160 ià(
de
 =ğ
NULL
) {

161 
ş›Ás
 = 
	`li¡C»©e
();

162 
	`diùAdd
(
£rv”
.
pubsub_chªÃls
,
chªÃl
,
ş›Ás
);

163 
	`šüRefCouÁ
(
chªÃl
);

165 
ş›Ás
 = 
	`diùG‘V®
(
de
);

167 
	`li¡AddNodeTa
(
ş›Ás
,
c
);

170 
	`addR•lyPubsubSubsüibed
(
c
,
chªÃl
);

171  
»tv®
;

172 
	}
}

176 
	$pubsubUnsubsüibeChªÃl
(
ş›Á
 *
c
, 
robj
 *
chªÃl
, 
nÙify
) {

177 
diùEÁry
 *
de
;

178 
li¡
 *
ş›Ás
;

179 
li¡Node
 *
Ê
;

180 
»tv®
 = 0;

183 
	`šüRefCouÁ
(
chªÃl
);

185 ià(
	`diùD–‘e
(
c
->
pubsub_chªÃls
,
chªÃl
è=ğ
DICT_OK
) {

186 
»tv®
 = 1;

188 
de
 = 
	`diùFšd
(
£rv”
.
pubsub_chªÃls
,
chªÃl
);

189 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
de
 != NULL);

190 
ş›Ás
 = 
	`diùG‘V®
(
de
);

191 
Ê
 = 
	`li¡S—rchKey
(
ş›Ás
,
c
);

192 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
Ê
 != NULL);

193 
	`li¡D–Node
(
ş›Ás
,
Ê
);

194 ià(
	`li¡L’gth
(
ş›Ás
) == 0) {

198 
	`diùD–‘e
(
£rv”
.
pubsub_chªÃls
,
chªÃl
);

202 ià(
nÙify
è
	`addR•lyPubsubUnsubsüibed
(
c
,
chªÃl
);

203 
	`deüRefCouÁ
(
chªÃl
);

204  
»tv®
;

205 
	}
}

208 
	$pubsubSubsüibeP©‹º
(
ş›Á
 *
c
, 
robj
 *
·‰”n
) {

209 
diùEÁry
 *
de
;

210 
li¡
 *
ş›Ás
;

211 
»tv®
 = 0;

213 ià(
	`li¡S—rchKey
(
c
->
pubsub_·‰”ns
,
·‰”n
è=ğ
NULL
) {

214 
»tv®
 = 1;

215 
pubsubP©‹º
 *
·t
;

216 
	`li¡AddNodeTa
(
c
->
pubsub_·‰”ns
,
·‰”n
);

217 
	`šüRefCouÁ
(
·‰”n
);

218 
·t
 = 
	`zm®loc
((*pat));

219 
·t
->
·‰”n
 = 
	`g‘DecodedObjeù
(pattern);

220 
·t
->
ş›Á
 = 
c
;

221 
	`li¡AddNodeTa
(
£rv”
.
pubsub_·‰”ns
,
·t
);

223 
de
 = 
	`diùFšd
(
£rv”
.
pubsub_·‰”ns_diù
,
·‰”n
);

224 ià(
de
 =ğ
NULL
) {

225 
ş›Ás
 = 
	`li¡C»©e
();

226 
	`diùAdd
(
£rv”
.
pubsub_·‰”ns_diù
,
·‰”n
,
ş›Ás
);

227 
	`šüRefCouÁ
(
·‰”n
);

229 
ş›Ás
 = 
	`diùG‘V®
(
de
);

231 
	`li¡AddNodeTa
(
ş›Ás
,
c
);

234 
	`addR•lyPubsubP©Subsüibed
(
c
,
·‰”n
);

235  
»tv®
;

236 
	}
}

240 
	$pubsubUnsubsüibeP©‹º
(
ş›Á
 *
c
, 
robj
 *
·‰”n
, 
nÙify
) {

241 
diùEÁry
 *
de
;

242 
li¡
 *
ş›Ás
;

243 
li¡Node
 *
Ê
;

244 
pubsubP©‹º
 
·t
;

245 
»tv®
 = 0;

247 
	`šüRefCouÁ
(
·‰”n
);

248 ià((
Ê
 = 
	`li¡S—rchKey
(
c
->
pubsub_·‰”ns
,
·‰”n
)è!ğ
NULL
) {

249 
»tv®
 = 1;

250 
	`li¡D–Node
(
c
->
pubsub_·‰”ns
,
Ê
);

251 
·t
.
ş›Á
 = 
c
;

252 
·t
.
·‰”n
 =…attern;

253 
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
pubsub_·‰”ns
,&
·t
);

254 
	`li¡D–Node
(
£rv”
.
pubsub_·‰”ns
,
Ê
);

256 
de
 = 
	`diùFšd
(
£rv”
.
pubsub_·‰”ns_diù
,
·‰”n
);

257 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
de
 != NULL);

258 
ş›Ás
 = 
	`diùG‘V®
(
de
);

259 
Ê
 = 
	`li¡S—rchKey
(
ş›Ás
,
c
);

260 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
Ê
 != NULL);

261 
	`li¡D–Node
(
ş›Ás
,
Ê
);

262 ià(
	`li¡L’gth
(
ş›Ás
) == 0) {

265 
	`diùD–‘e
(
£rv”
.
pubsub_·‰”ns_diù
,
·‰”n
);

269 ià(
nÙify
è
	`addR•lyPubsubP©Unsubsüibed
(
c
,
·‰”n
);

270 
	`deüRefCouÁ
(
·‰”n
);

271  
»tv®
;

272 
	}
}

276 
	$pubsubUnsubsüibeAÎChªÃls
(
ş›Á
 *
c
, 
nÙify
) {

277 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘SaãI‹¿tÜ
(
c
->
pubsub_chªÃls
);

278 
diùEÁry
 *
de
;

279 
couÁ
 = 0;

281 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

282 
robj
 *
chªÃl
 = 
	`diùG‘Key
(
de
);

284 
couÁ
 +ğ
	`pubsubUnsubsüibeChªÃl
(
c
,
chªÃl
,
nÙify
);

287 ià(
nÙify
 && 
couÁ
 =ğ0è
	`addR•lyPubsubUnsubsüibed
(
c
,
NULL
);

288 
	`diùR–—£I‹¿tÜ
(
di
);

289  
couÁ
;

290 
	}
}

294 
	$pubsubUnsubsüibeAÎP©‹ºs
(
ş›Á
 *
c
, 
nÙify
) {

295 
li¡Node
 *
Ê
;

296 
li¡I‹r
 
li
;

297 
couÁ
 = 0;

299 
	`li¡Rewšd
(
c
->
pubsub_·‰”ns
,&
li
);

300 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

301 
robj
 *
·‰”n
 = 
Ê
->
v®ue
;

303 
couÁ
 +ğ
	`pubsubUnsubsüibeP©‹º
(
c
,
·‰”n
,
nÙify
);

305 ià(
nÙify
 && 
couÁ
 =ğ0è
	`addR•lyPubsubP©Unsubsüibed
(
c
,
NULL
);

306  
couÁ
;

307 
	}
}

310 
	$pubsubPublishMes§ge
(
robj
 *
chªÃl
,„obj *
mes§ge
) {

311 
»ûiv”s
 = 0;

312 
diùEÁry
 *
de
;

313 
diùI‹¿tÜ
 *
di
;

314 
li¡Node
 *
Ê
;

315 
li¡I‹r
 
li
;

318 
de
 = 
	`diùFšd
(
£rv”
.
pubsub_chªÃls
,
chªÃl
);

319 ià(
de
) {

320 
li¡
 *li¡ = 
	`diùG‘V®
(
de
);

321 
li¡Node
 *
Ê
;

322 
li¡I‹r
 
li
;

324 
	`li¡Rewšd
(
li¡
,&
li
);

325 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

326 
ş›Á
 *
c
 = 
Ê
->
v®ue
;

327 
	`addR•lyPubsubMes§ge
(
c
,
chªÃl
,
mes§ge
);

328 
»ûiv”s
++;

332 
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
pubsub_·‰”ns_diù
);

333 ià(
di
) {

334 
chªÃl
 = 
	`g‘DecodedObjeù
(channel);

335 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

336 
robj
 *
·‰”n
 = 
	`diùG‘Key
(
de
);

337 
li¡
 *
ş›Ás
 = 
	`diùG‘V®
(
de
);

338 ià(!
	`¡ršgm©chËn
((*)
·‰”n
->
±r
,

339 
	`sd¦’
(
·‰”n
->
±r
),

340 (*)
chªÃl
->
±r
,

341 
	`sd¦’
(
chªÃl
->
±r
),0)) ;

343 
	`li¡Rewšd
(
ş›Ás
,&
li
);

344 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

345 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

346 
	`addR•lyPubsubP©Mes§ge
(
c
,
·‰”n
,
chªÃl
,
mes§ge
);

347 
»ûiv”s
++;

350 
	`deüRefCouÁ
(
chªÃl
);

351 
	`diùR–—£I‹¿tÜ
(
di
);

353  
»ûiv”s
;

354 
	}
}

360 
	$subsüibeCommªd
(
ş›Á
 *
c
) {

361 
j
;

363 
j
 = 1; j < 
c
->
¬gc
; j++)

364 
	`pubsubSubsüibeChªÃl
(
c
,c->
¬gv
[
j
]);

365 
c
->
æags
 |ğ
CLIENT_PUBSUB
;

366 
	}
}

368 
	$unsubsüibeCommªd
(
ş›Á
 *
c
) {

369 ià(
c
->
¬gc
 == 1) {

370 
	`pubsubUnsubsüibeAÎChªÃls
(
c
,1);

372 
j
;

374 
j
 = 1; j < 
c
->
¬gc
; j++)

375 
	`pubsubUnsubsüibeChªÃl
(
c
,c->
¬gv
[
j
],1);

377 ià(
	`ş›ÁSubsütiÚsCouÁ
(
c
è=ğ0èc->
æags
 &ğ~
CLIENT_PUBSUB
;

378 
	}
}

380 
	$psubsüibeCommªd
(
ş›Á
 *
c
) {

381 
j
;

383 
j
 = 1; j < 
c
->
¬gc
; j++)

384 
	`pubsubSubsüibeP©‹º
(
c
,c->
¬gv
[
j
]);

385 
c
->
æags
 |ğ
CLIENT_PUBSUB
;

386 
	}
}

388 
	$punsubsüibeCommªd
(
ş›Á
 *
c
) {

389 ià(
c
->
¬gc
 == 1) {

390 
	`pubsubUnsubsüibeAÎP©‹ºs
(
c
,1);

392 
j
;

394 
j
 = 1; j < 
c
->
¬gc
; j++)

395 
	`pubsubUnsubsüibeP©‹º
(
c
,c->
¬gv
[
j
],1);

397 ià(
	`ş›ÁSubsütiÚsCouÁ
(
c
è=ğ0èc->
æags
 &ğ~
CLIENT_PUBSUB
;

398 
	}
}

400 
	$publishCommªd
(
ş›Á
 *
c
) {

401 
»ûiv”s
 = 
	`pubsubPublishMes§ge
(
c
->
¬gv
[1],c->argv[2]);

402 ià(
£rv”
.
şu¡”_’abËd
)

403 
	`şu¡”Prİag©ePublish
(
c
->
¬gv
[1],c->argv[2]);

405 
	`fÜûCommªdPrİag©iÚ
(
c
,
PROPAGATE_REPL
);

406 
	`addR•lyLÚgLÚg
(
c
,
»ûiv”s
);

407 
	}
}

410 
	$pubsubCommªd
(
ş›Á
 *
c
) {

411 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

412 cÚ¡ *
h–p
[] = {

416 
NULL


418 
	`addR•lyH–p
(
c
, 
h–p
);

419 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"channels") &&

420 (
c
->
¬gc
 == 2 || c->argc == 3))

423 
sds
 
·t
 = (
c
->
¬gc
 =ğ2è? 
NULL
 : c->
¬gv
[2]->
±r
;

424 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
pubsub_chªÃls
);

425 
diùEÁry
 *
de
;

426 
mbËn
 = 0;

427 *
»¶yËn
;

429 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

430 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

431 
robj
 *
cobj
 = 
	`diùG‘Key
(
de
);

432 
sds
 
chªÃl
 = 
cobj
->
±r
;

434 ià(!
·t
 || 
	`¡ršgm©chËn
Õ©, 
	`sd¦’
(pat),

435 
chªÃl
, 
	`sd¦’
(channel),0))

437 
	`addR•lyBulk
(
c
,
cobj
);

438 
mbËn
++;

441 
	`diùR–—£I‹¿tÜ
(
di
);

442 
	`£tDeã¼edA¼ayL’
(
c
,
»¶yËn
,
mbËn
);

443 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"numsub"è&& c->
¬gc
 >= 2) {

445 
j
;

447 
	`addR•lyA¼ayL’
(
c
,(c->
¬gc
-2)*2);

448 
j
 = 2; j < 
c
->
¬gc
; j++) {

449 
li¡
 *
l
 = 
	`diùF‘chV®ue
(
£rv”
.
pubsub_chªÃls
,
c
->
¬gv
[
j
]);

451 
	`addR•lyBulk
(
c
,c->
¬gv
[
j
]);

452 
	`addR•lyLÚgLÚg
(
c
,
l
 ? 
	`li¡L’gth
(l) : 0);

454 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"num·t"è&& c->
¬gc
 == 2) {

456 
	`addR•lyLÚgLÚg
(
c
,
	`li¡L’gth
(
£rv”
.
pubsub_·‰”ns
));

458 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

460 
	}
}

	@quicklist.c

31 
	~<¡ršg.h
>

32 
	~"quickli¡.h
"

33 
	~"zm®loc.h
"

34 
	~"zli¡.h
"

35 
	~"ut.h
"

36 
	~"lzf.h
"

38 #ià
defšed
(
REDIS_TEST
è|| defšed(
REDIS_TEST_VERBOSE
)

39 
	~<¡dio.h
>

42 #iâdeà
REDIS_STATIC


43 
	#REDIS_STATIC
 

	)

47 cÚ¡ 
size_t
 
	gİtimiz©iÚ_Ëv–
[] = {4096, 8192, 16384, 32768, 65536};

51 
	#SIZE_SAFETY_LIMIT
 8192

	)

54 
	#MIN_COMPRESS_BYTES
 48

	)

59 
	#MIN_COMPRESS_IMPROVE
 8

	)

62 #iâdeà
REDIS_TEST_VERBOSE


63 
	#D
(...)

	)

65 
	#D
(...) \

67 
	`´štf
("%s:%s:%d:\t", 
__FILE__
, 
__FUNCTION__
, 
__LINE__
); \

68 
	`´štf
(
__VA_ARGS__
); \

69 
	`´štf
("\n"); \

70 } 0);

	)

74 
	#QL_MAX_BM
 ((1 << 
QL_BM_BITS
)-1)

	)

75 
quickli¡Bookm¬k
 *
_quickli¡Bookm¬kFšdByName
(
quickli¡
 *
ql
, cÚ¡ *
Çme
);

76 
quickli¡Bookm¬k
 *
_quickli¡Bookm¬kFšdByNode
(
quickli¡
 *
ql
, 
quickli¡Node
 *
node
);

77 
_quickli¡Bookm¬kD–‘e
(
quickli¡
 *
ql
, 
quickli¡Bookm¬k
 *
bm
);

80 
	#š™EÁry
(
e
) \

82 (
e
)->
zi
 = (e)->
v®ue
 = 
NULL
; \

83 (
e
)->
lÚgv®
 = -123456789; \

84 (
e
)->
quickli¡
 = 
NULL
; \

85 (
e
)->
node
 = 
NULL
; \

86 (
e
)->
off£t
 = 123456789; \

87 (
e
)->
sz
 = 0; \

88 } 0)

	)

90 #ià
__GNUC__
 >= 3

91 
	#lik–y
(
x
è
	`__butš_ex³ù
(!!(x), 1)

	)

92 
	#uÆik–y
(
x
è
	`__butš_ex³ù
(!!(x), 0)

	)

94 
	#lik–y
(
x
è(x)

	)

95 
	#uÆik–y
(
x
è(x)

	)

100 
quickli¡
 *
	$quickli¡C»©e
() {

101 
quickli¡
 *quicklist;

103 
quickli¡
 = 
	`zm®loc
((*quicklist));

104 
quickli¡
->
h—d
 = quickli¡->

 = 
NULL
;

105 
quickli¡
->
Ën
 = 0;

106 
quickli¡
->
couÁ
 = 0;

107 
quickli¡
->
com´ess
 = 0;

108 
quickli¡
->
fl
 = -2;

109 
quickli¡
->
bookm¬k_couÁ
 = 0;

110  
quickli¡
;

111 
	}
}

113 
	#COMPRESS_MAX
 ((1 << 
QL_COMP_BITS
)-1)

	)

114 
	$quickli¡S‘Com´essD•th
(
quickli¡
 *quickli¡, 
com´ess
) {

115 ià(
com´ess
 > 
COMPRESS_MAX
) {

116 
com´ess
 = 
COMPRESS_MAX
;

117 } ià(
com´ess
 < 0) {

118 
com´ess
 = 0;

120 
quickli¡
->
com´ess
 = compress;

121 
	}
}

123 
	#FILL_MAX
 ((1 << (
QL_FILL_BITS
-1))-1)

	)

124 
	$quickli¡S‘Fl
(
quickli¡
 *quickli¡, 
fl
) {

125 ià(
fl
 > 
FILL_MAX
) {

126 
fl
 = 
FILL_MAX
;

127 } ià(
fl
 < -5) {

128 
fl
 = -5;

130 
quickli¡
->
fl
 = fill;

131 
	}
}

133 
	$quickli¡S‘O±iÚs
(
quickli¡
 *quickli¡, 
fl
, 
d•th
) {

134 
	`quickli¡S‘Fl
(
quickli¡
, 
fl
);

135 
	`quickli¡S‘Com´essD•th
(
quickli¡
, 
d•th
);

136 
	}
}

139 
quickli¡
 *
	$quickli¡New
(
fl
, 
com´ess
) {

140 
quickli¡
 *quickli¡ = 
	`quickli¡C»©e
();

141 
	`quickli¡S‘O±iÚs
(
quickli¡
, 
fl
, 
com´ess
);

142  
quickli¡
;

143 
	}
}

145 
REDIS_STATIC
 
quickli¡Node
 *
	$quickli¡C»©eNode
() {

146 
quickli¡Node
 *
node
;

147 
node
 = 
	`zm®loc
((*node));

148 
node
->
zl
 = 
NULL
;

149 
node
->
couÁ
 = 0;

150 
node
->
sz
 = 0;

151 
node
->
Ãxt
 =‚ode->
´ev
 = 
NULL
;

152 
node
->
’codšg
 = 
QUICKLIST_NODE_ENCODING_RAW
;

153 
node
->
cÚš”
 = 
QUICKLIST_NODE_CONTAINER_ZIPLIST
;

154 
node
->
»com´ess
 = 0;

155  
node
;

156 
	}
}

159 
	$quickli¡CouÁ
(cÚ¡ 
quickli¡
 *
ql
è{  ql->
couÁ
; 
	}
}

162 
	$quickli¡R–—£
(
quickli¡
 *quicklist) {

163 
Ën
;

164 
quickli¡Node
 *
cu¼’t
, *
Ãxt
;

166 
cu¼’t
 = 
quickli¡
->
h—d
;

167 
Ën
 = 
quickli¡
->len;

168 
Ën
--) {

169 
Ãxt
 = 
cu¼’t
->next;

171 
	`zä“
(
cu¼’t
->
zl
);

172 
quickli¡
->
couÁ
 -ğ
cu¼’t
->count;

174 
	`zä“
(
cu¼’t
);

176 
quickli¡
->
Ën
--;

177 
cu¼’t
 = 
Ãxt
;

179 
	`quickli¡Bookm¬ksCË¬
(
quickli¡
);

180 
	`zä“
(
quickli¡
);

181 
	}
}

186 
REDIS_STATIC
 
	$__quickli¡Com´essNode
(
quickli¡Node
 *
node
) {

187 #ifdeà
REDIS_TEST


188 
node
->
©‹m±ed_com´ess
 = 1;

192 ià(
node
->
sz
 < 
MIN_COMPRESS_BYTES
)

195 
quickli¡LZF
 *
lzf
 = 
	`zm®loc
((*lzfè+ 
node
->
sz
);

198 ià(((
lzf
->
sz
 = 
	`lzf_com´ess
(
node
->
zl
,‚ode->sz,†zf->
com´es£d
,

199 
node
->
sz
)) == 0) ||

200 
lzf
->
sz
 + 
MIN_COMPRESS_IMPROVE
 >ğ
node
->sz) {

202 
	`zä“
(
lzf
);

205 
lzf
 = 
	`z»®loc
Özf, (*lzfè+†zf->
sz
);

206 
	`zä“
(
node
->
zl
);

207 
node
->
zl
 = (*)
lzf
;

208 
node
->
’codšg
 = 
QUICKLIST_NODE_ENCODING_LZF
;

209 
node
->
»com´ess
 = 0;

211 
	}
}

214 
	#quickli¡Com´essNode
(
_node
) \

216 ià((
_node
è&& (_node)->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_RAW
) { \

217 
	`__quickli¡Com´essNode
((
_node
)); \

219 } 0)

	)

223 
REDIS_STATIC
 
	$__quickli¡Decom´essNode
(
quickli¡Node
 *
node
) {

224 #ifdeà
REDIS_TEST


225 
node
->
©‹m±ed_com´ess
 = 0;

228 *
decom´es£d
 = 
	`zm®loc
(
node
->
sz
);

229 
quickli¡LZF
 *
lzf
 = (quickli¡LZF *)
node
->
zl
;

230 ià(
	`lzf_decom´ess
(
lzf
->
com´es£d
,†zf->
sz
, 
decom´es£d
, 
node
->sz) == 0) {

232 
	`zä“
(
decom´es£d
);

235 
	`zä“
(
lzf
);

236 
node
->
zl
 = 
decom´es£d
;

237 
node
->
’codšg
 = 
QUICKLIST_NODE_ENCODING_RAW
;

239 
	}
}

242 
	#quickli¡Decom´essNode
(
_node
) \

244 ià((
_node
è&& (_node)->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_LZF
) { \

245 
	`__quickli¡Decom´essNode
((
_node
)); \

247 } 0)

	)

250 
	#quickli¡Decom´essNodeFÜU£
(
_node
) \

252 ià((
_node
è&& (_node)->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_LZF
) { \

253 
	`__quickli¡Decom´essNode
((
_node
)); \

254 (
_node
)->
»com´ess
 = 1; \

256 } 0)

	)

261 
size_t
 
	$quickli¡G‘Lzf
(cÚ¡ 
quickli¡Node
 *
node
, **
d©a
) {

262 
quickli¡LZF
 *
lzf
 = (quickli¡LZF *)
node
->
zl
;

263 *
d©a
 = 
lzf
->
com´es£d
;

264  
lzf
->
sz
;

265 
	}
}

267 
	#quickli¡AÎowsCom´essiÚ
(
_ql
è((_ql)->
com´ess
 !ğ0)

	)

273 
REDIS_STATIC
 
	$__quickli¡Com´ess
(cÚ¡ 
quickli¡
 *quicklist,

274 
quickli¡Node
 *
node
) {

277 ià(!
	`quickli¡AÎowsCom´essiÚ
(
quickli¡
) ||

278 
quickli¡
->
Ën
 < ()(quickli¡->
com´ess
 * 2))

283 ià(
quickli¡
->
com´ess
 == 1) {

284 
quickli¡Node
 *
h
 = 
quickli¡
->
h—d
, *
t
 = quickli¡->

;

285 
	`quickli¡Decom´essNode
(
h
);

286 
	`quickli¡Decom´essNode
(
t
);

287 ià(
h
 !ğ
node
 && 
t
 !=‚ode)

288 
	`quickli¡Com´essNode
(
node
);

290 } ià(
quickli¡
->
com´ess
 == 2) {

291 
quickli¡Node
 *
h
 = 
quickli¡
->
h—d
, *
hn
 = h->
Ãxt
, *
hÂ
 = hn->next;

292 
quickli¡Node
 *
t
 = 
quickli¡
->

, *

 =->
´ev
, *
p
 =p->prev;

293 
	`quickli¡Decom´essNode
(
h
);

294 
	`quickli¡Decom´essNode
(
hn
);

295 
	`quickli¡Decom´essNode
(
t
);

296 
	`quickli¡Decom´essNode
(

);

297 ià(
h
 !ğ
node
 && 
hn
 !ğnod&& 
t
 !ğnod&& 

 !=‚ode) {

298 
	`quickli¡Com´essNode
(
node
);

300 ià(
hÂ
 !ğ
t
) {

301 
	`quickli¡Com´essNode
(
hÂ
);

303 ià(
p
 !ğ
h
) {

304 
	`quickli¡Com´essNode
(
p
);

313 
quickli¡Node
 *
fÜw¬d
 = 
quickli¡
->
h—d
;

314 
quickli¡Node
 *
»v”£
 = 
quickli¡
->

;

315 
d•th
 = 0;

316 
š_d•th
 = 0;

317 
d•th
++ < 
quickli¡
->
com´ess
) {

318 
	`quickli¡Decom´essNode
(
fÜw¬d
);

319 
	`quickli¡Decom´essNode
(
»v”£
);

321 ià(
fÜw¬d
 =ğ
node
 || 
»v”£
 ==‚ode)

322 
š_d•th
 = 1;

324 ià(
fÜw¬d
 =ğ
»v”£
)

327 
fÜw¬d
 = fÜw¬d->
Ãxt
;

328 
»v”£
 =„ev”£->
´ev
;

331 ià(!
š_d•th
)

332 
	`quickli¡Com´essNode
(
node
);

334 ià(
d•th
 > 2) {

336 
	`quickli¡Com´essNode
(
fÜw¬d
);

337 
	`quickli¡Com´essNode
(
»v”£
);

339 
	}
}

341 
	#quickli¡Com´ess
(
_ql
, 
_node
) \

343 ià((
_node
)->
»com´ess
) \

344 
	`quickli¡Com´essNode
((
_node
)); \

346 
	`__quickli¡Com´ess
((
_ql
), (
_node
)); \

347 } 0)

	)

350 
	#quickli¡Recom´essOÆy
(
_ql
, 
_node
) \

352 ià((
_node
)->
»com´ess
) \

353 
	`quickli¡Com´essNode
((
_node
)); \

354 } 0)

	)

360 
REDIS_STATIC
 
	$__quickli¡In£¹Node
(
quickli¡
 *quicklist,

361 
quickli¡Node
 *
Şd_node
,

362 
quickli¡Node
 *
Ãw_node
, 
aá”
) {

363 ià(
aá”
) {

364 
Ãw_node
->
´ev
 = 
Şd_node
;

365 ià(
Şd_node
) {

366 
Ãw_node
->
Ãxt
 = 
Şd_node
->next;

367 ià(
Şd_node
->
Ãxt
)

368 
Şd_node
->
Ãxt
->
´ev
 = 
Ãw_node
;

369 
Şd_node
->
Ãxt
 = 
Ãw_node
;

371 ià(
quickli¡
->

 =ğ
Şd_node
)

372 
quickli¡
->

 = 
Ãw_node
;

374 
Ãw_node
->
Ãxt
 = 
Şd_node
;

375 ià(
Şd_node
) {

376 
Ãw_node
->
´ev
 = 
Şd_node
->prev;

377 ià(
Şd_node
->
´ev
)

378 
Şd_node
->
´ev
->
Ãxt
 = 
Ãw_node
;

379 
Şd_node
->
´ev
 = 
Ãw_node
;

381 ià(
quickli¡
->
h—d
 =ğ
Şd_node
)

382 
quickli¡
->
h—d
 = 
Ãw_node
;

385 ià(
quickli¡
->
Ën
 == 0) {

386 
quickli¡
->
h—d
 = quickli¡->

 = 
Ãw_node
;

389 ià(
Şd_node
)

390 
	`quickli¡Com´ess
(
quickli¡
, 
Şd_node
);

392 
quickli¡
->
Ën
++;

393 
	}
}

396 
REDIS_STATIC
 
	$_quickli¡In£¹NodeBefÜe
(
quickli¡
 *quicklist,

397 
quickli¡Node
 *
Şd_node
,

398 
quickli¡Node
 *
Ãw_node
) {

399 
	`__quickli¡In£¹Node
(
quickli¡
, 
Şd_node
, 
Ãw_node
, 0);

400 
	}
}

402 
REDIS_STATIC
 
	$_quickli¡In£¹NodeAá”
(
quickli¡
 *quicklist,

403 
quickli¡Node
 *
Şd_node
,

404 
quickli¡Node
 *
Ãw_node
) {

405 
	`__quickli¡In£¹Node
(
quickli¡
, 
Şd_node
, 
Ãw_node
, 1);

406 
	}
}

408 
REDIS_STATIC
 

409 
	$_quickli¡NodeSizeM“tsO±imiz©iÚRequœem’t
(cÚ¡ 
size_t
 
sz
,

410 cÚ¡ 
fl
) {

411 ià(
fl
 >= 0)

414 
size_t
 
off£t
 = (-
fl
) - 1;

415 ià(
off£t
 < ((
İtimiz©iÚ_Ëv–
) / (*optimization_level))) {

416 ià(
sz
 <ğ
İtimiz©iÚ_Ëv–
[
off£t
]) {

424 
	}
}

426 
	#sizeM“tsSaãtyLim™
(
sz
è((szè<ğ
SIZE_SAFETY_LIMIT
)

	)

428 
REDIS_STATIC
 
	$_quickli¡NodeAÎowIn£¹
(cÚ¡ 
quickli¡Node
 *
node
,

429 cÚ¡ 
fl
, cÚ¡ 
size_t
 
sz
) {

430 ià(
	`uÆik–y
(!
node
))

433 
zli¡_ov”h—d
;

435 ià(
sz
 < 254)

436 
zli¡_ov”h—d
 = 1;

438 
zli¡_ov”h—d
 = 5;

441 ià(
sz
 < 64)

442 
zli¡_ov”h—d
 += 1;

443 ià(
	`lik–y
(
sz
 < 16384))

444 
zli¡_ov”h—d
 += 2;

446 
zli¡_ov”h—d
 += 5;

449 
Ãw_sz
 = 
node
->
sz
 + sz + 
zli¡_ov”h—d
;

450 ià(
	`lik–y
(
	`_quickli¡NodeSizeM“tsO±imiz©iÚRequœem’t
(
Ãw_sz
, 
fl
)))

452 ià(!
	`sizeM“tsSaãtyLim™
(
Ãw_sz
))

454 ià(()
node
->
couÁ
 < 
fl
)

458 
	}
}

460 
REDIS_STATIC
 
	$_quickli¡NodeAÎowM”ge
(cÚ¡ 
quickli¡Node
 *
a
,

461 cÚ¡ 
quickli¡Node
 *
b
,

462 cÚ¡ 
fl
) {

463 ià(!
a
 || !
b
)

468 
m”ge_sz
 = 
a
->
sz
 + 
b
->sz - 11;

469 ià(
	`lik–y
(
	`_quickli¡NodeSizeM“tsO±imiz©iÚRequœem’t
(
m”ge_sz
, 
fl
)))

471 ià(!
	`sizeM“tsSaãtyLim™
(
m”ge_sz
))

473 ià(()(
a
->
couÁ
 + 
b
->couÁè<ğ
fl
)

477 
	}
}

479 
	#quickli¡NodeUpd©eSz
(
node
) \

481 (
node
)->
sz
 = 
	`zli¡BlobL’
(Òode)->
zl
); \

482 } 0)

	)

488 
	$quickli¡PushH—d
(
quickli¡
 *quickli¡, *
v®ue
, 
size_t
 
sz
) {

489 
quickli¡Node
 *
Üig_h—d
 = 
quickli¡
->
h—d
;

490 ià(
	`lik–y
(

491 
	`_quickli¡NodeAÎowIn£¹
(
quickli¡
->
h—d
, quickli¡->
fl
, 
sz
))) {

492 
quickli¡
->
h—d
->
zl
 =

493 
	`zli¡Push
(
quickli¡
->
h—d
->
zl
, 
v®ue
, 
sz
, 
ZIPLIST_HEAD
);

494 
	`quickli¡NodeUpd©eSz
(
quickli¡
->
h—d
);

496 
quickli¡Node
 *
node
 = 
	`quickli¡C»©eNode
();

497 
node
->
zl
 = 
	`zli¡Push
(
	`zli¡New
(), 
v®ue
, 
sz
, 
ZIPLIST_HEAD
);

499 
	`quickli¡NodeUpd©eSz
(
node
);

500 
	`_quickli¡In£¹NodeBefÜe
(
quickli¡
, quickli¡->
h—d
, 
node
);

502 
quickli¡
->
couÁ
++;

503 
quickli¡
->
h—d
->
couÁ
++;

504  (
Üig_h—d
 !ğ
quickli¡
->
h—d
);

505 
	}
}

511 
	$quickli¡PushTa
(
quickli¡
 *quickli¡, *
v®ue
, 
size_t
 
sz
) {

512 
quickli¡Node
 *
Üig_
 = 
quickli¡
->

;

513 ià(
	`lik–y
(

514 
	`_quickli¡NodeAÎowIn£¹
(
quickli¡
->

, quickli¡->
fl
, 
sz
))) {

515 
quickli¡
->

->
zl
 =

516 
	`zli¡Push
(
quickli¡
->

->
zl
, 
v®ue
, 
sz
, 
ZIPLIST_TAIL
);

517 
	`quickli¡NodeUpd©eSz
(
quickli¡
->

);

519 
quickli¡Node
 *
node
 = 
	`quickli¡C»©eNode
();

520 
node
->
zl
 = 
	`zli¡Push
(
	`zli¡New
(), 
v®ue
, 
sz
, 
ZIPLIST_TAIL
);

522 
	`quickli¡NodeUpd©eSz
(
node
);

523 
	`_quickli¡In£¹NodeAá”
(
quickli¡
, quickli¡->

, 
node
);

525 
quickli¡
->
couÁ
++;

526 
quickli¡
->

->
couÁ
++;

527  (
Üig_
 !ğ
quickli¡
->

);

528 
	}
}

533 
	$quickli¡Aµ’dZli¡
(
quickli¡
 *quickli¡, *
zl
) {

534 
quickli¡Node
 *
node
 = 
	`quickli¡C»©eNode
();

536 
node
->
zl
 = zl;

537 
node
->
couÁ
 = 
	`zli¡L’
Òode->
zl
);

538 
node
->
sz
 = 
	`zli¡BlobL’
(
zl
);

540 
	`_quickli¡In£¹NodeAá”
(
quickli¡
, quickli¡->

, 
node
);

541 
quickli¡
->
couÁ
 +ğ
node
->count;

542 
	}
}

550 
quickli¡
 *
	$quickli¡Aµ’dV®uesFromZli¡
(
quickli¡
 *quicklist,

551 *
zl
) {

552 *
v®ue
;

553 
sz
;

554 
lÚgv®
;

555 
lÚg¡r
[32] = {0};

557 *
p
 = 
	`zli¡Index
(
zl
, 0);

558 
	`zli¡G‘
(
p
, &
v®ue
, &
sz
, &
lÚgv®
)) {

559 ià(!
v®ue
) {

561 
sz
 = 
	`Î2¡ršg
(
lÚg¡r
, ÖÚg¡r), 
lÚgv®
);

562 
v®ue
 = (*)
lÚg¡r
;

564 
	`quickli¡PushTa
(
quickli¡
, 
v®ue
, 
sz
);

565 
p
 = 
	`zli¡Next
(
zl
,…);

567 
	`zä“
(
zl
);

568  
quickli¡
;

569 
	}
}

574 
quickli¡
 *
	$quickli¡C»©eFromZli¡
(
fl
, 
com´ess
,

575 *
zl
) {

576  
	`quickli¡Aµ’dV®uesFromZli¡
(
	`quickli¡New
(
fl
, 
com´ess
), 
zl
);

577 
	}
}

579 
	#quickli¡D–‘eIfEm±y
(
ql
, 
n
) \

581 ià((
n
)->
couÁ
 == 0) { \

582 
	`__quickli¡D–Node
((
ql
), (
n
)); \

583 (
n
èğ
NULL
; \

585 } 0)

	)

587 
REDIS_STATIC
 
	$__quickli¡D–Node
(
quickli¡
 *quicklist,

588 
quickli¡Node
 *
node
) {

590 
quickli¡Bookm¬k
 *
bm
 = 
	`_quickli¡Bookm¬kFšdByNode
(
quickli¡
, 
node
);

591 ià(
bm
) {

592 
bm
->
node
 =‚ode->
Ãxt
;

594 ià(!
bm
->
node
)

595 
	`_quickli¡Bookm¬kD–‘e
(
quickli¡
, 
bm
);

598 ià(
node
->
Ãxt
)

599 
node
->
Ãxt
->
´ev
 =‚ode->prev;

600 ià(
node
->
´ev
)

601 
node
->
´ev
->
Ãxt
 =‚ode->next;

603 ià(
node
 =ğ
quickli¡
->

) {

604 
quickli¡
->

 = 
node
->
´ev
;

607 ià(
node
 =ğ
quickli¡
->
h—d
) {

608 
quickli¡
->
h—d
 = 
node
->
Ãxt
;

613 
	`__quickli¡Com´ess
(
quickli¡
, 
NULL
);

615 
quickli¡
->
couÁ
 -ğ
node
->count;

617 
	`zä“
(
node
->
zl
);

618 
	`zä“
(
node
);

619 
quickli¡
->
Ën
--;

620 
	}
}

630 
REDIS_STATIC
 
	$quickli¡D–Index
(
quickli¡
 *quickli¡, 
quickli¡Node
 *
node
,

631 **
p
) {

632 
gÚe
 = 0;

634 
node
->
zl
 = 
	`zli¡D–‘e
Òode->zl, 
p
);

635 
node
->
couÁ
--;

636 ià(
node
->
couÁ
 == 0) {

637 
gÚe
 = 1;

638 
	`__quickli¡D–Node
(
quickli¡
, 
node
);

640 
	`quickli¡NodeUpd©eSz
(
node
);

642 
quickli¡
->
couÁ
--;

644  
gÚe
 ? 1 : 0;

645 
	}
}

651 
	$quickli¡D–EÁry
(
quickli¡I‹r
 *
™”
, 
quickli¡EÁry
 *
’Œy
) {

652 
quickli¡Node
 *
´ev
 = 
’Œy
->
node
->prev;

653 
quickli¡Node
 *
Ãxt
 = 
’Œy
->
node
->next;

654 
d–‘ed_node
 = 
	`quickli¡D–Index
((
quickli¡
 *)
’Œy
->quicklist,

655 
’Œy
->
node
, &’Œy->
zi
);

658 
™”
->
zi
 = 
NULL
;

661 ià(
d–‘ed_node
) {

662 ià(
™”
->
dœeùiÚ
 =ğ
AL_START_HEAD
) {

663 
™”
->
cu¼’t
 = 
Ãxt
;

664 
™”
->
off£t
 = 0;

665 } ià(
™”
->
dœeùiÚ
 =ğ
AL_START_TAIL
) {

666 
™”
->
cu¼’t
 = 
´ev
;

667 
™”
->
off£t
 = -1;

678 
	}
}

684 
	$quickli¡R•ÏûAtIndex
(
quickli¡
 *quickli¡, 
šdex
, *
d©a
,

685 
sz
) {

686 
quickli¡EÁry
 
’Œy
;

687 ià(
	`lik–y
(
	`quickli¡Index
(
quickli¡
, 
šdex
, &
’Œy
))) {

689 
’Œy
.
node
->
zl
 = 
	`zli¡D–‘e
ÓÁry.node->zl, &’Œy.
zi
);

690 
’Œy
.
node
->
zl
 = 
	`zli¡In£¹
ÓÁry.node->zl,ƒÁry.
zi
, 
d©a
, 
sz
);

691 
	`quickli¡NodeUpd©eSz
(
’Œy
.
node
);

692 
	`quickli¡Com´ess
(
quickli¡
, 
’Œy
.
node
);

697 
	}
}

712 
REDIS_STATIC
 
quickli¡Node
 *
	$_quickli¡Zli¡M”ge
(
quickli¡
 *quicklist,

713 
quickli¡Node
 *
a
,

714 
quickli¡Node
 *
b
) {

715 
	`D
("Reque¡ed m”g×,bè(%u, %u)", 
a
->
couÁ
, 
b
->count);

717 
	`quickli¡Decom´essNode
(
a
);

718 
	`quickli¡Decom´essNode
(
b
);

719 ià((
	`zli¡M”ge
(&
a
->
zl
, &
b
->zl))) {

721 
quickli¡Node
 *
k“p
 = 
NULL
, *
nok“p
 = NULL;

722 ià(!
a
->
zl
) {

723 
nok“p
 = 
a
;

724 
k“p
 = 
b
;

725 } ià(!
b
->
zl
) {

726 
nok“p
 = 
b
;

727 
k“p
 = 
a
;

729 
k“p
->
couÁ
 = 
	`zli¡L’
(k“p->
zl
);

730 
	`quickli¡NodeUpd©eSz
(
k“p
);

732 
nok“p
->
couÁ
 = 0;

733 
	`__quickli¡D–Node
(
quickli¡
, 
nok“p
);

734 
	`quickli¡Com´ess
(
quickli¡
, 
k“p
);

735  
k“p
;

738  
NULL
;

740 
	}
}

750 
REDIS_STATIC
 
	$_quickli¡M”geNodes
(
quickli¡
 *quicklist,

751 
quickli¡Node
 *
ûÁ”
) {

752 
fl
 = 
quickli¡
->fill;

753 
quickli¡Node
 *
´ev
, *
´ev_´ev
, *
Ãxt
, *
Ãxt_Ãxt
, *
rg‘
;

754 
´ev
 = 
´ev_´ev
 = 
Ãxt
 = 
Ãxt_Ãxt
 = 
rg‘
 = 
NULL
;

756 ià(
ûÁ”
->
´ev
) {

757 
´ev
 = 
ûÁ”
->prev;

758 ià(
ûÁ”
->
´ev
->prev)

759 
´ev_´ev
 = 
ûÁ”
->
´ev
->prev;

762 ià(
ûÁ”
->
Ãxt
) {

763 
Ãxt
 = 
ûÁ”
->next;

764 ià(
ûÁ”
->
Ãxt
->next)

765 
Ãxt_Ãxt
 = 
ûÁ”
->
Ãxt
->next;

769 ià(
	`_quickli¡NodeAÎowM”ge
(
´ev
, 
´ev_´ev
, 
fl
)) {

770 
	`_quickli¡Zli¡M”ge
(
quickli¡
, 
´ev_´ev
, 
´ev
);

771 
´ev_´ev
 = 
´ev
 = 
NULL
;

775 ià(
	`_quickli¡NodeAÎowM”ge
(
Ãxt
, 
Ãxt_Ãxt
, 
fl
)) {

776 
	`_quickli¡Zli¡M”ge
(
quickli¡
, 
Ãxt
, 
Ãxt_Ãxt
);

777 
Ãxt
 = 
Ãxt_Ãxt
 = 
NULL
;

781 ià(
	`_quickli¡NodeAÎowM”ge
(
ûÁ”
, c’‹r->
´ev
, 
fl
)) {

782 
rg‘
 = 
	`_quickli¡Zli¡M”ge
(
quickli¡
, 
ûÁ”
->
´ev
, center);

783 
ûÁ”
 = 
NULL
;

786 
rg‘
 = 
ûÁ”
;

790 ià(
	`_quickli¡NodeAÎowM”ge
(
rg‘
,¬g‘->
Ãxt
, 
fl
)) {

791 
	`_quickli¡Zli¡M”ge
(
quickli¡
, 
rg‘
,¬g‘->
Ãxt
);

793 
	}
}

814 
REDIS_STATIC
 
quickli¡Node
 *
	$_quickli¡S¶™Node
(
quickli¡Node
 *
node
, 
off£t
,

815 
aá”
) {

816 
size_t
 
zl_sz
 = 
node
->
sz
;

818 
quickli¡Node
 *
Ãw_node
 = 
	`quickli¡C»©eNode
();

819 
Ãw_node
->
zl
 = 
	`zm®loc
(
zl_sz
);

822 
	`memıy
(
Ãw_node
->
zl
, 
node
->zl, 
zl_sz
);

825 
Üig_¡¬t
 = 
aá”
 ? 
off£t
 + 1 : 0;

826 
Üig_ex‹Á
 = 
aá”
 ? -1 : 
off£t
;

827 
Ãw_¡¬t
 = 
aá”
 ? 0 : 
off£t
;

828 
Ãw_ex‹Á
 = 
aá”
 ? 
off£t
 + 1 : -1;

830 
	`D
("Aá” %d (%d);„ªges: [%d, %d], [%d, %d]", 
aá”
, 
off£t
, 
Üig_¡¬t
,

831 
Üig_ex‹Á
, 
Ãw_¡¬t
, 
Ãw_ex‹Á
);

833 
node
->
zl
 = 
	`zli¡D–‘eRªge
Òode->zl, 
Üig_¡¬t
, 
Üig_ex‹Á
);

834 
node
->
couÁ
 = 
	`zli¡L’
Òode->
zl
);

835 
	`quickli¡NodeUpd©eSz
(
node
);

837 
Ãw_node
->
zl
 = 
	`zli¡D–‘eRªge
Òew_node->zl, 
Ãw_¡¬t
, 
Ãw_ex‹Á
);

838 
Ãw_node
->
couÁ
 = 
	`zli¡L’
Òew_node->
zl
);

839 
	`quickli¡NodeUpd©eSz
(
Ãw_node
);

841 
	`D
("Aá” s¶™†’gths: orig (%d),‚ew (%d)", 
node
->
couÁ
, 
Ãw_node
->count);

842  
Ãw_node
;

843 
	}
}

849 
REDIS_STATIC
 
	$_quickli¡In£¹
(
quickli¡
 *quickli¡, 
quickli¡EÁry
 *
’Œy
,

850 *
v®ue
, cÚ¡ 
size_t
 
sz
, 
aá”
) {

851 
fuÎ
 = 0, 
©_
 = 0, 
©_h—d
 = 0, 
fuÎ_Ãxt
 = 0, 
fuÎ_´ev
 = 0;

852 
fl
 = 
quickli¡
->fill;

853 
quickli¡Node
 *
node
 = 
’Œy
->node;

854 
quickli¡Node
 *
Ãw_node
 = 
NULL
;

856 ià(!
node
) {

858 
	`D
("No‚ode given!");

859 
Ãw_node
 = 
	`quickli¡C»©eNode
();

860 
Ãw_node
->
zl
 = 
	`zli¡Push
(
	`zli¡New
(), 
v®ue
, 
sz
, 
ZIPLIST_HEAD
);

861 
	`__quickli¡In£¹Node
(
quickli¡
, 
NULL
, 
Ãw_node
, 
aá”
);

862 
Ãw_node
->
couÁ
++;

863 
quickli¡
->
couÁ
++;

868 ià(!
	`_quickli¡NodeAÎowIn£¹
(
node
, 
fl
, 
sz
)) {

869 
	`D
("Current‚ode is full with count %d with„equested fill %lu",

870 
node
->
couÁ
, 
fl
);

871 
fuÎ
 = 1;

874 ià(
aá”
 && (
’Œy
->
off£t
 =ğ
node
->
couÁ
)) {

875 
	`D
("At Tail of current ziplist");

876 
©_
 = 1;

877 ià(!
	`_quickli¡NodeAÎowIn£¹
(
node
->
Ãxt
, 
fl
, 
sz
)) {

878 
	`D
("Next‚ode is fulloo.");

879 
fuÎ_Ãxt
 = 1;

883 ià(!
aá”
 && (
’Œy
->
off£t
 == 0)) {

884 
	`D
("At Head");

885 
©_h—d
 = 1;

886 ià(!
	`_quickli¡NodeAÎowIn£¹
(
node
->
´ev
, 
fl
, 
sz
)) {

887 
	`D
("Prev‚ode is fulloo.");

888 
fuÎ_´ev
 = 1;

893 ià(!
fuÎ
 && 
aá”
) {

894 
	`D
("Not full, inserting‡fter current…osition.");

895 
	`quickli¡Decom´essNodeFÜU£
(
node
);

896 *
Ãxt
 = 
	`zli¡Next
(
node
->
zl
, 
’Œy
->
zi
);

897 ià(
Ãxt
 =ğ
NULL
) {

898 
node
->
zl
 = 
	`zli¡Push
Òode->zl, 
v®ue
, 
sz
, 
ZIPLIST_TAIL
);

900 
node
->
zl
 = 
	`zli¡In£¹
Òode->zl, 
Ãxt
, 
v®ue
, 
sz
);

902 
node
->
couÁ
++;

903 
	`quickli¡NodeUpd©eSz
(
node
);

904 
	`quickli¡Recom´essOÆy
(
quickli¡
, 
node
);

905 } ià(!
fuÎ
 && !
aá”
) {

906 
	`D
("Not full, inserting before current…osition.");

907 
	`quickli¡Decom´essNodeFÜU£
(
node
);

908 
node
->
zl
 = 
	`zli¡In£¹
Òode->zl, 
’Œy
->
zi
, 
v®ue
, 
sz
);

909 
node
->
couÁ
++;

910 
	`quickli¡NodeUpd©eSz
(
node
);

911 
	`quickli¡Recom´essOÆy
(
quickli¡
, 
node
);

912 } ià(
fuÎ
 && 
©_
 && 
node
->
Ãxt
 && !
fuÎ_Ãxt
 && 
aá”
) {

915 
	`D
("Full‡ndail, but‚ext isn't full; inserting‚ext‚ode head");

916 
Ãw_node
 = 
node
->
Ãxt
;

917 
	`quickli¡Decom´essNodeFÜU£
(
Ãw_node
);

918 
Ãw_node
->
zl
 = 
	`zli¡Push
Òew_node->zl, 
v®ue
, 
sz
, 
ZIPLIST_HEAD
);

919 
Ãw_node
->
couÁ
++;

920 
	`quickli¡NodeUpd©eSz
(
Ãw_node
);

921 
	`quickli¡Recom´essOÆy
(
quickli¡
, 
Ãw_node
);

922 } ià(
fuÎ
 && 
©_h—d
 && 
node
->
´ev
 && !
fuÎ_´ev
 && !
aá”
) {

925 
	`D
("Full‡nd head, but…rev isn't full, inserting…rev‚odeail");

926 
Ãw_node
 = 
node
->
´ev
;

927 
	`quickli¡Decom´essNodeFÜU£
(
Ãw_node
);

928 
Ãw_node
->
zl
 = 
	`zli¡Push
Òew_node->zl, 
v®ue
, 
sz
, 
ZIPLIST_TAIL
);

929 
Ãw_node
->
couÁ
++;

930 
	`quickli¡NodeUpd©eSz
(
Ãw_node
);

931 
	`quickli¡Recom´essOÆy
(
quickli¡
, 
Ãw_node
);

932 } ià(
fuÎ
 && ((
©_
 && 
node
->
Ãxt
 && 
fuÎ_Ãxt
 && 
aá”
) ||

933 (
©_h—d
 && 
node
->
´ev
 && 
fuÎ_´ev
 && !
aá”
))) {

936 
	`D
("\tprovisioning‚ew‚ode...");

937 
Ãw_node
 = 
	`quickli¡C»©eNode
();

938 
Ãw_node
->
zl
 = 
	`zli¡Push
(
	`zli¡New
(), 
v®ue
, 
sz
, 
ZIPLIST_HEAD
);

939 
Ãw_node
->
couÁ
++;

940 
	`quickli¡NodeUpd©eSz
(
Ãw_node
);

941 
	`__quickli¡In£¹Node
(
quickli¡
, 
node
, 
Ãw_node
, 
aá”
);

942 } ià(
fuÎ
) {

945 
	`D
("\tsplitting‚ode...");

946 
	`quickli¡Decom´essNodeFÜU£
(
node
);

947 
Ãw_node
 = 
	`_quickli¡S¶™Node
(
node
, 
’Œy
->
off£t
, 
aá”
);

948 
Ãw_node
->
zl
 = 
	`zli¡Push
Òew_node->zl, 
v®ue
, 
sz
,

949 
aá”
 ? 
ZIPLIST_HEAD
 : 
ZIPLIST_TAIL
);

950 
Ãw_node
->
couÁ
++;

951 
	`quickli¡NodeUpd©eSz
(
Ãw_node
);

952 
	`__quickli¡In£¹Node
(
quickli¡
, 
node
, 
Ãw_node
, 
aá”
);

953 
	`_quickli¡M”geNodes
(
quickli¡
, 
node
);

956 
quickli¡
->
couÁ
++;

957 
	}
}

959 
	$quickli¡In£¹BefÜe
(
quickli¡
 *quickli¡, 
quickli¡EÁry
 *
’Œy
,

960 *
v®ue
, cÚ¡ 
size_t
 
sz
) {

961 
	`_quickli¡In£¹
(
quickli¡
, 
’Œy
, 
v®ue
, 
sz
, 0);

962 
	}
}

964 
	$quickli¡In£¹Aá”
(
quickli¡
 *quickli¡, 
quickli¡EÁry
 *
’Œy
,

965 *
v®ue
, cÚ¡ 
size_t
 
sz
) {

966 
	`_quickli¡In£¹
(
quickli¡
, 
’Œy
, 
v®ue
, 
sz
, 1);

967 
	}
}

975 
	$quickli¡D–Rªge
(
quickli¡
 *quickli¡, cÚ¡ 
¡¬t
,

976 cÚ¡ 
couÁ
) {

977 ià(
couÁ
 <= 0)

980 
ex‹Á
 = 
couÁ
;

982 ià(
¡¬t
 >ğ0 && 
ex‹Á
 > (
quickli¡
->
couÁ
 - start)) {

984 
ex‹Á
 = 
quickli¡
->
couÁ
 - 
¡¬t
;

985 } ià(
¡¬t
 < 0 && 
ex‹Á
 > ()(-start)) {

987 
ex‹Á
 = -
¡¬t
;

990 
quickli¡EÁry
 
’Œy
;

991 ià(!
	`quickli¡Index
(
quickli¡
, 
¡¬t
, &
’Œy
))

994 
	`D
("Quickli¡ d–‘»que¡ fÜ s¹ %ld, couÁ %ld,ƒx‹Á: %ld", 
¡¬t
,

995 
couÁ
, 
ex‹Á
);

996 
quickli¡Node
 *
node
 = 
’Œy
.node;

999 
ex‹Á
) {

1000 
quickli¡Node
 *
Ãxt
 = 
node
->next;

1002 
d–
;

1003 
d–‘e_’tœe_node
 = 0;

1004 ià(
’Œy
.
off£t
 =ğ0 && 
ex‹Á
 >ğ
node
->
couÁ
) {

1007 
d–‘e_’tœe_node
 = 1;

1008 
d–
 = 
node
->
couÁ
;

1009 } ià(
’Œy
.
off£t
 >ğ0 && 
ex‹Á
 >ğ
node
->
couÁ
) {

1012 
d–
 = 
node
->
couÁ
 - 
’Œy
.
off£t
;

1013 } ià(
’Œy
.
off£t
 < 0) {

1019 
d–
 = -
’Œy
.
off£t
;

1024 ià(
d–
 > 
ex‹Á
)

1025 
d–
 = 
ex‹Á
;

1029 
d–
 = 
ex‹Á
;

1032 
	`D
("[%ld]:‡skingo del: %ld because offset: %d; (ENTIRE NODE: %d), "

1034 
ex‹Á
, 
d–
, 
’Œy
.
off£t
, 
d–‘e_’tœe_node
, 
node
->
couÁ
);

1036 ià(
d–‘e_’tœe_node
) {

1037 
	`__quickli¡D–Node
(
quickli¡
, 
node
);

1039 
	`quickli¡Decom´essNodeFÜU£
(
node
);

1040 
node
->
zl
 = 
	`zli¡D–‘eRªge
Òode->zl, 
’Œy
.
off£t
, 
d–
);

1041 
	`quickli¡NodeUpd©eSz
(
node
);

1042 
node
->
couÁ
 -ğ
d–
;

1043 
quickli¡
->
couÁ
 -ğ
d–
;

1044 
	`quickli¡D–‘eIfEm±y
(
quickli¡
, 
node
);

1045 ià(
node
)

1046 
	`quickli¡Recom´essOÆy
(
quickli¡
, 
node
);

1049 
ex‹Á
 -ğ
d–
;

1051 
node
 = 
Ãxt
;

1053 
’Œy
.
off£t
 = 0;

1056 
	}
}

1059 
	$quickli¡Com·»
(*
p1
, *
p2
, 
p2_Ën
) {

1060  
	`zli¡Com·»
(
p1
, 
p2
, 
p2_Ën
);

1061 
	}
}

1065 
quickli¡I‹r
 *
	$quickli¡G‘I‹¿tÜ
(cÚ¡ 
quickli¡
 *quickli¡, 
dœeùiÚ
) {

1066 
quickli¡I‹r
 *
™”
;

1068 
™”
 = 
	`zm®loc
((*iter));

1070 ià(
dœeùiÚ
 =ğ
AL_START_HEAD
) {

1071 
™”
->
cu¼’t
 = 
quickli¡
->
h—d
;

1072 
™”
->
off£t
 = 0;

1073 } ià(
dœeùiÚ
 =ğ
AL_START_TAIL
) {

1074 
™”
->
cu¼’t
 = 
quickli¡
->

;

1075 
™”
->
off£t
 = -1;

1078 
™”
->
dœeùiÚ
 = direction;

1079 
™”
->
quickli¡
 = quicklist;

1081 
™”
->
zi
 = 
NULL
;

1083  
™”
;

1084 
	}
}

1088 
quickli¡I‹r
 *
	$quickli¡G‘I‹¿tÜAtIdx
(cÚ¡ 
quickli¡
 *quicklist,

1089 cÚ¡ 
dœeùiÚ
,

1090 cÚ¡ 
idx
) {

1091 
quickli¡EÁry
 
’Œy
;

1093 ià(
	`quickli¡Index
(
quickli¡
, 
idx
, &
’Œy
)) {

1094 
quickli¡I‹r
 *
ba£
 = 
	`quickli¡G‘I‹¿tÜ
(
quickli¡
, 
dœeùiÚ
);

1095 
ba£
->
zi
 = 
NULL
;

1096 
ba£
->
cu¼’t
 = 
’Œy
.
node
;

1097 
ba£
->
off£t
 = 
’Œy
.offset;

1098  
ba£
;

1100  
NULL
;

1102 
	}
}

1106 
	$quickli¡R–—£I‹¿tÜ
(
quickli¡I‹r
 *
™”
) {

1107 ià(
™”
->
cu¼’t
)

1108 
	`quickli¡Com´ess
(
™”
->
quickli¡
, i‹r->
cu¼’t
);

1110 
	`zä“
(
™”
);

1111 
	}
}

1134 
	$quickli¡Next
(
quickli¡I‹r
 *
™”
, 
quickli¡EÁry
 *
’Œy
) {

1135 
	`š™EÁry
(
’Œy
);

1137 ià(!
™”
) {

1138 
	`D
("Returning because‚o iter!");

1142 
’Œy
->
quickli¡
 = 
™”
->quicklist;

1143 
’Œy
->
node
 = 
™”
->
cu¼’t
;

1145 ià(!
™”
->
cu¼’t
) {

1146 
	`D
("Returning because current‚ode is NULL")

1150 *(*
ÃxtFn
)(*, *èğ
NULL
;

1151 
off£t_upd©e
 = 0;

1153 ià(!
™”
->
zi
) {

1155 
	`quickli¡Decom´essNodeFÜU£
(
™”
->
cu¼’t
);

1156 
™”
->
zi
 = 
	`zli¡Index
(™”->
cu¼’t
->
zl
, i‹r->
off£t
);

1159 ià(
™”
->
dœeùiÚ
 =ğ
AL_START_HEAD
) {

1160 
ÃxtFn
 = 
zli¡Next
;

1161 
off£t_upd©e
 = 1;

1162 } ià(
™”
->
dœeùiÚ
 =ğ
AL_START_TAIL
) {

1163 
ÃxtFn
 = 
zli¡P»v
;

1164 
off£t_upd©e
 = -1;

1166 
™”
->
zi
 = 
	`ÃxtFn
(™”->
cu¼’t
->
zl
, iter->zi);

1167 
™”
->
off£t
 +ğ
off£t_upd©e
;

1170 
’Œy
->
zi
 = 
™”
->zi;

1171 
’Œy
->
off£t
 = 
™”
->offset;

1173 ià(
™”
->
zi
) {

1175 
	`zli¡G‘
(
’Œy
->
zi
, &’Œy->
v®ue
, &’Œy->
sz
, &’Œy->
lÚgv®
);

1180 
	`quickli¡Com´ess
(
™”
->
quickli¡
, i‹r->
cu¼’t
);

1181 ià(
™”
->
dœeùiÚ
 =ğ
AL_START_HEAD
) {

1183 
	`D
("Jumpingo start of‚ext‚ode");

1184 
™”
->
cu¼’t
 = i‹r->cu¼’t->
Ãxt
;

1185 
™”
->
off£t
 = 0;

1186 } ià(
™”
->
dœeùiÚ
 =ğ
AL_START_TAIL
) {

1188 
	`D
("Jumpingoƒnd of…revious‚ode");

1189 
™”
->
cu¼’t
 = i‹r->cu¼’t->
´ev
;

1190 
™”
->
off£t
 = -1;

1192 
™”
->
zi
 = 
NULL
;

1193  
	`quickli¡Next
(
™”
, 
’Œy
);

1195 
	}
}

1203 
quickli¡
 *
	$quickli¡Dup
(
quickli¡
 *
Üig
) {

1204 
quickli¡
 *
cİy
;

1206 
cİy
 = 
	`quickli¡New
(
Üig
->
fl
, orig->
com´ess
);

1208 
quickli¡Node
 *
cu¼’t
 = 
Üig
->
h—d
; current;

1209 
cu¼’t
 = cu¼’t->
Ãxt
) {

1210 
quickli¡Node
 *
node
 = 
	`quickli¡C»©eNode
();

1212 ià(
cu¼’t
->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_LZF
) {

1213 
quickli¡LZF
 *
lzf
 = (quickli¡LZF *)
cu¼’t
->
zl
;

1214 
size_t
 
lzf_sz
 = (*
lzf
è+†zf->
sz
;

1215 
node
->
zl
 = 
	`zm®loc
(
lzf_sz
);

1216 
	`memıy
(
node
->
zl
, 
cu¼’t
->zl, 
lzf_sz
);

1217 } ià(
cu¼’t
->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_RAW
) {

1218 
node
->
zl
 = 
	`zm®loc
(
cu¼’t
->
sz
);

1219 
	`memıy
(
node
->
zl
, 
cu¼’t
->zl, cu¼’t->
sz
);

1222 
node
->
couÁ
 = 
cu¼’t
->count;

1223 
cİy
->
couÁ
 +ğ
node
->count;

1224 
node
->
sz
 = 
cu¼’t
->sz;

1225 
node
->
’codšg
 = 
cu¼’t
->encoding;

1227 
	`_quickli¡In£¹NodeAá”
(
cİy
, cİy->

, 
node
);

1231  
cİy
;

1232 
	}
}

1242 
	$quickli¡Index
(cÚ¡ 
quickli¡
 *quickli¡, cÚ¡ 
idx
,

1243 
quickli¡EÁry
 *
’Œy
) {

1244 
quickli¡Node
 *
n
;

1245 
accum
 = 0;

1246 
šdex
;

1247 
fÜw¬d
 = 
idx
 < 0 ? 0 : 1;

1249 
	`š™EÁry
(
’Œy
);

1250 
’Œy
->
quickli¡
 = quicklist;

1252 ià(!
fÜw¬d
) {

1253 
šdex
 = (-
idx
) - 1;

1254 
n
 = 
quickli¡
->

;

1256 
šdex
 = 
idx
;

1257 
n
 = 
quickli¡
->
h—d
;

1260 ià(
šdex
 >ğ
quickli¡
->
couÁ
)

1263 
	`lik–y
(
n
)) {

1264 ià((
accum
 + 
n
->
couÁ
è> 
šdex
) {

1267 
	`D
("Skpšg ov” (%pè%u‡ˆaccum %Îd", (*)
n
,‚->
couÁ
,

1268 
accum
);

1269 
accum
 +ğ
n
->
couÁ
;

1270 
n
 = 
fÜw¬d
 ?‚->
Ãxt
 :‚->
´ev
;

1274 ià(!
n
)

1277 
	`D
("Found‚ode: %°©‡ccum %Îu, idx %Îu, sub+ %Îu, sub- %Îu", (*)
n
,

1278 
accum
, 
šdex
, index -‡ccum, (-index) - 1 +‡ccum);

1280 
’Œy
->
node
 = 
n
;

1281 ià(
fÜw¬d
) {

1283 
’Œy
->
off£t
 = 
šdex
 - 
accum
;

1287 
’Œy
->
off£t
 = (-
šdex
è- 1 + 
accum
;

1290 
	`quickli¡Decom´essNodeFÜU£
(
’Œy
->
node
);

1291 
’Œy
->
zi
 = 
	`zli¡Index
ÓÁry->
node
->
zl
,ƒÁry->
off£t
);

1292 
	`zli¡G‘
(
’Œy
->
zi
, &’Œy->
v®ue
, &’Œy->
sz
, &’Œy->
lÚgv®
);

1296 
	}
}

1299 
	$quickli¡RÙ©e
(
quickli¡
 *quicklist) {

1300 ià(
quickli¡
->
couÁ
 <= 1)

1304 *
p
 = 
	`zli¡Index
(
quickli¡
->

->
zl
, -1);

1305 *
v®ue
;

1306 
lÚgv®
;

1307 
sz
;

1308 
lÚg¡r
[32] = {0};

1309 
	`zli¡G‘
(
p
, &
v®ue
, &
sz
, &
lÚgv®
);

1312 ià(!
v®ue
) {

1314 
sz
 = 
	`Î2¡ršg
(
lÚg¡r
, ÖÚg¡r), 
lÚgv®
);

1315 
v®ue
 = (*)
lÚg¡r
;

1319 
	`quickli¡PushH—d
(
quickli¡
, 
v®ue
, 
sz
);

1324 ià(
quickli¡
->
Ën
 == 1) {

1325 
p
 = 
	`zli¡Index
(
quickli¡
->

->
zl
, -1);

1329 
	`quickli¡D–Index
(
quickli¡
, quickli¡->

, &
p
);

1330 
	}
}

1341 
	$quickli¡PİCu¡om
(
quickli¡
 *quickli¡, 
wh”e
, **
d©a
,

1342 *
sz
, *
sv®
,

1343 *(*
§v”
)(*
d©a
, 
sz
)) {

1344 *
p
;

1345 *
v¡r
;

1346 
vËn
;

1347 
vlÚg
;

1348 
pos
 = (
wh”e
 =ğ
QUICKLIST_HEAD
) ? 0 : -1;

1350 ià(
quickli¡
->
couÁ
 == 0)

1353 ià(
d©a
)

1354 *
d©a
 = 
NULL
;

1355 ià(
sz
)

1356 *
sz
 = 0;

1357 ià(
sv®
)

1358 *
sv®
 = -123456789;

1360 
quickli¡Node
 *
node
;

1361 ià(
wh”e
 =ğ
QUICKLIST_HEAD
 && 
quickli¡
->
h—d
) {

1362 
node
 = 
quickli¡
->
h—d
;

1363 } ià(
wh”e
 =ğ
QUICKLIST_TAIL
 && 
quickli¡
->

) {

1364 
node
 = 
quickli¡
->

;

1369 
p
 = 
	`zli¡Index
(
node
->
zl
, 
pos
);

1370 ià(
	`zli¡G‘
(
p
, &
v¡r
, &
vËn
, &
vlÚg
)) {

1371 ià(
v¡r
) {

1372 ià(
d©a
)

1373 *
d©a
 = 
	`§v”
(
v¡r
, 
vËn
);

1374 ià(
sz
)

1375 *
sz
 = 
vËn
;

1377 ià(
d©a
)

1378 *
d©a
 = 
NULL
;

1379 ià(
sv®
)

1380 *
sv®
 = 
vlÚg
;

1382 
	`quickli¡D–Index
(
quickli¡
, 
node
, &
p
);

1386 
	}
}

1389 
REDIS_STATIC
 *
	$_quickli¡Sav”
(*
d©a
, 
sz
) {

1390 *
v¡r
;

1391 ià(
d©a
) {

1392 
v¡r
 = 
	`zm®loc
(
sz
);

1393 
	`memıy
(
v¡r
, 
d©a
, 
sz
);

1394  
v¡r
;

1396  
NULL
;

1397 
	}
}

1402 
	$quickli¡Pİ
(
quickli¡
 *quickli¡, 
wh”e
, **
d©a
,

1403 *
sz
, *
¦Úg
) {

1404 *
v¡r
;

1405 
vËn
;

1406 
vlÚg
;

1407 ià(
quickli¡
->
couÁ
 == 0)

1409 
»t
 = 
	`quickli¡PİCu¡om
(
quickli¡
, 
wh”e
, &
v¡r
, &
vËn
, &
vlÚg
,

1410 
_quickli¡Sav”
);

1411 ià(
d©a
)

1412 *
d©a
 = 
v¡r
;

1413 ià(
¦Úg
)

1414 *
¦Úg
 = 
vlÚg
;

1415 ià(
sz
)

1416 *
sz
 = 
vËn
;

1417  
»t
;

1418 
	}
}

1421 
	$quickli¡Push
(
quickli¡
 *quickli¡, *
v®ue
, cÚ¡ 
size_t
 
sz
,

1422 
wh”e
) {

1423 ià(
wh”e
 =ğ
QUICKLIST_HEAD
) {

1424 
	`quickli¡PushH—d
(
quickli¡
, 
v®ue
, 
sz
);

1425 } ià(
wh”e
 =ğ
QUICKLIST_TAIL
) {

1426 
	`quickli¡PushTa
(
quickli¡
, 
v®ue
, 
sz
);

1428 
	}
}

1438 
	$quickli¡Bookm¬kC»©e
(
quickli¡
 **
ql_»f
, cÚ¡ *
Çme
, 
quickli¡Node
 *
node
) {

1439 
quickli¡
 *
ql
 = *
ql_»f
;

1440 ià(
ql
->
bookm¬k_couÁ
 >ğ
QL_MAX_BM
)

1442 
quickli¡Bookm¬k
 *
bm
 = 
	`_quickli¡Bookm¬kFšdByName
(
ql
, 
Çme
);

1443 ià(
bm
) {

1444 
bm
->
node
 =‚ode;

1447 
ql
 = 
	`z»®loc
(ql, (
quickli¡
è+ (ql->
bookm¬k_couÁ
+1è* (
quickli¡Bookm¬k
));

1448 *
ql_»f
 = 
ql
;

1449 
ql
->
bookm¬ks
[ql->
bookm¬k_couÁ
].
node
 =‚ode;

1450 
ql
->
bookm¬ks
[ql->
bookm¬k_couÁ
].
Çme
 = 
	`z¡rdup
(name);

1451 
ql
->
bookm¬k_couÁ
++;

1453 
	}
}

1458 
quickli¡Node
 *
	$quickli¡Bookm¬kFšd
(
quickli¡
 *
ql
, cÚ¡ *
Çme
) {

1459 
quickli¡Bookm¬k
 *
bm
 = 
	`_quickli¡Bookm¬kFšdByName
(
ql
, 
Çme
);

1460 ià(!
bm
è 
NULL
;

1461  
bm
->
node
;

1462 
	}
}

1467 
	$quickli¡Bookm¬kD–‘e
(
quickli¡
 *
ql
, cÚ¡ *
Çme
) {

1468 
quickli¡Bookm¬k
 *
bm
 = 
	`_quickli¡Bookm¬kFšdByName
(
ql
, 
Çme
);

1469 ià(!
bm
)

1471 
	`_quickli¡Bookm¬kD–‘e
(
ql
, 
bm
);

1473 
	}
}

1475 
quickli¡Bookm¬k
 *
	$_quickli¡Bookm¬kFšdByName
(
quickli¡
 *
ql
, cÚ¡ *
Çme
) {

1476 
i
;

1477 
i
=0; i<
ql
->
bookm¬k_couÁ
; i++) {

1478 ià(!
	`¡rcmp
(
ql
->
bookm¬ks
[
i
].
Çme
,‚ame)) {

1479  &
ql
->
bookm¬ks
[
i
];

1482  
NULL
;

1483 
	}
}

1485 
quickli¡Bookm¬k
 *
	$_quickli¡Bookm¬kFšdByNode
(
quickli¡
 *
ql
, 
quickli¡Node
 *
node
) {

1486 
i
;

1487 
i
=0; i<
ql
->
bookm¬k_couÁ
; i++) {

1488 ià(
ql
->
bookm¬ks
[
i
].
node
 ==‚ode) {

1489  &
ql
->
bookm¬ks
[
i
];

1492  
NULL
;

1493 
	}
}

1495 
	$_quickli¡Bookm¬kD–‘e
(
quickli¡
 *
ql
, 
quickli¡Bookm¬k
 *
bm
) {

1496 
šdex
 = 
bm
 - 
ql
->
bookm¬ks
;

1497 
	`zä“
(
bm
->
Çme
);

1498 
ql
->
bookm¬k_couÁ
--;

1499 
	`memmove
(
bm
, bm+1, (
ql
->
bookm¬k_couÁ
 - 
šdex
)* (*bm));

1502 
	}
}

1504 
	$quickli¡Bookm¬ksCË¬
(
quickli¡
 *
ql
) {

1505 
ql
->
bookm¬k_couÁ
)

1506 
	`zä“
(
ql
->
bookm¬ks
[--ql->
bookm¬k_couÁ
].
Çme
);

1509 
	}
}

1512 #ifdeà
REDIS_TEST


1513 
	~<¡dšt.h
>

1514 
	~<sys/time.h
>

1516 
	#as£¹
(
_e
) \

1518 ià(!(
_e
)) { \

1519 
	`´štf
("\n\n=== ASSERTION FAILED ===\n"); \

1520 
	`´štf
("==> %s:%d '%s' i nÙrue\n", 
__FILE__
, 
__LINE__
, #_e); \

1521 
”r
++; \

1523 } 0)

	)

1525 
	#y–l
(
¡r
, ...è
	`´štf
("ERROR! " sŒ "\n\n", 
__VA_ARGS__
)

	)

1527 
	#OK
 
	`´štf
("\tOK\n")

	)

1529 
	#ERROR
 \

1531 
	`´štf
("\tERROR!\n"); \

1532 
”r
++; \

1533 } 0)

	)

1535 
	#ERR
(
x
, ...) \

1537 
	`´štf
("%s:%s:%d:\t", 
__FILE__
, 
__FUNCTION__
, 
__LINE__
); \

1538 
	`´štf
("ERROR! " 
x
 "\n", 
__VA_ARGS__
); \

1539 
”r
++; \

1540 } 0)

	)

1542 
	#TEST
(
Çme
è
	`´štf
("‹¡ â€” %s\n",‚ame);

	)

1543 
	#TEST_DESC
(
Çme
, ...è
	`´štf
("‹¡ â€” "‚am"\n", 
__VA_ARGS__
);

	)

1545 
	#QL_TEST_VERBOSE
 0

	)

1547 
	#UNUSED
(
x
è()(x)

	)

1548 
	$ql_šfo
(
quickli¡
 *
ql
) {

1549 #ià
QL_TEST_VERBOSE


1550 
	`´štf
("CÚš”†’gth: %lu\n", 
ql
->
Ën
);

1551 
	`´štf
("CÚš” size: %lu\n", 
ql
->
couÁ
);

1552 ià(
ql
->
h—d
)

1553 
	`´štf
("\t(zsizh—d: %d)\n", 
	`zli¡L’
(
ql
->
h—d
->
zl
));

1554 ià(
ql
->

)

1555 
	`´štf
("\t(zsiz: %d)\n", 
	`zli¡L’
(
ql
->

->
zl
));

1556 
	`´štf
("\n");

1558 
	`UNUSED
(
ql
);

1560 
	}
}

1563 
	$u¡ime
() {

1564 
timev®
 
tv
;

1565 
u¡
;

1567 
	`g‘timeofday
(&
tv
, 
NULL
);

1568 
u¡
 = (()
tv
.
tv_£c
) * 1000000;

1569 
u¡
 +ğ
tv
.
tv_u£c
;

1570  
u¡
;

1571 
	}
}

1574 
	$m¡ime
(è{  
	`u¡ime
(è/ 1000; 
	}
}

1580 
	$_™½ršŒ
(
quickli¡
 *
ql
, 
´št
, 
fÜw¬d
) {

1581 
quickli¡I‹r
 *
™”
 =

1582 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
fÜw¬d
 ? 
AL_START_HEAD
 : 
AL_START_TAIL
);

1583 
quickli¡EÁry
 
’Œy
;

1584 
i
 = 0;

1585 
p
 = 0;

1586 
quickli¡Node
 *
´ev
 = 
NULL
;

1587 
	`quickli¡Next
(
™”
, &
’Œy
)) {

1588 ià(
’Œy
.
node
 !ğ
´ev
) {

1590 
p
++;

1591 
´ev
 = 
’Œy
.
node
;

1593 ià(
´št
) {

1594 
	`´štf
("[%3d (%2d)]: [%.*s] (%Îd)\n", 
i
, 
p
, 
’Œy
.
sz
,

1595 (*)
’Œy
.
v®ue
,ƒÁry.
lÚgv®
);

1597 
i
++;

1599 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

1600  
i
;

1601 
	}
}

1602 
	$™½ršŒ
(
quickli¡
 *
ql
, 
´št
) {

1603  
	`_™½ršŒ
(
ql
, 
´št
, 1);

1604 
	}
}

1606 
	$™½ršŒ_»v
(
quickli¡
 *
ql
, 
´št
) {

1607  
	`_™½ršŒ
(
ql
, 
´št
, 0);

1608 
	}
}

1610 
	#ql_v”ify
(
a
, 
b
, 
c
, 
d
, 
e
) \

1612 
”r
 +ğ
	`_ql_v”ify
((
a
), (
b
), (
c
), (
d
), (
e
)); \

1613 } 0)

	)

1616 
	$_ql_v”ify
(
quickli¡
 *
ql
, 
ušt32_t
 
Ën
, ušt32_ˆ
couÁ
,

1617 
ušt32_t
 
h—d_couÁ
, ušt32_ˆ
_couÁ
) {

1618 
”rÜs
 = 0;

1620 
	`ql_šfo
(
ql
);

1621 ià(
Ën
 !ğ
ql
->len) {

1622 
	`y–l
("quickli¡†’gth wrÚg:ƒx³ùed %d, gÙ %u", 
Ën
, 
ql
->len);

1623 
”rÜs
++;

1626 ià(
couÁ
 !ğ
ql
->count) {

1627 
	`y–l
("quickli¡ couÁ wrÚg:ƒx³ùed %d, gÙ %lu", 
couÁ
, 
ql
->count);

1628 
”rÜs
++;

1631 
loİr
 = 
	`™½ršŒ
(
ql
, 0);

1632 ià(
loİr
 !ğ()
ql
->
couÁ
) {

1633 
	`y–l
("quicklist cached count‚ot match‡ctual count:ƒxpected %lu, got "

1635 
ql
->
couÁ
, 
loİr
);

1636 
”rÜs
++;

1639 
¾oİr
 = 
	`™½ršŒ_»v
(
ql
, 0);

1640 ià(
loİr
 !ğ
¾oİr
) {

1641 
	`y–l
("quicklist has different forward counthan„everse count! "

1643 
loİr
, 
¾oİr
);

1644 
”rÜs
++;

1647 ià(
ql
->
Ën
 =ğ0 && !
”rÜs
) {

1648 
OK
;

1649  
”rÜs
;

1652 ià(
ql
->
h—d
 && 
h—d_couÁ
 !ğql->h—d->
couÁ
 &&

1653 
h—d_couÁ
 !ğ
	`zli¡L’
(
ql
->
h—d
->
zl
)) {

1654 
	`y–l
("quicklist head count wrong:ƒxpected %d, "

1656 
h—d_couÁ
, 
ql
->
h—d
->
couÁ
, 
	`zli¡L’
(ql->h—d->
zl
));

1657 
”rÜs
++;

1660 ià(
ql
->

 && 
_couÁ
 !ğql->->
couÁ
 &&

1661 
_couÁ
 !ğ
	`zli¡L’
(
ql
->

->
zl
)) {

1662 
	`y–l
("quicklistail count wrong:ƒxpected %d, "

1664 
_couÁ
, 
ql
->

->
couÁ
, 
	`zli¡L’
(ql->->
zl
));

1665 
”rÜs
++;

1668 ià(
	`quickli¡AÎowsCom´essiÚ
(
ql
)) {

1669 
quickli¡Node
 *
node
 = 
ql
->
h—d
;

1670 
low_¿w
 = 
ql
->
com´ess
;

1671 
high_¿w
 = 
ql
->
Ën
 - ql->
com´ess
;

1673 
©
 = 0;‡ˆ< 
ql
->
Ën
;‡t++, 
node
 =‚ode->
Ãxt
) {

1674 ià(
node
 && (
©
 < 
low_¿w
 ||‡ˆ>ğ
high_¿w
)) {

1675 ià(
node
->
’codšg
 !ğ
QUICKLIST_NODE_ENCODING_RAW
) {

1676 
	`y–l
("Incorrect compression:‚ode %d is "

1679 
©
, 
ql
->
com´ess
, 
low_¿w
, 
high_¿w
, ql->
Ën
, 
node
->
sz
,

1680 
node
->
»com´ess
);

1681 
”rÜs
++;

1684 ià(
node
->
’codšg
 !ğ
QUICKLIST_NODE_ENCODING_LZF
 &&

1685 !
node
->
©‹m±ed_com´ess
) {

1686 
	`y–l
("Incorrect‚on-compression:‚ode %d is NOT "

1689 
©
, 
ql
->
com´ess
, 
low_¿w
, 
high_¿w
, ql->
Ën
, 
node
->
sz
,

1690 
node
->
»com´ess
,‚ode->
©‹m±ed_com´ess
);

1691 
”rÜs
++;

1697 ià(!
”rÜs
)

1698 
OK
;

1699  
”rÜs
;

1700 
	}
}

1703 *
	$g’¡r
(*
´efix
, 
i
) {

1704 
»suÉ
[64] = {0};

1705 
	`¢´štf
(
»suÉ
, ÔesuÉ), "%s%d", 
´efix
, 
i
);

1706  
»suÉ
;

1707 
	}
}

1710 
	$quickli¡Te¡
(
¬gc
, *
¬gv
[]) {

1711 
	`UNUSED
(
¬gc
);

1712 
	`UNUSED
(
¬gv
);

1714 
”r
 = 0;

1715 
İtimize_¡¬t
 =

1716 -()((
İtimiz©iÚ_Ëv–
) / (*optimization_level));

1718 
	`´štf
("S¹šg o±imiz©iÚ off£ˆ©: %d\n", 
İtimize_¡¬t
);

1720 
İtiÚs
[] = {0, 1, 2, 3, 4, 5, 6, 10};

1721 
size_t
 
İtiÚ_couÁ
 = (
İtiÚs
) / (*options);

1722 
ruÁime
[
İtiÚ_couÁ
];

1724 
_i
 = 0; _˜< ()
İtiÚ_couÁ
; _i++) {

1725 
	`´štf
("Te¡šg O±iÚ %d\n", 
İtiÚs
[
_i
]);

1726 
¡¬t
 = 
	`m¡ime
();

1728 
	`TEST
("create†ist") {

1729 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1730 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1731 
	`quickli¡R–—£
(
ql
);

1734 
	`TEST
("addoail ofƒmpty†ist") {

1735 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1736 
	`quickli¡PushTa
(
ql
, "hello", 6);

1738 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

1739 
	`quickli¡R–—£
(
ql
);

1742 
	`TEST
("addo head ofƒmpty†ist") {

1743 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1744 
	`quickli¡PushH—d
(
ql
, "hello", 6);

1746 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

1747 
	`quickli¡R–—£
(
ql
);

1750 
f
 = 
İtimize_¡¬t
; f < 32; f++) {

1751 
	`TEST_DESC
("addØ 5x‡ˆfÈ%d‡ˆcom´es %d", 
f
,

1752 
İtiÚs
[
_i
]) {

1753 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1754 
i
 = 0; i < 5; i++)

1755 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1756 ià(
ql
->
couÁ
 != 5)

1757 
ERROR
;

1758 ià(
f
 == 32)

1759 
	`ql_v”ify
(
ql
, 1, 5, 5, 5);

1760 
	`quickli¡R–—£
(
ql
);

1764 
f
 = 
İtimize_¡¬t
; f < 32; f++) {

1765 
	`TEST_DESC
("addØh—d 5x‡ˆfÈ%d‡ˆcom´es %d", 
f
,

1766 
İtiÚs
[
_i
]) {

1767 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1768 
i
 = 0; i < 5; i++)

1769 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1770 ià(
ql
->
couÁ
 != 5)

1771 
ERROR
;

1772 ià(
f
 == 32)

1773 
	`ql_v”ify
(
ql
, 1, 5, 5, 5);

1774 
	`quickli¡R–—£
(
ql
);

1778 
f
 = 
İtimize_¡¬t
; f < 512; f++) {

1779 
	`TEST_DESC
("addØ 500x‡ˆfÈ%d‡ˆcom´es %d", 
f
,

1780 
İtiÚs
[
_i
]) {

1781 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1782 
i
 = 0; i < 500; i++)

1783 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
), 64);

1784 ià(
ql
->
couÁ
 != 500)

1785 
ERROR
;

1786 ià(
f
 == 32)

1787 
	`ql_v”ify
(
ql
, 16, 500, 32, 20);

1788 
	`quickli¡R–—£
(
ql
);

1792 
f
 = 
İtimize_¡¬t
; f < 512; f++) {

1793 
	`TEST_DESC
("addØh—d 500x‡ˆfÈ%d‡ˆcom´es %d", 
f
,

1794 
İtiÚs
[
_i
]) {

1795 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1796 
i
 = 0; i < 500; i++)

1797 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1798 ià(
ql
->
couÁ
 != 500)

1799 
ERROR
;

1800 ià(
f
 == 32)

1801 
	`ql_v”ify
(
ql
, 16, 500, 20, 32);

1802 
	`quickli¡R–—£
(
ql
);

1806 
	`TEST
("rotateƒmpty") {

1807 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1808 
	`quickli¡RÙ©e
(
ql
);

1809 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1810 
	`quickli¡R–—£
(
ql
);

1813 
f
 = 
İtimize_¡¬t
; f < 32; f++) {

1814 
	`TEST
("rotate one val once") {

1815 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1816 
	`quickli¡PushH—d
(
ql
, "hello", 6);

1817 
	`quickli¡RÙ©e
(
ql
);

1820 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

1821 
	`quickli¡R–—£
(
ql
);

1825 
f
 = 
İtimize_¡¬t
; f < 3; f++) {

1826 
	`TEST_DESC
("rÙ©500 v® 5000ime © fÈ%d‡ˆcom´es %d", 
f
,

1827 
İtiÚs
[
_i
]) {

1828 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

1829 
	`quickli¡PushH—d
(
ql
, "900", 3);

1830 
	`quickli¡PushH—d
(
ql
, "7000", 4);

1831 
	`quickli¡PushH—d
(
ql
, "-1200", 5);

1832 
	`quickli¡PushH—d
(
ql
, "42", 2);

1833 
i
 = 0; i < 500; i++)

1834 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 64);

1835 
	`ql_šfo
(
ql
);

1836 
i
 = 0; i < 5000; i++) {

1837 
	`ql_šfo
(
ql
);

1838 
	`quickli¡RÙ©e
(
ql
);

1840 ià(
f
 == 1)

1841 
	`ql_v”ify
(
ql
, 504, 504, 1, 1);

1842 ià(
f
 == 2)

1843 
	`ql_v”ify
(
ql
, 252, 504, 2, 2);

1844 ià(
f
 == 32)

1845 
	`ql_v”ify
(
ql
, 16, 504, 32, 24);

1846 
	`quickli¡R–—£
(
ql
);

1850 
	`TEST
("popƒmpty") {

1851 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1852 
	`quickli¡Pİ
(
ql
, 
QUICKLIST_HEAD
, 
NULL
, NULL, NULL);

1853 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1854 
	`quickli¡R–—£
(
ql
);

1857 
	`TEST
("pop 1 string from 1") {

1858 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1859 *
pİuÏ‹
 = 
	`g’¡r
("hello", 331);

1860 
	`quickli¡PushH—d
(
ql
, 
pİuÏ‹
, 32);

1861 *
d©a
;

1862 
sz
;

1863 
lv
;

1864 
	`ql_šfo
(
ql
);

1865 
	`quickli¡Pİ
(
ql
, 
QUICKLIST_HEAD
, &
d©a
, &
sz
, &
lv
);

1866 
	`as£¹
(
d©a
 !ğ
NULL
);

1867 
	`as£¹
(
sz
 == 32);

1868 ià(
	`¡rcmp
(
pİuÏ‹
, (*)
d©a
))

1869 
	`ERR
("Pİ'd v®u(%.*sèdidn'ˆequ® origš® v®u(%s)", 
sz
,

1870 
d©a
, 
pİuÏ‹
);

1871 
	`zä“
(
d©a
);

1872 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1873 
	`quickli¡R–—£
(
ql
);

1876 
	`TEST
("pop head 1‚umber from 1") {

1877 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1878 
	`quickli¡PushH—d
(
ql
, "55513", 5);

1879 *
d©a
;

1880 
sz
;

1881 
lv
;

1882 
	`ql_šfo
(
ql
);

1883 
	`quickli¡Pİ
(
ql
, 
QUICKLIST_HEAD
, &
d©a
, &
sz
, &
lv
);

1884 
	`as£¹
(
d©a
 =ğ
NULL
);

1885 
	`as£¹
(
lv
 == 55513);

1886 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1887 
	`quickli¡R–—£
(
ql
);

1890 
	`TEST
("pop head 500 from 500") {

1891 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1892 
i
 = 0; i < 500; i++)

1893 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1894 
	`ql_šfo
(
ql
);

1895 
i
 = 0; i < 500; i++) {

1896 *
d©a
;

1897 
sz
;

1898 
lv
;

1899 
»t
 = 
	`quickli¡Pİ
(
ql
, 
QUICKLIST_HEAD
, &
d©a
, &
sz
, &
lv
);

1900 
	`as£¹
(
»t
 == 1);

1901 
	`as£¹
(
d©a
 !ğ
NULL
);

1902 
	`as£¹
(
sz
 == 32);

1903 ià(
	`¡rcmp
(
	`g’¡r
("h–lo", 499 - 
i
), (*)
d©a
))

1904 
	`ERR
("Pop'd value (%.*s) didn'tƒqual original value (%s)",

1905 
sz
, 
d©a
, 
	`g’¡r
("h–lo", 499 - 
i
));

1906 
	`zä“
(
d©a
);

1908 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1909 
	`quickli¡R–—£
(
ql
);

1912 
	`TEST
("pop head 5000 from 500") {

1913 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1914 
i
 = 0; i < 500; i++)

1915 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1916 
i
 = 0; i < 5000; i++) {

1917 *
d©a
;

1918 
sz
;

1919 
lv
;

1920 
»t
 = 
	`quickli¡Pİ
(
ql
, 
QUICKLIST_HEAD
, &
d©a
, &
sz
, &
lv
);

1921 ià(
i
 < 500) {

1922 
	`as£¹
(
»t
 == 1);

1923 
	`as£¹
(
d©a
 !ğ
NULL
);

1924 
	`as£¹
(
sz
 == 32);

1925 ià(
	`¡rcmp
(
	`g’¡r
("h–lo", 499 - 
i
), (*)
d©a
))

1926 
	`ERR
("Pop'd value (%.*s) didn'tƒqual original value "

1928 
sz
, 
d©a
, 
	`g’¡r
("h–lo", 499 - 
i
));

1929 
	`zä“
(
d©a
);

1931 
	`as£¹
(
»t
 == 0);

1934 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

1935 
	`quickli¡R–—£
(
ql
);

1938 
	`TEST
("iterate forward over 500†ist") {

1939 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1940 
	`quickli¡S‘Fl
(
ql
, 32);

1941 
i
 = 0; i < 500; i++)

1942 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1943 
quickli¡I‹r
 *
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_HEAD
);

1944 
quickli¡EÁry
 
’Œy
;

1945 
i
 = 499, 
couÁ
 = 0;

1946 
	`quickli¡Next
(
™”
, &
’Œy
)) {

1947 *
h
 = 
	`g’¡r
("h–lo", 
i
);

1948 ià(
	`¡rcmp
((*)
’Œy
.
v®ue
, 
h
))

1949 
	`ERR
("value [%s] didn't match [%s]‡t…osition %d",

1950 
’Œy
.
v®ue
, 
h
, 
i
);

1951 
i
--;

1952 
couÁ
++;

1954 ià(
couÁ
 != 500)

1955 
	`ERR
("Didn'ˆ™”©ov”ƒxaùly 500ƒËm’t (%d)", 
i
);

1956 
	`ql_v”ify
(
ql
, 16, 500, 20, 32);

1957 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

1958 
	`quickli¡R–—£
(
ql
);

1961 
	`TEST
("iterate„everse over 500†ist") {

1962 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1963 
	`quickli¡S‘Fl
(
ql
, 32);

1964 
i
 = 0; i < 500; i++)

1965 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

1966 
quickli¡I‹r
 *
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_TAIL
);

1967 
quickli¡EÁry
 
’Œy
;

1968 
i
 = 0;

1969 
	`quickli¡Next
(
™”
, &
’Œy
)) {

1970 *
h
 = 
	`g’¡r
("h–lo", 
i
);

1971 ià(
	`¡rcmp
((*)
’Œy
.
v®ue
, 
h
))

1972 
	`ERR
("value [%s] didn't match [%s]‡t…osition %d",

1973 
’Œy
.
v®ue
, 
h
, 
i
);

1974 
i
++;

1976 ià(
i
 != 500)

1977 
	`ERR
("Didn'ˆ™”©ov”ƒxaùly 500ƒËm’t (%d)", 
i
);

1978 
	`ql_v”ify
(
ql
, 16, 500, 20, 32);

1979 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

1980 
	`quickli¡R–—£
(
ql
);

1983 
	`TEST
("insert before with 0ƒlements") {

1984 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1985 
quickli¡EÁry
 
’Œy
;

1986 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

1987 
	`quickli¡In£¹BefÜe
(
ql
, &
’Œy
, "abc", 4);

1988 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

1989 
	`quickli¡R–—£
(
ql
);

1992 
	`TEST
("insert‡fter with 0ƒlements") {

1993 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

1994 
quickli¡EÁry
 
’Œy
;

1995 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

1996 
	`quickli¡In£¹Aá”
(
ql
, &
’Œy
, "abc", 4);

1997 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

1998 
	`quickli¡R–—£
(
ql
);

2001 
	`TEST
("insert‡fter 1ƒlement") {

2002 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2003 
	`quickli¡PushH—d
(
ql
, "hello", 6);

2004 
quickli¡EÁry
 
’Œy
;

2005 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2006 
	`quickli¡In£¹Aá”
(
ql
, &
’Œy
, "abc", 4);

2007 
	`ql_v”ify
(
ql
, 1, 2, 2, 2);

2008 
	`quickli¡R–—£
(
ql
);

2011 
	`TEST
("insert before 1ƒlement") {

2012 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2013 
	`quickli¡PushH—d
(
ql
, "hello", 6);

2014 
quickli¡EÁry
 
’Œy
;

2015 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2016 
	`quickli¡In£¹Aá”
(
ql
, &
’Œy
, "abc", 4);

2017 
	`ql_v”ify
(
ql
, 1, 2, 2, 2);

2018 
	`quickli¡R–—£
(
ql
);

2021 
f
 = 
İtimize_¡¬t
; f < 12; f++) {

2022 
	`TEST_DESC
("insert once inƒlements while iterating‡t fill %d‡t "

2024 
f
, 
İtiÚs
[
_i
]) {

2025 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2026 
	`quickli¡PushTa
(
ql
, "abc", 3);

2027 
	`quickli¡S‘Fl
(
ql
, 1);

2028 
	`quickli¡PushTa
(
ql
, "def", 3);

2029 
	`quickli¡S‘Fl
(
ql
, 
f
);

2030 
	`quickli¡PushTa
(
ql
, "bob", 3);

2031 
	`quickli¡PushTa
(
ql
, "foo", 3);

2032 
	`quickli¡PushTa
(
ql
, "zoo", 3);

2034 
	`™½ršŒ
(
ql
, 0);

2036 
quickli¡I‹r
 *
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_HEAD
);

2037 
quickli¡EÁry
 
’Œy
;

2038 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2039 ià(!
	`¡ºcmp
((*)
’Œy
.
v®ue
, "bob", 3)) {

2041 
	`quickli¡In£¹BefÜe
(
ql
, &
’Œy
, "bar", 3);

2045 
	`™½ršŒ
(
ql
, 0);

2048 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2049 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "abc", 3))

2050 
	`ERR
("V®u0 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2051 
’Œy
.
v®ue
);

2052 
	`quickli¡Index
(
ql
, 1, &
’Œy
);

2053 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "def", 3))

2054 
	`ERR
("V®u1 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2055 
’Œy
.
v®ue
);

2056 
	`quickli¡Index
(
ql
, 2, &
’Œy
);

2057 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "bar", 3))

2058 
	`ERR
("V®u2 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2059 
’Œy
.
v®ue
);

2060 
	`quickli¡Index
(
ql
, 3, &
’Œy
);

2061 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "bob", 3))

2062 
	`ERR
("V®u3 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2063 
’Œy
.
v®ue
);

2064 
	`quickli¡Index
(
ql
, 4, &
’Œy
);

2065 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "foo", 3))

2066 
	`ERR
("V®u4 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2067 
’Œy
.
v®ue
);

2068 
	`quickli¡Index
(
ql
, 5, &
’Œy
);

2069 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "zoo", 3))

2070 
	`ERR
("V®u5 didn'ˆm©ch, in¡—d gÙ: %.*s", 
’Œy
.
sz
,

2071 
’Œy
.
v®ue
);

2072 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2073 
	`quickli¡R–—£
(
ql
);

2077 
f
 = 
İtimize_¡¬t
; f < 1024; f++) {

2078 
	`TEST_DESC
(

2081 
f
, 
İtiÚs
[
_i
]) {

2082 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2083 
i
 = 0; i < 500; i++)

2084 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

2085 
i
 = 0; i < 250; i++) {

2086 
quickli¡EÁry
 
’Œy
;

2087 
	`quickli¡Index
(
ql
, 250, &
’Œy
);

2088 
	`quickli¡In£¹BefÜe
(
ql
, &
’Œy
, 
	`g’¡r
("abc", 
i
), 32);

2090 ià(
f
 == 32)

2091 
	`ql_v”ify
(
ql
, 25, 750, 32, 20);

2092 
	`quickli¡R–—£
(
ql
);

2096 
f
 = 
İtimize_¡¬t
; f < 1024; f++) {

2097 
	`TEST_DESC
("insert [after] 250‚ew in middle of 500ƒlements‡t "

2099 
f
, 
İtiÚs
[
_i
]) {

2100 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2101 
i
 = 0; i < 500; i++)

2102 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

2103 
i
 = 0; i < 250; i++) {

2104 
quickli¡EÁry
 
’Œy
;

2105 
	`quickli¡Index
(
ql
, 250, &
’Œy
);

2106 
	`quickli¡In£¹Aá”
(
ql
, &
’Œy
, 
	`g’¡r
("abc", 
i
), 32);

2109 ià(
ql
->
couÁ
 != 750)

2110 
	`ERR
("Li¡ siznÙ 750, buˆ¿th” %ld", 
ql
->
couÁ
);

2112 ià(
f
 == 32)

2113 
	`ql_v”ify
(
ql
, 26, 750, 20, 32);

2114 
	`quickli¡R–—£
(
ql
);

2118 
	`TEST
("duplicateƒmpty†ist") {

2119 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2120 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

2121 
quickli¡
 *
cİy
 = 
	`quickli¡Dup
(
ql
);

2122 
	`ql_v”ify
(
cİy
, 0, 0, 0, 0);

2123 
	`quickli¡R–—£
(
ql
);

2124 
	`quickli¡R–—£
(
cİy
);

2127 
	`TEST
("duplicate†ist of 1ƒlement") {

2128 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2129 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("hello", 3), 32);

2130 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

2131 
quickli¡
 *
cİy
 = 
	`quickli¡Dup
(
ql
);

2132 
	`ql_v”ify
(
cİy
, 1, 1, 1, 1);

2133 
	`quickli¡R–—£
(
ql
);

2134 
	`quickli¡R–—£
(
cİy
);

2137 
	`TEST
("duplicate†ist of 500") {

2138 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2139 
	`quickli¡S‘Fl
(
ql
, 32);

2140 
i
 = 0; i < 500; i++)

2141 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

2142 
	`ql_v”ify
(
ql
, 16, 500, 20, 32);

2144 
quickli¡
 *
cİy
 = 
	`quickli¡Dup
(
ql
);

2145 
	`ql_v”ify
(
cİy
, 16, 500, 20, 32);

2146 
	`quickli¡R–—£
(
ql
);

2147 
	`quickli¡R–—£
(
cİy
);

2150 
f
 = 
İtimize_¡¬t
; f < 512; f++) {

2151 
	`TEST_DESC
("šdex 1,200 from 500†i¡‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2152 
İtiÚs
[
_i
]) {

2153 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2154 
i
 = 0; i < 500; i++)

2155 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2156 
quickli¡EÁry
 
’Œy
;

2157 
	`quickli¡Index
(
ql
, 1, &
’Œy
);

2158 ià(!
	`¡rcmp
((*)
’Œy
.
v®ue
, "hello2"))

2159 
OK
;

2161 
	`ERR
("V®ue: %s", 
’Œy
.
v®ue
);

2162 
	`quickli¡Index
(
ql
, 200, &
’Œy
);

2163 ià(!
	`¡rcmp
((*)
’Œy
.
v®ue
, "hello201"))

2164 
OK
;

2166 
	`ERR
("V®ue: %s", 
’Œy
.
v®ue
);

2167 
	`quickli¡R–—£
(
ql
);

2170 
	`TEST_DESC
("šdex -1,-2 from 500†i¡‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2171 
İtiÚs
[
_i
]) {

2172 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2173 
i
 = 0; i < 500; i++)

2174 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2175 
quickli¡EÁry
 
’Œy
;

2176 
	`quickli¡Index
(
ql
, -1, &
’Œy
);

2177 ià(!
	`¡rcmp
((*)
’Œy
.
v®ue
, "hello500"))

2178 
OK
;

2180 
	`ERR
("V®ue: %s", 
’Œy
.
v®ue
);

2181 
	`quickli¡Index
(
ql
, -2, &
’Œy
);

2182 ià(!
	`¡rcmp
((*)
’Œy
.
v®ue
, "hello499"))

2183 
OK
;

2185 
	`ERR
("V®ue: %s", 
’Œy
.
v®ue
);

2186 
	`quickli¡R–—£
(
ql
);

2189 
	`TEST_DESC
("šdex -100 from 500†i¡‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2190 
İtiÚs
[
_i
]) {

2191 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2192 
i
 = 0; i < 500; i++)

2193 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2194 
quickli¡EÁry
 
’Œy
;

2195 
	`quickli¡Index
(
ql
, -100, &
’Œy
);

2196 ià(!
	`¡rcmp
((*)
’Œy
.
v®ue
, "hello401"))

2197 
OK
;

2199 
	`ERR
("V®ue: %s", 
’Œy
.
v®ue
);

2200 
	`quickli¡R–—£
(
ql
);

2203 
	`TEST_DESC
("indexoo big +1 from 50†ist‡t fill %d‡t compress %d",

2204 
f
, 
İtiÚs
[
_i
]) {

2205 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2206 
i
 = 0; i < 50; i++)

2207 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2208 
quickli¡EÁry
 
’Œy
;

2209 ià(
	`quickli¡Index
(
ql
, 50, &
’Œy
))

2210 
	`ERR
("Index found‡ˆ50 w™h 50†i¡: %.*s", 
’Œy
.
sz
,

2211 
’Œy
.
v®ue
);

2213 
OK
;

2214 
	`quickli¡R–—£
(
ql
);

2218 
	`TEST
("delete„angeƒmpty†ist") {

2219 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2220 
	`quickli¡D–Rªge
(
ql
, 5, 20);

2221 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

2222 
	`quickli¡R–—£
(
ql
);

2225 
	`TEST
("delete„ange ofƒntire‚ode in†ist of one‚ode") {

2226 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2227 
i
 = 0; i < 32; i++)

2228 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

2229 
	`ql_v”ify
(
ql
, 1, 32, 32, 32);

2230 
	`quickli¡D–Rªge
(
ql
, 0, 32);

2231 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

2232 
	`quickli¡R–—£
(
ql
);

2235 
	`TEST
("delete„ange ofƒntire‚ode with overflow counts") {

2236 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2237 
i
 = 0; i < 32; i++)

2238 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lo", 
i
), 32);

2239 
	`ql_v”ify
(
ql
, 1, 32, 32, 32);

2240 
	`quickli¡D–Rªge
(
ql
, 0, 128);

2241 
	`ql_v”ify
(
ql
, 0, 0, 0, 0);

2242 
	`quickli¡R–—£
(
ql
);

2245 
	`TEST
("delete middle 100 of 500†ist") {

2246 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2247 
	`quickli¡S‘Fl
(
ql
, 32);

2248 
i
 = 0; i < 500; i++)

2249 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2250 
	`ql_v”ify
(
ql
, 16, 500, 32, 20);

2251 
	`quickli¡D–Rªge
(
ql
, 200, 100);

2252 
	`ql_v”ify
(
ql
, 14, 400, 32, 20);

2253 
	`quickli¡R–—£
(
ql
);

2256 
	`TEST
("delete‚egative 1 from 500†ist") {

2257 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2258 
	`quickli¡S‘Fl
(
ql
, 32);

2259 
i
 = 0; i < 500; i++)

2260 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2261 
	`ql_v”ify
(
ql
, 16, 500, 32, 20);

2262 
	`quickli¡D–Rªge
(
ql
, -1, 1);

2263 
	`ql_v”ify
(
ql
, 16, 499, 32, 19);

2264 
	`quickli¡R–—£
(
ql
);

2267 
	`TEST
("delete‚egative 1 from 500†ist with overflow counts") {

2268 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2269 
	`quickli¡S‘Fl
(
ql
, 32);

2270 
i
 = 0; i < 500; i++)

2271 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2272 
	`ql_v”ify
(
ql
, 16, 500, 32, 20);

2273 
	`quickli¡D–Rªge
(
ql
, -1, 128);

2274 
	`ql_v”ify
(
ql
, 16, 499, 32, 19);

2275 
	`quickli¡R–—£
(
ql
);

2278 
	`TEST
("delete‚egative 100 from 500†ist") {

2279 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2280 
	`quickli¡S‘Fl
(
ql
, 32);

2281 
i
 = 0; i < 500; i++)

2282 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2283 
	`quickli¡D–Rªge
(
ql
, -100, 100);

2284 
	`ql_v”ify
(
ql
, 13, 400, 32, 16);

2285 
	`quickli¡R–—£
(
ql
);

2288 
	`TEST
("delete -10 count 5 from 50†ist") {

2289 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2290 
	`quickli¡S‘Fl
(
ql
, 32);

2291 
i
 = 0; i < 50; i++)

2292 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lo", 
i
 + 1), 32);

2293 
	`ql_v”ify
(
ql
, 2, 50, 32, 18);

2294 
	`quickli¡D–Rªge
(
ql
, -10, 5);

2295 
	`ql_v”ify
(
ql
, 2, 45, 32, 13);

2296 
	`quickli¡R–—£
(
ql
);

2299 
	`TEST
("numbers only†ist„ead") {

2300 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2301 
	`quickli¡PushTa
(
ql
, "1111", 4);

2302 
	`quickli¡PushTa
(
ql
, "2222", 4);

2303 
	`quickli¡PushTa
(
ql
, "3333", 4);

2304 
	`quickli¡PushTa
(
ql
, "4444", 4);

2305 
	`ql_v”ify
(
ql
, 1, 4, 4, 4);

2306 
quickli¡EÁry
 
’Œy
;

2307 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2308 ià(
’Œy
.
lÚgv®
 != 1111)

2309 
	`ERR
("NÙ 1111, %Îd", 
’Œy
.
lÚgv®
);

2310 
	`quickli¡Index
(
ql
, 1, &
’Œy
);

2311 ià(
’Œy
.
lÚgv®
 != 2222)

2312 
	`ERR
("NÙ 2222, %Îd", 
’Œy
.
lÚgv®
);

2313 
	`quickli¡Index
(
ql
, 2, &
’Œy
);

2314 ià(
’Œy
.
lÚgv®
 != 3333)

2315 
	`ERR
("NÙ 3333, %Îd", 
’Œy
.
lÚgv®
);

2316 
	`quickli¡Index
(
ql
, 3, &
’Œy
);

2317 ià(
’Œy
.
lÚgv®
 != 4444)

2318 
	`ERR
("NÙ 4444, %Îd", 
’Œy
.
lÚgv®
);

2319 ià(
	`quickli¡Index
(
ql
, 4, &
’Œy
))

2320 
	`ERR
("Index…a¡ƒËm’ts: %Îd", 
’Œy
.
lÚgv®
);

2321 
	`quickli¡Index
(
ql
, -1, &
’Œy
);

2322 ià(
’Œy
.
lÚgv®
 != 4444)

2323 
	`ERR
("NÙ 4444 (»v”£), %Îd", 
’Œy
.
lÚgv®
);

2324 
	`quickli¡Index
(
ql
, -2, &
’Œy
);

2325 ià(
’Œy
.
lÚgv®
 != 3333)

2326 
	`ERR
("NÙ 3333 (»v”£), %Îd", 
’Œy
.
lÚgv®
);

2327 
	`quickli¡Index
(
ql
, -3, &
’Œy
);

2328 ià(
’Œy
.
lÚgv®
 != 2222)

2329 
	`ERR
("NÙ 2222 (»v”£), %Îd", 
’Œy
.
lÚgv®
);

2330 
	`quickli¡Index
(
ql
, -4, &
’Œy
);

2331 ià(
’Œy
.
lÚgv®
 != 1111)

2332 
	`ERR
("NÙ 1111 (»v”£), %Îd", 
’Œy
.
lÚgv®
);

2333 ià(
	`quickli¡Index
(
ql
, -5, &
’Œy
))

2334 
	`ERR
("Index…a¡ƒËm’t Ôev”£), %Îd", 
’Œy
.
lÚgv®
);

2335 
	`quickli¡R–—£
(
ql
);

2338 
	`TEST
("numbers†arger†ist„ead") {

2339 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2340 
	`quickli¡S‘Fl
(
ql
, 32);

2341 
num
[32];

2342 
nums
[5000];

2343 
i
 = 0; i < 5000; i++) {

2344 
nums
[
i
] = -5157318210846258176 + i;

2345 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2346 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2348 
	`quickli¡PushTa
(
ql
, "xxxxxxxxxxxxxxxxxxxx", 20);

2349 
quickli¡EÁry
 
’Œy
;

2350 
i
 = 0; i < 5000; i++) {

2351 
	`quickli¡Index
(
ql
, 
i
, &
’Œy
);

2352 ià(
’Œy
.
lÚgv®
 !ğ
nums
[
i
])

2353 
	`ERR
("[%d] NÙ†Úgv® %Îd buˆ¿th” %Îd", 
i
, 
nums
[i],

2354 
’Œy
.
lÚgv®
);

2355 
’Œy
.
lÚgv®
 = 0xdeadbeef;

2357 
	`quickli¡Index
(
ql
, 5000, &
’Œy
);

2358 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "xxxxxxxxxxxxxxxxxxxx", 20))

2359 
	`ERR
("SŒšg v®‚Ù m©ch: %s", 
’Œy
.
v®ue
);

2360 
	`ql_v”ify
(
ql
, 157, 5001, 32, 9);

2361 
	`quickli¡R–—£
(
ql
);

2364 
	`TEST
("numbers†arger†ist„ead B") {

2365 
quickli¡
 *
ql
 = 
	`quickli¡New
(-2, 
İtiÚs
[
_i
]);

2366 
	`quickli¡PushTa
(
ql
, "99", 2);

2367 
	`quickli¡PushTa
(
ql
, "98", 2);

2368 
	`quickli¡PushTa
(
ql
, "xxxxxxxxxxxxxxxxxxxx", 20);

2369 
	`quickli¡PushTa
(
ql
, "96", 2);

2370 
	`quickli¡PushTa
(
ql
, "95", 2);

2371 
	`quickli¡R•ÏûAtIndex
(
ql
, 1, "foo", 3);

2372 
	`quickli¡R•ÏûAtIndex
(
ql
, -1, "bar", 3);

2373 
	`quickli¡R–—£
(
ql
);

2374 
OK
;

2377 
f
 = 
İtimize_¡¬t
; f < 16; f++) {

2378 
	`TEST_DESC
("Ìeme¡‡ˆfÈ%d‡ˆcom´es %d", 
f
, 
İtiÚs
[
_i
]) {

2379 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2380 *
wÜds
[] = {"abc", "foo", "bar", "foobar", "foobared",

2382 *
»suÉ
[] = {"abc", "foo", "foobar", "foobared",

2384 *
»suÉB
[] = {"abc", "foo", "foobar",

2386 
i
 = 0; i < 9; i++)

2387 
	`quickli¡PushTa
(
ql
, 
wÜds
[
i
], 
	`¡¾’
(words[i]));

2390 
quickli¡I‹r
 *
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_HEAD
);

2391 
quickli¡EÁry
 
’Œy
;

2392 
i
 = 0;

2393 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2394 ià(
	`quickli¡Com·»
(
’Œy
.
zi
, (*)"bar", 3)) {

2395 
	`quickli¡D–EÁry
(
™”
, &
’Œy
);

2397 
i
++;

2399 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2402 
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_HEAD
);

2403 
i
 = 0;

2404 
ok
 = 1;

2405 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2408 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, 
»suÉ
[
i
],ƒÁry.
sz
)) {

2409 
	`ERR
("No match‡t…osition %d, got %.*s instead of %s",

2410 
i
, 
’Œy
.
sz
,ƒÁry.
v®ue
, 
»suÉ
[i]);

2411 
ok
 = 0;

2413 
i
++;

2415 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2417 
	`quickli¡PushTa
(
ql
, "foo", 3);

2420 
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_TAIL
);

2421 
i
 = 0;

2422 
d–
 = 2;

2423 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2424 ià(
	`quickli¡Com·»
(
’Œy
.
zi
, (*)"foo", 3)) {

2425 
	`quickli¡D–EÁry
(
™”
, &
’Œy
);

2426 
d–
--;

2428 ià(!
d–
)

2430 
i
++;

2432 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2438 
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_TAIL
);

2439 
i
 = 0;

2440 
size_t
 
»sB
 = (
»suÉB
) / (*resultB);

2441 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2444 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, 
»suÉB
[
»sB
 - 1 - 
i
],

2445 
’Œy
.
sz
)) {

2446 
	`ERR
("No match‡t…osition %d, got %.*s instead of %s",

2447 
i
, 
’Œy
.
sz
,ƒÁry.
v®ue
, 
»suÉB
[
»sB
 - 1 - i]);

2448 
ok
 = 0;

2450 
i
++;

2453 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2455 ià(
ok
)

2456 
OK
;

2457 
	`quickli¡R–—£
(
ql
);

2461 
f
 = 
İtimize_¡¬t
; f < 16; f++) {

2462 
	`TEST_DESC
("™”©»v”£ + d–‘© fÈ%d‡ˆcom´es %d", 
f
,

2463 
İtiÚs
[
_i
]) {

2464 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2465 
	`quickli¡PushTa
(
ql
, "abc", 3);

2466 
	`quickli¡PushTa
(
ql
, "def", 3);

2467 
	`quickli¡PushTa
(
ql
, "hij", 3);

2468 
	`quickli¡PushTa
(
ql
, "jkl", 3);

2469 
	`quickli¡PushTa
(
ql
, "oop", 3);

2471 
quickli¡EÁry
 
’Œy
;

2472 
quickli¡I‹r
 *
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_TAIL
);

2473 
i
 = 0;

2474 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2475 ià(
	`quickli¡Com·»
(
’Œy
.
zi
, (*)"hij", 3)) {

2476 
	`quickli¡D–EÁry
(
™”
, &
’Œy
);

2478 
i
++;

2480 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2482 ià(
i
 != 5)

2483 
	`ERR
("Didn'ˆ™”©5imes, i‹¿‹d %dimes.", 
i
);

2486 
™”
 = 
	`quickli¡G‘I‹¿tÜ
(
ql
, 
AL_START_HEAD
);

2487 
i
 = 0;

2488 *
v®s
[] = {"abc", "def", "jkl", "oop"};

2489 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2490 ià(!
	`quickli¡Com·»
(
’Œy
.
zi
, (*)
v®s
[
i
],

2492 
	`ERR
("V®u© %d didn'ˆm©ch %s\n", 
i
, 
v®s
[i]);

2494 
i
++;

2496 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2497 
	`quickli¡R–—£
(
ql
);

2501 
f
 = 
İtimize_¡¬t
; f < 800; f++) {

2502 
	`TEST_DESC
("™”©Ü‡ˆšdexe¡‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2503 
İtiÚs
[
_i
]) {

2504 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2505 
num
[32];

2506 
nums
[5000];

2507 
i
 = 0; i < 760; i++) {

2508 
nums
[
i
] = -5157318210846258176 + i;

2509 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2510 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2513 
quickli¡EÁry
 
’Œy
;

2514 
quickli¡I‹r
 *
™”
 =

2515 
	`quickli¡G‘I‹¿tÜAtIdx
(
ql
, 
AL_START_HEAD
, 437);

2516 
i
 = 437;

2517 
	`quickli¡Next
(
™”
, &
’Œy
)) {

2518 ià(
’Œy
.
lÚgv®
 !ğ
nums
[
i
])

2519 
	`ERR
("Ex³ùed %Îd, buˆgÙ %Îd", 
’Œy
.
lÚgv®
,

2520 
nums
[
i
]);

2521 
i
++;

2523 
	`quickli¡R–—£I‹¿tÜ
(
™”
);

2524 
	`quickli¡R–—£
(
ql
);

2528 
f
 = 
İtimize_¡¬t
; f < 40; f++) {

2529 
	`TEST_DESC
("Érime¡ A‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2530 
İtiÚs
[
_i
]) {

2531 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2532 
num
[32];

2533 
nums
[5000];

2534 
i
 = 0; i < 32; i++) {

2535 
nums
[
i
] = -5157318210846258176 + i;

2536 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2537 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2539 ià(
f
 == 32)

2540 
	`ql_v”ify
(
ql
, 1, 32, 32, 32);

2542 
	`quickli¡D–Rªge
(
ql
, 0, 25);

2543 
	`quickli¡D–Rªge
(
ql
, 0, 0);

2544 
quickli¡EÁry
 
’Œy
;

2545 
i
 = 0; i < 7; i++) {

2546 
	`quickli¡Index
(
ql
, 
i
, &
’Œy
);

2547 ià(
’Œy
.
lÚgv®
 !ğ
nums
[25 + 
i
])

2548 
	`ERR
("Deleted invalid„ange! Expected %lld but got "

2550 
’Œy
.
lÚgv®
, 
nums
[25 + 
i
]);

2552 ià(
f
 == 32)

2553 
	`ql_v”ify
(
ql
, 1, 7, 7, 7);

2554 
	`quickli¡R–—£
(
ql
);

2558 
f
 = 
İtimize_¡¬t
; f < 40; f++) {

2559 
	`TEST_DESC
("Érime¡ B‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2560 
İtiÚs
[
_i
]) {

2563 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
QUICKLIST_NOCOMPRESS
);

2564 
num
[32];

2565 
nums
[5000];

2566 
i
 = 0; i < 33; i++) {

2567 
nums
[
i
] = i;

2568 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2569 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2571 ià(
f
 == 32)

2572 
	`ql_v”ify
(
ql
, 2, 33, 32, 1);

2574 
	`quickli¡D–Rªge
(
ql
, 0, 5);

2575 
	`quickli¡D–Rªge
(
ql
, -16, 16);

2576 ià(
f
 == 32)

2577 
	`ql_v”ify
(
ql
, 1, 12, 12, 12);

2578 
quickli¡EÁry
 
’Œy
;

2579 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2580 ià(
’Œy
.
lÚgv®
 != 5)

2581 
	`ERR
("A:†Úgv®‚Ù 5, buˆ%Îd", 
’Œy
.
lÚgv®
);

2583 
OK
;

2584 
	`quickli¡Index
(
ql
, -1, &
’Œy
);

2585 ià(
’Œy
.
lÚgv®
 != 16)

2586 
	`ERR
("B! gÙ in¡—d: %Îd", 
’Œy
.
lÚgv®
);

2588 
OK
;

2589 
	`quickli¡PushTa
(
ql
, "bobobob", 7);

2590 
	`quickli¡Index
(
ql
, -1, &
’Œy
);

2591 ià(
	`¡ºcmp
((*)
’Œy
.
v®ue
, "bobobob", 7))

2592 
	`ERR
("Tail doesn't match bobobob, it's %.*s instead",

2593 
’Œy
.
sz
,ƒÁry.
v®ue
);

2594 
i
 = 0; i < 12; i++) {

2595 
	`quickli¡Index
(
ql
, 
i
, &
’Œy
);

2596 ià(
’Œy
.
lÚgv®
 !ğ
nums
[5 + 
i
])

2597 
	`ERR
("Deleted invalid„ange! Expected %lld but got "

2599 
’Œy
.
lÚgv®
, 
nums
[5 + 
i
]);

2601 
	`quickli¡R–—£
(
ql
);

2605 
f
 = 
İtimize_¡¬t
; f < 40; f++) {

2606 
	`TEST_DESC
("Érime¡ C‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2607 
İtiÚs
[
_i
]) {

2608 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2609 
num
[32];

2610 
nums
[5000];

2611 
i
 = 0; i < 33; i++) {

2612 
nums
[
i
] = -5157318210846258176 + i;

2613 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2614 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2616 ià(
f
 == 32)

2617 
	`ql_v”ify
(
ql
, 2, 33, 32, 1);

2619 
	`quickli¡D–Rªge
(
ql
, 0, 3);

2620 
	`quickli¡D–Rªge
(
ql
, -29,

2622 ià(
f
 == 32)

2623 
	`ql_v”ify
(
ql
, 1, 1, 1, 1);

2624 
quickli¡EÁry
 
’Œy
;

2625 
	`quickli¡Index
(
ql
, 0, &
’Œy
);

2626 ià(
’Œy
.
lÚgv®
 != -5157318210846258173)

2627 
ERROR
;

2629 
OK
;

2630 
	`quickli¡R–—£
(
ql
);

2634 
f
 = 
İtimize_¡¬t
; f < 40; f++) {

2635 
	`TEST_DESC
("Érime¡ D‡ˆfÈ%d‡ˆcom´es %d", 
f
,

2636 
İtiÚs
[
_i
]) {

2637 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
İtiÚs
[
_i
]);

2638 
num
[32];

2639 
nums
[5000];

2640 
i
 = 0; i < 33; i++) {

2641 
nums
[
i
] = -5157318210846258176 + i;

2642 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2643 
	`quickli¡PushTa
(
ql
, 
num
, 
sz
);

2645 ià(
f
 == 32)

2646 
	`ql_v”ify
(
ql
, 2, 33, 32, 1);

2647 
	`quickli¡D–Rªge
(
ql
, -12, 3);

2648 ià(
ql
->
couÁ
 != 30)

2649 
	`ERR
("Didn't deleteƒxactlyhreeƒlements! Count is: %lu",

2650 
ql
->
couÁ
);

2651 
	`quickli¡R–—£
(
ql
);

2655 
f
 = 
İtimize_¡¬t
; f < 72; f++) {

2656 
	`TEST_DESC
("create quicklist from ziplist‡t fill %d‡t compress %d",

2657 
f
, 
İtiÚs
[
_i
]) {

2658 *
zl
 = 
	`zli¡New
();

2659 
nums
[64];

2660 
num
[64];

2661 
i
 = 0; i < 33; i++) {

2662 
nums
[
i
] = -5157318210846258176 + i;

2663 
sz
 = 
	`Î2¡ršg
(
num
, Òum), 
nums
[
i
]);

2664 
zl
 =

2665 
	`zli¡Push
(
zl
, (*)
num
, 
sz
, 
ZIPLIST_TAIL
);

2667 
i
 = 0; i < 33; i++) {

2668 
zl
 = 
	`zli¡Push
(zl, (*)
	`g’¡r
("h–lo", 
i
),

2669 32, 
ZIPLIST_TAIL
);

2671 
quickli¡
 *
ql
 = 
	`quickli¡C»©eFromZli¡
(
f
, 
İtiÚs
[
_i
], 
zl
);

2672 ià(
f
 == 1)

2673 
	`ql_v”ify
(
ql
, 66, 66, 1, 1);

2674 ià(
f
 == 32)

2675 
	`ql_v”ify
(
ql
, 3, 66, 32, 2);

2676 ià(
f
 == 66)

2677 
	`ql_v”ify
(
ql
, 1, 66, 66, 66);

2678 
	`quickli¡R–—£
(
ql
);

2682 
¡İ
 = 
	`m¡ime
();

2683 
ruÁime
[
_i
] = 
¡İ
 - 
¡¬t
;

2687 
li¡_sizes
[] = {250, 251, 500, 999, 1000};

2688 
¡¬t
 = 
	`m¡ime
();

2689 
li¡
 = 0;†i¡ < ()((
li¡_sizes
) / (*list_sizes));

2690 
li¡
++) {

2691 
f
 = 
İtimize_¡¬t
; f < 128; f++) {

2692 
d•th
 = 1; depth < 40; depth++) {

2694 
	`TEST_DESC
("verify specific compression of interior‚odes with "

2697 
li¡_sizes
[
li¡
], 
f
, 
d•th
) {

2698 
quickli¡
 *
ql
 = 
	`quickli¡New
(
f
, 
d•th
);

2699 
i
 = 0; i < 
li¡_sizes
[
li¡
]; i++) {

2700 
	`quickli¡PushTa
(
ql
, 
	`g’¡r
("h–lØTAIL", 
i
 + 1), 64);

2701 
	`quickli¡PushH—d
(
ql
, 
	`g’¡r
("h–lØHEAD", 
i
 + 1), 64);

2704 
quickli¡Node
 *
node
 = 
ql
->
h—d
;

2705 
low_¿w
 = 
ql
->
com´ess
;

2706 
high_¿w
 = 
ql
->
Ën
 - ql->
com´ess
;

2708 
©
 = 0;‡ˆ< 
ql
->
Ën
;

2709 
©
++, 
node
 =‚ode->
Ãxt
) {

2710 ià(
©
 < 
low_¿w
 ||‡ˆ>ğ
high_¿w
) {

2711 ià(
node
->
’codšg
 !ğ
QUICKLIST_NODE_ENCODING_RAW
) {

2712 
	`ERR
("Incorrect compression:‚ode %d is "

2715 
©
, 
d•th
, 
low_¿w
, 
high_¿w
, 
ql
->
Ën
,

2716 
node
->
sz
);

2719 ià(
node
->
’codšg
 !ğ
QUICKLIST_NODE_ENCODING_LZF
) {

2720 
	`ERR
("Incorrect‚on-compression:‚ode %d is NOT "

2723 
©
, 
d•th
, 
low_¿w
, 
high_¿w
, 
ql
->
Ën
,

2724 
node
->
sz
,‚ode->
©‹m±ed_com´ess
);

2728 
	`quickli¡R–—£
(
ql
);

2733 
¡İ
 = 
	`m¡ime
();

2735 
	`´štf
("\n");

2736 
size_t
 
i
 = 0; i < 
İtiÚ_couÁ
; i++)

2737 
	`´štf
("Te¡ Loİ %02d: %0.2à£cÚds.\n", 
İtiÚs
[
i
],

2738 ()
ruÁime
[
i
] / 1000);

2739 
	`´štf
("Com´essiÚs: %0.2à£cÚds.\n", ()(
¡İ
 - 
¡¬t
) / 1000);

2740 
	`´štf
("\n");

2742 
	`TEST
("bookmark get updatedo‚ext item") {

2743 
quickli¡
 *
ql
 = 
	`quickli¡New
(1, 0);

2744 
	`quickli¡PushTa
(
ql
, "1", 1);

2745 
	`quickli¡PushTa
(
ql
, "2", 1);

2746 
	`quickli¡PushTa
(
ql
, "3", 1);

2747 
	`quickli¡PushTa
(
ql
, "4", 1);

2748 
	`quickli¡PushTa
(
ql
, "5", 1);

2749 
	`as£¹
(
ql
->
Ën
==5);

2751 
	`as£¹
(
	`quickli¡Bookm¬kC»©e
(&
ql
, "_dummy", ql->
h—d
->
Ãxt
));

2752 
	`as£¹
(
	`quickli¡Bookm¬kC»©e
(&
ql
, "_‹¡", ql->

->
´ev
));

2754 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_‹¡"è=ğql->

->
´ev
);

2755 
	`as£¹
(
	`quickli¡D–Rªge
(
ql
, -2, 1));

2756 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_‹¡"è=ğql->

);

2758 
	`as£¹
(
	`quickli¡D–Rªge
(
ql
, -1, 1));

2759 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_‹¡"è=ğ
NULL
);

2761 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_dummy"è=ğql->
h—d
->
Ãxt
);

2762 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_missšg"è=ğ
NULL
);

2763 
	`as£¹
(
ql
->
Ën
==3);

2764 
	`quickli¡Bookm¬ksCË¬
(
ql
);

2765 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, "_dummy"è=ğ
NULL
);

2766 
	`quickli¡R–—£
(
ql
);

2769 
	`TEST
("bookmark†imit") {

2770 
i
;

2771 
quickli¡
 *
ql
 = 
	`quickli¡New
(1, 0);

2772 
	`quickli¡PushH—d
(
ql
, "1", 1);

2773 
i
=0; i<
QL_MAX_BM
; i++)

2774 
	`as£¹
(
	`quickli¡Bookm¬kC»©e
(&
ql
, 
	`g’¡r
("",
i
), ql->
h—d
));

2776 
	`as£¹
(!
	`quickli¡Bookm¬kC»©e
(&
ql
, "_‹¡", ql->
h—d
));

2778 
	`as£¹
(
	`quickli¡Bookm¬kD–‘e
(
ql
, "0"));

2779 
	`as£¹
(
	`quickli¡Bookm¬kC»©e
(&
ql
, "_‹¡", ql->
h—d
));

2781 
	`as£¹
(
	`quickli¡Bookm¬kD–‘e
(
ql
, "_test"));

2782 
i
=1; i<
QL_MAX_BM
; i++)

2783 
	`as£¹
(
	`quickli¡Bookm¬kFšd
(
ql
, 
	`g’¡r
("",
i
)è=ğql->
h—d
);

2785 
	`as£¹
(!
	`quickli¡Bookm¬kFšd
(
ql
, "0"));

2786 
	`as£¹
(!
	`quickli¡Bookm¬kFšd
(
ql
, "_test"));

2787 
	`quickli¡R–—£
(
ql
);

2790 ià(!
”r
)

2791 
	`´štf
("ALL TESTS PASSED!\n");

2793 
	`ERR
("SÜry,‚Ù‡Îe¡ ·s£d! IÀçù, %de¡ çed.", 
”r
);

2795  
”r
;

2796 
	}
}

	@quicklist.h

31 
	~<¡dšt.h
>

33 #iâdeà
__QUICKLIST_H__


34 
	#__QUICKLIST_H__


	)

46 
	squickli¡Node
 {

47 
quickli¡Node
 *
	m´ev
;

48 
quickli¡Node
 *
	mÃxt
;

49 *
	mzl
;

50 
	msz
;

51 
	mcouÁ
 : 16;

52 
	m’codšg
 : 2;

53 
	mcÚš”
 : 2;

54 
	m»com´ess
 : 1;

55 
	m©‹m±ed_com´ess
 : 1;

56 
	mexŒa
 : 10;

57 } 
	tquickli¡Node
;

64 
	squickli¡LZF
 {

65 
	msz
;

66 
	mcom´es£d
[];

67 } 
	tquickli¡LZF
;

77 
	squickli¡Bookm¬k
 {

78 
quickli¡Node
 *
	mnode
;

79 *
	mÇme
;

80 } 
	tquickli¡Bookm¬k
;

82 #ià
UINTPTR_MAX
 == 0xffffffff

84 
	#QL_FILL_BITS
 14

	)

85 
	#QL_COMP_BITS
 14

	)

86 
	#QL_BM_BITS
 4

	)

87 #–ià
UINTPTR_MAX
 == 0xffffffffffffffff

89 
	#QL_FILL_BITS
 16

	)

90 
	#QL_COMP_BITS
 16

	)

91 
	#QL_BM_BITS
 4

	)

94 #”rÜ 
unknown
 
¬ch
 
b™s
 
couÁ


105 
	squickli¡
 {

106 
quickli¡Node
 *
	mh—d
;

107 
quickli¡Node
 *
	m
;

108 
	mcouÁ
;

109 
	mËn
;

110 
	mfl
 : 
QL_FILL_BITS
;

111 
	mcom´ess
 : 
QL_COMP_BITS
;

112 
	mbookm¬k_couÁ
: 
QL_BM_BITS
;

113 
quickli¡Bookm¬k
 
	mbookm¬ks
[];

114 } 
	tquickli¡
;

116 
	squickli¡I‹r
 {

117 cÚ¡ 
quickli¡
 *
	mquickli¡
;

118 
quickli¡Node
 *
	mcu¼’t
;

119 *
	mzi
;

120 
	moff£t
;

121 
	mdœeùiÚ
;

122 } 
	tquickli¡I‹r
;

124 
	squickli¡EÁry
 {

125 cÚ¡ 
quickli¡
 *
	mquickli¡
;

126 
quickli¡Node
 *
	mnode
;

127 *
	mzi
;

128 *
	mv®ue
;

129 
	mlÚgv®
;

130 
	msz
;

131 
	moff£t
;

132 } 
	tquickli¡EÁry
;

134 
	#QUICKLIST_HEAD
 0

	)

135 
	#QUICKLIST_TAIL
 -1

	)

138 
	#QUICKLIST_NODE_ENCODING_RAW
 1

	)

139 
	#QUICKLIST_NODE_ENCODING_LZF
 2

	)

142 
	#QUICKLIST_NOCOMPRESS
 0

	)

145 
	#QUICKLIST_NODE_CONTAINER_NONE
 1

	)

146 
	#QUICKLIST_NODE_CONTAINER_ZIPLIST
 2

	)

148 
	#quickli¡NodeIsCom´es£d
(
node
) \

149 ((
node
)->
’codšg
 =ğ
QUICKLIST_NODE_ENCODING_LZF
)

	)

152 
quickli¡
 *
quickli¡C»©e
();

153 
quickli¡
 *
quickli¡New
(
fl
, 
com´ess
);

154 
quickli¡S‘Com´essD•th
(
quickli¡
 *quickli¡, 
d•th
);

155 
quickli¡S‘Fl
(
quickli¡
 *quickli¡, 
fl
);

156 
quickli¡S‘O±iÚs
(
quickli¡
 *quickli¡, 
fl
, 
d•th
);

157 
quickli¡R–—£
(
quickli¡
 *quicklist);

158 
quickli¡PushH—d
(
quickli¡
 *quickli¡, *
v®ue
, cÚ¡ 
size_t
 
sz
);

159 
quickli¡PushTa
(
quickli¡
 *quickli¡, *
v®ue
, cÚ¡ 
size_t
 
sz
);

160 
quickli¡Push
(
quickli¡
 *quickli¡, *
v®ue
, cÚ¡ 
size_t
 
sz
,

161 
wh”e
);

162 
quickli¡Aµ’dZli¡
(
quickli¡
 *quickli¡, *
zl
);

163 
quickli¡
 *
quickli¡Aµ’dV®uesFromZli¡
(quicklist *quicklist,

164 *
zl
);

165 
quickli¡
 *
quickli¡C»©eFromZli¡
(
fl
, 
com´ess
,

166 *
zl
);

167 
quickli¡In£¹Aá”
(
quickli¡
 *quickli¡, 
quickli¡EÁry
 *
node
,

168 *
v®ue
, cÚ¡ 
size_t
 
sz
);

169 
quickli¡In£¹BefÜe
(
quickli¡
 *quickli¡, 
quickli¡EÁry
 *
node
,

170 *
v®ue
, cÚ¡ 
size_t
 
sz
);

171 
quickli¡D–EÁry
(
quickli¡I‹r
 *
™”
, 
quickli¡EÁry
 *
’Œy
);

172 
quickli¡R•ÏûAtIndex
(
quickli¡
 *quickli¡, 
šdex
, *
d©a
,

173 
sz
);

174 
quickli¡D–Rªge
(
quickli¡
 *quickli¡, cÚ¡ 
¡¬t
, cÚ¡ 
¡İ
);

175 
quickli¡I‹r
 *
quickli¡G‘I‹¿tÜ
(cÚ¡ 
quickli¡
 *quickli¡, 
dœeùiÚ
);

176 
quickli¡I‹r
 *
quickli¡G‘I‹¿tÜAtIdx
(cÚ¡ 
quickli¡
 *quicklist,

177 
dœeùiÚ
, cÚ¡ 
idx
);

178 
quickli¡Next
(
quickli¡I‹r
 *
™”
, 
quickli¡EÁry
 *
node
);

179 
quickli¡R–—£I‹¿tÜ
(
quickli¡I‹r
 *
™”
);

180 
quickli¡
 *
quickli¡Dup
(quickli¡ *
Üig
);

181 
quickli¡Index
(cÚ¡ 
quickli¡
 *quickli¡, cÚ¡ 
šdex
,

182 
quickli¡EÁry
 *
’Œy
);

183 
quickli¡Rewšd
(
quickli¡
 *quickli¡, 
quickli¡I‹r
 *
li
);

184 
quickli¡RewšdTa
(
quickli¡
 *quickli¡, 
quickli¡I‹r
 *
li
);

185 
quickli¡RÙ©e
(
quickli¡
 *quicklist);

186 
quickli¡PİCu¡om
(
quickli¡
 *quickli¡, 
wh”e
, **
d©a
,

187 *
sz
, *
sv®
,

188 *(*
§v”
)(*
d©a
, 
sz
));

189 
quickli¡Pİ
(
quickli¡
 *quickli¡, 
wh”e
, **
d©a
,

190 *
sz
, *
¦Úg
);

191 
quickli¡CouÁ
(cÚ¡ 
quickli¡
 *
ql
);

192 
quickli¡Com·»
(*
p1
, *
p2
, 
p2_Ën
);

193 
size_t
 
quickli¡G‘Lzf
(cÚ¡ 
quickli¡Node
 *
node
, **
d©a
);

196 
quickli¡Bookm¬kC»©e
(
quickli¡
 **
ql_»f
, cÚ¡ *
Çme
, 
quickli¡Node
 *
node
);

197 
quickli¡Bookm¬kD–‘e
(
quickli¡
 *
ql
, cÚ¡ *
Çme
);

198 
quickli¡Node
 *
quickli¡Bookm¬kFšd
(
quickli¡
 *
ql
, cÚ¡ *
Çme
);

199 
quickli¡Bookm¬ksCË¬
(
quickli¡
 *
ql
);

201 #ifdeà
REDIS_TEST


202 
quickli¡Te¡
(
¬gc
, *
¬gv
[]);

206 
	#AL_START_HEAD
 0

	)

207 
	#AL_START_TAIL
 1

	)

	@rand.c

44 
	~<¡dšt.h
>

46 
	#N
 16

	)

47 
	#MASK
 ((1 << (
N
 - 1)è+ (1 << (N - 1)è- 1)

	)

48 
	#LOW
(
x
è(()(xè& 
MASK
)

	)

49 
	#HIGH
(
x
è
	`LOW
((xè>> 
N
)

	)

50 
	#MUL
(
x
, 
y
, 
z
è{ 
št32_t
 
l
 = ()(x) * ()(y); \

51 (
z
)[0] = 
	`LOW
(
l
); (z)[1] = 
	`HIGH
Ö); }

	)

52 
	#CARRY
(
x
, 
y
è((
št32_t
)(xè+ ()(yè> 
MASK
)

	)

53 
	#ADDEQU
(
x
, 
y
, 
z
è(z = 
	`CARRY
(x, (y)), x = 
	`LOW
(x + (y)))

	)

54 
	#X0
 0x330E

	)

55 
	#X1
 0xABCD

	)

56 
	#X2
 0x1234

	)

57 
	#A0
 0xE66D

	)

58 
	#A1
 0xDEEC

	)

59 
	#A2
 0x5

	)

60 
	#C
 0xB

	)

61 
	#SET3
(
x
, 
x0
, 
x1
, 
x2
è((x)[0] = (x0), (x)[1] = (x1), (x)[2] = (x2))

	)

62 
	#SETLOW
(
x
, 
y
, 
n
è
	`SET3
(x, 
	`LOW
((y)[n]), LOW((y)[Ò)+1]), LOW((y)[Ò)+2]))

	)

63 
	#SEED
(
x0
, 
x1
, 
x2
è(
	`SET3
(
x
, x0, x1, x2), SET3(
a
, 
A0
, 
A1
, 
A2
), 
c
 = 
C
)

	)

64 
	#REST
(
v
è
i
 = 0; i < 3; i++è{ 
xsubi
[i] = 
x
[i]; x[i] = 
‹mp
[i]; } \

65  (
v
);

	)

66 
	#HI_BIT
 (1L << (2 * 
N
 - 1))

	)

68 
ušt32_t
 
	gx
[3] = { 
X0
, 
X1
, 
X2
 }, 
	ga
[3] = { 
A0
, 
A1
, 
A2
 }, 
	gc
 = 
C
;

69 
Ãxt
();

71 
št32_t
 
	$»disL¿nd48
() {

72 
	`Ãxt
();

73  (((
št32_t
)
x
[2] << (
N
 - 1)) + (x[1] >> 1));

74 
	}
}

76 
	$»disS¿nd48
(
št32_t
 
£edv®
) {

77 
	`SEED
(
X0
, 
	`LOW
(
£edv®
), 
	`HIGH
(seedval));

78 
	}
}

80 
	$Ãxt
() {

81 
ušt32_t
 
p
[2], 
q
[2], 
r
[2], 
ÿ¼y0
, 
ÿ¼y1
;

83 
	`MUL
(
a
[0], 
x
[0], 
p
);

84 
	`ADDEQU
(
p
[0], 
c
, 
ÿ¼y0
);

85 
	`ADDEQU
(
p
[1], 
ÿ¼y0
, 
ÿ¼y1
);

86 
	`MUL
(
a
[0], 
x
[1], 
q
);

87 
	`ADDEQU
(
p
[1], 
q
[0], 
ÿ¼y0
);

88 
	`MUL
(
a
[1], 
x
[0], 
r
);

89 
x
[2] = 
	`LOW
(
ÿ¼y0
 + 
ÿ¼y1
 + 
	`CARRY
(
p
[1], 
r
[0]è+ 
q
[1] +„[1] +

90 
a
[0] * 
x
[2] +‡[1] * x[1] +‡[2] * x[0]);

91 
x
[1] = 
	`LOW
(
p
[1] + 
r
[0]);

92 
x
[0] = 
	`LOW
(
p
[0]);

93 
	}
}

	@rand.h

30 #iâdeà
REDIS_RANDOM_H


31 
	#REDIS_RANDOM_H


	)

33 
št32_t
 
»disL¿nd48
();

34 
»disS¿nd48
(
št32_t
 
£edv®
);

36 
	#REDIS_LRAND48_MAX
 
INT32_MAX


	)

	@rax.c

31 
	~<¡dlib.h
>

32 
	~<¡ršg.h
>

33 
	~<as£¹.h
>

34 
	~<¡dio.h
>

35 
	~<”ºo.h
>

36 
	~<m©h.h
>

37 
	~"¿x.h
"

39 #iâdeà
RAX_MALLOC_INCLUDE


40 
	#RAX_MALLOC_INCLUDE
 "¿x_m®loc.h"

	)

43 #šşud
RAX_MALLOC_INCLUDE


48 *
	g¿xNÙFound
 = (*)"rax-not-found-pointer";

52 
¿xDebugShowNode
(cÚ¡ *
msg
, 
¿xNode
 *
n
);

59 #ifdeà
RAX_DEBUG_MSG


60 
	#debugf
(...) \

61 ià(
¿xDebugMsg
) { \

62 
	`´štf
("%s:%s:%d:\t", 
__FILE__
, 
__FUNCTION__
, 
__LINE__
); \

63 
	`´štf
(
__VA_ARGS__
); \

64 
	`fæush
(
¡dout
); \

65 }

	)

67 
	#debugnode
(
msg
,
n
è
	`¿xDebugShowNode
(msg,n)

	)

69 
	#debugf
(...)

	)

70 
	#debugnode
(
msg
,
n
)

	)

74 
	g¿xDebugMsg
 = 1;

79 
	$¿xS‘DebugMsg
(
Úoff
) {

80 
¿xDebugMsg
 = 
Úoff
;

81 
	}
}

92 
šlše
 
	$¿xSckIn™
(
¿xSck
 *
ts
) {

93 
ts
->
¡ack
 =s->
¡©ic_™ems
;

94 
ts
->
™ems
 = 0;

95 
ts
->
max™ems
 = 
RAX_STACK_STATIC_ITEMS
;

96 
ts
->
oom
 = 0;

97 
	}
}

100 
šlše
 
	$¿xSckPush
(
¿xSck
 *
ts
, *
±r
) {

101 ià(
ts
->
™ems
 =ğts->
max™ems
) {

102 ià(
ts
->
¡ack
 =ğts->
¡©ic_™ems
) {

103 
ts
->
¡ack
 = 
	`¿x_m®loc
((*)*ts->
max™ems
*2);

104 ià(
ts
->
¡ack
 =ğ
NULL
) {

105 
ts
->
¡ack
 =s->
¡©ic_™ems
;

106 
ts
->
oom
 = 1;

107 
”ºo
 = 
ENOMEM
;

110 
	`memıy
(
ts
->
¡ack
,ts->
¡©ic_™ems
,(*)*ts->
max™ems
);

112 **
Ãw®loc
 = 
	`¿x_»®loc
(
ts
->
¡ack
,(*)*ts->
max™ems
*2);

113 ià(
Ãw®loc
 =ğ
NULL
) {

114 
ts
->
oom
 = 1;

115 
”ºo
 = 
ENOMEM
;

118 
ts
->
¡ack
 = 
Ãw®loc
;

120 
ts
->
max™ems
 *= 2;

122 
ts
->
¡ack
[ts->
™ems
] = 
±r
;

123 
ts
->
™ems
++;

125 
	}
}

129 
šlše
 *
	$¿xSckPİ
(
¿xSck
 *
ts
) {

130 ià(
ts
->
™ems
 =ğ0è 
NULL
;

131 
ts
->
™ems
--;

132  
ts
->
¡ack
[ts->
™ems
];

133 
	}
}

137 
šlše
 *
	$¿xSckP“k
(
¿xSck
 *
ts
) {

138 ià(
ts
->
™ems
 =ğ0è 
NULL
;

139  
ts
->
¡ack
[ts->
™ems
-1];

140 
	}
}

143 
šlše
 
	$¿xSckF»e
(
¿xSck
 *
ts
) {

144 ià(
ts
->
¡ack
 !ğts->
¡©ic_™ems
è
	`¿x_ä“
(ts->stack);

145 
	}
}

155 
	#¿xPaddšg
(
nodesize
è(((*)-(Òodesize+4è% (*))è& ((*)-1))

	)

159 
	#¿xNodeLa¡ChdPŒ
(
n
è((
¿xNode
**) ( \

160 ((*)(
n
)) + \

161 
	`¿xNodeCu¼’tL’gth
(
n
) - \

162 (
¿xNode
*) - \

163 (((
n
)->
iskey
 && !Ò)->
i¢uÎ
) ? (*) : 0) \

164 ))

	)

167 
	#¿xNodeFœ¡ChdPŒ
(
n
è((
¿xNode
**) ( \

168 (
n
)->
d©a
 + \

169 (
n
)->
size
 + \

170 
	`¿xPaddšg
((
n
)->
size
)))

	)

175 
	#¿xNodeCu¼’tL’gth
(
n
) ( \

176 (
¿xNode
)+(
n
)->
size
+ \

177 
	`¿xPaddšg
((
n
)->
size
)+ \

178 ((
n
)->
iscom´
 ? (
¿xNode
*è: ÔaxNode*)*Ò)->
size
)+ \

179 (((
n
)->
iskey
 && !Ò)->
i¢uÎ
)*(*)) \

180 )

	)

186 
¿xNode
 *
	$¿xNewNode
(
size_t
 
chd»n
, 
d©af›ld
) {

187 
size_t
 
nodesize
 = (
¿xNode
)+
chd»n
+
	`¿xPaddšg
(children)+

188 (
¿xNode
*)*
chd»n
;

189 ià(
d©af›ld
è
nodesize
 += (*);

190 
¿xNode
 *
node
 = 
	`¿x_m®loc
(
nodesize
);

191 ià(
node
 =ğ
NULL
)  NULL;

192 
node
->
iskey
 = 0;

193 
node
->
i¢uÎ
 = 0;

194 
node
->
iscom´
 = 0;

195 
node
->
size
 = 
chd»n
;

196  
node
;

197 
	}
}

201 
¿x
 *
	$¿xNew
() {

202 
¿x
 *¿x = 
	`¿x_m®loc
((*rax));

203 ià(
¿x
 =ğ
NULL
)  NULL;

204 
¿x
->
num–e
 = 0;

205 
¿x
->
numnodes
 = 1;

206 
¿x
->
h—d
 = 
	`¿xNewNode
(0,0);

207 ià(
¿x
->
h—d
 =ğ
NULL
) {

208 
	`¿x_ä“
(
¿x
);

209  
NULL
;

211  
¿x
;

213 
	}
}

217 
¿xNode
 *
	$¿xR—ÎocFÜD©a
(
¿xNode
 *
n
, *
d©a
) {

218 ià(
d©a
 =ğ
NULL
è 
n
;

219 
size_t
 
cu¾’
 = 
	`¿xNodeCu¼’tL’gth
(
n
);

220  
	`¿x_»®loc
(
n
,
cu¾’
+(*));

221 
	}
}

224 
	$¿xS‘D©a
(
¿xNode
 *
n
, *
d©a
) {

225 
n
->
iskey
 = 1;

226 ià(
d©a
 !ğ
NULL
) {

227 
n
->
i¢uÎ
 = 0;

228 **
nd©a
 = (**)

229 ((*)
n
+
	`¿xNodeCu¼’tL’gth
(n)-(*));

230 
	`memıy
(
nd©a
,&
d©a
,(data));

232 
n
->
i¢uÎ
 = 1;

234 
	}
}

237 *
	$¿xG‘D©a
(
¿xNode
 *
n
) {

238 ià(
n
->
i¢uÎ
è 
NULL
;

239 **
nd©a
 =(**)((*)
n
+
	`¿xNodeCu¼’tL’gth
(n)-(*));

240 *
d©a
;

241 
	`memıy
(&
d©a
,
nd©a
,(data));

242  
d©a
;

243 
	}
}

254 
¿xNode
 *
	$¿xAddChd
(
¿xNode
 *
n
, 
c
,„axNod**
chd±r
,„axNod***
·»Álšk
) {

255 
	`as£¹
(
n
->
iscom´
 == 0);

257 
size_t
 
cu¾’
 = 
	`¿xNodeCu¼’tL’gth
(
n
);

258 
n
->
size
++;

259 
size_t
 
ÃwËn
 = 
	`¿xNodeCu¼’tL’gth
(
n
);

260 
n
->
size
--;

264 
¿xNode
 *
chd
 = 
	`¿xNewNode
(0,0);

265 ià(
chd
 =ğ
NULL
)  NULL;

268 
¿xNode
 *
Ãwn
 = 
	`¿x_»®loc
(
n
,
ÃwËn
);

269 ià(
Ãwn
 =ğ
NULL
) {

270 
	`¿x_ä“
(
chd
);

271  
NULL
;

273 
n
 = 
Ãwn
;

303 
pos
;

304 
pos
 = 0;…o < 
n
->
size
;…os++) {

305 ià(
n
->
d©a
[
pos
] > 
c
) ;

314 *
¤c
, *
d¡
;

315 ià(
n
->
iskey
 && !n->
i¢uÎ
) {

316 
¤c
 = ((*)
n
+
cu¾’
-(*));

317 
d¡
 = ((*)
n
+
ÃwËn
-(*));

318 
	`memmove
(
d¡
,
¤c
,(*));

332 
size_t
 
shiá
 = 
ÃwËn
 - 
cu¾’
 - (*);

344 
¤c
 = 
n
->
d©a
+n->
size
+

345 
	`¿xPaddšg
(
n
->
size
)+

346 (
¿xNode
*)*
pos
;

347 
	`memmove
(
¤c
+
shiá
+(
¿xNode
*),¤c,ÔaxNode*)*(
n
->
size
-
pos
));

358 ià(
shiá
) {

359 
¤c
 = (*è
	`¿xNodeFœ¡ChdPŒ
(
n
);

360 
	`memmove
(
¤c
+
shiá
,¤c,(
¿xNode
*)*
pos
);

369 
¤c
 = 
n
->
d©a
+
pos
;

370 
	`memmove
(
¤c
+1,¤c,
n
->
size
-
pos
);

377 
n
->
d©a
[
pos
] = 
c
;

378 
n
->
size
++;

379 
¤c
 = (*è
	`¿xNodeFœ¡ChdPŒ
(
n
);

380 
¿xNode
 **
chdf›ld
 = (¿xNode**)(
¤c
+ÔaxNode*)*
pos
);

381 
	`memıy
(
chdf›ld
,&
chd
,(child));

382 *
chd±r
 = 
chd
;

383 *
·»Álšk
 = 
chdf›ld
;

384  
n
;

385 
	}
}

395 
¿xNode
 *
	$¿xCom´essNode
(
¿xNode
 *
n
, *
s
, 
size_t
 
Ën
,„axNod**
chd
) {

396 
	`as£¹
(
n
->
size
 =ğ0 &&‚->
iscom´
 == 0);

397 *
d©a
 = 
NULL
;

398 
size_t
 
Ãwsize
;

400 
	`debugf
("Com´es node: %.*s\n", ()
Ën
,
s
);

403 *
chd
 = 
	`¿xNewNode
(0,0);

404 ià(*
chd
 =ğ
NULL
)  NULL;

407 
Ãwsize
 = (
¿xNode
)+
Ën
+
	`¿xPaddšg
(len)+(raxNode*);

408 ià(
n
->
iskey
) {

409 
d©a
 = 
	`¿xG‘D©a
(
n
);

410 ià(!
n
->
i¢uÎ
è
Ãwsize
 += (*);

412 
¿xNode
 *
Ãwn
 = 
	`¿x_»®loc
(
n
,
Ãwsize
);

413 ià(
Ãwn
 =ğ
NULL
) {

414 
	`¿x_ä“
(*
chd
);

415  
NULL
;

417 
n
 = 
Ãwn
;

419 
n
->
iscom´
 = 1;

420 
n
->
size
 = 
Ën
;

421 
	`memıy
(
n
->
d©a
,
s
,
Ën
);

422 ià(
n
->
iskey
è
	`¿xS‘D©a
Ò,
d©a
);

423 
¿xNode
 **
chdf›ld
 = 
	`¿xNodeLa¡ChdPŒ
(
n
);

424 
	`memıy
(
chdf›ld
,
chd
,(*child));

425  
n
;

426 
	}
}

457 
šlše
 
size_t
 
	$¿xLowW®k
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, 
¿xNode
 **
¡İnode
,„axNod***
¶šk
, *
¥l™pos
, 
¿xSck
 *
ts
) {

458 
¿xNode
 *
h
 = 
¿x
->
h—d
;

459 
¿xNode
 **
·»Álšk
 = &
¿x
->
h—d
;

461 
size_t
 
i
 = 0;

462 
size_t
 
j
 = 0;

463 
h
->
size
 && 
i
 < 
Ën
) {

464 
	`debugnode
("Looku°cu¼’ˆnode",
h
);

465 *
v
 = 
h
->
d©a
;

467 ià(
h
->
iscom´
) {

468 
j
 = 0; j < 
h
->
size
 && 
i
 < 
Ën
; j++, i++) {

469 ià(
v
[
j
] !ğ
s
[
i
]) ;

471 ià(
j
 !ğ
h
->
size
) ;

476 
j
 = 0; j < 
h
->
size
; j++) {

477 ià(
v
[
j
] =ğ
s
[
i
]) ;

479 ià(
j
 =ğ
h
->
size
) ;

480 
i
++;

483 ià(
ts
è
	`¿xSckPush
Ñs,
h
);

484 
¿xNode
 **
chd»n
 = 
	`¿xNodeFœ¡ChdPŒ
(
h
);

485 ià(
h
->
iscom´
è
j
 = 0;

486 
	`memıy
(&
h
,
chd»n
+
j
,(h));

487 
·»Álšk
 = 
chd»n
+
j
;

488 
j
 = 0;

493 
	`debugnode
("Looku°¡İ‚odis",
h
);

494 ià(
¡İnode
è*¡İnodğ
h
;

495 ià(
¶šk
è*¶šk = 
·»Álšk
;

496 ià(
¥l™pos
 && 
h
->
iscom´
è*¥l™po ğ
j
;

497  
i
;

498 
	}
}

507 
	$¿xG’”icIn£¹
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, *
d©a
, **
Şd
, 
ov”wr™e
) {

508 
size_t
 
i
;

509 
j
 = 0;

513 
¿xNode
 *
h
, **
·»Álšk
;

515 
	`debugf
("### In£¹ %.* w™h v®u%p\n", ()
Ën
, 
s
, 
d©a
);

516 
i
 = 
	`¿xLowW®k
(
¿x
,
s
,
Ën
,&
h
,&
·»Álšk
,&
j
,
NULL
);

523 ià(
i
 =ğ
Ën
 && (!
h
->
iscom´
 || 
j
 == 0 )) {

524 
	`debugf
("### Insert:‚ode„epresenting keyƒxists\n");

526 ià(!
h
->
iskey
 || (h->
i¢uÎ
 && 
ov”wr™e
)) {

527 
h
 = 
	`¿xR—ÎocFÜD©a
(h,
d©a
);

528 ià(
h
è
	`memıy
(
·»Álšk
,&h,(h));

530 ià(
h
 =ğ
NULL
) {

531 
”ºo
 = 
ENOMEM
;

536 ià(
h
->
iskey
) {

537 ià(
Şd
è*Şd = 
	`¿xG‘D©a
(
h
);

538 ià(
ov”wr™e
è
	`¿xS‘D©a
(
h
,
d©a
);

539 
”ºo
 = 0;

545 
	`¿xS‘D©a
(
h
,
d©a
);

546 
¿x
->
num–e
++;

675 ià(
h
->
iscom´
 && 
i
 !ğ
Ën
) {

676 
	`debugf
("ALGO 1: Stopped‡t compressed‚ode %.*s (%p)\n",

677 
h
->
size
, h->
d©a
, (*)h);

678 
	`debugf
("StÈtØš£¹: %.*s\n", ()(
Ën
-
i
), 
s
+i);

679 
	`debugf
("S¶™tšg‡ˆ%d: '%c'\n", 
j
, ((*)
h
->
d©a
)[j]);

680 
	`debugf
("Oth” (keyèË‰” i '%c'\n", 
s
[
i
]);

683 
¿xNode
 **
chdf›ld
 = 
	`¿xNodeLa¡ChdPŒ
(
h
);

684 
¿xNode
 *
Ãxt
;

685 
	`memıy
(&
Ãxt
,
chdf›ld
,(next));

686 
	`debugf
("Nexˆi %p\n", (*)
Ãxt
);

687 
	`debugf
("iskey %d\n", 
h
->
iskey
);

688 ià(
h
->
iskey
) {

689 
	`debugf
("key v®ui %p\n", 
	`¿xG‘D©a
(
h
));

693 
size_t
 
ŒimmedËn
 = 
j
;

694 
size_t
 
po¡fixËn
 = 
h
->
size
 - 
j
 - 1;

695 
¥l™_node_is_key
 = !
ŒimmedËn
 && 
h
->
iskey
 && !h->
i¢uÎ
;

696 
size_t
 
nodesize
;

700 
¿xNode
 *
¥l™node
 = 
	`¿xNewNode
(1, 
¥l™_node_is_key
);

701 
¿xNode
 *
Œimmed
 = 
NULL
;

702 
¿xNode
 *
po¡fix
 = 
NULL
;

704 ià(
ŒimmedËn
) {

705 
nodesize
 = (
¿xNode
)+
ŒimmedËn
+
	`¿xPaddšg
(trimmedlen)+

706 (
¿xNode
*);

707 ià(
h
->
iskey
 && !h->
i¢uÎ
è
nodesize
 += (*);

708 
Œimmed
 = 
	`¿x_m®loc
(
nodesize
);

711 ià(
po¡fixËn
) {

712 
nodesize
 = (
¿xNode
)+
po¡fixËn
+
	`¿xPaddšg
(postfixlen)+

713 (
¿xNode
*);

714 
po¡fix
 = 
	`¿x_m®loc
(
nodesize
);

718 ià(
¥l™node
 =ğ
NULL
 ||

719 (
ŒimmedËn
 && 
Œimmed
 =ğ
NULL
) ||

720 (
po¡fixËn
 && 
po¡fix
 =ğ
NULL
))

722 
	`¿x_ä“
(
¥l™node
);

723 
	`¿x_ä“
(
Œimmed
);

724 
	`¿x_ä“
(
po¡fix
);

725 
”ºo
 = 
ENOMEM
;

728 
¥l™node
->
d©a
[0] = 
h
->d©a[
j
];

730 ià(
j
 == 0) {

732 ià(
h
->
iskey
) {

733 *
nd©a
 = 
	`¿xG‘D©a
(
h
);

734 
	`¿xS‘D©a
(
¥l™node
,
nd©a
);

736 
	`memıy
(
·»Álšk
,&
¥l™node
,(splitnode));

739 
Œimmed
->
size
 = 
j
;

740 
	`memıy
(
Œimmed
->
d©a
,
h
->d©a,
j
);

741 
Œimmed
->
iscom´
 = 
j
 > 1 ? 1 : 0;

742 
Œimmed
->
iskey
 = 
h
->iskey;

743 
Œimmed
->
i¢uÎ
 = 
h
->isnull;

744 ià(
h
->
iskey
 && !h->
i¢uÎ
) {

745 *
nd©a
 = 
	`¿xG‘D©a
(
h
);

746 
	`¿xS‘D©a
(
Œimmed
,
nd©a
);

748 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
Œimmed
);

749 
	`memıy
(
ı
,&
¥l™node
,(splitnode));

750 
	`memıy
(
·»Álšk
,&
Œimmed
,(trimmed));

751 
·»Álšk
 = 
ı
;

752 
¿x
->
numnodes
++;

757 ià(
po¡fixËn
) {

759 
po¡fix
->
iskey
 = 0;

760 
po¡fix
->
i¢uÎ
 = 0;

761 
po¡fix
->
size
 = 
po¡fixËn
;

762 
po¡fix
->
iscom´
 = 
po¡fixËn
 > 1;

763 
	`memıy
(
po¡fix
->
d©a
,
h
->d©a+
j
+1,
po¡fixËn
);

764 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
po¡fix
);

765 
	`memıy
(
ı
,&
Ãxt
,(next));

766 
¿x
->
numnodes
++;

769 
po¡fix
 = 
Ãxt
;

773 
¿xNode
 **
¥l™chd
 = 
	`¿xNodeLa¡ChdPŒ
(
¥l™node
);

774 
	`memıy
(
¥l™chd
,&
po¡fix
,(postfix));

779 
	`¿x_ä“
(
h
);

780 
h
 = 
¥l™node
;

781 } ià(
h
->
iscom´
 && 
i
 =ğ
Ën
) {

783 
	`debugf
("ALGO 2: Stopped‡t compressed‚ode %.*s (%p) j = %d\n",

784 
h
->
size
, h->
d©a
, (*)h, 
j
);

787 
size_t
 
po¡fixËn
 = 
h
->
size
 - 
j
;

788 
size_t
 
nodesize
 = (
¿xNode
)+
po¡fixËn
+
	`¿xPaddšg
(postfixlen)+

789 (
¿xNode
*);

790 ià(
d©a
 !ğ
NULL
è
nodesize
 += (*);

791 
¿xNode
 *
po¡fix
 = 
	`¿x_m®loc
(
nodesize
);

793 
nodesize
 = (
¿xNode
)+
j
+
	`¿xPaddšg
(j)+(raxNode*);

794 ià(
h
->
iskey
 && !h->
i¢uÎ
è
nodesize
 += (*);

795 
¿xNode
 *
Œimmed
 = 
	`¿x_m®loc
(
nodesize
);

797 ià(
po¡fix
 =ğ
NULL
 || 
Œimmed
 == NULL) {

798 
	`¿x_ä“
(
po¡fix
);

799 
	`¿x_ä“
(
Œimmed
);

800 
”ºo
 = 
ENOMEM
;

805 
¿xNode
 **
chdf›ld
 = 
	`¿xNodeLa¡ChdPŒ
(
h
);

806 
¿xNode
 *
Ãxt
;

807 
	`memıy
(&
Ãxt
,
chdf›ld
,(next));

810 
po¡fix
->
size
 = 
po¡fixËn
;

811 
po¡fix
->
iscom´
 = 
po¡fixËn
 > 1;

812 
po¡fix
->
iskey
 = 1;

813 
po¡fix
->
i¢uÎ
 = 0;

814 
	`memıy
(
po¡fix
->
d©a
,
h
->d©a+
j
,
po¡fixËn
);

815 
	`¿xS‘D©a
(
po¡fix
,
d©a
);

816 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
po¡fix
);

817 
	`memıy
(
ı
,&
Ãxt
,(next));

818 
¿x
->
numnodes
++;

821 
Œimmed
->
size
 = 
j
;

822 
Œimmed
->
iscom´
 = 
j
 > 1;

823 
Œimmed
->
iskey
 = 0;

824 
Œimmed
->
i¢uÎ
 = 0;

825 
	`memıy
(
Œimmed
->
d©a
,
h
->d©a,
j
);

826 
	`memıy
(
·»Álšk
,&
Œimmed
,(trimmed));

827 ià(
h
->
iskey
) {

828 *
aux
 = 
	`¿xG‘D©a
(
h
);

829 
	`¿xS‘D©a
(
Œimmed
,
aux
);

834 
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
Œimmed
);

835 
	`memıy
(
ı
,&
po¡fix
,(postfix));

839 
¿x
->
num–e
++;

840 
	`¿x_ä“
(
h
);

846 
i
 < 
Ën
) {

847 
¿xNode
 *
chd
;

852 ià(
h
->
size
 =ğ0 && 
Ën
-
i
 > 1) {

853 
	`debugf
("Inserting compressed‚ode\n");

854 
size_t
 
com´size
 = 
Ën
-
i
;

855 ià(
com´size
 > 
RAX_NODE_MAX_SIZE
)

856 
com´size
 = 
RAX_NODE_MAX_SIZE
;

857 
¿xNode
 *
Ãwh
 = 
	`¿xCom´essNode
(
h
,
s
+
i
,
com´size
,&
chd
);

858 ià(
Ãwh
 =ğ
NULL
è
oom
;

859 
h
 = 
Ãwh
;

860 
	`memıy
(
·»Álšk
,&
h
,(h));

861 
·»Álšk
 = 
	`¿xNodeLa¡ChdPŒ
(
h
);

862 
i
 +ğ
com´size
;

864 
	`debugf
("Inserting‚ormal‚ode\n");

865 
¿xNode
 **
Ãw_·»Álšk
;

866 
¿xNode
 *
Ãwh
 = 
	`¿xAddChd
(
h
,
s
[
i
],&
chd
,&
Ãw_·»Álšk
);

867 ià(
Ãwh
 =ğ
NULL
è
oom
;

868 
h
 = 
Ãwh
;

869 
	`memıy
(
·»Álšk
,&
h
,(h));

870 
·»Álšk
 = 
Ãw_·»Álšk
;

871 
i
++;

873 
¿x
->
numnodes
++;

874 
h
 = 
chd
;

876 
¿xNode
 *
Ãwh
 = 
	`¿xR—ÎocFÜD©a
(
h
,
d©a
);

877 ià(
Ãwh
 =ğ
NULL
è
oom
;

878 
h
 = 
Ãwh
;

879 ià(!
h
->
iskey
è
¿x
->
num–e
++;

880 
	`¿xS‘D©a
(
h
,
d©a
);

881 
	`memıy
(
·»Álšk
,&
h
,(h));

884 
oom
:

890 ià(
h
->
size
 == 0) {

891 
h
->
i¢uÎ
 = 1;

892 
h
->
iskey
 = 1;

893 
¿x
->
num–e
++;

894 
	`as£¹
(
	`¿xRemove
(
¿x
,
s
,
i
,
NULL
) != 0);

896 
”ºo
 = 
ENOMEM
;

898 
	}
}

902 
	$¿xIn£¹
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, *
d©a
, **
Şd
) {

903  
	`¿xG’”icIn£¹
(
¿x
,
s
,
Ën
,
d©a
,
Şd
,1);

904 
	}
}

909 
	$¿xTryIn£¹
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, *
d©a
, **
Şd
) {

910  
	`¿xG’”icIn£¹
(
¿x
,
s
,
Ën
,
d©a
,
Şd
,0);

911 
	}
}

916 *
	$¿xFšd
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
) {

917 
¿xNode
 *
h
;

919 
	`debugf
("### Lookup: %.*s\n", ()
Ën
, 
s
);

920 
¥l™pos
 = 0;

921 
size_t
 
i
 = 
	`¿xLowW®k
(
¿x
,
s
,
Ën
,&
h
,
NULL
,&
¥l™pos
,NULL);

922 ià(
i
 !ğ
Ën
 || (
h
->
iscom´
 && 
¥l™pos
 !ğ0è|| !h->
iskey
)

923  
¿xNÙFound
;

924  
	`¿xG‘D©a
(
h
);

925 
	}
}

932 
¿xNode
 **
	$¿xFšdP¬’tLšk
(
¿xNode
 *
·»Á
,„axNod*
chd
) {

933 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
·»Á
);

934 
¿xNode
 *
c
;

936 
	`memıy
(&
c
,
ı
,(c));

937 ià(
c
 =ğ
chd
) ;

938 
ı
++;

940  
ı
;

941 
	}
}

947 
¿xNode
 *
	$¿xRemoveChd
(
¿xNode
 *
·»Á
,„axNod*
chd
) {

948 
	`debugnode
("¿xRemoveChd befÜe", 
·»Á
);

952 ià(
·»Á
->
iscom´
) {

953 *
d©a
 = 
NULL
;

954 ià(
·»Á
->
iskey
è
d©a
 = 
	`¿xG‘D©a
(parent);

955 
·»Á
->
i¢uÎ
 = 0;

956 
·»Á
->
iscom´
 = 0;

957 
·»Á
->
size
 = 0;

958 ià(
·»Á
->
iskey
è
	`¿xS‘D©a
Õ¬’t,
d©a
);

959 
	`debugnode
("¿xRemoveChd‡á”", 
·»Á
);

960  
·»Á
;

968 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
·»Á
);

969 
¿xNode
 **
c
 = 
ı
;

970 *
e
 = 
·»Á
->
d©a
;

975 
¿xNode
 *
aux
;

976 
	`memıy
(&
aux
,
c
,(aux));

977 ià(
aux
 =ğ
chd
) ;

978 
c
++;

979 
e
++;

984 
Ën
 = 
·»Á
->
size
 - (
e
 -…¬’t->
d©a
) - 1;

985 
	`debugf
("¿xRemoveChda†’: %d\n", 
Ën
);

986 
	`memmove
(
e
,e+1,
Ën
);

994 
size_t
 
shiá
 = ((
·»Á
->
size
+4) % (*)) == 1 ? (*) : 0;

997 ià(
shiá
)

998 
	`memmove
(((*)
ı
)-
shiá
,ı,(
·»Á
->
size
-
Ën
-1)*(
¿xNode
**));

1001 
size_t
 
v®u–’
 = (
·»Á
->
iskey
 && !·»Á->
i¢uÎ
) ? (*) : 0;

1002 
	`memmove
(((*)
c
)-
shiá
,c+1,
Ën
*(
¿xNode
**)+
v®u–’
);

1005 
·»Á
->
size
--;

1009 
¿xNode
 *
Ãwnode
 = 
	`¿x_»®loc
(
·»Á
,
	`¿xNodeCu¼’tL’gth
(parent));

1010 ià(
Ãwnode
) {

1011 
	`debugnode
("¿xRemoveChd‡á”", 
Ãwnode
);

1015  
Ãwnode
 ?‚ewnod: 
·»Á
;

1016 
	}
}

1020 
	$¿xRemove
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, **
Şd
) {

1021 
¿xNode
 *
h
;

1022 
¿xSck
 
ts
;

1024 
	`debugf
("### D–‘e: %.*s\n", ()
Ën
, 
s
);

1025 
	`¿xSckIn™
(&
ts
);

1026 
¥l™pos
 = 0;

1027 
size_t
 
i
 = 
	`¿xLowW®k
(
¿x
,
s
,
Ën
,&
h
,
NULL
,&
¥l™pos
,&
ts
);

1028 ià(
i
 !ğ
Ën
 || (
h
->
iscom´
 && 
¥l™pos
 !ğ0è|| !h->
iskey
) {

1029 
	`¿xSckF»e
(&
ts
);

1032 ià(
Şd
è*Şd = 
	`¿xG‘D©a
(
h
);

1033 
h
->
iskey
 = 0;

1034 
¿x
->
num–e
--;

1042 
Œycom´ess
 = 0;

1045 ià(
h
->
size
 == 0) {

1046 
	`debugf
("Key deleted in‚ode without children. Cleanup‚eeded.\n");

1047 
¿xNode
 *
chd
 = 
NULL
;

1048 
h
 !ğ
¿x
->
h—d
) {

1049 
chd
 = 
h
;

1050 
	`debugf
("F»ešg chd %°[%.*s] key:%d\n", (*)
chd
,

1051 ()
chd
->
size
, (*)chd->
d©a
, chd->
iskey
);

1052 
	`¿x_ä“
(
chd
);

1053 
¿x
->
numnodes
--;

1054 
h
 = 
	`¿xSckPİ
(&
ts
);

1057 ià(
h
->
iskey
 || (!h->
iscom´
 && h->
size
 != 1)) ;

1059 ià(
chd
) {

1060 
	`debugf
("Unlinking child %p from…arent %p\n",

1061 (*)
chd
, (*)
h
);

1062 
¿xNode
 *
Ãw
 = 
	`¿xRemoveChd
(
h
,
chd
);

1063 ià(
Ãw
 !ğ
h
) {

1064 
¿xNode
 *
·»Á
 = 
	`¿xSckP“k
(&
ts
);

1065 
¿xNode
 **
·»Álšk
;

1066 ià(
·»Á
 =ğ
NULL
) {

1067 
·»Álšk
 = &
¿x
->
h—d
;

1069 
·»Álšk
 = 
	`¿xFšdP¬’tLšk
(
·»Á
,
h
);

1071 
	`memıy
(
·»Álšk
,&
Ãw
,(new));

1076 ià(
Ãw
->
size
 =ğ1 &&‚ew->
iskey
 == 0) {

1077 
Œycom´ess
 = 1;

1078 
h
 = 
Ãw
;

1081 } ià(
h
->
size
 == 1) {

1084 
Œycom´ess
 = 1;

1089 ià(
Œycom´ess
 && 
ts
.
oom
)rycompress = 0;

1134 ià(
Œycom´ess
) {

1135 
	`debugf
("Aá”„emovšg %.*s:\n", ()
Ën
, 
s
);

1136 
	`debugnode
("Com´essiÚ may bÃeded",
h
);

1137 
	`debugf
("Seek start‚ode\n");

1142 
¿xNode
 *
·»Á
;

1144 
·»Á
 = 
	`¿xSckPİ
(&
ts
);

1145 ià(!
·»Á
 ||…¬’t->
iskey
 ||

1146 (!
·»Á
->
iscom´
 &&…¬’t->
size
 != 1)) ;

1147 
h
 = 
·»Á
;

1148 
	`debugnode
("Gošg u°to",
h
);

1150 
¿xNode
 *
¡¬t
 = 
h
;

1153 
size_t
 
com´size
 = 
h
->
size
;

1154 
nodes
 = 1;

1155 
h
->
size
 != 0) {

1156 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
h
);

1157 
	`memıy
(&
h
,
ı
,(h));

1158 ià(
h
->
iskey
 || (!h->
iscom´
 && h->
size
 != 1)) ;

1161 ià(
com´size
 + 
h
->
size
 > 
RAX_NODE_MAX_SIZE
) ;

1162 
nodes
++;

1163 
com´size
 +ğ
h
->
size
;

1165 ià(
nodes
 > 1) {

1167 
size_t
 
nodesize
 =

1168 (
¿xNode
)+
com´size
+
	`¿xPaddšg
(comprsize)+(raxNode*);

1169 
¿xNode
 *
Ãw
 = 
	`¿x_m®loc
(
nodesize
);

1172 ià(
Ãw
 =ğ
NULL
) {

1173 
	`¿xSckF»e
(&
ts
);

1176 
Ãw
->
iskey
 = 0;

1177 
Ãw
->
i¢uÎ
 = 0;

1178 
Ãw
->
iscom´
 = 1;

1179 
Ãw
->
size
 = 
com´size
;

1180 
¿x
->
numnodes
++;

1185 
com´size
 = 0;

1186 
h
 = 
¡¬t
;

1187 
h
->
size
 != 0) {

1188 
	`memıy
(
Ãw
->
d©a
+
com´size
,
h
->d©a,h->
size
);

1189 
com´size
 +ğ
h
->
size
;

1190 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
h
);

1191 
¿xNode
 *
toä“
 = 
h
;

1192 
	`memıy
(&
h
,
ı
,(h));

1193 
	`¿x_ä“
(
toä“
); 
¿x
->
numnodes
--;

1194 ià(
h
->
iskey
 || (!h->
iscom´
 && h->
size
 != 1)) ;

1196 
	`debugnode
("New‚ode",
Ãw
);

1200 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
Ãw
);

1201 
	`memıy
(
ı
,&
h
,(h));

1204 ià(
·»Á
) {

1205 
¿xNode
 **
·»Álšk
 = 
	`¿xFšdP¬’tLšk
(
·»Á
,
¡¬t
);

1206 
	`memıy
(
·»Álšk
,&
Ãw
,(new));

1208 
¿x
->
h—d
 = 
Ãw
;

1211 
	`debugf
("Compressed %d‚odes, %dotal bytes\n",

1212 
nodes
, ()
com´size
);

1215 
	`¿xSckF»e
(&
ts
);

1217 
	}
}

1221 
	$¿xRecursiveF»e
(
¿x
 *¿x, 
¿xNode
 *
n
, (*
ä“_ÿÎback
)(*)) {

1222 
	`debugnode
("ä“¿v”sšg",
n
);

1223 
numchd»n
 = 
n
->
iscom´
 ? 1 :‚->
size
;

1224 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
n
);

1225 
numchd»n
--) {

1226 
¿xNode
 *
chd
;

1227 
	`memıy
(&
chd
,
ı
,(child));

1228 
	`¿xRecursiveF»e
(
¿x
,
chd
,
ä“_ÿÎback
);

1229 
ı
--;

1231 
	`debugnode
("ä“ d•th-fœ¡",
n
);

1232 ià(
ä“_ÿÎback
 && 
n
->
iskey
 && !n->
i¢uÎ
)

1233 
	`ä“_ÿÎback
(
	`¿xG‘D©a
(
n
));

1234 
	`¿x_ä“
(
n
);

1235 
¿x
->
numnodes
--;

1236 
	}
}

1240 
	$¿xF»eW™hC®lback
(
¿x
 *¿x, (*
ä“_ÿÎback
)(*)) {

1241 
	`¿xRecursiveF»e
(
¿x
,¿x->
h—d
,
ä“_ÿÎback
);

1242 
	`as£¹
(
¿x
->
numnodes
 == 0);

1243 
	`¿x_ä“
(
¿x
);

1244 
	}
}

1247 
	$¿xF»e
(
¿x
 *rax) {

1248 
	`¿xF»eW™hC®lback
(
¿x
,
NULL
);

1249 
	}
}

1256 
	$¿xS¹
(
¿xI‹¿tÜ
 *
™
, 
¿x
 *
¹
) {

1257 
™
->
æags
 = 
RAX_ITER_EOF
;

1258 
™
->
¹
 =„t;

1259 
™
->
key_Ën
 = 0;

1260 
™
->
key
 = it->
key_¡©ic_¡ršg
;

1261 
™
->
key_max
 = 
RAX_ITER_STATIC_LEN
;

1262 
™
->
d©a
 = 
NULL
;

1263 
™
->
node_cb
 = 
NULL
;

1264 
	`¿xSckIn™
(&
™
->
¡ack
);

1265 
	}
}

1270 
	$¿xI‹¿tÜAddCh¬s
(
¿xI‹¿tÜ
 *
™
, *
s
, 
size_t
 
Ën
) {

1271 ià(
™
->
key_max
 < it->
key_Ën
+
Ën
) {

1272 *
Şd
 = (
™
->
key
 =ğ™->
key_¡©ic_¡ršg
è? 
NULL
 :

1273 
™
->
key
;

1274 
size_t
 
Ãw_max
 = (
™
->
key_Ën
+
Ën
)*2;

1275 
™
->
key
 = 
	`¿x_»®loc
(
Şd
,
Ãw_max
);

1276 ià(
™
->
key
 =ğ
NULL
) {

1277 
™
->
key
 = (!
Şd
è? it->
key_¡©ic_¡ršg
 : old;

1278 
”ºo
 = 
ENOMEM
;

1281 ià(
Şd
 =ğ
NULL
è
	`memıy
(
™
->
key
,™->
key_¡©ic_¡ršg
,™->
key_Ën
);

1282 
™
->
key_max
 = 
Ãw_max
;

1286 
	`memmove
(
™
->
key
+™->
key_Ën
,
s
,
Ën
);

1287 
™
->
key_Ën
 +ğ
Ën
;

1289 
	}
}

1293 
	$¿xI‹¿tÜD–Ch¬s
(
¿xI‹¿tÜ
 *
™
, 
size_t
 
couÁ
) {

1294 
™
->
key_Ën
 -ğ
couÁ
;

1295 
	}
}

1311 
	$¿xI‹¿tÜNextS‹p
(
¿xI‹¿tÜ
 *
™
, 
noup
) {

1312 ià(
™
->
æags
 & 
RAX_ITER_EOF
) {

1314 } ià(
™
->
æags
 & 
RAX_ITER_JUST_SEEKED
) {

1315 
™
->
æags
 &ğ~
RAX_ITER_JUST_SEEKED
;

1321 
size_t
 
Üig_key_Ën
 = 
™
->
key_Ën
;

1322 
size_t
 
Üig_¡ack_™ems
 = 
™
->
¡ack
.
™ems
;

1323 
¿xNode
 *
Üig_node
 = 
™
->
node
;

1326 
chd»n
 = 
™
->
node
->
iscom´
 ? 1 : it->node->
size
;

1327 ià(!
noup
 && 
chd»n
) {

1328 
	`debugf
("GO DEEPER\n");

1332 ià(!
	`¿xSckPush
(&
™
->
¡ack
,™->
node
))  0;

1333 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
™
->
node
);

1334 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
,

1335 
™
->
node
->
iscom´
 ? it->node->
size
 : 1))  0;

1336 
	`memıy
(&
™
->
node
,
ı
,(it->node));

1339 ià(
™
->
node_cb
 && it->
	`node_cb
(&™->
node
))

1340 
	`memıy
(
ı
,&
™
->
node
,(it->node));

1344 ià(
™
->
node
->
iskey
) {

1345 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1354 
Şd_noup
 = 
noup
;

1357 ià(!
noup
 && 
™
->
node
 =ğ™->
¹
->
h—d
) {

1358 
™
->
æags
 |ğ
RAX_ITER_EOF
;

1359 
™
->
¡ack
.
™ems
 = 
Üig_¡ack_™ems
;

1360 
™
->
key_Ën
 = 
Üig_key_Ën
;

1361 
™
->
node
 = 
Üig_node
;

1366 
´evchd
 = 
™
->
key
[™->
key_Ën
-1];

1367 ià(!
noup
) {

1368 
™
->
node
 = 
	`¿xSckPİ
(&™->
¡ack
);

1370 
noup
 = 0;

1374 
tod–
 = 
™
->
node
->
iscom´
 ? it->node->
size
 : 1;

1375 
	`¿xI‹¿tÜD–Ch¬s
(
™
,
tod–
);

1379 ià(!
™
->
node
->
iscom´
 && it->node->
size
 > (
Şd_noup
 ? 0 : 1)) {

1380 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
™
->
node
);

1381 
i
 = 0;

1382 
i
 < 
™
->
node
->
size
) {

1383 
	`debugf
("SCAN NEXT %c\n", 
™
->
node
->
d©a
[
i
]);

1384 ià(
™
->
node
->
d©a
[
i
] > 
´evchd
) ;

1385 
i
++;

1386 
ı
++;

1388 ià(
i
 !ğ
™
->
node
->
size
) {

1389 
	`debugf
("SCAN found‡‚ew‚ode\n");

1390 
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
+
i
,1);

1391 ià(!
	`¿xSckPush
(&
™
->
¡ack
,™->
node
))  0;

1392 
	`memıy
(&
™
->
node
,
ı
,(it->node));

1395 ià(
™
->
node_cb
 && it->
	`node_cb
(&™->
node
))

1396 
	`memıy
(
ı
,&
™
->
node
,(it->node));

1397 ià(
™
->
node
->
iskey
) {

1398 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1407 
	}
}

1412 
	$¿xS“kG»©e¡
(
¿xI‹¿tÜ
 *
™
) {

1413 
™
->
node
->
size
) {

1414 ià(
™
->
node
->
iscom´
) {

1415 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
,

1416 
™
->
node
->
size
))  0;

1418 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
+™->node->
size
-1,1))

1421 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
™
->
node
);

1422 ià(!
	`¿xSckPush
(&
™
->
¡ack
,™->
node
))  0;

1423 
	`memıy
(&
™
->
node
,
ı
,(it->node));

1426 
	}
}

1431 
	$¿xI‹¿tÜP»vS‹p
(
¿xI‹¿tÜ
 *
™
, 
noup
) {

1432 ià(
™
->
æags
 & 
RAX_ITER_EOF
) {

1434 } ià(
™
->
æags
 & 
RAX_ITER_JUST_SEEKED
) {

1435 
™
->
æags
 &ğ~
RAX_ITER_JUST_SEEKED
;

1441 
size_t
 
Üig_key_Ën
 = 
™
->
key_Ën
;

1442 
size_t
 
Üig_¡ack_™ems
 = 
™
->
¡ack
.
™ems
;

1443 
¿xNode
 *
Üig_node
 = 
™
->
node
;

1446 
Şd_noup
 = 
noup
;

1449 ià(!
noup
 && 
™
->
node
 =ğ™->
¹
->
h—d
) {

1450 
™
->
æags
 |ğ
RAX_ITER_EOF
;

1451 
™
->
¡ack
.
™ems
 = 
Üig_¡ack_™ems
;

1452 
™
->
key_Ën
 = 
Üig_key_Ën
;

1453 
™
->
node
 = 
Üig_node
;

1457 
´evchd
 = 
™
->
key
[™->
key_Ën
-1];

1458 ià(!
noup
) {

1459 
™
->
node
 = 
	`¿xSckPİ
(&™->
¡ack
);

1461 
noup
 = 0;

1466 
tod–
 = 
™
->
node
->
iscom´
 ? it->node->
size
 : 1;

1467 
	`¿xI‹¿tÜD–Ch¬s
(
™
,
tod–
);

1471 ià(!
™
->
node
->
iscom´
 && it->node->
size
 > (
Şd_noup
 ? 0 : 1)) {

1472 
¿xNode
 **
ı
 = 
	`¿xNodeLa¡ChdPŒ
(
™
->
node
);

1473 
i
 = 
™
->
node
->
size
-1;

1474 
i
 >= 0) {

1475 
	`debugf
("SCAN PREV %c\n", 
™
->
node
->
d©a
[
i
]);

1476 ià(
™
->
node
->
d©a
[
i
] < 
´evchd
) ;

1477 
i
--;

1478 
ı
--;

1483 ià(
i
 != -1) {

1484 
	`debugf
("SCAN found‡‚ew‚ode\n");

1486 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
+
i
,1))  0;

1487 ià(!
	`¿xSckPush
(&
™
->
¡ack
,™->
node
))  0;

1488 
	`memıy
(&
™
->
node
,
ı
,(it->node));

1490 ià(!
	`¿xS“kG»©e¡
(
™
))  0;

1497 ià(
™
->
node
->
iskey
) {

1498 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1502 
	}
}

1508 
	$¿xS“k
(
¿xI‹¿tÜ
 *
™
, cÚ¡ *
İ
, *
–e
, 
size_t
 
Ën
) {

1509 
eq
 = 0, 
É
 = 0, 
gt
 = 0, 
fœ¡
 = 0, 
Ï¡
 = 0;

1511 
™
->
¡ack
.
™ems
 = 0;

1512 
™
->
æags
 |ğ
RAX_ITER_JUST_SEEKED
;

1513 
™
->
æags
 &ğ~
RAX_ITER_EOF
;

1514 
™
->
key_Ën
 = 0;

1515 
™
->
node
 = 
NULL
;

1518 ià(
İ
[0] == '>') {

1519 
gt
 = 1;

1520 ià(
İ
[1] =ğ'='è
eq
 = 1;

1521 } ià(
İ
[0] == '<') {

1522 
É
 = 1;

1523 ià(
İ
[1] =ğ'='è
eq
 = 1;

1524 } ià(
İ
[0] == '=') {

1525 
eq
 = 1;

1526 } ià(
İ
[0] == '^') {

1527 
fœ¡
 = 1;

1528 } ià(
İ
[0] == '$') {

1529 
Ï¡
 = 1;

1531 
”ºo
 = 0;

1537 ià(
™
->
¹
->
num–e
 == 0) {

1538 
™
->
æags
 |ğ
RAX_ITER_EOF
;

1542 ià(
fœ¡
) {

1545  
	`¿xS“k
(
™
,">=",
NULL
,0);

1548 ià(
Ï¡
) {

1551 
™
->
node
 = it->
¹
->
h—d
;

1552 ià(!
	`¿xS“kG»©e¡
(
™
))  0;

1553 
	`as£¹
(
™
->
node
->
iskey
);

1554 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1561 
¥l™pos
 = 0;

1562 
size_t
 
i
 = 
	`¿xLowW®k
(
™
->
¹
,
–e
,
Ën
,&™->
node
,
NULL
,&
¥l™pos
,&™->
¡ack
);

1565 ià(
™
->
¡ack
.
oom
)  0;

1567 ià(
eq
 && 
i
 =ğ
Ën
 && (!
™
->
node
->
iscom´
 || 
¥l™pos
 == 0) &&

1568 
™
->
node
->
iskey
)

1572 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
–e
,
Ën
))  0;

1573 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1574 } ià(
É
 || 
gt
) {

1580 ià(!
	`¿xSckPush
(&
™
->
¡ack
,™->
node
))  0;

1581 
size_t
 
j
 = 1; j < 
™
->
¡ack
.
™ems
; j++) {

1582 
¿xNode
 *
·»Á
 = 
™
->
¡ack
.¡ack[
j
-1];

1583 
¿xNode
 *
chd
 = 
™
->
¡ack
.¡ack[
j
];

1584 ià(
·»Á
->
iscom´
) {

1585 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
·»Á
->
d©a
,·»Á->
size
))

1588 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
·»Á
);

1589 *
p
 = 
·»Á
->
d©a
;

1591 
¿xNode
 *
aux
;

1592 
	`memıy
(&
aux
,
ı
,(aux));

1593 ià(
aux
 =ğ
chd
) ;

1594 
ı
++;

1595 
p
++;

1597 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
p
,1))  0;

1600 
	`¿xSckPİ
(&
™
->
¡ack
);

1604 
	`debugf
("After initial seek: i=%d†en=%d key=%.*s\n",

1605 ()
i
, ()
Ën
, ()
™
->
key_Ën
, it->
key
);

1606 ià(
i
 !ğ
Ën
 && !
™
->
node
->
iscom´
) {

1612 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
–e
+
i
,1))  0;

1613 
	`debugf
("Seek‚ormal‚ode on mismatch: %.*s\n",

1614 ()
™
->
key_Ën
, (*)™->
key
);

1616 
™
->
æags
 &ğ~
RAX_ITER_JUST_SEEKED
;

1617 ià(
É
 && !
	`¿xI‹¿tÜP»vS‹p
(
™
,1))  0;

1618 ià(
gt
 && !
	`¿xI‹¿tÜNextS‹p
(
™
,1))  0;

1619 
™
->
æags
 |ğ
RAX_ITER_JUST_SEEKED
;

1620 } ià(
i
 !ğ
Ën
 && 
™
->
node
->
iscom´
) {

1621 
	`debugf
("Compressed mismatch: %.*s\n",

1622 ()
™
->
key_Ën
, (*)™->
key
);

1624 
nodech¬
 = 
™
->
node
->
d©a
[
¥l™pos
];

1625 
keych¬
 = 
–e
[
i
];

1626 
™
->
æags
 &ğ~
RAX_ITER_JUST_SEEKED
;

1627 ià(
gt
) {

1631 ià(
nodech¬
 > 
keych¬
) {

1632 ià(!
	`¿xI‹¿tÜNextS‹p
(
™
,0))  0;

1634 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
,™->node->
size
))

1636 ià(!
	`¿xI‹¿tÜNextS‹p
(
™
,1))  0;

1639 ià(
É
) {

1644 ià(
nodech¬
 < 
keych¬
) {

1645 ià(!
	`¿xS“kG»©e¡
(
™
))  0;

1646 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1648 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,™->
node
->
d©a
,™->node->
size
))

1650 ià(!
	`¿xI‹¿tÜP»vS‹p
(
™
,1))  0;

1653 
™
->
æags
 |ğ
RAX_ITER_JUST_SEEKED
;

1655 
	`debugf
("No mismatch: %.*s\n",

1656 ()
™
->
key_Ën
, (*)™->
key
);

1662 
™
->
æags
 &ğ~
RAX_ITER_JUST_SEEKED
;

1663 ià(
™
->
node
->
iscom´
 && it->node->
iskey
 && 
¥l™pos
 && 
É
) {

1676 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1678 ià(
gt
 && !
	`¿xI‹¿tÜNextS‹p
(
™
,0))  0;

1679 ià(
É
 && !
	`¿xI‹¿tÜP»vS‹p
(
™
,0))  0;

1681 
™
->
æags
 |ğ
RAX_ITER_JUST_SEEKED
;

1685 
™
->
æags
 |ğ
RAX_ITER_EOF
;

1689 
	}
}

1694 
	$¿xNext
(
¿xI‹¿tÜ
 *
™
) {

1695 ià(!
	`¿xI‹¿tÜNextS‹p
(
™
,0)) {

1696 
”ºo
 = 
ENOMEM
;

1699 ià(
™
->
æags
 & 
RAX_ITER_EOF
) {

1700 
”ºo
 = 0;

1704 
	}
}

1709 
	$¿xP»v
(
¿xI‹¿tÜ
 *
™
) {

1710 ià(!
	`¿xI‹¿tÜP»vS‹p
(
™
,0)) {

1711 
”ºo
 = 
ENOMEM
;

1714 ià(
™
->
æags
 & 
RAX_ITER_EOF
) {

1715 
”ºo
 = 0;

1719 
	}
}

1733 
	$¿xRªdomW®k
(
¿xI‹¿tÜ
 *
™
, 
size_t
 
¡•s
) {

1734 ià(
™
->
¹
->
num–e
 == 0) {

1735 
™
->
æags
 |ğ
RAX_ITER_EOF
;

1739 ià(
¡•s
 == 0) {

1740 
size_t
 
æe
 = 
	`æoÜ
(
	`log
(
™
->
¹
->
num–e
));

1741 
æe
 *= 2;

1742 
¡•s
 = 1 + 
	`¿nd
(è% 
æe
;

1745 
¿xNode
 *
n
 = 
™
->
node
;

1746 
¡•s
 > 0 || !
n
->
iskey
) {

1747 
numchd»n
 = 
n
->
iscom´
 ? 1 :‚->
size
;

1748 
r
 = 
	`¿nd
(è% (
numchd»n
+(
n
 !ğ
™
->
¹
->
h—d
));

1750 ià(
r
 =ğ
numchd»n
) {

1752 
n
 = 
	`¿xSckPİ
(&
™
->
¡ack
);

1753 
tod–
 = 
n
->
iscom´
 ?‚->
size
 : 1;

1754 
	`¿xI‹¿tÜD–Ch¬s
(
™
,
tod–
);

1757 ià(
n
->
iscom´
) {

1758 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
n
->
d©a
,n->
size
))  0;

1760 ià(!
	`¿xI‹¿tÜAddCh¬s
(
™
,
n
->
d©a
+
r
,1))  0;

1762 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
n
)+
r
;

1763 ià(!
	`¿xSckPush
(&
™
->
¡ack
,
n
))  0;

1764 
	`memıy
(&
n
,
ı
,(n));

1766 ià(
n
->
iskey
è
¡•s
--;

1768 
™
->
node
 = 
n
;

1769 
™
->
d©a
 = 
	`¿xG‘D©a
(™->
node
);

1771 
	}
}

1776 
	$¿xCom·»
(
¿xI‹¿tÜ
 *
™”
, cÚ¡ *
İ
, *
key
, 
size_t
 
key_Ën
) {

1777 
eq
 = 0, 
É
 = 0, 
gt
 = 0;

1779 ià(
İ
[0] =ğ'=' || op[1] =ğ'='è
eq
 = 1;

1780 ià(
İ
[0] =ğ'>'è
gt
 = 1;

1781 ià(
İ
[0] =ğ'<'è
É
 = 1;

1782 ià(
İ
[1] != '=')  0;

1784 
size_t
 
mšËn
 = 
key_Ën
 < 
™”
->key_len ? key_len : iter->key_len;

1785 
cmp
 = 
	`memcmp
(
™”
->
key
,key,
mšËn
);

1788 ià(
É
 =ğ0 && 
gt
 =ğ0è 
cmp
 =ğ0 && 
key_Ën
 =ğ
™”
->key_len;

1791 ià(
cmp
 == 0) {

1793 ià(
eq
 && 
key_Ën
 =ğ
™”
->key_len)  1;

1794 ià(
É
è 
™”
->
key_Ën
 < key_len;

1795 ià(
gt
è 
™”
->
key_Ën
 > key_len;

1797 } ià(
cmp
 > 0) {

1798  
gt
 ? 1 : 0;

1800  
É
 ? 1 : 0;

1802 
	}
}

1805 
	$¿xStİ
(
¿xI‹¿tÜ
 *
™
) {

1806 ià(
™
->
key
 !ğ™->
key_¡©ic_¡ršg
è
	`¿x_ä“
(it->key);

1807 
	`¿xSckF»e
(&
™
->
¡ack
);

1808 
	}
}

1814 
	$¿xEOF
(
¿xI‹¿tÜ
 *
™
) {

1815  
™
->
æags
 & 
RAX_ITER_EOF
;

1816 
	}
}

1819 
ušt64_t
 
	$¿xSize
(
¿x
 *rax) {

1820  
¿x
->
num–e
;

1821 
	}
}

1851 
	$¿xRecursiveShow
(
Ëv–
, 
Íad
, 
¿xNode
 *
n
) {

1852 
s
 = 
n
->
iscom´
 ? '"' : '[';

1853 
e
 = 
n
->
iscom´
 ? '"' : ']';

1855 
numch¬s
 = 
	`´štf
("%c%.*s%c", 
s
, 
n
->
size
,‚->
d©a
, 
e
);

1856 ià(
n
->
iskey
) {

1857 
numch¬s
 +ğ
	`´štf
("=%p",
	`¿xG‘D©a
(
n
));

1860 
numchd»n
 = 
n
->
iscom´
 ? 1 :‚->
size
;

1863 ià(
Ëv–
) {

1864 
Íad
 +ğ(
numchd»n
 > 1) ? 7 : 4;

1865 ià(
numchd»n
 =ğ1è
Íad
 +ğ
numch¬s
;

1867 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
n
);

1868 
i
 = 0; i < 
numchd»n
; i++) {

1869 *
b¿nch
 = " `-(%c) ";

1870 ià(
numchd»n
 > 1) {

1871 
	`´štf
("\n");

1872 
j
 = 0; j < 
Íad
; j++è
	`putch¬
(' ');

1873 
	`´štf
(
b¿nch
,
n
->
d©a
[
i
]);

1875 
	`´štf
(" -> ");

1877 
¿xNode
 *
chd
;

1878 
	`memıy
(&
chd
,
ı
,(child));

1879 
	`¿xRecursiveShow
(
Ëv–
+1,
Íad
,
chd
);

1880 
ı
++;

1882 
	}
}

1885 
	$¿xShow
(
¿x
 *rax) {

1886 
	`¿xRecursiveShow
(0,0,
¿x
->
h—d
);

1887 
	`putch¬
('\n');

1888 
	}
}

1891 
	$¿xDebugShowNode
(cÚ¡ *
msg
, 
¿xNode
 *
n
) {

1892 ià(
¿xDebugMsg
 == 0) ;

1893 
	`´štf
("%s: %p [%.*s] key:%d size:%d children:",

1894 
msg
, (*)
n
, (ê->
size
, (*ê->
d©a
,‚->
iskey
,‚->size);

1895 
numşd
 = 
n
->
iscom´
 ? 1 :‚->
size
;

1896 
¿xNode
 **
şd±r
 = 
	`¿xNodeLa¡ChdPŒ
(
n
è- (
numşd
-1);

1897 
numşd
--) {

1898 
¿xNode
 *
chd
;

1899 
	`memıy
(&
chd
,
şd±r
,(child));

1900 
şd±r
++;

1901 
	`´štf
("%°", (*)
chd
);

1903 
	`´štf
("\n");

1904 
	`fæush
(
¡dout
);

1905 
	}
}

1924 
	$¿xTouch
(
¿xNode
 *
n
) {

1925 
	`debugf
("Touchšg %p\n", (*)
n
);

1926 
sum
 = 0;

1927 ià(
n
->
iskey
) {

1928 
sum
 +ğ()
	`¿xG‘D©a
(
n
);

1931 
numchd»n
 = 
n
->
iscom´
 ? 1 :‚->
size
;

1932 
¿xNode
 **
ı
 = 
	`¿xNodeFœ¡ChdPŒ
(
n
);

1933 
couÁ
 = 0;

1934 
i
 = 0; i < 
numchd»n
; i++) {

1935 ià(
numchd»n
 > 1) {

1936 
sum
 +ğ()
n
->
d©a
[
i
];

1938 
¿xNode
 *
chd
;

1939 
	`memıy
(&
chd
,
ı
,(child));

1940 ià(
chd
 =ğ(*)0x65d1760è
couÁ
++;

1941 ià(
couÁ
 > 1è
	`ex™
(1);

1942 
sum
 +ğ
	`¿xTouch
(
chd
);

1943 
ı
++;

1945  
sum
;

1946 
	}
}

	@rax.h

31 #iâdeà
RAX_H


32 
	#RAX_H


	)

34 
	~<¡dšt.h
>

97 
	#RAX_NODE_MAX_SIZE
 ((1<<29)-1)

	)

98 
	s¿xNode
 {

99 
ušt32_t
 
	miskey
:1;

100 
ušt32_t
 
	mi¢uÎ
:1;

101 
ušt32_t
 
	miscom´
:1;

102 
ušt32_t
 
	msize
:29;

130 
	md©a
[];

131 } 
	t¿xNode
;

133 
	s¿x
 {

134 
¿xNode
 *
	mh—d
;

135 
ušt64_t
 
	mnum–e
;

136 
ušt64_t
 
	mnumnodes
;

137 } 
	t¿x
;

142 
	#RAX_STACK_STATIC_ITEMS
 32

	)

143 
	s¿xSck
 {

144 **
	m¡ack
;

145 
size_t
 
	m™ems
, 
	mmax™ems
;

148 *
	m¡©ic_™ems
[
RAX_STACK_STATIC_ITEMS
];

149 
	moom
;

150 } 
	t¿xSck
;

165 (*
	t¿xNodeC®lback
)(
	t¿xNode
 **
	tnod”ef
);

168 
	#RAX_ITER_STATIC_LEN
 128

	)

169 
	#RAX_ITER_JUST_SEEKED
 (1<<0è

	)

172 
	#RAX_ITER_EOF
 (1<<1è

	)

173 
	#RAX_ITER_SAFE
 (1<<2è

	)

175 
	s¿xI‹¿tÜ
 {

176 
æags
;

177 
¿x
 *
¹
;

178 *
key
;

179 *
d©a
;

180 
size_t
 
key_Ën
;

181 
size_t
 
key_max
;

182 
key_¡©ic_¡ršg
[
RAX_ITER_STATIC_LEN
];

183 
¿xNode
 *
node
;

184 
¿xSck
 
¡ack
;

185 
¿xNodeC®lback
 
node_cb
;

186 } 
	t¿xI‹¿tÜ
;

189 *
¿xNÙFound
;

192 
¿x
 *
	`¿xNew
();

193 
	`¿xIn£¹
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, *
d©a
, **
Şd
);

194 
	`¿xTryIn£¹
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, *
d©a
, **
Şd
);

195 
	`¿xRemove
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
, **
Şd
);

196 *
	`¿xFšd
(
¿x
 *¿x, *
s
, 
size_t
 
Ën
);

197 
	`¿xF»e
(
¿x
 *rax);

198 
	`¿xF»eW™hC®lback
(
¿x
 *¿x, (*
ä“_ÿÎback
)(*));

199 
	`¿xS¹
(
¿xI‹¿tÜ
 *
™
, 
¿x
 *
¹
);

200 
	`¿xS“k
(
¿xI‹¿tÜ
 *
™
, cÚ¡ *
İ
, *
–e
, 
size_t
 
Ën
);

201 
	`¿xNext
(
¿xI‹¿tÜ
 *
™
);

202 
	`¿xP»v
(
¿xI‹¿tÜ
 *
™
);

203 
	`¿xRªdomW®k
(
¿xI‹¿tÜ
 *
™
, 
size_t
 
¡•s
);

204 
	`¿xCom·»
(
¿xI‹¿tÜ
 *
™”
, cÚ¡ *
İ
, *
key
, 
size_t
 
key_Ën
);

205 
	`¿xStİ
(
¿xI‹¿tÜ
 *
™
);

206 
	`¿xEOF
(
¿xI‹¿tÜ
 *
™
);

207 
	`¿xShow
(
¿x
 *rax);

208 
ušt64_t
 
	`¿xSize
(
¿x
 *rax);

209 
	`¿xTouch
(
¿xNode
 *
n
);

210 
	`¿xS‘DebugMsg
(
Úoff
);

214 
	`¿xS‘D©a
(
¿xNode
 *
n
, *
d©a
);

	@rax_malloc.h

38 #iâdeà
RAX_ALLOC_H


39 
	#RAX_ALLOC_H


	)

40 
	~"zm®loc.h
"

41 
	#¿x_m®loc
 
zm®loc


	)

42 
	#¿x_»®loc
 
z»®loc


	)

43 
	#¿x_ä“
 
zä“


	)

	@rdb.c

30 
	~"£rv”.h
"

31 
	~"lzf.h
"

32 
	~"zm­.h
"

33 
	~"’dŸncÚv.h
"

34 
	~"¡»am.h
"

36 
	~<m©h.h
>

37 
	~<sys/ty³s.h
>

38 
	~<sys/time.h
>

39 
	~<sys/»sourû.h
>

40 
	~<sys/wa™.h
>

41 
	~<¬·/š‘.h
>

42 
	~<sys/¡©.h
>

43 
	~<sys/·¿m.h
>

46 
	#rdbEx™R•ÜtCÜru±RDB
(...è
	`rdbR•ÜtE¼Ü
(1, 
__LINE__
,
__VA_ARGS__
)

	)

48 
	#rdbR•ÜtR—dE¼Ü
(...è
	`rdbR•ÜtE¼Ü
(0, 
__LINE__
,
__VA_ARGS__
)

	)

50 * 
	grdbFeBešgLßded
 = 
NULL
;

51 
rdbCheckMode
;

52 
rdbCheckE¼Ü
(cÚ¡ *
fmt
, ...);

53 
rdbCheckS‘E¼Ü
(cÚ¡ *
fmt
, ...);

55 
	$rdbR•ÜtE¼Ü
(
cÜru±iÚ_”rÜ
, 
lš’um
, *
»asÚ
, ...) {

56 
va_li¡
 
­
;

57 
msg
[1024];

58 
Ën
;

60 
Ën
 = 
	`¢´štf
(
msg
,(msg),

62 ()
£rv”
.
lßdšg_lßded_by‹s
, 
lš’um
);

63 
	`va_¡¬t
(
­
,
»asÚ
);

64 
	`v¢´štf
(
msg
+
Ën
,(msg)-Ën,
»asÚ
,
­
);

65 
	`va_’d
(
­
);

67 ià(!
rdbCheckMode
) {

68 ià(
rdbFeBešgLßded
 || 
cÜru±iÚ_”rÜ
) {

69 
	`£rv”Log
(
LL_WARNING
, "%s", 
msg
);

70 *
¬gv
[2] = {"",
rdbFeBešgLßded
};

71 
	`»dis_check_rdb_maš
(2,
¬gv
,
NULL
);

73 
	`£rv”Log
(
LL_WARNING
, "%s. Fau»†ßdšg„db fÜm© from sock‘,‡ssumšg cÚÃùiÚƒ¼Ü,„esumšg o³¿tiÚ.", 
msg
);

77 
	`rdbCheckE¼Ü
("%s",
msg
);

79 
	`£rv”Log
(
LL_WARNING
, "Terminating server‡fter„db file„eading failure.");

80 
	`ex™
(1);

81 
	}
}

83 
	$rdbWr™eRaw
(
rio
 *
rdb
, *
p
, 
size_t
 
Ën
) {

84 ià(
rdb
 && 
	`rioWr™e
Ôdb,
p
,
Ën
) == 0)

86  
Ën
;

87 
	}
}

89 
	$rdbSaveTy³
(
rio
 *
rdb
, 
ty³
) {

90  
	`rdbWr™eRaw
(
rdb
,&
ty³
,1);

91 
	}
}

96 
	$rdbLßdTy³
(
rio
 *
rdb
) {

97 
ty³
;

98 ià(
	`rioR—d
(
rdb
,&
ty³
,1) == 0)  -1;

99  
ty³
;

100 
	}
}

107 
time_t
 
	$rdbLßdTime
(
rio
 *
rdb
) {

108 
št32_t
 
t32
;

109 ià(
	`rioR—d
(
rdb
,&
t32
,4) == 0)  -1;

110  (
time_t
)
t32
;

111 
	}
}

113 
	$rdbSaveMli£cÚdTime
(
rio
 *
rdb
, 
t
) {

114 
št64_t
 
t64
 = (št64_tè
t
;

115 
	`mem»v64ifbe
(&
t64
);

116  
	`rdbWr™eRaw
(
rdb
,&
t64
,8);

117 
	}
}

134 
	$rdbLßdMli£cÚdTime
(
rio
 *
rdb
, 
rdbv”
) {

135 
št64_t
 
t64
;

136 ià(
	`rioR—d
(
rdb
,&
t64
,8è=ğ0è 
LLONG_MAX
;

137 ià(
rdbv”
 >= 9)

138 
	`mem»v64ifbe
(&
t64
);

139  ()
t64
;

140 
	}
}

145 
	$rdbSaveL’
(
rio
 *
rdb
, 
ušt64_t
 
Ën
) {

146 
buf
[2];

147 
size_t
 
nwr™‹n
;

149 ià(
Ën
 < (1<<6)) {

151 
buf
[0] = (
Ën
&0xFF)|(
RDB_6BITLEN
<<6);

152 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,1) == -1)  -1;

153 
nwr™‹n
 = 1;

154 } ià(
Ën
 < (1<<14)) {

156 
buf
[0] = ((
Ën
>>8)&0xFF)|(
RDB_14BITLEN
<<6);

157 
buf
[1] = 
Ën
&0xFF;

158 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,2) == -1)  -1;

159 
nwr™‹n
 = 2;

160 } ià(
Ën
 <ğ
UINT32_MAX
) {

162 
buf
[0] = 
RDB_32BITLEN
;

163 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,1) == -1)  -1;

164 
ušt32_t
 
Ën32
 = 
	`htÚl
(
Ën
);

165 ià(
	`rdbWr™eRaw
(
rdb
,&
Ën32
,4) == -1)  -1;

166 
nwr™‹n
 = 1+4;

169 
buf
[0] = 
RDB_64BITLEN
;

170 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,1) == -1)  -1;

171 
Ën
 = 
	`htÚu64
(len);

172 ià(
	`rdbWr™eRaw
(
rdb
,&
Ën
,8) == -1)  -1;

173 
nwr™‹n
 = 1+8;

175  
nwr™‹n
;

176 
	}
}

188 
	$rdbLßdL’ByRef
(
rio
 *
rdb
, *
i£ncoded
, 
ušt64_t
 *
ËÅŒ
) {

189 
buf
[2];

190 
ty³
;

192 ià(
i£ncoded
) *isencoded = 0;

193 ià(
	`rioR—d
(
rdb
,
buf
,1) == 0)  -1;

194 
ty³
 = (
buf
[0]&0xC0)>>6;

195 ià(
ty³
 =ğ
RDB_ENCVAL
) {

197 ià(
i£ncoded
) *isencoded = 1;

198 *
ËÅŒ
 = 
buf
[0]&0x3F;

199 } ià(
ty³
 =ğ
RDB_6BITLEN
) {

201 *
ËÅŒ
 = 
buf
[0]&0x3F;

202 } ià(
ty³
 =ğ
RDB_14BITLEN
) {

204 ià(
	`rioR—d
(
rdb
,
buf
+1,1) == 0)  -1;

205 *
ËÅŒ
 = ((
buf
[0]&0x3F)<<8)|buf[1];

206 } ià(
buf
[0] =ğ
RDB_32BITLEN
) {

208 
ušt32_t
 
Ën
;

209 ià(
	`rioR—d
(
rdb
,&
Ën
,4) == 0)  -1;

210 *
ËÅŒ
 = 
	`Áohl
(
Ën
);

211 } ià(
buf
[0] =ğ
RDB_64BITLEN
) {

213 
ušt64_t
 
Ën
;

214 ià(
	`rioR—d
(
rdb
,&
Ën
,8) == 0)  -1;

215 *
ËÅŒ
 = 
	`Áohu64
(
Ën
);

217 
	`rdbEx™R•ÜtCÜru±RDB
(

218 "UnknowÀËngthƒncodšg %d iÀrdbLßdL’()",
ty³
);

222 
	}
}

228 
ušt64_t
 
	$rdbLßdL’
(
rio
 *
rdb
, *
i£ncoded
) {

229 
ušt64_t
 
Ën
;

231 ià(
	`rdbLßdL’ByRef
(
rdb
,
i£ncoded
,&
Ën
è=ğ-1è 
RDB_LENERR
;

232  
Ën
;

233 
	}
}

239 
	$rdbEncodeIÁeg”
(
v®ue
, *
’c
) {

240 ià(
v®ue
 >= -(1<<7) && value <= (1<<7)-1) {

241 
’c
[0] = (
RDB_ENCVAL
<<6)|
RDB_ENC_INT8
;

242 
’c
[1] = 
v®ue
&0xFF;

244 } ià(
v®ue
 >= -(1<<15) && value <= (1<<15)-1) {

245 
’c
[0] = (
RDB_ENCVAL
<<6)|
RDB_ENC_INT16
;

246 
’c
[1] = 
v®ue
&0xFF;

247 
’c
[2] = (
v®ue
>>8)&0xFF;

249 } ià(
v®ue
 >= -(()1<<31) && value <= (()1<<31)-1) {

250 
’c
[0] = (
RDB_ENCVAL
<<6)|
RDB_ENC_INT32
;

251 
’c
[1] = 
v®ue
&0xFF;

252 
’c
[2] = (
v®ue
>>8)&0xFF;

253 
’c
[3] = (
v®ue
>>16)&0xFF;

254 
’c
[4] = (
v®ue
>>24)&0xFF;

259 
	}
}

264 *
	$rdbLßdIÁeg”Objeù
(
rio
 *
rdb
, 
’ùy³
, 
æags
, 
size_t
 *
ËÅŒ
) {

265 
¶aš
 = 
æags
 & 
RDB_LOAD_PLAIN
;

266 
sds
 = 
æags
 & 
RDB_LOAD_SDS
;

267 
’code
 = 
æags
 & 
RDB_LOAD_ENC
;

268 
’c
[4];

269 
v®
;

271 ià(
’ùy³
 =ğ
RDB_ENC_INT8
) {

272 ià(
	`rioR—d
(
rdb
,
’c
,1è=ğ0è 
NULL
;

273 
v®
 = (sigÃd )
’c
[0];

274 } ià(
’ùy³
 =ğ
RDB_ENC_INT16
) {

275 
ušt16_t
 
v
;

276 ià(
	`rioR—d
(
rdb
,
’c
,2è=ğ0è 
NULL
;

277 
v
 = 
’c
[0]|(enc[1]<<8);

278 
v®
 = (
št16_t
)
v
;

279 } ià(
’ùy³
 =ğ
RDB_ENC_INT32
) {

280 
ušt32_t
 
v
;

281 ià(
	`rioR—d
(
rdb
,
’c
,4è=ğ0è 
NULL
;

282 
v
 = 
’c
[0]|(enc[1]<<8)|(enc[2]<<16)|(enc[3]<<24);

283 
v®
 = (
št32_t
)
v
;

285 
	`rdbEx™R•ÜtCÜru±RDB
("UnknowÀRDB iÁeg”ƒncodšgy³ %d",
’ùy³
);

286  
NULL
;

288 ià(
¶aš
 || 
sds
) {

289 
buf
[
LONG_STR_SIZE
], *
p
;

290 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
v®
);

291 ià(
ËÅŒ
è*ËÅŒ = 
Ën
;

292 
p
 = 
¶aš
 ? 
	`zm®loc
(
Ën
è: 
	`sd¢ewËn
(
SDS_NOINIT
,len);

293 
	`memıy
(
p
,
buf
,
Ën
);

294  
p
;

295 } ià(
’code
) {

296  
	`ü—‹SŒšgObjeùFromLÚgLÚgFÜV®ue
(
v®
);

298  
	`ü—‹Objeù
(
OBJ_STRING
,
	`sdsäomlÚglÚg
(
v®
));

300 
	}
}

305 
	$rdbTryIÁeg”Encodšg
(*
s
, 
size_t
 
Ën
, *
’c
) {

306 
v®ue
;

307 *
’d±r
, 
buf
[32];

310 
v®ue
 = 
	`¡¹Şl
(
s
, &
’d±r
, 10);

311 ià(
’d±r
[0] != '\0')  0;

312 
	`Î2¡ršg
(
buf
,32,
v®ue
);

316 ià(
	`¡¾’
(
buf
è!ğ
Ën
 || 
	`memcmp
(buf,
s
,len))  0;

318  
	`rdbEncodeIÁeg”
(
v®ue
,
’c
);

319 
	}
}

321 
ssize_t
 
	$rdbSaveLzfBlob
(
rio
 *
rdb
, *
d©a
, 
size_t
 
com´ess_Ën
,

322 
size_t
 
Üigš®_Ën
) {

323 
by‹
;

324 
ssize_t
 
n
, 
nwr™‹n
 = 0;

327 
by‹
 = (
RDB_ENCVAL
<<6)|
RDB_ENC_LZF
;

328 ià((
n
 = 
	`rdbWr™eRaw
(
rdb
,&
by‹
,1)è=ğ-1è
wr™“¼
;

329 
nwr™‹n
 +ğ
n
;

331 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
com´ess_Ën
)è=ğ-1è
wr™“¼
;

332 
nwr™‹n
 +ğ
n
;

334 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
Üigš®_Ën
)è=ğ-1è
wr™“¼
;

335 
nwr™‹n
 +ğ
n
;

337 ià((
n
 = 
	`rdbWr™eRaw
(
rdb
,
d©a
,
com´ess_Ën
)è=ğ-1è
wr™“¼
;

338 
nwr™‹n
 +ğ
n
;

340  
nwr™‹n
;

342 
wr™“¼
:

344 
	}
}

346 
ssize_t
 
	$rdbSaveLzfSŒšgObjeù
(
rio
 *
rdb
, *
s
, 
size_t
 
Ën
) {

347 
size_t
 
com´Ën
, 
ou’
;

348 *
out
;

351 ià(
Ën
 <= 4)  0;

352 
ou’
 = 
Ën
-4;

353 ià((
out
 = 
	`zm®loc
(
ou’
+1)è=ğ
NULL
)  0;

354 
com´Ën
 = 
	`lzf_com´ess
(
s
, 
Ën
, 
out
, 
ou’
);

355 ià(
com´Ën
 == 0) {

356 
	`zä“
(
out
);

359 
ssize_t
 
nwr™‹n
 = 
	`rdbSaveLzfBlob
(
rdb
, 
out
, 
com´Ën
, 
Ën
);

360 
	`zä“
(
out
);

361  
nwr™‹n
;

362 
	}
}

367 *
	$rdbLßdLzfSŒšgObjeù
(
rio
 *
rdb
, 
æags
, 
size_t
 *
ËÅŒ
) {

368 
¶aš
 = 
æags
 & 
RDB_LOAD_PLAIN
;

369 
sds
 = 
æags
 & 
RDB_LOAD_SDS
;

370 
ušt64_t
 
Ën
, 
ş’
;

371 *
c
 = 
NULL
;

372 *
v®
 = 
NULL
;

374 ià((
ş’
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

375 ià((
Ën
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

376 ià((
c
 = 
	`zm®loc
(
ş’
)è=ğ
NULL
è
”r
;

379 ià(
¶aš
) {

380 
v®
 = 
	`zm®loc
(
Ën
);

382 
v®
 = 
	`sd¢ewËn
(
SDS_NOINIT
,
Ën
);

384 ià(
ËÅŒ
è*ËÅŒ = 
Ën
;

387 ià(
	`rioR—d
(
rdb
,
c
,
ş’
è=ğ0è
”r
;

388 ià(
	`lzf_decom´ess
(
c
,
ş’
,
v®
,
Ën
) == 0) {

389 
	`rdbEx™R•ÜtCÜru±RDB
("Invalid LZF compressed string");

391 
	`zä“
(
c
);

393 ià(
¶aš
 || 
sds
) {

394  
v®
;

396  
	`ü—‹Objeù
(
OBJ_STRING
,
v®
);

398 
”r
:

399 
	`zä“
(
c
);

400 ià(
¶aš
)

401 
	`zä“
(
v®
);

403 
	`sdsä“
(
v®
);

404  
NULL
;

405 
	}
}

409 
ssize_t
 
	$rdbSaveRawSŒšg
(
rio
 *
rdb
, *
s
, 
size_t
 
Ën
) {

410 
’ş’
;

411 
ssize_t
 
n
, 
nwr™‹n
 = 0;

414 ià(
Ën
 <= 11) {

415 
buf
[5];

416 ià((
’ş’
 = 
	`rdbTryIÁeg”Encodšg
((*)
s
,
Ën
,
buf
)) > 0) {

417 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,
’ş’
) == -1)  -1;

418  
’ş’
;

424 ià(
£rv”
.
rdb_com´essiÚ
 && 
Ën
 > 20) {

425 
n
 = 
	`rdbSaveLzfSŒšgObjeù
(
rdb
,
s
,
Ën
);

426 ià(
n
 == -1)  -1;

427 ià(
n
 > 0) ‚;

432 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
Ën
)) == -1)  -1;

433 
nwr™‹n
 +ğ
n
;

434 ià(
Ën
 > 0) {

435 ià(
	`rdbWr™eRaw
(
rdb
,
s
,
Ën
) == -1)  -1;

436 
nwr™‹n
 +ğ
Ën
;

438  
nwr™‹n
;

439 
	}
}

442 
ssize_t
 
	$rdbSaveLÚgLÚgAsSŒšgObjeù
(
rio
 *
rdb
, 
v®ue
) {

443 
buf
[32];

444 
ssize_t
 
n
, 
nwr™‹n
 = 0;

445 
’ş’
 = 
	`rdbEncodeIÁeg”
(
v®ue
,
buf
);

446 ià(
’ş’
 > 0) {

447  
	`rdbWr™eRaw
(
rdb
,
buf
,
’ş’
);

450 
’ş’
 = 
	`Î2¡ršg
((*)
buf
,32,
v®ue
);

451 
	`£rv”As£¹
(
’ş’
 < 32);

452 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
’ş’
)) == -1)  -1;

453 
nwr™‹n
 +ğ
n
;

454 ià((
n
 = 
	`rdbWr™eRaw
(
rdb
,
buf
,
’ş’
)) == -1)  -1;

455 
nwr™‹n
 +ğ
n
;

457  
nwr™‹n
;

458 
	}
}

461 
ssize_t
 
	$rdbSaveSŒšgObjeù
(
rio
 *
rdb
, 
robj
 *
obj
) {

464 ià(
obj
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

465  
	`rdbSaveLÚgLÚgAsSŒšgObjeù
(
rdb
,()
obj
->
±r
);

467 
	`£rv”As£¹W™hInfo
(
NULL
,
obj
,
	`sdsEncodedObjeù
(obj));

468  
	`rdbSaveRawSŒšg
(
rdb
,
obj
->
±r
,
	`sd¦’
(obj->ptr));

470 
	}
}

485 *
	$rdbG’”icLßdSŒšgObjeù
(
rio
 *
rdb
, 
æags
, 
size_t
 *
ËÅŒ
) {

486 
’code
 = 
æags
 & 
RDB_LOAD_ENC
;

487 
¶aš
 = 
æags
 & 
RDB_LOAD_PLAIN
;

488 
sds
 = 
æags
 & 
RDB_LOAD_SDS
;

489 
i£ncoded
;

490 
ušt64_t
 
Ën
;

492 
Ën
 = 
	`rdbLßdL’
(
rdb
,&
i£ncoded
);

493 ià(
i£ncoded
) {

494 
Ën
) {

495 
RDB_ENC_INT8
:

496 
RDB_ENC_INT16
:

497 
RDB_ENC_INT32
:

498  
	`rdbLßdIÁeg”Objeù
(
rdb
,
Ën
,
æags
,
ËÅŒ
);

499 
RDB_ENC_LZF
:

500  
	`rdbLßdLzfSŒšgObjeù
(
rdb
,
æags
,
ËÅŒ
);

502 
	`rdbEx™R•ÜtCÜru±RDB
("UnknowÀRDB sŒšgƒncodšgy³ %d",
Ën
);

503  
NULL
;

507 ià(
Ën
 =ğ
RDB_LENERR
è 
NULL
;

508 ià(
¶aš
 || 
sds
) {

509 *
buf
 = 
¶aš
 ? 
	`zm®loc
(
Ën
è: 
	`sd¢ewËn
(
SDS_NOINIT
,len);

510 ià(
ËÅŒ
è*ËÅŒ = 
Ën
;

511 ià(
Ën
 && 
	`rioR—d
(
rdb
,
buf
,len) == 0) {

512 ià(
¶aš
)

513 
	`zä“
(
buf
);

515 
	`sdsä“
(
buf
);

516  
NULL
;

518  
buf
;

520 
robj
 *
o
 = 
’code
 ? 
	`ü—‹SŒšgObjeù
(
SDS_NOINIT
,
Ën
) :

521 
	`ü—‹RawSŒšgObjeù
(
SDS_NOINIT
,
Ën
);

522 ià(
Ën
 && 
	`rioR—d
(
rdb
,
o
->
±r
,len) == 0) {

523 
	`deüRefCouÁ
(
o
);

524  
NULL
;

526  
o
;

528 
	}
}

530 
robj
 *
	$rdbLßdSŒšgObjeù
(
rio
 *
rdb
) {

531  
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_NONE
,
NULL
);

532 
	}
}

534 
robj
 *
	$rdbLßdEncodedSŒšgObjeù
(
rio
 *
rdb
) {

535  
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_ENC
,
NULL
);

536 
	}
}

546 
	$rdbSaveDoubËV®ue
(
rio
 *
rdb
, 
v®
) {

547 
buf
[128];

548 
Ën
;

550 ià(
	`i¢ª
(
v®
)) {

551 
buf
[0] = 253;

552 
Ën
 = 1;

553 } ià(!
	`isfš™e
(
v®
)) {

554 
Ën
 = 1;

555 
buf
[0] = (
v®
 < 0) ? 255 : 254;

557 #ià(
DBL_MANT_DIG
 >ğ52è&& (
LLONG_MAX
 == 0x7fffffffffffffffLL)

567 
mš
 = -4503599627370495;

568 
max
 = 4503599627370496;

569 ià(
v®
 > 
mš
 && v® < 
max
 && val == (()(()val)))

570 
	`Î2¡ršg
((*)
buf
+1,(buf)-1,()
v®
);

573 
	`¢´štf
((*)
buf
+1,(buf)-1,"%.17g",
v®
);

574 
buf
[0] = 
	`¡¾’
((*)buf+1);

575 
Ën
 = 
buf
[0]+1;

577  
	`rdbWr™eRaw
(
rdb
,
buf
,
Ën
);

578 
	}
}

581 
	$rdbLßdDoubËV®ue
(
rio
 *
rdb
, *
v®
) {

582 
buf
[256];

583 
Ën
;

585 ià(
	`rioR—d
(
rdb
,&
Ën
,1) == 0)  -1;

586 
Ën
) {

587 255: *
v®
 = 
R_NegInf
;  0;

588 254: *
v®
 = 
R_PosInf
;  0;

589 253: *
v®
 = 
R_Nª
;  0;

591 ià(
	`rioR—d
(
rdb
,
buf
,
Ën
) == 0)  -1;

592 
buf
[
Ën
] = '\0';

593 
	`ssÿnf
(
buf
, "%lg", 
v®
);

596 
	}
}

603 
	$rdbSaveBš¬yDoubËV®ue
(
rio
 *
rdb
, 
v®
) {

604 
	`mem»v64ifbe
(&
v®
);

605  
	`rdbWr™eRaw
(
rdb
,&
v®
,(val));

606 
	}
}

610 
	$rdbLßdBš¬yDoubËV®ue
(
rio
 *
rdb
, *
v®
) {

611 ià(
	`rioR—d
(
rdb
,
v®
,(*val)) == 0)  -1;

612 
	`mem»v64ifbe
(
v®
);

614 
	}
}

617 
	$rdbSaveBš¬yFlßtV®ue
(
rio
 *
rdb
, 
v®
) {

618 
	`mem»v32ifbe
(&
v®
);

619  
	`rdbWr™eRaw
(
rdb
,&
v®
,(val));

620 
	}
}

623 
	$rdbLßdBš¬yFlßtV®ue
(
rio
 *
rdb
, *
v®
) {

624 ià(
	`rioR—d
(
rdb
,
v®
,(*val)) == 0)  -1;

625 
	`mem»v32ifbe
(
v®
);

627 
	}
}

630 
	$rdbSaveObjeùTy³
(
rio
 *
rdb
, 
robj
 *
o
) {

631 
o
->
ty³
) {

632 
OBJ_STRING
:

633  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_STRING
);

634 
OBJ_LIST
:

635 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
)

636  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_LIST_QUICKLIST
);

638 
	`£rv”Pªic
("Unknown†istƒncoding");

639 
OBJ_SET
:

640 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
)

641  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_SET_INTSET
);

642 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

643  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_SET
);

645 
	`£rv”Pªic
("Unknown setƒncoding");

646 
OBJ_ZSET
:

647 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
)

648  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_ZSET_ZIPLIST
);

649 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
)

650  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_ZSET_2
);

652 
	`£rv”Pªic
("Unknown sorted setƒncoding");

653 
OBJ_HASH
:

654 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
)

655  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_HASH_ZIPLIST
);

656 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

657  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_HASH
);

659 
	`£rv”Pªic
("Unknown hashƒncoding");

660 
OBJ_STREAM
:

661  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_STREAM_LISTPACKS
);

662 
OBJ_MODULE
:

663  
	`rdbSaveTy³
(
rdb
,
RDB_TYPE_MODULE_2
);

665 
	`£rv”Pªic
("Unknown objectype");

668 
	}
}

672 
	$rdbLßdObjeùTy³
(
rio
 *
rdb
) {

673 
ty³
;

674 ià((
ty³
 = 
	`rdbLßdTy³
(
rdb
)) == -1)  -1;

675 ià(!
	`rdbIsObjeùTy³
(
ty³
))  -1;

676  
ty³
;

677 
	}
}

686 
ssize_t
 
	$rdbSaveSŒ—mPEL
(
rio
 *
rdb
, 
¿x
 *
³l
, 
Çcks
) {

687 
ssize_t
 
n
, 
nwr™‹n
 = 0;

690 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
	`¿xSize
(
³l
))) == -1)  -1;

691 
nwr™‹n
 +ğ
n
;

694 
¿xI‹¿tÜ
 
ri
;

695 
	`¿xS¹
(&
ri
,
³l
);

696 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

697 
	`¿xNext
(&
ri
)) {

700 ià((
n
 = 
	`rdbWr™eRaw
(
rdb
,
ri
.
key
,(
¡»amID
))) == -1)  -1;

701 
nwr™‹n
 +ğ
n
;

703 ià(
Çcks
) {

704 
¡»amNACK
 *
Çck
 = 
ri
.
d©a
;

705 ià((
n
 = 
	`rdbSaveMli£cÚdTime
(
rdb
,
Çck
->
d–iv”y_time
)) == -1)

707 
nwr™‹n
 +ğ
n
;

708 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
Çck
->
d–iv”y_couÁ
)) == -1)  -1;

709 
nwr™‹n
 +ğ
n
;

715 
	`¿xStİ
(&
ri
);

716  
nwr™‹n
;

717 
	}
}

722 
size_t
 
	$rdbSaveSŒ—mCÚsum”s
(
rio
 *
rdb
, 
¡»amCG
 *
cg
) {

723 
ssize_t
 
n
, 
nwr™‹n
 = 0;

726 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
	`¿xSize
(
cg
->
cÚsum”s
))) == -1)  -1;

727 
nwr™‹n
 +ğ
n
;

730 
¿xI‹¿tÜ
 
ri
;

731 
	`¿xS¹
(&
ri
,
cg
->
cÚsum”s
);

732 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

733 
	`¿xNext
(&
ri
)) {

734 
¡»amCÚsum”
 *
cÚsum”
 = 
ri
.
d©a
;

737 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
ri
.
key
,ri.
key_Ën
)) == -1)  -1;

738 
nwr™‹n
 +ğ
n
;

741 ià((
n
 = 
	`rdbSaveMli£cÚdTime
(
rdb
,
cÚsum”
->
£’_time
)) == -1)

743 
nwr™‹n
 +ğ
n
;

749 ià((
n
 = 
	`rdbSaveSŒ—mPEL
(
rdb
,
cÚsum”
->
³l
,0)) == -1)

751 
nwr™‹n
 +ğ
n
;

753 
	`¿xStİ
(&
ri
);

754  
nwr™‹n
;

755 
	}
}

759 
ssize_t
 
	$rdbSaveObjeù
(
rio
 *
rdb
, 
robj
 *
o
,„obj *
key
) {

760 
ssize_t
 
n
 = 0, 
nwr™‹n
 = 0;

762 ià(
o
->
ty³
 =ğ
OBJ_STRING
) {

764 ià((
n
 = 
	`rdbSaveSŒšgObjeù
(
rdb
,
o
)) == -1)  -1;

765 
nwr™‹n
 +ğ
n
;

766 } ià(
o
->
ty³
 =ğ
OBJ_LIST
) {

768 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

769 
quickli¡
 *
ql
 = 
o
->
±r
;

770 
quickli¡Node
 *
node
 = 
ql
->
h—d
;

772 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
ql
->
Ën
)) == -1)  -1;

773 
nwr™‹n
 +ğ
n
;

775 
node
) {

776 ià(
	`quickli¡NodeIsCom´es£d
(
node
)) {

777 *
d©a
;

778 
size_t
 
com´ess_Ën
 = 
	`quickli¡G‘Lzf
(
node
, &
d©a
);

779 ià((
n
 = 
	`rdbSaveLzfBlob
(
rdb
,
d©a
,
com´ess_Ën
,
node
->
sz
)) == -1)  -1;

780 
nwr™‹n
 +ğ
n
;

782 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
node
->
zl
,node->
sz
)) == -1)  -1;

783 
nwr™‹n
 +ğ
n
;

785 
node
 =‚ode->
Ãxt
;

788 
	`£rv”Pªic
("Unknown†istƒncoding");

790 } ià(
o
->
ty³
 =ğ
OBJ_SET
) {

792 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

793 
diù
 *
£t
 = 
o
->
±r
;

794 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
£t
);

795 
diùEÁry
 *
de
;

797 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
	`diùSize
(
£t
))) == -1) {

798 
	`diùR–—£I‹¿tÜ
(
di
);

801 
nwr™‹n
 +ğ
n
;

803 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

804 
sds
 
–e
 = 
	`diùG‘Key
(
de
);

805 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,(*)
–e
,
	`sd¦’
(ele)))

808 
	`diùR–—£I‹¿tÜ
(
di
);

811 
nwr™‹n
 +ğ
n
;

813 
	`diùR–—£I‹¿tÜ
(
di
);

814 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

815 
size_t
 
l
 = 
	`št£tBlobL’
((
št£t
*)
o
->
±r
);

817 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
o
->
±r
,
l
)) == -1)  -1;

818 
nwr™‹n
 +ğ
n
;

820 
	`£rv”Pªic
("Unknown setƒncoding");

822 } ià(
o
->
ty³
 =ğ
OBJ_ZSET
) {

824 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

825 
size_t
 
l
 = 
	`zli¡BlobL’
((*)
o
->
±r
);

827 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
o
->
±r
,
l
)) == -1)  -1;

828 
nwr™‹n
 +ğ
n
;

829 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

830 
z£t
 *
zs
 = 
o
->
±r
;

831 
zskli¡
 *
z¦
 = 
zs
->zsl;

833 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
z¦
->
Ëngth
)) == -1)  -1;

834 
nwr™‹n
 +ğ
n
;

842 
zskli¡Node
 *
zn
 = 
z¦
->

;

843 
zn
 !ğ
NULL
) {

844 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,

845 (*)
zn
->
–e
,
	`sd¦’
(zn->ele))) == -1)

849 
nwr™‹n
 +ğ
n
;

850 ià((
n
 = 
	`rdbSaveBš¬yDoubËV®ue
(
rdb
,
zn
->
scÜe
)) == -1)

852 
nwr™‹n
 +ğ
n
;

853 
zn
 = zn->
backw¬d
;

856 
	`£rv”Pªic
("Unknown sorted setƒncoding");

858 } ià(
o
->
ty³
 =ğ
OBJ_HASH
) {

860 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

861 
size_t
 
l
 = 
	`zli¡BlobL’
((*)
o
->
±r
);

863 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
o
->
±r
,
l
)) == -1)  -1;

864 
nwr™‹n
 +ğ
n
;

866 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

867 
diùI‹¿tÜ
 *
di
 = 
	`diùG‘I‹¿tÜ
(
o
->
±r
);

868 
diùEÁry
 *
de
;

870 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
	`diùSize
((
diù
*)
o
->
±r
))) == -1) {

871 
	`diùR–—£I‹¿tÜ
(
di
);

874 
nwr™‹n
 +ğ
n
;

876 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

877 
sds
 
f›ld
 = 
	`diùG‘Key
(
de
);

878 
sds
 
v®ue
 = 
	`diùG‘V®
(
de
);

880 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,(*)
f›ld
,

881 
	`sd¦’
(
f›ld
))) == -1)

883 
	`diùR–—£I‹¿tÜ
(
di
);

886 
nwr™‹n
 +ğ
n
;

887 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,(*)
v®ue
,

888 
	`sd¦’
(
v®ue
))) == -1)

890 
	`diùR–—£I‹¿tÜ
(
di
);

893 
nwr™‹n
 +ğ
n
;

895 
	`diùR–—£I‹¿tÜ
(
di
);

897 
	`£rv”Pªic
("Unknown hashƒncoding");

899 } ià(
o
->
ty³
 =ğ
OBJ_STREAM
) {

901 
¡»am
 *
s
 = 
o
->
±r
;

902 
¿x
 *¿x = 
s
->rax;

903 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
	`¿xSize
(
¿x
))) == -1)  -1;

904 
nwr™‹n
 +ğ
n
;

909 
¿xI‹¿tÜ
 
ri
;

910 
	`¿xS¹
(&
ri
,
¿x
);

911 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

912 
	`¿xNext
(&
ri
)) {

913 *
Í
 = 
ri
.
d©a
;

914 
size_t
 
Í_by‹s
 = 
	`ÍBy‹s
(
Í
);

915 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
ri
.
key
,ri.
key_Ën
)) == -1)  -1;

916 
nwr™‹n
 +ğ
n
;

917 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
Í
,
Í_by‹s
)) == -1)  -1;

918 
nwr™‹n
 +ğ
n
;

920 
	`¿xStİ
(&
ri
);

925 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
s
->
Ëngth
)) == -1)  -1;

926 
nwr™‹n
 +ğ
n
;

928 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
s
->
Ï¡_id
.
ms
)) == -1)  -1;

929 
nwr™‹n
 +ğ
n
;

930 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
s
->
Ï¡_id
.
£q
)) == -1)  -1;

931 
nwr™‹n
 +ğ
n
;

937 
size_t
 
num_cgroups
 = 
s
->
cgroups
 ? 
	`¿xSize
(s->cgroups) : 0;

938 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
num_cgroups
)) == -1)  -1;

939 
nwr™‹n
 +ğ
n
;

941 ià(
num_cgroups
) {

943 
	`¿xS¹
(&
ri
,
s
->
cgroups
);

944 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

945 
	`¿xNext
(&
ri
)) {

946 
¡»amCG
 *
cg
 = 
ri
.
d©a
;

949 ià((
n
 = 
	`rdbSaveRawSŒšg
(
rdb
,
ri
.
key
,ri.
key_Ën
)) == -1)

951 
nwr™‹n
 +ğ
n
;

954 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
cg
->
Ï¡_id
.
ms
)) == -1)  -1;

955 
nwr™‹n
 +ğ
n
;

956 ià((
n
 = 
	`rdbSaveL’
(
rdb
,
cg
->
Ï¡_id
.
£q
)) == -1)  -1;

957 
nwr™‹n
 +ğ
n
;

960 ià((
n
 = 
	`rdbSaveSŒ—mPEL
(
rdb
,
cg
->
³l
,1)) == -1)  -1;

961 
nwr™‹n
 +ğ
n
;

964 ià((
n
 = 
	`rdbSaveSŒ—mCÚsum”s
(
rdb
,
cg
)) == -1)  -1;

965 
nwr™‹n
 +ğ
n
;

967 
	`¿xStİ
(&
ri
);

969 } ià(
o
->
ty³
 =ğ
OBJ_MODULE
) {

971 
RedisModuËIO
 
io
;

972 
moduËV®ue
 *
mv
 = 
o
->
±r
;

973 
moduËTy³
 *
mt
 = 
mv
->
ty³
;

977 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
mt
->
id
);

978 ià(
»tv®
 == -1)  -1;

979 
io
.
by‹s
 +ğ
»tv®
;

982 
	`moduËIn™IOCÚ‹xt
(
io
,
mt
,
rdb
,
key
);

983 
mt
->
	`rdb_§ve
(&
io
,
mv
->
v®ue
);

984 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
RDB_MODULE_OPCODE_EOF
);

985 ià(
»tv®
 == -1)

986 
io
.
”rÜ
 = 1;

988 
io
.
by‹s
 +ğ
»tv®
;

990 ià(
io
.
ùx
) {

991 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

992 
	`zä“
(
io
.
ùx
);

994  
io
.
”rÜ
 ? -1 : (
ssize_t
)io.
by‹s
;

996 
	`£rv”Pªic
("Unknown objectype");

998  
nwr™‹n
;

999 
	}
}

1005 
size_t
 
	$rdbSavedObjeùL’
(
robj
 *
o
,„obj *
key
) {

1006 
ssize_t
 
Ën
 = 
	`rdbSaveObjeù
(
NULL
,
o
,
key
);

1007 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,
Ën
 != -1);

1008  
Ën
;

1009 
	}
}

1015 
	$rdbSaveKeyV®uePaœ
(
rio
 *
rdb
, 
robj
 *
key
,„obj *
v®
, 
expœ‘ime
) {

1016 
§v–ru
 = 
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LRU
;

1017 
§v–fu
 = 
£rv”
.
maxmemÜy_pŞicy
 & 
MAXMEMORY_FLAG_LFU
;

1020 ià(
expœ‘ime
 != -1) {

1021 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_EXPIRETIME_MS
) == -1)  -1;

1022 ià(
	`rdbSaveMli£cÚdTime
(
rdb
,
expœ‘ime
) == -1)  -1;

1026 ià(
§v–ru
) {

1027 
ušt64_t
 
idËtime
 = 
	`e¡im©eObjeùIdËTime
(
v®
);

1028 
idËtime
 /= 1000;

1029 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_IDLE
) == -1)  -1;

1030 ià(
	`rdbSaveL’
(
rdb
,
idËtime
) == -1)  -1;

1034 ià(
§v–fu
) {

1035 
ušt8_t
 
buf
[1];

1036 
buf
[0] = 
	`LFUDeüAndR‘uº
(
v®
);

1041 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_FREQ
) == -1)  -1;

1042 ià(
	`rdbWr™eRaw
(
rdb
,
buf
,1) == -1)  -1;

1046 ià(
	`rdbSaveObjeùTy³
(
rdb
,
v®
) == -1)  -1;

1047 ià(
	`rdbSaveSŒšgObjeù
(
rdb
,
key
) == -1)  -1;

1048 ià(
	`rdbSaveObjeù
(
rdb
,
v®
,
key
) == -1)  -1;

1051 ià(
£rv”
.
rdb_key_§ve_d–ay
)

1052 
	`u¦“p
(
£rv”
.
rdb_key_§ve_d–ay
);

1055 
	}
}

1058 
ssize_t
 
	$rdbSaveAuxF›ld
(
rio
 *
rdb
, *
key
, 
size_t
 
keyËn
, *
v®
, size_ˆ
v®Ën
) {

1059 
ssize_t
 
»t
, 
Ën
 = 0;

1060 ià((
»t
 = 
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_AUX
)) == -1)  -1;

1061 
Ën
 +ğ
»t
;

1062 ià((
»t
 = 
	`rdbSaveRawSŒšg
(
rdb
,
key
,
keyËn
)) == -1)  -1;

1063 
Ën
 +ğ
»t
;

1064 ià((
»t
 = 
	`rdbSaveRawSŒšg
(
rdb
,
v®
,
v®Ën
)) == -1)  -1;

1065 
Ën
 +ğ
»t
;

1066  
Ën
;

1067 
	}
}

1071 
ssize_t
 
	$rdbSaveAuxF›ldSŒSŒ
(
rio
 *
rdb
, *
key
, *
v®
) {

1072  
	`rdbSaveAuxF›ld
(
rdb
,
key
,
	`¡¾’
(key),
v®
,strlen(val));

1073 
	}
}

1076 
ssize_t
 
	$rdbSaveAuxF›ldSŒIÁ
(
rio
 *
rdb
, *
key
, 
v®
) {

1077 
buf
[
LONG_STR_SIZE
];

1078 
vËn
 = 
	`Î2¡ršg
(
buf
,(buf),
v®
);

1079  
	`rdbSaveAuxF›ld
(
rdb
,
key
,
	`¡¾’
(key),
buf
,
vËn
);

1080 
	}
}

1083 
	$rdbSaveInfoAuxF›lds
(
rio
 *
rdb
, 
rdbæags
, 
rdbSaveInfo
 *
rsi
) {

1084 
»dis_b™s
 = ((*) == 8) ? 64 : 32;

1085 
aof_´—mbË
 = (
rdbæags
 & 
RDBFLAGS_AOF_PREAMBLE
) != 0;

1088 ià(
	`rdbSaveAuxF›ldSŒSŒ
(
rdb
,"»dis-v”",
REDIS_VERSION
) == -1)  -1;

1089 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"»dis-b™s",
»dis_b™s
) == -1)  -1;

1090 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"ùime",
	`time
(
NULL
)) == -1)  -1;

1091 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"u£d-mem",
	`zm®loc_u£d_memÜy
()) == -1)  -1;

1094 ià(
rsi
) {

1095 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"»¶-¡»am-db",
rsi
->
»¶_¡»am_db
)

1097 ià(
	`rdbSaveAuxF›ldSŒSŒ
(
rdb
,"»¶-id",
£rv”
.
»¶id
)

1099 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"»¶-off£t",
£rv”
.
ma¡”_»¶_off£t
)

1102 ià(
	`rdbSaveAuxF›ldSŒIÁ
(
rdb
,"aof-´—mbË",
aof_´—mbË
) == -1)  -1;

1104 
	}
}

1106 
ssize_t
 
	$rdbSaveSšgËModuËAux
(
rio
 *
rdb
, 
wh’
, 
moduËTy³
 *
mt
) {

1108 
RedisModuËIO
 
io
;

1109 
»tv®
 = 
	`rdbSaveTy³
(
rdb
, 
RDB_OPCODE_MODULE_AUX
);

1113 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
mt
->
id
);

1114 ià(
»tv®
 == -1)  -1;

1115 
io
.
by‹s
 +ğ
»tv®
;

1120 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
RDB_MODULE_OPCODE_UINT
);

1121 ià(
»tv®
 == -1)  -1;

1122 
io
.
by‹s
 +ğ
»tv®
;

1123 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
wh’
);

1124 ià(
»tv®
 == -1)  -1;

1125 
io
.
by‹s
 +ğ
»tv®
;

1128 
	`moduËIn™IOCÚ‹xt
(
io
,
mt
,
rdb
,
NULL
);

1129 
mt
->
	`aux_§ve
(&
io
,
wh’
);

1130 
»tv®
 = 
	`rdbSaveL’
(
rdb
,
RDB_MODULE_OPCODE_EOF
);

1131 ià(
»tv®
 == -1)

1132 
io
.
”rÜ
 = 1;

1134 
io
.
by‹s
 +ğ
»tv®
;

1136 ià(
io
.
ùx
) {

1137 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

1138 
	`zä“
(
io
.
ùx
);

1140 ià(
io
.
”rÜ
)

1142  
io
.
by‹s
;

1143 
	}
}

1153 
	$rdbSaveRio
(
rio
 *
rdb
, *
”rÜ
, 
rdbæags
, 
rdbSaveInfo
 *
rsi
) {

1154 
diùI‹¿tÜ
 *
di
 = 
NULL
;

1155 
diùEÁry
 *
de
;

1156 
magic
[10];

1157 
j
;

1158 
ušt64_t
 
cksum
;

1159 
size_t
 
´oûs£d
 = 0;

1161 ià(
£rv”
.
rdb_checksum
)

1162 
rdb
->
upd©e_cksum
 = 
rioG’”icUpd©eChecksum
;

1163 
	`¢´štf
(
magic
,(magic),"REDIS%04d",
RDB_VERSION
);

1164 ià(
	`rdbWr™eRaw
(
rdb
,
magic
,9è=ğ-1è
w”r
;

1165 ià(
	`rdbSaveInfoAuxF›lds
(
rdb
,
rdbæags
,
rsi
è=ğ-1è
w”r
;

1166 ià(
	`rdbSaveModuËsAux
(
rdb
, 
REDISMODULE_AUX_BEFORE_RDB
è=ğ-1è
w”r
;

1168 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

1169 
»disDb
 *
db
 = 
£rv”
.db+
j
;

1170 
diù
 *
d
 = 
db
->dict;

1171 ià(
	`diùSize
(
d
) == 0) ;

1172 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
d
);

1175 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_SELECTDB
è=ğ-1è
w”r
;

1176 ià(
	`rdbSaveL’
(
rdb
,
j
è=ğ-1è
w”r
;

1179 
ušt64_t
 
db_size
, 
expœes_size
;

1180 
db_size
 = 
	`diùSize
(
db
->
diù
);

1181 
expœes_size
 = 
	`diùSize
(
db
->
expœes
);

1182 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_RESIZEDB
è=ğ-1è
w”r
;

1183 ià(
	`rdbSaveL’
(
rdb
,
db_size
è=ğ-1è
w”r
;

1184 ià(
	`rdbSaveL’
(
rdb
,
expœes_size
è=ğ-1è
w”r
;

1187 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1188 
sds
 
key¡r
 = 
	`diùG‘Key
(
de
);

1189 
robj
 
key
, *
o
 = 
	`diùG‘V®
(
de
);

1190 
expœe
;

1192 
	`š™SticSŒšgObjeù
(
key
,
key¡r
);

1193 
expœe
 = 
	`g‘Expœe
(
db
,&
key
);

1194 ià(
	`rdbSaveKeyV®uePaœ
(
rdb
,&
key
,
o
,
expœe
è=ğ-1è
w”r
;

1199 ià(
rdbæags
 & 
RDBFLAGS_AOF_PREAMBLE
 &&

1200 
rdb
->
´oûs£d_by‹s
 > 
´oûs£d
+
AOF_READ_DIFF_INTERVAL_BYTES
)

1202 
´oûs£d
 = 
rdb
->
´oûs£d_by‹s
;

1203 
	`aofR—dDiffFromP¬’t
();

1206 
	`diùR–—£I‹¿tÜ
(
di
);

1207 
di
 = 
NULL
;

1214 ià(
rsi
 && 
	`diùSize
(
£rv”
.
lua_süts
)) {

1215 
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
lua_süts
);

1216 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1217 
robj
 *
body
 = 
	`diùG‘V®
(
de
);

1218 ià(
	`rdbSaveAuxF›ld
(
rdb
,"lua",3,
body
->
±r
,
	`sd¦’
(body->ptr)) == -1)

1219 
w”r
;

1221 
	`diùR–—£I‹¿tÜ
(
di
);

1222 
di
 = 
NULL
;

1225 ià(
	`rdbSaveModuËsAux
(
rdb
, 
REDISMODULE_AUX_AFTER_RDB
è=ğ-1è
w”r
;

1228 ià(
	`rdbSaveTy³
(
rdb
,
RDB_OPCODE_EOF
è=ğ-1è
w”r
;

1232 
cksum
 = 
rdb
->cksum;

1233 
	`mem»v64ifbe
(&
cksum
);

1234 ià(
	`rioWr™e
(
rdb
,&
cksum
,8è=ğ0è
w”r
;

1235  
C_OK
;

1237 
w”r
:

1238 ià(
”rÜ
è*”rÜ = 
”ºo
;

1239 ià(
di
è
	`diùR–—£I‹¿tÜ
(di);

1240  
C_ERR
;

1241 
	}
}

1251 
	$rdbSaveRioW™hEOFM¬k
(
rio
 *
rdb
, *
”rÜ
, 
rdbSaveInfo
 *
rsi
) {

1252 
eofm¬k
[
RDB_EOF_MARK_SIZE
];

1254 
	`¡¬tSavšg
(
RDBFLAGS_REPLICATION
);

1255 
	`g‘RªdomHexCh¬s
(
eofm¬k
,
RDB_EOF_MARK_SIZE
);

1256 ià(
”rÜ
) *error = 0;

1257 ià(
	`rioWr™e
(
rdb
,"$EOF:",5è=ğ0è
w”r
;

1258 ià(
	`rioWr™e
(
rdb
,
eofm¬k
,
RDB_EOF_MARK_SIZE
è=ğ0è
w”r
;

1259 ià(
	`rioWr™e
(
rdb
,"\r\n",2è=ğ0è
w”r
;

1260 ià(
	`rdbSaveRio
(
rdb
,
”rÜ
,
RDBFLAGS_NONE
,
rsi
è=ğ
C_ERR
è
w”r
;

1261 ià(
	`rioWr™e
(
rdb
,
eofm¬k
,
RDB_EOF_MARK_SIZE
è=ğ0è
w”r
;

1262 
	`¡İSavšg
(1);

1263  
C_OK
;

1265 
w”r
:

1267 ià(
”rÜ
 && *”rÜ =ğ0è*”rÜ = 
”ºo
;

1268 
	`¡İSavšg
(0);

1269  
C_ERR
;

1270 
	}
}

1273 
	$rdbSave
(*
f’ame
, 
rdbSaveInfo
 *
rsi
) {

1274 
tmpfe
[256];

1275 
cwd
[
MAXPATHLEN
];

1276 
FILE
 *
å
;

1277 
rio
 
rdb
;

1278 
”rÜ
 = 0;

1280 
	`¢´štf
(
tmpfe
,256,"‹mp-%d.rdb", (è
	`g‘pid
());

1281 
å
 = 
	`fİ’
(
tmpfe
,"w");

1282 ià(!
å
) {

1283 *
cwdp
 = 
	`g‘cwd
(
cwd
,
MAXPATHLEN
);

1284 
	`£rv”Log
(
LL_WARNING
,

1287 
f’ame
,

1288 
cwdp
 ? cwdp : "unknown",

1289 
	`¡»¼Ü
(
”ºo
));

1290  
C_ERR
;

1293 
	`rioIn™W™hFe
(&
rdb
,
å
);

1294 
	`¡¬tSavšg
(
RDBFLAGS_NONE
);

1296 ià(
£rv”
.
rdb_§ve_šüem’l_fsync
)

1297 
	`rioS‘AutoSync
(&
rdb
,
REDIS_AUTOSYNC_BYTES
);

1299 ià(
	`rdbSaveRio
(&
rdb
,&
”rÜ
,
RDBFLAGS_NONE
,
rsi
è=ğ
C_ERR
) {

1300 
”ºo
 = 
”rÜ
;

1301 
w”r
;

1305 ià(
	`fæush
(
å
è=ğ
EOF
è
w”r
;

1306 ià(
	`fsync
(
	`f’o
(
å
)è=ğ-1è
w”r
;

1307 ià(
	`fşo£
(
å
è=ğ
EOF
è
w”r
;

1311 ià(
	`»Çme
(
tmpfe
,
f’ame
) == -1) {

1312 *
cwdp
 = 
	`g‘cwd
(
cwd
,
MAXPATHLEN
);

1313 
	`£rv”Log
(
LL_WARNING
,

1316 
tmpfe
,

1317 
f’ame
,

1318 
cwdp
 ? cwdp : "unknown",

1319 
	`¡»¼Ü
(
”ºo
));

1320 
	`uÆšk
(
tmpfe
);

1321 
	`¡İSavšg
(0);

1322  
C_ERR
;

1325 
	`£rv”Log
(
LL_NOTICE
,"DB saved on disk");

1326 
£rv”
.
dœty
 = 0;

1327 
£rv”
.
Ï¡§ve
 = 
	`time
(
NULL
);

1328 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_OK
;

1329 
	`¡İSavšg
(1);

1330  
C_OK
;

1332 
w”r
:

1333 
	`£rv”Log
(
LL_WARNING
,"Wr™”rÜ savšg DB oÀdisk: %s", 
	`¡»¼Ü
(
”ºo
));

1334 
	`fşo£
(
å
);

1335 
	`uÆšk
(
tmpfe
);

1336 
	`¡İSavšg
(0);

1337  
C_ERR
;

1338 
	}
}

1340 
	$rdbSaveBackground
(*
f’ame
, 
rdbSaveInfo
 *
rsi
) {

1341 
pid_t
 
chdpid
;

1343 ià(
	`hasAùiveChdProûss
()è 
C_ERR
;

1345 
£rv”
.
dœty_befÜe_bg§ve
 = s”v”.
dœty
;

1346 
£rv”
.
Ï¡bg§ve_Œy
 = 
	`time
(
NULL
);

1347 
	`İ’ChdInfoPe
();

1349 ià((
chdpid
 = 
	`»disFÜk
()) == 0) {

1350 
»tv®
;

1353 
	`»disS‘ProcT™Ë
("redis-rdb-bgsave");

1354 
	`»disS‘CpuAffš™y
(
£rv”
.
bg§ve_ıuli¡
);

1355 
»tv®
 = 
	`rdbSave
(
f’ame
,
rsi
);

1356 ià(
»tv®
 =ğ
C_OK
) {

1357 
	`£ndChdCOWInfo
(
CHILD_INFO_TYPE_RDB
, "RDB");

1359 
	`ex™FromChd
((
»tv®
 =ğ
C_OK
) ? 0 : 1);

1362 ià(
chdpid
 == -1) {

1363 
	`şo£ChdInfoPe
();

1364 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_ERR
;

1365 
	`£rv”Log
(
LL_WARNING
,"Can't save in background: fork: %s",

1366 
	`¡»¼Ü
(
”ºo
));

1367  
C_ERR
;

1369 
	`£rv”Log
(
LL_NOTICE
,"Background savšg s¹ed by…id %d",
chdpid
);

1370 
£rv”
.
rdb_§ve_time_¡¬t
 = 
	`time
(
NULL
);

1371 
£rv”
.
rdb_chd_pid
 = 
chdpid
;

1372 
£rv”
.
rdb_chd_ty³
 = 
RDB_CHILD_TYPE_DISK
;

1373  
C_OK
;

1375  
C_OK
;

1376 
	}
}

1378 
	$rdbRemoveTempFe
(
pid_t
 
chdpid
) {

1379 
tmpfe
[256];

1381 
	`¢´štf
(
tmpfe
,Ñmpfe),"‹mp-%d.rdb", (è
chdpid
);

1382 
	`uÆšk
(
tmpfe
);

1383 
	}
}

1389 
robj
 *
	$rdbLßdCheckModuËV®ue
(
rio
 *
rdb
, *
moduËÇme
) {

1390 
ušt64_t
 
İcode
;

1391 (
İcode
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è!ğ
RDB_MODULE_OPCODE_EOF
) {

1392 ià(
İcode
 =ğ
RDB_MODULE_OPCODE_SINT
 ||

1393 
İcode
 =ğ
RDB_MODULE_OPCODE_UINT
)

1395 
ušt64_t
 
Ën
;

1396 ià(
	`rdbLßdL’ByRef
(
rdb
,
NULL
,&
Ën
) == -1) {

1397 
	`rdbEx™R•ÜtCÜru±RDB
(

1398 "E¼Ü„—dšg iÁeg” from moduË % v®ue", 
moduËÇme
);

1400 } ià(
İcode
 =ğ
RDB_MODULE_OPCODE_STRING
) {

1401 
robj
 *
o
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_NONE
,
NULL
);

1402 ià(
o
 =ğ
NULL
) {

1403 
	`rdbEx™R•ÜtCÜru±RDB
(

1404 "E¼Ü„—dšg sŒšg from moduË % v®ue", 
moduËÇme
);

1406 
	`deüRefCouÁ
(
o
);

1407 } ià(
İcode
 =ğ
RDB_MODULE_OPCODE_FLOAT
) {

1408 
v®
;

1409 ià(
	`rdbLßdBš¬yFlßtV®ue
(
rdb
,&
v®
) == -1) {

1410 
	`rdbEx™R•ÜtCÜru±RDB
(

1411 "E¼Ü„—dšg flßˆäom moduË % v®ue", 
moduËÇme
);

1413 } ià(
İcode
 =ğ
RDB_MODULE_OPCODE_DOUBLE
) {

1414 
v®
;

1415 ià(
	`rdbLßdBš¬yDoubËV®ue
(
rdb
,&
v®
) == -1) {

1416 
	`rdbEx™R•ÜtCÜru±RDB
(

1417 "E¼Ü„—dšg doubË from moduË % v®ue", 
moduËÇme
);

1421  
	`ü—‹SŒšgObjeù
("module-dummy-value",18);

1422 
	}
}

1426 
robj
 *
	$rdbLßdObjeù
(
rdbty³
, 
rio
 *
rdb
, 
sds
 
key
) {

1427 
robj
 *
o
 = 
NULL
, *
–e
, *
dec
;

1428 
ušt64_t
 
Ën
;

1429 
i
;

1431 ià(
rdbty³
 =ğ
RDB_TYPE_STRING
) {

1433 ià((
o
 = 
	`rdbLßdEncodedSŒšgObjeù
(
rdb
)è=ğ
NULL
)  NULL;

1434 
o
 = 
	`ŒyObjeùEncodšg
(o);

1435 } ià(
rdbty³
 =ğ
RDB_TYPE_LIST
) {

1437 ià((
Ën
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

1439 
o
 = 
	`ü—‹Quickli¡Objeù
();

1440 
	`quickli¡S‘O±iÚs
(
o
->
±r
, 
£rv”
.
li¡_max_zli¡_size
,

1441 
£rv”
.
li¡_com´ess_d•th
);

1444 
Ën
--) {

1445 ià((
–e
 = 
	`rdbLßdEncodedSŒšgObjeù
(
rdb
)è=ğ
NULL
) {

1446 
	`deüRefCouÁ
(
o
);

1447  
NULL
;

1449 
dec
 = 
	`g‘DecodedObjeù
(
–e
);

1450 
size_t
 
Ën
 = 
	`sd¦’
(
dec
->
±r
);

1451 
	`quickli¡PushTa
(
o
->
±r
, 
dec
->±r, 
Ën
);

1452 
	`deüRefCouÁ
(
dec
);

1453 
	`deüRefCouÁ
(
–e
);

1455 } ià(
rdbty³
 =ğ
RDB_TYPE_SET
) {

1457 ià((
Ën
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

1460 ià(
Ën
 > 
£rv”
.
£t_max_št£t_’Œ›s
) {

1461 
o
 = 
	`ü—‹S‘Objeù
();

1464 ià(
Ën
 > 
DICT_HT_INITIAL_SIZE
)

1465 
	`diùEx·nd
(
o
->
±r
,
Ën
);

1467 
o
 = 
	`ü—‹IÁ£tObjeù
();

1471 
i
 = 0; i < 
Ën
; i++) {

1472 
Îv®
;

1473 
sds
 
sd£Ë
;

1475 ià((
sd£Ë
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1476 
	`deüRefCouÁ
(
o
);

1477  
NULL
;

1480 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

1482 ià(
	`isSdsR•»£ÁabËAsLÚgLÚg
(
sd£Ë
,&
Îv®
è=ğ
C_OK
) {

1483 
o
->
±r
 = 
	`št£tAdd
(o->±r,
Îv®
,
NULL
);

1485 
	`£tTy³CÚv”t
(
o
,
OBJ_ENCODING_HT
);

1486 
	`diùEx·nd
(
o
->
±r
,
Ën
);

1492 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1493 
	`diùAdd
((
diù
*)
o
->
±r
,
sd£Ë
,
NULL
);

1495 
	`sdsä“
(
sd£Ë
);

1498 } ià(
rdbty³
 =ğ
RDB_TYPE_ZSET_2
 ||„dbty³ =ğ
RDB_TYPE_ZSET
) {

1500 
ušt64_t
 
z£’
;

1501 
size_t
 
max––’
 = 0;

1502 
z£t
 *
zs
;

1504 ià((
z£’
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

1505 
o
 = 
	`ü—‹Z£tObjeù
();

1506 
zs
 = 
o
->
±r
;

1508 ià(
z£’
 > 
DICT_HT_INITIAL_SIZE
)

1509 
	`diùEx·nd
(
zs
->
diù
,
z£’
);

1512 
z£’
--) {

1513 
sds
 
sd£Ë
;

1514 
scÜe
;

1515 
zskli¡Node
 *
znode
;

1517 ià((
sd£Ë
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1518 
	`deüRefCouÁ
(
o
);

1519  
NULL
;

1522 ià(
rdbty³
 =ğ
RDB_TYPE_ZSET_2
) {

1523 ià(
	`rdbLßdBš¬yDoubËV®ue
(
rdb
,&
scÜe
) == -1) {

1524 
	`deüRefCouÁ
(
o
);

1525 
	`sdsä“
(
sd£Ë
);

1526  
NULL
;

1529 ià(
	`rdbLßdDoubËV®ue
(
rdb
,&
scÜe
) == -1) {

1530 
	`deüRefCouÁ
(
o
);

1531 
	`sdsä“
(
sd£Ë
);

1532  
NULL
;

1537 ià(
	`sd¦’
(
sd£Ë
è> 
max––’
) maxelelen = sdslen(sdsele);

1539 
znode
 = 
	`z¦In£¹
(
zs
->
z¦
,
scÜe
,
sd£Ë
);

1540 
	`diùAdd
(
zs
->
diù
,
sd£Ë
,&
znode
->
scÜe
);

1544 ià(
	`z£tL’gth
(
o
è<ğ
£rv”
.
z£t_max_zli¡_’Œ›s
 &&

1545 
max––’
 <ğ
£rv”
.
z£t_max_zli¡_v®ue
)

1546 
	`z£tCÚv”t
(
o
,
OBJ_ENCODING_ZIPLIST
);

1547 } ià(
rdbty³
 =ğ
RDB_TYPE_HASH
) {

1548 
ušt64_t
 
Ën
;

1549 
»t
;

1550 
sds
 
f›ld
, 
v®ue
;

1552 
Ën
 = 
	`rdbLßdL’
(
rdb
, 
NULL
);

1553 ià(
Ën
 =ğ
RDB_LENERR
è 
NULL
;

1555 
o
 = 
	`ü—‹HashObjeù
();

1558 ià(
Ën
 > 
£rv”
.
hash_max_zli¡_’Œ›s
)

1559 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

1562 
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
 && 
Ën
 > 0) {

1563 
Ën
--;

1565 ià((
f›ld
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1566 
	`deüRefCouÁ
(
o
);

1567  
NULL
;

1569 ià((
v®ue
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1570 
	`sdsä“
(
f›ld
);

1571 
	`deüRefCouÁ
(
o
);

1572  
NULL
;

1576 
o
->
±r
 = 
	`zli¡Push
(o->±r, (*)
f›ld
,

1577 
	`sd¦’
(
f›ld
), 
ZIPLIST_TAIL
);

1578 
o
->
±r
 = 
	`zli¡Push
(o->±r, (*)
v®ue
,

1579 
	`sd¦’
(
v®ue
), 
ZIPLIST_TAIL
);

1582 ià(
	`sd¦’
(
f›ld
è> 
£rv”
.
hash_max_zli¡_v®ue
 ||

1583 
	`sd¦’
(
v®ue
è> 
£rv”
.
hash_max_zli¡_v®ue
)

1585 
	`sdsä“
(
f›ld
);

1586 
	`sdsä“
(
v®ue
);

1587 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

1590 
	`sdsä“
(
f›ld
);

1591 
	`sdsä“
(
v®ue
);

1594 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
 && 
Ën
 > 
DICT_HT_INITIAL_SIZE
)

1595 
	`diùEx·nd
(
o
->
±r
,
Ën
);

1598 
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
 && 
Ën
 > 0) {

1599 
Ën
--;

1601 ià((
f›ld
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1602 
	`deüRefCouÁ
(
o
);

1603  
NULL
;

1605 ià((
v®ue
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL) {

1606 
	`sdsä“
(
f›ld
);

1607 
	`deüRefCouÁ
(
o
);

1608  
NULL
;

1612 
»t
 = 
	`diùAdd
((
diù
*)
o
->
±r
, 
f›ld
, 
v®ue
);

1613 ià(
»t
 =ğ
DICT_ERR
) {

1614 
	`rdbEx™R•ÜtCÜru±RDB
("Duplicate keys detected");

1619 
	`£rv”As£¹
(
Ën
 == 0);

1620 } ià(
rdbty³
 =ğ
RDB_TYPE_LIST_QUICKLIST
) {

1621 ià((
Ën
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)  NULL;

1622 
o
 = 
	`ü—‹Quickli¡Objeù
();

1623 
	`quickli¡S‘O±iÚs
(
o
->
±r
, 
£rv”
.
li¡_max_zli¡_size
,

1624 
£rv”
.
li¡_com´ess_d•th
);

1626 
Ën
--) {

1627 *
zl
 =

1628 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_PLAIN
,
NULL
);

1629 ià(
zl
 =ğ
NULL
) {

1630 
	`deüRefCouÁ
(
o
);

1631  
NULL
;

1633 
	`quickli¡Aµ’dZli¡
(
o
->
±r
, 
zl
);

1635 } ià(
rdbty³
 =ğ
RDB_TYPE_HASH_ZIPMAP
 ||

1636 
rdbty³
 =ğ
RDB_TYPE_LIST_ZIPLIST
 ||

1637 
rdbty³
 =ğ
RDB_TYPE_SET_INTSET
 ||

1638 
rdbty³
 =ğ
RDB_TYPE_ZSET_ZIPLIST
 ||

1639 
rdbty³
 =ğ
RDB_TYPE_HASH_ZIPLIST
)

1641 *
’coded
 =

1642 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_PLAIN
,
NULL
);

1643 ià(
’coded
 =ğ
NULL
)  NULL;

1644 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
’coded
);

1652 
rdbty³
) {

1653 
RDB_TYPE_HASH_ZIPMAP
:

1657 *
zl
 = 
	`zli¡New
();

1658 *
zi
 = 
	`zm­Rewšd
(
o
->
±r
);

1659 *
f¡r
, *
v¡r
;

1660 
æ’
, 
vËn
;

1661 
maxËn
 = 0;

1663 (
zi
 = 
	`zm­Next
(zi, &
f¡r
, &
æ’
, &
v¡r
, &
vËn
)è!ğ
NULL
) {

1664 ià(
æ’
 > 
maxËn
) maxlen = flen;

1665 ià(
vËn
 > 
maxËn
) maxlen = vlen;

1666 
zl
 = 
	`zli¡Push
(zl, 
f¡r
, 
æ’
, 
ZIPLIST_TAIL
);

1667 
zl
 = 
	`zli¡Push
(zl, 
v¡r
, 
vËn
, 
ZIPLIST_TAIL
);

1670 
	`zä“
(
o
->
±r
);

1671 
o
->
±r
 = 
zl
;

1672 
o
->
ty³
 = 
OBJ_HASH
;

1673 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

1675 ià(
	`hashTy³L’gth
(
o
è> 
£rv”
.
hash_max_zli¡_’Œ›s
 ||

1676 
maxËn
 > 
£rv”
.
hash_max_zli¡_v®ue
)

1678 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

1682 
RDB_TYPE_LIST_ZIPLIST
:

1683 
o
->
ty³
 = 
OBJ_LIST
;

1684 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

1685 
	`li¡Ty³CÚv”t
(
o
,
OBJ_ENCODING_QUICKLIST
);

1687 
RDB_TYPE_SET_INTSET
:

1688 
o
->
ty³
 = 
OBJ_SET
;

1689 
o
->
’codšg
 = 
OBJ_ENCODING_INTSET
;

1690 ià(
	`št£tL’
(
o
->
±r
è> 
£rv”
.
£t_max_št£t_’Œ›s
)

1691 
	`£tTy³CÚv”t
(
o
,
OBJ_ENCODING_HT
);

1693 
RDB_TYPE_ZSET_ZIPLIST
:

1694 
o
->
ty³
 = 
OBJ_ZSET
;

1695 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

1696 ià(
	`z£tL’gth
(
o
è> 
£rv”
.
z£t_max_zli¡_’Œ›s
)

1697 
	`z£tCÚv”t
(
o
,
OBJ_ENCODING_SKIPLIST
);

1699 
RDB_TYPE_HASH_ZIPLIST
:

1700 
o
->
ty³
 = 
OBJ_HASH
;

1701 
o
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

1702 ià(
	`hashTy³L’gth
(
o
è> 
£rv”
.
hash_max_zli¡_’Œ›s
)

1703 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

1707 
	`rdbEx™R•ÜtCÜru±RDB
("UnknowÀRDBƒncodšgy³ %d",
rdbty³
);

1710 } ià(
rdbty³
 =ğ
RDB_TYPE_STREAM_LISTPACKS
) {

1711 
o
 = 
	`ü—‹SŒ—mObjeù
();

1712 
¡»am
 *
s
 = 
o
->
±r
;

1713 
ušt64_t
 
li¡·cks
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1714 ià(
li¡·cks
 =ğ
RDB_LENERR
) {

1715 
	`rdbR•ÜtR—dE¼Ü
("Stream†istpacks†en†oading failed.");

1716 
	`deüRefCouÁ
(
o
);

1717  
NULL
;

1720 
li¡·cks
--) {

1724 
sds
 
nodekey
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
);

1725 ià(
nodekey
 =ğ
NULL
) {

1726 
	`rdbR•ÜtR—dE¼Ü
("Stream master ID†oading failed: invalidƒncoding or I/Oƒrror.");

1727 
	`deüRefCouÁ
(
o
);

1728  
NULL
;

1730 ià(
	`sd¦’
(
nodekey
è!ğ(
¡»amID
)) {

1731 
	`rdbEx™R•ÜtCÜru±RDB
("Stream‚ode keyƒntry is‚othe "

1736 *
Í
 =

1737 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_PLAIN
,
NULL
);

1738 ià(
Í
 =ğ
NULL
) {

1739 
	`rdbR•ÜtR—dE¼Ü
("Stream†istpacks†oading failed.");

1740 
	`sdsä“
(
nodekey
);

1741 
	`deüRefCouÁ
(
o
);

1742  
NULL
;

1744 *
fœ¡
 = 
	`ÍFœ¡
(
Í
);

1745 ià(
fœ¡
 =ğ
NULL
) {

1749 
	`rdbEx™R•ÜtCÜru±RDB
("Empty†istpack inside stream");

1753 
»tv®
 = 
	`¿xIn£¹
(
s
->
¿x
,

1754 (*)
nodekey
,(
¡»amID
),
Í
,
NULL
);

1755 
	`sdsä“
(
nodekey
);

1756 ià(!
»tv®
)

1757 
	`rdbEx™R•ÜtCÜru±RDB
("Listpack„e-added withƒxisting key");

1760 
s
->
Ëngth
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1763 
s
->
Ï¡_id
.
ms
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1764 
s
->
Ï¡_id
.
£q
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1766 ià(
	`rioG‘R—dE¼Ü
(
rdb
)) {

1767 
	`rdbR•ÜtR—dE¼Ü
("Stream object metadata†oading failed.");

1768 
	`deüRefCouÁ
(
o
);

1769  
NULL
;

1773 
ušt64_t
 
cgroups_couÁ
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1774 ià(
cgroups_couÁ
 =ğ
RDB_LENERR
) {

1775 
	`rdbR•ÜtR—dE¼Ü
("Stream cgroup count†oading failed.");

1776 
	`deüRefCouÁ
(
o
);

1777  
NULL
;

1779 
cgroups_couÁ
--) {

1783 
¡»amID
 
cg_id
;

1784 
sds
 
cgÇme
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
);

1785 ià(
cgÇme
 =ğ
NULL
) {

1786 
	`rdbR•ÜtR—dE¼Ü
(

1788 
	`deüRefCouÁ
(
o
);

1789  
NULL
;

1792 
cg_id
.
ms
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1793 
cg_id
.
£q
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1794 ià(
	`rioG‘R—dE¼Ü
(
rdb
)) {

1795 
	`rdbR•ÜtR—dE¼Ü
("Stream cgroup ID†oading failed.");

1796 
	`sdsä“
(
cgÇme
);

1797 
	`deüRefCouÁ
(
o
);

1798  
NULL
;

1801 
¡»amCG
 *
cgroup
 = 
	`¡»amC»©eCG
(
s
,
cgÇme
,
	`sd¦’
(cgÇme),&
cg_id
);

1802 ià(
cgroup
 =ğ
NULL
)

1803 
	`rdbEx™R•ÜtCÜru±RDB
("Duplicated consumer group‚ame %s",

1804 
cgÇme
);

1805 
	`sdsä“
(
cgÇme
);

1812 
ušt64_t
 
³l_size
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1813 ià(
³l_size
 =ğ
RDB_LENERR
) {

1814 
	`rdbR•ÜtR—dE¼Ü
("Stream PEL size†oading failed.");

1815 
	`deüRefCouÁ
(
o
);

1816  
NULL
;

1818 
³l_size
--) {

1819 
¿wid
[(
¡»amID
)];

1820 ià(
	`rioR—d
(
rdb
,
¿wid
,(rawid)) == 0) {

1821 
	`rdbR•ÜtR—dE¼Ü
("Stream PEL ID†oading failed.");

1822 
	`deüRefCouÁ
(
o
);

1823  
NULL
;

1825 
¡»amNACK
 *
Çck
 = 
	`¡»amC»©eNACK
(
NULL
);

1826 
Çck
->
d–iv”y_time
 = 
	`rdbLßdMli£cÚdTime
(
rdb
,
RDB_VERSION
);

1827 
Çck
->
d–iv”y_couÁ
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1828 ià(
	`rioG‘R—dE¼Ü
(
rdb
)) {

1829 
	`rdbR•ÜtR—dE¼Ü
("Stream PEL NACK†oading failed.");

1830 
	`deüRefCouÁ
(
o
);

1831 
	`¡»amF»eNACK
(
Çck
);

1832  
NULL
;

1834 ià(!
	`¿xIn£¹
(
cgroup
->
³l
,
¿wid
,Ôawid),
Çck
,
NULL
))

1835 
	`rdbEx™R•ÜtCÜru±RDB
("Duplicated gobal PELƒntry "

1841 
ušt64_t
 
cÚsum”s_num
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1842 ià(
cÚsum”s_num
 =ğ
RDB_LENERR
) {

1843 
	`rdbR•ÜtR—dE¼Ü
("Stream consumers‚um†oading failed.");

1844 
	`deüRefCouÁ
(
o
);

1845  
NULL
;

1847 
cÚsum”s_num
--) {

1848 
sds
 
úame
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
);

1849 ià(
úame
 =ğ
NULL
) {

1850 
	`rdbR•ÜtR—dE¼Ü
(

1852 
	`deüRefCouÁ
(
o
);

1853  
NULL
;

1855 
¡»amCÚsum”
 *
cÚsum”
 =

1856 
	`¡»amLookupCÚsum”
(
cgroup
,
úame
,
SLC_NONE
);

1857 
	`sdsä“
(
úame
);

1858 
cÚsum”
->
£’_time
 = 
	`rdbLßdMli£cÚdTime
(
rdb
,
RDB_VERSION
);

1859 ià(
	`rioG‘R—dE¼Ü
(
rdb
)) {

1860 
	`rdbR•ÜtR—dE¼Ü
("Stream short„ead„eading seenime.");

1861 
	`deüRefCouÁ
(
o
);

1862  
NULL
;

1867 
³l_size
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1868 ià(
³l_size
 =ğ
RDB_LENERR
) {

1869 
	`rdbR•ÜtR—dE¼Ü
(

1871 
	`deüRefCouÁ
(
o
);

1872  
NULL
;

1874 
³l_size
--) {

1875 
¿wid
[(
¡»amID
)];

1876 ià(
	`rioR—d
(
rdb
,
¿wid
,(rawid)) == 0) {

1877 
	`rdbR•ÜtR—dE¼Ü
(

1879 
	`deüRefCouÁ
(
o
);

1880  
NULL
;

1882 
¡»amNACK
 *
Çck
 = 
	`¿xFšd
(
cgroup
->
³l
,
¿wid
,(rawid));

1883 ià(
Çck
 =ğ
¿xNÙFound
)

1884 
	`rdbEx™R•ÜtCÜru±RDB
("Consumerƒntry‚ot found in "

1890 
Çck
->
cÚsum”
 = consumer;

1891 ià(!
	`¿xIn£¹
(
cÚsum”
->
³l
,
¿wid
,Ôawid),
Çck
,
NULL
))

1892 
	`rdbEx™R•ÜtCÜru±RDB
("Duplicated consumer PELƒntry "

1898 } ià(
rdbty³
 =ğ
RDB_TYPE_MODULE
 ||„dbty³ =ğ
RDB_TYPE_MODULE_2
) {

1899 
ušt64_t
 
moduËid
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1900 ià(
	`rioG‘R—dE¼Ü
(
rdb
)) {

1901 
	`rdbR•ÜtR—dE¼Ü
("Short„ead module id");

1902  
NULL
;

1904 
moduËTy³
 *
mt
 = 
	`moduËTy³LookupModuËByID
(
moduËid
);

1905 
Çme
[10];

1907 ià(
rdbCheckMode
 && 
rdbty³
 =ğ
RDB_TYPE_MODULE_2
) {

1908 
	`moduËTy³NameByID
(
Çme
,
moduËid
);

1909  
	`rdbLßdCheckModuËV®ue
(
rdb
,
Çme
);

1912 ià(
mt
 =ğ
NULL
) {

1913 
	`moduËTy³NameByID
(
Çme
,
moduËid
);

1914 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË d©¨I cª'ˆlßd:‚Øm©chšg moduË '%s'", 
Çme
);

1915 
	`ex™
(1);

1917 
RedisModuËIO
 
io
;

1918 
robj
 
keyobj
;

1919 
	`š™SticSŒšgObjeù
(
keyobj
,
key
);

1920 
	`moduËIn™IOCÚ‹xt
(
io
,
mt
,
rdb
,&
keyobj
);

1921 
io
.
v”
 = (
rdbty³
 =ğ
RDB_TYPE_MODULE
) ? 1 : 2;

1924 *
±r
 = 
mt
->
	`rdb_lßd
(&
io
,
moduËid
&1023);

1925 ià(
io
.
ùx
) {

1926 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

1927 
	`zä“
(
io
.
ùx
);

1931 ià(
io
.
v”
 == 2) {

1932 
ušt64_t
 
eof
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

1933 ià(
eof
 =ğ
RDB_LENERR
) {

1934 
o
 = 
	`ü—‹ModuËObjeù
(
mt
,
±r
);

1935 
	`deüRefCouÁ
(
o
);

1936  
NULL
;

1938 ià(
eof
 !ğ
RDB_MODULE_OPCODE_EOF
) {

1939 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË d©¨fÜhmoduË '%s'h© i nÙ”mš©ed byh´İ” moduË v®uEOF m¬k”", 
Çme
);

1940 
	`ex™
(1);

1944 ià(
±r
 =ğ
NULL
) {

1945 
	`moduËTy³NameByID
(
Çme
,
moduËid
);

1946 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË d©¨fÜhmoduËy³ '%s',h©h»¥ÚsibË moduË i nÙ‡bËØlßd. Check fÜ moduË log‡bovfÜ‡dd™iÚ® clues.", 
Çme
);

1947 
	`ex™
(1);

1949 
o
 = 
	`ü—‹ModuËObjeù
(
mt
,
±r
);

1951 
	`rdbR•ÜtR—dE¼Ü
("UnknowÀRDBƒncodšgy³ %d",
rdbty³
);

1952  
NULL
;

1954  
o
;

1955 
	}
}

1959 
	$¡¬tLßdšg
(
size_t
 
size
, 
rdbæags
) {

1961 
£rv”
.
lßdšg
 = 1;

1962 
£rv”
.
lßdšg_¡¬t_time
 = 
	`time
(
NULL
);

1963 
£rv”
.
lßdšg_lßded_by‹s
 = 0;

1964 
£rv”
.
lßdšg_tÙ®_by‹s
 = 
size
;

1967 
subev’t
;

1968 ià(
rdbæags
 & 
RDBFLAGS_AOF_PREAMBLE
)

1969 
subev’t
 = 
REDISMODULE_SUBEVENT_LOADING_AOF_START
;

1970 if(
rdbæags
 & 
RDBFLAGS_REPLICATION
)

1971 
subev’t
 = 
REDISMODULE_SUBEVENT_LOADING_REPL_START
;

1973 
subev’t
 = 
REDISMODULE_SUBEVENT_LOADING_RDB_START
;

1974 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_LOADING
,
subev’t
,
NULL
);

1975 
	}
}

1980 
	$¡¬tLßdšgFe
(
FILE
 *
å
, * 
f’ame
, 
rdbæags
) {

1981 
¡©
 
sb
;

1982 ià(
	`f¡©
(
	`f’o
(
å
), &
sb
) == -1)

1983 
sb
.
¡_size
 = 0;

1984 
rdbFeBešgLßded
 = 
f’ame
;

1985 
	`¡¬tLßdšg
(
sb
.
¡_size
, 
rdbæags
);

1986 
	}
}

1989 
	$lßdšgProg»ss
(
off_t
 
pos
) {

1990 
£rv”
.
lßdšg_lßded_by‹s
 = 
pos
;

1991 ià(
£rv”
.
¡©_³ak_memÜy
 < 
	`zm®loc_u£d_memÜy
())

1992 
£rv”
.
¡©_³ak_memÜy
 = 
	`zm®loc_u£d_memÜy
();

1993 
	}
}

1996 
	$¡İLßdšg
(
sucûss
) {

1997 
£rv”
.
lßdšg
 = 0;

1998 
rdbFeBešgLßded
 = 
NULL
;

2001 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_LOADING
,

2002 
sucûss
?

2003 
REDISMODULE_SUBEVENT_LOADING_ENDED
:

2004 
REDISMODULE_SUBEVENT_LOADING_FAILED
,

2005 
NULL
);

2006 
	}
}

2008 
	$¡¬tSavšg
(
rdbæags
) {

2010 
subev’t
;

2011 ià(
rdbæags
 & 
RDBFLAGS_AOF_PREAMBLE
)

2012 
subev’t
 = 
REDISMODULE_SUBEVENT_PERSISTENCE_AOF_START
;

2013 ià(
	`g‘pid
()!=
£rv”
.
pid
)

2014 
subev’t
 = 
REDISMODULE_SUBEVENT_PERSISTENCE_RDB_START
;

2016 
subev’t
 = 
REDISMODULE_SUBEVENT_PERSISTENCE_SYNC_RDB_START
;

2017 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_PERSISTENCE
,
subev’t
,
NULL
);

2018 
	}
}

2020 
	$¡İSavšg
(
sucûss
) {

2022 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_PERSISTENCE
,

2023 
sucûss
?

2024 
REDISMODULE_SUBEVENT_PERSISTENCE_ENDED
:

2025 
REDISMODULE_SUBEVENT_PERSISTENCE_FAILED
,

2026 
NULL
);

2027 
	}
}

2031 
	$rdbLßdProg»ssC®lback
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

2032 ià(
£rv”
.
rdb_checksum
)

2033 
	`rioG’”icUpd©eChecksum
(
r
, 
buf
, 
Ën
);

2034 ià(
£rv”
.
lßdšg_´oûss_ev’ts_š‹rv®_by‹s
 &&

2035 (
r
->
´oûs£d_by‹s
 + 
Ën
)/
£rv”
.
lßdšg_´oûss_ev’ts_š‹rv®_by‹s
 >„->processed_bytes/server.loading_process_events_interval_bytes)

2040 
	`upd©eCachedTime
(0);

2041 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
)

2042 
	`»¶iÿtiÚS’dNewlšeToMa¡”
();

2043 
	`lßdšgProg»ss
(
r
->
´oûs£d_by‹s
);

2044 
	`´oûssEv’tsWheBlocked
();

2045 
	`´oûssModuËLßdšgProg»ssEv’t
(0);

2047 
	}
}

2051 
	$rdbLßdRio
(
rio
 *
rdb
, 
rdbæags
, 
rdbSaveInfo
 *
rsi
) {

2052 
ušt64_t
 
dbid
;

2053 
ty³
, 
rdbv”
;

2054 
»disDb
 *
db
 = 
£rv”
.db+0;

2055 
buf
[1024];

2057 
rdb
->
upd©e_cksum
 = 
rdbLßdProg»ssC®lback
;

2058 
rdb
->
max_´oûssšg_chunk
 = 
£rv”
.
lßdšg_´oûss_ev’ts_š‹rv®_by‹s
;

2059 ià(
	`rioR—d
(
rdb
,
buf
,9è=ğ0è
eoã¼
;

2060 
buf
[9] = '\0';

2061 ià(
	`memcmp
(
buf
,"REDIS",5) != 0) {

2062 
	`£rv”Log
(
LL_WARNING
,"Wrong signatureryingo†oad DB from file");

2063 
”ºo
 = 
EINVAL
;

2064  
C_ERR
;

2066 
rdbv”
 = 
	`©oi
(
buf
+5);

2067 ià(
rdbv”
 < 1 ||„dbv” > 
RDB_VERSION
) {

2068 
	`£rv”Log
(
LL_WARNING
,"Cª'ˆhªdË RDB fÜm© v”siÚ %d",
rdbv”
);

2069 
”ºo
 = 
EINVAL
;

2070  
C_ERR
;

2074 
Ìu_idË
 = -1, 
lfu_äeq
 = -1, 
expœ‘ime
 = -1, 
now
 = 
	`m¡ime
();

2075 
Ìu_şock
 = 
	`LRU_CLOCK
();

2078 
sds
 
key
;

2079 
robj
 *
v®
;

2082 ià((
ty³
 = 
	`rdbLßdTy³
(
rdb
)è=ğ-1è
eoã¼
;

2085 ià(
ty³
 =ğ
RDB_OPCODE_EXPIRETIME
) {

2089 
expœ‘ime
 = 
	`rdbLßdTime
(
rdb
);

2090 
expœ‘ime
 *= 1000;

2091 ià(
	`rioG‘R—dE¼Ü
(
rdb
)è
eoã¼
;

2093 } ià(
ty³
 =ğ
RDB_OPCODE_EXPIRETIME_MS
) {

2096 
expœ‘ime
 = 
	`rdbLßdMli£cÚdTime
(
rdb
,
rdbv”
);

2097 ià(
	`rioG‘R—dE¼Ü
(
rdb
)è
eoã¼
;

2099 } ià(
ty³
 =ğ
RDB_OPCODE_FREQ
) {

2101 
ušt8_t
 
by‹
;

2102 ià(
	`rioR—d
(
rdb
,&
by‹
,1è=ğ0è
eoã¼
;

2103 
lfu_äeq
 = 
by‹
;

2105 } ià(
ty³
 =ğ
RDB_OPCODE_IDLE
) {

2107 
ušt64_t
 
qwÜd
;

2108 ià((
qwÜd
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
è
eoã¼
;

2109 
Ìu_idË
 = 
qwÜd
;

2111 } ià(
ty³
 =ğ
RDB_OPCODE_EOF
) {

2114 } ià(
ty³
 =ğ
RDB_OPCODE_SELECTDB
) {

2116 ià((
dbid
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
è
eoã¼
;

2117 ià(
dbid
 >ğ()
£rv”
.
dbnum
) {

2118 
	`£rv”Log
(
LL_WARNING
,

2121 "d©aba£s. Ex™šg\n", 
£rv”
.
dbnum
);

2122 
	`ex™
(1);

2124 
db
 = 
£rv”
.db+
dbid
;

2126 } ià(
ty³
 =ğ
RDB_OPCODE_RESIZEDB
) {

2129 
ušt64_t
 
db_size
, 
expœes_size
;

2130 ià((
db_size
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)

2131 
eoã¼
;

2132 ià((
expœes_size
 = 
	`rdbLßdL’
(
rdb
,
NULL
)è=ğ
RDB_LENERR
)

2133 
eoã¼
;

2134 
	`diùEx·nd
(
db
->
diù
,
db_size
);

2135 
	`diùEx·nd
(
db
->
expœes
,
expœes_size
);

2137 } ià(
ty³
 =ğ
RDB_OPCODE_AUX
) {

2143 
robj
 *
auxkey
, *
auxv®
;

2144 ià((
auxkey
 = 
	`rdbLßdSŒšgObjeù
(
rdb
)è=ğ
NULL
è
eoã¼
;

2145 ià((
auxv®
 = 
	`rdbLßdSŒšgObjeù
(
rdb
)è=ğ
NULL
è
eoã¼
;

2147 ià(((*)
auxkey
->
±r
)[0] == '%') {

2151 
	`£rv”Log
(
LL_NOTICE
,"RDB '%s': %s",

2152 (*)
auxkey
->
±r
,

2153 (*)
auxv®
->
±r
);

2154 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"repl-stream-db")) {

2155 ià(
rsi
èrsi->
»¶_¡»am_db
 = 
	`©oi
(
auxv®
->
±r
);

2156 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"repl-id")) {

2157 ià(
rsi
 && 
	`sd¦’
(
auxv®
->
±r
è=ğ
CONFIG_RUN_ID_SIZE
) {

2158 
	`memıy
(
rsi
->
»¶_id
,
auxv®
->
±r
,
CONFIG_RUN_ID_SIZE
+1);

2159 
rsi
->
»¶_id_is_£t
 = 1;

2161 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"repl-offset")) {

2162 ià(
rsi
èrsi->
»¶_off£t
 = 
	`¡¹Şl
(
auxv®
->
±r
,
NULL
,10);

2163 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"lua")) {

2165 ià(
	`luaC»©eFunùiÚ
(
NULL
,
£rv”
.
lua
,
auxv®
) == NULL) {

2166 
	`rdbEx™R•ÜtCÜru±RDB
(

2168 "BODY: %s", 
auxv®
->
±r
);

2170 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"redis-ver")) {

2171 
	`£rv”Log
(
LL_NOTICE
,"Loading RDB…roduced by version %s",

2172 (*)
auxv®
->
±r
);

2173 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"ctime")) {

2174 
time_t
 
age
 = 
	`time
(
NULL
)-
	`¡¹Ş
(
auxv®
->
±r
,NULL,10);

2175 ià(
age
 < 0)‡ge = 0;

2176 
	`£rv”Log
(
LL_NOTICE
,"RDB‡ge %ld seconds",

2177 (è
age
);

2178 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"used-mem")) {

2179 
u£dmem
 = 
	`¡¹Şl
(
auxv®
->
±r
,
NULL
,10);

2180 
	`£rv”Log
(
LL_NOTICE
,"RDB memory usage when created %.2f Mb",

2181 (è
u£dmem
 / (1024*1024));

2182 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"aof-preamble")) {

2183 
ha¥»ambË
 = 
	`¡¹Şl
(
auxv®
->
±r
,
NULL
,10);

2184 ià(
ha¥»ambË
è
	`£rv”Log
(
LL_NOTICE
,"RDB has‡n AOFail");

2185 } ià(!
	`¡rÿ£cmp
(
auxkey
->
±r
,"redis-bits")) {

2190 
	`£rv”Log
(
LL_DEBUG
,"Unrecognized RDB AUX field: '%s'",

2191 (*)
auxkey
->
±r
);

2194 
	`deüRefCouÁ
(
auxkey
);

2195 
	`deüRefCouÁ
(
auxv®
);

2197 } ià(
ty³
 =ğ
RDB_OPCODE_MODULE_AUX
) {

2201 
ušt64_t
 
moduËid
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

2202 
wh’_İcode
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

2203 
wh’
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

2204 ià(
	`rioG‘R—dE¼Ü
(
rdb
)è
eoã¼
;

2205 ià(
wh’_İcode
 !ğ
RDB_MODULE_OPCODE_UINT
)

2206 
	`rdbR•ÜtR—dE¼Ü
("bad when_opcode");

2207 
moduËTy³
 *
mt
 = 
	`moduËTy³LookupModuËByID
(
moduËid
);

2208 
Çme
[10];

2209 
	`moduËTy³NameByID
(
Çme
,
moduËid
);

2211 ià(!
rdbCheckMode
 && 
mt
 =ğ
NULL
) {

2213 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš AUX moduË d©¨I cª'ˆlßd:‚Øm©chšg moduË '%s'", 
Çme
);

2214 
	`ex™
(1);

2215 } ià(!
rdbCheckMode
 && 
mt
 !ğ
NULL
) {

2216 ià(!
mt
->
aux_lßd
) {

2218 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË AUX d©a, buˆthmoduË '%s' dÛ¢'ˆ£emØsuµÜˆ™.", 
Çme
);

2219 
	`ex™
(1);

2222 
RedisModuËIO
 
io
;

2223 
	`moduËIn™IOCÚ‹xt
(
io
,
mt
,
rdb
,
NULL
);

2224 
io
.
v”
 = 2;

2227 ià(
mt
->
	`aux_lßd
(&
io
,
moduËid
&1023, 
wh’
è!ğ
REDISMODULE_OK
 || io.
”rÜ
) {

2228 
	`moduËTy³NameByID
(
Çme
,
moduËid
);

2229 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË AUX d©¨fÜhmoduËy³ '%s',h©h»¥ÚsibË moduË i nÙ‡bËØlßd. Check fÜ moduË log‡bovfÜ‡dd™iÚ® clues.", 
Çme
);

2230 
	`ex™
(1);

2232 ià(
io
.
ùx
) {

2233 
	`moduËF»eCÚ‹xt
(
io
.
ùx
);

2234 
	`zä“
(
io
.
ùx
);

2236 
ušt64_t
 
eof
 = 
	`rdbLßdL’
(
rdb
,
NULL
);

2237 ià(
eof
 !ğ
RDB_MODULE_OPCODE_EOF
) {

2238 
	`£rv”Log
(
LL_WARNING
,"ThRDB fcÚš moduË AUX d©¨fÜhmoduË '%s'h© i nÙ”mš©ed byh´İ” moduË v®uEOF m¬k”", 
Çme
);

2239 
	`ex™
(1);

2244 
robj
 *
aux
 = 
	`rdbLßdCheckModuËV®ue
(
rdb
,
Çme
);

2245 
	`deüRefCouÁ
(
aux
);

2251 ià((
key
 = 
	`rdbG’”icLßdSŒšgObjeù
(
rdb
,
RDB_LOAD_SDS
,
NULL
)) == NULL)

2252 
eoã¼
;

2254 ià((
v®
 = 
	`rdbLßdObjeù
(
ty³
,
rdb
,
key
)è=ğ
NULL
) {

2255 
	`sdsä“
(
key
);

2256 
eoã¼
;

2267 ià(
	`iAmMa¡”
() &&

2268 !(
rdbæags
&
RDBFLAGS_AOF_PREAMBLE
) &&

2269 
expœ‘ime
 !ğ-1 &&ƒxpœ‘im< 
now
)

2271 
	`sdsä“
(
key
);

2272 
	`deüRefCouÁ
(
v®
);

2274 
robj
 
keyobj
;

2277 
added
 = 
	`dbAddRDBLßd
(
db
,
key
,
v®
);

2278 ià(!
added
) {

2279 ià(
rdbæags
 & 
RDBFLAGS_ALLOW_DUP
) {

2283 
	`š™SticSŒšgObjeù
(
keyobj
,
key
);

2284 
	`dbSyncD–‘e
(
db
,&
keyobj
);

2285 
	`dbAddRDBLßd
(
db
,
key
,
v®
);

2287 
	`£rv”Log
(
LL_WARNING
,

2288 "RDB ha du¶iÿ‹d key '%s' iÀDB %d",
key
,
db
->
id
);

2289 
	`£rv”Pªic
("Duplicated key found in RDB file");

2294 ià(
expœ‘ime
 != -1) {

2295 
	`š™SticSŒšgObjeù
(
keyobj
,
key
);

2296 
	`£tExpœe
(
NULL
,
db
,&
keyobj
,
expœ‘ime
);

2300 
	`objeùS‘LRUOrLFU
(
v®
,
lfu_äeq
,
Ìu_idË
,
Ìu_şock
,1000);

2305 ià(
£rv”
.
key_lßd_d–ay
è
	`u¦“p
(server.key_load_delay);

2309 
expœ‘ime
 = -1;

2310 
lfu_äeq
 = -1;

2311 
Ìu_idË
 = -1;

2314 ià(
rdbv”
 >= 5) {

2315 
ušt64_t
 
cksum
, 
ex³ùed
 = 
rdb
->cksum;

2317 ià(
	`rioR—d
(
rdb
,&
cksum
,8è=ğ0è
eoã¼
;

2318 ià(
£rv”
.
rdb_checksum
) {

2319 
	`mem»v64ifbe
(&
cksum
);

2320 ià(
cksum
 == 0) {

2321 
	`£rv”Log
(
LL_WARNING
,"RDB file was saved with checksum disabled:‚o check…erformed.");

2322 } ià(
cksum
 !ğ
ex³ùed
) {

2323 
	`£rv”Log
(
LL_WARNING
,"Wrong RDB checksumƒxpected: (%llx) but "

2325 ()
ex³ùed
,

2326 ()
cksum
);

2327 
	`rdbEx™R•ÜtCÜru±RDB
("RDB CRCƒrror");

2331  
C_OK
;

2337 
eoã¼
:

2338 
	`£rv”Log
(
LL_WARNING
,

2340 
	`rdbR•ÜtR—dE¼Ü
("Unexpected EOF„eading RDB file");

2341  
C_ERR
;

2342 
	}
}

2351 
	$rdbLßd
(*
f’ame
, 
rdbSaveInfo
 *
rsi
, 
rdbæags
) {

2352 
FILE
 *
å
;

2353 
rio
 
rdb
;

2354 
»tv®
;

2356 ià((
å
 = 
	`fİ’
(
f’ame
,"r")è=ğ
NULL
è 
C_ERR
;

2357 
	`¡¬tLßdšgFe
(
å
, 
f’ame
,
rdbæags
);

2358 
	`rioIn™W™hFe
(&
rdb
,
å
);

2359 
»tv®
 = 
	`rdbLßdRio
(&
rdb
,
rdbæags
,
rsi
);

2360 
	`fşo£
(
å
);

2361 
	`¡İLßdšg
(
»tv®
==
C_OK
);

2362  
»tv®
;

2363 
	}
}

2367 
	$backgroundSaveDÚeHªdËrDisk
(
ex™code
, 
bysigÇl
) {

2368 ià(!
bysigÇl
 && 
ex™code
 == 0) {

2369 
	`£rv”Log
(
LL_NOTICE
,

2371 
£rv”
.
dœty
 = s”v”.dœty - s”v”.
dœty_befÜe_bg§ve
;

2372 
£rv”
.
Ï¡§ve
 = 
	`time
(
NULL
);

2373 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_OK
;

2374 } ià(!
bysigÇl
 && 
ex™code
 != 0) {

2375 
	`£rv”Log
(
LL_WARNING
, "Background savingƒrror");

2376 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_ERR
;

2378 
m¡ime_t
 
Ï‹ncy
;

2380 
	`£rv”Log
(
LL_WARNING
,

2381 "Background savšg”mš©ed by sigÇÈ%d", 
bysigÇl
);

2382 
	`Ï‹ncyS¹MÚ™Ü
(
Ï‹ncy
);

2383 
	`rdbRemoveTempFe
(
£rv”
.
rdb_chd_pid
);

2384 
	`Ï‹ncyEndMÚ™Ü
(
Ï‹ncy
);

2385 
	`Ï‹ncyAddSam¶eIfN“ded
("rdb-uÆšk-‹mp-fe",
Ï‹ncy
);

2388 ià(
bysigÇl
 !ğ
SIGUSR1
)

2389 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_ERR
;

2391 
£rv”
.
rdb_chd_pid
 = -1;

2392 
£rv”
.
rdb_chd_ty³
 = 
RDB_CHILD_TYPE_NONE
;

2393 
£rv”
.
rdb_§ve_time_Ï¡
 = 
	`time
(
NULL
)-£rv”.
rdb_§ve_time_¡¬t
;

2394 
£rv”
.
rdb_§ve_time_¡¬t
 = -1;

2397 
	`upd©eSÏvesWa™šgBg§ve
((!
bysigÇl
 && 
ex™code
 =ğ0è? 
C_OK
 : 
C_ERR
, 
RDB_CHILD_TYPE_DISK
);

2398 
	}
}

2403 
	$backgroundSaveDÚeHªdËrSock‘
(
ex™code
, 
bysigÇl
) {

2404 ià(!
bysigÇl
 && 
ex™code
 == 0) {

2405 
	`£rv”Log
(
LL_NOTICE
,

2407 } ià(!
bysigÇl
 && 
ex™code
 != 0) {

2408 
	`£rv”Log
(
LL_WARNING
, "Backgroundransferƒrror");

2410 
	`£rv”Log
(
LL_WARNING
,

2411 "Background¿nsã¸‹rmš©ed by sigÇÈ%d", 
bysigÇl
);

2413 
£rv”
.
rdb_chd_pid
 = -1;

2414 
£rv”
.
rdb_chd_ty³
 = 
RDB_CHILD_TYPE_NONE
;

2415 
£rv”
.
rdb_§ve_time_¡¬t
 = -1;

2417 
	`upd©eSÏvesWa™šgBg§ve
((!
bysigÇl
 && 
ex™code
 =ğ0è? 
C_OK
 : 
C_ERR
, 
RDB_CHILD_TYPE_SOCKET
);

2418 
	}
}

2421 
	$backgroundSaveDÚeHªdËr
(
ex™code
, 
bysigÇl
) {

2422 
£rv”
.
rdb_chd_ty³
) {

2423 
RDB_CHILD_TYPE_DISK
:

2424 
	`backgroundSaveDÚeHªdËrDisk
(
ex™code
,
bysigÇl
);

2426 
RDB_CHILD_TYPE_SOCKET
:

2427 
	`backgroundSaveDÚeHªdËrSock‘
(
ex™code
,
bysigÇl
);

2430 
	`£rv”Pªic
("Unknown RDB childype.");

2433 
	}
}

2438 
	$klRDBChd
() {

2439 
	`kl
(
£rv”
.
rdb_chd_pid
,
SIGUSR1
);

2440 
	`rdbRemoveTempFe
(
£rv”
.
rdb_chd_pid
);

2441 
	`şo£ChdInfoPe
();

2442 
	`upd©eDiùResizePŞicy
();

2443 
	}
}

2447 
	$rdbSaveToSÏvesSock‘s
(
rdbSaveInfo
 *
rsi
) {

2448 
li¡Node
 *
Ê
;

2449 
li¡I‹r
 
li
;

2450 
pid_t
 
chdpid
;

2451 
pefds
[2];

2453 ià(
	`hasAùiveChdProûss
()è 
C_ERR
;

2457 ià(
£rv”
.
rdb_pe_cÚns
è 
C_ERR
;

2463 ià(
	`pe
(
pefds
è=ğ-1è 
C_ERR
;

2464 
£rv”
.
rdb_pe_»ad
 = 
pefds
[0];

2465 
£rv”
.
rdb_pe_wr™e
 = 
pefds
[1];

2466 
	`ª‘NÚBlock
(
NULL
, 
£rv”
.
rdb_pe_»ad
);

2470 
£rv”
.
rdb_pe_cÚns
 = 
	`zm®loc
((
cÚÃùiÚ
 *)*
	`li¡L’gth
(£rv”.
¦aves
));

2471 
£rv”
.
rdb_pe_numcÚns
 = 0;

2472 
£rv”
.
rdb_pe_numcÚns_wr™šg
 = 0;

2473 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2474 (
Ê
 = 
	`li¡Next
(&
li
))) {

2475 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

2476 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) {

2477 
£rv”
.
rdb_pe_cÚns
[£rv”.
rdb_pe_numcÚns
++] = 
¦ave
->
cÚn
;

2478 
	`»¶iÿtiÚS‘upSÏveFÜFuÎResync
(
¦ave
,
	`g‘PsyncIn™ŸlOff£t
());

2483 
	`İ’ChdInfoPe
();

2484 ià((
chdpid
 = 
	`»disFÜk
()) == 0) {

2486 
»tv®
;

2487 
rio
 
rdb
;

2489 
	`rioIn™W™hFd
(&
rdb
,
£rv”
.
rdb_pe_wr™e
);

2491 
	`»disS‘ProcT™Ë
("redis-rdb-to-slaves");

2492 
	`»disS‘CpuAffš™y
(
£rv”
.
bg§ve_ıuli¡
);

2494 
»tv®
 = 
	`rdbSaveRioW™hEOFM¬k
(&
rdb
,
NULL
,
rsi
);

2495 ià(
»tv®
 =ğ
C_OK
 && 
	`rioFlush
(&
rdb
) == 0)

2496 
»tv®
 = 
C_ERR
;

2498 ià(
»tv®
 =ğ
C_OK
) {

2499 
	`£ndChdCOWInfo
(
CHILD_INFO_TYPE_RDB
, "RDB");

2502 
	`rioF»eFd
(&
rdb
);

2503 
	`şo£
(
£rv”
.
rdb_pe_wr™e
);

2504 
	`ex™FromChd
((
»tv®
 =ğ
C_OK
) ? 0 : 1);

2507 ià(
chdpid
 == -1) {

2508 
	`£rv”Log
(
LL_WARNING
,"Can't save in background: fork: %s",

2509 
	`¡»¼Ü
(
”ºo
));

2514 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2515 (
Ê
 = 
	`li¡Next
(&
li
))) {

2516 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

2517 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
) {

2518 
¦ave
->
»¶¡©e
 = 
SLAVE_STATE_WAIT_BGSAVE_START
;

2521 
	`şo£
(
£rv”
.
rdb_pe_wr™e
);

2522 
	`şo£
(
£rv”
.
rdb_pe_»ad
);

2523 
	`zä“
(
£rv”
.
rdb_pe_cÚns
);

2524 
£rv”
.
rdb_pe_cÚns
 = 
NULL
;

2525 
£rv”
.
rdb_pe_numcÚns
 = 0;

2526 
£rv”
.
rdb_pe_numcÚns_wr™šg
 = 0;

2527 
	`şo£ChdInfoPe
();

2529 
	`£rv”Log
(
LL_NOTICE
,"Background RDBransfer started by…id %d",

2530 
chdpid
);

2531 
£rv”
.
rdb_§ve_time_¡¬t
 = 
	`time
(
NULL
);

2532 
£rv”
.
rdb_chd_pid
 = 
chdpid
;

2533 
£rv”
.
rdb_chd_ty³
 = 
RDB_CHILD_TYPE_SOCKET
;

2534 
	`şo£
(
£rv”
.
rdb_pe_wr™e
);

2535 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
rdb_pe_»ad
, 
AE_READABLE
, 
rdbPeR—dHªdËr
,
NULL
è=ğ
AE_ERR
) {

2536 
	`£rv”Pªic
("Unrecoverableƒrror creating server.rdb_pipe_read fileƒvent.");

2539  (
chdpid
 =ğ-1è? 
C_ERR
 : 
C_OK
;

2541  
C_OK
;

2542 
	}
}

2544 
	$§veCommªd
(
ş›Á
 *
c
) {

2545 ià(
£rv”
.
rdb_chd_pid
 != -1) {

2546 
	`addR•lyE¼Ü
(
c
,"Background save‡lready in…rogress");

2549 
rdbSaveInfo
 
rsi
, *
rsŒ
;

2550 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

2551 ià(
	`rdbSave
(
£rv”
.
rdb_f’ame
,
rsŒ
è=ğ
C_OK
) {

2552 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2554 
	`addR•ly
(
c
,
sh¬ed
.
”r
);

2556 
	}
}

2559 
	$bg§veCommªd
(
ş›Á
 *
c
) {

2560 
scheduË
 = 0;

2564 ià(
c
->
¬gc
 > 1) {

2565 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"schedule")) {

2566 
scheduË
 = 1;

2568 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2573 
rdbSaveInfo
 
rsi
, *
rsŒ
;

2574 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

2576 ià(
£rv”
.
rdb_chd_pid
 != -1) {

2577 
	`addR•lyE¼Ü
(
c
,"Background save‡lready in…rogress");

2578 } ià(
	`hasAùiveChdProûss
()) {

2579 ià(
scheduË
) {

2580 
£rv”
.
rdb_bg§ve_scheduËd
 = 1;

2581 
	`addR•lyStus
(
c
,"Background saving scheduled");

2583 
	`addR•lyE¼Ü
(
c
,

2588 } ià(
	`rdbSaveBackground
(
£rv”
.
rdb_f’ame
,
rsŒ
è=ğ
C_OK
) {

2589 
	`addR•lyStus
(
c
,"Background saving started");

2591 
	`addR•ly
(
c
,
sh¬ed
.
”r
);

2593 
	}
}

2604 
rdbSaveInfo
 *
	$rdbPİuÏ‹SaveInfo
(
rdbSaveInfo
 *
rsi
) {

2605 
rdbSaveInfo
 
rsi_š™
 = 
RDB_SAVE_INFO_INIT
;

2606 *
rsi
 = 
rsi_š™
;

2615 ià(!
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_backlog
) {

2621 
rsi
->
»¶_¡»am_db
 = 
£rv”
.
¦ave£ldb
 == -1 ? 0 : server.slaveseldb;

2622  
rsi
;

2627 ià(
£rv”
.
ma¡”
) {

2628 
rsi
->
»¶_¡»am_db
 = 
£rv”
.
ma¡”
->
db
->
id
;

2629  
rsi
;

2637 ià(
£rv”
.
ÿched_ma¡”
) {

2638 
rsi
->
»¶_¡»am_db
 = 
£rv”
.
ÿched_ma¡”
->
db
->
id
;

2639  
rsi
;

2641  
NULL
;

2642 
	}
}

	@rdb.h

30 #iâdeà
__RDB_H


31 
	#__RDB_H


	)

33 
	~<¡dio.h
>

34 
	~"rio.h
"

37 
	~"£rv”.h
"

41 
	#RDB_VERSION
 9

	)

57 
	#RDB_6BITLEN
 0

	)

58 
	#RDB_14BITLEN
 1

	)

59 
	#RDB_32BITLEN
 0x80

	)

60 
	#RDB_64BITLEN
 0x81

	)

61 
	#RDB_ENCVAL
 3

	)

62 
	#RDB_LENERR
 
UINT64_MAX


	)

67 
	#RDB_ENC_INT8
 0

	)

68 
	#RDB_ENC_INT16
 1

	)

69 
	#RDB_ENC_INT32
 2

	)

70 
	#RDB_ENC_LZF
 3

	)

75 
	#RDB_TYPE_STRING
 0

	)

76 
	#RDB_TYPE_LIST
 1

	)

77 
	#RDB_TYPE_SET
 2

	)

78 
	#RDB_TYPE_ZSET
 3

	)

79 
	#RDB_TYPE_HASH
 4

	)

80 
	#RDB_TYPE_ZSET_2
 5

	)

81 
	#RDB_TYPE_MODULE
 6

	)

82 
	#RDB_TYPE_MODULE_2
 7

	)

87 
	#RDB_TYPE_HASH_ZIPMAP
 9

	)

88 
	#RDB_TYPE_LIST_ZIPLIST
 10

	)

89 
	#RDB_TYPE_SET_INTSET
 11

	)

90 
	#RDB_TYPE_ZSET_ZIPLIST
 12

	)

91 
	#RDB_TYPE_HASH_ZIPLIST
 13

	)

92 
	#RDB_TYPE_LIST_QUICKLIST
 14

	)

93 
	#RDB_TYPE_STREAM_LISTPACKS
 15

	)

97 
	#rdbIsObjeùTy³
(
t
è(Ñ >ğ0 && <ğ7è|| (ˆ>ğ9 && <ğ15))

	)

100 
	#RDB_OPCODE_MODULE_AUX
 247

	)

101 
	#RDB_OPCODE_IDLE
 248

	)

102 
	#RDB_OPCODE_FREQ
 249

	)

103 
	#RDB_OPCODE_AUX
 250

	)

104 
	#RDB_OPCODE_RESIZEDB
 251

	)

105 
	#RDB_OPCODE_EXPIRETIME_MS
 252

	)

106 
	#RDB_OPCODE_EXPIRETIME
 253

	)

107 
	#RDB_OPCODE_SELECTDB
 254

	)

108 
	#RDB_OPCODE_EOF
 255

	)

111 
	#RDB_MODULE_OPCODE_EOF
 0

	)

112 
	#RDB_MODULE_OPCODE_SINT
 1

	)

113 
	#RDB_MODULE_OPCODE_UINT
 2

	)

114 
	#RDB_MODULE_OPCODE_FLOAT
 3

	)

115 
	#RDB_MODULE_OPCODE_DOUBLE
 4

	)

116 
	#RDB_MODULE_OPCODE_STRING
 5

	)

119 
	#RDB_LOAD_NONE
 0

	)

120 
	#RDB_LOAD_ENC
 (1<<0)

	)

121 
	#RDB_LOAD_PLAIN
 (1<<1)

	)

122 
	#RDB_LOAD_SDS
 (1<<2)

	)

125 
	#RDBFLAGS_NONE
 0

	)

126 
	#RDBFLAGS_AOF_PREAMBLE
 (1<<0è

	)

127 
	#RDBFLAGS_REPLICATION
 (1<<1è

	)

128 
	#RDBFLAGS_ALLOW_DUP
 (1<<2è

	)

130 
rdbSaveTy³
(
rio
 *
rdb
, 
ty³
);

131 
rdbLßdTy³
(
rio
 *
rdb
);

132 
rdbSaveTime
(
rio
 *
rdb
, 
time_t
 
t
);

133 
time_t
 
rdbLßdTime
(
rio
 *
rdb
);

134 
rdbSaveL’
(
rio
 *
rdb
, 
ušt64_t
 
Ën
);

135 
rdbSaveMli£cÚdTime
(
rio
 *
rdb
, 
t
);

136 
rdbLßdMli£cÚdTime
(
rio
 *
rdb
, 
rdbv”
);

137 
ušt64_t
 
rdbLßdL’
(
rio
 *
rdb
, *
i£ncoded
);

138 
rdbLßdL’ByRef
(
rio
 *
rdb
, *
i£ncoded
, 
ušt64_t
 *
ËÅŒ
);

139 
rdbSaveObjeùTy³
(
rio
 *
rdb
, 
robj
 *
o
);

140 
rdbLßdObjeùTy³
(
rio
 *
rdb
);

141 
rdbLßd
(*
f’ame
, 
rdbSaveInfo
 *
rsi
, 
rdbæags
);

142 
rdbSaveBackground
(*
f’ame
, 
rdbSaveInfo
 *
rsi
);

143 
rdbSaveToSÏvesSock‘s
(
rdbSaveInfo
 *
rsi
);

144 
rdbRemoveTempFe
(
pid_t
 
chdpid
);

145 
rdbSave
(*
f’ame
, 
rdbSaveInfo
 *
rsi
);

146 
ssize_t
 
rdbSaveObjeù
(
rio
 *
rdb
, 
robj
 *
o
,„obj *
key
);

147 
size_t
 
rdbSavedObjeùL’
(
robj
 *
o
,„obj *
key
);

148 
robj
 *
rdbLßdObjeù
(
ty³
, 
rio
 *
rdb
, 
sds
 
key
);

149 
backgroundSaveDÚeHªdËr
(
ex™code
, 
bysigÇl
);

150 
rdbSaveKeyV®uePaœ
(
rio
 *
rdb
, 
robj
 *
key
,„obj *
v®
, 
expœ‘ime
);

151 
ssize_t
 
rdbSaveSšgËModuËAux
(
rio
 *
rdb
, 
wh’
, 
moduËTy³
 *
mt
);

152 
robj
 *
rdbLßdSŒšgObjeù
(
rio
 *
rdb
);

153 
ssize_t
 
rdbSaveSŒšgObjeù
(
rio
 *
rdb
, 
robj
 *
obj
);

154 
ssize_t
 
rdbSaveRawSŒšg
(
rio
 *
rdb
, *
s
, 
size_t
 
Ën
);

155 *
rdbG’”icLßdSŒšgObjeù
(
rio
 *
rdb
, 
æags
, 
size_t
 *
ËÅŒ
);

156 
rdbSaveBš¬yDoubËV®ue
(
rio
 *
rdb
, 
v®
);

157 
rdbLßdBš¬yDoubËV®ue
(
rio
 *
rdb
, *
v®
);

158 
rdbSaveBš¬yFlßtV®ue
(
rio
 *
rdb
, 
v®
);

159 
rdbLßdBš¬yFlßtV®ue
(
rio
 *
rdb
, *
v®
);

160 
rdbLßdRio
(
rio
 *
rdb
, 
rdbæags
, 
rdbSaveInfo
 *
rsi
);

161 
rdbSaveRio
(
rio
 *
rdb
, *
”rÜ
, 
rdbæags
, 
rdbSaveInfo
 *
rsi
);

162 
rdbSaveInfo
 *
rdbPİuÏ‹SaveInfo
ÔdbSaveInfØ*
rsi
);

	@redis-benchmark.c

31 
	~"fmaüos.h
"

33 
	~<¡dio.h
>

34 
	~<¡ršg.h
>

35 
	~<¡dlib.h
>

36 
	~<uni¡d.h
>

37 
	~<”ºo.h
>

38 
	~<time.h
>

39 
	~<sys/time.h
>

40 
	~<sigÇl.h
>

41 
	~<as£¹.h
>

42 
	~<m©h.h
>

43 
	~<±h»ad.h
>

45 
	~<sds.h
>

46 
	~"«.h
"

47 
	~"hœedis.h
"

48 
	~"adli¡.h
"

49 
	~"diù.h
"

50 
	~"zm®loc.h
"

51 
	~"©omicv¬.h
"

52 
	~"üc16_¦ÙbË.h
"

54 
	#UNUSED
(
V
è((èV)

	)

55 
	#RANDPTR_INITIAL_SIZE
 8

	)

56 
	#MAX_LATENCY_PRECISION
 3

	)

57 
	#MAX_THREADS
 500

	)

58 
	#CLUSTER_SLOTS
 16384

	)

60 
	#CLIENT_GET_EVENTLOOP
(
c
) \

61 (
c
->
th»ad_id
 >ğ0 ? 
cÚfig
.
th»ads
[c->th»ad_id]->
–
 : cÚfig.–)

	)

63 
	gb’chm¬kTh»ad
;

64 
	gşu¡”Node
;

65 
	g»disCÚfig
;

67 
	scÚfig
 {

68 
«Ev’tLoİ
 *
	m–
;

69 cÚ¡ *
	mho¡
;

70 
	mho¡pÜt
;

71 cÚ¡ *
	mho¡sock‘
;

72 
	mnumş›Ás
;

73 
	mliveş›Ás
;

74 
	m»que¡s
;

75 
	m»que¡s_issued
;

76 
	m»que¡s_fšished
;

77 
	mkeysize
;

78 
	md©asize
;

79 
	m¿ndomkeys
;

80 
	m¿ndomkeys_key¥aûËn
;

81 
	mk“·live
;

82 
	mp–še
;

83 
	mshow”rÜs
;

84 
	m¡¬t
;

85 
	mtÙÏ‹ncy
;

86 *
	mÏ‹ncy
;

87 cÚ¡ *
	mt™Ë
;

88 
li¡
 *
	mş›Ás
;

89 
	mqu›t
;

90 
	mcsv
;

91 
	mloİ
;

92 
	midËmode
;

93 
	mdbnum
;

94 
sds
 
	mdbnum¡r
;

95 *
	m‹¡s
;

96 *
	mauth
;

97 cÚ¡ *
	mu£r
;

98 
	m´ecisiÚ
;

99 
	mnum_th»ads
;

100 
b’chm¬kTh»ad
 **
	mth»ads
;

101 
	mşu¡”_mode
;

102 
	mşu¡”_node_couÁ
;

103 
şu¡”Node
 **
	mşu¡”_nodes
;

104 
»disCÚfig
 *
	m»dis_cÚfig
;

105 
	mis_ãtchšg_¦Ùs
;

106 
	mis_upd©šg_¦Ùs
;

107 
	m¦Ùs_Ï¡_upd©e
;

108 
	m’abË_Œackšg
;

110 
±h»ad_mu‹x_t
 
	m»que¡s_issued_mu‹x
;

111 
±h»ad_mu‹x_t
 
	m»que¡s_fšished_mu‹x
;

112 
±h»ad_mu‹x_t
 
	mliveş›Ás_mu‹x
;

113 
±h»ad_mu‹x_t
 
	mis_ãtchšg_¦Ùs_mu‹x
;

114 
±h»ad_mu‹x_t
 
	mis_upd©šg_¦Ùs_mu‹x
;

115 
±h»ad_mu‹x_t
 
	mupd©šg_¦Ùs_mu‹x
;

116 
±h»ad_mu‹x_t
 
	m¦Ùs_Ï¡_upd©e_mu‹x
;

117 } 
	gcÚfig
;

119 
	s_ş›Á
 {

120 
»disCÚ‹xt
 *
	mcÚ‹xt
;

121 
sds
 
	mobuf
;

122 **
	m¿nd±r
;

123 
size_t
 
	m¿ndËn
;

124 
size_t
 
	m¿ndä“
;

125 **
	m¡ag±r
;

126 
size_t
 
	m¡agËn
;

127 
size_t
 
	m¡agä“
;

128 
size_t
 
	mwr™‹n
;

129 
	m¡¬t
;

130 
	mÏ‹ncy
;

131 
	m³ndšg
;

132 
	m´efix_³ndšg
;

135 
	m´efixËn
;

136 
	mth»ad_id
;

137 
şu¡”Node
 *
	mşu¡”_node
;

138 
	m¦Ùs_Ï¡_upd©e
;

139 } *
	tş›Á
;

143 
	sb’chm¬kTh»ad
 {

144 
	mšdex
;

145 
±h»ad_t
 
	mth»ad
;

146 
«Ev’tLoİ
 *
	m–
;

147 } 
	tb’chm¬kTh»ad
;

150 
	sşu¡”Node
 {

151 *
	m
;

152 
	mpÜt
;

153 
sds
 
	mÇme
;

154 
	mæags
;

155 
sds
 
	m»¶iÿ‹
;

156 *
	m¦Ùs
;

157 
	m¦Ùs_couÁ
;

158 
	mcu¼’t_¦Ù_šdex
;

159 *
	mupd©ed_¦Ùs
;

160 
	mupd©ed_¦Ùs_couÁ
;

161 
	m»¶iÿs_couÁ
;

162 
sds
 *
	mmig¿tšg
;

164 
sds
 *
	mimpÜtšg
;

166 
	mmig¿tšg_couÁ
;

167 
	mimpÜtšg_couÁ
;

168 
»disCÚfig
 *
	m»dis_cÚfig
;

169 } 
	tşu¡”Node
;

171 
	s»disCÚfig
 {

172 
sds
 
	m§ve
;

173 
sds
 
	m­³ndÚly
;

174 } 
	t»disCÚfig
;

177 
wr™eHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

178 
ü—‹MissšgCl›Ás
(
ş›Á
 
c
);

179 
b’chm¬kTh»ad
 *
ü—‹B’chm¬kTh»ad
(
šdex
);

180 
ä“B’chm¬kTh»ad
(
b’chm¬kTh»ad
 *
th»ad
);

181 
ä“B’chm¬kTh»ads
();

182 *
execB’chm¬kTh»ad
(*
±r
);

183 
şu¡”Node
 *
ü—‹Clu¡”Node
(*

, 
pÜt
);

184 
»disCÚfig
 *
g‘RedisCÚfig
(cÚ¡ *

, 
pÜt
,

185 cÚ¡ *
ho¡sock‘
);

186 
ä“RedisCÚfig
(
»disCÚfig
 *
cfg
);

187 
ãtchClu¡”SlÙsCÚfigu¿tiÚ
(
ş›Á
 
c
);

188 
upd©eClu¡”SlÙsCÚfigu¿tiÚ
();

189 
showThroughput
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
,

190 *
ş›ÁD©a
);

193 
ušt64_t
 
diùSdsHash
(cÚ¡ *
key
);

194 
diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

195 cÚ¡ *
key2
);

198 
	$u¡ime
() {

199 
timev®
 
tv
;

200 
u¡
;

202 
	`g‘timeofday
(&
tv
, 
NULL
);

203 
u¡
 = (()
tv
.
tv_£c
)*1000000;

204 
u¡
 +ğ
tv
.
tv_u£c
;

205  
u¡
;

206 
	}
}

208 
	$m¡ime
() {

209 
timev®
 
tv
;

210 
m¡
;

212 
	`g‘timeofday
(&
tv
, 
NULL
);

213 
m¡
 = (()
tv
.
tv_£c
)*1000;

214 
m¡
 +ğ
tv
.
tv_u£c
/1000;

215  
m¡
;

216 
	}
}

218 
ušt64_t
 
	$diùSdsHash
(cÚ¡ *
key
) {

219  
	`diùG’HashFunùiÚ
((*)
key
, 
	`sd¦’
((*)key));

220 
	}
}

222 
	$diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

223 cÚ¡ *
key2
)

225 
l1
,
l2
;

226 
	`DICT_NOTUSED
(
´ivd©a
);

228 
l1
 = 
	`sd¦’
((
sds
)
key1
);

229 
l2
 = 
	`sd¦’
((
sds
)
key2
);

230 ià(
l1
 !ğ
l2
)  0;

231  
	`memcmp
(
key1
, 
key2
, 
l1
) == 0;

232 
	}
}

235 
	$_£rv”As£¹
(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
) {

236 
	`årštf
(
¡d”r
, "=== ASSERTION FAILED ===");

237 
	`årštf
(
¡d”r
, "==> %s:%d '%s' i nÙrue",
fe
,
lše
,
e¡r
);

239 
	}
}

241 
»disCÚfig
 *
	$g‘RedisCÚfig
(cÚ¡ *

, 
pÜt
,

242 cÚ¡ *
ho¡sock‘
)

244 
»disCÚfig
 *
cfg
 = 
	`zÿÎoc
((*cfg));

245 ià(!
cfg
è 
NULL
;

246 
»disCÚ‹xt
 *
c
 = 
NULL
;

247 
»disR•ly
 *
»¶y
 = 
NULL
, *
sub_»¶y
 = NULL;

248 ià(
ho¡sock‘
 =ğ
NULL
)

249 
c
 = 
	`»disCÚÃù
(

, 
pÜt
);

251 
c
 = 
	`»disCÚÃùUnix
(
ho¡sock‘
);

252 ià(
c
 =ğ
NULL
 || c->
”r
) {

253 
	`årštf
(
¡d”r
,"Could‚ot connecto Redis‡t ");

254 *
”r
 = (
c
 !ğ
NULL
 ? c->
”r¡r
 : "");

255 ià(
ho¡sock‘
 =ğ
NULL
è
	`årštf
(
¡d”r
,"%s:%d: %s\n",

,
pÜt
,
”r
);

256 
	`årštf
(
¡d”r
,"%s: %s\n",
ho¡sock‘
,
”r
);

257 
ç
;

260 if(
cÚfig
.
auth
) {

261 *
authR•ly
 = 
NULL
;

262 ià(
cÚfig
.
u£r
 =ğ
NULL
)

263 
	`»disAµ’dCommªd
(
c
, "AUTH %s", 
cÚfig
.
auth
);

265 
	`»disAµ’dCommªd
(
c
, "AUTH % %s", 
cÚfig
.
u£r
, cÚfig.
auth
);

266 ià(
REDIS_OK
 !ğ
	`»disG‘R•ly
(
c
, &
authR•ly
)è
ç
;

267 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

268 
»¶y
 = ((
»disR•ly
 *è
authR•ly
);

269 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

270 
	`årštf
(
¡d”r
, "ERROR: %s\n", 
»¶y
->
¡r
);

271 
ç
;

275 
	`»disAµ’dCommªd
(
c
, "CONFIG GET %s", "save");

276 
	`»disAµ’dCommªd
(
c
, "CONFIG GET %s", "appendonly");

277 
i
 = 0;

278 *
r
 = 
NULL
;

279 ; 
i
 < 2; i++) {

280 
»s
 = 
	`»disG‘R•ly
(
c
, &
r
);

281 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

282 
»¶y
 = 
»s
 =ğ
REDIS_OK
 ? ((
»disR•ly
 *è
r
è: 
NULL
;

283 ià(
»s
 !ğ
REDIS_OK
 || !
r
è
ç
;

284 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

285 
	`årštf
(
¡d”r
, "ERROR: %s\n", 
»¶y
->
¡r
);

286 
ç
;

288 ià(
»¶y
->
ty³
 !ğ
REDIS_REPLY_ARRAY
 ||„•ly->
–em’ts
 < 2è
ç
;

289 
sub_»¶y
 = 
»¶y
->
–em’t
[1];

290 *
v®ue
 = 
sub_»¶y
->
¡r
;

291 ià(!
v®ue
) value = "";

292 
i
) {

293 0: 
cfg
->
§ve
 = 
	`sd¢ew
(
v®ue
); ;

294 1: 
cfg
->
­³ndÚly
 = 
	`sd¢ew
(
v®ue
); ;

297 
	`ä“R•lyObjeù
(
»¶y
);

298 
	`»disF»e
(
c
);

299  
cfg
;

300 
ç
:

301 
	`årštf
(
¡d”r
, "ERROR: failedo fetch CONFIG from ");

302 ià(
ho¡sock‘
 =ğ
NULL
è
	`årštf
(
¡d”r
, "%s:%d\n", 

, 
pÜt
);

303 
	`årštf
(
¡d”r
, "%s\n", 
ho¡sock‘
);

304 
	`ä“R•lyObjeù
(
»¶y
);

305 
	`»disF»e
(
c
);

306 
	`zä“
(
cfg
);

307  
NULL
;

308 
	}
}

309 
	$ä“RedisCÚfig
(
»disCÚfig
 *
cfg
) {

310 ià(
cfg
->
§ve
è
	`sdsä“
(cfg->save);

311 ià(
cfg
->
­³ndÚly
è
	`sdsä“
(cfg->appendonly);

312 
	`zä“
(
cfg
);

313 
	}
}

315 
	$ä“Cl›Á
(
ş›Á
 
c
) {

316 
«Ev’tLoİ
 *
–
 = 
	`CLIENT_GET_EVENTLOOP
(
c
);

317 
li¡Node
 *
Ê
;

318 
	`«D–‘eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_WRITABLE
);

319 
	`«D–‘eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_READABLE
);

320 ià(
c
->
th»ad_id
 >= 0) {

321 
»que¡s_fšished
 = 0;

322 
	`©omicG‘
(
cÚfig
.
»que¡s_fšished
,„equests_finished);

323 ià(
»que¡s_fšished
 >ğ
cÚfig
.
»que¡s
) {

324 
	`«Stİ
(
–
);

327 
	`»disF»e
(
c
->
cÚ‹xt
);

328 
	`sdsä“
(
c
->
obuf
);

329 
	`zä“
(
c
->
¿nd±r
);

330 
	`zä“
(
c
->
¡ag±r
);

331 
	`zä“
(
c
);

332 ià(
cÚfig
.
num_th»ads
è
	`±h»ad_mu‹x_lock
(&(cÚfig.
liveş›Ás_mu‹x
));

333 
cÚfig
.
liveş›Ás
--;

334 
Ê
 = 
	`li¡S—rchKey
(
cÚfig
.
ş›Ás
,
c
);

335 
	`as£¹
(
Ê
 !ğ
NULL
);

336 
	`li¡D–Node
(
cÚfig
.
ş›Ás
,
Ê
);

337 ià(
cÚfig
.
num_th»ads
è
	`±h»ad_mu‹x_uÆock
(&(cÚfig.
liveş›Ás_mu‹x
));

338 
	}
}

340 
	$ä“AÎCl›Ás
() {

341 
li¡Node
 *
Ê
 = 
cÚfig
.
ş›Ás
->
h—d
, *
Ãxt
;

343 
Ê
) {

344 
Ãxt
 = 
Ê
->next;

345 
	`ä“Cl›Á
(
Ê
->
v®ue
);

346 
Ê
 = 
Ãxt
;

348 
	}
}

350 
	$»£tCl›Á
(
ş›Á
 
c
) {

351 
«Ev’tLoİ
 *
–
 = 
	`CLIENT_GET_EVENTLOOP
(
c
);

352 
	`«D–‘eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_WRITABLE
);

353 
	`«D–‘eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_READABLE
);

354 
	`«C»©eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_WRITABLE
,
wr™eHªdËr
,c);

355 
c
->
wr™‹n
 = 0;

356 
c
->
³ndšg
 = 
cÚfig
.
p–še
;

357 
	}
}

359 
	$¿ndomizeCl›ÁKey
(
ş›Á
 
c
) {

360 
size_t
 
i
;

362 
i
 = 0; i < 
c
->
¿ndËn
; i++) {

363 *
p
 = 
c
->
¿nd±r
[
i
]+11;

364 
size_t
 
r
 = 0;

365 ià(
cÚfig
.
¿ndomkeys_key¥aûËn
 != 0)

366 
r
 = 
	`¿ndom
(è% 
cÚfig
.
¿ndomkeys_key¥aûËn
;

367 
size_t
 
j
;

369 
j
 = 0; j < 12; j++) {

370 *
p
 = '0'+
r
%10;

371 
r
/=10;

372 
p
--;

375 
	}
}

377 
	$£tClu¡”KeyHashTag
(
ş›Á
 
c
) {

378 
	`as£¹
(
c
->
th»ad_id
 >= 0);

379 
şu¡”Node
 *
node
 = 
c
->
şu¡”_node
;

380 
	`as£¹
(
node
);

381 
	`as£¹
(
node
->
cu¼’t_¦Ù_šdex
 <‚ode->
¦Ùs_couÁ
);

382 
is_upd©šg_¦Ùs
 = 0;

383 
	`©omicG‘
(
cÚfig
.
is_upd©šg_¦Ùs
, is_updating_slots);

390 ià(
is_upd©šg_¦Ùs
è
	`upd©eClu¡”SlÙsCÚfigu¿tiÚ
();

391 
¦Ù
 = 
node
->
¦Ùs
[node->
cu¼’t_¦Ù_šdex
];

392 cÚ¡ *
g
 = 
üc16_¦Ù_bË
[
¦Ù
];

393 
gËn
 = 
	`¡¾’
(
g
);

394 
size_t
 
i
;

395 
i
 = 0; i < 
c
->
¡agËn
; i++) {

396 *
p
 = 
c
->
¡ag±r
[
i
] + 1;

397 
p
[0] = 
g
[0];

398 
p
[1] = (
gËn
 >ğ2 ? 
g
[1] : '}');

399 
p
[2] = (
gËn
 =ğ3 ? 
g
[2] : '}');

401 
	}
}

403 
	$ş›ÁDÚe
(
ş›Á
 
c
) {

404 
»que¡s_fšished
 = 0;

405 
	`©omicG‘
(
cÚfig
.
»que¡s_fšished
,„equests_finished);

406 ià(
»que¡s_fšished
 >ğ
cÚfig
.
»que¡s
) {

407 
	`ä“Cl›Á
(
c
);

408 ià(!
cÚfig
.
num_th»ads
 && cÚfig.
–
è
	`«Stİ
(config.el);

411 ià(
cÚfig
.
k“·live
) {

412 
	`»£tCl›Á
(
c
);

414 ià(
cÚfig
.
num_th»ads
è
	`±h»ad_mu‹x_lock
(&(cÚfig.
liveş›Ás_mu‹x
));

415 
cÚfig
.
liveş›Ás
--;

416 
	`ü—‹MissšgCl›Ás
(
c
);

417 
cÚfig
.
liveş›Ás
++;

418 ià(
cÚfig
.
num_th»ads
)

419 
	`±h»ad_mu‹x_uÆock
(&(
cÚfig
.
liveş›Ás_mu‹x
));

420 
	`ä“Cl›Á
(
c
);

422 
	}
}

424 
	$»adHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

425 
ş›Á
 
c
 = 
´ivd©a
;

426 *
»¶y
 = 
NULL
;

427 
	`UNUSED
(
–
);

428 
	`UNUSED
(
fd
);

429 
	`UNUSED
(
mask
);

434 ià(
c
->
Ï‹ncy
 < 0èc->Ï‹ncy = 
	`u¡ime
()-(c->
¡¬t
);

436 ià(
	`»disBufãrR—d
(
c
->
cÚ‹xt
è!ğ
REDIS_OK
) {

437 
	`årštf
(
¡d”r
,"E¼Ü: %s\n",
c
->
cÚ‹xt
->
”r¡r
);

438 
	`ex™
(1);

440 
c
->
³ndšg
) {

441 ià(
	`»disG‘R•ly
(
c
->
cÚ‹xt
,&
»¶y
è!ğ
REDIS_OK
) {

442 
	`årštf
(
¡d”r
,"E¼Ü: %s\n",
c
->
cÚ‹xt
->
”r¡r
);

443 
	`ex™
(1);

445 ià(
»¶y
 !ğ
NULL
) {

446 ià(
»¶y
 =ğ(*)
REDIS_REPLY_ERROR
) {

447 
	`årštf
(
¡d”r
,"Unexpectedƒrror„eply,ƒxiting...\n");

448 
	`ex™
(1);

450 
»disR•ly
 *
r
 = 
»¶y
;

451 
is_”r
 = (
r
->
ty³
 =ğ
REDIS_REPLY_ERROR
);

453 ià(
is_”r
 && 
cÚfig
.
show”rÜs
) {

455 
time_t
 
Ï¡”r_time
 = 0;

456 
time_t
 
now
 = 
	`time
(
NULL
);

457 ià(
Ï¡”r_time
 !ğ
now
) {

458 
Ï¡”r_time
 = 
now
;

459 ià(
c
->
şu¡”_node
) {

460 
	`´štf
("Error from server %s:%d: %s\n",

461 
c
->
şu¡”_node
->

,

462 
c
->
şu¡”_node
->
pÜt
,

463 
r
->
¡r
);

464 } 
	`´štf
("E¼Ü from s”v”: %s\n", 
r
->
¡r
);

471 ià(
is_”r
 && 
c
->
şu¡”_node
 && c->
¡agËn
) {

472 
ãtch_¦Ùs
 = 0, 
do_wa™
 = 0;

473 ià(!
	`¡ºcmp
(
r
->
¡r
,"MOVED",5) || !strncmp(r->str,"ASK",3))

474 
ãtch_¦Ùs
 = 1;

475 ià(!
	`¡ºcmp
(
r
->
¡r
,"CLUSTERDOWN",11)) {

479 
ãtch_¦Ùs
 = 1;

480 
do_wa™
 = 1;

481 
	`´štf
("Error from server %s:%d: %s\n",

482 
c
->
şu¡”_node
->

,

483 
c
->
şu¡”_node
->
pÜt
,

484 
r
->
¡r
);

486 ià(
do_wa™
è
	`¦“p
(1);

487 ià(
ãtch_¦Ùs
 && !
	`ãtchClu¡”SlÙsCÚfigu¿tiÚ
(
c
))

488 
	`ex™
(1);

491 
	`ä“R•lyObjeù
(
»¶y
);

493 ià(
c
->
´efix_³ndšg
 > 0) {

494 
c
->
´efix_³ndšg
--;

495 
c
->
³ndšg
--;

497 ià(
c
->
´efixËn
 > 0) {

498 
size_t
 
j
;

499 
	`sd¤ªge
(
c
->
obuf
, c->
´efixËn
, -1);

502 
j
 = 0; j < 
c
->
¿ndËn
; j++)

503 
c
->
¿nd±r
[
j
] -ğc->
´efixËn
;

504 
c
->
´efixËn
 = 0;

508 
»que¡s_fšished
 = 0;

509 
	`©omicG‘Inü
(
cÚfig
.
»que¡s_fšished
,„equests_finished, 1);

510 ià(
»que¡s_fšished
 < 
cÚfig
.
»que¡s
)

511 
cÚfig
.
Ï‹ncy
[
»que¡s_fšished
] = 
c
->latency;

512 
c
->
³ndšg
--;

513 ià(
c
->
³ndšg
 == 0) {

514 
	`ş›ÁDÚe
(
c
);

522 
	}
}

524 
	$wr™eHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

525 
ş›Á
 
c
 = 
´ivd©a
;

526 
	`UNUSED
(
–
);

527 
	`UNUSED
(
fd
);

528 
	`UNUSED
(
mask
);

531 ià(
c
->
wr™‹n
 == 0) {

533 
»que¡s_issued
 = 0;

534 
	`©omicG‘Inü
(
cÚfig
.
»que¡s_issued
,„equests_issued, 1);

535 ià(
»que¡s_issued
 >ğ
cÚfig
.
»que¡s
) {

536 
	`ä“Cl›Á
(
c
);

541 ià(
cÚfig
.
¿ndomkeys
è
	`¿ndomizeCl›ÁKey
(
c
);

542 ià(
cÚfig
.
şu¡”_mode
 && 
c
->
¡agËn
 > 0è
	`£tClu¡”KeyHashTag
(c);

543 
	`©omicG‘
(
cÚfig
.
¦Ùs_Ï¡_upd©e
, 
c
->slots_last_update);

544 
c
->
¡¬t
 = 
	`u¡ime
();

545 
c
->
Ï‹ncy
 = -1;

547 ià(
	`sd¦’
(
c
->
obuf
è> c->
wr™‹n
) {

548 *
±r
 = 
c
->
obuf
+c->
wr™‹n
;

549 
ssize_t
 
nwr™‹n
 = 
	`wr™e
(
c
->
cÚ‹xt
->
fd
,
±r
,
	`sd¦’
(c->
obuf
)-c->
wr™‹n
);

550 ià(
nwr™‹n
 == -1) {

551 ià(
”ºo
 !ğ
EPIPE
)

552 
	`årštf
(
¡d”r
, "Wr™šgØsock‘: %s\n", 
	`¡»¼Ü
(
”ºo
));

553 
	`ä“Cl›Á
(
c
);

556 
c
->
wr™‹n
 +ğ
nwr™‹n
;

557 ià(
	`sd¦’
(
c
->
obuf
è=ğc->
wr™‹n
) {

558 
	`«D–‘eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_WRITABLE
);

559 
	`«C»©eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_READABLE
,
»adHªdËr
,c);

562 
	}
}

585 
ş›Á
 
	$ü—‹Cl›Á
(*
cmd
, 
size_t
 
Ën
, 
ş›Á
 
äom
, 
th»ad_id
) {

586 
j
;

587 
is_şu¡”_ş›Á
 = (
cÚfig
.
şu¡”_mode
 && 
th»ad_id
 >= 0);

588 
ş›Á
 
c
 = 
	`zm®loc
((
_ş›Á
));

590 cÚ¡ *

 = 
NULL
;

591 
pÜt
 = 0;

592 
c
->
şu¡”_node
 = 
NULL
;

593 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
 || 
is_şu¡”_ş›Á
) {

594 ià(!
is_şu¡”_ş›Á
) {

595 

 = 
cÚfig
.
ho¡
;

596 
pÜt
 = 
cÚfig
.
ho¡pÜt
;

598 
node_idx
 = 0;

599 ià(
cÚfig
.
num_th»ads
 < cÚfig.
şu¡”_node_couÁ
)

600 
node_idx
 = 
cÚfig
.
liveş›Ás
 % cÚfig.
şu¡”_node_couÁ
;

602 
node_idx
 = 
th»ad_id
 % 
cÚfig
.
şu¡”_node_couÁ
;

603 
şu¡”Node
 *
node
 = 
cÚfig
.
şu¡”_nodes
[
node_idx
];

604 
	`as£¹
(
node
 !ğ
NULL
);

605 

 = (cÚ¡ *è
node
->ip;

606 
pÜt
 = 
node
->port;

607 
c
->
şu¡”_node
 = 
node
;

609 
c
->
cÚ‹xt
 = 
	`»disCÚÃùNÚBlock
(

,
pÜt
);

611 
c
->
cÚ‹xt
 = 
	`»disCÚÃùUnixNÚBlock
(
cÚfig
.
ho¡sock‘
);

613 ià(
c
->
cÚ‹xt
->
”r
) {

614 
	`årštf
(
¡d”r
,"Could‚ot connecto Redis‡t ");

615 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
 || 
is_şu¡”_ş›Á
)

616 
	`årštf
(
¡d”r
,"%s:%d: %s\n",

,
pÜt
,
c
->
cÚ‹xt
->
”r¡r
);

618 
	`årštf
(
¡d”r
,"%s: %s\n",
cÚfig
.
ho¡sock‘
,
c
->
cÚ‹xt
->
”r¡r
);

619 
	`ex™
(1);

621 
c
->
th»ad_id
 =hread_id;

623 
c
->
cÚ‹xt
->
»ad”
->
maxbuf
 = 0;

628 
c
->
obuf
 = 
	`sd£m±y
();

632 
c
->
´efix_³ndšg
 = 0;

633 ià(
cÚfig
.
auth
) {

634 *
buf
 = 
NULL
;

635 
Ën
;

636 ià(
cÚfig
.
u£r
 =ğ
NULL
)

637 
Ën
 = 
	`»disFÜm©Commªd
(&
buf
, "AUTH %s", 
cÚfig
.
auth
);

639 
Ën
 = 
	`»disFÜm©Commªd
(&
buf
, "AUTH %s %s",

640 
cÚfig
.
u£r
, cÚfig.
auth
);

641 
c
->
obuf
 = 
	`sdsÿ’
(c->obuf, 
buf
, 
Ën
);

642 
	`ä“
(
buf
);

643 
c
->
´efix_³ndšg
++;

646 ià(
cÚfig
.
’abË_Œackšg
) {

647 *
buf
 = 
NULL
;

648 
Ën
 = 
	`»disFÜm©Commªd
(&
buf
, "CLIENT TRACKING on");

649 
c
->
obuf
 = 
	`sdsÿ’
(c->obuf, 
buf
, 
Ën
);

650 
	`ä“
(
buf
);

651 
c
->
´efix_³ndšg
++;

658 ià(
cÚfig
.
dbnum
 !ğ0 && !
is_şu¡”_ş›Á
) {

659 
c
->
obuf
 = 
	`sdsÿrštf
(c->obuf,"*2\r\n$6\r\nSELECT\r\n$%d\r\n%s\r\n",

660 ()
	`sd¦’
(
cÚfig
.
dbnum¡r
),config.dbnumstr);

661 
c
->
´efix_³ndšg
++;

663 
c
->
´efixËn
 = 
	`sd¦’
(c->
obuf
);

665 ià(
äom
) {

666 
c
->
obuf
 = 
	`sdsÿ’
(c->obuf,

667 
äom
->
obuf
+äom->
´efixËn
,

668 
	`sd¦’
(
äom
->
obuf
)-äom->
´efixËn
);

670 
j
 = 0; j < 
cÚfig
.
p–še
; j++)

671 
c
->
obuf
 = 
	`sdsÿ’
(c->obuf,
cmd
,
Ën
);

674 
c
->
wr™‹n
 = 0;

675 
c
->
³ndšg
 = 
cÚfig
.
p–še
+c->
´efix_³ndšg
;

676 
c
->
¿nd±r
 = 
NULL
;

677 
c
->
¿ndËn
 = 0;

678 
c
->
¡ag±r
 = 
NULL
;

679 
c
->
¡agËn
 = 0;

682 ià(
cÚfig
.
¿ndomkeys
) {

683 ià(
äom
) {

684 
c
->
¿ndËn
 = 
äom
->randlen;

685 
c
->
¿ndä“
 = 0;

686 
c
->
¿nd±r
 = 
	`zm®loc
((*)*c->
¿ndËn
);

688 
j
 = 0; j < ()
c
->
¿ndËn
; j++) {

689 
c
->
¿nd±r
[
j
] = c->
obuf
 + (
äom
->randptr[j]-from->obuf);

691 
c
->
¿nd±r
[
j
] +ğc->
´efixËn
 - 
äom
->prefixlen;

694 *
p
 = 
c
->
obuf
;

696 
c
->
¿ndËn
 = 0;

697 
c
->
¿ndä“
 = 
RANDPTR_INITIAL_SIZE
;

698 
c
->
¿nd±r
 = 
	`zm®loc
((*)*c->
¿ndä“
);

699 (
p
 = 
	`¡r¡r
Õ,"__¿nd_št__")è!ğ
NULL
) {

700 ià(
c
->
¿ndä“
 == 0) {

701 
c
->
¿nd±r
 = 
	`z»®loc
(c->¿nd±r,(*)*c->
¿ndËn
*2);

702 
c
->
¿ndä“
 +ğc->
¿ndËn
;

704 
c
->
¿nd±r
[c->
¿ndËn
++] = 
p
;

705 
c
->
¿ndä“
--;

706 
p
 += 12;

711 ià(
cÚfig
.
şu¡”_mode
) {

712 ià(
äom
) {

713 
c
->
¡agËn
 = 
äom
->staglen;

714 
c
->
¡agä“
 = 0;

715 
c
->
¡ag±r
 = 
	`zm®loc
((*)*c->
¡agËn
);

717 
j
 = 0; j < ()
c
->
¡agËn
; j++) {

718 
c
->
¡ag±r
[
j
] = c->
obuf
 + (
äom
->stagptr[j]-from->obuf);

720 
c
->
¡ag±r
[
j
] +ğc->
´efixËn
 - 
äom
->prefixlen;

723 *
p
 = 
c
->
obuf
;

725 
c
->
¡agËn
 = 0;

726 
c
->
¡agä“
 = 
RANDPTR_INITIAL_SIZE
;

727 
c
->
¡ag±r
 = 
	`zm®loc
((*)*c->
¡agä“
);

728 (
p
 = 
	`¡r¡r
Õ,"{g}")è!ğ
NULL
) {

729 ià(
c
->
¡agä“
 == 0) {

730 
c
->
¡ag±r
 = 
	`z»®loc
(c->stagptr,

731 (*è* 
c
->
¡agËn
*2);

732 
c
->
¡agä“
 +ğc->
¡agËn
;

734 
c
->
¡ag±r
[c->
¡agËn
++] = 
p
;

735 
c
->
¡agä“
--;

736 
p
 += 5;

740 
«Ev’tLoİ
 *
–
 = 
NULL
;

741 ià(
th»ad_id
 < 0è
–
 = 
cÚfig
.el;

743 
b’chm¬kTh»ad
 *
th»ad
 = 
cÚfig
.
th»ads
[
th»ad_id
];

744 
–
 = 
th»ad
->el;

746 ià(
cÚfig
.
idËmode
 == 0)

747 
	`«C»©eFeEv’t
(
–
,
c
->
cÚ‹xt
->
fd
,
AE_WRITABLE
,
wr™eHªdËr
,c);

748 
	`li¡AddNodeTa
(
cÚfig
.
ş›Ás
,
c
);

749 
	`©omicInü
(
cÚfig
.
liveş›Ás
, 1);

750 
	`©omicG‘
(
cÚfig
.
¦Ùs_Ï¡_upd©e
, 
c
->slots_last_update);

751  
c
;

752 
	}
}

754 
	$ü—‹MissšgCl›Ás
(
ş›Á
 
c
) {

755 
n
 = 0;

756 
cÚfig
.
liveş›Ás
 < cÚfig.
numş›Ás
) {

757 
th»ad_id
 = -1;

758 ià(
cÚfig
.
num_th»ads
)

759 
th»ad_id
 = 
cÚfig
.
liveş›Ás
 % cÚfig.
num_th»ads
;

760 
	`ü—‹Cl›Á
(
NULL
,0,
c
,
th»ad_id
);

763 ià(++
n
 > 64) {

764 
	`u¦“p
(50000);

765 
n
 = 0;

768 
	}
}

770 
	$com·»L©’cy
(cÚ¡ *
a
, cÚ¡ *
b
) {

771  (*(*)
a
)-(*(*)
b
);

772 
	}
}

774 
	$ow
(
ba£
, 
exp
) {

775 
»suÉ
 = 1;

776 
exp
) {

777 ià(
exp
 & 1è
»suÉ
 *ğ
ba£
;

778 
exp
 /= 2;

779 
ba£
 *= base;

781  
»suÉ
;

782 
	}
}

784 
	$showL©’cyR•Üt
() {

785 
i
, 
cu¾©
 = 0;

786 
usb‘w“Æ©
 = 
	`ow
(10, 
MAX_LATENCY_PRECISION
-
cÚfig
.
´ecisiÚ
);

787 
³rc
, 
»q³r£c
;

789 
»q³r£c
 = ()
cÚfig
.
»que¡s_fšished
/(()cÚfig.
tÙÏ‹ncy
/1000);

790 ià(!
cÚfig
.
qu›t
 && !cÚfig.
csv
) {

791 
	`´štf
("=====ğ% ======\n", 
cÚfig
.
t™Ë
);

792 
	`´štf
(" %d„eque¡ com¶‘ed iÀ%.2à£cÚds\n", 
cÚfig
.
»que¡s_fšished
,

793 ()
cÚfig
.
tÙÏ‹ncy
/1000);

794 
	`´štf
(" %d…¬®ËÈş›Ás\n", 
cÚfig
.
numş›Ás
);

795 
	`´štf
(" %d by‹ ·ylßd\n", 
cÚfig
.
d©asize
);

796 
	`´štf
(" k“°®ive: %d\n", 
cÚfig
.
k“·live
);

797 ià(
cÚfig
.
şu¡”_mode
) {

798 
	`´štf
(" cluster mode: yes (%d masters)\n",

799 
cÚfig
.
şu¡”_node_couÁ
);

800 
m
 ;

801 
m
 = 0; m < 
cÚfig
.
şu¡”_node_couÁ
; m++) {

802 
şu¡”Node
 *
node
 = 
cÚfig
.
şu¡”_nodes
[
m
];

803 
»disCÚfig
 *
cfg
 = 
node
->
»dis_cÚfig
;

804 ià(
cfg
 =ğ
NULL
) ;

805 
	`´štf
("‚od[%d] cÚfigu¿tiÚ:\n",
m
 );

806 
	`´štf
(" save: %s\n",

807 
	`sd¦’
(
cfg
->
§ve
) ? cfg->save : "NONE");

808 
	`´štf
("‡µ’dÚly: %s\n", 
cfg
->
­³ndÚly
);

811 ià(
cÚfig
.
»dis_cÚfig
) {

812 
	`´štf
(" host configuration \"save\": %s\n",

813 
cÚfig
.
»dis_cÚfig
->
§ve
);

814 
	`´štf
(" host configuration \"appendonly\": %s\n",

815 
cÚfig
.
»dis_cÚfig
->
­³ndÚly
);

818 
	`´štf
(" muÉi-th»ad: %s\n", (
cÚfig
.
num_th»ads
 ? "yes" : "no"));

819 ià(
cÚfig
.
num_th»ads
)

820 
	`´štf
("h»ads: %d\n", 
cÚfig
.
num_th»ads
);

822 
	`´štf
("\n");

824 
	`qsÜt
(
cÚfig
.
Ï‹ncy
,cÚfig.
»que¡s
,(),
com·»L©’cy
);

825 
i
 = 0; i < 
cÚfig
.
»que¡s
; i++) {

826 ià(
cÚfig
.
Ï‹ncy
[
i
]/
usb‘w“Æ©
 !ğ
cu¾©
 ||

827 
i
 =ğ(
cÚfig
.
»que¡s
-1))

831 ià(
cÚfig
.
Ï‹ncy
[
i
] >= 2000) {

832 
cÚfig
.
´ecisiÚ
 = 0;

833 
usb‘w“Æ©
 = 
	`ow
(10,

834 
MAX_LATENCY_PRECISION
-
cÚfig
.
´ecisiÚ
);

837 
cu¾©
 = 
cÚfig
.
Ï‹ncy
[
i
]/
usb‘w“Æ©
;

838 
³rc
 = (()(
i
+1)*100)/
cÚfig
.
»que¡s
;

839 
	`´štf
("%.2f%% <ğ%.*àmli£cÚds\n", 
³rc
, 
cÚfig
.
´ecisiÚ
,

840 
cu¾©
/
	`pow
(10.0, 
cÚfig
.
´ecisiÚ
));

843 
	`´štf
("%.2à»que¡ ³¸£cÚd\n\n", 
»q³r£c
);

844 } ià(
cÚfig
.
csv
) {

845 
	`´štf
("\"%s\",\"%.2f\"\n", 
cÚfig
.
t™Ë
, 
»q³r£c
);

847 
	`´štf
("%s: %.2à»que¡ ³¸£cÚd\n", 
cÚfig
.
t™Ë
, 
»q³r£c
);

849 
	}
}

851 
	$š™B’chm¬kTh»ads
() {

852 
i
;

853 ià(
cÚfig
.
th»ads
è
	`ä“B’chm¬kTh»ads
();

854 
cÚfig
.
th»ads
 = 
	`zm®loc
(cÚfig.
num_th»ads
 * (
b’chm¬kTh»ad
*));

855 
i
 = 0; i < 
cÚfig
.
num_th»ads
; i++) {

856 
b’chm¬kTh»ad
 *
th»ad
 = 
	`ü—‹B’chm¬kTh»ad
(
i
);

857 
cÚfig
.
th»ads
[
i
] = 
th»ad
;

859 
	}
}

861 
	$¡¬tB’chm¬kTh»ads
() {

862 
i
;

863 
i
 = 0; i < 
cÚfig
.
num_th»ads
; i++) {

864 
b’chm¬kTh»ad
 *
t
 = 
cÚfig
.
th»ads
[
i
];

865 ià(
	`±h»ad_ü—‹
(&(
t
->
th»ad
), 
NULL
, 
execB’chm¬kTh»ad
,)){

866 
	`årštf
(
¡d”r
, "FATAL: FaedØ¡¬ˆth»ad %d.\n", 
i
);

867 
	`ex™
(1);

870 
i
 = 0; i < 
cÚfig
.
num_th»ads
; i++)

871 
	`±h»ad_još
(
cÚfig
.
th»ads
[
i
]->
th»ad
, 
NULL
);

872 
	}
}

874 
	$b’chm¬k
(*
t™Ë
, *
cmd
, 
Ën
) {

875 
ş›Á
 
c
;

877 
cÚfig
.
t™Ë
 =itle;

878 
cÚfig
.
»que¡s_issued
 = 0;

879 
cÚfig
.
»que¡s_fšished
 = 0;

881 ià(
cÚfig
.
num_th»ads
è
	`š™B’chm¬kTh»ads
();

883 
th»ad_id
 = 
cÚfig
.
num_th»ads
 > 0 ? 0 : -1;

884 
c
 = 
	`ü—‹Cl›Á
(
cmd
,
Ën
,
NULL
,
th»ad_id
);

885 
	`ü—‹MissšgCl›Ás
(
c
);

887 
cÚfig
.
¡¬t
 = 
	`m¡ime
();

888 ià(!
cÚfig
.
num_th»ads
è
	`«Maš
(cÚfig.
–
);

889 
	`¡¬tB’chm¬kTh»ads
();

890 
cÚfig
.
tÙÏ‹ncy
 = 
	`m¡ime
()-cÚfig.
¡¬t
;

892 
	`showL©’cyR•Üt
();

893 
	`ä“AÎCl›Ás
();

894 ià(
cÚfig
.
th»ads
è
	`ä“B’chm¬kTh»ads
();

895 
	}
}

899 
b’chm¬kTh»ad
 *
	$ü—‹B’chm¬kTh»ad
(
šdex
) {

900 
b’chm¬kTh»ad
 *
th»ad
 = 
	`zm®loc
((*thread));

901 ià(
th»ad
 =ğ
NULL
)  NULL;

902 
th»ad
->
šdex
 = index;

903 
th»ad
->
–
 = 
	`«C»©eEv’tLoİ
(1024*10);

904 
	`«C»©eTimeEv’t
(
th»ad
->
–
,1,
showThroughput
,
NULL
,NULL);

905  
th»ad
;

906 
	}
}

908 
	$ä“B’chm¬kTh»ad
(
b’chm¬kTh»ad
 *
th»ad
) {

909 ià(
th»ad
->
–
è
	`«D–‘eEv’tLoİ
(thread->el);

910 
	`zä“
(
th»ad
);

911 
	}
}

913 
	$ä“B’chm¬kTh»ads
() {

914 
i
 = 0;

915 ; 
i
 < 
cÚfig
.
num_th»ads
; i++) {

916 
b’chm¬kTh»ad
 *
th»ad
 = 
cÚfig
.
th»ads
[
i
];

917 ià(
th»ad
è
	`ä“B’chm¬kTh»ad
(thread);

919 
	`zä“
(
cÚfig
.
th»ads
);

920 
cÚfig
.
th»ads
 = 
NULL
;

921 
	}
}

923 *
	$execB’chm¬kTh»ad
(*
±r
) {

924 
b’chm¬kTh»ad
 *
th»ad
 = (b’chm¬kTh»ad *è
±r
;

925 
	`«Maš
(
th»ad
->
–
);

926  
NULL
;

927 
	}
}

931 
şu¡”Node
 *
	$ü—‹Clu¡”Node
(*

, 
pÜt
) {

932 
şu¡”Node
 *
node
 = 
	`zm®loc
((*node));

933 ià(!
node
è 
NULL
;

934 
node
->

 = ip;

935 
node
->
pÜt
 =…ort;

936 
node
->
Çme
 = 
NULL
;

937 
node
->
æags
 = 0;

938 
node
->
»¶iÿ‹
 = 
NULL
;

939 
node
->
»¶iÿs_couÁ
 = 0;

940 
node
->
¦Ùs
 = 
	`zm®loc
(
CLUSTER_SLOTS
 * ());

941 
node
->
¦Ùs_couÁ
 = 0;

942 
node
->
cu¼’t_¦Ù_šdex
 = 0;

943 
node
->
upd©ed_¦Ùs
 = 
NULL
;

944 
node
->
upd©ed_¦Ùs_couÁ
 = 0;

945 
node
->
mig¿tšg
 = 
NULL
;

946 
node
->
impÜtšg
 = 
NULL
;

947 
node
->
mig¿tšg_couÁ
 = 0;

948 
node
->
impÜtšg_couÁ
 = 0;

949 
node
->
»dis_cÚfig
 = 
NULL
;

950  
node
;

951 
	}
}

953 
	$ä“Clu¡”Node
(
şu¡”Node
 *
node
) {

954 
i
;

955 ià(
node
->
Çme
è
	`sdsä“
(node->name);

956 ià(
node
->
»¶iÿ‹
è
	`sdsä“
(node->replicate);

957 ià(
node
->
mig¿tšg
 !ğ
NULL
) {

958 
i
 = 0; i < 
node
->
mig¿tšg_couÁ
; i++è
	`sdsä“
Òode->
mig¿tšg
[i]);

959 
	`zä“
(
node
->
mig¿tšg
);

961 ià(
node
->
impÜtšg
 !ğ
NULL
) {

962 
i
 = 0; i < 
node
->
impÜtšg_couÁ
; i++è
	`sdsä“
Òode->
impÜtšg
[i]);

963 
	`zä“
(
node
->
impÜtšg
);

968 ià(
node
->

 && 
	`¡rcmp
Òode->, 
cÚfig
.
ho¡
è!ğ0è
	`sdsä“
(node->ip);

969 ià(
node
->
»dis_cÚfig
 !ğ
NULL
è
	`ä“RedisCÚfig
(node->redis_config);

970 
	`zä“
(
node
->
¦Ùs
);

971 
	`zä“
(
node
);

972 
	}
}

974 
	$ä“Clu¡”Nodes
() {

975 
i
 = 0;

976 ; 
i
 < 
cÚfig
.
şu¡”_node_couÁ
; i++) {

977 
şu¡”Node
 *
n
 = 
cÚfig
.
şu¡”_nodes
[
i
];

978 ià(
n
è
	`ä“Clu¡”Node
(n);

980 
	`zä“
(
cÚfig
.
şu¡”_nodes
);

981 
cÚfig
.
şu¡”_nodes
 = 
NULL
;

982 
	}
}

984 
şu¡”Node
 **
	$addClu¡”Node
(
şu¡”Node
 *
node
) {

985 
couÁ
 = 
cÚfig
.
şu¡”_node_couÁ
 + 1;

986 
cÚfig
.
şu¡”_nodes
 = 
	`z»®loc
(config.cluster_nodes,

987 
couÁ
 * (*
node
));

988 ià(!
cÚfig
.
şu¡”_nodes
è 
NULL
;

989 
cÚfig
.
şu¡”_nodes
[cÚfig.
şu¡”_node_couÁ
++] = 
node
;

990  
cÚfig
.
şu¡”_nodes
;

991 
	}
}

993 
	$ãtchClu¡”CÚfigu¿tiÚ
() {

994 
sucûss
 = 1;

995 
»disCÚ‹xt
 *
ùx
 = 
NULL
;

996 
»disR•ly
 *
»¶y
 = 
NULL
;

997 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
)

998 
ùx
 = 
	`»disCÚÃù
(
cÚfig
.
ho¡
,cÚfig.
ho¡pÜt
);

1000 
ùx
 = 
	`»disCÚÃùUnix
(
cÚfig
.
ho¡sock‘
);

1001 ià(
ùx
->
”r
) {

1002 
	`årštf
(
¡d”r
,"Could‚ot connecto Redis‡t ");

1003 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
) {

1004 
	`årštf
(
¡d”r
,"%s:%d: %s\n",
cÚfig
.
ho¡
,cÚfig.
ho¡pÜt
,

1005 
ùx
->
”r¡r
);

1006 } 
	`årštf
(
¡d”r
,"%s: %s\n",
cÚfig
.
ho¡sock‘
,
ùx
->
”r¡r
);

1007 
	`ex™
(1);

1009 
şu¡”Node
 *
fœ¡Node
 = 
	`ü—‹Clu¡”Node
((*è
cÚfig
.
ho¡
,

1010 
cÚfig
.
ho¡pÜt
);

1011 ià(!
fœ¡Node
è{
sucûss
 = 0; 
ş—nup
;}

1012 
»¶y
 = 
	`»disCommªd
(
ùx
, "CLUSTER NODES");

1013 
sucûss
 = (
»¶y
 !ğ
NULL
);

1014 ià(!
sucûss
è
ş—nup
;

1015 
sucûss
 = (
»¶y
->
ty³
 !ğ
REDIS_REPLY_ERROR
);

1016 ià(!
sucûss
) {

1017 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
) {

1018 
	`årštf
(
¡d”r
, "Cluster‚ode %s:%d„eplied withƒrror:\n%s\n",

1019 
cÚfig
.
ho¡
, cÚfig.
ho¡pÜt
, 
»¶y
->
¡r
);

1021 
	`årštf
(
¡d”r
, "Cluster‚ode %s„eplied withƒrror:\n%s\n",

1022 
cÚfig
.
ho¡sock‘
, 
»¶y
->
¡r
);

1024 
ş—nup
;

1026 *
lšes
 = 
»¶y
->
¡r
, *
p
, *
lše
;

1027 (
p
 = 
	`¡r¡r
(
lšes
, "\n")è!ğ
NULL
) {

1028 *
p
 = '\0';

1029 
lše
 = 
lšes
;

1030 
lšes
 = 
p
 + 1;

1031 *
Çme
 = 
NULL
, *
addr
 = NULL, *
æags
 = NULL, *
ma¡”_id
 = NULL;

1032 
i
 = 0;

1033 (
p
 = 
	`¡rchr
(
lše
, ' ')è!ğ
NULL
) {

1034 *
p
 = '\0';

1035 *
tok’
 = 
lše
;

1036 
lše
 = 
p
 + 1;

1037 
i
++){

1038 0: 
Çme
 = 
tok’
; ;

1039 1: 
addr
 = 
tok’
; ;

1040 2: 
æags
 = 
tok’
; ;

1041 3: 
ma¡”_id
 = 
tok’
; ;

1043 ià(
i
 == 8) ;

1045 ià(!
æags
) {

1046 
	`årštf
(
¡d”r
, "Invalid CLUSTER NODES„eply: missing flags.\n");

1047 
sucûss
 = 0;

1048 
ş—nup
;

1050 
my£lf
 = (
	`¡r¡r
(
æags
, "my£lf"è!ğ
NULL
);

1051 
is_»¶iÿ
 = (
	`¡r¡r
(
æags
, "¦ave"è!ğ
NULL
 ||

1052 (
ma¡”_id
 !ğ
NULL
 && master_id[0] != '-'));

1053 ià(
is_»¶iÿ
) ;

1054 ià(
addr
 =ğ
NULL
) {

1055 
	`årštf
(
¡d”r
, "Invalid CLUSTER NODES„eply: missing‡ddr.\n");

1056 
sucûss
 = 0;

1057 
ş—nup
;

1059 
şu¡”Node
 *
node
 = 
NULL
;

1060 *

 = 
NULL
;

1061 
pÜt
 = 0;

1062 *
·ddr
 = 
	`¡rchr
(
addr
, ':');

1063 ià(
·ddr
 !ğ
NULL
) {

1064 *
·ddr
 = '\0';

1065 

 = 
addr
;

1066 
addr
 = 
·ddr
 + 1;

1068 ià((
·ddr
 = 
	`¡rchr
(
addr
, '@')è!ğ
NULL
) *paddr = '\0';

1069 
pÜt
 = 
	`©oi
(
addr
);

1071 ià(
my£lf
) {

1072 
node
 = 
fœ¡Node
;

1073 ià(
node
->

 =ğ
NULL
 && ip != NULL) {

1074 
node
->

 = ip;

1075 
node
->
pÜt
 =…ort;

1078 
node
 = 
	`ü—‹Clu¡”Node
(
	`sd¢ew
(

), 
pÜt
);

1080 ià(
node
 =ğ
NULL
) {

1081 
sucûss
 = 0;

1082 
ş—nup
;

1084 ià(
Çme
 !ğ
NULL
è
node
->Çmğ
	`sd¢ew
(name);

1085 ià(
i
 == 8) {

1086 
»maššg
 = 
	`¡¾’
(
lše
);

1087 
»maššg
 > 0) {

1088 
p
 = 
	`¡rchr
(
lše
, ' ');

1089 ià(
p
 =ğ
NULL
è°ğ
lše
 + 
»maššg
;

1090 
»maššg
 -ğ(
p
 - 
lše
);

1092 *
¦Ùsdef
 = 
lše
;

1093 *
p
 = '\0';

1094 ià(
»maššg
) {

1095 
lše
 = 
p
 + 1;

1096 
»maššg
--;

1097 } 
lše
 = 
p
;

1098 *
dash
 = 
NULL
;

1099 ià(
¦Ùsdef
[0] == '[') {

1100 
¦Ùsdef
++;

1101 ià((
p
 = 
	`¡r¡r
(
¦Ùsdef
, "->-"))) {

1102 *
p
 = '\0';

1103 
p
 += 3;

1104 *
şosšg_b¿ck‘
 = 
	`¡rchr
(
p
, ']');

1105 ià(
şosšg_b¿ck‘
) *closing_bracket = '\0';

1106 
sds
 
¦Ù
 = 
	`sd¢ew
(
¦Ùsdef
);

1107 
sds
 
d¡
 = 
	`sd¢ew
(
p
);

1108 
node
->
mig¿tšg_couÁ
 += 2;

1109 
node
->
mig¿tšg
 =

1110 
	`z»®loc
(
node
->
mig¿tšg
,

1111 (
node
->
mig¿tšg_couÁ
 * (
sds
)));

1112 
node
->
mig¿tšg
[node->
mig¿tšg_couÁ
 - 2] =

1113 
¦Ù
;

1114 
node
->
mig¿tšg
[node->
mig¿tšg_couÁ
 - 1] =

1115 
d¡
;

1116 } ià((
p
 = 
	`¡r¡r
(
¦Ùsdef
, "-<-"))) {

1117 *
p
 = '\0';

1118 
p
 += 3;

1119 *
şosšg_b¿ck‘
 = 
	`¡rchr
(
p
, ']');

1120 ià(
şosšg_b¿ck‘
) *closing_bracket = '\0';

1121 
sds
 
¦Ù
 = 
	`sd¢ew
(
¦Ùsdef
);

1122 
sds
 
¤c
 = 
	`sd¢ew
(
p
);

1123 
node
->
impÜtšg_couÁ
 += 2;

1124 
node
->
impÜtšg
 = 
	`z»®loc
(node->importing,

1125 (
node
->
impÜtšg_couÁ
 * (
sds
)));

1126 
node
->
impÜtšg
[node->
impÜtšg_couÁ
 - 2] =

1127 
¦Ù
;

1128 
node
->
impÜtšg
[node->
impÜtšg_couÁ
 - 1] =

1129 
¤c
;

1131 } ià((
dash
 = 
	`¡rchr
(
¦Ùsdef
, '-')è!ğ
NULL
) {

1132 
p
 = 
dash
;

1133 
¡¬t
, 
¡İ
;

1134 *
p
 = '\0';

1135 
¡¬t
 = 
	`©oi
(
¦Ùsdef
);

1136 
¡İ
 = 
	`©oi
(
p
 + 1);

1137 
¡¬t
 <ğ
¡İ
) {

1138 
¦Ù
 = 
¡¬t
++;

1139 
node
->
¦Ùs
[node->
¦Ùs_couÁ
++] = 
¦Ù
;

1141 } ià(
p
 > 
¦Ùsdef
) {

1142 
¦Ù
 = 
	`©oi
(
¦Ùsdef
);

1143 
node
->
¦Ùs
[node->
¦Ùs_couÁ
++] = 
¦Ù
;

1147 ià(
node
->
¦Ùs_couÁ
 == 0) {

1148 
	`´štf
("WARNING: master‚ode %s:%d has‚o slots, skipping...\n",

1149 
node
->

,‚ode->
pÜt
);

1152 ià(!
	`addClu¡”Node
(
node
)) {

1153 
sucûss
 = 0;

1154 
ş—nup
;

1157 
ş—nup
:

1158 ià(
ùx
è
	`»disF»e
(ctx);

1159 ià(!
sucûss
) {

1160 ià(
cÚfig
.
şu¡”_nodes
è
	`ä“Clu¡”Nodes
();

1162 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

1163  
sucûss
;

1164 
	}
}

1168 
	$ãtchClu¡”SlÙsCÚfigu¿tiÚ
(
ş›Á
 
c
) {

1169 
	`UNUSED
(
c
);

1170 
sucûss
 = 1, 
is_ãtchšg_¦Ùs
 = 0, 
Ï¡_upd©e
 = 0;

1171 
size_t
 
i
;

1172 
	`©omicG‘
(
cÚfig
.
¦Ùs_Ï¡_upd©e
, 
Ï¡_upd©e
);

1173 ià(
c
->
¦Ùs_Ï¡_upd©e
 < 
Ï¡_upd©e
) {

1174 
c
->
¦Ùs_Ï¡_upd©e
 = 
Ï¡_upd©e
;

1177 
»disR•ly
 *
»¶y
 = 
NULL
;

1178 
	`©omicG‘Inü
(
cÚfig
.
is_ãtchšg_¦Ùs
, is_fetching_slots, 1);

1179 ià(
is_ãtchšg_¦Ùs
)  -1;

1180 
	`©omicS‘
(
cÚfig
.
is_ãtchšg_¦Ùs
, 1);

1181 ià(
cÚfig
.
show”rÜs
)

1182 
	`´štf
("Cluster slots configuration changed, fetching‚ew one...\n");

1183 cÚ¡ *
”rmsg
 = "Failedo update cluster slots configuration";

1184 
diùTy³
 
dty³
 = {

1185 
diùSdsHash
,

1186 
NULL
,

1187 
NULL
,

1188 
diùSdsKeyCom·»
,

1189 
NULL
,

1190 
NULL


1193 
diù
 *
ma¡”s
 = 
	`diùC»©e
(&
dty³
, 
NULL
);

1194 
»disCÚ‹xt
 *
ùx
 = 
NULL
;

1195 
i
 = 0; i < (
size_t
è
cÚfig
.
şu¡”_node_couÁ
; i++) {

1196 
şu¡”Node
 *
node
 = 
cÚfig
.
şu¡”_nodes
[
i
];

1197 
	`as£¹
(
node
->

 !ğ
NULL
);

1198 
	`as£¹
(
node
->
Çme
 !ğ
NULL
);

1199 
	`as£¹
(
node
->
pÜt
);

1201 ià(
ùx
 =ğ
NULL
) {

1202 
ùx
 = 
	`»disCÚÃù
(
node
->

,‚ode->
pÜt
);

1203 ià(!
ùx
 || ctx->
”r
) {

1204 
sucûss
 = 0;

1205 ià(
ùx
 && ctx->
”r
)

1206 
	`årštf
(
¡d”r
, "REDIS CONNECTION ERROR: %s\n", 
ùx
->
”r¡r
);

1207 
ş—nup
;

1210 ià(
node
->
upd©ed_¦Ùs
 !ğ
NULL
)

1211 
	`zä“
(
node
->
upd©ed_¦Ùs
);

1212 
node
->
upd©ed_¦Ùs
 = 
NULL
;

1213 
node
->
upd©ed_¦Ùs_couÁ
 = 0;

1214 
	`diùR•Ïû
(
ma¡”s
, 
node
->
Çme
,‚ode) ;

1216 
»¶y
 = 
	`»disCommªd
(
ùx
, "CLUSTER SLOTS");

1217 ià(
»¶y
 =ğ
NULL
 ||„•ly->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

1218 
sucûss
 = 0;

1219 ià(
»¶y
)

1220 
	`årštf
(
¡d”r
,"%s\nCLUSTER SLOTS ERROR: %s\n",
”rmsg
,
»¶y
->
¡r
);

1221 
ş—nup
;

1223 
	`as£¹
(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

1224 
i
 = 0; i < 
»¶y
->
–em’ts
; i++) {

1225 
»disR•ly
 *
r
 = 
»¶y
->
–em’t
[
i
];

1226 
	`as£¹
(
r
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

1227 
	`as£¹
(
r
->
–em’ts
 >= 3);

1228 
äom
, 
to
, 
¦Ù
;

1229 
äom
 = 
r
->
–em’t
[0]->
š‹g”
;

1230 
to
 = 
r
->
–em’t
[1]->
š‹g”
;

1231 
»disR•ly
 *
Ä
 = 
r
->
–em’t
[2];

1232 
	`as£¹
(
Ä
->
ty³
 =ğ
REDIS_REPLY_ARRAY
 &&‚r->
–em’ts
 >= 3);

1233 
	`as£¹
(
Ä
->
–em’t
[2]->
¡r
 !ğ
NULL
);

1234 
sds
 
Çme
 = 
	`sd¢ew
(
Ä
->
–em’t
[2]->
¡r
);

1235 
diùEÁry
 *
’Œy
 = 
	`diùFšd
(
ma¡”s
, 
Çme
);

1236 ià(
’Œy
 =ğ
NULL
) {

1237 
sucûss
 = 0;

1238 
	`årštf
(
¡d”r
, "%s: could‚ot find‚ode with ID %s in current "

1239 "cÚfigu¿tiÚ.\n", 
”rmsg
, 
Çme
);

1240 ià(
Çme
è
	`sdsä“
(name);

1241 
ş—nup
;

1243 
	`sdsä“
(
Çme
);

1244 
şu¡”Node
 *
node
 = 
	`diùG‘V®
(
’Œy
);

1245 ià(
node
->
upd©ed_¦Ùs
 =ğ
NULL
)

1246 
node
->
upd©ed_¦Ùs
 = 
	`zÿÎoc
(
CLUSTER_SLOTS
 * ());

1247 
¦Ù
 = 
äom
; slÙ <ğ
to
; slot++)

1248 
node
->
upd©ed_¦Ùs
[node->
upd©ed_¦Ùs_couÁ
++] = 
¦Ù
;

1250 
	`upd©eClu¡”SlÙsCÚfigu¿tiÚ
();

1251 
ş—nup
:

1252 
	`ä“R•lyObjeù
(
»¶y
);

1253 
	`»disF»e
(
ùx
);

1254 
	`diùR–—£
(
ma¡”s
);

1255 
	`©omicS‘
(
cÚfig
.
is_ãtchšg_¦Ùs
, 0);

1256  
sucûss
;

1257 
	}
}

1260 
	$upd©eClu¡”SlÙsCÚfigu¿tiÚ
() {

1261 
	`±h»ad_mu‹x_lock
(&
cÚfig
.
is_upd©šg_¦Ùs_mu‹x
);

1262 
	`©omicS‘
(
cÚfig
.
is_upd©šg_¦Ùs
, 1);

1263 
i
;

1264 
i
 = 0; i < 
cÚfig
.
şu¡”_node_couÁ
; i++) {

1265 
şu¡”Node
 *
node
 = 
cÚfig
.
şu¡”_nodes
[
i
];

1266 ià(
node
->
upd©ed_¦Ùs
 !ğ
NULL
) {

1267 *
Şd¦Ùs
 = 
node
->
¦Ùs
;

1268 
node
->
¦Ùs
 =‚ode->
upd©ed_¦Ùs
;

1269 
node
->
¦Ùs_couÁ
 =‚ode->
upd©ed_¦Ùs_couÁ
;

1270 
node
->
cu¼’t_¦Ù_šdex
 = 0;

1271 
node
->
upd©ed_¦Ùs
 = 
NULL
;

1272 
node
->
upd©ed_¦Ùs_couÁ
 = 0;

1273 
	`zä“
(
Şd¦Ùs
);

1276 
	`©omicS‘
(
cÚfig
.
is_upd©šg_¦Ùs
, 0);

1277 
	`©omicInü
(
cÚfig
.
¦Ùs_Ï¡_upd©e
, 1);

1278 
	`±h»ad_mu‹x_uÆock
(&
cÚfig
.
is_upd©šg_¦Ùs_mu‹x
);

1279 
	}
}

1282 
	$·r£O±iÚs
(
¬gc
, cÚ¡ **
¬gv
) {

1283 
i
;

1284 
Ï¡¬g
;

1285 
ex™_¡©us
 = 1;

1287 
i
 = 1; i < 
¬gc
; i++) {

1288 
Ï¡¬g
 = (
i
 =ğ(
¬gc
-1));

1290 ià(!
	`¡rcmp
(
¬gv
[
i
],"-c")) {

1291 ià(
Ï¡¬g
è
šv®id
;

1292 
cÚfig
.
numş›Ás
 = 
	`©oi
(
¬gv
[++
i
]);

1293 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-n")) {

1294 ià(
Ï¡¬g
è
šv®id
;

1295 
cÚfig
.
»que¡s
 = 
	`©oi
(
¬gv
[++
i
]);

1296 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-k")) {

1297 ià(
Ï¡¬g
è
šv®id
;

1298 
cÚfig
.
k“·live
 = 
	`©oi
(
¬gv
[++
i
]);

1299 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-h")) {

1300 ià(
Ï¡¬g
è
šv®id
;

1301 
cÚfig
.
ho¡
 = 
	`¡rdup
(
¬gv
[++
i
]);

1302 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-p")) {

1303 ià(
Ï¡¬g
è
šv®id
;

1304 
cÚfig
.
ho¡pÜt
 = 
	`©oi
(
¬gv
[++
i
]);

1305 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-s")) {

1306 ià(
Ï¡¬g
è
šv®id
;

1307 
cÚfig
.
ho¡sock‘
 = 
	`¡rdup
(
¬gv
[++
i
]);

1308 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-a") ) {

1309 ià(
Ï¡¬g
è
šv®id
;

1310 
cÚfig
.
auth
 = 
	`¡rdup
(
¬gv
[++
i
]);

1311 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--user")) {

1312 ià(
Ï¡¬g
è
šv®id
;

1313 
cÚfig
.
u£r
 = 
¬gv
[++
i
];

1314 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-d")) {

1315 ià(
Ï¡¬g
è
šv®id
;

1316 
cÚfig
.
d©asize
 = 
	`©oi
(
¬gv
[++
i
]);

1317 ià(
cÚfig
.
d©asize
 < 1) config.datasize=1;

1318 ià(
cÚfig
.
d©asize
 > 1024*1024*1024) config.datasize = 1024*1024*1024;

1319 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-P")) {

1320 ià(
Ï¡¬g
è
šv®id
;

1321 
cÚfig
.
p–še
 = 
	`©oi
(
¬gv
[++
i
]);

1322 ià(
cÚfig
.
p–še
 <= 0) config.pipeline=1;

1323 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-r")) {

1324 ià(
Ï¡¬g
è
šv®id
;

1325 cÚ¡ *
Ãxt
 = 
¬gv
[++
i
], *
p
 =‚ext;

1326 ià(*
p
 == '-') {

1327 
p
++;

1328 ià(*
p
 < '0' || *°> '9'è
šv®id
;

1330 
cÚfig
.
¿ndomkeys
 = 1;

1331 
cÚfig
.
¿ndomkeys_key¥aûËn
 = 
	`©oi
(
Ãxt
);

1332 ià(
cÚfig
.
¿ndomkeys_key¥aûËn
 < 0)

1333 
cÚfig
.
¿ndomkeys_key¥aûËn
 = 0;

1334 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-q")) {

1335 
cÚfig
.
qu›t
 = 1;

1336 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--csv")) {

1337 
cÚfig
.
csv
 = 1;

1338 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-l")) {

1339 
cÚfig
.
loİ
 = 1;

1340 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-I")) {

1341 
cÚfig
.
idËmode
 = 1;

1342 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-e")) {

1343 
cÚfig
.
show”rÜs
 = 1;

1344 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-t")) {

1345 ià(
Ï¡¬g
è
šv®id
;

1351 
cÚfig
.
‹¡s
 = 
	`sd¢ew
(",");

1352 
cÚfig
.
‹¡s
 = 
	`sdsÿt
(cÚfig.‹¡s,(*)
¬gv
[++
i
]);

1353 
cÚfig
.
‹¡s
 = 
	`sdsÿt
(config.tests,",");

1354 
	`sd¡Şow”
(
cÚfig
.
‹¡s
);

1355 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--dbnum")) {

1356 ià(
Ï¡¬g
è
šv®id
;

1357 
cÚfig
.
dbnum
 = 
	`©oi
(
¬gv
[++
i
]);

1358 
cÚfig
.
dbnum¡r
 = 
	`sdsäomlÚglÚg
(cÚfig.
dbnum
);

1359 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--precision")) {

1360 ià(
Ï¡¬g
è
šv®id
;

1361 
cÚfig
.
´ecisiÚ
 = 
	`©oi
(
¬gv
[++
i
]);

1362 ià(
cÚfig
.
´ecisiÚ
 < 0) config.precision = 0;

1363 ià(
cÚfig
.
´ecisiÚ
 > 
MAX_LATENCY_PRECISION
) config.precision = MAX_LATENCY_PRECISION;

1364 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--threads")) {

1365 ià(
Ï¡¬g
è
šv®id
;

1366 
cÚfig
.
num_th»ads
 = 
	`©oi
(
¬gv
[++
i
]);

1367 ià(
cÚfig
.
num_th»ads
 > 
MAX_THREADS
) {

1368 
	`´štf
("WARNING:oo manyhreads,†imitinghreadso %d.\n",

1369 
MAX_THREADS
);

1370 
cÚfig
.
num_th»ads
 = 
MAX_THREADS
;

1371 } ià(
cÚfig
.
num_th»ads
 < 0) config.num_threads = 0;

1372 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster")) {

1373 
cÚfig
.
şu¡”_mode
 = 1;

1374 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--enable-tracking")) {

1375 
cÚfig
.
’abË_Œackšg
 = 1;

1376 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--help")) {

1377 
ex™_¡©us
 = 0;

1378 
u§ge
;

1383 ià(
¬gv
[
i
][0] =ğ'-'è
šv®id
;

1384  
i
;

1388  
i
;

1390 
šv®id
:

1391 
	`´štf
("Inv®id o±iÚ \"%s\" o¸İtiÚ‡rgum’ˆmissšg\n\n",
¬gv
[
i
]);

1393 
u§ge
:

1394 
	`´štf
(

1441 
	`ex™
(
ex™_¡©us
);

1442 
	}
}

1444 
	$showThroughput
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
, *
ş›ÁD©a
) {

1445 
	`UNUSED
(
ev’tLoİ
);

1446 
	`UNUSED
(
id
);

1447 
	`UNUSED
(
ş›ÁD©a
);

1448 
liveş›Ás
 = 0;

1449 
»que¡s_fšished
 = 0;

1450 
	`©omicG‘
(
cÚfig
.
liveş›Ás
,†iveclients);

1451 
	`©omicG‘
(
cÚfig
.
»que¡s_fšished
,„equests_finished);

1453 ià(
liveş›Ás
 =ğ0 && 
»que¡s_fšished
 !ğ
cÚfig
.
»que¡s
) {

1454 
	`årštf
(
¡d”r
,"All clients disconnected...‡borting.\n");

1455 
	`ex™
(1);

1457 ià(
cÚfig
.
num_th»ads
 && 
»que¡s_fšished
 >ğcÚfig.
»que¡s
) {

1458 
	`«Stİ
(
ev’tLoİ
);

1459  
AE_NOMORE
;

1461 ià(
cÚfig
.
csv
)  250;

1462 ià(
cÚfig
.
idËmode
 == 1) {

1463 
	`´štf
("ş›Ás: %d\r", 
cÚfig
.
liveş›Ás
);

1464 
	`fæush
(
¡dout
);

1467 
dt
 = ()(
	`m¡ime
()-
cÚfig
.
¡¬t
)/1000.0;

1468 
½s
 = ()
»que¡s_fšished
/
dt
;

1469 
	`´štf
("%s: %.2f\r", 
cÚfig
.
t™Ë
, 
½s
);

1470 
	`fæush
(
¡dout
);

1472 
	}
}

1476 
	$‹¡_is_£Ëùed
(*
Çme
) {

1477 
buf
[256];

1478 
l
 = 
	`¡¾’
(
Çme
);

1480 ià(
cÚfig
.
‹¡s
 =ğ
NULL
)  1;

1481 
buf
[0] = ',';

1482 
	`memıy
(
buf
+1,
Çme
,
l
);

1483 
buf
[
l
+1] = ',';

1484 
buf
[
l
+2] = '\0';

1485  
	`¡r¡r
(
cÚfig
.
‹¡s
,
buf
è!ğ
NULL
;

1486 
	}
}

1488 
	$maš
(
¬gc
, cÚ¡ **
¬gv
) {

1489 
i
;

1490 *
d©a
, *
cmd
;

1491 
Ën
;

1493 
ş›Á
 
c
;

1495 
	`¤ªdom
(
	`time
(
NULL
));

1496 
	`sigÇl
(
SIGHUP
, 
SIG_IGN
);

1497 
	`sigÇl
(
SIGPIPE
, 
SIG_IGN
);

1499 
cÚfig
.
numş›Ás
 = 50;

1500 
cÚfig
.
»que¡s
 = 100000;

1501 
cÚfig
.
liveş›Ás
 = 0;

1502 
cÚfig
.
–
 = 
	`«C»©eEv’tLoİ
(1024*10);

1503 
	`«C»©eTimeEv’t
(
cÚfig
.
–
,1,
showThroughput
,
NULL
,NULL);

1504 
cÚfig
.
k“·live
 = 1;

1505 
cÚfig
.
d©asize
 = 3;

1506 
cÚfig
.
p–še
 = 1;

1507 
cÚfig
.
show”rÜs
 = 0;

1508 
cÚfig
.
¿ndomkeys
 = 0;

1509 
cÚfig
.
¿ndomkeys_key¥aûËn
 = 0;

1510 
cÚfig
.
qu›t
 = 0;

1511 
cÚfig
.
csv
 = 0;

1512 
cÚfig
.
loİ
 = 0;

1513 
cÚfig
.
idËmode
 = 0;

1514 
cÚfig
.
Ï‹ncy
 = 
NULL
;

1515 
cÚfig
.
ş›Ás
 = 
	`li¡C»©e
();

1516 
cÚfig
.
ho¡
 = "127.0.0.1";

1517 
cÚfig
.
ho¡pÜt
 = 6379;

1518 
cÚfig
.
ho¡sock‘
 = 
NULL
;

1519 
cÚfig
.
‹¡s
 = 
NULL
;

1520 
cÚfig
.
dbnum
 = 0;

1521 
cÚfig
.
auth
 = 
NULL
;

1522 
cÚfig
.
´ecisiÚ
 = 1;

1523 
cÚfig
.
num_th»ads
 = 0;

1524 
cÚfig
.
th»ads
 = 
NULL
;

1525 
cÚfig
.
şu¡”_mode
 = 0;

1526 
cÚfig
.
şu¡”_node_couÁ
 = 0;

1527 
cÚfig
.
şu¡”_nodes
 = 
NULL
;

1528 
cÚfig
.
»dis_cÚfig
 = 
NULL
;

1529 
cÚfig
.
is_ãtchšg_¦Ùs
 = 0;

1530 
cÚfig
.
is_upd©šg_¦Ùs
 = 0;

1531 
cÚfig
.
¦Ùs_Ï¡_upd©e
 = 0;

1532 
cÚfig
.
’abË_Œackšg
 = 0;

1534 
i
 = 
	`·r£O±iÚs
(
¬gc
,
¬gv
);

1535 
¬gc
 -ğ
i
;

1536 
¬gv
 +ğ
i
;

1538 
cÚfig
.
Ï‹ncy
 = 
	`zm®loc
(()*cÚfig.
»que¡s
);

1540 ià(
cÚfig
.
şu¡”_mode
) {

1542 ià(!
	`ãtchClu¡”CÚfigu¿tiÚ
(è|| !
cÚfig
.
şu¡”_nodes
) {

1543 ià(!
cÚfig
.
ho¡sock‘
) {

1544 
	`årštf
(
¡d”r
, "Failedo fetch cluster configuration from "

1545 "%s:%d\n", 
cÚfig
.
ho¡
, cÚfig.
ho¡pÜt
);

1547 
	`årštf
(
¡d”r
, "Failedo fetch cluster configuration from "

1548 "%s\n", 
cÚfig
.
ho¡sock‘
);

1550 
	`ex™
(1);

1552 ià(
cÚfig
.
şu¡”_node_couÁ
 <= 1) {

1553 
	`årštf
(
¡d”r
, "Invalid cluster: %d‚ode(s).\n",

1554 
cÚfig
.
şu¡”_node_couÁ
);

1555 
	`ex™
(1);

1557 
	`´štf
("Clu¡” ha %d ma¡”‚odes:\n\n", 
cÚfig
.
şu¡”_node_couÁ
);

1558 
i
 = 0;

1559 ; 
i
 < 
cÚfig
.
şu¡”_node_couÁ
; i++) {

1560 
şu¡”Node
 *
node
 = 
cÚfig
.
şu¡”_nodes
[
i
];

1561 ià(!
node
) {

1562 
	`årštf
(
¡d”r
, "Inv®id clu¡”‚od#%d\n", 
i
);

1563 
	`ex™
(1);

1565 
	`´štf
("Ma¡” %d: ", 
i
);

1566 ià(
node
->
Çme
è
	`´štf
("%s ",‚ode->name);

1567 
	`´štf
("%s:%d\n", 
node
->

,‚ode->
pÜt
);

1568 
node
->
»dis_cÚfig
 = 
	`g‘RedisCÚfig
Òode->

,‚ode->
pÜt
, 
NULL
);

1569 ià(
node
->
»dis_cÚfig
 =ğ
NULL
) {

1570 
	`årštf
(
¡d”r
, "WARN: could‚ot fetch‚ode CONFIG %s:%d\n",

1571 
node
->

,‚ode->
pÜt
);

1574 
	`´štf
("\n");

1577 ià(
cÚfig
.
num_th»ads
 == 0)

1578 
cÚfig
.
num_th»ads
 = cÚfig.
şu¡”_node_couÁ
;

1580 
cÚfig
.
»dis_cÚfig
 =

1581 
	`g‘RedisCÚfig
(
cÚfig
.
ho¡
, cÚfig.
ho¡pÜt
, cÚfig.
ho¡sock‘
);

1582 ià(
cÚfig
.
»dis_cÚfig
 =ğ
NULL
)

1583 
	`årštf
(
¡d”r
, "WARN: could‚ot fetch server CONFIG\n");

1586 ià(
cÚfig
.
num_th»ads
 > 0) {

1587 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
»que¡s_issued_mu‹x
), 
NULL
);

1588 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
»que¡s_fšished_mu‹x
), 
NULL
);

1589 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
liveş›Ás_mu‹x
), 
NULL
);

1590 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
is_ãtchšg_¦Ùs_mu‹x
), 
NULL
);

1591 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
is_upd©šg_¦Ùs_mu‹x
), 
NULL
);

1592 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
upd©šg_¦Ùs_mu‹x
), 
NULL
);

1593 
	`±h»ad_mu‹x_š™
(&(
cÚfig
.
¦Ùs_Ï¡_upd©e_mu‹x
), 
NULL
);

1596 ià(
cÚfig
.
k“·live
 == 0) {

1597 
	`´štf
("WARNING: keepalive disabled, you…robably‚eed 'echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse' for Linux‡nd 'sudo sysctl -w‚et.inet.tcp.msl=1000' for Mac OS X in ordero use‡†ot of clients/requests\n");

1600 ià(
cÚfig
.
idËmode
) {

1601 
	`´štf
("C»©šg %d idË cÚÃùiÚ ªd wa™šg fÜev” (CŒl+C wh’ dÚe)\n", 
cÚfig
.
numş›Ás
);

1602 
th»ad_id
 = -1, 
u£_th»ads
 = (
cÚfig
.
num_th»ads
 > 0);

1603 ià(
u£_th»ads
) {

1604 
th»ad_id
 = 0;

1605 
	`š™B’chm¬kTh»ads
();

1607 
c
 = 
	`ü—‹Cl›Á
("",0,
NULL
,
th»ad_id
);

1608 
	`ü—‹MissšgCl›Ás
(
c
);

1609 ià(
u£_th»ads
è
	`¡¬tB’chm¬kTh»ads
();

1610 
	`«Maš
(
cÚfig
.
–
);

1615 ià(
¬gc
) {

1616 
sds
 
t™Ë
 = 
	`sd¢ew
(
¬gv
[0]);

1617 
i
 = 1; i < 
¬gc
; i++) {

1618 
t™Ë
 = 
	`sdsÿ’
(title, " ", 1);

1619 
t™Ë
 = 
	`sdsÿ’
Ñ™Ë, (*)
¬gv
[
i
], 
	`¡¾’
(argv[i]));

1623 
Ën
 = 
	`»disFÜm©CommªdArgv
(&
cmd
,
¬gc
,
¬gv
,
NULL
);

1624 
	`b’chm¬k
(
t™Ë
,
cmd
,
Ën
);

1625 
	`ä“
(
cmd
);

1626 } 
cÚfig
.
loİ
);

1628 ià(
cÚfig
.
»dis_cÚfig
 !ğ
NULL
è
	`ä“RedisCÚfig
(config.redis_config);

1633 
d©a
 = 
	`zm®loc
(
cÚfig
.
d©asize
+1);

1635 
	`mem£t
(
d©a
,'x',
cÚfig
.
d©asize
);

1636 
d©a
[
cÚfig
.
d©asize
] = '\0';

1638 ià(
	`‹¡_is_£Ëùed
("ping_inline") ||est_is_selected("ping"))

1639 
	`b’chm¬k
("PING_INLINE","PING\r\n",6);

1641 ià(
	`‹¡_is_£Ëùed
("ping_mbulk") ||est_is_selected("ping")) {

1642 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"PING");

1643 
	`b’chm¬k
("PING_BULK",
cmd
,
Ën
);

1644 
	`ä“
(
cmd
);

1647 ià(
	`‹¡_is_£Ëùed
("set")) {

1648 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"SET key:{g}:__¿nd_št__ %s",
d©a
);

1649 
	`b’chm¬k
("SET",
cmd
,
Ën
);

1650 
	`ä“
(
cmd
);

1653 ià(
	`‹¡_is_£Ëùed
("get")) {

1654 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"GET key:{tag}:__rand_int__");

1655 
	`b’chm¬k
("GET",
cmd
,
Ën
);

1656 
	`ä“
(
cmd
);

1659 ià(
	`‹¡_is_£Ëùed
("incr")) {

1660 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"INCR counter:{tag}:__rand_int__");

1661 
	`b’chm¬k
("INCR",
cmd
,
Ën
);

1662 
	`ä“
(
cmd
);

1665 ià(
	`‹¡_is_£Ëùed
("lpush")) {

1666 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LPUSH myli¡:{g} %s",
d©a
);

1667 
	`b’chm¬k
("LPUSH",
cmd
,
Ën
);

1668 
	`ä“
(
cmd
);

1671 ià(
	`‹¡_is_£Ëùed
("rpush")) {

1672 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"RPUSH myli¡:{g} %s",
d©a
);

1673 
	`b’chm¬k
("RPUSH",
cmd
,
Ën
);

1674 
	`ä“
(
cmd
);

1677 ià(
	`‹¡_is_£Ëùed
("lpop")) {

1678 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LPOP mylist:{tag}");

1679 
	`b’chm¬k
("LPOP",
cmd
,
Ën
);

1680 
	`ä“
(
cmd
);

1683 ià(
	`‹¡_is_£Ëùed
("rpop")) {

1684 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"RPOP mylist:{tag}");

1685 
	`b’chm¬k
("RPOP",
cmd
,
Ën
);

1686 
	`ä“
(
cmd
);

1689 ià(
	`‹¡_is_£Ëùed
("sadd")) {

1690 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,

1692 
	`b’chm¬k
("SADD",
cmd
,
Ën
);

1693 
	`ä“
(
cmd
);

1696 ià(
	`‹¡_is_£Ëùed
("hset")) {

1697 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,

1698 "HSET myhash:{g}:__¿nd_št__ƒËm’t:__¿nd_št__ %s",
d©a
);

1699 
	`b’chm¬k
("HSET",
cmd
,
Ën
);

1700 
	`ä“
(
cmd
);

1703 ià(
	`‹¡_is_£Ëùed
("spop")) {

1704 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"SPOP myset:{tag}");

1705 
	`b’chm¬k
("SPOP",
cmd
,
Ën
);

1706 
	`ä“
(
cmd
);

1709 ià(
	`‹¡_is_£Ëùed
("lrange") ||

1710 
	`‹¡_is_£Ëùed
("lrange_100") ||

1711 
	`‹¡_is_£Ëùed
("lrange_300") ||

1712 
	`‹¡_is_£Ëùed
("lrange_500") ||

1713 
	`‹¡_is_£Ëùed
("lrange_600"))

1715 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LPUSH myli¡:{g} %s",
d©a
);

1716 
	`b’chm¬k
("LPUSH (ÃededØb’chm¬k LRANGE)",
cmd
,
Ën
);

1717 
	`ä“
(
cmd
);

1720 ià(
	`‹¡_is_£Ëùed
("lrange") ||est_is_selected("lrange_100")) {

1721 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LRANGE mylist:{tag} 0 99");

1722 
	`b’chm¬k
("LRANGE_100 (fœ¡ 100ƒËm’ts)",
cmd
,
Ën
);

1723 
	`ä“
(
cmd
);

1726 ià(
	`‹¡_is_£Ëùed
("lrange") ||est_is_selected("lrange_300")) {

1727 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LRANGE mylist:{tag} 0 299");

1728 
	`b’chm¬k
("LRANGE_300 (fœ¡ 300ƒËm’ts)",
cmd
,
Ën
);

1729 
	`ä“
(
cmd
);

1732 ià(
	`‹¡_is_£Ëùed
("lrange") ||est_is_selected("lrange_500")) {

1733 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LRANGE mylist:{tag} 0 449");

1734 
	`b’chm¬k
("LRANGE_500 (fœ¡ 450ƒËm’ts)",
cmd
,
Ën
);

1735 
	`ä“
(
cmd
);

1738 ià(
	`‹¡_is_£Ëùed
("lrange") ||est_is_selected("lrange_600")) {

1739 
Ën
 = 
	`»disFÜm©Commªd
(&
cmd
,"LRANGE mylist:{tag} 0 599");

1740 
	`b’chm¬k
("LRANGE_600 (fœ¡ 600ƒËm’ts)",
cmd
,
Ën
);

1741 
	`ä“
(
cmd
);

1744 ià(
	`‹¡_is_£Ëùed
("mset")) {

1745 cÚ¡ *
¬gv
[21];

1746 
¬gv
[0] = "MSET";

1747 
i
 = 1; i < 21; i += 2) {

1748 
¬gv
[
i
] = "key:{tag}:__rand_int__";

1749 
¬gv
[
i
+1] = 
d©a
;

1751 
Ën
 = 
	`»disFÜm©CommªdArgv
(&
cmd
,21,
¬gv
,
NULL
);

1752 
	`b’chm¬k
("MSET (10 keys)",
cmd
,
Ën
);

1753 
	`ä“
(
cmd
);

1756 ià(!
cÚfig
.
csv
è
	`´štf
("\n");

1757 } 
cÚfig
.
loİ
);

1759 ià(
cÚfig
.
»dis_cÚfig
 !ğ
NULL
è
	`ä“RedisCÚfig
(config.redis_config);

1762 
	}
}

	@redis-check-aof.c

31 
	~"£rv”.h
"

32 
	~<sys/¡©.h
>

34 
	#ERROR
(...) { \

35 
__buf
[1024]; \

36 
	`¢´štf
(
__buf
, (__buf), 
__VA_ARGS__
); \

37 
	`¢´štf
(
”rÜ
, Ó¼Ü), "0x%16Îx: %s", ()
•os
, 
__buf
); \

38 }

	)

40 
	g”rÜ
[1044];

41 
off_t
 
	g•os
;

43 
	$cÚsumeNewlše
(*
buf
) {

44 ià(
	`¡ºcmp
(
buf
,"\r\n",2) != 0) {

45 
	`ERROR
("Ex³ùed \\r\\n, gÙ: %02x%02x",
buf
[0],buf[1]);

49 
	}
}

51 
	$»adLÚg
(
FILE
 *
å
, 
´efix
, *
rg‘
) {

52 
buf
[128], *
•Œ
;

53 
•os
 = 
	`á–lo
(
å
);

54 ià(
	`fg‘s
(
buf
,(buf),
å
è=ğ
NULL
) {

57 ià(
buf
[0] !ğ
´efix
) {

58 
	`ERROR
("Ex³ùed…»fix '%c', gÙ: '%c'",
´efix
,
buf
[0]);

61 *
rg‘
 = 
	`¡¹Ş
(
buf
+1,&
•Œ
,10);

62  
	`cÚsumeNewlše
(
•Œ
);

63 
	}
}

65 
	$»adBy‹s
(
FILE
 *
å
, *
rg‘
, 
Ëngth
) {

66 
»®
;

67 
•os
 = 
	`á–lo
(
å
);

68 
»®
 = 
	`ä—d
(
rg‘
,1,
Ëngth
,
å
);

69 ià(
»®
 !ğ
Ëngth
) {

70 
	`ERROR
("Ex³ùedØ»ad %ld by‹s, gÙ %ld by‹s",
Ëngth
,
»®
);

74 
	}
}

76 
	$»adSŒšg
(
FILE
 *
å
, ** 
rg‘
) {

77 
Ën
;

78 *
rg‘
 = 
NULL
;

79 ià(!
	`»adLÚg
(
å
,'$',&
Ën
)) {

84 
Ën
 += 2;

85 *
rg‘
 = (*)
	`zm®loc
(
Ën
);

86 ià(!
	`»adBy‹s
(
å
,*
rg‘
,
Ën
)) {

89 ià(!
	`cÚsumeNewlše
(*
rg‘
+
Ën
-2)) {

92 (*
rg‘
)[
Ën
-2] = '\0';

94 
	}
}

96 
	$»adArgc
(
FILE
 *
å
, *
rg‘
) {

97  
	`»adLÚg
(
å
,'*',
rg‘
);

98 
	}
}

100 
off_t
 
	$´oûss
(
FILE
 *
å
) {

101 
¬gc
;

102 
off_t
 
pos
 = 0;

103 
i
, 
muÉi
 = 0;

104 *
¡r
;

107 ià(!
muÉi
è
pos
 = 
	`á–lo
(
å
);

108 ià(!
	`»adArgc
(
å
, &
¬gc
)) ;

110 
i
 = 0; i < 
¬gc
; i++) {

111 ià(!
	`»adSŒšg
(
å
,&
¡r
)) ;

112 ià(
i
 == 0) {

113 ià(
	`¡rÿ£cmp
(
¡r
, "multi") == 0) {

114 ià(
muÉi
++) {

115 
	`ERROR
("Unexpected MULTI");

118 } ià(
	`¡rÿ£cmp
(
¡r
, "exec") == 0) {

119 ià(--
muÉi
) {

120 
	`ERROR
("Unexpected EXEC");

125 
	`zä“
(
¡r
);

129 ià(
i
 < 
¬gc
) {

130 ià(
¡r
è
	`zä“
(str);

135 ià(
	`ãof
(
å
è&& 
muÉi
 && 
	`¡¾’
(
”rÜ
) == 0) {

136 
	`ERROR
("Reached EOF before„eading EXEC for MULTI");

138 ià(
	`¡¾’
(
”rÜ
) > 0) {

139 
	`´štf
("%s\n", 
”rÜ
);

141  
pos
;

142 
	}
}

144 
	$»dis_check_aof_maš
(
¬gc
, **
¬gv
) {

145 *
f’ame
;

146 
fix
 = 0;

148 ià(
¬gc
 < 2) {

149 
	`´štf
("U§ge: % [--fix] <fe.aof>\n", 
¬gv
[0]);

150 
	`ex™
(1);

151 } ià(
¬gc
 == 2) {

152 
f’ame
 = 
¬gv
[1];

153 } ià(
¬gc
 == 3) {

154 ià(
	`¡rcmp
(
¬gv
[1],"--fix") != 0) {

155 
	`´štf
("Inv®id‡rgum’t: %s\n", 
¬gv
[1]);

156 
	`ex™
(1);

158 
f’ame
 = 
¬gv
[2];

159 
fix
 = 1;

161 
	`´štf
("Invalid‡rguments\n");

162 
	`ex™
(1);

165 
FILE
 *
å
 = 
	`fİ’
(
f’ame
,"r+");

166 ià(
å
 =ğ
NULL
) {

167 
	`´štf
("CªnÙ o³Àfe: %s\n", 
f’ame
);

168 
	`ex™
(1);

171 
»dis_¡©
 
sb
;

172 ià(
	`»dis_f¡©
(
	`f’o
(
å
),&
sb
) == -1) {

173 
	`´štf
("CªnÙ sˆfe: %s\n", 
f’ame
);

174 
	`ex™
(1);

177 
off_t
 
size
 = 
sb
.
¡_size
;

178 ià(
size
 == 0) {

179 
	`´štf
("Em±y fe: %s\n", 
f’ame
);

180 
	`ex™
(1);

185 ià(
size
 >= 8) {

186 
sig
[5];

187 
has_´—mbË
 = 
	`ä—d
(
sig
,(sig),1,
å
) == 1 &&

188 
	`memcmp
(
sig
,"REDIS",(sig)) == 0;

189 
	`»wšd
(
å
);

190 ià(
has_´—mbË
) {

191 
	`´štf
("The AOF‡ppearso start with‡n RDB…reamble.\n"

193 ià(
	`»dis_check_rdb_maš
(
¬gc
,
¬gv
,
å
è=ğ
C_ERR
) {

194 
	`´štf
("RDB…reamble of AOF file is‚ot sane,‡borting.\n");

195 
	`ex™
(1);

197 
	`´štf
("RDB…reamble is OK,…roceeding with AOFail...\n");

202 
off_t
 
pos
 = 
	`´oûss
(
å
);

203 
off_t
 
diff
 = 
size
-
pos
;

204 
	`´štf
("AOF‡nalyzed: size=%lld, ok_up_to=%lld, diff=%lld\n",

205 (è
size
, (è
pos
, (è
diff
);

206 ià(
diff
 > 0) {

207 ià(
fix
) {

208 
buf
[2];

209 
	`´štf
("Thi wÈshrškhAOF from %Îd by‹s, w™h %Îd by‹s,Ø%Îd by‹s\n",()
size
,()
diff
,()
pos
);

210 
	`´štf
("Continue? [y/N]: ");

211 ià(
	`fg‘s
(
buf
,(buf),
¡dš
è=ğ
NULL
 ||

212 
	`¡ºÿ£cmp
(
buf
,"y",1) != 0) {

213 
	`´štf
("Aborting...\n");

214 
	`ex™
(1);

216 ià(
	`árunÿ‹
(
	`f’o
(
å
), 
pos
) == -1) {

217 
	`´štf
("Failedoruncate AOF\n");

218 
	`ex™
(1);

220 
	`´štf
("Successfullyruncated AOF\n");

223 
	`´štf
("AOF is‚ot valid. "

225 
	`ex™
(1);

228 
	`´štf
("AOF is valid\n");

231 
	`fşo£
(
å
);

232 
	`ex™
(0);

233 
	}
}

	@redis-check-rdb.c

30 
	~"£rv”.h
"

31 
	~"rdb.h
"

33 
	~<¡d¬g.h
>

35 
ü—‹Sh¬edObjeùs
();

36 
rdbLßdProg»ssC®lback
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
);

37 
	grdbCheckMode
 = 0;

40 
rio
 *
	mrio
;

41 
robj
 *
	mkey
;

42 
	mkey_ty³
;

43 
	mkeys
;

44 
	mexpœes
;

45 
	m®»ady_expœed
;

46 
	mdošg
;

47 
	m”rÜ_£t
;

48 
	m”rÜ
[1024];

49 } 
	grdb¡©e
;

53 
	#RDB_CHECK_DOING_START
 0

	)

54 
	#RDB_CHECK_DOING_READ_TYPE
 1

	)

55 
	#RDB_CHECK_DOING_READ_EXPIRE
 2

	)

56 
	#RDB_CHECK_DOING_READ_KEY
 3

	)

57 
	#RDB_CHECK_DOING_READ_OBJECT_VALUE
 4

	)

58 
	#RDB_CHECK_DOING_CHECK_SUM
 5

	)

59 
	#RDB_CHECK_DOING_READ_LEN
 6

	)

60 
	#RDB_CHECK_DOING_READ_AUX
 7

	)

62 *
	grdb_check_došg_¡ršg
[] = {

73 *
	grdb_ty³_¡ršg
[] = {

92 
	$rdbShowG’”icInfo
() {

93 
	`´štf
("[šfo] %lu key »ad\n", 
rdb¡©e
.
keys
);

94 
	`´štf
("[šfo] %luƒxpœes\n", 
rdb¡©e
.
expœes
);

95 
	`´štf
("[šfo] %lu‡Ì—dyƒxpœed\n", 
rdb¡©e
.
®»ady_expœed
);

96 
	}
}

100 
	$rdbCheckE¼Ü
(cÚ¡ *
fmt
, ...) {

101 
msg
[1024];

102 
va_li¡
 
­
;

104 
	`va_¡¬t
(
­
, 
fmt
);

105 
	`v¢´štf
(
msg
, (msg), 
fmt
, 
­
);

106 
	`va_’d
(
­
);

108 
	`´štf
("--- RDB ERROR DETECTED ---\n");

109 
	`´štf
("[offset %llu] %s\n",

110 (è(
rdb¡©e
.
rio
 ?

111 
rdb¡©e
.
rio
->
´oûs£d_by‹s
 : 0), 
msg
);

112 
	`´štf
("[additional info] While doing: %s\n",

113 
rdb_check_došg_¡ršg
[
rdb¡©e
.
došg
]);

114 ià(
rdb¡©e
.
key
)

115 
	`´štf
("[additional info] Reading key '%s'\n",

116 (*)
rdb¡©e
.
key
->
±r
);

117 ià(
rdb¡©e
.
key_ty³
 != -1)

118 
	`´štf
("[additional info] Readingype %d (%s)\n",

119 
rdb¡©e
.
key_ty³
,

120 (()
rdb¡©e
.
key_ty³
 <

121 (
rdb_ty³_¡ršg
)/(*)) ?

122 
rdb_ty³_¡ršg
[
rdb¡©e
.
key_ty³
] : "unknown");

123 
	`rdbShowG’”icInfo
();

124 
	}
}

127 
	$rdbCheckInfo
(cÚ¡ *
fmt
, ...) {

128 
msg
[1024];

129 
va_li¡
 
­
;

131 
	`va_¡¬t
(
­
, 
fmt
);

132 
	`v¢´štf
(
msg
, (msg), 
fmt
, 
­
);

133 
	`va_’d
(
­
);

135 
	`´štf
("[offset %llu] %s\n",

136 (è(
rdb¡©e
.
rio
 ?

137 
rdb¡©e
.
rio
->
´oûs£d_by‹s
 : 0), 
msg
);

138 
	}
}

142 
	$rdbCheckS‘E¼Ü
(cÚ¡ *
fmt
, ...) {

143 
va_li¡
 
­
;

145 
	`va_¡¬t
(
­
, 
fmt
);

146 
	`v¢´štf
(
rdb¡©e
.
”rÜ
, Ôdb¡©e.”rÜ), 
fmt
, 
­
);

147 
	`va_’d
(
­
);

148 
rdb¡©e
.
”rÜ_£t
 = 1;

149 
	}
}

154 
	$rdbCheckHªdËC¿sh
(
sig
, 
sigšfo_t
 *
šfo
, *
£ü‘
) {

155 
	`UNUSED
(
sig
);

156 
	`UNUSED
(
šfo
);

157 
	`UNUSED
(
£ü‘
);

159 
	`rdbCheckE¼Ü
("Server crash checkinghe specified RDB file!");

160 
	`ex™
(1);

161 
	}
}

163 
	$rdbCheckS‘upSigÇls
() {

164 
sigaùiÚ
 
aù
;

166 
	`sigem±y£t
(&
aù
.
§_mask
);

167 
aù
.
§_æags
 = 
SA_NODEFER
 | 
SA_RESETHAND
 | 
SA_SIGINFO
;

168 
aù
.
§_sigaùiÚ
 = 
rdbCheckHªdËC¿sh
;

169 
	`sigaùiÚ
(
SIGSEGV
, &
aù
, 
NULL
);

170 
	`sigaùiÚ
(
SIGBUS
, &
aù
, 
NULL
);

171 
	`sigaùiÚ
(
SIGFPE
, &
aù
, 
NULL
);

172 
	`sigaùiÚ
(
SIGILL
, &
aù
, 
NULL
);

173 
	}
}

179 
	$»dis_check_rdb
(*
rdbf’ame
, 
FILE
 *
å
) {

180 
ušt64_t
 
dbid
;

181 
ty³
, 
rdbv”
;

182 
buf
[1024];

183 
expœ‘ime
, 
now
 = 
	`m¡ime
();

184 
rio
 
rdb
;

186 
şo£fe
 = (
å
 =ğ
NULL
);

187 ià(
å
 =ğ
NULL
 && (å = 
	`fİ’
(
rdbf’ame
,"r")) == NULL)  1;

189 
	`rioIn™W™hFe
(&
rdb
,
å
);

190 
rdb¡©e
.
rio
 = &
rdb
;

191 
rdb
.
upd©e_cksum
 = 
rdbLßdProg»ssC®lback
;

192 ià(
	`rioR—d
(&
rdb
,
buf
,9è=ğ0è
eoã¼
;

193 
buf
[9] = '\0';

194 ià(
	`memcmp
(
buf
,"REDIS",5) != 0) {

195 
	`rdbCheckE¼Ü
("Wrong signatureryingo†oad DB from file");

196 
”r
;

198 
rdbv”
 = 
	`©oi
(
buf
+5);

199 ià(
rdbv”
 < 1 ||„dbv” > 
RDB_VERSION
) {

200 
	`rdbCheckE¼Ü
("Cª'ˆhªdË RDB fÜm© v”siÚ %d",
rdbv”
);

201 
”r
;

204 
expœ‘ime
 = -1;

205 
	`¡¬tLßdšgFe
(
å
, 
rdbf’ame
, 
RDBFLAGS_NONE
);

207 
robj
 *
key
, *
v®
;

210 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_TYPE
;

211 ià((
ty³
 = 
	`rdbLßdTy³
(&
rdb
)è=ğ-1è
eoã¼
;

214 ià(
ty³
 =ğ
RDB_OPCODE_EXPIRETIME
) {

215 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_EXPIRE
;

219 
expœ‘ime
 = 
	`rdbLßdTime
(&
rdb
);

220 
expœ‘ime
 *= 1000;

221 ià(
	`rioG‘R—dE¼Ü
(&
rdb
)è
eoã¼
;

223 } ià(
ty³
 =ğ
RDB_OPCODE_EXPIRETIME_MS
) {

226 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_EXPIRE
;

227 
expœ‘ime
 = 
	`rdbLßdMli£cÚdTime
(&
rdb
, 
rdbv”
);

228 ià(
	`rioG‘R—dE¼Ü
(&
rdb
)è
eoã¼
;

230 } ià(
ty³
 =ğ
RDB_OPCODE_FREQ
) {

232 
ušt8_t
 
by‹
;

233 ià(
	`rioR—d
(&
rdb
,&
by‹
,1è=ğ0è
eoã¼
;

235 } ià(
ty³
 =ğ
RDB_OPCODE_IDLE
) {

237 ià(
	`rdbLßdL’
(&
rdb
,
NULL
è=ğ
RDB_LENERR
è
eoã¼
;

239 } ià(
ty³
 =ğ
RDB_OPCODE_EOF
) {

242 } ià(
ty³
 =ğ
RDB_OPCODE_SELECTDB
) {

244 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_LEN
;

245 ià((
dbid
 = 
	`rdbLßdL’
(&
rdb
,
NULL
)è=ğ
RDB_LENERR
)

246 
eoã¼
;

247 
	`rdbCheckInfo
("S–eùšg DB ID %d", 
dbid
);

249 } ià(
ty³
 =ğ
RDB_OPCODE_RESIZEDB
) {

252 
ušt64_t
 
db_size
, 
expœes_size
;

253 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_LEN
;

254 ià((
db_size
 = 
	`rdbLßdL’
(&
rdb
,
NULL
)è=ğ
RDB_LENERR
)

255 
eoã¼
;

256 ià((
expœes_size
 = 
	`rdbLßdL’
(&
rdb
,
NULL
)è=ğ
RDB_LENERR
)

257 
eoã¼
;

259 } ià(
ty³
 =ğ
RDB_OPCODE_AUX
) {

265 
robj
 *
auxkey
, *
auxv®
;

266 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_AUX
;

267 ià((
auxkey
 = 
	`rdbLßdSŒšgObjeù
(&
rdb
)è=ğ
NULL
è
eoã¼
;

268 ià((
auxv®
 = 
	`rdbLßdSŒšgObjeù
(&
rdb
)è=ğ
NULL
è
eoã¼
;

270 
	`rdbCheckInfo
("AUX FIELD %s = '%s'",

271 (*)
auxkey
->
±r
, (*)
auxv®
->ptr);

272 
	`deüRefCouÁ
(
auxkey
);

273 
	`deüRefCouÁ
(
auxv®
);

276 ià(!
	`rdbIsObjeùTy³
(
ty³
)) {

277 
	`rdbCheckE¼Ü
("Inv®id objeùy³: %d", 
ty³
);

278 
”r
;

280 
rdb¡©e
.
key_ty³
 = 
ty³
;

284 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_KEY
;

285 ià((
key
 = 
	`rdbLßdSŒšgObjeù
(&
rdb
)è=ğ
NULL
è
eoã¼
;

286 
rdb¡©e
.
key
 = key;

287 
rdb¡©e
.
keys
++;

289 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_READ_OBJECT_VALUE
;

290 ià((
v®
 = 
	`rdbLßdObjeù
(
ty³
,&
rdb
,
key
->
±r
)è=ğ
NULL
è
eoã¼
;

292 ià(
expœ‘ime
 !ğ-1 &&ƒxpœ‘im< 
now
)

293 
rdb¡©e
.
®»ady_expœed
++;

294 ià(
expœ‘ime
 !ğ-1è
rdb¡©e
.
expœes
++;

295 
rdb¡©e
.
key
 = 
NULL
;

296 
	`deüRefCouÁ
(
key
);

297 
	`deüRefCouÁ
(
v®
);

298 
rdb¡©e
.
key_ty³
 = -1;

299 
expœ‘ime
 = -1;

302 ià(
rdbv”
 >ğ5 && 
£rv”
.
rdb_checksum
) {

303 
ušt64_t
 
cksum
, 
ex³ùed
 = 
rdb
.cksum;

305 
rdb¡©e
.
došg
 = 
RDB_CHECK_DOING_CHECK_SUM
;

306 ià(
	`rioR—d
(&
rdb
,&
cksum
,8è=ğ0è
eoã¼
;

307 
	`mem»v64ifbe
(&
cksum
);

308 ià(
cksum
 == 0) {

309 
	`rdbCheckInfo
("RDB file was saved with checksum disabled:‚o check…erformed.");

310 } ià(
cksum
 !ğ
ex³ùed
) {

311 
	`rdbCheckE¼Ü
("RDB CRCƒrror");

312 
”r
;

314 
	`rdbCheckInfo
("Checksum OK");

318 ià(
şo£fe
è
	`fşo£
(
å
);

319 
	`¡İLßdšg
(1);

322 
eoã¼
:

323 ià(
rdb¡©e
.
”rÜ_£t
) {

324 
	`rdbCheckE¼Ü
(
rdb¡©e
.
”rÜ
);

326 
	`rdbCheckE¼Ü
("Unexpected EOF„eading RDB file");

328 
”r
:

329 ià(
şo£fe
è
	`fşo£
(
å
);

330 
	`¡İLßdšg
(0);

332 
	}
}

346 
	$»dis_check_rdb_maš
(
¬gc
, **
¬gv
, 
FILE
 *
å
) {

347 ià(
¬gc
 !ğ2 && 
å
 =ğ
NULL
) {

348 
	`årštf
(
¡d”r
, "U§ge: % <rdb-fe-Çme>\n", 
¬gv
[0]);

349 
	`ex™
(1);

354 ià(
sh¬ed
.
š‹g”s
[0] =ğ
NULL
)

355 
	`ü—‹Sh¬edObjeùs
();

356 
£rv”
.
lßdšg_´oûss_ev’ts_š‹rv®_by‹s
 = 0;

357 
rdbCheckMode
 = 1;

358 
	`rdbCheckInfo
("Checkšg RDB f%s", 
¬gv
[1]);

359 
	`rdbCheckS‘upSigÇls
();

360 
»tv®
 = 
	`»dis_check_rdb
(
¬gv
[1],
å
);

361 ià(
»tv®
 == 0) {

362 
	`rdbCheckInfo
("\\o/ RDB†ooks OK! \\o/");

363 
	`rdbShowG’”icInfo
();

365 ià(
å
è (
»tv®
 =ğ0è? 
C_OK
 : 
C_ERR
;

366 
	`ex™
(
»tv®
);

367 
	}
}

	@redis-cli.c

31 
	~"fmaüos.h
"

32 
	~"v”siÚ.h
"

34 
	~<¡dio.h
>

35 
	~<¡ršg.h
>

36 
	~<¡dlib.h
>

37 
	~<sigÇl.h
>

38 
	~<uni¡d.h
>

39 
	~<time.h
>

40 
	~<ùy³.h
>

41 
	~<”ºo.h
>

42 
	~<sys/¡©.h
>

43 
	~<sys/time.h
>

44 
	~<as£¹.h
>

45 
	~<fú.h
>

46 
	~<lim™s.h
>

47 
	~<m©h.h
>

49 
	~<hœedis.h
>

50 #ifdeà
USE_OPENSSL


51 
	~<İ’s¦/s¦.h
>

52 
	~<İ’s¦/”r.h
>

53 
	~<hœedis_s¦.h
>

55 
	~<sds.h
>

56 
	~"diù.h
"

57 
	~"adli¡.h
"

58 
	~"zm®loc.h
"

59 
	~"lš’oi£.h
"

60 
	~"h–p.h
"

61 
	~"ª‘.h
"

62 
	~"«.h
"

64 
	#UNUSED
(
V
è((èV)

	)

66 
	#OUTPUT_STANDARD
 0

	)

67 
	#OUTPUT_RAW
 1

	)

68 
	#OUTPUT_CSV
 2

	)

69 
	#REDIS_CLI_KEEPALIVE_INTERVAL
 15

	)

70 
	#REDIS_CLI_DEFAULT_PIPE_TIMEOUT
 30

	)

71 
	#REDIS_CLI_HISTFILE_ENV
 "REDISCLI_HISTFILE"

	)

72 
	#REDIS_CLI_HISTFILE_DEFAULT
 ".»disşi_hi¡Üy"

	)

73 
	#REDIS_CLI_RCFILE_ENV
 "REDISCLI_RCFILE"

	)

74 
	#REDIS_CLI_RCFILE_DEFAULT
 ".»disşœc"

	)

75 
	#REDIS_CLI_AUTH_ENV
 "REDISCLI_AUTH"

	)

77 
	#CLUSTER_MANAGER_SLOTS
 16384

	)

78 
	#CLUSTER_MANAGER_MIGRATE_TIMEOUT
 60000

	)

79 
	#CLUSTER_MANAGER_MIGRATE_PIPELINE
 10

	)

80 
	#CLUSTER_MANAGER_REBALANCE_THRESHOLD
 2

	)

82 
	#CLUSTER_MANAGER_INVALID_HOST_ARG
 \

85 "ªd…Üˆ(›. 120.0.0.1 7000)\n"

	)

86 
	#CLUSTER_MANAGER_MODE
(è(
cÚfig
.
şu¡”_mªag”_commªd
.
Çme
 !ğ
NULL
)

	)

87 
	#CLUSTER_MANAGER_MASTERS_COUNT
(
nodes
, 
»¶iÿs
èÒodes/Ô•liÿ + 1))

	)

88 
	#CLUSTER_MANAGER_COMMAND
(
n
,...) \

89 (
	`»disCommªd
(
n
->
cÚ‹xt
, 
__VA_ARGS__
))

	)

91 
	#CLUSTER_MANAGER_NODE_ARRAY_FREE
(
¬¿y
è
	`zä“
×¼ay->
®loc
)

	)

93 
	#CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n
, 
”r
) \

94 
	`şu¡”Mªag”LogE¼
("Node %s:%d„eplied withƒrror:\n%s\n", \

95 
n
->

,‚->
pÜt
, 
”r
);

	)

97 
	#şu¡”Mªag”LogInfo
(...) \

98 
	`şu¡”Mªag”Log
(
CLUSTER_MANAGER_LOG_LVL_INFO
,
__VA_ARGS__
)

	)

100 
	#şu¡”Mªag”LogE¼
(...) \

101 
	`şu¡”Mªag”Log
(
CLUSTER_MANAGER_LOG_LVL_ERR
,
__VA_ARGS__
)

	)

103 
	#şu¡”Mªag”LogW¬n
(...) \

104 
	`şu¡”Mªag”Log
(
CLUSTER_MANAGER_LOG_LVL_WARN
,
__VA_ARGS__
)

	)

106 
	#şu¡”Mªag”LogOk
(...) \

107 
	`şu¡”Mªag”Log
(
CLUSTER_MANAGER_LOG_LVL_SUCCESS
,
__VA_ARGS__
)

	)

109 
	#CLUSTER_MANAGER_FLAG_MYSELF
 1 << 0

	)

110 
	#CLUSTER_MANAGER_FLAG_SLAVE
 1 << 1

	)

111 
	#CLUSTER_MANAGER_FLAG_FRIEND
 1 << 2

	)

112 
	#CLUSTER_MANAGER_FLAG_NOADDR
 1 << 3

	)

113 
	#CLUSTER_MANAGER_FLAG_DISCONNECT
 1 << 4

	)

114 
	#CLUSTER_MANAGER_FLAG_FAIL
 1 << 5

	)

116 
	#CLUSTER_MANAGER_CMD_FLAG_FIX
 1 << 0

	)

117 
	#CLUSTER_MANAGER_CMD_FLAG_SLAVE
 1 << 1

	)

118 
	#CLUSTER_MANAGER_CMD_FLAG_YES
 1 << 2

	)

119 
	#CLUSTER_MANAGER_CMD_FLAG_AUTOWEIGHTS
 1 << 3

	)

120 
	#CLUSTER_MANAGER_CMD_FLAG_EMPTYMASTER
 1 << 4

	)

121 
	#CLUSTER_MANAGER_CMD_FLAG_SIMULATE
 1 << 5

	)

122 
	#CLUSTER_MANAGER_CMD_FLAG_REPLACE
 1 << 6

	)

123 
	#CLUSTER_MANAGER_CMD_FLAG_COPY
 1 << 7

	)

124 
	#CLUSTER_MANAGER_CMD_FLAG_COLOR
 1 << 8

	)

125 
	#CLUSTER_MANAGER_CMD_FLAG_CHECK_OWNERS
 1 << 9

	)

126 
	#CLUSTER_MANAGER_CMD_FLAG_FIX_WITH_UNREACHABLE_MASTERS
 1 << 10

	)

128 
	#CLUSTER_MANAGER_OPT_GETFRIENDS
 1 << 0

	)

129 
	#CLUSTER_MANAGER_OPT_COLD
 1 << 1

	)

130 
	#CLUSTER_MANAGER_OPT_UPDATE
 1 << 2

	)

131 
	#CLUSTER_MANAGER_OPT_QUIET
 1 << 6

	)

132 
	#CLUSTER_MANAGER_OPT_VERBOSE
 1 << 7

	)

134 
	#CLUSTER_MANAGER_LOG_LVL_INFO
 1

	)

135 
	#CLUSTER_MANAGER_LOG_LVL_WARN
 2

	)

136 
	#CLUSTER_MANAGER_LOG_LVL_ERR
 3

	)

137 
	#CLUSTER_MANAGER_LOG_LVL_SUCCESS
 4

	)

139 
	#CLUSTER_JOIN_CHECK_AFTER
 20

	)

141 
	#LOG_COLOR_BOLD
 "29;1m"

	)

142 
	#LOG_COLOR_RED
 "31;1m"

	)

143 
	#LOG_COLOR_GREEN
 "32;1m"

	)

144 
	#LOG_COLOR_YELLOW
 "33;1m"

	)

145 
	#LOG_COLOR_RESET
 "0m"

	)

148 
	#CC_FORCE
 (1<<0è

	)

149 
	#CC_QUIET
 (1<<1è

	)

152 
	g¥eùrum_·Ë‰e_cŞÜ_size
 = 19;

153 
	g¥eùrum_·Ë‰e_cŞÜ
[] = {0,233,234,235,237,239,241,243,245,247,144,143,142,184,226,214,208,202,196};

155 
	g¥eùrum_·Ë‰e_mÚo_size
 = 13;

156 
	g¥eùrum_·Ë‰e_mÚo
[] = {0,233,234,235,237,239,241,243,245,247,249,251,253};

159 *
	g¥eùrum_·Ë‰e
;

160 
	g¥eùrum_·Ë‰e_size
;

164 
ušt64_t
 
diùSdsHash
(cÚ¡ *
key
);

165 
diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

166 cÚ¡ *
key2
);

167 
diùSdsDe¡ruùÜ
(*
´ivd©a
, *
v®
);

168 
diùLi¡De¡ruùÜ
(*
´ivd©a
, *
v®
);

171 
	sşu¡”Mªag”Commªd
 {

172 *
	mÇme
;

173 
	m¬gc
;

174 **
	m¬gv
;

175 
	mæags
;

176 
	m»¶iÿs
;

177 *
	mäom
;

178 *
	mto
;

179 **
	mweight
;

180 
	mweight_¬gc
;

181 *
	mma¡”_id
;

182 
	m¦Ùs
;

183 
	mtimeout
;

184 
	mp–še
;

185 
	mth»shŞd
;

186 *
	mbackup_dœ
;

187 } 
	tşu¡”Mªag”Commªd
;

189 
ü—‹Clu¡”Mªag”Commªd
(*
cmdÇme
, 
¬gc
, **
¬gv
);

192 
»disCÚ‹xt
 *
	gcÚ‹xt
;

193 
	scÚfig
 {

194 *
	mho¡
;

195 
	mho¡pÜt
;

196 *
	mho¡sock‘
;

197 
	ms
;

198 *
	m¢i
;

199 *
	mÿû¹
;

200 *
	mÿû¹dœ
;

201 *
	mû¹
;

202 *
	mkey
;

203 
	m»³©
;

204 
	mš‹rv®
;

205 
	mdbnum
;

206 
	mš‹¿ùive
;

207 
	mshutdown
;

208 
	mmÚ™Ü_mode
;

209 
	mpubsub_mode
;

210 
	mÏ‹ncy_mode
;

211 
	mÏ‹ncy_di¡_mode
;

212 
	mÏ‹ncy_hi¡Üy
;

213 
	mÌu_‹¡_mode
;

214 
	mÌu_‹¡_§m¶e_size
;

215 
	mşu¡”_mode
;

216 
	mşu¡”_»issue_commªd
;

217 
	m¦ave_mode
;

218 
	mpe_mode
;

219 
	mpe_timeout
;

220 
	mg‘rdb_mode
;

221 
	m¡©_mode
;

222 
	msÿn_mode
;

223 
	mšŒšsic_Ï‹ncy_mode
;

224 
	mšŒšsic_Ï‹ncy_du¿tiÚ
;

225 *
	m·‰”n
;

226 *
	mrdb_f’ame
;

227 
	mbigkeys
;

228 
	mmemkeys
;

229 
	mmemkeys_§m¶es
;

230 
	mhÙkeys
;

231 
	m¡dš¬g
;

232 *
	mauth
;

233 
	mask·ss
;

234 *
	mu£r
;

235 
	mouut
;

236 
sds
 
	mmb_d–im
;

237 
	m´om±
[128];

238 *
	mev®
;

239 
	mev®_ldb
;

240 
	mev®_ldb_sync
;

241 
	mev®_ldb_’d
;

242 
	m’abË_ldb_Ú_ev®
;

243 
	mÏ¡_cmd_ty³
;

244 
	mv”bo£
;

245 
şu¡”Mªag”Commªd
 
	mşu¡”_mªag”_commªd
;

246 
	mno_auth_w¬nšg
;

247 
	m»¥3
;

248 } 
	gcÚfig
;

251 
	s´ef
 {

252 
	mhšts
;

253 } 
	g´ef
;

255 vŞ©
sig_©omic_t
 
	gfÜû_ÿnûl_loİ
 = 0;

256 
u§ge
();

257 
¦aveMode
();

258 *
»disG™SHA1
();

259 *
»disG™Dœty
();

260 
şiCÚÃù
(
fÜû
);

262 *
g‘InfoF›ld
(*
šfo
, *
f›ld
);

263 
g‘LÚgInfoF›ld
(*
šfo
, *
f›ld
);

269 
ušt16_t
 
üc16
(cÚ¡ *
buf
, 
Ën
);

271 
	$u¡ime
() {

272 
timev®
 
tv
;

273 
u¡
;

275 
	`g‘timeofday
(&
tv
, 
NULL
);

276 
u¡
 = (()
tv
.
tv_£c
)*1000000;

277 
u¡
 +ğ
tv
.
tv_u£c
;

278  
u¡
;

279 
	}
}

281 
	$m¡ime
() {

282  
	`u¡ime
()/1000;

283 
	}
}

285 
	$şiReäeshProm±
() {

286 ià(
cÚfig
.
ev®_ldb
) ;

288 
sds
 
´om±
 = 
	`sd£m±y
();

289 ià(
cÚfig
.
ho¡sock‘
 !ğ
NULL
) {

290 
´om±
 = 
	`sdsÿtfmt
Õrom±,"»di %s",
cÚfig
.
ho¡sock‘
);

292 
addr
[256];

293 
	`ª‘FÜm©Addr
(
addr
, ×ddr), 
cÚfig
.
ho¡
, cÚfig.
ho¡pÜt
);

294 
´om±
 = 
	`sdsÿ’
Õrom±,
addr
,
	`¡¾’
(addr));

298 ià(
cÚfig
.
dbnum
 != 0)

299 
´om±
 = 
	`sdsÿtfmt
Õrom±,"[%i]",
cÚfig
.
dbnum
);

302 
´om±
 = 
	`sdsÿ’
(prompt,"> ",2);

303 
	`¢´štf
(
cÚfig
.
´om±
,(config.prompt),"%s",prompt);

304 
	`sdsä“
(
´om±
);

305 
	}
}

315 
sds
 
	$g‘DÙfeP©h
(*
’vov”ride
, *
dÙf’ame
) {

316 *
·th
 = 
NULL
;

317 
sds
 
dÙP©h
 = 
NULL
;

320 
·th
 = 
	`g‘’v
(
’vov”ride
);

321 ià(
·th
 !ğ
NULL
 && *path != '\0') {

322 ià(!
	`¡rcmp
("/dev/nuÎ", 
·th
)) {

323  
NULL
;

327 
dÙP©h
 = 
	`sd¢ew
(
·th
);

329 *
home
 = 
	`g‘’v
("HOME");

330 ià(
home
 !ğ
NULL
 && *home != '\0') {

332 
dÙP©h
 = 
	`sdsÿrštf
(
	`sd£m±y
(), "%s/%s", 
home
, 
dÙf’ame
);

335  
dÙP©h
;

336 
	}
}

339 
	#isHexCh¬
(
c
è(
	`isdig™
(cè|| (ø>ğ'a' && c <ğ'f'))

	)

340 
	#decodeHexCh¬
(
c
è(
	`isdig™
(cè? c - '0' : c - 'a' + 10)

	)

341 
	#decodeHex
(
h
, 
l
è((
	`decodeHexCh¬
(hè<< 4è+ decodeHexCh¬Ö))

	)

343 
sds
 
	$³rûÁDecode
(cÚ¡ *
³
, 
size_t
 
Ën
) {

344 cÚ¡ *
’d
 = 
³
 + 
Ën
;

345 
sds
 
»t
 = 
	`sd£m±y
();

346 cÚ¡ *
cu¼
 = 
³
;

348 
cu¼
 < 
’d
) {

349 ià(*
cu¼
 == '%') {

350 ià((
’d
 - 
cu¼
) < 2) {

351 
	`årštf
(
¡d”r
, "Incomplete URIƒncoding\n");

352 
	`ex™
(1);

355 
h
 = 
	`tŞow”
(*(++
cu¼
));

356 
l
 = 
	`tŞow”
(*(++
cu¼
));

357 ià(!
	`isHexCh¬
(
h
è|| !isHexCh¬(
l
)) {

358 
	`årštf
(
¡d”r
, "Illegal character in URIƒncoding\n");

359 
	`ex™
(1);

361 
c
 = 
	`decodeHex
(
h
, 
l
);

362 
»t
 = 
	`sdsÿ’
Ô‘, &
c
, 1);

363 
cu¼
++;

365 
»t
 = 
	`sdsÿ’
Ô‘, 
cu¼
++, 1);

369  
»t
;

370 
	}
}

380 
	$·r£RedisUri
(cÚ¡ *
uri
) {

382 cÚ¡ *
scheme
 = "redis://";

383 cÚ¡ *
cu¼
 = 
uri
;

384 cÚ¡ *
’d
 = 
uri
 + 
	`¡¾’
(uri);

385 cÚ¡ *
u£ršfo
, *
u£ºame
, *
pÜt
, *
ho¡
, *
·th
;

388 ià(
	`¡ºÿ£cmp
(
scheme
, 
cu¼
, 
	`¡¾’
(scheme))) {

389 
	`årštf
(
¡d”r
,"Invalid URI scheme\n");

390 
	`ex™
(1);

392 
cu¼
 +ğ
	`¡¾’
(
scheme
);

393 ià(
cu¼
 =ğ
’d
) ;

396 ià((
u£ršfo
 = 
	`¡rchr
(
cu¼
,'@'))) {

397 ià((
u£ºame
 = 
	`¡rchr
(
cu¼
, ':')è&& u£ºam< 
u£ršfo
) {

399 
cu¼
 = 
u£ºame
 + 1;

402 
cÚfig
.
auth
 = 
	`³rûÁDecode
(
cu¼
, 
u£ršfo
 - curr);

403 
cu¼
 = 
u£ršfo
 + 1;

405 ià(
cu¼
 =ğ
’d
) ;

408 
·th
 = 
	`¡rchr
(
cu¼
, '/');

409 ià(*
cu¼
 != '/') {

410 
ho¡
 = 
·th
 ?…©h - 1 : 
’d
;

411 ià((
pÜt
 = 
	`¡rchr
(
cu¼
, ':'))) {

412 
cÚfig
.
ho¡pÜt
 = 
	`©oi
(
pÜt
 + 1);

413 
ho¡
 = 
pÜt
 - 1;

415 
cÚfig
.
ho¡
 = 
	`sd¢ewËn
(
cu¼
, 
ho¡
 - curr + 1);

417 
cu¼
 = 
·th
 ?…©h + 1 : 
’d
;

418 ià(
cu¼
 =ğ
’d
) ;

421 
cÚfig
.
dbnum
 = 
	`©oi
(
cu¼
);

422 
	}
}

424 
ušt64_t
 
	$diùSdsHash
(cÚ¡ *
key
) {

425  
	`diùG’HashFunùiÚ
((*)
key
, 
	`sd¦’
((*)key));

426 
	}
}

428 
	$diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

429 cÚ¡ *
key2
)

431 
l1
,
l2
;

432 
	`DICT_NOTUSED
(
´ivd©a
);

434 
l1
 = 
	`sd¦’
((
sds
)
key1
);

435 
l2
 = 
	`sd¦’
((
sds
)
key2
);

436 ià(
l1
 !ğ
l2
)  0;

437  
	`memcmp
(
key1
, 
key2
, 
l1
) == 0;

438 
	}
}

440 
	$diùSdsDe¡ruùÜ
(*
´ivd©a
, *
v®
)

442 
	`DICT_NOTUSED
(
´ivd©a
);

443 
	`sdsä“
(
v®
);

444 
	}
}

446 
	$diùLi¡De¡ruùÜ
(*
´ivd©a
, *
v®
)

448 
	`DICT_NOTUSED
(
´ivd©a
);

449 
	`li¡R–—£
((
li¡
*)
v®
);

450 
	}
}

453 
	$_£rv”As£¹
(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
) {

454 
	`årštf
(
¡d”r
, "=== ASSERTION FAILED ===");

455 
	`årštf
(
¡d”r
, "==> %s:%d '%s' i nÙrue",
fe
,
lše
,
e¡r
);

457 
	}
}

463 
	#CLI_HELP_COMMAND
 1

	)

464 
	#CLI_HELP_GROUP
 2

	)

467 
	mty³
;

468 
	m¬gc
;

469 
sds
 *
	m¬gv
;

470 
sds
 
	mfuÎ
;

473 
commªdH–p
 *
	mÜg
;

474 } 
	th–pEÁry
;

476 
h–pEÁry
 *
	gh–pEÁr›s
;

477 
	gh–pEÁr›sL’
;

479 
sds
 
	$şiV”siÚ
() {

480 
sds
 
v”siÚ
;

481 
v”siÚ
 = 
	`sdsÿrštf
(
	`sd£m±y
(), "%s", 
REDIS_VERSION
);

484 ià(
	`¡¹Şl
(
	`»disG™SHA1
(),
NULL
,16)) {

485 
v”siÚ
 = 
	`sdsÿrštf
(v”siÚ, " (g™:%s", 
	`»disG™SHA1
());

486 ià(
	`¡¹Şl
(
	`»disG™Dœty
(),
NULL
,10))

487 
v”siÚ
 = 
	`sdsÿrštf
(version, "-dirty");

488 
v”siÚ
 = 
	`sdsÿt
(version, ")");

490  
v”siÚ
;

491 
	}
}

493 
	$şiIn™H–p
() {

494 
commªd¦’
 = (
commªdH–p
)/(commandHelp);

495 
group¦’
 = (
commªdGroups
)/(*);

496 
i
, 
Ën
, 
pos
 = 0;

497 
h–pEÁry
 
tmp
;

499 
h–pEÁr›sL’
 = 
Ën
 = 
commªd¦’
+
group¦’
;

500 
h–pEÁr›s
 = 
	`zm®loc
((
h–pEÁry
)*
Ën
);

502 
i
 = 0; i < 
group¦’
; i++) {

503 
tmp
.
¬gc
 = 1;

504 
tmp
.
¬gv
 = 
	`zm®loc
((
sds
));

505 
tmp
.
¬gv
[0] = 
	`sdsÿrštf
(
	`sd£m±y
(),"@%s",
commªdGroups
[
i
]);

506 
tmp
.
fuÎ
 =mp.
¬gv
[0];

507 
tmp
.
ty³
 = 
CLI_HELP_GROUP
;

508 
tmp
.
Üg
 = 
NULL
;

509 
h–pEÁr›s
[
pos
++] = 
tmp
;

512 
i
 = 0; i < 
commªd¦’
; i++) {

513 
tmp
.
¬gv
 = 
	`sds¥l™¬gs
(
commªdH–p
[
i
].
Çme
,&tmp.
¬gc
);

514 
tmp
.
fuÎ
 = 
	`sd¢ew
(
commªdH–p
[
i
].
Çme
);

515 
tmp
.
ty³
 = 
CLI_HELP_COMMAND
;

516 
tmp
.
Üg
 = &
commªdH–p
[
i
];

517 
h–pEÁr›s
[
pos
++] = 
tmp
;

519 
	}
}

526 
	$şiIÁeg¿‹H–p
() {

527 ià(
	`şiCÚÃù
(
CC_QUIET
è=ğ
REDIS_ERR
) ;

529 
»disR•ly
 *
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
, "COMMAND");

530 if(
»¶y
 =ğ
NULL
 ||„•ly->
ty³
 !ğ
REDIS_REPLY_ARRAY
) ;

534 
size_t
 
j
 = 0; j < 
»¶y
->
–em’ts
; j++) {

535 
»disR•ly
 *
’Œy
 = 
»¶y
->
–em’t
[
j
];

536 ià(
’Œy
->
ty³
 !ğ
REDIS_REPLY_ARRAY
 ||ƒÁry->
–em’ts
 < 4 ||

537 
’Œy
->
–em’t
[0]->
ty³
 !ğ
REDIS_REPLY_STRING
 ||

538 
’Œy
->
–em’t
[1]->
ty³
 !ğ
REDIS_REPLY_INTEGER
 ||

539 
’Œy
->
–em’t
[3]->
ty³
 !ğ
REDIS_REPLY_INTEGER
) ;

540 *
cmdÇme
 = 
’Œy
->
–em’t
[0]->
¡r
;

541 
i
;

543 
i
 = 0; i < 
h–pEÁr›sL’
; i++) {

544 
h–pEÁry
 *
he
 = 
h–pEÁr›s
+
i
;

545 ià(!
	`¡rÿ£cmp
(
he
->
¬gv
[0],
cmdÇme
))

548 ià(
i
 !ğ
h–pEÁr›sL’
) ;

550 
h–pEÁr›sL’
++;

551 
h–pEÁr›s
 = 
	`z»®loc
(h–pEÁr›s,(
h–pEÁry
)*
h–pEÁr›sL’
);

552 
h–pEÁry
 *
Ãw
 = 
h–pEÁr›s
+(
h–pEÁr›sL’
-1);

554 
Ãw
->
¬gc
 = 1;

555 
Ãw
->
¬gv
 = 
	`zm®loc
((
sds
));

556 
Ãw
->
¬gv
[0] = 
	`sd¢ew
(
cmdÇme
);

557 
Ãw
->
fuÎ
 =‚ew->
¬gv
[0];

558 
Ãw
->
ty³
 = 
CLI_HELP_COMMAND
;

559 
	`sd¡ouµ”
(
Ãw
->
¬gv
[0]);

561 
commªdH–p
 *
ch
 = 
	`zm®loc
((*ch));

562 
ch
->
Çme
 = 
Ãw
->
¬gv
[0];

563 
ch
->
·¿ms
 = 
	`sd£m±y
();

564 
¬gs
 = 
	`Îabs
(
’Œy
->
–em’t
[1]->
š‹g”
);

565 
¬gs
--;

566 ià(
’Œy
->
–em’t
[3]->
š‹g”
 == 1) {

567 
ch
->
·¿ms
 = 
	`sdsÿt
(ch->params,"key ");

568 
¬gs
--;

570 
¬gs
-- > 0è
ch
->
·¿ms
 = 
	`sdsÿt
(ch->params,"arg ");

571 ià(
’Œy
->
–em’t
[1]->
š‹g”
 < 0)

572 
ch
->
·¿ms
 = 
	`sdsÿt
(ch->params,"...options...");

573 
ch
->
summ¬y
 = "Help‚ot‡vailable";

574 
ch
->
group
 = 0;

575 
ch
->
sšû
 = "not known";

576 
Ãw
->
Üg
 = 
ch
;

578 
	`ä“R•lyObjeù
(
»¶y
);

579 
	}
}

582 
	$şiOuutCommªdH–p
(
commªdH–p
 *
h–p
, 
group
) {

583 
	`´štf
("\r\À \x1b[1m%s\x1b[0m \x1b[90m%s\x1b[0m\r\n", 
h–p
->
Çme
, h–p->
·¿ms
);

584 
	`´štf
(" \x1b[33msumm¬y:\x1b[0m %s\r\n", 
h–p
->
summ¬y
);

585 
	`´štf
(" \x1b[33msšû:\x1b[0m %s\r\n", 
h–p
->
sšû
);

586 ià(
group
) {

587 
	`´štf
(" \x1b[33mgroup:\x1b[0m %s\r\n", 
commªdGroups
[
h–p
->
group
]);

589 
	}
}

592 
	$şiOuutG’”icH–p
() {

593 
sds
 
v”siÚ
 = 
	`şiV”siÚ
();

594 
	`´štf
(

606 
v”siÚ


608 
	`sdsä“
(
v”siÚ
);

609 
	}
}

612 
	$şiOuutH–p
(
¬gc
, **
¬gv
) {

613 
i
, 
j
, 
Ën
;

614 
group
 = -1;

615 
h–pEÁry
 *
’Œy
;

616 
commªdH–p
 *
h–p
;

618 ià(
¬gc
 == 0) {

619 
	`şiOuutG’”icH–p
();

621 } ià(
¬gc
 > 0 && 
¬gv
[0][0] == '@') {

622 
Ën
 = (
commªdGroups
)/(*);

623 
i
 = 0; i < 
Ën
; i++) {

624 ià(
	`¡rÿ£cmp
(
¬gv
[0]+1,
commªdGroups
[
i
]) == 0) {

625 
group
 = 
i
;

631 
	`as£¹
(
¬gc
 > 0);

632 
i
 = 0; i < 
h–pEÁr›sL’
; i++) {

633 
’Œy
 = &
h–pEÁr›s
[
i
];

634 ià(
’Œy
->
ty³
 !ğ
CLI_HELP_COMMAND
) ;

636 
h–p
 = 
’Œy
->
Üg
;

637 ià(
group
 == -1) {

639 ià(
¬gc
 =ğ
’Œy
->argc) {

640 
j
 = 0; j < 
¬gc
; j++) {

641 ià(
	`¡rÿ£cmp
(
¬gv
[
j
],
’Œy
->argv[j]) != 0) ;

643 ià(
j
 =ğ
¬gc
) {

644 
	`şiOuutCommªdH–p
(
h–p
,1);

648 ià(
group
 =ğ
h–p
->group) {

649 
	`şiOuutCommªdH–p
(
h–p
,0);

653 
	`´štf
("\r\n");

654 
	}
}

657 
	$com¶‘iÚC®lback
(cÚ¡ *
buf
, 
lš’oi£Com¶‘iÚs
 *
lc
) {

658 
size_t
 
¡¬os
 = 0;

659 
mask
;

660 
i
;

661 
size_t
 
m©chËn
;

662 
sds
 
tmp
;

664 ià(
	`¡ºÿ£cmp
(
buf
,"help ",5) == 0) {

665 
¡¬os
 = 5;

666 
	`is¥aû
(
buf
[
¡¬os
])) startpos++;

667 
mask
 = 
CLI_HELP_COMMAND
 | 
CLI_HELP_GROUP
;

669 
mask
 = 
CLI_HELP_COMMAND
;

672 
i
 = 0; i < 
h–pEÁr›sL’
; i++) {

673 ià(!(
h–pEÁr›s
[
i
].
ty³
 & 
mask
)) ;

675 
m©chËn
 = 
	`¡¾’
(
buf
+
¡¬os
);

676 ià(
	`¡ºÿ£cmp
(
buf
+
¡¬os
,
h–pEÁr›s
[
i
].
fuÎ
,
m©chËn
) == 0) {

677 
tmp
 = 
	`sd¢ewËn
(
buf
,
¡¬os
);

678 
tmp
 = 
	`sdsÿt
Ñmp,
h–pEÁr›s
[
i
].
fuÎ
);

679 
	`lš’oi£AddCom¶‘iÚ
(
lc
,
tmp
);

680 
	`sdsä“
(
tmp
);

683 
	}
}

686 *
	$hštsC®lback
(cÚ¡ *
buf
, *
cŞÜ
, *
bŞd
) {

687 ià(!
´ef
.
hšts
è 
NULL
;

689 
i
, 
¬gc
, 
buæ’
 = 
	`¡¾’
(
buf
);

690 
sds
 *
¬gv
 = 
	`sds¥l™¬gs
(
buf
,&
¬gc
);

691 
’d¥aû
 = 
buæ’
 && 
	`is¥aû
(
buf
[buflen-1]);

694 ià(
¬gc
 == 0) {

695 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

696  
NULL
;

699 
i
 = 0; i < 
h–pEÁr›sL’
; i++) {

700 ià(!(
h–pEÁr›s
[
i
].
ty³
 & 
CLI_HELP_COMMAND
)) ;

702 ià(
	`¡rÿ£cmp
(
¬gv
[0],
h–pEÁr›s
[
i
].
fuÎ
) == 0 ||

703 
	`¡rÿ£cmp
(
buf
,
h–pEÁr›s
[
i
].
fuÎ
) == 0)

705 *
cŞÜ
 = 90;

706 *
bŞd
 = 0;

707 
sds
 
hšt
 = 
	`sd¢ew
(
h–pEÁr›s
[
i
].
Üg
->
·¿ms
);

711 
tÜemove
 = 
¬gc
-1;

712 
tÜemove
 > 0 && 
	`sd¦’
(
hšt
)) {

713 ià(
hšt
[0] == '[') ;

714 ià(
hšt
[0] =ğ' 'è
tÜemove
--;

715 
	`sd¤ªge
(
hšt
,1,-1);

719 ià(!
’d¥aû
) {

720 
sds
 
Ãwhšt
 = 
	`sd¢ewËn
(" ",1);

721 
Ãwhšt
 = 
	`sdsÿtsds
Òewhšt,
hšt
);

722 
	`sdsä“
(
hšt
);

723 
hšt
 = 
Ãwhšt
;

726 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

727  
hšt
;

730 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

731  
NULL
;

732 
	}
}

734 
	$ä“HštsC®lback
(*
±r
) {

735 
	`sdsä“
(
±r
);

736 
	}
}

743 
	$şiAuth
() {

744 
»disR•ly
 *
»¶y
;

745 ià(
cÚfig
.
auth
 =ğ
NULL
è 
REDIS_OK
;

747 ià(
cÚfig
.
u£r
 =ğ
NULL
)

748 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"AUTH %s",
cÚfig
.
auth
);

750 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"AUTH % %s",
cÚfig
.
u£r
,cÚfig.
auth
);

751 ià(
»¶y
 !ğ
NULL
) {

752 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
)

753 
	`årštf
(
¡d”r
,"Warning: AUTH failed\n");

754 
	`ä“R•lyObjeù
(
»¶y
);

755  
REDIS_OK
;

757  
REDIS_ERR
;

758 
	}
}

761 
	$şiS–eù
() {

762 
»disR•ly
 *
»¶y
;

763 ià(
cÚfig
.
dbnum
 =ğ0è 
REDIS_OK
;

765 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"SELECT %d",
cÚfig
.
dbnum
);

766 ià(
»¶y
 !ğ
NULL
) {

767 
»suÉ
 = 
REDIS_OK
;

768 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
è
»suÉ
 = 
REDIS_ERR
;

769 
	`ä“R•lyObjeù
(
»¶y
);

770  
»suÉ
;

772  
REDIS_ERR
;

773 
	}
}

778 
	$şiSecu»CÚÃùiÚ
(
»disCÚ‹xt
 *
c
, cÚ¡ **
”r
) {

779 #ifdeà
USE_OPENSSL


780 
SSL_CTX
 *
s¦_ùx
 = 
NULL
;

782 ià(!
s¦_ùx
) {

783 
s¦_ùx
 = 
	`SSL_CTX_Ãw
(
	`SSLv23_ş›Á_m‘hod
());

784 ià(!
s¦_ùx
) {

785 *
”r
 = "Failedo create SSL_CTX";

786 
”rÜ
;

789 
	`SSL_CTX_£t_İtiÚs
(
s¦_ùx
, 
SSL_OP_NO_SSLv2
 | 
SSL_OP_NO_SSLv3
);

790 
	`SSL_CTX_£t_v”ify
(
s¦_ùx
, 
SSL_VERIFY_PEER
, 
NULL
);

792 ià(
cÚfig
.
ÿû¹
 || cÚfig.
ÿû¹dœ
) {

793 ià(!
	`SSL_CTX_lßd_v”ify_loÿtiÚs
(
s¦_ùx
, 
cÚfig
.
ÿû¹
, cÚfig.
ÿû¹dœ
)) {

794 *
”r
 = "Invalid CA Certificate File/Directory";

795 
”rÜ
;

798 ià(!
	`SSL_CTX_£t_deçuÉ_v”ify_·ths
(
s¦_ùx
)) {

799 *
”r
 = "Failedo use default CA…aths";

800 
”rÜ
;

804 ià(
cÚfig
.
û¹
 && !
	`SSL_CTX_u£_û¹ifiÿ‹_chaš_fe
(
s¦_ùx
, config.cert)) {

805 *
”r
 = "Invalid client certificate";

806 
”rÜ
;

809 ià(
cÚfig
.
key
 && !
	`SSL_CTX_u£_Priv©eKey_fe
(
s¦_ùx
, cÚfig.key, 
SSL_FILETYPE_PEM
)) {

810 *
”r
 = "Invalid…rivate key";

811 
”rÜ
;

815 
SSL
 *
s¦
 = 
	`SSL_Ãw
(
s¦_ùx
);

816 ià(!
s¦
) {

817 *
”r
 = "Failedo create SSL object";

818  
REDIS_ERR
;

821 ià(
cÚfig
.
¢i
 && !
	`SSL_£t_£xt_ho¡_Çme
(
s¦
, config.sni)) {

822 *
”r
 = "Failedo configure SNI";

823 
	`SSL_ä“
(
s¦
);

824  
REDIS_ERR
;

827  
	`»disIn™Ÿ‹SSL
(
c
, 
s¦
);

829 
”rÜ
:

830 
	`SSL_CTX_ä“
(
s¦_ùx
);

831 
s¦_ùx
 = 
NULL
;

832  
REDIS_ERR
;

834 (è
c
;

835 (è
”r
;

836  
REDIS_OK
;

838 
	}
}

841 
	$şiSw™chPrÙo
() {

842 
»disR•ly
 *
»¶y
;

843 ià(
cÚfig
.
»¥3
 =ğ0è 
REDIS_OK
;

845 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"HELLO 3");

846 ià(
»¶y
 !ğ
NULL
) {

847 
»suÉ
 = 
REDIS_OK
;

848 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
è
»suÉ
 = 
REDIS_ERR
;

849 
	`ä“R•lyObjeù
(
»¶y
);

850  
»suÉ
;

852  
REDIS_ERR
;

853 
	}
}

859 
	$şiCÚÃù
(
æags
) {

860 ià(
cÚ‹xt
 =ğ
NULL
 || 
æags
 & 
CC_FORCE
) {

861 ià(
cÚ‹xt
 !ğ
NULL
) {

862 
	`»disF»e
(
cÚ‹xt
);

865 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
) {

866 
cÚ‹xt
 = 
	`»disCÚÃù
(
cÚfig
.
ho¡
,cÚfig.
ho¡pÜt
);

868 
cÚ‹xt
 = 
	`»disCÚÃùUnix
(
cÚfig
.
ho¡sock‘
);

871 ià(!
cÚ‹xt
->
”r
 && 
cÚfig
.
s
) {

872 cÚ¡ *
”r
 = 
NULL
;

873 ià(
	`şiSecu»CÚÃùiÚ
(
cÚ‹xt
, &
”r
è=ğ
REDIS_ERR
 &&ƒrr) {

874 
	`årštf
(
¡d”r
, "Could‚Ù‚egÙŸ‹‡ TLS cÚÃùiÚ: %s\n", 
”r
);

875 
cÚ‹xt
 = 
NULL
;

876 
	`»disF»e
(
cÚ‹xt
);

877  
REDIS_ERR
;

881 ià(
cÚ‹xt
->
”r
) {

882 ià(!(
æags
 & 
CC_QUIET
)) {

883 
	`årštf
(
¡d”r
,"Could‚ot connecto Redis‡t ");

884 ià(
cÚfig
.
ho¡sock‘
 =ğ
NULL
)

885 
	`årštf
(
¡d”r
,"%s:%d: %s\n",

886 
cÚfig
.
ho¡
,cÚfig.
ho¡pÜt
,
cÚ‹xt
->
”r¡r
);

888 
	`årštf
(
¡d”r
,"%s: %s\n",

889 
cÚfig
.
ho¡sock‘
,
cÚ‹xt
->
”r¡r
);

891 
	`»disF»e
(
cÚ‹xt
);

892 
cÚ‹xt
 = 
NULL
;

893  
REDIS_ERR
;

901 
	`ª‘K“pAlive
(
NULL
, 
cÚ‹xt
->
fd
, 
REDIS_CLI_KEEPALIVE_INTERVAL
);

904 ià(
	`şiAuth
(è!ğ
REDIS_OK
)

905  
REDIS_ERR
;

906 ià(
	`şiS–eù
(è!ğ
REDIS_OK
)

907  
REDIS_ERR
;

908 ià(
	`şiSw™chPrÙo
(è!ğ
REDIS_OK
)

909  
REDIS_ERR
;

911  
REDIS_OK
;

912 
	}
}

914 
	$şiPrštCÚ‹xtE¼Ü
() {

915 ià(
cÚ‹xt
 =ğ
NULL
) ;

916 
	`årštf
(
¡d”r
,"E¼Ü: %s\n",
cÚ‹xt
->
”r¡r
);

917 
	}
}

919 
sds
 
	$şiFÜm©R•lyTTY
(
»disR•ly
 *
r
, *
´efix
) {

920 
sds
 
out
 = 
	`sd£m±y
();

921 
r
->
ty³
) {

922 
REDIS_REPLY_ERROR
:

923 
out
 = 
	`sdsÿrštf
(out,"Ó¼Üè%s\n", 
r
->
¡r
);

925 
REDIS_REPLY_STATUS
:

926 
out
 = 
	`sdsÿt
(out,
r
->
¡r
);

927 
out
 = 
	`sdsÿt
(out,"\n");

929 
REDIS_REPLY_INTEGER
:

930 
out
 = 
	`sdsÿrštf
(out,"(š‹g”è%Îd\n",
r
->
š‹g”
);

932 
REDIS_REPLY_DOUBLE
:

933 
out
 = 
	`sdsÿrštf
(out,"(doubËè%s\n",
r
->
¡r
);

935 
REDIS_REPLY_STRING
:

936 
REDIS_REPLY_VERB
:

940 ià(
r
->
ty³
 =ğ
REDIS_REPLY_STRING
) {

941 
out
 = 
	`sdsÿŒ•r
(out,
r
->
¡r
,r->
Ën
);

942 
out
 = 
	`sdsÿt
(out,"\n");

944 
out
 = 
	`sdsÿ’
(out,
r
->
¡r
,r->
Ën
);

945 
out
 = 
	`sdsÿt
(out,"\n");

948 
REDIS_REPLY_NIL
:

949 
out
 = 
	`sdsÿt
(out,"(nil)\n");

951 
REDIS_REPLY_BOOL
:

952 
out
 = 
	`sdsÿt
(out,
r
->
š‹g”
 ? "(true)\n" : "(false)\n");

954 
REDIS_REPLY_ARRAY
:

955 
REDIS_REPLY_MAP
:

956 
REDIS_REPLY_SET
:

957 ià(
r
->
–em’ts
 == 0) {

958 ià(
r
->
ty³
 =ğ
REDIS_REPLY_ARRAY
)

959 
out
 = 
	`sdsÿt
(out,"(empty‡rray)\n");

960 ià(
r
->
ty³
 =ğ
REDIS_REPLY_MAP
)

961 
out
 = 
	`sdsÿt
(out,"(empty hash)\n");

962 ià(
r
->
ty³
 =ğ
REDIS_REPLY_SET
)

963 
out
 = 
	`sdsÿt
(out,"(empty set)\n");

965 
out
 = 
	`sdsÿt
(out,"(empty‡ggregateype)\n");

967 
i
, 
idxËn
 = 0;

968 
_´efixËn
[16];

969 
_´efixfmt
[16];

970 
sds
 
_´efix
;

971 
sds
 
tmp
;

974 
i
 = 
r
->
–em’ts
;

975 ià(
r
->
ty³
 =ğ
REDIS_REPLY_MAP
è
i
 /= 2;

977 
idxËn
++;

978 
i
 /= 10;

979 } 
i
);

982 
	`mem£t
(
_´efixËn
,' ',
idxËn
+2);

983 
_´efixËn
[
idxËn
+2] = '\0';

984 
_´efix
 = 
	`sdsÿt
(
	`sd¢ew
(
´efix
),
_´efixËn
);

987 
num£p
;

988 ià(
r
->
ty³
 =ğ
REDIS_REPLY_SET
è
num£p
 = '~';

989 ià(
r
->
ty³
 =ğ
REDIS_REPLY_MAP
è
num£p
 = '#';

990 
num£p
 = ')';

991 
	`¢´štf
(
_´efixfmt
,(_´efixfmt),"%%s%%%ud%ø",
idxËn
,
num£p
);

993 
i
 = 0; i < 
r
->
–em’ts
; i++) {

994 
humª_idx
 = (
r
->
ty³
 =ğ
REDIS_REPLY_MAP
) ?

995 
i
/2 : i;

996 
humª_idx
++;

1000 
out
 = 
	`sdsÿrštf
(out,
_´efixfmt
,
i
 =ğ0 ? "" : 
´efix
,
humª_idx
);

1003 
tmp
 = 
	`şiFÜm©R•lyTTY
(
r
->
–em’t
[
i
],
_´efix
);

1004 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1005 
	`sdsä“
(
tmp
);

1008 ià(
r
->
ty³
 =ğ
REDIS_REPLY_MAP
) {

1009 
i
++;

1010 
	`sd¤ªge
(
out
,0,-2);

1011 
out
 = 
	`sdsÿt
(out," => ");

1012 
tmp
 = 
	`şiFÜm©R•lyTTY
(
r
->
–em’t
[
i
],
_´efix
);

1013 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1014 
	`sdsä“
(
tmp
);

1017 
	`sdsä“
(
_´efix
);

1021 
	`årštf
(
¡d”r
,"UnknowÀ»¶yy³: %d\n", 
r
->
ty³
);

1022 
	`ex™
(1);

1024  
out
;

1025 
	}
}

1027 
	$isCŞÜT”m
() {

1028 *
t
 = 
	`g‘’v
("TERM");

1029  
t
 !ğ
NULL
 && 
	`¡r¡r
(t,"xterm") != NULL;

1030 
	}
}

1034 
sds
 
	$sdsÿtcŞÜ
(
sds
 
o
, *
s
, 
size_t
 
Ën
, *
cŞÜ
) {

1035 ià(!
	`isCŞÜT”m
()è 
	`sdsÿ’
(
o
,
s
,
Ën
);

1037 
bŞd
 = 
	`¡r¡r
(
cŞÜ
,"bŞd"è!ğ
NULL
;

1038 
ccode
 = 37;

1039 ià(
	`¡r¡r
(
cŞÜ
,"»d")è
ccode
 = 31;

1040 ià(
	`¡r¡r
(
cŞÜ
,"g»’")è
ccode
 = 32;

1041 ià(
	`¡r¡r
(
cŞÜ
,"y–low")è
ccode
 = 33;

1042 ià(
	`¡r¡r
(
cŞÜ
,"blue")è
ccode
 = 34;

1043 ià(
	`¡r¡r
(
cŞÜ
,"mag’")è
ccode
 = 35;

1044 ià(
	`¡r¡r
(
cŞÜ
,"cyª")è
ccode
 = 36;

1045 ià(
	`¡r¡r
(
cŞÜ
,"wh™e")è
ccode
 = 37;

1047 
o
 = 
	`sdsÿtfmt
(o,"\033[%i;%i;49m",
bŞd
,
ccode
);

1048 
o
 = 
	`sdsÿ’
(o,
s
,
Ën
);

1049 
o
 = 
	`sdsÿt
(o,"\033[0m");

1050  
o
;

1051 
	}
}

1055 
sds
 
	$sdsC©CŞÜizedLdbR•ly
(
sds
 
o
, *
s
, 
size_t
 
Ën
) {

1056 *
cŞÜ
 = "white";

1058 ià(
	`¡r¡r
(
s
,"<debug>")è
cŞÜ
 = "bold";

1059 ià(
	`¡r¡r
(
s
,"<»dis>")è
cŞÜ
 = "green";

1060 ià(
	`¡r¡r
(
s
,"<»¶y>")è
cŞÜ
 = "cyan";

1061 ià(
	`¡r¡r
(
s
,"<”rÜ>")è
cŞÜ
 = "red";

1062 ià(
	`¡r¡r
(
s
,"<hšt>")è
cŞÜ
 = "bold";

1063 ià(
	`¡r¡r
(
s
,"<v®ue>"è|| sŒ¡r(s,"<»tv®>")è
cŞÜ
 = "magenta";

1064 ià(
Ën
 > 4 && 
	`isdig™
(
s
[3])) {

1065 ià(
s
[1] =ğ'>'è
cŞÜ
 = "yellow";

1066 ià(
s
[2] =ğ'#'è
cŞÜ
 = "bold";

1068  
	`sdsÿtcŞÜ
(
o
,
s
,
Ën
,
cŞÜ
);

1069 
	}
}

1071 
sds
 
	$şiFÜm©R•lyRaw
(
»disR•ly
 *
r
) {

1072 
sds
 
out
 = 
	`sd£m±y
(), 
tmp
;

1073 
size_t
 
i
;

1075 
r
->
ty³
) {

1076 
REDIS_REPLY_NIL
:

1079 
REDIS_REPLY_ERROR
:

1080 
out
 = 
	`sdsÿ’
(out,
r
->
¡r
,r->
Ën
);

1081 
out
 = 
	`sdsÿ’
(out,"\n",1);

1083 
REDIS_REPLY_STATUS
:

1084 
REDIS_REPLY_STRING
:

1085 
REDIS_REPLY_VERB
:

1086 ià(
r
->
ty³
 =ğ
REDIS_REPLY_STATUS
 && 
cÚfig
.
ev®_ldb
) {

1092 ià(
	`¡r¡r
(
r
->
¡r
,"<endsession>") ==„->str) {

1093 
cÚfig
.
’abË_ldb_Ú_ev®
 = 0;

1094 
cÚfig
.
ev®_ldb
 = 0;

1095 
cÚfig
.
ev®_ldb_’d
 = 1;

1096 
cÚfig
.
ouut
 = 
OUTPUT_STANDARD
;

1097 
	`şiReäeshProm±
();

1099 
out
 = 
	`sdsC©CŞÜizedLdbR•ly
(out,
r
->
¡r
,r->
Ën
);

1102 
out
 = 
	`sdsÿ’
(out,
r
->
¡r
,r->
Ën
);

1105 
REDIS_REPLY_BOOL
:

1106 
out
 = 
	`sdsÿt
(out,
r
->
š‹g”
 ? "(true)" : "(false)");

1108 
REDIS_REPLY_INTEGER
:

1109 
out
 = 
	`sdsÿrštf
(out,"%Îd",
r
->
š‹g”
);

1111 
REDIS_REPLY_DOUBLE
:

1112 
out
 = 
	`sdsÿrštf
(out,"%s",
r
->
¡r
);

1114 
REDIS_REPLY_ARRAY
:

1115 
i
 = 0; i < 
r
->
–em’ts
; i++) {

1116 ià(
i
 > 0è
out
 = 
	`sdsÿt
(out,
cÚfig
.
mb_d–im
);

1117 
tmp
 = 
	`şiFÜm©R•lyRaw
(
r
->
–em’t
[
i
]);

1118 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1119 
	`sdsä“
(
tmp
);

1122 
REDIS_REPLY_MAP
:

1123 
i
 = 0; i < 
r
->
–em’ts
; i += 2) {

1124 ià(
i
 > 0è
out
 = 
	`sdsÿt
(out,
cÚfig
.
mb_d–im
);

1125 
tmp
 = 
	`şiFÜm©R•lyRaw
(
r
->
–em’t
[
i
]);

1126 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1127 
	`sdsä“
(
tmp
);

1129 
out
 = 
	`sdsÿ’
(out," ",1);

1130 
tmp
 = 
	`şiFÜm©R•lyRaw
(
r
->
–em’t
[
i
+1]);

1131 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1132 
	`sdsä“
(
tmp
);

1136 
	`årštf
(
¡d”r
,"UnknowÀ»¶yy³: %d\n", 
r
->
ty³
);

1137 
	`ex™
(1);

1139  
out
;

1140 
	}
}

1142 
sds
 
	$şiFÜm©R•lyCSV
(
»disR•ly
 *
r
) {

1143 
i
;

1145 
sds
 
out
 = 
	`sd£m±y
();

1146 
r
->
ty³
) {

1147 
REDIS_REPLY_ERROR
:

1148 
out
 = 
	`sdsÿt
(out,"ERROR,");

1149 
out
 = 
	`sdsÿŒ•r
(out,
r
->
¡r
,
	`¡¾’
(r->str));

1151 
REDIS_REPLY_STATUS
:

1152 
out
 = 
	`sdsÿŒ•r
(out,
r
->
¡r
,r->
Ën
);

1154 
REDIS_REPLY_INTEGER
:

1155 
out
 = 
	`sdsÿrštf
(out,"%Îd",
r
->
š‹g”
);

1157 
REDIS_REPLY_DOUBLE
:

1158 
out
 = 
	`sdsÿrštf
(out,"%s",
r
->
¡r
);

1160 
REDIS_REPLY_STRING
:

1161 
REDIS_REPLY_VERB
:

1162 
out
 = 
	`sdsÿŒ•r
(out,
r
->
¡r
,r->
Ën
);

1164 
REDIS_REPLY_NIL
:

1165 
out
 = 
	`sdsÿt
(out,"NULL");

1167 
REDIS_REPLY_BOOL
:

1168 
out
 = 
	`sdsÿt
(out,
r
->
š‹g”
 ? "true" : "false");

1170 
REDIS_REPLY_ARRAY
:

1171 
REDIS_REPLY_MAP
:

1172 
i
 = 0; i < 
r
->
–em’ts
; i++) {

1173 
sds
 
tmp
 = 
	`şiFÜm©R•lyCSV
(
r
->
–em’t
[
i
]);

1174 
out
 = 
	`sdsÿ’
(out,
tmp
,
	`sd¦’
(tmp));

1175 ià(
i
 !ğ
r
->
–em’ts
-1è
out
 = 
	`sdsÿt
(out,",");

1176 
	`sdsä“
(
tmp
);

1180 
	`årštf
(
¡d”r
,"UnknowÀ»¶yy³: %d\n", 
r
->
ty³
);

1181 
	`ex™
(1);

1183  
out
;

1184 
	}
}

1186 
	$şiR—dR•ly
(
ouut_¿w_¡ršgs
) {

1187 *
_»¶y
;

1188 
»disR•ly
 *
»¶y
;

1189 
sds
 
out
 = 
NULL
;

1190 
ouut
 = 1;

1192 ià(
	`»disG‘R•ly
(
cÚ‹xt
,&
_»¶y
è!ğ
REDIS_OK
) {

1193 ià(
cÚfig
.
shutdown
) {

1194 
	`»disF»e
(
cÚ‹xt
);

1195 
cÚ‹xt
 = 
NULL
;

1196  
REDIS_OK
;

1198 ià(
cÚfig
.
š‹¿ùive
) {

1200 ià(
cÚ‹xt
->
”r
 =ğ
REDIS_ERR_IO
 &&

1201 (
”ºo
 =ğ
ECONNRESET
 ||ƒ¼nØ=ğ
EPIPE
))

1202  
REDIS_ERR
;

1203 ià(
cÚ‹xt
->
”r
 =ğ
REDIS_ERR_EOF
)

1204  
REDIS_ERR
;

1206 
	`şiPrštCÚ‹xtE¼Ü
();

1207 
	`ex™
(1);

1208  
REDIS_ERR
;

1211 
»¶y
 = (
»disR•ly
*)
_»¶y
;

1213 
cÚfig
.
Ï¡_cmd_ty³
 = 
»¶y
->
ty³
;

1217 ià(
cÚfig
.
şu¡”_mode
 && 
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
 &&

1218 (!
	`¡ºcmp
(
»¶y
->
¡r
,"MOVED",5è|| !
	`¡rcmp
(reply->str,"ASK")))

1220 *
p
 = 
»¶y
->
¡r
, *
s
;

1221 
¦Ù
;

1223 
ouut
 = 0;

1229 
s
 = 
	`¡rchr
(
p
,' ');

1230 
p
 = 
	`¡rchr
(
s
+1,' ');

1231 *
p
 = '\0';

1232 
¦Ù
 = 
	`©oi
(
s
+1);

1233 
s
 = 
	`¡¼chr
(
p
+1,':');

1234 *
s
 = '\0';

1235 
	`sdsä“
(
cÚfig
.
ho¡
);

1236 
cÚfig
.
ho¡
 = 
	`sd¢ew
(
p
+1);

1237 
cÚfig
.
ho¡pÜt
 = 
	`©oi
(
s
+1);

1238 ià(
cÚfig
.
š‹¿ùive
)

1239 
	`´štf
("-> Redirectedo slot [%d]†ocated‡t %s:%d\n",

1240 
¦Ù
, 
cÚfig
.
ho¡
, cÚfig.
ho¡pÜt
);

1241 
cÚfig
.
şu¡”_»issue_commªd
 = 1;

1242 
	`şiReäeshProm±
();

1245 ià(
ouut
) {

1246 ià(
ouut_¿w_¡ršgs
) {

1247 
out
 = 
	`şiFÜm©R•lyRaw
(
»¶y
);

1249 ià(
cÚfig
.
ouut
 =ğ
OUTPUT_RAW
) {

1250 
out
 = 
	`şiFÜm©R•lyRaw
(
»¶y
);

1251 
out
 = 
	`sdsÿt
(out,"\n");

1252 } ià(
cÚfig
.
ouut
 =ğ
OUTPUT_STANDARD
) {

1253 
out
 = 
	`şiFÜm©R•lyTTY
(
»¶y
,"");

1254 } ià(
cÚfig
.
ouut
 =ğ
OUTPUT_CSV
) {

1255 
out
 = 
	`şiFÜm©R•lyCSV
(
»¶y
);

1256 
out
 = 
	`sdsÿt
(out,"\n");

1259 
	`fwr™e
(
out
,
	`sd¦’
(out),1,
¡dout
);

1260 
	`sdsä“
(
out
);

1262 
	`ä“R•lyObjeù
(
»¶y
);

1263  
REDIS_OK
;

1264 
	}
}

1266 
	$şiS’dCommªd
(
¬gc
, **
¬gv
, 
»³©
) {

1267 *
commªd
 = 
¬gv
[0];

1268 
size_t
 *
¬gvËn
;

1269 
j
, 
ouut_¿w
;

1271 ià(!
cÚfig
.
ev®_ldb
 &&

1272 (!
	`¡rÿ£cmp
(
commªd
,"help") || !strcasecmp(command,"?"))) {

1273 
	`şiOuutH–p
(--
¬gc
, ++
¬gv
);

1274  
REDIS_OK
;

1277 ià(
cÚ‹xt
 =ğ
NULL
è 
REDIS_ERR
;

1279 
ouut_¿w
 = 0;

1280 ià(!
	`¡rÿ£cmp
(
commªd
,"info") ||

1281 !
	`¡rÿ£cmp
(
commªd
,"lolwut") ||

1282 (
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(
commªd
,"debug") &&

1283 !
	`¡rÿ£cmp
(
¬gv
[1],"htstats")) ||

1284 (
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(
commªd
,"debug") &&

1285 !
	`¡rÿ£cmp
(
¬gv
[1],"htstats-key")) ||

1286 (
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(
commªd
,"memory") &&

1287 (!
	`¡rÿ£cmp
(
¬gv
[1],"malloc-stats") ||

1288 !
	`¡rÿ£cmp
(
¬gv
[1],"doctor"))) ||

1289 (
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(
commªd
,"cluster") &&

1290 (!
	`¡rÿ£cmp
(
¬gv
[1],"nodes") ||

1291 !
	`¡rÿ£cmp
(
¬gv
[1],"info"))) ||

1292 (
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(
commªd
,"client") &&

1293 !
	`¡rÿ£cmp
(
¬gv
[1],"list")) ||

1294 (
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(
commªd
,"latency") &&

1295 !
	`¡rÿ£cmp
(
¬gv
[1],"graph")) ||

1296 (
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(
commªd
,"latency") &&

1297 !
	`¡rÿ£cmp
(
¬gv
[1],"doctor")) ||

1300 (
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(
commªd
,"proxy") &&

1301 !
	`¡rÿ£cmp
(
¬gv
[1],"info")))

1303 
ouut_¿w
 = 1;

1306 ià(!
	`¡rÿ£cmp
(
commªd
,"shutdown")è
cÚfig
.
shutdown
 = 1;

1307 ià(!
	`¡rÿ£cmp
(
commªd
,"mÚ™Ü")è
cÚfig
.
mÚ™Ü_mode
 = 1;

1308 ià(!
	`¡rÿ£cmp
(
commªd
,"subscribe") ||

1309 !
	`¡rÿ£cmp
(
commªd
,"psubsüibe")è
cÚfig
.
pubsub_mode
 = 1;

1310 ià(!
	`¡rÿ£cmp
(
commªd
,"sync") ||

1311 !
	`¡rÿ£cmp
(
commªd
,"psync")è
cÚfig
.
¦ave_mode
 = 1;

1315 ià(
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(
¬gv
[0],"script") &&

1316 !
	`¡rÿ£cmp
(
¬gv
[1],"debug"))

1318 ià(!
	`¡rÿ£cmp
(
¬gv
[2],"yes") || !strcasecmp(argv[2],"sync")) {

1319 
cÚfig
.
’abË_ldb_Ú_ev®
 = 1;

1321 
cÚfig
.
’abË_ldb_Ú_ev®
 = 0;

1326 ià(!
	`¡rÿ£cmp
(
commªd
,"ev®"è&& 
cÚfig
.
’abË_ldb_Ú_ev®
) {

1327 
cÚfig
.
ev®_ldb
 = 1;

1328 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

1332 
¬gvËn
 = 
	`zm®loc
(
¬gc
*(
size_t
));

1333 
j
 = 0; j < 
¬gc
; j++)

1334 
¬gvËn
[
j
] = 
	`sd¦’
(
¬gv
[j]);

1338 
»³©
 < 0 ||„epeat-- > 0) {

1339 
	`»disAµ’dCommªdArgv
(
cÚ‹xt
,
¬gc
,(cÚ¡ **)
¬gv
,
¬gvËn
);

1340 
cÚfig
.
mÚ™Ü_mode
) {

1341 ià(
	`şiR—dR•ly
(
ouut_¿w
è!ğ
REDIS_OK
è
	`ex™
(1);

1342 
	`fæush
(
¡dout
);

1345 ià(
cÚfig
.
pubsub_mode
) {

1346 ià(
cÚfig
.
ouut
 !ğ
OUTPUT_RAW
)

1347 
	`´štf
("Reading messages... (press Ctrl-Co quit)\n");

1349 ià(
	`şiR—dR•ly
(
ouut_¿w
è!ğ
REDIS_OK
è
	`ex™
(1);

1353 ià(
cÚfig
.
¦ave_mode
) {

1354 
	`´štf
("Entering„eplica output mode... (press Ctrl-Co quit)\n");

1355 
	`¦aveMode
();

1356 
cÚfig
.
¦ave_mode
 = 0;

1357 
	`zä“
(
¬gvËn
);

1358  
REDIS_ERR
;

1361 ià(
	`şiR—dR•ly
(
ouut_¿w
è!ğ
REDIS_OK
) {

1362 
	`zä“
(
¬gvËn
);

1363  
REDIS_ERR
;

1366 ià(!
	`¡rÿ£cmp
(
commªd
,"£Ëù"è&& 
¬gc
 =ğ2 && 
cÚfig
.
Ï¡_cmd_ty³
 !ğ
REDIS_REPLY_ERROR
) {

1367 
cÚfig
.
dbnum
 = 
	`©oi
(
¬gv
[1]);

1368 
	`şiReäeshProm±
();

1369 } ià(!
	`¡rÿ£cmp
(
commªd
,"auth"è&& (
¬gc
 == 2 ||‡rgc == 3))

1371 
	`şiS–eù
();

1374 ià(
cÚfig
.
şu¡”_»issue_commªd
){

1379 ià(
cÚfig
.
š‹rv®
è
	`u¦“p
(config.interval);

1380 
	`fæush
(
¡dout
);

1383 
	`zä“
(
¬gvËn
);

1384  
REDIS_OK
;

1385 
	}
}

1388 
»disR•ly
 *
	$»cÚÃùšgRedisCommªd
(
»disCÚ‹xt
 *
c
, cÚ¡ *
fmt
, ...) {

1389 
»disR•ly
 *
»¶y
 = 
NULL
;

1390 
Œ›s
 = 0;

1391 
va_li¡
 
­
;

1393 
	`as£¹
(!
c
->
”r
);

1394 
»¶y
 =ğ
NULL
) {

1395 
c
->
”r
 & (
REDIS_ERR_IO
 | 
REDIS_ERR_EOF
)) {

1396 
	`´štf
("\r\x1b[0K");

1397 
	`´štf
("RecÚÃùšg... %d\r", ++
Œ›s
);

1398 
	`fæush
(
¡dout
);

1400 
	`»disF»e
(
c
);

1401 
c
 = 
	`»disCÚÃù
(
cÚfig
.
ho¡
,cÚfig.
ho¡pÜt
);

1402 ià(!
c
->
”r
 && 
cÚfig
.
s
) {

1403 cÚ¡ *
”r
 = 
NULL
;

1404 ià(
	`şiSecu»CÚÃùiÚ
(
c
, &
”r
è=ğ
REDIS_ERR
 &&ƒrr) {

1405 
	`årštf
(
¡d”r
, "TLS E¼Ü: %s\n", 
”r
);

1406 
	`ex™
(1);

1409 
	`u¦“p
(1000000);

1412 
	`va_¡¬t
(
­
,
fmt
);

1413 
»¶y
 = 
	`»disvCommªd
(
c
,
fmt
,
­
);

1414 
	`va_’d
(
­
);

1416 ià(
c
->
”r
 && !(c->”¸& (
REDIS_ERR_IO
 | 
REDIS_ERR_EOF
))) {

1417 
	`årštf
(
¡d”r
, "E¼Ü: %s\n", 
c
->
”r¡r
);

1418 
	`ex™
(1);

1419 } ià(
Œ›s
 > 0) {

1420 
	`´štf
("\r\x1b[0K");

1424 
cÚ‹xt
 = 
c
;

1425  
»¶y
;

1426 
	}
}

1432 
	$·r£O±iÚs
(
¬gc
, **
¬gv
) {

1433 
i
;

1435 
i
 = 1; i < 
¬gc
; i++) {

1436 
Ï¡¬g
 = 
i
==
¬gc
-1;

1438 ià(!
	`¡rcmp
(
¬gv
[
i
],"-h"è&& !
Ï¡¬g
) {

1439 
	`sdsä“
(
cÚfig
.
ho¡
);

1440 
cÚfig
.
ho¡
 = 
	`sd¢ew
(
¬gv
[++
i
]);

1441 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-h"è&& 
Ï¡¬g
) {

1442 
	`u§ge
();

1443 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--help")) {

1444 
	`u§ge
();

1445 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-x")) {

1446 
cÚfig
.
¡dš¬g
 = 1;

1447 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-p"è&& !
Ï¡¬g
) {

1448 
cÚfig
.
ho¡pÜt
 = 
	`©oi
(
¬gv
[++
i
]);

1449 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-s"è&& !
Ï¡¬g
) {

1450 
cÚfig
.
ho¡sock‘
 = 
¬gv
[++
i
];

1451 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-r"è&& !
Ï¡¬g
) {

1452 
cÚfig
.
»³©
 = 
	`¡¹Şl
(
¬gv
[++
i
],
NULL
,10);

1453 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-i"è&& !
Ï¡¬g
) {

1454 
£cÚds
 = 
	`©of
(
¬gv
[++
i
]);

1455 
cÚfig
.
š‹rv®
 = 
£cÚds
*1000000;

1456 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-n"è&& !
Ï¡¬g
) {

1457 
cÚfig
.
dbnum
 = 
	`©oi
(
¬gv
[++
i
]);

1458 } ià(!
	`¡rcmp
(
¬gv
[
i
], "--no-auth-warning")) {

1459 
cÚfig
.
no_auth_w¬nšg
 = 1;

1460 } ià(!
	`¡rcmp
(
¬gv
[
i
], "--askpass")) {

1461 
cÚfig
.
ask·ss
 = 1;

1462 } ià((!
	`¡rcmp
(
¬gv
[
i
],"-a") || !strcmp(argv[i],"--pass"))

1463 && !
Ï¡¬g
)

1465 
cÚfig
.
auth
 = 
¬gv
[++
i
];

1466 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--u£r"è&& !
Ï¡¬g
) {

1467 
cÚfig
.
u£r
 = 
¬gv
[++
i
];

1468 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-u"è&& !
Ï¡¬g
) {

1469 
	`·r£RedisUri
(
¬gv
[++
i
]);

1470 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--raw")) {

1471 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

1472 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--no-raw")) {

1473 
cÚfig
.
ouut
 = 
OUTPUT_STANDARD
;

1474 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--csv")) {

1475 
cÚfig
.
ouut
 = 
OUTPUT_CSV
;

1476 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--latency")) {

1477 
cÚfig
.
Ï‹ncy_mode
 = 1;

1478 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--latency-dist")) {

1479 
cÚfig
.
Ï‹ncy_di¡_mode
 = 1;

1480 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--mono")) {

1481 
¥eùrum_·Ë‰e
 = 
¥eùrum_·Ë‰e_mÚo
;

1482 
¥eùrum_·Ë‰e_size
 = 
¥eùrum_·Ë‰e_mÚo_size
;

1483 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--latency-history")) {

1484 
cÚfig
.
Ï‹ncy_mode
 = 1;

1485 
cÚfig
.
Ï‹ncy_hi¡Üy
 = 1;

1486 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--Ìu-‹¡"è&& !
Ï¡¬g
) {

1487 
cÚfig
.
Ìu_‹¡_mode
 = 1;

1488 
cÚfig
.
Ìu_‹¡_§m¶e_size
 = 
	`¡¹Şl
(
¬gv
[++
i
],
NULL
,10);

1489 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--slave")) {

1490 
cÚfig
.
¦ave_mode
 = 1;

1491 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--replica")) {

1492 
cÚfig
.
¦ave_mode
 = 1;

1493 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--stat")) {

1494 
cÚfig
.
¡©_mode
 = 1;

1495 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--scan")) {

1496 
cÚfig
.
sÿn_mode
 = 1;

1497 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--·‰”n"è&& !
Ï¡¬g
) {

1498 
cÚfig
.
·‰”n
 = 
¬gv
[++
i
];

1499 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--šŒšsic-Ï‹ncy"è&& !
Ï¡¬g
) {

1500 
cÚfig
.
šŒšsic_Ï‹ncy_mode
 = 1;

1501 
cÚfig
.
šŒšsic_Ï‹ncy_du¿tiÚ
 = 
	`©oi
(
¬gv
[++
i
]);

1502 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--rdb"è&& !
Ï¡¬g
) {

1503 
cÚfig
.
g‘rdb_mode
 = 1;

1504 
cÚfig
.
rdb_f’ame
 = 
¬gv
[++
i
];

1505 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--pipe")) {

1506 
cÚfig
.
pe_mode
 = 1;

1507 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--pe-timeout"è&& !
Ï¡¬g
) {

1508 
cÚfig
.
pe_timeout
 = 
	`©oi
(
¬gv
[++
i
]);

1509 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--bigkeys")) {

1510 
cÚfig
.
bigkeys
 = 1;

1511 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--memkeys")) {

1512 
cÚfig
.
memkeys
 = 1;

1513 
cÚfig
.
memkeys_§m¶es
 = 0;

1514 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--memkeys-samples")) {

1515 
cÚfig
.
memkeys
 = 1;

1516 
cÚfig
.
memkeys_§m¶es
 = 
	`©oi
(
¬gv
[++
i
]);

1517 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--hotkeys")) {

1518 
cÚfig
.
hÙkeys
 = 1;

1519 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--ev®"è&& !
Ï¡¬g
) {

1520 
cÚfig
.
ev®
 = 
¬gv
[++
i
];

1521 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--ldb")) {

1522 
cÚfig
.
ev®_ldb
 = 1;

1523 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

1524 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--ldb-sync-mode")) {

1525 
cÚfig
.
ev®_ldb
 = 1;

1526 
cÚfig
.
ev®_ldb_sync
 = 1;

1527 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

1528 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-c")) {

1529 
cÚfig
.
şu¡”_mode
 = 1;

1530 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-d"è&& !
Ï¡¬g
) {

1531 
	`sdsä“
(
cÚfig
.
mb_d–im
);

1532 
cÚfig
.
mb_d–im
 = 
	`sd¢ew
(
¬gv
[++
i
]);

1533 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--verbose")) {

1534 
cÚfig
.
v”bo£
 = 1;

1535 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”"è&& !
Ï¡¬g
) {

1536 ià(
	`CLUSTER_MANAGER_MODE
()è
	`u§ge
();

1537 *
cmd
 = 
¬gv
[++
i
];

1538 
j
 = 
i
;

1539 
j
 < 
¬gc
 && 
¬gv
[j][0] != '-') j++;

1540 ià(
j
 > 
i
) j--;

1541 
	`ü—‹Clu¡”Mªag”Commªd
(
cmd
, 
j
 - 
i
, 
¬gv
 + i + 1);

1542 
i
 = 
j
;

1543 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”"è&& 
Ï¡¬g
) {

1544 
	`u§ge
();

1545 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-»¶iÿs"è&& !
Ï¡¬g
) {

1546 
cÚfig
.
şu¡”_mªag”_commªd
.
»¶iÿs
 = 
	`©oi
(
¬gv
[++
i
]);

1547 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-ma¡”-id"è&& !
Ï¡¬g
) {

1548 
cÚfig
.
şu¡”_mªag”_commªd
.
ma¡”_id
 = 
¬gv
[++
i
];

1549 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-äom"è&& !
Ï¡¬g
) {

1550 
cÚfig
.
şu¡”_mªag”_commªd
.
äom
 = 
¬gv
[++
i
];

1551 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-to"è&& !
Ï¡¬g
) {

1552 
cÚfig
.
şu¡”_mªag”_commªd
.
to
 = 
¬gv
[++
i
];

1553 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-weight"è&& !
Ï¡¬g
) {

1554 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
weight
 !ğ
NULL
) {

1555 
	`årštf
(
¡d”r
, "WARNING: you cannot use --cluster-weight "

1560 
	`ex™
(1);

1562 
widx
 = 
i
 + 1;

1563 **
weight
 = 
¬gv
 + 
widx
;

1564 
w¬gc
 = 0;

1565 ; 
widx
 < 
¬gc
; widx++) {

1566 ià(
	`¡r¡r
(
¬gv
[
widx
], "--") ==‡rgv[widx]) ;

1567 ià(
	`¡rchr
(
¬gv
[
widx
], '='è=ğ
NULL
) ;

1568 
w¬gc
++;

1570 ià(
w¬gc
 > 0) {

1571 
cÚfig
.
şu¡”_mªag”_commªd
.
weight
 = weight;

1572 
cÚfig
.
şu¡”_mªag”_commªd
.
weight_¬gc
 = 
w¬gc
;

1573 
i
 +ğ
w¬gc
;

1575 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-¦Ùs"è&& !
Ï¡¬g
) {

1576 
cÚfig
.
şu¡”_mªag”_commªd
.
¦Ùs
 = 
	`©oi
(
¬gv
[++
i
]);

1577 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-timeout"è&& !
Ï¡¬g
) {

1578 
cÚfig
.
şu¡”_mªag”_commªd
.
timeout
 = 
	`©oi
(
¬gv
[++
i
]);

1579 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-p–še"è&& !
Ï¡¬g
) {

1580 
cÚfig
.
şu¡”_mªag”_commªd
.
p–še
 = 
	`©oi
(
¬gv
[++
i
]);

1581 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--şu¡”-th»shŞd"è&& !
Ï¡¬g
) {

1582 
cÚfig
.
şu¡”_mªag”_commªd
.
th»shŞd
 = 
	`©of
(
¬gv
[++
i
]);

1583 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-yes")) {

1584 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1585 
CLUSTER_MANAGER_CMD_FLAG_YES
;

1586 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-simulate")) {

1587 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1588 
CLUSTER_MANAGER_CMD_FLAG_SIMULATE
;

1589 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-replace")) {

1590 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1591 
CLUSTER_MANAGER_CMD_FLAG_REPLACE
;

1592 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-copy")) {

1593 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1594 
CLUSTER_MANAGER_CMD_FLAG_COPY
;

1595 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-slave")) {

1596 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1597 
CLUSTER_MANAGER_CMD_FLAG_SLAVE
;

1598 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-use-empty-masters")) {

1599 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1600 
CLUSTER_MANAGER_CMD_FLAG_EMPTYMASTER
;

1601 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-search-multiple-owners")) {

1602 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1603 
CLUSTER_MANAGER_CMD_FLAG_CHECK_OWNERS
;

1604 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--cluster-fix-with-unreachable-masters")) {

1605 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |=

1606 
CLUSTER_MANAGER_CMD_FLAG_FIX_WITH_UNREACHABLE_MASTERS
;

1607 #ifdeà
USE_OPENSSL


1608 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--tls")) {

1609 
cÚfig
.
s
 = 1;

1610 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--¢i"è&& !
Ï¡¬g
) {

1611 
cÚfig
.
¢i
 = 
¬gv
[++
i
];

1612 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--ÿû¹dœ"è&& !
Ï¡¬g
) {

1613 
cÚfig
.
ÿû¹dœ
 = 
¬gv
[++
i
];

1614 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--ÿû¹"è&& !
Ï¡¬g
) {

1615 
cÚfig
.
ÿû¹
 = 
¬gv
[++
i
];

1616 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--û¹"è&& !
Ï¡¬g
) {

1617 
cÚfig
.
û¹
 = 
¬gv
[++
i
];

1618 } ià(!
	`¡rcmp
(
¬gv
[
i
],"--key"è&& !
Ï¡¬g
) {

1619 
cÚfig
.
key
 = 
¬gv
[++
i
];

1621 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-v") || !strcmp(argv[i], "--version")) {

1622 
sds
 
v”siÚ
 = 
	`şiV”siÚ
();

1623 
	`´štf
("»dis-ş˜%s\n", 
v”siÚ
);

1624 
	`sdsä“
(
v”siÚ
);

1625 
	`ex™
(0);

1626 } ià(!
	`¡rcmp
(
¬gv
[
i
],"-3")) {

1627 
cÚfig
.
»¥3
 = 1;

1628 } ià(
	`CLUSTER_MANAGER_MODE
(è&& 
¬gv
[
i
][0] != '-') {

1629 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
¬gc
 == 0) {

1630 
j
 = 
i
 + 1;

1631 
j
 < 
¬gc
 && 
¬gv
[j][0] != '-') j++;

1632 
cmd_¬gc
 = 
j
 - 
i
;

1633 
cÚfig
.
şu¡”_mªag”_commªd
.
¬gc
 = 
cmd_¬gc
;

1634 
cÚfig
.
şu¡”_mªag”_commªd
.
¬gv
 =‡rgv + 
i
;

1635 ià(
cmd_¬gc
 > 1è
i
 = 
j
 - 1;

1638 ià(
¬gv
[
i
][0] == '-') {

1639 
	`årštf
(
¡d”r
,

1641 
¬gv
[
i
]);

1642 
	`ex™
(1);

1651 ià(
cÚfig
.
ev®_ldb
 && cÚfig.
ev®
 =ğ
NULL
) {

1652 
	`årštf
(
¡d”r
,"Options --ldb‡nd --ldb-sync-mode„equire --eval.\n");

1653 
	`årštf
(
¡d”r
,"Try % --h–°fÜ mÜšfÜm©iÚ.\n", 
¬gv
[0]);

1654 
	`ex™
(1);

1657 ià(!
cÚfig
.
no_auth_w¬nšg
 && cÚfig.
auth
 !ğ
NULL
) {

1658 
	`åuts
("Warning: Using‡…assword with '-a' or '-u' option onhe command"

1659 "†šš‹rçû may‚Ù b§ã.\n", 
¡d”r
);

1662  
i
;

1663 
	}
}

1665 
	$·r£Env
() {

1667 *
auth
 = 
	`g‘’v
(
REDIS_CLI_AUTH_ENV
);

1668 ià(
auth
 !ğ
NULL
 && 
cÚfig
.auth == NULL) {

1669 
cÚfig
.
auth
 =‡uth;

1671 
	}
}

1673 
sds
 
	$»adArgFromStdš
() {

1674 
buf
[1024];

1675 
sds
 
¬g
 = 
	`sd£m±y
();

1678 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,1024);

1680 ià(
Ä—d
 == 0) ;

1681 ià(
Ä—d
 == -1) {

1682 
	`³¼Ü
("Reading from standard input");

1683 
	`ex™
(1);

1685 
¬g
 = 
	`sdsÿ’
×rg,
buf
,
Ä—d
);

1687  
¬g
;

1688 
	}
}

1690 
	$u§ge
() {

1691 
sds
 
v”siÚ
 = 
	`şiV”siÚ
();

1692 
	`årštf
(
¡d”r
,

1700 " You cª‡lsØu£h" 
REDIS_CLI_AUTH_ENV
 "ƒnvironment\n"

1706 " Iàthi ¬gum’ˆi u£d, '-a'‡nd " 
REDIS_CLI_AUTH_ENV
 "\n"

1717 #ifdeà
USE_OPENSSL


1738 "‡ndƒx™s.\n",
v”siÚ
);

1740 
	`årštf
(
¡d”r
,

1752 
REDIS_CLI_DEFAULT_PIPE_TIMEOUT
);

1753 
	`årštf
(
¡d”r
,

1778 
	`årštf
(
¡d”r
,

1796 
	`sdsä“
(
v”siÚ
);

1797 
	`ex™
(1);

1798 
	}
}

1800 
	$cÚfœmW™hYes
(*
msg
) {

1801 
	`´štf
("% Ñy³ 'yes'Øacû±): ", 
msg
);

1802 
	`fæush
(
¡dout
);

1803 
buf
[4];

1804 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,4);

1805 
buf
[3] = '\0';

1806  (
Ä—d
 !ğ0 && !
	`¡rcmp
("yes", 
buf
));

1807 
	}
}

1810 **
	$cÚv”tToSds
(
couÁ
, ** 
¬gs
) {

1811 
j
;

1812 **
sds
 = 
	`zm®loc
((*)*
couÁ
);

1814 
j
 = 0; j < 
couÁ
; j++)

1815 
sds
[
j
] = 
	`sd¢ew
(
¬gs
[j]);

1817  
sds
;

1818 
	}
}

1820 
	$issueCommªdR•—t
(
¬gc
, **
¬gv
, 
»³©
) {

1822 
cÚfig
.
şu¡”_»issue_commªd
 = 0;

1823 ià(
	`şiS’dCommªd
(
¬gc
,
¬gv
,
»³©
è!ğ
REDIS_OK
) {

1824 
	`şiCÚÃù
(
CC_FORCE
);

1828 ià(
	`şiS’dCommªd
(
¬gc
,
¬gv
,
»³©
è!ğ
REDIS_OK
) {

1829 
	`şiPrštCÚ‹xtE¼Ü
();

1830  
REDIS_ERR
;

1834 ià(
cÚfig
.
şu¡”_mode
 && cÚfig.
şu¡”_»issue_commªd
) {

1835 
	`şiCÚÃù
(
CC_FORCE
);

1840  
REDIS_OK
;

1841 
	}
}

1843 
	$issueCommªd
(
¬gc
, **
¬gv
) {

1844  
	`issueCommªdR•—t
(
¬gc
, 
¬gv
, 
cÚfig
.
»³©
);

1845 
	}
}

1853 
sds
 *
	$şiS¶™Args
(*
lše
, *
¬gc
) {

1854 ià(
cÚfig
.
ev®_ldb
 && (
	`¡r¡r
(
lše
,"eval ") ==†ine ||

1855 
	`¡r¡r
(
lše
,"e ") ==†ine))

1857 
sds
 *
¬gv
 = 
	`sds_m®loc
((sds)*2);

1858 *
¬gc
 = 2;

1859 
Ën
 = 
	`¡¾’
(
lše
);

1860 
–’
 = 
lše
[1] == ' ' ? 2 : 5;

1861 
¬gv
[0] = 
	`sd¢ewËn
(
lše
,
–’
-1);

1862 
¬gv
[1] = 
	`sd¢ewËn
(
lše
+
–’
,
Ën
-elen);

1863  
¬gv
;

1865  
	`sds¥l™¬gs
(
lše
,
¬gc
);

1867 
	}
}

1872 
	$şiS‘P»ã»nûs
(**
¬gv
, 
¬gc
, 
š‹¿ùive
) {

1873 ià(!
	`¡rÿ£cmp
(
¬gv
[0],":£t"è&& 
¬gc
 >= 2) {

1874 ià(!
	`¡rÿ£cmp
(
¬gv
[1],"hšts")è
´ef
.
hšts
 = 1;

1875 ià(!
	`¡rÿ£cmp
(
¬gv
[1],"nohšts")è
´ef
.
hšts
 = 0;

1877 
	`´štf
("%sunknown„edis-cli…reference '%s'\n",

1878 
š‹¿ùive
 ? "" : ".redisclirc: ",

1879 
¬gv
[1]);

1882 
	`´štf
("%sunknown„edis-cli internal command '%s'\n",

1883 
š‹¿ùive
 ? "" : ".redisclirc: ",

1884 
¬gv
[0]);

1886 
	}
}

1889 
	$şiLßdP»ã»nûs
() {

1890 
sds
 
rcfe
 = 
	`g‘DÙfeP©h
(
REDIS_CLI_RCFILE_ENV
,
REDIS_CLI_RCFILE_DEFAULT
);

1891 ià(
rcfe
 =ğ
NULL
) ;

1892 
FILE
 *
å
 = 
	`fİ’
(
rcfe
,"r");

1893 
buf
[1024];

1895 ià(
å
) {

1896 
	`fg‘s
(
buf
,(buf),
å
è!ğ
NULL
) {

1897 
sds
 *
¬gv
;

1898 
¬gc
;

1900 
¬gv
 = 
	`sds¥l™¬gs
(
buf
,&
¬gc
);

1901 ià(
¬gc
 > 0è
	`şiS‘P»ã»nûs
(
¬gv
,argc,0);

1902 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1904 
	`fşo£
(
å
);

1906 
	`sdsä“
(
rcfe
);

1907 
	}
}

1909 
	$»¶
() {

1910 
sds
 
hi¡Üyfe
 = 
NULL
;

1911 
hi¡Üy
 = 0;

1912 *
lše
;

1913 
¬gc
;

1914 
sds
 *
¬gv
;

1918 
	`şiIn™H–p
();

1919 
	`şiIÁeg¿‹H–p
();

1921 
cÚfig
.
š‹¿ùive
 = 1;

1922 
	`lš’oi£S‘MuÉiLše
(1);

1923 
	`lš’oi£S‘Com¶‘iÚC®lback
(
com¶‘iÚC®lback
);

1924 
	`lš’oi£S‘HštsC®lback
(
hštsC®lback
);

1925 
	`lš’oi£S‘F»eHštsC®lback
(
ä“HštsC®lback
);

1928 ià(
	`i§‰y
(
	`f’o
(
¡dš
))) {

1929 
hi¡Üyfe
 = 
	`g‘DÙfeP©h
(
REDIS_CLI_HISTFILE_ENV
,
REDIS_CLI_HISTFILE_DEFAULT
);

1931 
hi¡Üy
 = 1;

1932 ià(
hi¡Üyfe
 !ğ
NULL
) {

1933 
	`lš’oi£Hi¡ÜyLßd
(
hi¡Üyfe
);

1935 
	`şiLßdP»ã»nûs
();

1938 
	`şiReäeshProm±
();

1939 (
lše
 = 
	`lš’oi£
(
cÚ‹xt
 ? 
cÚfig
.
´om±
 : "nÙ cÚÃùed> ")è!ğ
NULL
) {

1940 ià(
lše
[0] != '\0') {

1941 
»³©
 = 1;

1942 
sk¬gs
 = 0;

1943 *
’d±r
 = 
NULL
;

1945 
¬gv
 = 
	`şiS¶™Args
(
lše
,&
¬gc
);

1949 ià(
¬gv
 && 
¬gc
 > 0) {

1950 
”ºo
 = 0;

1951 
»³©
 = 
	`¡¹Ş
(
¬gv
[0], &
’d±r
, 10);

1952 ià(
¬gc
 > 1 && *
’d±r
 == '\0') {

1953 ià(
”ºo
 =ğ
ERANGE
 ||ƒ¼nØ=ğ
EINVAL
 || 
»³©
 <= 0) {

1954 
	`åuts
("Inv®id„edis-ş˜»³© commªd o±iÚ v®ue.\n", 
¡dout
);

1955 
	`sdsä“¥l™»s
(
¬gv
, 
¬gc
);

1956 
	`lš’oi£F»e
(
lše
);

1959 
sk¬gs
 = 1;

1961 
»³©
 = 1;

1966 
dªg”ous
 = 0;

1967 ià(
¬gv
 && 
¬gc
 > 0) {

1968 ià(!
	`¡rÿ£cmp
(
¬gv
[
sk¬gs
], "auth")) {

1969 
dªg”ous
 = 1;

1970 } ià(
sk¬gs
+1 < 
¬gc
 &&

1971 !
	`¡rÿ£cmp
(
¬gv
[
sk¬gs
], "acl") &&

1972 !
	`¡rÿ£cmp
(
¬gv
[
sk¬gs
+1], "setuser"))

1974 
dªg”ous
 = 1;

1978 ià(!
dªg”ous
) {

1979 ià(
hi¡Üy
è
	`lš’oi£Hi¡ÜyAdd
(
lše
);

1980 ià(
hi¡Üyfe
è
	`lš’oi£Hi¡ÜySave
(historyfile);

1983 ià(
¬gv
 =ğ
NULL
) {

1984 
	`´štf
("Invalid‡rgument(s)\n");

1985 
	`lš’oi£F»e
(
lše
);

1987 } ià(
¬gc
 > 0) {

1988 ià(
	`¡rÿ£cmp
(
¬gv
[0],"quit") == 0 ||

1989 
	`¡rÿ£cmp
(
¬gv
[0],"exit") == 0)

1991 
	`ex™
(0);

1992 } ià(
¬gv
[0][0] == ':') {

1993 
	`şiS‘P»ã»nûs
(
¬gv
,
¬gc
,1);

1994 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

1995 
	`lš’oi£F»e
(
lše
);

1997 } ià(
	`¡rÿ£cmp
(
¬gv
[0],"restart") == 0) {

1998 ià(
cÚfig
.
ev®
) {

1999 
cÚfig
.
ev®_ldb
 = 1;

2000 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

2001 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2002 
	`lš’oi£F»e
(
lše
);

2005 
	`´štf
("Use 'restart' only in Lua debugging mode.");

2007 } ià(
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(
¬gv
[0],"connect")) {

2008 
	`sdsä“
(
cÚfig
.
ho¡
);

2009 
cÚfig
.
ho¡
 = 
	`sd¢ew
(
¬gv
[1]);

2010 
cÚfig
.
ho¡pÜt
 = 
	`©oi
(
¬gv
[2]);

2011 
	`şiReäeshProm±
();

2012 
	`şiCÚÃù
(
CC_FORCE
);

2013 } ià(
¬gc
 =ğ1 && !
	`¡rÿ£cmp
(
¬gv
[0],"clear")) {

2014 
	`lš’oi£CË¬Sü“n
();

2016 
¡¬t_time
 = 
	`m¡ime
(), 
–­£d
;

2018 
	`issueCommªdR•—t
(
¬gc
-
sk¬gs
, 
¬gv
+sk¬gs, 
»³©
);

2022 ià(
cÚfig
.
ev®_ldb_’d
) {

2023 
cÚfig
.
ev®_ldb_’d
 = 0;

2024 
	`şiR—dR•ly
(0);

2025 
	`´štf
("\n(Lua debugging sessionƒnded%s)\n\n",

2026 
cÚfig
.
ev®_ldb_sync
 ? "" :

2030 
–­£d
 = 
	`m¡ime
()-
¡¬t_time
;

2031 ià(
–­£d
 >= 500 &&

2032 
cÚfig
.
ouut
 =ğ
OUTPUT_STANDARD
)

2034 
	`´štf
("(%.2fs)\n",()
–­£d
/1000);

2039 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2042 
	`lš’oi£F»e
(
lše
);

2044 
	`ex™
(0);

2045 
	}
}

2047 
	$nÚš‹¿ùive
(
¬gc
, **
¬gv
) {

2048 
»tv®
 = 0;

2049 ià(
cÚfig
.
¡dš¬g
) {

2050 
¬gv
 = 
	`z»®loc
×rgv, (
¬gc
+1)*(*));

2051 
¬gv
[
¬gc
] = 
	`»adArgFromStdš
();

2052 
»tv®
 = 
	`issueCommªd
(
¬gc
+1, 
¬gv
);

2054 
»tv®
 = 
	`issueCommªd
(
¬gc
, 
¬gv
);

2056  
»tv®
;

2057 
	}
}

2063 
	$ev®Mode
(
¬gc
, **
¬gv
) {

2064 
sds
 
süt
 = 
NULL
;

2065 
FILE
 *
å
;

2066 
buf
[1024];

2067 
size_t
 
Ä—d
;

2068 **
¬gv2
;

2069 
j
, 
gÙ_comma
, 
keys
;

2070 
»tv®
 = 
REDIS_OK
;

2073 ià(
cÚfig
.
ev®_ldb
) {

2074 
	`´štf
(

2082 
	`sdsä“
(
süt
);

2083 
süt
 = 
	`sd£m±y
();

2084 
gÙ_comma
 = 0;

2085 
keys
 = 0;

2088 
å
 = 
	`fİ’
(
cÚfig
.
ev®
,"r");

2089 ià(!
å
) {

2090 
	`årštf
(
¡d”r
,

2091 "Cª'ˆİ’ f'%s': %s\n", 
cÚfig
.
ev®
, 
	`¡»¼Ü
(
”ºo
));

2092 
	`ex™
(1);

2094 (
Ä—d
 = 
	`ä—d
(
buf
,1,(buf),
å
)) != 0) {

2095 
süt
 = 
	`sdsÿ’
(süt,
buf
,
Ä—d
);

2097 
	`fşo£
(
å
);

2100 ià(
cÚfig
.
ev®_ldb
) {

2101 
»disR•ly
 *
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,

2102 
cÚfig
.
ev®_ldb_sync
 ?

2104 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

2108 
¬gv2
 = 
	`zm®loc
((
sds
)*(
¬gc
+3));

2109 
¬gv2
[0] = 
	`sd¢ew
("EVAL");

2110 
¬gv2
[1] = 
süt
;

2111 
j
 = 0; j < 
¬gc
; j++) {

2112 ià(!
gÙ_comma
 && 
¬gv
[
j
][0] == ',' &&‡rgv[j][1] == 0) {

2113 
gÙ_comma
 = 1;

2116 
¬gv2
[
j
+3-
gÙ_comma
] = 
	`sd¢ew
(
¬gv
[j]);

2117 ià(!
gÙ_comma
è
keys
++;

2119 
¬gv2
[2] = 
	`sdsÿrštf
(
	`sd£m±y
(),"%d",
keys
);

2122 
ev®_ldb
 = 
cÚfig
.eval_ldb;

2123 
»tv®
 = 
	`issueCommªd
(
¬gc
+3-
gÙ_comma
, 
¬gv2
);

2124 ià(
ev®_ldb
) {

2125 ià(!
cÚfig
.
ev®_ldb
) {

2129 
	`´štf
("Eval debugging session can't start:\n");

2130 
	`şiR—dR•ly
(0);

2133 
	`¡ºıy
(
cÚfig
.
´om±
,"lua debugger> ",(config.prompt));

2134 
	`»¶
();

2136 
	`şiCÚÃù
(
CC_FORCE
);

2137 
	`´štf
("\n");

2143  
»tv®
;

2144 
	}
}

2151 
	sşu¡”Mªag”
 {

2152 
li¡
 *
	mnodes
;

2153 
li¡
 *
	m”rÜs
;

2154 
	muÄ—chabË_ma¡”s
;

2155 } 
	gşu¡”_mªag”
;

2158 
diù
 *
	gşu¡”Mªag”Uncov”edSlÙs
 = 
NULL
;

2160 
	sşu¡”Mªag”Node
 {

2161 
»disCÚ‹xt
 *
	mcÚ‹xt
;

2162 
sds
 
	mÇme
;

2163 *
	m
;

2164 
	mpÜt
;

2165 
ušt64_t
 
	mcu¼’t_•och
;

2166 
time_t
 
	mpšg_£Á
;

2167 
time_t
 
	mpšg_»cv
;

2168 
	mæags
;

2169 
li¡
 *
	mæags_¡r
;

2170 
sds
 
	m»¶iÿ‹
;

2171 
	mdœty
;

2172 
ušt8_t
 
	m¦Ùs
[
CLUSTER_MANAGER_SLOTS
];

2173 
	m¦Ùs_couÁ
;

2174 
	m»¶iÿs_couÁ
;

2175 
li¡
 *
	mä›nds
;

2176 
sds
 *
	mmig¿tšg
;

2178 
sds
 *
	mimpÜtšg
;

2180 
	mmig¿tšg_couÁ
;

2181 
	mimpÜtšg_couÁ
;

2182 
	mweight
;

2183 
	mb®ªû
;

2184 } 
	tşu¡”Mªag”Node
;

2187 
	sşu¡”Mªag”NodeA¼ay
 {

2188 
şu¡”Mªag”Node
 **
	mnodes
;

2189 
şu¡”Mªag”Node
 **
	m®loc
;

2190 
	mËn
;

2191 
	mcouÁ
;

2192 } 
	tşu¡”Mªag”NodeA¼ay
;

2195 
	sşu¡”Mªag”Resh¬dTabËI‹m
 {

2196 
şu¡”Mªag”Node
 *
	msourû
;

2197 
	m¦Ù
;

2198 } 
	tşu¡”Mªag”Resh¬dTabËI‹m
;

2202 
	sşu¡”Mªag”Lšk
 {

2203 
sds
 
	mnode_Çme
;

2204 
sds
 
	mnode_addr
;

2205 
	mcÚÃùed
;

2206 
	mhªdshakšg
;

2207 } 
	tşu¡”Mªag”Lšk
;

2209 
diùTy³
 
	gşu¡”Mªag”DiùTy³
 = {

2210 
diùSdsHash
,

2211 
NULL
,

2212 
NULL
,

2213 
diùSdsKeyCom·»
,

2214 
NULL
,

2215 
diùSdsDe¡ruùÜ


2218 
diùTy³
 
	gşu¡”Mªag”LškDiùTy³
 = {

2219 
diùSdsHash
,

2220 
NULL
,

2221 
NULL
,

2222 
diùSdsKeyCom·»
,

2223 
diùSdsDe¡ruùÜ
,

2224 
diùLi¡De¡ruùÜ


2227 
	tşu¡”Mªag”CommªdProc
(
	t¬gc
, **
	t¬gv
);

2228 (*
	tşu¡”Mªag”OnR•lyE¼Ü
)(
	t»disR•ly
 *
	t»¶y
,

2229 
	tşu¡”Mªag”Node
 *
	tn
, 
	tbulk_idx
);

2233 
şu¡”Mªag”Node
 *
	`şu¡”Mªag”NewNode
(*

, 
pÜt
);

2234 
şu¡”Mªag”Node
 *
	`şu¡”Mªag”NodeByName
(cÚ¡ *
Çme
);

2235 
şu¡”Mªag”Node
 *
	`şu¡”Mªag”NodeByAbb»vŸ‹dName
(cÚ¡ *
n
);

2236 
	`şu¡”Mªag”NodeRe£tSlÙs
(
şu¡”Mªag”Node
 *
node
);

2237 
	`şu¡”Mªag”NodeIsClu¡”
(
şu¡”Mªag”Node
 *
node
, **
”r
);

2238 
	`şu¡”Mªag”PrštNÙClu¡”NodeE¼Ü
(
şu¡”Mªag”Node
 *
node
,

2239 *
”r
);

2240 
	`şu¡”Mªag”NodeLßdInfo
(
şu¡”Mªag”Node
 *
node
, 
İts
,

2241 **
”r
);

2242 
	`şu¡”Mªag”LßdInfoFromNode
(
şu¡”Mªag”Node
 *
node
, 
İts
);

2243 
	`şu¡”Mªag”NodeIsEm±y
(
şu¡”Mªag”Node
 *
node
, **
”r
);

2244 
	`şu¡”Mªag”G‘AÁiAffš™yScÜe
(
şu¡”Mªag”NodeA¼ay
 *
nodes
,

2245 
_couÁ
, 
şu¡”Mªag”Node
 ***
ofãndšg
, *
ofãndšg_Ën
);

2246 
	`şu¡”Mªag”O±imizeAÁiAffš™y
(
şu¡”Mªag”NodeA¼ay
 *
nodes
,

2247 
_couÁ
);

2248 
sds
 
	`şu¡”Mªag”NodeInfo
(
şu¡”Mªag”Node
 *
node
, 
šd’t
);

2249 
	`şu¡”Mªag”ShowNodes
();

2250 
	`şu¡”Mªag”ShowClu¡”Info
();

2251 
	`şu¡”Mªag”FlushNodeCÚfig
(
şu¡”Mªag”Node
 *
node
, **
”r
);

2252 
	`şu¡”Mªag”Wa™FÜClu¡”Još
();

2253 
	`şu¡”Mªag”CheckClu¡”
(
qu›t
);

2254 
	`şu¡”Mªag”Log
(
Ëv–
, cÚ¡ * 
fmt
, ...);

2255 
	`şu¡”Mªag”IsCÚfigCÚsi¡’t
();

2256 
diù
 *
	`şu¡”Mªag”G‘LškStus
();

2257 
	`şu¡”Mªag”OnE¼Ü
(
sds
 
”r
);

2258 
	`şu¡”Mªag”NodeA¼ayIn™
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

2259 
Ën
);

2260 
	`şu¡”Mªag”NodeA¼ayRe£t
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
);

2261 
	`şu¡”Mªag”NodeA¼ayShiá
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

2262 
şu¡”Mªag”Node
 **
nod•Œ
);

2263 
	`şu¡”Mªag”NodeA¼ayAdd
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

2264 
şu¡”Mªag”Node
 *
node
);

2268 
	`şu¡”Mªag”CommªdC»©e
(
¬gc
, **
¬gv
);

2269 
	`şu¡”Mªag”CommªdAddNode
(
¬gc
, **
¬gv
);

2270 
	`şu¡”Mªag”CommªdD–‘eNode
(
¬gc
, **
¬gv
);

2271 
	`şu¡”Mªag”CommªdInfo
(
¬gc
, **
¬gv
);

2272 
	`şu¡”Mªag”CommªdCheck
(
¬gc
, **
¬gv
);

2273 
	`şu¡”Mªag”CommªdFix
(
¬gc
, **
¬gv
);

2274 
	`şu¡”Mªag”CommªdResh¬d
(
¬gc
, **
¬gv
);

2275 
	`şu¡”Mªag”CommªdReb®ªû
(
¬gc
, **
¬gv
);

2276 
	`şu¡”Mªag”CommªdS‘Timeout
(
¬gc
, **
¬gv
);

2277 
	`şu¡”Mªag”CommªdImpÜt
(
¬gc
, **
¬gv
);

2278 
	`şu¡”Mªag”CommªdC®l
(
¬gc
, **
¬gv
);

2279 
	`şu¡”Mªag”CommªdH–p
(
¬gc
, **
¬gv
);

2280 
	`şu¡”Mªag”CommªdBackup
(
¬gc
, **
¬gv
);

2282 
	sşu¡”Mªag”CommªdDef
 {

2283 *
Çme
;

2284 
şu¡”Mªag”CommªdProc
 *
´oc
;

2285 
¬™y
;

2286 *
¬gs
;

2287 *
İtiÚs
;

2288 } 
	tşu¡”Mªag”CommªdDef
;

2290 
şu¡”Mªag”CommªdDef
 
şu¡”Mªag”Commªds
[] = {

2291 {"ü—‹", 
şu¡”Mªag”CommªdC»©e
, -2, "host1:port1 ... hostN:portN",

2293 {"check", 
şu¡”Mªag”CommªdCheck
, -1, "host:port",

2295 {"šfo", 
şu¡”Mªag”CommªdInfo
, -1, "ho¡:pÜt", 
NULL
},

2296 {"fix", 
şu¡”Mªag”CommªdFix
, -1, "host:port",

2298 {"»sh¬d", 
şu¡”Mªag”CommªdResh¬d
, -1, "host:port",

2301 {"»b®ªû", 
şu¡”Mªag”CommªdReb®ªû
, -1, "host:port",

2304 {"add-node", 
şu¡”Mªag”CommªdAddNode
, 2,

2306 {"d–-node", 
şu¡”Mªag”CommªdD–‘eNode
, 2, "ho¡:pÜˆnode_id",
NULL
},

2307 {"ÿÎ", 
şu¡”Mªag”CommªdC®l
, -2,

2308 "ho¡:pÜˆcommªd‡rg‡rg ..‡rg", 
NULL
},

2309 {"£t-timeout", 
şu¡”Mªag”CommªdS‘Timeout
, 2,

2310 "ho¡:pÜˆmli£cÚds", 
NULL
},

2311 {"impÜt", 
şu¡”Mªag”CommªdImpÜt
, 1, "host:port",

2313 {"backup", 
şu¡”Mªag”CommªdBackup
, 2, "host:port backup_directory",

2314 
NULL
},

2315 {"h–p", 
şu¡”Mªag”CommªdH–p
, 0, 
NULL
, NULL}

2316 
	}
};

2318 
g‘RDB
(
şu¡”Mªag”Node
 *
node
);

2320 
	$ü—‹Clu¡”Mªag”Commªd
(*
cmdÇme
, 
¬gc
, **
¬gv
) {

2321 
şu¡”Mªag”Commªd
 *
cmd
 = &
cÚfig
.
şu¡”_mªag”_commªd
;

2322 
cmd
->
Çme
 = 
cmdÇme
;

2323 
cmd
->
¬gc
 =‡rgc;

2324 
cmd
->
¬gv
 = 
¬gc
 ?‡rgv : 
NULL
;

2325 ià(
	`isCŞÜT”m
()è
cmd
->
æags
 |ğ
CLUSTER_MANAGER_CMD_FLAG_COLOR
;

2326 
	}
}

2329 
şu¡”Mªag”CommªdProc
 *
	$v®id©eClu¡”Mªag”Commªd
() {

2330 
i
, 
commªds_couÁ
 = (
şu¡”Mªag”Commªds
) /

2331 (
şu¡”Mªag”CommªdDef
);

2332 
şu¡”Mªag”CommªdProc
 *
´oc
 = 
NULL
;

2333 *
cmdÇme
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
Çme
;

2334 
¬gc
 = 
cÚfig
.
şu¡”_mªag”_commªd
.argc;

2335 
i
 = 0; i < 
commªds_couÁ
; i++) {

2336 
şu¡”Mªag”CommªdDef
 
cmddef
 = 
şu¡”Mªag”Commªds
[
i
];

2337 ià(!
	`¡rcmp
(
cmddef
.
Çme
, 
cmdÇme
)) {

2338 ià((
cmddef
.
¬™y
 > 0 && 
¬gc
 != cmddef.arity) ||

2339 (
cmddef
.
¬™y
 < 0 && 
¬gc
 < (cmddef.arity * -1))) {

2340 
	`årštf
(
¡d”r
, "[ERR] Wrong‚umber of‡rguments for "

2342  
NULL
;

2344 
´oc
 = 
cmddef
.proc;

2347 ià(!
´oc
è
	`årštf
(
¡d”r
, "Unknown --cluster subcommand\n");

2348  
´oc
;

2349 
	}
}

2351 
	$·r£Clu¡”NodeAdd»ss
(*
addr
, **
_±r
, *
pÜt_±r
,

2352 *
bus_pÜt_±r
)

2354 *
c
 = 
	`¡¼chr
(
addr
, '@');

2355 ià(
c
 !ğ
NULL
) {

2356 *
c
 = '\0';

2357 ià(
bus_pÜt_±r
 !ğ
NULL
)

2358 *
bus_pÜt_±r
 = 
	`©oi
(
c
 + 1);

2360 
c
 = 
	`¡¼chr
(
addr
, ':');

2361 ià(
c
 !ğ
NULL
) {

2362 *
c
 = '\0';

2363 *
_±r
 = 
addr
;

2364 *
pÜt_±r
 = 
	`©oi
(++
c
);

2367 
	}
}

2375 
	$g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, **
¬gv
,

2376 **
_±r
, *
pÜt_±r
) {

2377 
pÜt
 = 0;

2378 *

 = 
NULL
;

2379 ià(
¬gc
 == 1) {

2380 *
addr
 = 
¬gv
[0];

2381 ià(!
	`·r£Clu¡”NodeAdd»ss
(
addr
, &

, &
pÜt
, 
NULL
))  0;

2383 

 = 
¬gv
[0];

2384 
pÜt
 = 
	`©oi
(
¬gv
[1]);

2386 ià(!

 || !
pÜt
)  0;

2388 *
_±r
 = 

;

2389 *
pÜt_±r
 = 
pÜt
;

2392 
	}
}

2394 
	$ä“Clu¡”Mªag”NodeFÏgs
(
li¡
 *
æags
) {

2395 
li¡I‹r
 
li
;

2396 
li¡Node
 *
Ê
;

2397 
	`li¡Rewšd
(
æags
, &
li
);

2398 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2399 
sds
 
æag
 = 
Ê
->
v®ue
;

2400 
	`sdsä“
(
æag
);

2402 
	`li¡R–—£
(
æags
);

2403 
	}
}

2405 
	$ä“Clu¡”Mªag”Node
(
şu¡”Mªag”Node
 *
node
) {

2406 ià(
node
->
cÚ‹xt
 !ğ
NULL
è
	`»disF»e
(node->context);

2407 ià(
node
->
ä›nds
 !ğ
NULL
) {

2408 
li¡I‹r
 
li
;

2409 
li¡Node
 *
Ê
;

2410 
	`li¡Rewšd
(
node
->
ä›nds
,&
li
);

2411 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2412 
şu¡”Mªag”Node
 *
â
 = 
Ê
->
v®ue
;

2413 
	`ä“Clu¡”Mªag”Node
(
â
);

2415 
	`li¡R–—£
(
node
->
ä›nds
);

2416 
node
->
ä›nds
 = 
NULL
;

2418 ià(
node
->
Çme
 !ğ
NULL
è
	`sdsä“
(node->name);

2419 ià(
node
->
»¶iÿ‹
 !ğ
NULL
è
	`sdsä“
(node->replicate);

2420 ià((
node
->
æags
 & 
CLUSTER_MANAGER_FLAG_FRIEND
è&&‚ode->

)

2421 
	`sdsä“
(
node
->

);

2422 
i
;

2423 ià(
node
->
mig¿tšg
 !ğ
NULL
) {

2424 
i
 = 0; i < 
node
->
mig¿tšg_couÁ
; i++è
	`sdsä“
Òode->
mig¿tšg
[i]);

2425 
	`zä“
(
node
->
mig¿tšg
);

2427 ià(
node
->
impÜtšg
 !ğ
NULL
) {

2428 
i
 = 0; i < 
node
->
impÜtšg_couÁ
; i++è
	`sdsä“
Òode->
impÜtšg
[i]);

2429 
	`zä“
(
node
->
impÜtšg
);

2431 ià(
node
->
æags_¡r
 !ğ
NULL
) {

2432 
	`ä“Clu¡”Mªag”NodeFÏgs
(
node
->
æags_¡r
);

2433 
node
->
æags_¡r
 = 
NULL
;

2435 
	`zä“
(
node
);

2436 
	}
}

2438 
	$ä“Clu¡”Mªag”
() {

2439 
li¡I‹r
 
li
;

2440 
li¡Node
 *
Ê
;

2441 ià(
şu¡”_mªag”
.
nodes
 !ğ
NULL
) {

2442 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
,&
li
);

2443 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2444 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

2445 
	`ä“Clu¡”Mªag”Node
(
n
);

2447 
	`li¡R–—£
(
şu¡”_mªag”
.
nodes
);

2448 
şu¡”_mªag”
.
nodes
 = 
NULL
;

2450 ià(
şu¡”_mªag”
.
”rÜs
 !ğ
NULL
) {

2451 
	`li¡Rewšd
(
şu¡”_mªag”
.
”rÜs
,&
li
);

2452 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2453 
sds
 
”r
 = 
Ê
->
v®ue
;

2454 
	`sdsä“
(
”r
);

2456 
	`li¡R–—£
(
şu¡”_mªag”
.
”rÜs
);

2457 
şu¡”_mªag”
.
”rÜs
 = 
NULL
;

2459 ià(
şu¡”Mªag”Uncov”edSlÙs
 !ğ
NULL
)

2460 
	`diùR–—£
(
şu¡”Mªag”Uncov”edSlÙs
);

2461 
	}
}

2463 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”NewNode
(*

, 
pÜt
) {

2464 
şu¡”Mªag”Node
 *
node
 = 
	`zm®loc
((*node));

2465 
node
->
cÚ‹xt
 = 
NULL
;

2466 
node
->
Çme
 = 
NULL
;

2467 
node
->

 = ip;

2468 
node
->
pÜt
 =…ort;

2469 
node
->
cu¼’t_•och
 = 0;

2470 
node
->
pšg_£Á
 = 0;

2471 
node
->
pšg_»cv
 = 0;

2472 
node
->
æags
 = 0;

2473 
node
->
æags_¡r
 = 
NULL
;

2474 
node
->
»¶iÿ‹
 = 
NULL
;

2475 
node
->
dœty
 = 0;

2476 
node
->
ä›nds
 = 
NULL
;

2477 
node
->
mig¿tšg
 = 
NULL
;

2478 
node
->
impÜtšg
 = 
NULL
;

2479 
node
->
mig¿tšg_couÁ
 = 0;

2480 
node
->
impÜtšg_couÁ
 = 0;

2481 
node
->
»¶iÿs_couÁ
 = 0;

2482 
node
->
weight
 = 1.0f;

2483 
node
->
b®ªû
 = 0;

2484 
	`şu¡”Mªag”NodeRe£tSlÙs
(
node
);

2485  
node
;

2486 
	}
}

2488 
sds
 
	$şu¡”Mªag”G‘NodeRDBF’ame
(
şu¡”Mªag”Node
 *
node
) {

2489 
	`as£¹
(
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
);

2490 
sds
 
f’ame
 = 
	`sd¢ew
(
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
);

2491 ià(
f’ame
[
	`sd¦’
(filename) - 1] != '/')

2492 
f’ame
 = 
	`sdsÿt
(filename, "/");

2493 
f’ame
 = 
	`sdsÿrštf
(f’ame, "»dis-node-%s-%d-%s.rdb", 
node
->

,

2494 
node
->
pÜt
,‚ode->
Çme
);

2495  
f’ame
;

2496 
	}
}

2502 
	$şu¡”Mªag”CheckRedisR•ly
(
şu¡”Mªag”Node
 *
n
,

2503 
»disR•ly
 *
r
, **
”r
)

2505 
is_”r
 = 0;

2506 ià(!
r
 || (
is_”r
 = (r->
ty³
 =ğ
REDIS_REPLY_ERROR
))) {

2507 ià(
is_”r
) {

2508 ià(
”r
 !ğ
NULL
) {

2509 *
”r
 = 
	`zm®loc
((
r
->
Ën
 + 1) * ());

2510 
	`¡rıy
(*
”r
, 
r
->
¡r
);

2511 } 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n
, 
r
->
¡r
);

2516 
	}
}

2519 
	$şu¡”Mªag”S¹T¿n§ùiÚ
(
şu¡”Mªag”Node
 *
node
) {

2520 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "MULTI");

2521 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

2522 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

2523  
sucûss
;

2524 
	}
}

2527 
	$şu¡”Mªag”ExecT¿n§ùiÚ
(
şu¡”Mªag”Node
 *
node
,

2528 
şu¡”Mªag”OnR•lyE¼Ü
 
Ú”rÜ
)

2530 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "EXEC");

2531 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

2532 ià(
sucûss
) {

2533 ià(
»¶y
->
ty³
 !ğ
REDIS_REPLY_ARRAY
) {

2534 
sucûss
 = 0;

2535 
ş—nup
;

2537 
size_t
 
i
;

2538 
i
 = 0; i < 
»¶y
->
–em’ts
; i++) {

2539 
»disR•ly
 *
r
 = 
»¶y
->
–em’t
[
i
];

2540 *
”r
 = 
NULL
;

2541 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
r
, &
”r
);

2542 ià(!
sucûss
 && 
Ú”rÜ
èsucûs ğ
	`Ú”rÜ
(
r
, 
node
, 
i
);

2543 ià(
”r
) {

2544 ià(!
sucûss
)

2545 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

2546 
	`zä“
(
”r
);

2548 ià(!
sucûss
) ;

2551 
ş—nup
:

2552 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

2553  
sucûss
;

2554 
	}
}

2556 
	$şu¡”Mªag”NodeCÚÃù
(
şu¡”Mªag”Node
 *
node
) {

2557 ià(
node
->
cÚ‹xt
è
	`»disF»e
(node->context);

2558 
node
->
cÚ‹xt
 = 
	`»disCÚÃù
Òode->

,‚ode->
pÜt
);

2559 ià(!
node
->
cÚ‹xt
->
”r
 && 
cÚfig
.
s
) {

2560 cÚ¡ *
”r
 = 
NULL
;

2561 ià(
	`şiSecu»CÚÃùiÚ
(
node
->
cÚ‹xt
, &
”r
è=ğ
REDIS_ERR
 &&ƒrr) {

2562 
	`årštf
(
¡d”r
,"TLS E¼Ü: %s\n", 
”r
);

2563 
	`»disF»e
(
node
->
cÚ‹xt
);

2564 
node
->
cÚ‹xt
 = 
NULL
;

2568 ià(
node
->
cÚ‹xt
->
”r
) {

2569 
	`årštf
(
¡d”r
,"Could‚ot connecto Redis‡t ");

2570 
	`årštf
(
¡d”r
,"%s:%d: %s\n", 
node
->

,‚ode->
pÜt
,

2571 
node
->
cÚ‹xt
->
”r¡r
);

2572 
	`»disF»e
(
node
->
cÚ‹xt
);

2573 
node
->
cÚ‹xt
 = 
NULL
;

2580 
	`ª‘K“pAlive
(
NULL
, 
node
->
cÚ‹xt
->
fd
, 
REDIS_CLI_KEEPALIVE_INTERVAL
);

2581 ià(
cÚfig
.
auth
) {

2582 
»disR•ly
 *
»¶y
;

2583 ià(
cÚfig
.
u£r
 =ğ
NULL
)

2584 
»¶y
 = 
	`»disCommªd
(
node
->
cÚ‹xt
,"AUTH %s", 
cÚfig
.
auth
);

2586 
»¶y
 = 
	`»disCommªd
(
node
->
cÚ‹xt
,"AUTH %s %s",

2587 
cÚfig
.
u£r
,cÚfig.
auth
);

2588 
ok
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

2589 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

2590 ià(!
ok
)  0;

2593 
	}
}

2595 
	$şu¡”Mªag”RemoveNodeFromLi¡
(
li¡
 *
nod–i¡
,

2596 
şu¡”Mªag”Node
 *
node
) {

2597 
li¡I‹r
 
li
;

2598 
li¡Node
 *
Ê
;

2599 
	`li¡Rewšd
(
nod–i¡
, &
li
);

2600 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2601 ià(
node
 =ğ
Ê
->
v®ue
) {

2602 
	`li¡D–Node
(
nod–i¡
, 
Ê
);

2606 
	}
}

2609 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”NodeByName
(cÚ¡ *
Çme
) {

2610 ià(
şu¡”_mªag”
.
nodes
 =ğ
NULL
)  NULL;

2611 
şu¡”Mªag”Node
 *
found
 = 
NULL
;

2612 
sds
 
lúame
 = 
	`sd£m±y
();

2613 
lúame
 = 
	`sdsıy
Öúame, 
Çme
);

2614 
	`sd¡Şow”
(
lúame
);

2615 
li¡I‹r
 
li
;

2616 
li¡Node
 *
Ê
;

2617 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

2618 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2619 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

2620 ià(
n
->
Çme
 && !
	`sdscmp
Ò->Çme, 
lúame
)) {

2621 
found
 = 
n
;

2625 
	`sdsä“
(
lúame
);

2626  
found
;

2627 
	}
}

2633 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”NodeByAbb»vŸ‹dName
(cÚ¡ *
Çme
)

2635 ià(
şu¡”_mªag”
.
nodes
 =ğ
NULL
)  NULL;

2636 
şu¡”Mªag”Node
 *
found
 = 
NULL
;

2637 
sds
 
lúame
 = 
	`sd£m±y
();

2638 
lúame
 = 
	`sdsıy
Öúame, 
Çme
);

2639 
	`sd¡Şow”
(
lúame
);

2640 
li¡I‹r
 
li
;

2641 
li¡Node
 *
Ê
;

2642 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

2643 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2644 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

2645 ià(
n
->
Çme
 &&

2646 
	`¡r¡r
(
n
->
Çme
, 
lúame
) ==‚->name) {

2647 
found
 = 
n
;

2651 
	`sdsä“
(
lúame
);

2652  
found
;

2653 
	}
}

2655 
	$şu¡”Mªag”NodeRe£tSlÙs
(
şu¡”Mªag”Node
 *
node
) {

2656 
	`mem£t
(
node
->
¦Ùs
, 0, (node->slots));

2657 
node
->
¦Ùs_couÁ
 = 0;

2658 
	}
}

2661 
»disR•ly
 *
	$şu¡”Mªag”G‘NodeRedisInfo
(
şu¡”Mªag”Node
 *
node
,

2662 **
”r
)

2664 
»disR•ly
 *
šfo
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "INFO");

2665 ià(
”r
 !ğ
NULL
) *err = NULL;

2666 ià(
šfo
 =ğ
NULL
)  NULL;

2667 ià(
šfo
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

2668 ià(
”r
 !ğ
NULL
) {

2669 *
”r
 = 
	`zm®loc
((
šfo
->
Ën
 + 1) * ());

2670 
	`¡rıy
(*
”r
, 
šfo
->
¡r
);

2672 
	`ä“R•lyObjeù
(
šfo
);

2673  
NULL
;

2675  
šfo
;

2676 
	}
}

2678 
	$şu¡”Mªag”NodeIsClu¡”
(
şu¡”Mªag”Node
 *
node
, **
”r
) {

2679 
»disR•ly
 *
šfo
 = 
	`şu¡”Mªag”G‘NodeRedisInfo
(
node
, 
”r
);

2680 ià(
šfo
 =ğ
NULL
)  0;

2681 
is_şu¡”
 = (è
	`g‘LÚgInfoF›ld
(
šfo
->
¡r
, "cluster_enabled");

2682 
	`ä“R•lyObjeù
(
šfo
);

2683  
is_şu¡”
;

2684 
	}
}

2688 
	$şu¡”Mªag”NodeIsEm±y
(
şu¡”Mªag”Node
 *
node
, **
”r
) {

2689 
»disR•ly
 *
šfo
 = 
	`şu¡”Mªag”G‘NodeRedisInfo
(
node
, 
”r
);

2690 
is_em±y
 = 1;

2691 ià(
šfo
 =ğ
NULL
)  0;

2692 ià(
	`¡r¡r
(
šfo
->
¡r
, "db0:"è!ğ
NULL
) {

2693 
is_em±y
 = 0;

2694 
»suÉ
;

2696 
	`ä“R•lyObjeù
(
šfo
);

2697 
šfo
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER INFO");

2698 ià(
”r
 !ğ
NULL
) *err = NULL;

2699 ià(!
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
šfo
, 
”r
)) {

2700 
is_em±y
 = 0;

2701 
»suÉ
;

2703 
known_nodes
 = 
	`g‘LÚgInfoF›ld
(
šfo
->
¡r
, "cluster_known_nodes");

2704 
is_em±y
 = (
known_nodes
 == 1);

2705 
»suÉ
:

2706 
	`ä“R•lyObjeù
(
šfo
);

2707  
is_em±y
;

2708 
	}
}

2739 
	$şu¡”Mªag”G‘AÁiAffš™yScÜe
(
şu¡”Mªag”NodeA¼ay
 *
nodes
,

2740 
_couÁ
, 
şu¡”Mªag”Node
 ***
ofãndšg
, *
ofãndšg_Ën
)

2742 
scÜe
 = 0, 
i
, 
j
;

2743 
node_Ën
 = 
şu¡”_mªag”
.
nodes
->
Ën
;

2744 
şu¡”Mªag”Node
 **
ofãndšg_p
 = 
NULL
;

2745 ià(
ofãndšg
 !ğ
NULL
) {

2746 *
ofãndšg
 = 
	`zÿÎoc
(
node_Ën
 * (
şu¡”Mªag”Node
*));

2747 
ofãndšg_p
 = *
ofãndšg
;

2752 
i
 = 0; i < 
_couÁ
; i++) {

2753 
şu¡”Mªag”NodeA¼ay
 *
node_¬¿y
 = &(
nodes
[
i
]);

2754 
diù
 *
»Ï‹d
 = 
	`diùC»©e
(&
şu¡”Mªag”DiùTy³
, 
NULL
);

2755 *

 = 
NULL
;

2756 
j
 = 0; j < 
node_¬¿y
->
Ën
; j++) {

2757 
şu¡”Mªag”Node
 *
node
 = 
node_¬¿y
->
nodes
[
j
];

2758 ià(
node
 =ğ
NULL
) ;

2759 ià(!

è = 
node
->ip;

2760 
sds
 
ty³s
;

2762 
sds
 
key
 = (!
node
->
»¶iÿ‹
 ?‚ode->
Çme
 :‚ode->replicate);

2763 
	`as£¹
(
key
 !ğ
NULL
);

2764 
diùEÁry
 *
’Œy
 = 
	`diùFšd
(
»Ï‹d
, 
key
);

2765 ià(
’Œy
è
ty³s
 = 
	`sdsdup
((
sds
è
	`diùG‘V®
(entry));

2766 
ty³s
 = 
	`sd£m±y
();

2769 ià(!
node
->
»¶iÿ‹
è
ty³s
 = 
	`sdsÿrštf
(types, "m%s",ypes);

2770 
ty³s
 = 
	`sdsÿt
(types, "s");

2771 
	`diùR•Ïû
(
»Ï‹d
, 
key
, 
ty³s
);

2775 
diùI‹¿tÜ
 *
™”
 = 
	`diùG‘I‹¿tÜ
(
»Ï‹d
);

2776 
diùEÁry
 *
’Œy
;

2777 (
’Œy
 = 
	`diùNext
(
™”
)è!ğ
NULL
) {

2778 
sds
 
ty³s
 = (sdsè
	`diùG‘V®
(
’Œy
);

2779 
sds
 
Çme
 = (sdsè
	`diùG‘Key
(
’Œy
);

2780 
ty³¦’
 = 
	`sd¦’
(
ty³s
);

2781 ià(
ty³¦’
 < 2) ;

2782 ià(
ty³s
[0] =ğ'm'è
scÜe
 +ğ(10000 * (
ty³¦’
 - 1));

2783 
scÜe
 +ğ(1 * 
ty³¦’
);

2784 ià(
ofãndšg
 =ğ
NULL
) ;

2786 
li¡I‹r
 
li
;

2787 
li¡Node
 *
Ê
;

2788 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

2789 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2790 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

2791 ià(
n
->
»¶iÿ‹
 =ğ
NULL
) ;

2792 ià(!
	`¡rcmp
(
n
->
»¶iÿ‹
, 
Çme
è&& !¡rcmpÒ->

, ip)) {

2793 *(
ofãndšg_p
++èğ
n
;

2794 ià(
ofãndšg_Ën
 !ğ
NULL
) (*offending_len)++;

2800 
	`diùR–—£I‹¿tÜ
(
™”
);

2801 
	`diùR–—£
(
»Ï‹d
);

2803  
scÜe
;

2804 
	}
}

2806 
	$şu¡”Mªag”O±imizeAÁiAffš™y
(
şu¡”Mªag”NodeA¼ay
 *
nodes
,

2807 
_couÁ
)

2809 
şu¡”Mªag”Node
 **
ofãnd”s
 = 
NULL
;

2810 
scÜe
 = 
	`şu¡”Mªag”G‘AÁiAffš™yScÜe
(
nodes
, 
_couÁ
,

2811 
NULL
, NULL);

2812 ià(
scÜe
 =ğ0è
ş—nup
;

2813 
	`şu¡”Mªag”LogInfo
(">>> Tryingo optimize slaves‡llocation "

2815 
node_Ën
 = 
şu¡”_mªag”
.
nodes
->
Ën
;

2816 
max™”
 = 500 * 
node_Ën
;

2817 
	`¤ªd
(
	`time
(
NULL
));

2818 
max™”
 > 0) {

2819 
ofãndšg_Ën
 = 0;

2820 ià(
ofãnd”s
 !ğ
NULL
) {

2821 
	`zä“
(
ofãnd”s
);

2822 
ofãnd”s
 = 
NULL
;

2824 
scÜe
 = 
	`şu¡”Mªag”G‘AÁiAffš™yScÜe
(
nodes
,

2825 
_couÁ
,

2826 &
ofãnd”s
,

2827 &
ofãndšg_Ën
);

2828 ià(
scÜe
 == 0) ;

2832 
¿nd_idx
 = 
	`¿nd
(è% 
ofãndšg_Ën
;

2833 
şu¡”Mªag”Node
 *
fœ¡
 = 
ofãnd”s
[
¿nd_idx
],

2834 *
£cÚd
 = 
NULL
;

2835 
şu¡”Mªag”Node
 **
Ùh”_»¶iÿs
 = 
	`zÿÎoc
((
node_Ën
 - 1) *

2836 (*
Ùh”_»¶iÿs
));

2837 
Ùh”_»¶iÿs_couÁ
 = 0;

2838 
li¡I‹r
 
li
;

2839 
li¡Node
 *
Ê
;

2840 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

2841 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2842 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

2843 ià(
n
 !ğ
fœ¡
 &&‚->
»¶iÿ‹
 !ğ
NULL
)

2844 
Ùh”_»¶iÿs
[
Ùh”_»¶iÿs_couÁ
++] = 
n
;

2846 ià(
Ùh”_»¶iÿs_couÁ
 == 0) {

2847 
	`zä“
(
Ùh”_»¶iÿs
);

2850 
¿nd_idx
 = 
	`¿nd
(è% 
Ùh”_»¶iÿs_couÁ
;

2851 
£cÚd
 = 
Ùh”_»¶iÿs
[
¿nd_idx
];

2852 *
fœ¡_ma¡”
 = 
fœ¡
->
»¶iÿ‹
,

2853 *
£cÚd_ma¡”
 = 
£cÚd
->
»¶iÿ‹
;

2854 
fœ¡
->
»¶iÿ‹
 = 
£cÚd_ma¡”
, fœ¡->
dœty
 = 1;

2855 
£cÚd
->
»¶iÿ‹
 = 
fœ¡_ma¡”
, secÚd->
dœty
 = 1;

2856 
Ãw_scÜe
 = 
	`şu¡”Mªag”G‘AÁiAffš™yScÜe
(
nodes
,

2857 
_couÁ
,

2858 
NULL
, NULL);

2862 ià(
Ãw_scÜe
 > 
scÜe
) {

2863 
fœ¡
->
»¶iÿ‹
 = 
fœ¡_ma¡”
;

2864 
£cÚd
->
»¶iÿ‹
 = 
£cÚd_ma¡”
;

2866 
	`zä“
(
Ùh”_»¶iÿs
);

2867 
max™”
--;

2869 
scÜe
 = 
	`şu¡”Mªag”G‘AÁiAffš™yScÜe
(
nodes
, 
_couÁ
, 
NULL
, NULL);

2870 *
msg
;

2871 
³rãù
 = (
scÜe
 == 0);

2872 
log_Ëv–
 = (
³rãù
 ? 
CLUSTER_MANAGER_LOG_LVL_SUCCESS
 :

2873 
CLUSTER_MANAGER_LOG_LVL_WARN
);

2874 ià(
³rãù
è
msg
 = "[OK] Perfect‡nti-affinity obtained!";

2875 ià(
scÜe
 >= 10000)

2876 
msg
 = ("[WARNING] Some slaves‡re inhe same host‡sheir master");

2878 
msg
=("[WARNING] Some slaves ofhe same master‡re inhe same host");

2879 
	`şu¡”Mªag”Log
(
log_Ëv–
, "%s\n", 
msg
);

2880 
ş—nup
:

2881 
	`zä“
(
ofãnd”s
);

2882 
	}
}

2885 
sds
 
	$şu¡”Mªag”NodeFÏgSŒšg
(
şu¡”Mªag”Node
 *
node
) {

2886 
sds
 
æags
 = 
	`sd£m±y
();

2887 ià(!
node
->
æags_¡r
è 
æags
;

2888 
em±y
 = 1;

2889 
li¡I‹r
 
li
;

2890 
li¡Node
 *
Ê
;

2891 
	`li¡Rewšd
(
node
->
æags_¡r
, &
li
);

2892 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

2893 
sds
 
æag
 = 
Ê
->
v®ue
;

2894 ià(
	`¡rcmp
(
æag
, "myself") == 0) ;

2895 ià(!
em±y
è
æags
 = 
	`sdsÿt
(flags, ",");

2896 
æags
 = 
	`sdsÿtfmt
(æags, "%S", 
æag
);

2897 
em±y
 = 0;

2899  
æags
;

2900 
	}
}

2903 
sds
 
	$şu¡”Mªag”NodeSlÙsSŒšg
(
şu¡”Mªag”Node
 *
node
) {

2904 
sds
 
¦Ùs
 = 
	`sd£m±y
();

2905 
fœ¡_¿nge_idx
 = -1, 
Ï¡_¦Ù_idx
 = -1, 
i
;

2906 
i
 = 0; i < 
CLUSTER_MANAGER_SLOTS
; i++) {

2907 
has_¦Ù
 = 
node
->
¦Ùs
[
i
];

2908 ià(
has_¦Ù
) {

2909 ià(
fœ¡_¿nge_idx
 == -1) {

2910 ià(
	`sd¦’
(
¦Ùs
)è¦Ù ğ
	`sdsÿt
(slots, ",");

2911 
fœ¡_¿nge_idx
 = 
i
;

2912 
¦Ùs
 = 
	`sdsÿtfmt
(¦Ùs, "[%u", 
i
);

2914 
Ï¡_¦Ù_idx
 = 
i
;

2916 ià(
Ï¡_¦Ù_idx
 >= 0) {

2917 ià(
fœ¡_¿nge_idx
 =ğ
Ï¡_¦Ù_idx
)

2918 
¦Ùs
 = 
	`sdsÿt
(slots, "]");

2919 
¦Ùs
 = 
	`sdsÿtfmt
(¦Ùs, "-%u]", 
Ï¡_¦Ù_idx
);

2921 
Ï¡_¦Ù_idx
 = -1;

2922 
fœ¡_¿nge_idx
 = -1;

2925 ià(
Ï¡_¦Ù_idx
 >= 0) {

2926 ià(
fœ¡_¿nge_idx
 =ğ
Ï¡_¦Ù_idx
è
¦Ùs
 = 
	`sdsÿt
(slots, "]");

2927 
¦Ùs
 = 
	`sdsÿtfmt
(¦Ùs, "-%u]", 
Ï¡_¦Ù_idx
);

2929  
¦Ùs
;

2930 
	}
}

2932 
sds
 
	$şu¡”Mªag”NodeG‘JSON
(
şu¡”Mªag”Node
 *
node
,

2933 
”rÜ_couÁ
)

2935 
sds
 
jsÚ
 = 
	`sd£m±y
();

2936 
sds
 
»¶iÿ‹
 = 
	`sd£m±y
();

2937 ià(
node
->
»¶iÿ‹
)

2938 
»¶iÿ‹
 = 
	`sdsÿrštf
Ô•liÿ‹, "\"%s\"", 
node
->replicate);

2940 
»¶iÿ‹
 = 
	`sdsÿt
(replicate, "null");

2941 
sds
 
¦Ùs
 = 
	`şu¡”Mªag”NodeSlÙsSŒšg
(
node
);

2942 
sds
 
æags
 = 
	`şu¡”Mªag”NodeFÏgSŒšg
(
node
);

2943 *
p
 = 
¦Ùs
;

2944 (
p
 = 
	`¡rchr
Õ, '-')è!ğ
NULL
)

2945 *(
p
++) = ',';

2946 
jsÚ
 = 
	`sdsÿrštf
(json,

2956 
node
->
Çme
,

2957 
node
->

,

2958 
node
->
pÜt
,

2959 
»¶iÿ‹
,

2960 
¦Ùs
,

2961 
node
->
¦Ùs_couÁ
,

2962 
æags
,

2963 ()
node
->
cu¼’t_•och


2965 ià(
”rÜ_couÁ
 > 0) {

2966 
jsÚ
 = 
	`sdsÿrštf
(json, ",\n \"cluster_errors\": %lu",

2967 
”rÜ_couÁ
);

2969 ià(
node
->
mig¿tšg_couÁ
 > 0 &&‚ode->
mig¿tšg
 !ğ
NULL
) {

2970 
i
 = 0;

2971 
sds
 
mig¿tšg
 = 
	`sd£m±y
();

2972 ; 
i
 < 
node
->
mig¿tšg_couÁ
; i += 2) {

2973 
sds
 
¦Ù
 = 
node
->
mig¿tšg
[
i
];

2974 
sds
 
de¡
 = 
node
->
mig¿tšg
[
i
 + 1];

2975 ià(
¦Ù
 && 
de¡
) {

2976 ià(
	`sd¦’
(
mig¿tšg
è> 0èmig¿tšg = 
	`sdsÿt
(migrating, ",");

2977 
mig¿tšg
 = 
	`sdsÿtfmt
(mig¿tšg, "\"%S\": \"%S\"", 
¦Ù
, 
de¡
);

2980 ià(
	`sd¦’
(
mig¿tšg
) > 0)

2981 
jsÚ
 = 
	`sdsÿtfmt
(jsÚ, ",\À \"mig¿tšg\": {%S}", 
mig¿tšg
);

2982 
	`sdsä“
(
mig¿tšg
);

2984 ià(
node
->
impÜtšg_couÁ
 > 0 &&‚ode->
impÜtšg
 !ğ
NULL
) {

2985 
i
 = 0;

2986 
sds
 
impÜtšg
 = 
	`sd£m±y
();

2987 ; 
i
 < 
node
->
impÜtšg_couÁ
; i += 2) {

2988 
sds
 
¦Ù
 = 
node
->
impÜtšg
[
i
];

2989 
sds
 
äom
 = 
node
->
impÜtšg
[
i
 + 1];

2990 ià(
¦Ù
 && 
äom
) {

2991 ià(
	`sd¦’
(
impÜtšg
è> 0èimpÜtšg = 
	`sdsÿt
(importing, ",");

2992 
impÜtšg
 = 
	`sdsÿtfmt
(impÜtšg, "\"%S\": \"%S\"", 
¦Ù
, 
äom
);

2995 ià(
	`sd¦’
(
impÜtšg
) > 0)

2996 
jsÚ
 = 
	`sdsÿtfmt
(jsÚ, ",\À \"impÜtšg\": {%S}", 
impÜtšg
);

2997 
	`sdsä“
(
impÜtšg
);

2999 
jsÚ
 = 
	`sdsÿt
(json, "\n }");

3000 
	`sdsä“
(
»¶iÿ‹
);

3001 
	`sdsä“
(
¦Ùs
);

3002 
	`sdsä“
(
æags
);

3003  
jsÚ
;

3004 
	}
}

3017 
	$şu¡”Mªag”KeyHashSlÙ
(*
key
, 
keyËn
) {

3018 
s
, 
e
;

3020 
s
 = 0; s < 
keyËn
; s++)

3021 ià(
key
[
s
] == '{') ;

3024 ià(
s
 =ğ
keyËn
è 
	`üc16
(
key
,keylen) & 0x3FFF;

3027 
e
 = 
s
+1;ƒ < 
keyËn
;ƒ++)

3028 ià(
key
[
e
] == '}') ;

3031 ià(
e
 =ğ
keyËn
 ||ƒ =ğ
s
+1è 
	`üc16
(
key
,keylen) & 0x3FFF;

3035  
	`üc16
(
key
+
s
+1,
e
-s-1) & 0x3FFF;

3036 
	}
}

3039 
sds
 
	$şu¡”Mªag”NodeInfo
(
şu¡”Mªag”Node
 *
node
, 
šd’t
) {

3040 
sds
 
šfo
 = 
	`sd£m±y
();

3041 
sds
 
¥aûs
 = 
	`sd£m±y
();

3042 
i
;

3043 
i
 = 0; i < 
šd’t
; i++è
¥aûs
 = 
	`sdsÿt
(spaces, " ");

3044 ià(
šd’t
è
šfo
 = 
	`sdsÿt
(šfo, 
¥aûs
);

3045 
is_ma¡”
 = !(
node
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
);

3046 *
rŞe
 = (
is_ma¡”
 ? "M" : "S");

3047 
sds
 
¦Ùs
 = 
NULL
;

3048 ià(
node
->
dœty
 &&‚ode->
»¶iÿ‹
 !ğ
NULL
)

3049 
šfo
 = 
	`sdsÿtfmt
(šfo, "S: %S %s:%u", 
node
->
Çme
,‚ode->

,‚ode->
pÜt
);

3051 
¦Ùs
 = 
	`şu¡”Mªag”NodeSlÙsSŒšg
(
node
);

3052 
sds
 
æags
 = 
	`şu¡”Mªag”NodeFÏgSŒšg
(
node
);

3053 
šfo
 = 
	`sdsÿtfmt
(info, "%s: %S %s:%u\n"

3056 
rŞe
, 
node
->
Çme
,‚ode->

,‚ode->
pÜt
, 
¥aûs
,

3057 
¦Ùs
, 
node
->
¦Ùs_couÁ
, 
æags
);

3058 
	`sdsä“
(
¦Ùs
);

3059 
	`sdsä“
(
æags
);

3061 ià(
node
->
»¶iÿ‹
 !ğ
NULL
)

3062 
šfo
 = 
	`sdsÿtfmt
(šfo, "\n% „•liÿ‹ %S", 
¥aûs
, 
node
->
»¶iÿ‹
);

3063 ià(
node
->
»¶iÿs_couÁ
)

3064 
šfo
 = 
	`sdsÿtfmt
(info, "\n%s %U‡dditional„eplica(s)",

3065 
¥aûs
, 
node
->
»¶iÿs_couÁ
);

3066 
	`sdsä“
(
¥aûs
);

3067  
šfo
;

3068 
	}
}

3070 
	$şu¡”Mªag”ShowNodes
() {

3071 
li¡I‹r
 
li
;

3072 
li¡Node
 *
Ê
;

3073 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

3074 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

3075 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

3076 
sds
 
šfo
 = 
	`şu¡”Mªag”NodeInfo
(
node
, 0);

3077 
	`´štf
("%s\n", (*è
šfo
);

3078 
	`sdsä“
(
šfo
);

3080 
	}
}

3082 
	$şu¡”Mªag”ShowClu¡”Info
() {

3083 
ma¡”s
 = 0;

3084 
keys
 = 0;

3085 
li¡I‹r
 
li
;

3086 
li¡Node
 *
Ê
;

3087 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

3088 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

3089 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

3090 ià(!(
node
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
)) {

3091 ià(!
node
->
Çme
) ;

3092 
»¶iÿs
 = 0;

3093 
dbsize
 = -1;

3094 
Çme
[9];

3095 
	`memıy
(
Çme
, 
node
->name, 8);

3096 
Çme
[8] = '\0';

3097 
li¡I‹r
 
ri
;

3098 
li¡Node
 *
º
;

3099 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
ri
);

3100 (
º
 = 
	`li¡Next
(&
ri
)è!ğ
NULL
) {

3101 
şu¡”Mªag”Node
 *
n
 = 
º
->
v®ue
;

3102 ià(
n
 =ğ
node
 || !Ò->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
))

3104 ià(
n
->
»¶iÿ‹
 && !
	`¡rcmp
Ò->»¶iÿ‹, 
node
->
Çme
))

3105 
»¶iÿs
++;

3107 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "DBSIZE");

3108 ià(
»¶y
 !ğ
NULL
 &&„•ly->
ty³
 =ğ
REDIS_REPLY_INTEGER
)

3109 
dbsize
 = 
»¶y
->
š‹g”
;

3110 ià(
dbsize
 < 0) {

3111 *
”r
 = "";

3112 ià(
»¶y
 !ğ
NULL
 &&„•ly->
ty³
 =ğ
REDIS_REPLY_ERROR
)

3113 
”r
 = 
»¶y
->
¡r
;

3114 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

3115 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

3118 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

3119 
	`´štf
("%s:%d (%s...) -> %d keys | %d slots | %d slaves.\n",

3120 
node
->

,‚ode->
pÜt
, 
Çme
, 
dbsize
,

3121 
node
->
¦Ùs_couÁ
, 
»¶iÿs
);

3122 
ma¡”s
++;

3123 
keys
 +ğ
dbsize
;

3126 
	`şu¡”Mªag”LogOk
("[OK] %d key š %d ma¡”s.\n", 
keys
, 
ma¡”s
);

3127 
keys_³r_¦Ù
 = 
keys
 / (è
CLUSTER_MANAGER_SLOTS
;

3128 
	`´štf
("%.2àkey ³¸¦Ù oÀav”age.\n", 
keys_³r_¦Ù
);

3129 
	}
}

3132 
	$şu¡”Mªag”AddSlÙs
(
şu¡”Mªag”Node
 *
node
, **
”r
)

3134 
»disR•ly
 *
»¶y
 = 
NULL
;

3135 *
_»¶y
 = 
NULL
;

3136 
sucûss
 = 1;

3138 
¬gc
 = 
node
->
¦Ùs_couÁ
 + 2;

3139 
sds
 *
¬gv
 = 
	`zm®loc
(
¬gc
 * (*argv));

3140 
size_t
 *
¬gvËn
 = 
	`zm®loc
(
¬gc
 * (*argvlen));

3141 
¬gv
[0] = "CLUSTER";

3142 
¬gv
[1] = "ADDSLOTS";

3143 
¬gvËn
[0] = 7;

3144 
¬gvËn
[1] = 8;

3145 *
”r
 = 
NULL
;

3146 
i
, 
¬gv_idx
 = 2;

3147 
i
 = 0; i < 
CLUSTER_MANAGER_SLOTS
; i++) {

3148 ià(
¬gv_idx
 >ğ
¬gc
) ;

3149 ià(
node
->
¦Ùs
[
i
]) {

3150 
¬gv
[
¬gv_idx
] = 
	`sdsäomlÚglÚg
((è
i
);

3151 
¬gvËn
[
¬gv_idx
] = 
	`sd¦’
(
¬gv
[argv_idx]);

3152 
¬gv_idx
++;

3155 ià(!
¬gv_idx
) {

3156 
sucûss
 = 0;

3157 
ş—nup
;

3159 
	`»disAµ’dCommªdArgv
(
node
->
cÚ‹xt
,
¬gc
,(cÚ¡ **)
¬gv
,
¬gvËn
);

3160 ià(
	`»disG‘R•ly
(
node
->
cÚ‹xt
, &
_»¶y
è!ğ
REDIS_OK
) {

3161 
sucûss
 = 0;

3162 
ş—nup
;

3164 
»¶y
 = (
»disR•ly
*è
_»¶y
;

3165 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
”r
);

3166 
ş—nup
:

3167 
	`zä“
(
¬gvËn
);

3168 ià(
¬gv
 !ğ
NULL
) {

3169 
i
 = 2; i < 
¬gc
; i++è
	`sdsä“
(
¬gv
[i]);

3170 
	`zä“
(
¬gv
);

3172 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

3173  
sucûss
;

3174 
	}
}

3180 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”G‘SlÙOwÃr
(
şu¡”Mªag”Node
 *
n
,

3181 
¦Ù
, **
”r
)

3183 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
CLUSTER_MANAGER_SLOTS
);

3184 
şu¡”Mªag”Node
 *
owÃr
 = 
NULL
;

3185 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER SLOTS");

3186 ià(
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
»¶y
, 
”r
)) {

3187 
	`as£¹
(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

3188 
size_t
 
i
;

3189 
i
 = 0; i < 
»¶y
->
–em’ts
; i++) {

3190 
»disR•ly
 *
r
 = 
»¶y
->
–em’t
[
i
];

3191 
	`as£¹
(
r
->
ty³
 =ğ
REDIS_REPLY_ARRAY
 &&„->
–em’ts
 >= 3);

3192 
äom
, 
to
;

3193 
äom
 = 
r
->
–em’t
[0]->
š‹g”
;

3194 
to
 = 
r
->
–em’t
[1]->
š‹g”
;

3195 ià(
¦Ù
 < 
äom
 || slÙ > 
to
) ;

3196 
»disR•ly
 *
Ä
 = 
r
->
–em’t
[2];

3197 
	`as£¹
(
Ä
->
ty³
 =ğ
REDIS_REPLY_ARRAY
 &&‚r->
–em’ts
 >= 2);

3198 *
Çme
 = 
NULL
;

3199 ià(
Ä
->
–em’ts
 >= 3)

3200 
Çme
 = 
Ä
->
–em’t
[2]->
¡r
;

3201 ià(
Çme
 !ğ
NULL
)

3202 
owÃr
 = 
	`şu¡”Mªag”NodeByName
(
Çme
);

3204 *

 = 
Ä
->
–em’t
[0]->
¡r
;

3205 
	`as£¹
(

 !ğ
NULL
);

3206 
pÜt
 = (è
Ä
->
–em’t
[1]->
š‹g”
;

3207 
li¡I‹r
 
li
;

3208 
li¡Node
 *
Ê
;

3209 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

3210 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

3211 
şu¡”Mªag”Node
 *
nd
 = 
Ê
->
v®ue
;

3212 ià(
	`¡rcmp
(
nd
->

, ipè=ğ0 && 
pÜt
 ==‚d->port) {

3213 
owÃr
 = 
nd
;

3218 ià(
owÃr
) ;

3221 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3222  
owÃr
;

3223 
	}
}

3226 
	$şu¡”Mªag”S‘SlÙ
(
şu¡”Mªag”Node
 *
node1
,

3227 
şu¡”Mªag”Node
 *
node2
,

3228 
¦Ù
, cÚ¡ *
¡©us
, **
”r
) {

3229 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node1
, "CLUSTER "

3231 
¦Ù
, 
¡©us
,

3232 (*è
node2
->
Çme
);

3233 ià(
”r
 !ğ
NULL
) *err = NULL;

3234 ià(!
»¶y
)  0;

3235 
sucûss
 = 1;

3236 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3237 
sucûss
 = 0;

3238 ià(
”r
 !ğ
NULL
) {

3239 *
”r
 = 
	`zm®loc
((
»¶y
->
Ën
 + 1) * ());

3240 
	`¡rıy
(*
”r
, 
»¶y
->
¡r
);

3241 } 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node1
, 
»¶y
->
¡r
);

3242 
ş—nup
;

3244 
ş—nup
:

3245 
	`ä“R•lyObjeù
(
»¶y
);

3246  
sucûss
;

3247 
	}
}

3249 
	$şu¡”Mªag”CË¬SlÙStus
(
şu¡”Mªag”Node
 *
node
, 
¦Ù
) {

3250 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
,

3251 "CLUSTER SETSLOT %d %s", 
¦Ù
, "STABLE");

3252 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

3253 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3254  
sucûss
;

3255 
	}
}

3257 
	$şu¡”Mªag”D–SlÙ
(
şu¡”Mªag”Node
 *
node
, 
¦Ù
,

3258 
ignÜe_uÇssigÃd_”r
)

3260 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
,

3261 "CLUSTER DELSLOTS %d", 
¦Ù
);

3262 *
”r
 = 
NULL
;

3263 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, &
”r
);

3264 ià(!
sucûss
 && 
»¶y
 &&„•ly->
ty³
 =ğ
REDIS_REPLY_ERROR
 &&

3265 
ignÜe_uÇssigÃd_”r
)

3267 *
g‘_owÃr_”r
 = 
NULL
;

3268 
şu¡”Mªag”Node
 *
assigÃd_to
 =

3269 
	`şu¡”Mªag”G‘SlÙOwÃr
(
node
, 
¦Ù
, &
g‘_owÃr_”r
);

3270 ià(!
assigÃd_to
) {

3271 ià(
g‘_owÃr_”r
 =ğ
NULL
è
sucûss
 = 1;

3273 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
g‘_owÃr_”r
);

3274 
	`zä“
(
g‘_owÃr_”r
);

3278 ià(!
sucûss
 && 
”r
 !ğ
NULL
) {

3279 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

3280 
	`zä“
(
”r
);

3282 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3283  
sucûss
;

3284 
	}
}

3286 
	$şu¡”Mªag”AddSlÙ
(
şu¡”Mªag”Node
 *
node
, 
¦Ù
) {

3287 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
,

3288 "CLUSTER ADDSLOTS %d", 
¦Ù
);

3289 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

3290 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3291  
sucûss
;

3292 
	}
}

3294 sigÃd 
	$şu¡”Mªag”CouÁKeysInSlÙ
(
şu¡”Mªag”Node
 *
node
,

3295 
¦Ù
)

3297 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
,

3298 "CLUSTER COUNTKEYSINSLOT %d", 
¦Ù
);

3299 
couÁ
 = -1;

3300 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

3301 ià(
sucûss
 && 
»¶y
->
ty³
 =ğ
REDIS_REPLY_INTEGER
è
couÁ
 =„•ly->
š‹g”
;

3302 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3303  
couÁ
;

3304 
	}
}

3306 
	$şu¡”Mªag”BumpEpoch
(
şu¡”Mªag”Node
 *
node
) {

3307 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER BUMPEPOCH");

3308 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
);

3309 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3310  
sucûss
;

3311 
	}
}

3316 
	$şu¡”Mªag”OnS‘OwÃrE¼
(
»disR•ly
 *
»¶y
,

3317 
şu¡”Mªag”Node
 *
n
, 
bulk_idx
)

3319 
	`UNUSED
(
»¶y
);

3320 
	`UNUSED
(
n
);

3322  (
bulk_idx
 != 1);

3323 
	}
}

3325 
	$şu¡”Mªag”S‘SlÙOwÃr
(
şu¡”Mªag”Node
 *
owÃr
,

3326 
¦Ù
,

3327 
do_ş—r
)

3329 
sucûss
 = 
	`şu¡”Mªag”S¹T¿n§ùiÚ
(
owÃr
);

3330 ià(!
sucûss
)  0;

3332 
	`şu¡”Mªag”D–SlÙ
(
owÃr
, 
¦Ù
, 1);

3334 
	`şu¡”Mªag”AddSlÙ
(
owÃr
, 
¦Ù
);

3335 ià(
do_ş—r
è
	`şu¡”Mªag”CË¬SlÙStus
(
owÃr
, 
¦Ù
);

3336 
	`şu¡”Mªag”BumpEpoch
(
owÃr
);

3337 
sucûss
 = 
	`şu¡”Mªag”ExecT¿n§ùiÚ
(
owÃr
, 
şu¡”Mªag”OnS‘OwÃrE¼
);

3338  
sucûss
;

3339 
	}
}

3346 
	$şu¡”Mªag”Com·»KeysV®ues
(
şu¡”Mªag”Node
 *
n1
,

3347 
şu¡”Mªag”Node
 *
n2
,

3348 
»disR•ly
 *
keys_»¶y
,

3349 
li¡
 *
diffs
)

3351 
size_t
 
i
, 
¬gc
 = 
keys_»¶y
->
–em’ts
 + 2;

3352 cÚ¡ *
hash_z”o
 = "0000000000000000000000000000000000000000";

3353 **
¬gv
 = 
	`zÿÎoc
(
¬gc
 * (*));

3354 
size_t
 *
¬gv_Ën
 = 
	`zÿÎoc
(
¬gc
 * (size_t));

3355 
¬gv
[0] = "DEBUG";

3356 
¬gv_Ën
[0] = 5;

3357 
¬gv
[1] = "DIGEST-VALUE";

3358 
¬gv_Ën
[1] = 12;

3359 
i
 = 0; i < 
keys_»¶y
->
–em’ts
; i++) {

3360 
»disR•ly
 *
’Œy
 = 
keys_»¶y
->
–em’t
[
i
];

3361 
idx
 = 
i
 + 2;

3362 
¬gv
[
idx
] = 
’Œy
->
¡r
;

3363 
¬gv_Ën
[
idx
] = 
’Œy
->
Ën
;

3365 
sucûss
 = 0;

3366 *
_»¶y1
 = 
NULL
, *
_»¶y2
 = NULL;

3367 
»disR•ly
 *
r1
 = 
NULL
, *
r2
 = NULL;

3368 
	`»disAµ’dCommªdArgv
(
n1
->
cÚ‹xt
,
¬gc
, (cÚ¡ **)
¬gv
,
¬gv_Ën
);

3369 
sucûss
 = (
	`»disG‘R•ly
(
n1
->
cÚ‹xt
, &
_»¶y1
è=ğ
REDIS_OK
);

3370 ià(!
sucûss
è
ş—nup
;

3371 
r1
 = (
»disR•ly
 *è
_»¶y1
;

3372 
	`»disAµ’dCommªdArgv
(
n2
->
cÚ‹xt
,
¬gc
, (cÚ¡ **)
¬gv
,
¬gv_Ën
);

3373 
sucûss
 = (
	`»disG‘R•ly
(
n2
->
cÚ‹xt
, &
_»¶y2
è=ğ
REDIS_OK
);

3374 ià(!
sucûss
è
ş—nup
;

3375 
r2
 = (
»disR•ly
 *è
_»¶y2
;

3376 
sucûss
 = (
r1
->
ty³
 !ğ
REDIS_REPLY_ERROR
 && 
r2
->type != REDIS_REPLY_ERROR);

3377 ià(
r1
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3378 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n1
, 
r1
->
¡r
);

3379 
sucûss
 = 0;

3381 ià(
r2
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3382 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n2
, 
r2
->
¡r
);

3383 
sucûss
 = 0;

3385 ià(!
sucûss
è
ş—nup
;

3386 
	`as£¹
(
keys_»¶y
->
–em’ts
 =ğ
r1
->elements &&

3387 
keys_»¶y
->
–em’ts
 =ğ
r2
->elements);

3388 
i
 = 0; i < 
keys_»¶y
->
–em’ts
; i++) {

3389 *
key
 = 
keys_»¶y
->
–em’t
[
i
]->
¡r
;

3390 *
hash1
 = 
r1
->
–em’t
[
i
]->
¡r
;

3391 *
hash2
 = 
r2
->
–em’t
[
i
]->
¡r
;

3393 ià(
	`¡rcmp
(
hash1
, 
hash_z”o
è=ğ0 || sŒcmp(
hash2
, hash_zero) == 0)

3395 ià(
	`¡rcmp
(
hash1
, 
hash2
è!ğ0è
	`li¡AddNodeTa
(
diffs
, 
key
);

3397 
ş—nup
:

3398 ià(
r1
è
	`ä“R•lyObjeù
(r1);

3399 ià(
r2
è
	`ä“R•lyObjeù
(r2);

3400 
	`zä“
(
¬gv
);

3401 
	`zä“
(
¬gv_Ën
);

3402  
sucûss
;

3403 
	}
}

3408 
»disR•ly
 *
	$şu¡”Mªag”Mig¿‹KeysInR•ly
(
şu¡”Mªag”Node
 *
sourû
,

3409 
şu¡”Mªag”Node
 *
rg‘
,

3410 
»disR•ly
 *
»¶y
,

3411 
»¶aû
, 
timeout
,

3412 *
dÙs
)

3414 
»disR•ly
 *
mig¿‹_»¶y
 = 
NULL
;

3415 **
¬gv
 = 
NULL
;

3416 
size_t
 *
¬gv_Ën
 = 
NULL
;

3417 
c
 = (
»¶aû
 ? 8 : 7);

3418 ià(
cÚfig
.
auth
è
c
 += 2;

3419 ià(
cÚfig
.
u£r
è
c
 += 1;

3420 
size_t
 
¬gc
 = 
c
 + 
»¶y
->
–em’ts
;

3421 
size_t
 
i
, 
off£t
 = 6;

3422 
¬gv
 = 
	`zÿÎoc
(
¬gc
 * (*));

3423 
¬gv_Ën
 = 
	`zÿÎoc
(
¬gc
 * (
size_t
));

3424 
pÜt¡r
[255];

3425 
timeout¡r
[255];

3426 
	`¢´štf
(
pÜt¡r
, 10, "%d", 
rg‘
->
pÜt
);

3427 
	`¢´štf
(
timeout¡r
, 10, "%d", 
timeout
);

3428 
¬gv
[0] = "MIGRATE";

3429 
¬gv_Ën
[0] = 7;

3430 
¬gv
[1] = 
rg‘
->

;

3431 
¬gv_Ën
[1] = 
	`¡¾’
(
rg‘
->

);

3432 
¬gv
[2] = 
pÜt¡r
;

3433 
¬gv_Ën
[2] = 
	`¡¾’
(
pÜt¡r
);

3434 
¬gv
[3] = "";

3435 
¬gv_Ën
[3] = 0;

3436 
¬gv
[4] = "0";

3437 
¬gv_Ën
[4] = 1;

3438 
¬gv
[5] = 
timeout¡r
;

3439 
¬gv_Ën
[5] = 
	`¡¾’
(
timeout¡r
);

3440 ià(
»¶aû
) {

3441 
¬gv
[
off£t
] = "REPLACE";

3442 
¬gv_Ën
[
off£t
] = 7;

3443 
off£t
++;

3445 ià(
cÚfig
.
auth
) {

3446 ià(
cÚfig
.
u£r
) {

3447 
¬gv
[
off£t
] = "AUTH2";

3448 
¬gv_Ën
[
off£t
] = 5;

3449 
off£t
++;

3450 
¬gv
[
off£t
] = 
cÚfig
.
u£r
;

3451 
¬gv_Ën
[
off£t
] = 
	`¡¾’
(
cÚfig
.
u£r
);

3452 
off£t
++;

3453 
¬gv
[
off£t
] = 
cÚfig
.
auth
;

3454 
¬gv_Ën
[
off£t
] = 
	`¡¾’
(
cÚfig
.
auth
);

3455 
off£t
++;

3457 
¬gv
[
off£t
] = "AUTH";

3458 
¬gv_Ën
[
off£t
] = 4;

3459 
off£t
++;

3460 
¬gv
[
off£t
] = 
cÚfig
.
auth
;

3461 
¬gv_Ën
[
off£t
] = 
	`¡¾’
(
cÚfig
.
auth
);

3462 
off£t
++;

3465 
¬gv
[
off£t
] = "KEYS";

3466 
¬gv_Ën
[
off£t
] = 4;

3467 
off£t
++;

3468 
i
 = 0; i < 
»¶y
->
–em’ts
; i++) {

3469 
»disR•ly
 *
’Œy
 = 
»¶y
->
–em’t
[
i
];

3470 
size_t
 
idx
 = 
i
 + 
off£t
;

3471 
	`as£¹
(
’Œy
->
ty³
 =ğ
REDIS_REPLY_STRING
);

3472 
¬gv
[
idx
] = (*è
	`sd¢ewËn
(
’Œy
->
¡r
,ƒÁry->
Ën
);

3473 
¬gv_Ën
[
idx
] = 
’Œy
->
Ën
;

3474 ià(
dÙs
èdÙs[
i
] = '.';

3476 ià(
dÙs
èdÙs[
»¶y
->
–em’ts
] = '\0';

3477 *
_»¶y
 = 
NULL
;

3478 
	`»disAµ’dCommªdArgv
(
sourû
->
cÚ‹xt
,
¬gc
,

3479 (cÚ¡ **)
¬gv
,
¬gv_Ën
);

3480 
sucûss
 = (
	`»disG‘R•ly
(
sourû
->
cÚ‹xt
, &
_»¶y
è=ğ
REDIS_OK
);

3481 
i
 = 0; i < 
»¶y
->
–em’ts
; i++è
	`sdsä“
(
¬gv
[˜+ 
off£t
]);

3482 ià(!
sucûss
è
ş—nup
;

3483 
mig¿‹_»¶y
 = (
»disR•ly
 *è
_»¶y
;

3484 
ş—nup
:

3485 
	`zä“
(
¬gv
);

3486 
	`zä“
(
¬gv_Ën
);

3487  
mig¿‹_»¶y
;

3488 
	}
}

3491 
	$şu¡”Mªag”Mig¿‹KeysInSlÙ
(
şu¡”Mªag”Node
 *
sourû
,

3492 
şu¡”Mªag”Node
 *
rg‘
,

3493 
¦Ù
, 
timeout
,

3494 
p–še
, 
v”bo£
,

3495 **
”r
)

3497 
sucûss
 = 1;

3498 
do_fix
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

3499 
CLUSTER_MANAGER_CMD_FLAG_FIX
;

3500 
do_»¶aû
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

3501 
CLUSTER_MANAGER_CMD_FLAG_REPLACE
;

3503 *
dÙs
 = 
NULL
;

3504 
»disR•ly
 *
»¶y
 = 
NULL
, *
mig¿‹_»¶y
 = NULL;

3505 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
sourû
, "CLUSTER "

3506 "GETKEYSINSLOT %d %d", 
¦Ù
,

3507 
p–še
);

3508 
sucûss
 = (
»¶y
 !ğ
NULL
);

3509 ià(!
sucûss
)  0;

3510 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3511 
sucûss
 = 0;

3512 ià(
”r
 !ğ
NULL
) {

3513 *
”r
 = 
	`zm®loc
((
»¶y
->
Ën
 + 1) * ());

3514 
	`¡rıy
(*
”r
, 
»¶y
->
¡r
);

3515 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
sourû
, *
”r
);

3517 
Ãxt
;

3519 
	`as£¹
(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

3520 
size_t
 
couÁ
 = 
»¶y
->
–em’ts
;

3521 ià(
couÁ
 == 0) {

3522 
	`ä“R•lyObjeù
(
»¶y
);

3525 ià(
v”bo£
è
dÙs
 = 
	`zm®loc
((
couÁ
+1) * ());

3527 
mig¿‹_»¶y
 = 
	`şu¡”Mªag”Mig¿‹KeysInR•ly
(
sourû
, 
rg‘
,

3528 
»¶y
, 0, 
timeout
,

3529 
dÙs
);

3530 ià(
mig¿‹_»¶y
 =ğ
NULL
è
Ãxt
;

3531 ià(
mig¿‹_»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3532 
is_busy
 = 
	`¡r¡r
(
mig¿‹_»¶y
->
¡r
, "BUSYKEY"è!ğ
NULL
;

3533 
nÙ_£rved
 = 0;

3534 ià(!
is_busy
) {

3537 *
g‘_owÃr_”r
 = 
NULL
;

3538 
şu¡”Mªag”Node
 *
£rved_by
 =

3539 
	`şu¡”Mªag”G‘SlÙOwÃr
(
sourû
, 
¦Ù
, &
g‘_owÃr_”r
);

3540 ià(!
£rved_by
) {

3541 ià(
g‘_owÃr_”r
 =ğ
NULL
è
nÙ_£rved
 = 1;

3543 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
sourû
,

3544 
g‘_owÃr_”r
);

3545 
	`zä“
(
g‘_owÃr_”r
);

3550 ià(
is_busy
 || 
nÙ_£rved
) {

3553 ià(
do_fix
 && 
nÙ_£rved
) {

3554 
	`şu¡”Mªag”LogW¬n
("*** Slot was‚ot served, setting "

3556 
rg‘
->

,¬g‘->
pÜt
);

3557 
	`şu¡”Mªag”S‘SlÙ
(
sourû
, 
rg‘
, 
¦Ù
, "node", 
NULL
);

3568 ià(
is_busy
) {

3569 
	`şu¡”Mªag”LogW¬n
("\n*** Target keyƒxists\n");

3570 ià(!
do_»¶aû
) {

3571 
	`şu¡”Mªag”LogW¬n
("*** Checking key values on "

3573 
li¡
 *
diffs
 = 
	`li¡C»©e
();

3574 
sucûss
 = 
	`şu¡”Mªag”Com·»KeysV®ues
(
sourû
,

3575 
rg‘
, 
»¶y
, 
diffs
);

3576 ià(!
sucûss
) {

3577 
	`şu¡”Mªag”LogE¼
("*** Value check failed!\n");

3578 
	`li¡R–—£
(
diffs
);

3579 
Ãxt
;

3581 ià(
	`li¡L’gth
(
diffs
) > 0) {

3582 
sucûss
 = 0;

3583 
	`şu¡”Mªag”LogE¼
(

3589 
	`li¡L’gth
(
diffs
),

3590 
sourû
->

, sourû->
pÜt
,

3591 
rg‘
->

,¬g‘->
pÜt
);

3592 
li¡I‹r
 
dli
;

3593 
li¡Node
 *
dÊ
;

3594 
	`li¡Rewšd
(
diffs
, &
dli
);

3595 (
dÊ
 = 
	`li¡Next
(&
dli
)è!ğ
NULL
) {

3596 *
k
 = 
dÊ
->
v®ue
;

3597 
	`şu¡”Mªag”LogE¼
(" - %s\n", 
k
);

3599 
	`şu¡”Mªag”LogE¼
("Please fixhe‡bove key(s) "

3605 
	`li¡R–—£
(
diffs
);

3606 
Ãxt
;

3608 
	`li¡R–—£
(
diffs
);

3610 
	`şu¡”Mªag”LogW¬n
("*** Replacingarget keys...\n");

3612 
	`ä“R•lyObjeù
(
mig¿‹_»¶y
);

3613 
mig¿‹_»¶y
 = 
	`şu¡”Mªag”Mig¿‹KeysInR•ly
(
sourû
,

3614 
rg‘
,

3615 
»¶y
,

3616 
is_busy
,

3617 
timeout
,

3618 
NULL
);

3619 
sucûss
 = (
mig¿‹_»¶y
 !ğ
NULL
 &&

3620 
mig¿‹_»¶y
->
ty³
 !ğ
REDIS_REPLY_ERROR
);

3621 } 
sucûss
 = 0;

3622 ià(!
sucûss
) {

3623 ià(
mig¿‹_»¶y
 !ğ
NULL
) {

3624 ià(
”r
) {

3625 *
”r
 = 
	`zm®loc
((
mig¿‹_»¶y
->
Ën
 + 1) * ());

3626 
	`¡rıy
(*
”r
, 
mig¿‹_»¶y
->
¡r
);

3628 
	`´štf
("\n");

3629 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
sourû
,

3630 
mig¿‹_»¶y
->
¡r
);

3632 
Ãxt
;

3635 ià(
v”bo£
) {

3636 
	`´štf
("%s", 
dÙs
);

3637 
	`fæush
(
¡dout
);

3639 
Ãxt
:

3640 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

3641 ià(
mig¿‹_»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(migrate_reply);

3642 ià(
dÙs
è
	`zä“
(dots);

3643 ià(!
sucûss
) ;

3645  
sucûss
;

3646 
	}
}

3657 
	$şu¡”Mªag”MoveSlÙ
(
şu¡”Mªag”Node
 *
sourû
,

3658 
şu¡”Mªag”Node
 *
rg‘
,

3659 
¦Ù
, 
İts
, **
”r
)

3661 ià(!(
İts
 & 
CLUSTER_MANAGER_OPT_QUIET
)) {

3662 
	`´štf
("Movšg slÙ %d from %s:%dØ%s:%d: ", 
¦Ù
, 
sourû
->

,

3663 
sourû
->
pÜt
, 
rg‘
->

,arget->port);

3664 
	`fæush
(
¡dout
);

3666 ià(
”r
 !ğ
NULL
) *err = NULL;

3667 
p–še
 = 
cÚfig
.
şu¡”_mªag”_commªd
.pipeline,

3668 
timeout
 = 
cÚfig
.
şu¡”_mªag”_commªd
.timeout,

3669 
´št_dÙs
 = (
İts
 & 
CLUSTER_MANAGER_OPT_VERBOSE
),

3670 
İtiÚ_cŞd
 = (
İts
 & 
CLUSTER_MANAGER_OPT_COLD
),

3671 
sucûss
 = 1;

3672 ià(!
İtiÚ_cŞd
) {

3673 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙ
(
rg‘
, 
sourû
, 
¦Ù
,

3674 "impÜtšg", 
”r
);

3675 ià(!
sucûss
)  0;

3676 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙ
(
sourû
, 
rg‘
, 
¦Ù
,

3677 "mig¿tšg", 
”r
);

3678 ià(!
sucûss
)  0;

3680 
sucûss
 = 
	`şu¡”Mªag”Mig¿‹KeysInSlÙ
(
sourû
, 
rg‘
, 
¦Ù
, 
timeout
,

3681 
p–še
, 
´št_dÙs
, 
”r
);

3682 ià(!(
İts
 & 
CLUSTER_MANAGER_OPT_QUIET
)è
	`´štf
("\n");

3683 ià(!
sucûss
)  0;

3685 ià(!
İtiÚ_cŞd
) {

3686 
li¡I‹r
 
li
;

3687 
li¡Node
 *
Ê
;

3688 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

3689 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

3690 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

3691 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

3692 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER "

3694 
¦Ù
, "node",

3695 
rg‘
->
Çme
);

3696 
sucûss
 = (
r
 !ğ
NULL
);

3697 ià(!
sucûss
)  0;

3698 ià(
r
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

3699 
sucûss
 = 0;

3700 ià(
”r
 !ğ
NULL
) {

3701 *
”r
 = 
	`zm®loc
((
r
->
Ën
 + 1) * ());

3702 
	`¡rıy
(*
”r
, 
r
->
¡r
);

3703 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n
, *
”r
);

3706 
	`ä“R•lyObjeù
(
r
);

3707 ià(!
sucûss
)  0;

3711 ià(
İts
 & 
CLUSTER_MANAGER_OPT_UPDATE
) {

3712 
sourû
->
¦Ùs
[
¦Ù
] = 0;

3713 
rg‘
->
¦Ùs
[
¦Ù
] = 1;

3716 
	}
}

3720 
	$şu¡”Mªag”FlushNodeCÚfig
(
şu¡”Mªag”Node
 *
node
, **
”r
) {

3721 ià(!
node
->
dœty
)  0;

3722 
»disR•ly
 *
»¶y
 = 
NULL
;

3723 
is_”r
 = 0, 
sucûss
 = 1;

3724 ià(
”r
 !ğ
NULL
) *err = NULL;

3725 ià(
node
->
»¶iÿ‹
 !ğ
NULL
) {

3726 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER REPLICATE %s",

3727 
node
->
»¶iÿ‹
);

3728 ià(
»¶y
 =ğ
NULL
 || (
is_”r
 = (»¶y->
ty³
 =ğ
REDIS_REPLY_ERROR
))) {

3729 ià(
is_”r
 && 
”r
 !ğ
NULL
) {

3730 *
”r
 = 
	`zm®loc
((
»¶y
->
Ën
 + 1) * ());

3731 
	`¡rıy
(*
”r
, 
»¶y
->
¡r
);

3733 
sucûss
 = 0;

3738 
ş—nup
;

3741 
added
 = 
	`şu¡”Mªag”AddSlÙs
(
node
, 
”r
);

3742 ià(!
added
 || *
”r
 !ğ
NULL
è
sucûss
 = 0;

3744 
node
->
dœty
 = 0;

3745 
ş—nup
:

3746 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

3747  
sucûss
;

3748 
	}
}

3751 
	$şu¡”Mªag”Wa™FÜClu¡”Još
() {

3752 
	`´štf
("Waiting forhe clustero join\n");

3753 
couÁ”
 = 0,

3754 
check_aá”
 = 
CLUSTER_JOIN_CHECK_AFTER
 +

3755 ()(
	`li¡L’gth
(
şu¡”_mªag”
.
nodes
) * 0.15f);

3756 !
	`şu¡”Mªag”IsCÚfigCÚsi¡’t
()) {

3757 
	`´štf
(".");

3758 
	`fæush
(
¡dout
);

3759 
	`¦“p
(1);

3760 ià(++
couÁ”
 > 
check_aá”
) {

3761 
diù
 *
¡©us
 = 
	`şu¡”Mªag”G‘LškStus
();

3762 
diùI‹¿tÜ
 *
™”
 = 
NULL
;

3763 ià(
¡©us
 !ğ
NULL
 && 
	`diùSize
(status) > 0) {

3764 
	`´štf
("\n");

3765 
	`şu¡”Mªag”LogE¼
("Warning: %d‚ode(s) may "

3766 "buÄ—chabË\n", 
	`diùSize
(
¡©us
));

3767 
™”
 = 
	`diùG‘I‹¿tÜ
(
¡©us
);

3768 
diùEÁry
 *
’Œy
;

3769 (
’Œy
 = 
	`diùNext
(
™”
)è!ğ
NULL
) {

3770 
sds
 
nod—ddr
 = (sdsè
	`diùG‘Key
(
’Œy
);

3771 *
node_
 = 
NULL
;

3772 
node_pÜt
 = 0, 
node_bus_pÜt
 = 0;

3773 
li¡
 *
äom
 = (li¡ *è
	`diùG‘V®
(
’Œy
);

3774 ià(
	`·r£Clu¡”NodeAdd»ss
(
nod—ddr
, &
node_
,

3775 &
node_pÜt
, &
node_bus_pÜt
) &&‚ode_bus_port) {

3776 
	`şu¡”Mªag”LogE¼
(" - The…ort %d of‚ode %s may "

3778 
node_bus_pÜt
, 
node_
);

3780 
	`şu¡”Mªag”LogE¼
(" - Node %s may be unreachable "

3781 "äom:\n", 
nod—ddr
);

3783 
li¡I‹r
 
li
;

3784 
li¡Node
 *
Ê
;

3785 
	`li¡Rewšd
(
äom
, &
li
);

3786 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

3787 
sds
 
äom_addr
 = 
Ê
->
v®ue
;

3788 
	`şu¡”Mªag”LogE¼
(" %s\n", 
äom_addr
);

3789 
	`sdsä“
(
äom_addr
);

3791 
	`şu¡”Mªag”LogE¼
("Cluster bus…orts must be„eachable "

3795 
	`li¡Em±y
(
äom
);

3798 ià(
™”
 !ğ
NULL
è
	`diùR–—£I‹¿tÜ
(iter);

3799 ià(
¡©us
 !ğ
NULL
è
	`diùR–—£
(status);

3800 
couÁ”
 = 0;

3803 
	`´štf
("\n");

3804 
	}
}

3811 
	$şu¡”Mªag”NodeLßdInfo
(
şu¡”Mªag”Node
 *
node
, 
İts
,

3812 **
”r
)

3814 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER NODES");

3815 
sucûss
 = 1;

3816 *
”r
 = 
NULL
;

3817 ià(!
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
”r
)) {

3818 
sucûss
 = 0;

3819 
ş—nup
;

3821 
g‘ä›nds
 = (
İts
 & 
CLUSTER_MANAGER_OPT_GETFRIENDS
);

3822 *
lšes
 = 
»¶y
->
¡r
, *
p
, *
lše
;

3823 (
p
 = 
	`¡r¡r
(
lšes
, "\n")è!ğ
NULL
) {

3824 *
p
 = '\0';

3825 
lše
 = 
lšes
;

3826 
lšes
 = 
p
 + 1;

3827 *
Çme
 = 
NULL
, *
addr
 = NULL, *
æags
 = NULL, *
ma¡”_id
 = NULL,

3828 *
pšg_£Á
 = 
NULL
, *
pšg_»cv
 = NULL, *
cÚfig_•och
 = NULL,

3829 *
lšk_¡©us
 = 
NULL
;

3830 
	`UNUSED
(
lšk_¡©us
);

3831 
i
 = 0;

3832 (
p
 = 
	`¡rchr
(
lše
, ' ')è!ğ
NULL
) {

3833 *
p
 = '\0';

3834 *
tok’
 = 
lše
;

3835 
lše
 = 
p
 + 1;

3836 
i
++){

3837 0: 
Çme
 = 
tok’
; ;

3838 1: 
addr
 = 
tok’
; ;

3839 2: 
æags
 = 
tok’
; ;

3840 3: 
ma¡”_id
 = 
tok’
; ;

3841 4: 
pšg_£Á
 = 
tok’
; ;

3842 5: 
pšg_»cv
 = 
tok’
; ;

3843 6: 
cÚfig_•och
 = 
tok’
; ;

3844 7: 
lšk_¡©us
 = 
tok’
; ;

3846 ià(
i
 == 8) ;

3848 ià(!
æags
) {

3849 
sucûss
 = 0;

3850 
ş—nup
;

3852 
my£lf
 = (
	`¡r¡r
(
æags
, "my£lf"è!ğ
NULL
);

3853 
şu¡”Mªag”Node
 *
cu¼’tNode
 = 
NULL
;

3854 ià(
my£lf
) {

3855 
node
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_MYSELF
;

3856 
cu¼’tNode
 = 
node
;

3857 
	`şu¡”Mªag”NodeRe£tSlÙs
(
node
);

3858 ià(
i
 == 8) {

3859 
»maššg
 = 
	`¡¾’
(
lše
);

3860 
»maššg
 > 0) {

3861 
p
 = 
	`¡rchr
(
lše
, ' ');

3862 ià(
p
 =ğ
NULL
è°ğ
lše
 + 
»maššg
;

3863 
»maššg
 -ğ(
p
 - 
lše
);

3865 *
¦Ùsdef
 = 
lše
;

3866 *
p
 = '\0';

3867 ià(
»maššg
) {

3868 
lše
 = 
p
 + 1;

3869 
»maššg
--;

3870 } 
lše
 = 
p
;

3871 *
dash
 = 
NULL
;

3872 ià(
¦Ùsdef
[0] == '[') {

3873 
¦Ùsdef
++;

3874 ià((
p
 = 
	`¡r¡r
(
¦Ùsdef
, "->-"))) {

3875 *
p
 = '\0';

3876 
p
 += 3;

3877 *
şosšg_b¿ck‘
 = 
	`¡rchr
(
p
, ']');

3878 ià(
şosšg_b¿ck‘
) *closing_bracket = '\0';

3879 
sds
 
¦Ù
 = 
	`sd¢ew
(
¦Ùsdef
);

3880 
sds
 
d¡
 = 
	`sd¢ew
(
p
);

3881 
node
->
mig¿tšg_couÁ
 += 2;

3882 
node
->
mig¿tšg
 = 
	`z»®loc
(node->migrating,

3883 (
node
->
mig¿tšg_couÁ
 * (
sds
)));

3884 
node
->
mig¿tšg
[node->
mig¿tšg_couÁ
 - 2] =

3885 
¦Ù
;

3886 
node
->
mig¿tšg
[node->
mig¿tšg_couÁ
 - 1] =

3887 
d¡
;

3888 } ià((
p
 = 
	`¡r¡r
(
¦Ùsdef
, "-<-"))) {

3889 *
p
 = '\0';

3890 
p
 += 3;

3891 *
şosšg_b¿ck‘
 = 
	`¡rchr
(
p
, ']');

3892 ià(
şosšg_b¿ck‘
) *closing_bracket = '\0';

3893 
sds
 
¦Ù
 = 
	`sd¢ew
(
¦Ùsdef
);

3894 
sds
 
¤c
 = 
	`sd¢ew
(
p
);

3895 
node
->
impÜtšg_couÁ
 += 2;

3896 
node
->
impÜtšg
 = 
	`z»®loc
(node->importing,

3897 (
node
->
impÜtšg_couÁ
 * (
sds
)));

3898 
node
->
impÜtšg
[node->
impÜtšg_couÁ
 - 2] =

3899 
¦Ù
;

3900 
node
->
impÜtšg
[node->
impÜtšg_couÁ
 - 1] =

3901 
¤c
;

3903 } ià((
dash
 = 
	`¡rchr
(
¦Ùsdef
, '-')è!ğ
NULL
) {

3904 
p
 = 
dash
;

3905 
¡¬t
, 
¡İ
;

3906 *
p
 = '\0';

3907 
¡¬t
 = 
	`©oi
(
¦Ùsdef
);

3908 
¡İ
 = 
	`©oi
(
p
 + 1);

3909 
node
->
¦Ùs_couÁ
 +ğ(
¡İ
 - (
¡¬t
 - 1));

3910 
¡¬t
 <ğ
¡İ
è
node
->
¦Ùs
[start++] = 1;

3911 } ià(
p
 > 
¦Ùsdef
) {

3912 
node
->
¦Ùs
[
	`©oi
(
¦Ùsdef
)] = 1;

3913 
node
->
¦Ùs_couÁ
++;

3917 
node
->
dœty
 = 0;

3918 } ià(!
g‘ä›nds
) {

3919 ià(!(
node
->
æags
 & 
CLUSTER_MANAGER_FLAG_MYSELF
)) ;

3922 ià(
addr
 =ğ
NULL
) {

3923 
	`årštf
(
¡d”r
, "Error: invalid CLUSTER NODES„eply\n");

3924 
sucûss
 = 0;

3925 
ş—nup
;

3927 *
c
 = 
	`¡¼chr
(
addr
, '@');

3928 ià(
c
 !ğ
NULL
) *c = '\0';

3929 
c
 = 
	`¡¼chr
(
addr
, ':');

3930 ià(
c
 =ğ
NULL
) {

3931 
	`årštf
(
¡d”r
, "Error: invalid CLUSTER NODES„eply\n");

3932 
sucûss
 = 0;

3933 
ş—nup
;

3935 *
c
 = '\0';

3936 
pÜt
 = 
	`©oi
(++
c
);

3937 
cu¼’tNode
 = 
	`şu¡”Mªag”NewNode
(
	`sd¢ew
(
addr
), 
pÜt
);

3938 
cu¼’tNode
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_FRIEND
;

3939 ià(
node
->
ä›nds
 =ğ
NULL
ènode->ä›nd ğ
	`li¡C»©e
();

3940 
	`li¡AddNodeTa
(
node
->
ä›nds
, 
cu¼’tNode
);

3942 ià(
Çme
 !ğ
NULL
) {

3943 ià(
cu¼’tNode
->
Çme
è
	`sdsä“
(currentNode->name);

3944 
cu¼’tNode
->
Çme
 = 
	`sd¢ew
(name);

3946 ià(
cu¼’tNode
->
æags_¡r
 !ğ
NULL
)

3947 
	`ä“Clu¡”Mªag”NodeFÏgs
(
cu¼’tNode
->
æags_¡r
);

3948 
cu¼’tNode
->
æags_¡r
 = 
	`li¡C»©e
();

3949 
æag_Ën
;

3950 (
æag_Ën
 = 
	`¡¾’
(
æags
)) > 0) {

3951 
sds
 
æag
 = 
NULL
;

3952 *
å
 = 
	`¡rchr
(
æags
, ',');

3953 ià(
å
) {

3954 *
å
 = '\0';

3955 
æag
 = 
	`sd¢ew
(
æags
);

3956 
æags
 = 
å
 + 1;

3958 
æag
 = 
	`sd¢ew
(
æags
);

3959 
æags
 +ğ
æag_Ën
;

3961 ià(
	`¡rcmp
(
æag
, "noaddr") == 0)

3962 
cu¼’tNode
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_NOADDR
;

3963 ià(
	`¡rcmp
(
æag
, "disconnected") == 0)

3964 
cu¼’tNode
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_DISCONNECT
;

3965 ià(
	`¡rcmp
(
æag
, "fail") == 0)

3966 
cu¼’tNode
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_FAIL
;

3967 ià(
	`¡rcmp
(
æag
, "slave") == 0) {

3968 
cu¼’tNode
->
æags
 |ğ
CLUSTER_MANAGER_FLAG_SLAVE
;

3969 ià(
ma¡”_id
 !ğ
NULL
) {

3970 ià(
cu¼’tNode
->
»¶iÿ‹
è
	`sdsä“
(currentNode->replicate);

3971 
cu¼’tNode
->
»¶iÿ‹
 = 
	`sd¢ew
(
ma¡”_id
);

3974 
	`li¡AddNodeTa
(
cu¼’tNode
->
æags_¡r
, 
æag
);

3976 ià(
cÚfig_•och
 !ğ
NULL
)

3977 
cu¼’tNode
->
cu¼’t_•och
 = 
	`©Şl
(
cÚfig_•och
);

3978 ià(
pšg_£Á
 !ğ
NULL
è
cu¼’tNode
->pšg_£Á = 
	`©Şl
(ping_sent);

3979 ià(
pšg_»cv
 !ğ
NULL
è
cu¼’tNode
->pšg_»cv = 
	`©Şl
(ping_recv);

3980 ià(!
g‘ä›nds
 && 
my£lf
) ;

3982 
ş—nup
:

3983 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

3984  
sucûss
;

3985 
	}
}

3991 
	$şu¡”Mªag”LßdInfoFromNode
(
şu¡”Mªag”Node
 *
node
, 
İts
) {

3992 ià(
node
->
cÚ‹xt
 =ğ
NULL
 && !
	`şu¡”Mªag”NodeCÚÃù
(node)) {

3993 
	`ä“Clu¡”Mªag”Node
(
node
);

3996 
İts
 |ğ
CLUSTER_MANAGER_OPT_GETFRIENDS
;

3997 *
e
 = 
NULL
;

3998 ià(!
	`şu¡”Mªag”NodeIsClu¡”
(
node
, &
e
)) {

3999 
	`şu¡”Mªag”PrštNÙClu¡”NodeE¼Ü
(
node
, 
e
);

4000 ià(
e
è
	`zä“
(e);

4001 
	`ä“Clu¡”Mªag”Node
(
node
);

4004 
e
 = 
NULL
;

4005 ià(!
	`şu¡”Mªag”NodeLßdInfo
(
node
, 
İts
, &
e
)) {

4006 ià(
e
) {

4007 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
e
);

4008 
	`zä“
(
e
);

4010 
	`ä“Clu¡”Mªag”Node
(
node
);

4013 
li¡I‹r
 
li
;

4014 
li¡Node
 *
Ê
;

4015 ià(
şu¡”_mªag”
.
nodes
 !ğ
NULL
) {

4016 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4017 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
)

4018 
	`ä“Clu¡”Mªag”Node
((
şu¡”Mªag”Node
 *è
Ê
->
v®ue
);

4019 
	`li¡R–—£
(
şu¡”_mªag”
.
nodes
);

4021 
şu¡”_mªag”
.
nodes
 = 
	`li¡C»©e
();

4022 
	`li¡AddNodeTa
(
şu¡”_mªag”
.
nodes
, 
node
);

4023 ià(
node
->
ä›nds
 !ğ
NULL
) {

4024 
	`li¡Rewšd
(
node
->
ä›nds
, &
li
);

4025 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4026 
şu¡”Mªag”Node
 *
ä›nd
 = 
Ê
->
v®ue
;

4027 ià(!
ä›nd
->

 || !ä›nd->
pÜt
è
šv®id_ä›nd
;

4028 ià(!
ä›nd
->
cÚ‹xt
 && !
	`şu¡”Mªag”NodeCÚÃù
(friend))

4029 
šv®id_ä›nd
;

4030 
e
 = 
NULL
;

4031 ià(
	`şu¡”Mªag”NodeLßdInfo
(
ä›nd
, 0, &
e
)) {

4032 ià(
ä›nd
->
æags
 & (
CLUSTER_MANAGER_FLAG_NOADDR
 |

4033 
CLUSTER_MANAGER_FLAG_DISCONNECT
 |

4034 
CLUSTER_MANAGER_FLAG_FAIL
))

4036 
šv®id_ä›nd
;

4038 
	`li¡AddNodeTa
(
şu¡”_mªag”
.
nodes
, 
ä›nd
);

4040 
	`şu¡”Mªag”LogE¼
("[ERR] Unableo†oad info for "

4042 
ä›nd
->

, fr›nd->
pÜt
);

4043 
šv®id_ä›nd
;

4046 
šv®id_ä›nd
:

4047 ià(!(
ä›nd
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
))

4048 
şu¡”_mªag”
.
uÄ—chabË_ma¡”s
++;

4049 
	`ä“Clu¡”Mªag”Node
(
ä›nd
);

4051 
	`li¡R–—£
(
node
->
ä›nds
);

4052 
node
->
ä›nds
 = 
NULL
;

4055 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4056 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4057 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4058 ià(
n
->
»¶iÿ‹
 !ğ
NULL
) {

4059 
şu¡”Mªag”Node
 *
ma¡”
 = 
	`şu¡”Mªag”NodeByName
(
n
->
»¶iÿ‹
);

4060 ià(
ma¡”
 =ğ
NULL
) {

4061 
	`şu¡”Mªag”LogW¬n
("*** WARNING: %s:%d claimso be "

4063 
n
->

,‚->
pÜt
,‚->
»¶iÿ‹
);

4064 } 
ma¡”
->
»¶iÿs_couÁ
++;

4068 
	}
}

4071 
	$şu¡”Mªag”SlÙCom·»
(cÚ¡ *
¦Ù1
, cÚ¡ *
¦Ù2
) {

4072 cÚ¡ **
i1
 = (cÚ¡ **)
¦Ù1
;

4073 cÚ¡ **
i2
 = (cÚ¡ **)
¦Ù2
;

4074  
	`¡rcmp
(*
i1
, *
i2
);

4075 
	}
}

4077 
	$şu¡”Mªag”SlÙCouÁCom·»Desc
(cÚ¡ *
n1
, cÚ¡ *
n2
) {

4078 
şu¡”Mªag”Node
 *
node1
 = *((şu¡”Mªag”Nod**è
n1
);

4079 
şu¡”Mªag”Node
 *
node2
 = *((şu¡”Mªag”Nod**è
n2
);

4080  
node2
->
¦Ùs_couÁ
 - 
node1
->slots_count;

4081 
	}
}

4083 
	$şu¡”Mªag”Com·»NodeB®ªû
(cÚ¡ *
n1
, cÚ¡ *
n2
) {

4084 
şu¡”Mªag”Node
 *
node1
 = *((şu¡”Mªag”Nod**è
n1
);

4085 
şu¡”Mªag”Node
 *
node2
 = *((şu¡”Mªag”Nod**è
n2
);

4086  
node1
->
b®ªû
 - 
node2
->balance;

4087 
	}
}

4089 
sds
 
	$şu¡”Mªag”G‘CÚfigSigÇtu»
(
şu¡”Mªag”Node
 *
node
) {

4090 
sds
 
sigÇtu»
 = 
NULL
;

4091 
node_couÁ
 = 0, 
i
 = 0, 
Çme_Ën
 = 0;

4092 **
node_cÚfigs
 = 
NULL
;

4093 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER NODES");

4094 ià(
»¶y
 =ğ
NULL
 ||„•ly->
ty³
 =ğ
REDIS_REPLY_ERROR
)

4095 
ş—nup
;

4096 *
lšes
 = 
»¶y
->
¡r
, *
p
, *
lše
;

4097 (
p
 = 
	`¡r¡r
(
lšes
, "\n")è!ğ
NULL
) {

4098 
i
 = 0;

4099 *
p
 = '\0';

4100 
lše
 = 
lšes
;

4101 
lšes
 = 
p
 + 1;

4102 *
nod’ame
 = 
NULL
;

4103 
tÙ_size
 = 0;

4104 (
p
 = 
	`¡rchr
(
lše
, ' ')è!ğ
NULL
) {

4105 *
p
 = '\0';

4106 *
tok’
 = 
lše
;

4107 
lše
 = 
p
 + 1;

4108 ià(
i
 == 0) {

4109 
nod’ame
 = 
tok’
;

4110 
tÙ_size
 = (
p
 - 
tok’
);

4111 
Çme_Ën
 = 
tÙ_size
++;

4113 ià(++
i
 == 8) ;

4115 ià(
i
 != 8) ;

4116 ià(
nod’ame
 =ğ
NULL
) ;

4117 
»maššg
 = 
	`¡¾’
(
lše
);

4118 ià(
»maššg
 == 0) ;

4119 **
¦Ùs
 = 
NULL
;

4120 
c
 = 0;

4121 
»maššg
 > 0) {

4122 
p
 = 
	`¡rchr
(
lše
, ' ');

4123 ià(
p
 =ğ
NULL
è°ğ
lše
 + 
»maššg
;

4124 
size
 = (
p
 - 
lše
);

4125 
»maššg
 -ğ
size
;

4126 
tÙ_size
 +ğ
size
;

4127 *
¦Ùsdef
 = 
lše
;

4128 *
p
 = '\0';

4129 ià(
»maššg
) {

4130 
lše
 = 
p
 + 1;

4131 
»maššg
--;

4132 } 
lše
 = 
p
;

4133 ià(
¦Ùsdef
[0] != '[') {

4134 
c
++;

4135 
¦Ùs
 = 
	`z»®loc
(¦Ùs, (
c
 * (*)));

4136 
¦Ùs
[
c
 - 1] = 
¦Ùsdef
;

4139 ià(
c
 > 0) {

4140 ià(
c
 > 1)

4141 
	`qsÜt
(
¦Ùs
, 
c
, (*), 
şu¡”Mªag”SlÙCom·»
);

4142 
node_couÁ
++;

4143 
node_cÚfigs
 =

4144 
	`z»®loc
(
node_cÚfigs
, (
node_couÁ
 * (*)));

4146 
tÙ_size
 +ğ((è* (
c
 - 1));

4147 *
cfg
 = 
	`zm®loc
(((è* 
tÙ_size
) + 1);

4148 
	`memıy
(
cfg
, 
nod’ame
, 
Çme_Ën
);

4149 *
¥
 = 
cfg
 + 
Çme_Ën
;

4150 *(
¥
++) = ':';

4151 
i
 = 0; i < 
c
; i++) {

4152 ià(
i
 > 0è*(
¥
++) = ',';

4153 
¦’
 = 
	`¡¾’
(
¦Ùs
[
i
]);

4154 
	`memıy
(
¥
, 
¦Ùs
[
i
], 
¦’
);

4155 
¥
 +ğ
¦’
;

4157 *(
¥
++) = '\0';

4158 
node_cÚfigs
[
node_couÁ
 - 1] = 
cfg
;

4160 
	`zä“
(
¦Ùs
);

4162 ià(
node_couÁ
 > 0) {

4163 ià(
node_couÁ
 > 1) {

4164 
	`qsÜt
(
node_cÚfigs
, 
node_couÁ
, (*),

4165 
şu¡”Mªag”SlÙCom·»
);

4167 
sigÇtu»
 = 
	`sd£m±y
();

4168 
i
 = 0; i < 
node_couÁ
; i++) {

4169 ià(
i
 > 0è
sigÇtu»
 = 
	`sdsÿrštf
(signature, "%c", '|');

4170 
sigÇtu»
 = 
	`sdsÿtfmt
(sigÇtu», "%s", 
node_cÚfigs
[
i
]);

4173 
ş—nup
:

4174 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

4175 ià(
node_cÚfigs
 !ğ
NULL
) {

4176 
i
 = 0; i < 
node_couÁ
; i++è
	`zä“
(
node_cÚfigs
[i]);

4177 
	`zä“
(
node_cÚfigs
);

4179  
sigÇtu»
;

4180 
	}
}

4182 
	$şu¡”Mªag”IsCÚfigCÚsi¡’t
() {

4183 ià(
şu¡”_mªag”
.
nodes
 =ğ
NULL
)  0;

4184 
cÚsi¡’t
 = (
	`li¡L’gth
(
şu¡”_mªag”
.
nodes
) <= 1);

4186 ià(
cÚsi¡’t
)  1;

4187 
sds
 
fœ¡_cfg
 = 
NULL
;

4188 
li¡I‹r
 
li
;

4189 
li¡Node
 *
Ê
;

4190 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4191 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4192 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

4193 
sds
 
cfg
 = 
	`şu¡”Mªag”G‘CÚfigSigÇtu»
(
node
);

4194 ià(
cfg
 =ğ
NULL
) {

4195 
cÚsi¡’t
 = 0;

4198 ià(
fœ¡_cfg
 =ğ
NULL
èfœ¡_cfg = 
cfg
;

4200 
cÚsi¡’t
 = !
	`sdscmp
(
fœ¡_cfg
, 
cfg
);

4201 
	`sdsä“
(
cfg
);

4202 ià(!
cÚsi¡’t
) ;

4205 ià(
fœ¡_cfg
 !ğ
NULL
è
	`sdsä“
(first_cfg);

4206  
cÚsi¡’t
;

4207 
	}
}

4209 
li¡
 *
	$şu¡”Mªag”G‘DiscÚÃùedLšks
(
şu¡”Mªag”Node
 *
node
) {

4210 
li¡
 *
lšks
 = 
NULL
;

4211 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "CLUSTER NODES");

4212 ià(!
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
»¶y
, 
NULL
)è
ş—nup
;

4213 
lšks
 = 
	`li¡C»©e
();

4214 *
lšes
 = 
»¶y
->
¡r
, *
p
, *
lše
;

4215 (
p
 = 
	`¡r¡r
(
lšes
, "\n")è!ğ
NULL
) {

4216 
i
 = 0;

4217 *
p
 = '\0';

4218 
lše
 = 
lšes
;

4219 
lšes
 = 
p
 + 1;

4220 *
nod’ame
 = 
NULL
, *
addr
 = NULL, *
æags
 = NULL, *
lšk_¡©us
 = NULL;

4221 (
p
 = 
	`¡rchr
(
lše
, ' ')è!ğ
NULL
) {

4222 *
p
 = '\0';

4223 *
tok’
 = 
lše
;

4224 
lše
 = 
p
 + 1;

4225 ià(
i
 =ğ0è
nod’ame
 = 
tok’
;

4226 ià(
i
 =ğ1è
addr
 = 
tok’
;

4227 ià(
i
 =ğ2è
æags
 = 
tok’
;

4228 ià(
i
 =ğ7è
lšk_¡©us
 = 
tok’
;

4229 ià(
i
 == 8) ;

4230 
i
++;

4232 ià(
i
 =ğ7è
lšk_¡©us
 = 
lše
;

4233 ià(
nod’ame
 =ğ
NULL
 || 
addr
 =ğNULL || 
æags
 == NULL ||

4234 
lšk_¡©us
 =ğ
NULL
) ;

4235 ià(
	`¡r¡r
(
æags
, "my£lf"è!ğ
NULL
) ;

4236 
discÚÃùed
 = ((
	`¡r¡r
(
æags
, "discÚÃùed"è!ğ
NULL
) ||

4237 (
	`¡r¡r
(
lšk_¡©us
, "disconnected")));

4238 
hªdshakšg
 = (
	`¡r¡r
(
æags
, "hªdshake"è!ğ
NULL
);

4239 ià(
discÚÃùed
 || 
hªdshakšg
) {

4240 
şu¡”Mªag”Lšk
 *
lšk
 = 
	`zm®loc
((*link));

4241 
lšk
->
node_Çme
 = 
	`sd¢ew
(
nod’ame
);

4242 
lšk
->
node_addr
 = 
	`sd¢ew
(
addr
);

4243 
lšk
->
cÚÃùed
 = 0;

4244 
lšk
->
hªdshakšg
 = handshaking;

4245 
	`li¡AddNodeTa
(
lšks
, 
lšk
);

4248 
ş—nup
:

4249 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

4250  
lšks
;

4251 
	}
}

4256 
diù
 *
	$şu¡”Mªag”G‘LškStus
() {

4257 ià(
şu¡”_mªag”
.
nodes
 =ğ
NULL
)  NULL;

4258 
diù
 *
¡©us
 = 
	`diùC»©e
(&
şu¡”Mªag”LškDiùTy³
, 
NULL
);

4259 
li¡I‹r
 
li
;

4260 
li¡Node
 *
Ê
;

4261 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4262 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4263 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

4264 
li¡
 *
lšks
 = 
	`şu¡”Mªag”G‘DiscÚÃùedLšks
(
node
);

4265 ià(
lšks
) {

4266 
li¡I‹r
 
Îi
;

4267 
li¡Node
 *
În
;

4268 
	`li¡Rewšd
(
lšks
, &
Îi
);

4269 (
În
 = 
	`li¡Next
(&
Îi
)è!ğ
NULL
) {

4270 
şu¡”Mªag”Lšk
 *
lšk
 = 
În
->
v®ue
;

4271 
li¡
 *
äom
 = 
NULL
;

4272 
diùEÁry
 *
’Œy
 = 
	`diùFšd
(
¡©us
, 
lšk
->
node_addr
);

4273 ià(
’Œy
è
äom
 = 
	`diùG‘V®
(entry);

4275 
äom
 = 
	`li¡C»©e
();

4276 
	`diùAdd
(
¡©us
, 
	`sdsdup
(
lšk
->
node_addr
), 
äom
);

4278 
sds
 
myaddr
 = 
	`sd£m±y
();

4279 
myaddr
 = 
	`sdsÿtfmt
(myaddr, "%s:%u", 
node
->

,‚ode->
pÜt
);

4280 
	`li¡AddNodeTa
(
äom
, 
myaddr
);

4281 
	`sdsä“
(
lšk
->
node_Çme
);

4282 
	`sdsä“
(
lšk
->
node_addr
);

4283 
	`zä“
(
lšk
);

4285 
	`li¡R–—£
(
lšks
);

4288  
¡©us
;

4289 
	}
}

4292 
	$şu¡”Mªag”OnE¼Ü
(
sds
 
”r
) {

4293 ià(
şu¡”_mªag”
.
”rÜs
 =ğ
NULL
)

4294 
şu¡”_mªag”
.
”rÜs
 = 
	`li¡C»©e
();

4295 
	`li¡AddNodeTa
(
şu¡”_mªag”
.
”rÜs
, 
”r
);

4296 
	`şu¡”Mªag”LogE¼
("%s\n", (*è
”r
);

4297 
	}
}

4302 
	$şu¡”Mªag”G‘Cov”edSlÙs
(*
®l_¦Ùs
) {

4303 ià(
şu¡”_mªag”
.
nodes
 =ğ
NULL
)  0;

4304 
li¡I‹r
 
li
;

4305 
li¡Node
 *
Ê
;

4306 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4307 
tÙ¦Ùs
 = 0, 
i
;

4308 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4309 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

4310 
i
 = 0; i < 
CLUSTER_MANAGER_SLOTS
; i++) {

4311 ià(
node
->
¦Ùs
[
i
] && !
®l_¦Ùs
[i]) {

4312 
®l_¦Ùs
[
i
] = 1;

4313 
tÙ¦Ùs
++;

4317  
tÙ¦Ùs
;

4318 
	}
}

4320 
	$şu¡”Mªag”PrštSlÙsLi¡
(
li¡
 *
¦Ùs
) {

4321 
şu¡”Mªag”Node
 
n
 = {0};

4322 
li¡I‹r
 
li
;

4323 
li¡Node
 *
Ê
;

4324 
	`li¡Rewšd
(
¦Ùs
, &
li
);

4325 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4326 
¦Ù
 = 
	`©oi
(
Ê
->
v®ue
);

4327 ià(
¦Ù
 >ğ0 && slÙ < 
CLUSTER_MANAGER_SLOTS
)

4328 
n
.
¦Ùs
[
¦Ù
] = 1;

4330 
sds
 
node¦i¡
 = 
	`şu¡”Mªag”NodeSlÙsSŒšg
(&
n
);

4331 
	`´štf
("%s\n", 
node¦i¡
);

4332 
	`sdsä“
(
node¦i¡
);

4333 
	}
}

4337 
şu¡”Mªag”Node
 * 
	$şu¡”Mªag”G‘NodeW™hMo¡KeysInSlÙ
(
li¡
 *
nodes
,

4338 
¦Ù
,

4339 **
”r
)

4341 
şu¡”Mªag”Node
 *
node
 = 
NULL
;

4342 
numkeys
 = 0;

4343 
li¡I‹r
 
li
;

4344 
li¡Node
 *
Ê
;

4345 
	`li¡Rewšd
(
nodes
, &
li
);

4346 ià(
”r
è*”¸ğ
NULL
;

4347 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4348 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4349 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
 ||‚->
»¶iÿ‹
)

4351 
»disR•ly
 *
r
 =

4352 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER COUNTKEYSINSLOT %d", 
¦Ù
);

4353 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
”r
);

4354 ià(
sucûss
) {

4355 ià(
r
->
š‹g”
 > 
numkeys
 || 
node
 =ğ
NULL
) {

4356 
numkeys
 = 
r
->
š‹g”
;

4357 
node
 = 
n
;

4360 ià(
r
 !ğ
NULL
è
	`ä“R•lyObjeù
(r);

4362 ià(!
sucûss
) {

4363 ià(
”r
 !ğ
NULL
 && *err != NULL)

4364 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
n
, 
”r
);

4365 
node
 = 
NULL
;

4369  
node
;

4370 
	}
}

4376 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”NodeW™hL—¡R•liÿs
() {

4377 
şu¡”Mªag”Node
 *
node
 = 
NULL
;

4378 
lowe¡_couÁ
 = 0;

4379 
li¡I‹r
 
li
;

4380 
li¡Node
 *
Ê
;

4381 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4382 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4383 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4384 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4385 ià(
node
 =ğ
NULL
 || 
n
->
»¶iÿs_couÁ
 < 
lowe¡_couÁ
) {

4386 
node
 = 
n
;

4387 
lowe¡_couÁ
 = 
n
->
»¶iÿs_couÁ
;

4390  
node
;

4391 
	}
}

4395 
şu¡”Mªag”Node
 *
	$şu¡”Mªag”NodeMa¡”Rªdom
() {

4396 
ma¡”_couÁ
 = 0;

4397 
idx
;

4398 
li¡I‹r
 
li
;

4399 
li¡Node
 *
Ê
;

4400 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4401 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4402 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4403 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4404 
ma¡”_couÁ
++;

4407 
	`¤ªd
(
	`time
(
NULL
));

4408 
idx
 = 
	`¿nd
(è% 
ma¡”_couÁ
;

4409 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4410 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4411 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4412 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4413 ià(!
idx
--) {

4414  
n
;

4418  
NULL
;

4419 
	}
}

4421 
	$şu¡”Mªag”FixSlÙsCov”age
(*
®l_¦Ùs
) {

4422 
fÜû_fix
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

4423 
CLUSTER_MANAGER_CMD_FLAG_FIX_WITH_UNREACHABLE_MASTERS
;

4425 ià(
şu¡”_mªag”
.
uÄ—chabË_ma¡”s
 > 0 && !
fÜû_fix
) {

4426 
	`şu¡”Mªag”LogW¬n
("*** Fixšg slÙ cov”agw™h %d uÄ—chabË ma¡” i dªg”ous:„edis-ş˜wÈassumth© slÙ abouˆma¡” th©‡»‚Ù„—chabË‡»‚Ù cov”ed,‡nd wÈŒyØ»assigÀthemØth»achabË‚odes. Thi ÿÀÿu£ d©¨los ªd i ¿»ly wh© you wªˆtØdo. Iàyou„—Îy wªˆtØ´oûed u£h--şu¡”-fix-w™h-uÄ—chabË-ma¡” İtiÚ.\n", 
şu¡”_mªag”
.
uÄ—chabË_ma¡”s
);

4427 
	`ex™
(1);

4430 
i
, 
fixed
 = 0;

4431 
li¡
 *
nÚe
 = 
NULL
, *
sšgË
 = NULL, *
muÉi
 = NULL;

4432 
	`şu¡”Mªag”LogInfo
(">>> Fixing slots coverage...\n");

4433 
i
 = 0; i < 
CLUSTER_MANAGER_SLOTS
; i++) {

4434 
cov”ed
 = 
®l_¦Ùs
[
i
];

4435 ià(!
cov”ed
) {

4436 
sds
 
¦Ù
 = 
	`sdsäomlÚglÚg
((è
i
);

4437 
li¡
 *
¦Ù_nodes
 = 
	`li¡C»©e
();

4438 
sds
 
¦Ù_nodes_¡r
 = 
	`sd£m±y
();

4439 
li¡I‹r
 
li
;

4440 
li¡Node
 *
Ê
;

4441 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4442 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4443 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4444 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
 ||‚->
»¶iÿ‹
)

4446 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
,

4447 "CLUSTER GETKEYSINSLOT %d %d", 
i
, 1);

4448 ià(!
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
»¶y
, 
NULL
)) {

4449 
fixed
 = -1;

4450 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

4451 
ş—nup
;

4453 
	`as£¹
(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

4454 ià(
»¶y
->
–em’ts
 > 0) {

4455 
	`li¡AddNodeTa
(
¦Ù_nodes
, 
n
);

4456 ià(
	`li¡L’gth
(
¦Ù_nodes
) > 1)

4457 
¦Ù_nodes_¡r
 = 
	`sdsÿt
(slot_nodes_str, ", ");

4458 
¦Ù_nodes_¡r
 = 
	`sdsÿtfmt
(slot_nodes_str,

4459 "%s:%u", 
n
->

,‚->
pÜt
);

4461 
	`ä“R•lyObjeù
(
»¶y
);

4463 
	`sdsä“
(
¦Ù_nodes_¡r
);

4464 
	`diùAdd
(
şu¡”Mªag”Uncov”edSlÙs
, 
¦Ù
, 
¦Ù_nodes
);

4472 
nÚe
 = 
	`li¡C»©e
();

4473 
sšgË
 = 
	`li¡C»©e
();

4474 
muÉi
 = 
	`li¡C»©e
();

4475 
diùI‹¿tÜ
 *
™”
 = 
	`diùG‘I‹¿tÜ
(
şu¡”Mªag”Uncov”edSlÙs
);

4476 
diùEÁry
 *
’Œy
;

4477 (
’Œy
 = 
	`diùNext
(
™”
)è!ğ
NULL
) {

4478 
sds
 
¦Ù
 = (sdsè
	`diùG‘Key
(
’Œy
);

4479 
li¡
 *
nodes
 = (li¡ *è
	`diùG‘V®
(
’Œy
);

4480 
	`li¡L’gth
(
nodes
)){

4481 0: 
	`li¡AddNodeTa
(
nÚe
, 
¦Ù
); ;

4482 1: 
	`li¡AddNodeTa
(
sšgË
, 
¦Ù
); ;

4483 : 
	`li¡AddNodeTa
(
muÉi
, 
¦Ù
); ;

4486 
	`diùR–—£I‹¿tÜ
(
™”
);

4489 ià(
	`li¡L’gth
(
nÚe
) > 0) {

4490 
	`´štf
("The following uncovered slots have‚o keys "

4492 
	`şu¡”Mªag”PrštSlÙsLi¡
(
nÚe
);

4493 ià(
	`cÚfœmW™hYes
("Fixhese slots by covering with‡„andom‚ode?")){

4494 
li¡I‹r
 
li
;

4495 
li¡Node
 *
Ê
;

4496 
	`li¡Rewšd
(
nÚe
, &
li
);

4497 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4498 
sds
 
¦Ù
 = 
Ê
->
v®ue
;

4499 
s
 = 
	`©oi
(
¦Ù
);

4500 
şu¡”Mªag”Node
 *
n
 = 
	`şu¡”Mªag”NodeMa¡”Rªdom
();

4501 
	`şu¡”Mªag”LogInfo
(">>> Covering slot %s with %s:%d\n",

4502 
¦Ù
, 
n
->

,‚->
pÜt
);

4503 ià(!
	`şu¡”Mªag”S‘SlÙOwÃr
(
n
, 
s
, 0)) {

4504 
fixed
 = -1;

4505 
ş—nup
;

4509 
n
->
¦Ùs
[
s
] = 1;

4510 
fixed
++;

4516 ià(
	`li¡L’gth
(
sšgË
) > 0) {

4517 
	`´štf
("The following uncovered slots have keys in just one‚ode:\n");

4518 
	`şu¡”Mªag”PrštSlÙsLi¡
(
sšgË
);

4519 ià(
	`cÚfœmW™hYes
("Fixhese slots by covering withhose‚odes?")){

4520 
li¡I‹r
 
li
;

4521 
li¡Node
 *
Ê
;

4522 
	`li¡Rewšd
(
sšgË
, &
li
);

4523 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4524 
sds
 
¦Ù
 = 
Ê
->
v®ue
;

4525 
s
 = 
	`©oi
(
¦Ù
);

4526 
diùEÁry
 *
’Œy
 = 
	`diùFšd
(
şu¡”Mªag”Uncov”edSlÙs
, 
¦Ù
);

4527 
	`as£¹
(
’Œy
 !ğ
NULL
);

4528 
li¡
 *
nodes
 = (li¡ *è
	`diùG‘V®
(
’Œy
);

4529 
li¡Node
 *
â
 = 
	`li¡Fœ¡
(
nodes
);

4530 
	`as£¹
(
â
 !ğ
NULL
);

4531 
şu¡”Mªag”Node
 *
n
 = 
â
->
v®ue
;

4532 
	`şu¡”Mªag”LogInfo
(">>> Covering slot %s with %s:%d\n",

4533 
¦Ù
, 
n
->

,‚->
pÜt
);

4534 ià(!
	`şu¡”Mªag”S‘SlÙOwÃr
(
n
, 
s
, 0)) {

4535 
fixed
 = -1;

4536 
ş—nup
;

4540 
n
->
¦Ùs
[
	`©oi
(
¦Ù
)] = 1;

4541 
fixed
++;

4547 ià(
	`li¡L’gth
(
muÉi
) > 0) {

4548 
	`´štf
("The following uncovered slots have keys in multiple‚odes:\n");

4549 
	`şu¡”Mªag”PrštSlÙsLi¡
(
muÉi
);

4550 ià(
	`cÚfœmW™hYes
("Fixhese slots by moving keys "

4552 
li¡I‹r
 
li
;

4553 
li¡Node
 *
Ê
;

4554 
	`li¡Rewšd
(
muÉi
, &
li
);

4555 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4556 
sds
 
¦Ù
 = 
Ê
->
v®ue
;

4557 
diùEÁry
 *
’Œy
 = 
	`diùFšd
(
şu¡”Mªag”Uncov”edSlÙs
, 
¦Ù
);

4558 
	`as£¹
(
’Œy
 !ğ
NULL
);

4559 
li¡
 *
nodes
 = (li¡ *è
	`diùG‘V®
(
’Œy
);

4560 
s
 = 
	`©oi
(
¦Ù
);

4561 
şu¡”Mªag”Node
 *
rg‘
 =

4562 
	`şu¡”Mªag”G‘NodeW™hMo¡KeysInSlÙ
(
nodes
, 
s
, 
NULL
);

4563 ià(
rg‘
 =ğ
NULL
) {

4564 
fixed
 = -1;

4565 
ş—nup
;

4567 
	`şu¡”Mªag”LogInfo
(">>> Covering slot %s moving keys "

4568 "tØ%s:%d\n", 
¦Ù
,

4569 
rg‘
->

,¬g‘->
pÜt
);

4570 ià(!
	`şu¡”Mªag”S‘SlÙOwÃr
(
rg‘
, 
s
, 1)) {

4571 
fixed
 = -1;

4572 
ş—nup
;

4576 
rg‘
->
¦Ùs
[
	`©oi
(
¦Ù
)] = 1;

4577 
li¡I‹r
 
Æi
;

4578 
li¡Node
 *
Æn
;

4579 
	`li¡Rewšd
(
nodes
, &
Æi
);

4580 (
Æn
 = 
	`li¡Next
(&
Æi
)è!ğ
NULL
) {

4581 
şu¡”Mªag”Node
 *
¤c
 = 
Æn
->
v®ue
;

4582 ià(
¤c
 =ğ
rg‘
) ;

4584 ià(!
	`şu¡”Mªag”S‘SlÙ
(
¤c
, 
rg‘
, 
s
, "NODE", 
NULL
))

4585 
fixed
 = -1;

4586 ià(
fixed
 < 0è
ş—nup
;

4591 ià(!
	`şu¡”Mªag”S‘SlÙ
(
¤c
, 
rg‘
, 
s
,

4592 "IMPORTING", 
NULL
)è
fixed
 = -1;

4593 ià(
fixed
 < 0è
ş—nup
;

4594 
İts
 = 
CLUSTER_MANAGER_OPT_VERBOSE
 |

4595 
CLUSTER_MANAGER_OPT_COLD
;

4596 ià(!
	`şu¡”Mªag”MoveSlÙ
(
¤c
, 
rg‘
, 
s
, 
İts
, 
NULL
)) {

4597 
fixed
 = -1;

4598 
ş—nup
;

4600 ià(!
	`şu¡”Mªag”CË¬SlÙStus
(
¤c
, 
s
))

4601 
fixed
 = -1;

4602 ià(
fixed
 < 0è
ş—nup
;

4604 
fixed
++;

4608 
ş—nup
:

4609 ià(
nÚe
è
	`li¡R–—£
(none);

4610 ià(
sšgË
è
	`li¡R–—£
(single);

4611 ià(
muÉi
è
	`li¡R–—£
(multi);

4612  
fixed
;

4613 
	}
}

4618 
	$şu¡”Mªag”FixO³nSlÙ
(
¦Ù
) {

4619 
fÜû_fix
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

4620 
CLUSTER_MANAGER_CMD_FLAG_FIX_WITH_UNREACHABLE_MASTERS
;

4622 ià(
şu¡”_mªag”
.
uÄ—chabË_ma¡”s
 > 0 && !
fÜû_fix
) {

4623 
	`şu¡”Mªag”LogW¬n
("*** Fixšg o³À¦Ù w™h %d uÄ—chabË ma¡” i dªg”ous:„edis-ş˜wÈassumth© slÙ abouˆma¡” th©‡»‚Ù„—chabË‡»‚Ù cov”ed,‡nd wÈŒyØ»assigÀthemØth»achabË‚odes. Thi ÿÀÿu£ d©¨los ªd i ¿»ly wh© you wªˆtØdo. Iàyou„—Îy wªˆtØ´oûed u£h--şu¡”-fix-w™h-uÄ—chabË-ma¡” İtiÚ.\n", 
şu¡”_mªag”
.
uÄ—chabË_ma¡”s
);

4624 
	`ex™
(1);

4627 
	`şu¡”Mªag”LogInfo
(">>> Fixšg o³À¦Ù %d\n", 
¦Ù
);

4630 
sucûss
 = 1;

4631 
li¡
 *
owÃrs
 = 
	`li¡C»©e
();

4635 
li¡
 *
mig¿tšg
 = 
	`li¡C»©e
();

4636 
li¡
 *
impÜtšg
 = 
	`li¡C»©e
();

4637 
sds
 
mig¿tšg_¡r
 = 
	`sd£m±y
();

4638 
sds
 
impÜtšg_¡r
 = 
	`sd£m±y
();

4639 
şu¡”Mªag”Node
 *
owÃr
 = 
NULL
;

4642 
li¡I‹r
 
li
;

4643 
li¡Node
 *
Ê
;

4644 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4645 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4646 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4647 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4648 ià(
n
->
¦Ùs
[
¦Ù
]) {

4649 
	`li¡AddNodeTa
(
owÃrs
, 
n
);

4651 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
,

4652 "CLUSTER COUNTKEYSINSLOT %d", 
¦Ù
);

4653 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

4654 ià(
sucûss
 && 
r
->
š‹g”
 > 0) {

4655 
	`şu¡”Mªag”LogW¬n
("*** Found keys‡bout slot %d "

4656 "š‚Ú-owÃ¸nod%s:%d!\n", 
¦Ù
,

4657 
n
->

,‚->
pÜt
);

4658 
	`li¡AddNodeTa
(
owÃrs
, 
n
);

4660 ià(
r
è
	`ä“R•lyObjeù
(r);

4661 ià(!
sucûss
è
ş—nup
;

4667 ià(
	`li¡L’gth
(
owÃrs
è=ğ1è
owÃr
 = 
	`li¡Fœ¡
(owÃrs)->
v®ue
;

4672 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4673 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4674 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4675 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4676 
is_mig¿tšg
 = 0, 
is_impÜtšg
 = 0;

4677 ià(
n
->
mig¿tšg
) {

4678 
i
 = 0; i < 
n
->
mig¿tšg_couÁ
; i += 2) {

4679 
sds
 
mig¿tšg_¦Ù
 = 
n
->
mig¿tšg
[
i
];

4680 ià(
	`©oi
(
mig¿tšg_¦Ù
è=ğ
¦Ù
) {

4681 *
£p
 = (
	`li¡L’gth
(
mig¿tšg
) == 0 ? "" : ",");

4682 
mig¿tšg_¡r
 = 
	`sdsÿtfmt
(migrating_str, "%s%s:%u",

4683 
£p
, 
n
->

,‚->
pÜt
);

4684 
	`li¡AddNodeTa
(
mig¿tšg
, 
n
);

4685 
is_mig¿tšg
 = 1;

4690 ià(!
is_mig¿tšg
 && 
n
->
impÜtšg
) {

4691 
i
 = 0; i < 
n
->
impÜtšg_couÁ
; i += 2) {

4692 
sds
 
impÜtšg_¦Ù
 = 
n
->
impÜtšg
[
i
];

4693 ià(
	`©oi
(
impÜtšg_¦Ù
è=ğ
¦Ù
) {

4694 *
£p
 = (
	`li¡L’gth
(
impÜtšg
) == 0 ? "" : ",");

4695 
impÜtšg_¡r
 = 
	`sdsÿtfmt
(importing_str, "%s%s:%u",

4696 
£p
, 
n
->

,‚->
pÜt
);

4697 
	`li¡AddNodeTa
(
impÜtšg
, 
n
);

4698 
is_impÜtšg
 = 1;

4707 ià(!
is_mig¿tšg
 && !
is_impÜtšg
 && 
n
 !ğ
owÃr
) {

4708 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
,

4709 "CLUSTER COUNTKEYSINSLOT %d", 
¦Ù
);

4710 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

4711 ià(
sucûss
 && 
r
->
š‹g”
 > 0) {

4712 
	`şu¡”Mªag”LogW¬n
("*** Found keys‡bout slot %d "

4713 "š‚od%s:%d!\n", 
¦Ù
, 
n
->

,

4714 
n
->
pÜt
);

4715 *
£p
 = (
	`li¡L’gth
(
impÜtšg
) == 0 ? "" : ",");

4716 
impÜtšg_¡r
 = 
	`sdsÿtfmt
(importing_str, "%s%S:%u",

4717 
£p
, 
n
->

,‚->
pÜt
);

4718 
	`li¡AddNodeTa
(
impÜtšg
, 
n
);

4720 ià(
r
è
	`ä“R•lyObjeù
(r);

4721 ià(!
sucûss
è
ş—nup
;

4724 ià(
	`sd¦’
(
mig¿tšg_¡r
) > 0)

4725 
	`´štf
("S‘‡ mig¿tšg in: %s\n", 
mig¿tšg_¡r
);

4726 ià(
	`sd¦’
(
impÜtšg_¡r
) > 0)

4727 
	`´štf
("S‘‡ impÜtšg in: %s\n", 
impÜtšg_¡r
);

4731 ià(
owÃr
 =ğ
NULL
) {

4732 
	`şu¡”Mªag”LogInfo
(">>> No single clear owner forhe slot, "

4734 
owÃr
 = 
	`şu¡”Mªag”G‘NodeW™hMo¡KeysInSlÙ
(
şu¡”_mªag”
.
nodes
,

4735 
¦Ù
, 
NULL
);

4737 ià(
owÃr
 =ğ
NULL
) {

4738 
	`şu¡”Mªag”LogE¼
("[ERR] Can't select‡ slot owner. "

4740 
sucûss
 = 0;

4741 
ş—nup
;

4745 
	`şu¡”Mªag”LogW¬n
("*** Configuring %s:%d‡she slot owner\n",

4746 
owÃr
->

, owÃr->
pÜt
);

4747 
sucûss
 = 
	`şu¡”Mªag”CË¬SlÙStus
(
owÃr
, 
¦Ù
);

4748 ià(!
sucûss
è
ş—nup
;

4749 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙOwÃr
(
owÃr
, 
¦Ù
, 0);

4750 ià(!
sucûss
è
ş—nup
;

4753 
owÃr
->
¦Ùs
[
¦Ù
] = 1;

4757 
sucûss
 = 
	`şu¡”Mªag”BumpEpoch
(
owÃr
);

4758 ià(!
sucûss
è
ş—nup
;

4761 
	`şu¡”Mªag”RemoveNodeFromLi¡
(
mig¿tšg
, 
owÃr
);

4762 
	`şu¡”Mªag”RemoveNodeFromLi¡
(
impÜtšg
, 
owÃr
);

4773 ià(
	`li¡L’gth
(
owÃrs
) > 1) {

4776 
	`as£¹
(
owÃr
 !ğ
NULL
);

4777 
	`li¡Rewšd
(
owÃrs
, &
li
);

4778 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4779 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4780 ià(
n
 =ğ
owÃr
) ;

4781 
sucûss
 = 
	`şu¡”Mªag”D–SlÙ
(
n
, 
¦Ù
, 1);

4782 ià(!
sucûss
è
ş—nup
;

4783 
n
->
¦Ùs
[
¦Ù
] = 0;

4785 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙ
(
n
, 
owÃr
, 
¦Ù
, "node", 
NULL
);

4786 ià(!
sucûss
è
ş—nup
;

4787 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙ
(
n
, 
owÃr
, 
¦Ù
, "impÜtšg", 
NULL
);

4788 ià(!
sucûss
è
ş—nup
;

4790 
	`şu¡”Mªag”RemoveNodeFromLi¡
(
impÜtšg
, 
n
);

4791 
	`li¡AddNodeTa
(
impÜtšg
, 
n
);

4793 
	`şu¡”Mªag”RemoveNodeFromLi¡
(
mig¿tšg
, 
n
);

4796 
move_İts
 = 
CLUSTER_MANAGER_OPT_VERBOSE
;

4800 ià(
	`li¡L’gth
(
mig¿tšg
è=ğ1 &&†i¡L’gth(
impÜtšg
) == 1) {

4801 
şu¡”Mªag”Node
 *
¤c
 = 
	`li¡Fœ¡
(
mig¿tšg
)->
v®ue
;

4802 
şu¡”Mªag”Node
 *
d¡
 = 
	`li¡Fœ¡
(
impÜtšg
)->
v®ue
;

4803 
	`şu¡”Mªag”LogInfo
(">>> Case 1: Moving slot %d from "

4804 "%s:%dØ%s:%d\n", 
¦Ù
,

4805 
¤c
->

, src->
pÜt
, 
d¡
->ip, dst->port);

4806 
move_İts
 |ğ
CLUSTER_MANAGER_OPT_UPDATE
;

4807 
sucûss
 = 
	`şu¡”Mªag”MoveSlÙ
(
¤c
, 
d¡
, 
¦Ù
, 
move_İts
, 
NULL
);

4814 ià(
	`li¡L’gth
(
mig¿tšg
è=ğ0 &&†i¡L’gth(
impÜtšg
) > 0) {

4815 
	`şu¡”Mªag”LogInfo
(">>> Case 2: Moving‡llhe %d slot keyso its "

4816 "owÃ¸%s:%d\n", 
¦Ù
, 
owÃr
->

, owÃr->
pÜt
);

4817 
move_İts
 |ğ
CLUSTER_MANAGER_OPT_COLD
;

4818 
	`li¡Rewšd
(
impÜtšg
, &
li
);

4819 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4820 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4821 ià(
n
 =ğ
owÃr
) ;

4822 
sucûss
 = 
	`şu¡”Mªag”MoveSlÙ
(
n
, 
owÃr
, 
¦Ù
, 
move_İts
, 
NULL
);

4823 ià(!
sucûss
è
ş—nup
;

4824 
	`şu¡”Mªag”LogInfo
(">>> Setting %d‡s STABLE in "

4825 "%s:%d\n", 
¦Ù
, 
n
->

,‚->
pÜt
);

4826 
sucûss
 = 
	`şu¡”Mªag”CË¬SlÙStus
(
n
, 
¦Ù
);

4827 ià(!
sucûss
è
ş—nup
;

4831 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4832 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4833 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4834 ià(
n
 =ğ
owÃr
) ;

4835 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4836 
sucûss
 = 
	`şu¡”Mªag”S‘SlÙ
(
n
, 
owÃr
, 
¦Ù
, "NODE", 
NULL
);

4837 ià(!
sucûss
è
ş—nup
;

4850 ià(
	`li¡L’gth
(
mig¿tšg
è=ğ1 &&†i¡L’gth(
impÜtšg
) > 1) {

4851 
Œy_to_fix
 = 1;

4852 
şu¡”Mªag”Node
 *
¤c
 = 
	`li¡Fœ¡
(
mig¿tšg
)->
v®ue
;

4853 
şu¡”Mªag”Node
 *
d¡
 = 
NULL
;

4854 
sds
 
rg‘_id
 = 
NULL
;

4855 
i
 = 0; i < 
¤c
->
mig¿tšg_couÁ
; i += 2) {

4856 
sds
 
mig¿tšg_¦Ù
 = 
¤c
->
mig¿tšg
[
i
];

4857 ià(
	`©oi
(
mig¿tšg_¦Ù
è=ğ
¦Ù
) {

4858 
rg‘_id
 = 
¤c
->
mig¿tšg
[
i
 + 1];

4862 
	`as£¹
(
rg‘_id
 !ğ
NULL
);

4863 
li¡I‹r
 
li
;

4864 
li¡Node
 *
Ê
;

4865 
	`li¡Rewšd
(
impÜtšg
, &
li
);

4866 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4867 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4868 
couÁ
 = 
	`şu¡”Mªag”CouÁKeysInSlÙ
(
n
, 
¦Ù
);

4869 ià(
couÁ
 > 0) {

4870 
Œy_to_fix
 = 0;

4873 ià(
	`¡rcmp
(
n
->
Çme
, 
rg‘_id
è=ğ0è
d¡
 =‚;

4875 ià(!
Œy_to_fix
è
unhªdËd_ÿ£
;

4876 ià(
d¡
 !ğ
NULL
) {

4877 
	`şu¡”Mªag”LogInfo
(">>> Case 3: Moving slot %d from %s:%do "

4880 
¦Ù
, 
¤c
->

, src->
pÜt
,

4881 
d¡
->

, d¡->
pÜt
);

4883 
sucûss
 = 
	`şu¡”Mªag”MoveSlÙ
(
¤c
, 
d¡
, 
¦Ù
, 
move_İts
, 
NULL
);

4884 ià(!
sucûss
è
ş—nup
;

4886 
	`li¡Rewšd
(
impÜtšg
, &
li
);

4887 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4888 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4889 ià(
d¡
 =ğ
n
) ;

4890 
sucûss
 = 
	`şu¡”Mªag”CË¬SlÙStus
(
n
, 
¦Ù
);

4891 ià(!
sucûss
è
ş—nup
;

4894 
	`şu¡”Mªag”LogInfo
(">>> Case 3: Closing slot %d on both "

4895 "mig¿tšg‡nd impÜtšg‚odes.\n", 
¦Ù
);

4898 
sucûss
 = 
	`şu¡”Mªag”CË¬SlÙStus
(
¤c
, 
¦Ù
);

4899 ià(!
sucûss
è
ş—nup
;

4900 
	`li¡Rewšd
(
impÜtšg
, &
li
);

4901 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4902 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4903 
sucûss
 = 
	`şu¡”Mªag”CË¬SlÙStus
(
n
, 
¦Ù
);

4904 ià(!
sucûss
è
ş—nup
;

4908 
Œy_to_şo£_¦Ù
 = (
	`li¡L’gth
(
impÜtšg
) == 0 &&

4909 
	`li¡L’gth
(
mig¿tšg
) == 1);

4910 ià(
Œy_to_şo£_¦Ù
) {

4911 
şu¡”Mªag”Node
 *
n
 = 
	`li¡Fœ¡
(
mig¿tšg
)->
v®ue
;

4912 ià(!
owÃr
 || owÃ¸!ğ
n
) {

4913 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
,

4914 "CLUSTER GETKEYSINSLOT %d %d", 
¦Ù
, 10);

4915 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

4916 ià(
r
) {

4917 ià(
sucûss
è
Œy_to_şo£_¦Ù
 = (
r
->
–em’ts
 == 0);

4918 
	`ä“R•lyObjeù
(
r
);

4920 ià(!
sucûss
è
ş—nup
;

4927 ià(
Œy_to_şo£_¦Ù
) {

4928 
şu¡”Mªag”Node
 *
n
 = 
	`li¡Fœ¡
(
mig¿tšg
)->
v®ue
;

4929 
	`şu¡”Mªag”LogInfo
(">>> Case 4: Closing slot %d on %s:%d\n",

4930 
¦Ù
, 
n
->

,‚->
pÜt
);

4931 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER SETSLOT %d %s",

4932 
¦Ù
, "STABLE");

4933 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

4934 ià(
r
è
	`ä“R•lyObjeù
(r);

4935 ià(!
sucûss
è
ş—nup
;

4937 
unhªdËd_ÿ£
:

4938 
sucûss
 = 0;

4939 
	`şu¡”Mªag”LogE¼
("[ERR] Sorry,„edis-cli can't fixhis slot "

4942 "owÃ¸i %s:%d\n", 
mig¿tšg_¡r
,

4943 
impÜtšg_¡r
, 
owÃr
->

, owÃr->
pÜt
);

4946 
ş—nup
:

4947 
	`li¡R–—£
(
owÃrs
);

4948 
	`li¡R–—£
(
mig¿tšg
);

4949 
	`li¡R–—£
(
impÜtšg
);

4950 
	`sdsä“
(
mig¿tšg_¡r
);

4951 
	`sdsä“
(
impÜtšg_¡r
);

4952  
sucûss
;

4953 
	}
}

4955 
	$şu¡”Mªag”FixMuÉËSlÙOwÃrs
(
¦Ù
, 
li¡
 *
owÃrs
) {

4956 
	`şu¡”Mªag”LogInfo
(">>> Fixšg muÉË owÃr fÜ slÙ %d...\n", 
¦Ù
);

4957 
sucûss
 = 0;

4958 
	`as£¹
(
	`li¡L’gth
(
owÃrs
) > 1);

4959 
şu¡”Mªag”Node
 *
owÃr
 = 
	`şu¡”Mªag”G‘NodeW™hMo¡KeysInSlÙ
(
owÃrs
,

4960 
¦Ù
,

4961 
NULL
);

4962 ià(!
owÃr
èowÃ¸ğ
	`li¡Fœ¡
(
owÃrs
)->
v®ue
;

4963 
	`şu¡”Mªag”LogInfo
(">>> Setting slot %d owner: %s:%d\n",

4964 
¦Ù
, 
owÃr
->

, owÃr->
pÜt
);

4966 ià(!
	`şu¡”Mªag”S‘SlÙOwÃr
(
owÃr
, 
¦Ù
, 0))  0;

4967 
li¡I‹r
 
li
;

4968 
li¡Node
 *
Ê
;

4969 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

4973 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

4974 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

4975 ià(
n
 =ğ
owÃr
) ;

4976 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

4977 
couÁ
 = 
	`şu¡”Mªag”CouÁKeysInSlÙ
(
n
, 
¦Ù
);

4978 
sucûss
 = (
couÁ
 >= 0);

4979 ià(!
sucûss
) ;

4980 
	`şu¡”Mªag”D–SlÙ
(
n
, 
¦Ù
, 1);

4981 ià(!
	`şu¡”Mªag”S‘SlÙ
(
n
, 
owÃr
, 
¦Ù
, "node", 
NULL
))  0;

4982 ià(
couÁ
 > 0) {

4983 
İts
 = 
CLUSTER_MANAGER_OPT_VERBOSE
 |

4984 
CLUSTER_MANAGER_OPT_COLD
;

4985 
sucûss
 = 
	`şu¡”Mªag”MoveSlÙ
(
n
, 
owÃr
, 
¦Ù
, 
İts
, 
NULL
);

4986 ià(!
sucûss
) ;

4989  
sucûss
;

4990 
	}
}

4992 
	$şu¡”Mªag”CheckClu¡”
(
qu›t
) {

4993 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
şu¡”_mªag”
.
nodes
);

4994 ià(!
Ê
)  0;

4995 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

4996 
	`şu¡”Mªag”LogInfo
(">>> Performing Cluster Check (using‚ode %s:%d)\n",

4997 
node
->

,‚ode->
pÜt
);

4998 
»suÉ
 = 1, 
cÚsi¡’t
 = 0;

4999 
do_fix
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

5000 
CLUSTER_MANAGER_CMD_FLAG_FIX
;

5001 ià(!
qu›t
è
	`şu¡”Mªag”ShowNodes
();

5002 
cÚsi¡’t
 = 
	`şu¡”Mªag”IsCÚfigCÚsi¡’t
();

5003 ià(!
cÚsi¡’t
) {

5004 
sds
 
”r
 = 
	`sd¢ew
("[ERR] Nodes don't‡gree‡bout configuration!");

5005 
	`şu¡”Mªag”OnE¼Ü
(
”r
);

5006 
»suÉ
 = 0;

5008 
	`şu¡”Mªag”LogOk
("[OK] All‚odes‡gree‡bout slots "

5012 
	`şu¡”Mªag”LogInfo
(">>> Check for open slots...\n");

5013 
li¡I‹r
 
li
;

5014 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5015 
i
;

5016 
diù
 *
İ’_¦Ùs
 = 
NULL
;

5017 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5018 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5019 ià(
n
->
mig¿tšg
 !ğ
NULL
) {

5020 ià(
İ’_¦Ùs
 =ğ
NULL
)

5021 
İ’_¦Ùs
 = 
	`diùC»©e
(&
şu¡”Mªag”DiùTy³
, 
NULL
);

5022 
sds
 
”r¡r
 = 
	`sd£m±y
();

5023 
”r¡r
 = 
	`sdsÿrštf
(errstr,

5026 
n
->

,

5027 
n
->
pÜt
);

5028 
i
 = 0; i < 
n
->
mig¿tšg_couÁ
; i += 2) {

5029 
sds
 
¦Ù
 = 
n
->
mig¿tšg
[
i
];

5030 
	`diùR•Ïû
(
İ’_¦Ùs
, 
¦Ù
, 
	`sdsdup
(
n
->
mig¿tšg
[
i
 + 1]));

5031 *
fmt
 = (
i
 > 0 ? ",%S" : "%S");

5032 
”r¡r
 = 
	`sdsÿtfmt
Ó¼¡r, 
fmt
, 
¦Ù
);

5034 
”r¡r
 = 
	`sdsÿt
(errstr, ".");

5035 
	`şu¡”Mªag”OnE¼Ü
(
”r¡r
);

5037 ià(
n
->
impÜtšg
 !ğ
NULL
) {

5038 ià(
İ’_¦Ùs
 =ğ
NULL
)

5039 
İ’_¦Ùs
 = 
	`diùC»©e
(&
şu¡”Mªag”DiùTy³
, 
NULL
);

5040 
sds
 
”r¡r
 = 
	`sd£m±y
();

5041 
”r¡r
 = 
	`sdsÿrštf
(errstr,

5044 
n
->

,

5045 
n
->
pÜt
);

5046 
i
 = 0; i < 
n
->
impÜtšg_couÁ
; i += 2) {

5047 
sds
 
¦Ù
 = 
n
->
impÜtšg
[
i
];

5048 
	`diùR•Ïû
(
İ’_¦Ùs
, 
¦Ù
, 
	`sdsdup
(
n
->
impÜtšg
[
i
 + 1]));

5049 *
fmt
 = (
i
 > 0 ? ",%S" : "%S");

5050 
”r¡r
 = 
	`sdsÿtfmt
Ó¼¡r, 
fmt
, 
¦Ù
);

5052 
”r¡r
 = 
	`sdsÿt
(errstr, ".");

5053 
	`şu¡”Mªag”OnE¼Ü
(
”r¡r
);

5056 ià(
İ’_¦Ùs
 !ğ
NULL
) {

5057 
»suÉ
 = 0;

5058 
diùI‹¿tÜ
 *
™”
 = 
	`diùG‘I‹¿tÜ
(
İ’_¦Ùs
);

5059 
diùEÁry
 *
’Œy
;

5060 
sds
 
”r¡r
 = 
	`sd¢ew
("[WARNING] The following slots‡re open: ");

5061 
i
 = 0;

5062 (
’Œy
 = 
	`diùNext
(
™”
)è!ğ
NULL
) {

5063 
sds
 
¦Ù
 = (sdsè
	`diùG‘Key
(
’Œy
);

5064 *
fmt
 = (
i
++ > 0 ? ",%S" : "%S");

5065 
”r¡r
 = 
	`sdsÿtfmt
Ó¼¡r, 
fmt
, 
¦Ù
);

5067 
	`şu¡”Mªag”LogE¼
("%s.\n", (*è
”r¡r
);

5068 
	`sdsä“
(
”r¡r
);

5069 ià(
do_fix
) {

5071 
	`diùR–—£I‹¿tÜ
(
™”
);

5072 
™”
 = 
	`diùG‘I‹¿tÜ
(
İ’_¦Ùs
);

5073 (
’Œy
 = 
	`diùNext
(
™”
)è!ğ
NULL
) {

5074 
sds
 
¦Ù
 = (sdsè
	`diùG‘Key
(
’Œy
);

5075 
»suÉ
 = 
	`şu¡”Mªag”FixO³nSlÙ
(
	`©oi
(
¦Ù
));

5076 ià(!
»suÉ
) ;

5079 
	`diùR–—£I‹¿tÜ
(
™”
);

5080 
	`diùR–—£
(
İ’_¦Ùs
);

5082 
	`şu¡”Mªag”LogInfo
(">>> Check slots coverage...\n");

5083 
¦Ùs
[
CLUSTER_MANAGER_SLOTS
];

5084 
	`mem£t
(
¦Ùs
, 0, 
CLUSTER_MANAGER_SLOTS
);

5085 
cov”age
 = 
	`şu¡”Mªag”G‘Cov”edSlÙs
(
¦Ùs
);

5086 ià(
cov”age
 =ğ
CLUSTER_MANAGER_SLOTS
) {

5087 
	`şu¡”Mªag”LogOk
("[OK] All %d slots covered.\n",

5088 
CLUSTER_MANAGER_SLOTS
);

5090 
sds
 
”r
 = 
	`sd£m±y
();

5091 
”r
 = 
	`sdsÿrštf
(err, "[ERR] Not‡ll %d slots‡re "

5093 
CLUSTER_MANAGER_SLOTS
);

5094 
	`şu¡”Mªag”OnE¼Ü
(
”r
);

5095 
»suÉ
 = 0;

5096 ià(
do_fix
 ) {

5097 
diùTy³
 
dty³
 = 
şu¡”Mªag”DiùTy³
;

5098 
dty³
.
keyDe¡ruùÜ
 = 
diùSdsDe¡ruùÜ
;

5099 
dty³
.
v®De¡ruùÜ
 = 
diùLi¡De¡ruùÜ
;

5100 
şu¡”Mªag”Uncov”edSlÙs
 = 
	`diùC»©e
(&
dty³
, 
NULL
);

5101 
fixed
 = 
	`şu¡”Mªag”FixSlÙsCov”age
(
¦Ùs
);

5102 ià(
fixed
 > 0è
»suÉ
 = 1;

5105 
£¬ch_muÉË_owÃrs
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

5106 
CLUSTER_MANAGER_CMD_FLAG_CHECK_OWNERS
;

5107 ià(
£¬ch_muÉË_owÃrs
) {

5110 
	`şu¡”Mªag”LogInfo
(">>> Check for multiple slot owners...\n");

5111 
¦Ù
 = 0, 
¦Ùs_w™h_muÉË_owÃrs
 = 0;

5112 ; 
¦Ù
 < 
CLUSTER_MANAGER_SLOTS
; slot++) {

5113 
li¡I‹r
 
li
;

5114 
li¡Node
 *
Ê
;

5115 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5116 
li¡
 *
owÃrs
 = 
	`li¡C»©e
();

5117 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5118 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5119 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

5120 ià(
n
->
¦Ùs
[
¦Ù
]è
	`li¡AddNodeTa
(
owÃrs
,‚);

5124 
couÁ
 = 
	`şu¡”Mªag”CouÁKeysInSlÙ
(
n
, 
¦Ù
);

5125 ià(
couÁ
 > 0è
	`li¡AddNodeTa
(
owÃrs
, 
n
);

5128 ià(
	`li¡L’gth
(
owÃrs
) > 1) {

5129 
»suÉ
 = 0;

5130 
	`şu¡”Mªag”LogE¼
("[WARNING] Slot %d has %d owners:\n",

5131 
¦Ù
, 
	`li¡L’gth
(
owÃrs
));

5132 
	`li¡Rewšd
(
owÃrs
, &
li
);

5133 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5134 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5135 
	`şu¡”Mªag”LogE¼
(" %s:%d\n", 
n
->

,‚->
pÜt
);

5137 
¦Ùs_w™h_muÉË_owÃrs
++;

5138 ià(
do_fix
) {

5139 
»suÉ
 = 
	`şu¡”Mªag”FixMuÉËSlÙOwÃrs
(
¦Ù
, 
owÃrs
);

5140 ià(!
»suÉ
) {

5141 
	`şu¡”Mªag”LogE¼
("Failedo fix multiple owners "

5142 "fÜ slÙ %d\n", 
¦Ù
);

5143 
	`li¡R–—£
(
owÃrs
);

5145 } 
¦Ùs_w™h_muÉË_owÃrs
--;

5148 
	`li¡R–—£
(
owÃrs
);

5150 ià(
¦Ùs_w™h_muÉË_owÃrs
 == 0)

5151 
	`şu¡”Mªag”LogOk
("[OK] No multiple owners found.\n");

5153  
»suÉ
;

5154 
	}
}

5156 
şu¡”Mªag”Node
 *
	$şu¡”NodeFÜResh¬dšg
(*
id
,

5157 
şu¡”Mªag”Node
 *
rg‘
,

5158 *
¿i£_”r
)

5160 
şu¡”Mªag”Node
 *
node
 = 
NULL
;

5161 cÚ¡ *
šv®id_node_msg
 = "*** The specified‚ode (%s) is‚ot known "

5163 
node
 = 
	`şu¡”Mªag”NodeByName
(
id
);

5164 *
¿i£_”r
 = 0;

5165 ià(!
node
 ||‚ode->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) {

5166 
	`şu¡”Mªag”LogE¼
(
šv®id_node_msg
, 
id
);

5167 *
¿i£_”r
 = 1;

5168  
NULL
;

5169 } ià(
node
 !ğ
NULL
 && 
rg‘
 != NULL) {

5170 ià(!
	`¡rcmp
(
node
->
Çme
, 
rg‘
->name)) {

5171 
	`şu¡”Mªag”LogE¼
( "*** It is‚ot…ossibleo use "

5174  
NULL
;

5177  
node
;

5178 
	}
}

5180 
li¡
 *
	$şu¡”Mªag”Compu‹Resh¬dTabË
(
li¡
 *
sourûs
, 
num¦Ùs
) {

5181 
li¡
 *
moved
 = 
	`li¡C»©e
();

5182 
¤c_couÁ
 = 
	`li¡L’gth
(
sourûs
), 
i
 = 0, 
tÙ_¦Ùs
 = 0, 
j
;

5183 
şu¡”Mªag”Node
 **
sÜ‹d
 = 
	`zm®loc
(
¤c_couÁ
 * (*sorted));

5184 
li¡I‹r
 
li
;

5185 
li¡Node
 *
Ê
;

5186 
	`li¡Rewšd
(
sourûs
, &
li
);

5187 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5188 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5189 
tÙ_¦Ùs
 +ğ
node
->
¦Ùs_couÁ
;

5190 
sÜ‹d
[
i
++] = 
node
;

5192 
	`qsÜt
(
sÜ‹d
, 
¤c_couÁ
, (
şu¡”Mªag”Node
 *),

5193 
şu¡”Mªag”SlÙCouÁCom·»Desc
);

5194 
i
 = 0; i < 
¤c_couÁ
; i++) {

5195 
şu¡”Mªag”Node
 *
node
 = 
sÜ‹d
[
i
];

5196 
n
 = ((è
num¦Ùs
 / 
tÙ_¦Ùs
 * 
node
->
¦Ùs_couÁ
);

5197 ià(
i
 =ğ0è
n
 = 
	`û
(n);

5198 
n
 = 
	`æoÜ
(n);

5199 
max
 = (è
n
, 
couÁ
 = 0;

5200 
j
 = 0; j < 
CLUSTER_MANAGER_SLOTS
; j++) {

5201 
¦Ù
 = 
node
->
¦Ùs
[
j
];

5202 ià(!
¦Ù
) ;

5203 ià(
couÁ
 >ğ
max
 || ()
	`li¡L’gth
(
moved
è>ğ
num¦Ùs
) ;

5204 
şu¡”Mªag”Resh¬dTabËI‹m
 *
™em
 = 
	`zm®loc
((*item));

5205 
™em
->
sourû
 = 
node
;

5206 
™em
->
¦Ù
 = 
j
;

5207 
	`li¡AddNodeTa
(
moved
, 
™em
);

5208 
couÁ
++;

5211 
	`zä“
(
sÜ‹d
);

5212  
moved
;

5213 
	}
}

5215 
	$şu¡”Mªag”ShowResh¬dTabË
(
li¡
 *
bË
) {

5216 
li¡I‹r
 
li
;

5217 
li¡Node
 *
Ê
;

5218 
	`li¡Rewšd
(
bË
, &
li
);

5219 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5220 
şu¡”Mªag”Resh¬dTabËI‹m
 *
™em
 = 
Ê
->
v®ue
;

5221 
şu¡”Mªag”Node
 *
n
 = 
™em
->
sourû
;

5222 
	`´štf
(" Movšg slÙ %d from %s\n", 
™em
->
¦Ù
, (*è
n
->
Çme
);

5224 
	}
}

5226 
	$şu¡”Mªag”R–—£Resh¬dTabË
(
li¡
 *
bË
) {

5227 ià(
bË
 !ğ
NULL
) {

5228 
li¡I‹r
 
li
;

5229 
li¡Node
 *
Ê
;

5230 
	`li¡Rewšd
(
bË
, &
li
);

5231 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5232 
şu¡”Mªag”Resh¬dTabËI‹m
 *
™em
 = 
Ê
->
v®ue
;

5233 
	`zä“
(
™em
);

5235 
	`li¡R–—£
(
bË
);

5237 
	}
}

5239 
	$şu¡”Mªag”Log
(
Ëv–
, cÚ¡ * 
fmt
, ...) {

5240 
u£_cŞÜs
 =

5241 (
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 & 
CLUSTER_MANAGER_CMD_FLAG_COLOR
);

5242 ià(
u£_cŞÜs
) {

5243 
	`´štf
("\033[");

5244 
Ëv–
) {

5245 
CLUSTER_MANAGER_LOG_LVL_INFO
: 
	`´štf
(
LOG_COLOR_BOLD
); ;

5246 
CLUSTER_MANAGER_LOG_LVL_WARN
: 
	`´štf
(
LOG_COLOR_YELLOW
); ;

5247 
CLUSTER_MANAGER_LOG_LVL_ERR
: 
	`´štf
(
LOG_COLOR_RED
); ;

5248 
CLUSTER_MANAGER_LOG_LVL_SUCCESS
: 
	`´štf
(
LOG_COLOR_GREEN
); ;

5249 : 
	`´štf
(
LOG_COLOR_RESET
); ;

5252 
va_li¡
 
­
;

5253 
	`va_¡¬t
(
­
, 
fmt
);

5254 
	`v´štf
(
fmt
, 
­
);

5255 
	`va_’d
(
­
);

5256 ià(
u£_cŞÜs
è
	`´štf
("\033[" 
LOG_COLOR_RESET
);

5257 
	}
}

5259 
	$şu¡”Mªag”NodeA¼ayIn™
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

5260 
®loc_Ën
)

5262 
¬¿y
->
nodes
 = 
	`zÿÎoc
(
®loc_Ën
 * (
şu¡”Mªag”Node
*));

5263 
¬¿y
->
®loc
 =‡¼ay->
nodes
;

5264 
¬¿y
->
Ën
 = 
®loc_Ën
;

5265 
¬¿y
->
couÁ
 = 0;

5266 
	}
}

5270 
	$şu¡”Mªag”NodeA¼ayRe£t
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
) {

5271 ià(
¬¿y
->
nodes
 >‡¼ay->
®loc
) {

5272 
¬¿y
->
Ën
 =‡¼ay->
nodes
 -‡¼ay->
®loc
;

5273 
¬¿y
->
nodes
 =‡¼ay->
®loc
;

5274 
¬¿y
->
couÁ
 = 0;

5275 
i
 = 0;

5276 ; 
i
 < 
¬¿y
->
Ën
; i++) {

5277 ià(
¬¿y
->
nodes
[
i
] !ğ
NULL
è¬¿y->
couÁ
++;

5280 
	}
}

5283 
	$şu¡”Mªag”NodeA¼ayShiá
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

5284 
şu¡”Mªag”Node
 **
nod•Œ
)

5286 
	`as£¹
(
¬¿y
->
nodes
 < (¬¿y->node +‡¼ay->
Ën
));

5288 ià(*
¬¿y
->
nodes
 !ğ
NULL
è¬¿y->
couÁ
--;

5290 *
nod•Œ
 = *
¬¿y
->
nodes
;

5292 
¬¿y
->
nodes
++;

5293 
¬¿y
->
Ën
--;

5294 
	}
}

5296 
	$şu¡”Mªag”NodeA¼ayAdd
(
şu¡”Mªag”NodeA¼ay
 *
¬¿y
,

5297 
şu¡”Mªag”Node
 *
node
)

5299 
	`as£¹
(
¬¿y
->
nodes
 < (¬¿y->node +‡¼ay->
Ën
));

5300 
	`as£¹
(
node
 !ğ
NULL
);

5301 
	`as£¹
(
¬¿y
->
couÁ
 <‡¼ay->
Ën
);

5302 
¬¿y
->
nodes
[¬¿y->
couÁ
++] = 
node
;

5303 
	}
}

5305 
	$şu¡”Mªag”PrštNÙEm±yNodeE¼Ü
(
şu¡”Mªag”Node
 *
node
,

5306 *
”r
)

5308 *
msg
;

5309 ià(
”r
è
msg
 =ƒrr;

5311 
msg
 = "is‚otƒmpty. Eitherhe‚ode‡lready knows other "

5315 
	`şu¡”Mªag”LogE¼
("[ERR] Nod%s:%d %s\n", 
node
->

,‚ode->
pÜt
, 
msg
);

5316 
	}
}

5318 
	$şu¡”Mªag”PrštNÙClu¡”NodeE¼Ü
(
şu¡”Mªag”Node
 *
node
,

5319 *
”r
)

5321 *
msg
 = (
”r
 ?ƒrr : "is‚ot configured‡s‡ cluster‚ode.");

5322 
	`şu¡”Mªag”LogE¼
("[ERR] Nod%s:%d %s\n", 
node
->

,‚ode->
pÜt
, 
msg
);

5323 
	}
}

5326 
	$şu¡”Mªag”Mode
(
şu¡”Mªag”CommªdProc
 *
´oc
) {

5327 
¬gc
 = 
cÚfig
.
şu¡”_mªag”_commªd
.argc;

5328 **
¬gv
 = 
cÚfig
.
şu¡”_mªag”_commªd
.argv;

5329 
şu¡”_mªag”
.
nodes
 = 
NULL
;

5330 ià(!
	`´oc
(
¬gc
, 
¬gv
)è
şu¡”_mªag”_”r
;

5331 
	`ä“Clu¡”Mªag”
();

5332 
	`ex™
(0);

5333 
şu¡”_mªag”_”r
:

5334 
	`ä“Clu¡”Mªag”
();

5335 
	`sdsä“
(
cÚfig
.
ho¡
);

5336 
	`sdsä“
(
cÚfig
.
mb_d–im
);

5337 
	`ex™
(1);

5338 
	}
}

5342 
	$şu¡”Mªag”CommªdC»©e
(
¬gc
, **
¬gv
) {

5343 
i
, 
j
, 
sucûss
 = 1;

5344 
şu¡”_mªag”
.
nodes
 = 
	`li¡C»©e
();

5345 
i
 = 0; i < 
¬gc
; i++) {

5346 *
addr
 = 
¬gv
[
i
];

5347 *
c
 = 
	`¡¼chr
(
addr
, '@');

5348 ià(
c
 !ğ
NULL
) *c = '\0';

5349 
c
 = 
	`¡¼chr
(
addr
, ':');

5350 ià(
c
 =ğ
NULL
) {

5351 
	`årštf
(
¡d”r
, "Inv®id‡dd»s fÜm©: %s\n", 
addr
);

5354 *
c
 = '\0';

5355 *

 = 
addr
;

5356 
pÜt
 = 
	`©oi
(++
c
);

5357 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5358 ià(!
	`şu¡”Mªag”NodeCÚÃù
(
node
)) {

5359 
	`ä“Clu¡”Mªag”Node
(
node
);

5362 *
”r
 = 
NULL
;

5363 ià(!
	`şu¡”Mªag”NodeIsClu¡”
(
node
, &
”r
)) {

5364 
	`şu¡”Mªag”PrštNÙClu¡”NodeE¼Ü
(
node
, 
”r
);

5365 ià(
”r
è
	`zä“
(err);

5366 
	`ä“Clu¡”Mªag”Node
(
node
);

5369 
”r
 = 
NULL
;

5370 ià(!
	`şu¡”Mªag”NodeLßdInfo
(
node
, 0, &
”r
)) {

5371 ià(
”r
) {

5372 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

5373 
	`zä“
(
”r
);

5375 
	`ä“Clu¡”Mªag”Node
(
node
);

5378 
”r
 = 
NULL
;

5379 ià(!
	`şu¡”Mªag”NodeIsEm±y
(
node
, &
”r
)) {

5380 
	`şu¡”Mªag”PrštNÙEm±yNodeE¼Ü
(
node
, 
”r
);

5381 ià(
”r
è
	`zä“
(err);

5382 
	`ä“Clu¡”Mªag”Node
(
node
);

5385 
	`li¡AddNodeTa
(
şu¡”_mªag”
.
nodes
, 
node
);

5387 
node_Ën
 = 
şu¡”_mªag”
.
nodes
->
Ën
;

5388 
»¶iÿs
 = 
cÚfig
.
şu¡”_mªag”_commªd
.replicas;

5389 
ma¡”s_couÁ
 = 
	`CLUSTER_MANAGER_MASTERS_COUNT
(
node_Ën
, 
»¶iÿs
);

5390 ià(
ma¡”s_couÁ
 < 3) {

5391 
	`şu¡”Mªag”LogE¼
(

5395 
node_Ën
, 
»¶iÿs
);

5396 
	`şu¡”Mªag”LogE¼
("\n*** At†east %d‚odes‡re„equired.\n",

5397 3 * (
»¶iÿs
 + 1));

5400 
	`şu¡”Mªag”LogInfo
(">>> Performing hash slots‡llocation "

5401 "Ú %d‚odes...\n", 
node_Ën
);

5402 
š‹¾—ved_Ën
 = 0, 
_couÁ
 = 0;

5403 
şu¡”Mªag”Node
 **
š‹¾—ved
 = 
	`zÿÎoc
(
node_Ën
*(**interleaved));

5404 **
s
 = 
	`zÿÎoc
(
node_Ën
 * (*));

5405 
şu¡”Mªag”NodeA¼ay
 *
_nodes
 = 
	`zÿÎoc
(
node_Ën
 * (*ip_nodes));

5406 
li¡I‹r
 
li
;

5407 
li¡Node
 *
Ê
;

5408 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5409 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5410 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5411 
found
 = 0;

5412 
i
 = 0; i < 
_couÁ
; i++) {

5413 *

 = 
s
[
i
];

5414 ià(!
	`¡rcmp
(

, 
n
->ip)) {

5415 
found
 = 1;

5419 ià(!
found
) {

5420 
s
[
_couÁ
++] = 
n
->

;

5422 
şu¡”Mªag”NodeA¼ay
 *
node_¬¿y
 = &(
_nodes
[
i
]);

5423 ià(
node_¬¿y
->
nodes
 =ğ
NULL
)

5424 
	`şu¡”Mªag”NodeA¼ayIn™
(
node_¬¿y
, 
node_Ën
);

5425 
	`şu¡”Mªag”NodeA¼ayAdd
(
node_¬¿y
, 
n
);

5427 
š‹¾—ved_Ën
 < 
node_Ën
) {

5428 
i
 = 0; i < 
_couÁ
; i++) {

5429 
şu¡”Mªag”NodeA¼ay
 *
node_¬¿y
 = &(
_nodes
[
i
]);

5430 ià(
node_¬¿y
->
couÁ
 > 0) {

5431 
şu¡”Mªag”Node
 *
n
 = 
NULL
;

5432 
	`şu¡”Mªag”NodeA¼ayShiá
(
node_¬¿y
, &
n
);

5433 
š‹¾—ved
[
š‹¾—ved_Ën
++] = 
n
;

5437 
şu¡”Mªag”Node
 **
ma¡”s
 = 
š‹¾—ved
;

5438 
š‹¾—ved
 +ğ
ma¡”s_couÁ
;

5439 
š‹¾—ved_Ën
 -ğ
ma¡”s_couÁ
;

5440 
¦Ùs_³r_node
 = 
CLUSTER_MANAGER_SLOTS
 / (è
ma¡”s_couÁ
;

5441 
fœ¡
 = 0;

5442 
cursÜ
 = 0.0f;

5443 
i
 = 0; i < 
ma¡”s_couÁ
; i++) {

5444 
şu¡”Mªag”Node
 *
ma¡”
 = 
ma¡”s
[
i
];

5445 
Ï¡
 = 
	`Ìound
(
cursÜ
 + 
¦Ùs_³r_node
 - 1);

5446 ià(
Ï¡
 > 
CLUSTER_MANAGER_SLOTS
 || 
i
 =ğ(
ma¡”s_couÁ
 - 1))

5447 
Ï¡
 = 
CLUSTER_MANAGER_SLOTS
 - 1;

5448 ià(
Ï¡
 < 
fœ¡
)†ast = first;

5449 
	`´štf
("Ma¡”[%d] -> SlÙ %lu - %lu\n", 
i
, 
fœ¡
, 
Ï¡
);

5450 
ma¡”
->
¦Ùs_couÁ
 = 0;

5451 
j
 = 
fœ¡
; j <ğ
Ï¡
; j++) {

5452 
ma¡”
->
¦Ùs
[
j
] = 1;

5453 
ma¡”
->
¦Ùs_couÁ
++;

5455 
ma¡”
->
dœty
 = 1;

5456 
fœ¡
 = 
Ï¡
 + 1;

5457 
cursÜ
 +ğ
¦Ùs_³r_node
;

5462 
şu¡”Mªag”Node
 *
fœ¡_node
 = 
š‹¾—ved
[0];

5463 
i
 = 0; i < (
š‹¾—ved_Ën
 - 1); i++)

5464 
š‹¾—ved
[
i
] = interleaved[i + 1];

5465 
š‹¾—ved
[
š‹¾—ved_Ën
 - 1] = 
fœ¡_node
;

5466 
assign_unu£d
 = 0, 
avaabË_couÁ
 = 
š‹¾—ved_Ën
;

5467 
assign_»¶iÿs
:

5468 
i
 = 0; i < 
ma¡”s_couÁ
; i++) {

5469 
şu¡”Mªag”Node
 *
ma¡”
 = 
ma¡”s
[
i
];

5470 
assigÃd_»¶iÿs
 = 0;

5471 
assigÃd_»¶iÿs
 < 
»¶iÿs
) {

5472 ià(
avaabË_couÁ
 == 0) ;

5473 
şu¡”Mªag”Node
 *
found
 = 
NULL
, *
¦ave
 = NULL;

5474 
fœ¡NodeIdx
 = -1;

5475 
j
 = 0; j < 
š‹¾—ved_Ën
; j++) {

5476 
şu¡”Mªag”Node
 *
n
 = 
š‹¾—ved
[
j
];

5477 ià(
n
 =ğ
NULL
) ;

5478 ià(
	`¡rcmp
(
n
->

, 
ma¡”
->ip)) {

5479 
found
 = 
n
;

5480 
š‹¾—ved
[
j
] = 
NULL
;

5483 ià(
fœ¡NodeIdx
 < 0èfœ¡NodeIdx = 
j
;

5485 ià(
found
è
¦ave
 = found;

5486 ià(
fœ¡NodeIdx
 >= 0) {

5487 
¦ave
 = 
š‹¾—ved
[
fœ¡NodeIdx
];

5488 
š‹¾—ved_Ën
 -ğ(
š‹¾—ved
 - (š‹¾—ved + 
fœ¡NodeIdx
));

5489 
š‹¾—ved
 +ğ(
fœ¡NodeIdx
 + 1);

5491 ià(
¦ave
 !ğ
NULL
) {

5492 
assigÃd_»¶iÿs
++;

5493 
avaabË_couÁ
--;

5494 ià(
¦ave
->
»¶iÿ‹
è
	`sdsä“
(slave->replicate);

5495 
¦ave
->
»¶iÿ‹
 = 
	`sd¢ew
(
ma¡”
->
Çme
);

5496 
¦ave
->
dœty
 = 1;

5498 
	`´štf
("Addšg„•liÿ %s:%dØ%s:%d\n", 
¦ave
->

, sÏve->
pÜt
,

5499 
ma¡”
->

, ma¡”->
pÜt
);

5500 ià(
assign_unu£d
) ;

5503 ià(!
assign_unu£d
 && 
avaabË_couÁ
 > 0) {

5504 
assign_unu£d
 = 1;

5505 
	`´štf
("Addingƒxtra„eplicas...\n");

5506 
assign_»¶iÿs
;

5508 
i
 = 0; i < 
_couÁ
; i++) {

5509 
şu¡”Mªag”NodeA¼ay
 *
node_¬¿y
 = 
_nodes
 + 
i
;

5510 
	`şu¡”Mªag”NodeA¼ayRe£t
(
node_¬¿y
);

5512 
	`şu¡”Mªag”O±imizeAÁiAffš™y
(
_nodes
, 
_couÁ
);

5513 
	`şu¡”Mªag”ShowNodes
();

5514 ià(
	`cÚfœmW™hYes
("Can I sethe‡bove configuration?")) {

5515 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5516 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5517 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5518 *
”r
 = 
NULL
;

5519 
æushed
 = 
	`şu¡”Mªag”FlushNodeCÚfig
(
node
, &
”r
);

5520 ià(!
æushed
 && 
node
->
dœty
 && !node->
»¶iÿ‹
) {

5521 ià(
”r
 !ğ
NULL
) {

5522 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

5523 
	`zä“
(
”r
);

5525 
sucûss
 = 0;

5526 
ş—nup
;

5527 } ià(
”r
 !ğ
NULL
è
	`zä“
(err);

5529 
	`şu¡”Mªag”LogInfo
(">>> Nodes configuration updated\n");

5530 
	`şu¡”Mªag”LogInfo
(">>> Assign‡ different configƒpocho "

5532 
cÚfig_•och
 = 1;

5533 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5534 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5535 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5536 
»disR•ly
 *
»¶y
 = 
NULL
;

5537 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
,

5539 
cÚfig_•och
++);

5540 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

5542 
	`şu¡”Mªag”LogInfo
(">>> Sending CLUSTER MEET messageso join "

5544 
şu¡”Mªag”Node
 *
fœ¡
 = 
NULL
;

5545 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5546 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5547 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5548 ià(
fœ¡
 =ğ
NULL
) {

5549 
fœ¡
 = 
node
;

5552 
»disR•ly
 *
»¶y
 = 
NULL
;

5553 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
node
, "cluster meet %s %d",

5554 
fœ¡
->

, fœ¡->
pÜt
);

5555 
is_”r
 = 0;

5556 ià(
»¶y
 !ğ
NULL
) {

5557 ià((
is_”r
 = 
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
))

5558 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
»¶y
->
¡r
);

5559 
	`ä“R•lyObjeù
(
»¶y
);

5561 
is_”r
 = 1;

5562 
	`årštf
(
¡d”r
, "Failedo send CLUSTER MEET command.\n");

5564 ià(
is_”r
) {

5565 
sucûss
 = 0;

5566 
ş—nup
;

5572 
	`¦“p
(1);

5573 
	`şu¡”Mªag”Wa™FÜClu¡”Još
();

5575 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5576 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5577 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5578 ià(!
node
->
dœty
) ;

5579 *
”r
 = 
NULL
;

5580 
æushed
 = 
	`şu¡”Mªag”FlushNodeCÚfig
(
node
, &
”r
);

5581 ià(!
æushed
 && !
node
->
»¶iÿ‹
) {

5582 ià(
”r
 !ğ
NULL
) {

5583 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
node
, 
”r
);

5584 
	`zä“
(
”r
);

5586 
sucûss
 = 0;

5587 
ş—nup
;

5591 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5592 
şu¡”Mªag”Node
 *
fœ¡_node
 = 
NULL
;

5593 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5594 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

5595 ià(!
fœ¡_node
èfœ¡_nodğ
node
;

5596 
	`ä“Clu¡”Mªag”Node
(
node
);

5598 
	`li¡Em±y
(
şu¡”_mªag”
.
nodes
);

5599 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
fœ¡_node
, 0)) {

5600 
sucûss
 = 0;

5601 
ş—nup
;

5603 
	`şu¡”Mªag”CheckClu¡”
(0);

5605 
ş—nup
:

5607 
	`zä“
(
ma¡”s
);

5608 
	`zä“
(
s
);

5609 
i
 = 0; i < 
node_Ën
; i++) {

5610 
şu¡”Mªag”NodeA¼ay
 *
node_¬¿y
 = 
_nodes
 + 
i
;

5611 
	`CLUSTER_MANAGER_NODE_ARRAY_FREE
(
node_¬¿y
);

5613 
	`zä“
(
_nodes
);

5614  
sucûss
;

5615 
	}
}

5617 
	$şu¡”Mªag”CommªdAddNode
(
¬gc
, **
¬gv
) {

5618 
sucûss
 = 1;

5619 
»disR•ly
 *
»¶y
 = 
NULL
;

5620 *
»f_
 = 
NULL
, *

 = NULL;

5621 
»f_pÜt
 = 0, 
pÜt
 = 0;

5622 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
 - 1, 
¬gv
 + 1, &
»f_
, &
»f_pÜt
))

5623 
šv®id_¬gs
;

5624 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¬gv
, &

, &
pÜt
))

5625 
šv®id_¬gs
;

5626 
	`şu¡”Mªag”LogInfo
(">>> Addšg‚od%s:%dØşu¡” %s:%d\n", 

, 
pÜt
,

5627 
»f_
, 
»f_pÜt
);

5629 
şu¡”Mªag”Node
 *
»âode
 = 
	`şu¡”Mªag”NewNode
(
»f_
, 
»f_pÜt
);

5630 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
»âode
, 0))  0;

5631 ià(!
	`şu¡”Mªag”CheckClu¡”
(0))  0;

5635 
şu¡”Mªag”Node
 *
ma¡”_node
 = 
NULL
;

5636 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 & 
CLUSTER_MANAGER_CMD_FLAG_SLAVE
) {

5637 *
ma¡”_id
 = 
cÚfig
.
şu¡”_mªag”_commªd
.master_id;

5638 ià(
ma¡”_id
 !ğ
NULL
) {

5639 
ma¡”_node
 = 
	`şu¡”Mªag”NodeByName
(
ma¡”_id
);

5640 ià(
ma¡”_node
 =ğ
NULL
) {

5641 
	`şu¡”Mªag”LogE¼
("[ERR] NØsuch ma¡” ID %s\n", 
ma¡”_id
);

5645 
ma¡”_node
 = 
	`şu¡”Mªag”NodeW™hL—¡R•liÿs
();

5646 
	`as£¹
(
ma¡”_node
 !ğ
NULL
);

5647 
	`´štf
("Autom©iÿÎy s–eùed ma¡” %s:%d\n", 
ma¡”_node
->

,

5648 
ma¡”_node
->
pÜt
);

5653 
şu¡”Mªag”Node
 *
Ãw_node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5654 
added
 = 0;

5655 ià(!
	`şu¡”Mªag”NodeCÚÃù
(
Ãw_node
)) {

5656 
	`şu¡”Mªag”LogE¼
("[ERR] Sorry, can't connecto‚ode %s:%d\n",

5657 

, 
pÜt
);

5658 
sucûss
 = 0;

5659 
ş—nup
;

5661 *
”r
 = 
NULL
;

5662 ià(!(
sucûss
 = 
	`şu¡”Mªag”NodeIsClu¡”
(
Ãw_node
, &
”r
))) {

5663 
	`şu¡”Mªag”PrštNÙClu¡”NodeE¼Ü
(
Ãw_node
, 
”r
);

5664 ià(
”r
è
	`zä“
(err);

5665 
ş—nup
;

5667 ià(!
	`şu¡”Mªag”NodeLßdInfo
(
Ãw_node
, 0, &
”r
)) {

5668 ià(
”r
) {

5669 
	`CLUSTER_MANAGER_PRINT_REPLY_ERROR
(
Ãw_node
, 
”r
);

5670 
	`zä“
(
”r
);

5672 
sucûss
 = 0;

5673 
ş—nup
;

5675 ià(!(
sucûss
 = 
	`şu¡”Mªag”NodeIsEm±y
(
Ãw_node
, &
”r
))) {

5676 
	`şu¡”Mªag”PrštNÙEm±yNodeE¼Ü
(
Ãw_node
, 
”r
);

5677 ià(
”r
è
	`zä“
(err);

5678 
ş—nup
;

5680 
şu¡”Mªag”Node
 *
fœ¡
 = 
	`li¡Fœ¡
(
şu¡”_mªag”
.
nodes
)->
v®ue
;

5681 
	`li¡AddNodeTa
(
şu¡”_mªag”
.
nodes
, 
Ãw_node
);

5682 
added
 = 1;

5685 
	`şu¡”Mªag”LogInfo
(">>> Send CLUSTER MEETo‚ode %s:%do make it "

5686 "jošhşu¡”.\n", 

, 
pÜt
);

5687 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
Ãw_node
, "CLUSTER MEET %s %d",

5688 
fœ¡
->

, fœ¡->
pÜt
);

5689 ià(!(
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
Ãw_node
, 
»¶y
, 
NULL
)))

5690 
ş—nup
;

5693 ià(
ma¡”_node
) {

5694 
	`¦“p
(1);

5695 
	`şu¡”Mªag”Wa™FÜClu¡”Još
();

5696 
	`şu¡”Mªag”LogInfo
(">>> Configure‚ode‡s„eplica of %s:%d.\n",

5697 
ma¡”_node
->

, ma¡”_node->
pÜt
);

5698 
	`ä“R•lyObjeù
(
»¶y
);

5699 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
Ãw_node
, "CLUSTER REPLICATE %s",

5700 
ma¡”_node
->
Çme
);

5701 ià(!(
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
Ãw_node
, 
»¶y
, 
NULL
)))

5702 
ş—nup
;

5704 
	`şu¡”Mªag”LogOk
("[OK] New‚ode‡dded correctly.\n");

5705 
ş—nup
:

5706 ià(!
added
 && 
Ãw_node
è
	`ä“Clu¡”Mªag”Node
(new_node);

5707 ià(
»¶y
è
	`ä“R•lyObjeù
(reply);

5708  
sucûss
;

5709 
šv®id_¬gs
:

5710 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

5712 
	}
}

5714 
	$şu¡”Mªag”CommªdD–‘eNode
(
¬gc
, **
¬gv
) {

5715 
	`UNUSED
(
¬gc
);

5716 
sucûss
 = 1;

5717 
pÜt
 = 0;

5718 *

 = 
NULL
;

5719 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

5720 *
node_id
 = 
¬gv
[1];

5721 
	`şu¡”Mªag”LogInfo
(">>> Removing‚ode %s from cluster %s:%d\n",

5722 
node_id
, 

, 
pÜt
);

5723 
şu¡”Mªag”Node
 *
»f_node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5724 
şu¡”Mªag”Node
 *
node
 = 
NULL
;

5727 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
»f_node
, 0))  0;

5730 
node
 = 
	`şu¡”Mªag”NodeByName
(
node_id
);

5731 ià(
node
 =ğ
NULL
) {

5732 
	`şu¡”Mªag”LogE¼
("[ERR] NØsuch‚odID %s\n", 
node_id
);

5735 ià(
node
->
¦Ùs_couÁ
 != 0) {

5736 
	`şu¡”Mªag”LogE¼
("[ERR] Node %s:%d is‚otƒmpty! Reshard data "

5737 "away‡ndry‡gaš.\n", 
node
->

,‚ode->
pÜt
);

5742 
	`şu¡”Mªag”LogInfo
(">>> Sending CLUSTER FORGET messagesohe "

5744 
li¡I‹r
 
li
;

5745 
li¡Node
 *
Ê
;

5746 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5747 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5748 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5749 ià(
n
 =ğ
node
) ;

5750 ià(
n
->
»¶iÿ‹
 && !
	`¡rÿ£cmp
Ò->»¶iÿ‹, 
node_id
)) {

5752 
şu¡”Mªag”Node
 *
ma¡”
 = 
	`şu¡”Mªag”NodeW™hL—¡R•liÿs
();

5753 
	`as£¹
(
ma¡”
 !ğ
NULL
);

5754 
	`şu¡”Mªag”LogInfo
(">>> %s:%d‡s„eplica of %s:%d\n",

5755 
n
->

,‚->
pÜt
, 
ma¡”
->ip, master->port);

5756 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER REPLICATE %s",

5757 
ma¡”
->
Çme
);

5758 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

5759 ià(
r
è
	`ä“R•lyObjeù
(r);

5760 ià(!
sucûss
)  0;

5762 
»disR•ly
 *
r
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CLUSTER FORGET %s",

5763 
node_id
);

5764 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
r
, 
NULL
);

5765 ià(
r
è
	`ä“R•lyObjeù
(r);

5766 ià(!
sucûss
)  0;

5770 
	`şu¡”Mªag”LogInfo
(">>> Sending CLUSTER RESET SOFTohe "

5772 
»disR•ly
 *
r
 = 
	`»disCommªd
(
node
->
cÚ‹xt
, "CLUSTER RESET %s", "SOFT");

5773 
sucûss
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
node
, 
r
, 
NULL
);

5774 ià(
r
è
	`ä“R•lyObjeù
(r);

5775  
sucûss
;

5776 
šv®id_¬gs
:

5777 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

5779 
	}
}

5781 
	$şu¡”Mªag”CommªdInfo
(
¬gc
, **
¬gv
) {

5782 
pÜt
 = 0;

5783 *

 = 
NULL
;

5784 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

5785 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5786 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
node
, 0))  0;

5787 
	`şu¡”Mªag”ShowClu¡”Info
();

5789 
šv®id_¬gs
:

5790 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

5792 
	}
}

5794 
	$şu¡”Mªag”CommªdCheck
(
¬gc
, **
¬gv
) {

5795 
pÜt
 = 0;

5796 *

 = 
NULL
;

5797 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

5798 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5799 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
node
, 0))  0;

5800 
	`şu¡”Mªag”ShowClu¡”Info
();

5801  
	`şu¡”Mªag”CheckClu¡”
(0);

5802 
šv®id_¬gs
:

5803 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

5805 
	}
}

5807 
	$şu¡”Mªag”CommªdFix
(
¬gc
, **
¬gv
) {

5808 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 |ğ
CLUSTER_MANAGER_CMD_FLAG_FIX
;

5809  
	`şu¡”Mªag”CommªdCheck
(
¬gc
, 
¬gv
);

5810 
	}
}

5812 
	$şu¡”Mªag”CommªdResh¬d
(
¬gc
, **
¬gv
) {

5813 
pÜt
 = 0;

5814 *

 = 
NULL
;

5815 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

5816 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

5817 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
node
, 0))  0;

5818 
	`şu¡”Mªag”CheckClu¡”
(0);

5819 ià(
şu¡”_mªag”
.
”rÜs
 && 
	`li¡L’gth
(cluster_manager.errors) > 0) {

5820 
	`fæush
(
¡dout
);

5821 
	`årštf
(
¡d”r
,

5825 
¦Ùs
 = 
cÚfig
.
şu¡”_mªag”_commªd
.slots;

5826 ià(!
¦Ùs
) {

5827 
¦Ùs
 <ğ0 || slÙ > 
CLUSTER_MANAGER_SLOTS
) {

5828 
	`´štf
("How many slots do you wanto move (from 1o %d)? ",

5829 
CLUSTER_MANAGER_SLOTS
);

5830 
	`fæush
(
¡dout
);

5831 
buf
[6];

5832 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,6);

5833 ià(
Ä—d
 <= 0) ;

5834 
Ï¡_idx
 = 
Ä—d
 - 1;

5835 ià(
buf
[
Ï¡_idx
] != '\n') {

5836 
ch
;

5837 (
ch
 = 
	`g‘ch¬
()è!ğ'\n' && ch !ğ
EOF
) {}

5839 
buf
[
Ï¡_idx
] = '\0';

5840 
¦Ùs
 = 
	`©oi
(
buf
);

5843 
buf
[255];

5844 *
to
 = 
cÚfig
.
şu¡”_mªag”_commªd
.to,

5845 *
äom
 = 
cÚfig
.
şu¡”_mªag”_commªd
.from;

5846 
to
 =ğ
NULL
) {

5847 
	`´štf
("What ishe„eceiving‚ode ID? ");

5848 
	`fæush
(
¡dout
);

5849 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,255);

5850 ià(
Ä—d
 <= 0) ;

5851 
Ï¡_idx
 = 
Ä—d
 - 1;

5852 ià(
buf
[
Ï¡_idx
] != '\n') {

5853 
ch
;

5854 (
ch
 = 
	`g‘ch¬
()è!ğ'\n' && ch !ğ
EOF
) {}

5856 
buf
[
Ï¡_idx
] = '\0';

5857 ià(
	`¡¾’
(
buf
è> 0è
to
 = buf;

5859 
¿i£_”r
 = 0;

5860 
şu¡”Mªag”Node
 *
rg‘
 = 
	`şu¡”NodeFÜResh¬dšg
(
to
, 
NULL
, &
¿i£_”r
);

5861 ià(
rg‘
 =ğ
NULL
)  0;

5862 
li¡
 *
sourûs
 = 
	`li¡C»©e
();

5863 
li¡
 *
bË
 = 
NULL
;

5864 
®l
 = 0, 
»suÉ
 = 1;

5865 ià(
äom
 =ğ
NULL
) {

5866 
	`´štf
("Pleaseƒnter‡llhe source‚ode IDs.\n");

5867 
	`´štf
(" Type 'all'o use‡llhe‚odes‡s source‚odes for "

5869 
	`´štf
(" Type 'done' once youƒntered‡llhe source‚odes IDs.\n");

5871 
	`´štf
("Sourû‚od#%lu: ", 
	`li¡L’gth
(
sourûs
) + 1);

5872 
	`fæush
(
¡dout
);

5873 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,255);

5874 ià(
Ä—d
 <= 0) ;

5875 
Ï¡_idx
 = 
Ä—d
 - 1;

5876 ià(
buf
[
Ï¡_idx
] != '\n') {

5877 
ch
;

5878 (
ch
 = 
	`g‘ch¬
()è!ğ'\n' && ch !ğ
EOF
) {}

5880 
buf
[
Ï¡_idx
] = '\0';

5881 ià(!
	`¡rcmp
(
buf
, "done")) ;

5882 ià(!
	`¡rcmp
(
buf
, "all")) {

5883 
®l
 = 1;

5886 
şu¡”Mªag”Node
 *
¤c
 =

5887 
	`şu¡”NodeFÜResh¬dšg
(
buf
, 
rg‘
, &
¿i£_”r
);

5888 ià(
¤c
 !ğ
NULL
è
	`li¡AddNodeTa
(
sourûs
, src);

5889 ià(
¿i£_”r
) {

5890 
»suÉ
 = 0;

5891 
ş—nup
;

5896 *
p
;

5897 (
p
 = 
	`¡rchr
(
äom
, ',')è!ğ
NULL
) {

5898 *
p
 = '\0';

5899 ià(!
	`¡rcmp
(
äom
, "all")) {

5900 
®l
 = 1;

5903 
şu¡”Mªag”Node
 *
¤c
 =

5904 
	`şu¡”NodeFÜResh¬dšg
(
äom
, 
rg‘
, &
¿i£_”r
);

5905 ià(
¤c
 !ğ
NULL
è
	`li¡AddNodeTa
(
sourûs
, src);

5906 ià(
¿i£_”r
) {

5907 
»suÉ
 = 0;

5908 
ş—nup
;

5911 
äom
 = 
p
 + 1;

5914 ià(!
®l
 && 
	`¡¾’
(
äom
) > 0) {

5915 ià(!
	`¡rcmp
(
äom
, "®l")è
®l
 = 1;

5916 ià(!
®l
) {

5917 
şu¡”Mªag”Node
 *
¤c
 =

5918 
	`şu¡”NodeFÜResh¬dšg
(
äom
, 
rg‘
, &
¿i£_”r
);

5919 ià(
¤c
 !ğ
NULL
è
	`li¡AddNodeTa
(
sourûs
, src);

5920 ià(
¿i£_”r
) {

5921 
»suÉ
 = 0;

5922 
ş—nup
;

5927 
li¡I‹r
 
li
;

5928 
li¡Node
 *
Ê
;

5929 ià(
®l
) {

5930 
	`li¡Em±y
(
sourûs
);

5931 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

5932 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5933 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

5934 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
 ||‚->
»¶iÿ‹
)

5936 ià(!
	`sdscmp
(
n
->
Çme
, 
rg‘
->name)) ;

5937 
	`li¡AddNodeTa
(
sourûs
, 
n
);

5940 ià(
	`li¡L’gth
(
sourûs
) == 0) {

5941 
	`årštf
(
¡d”r
, "*** No source‚odes given, operation‡borted.\n");

5942 
»suÉ
 = 0;

5943 
ş—nup
;

5945 
	`´štf
("\nR—dyØmov%d slÙs.\n", 
¦Ùs
);

5946 
	`´štf
(" Source‚odes:\n");

5947 
	`li¡Rewšd
(
sourûs
, &
li
);

5948 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5949 
şu¡”Mªag”Node
 *
¤c
 = 
Ê
->
v®ue
;

5950 
sds
 
šfo
 = 
	`şu¡”Mªag”NodeInfo
(
¤c
, 4);

5951 
	`´štf
("%s\n", 
šfo
);

5952 
	`sdsä“
(
šfo
);

5954 
	`´štf
(" Destination‚ode:\n");

5955 
sds
 
šfo
 = 
	`şu¡”Mªag”NodeInfo
(
rg‘
, 4);

5956 
	`´štf
("%s\n", 
šfo
);

5957 
	`sdsä“
(
šfo
);

5958 
bË
 = 
	`şu¡”Mªag”Compu‹Resh¬dTabË
(
sourûs
, 
¦Ùs
);

5959 
	`´štf
(" Resharding…lan:\n");

5960 
	`şu¡”Mªag”ShowResh¬dTabË
(
bË
);

5961 ià(!(
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

5962 
CLUSTER_MANAGER_CMD_FLAG_YES
))

5964 
	`´štf
("Do you wanto…roceed withhe…roposed "

5966 
	`fæush
(
¡dout
);

5967 
buf
[4];

5968 
Ä—d
 = 
	`»ad
(
	`f’o
(
¡dš
),
buf
,4);

5969 
buf
[3] = '\0';

5970 ià(
Ä—d
 <ğ0 || 
	`¡rcmp
("yes", 
buf
) != 0) {

5971 
»suÉ
 = 0;

5972 
ş—nup
;

5975 
İts
 = 
CLUSTER_MANAGER_OPT_VERBOSE
;

5976 
	`li¡Rewšd
(
bË
, &
li
);

5977 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

5978 
şu¡”Mªag”Resh¬dTabËI‹m
 *
™em
 = 
Ê
->
v®ue
;

5979 *
”r
 = 
NULL
;

5980 
»suÉ
 = 
	`şu¡”Mªag”MoveSlÙ
(
™em
->
sourû
, 
rg‘
, i‹m->
¦Ù
,

5981 
İts
, &
”r
);

5982 ià(!
»suÉ
) {

5983 ià(
”r
 !ğ
NULL
) {

5985 
	`zä“
(
”r
);

5987 
ş—nup
;

5990 
ş—nup
:

5991 
	`li¡R–—£
(
sourûs
);

5992 
	`şu¡”Mªag”R–—£Resh¬dTabË
(
bË
);

5993  
»suÉ
;

5994 
šv®id_¬gs
:

5995 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

5997 
	}
}

5999 
	$şu¡”Mªag”CommªdReb®ªû
(
¬gc
, **
¬gv
) {

6000 
pÜt
 = 0;

6001 *

 = 
NULL
;

6002 
şu¡”Mªag”Node
 **
weigh‹dNodes
 = 
NULL
;

6003 
li¡
 *
švŞved
 = 
NULL
;

6004 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

6005 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

6006 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
node
, 0))  0;

6007 
»suÉ
 = 1, 
i
;

6008 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
weight
 !ğ
NULL
) {

6009 
i
 = 0; i < 
cÚfig
.
şu¡”_mªag”_commªd
.
weight_¬gc
; i++) {

6010 *
Çme
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
weight
[
i
];

6011 *
p
 = 
	`¡rchr
(
Çme
, '=');

6012 ià(
p
 =ğ
NULL
) {

6013 
»suÉ
 = 0;

6014 
ş—nup
;

6016 *
p
 = '\0';

6017 
w
 = 
	`©of
(++
p
);

6018 
şu¡”Mªag”Node
 *
n
 = 
	`şu¡”Mªag”NodeByAbb»vŸ‹dName
(
Çme
);

6019 ià(
n
 =ğ
NULL
) {

6020 
	`şu¡”Mªag”LogE¼
("*** NØsuch ma¡”‚od%s\n", 
Çme
);

6021 
»suÉ
 = 0;

6022 
ş—nup
;

6024 
n
->
weight
 = 
w
;

6027 
tÙ®_weight
 = 0;

6028 
nodes_švŞved
 = 0;

6029 
u£_em±y
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

6030 
CLUSTER_MANAGER_CMD_FLAG_EMPTYMASTER
;

6031 
švŞved
 = 
	`li¡C»©e
();

6032 
li¡I‹r
 
li
;

6033 
li¡Node
 *
Ê
;

6034 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

6036 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6037 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6038 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
 ||‚->
»¶iÿ‹
)

6040 ià(!
u£_em±y
 && 
n
->
¦Ùs_couÁ
 == 0) {

6041 
n
->
weight
 = 0;

6044 
tÙ®_weight
 +ğ
n
->
weight
;

6045 
nodes_švŞved
++;

6046 
	`li¡AddNodeTa
(
švŞved
, 
n
);

6048 
weigh‹dNodes
 = 
	`zm®loc
(
nodes_švŞved
 * (
şu¡”Mªag”Node
 *));

6049 ià(
weigh‹dNodes
 =ğ
NULL
è
ş—nup
;

6051 
	`şu¡”Mªag”CheckClu¡”
(1);

6052 ià(
şu¡”_mªag”
.
”rÜs
 && 
	`li¡L’gth
(cluster_manager.errors) > 0) {

6053 
	`şu¡”Mªag”LogE¼
("*** Please fix your cluster…roblems "

6055 
»suÉ
 = 0;

6056 
ş—nup
;

6061 
th»shŞd_»ached
 = 0, 
tÙ®_b®ªû
 = 0;

6062 
th»shŞd
 = 
cÚfig
.
şu¡”_mªag”_commªd
.threshold;

6063 
i
 = 0;

6064 
	`li¡Rewšd
(
švŞved
, &
li
);

6065 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6066 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6067 
weigh‹dNodes
[
i
++] = 
n
;

6068 
ex³ùed
 = (è((()
CLUSTER_MANAGER_SLOTS
 / 
tÙ®_weight
) *

6069 
n
->
weight
);

6070 
n
->
b®ªû
 =‚->
¦Ùs_couÁ
 - 
ex³ùed
;

6071 
tÙ®_b®ªû
 +ğ
n
->
b®ªû
;

6075 
ov”_th»shŞd
 = 0;

6076 ià(
th»shŞd
 > 0) {

6077 ià(
n
->
¦Ùs_couÁ
 > 0) {

6078 
”r_³rc
 = 
	`çbs
((100-(100.0*
ex³ùed
/
n
->
¦Ùs_couÁ
)));

6079 ià(
”r_³rc
 > 
th»shŞd
è
ov”_th»shŞd
 = 1;

6080 } ià(
ex³ùed
 > 1) {

6081 
ov”_th»shŞd
 = 1;

6084 ià(
ov”_th»shŞd
è
th»shŞd_»ached
 = 1;

6086 ià(!
th»shŞd_»ached
) {

6087 
	`şu¡”Mªag”LogW¬n
("*** No„ebalancing‚eeded! "

6089 
cÚfig
.
şu¡”_mªag”_commªd
.
th»shŞd
);

6090 
ş—nup
;

6095 
tÙ®_b®ªû
 > 0) {

6096 
	`li¡Rewšd
(
švŞved
, &
li
);

6097 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6098 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6099 ià(
n
->
b®ªû
 <ğ0 && 
tÙ®_b®ªû
 > 0) {

6100 
n
->
b®ªû
--;

6101 
tÙ®_b®ªû
--;

6106 
	`qsÜt
(
weigh‹dNodes
, 
nodes_švŞved
, (
şu¡”Mªag”Node
 *),

6107 
şu¡”Mªag”Com·»NodeB®ªû
);

6108 
	`şu¡”Mªag”LogInfo
(">>> Rebalancing‡cross %d‚odes. "

6110 
nodes_švŞved
, 
tÙ®_weight
);

6111 ià(
cÚfig
.
v”bo£
) {

6112 
i
 = 0; i < 
nodes_švŞved
; i++) {

6113 
şu¡”Mªag”Node
 *
n
 = 
weigh‹dNodes
[
i
];

6114 
	`´štf
("%s:%d b®ªû i %d slÙs\n", 
n
->

,‚->
pÜt
,‚->
b®ªû
);

6122 
d¡_idx
 = 0;

6123 
¤c_idx
 = 
nodes_švŞved
 - 1;

6124 
simuÏ‹
 = 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 &

6125 
CLUSTER_MANAGER_CMD_FLAG_SIMULATE
;

6126 
d¡_idx
 < 
¤c_idx
) {

6127 
şu¡”Mªag”Node
 *
d¡
 = 
weigh‹dNodes
[
d¡_idx
];

6128 
şu¡”Mªag”Node
 *
¤c
 = 
weigh‹dNodes
[
¤c_idx
];

6129 
db
 = 
	`abs
(
d¡
->
b®ªû
);

6130 
sb
 = 
	`abs
(
¤c
->
b®ªû
);

6131 
num¦Ùs
 = (
db
 < 
sb
 ? db : sb);

6132 ià(
num¦Ùs
 > 0) {

6133 
	`´štf
("Movšg %d slÙ äom %s:%dØ%s:%d\n", 
num¦Ùs
,

6134 
¤c
->

,

6135 
¤c
->
pÜt
,

6136 
d¡
->

,

6137 
d¡
->
pÜt
);

6139 
li¡
 *
l¤c
 = 
	`li¡C»©e
(), *
bË
 = 
NULL
;

6140 
	`li¡AddNodeTa
(
l¤c
, 
¤c
);

6141 
bË
 = 
	`şu¡”Mªag”Compu‹Resh¬dTabË
(
l¤c
, 
num¦Ùs
);

6142 
	`li¡R–—£
(
l¤c
);

6143 
bË_Ën
 = (è
	`li¡L’gth
(
bË
);

6144 ià(!
bË
 || 
bË_Ën
 !ğ
num¦Ùs
) {

6145 
	`şu¡”Mªag”LogE¼
("*** Assertion failed: Reshardable "

6147 
»suÉ
 = 0;

6148 
’d_move
;

6150 ià(
simuÏ‹
) {

6151 
i
 = 0; i < 
bË_Ën
; i++è
	`´štf
("#");

6153 
İts
 = 
CLUSTER_MANAGER_OPT_QUIET
 |

6154 
CLUSTER_MANAGER_OPT_UPDATE
;

6155 
	`li¡Rewšd
(
bË
, &
li
);

6156 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6157 
şu¡”Mªag”Resh¬dTabËI‹m
 *
™em
 = 
Ê
->
v®ue
;

6158 
»suÉ
 = 
	`şu¡”Mªag”MoveSlÙ
(
™em
->
sourû
,

6159 
d¡
,

6160 
™em
->
¦Ù
,

6161 
İts
, 
NULL
);

6162 ià(!
»suÉ
è
’d_move
;

6163 
	`´štf
("#");

6164 
	`fæush
(
¡dout
);

6168 
	`´štf
("\n");

6169 
’d_move
:

6170 
	`şu¡”Mªag”R–—£Resh¬dTabË
(
bË
);

6171 ià(!
»suÉ
è
ş—nup
;

6174 
d¡
->
b®ªû
 +ğ
num¦Ùs
;

6175 
¤c
->
b®ªû
 -ğ
num¦Ùs
;

6176 ià(
d¡
->
b®ªû
 =ğ0è
d¡_idx
++;

6177 ià(
¤c
->
b®ªû
 =ğ0è
¤c_idx
 --;

6179 
ş—nup
:

6180 ià(
švŞved
 !ğ
NULL
è
	`li¡R–—£
(involved);

6181 ià(
weigh‹dNodes
 !ğ
NULL
è
	`zä“
(weightedNodes);

6182  
»suÉ
;

6183 
šv®id_¬gs
:

6184 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

6186 
	}
}

6188 
	$şu¡”Mªag”CommªdS‘Timeout
(
¬gc
, **
¬gv
) {

6189 
	`UNUSED
(
¬gc
);

6190 
pÜt
 = 0;

6191 *

 = 
NULL
;

6192 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

6193 
timeout
 = 
	`©oi
(
¬gv
[1]);

6194 ià(
timeout
 < 100) {

6195 
	`årštf
(
¡d”r
, "Setting‡‚odeimeout of†esshan 100 "

6200 
şu¡”Mªag”Node
 *
node
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

6201 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
node
, 0))  0;

6202 
ok_couÁ
 = 0, 
”r_couÁ
 = 0;

6204 
	`şu¡”Mªag”LogInfo
(">>> Reconfiguring‚odeimeout inƒvery "

6206 
li¡I‹r
 
li
;

6207 
li¡Node
 *
Ê
;

6208 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

6209 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6210 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6211 *
”r
 = 
NULL
;

6212 
»disR•ly
 *
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CONFIG %s %s %d",

6215 
timeout
);

6216 ià(
»¶y
 =ğ
NULL
è
»¶y_”r
;

6217 
ok
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
»¶y
, &
”r
);

6218 
	`ä“R•lyObjeù
(
»¶y
);

6219 ià(!
ok
è
»¶y_”r
;

6220 
»¶y
 = 
	`CLUSTER_MANAGER_COMMAND
(
n
, "CONFIG %s", "REWRITE");

6221 ià(
»¶y
 =ğ
NULL
è
»¶y_”r
;

6222 
ok
 = 
	`şu¡”Mªag”CheckRedisR•ly
(
n
, 
»¶y
, &
”r
);

6223 
	`ä“R•lyObjeù
(
»¶y
);

6224 ià(!
ok
è
»¶y_”r
;

6225 
	`şu¡”Mªag”LogW¬n
("*** Newimeouˆ£ˆfÜ %s:%d\n", 
n
->

,

6226 
n
->
pÜt
);

6227 
ok_couÁ
++;

6229 
»¶y_”r
:;

6230 
Ãed_ä“
 = 0;

6231 ià(
”r
 =ğ
NULL
)ƒrr = "";

6232 
Ãed_ä“
 = 1;

6233 
	`şu¡”Mªag”LogE¼
("ERR s‘tšg‚ode-timeÙ fÜ %s:%d: %s\n", 
n
->

,

6234 
n
->
pÜt
, 
”r
);

6235 ià(
Ãed_ä“
è
	`zä“
(
”r
);

6236 
”r_couÁ
++;

6238 
	`şu¡”Mªag”LogInfo
(">>> New‚odeimeout set. %d OK, %d ERR.\n",

6239 
ok_couÁ
, 
”r_couÁ
);

6241 
šv®id_¬gs
:

6242 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

6244 
	}
}

6246 
	$şu¡”Mªag”CommªdImpÜt
(
¬gc
, **
¬gv
) {

6247 
sucûss
 = 1;

6248 
pÜt
 = 0, 
¤c_pÜt
 = 0;

6249 *

 = 
NULL
, *
¤c_
 = NULL;

6250 *
šv®id_¬gs_msg
 = 
NULL
;

6251 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(
¬gc
, 
¬gv
, &

, &
pÜt
)) {

6252 
šv®id_¬gs_msg
 = 
CLUSTER_MANAGER_INVALID_HOST_ARG
;

6253 
šv®id_¬gs
;

6255 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
äom
 =ğ
NULL
) {

6256 
šv®id_¬gs_msg
 = "[ERR] Option '--cluster-from' is„equired for "

6258 
šv®id_¬gs
;

6260 *
¤c_ho¡
[] = {
cÚfig
.
şu¡”_mªag”_commªd
.
äom
};

6261 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¤c_ho¡
, &
¤c_
, &
¤c_pÜt
)) {

6262 
šv®id_¬gs_msg
 = "[ERR] Invalid --cluster-from host. You‚eedo "

6264 
šv®id_¬gs
;

6266 
	`şu¡”Mªag”LogInfo
(">>> Importing data from %s:%do cluster %s:%d\n",

6267 
¤c_
, 
¤c_pÜt
, 

, 
pÜt
);

6269 
şu¡”Mªag”Node
 *
»âode
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

6270 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
»âode
, 0))  0;

6271 ià(!
	`şu¡”Mªag”CheckClu¡”
(0))  0;

6272 *
»¶y_”r
 = 
NULL
;

6273 
»disR•ly
 *
¤c_»¶y
 = 
NULL
;

6275 
»disCÚ‹xt
 *
¤c_ùx
 = 
	`»disCÚÃù
(
¤c_
, 
¤c_pÜt
);

6276 ià(
¤c_ùx
->
”r
) {

6277 
sucûss
 = 0;

6278 
	`årštf
(
¡d”r
,"Could‚Ù cÚÃùØRedi © %s:%d: %s.\n", 
¤c_
,

6279 
¤c_pÜt
, 
¤c_ùx
->
”r¡r
);

6280 
ş—nup
;

6282 
¤c_»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
¤c_ùx
, "INFO");

6283 ià(!
¤c_»¶y
 || src_»¶y->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

6284 ià(
¤c_»¶y
 && src_»¶y->
¡r
è
»¶y_”r
 = src_reply->str;

6285 
sucûss
 = 0;

6286 
ş—nup
;

6288 ià(
	`g‘LÚgInfoF›ld
(
¤c_»¶y
->
¡r
, "cluster_enabled")) {

6289 
	`şu¡”Mªag”LogE¼
("[ERR] The source‚ode should‚ot be‡ "

6291 
sucûss
 = 0;

6292 
ş—nup
;

6294 
	`ä“R•lyObjeù
(
¤c_»¶y
);

6295 
¤c_»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
¤c_ùx
, "DBSIZE");

6296 ià(!
¤c_»¶y
 || src_»¶y->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

6297 ià(
¤c_»¶y
 && src_»¶y->
¡r
è
»¶y_”r
 = src_reply->str;

6298 
sucûss
 = 0;

6299 
ş—nup
;

6301 
size
 = 
¤c_»¶y
->
š‹g”
, 
i
;

6302 
	`şu¡”Mªag”LogW¬n
("*** ImpÜtšg %d key äom DB 0\n", 
size
);

6305 
şu¡”Mªag”Node
 *
¦Ùs_m­
[
CLUSTER_MANAGER_SLOTS
];

6306 
	`mem£t
(
¦Ùs_m­
, 0, (slots_map));

6307 
li¡I‹r
 
li
;

6308 
li¡Node
 *
Ê
;

6309 
i
 = 0; i < 
CLUSTER_MANAGER_SLOTS
; i++) {

6310 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

6311 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6312 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6313 ià(
n
->
æags
 & 
CLUSTER_MANAGER_FLAG_SLAVE
) ;

6314 ià(
n
->
¦Ùs_couÁ
 == 0) ;

6315 ià(
n
->
¦Ùs
[
i
]) {

6316 
¦Ùs_m­
[
i
] = 
n
;

6322 
cmdfmt
[50] = "MIGRATE %s %d %s %d %d";

6323 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 & 
CLUSTER_MANAGER_CMD_FLAG_COPY
)

6324 
	`¡rÿt
(
cmdfmt
, " %s");

6325 ià(
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 & 
CLUSTER_MANAGER_CMD_FLAG_REPLACE
)

6326 
	`¡rÿt
(
cmdfmt
, " %s");

6330 
cursÜ
 = -999, 
timeout
 = 
cÚfig
.
şu¡”_mªag”_commªd
.timeout;

6331 
cursÜ
 != 0) {

6332 ià(
cursÜ
 < 0) cursor = 0;

6333 
	`ä“R•lyObjeù
(
¤c_»¶y
);

6334 
¤c_»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
¤c_ùx
, "SCAN %d COUNT %d",

6335 
cursÜ
, 1000);

6336 ià(!
¤c_»¶y
 || src_»¶y->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

6337 ià(
¤c_»¶y
 && src_»¶y->
¡r
è
»¶y_”r
 = src_reply->str;

6338 
sucûss
 = 0;

6339 
ş—nup
;

6341 
	`as£¹
(
¤c_»¶y
->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

6342 
	`as£¹
(
¤c_»¶y
->
–em’ts
 >= 2);

6343 
	`as£¹
(
¤c_»¶y
->
–em’t
[1]->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

6344 ià(
¤c_»¶y
->
–em’t
[0]->
ty³
 =ğ
REDIS_REPLY_STRING
)

6345 
cursÜ
 = 
	`©oi
(
¤c_»¶y
->
–em’t
[0]->
¡r
);

6346 ià(
¤c_»¶y
->
–em’t
[0]->
ty³
 =ğ
REDIS_REPLY_INTEGER
)

6347 
cursÜ
 = 
¤c_»¶y
->
–em’t
[0]->
š‹g”
;

6348 
keycouÁ
 = 
¤c_»¶y
->
–em’t
[1]->
–em’ts
;

6349 
i
 = 0; i < 
keycouÁ
; i++) {

6350 
»disR•ly
 *
kr
 = 
¤c_»¶y
->
–em’t
[1]->–em’t[
i
];

6351 
	`as£¹
(
kr
->
ty³
 =ğ
REDIS_REPLY_STRING
);

6352 *
key
 = 
kr
->
¡r
;

6353 
ušt16_t
 
¦Ù
 = 
	`şu¡”Mªag”KeyHashSlÙ
(
key
, 
kr
->
Ën
);

6354 
şu¡”Mªag”Node
 *
rg‘
 = 
¦Ùs_m­
[
¦Ù
];

6355 
	`´štf
("Mig¿tšg % tØ%s:%d: ", 
key
, 
rg‘
->

,¬g‘->
pÜt
);

6356 
»disR•ly
 *
r
 = 
	`»cÚÃùšgRedisCommªd
(
¤c_ùx
, 
cmdfmt
,

6357 
rg‘
->

,¬g‘->
pÜt
,

6358 
key
, 0, 
timeout
,

6360 ià(!
r
 ||„->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

6361 ià(
r
 &&„->
¡r
) {

6362 
	`şu¡”Mªag”LogE¼
("Source %s:%d„eplied with "

6363 "”rÜ:\n%s\n", 
¤c_
, 
¤c_pÜt
,

6364 
r
->
¡r
);

6366 
sucûss
 = 0;

6368 
	`ä“R•lyObjeù
(
r
);

6369 ià(!
sucûss
è
ş—nup
;

6370 
	`şu¡”Mªag”LogOk
("OK\n");

6373 
ş—nup
:

6374 ià(
»¶y_”r
)

6375 
	`şu¡”Mªag”LogE¼
("Source %s:%d„eplied withƒrror:\n%s\n",

6376 
¤c_
, 
¤c_pÜt
, 
»¶y_”r
);

6377 ià(
¤c_ùx
è
	`»disF»e
(src_ctx);

6378 ià(
¤c_»¶y
è
	`ä“R•lyObjeù
(src_reply);

6379  
sucûss
;

6380 
šv®id_¬gs
:

6381 
	`årštf
(
¡d”r
, "%s", 
šv®id_¬gs_msg
);

6383 
	}
}

6385 
	$şu¡”Mªag”CommªdC®l
(
¬gc
, **
¬gv
) {

6386 
pÜt
 = 0, 
i
;

6387 *

 = 
NULL
;

6388 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

6389 
şu¡”Mªag”Node
 *
»âode
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

6390 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
»âode
, 0))  0;

6391 
¬gc
--;

6392 
¬gv
++;

6393 
size_t
 *
¬gvËn
 = 
	`zm®loc
(
¬gc
*(size_t));

6394 
	`şu¡”Mªag”LogInfo
(">>> Calling");

6395 
i
 = 0; i < 
¬gc
; i++) {

6396 
¬gvËn
[
i
] = 
	`¡¾’
(
¬gv
[i]);

6397 
	`´štf
(" %s", 
¬gv
[
i
]);

6399 
	`´štf
("\n");

6400 
li¡I‹r
 
li
;

6401 
li¡Node
 *
Ê
;

6402 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

6403 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6404 
şu¡”Mªag”Node
 *
n
 = 
Ê
->
v®ue
;

6405 ià(!
n
->
cÚ‹xt
 && !
	`şu¡”Mªag”NodeCÚÃù
(n)) ;

6406 
»disR•ly
 *
»¶y
 = 
NULL
;

6407 
	`»disAµ’dCommªdArgv
(
n
->
cÚ‹xt
, 
¬gc
, (cÚ¡ **è
¬gv
, 
¬gvËn
);

6408 
¡©us
 = 
	`»disG‘R•ly
(
n
->
cÚ‹xt
, (**)(&
»¶y
));

6409 ià(
¡©us
 !ğ
REDIS_OK
 || 
»¶y
 =ğ
NULL
 )

6410 
	`´štf
("%s:%d: Faed!\n", 
n
->

,‚->
pÜt
);

6412 
sds
 
fÜm©‹d_»¶y
 = 
	`şiFÜm©R•lyRaw
(
»¶y
);

6413 
	`´štf
("%s:%d: %s\n", 
n
->

,‚->
pÜt
, (*è
fÜm©‹d_»¶y
);

6414 
	`sdsä“
(
fÜm©‹d_»¶y
);

6416 ià(
»¶y
 !ğ
NULL
è
	`ä“R•lyObjeù
(reply);

6418 
	`zä“
(
¬gvËn
);

6420 
šv®id_¬gs
:

6421 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

6423 
	}
}

6425 
	$şu¡”Mªag”CommªdBackup
(
¬gc
, **
¬gv
) {

6426 
	`UNUSED
(
¬gc
);

6427 
sucûss
 = 1, 
pÜt
 = 0;

6428 *

 = 
NULL
;

6429 ià(!
	`g‘Clu¡”Ho¡FromCmdArgs
(1, 
¬gv
, &

, &
pÜt
)è
šv®id_¬gs
;

6430 
şu¡”Mªag”Node
 *
»âode
 = 
	`şu¡”Mªag”NewNode
(

, 
pÜt
);

6431 ià(!
	`şu¡”Mªag”LßdInfoFromNode
(
»âode
, 0))  0;

6432 
no_issues
 = 
	`şu¡”Mªag”CheckClu¡”
(0);

6433 
şu¡”_”rÜs_couÁ
 = (
no_issues
 ? 0 :

6434 
	`li¡L’gth
(
şu¡”_mªag”
.
”rÜs
));

6435 
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
 = 
¬gv
[1];

6437 
sds
 
jsÚ
 = 
	`sd¢ew
("[\n");

6438 
fœ¡_node
 = 0;

6439 
li¡I‹r
 
li
;

6440 
li¡Node
 *
Ê
;

6441 
	`li¡Rewšd
(
şu¡”_mªag”
.
nodes
, &
li
);

6442 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

6443 ià(!
fœ¡_node
) first_node = 1;

6444 
jsÚ
 = 
	`sdsÿt
(json, ",\n");

6445 
şu¡”Mªag”Node
 *
node
 = 
Ê
->
v®ue
;

6446 
sds
 
node_jsÚ
 = 
	`şu¡”Mªag”NodeG‘JSON
(
node
, 
şu¡”_”rÜs_couÁ
);

6447 
jsÚ
 = 
	`sdsÿt
(jsÚ, 
node_jsÚ
);

6448 
	`sdsä“
(
node_jsÚ
);

6449 ià(
node
->
»¶iÿ‹
)

6451 
	`şu¡”Mªag”LogInfo
(">>> Node %s:%d -> Saving RDB...\n",

6452 
node
->

,‚ode->
pÜt
);

6453 
	`fæush
(
¡dout
);

6454 
	`g‘RDB
(
node
);

6456 
jsÚ
 = 
	`sdsÿt
(json, "\n]");

6457 
sds
 
jsÚ·th
 = 
	`sd¢ew
(
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
);

6458 ià(
jsÚ·th
[
	`sd¦’
(jsonpath) - 1] != '/')

6459 
jsÚ·th
 = 
	`sdsÿt
(jsonpath, "/");

6460 
jsÚ·th
 = 
	`sdsÿt
(jsonpath, "nodes.json");

6461 
	`fæush
(
¡dout
);

6462 
	`şu¡”Mªag”LogInfo
("Savšg clu¡” cÚfigu¿tiÚo: %s\n", 
jsÚ·th
);

6463 
FILE
 *
out
 = 
	`fİ’
(
jsÚ·th
, "w+");

6464 ià(!
out
) {

6465 
	`şu¡”Mªag”LogE¼
("Could‚Ù savnode to: %s\n", 
jsÚ·th
);

6466 
sucûss
 = 0;

6467 
ş—nup
;

6469 
	`åuts
(
jsÚ
, 
out
);

6470 
	`fşo£
(
out
);

6471 
ş—nup
:

6472 
	`sdsä“
(
jsÚ
);

6473 
	`sdsä“
(
jsÚ·th
);

6474 ià(
sucûss
) {

6475 ià(!
no_issues
) {

6476 
	`şu¡”Mªag”LogW¬n
("*** Cluster seemso have some…roblems, "

6480 
	`şu¡”Mªag”LogOk
("[OK] Backup created into: %s\n",

6481 
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
);

6482 } 
	`şu¡”Mªag”LogOk
("[ERR] Failedo back cluster!\n");

6483  
sucûss
;

6484 
šv®id_¬gs
:

6485 
	`årštf
(
¡d”r
, 
CLUSTER_MANAGER_INVALID_HOST_ARG
);

6487 
	}
}

6489 
	$şu¡”Mªag”CommªdH–p
(
¬gc
, **
¬gv
) {

6490 
	`UNUSED
(
¬gc
);

6491 
	`UNUSED
(
¬gv
);

6492 
commªds_couÁ
 = (
şu¡”Mªag”Commªds
) /

6493 (
şu¡”Mªag”CommªdDef
);

6494 
i
 = 0, 
j
;

6495 
	`årštf
(
¡d”r
, "Cluster Manager Commands:\n");

6496 
·ddšg
 = 15;

6497 ; 
i
 < 
commªds_couÁ
; i++) {

6498 
şu¡”Mªag”CommªdDef
 *
def
 = &(
şu¡”Mªag”Commªds
[
i
]);

6499 
Çm–’
 = 
	`¡¾’
(
def
->
Çme
), 
·dËn
 = 
·ddšg
 -‚amelen;

6500 
	`årštf
(
¡d”r
, " %s", 
def
->
Çme
);

6501 
j
 = 0; j < 
·dËn
; j++è
	`årštf
(
¡d”r
, " ");

6502 
	`årštf
(
¡d”r
, "%s\n", (
def
->
¬gs
 ? def->args : ""));

6503 ià(
def
->
İtiÚs
 !ğ
NULL
) {

6504 
İt¦’
 = 
	`¡¾’
(
def
->
İtiÚs
);

6505 *
p
 = 
def
->
İtiÚs
, *
eos
 =… + 
İt¦’
;

6506 *
comma
 = 
NULL
;

6507 (
comma
 = 
	`¡rchr
(
p
, ',')è!ğ
NULL
) {

6508 
deæ’
 = ()(
comma
 - 
p
);

6509 
buf
[255];

6510 
	`memıy
(
buf
, 
p
, 
deæ’
);

6511 
buf
[
deæ’
] = '\0';

6512 
j
 = 0; j < 
·ddšg
; j++è
	`årštf
(
¡d”r
, " ");

6513 
	`årštf
(
¡d”r
, " --şu¡”-%s\n", 
buf
);

6514 
p
 = 
comma
 + 1;

6515 ià(
p
 >ğ
eos
) ;

6517 ià(
p
 < 
eos
) {

6518 
j
 = 0; j < 
·ddšg
; j++è
	`årštf
(
¡d”r
, " ");

6519 
	`årštf
(
¡d”r
, " --şu¡”-%s\n", 
p
);

6523 
	`årštf
(
¡d”r
, "\nFor check, fix,„eshard, del-node, set-timeout you "

6527 
	}
}

6533 
	$Ï‹ncyModePršt
(
mš
, 
max
, 
avg
, 
couÁ
) {

6534 ià(
cÚfig
.
ouut
 =ğ
OUTPUT_STANDARD
) {

6535 
	`´štf
("min: %lld, max: %lld,‡vg: %.2f (%lld samples)",

6536 
mš
, 
max
, 
avg
, 
couÁ
);

6537 
	`fæush
(
¡dout
);

6538 } ià(
cÚfig
.
ouut
 =ğ
OUTPUT_CSV
) {

6539 
	`´štf
("%Îd,%Îd,%.2f,%Îd\n", 
mš
, 
max
, 
avg
, 
couÁ
);

6540 } ià(
cÚfig
.
ouut
 =ğ
OUTPUT_RAW
) {

6541 
	`´štf
("%Îd %Îd %.2à%Îd\n", 
mš
, 
max
, 
avg
, 
couÁ
);

6543 
	}
}

6545 
	#LATENCY_SAMPLE_RATE
 10

	)

6546 
	#LATENCY_HISTORY_DEFAULT_INTERVAL
 15000

	)

6547 
	$Ï‹ncyMode
() {

6548 
»disR•ly
 *
»¶y
;

6549 
¡¬t
, 
Ï‹ncy
, 
mš
 = 0, 
max
 = 0, 
tÙ
 = 0, 
couÁ
 = 0;

6550 
hi¡Üy_š‹rv®
 =

6551 
cÚfig
.
š‹rv®
 ? config.interval/1000 :

6552 
LATENCY_HISTORY_DEFAULT_INTERVAL
;

6553 
avg
;

6554 
hi¡Üy_¡¬t
 = 
	`m¡ime
();

6558 ià(
cÚfig
.
š‹rv®
 == 0) {

6559 
cÚfig
.
š‹rv®
 = 1000;

6561 
cÚfig
.
š‹rv®
 /= 1000;

6564 ià(!
cÚ‹xt
è
	`ex™
(1);

6566 
¡¬t
 = 
	`m¡ime
();

6567 
»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
cÚ‹xt
,"PING");

6568 ià(
»¶y
 =ğ
NULL
) {

6569 
	`årštf
(
¡d”r
,"\nI/Oƒrror\n");

6570 
	`ex™
(1);

6572 
Ï‹ncy
 = 
	`m¡ime
()-
¡¬t
;

6573 
	`ä“R•lyObjeù
(
»¶y
);

6574 
couÁ
++;

6575 ià(
couÁ
 == 1) {

6576 
mš
 = 
max
 = 
tÙ
 = 
Ï‹ncy
;

6577 
avg
 = (è
Ï‹ncy
;

6579 ià(
Ï‹ncy
 < 
mš
) min =†atency;

6580 ià(
Ï‹ncy
 > 
max
) max =†atency;

6581 
tÙ
 +ğ
Ï‹ncy
;

6582 
avg
 = (è
tÙ
/
couÁ
;

6585 ià(
cÚfig
.
ouut
 =ğ
OUTPUT_STANDARD
) {

6586 
	`´štf
("\x1b[0G\x1b[2K");

6587 
	`Ï‹ncyModePršt
(
mš
,
max
,
avg
,
couÁ
);

6589 ià(
cÚfig
.
Ï‹ncy_hi¡Üy
) {

6590 
	`Ï‹ncyModePršt
(
mš
,
max
,
avg
,
couÁ
);

6591 } ià(
	`m¡ime
()-
hi¡Üy_¡¬t
 > 
cÚfig
.
š‹rv®
) {

6592 
	`Ï‹ncyModePršt
(
mš
,
max
,
avg
,
couÁ
);

6593 
	`ex™
(0);

6597 ià(
cÚfig
.
Ï‹ncy_hi¡Üy
 && 
	`m¡ime
()-
hi¡Üy_¡¬t
 > 
hi¡Üy_š‹rv®
)

6599 
	`´štf
(" -- %.2à£cÚd ¿nge\n", ()(
	`m¡ime
()-
hi¡Üy_¡¬t
)/1000);

6600 
hi¡Üy_¡¬t
 = 
	`m¡ime
();

6601 
mš
 = 
max
 = 
tÙ
 = 
couÁ
 = 0;

6603 
	`u¦“p
(
LATENCY_SAMPLE_RATE
 * 1000);

6605 
	}
}

6611 
	#LATENCY_DIST_DEFAULT_INTERVAL
 1000

	)

6614 
	sdi¡§m¶es
 {

6615 
	mmax
;

6616 
	mcouÁ
;

6617 
	mch¬aù”
;

6631 
	$showL©’cyDi¡Sam¶es
(
di¡§m¶es
 *
§m¶es
, 
tÙ
) {

6632 
j
;

6639 
	`´štf
("\033[38;5;0m");

6640 
j
 = 0; ; j++) {

6641 
cŞÜidx
 =

6642 
	`û
((è
§m¶es
[
j
].
couÁ
 / 
tÙ
 * (
¥eùrum_·Ë‰e_size
-1));

6643 
cŞÜ
 = 
¥eùrum_·Ë‰e
[
cŞÜidx
];

6644 
	`´štf
("\033[48;5;%dm%c", ()
cŞÜ
, 
§m¶es
[
j
].
ch¬aù”
);

6645 
§m¶es
[
j
].
couÁ
 = 0;

6646 ià(
§m¶es
[
j
].
max
 == 0) ;

6648 
	`´štf
("\033[0m\n");

6649 
	`fæush
(
¡dout
);

6650 
	}
}

6654 
	$showL©’cyDi¡Leg’d
() {

6655 
j
;

6657 
	`´štf
("---------------------------------------------\n");

6658 
	`´štf
(". - * # .01 .125 .25 .5 milliseconds\n");

6659 
	`´štf
("1,2,3,...,9 from 1o 9 milliseconds\n");

6660 
	`´štf
("A,B,C,D,E 10,20,30,40,50 milliseconds\n");

6661 
	`´štf
("F,G,H,I,J .1,.2,.3,.4,.5 seconds\n");

6662 
	`´štf
("K,L,M,N,O,P,Q,? 1,2,4,8,16,30,60,>60 seconds\n");

6663 
	`´štf
("From 0o 100%%: ");

6664 
j
 = 0; j < 
¥eùrum_·Ë‰e_size
; j++) {

6665 
	`´štf
("\033[48;5;%dm ", 
¥eùrum_·Ë‰e
[
j
]);

6667 
	`´štf
("\033[0m\n");

6668 
	`´štf
("---------------------------------------------\n");

6669 
	}
}

6671 
	$Ï‹ncyDi¡Mode
() {

6672 
»disR•ly
 *
»¶y
;

6673 
¡¬t
, 
Ï‹ncy
, 
couÁ
 = 0;

6674 
hi¡Üy_š‹rv®
 =

6675 
cÚfig
.
š‹rv®
 ? config.interval/1000 :

6676 
LATENCY_DIST_DEFAULT_INTERVAL
;

6677 
hi¡Üy_¡¬t
 = 
	`u¡ime
();

6678 
j
, 
ouuts
 = 0;

6680 
di¡§m¶es
 
§m¶es
[] = {

6717 ià(!
cÚ‹xt
è
	`ex™
(1);

6719 
¡¬t
 = 
	`u¡ime
();

6720 
»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
cÚ‹xt
,"PING");

6721 ià(
»¶y
 =ğ
NULL
) {

6722 
	`årštf
(
¡d”r
,"\nI/Oƒrror\n");

6723 
	`ex™
(1);

6725 
Ï‹ncy
 = 
	`u¡ime
()-
¡¬t
;

6726 
	`ä“R•lyObjeù
(
»¶y
);

6727 
couÁ
++;

6730 
j
 = 0; ; j++) {

6731 ià(
§m¶es
[
j
].
max
 =ğ0 || 
Ï‹ncy
 <= samples[j].max) {

6732 
§m¶es
[
j
].
couÁ
++;

6738 ià(
couÁ
 && (
	`u¡ime
()-
hi¡Üy_¡¬t
)/1000 > 
hi¡Üy_š‹rv®
) {

6739 ià((
ouuts
++ % 20) == 0)

6740 
	`showL©’cyDi¡Leg’d
();

6741 
	`showL©’cyDi¡Sam¶es
(
§m¶es
,
couÁ
);

6742 
hi¡Üy_¡¬t
 = 
	`u¡ime
();

6743 
couÁ
 = 0;

6745 
	`u¦“p
(
LATENCY_SAMPLE_RATE
 * 1000);

6747 
	}
}

6753 
	#RDB_EOF_MARK_SIZE
 40

	)

6755 
	$£ndR•lcÚf
(cÚ¡ * 
¬g1
, cÚ¡ * 
¬g2
) {

6756 
	`´štf
("£ndšg REPLCONF % %s\n", 
¬g1
, 
¬g2
);

6757 
»disR•ly
 *
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
, "REPLCONF % %s", 
¬g1
, 
¬g2
);

6760 if(
»¶y
 =ğ
NULL
) {

6761 
	`årštf
(
¡d”r
, "\nI/Oƒrror\n");

6762 
	`ex™
(1);

6763 } if(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

6764 
	`årštf
(
¡d”r
, "REPLCONF % ”rÜ: %s\n", 
¬g1
, 
»¶y
->
¡r
);

6767 
	`ä“R•lyObjeù
(
»¶y
);

6768 
	}
}

6770 
	$£ndC­a
() {

6771 
	`£ndR•lcÚf
("capa", "eof");

6772 
	}
}

6777 
	$£ndSync
(
fd
, *
out_eof
) {

6782 
buf
[4096], *
p
;

6783 
ssize_t
 
Ä—d
;

6786 ià(
	`wr™e
(
fd
,"SYNC\r\n",6) != 6) {

6787 
	`årštf
(
¡d”r
,"Error writingo master\n");

6788 
	`ex™
(1);

6792 
p
 = 
buf
;

6794 
Ä—d
 = 
	`»ad
(
fd
,
p
,1);

6795 ià(
Ä—d
 <= 0) {

6796 
	`årštf
(
¡d”r
,"Error„eading bulk†ength while SYNCing\n");

6797 
	`ex™
(1);

6799 ià(*
p
 =ğ'\n' &&… !ğ
buf
) ;

6800 ià(*
p
 != '\n')…++;

6802 *
p
 = '\0';

6803 ià(
buf
[0] == '-') {

6804 
	`´štf
("SYNC w™h ma¡” faed: %s\n", 
buf
);

6805 
	`ex™
(1);

6807 ià(
	`¡ºcmp
(
buf
+1,"EOF:",4è=ğ0 && 
	`¡¾’
(buf+5è>ğ
RDB_EOF_MARK_SIZE
) {

6808 
	`memıy
(
out_eof
, 
buf
+5, 
RDB_EOF_MARK_SIZE
);

6811  
	`¡¹ouÎ
(
buf
+1,
NULL
,10);

6812 
	}
}

6814 
	$¦aveMode
() {

6815 
fd
 = 
cÚ‹xt
->fd;

6816 
eofm¬k
[
RDB_EOF_MARK_SIZE
];

6817 
Ï¡by‹s
[
RDB_EOF_MARK_SIZE
];

6818 
u£m¬k
 = 0;

6819 
·ylßd
 = 
	`£ndSync
(
fd
, 
eofm¬k
);

6820 
buf
[1024];

6821 
Üigš®_ouut
 = 
cÚfig
.
ouut
;

6823 ià(
·ylßd
 == 0) {

6824 
·ylßd
 = 
ULLONG_MAX
;

6825 
	`mem£t
(
Ï¡by‹s
,0,
RDB_EOF_MARK_SIZE
);

6826 
u£m¬k
 = 1;

6827 
	`årštf
(
¡d”r
,"SYNC with master, discarding "

6830 
	`årštf
(
¡d”r
,"SYNC with master, discarding %llu "

6831 "by‹ oàbulk¿nsãr...\n", 
·ylßd
);

6836 
·ylßd
) {

6837 
ssize_t
 
Ä—d
;

6839 
Ä—d
 = 
	`»ad
(
fd
,
buf
,(
·ylßd
 > (buf)) ? (buf) :…ayload);

6840 ià(
Ä—d
 <= 0) {

6841 
	`årštf
(
¡d”r
,"Error„eading RDB…ayload while SYNCing\n");

6842 
	`ex™
(1);

6844 
·ylßd
 -ğ
Ä—d
;

6846 ià(
u£m¬k
) {

6848 ià(
Ä—d
 >ğ
RDB_EOF_MARK_SIZE
) {

6849 
	`memıy
(
Ï¡by‹s
,
buf
+
Ä—d
-
RDB_EOF_MARK_SIZE
,RDB_EOF_MARK_SIZE);

6851 
»m
 = 
RDB_EOF_MARK_SIZE
-
Ä—d
;

6852 
	`memmove
(
Ï¡by‹s
,Ï¡by‹s+
Ä—d
,
»m
);

6853 
	`memıy
(
Ï¡by‹s
+
»m
,
buf
,
Ä—d
);

6855 ià(
	`memcmp
(
Ï¡by‹s
,
eofm¬k
,
RDB_EOF_MARK_SIZE
) == 0)

6860 ià(
u£m¬k
) {

6861 
off£t
 = 
ULLONG_MAX
 - 
·ylßd
;

6862 
	`årštf
(
¡d”r
,"SYNC dÚaá” %Îu by‹s. Loggšg commªd äom ma¡”.\n", 
off£t
);

6864 
	`¦“p
(1);

6865 
	`£ndR•lcÚf
("ACK", "0");

6867 
	`årštf
(
¡d”r
,"SYNC done. Logging commands from master.\n");

6870 
cÚfig
.
ouut
 = 
OUTPUT_CSV
;

6871 
	`şiR—dR•ly
(0è=ğ
REDIS_OK
);

6872 
cÚfig
.
ouut
 = 
Üigš®_ouut
;

6873 
	}
}

6881 
	$g‘RDB
(
şu¡”Mªag”Node
 *
node
) {

6882 
s
, 
fd
;

6883 *
f’ame
;

6884 ià(
node
 !ğ
NULL
) {

6885 
	`as£¹
(
node
->
cÚ‹xt
);

6886 
s
 = 
node
->
cÚ‹xt
->
fd
;

6887 
f’ame
 = 
	`şu¡”Mªag”G‘NodeRDBF’ame
(
node
);

6889 
s
 = 
cÚ‹xt
->
fd
;

6890 
f’ame
 = 
cÚfig
.
rdb_f’ame
;

6892 
eofm¬k
[
RDB_EOF_MARK_SIZE
];

6893 
Ï¡by‹s
[
RDB_EOF_MARK_SIZE
];

6894 
u£m¬k
 = 0;

6895 
·ylßd
 = 
	`£ndSync
(
s
, 
eofm¬k
);

6896 
buf
[4096];

6898 ià(
·ylßd
 == 0) {

6899 
·ylßd
 = 
ULLONG_MAX
;

6900 
	`mem£t
(
Ï¡by‹s
,0,
RDB_EOF_MARK_SIZE
);

6901 
u£m¬k
 = 1;

6902 
	`årštf
(
¡d”r
,"SYNC sento master, writing bytes of bulkransfer "

6903 "uÁ EOF m¬k”Ø'%s'\n", 
f’ame
);

6905 
	`årštf
(
¡d”r
,"SYNC sento master, writing %llu byteso '%s'\n",

6906 
·ylßd
, 
f’ame
);

6910 ià(!
	`¡rcmp
(
f’ame
,"-")) {

6911 
fd
 = 
STDOUT_FILENO
;

6913 
fd
 = 
	`İ’
(
f’ame
, 
O_CREAT
|
O_WRONLY
, 0644);

6914 ià(
fd
 == -1) {

6915 
	`årštf
(
¡d”r
, "E¼Ü o³nšg '%s': %s\n", 
f’ame
,

6916 
	`¡»¼Ü
(
”ºo
));

6917 
	`ex™
(1);

6921 
·ylßd
) {

6922 
ssize_t
 
Ä—d
, 
nwr™‹n
;

6924 
Ä—d
 = 
	`»ad
(
s
,
buf
,(
·ylßd
 > (buf)) ? (buf) :…ayload);

6925 ià(
Ä—d
 <= 0) {

6926 
	`årštf
(
¡d”r
,"I/O Error„eading RDB…ayload from socket\n");

6927 
	`ex™
(1);

6929 
nwr™‹n
 = 
	`wr™e
(
fd
, 
buf
, 
Ä—d
);

6930 ià(
nwr™‹n
 !ğ
Ä—d
) {

6931 
	`årštf
(
¡d”r
,"Error writing datao file: %s\n",

6932 (
nwr™‹n
 =ğ-1è? 
	`¡»¼Ü
(
”ºo
) : "short write");

6933 
	`ex™
(1);

6935 
·ylßd
 -ğ
Ä—d
;

6937 ià(
u£m¬k
) {

6939 ià(
Ä—d
 >ğ
RDB_EOF_MARK_SIZE
) {

6940 
	`memıy
(
Ï¡by‹s
,
buf
+
Ä—d
-
RDB_EOF_MARK_SIZE
,RDB_EOF_MARK_SIZE);

6942 
»m
 = 
RDB_EOF_MARK_SIZE
-
Ä—d
;

6943 
	`memmove
(
Ï¡by‹s
,Ï¡by‹s+
Ä—d
,
»m
);

6944 
	`memıy
(
Ï¡by‹s
+
»m
,
buf
,
Ä—d
);

6946 ià(
	`memcmp
(
Ï¡by‹s
,
eofm¬k
,
RDB_EOF_MARK_SIZE
) == 0)

6950 ià(
u£m¬k
) {

6951 
·ylßd
 = 
ULLONG_MAX
 -…aylßd - 
RDB_EOF_MARK_SIZE
;

6952 ià(
	`árunÿ‹
(
fd
, 
·ylßd
) == -1)

6953 
	`årštf
(
¡d”r
,"árunÿ‹ faed: %s.\n", 
	`¡»¼Ü
(
”ºo
));

6954 
	`årštf
(
¡d”r
,"T¿nsã¸fšished w™h sucûs aá” %Îu by‹s\n", 
·ylßd
);

6956 
	`årštf
(
¡d”r
,"Transfer finished with success.\n");

6958 
	`şo£
(
s
);

6959 
	`fsync
(
fd
);

6960 
	`şo£
(
fd
);

6961 
	`årštf
(
¡d”r
,"Transfer finished with success.\n");

6962 ià(
node
) {

6963 
	`sdsä“
(
f’ame
);

6966 
	`ex™
(0);

6967 
	}
}

6973 
	#PIPEMODE_WRITE_LOOP_MAX_BYTES
 (128*1024)

	)

6974 
	$peMode
() {

6975 
fd
 = 
cÚ‹xt
->fd;

6976 
”rÜs
 = 0, 
»¶›s
 = 0, 
obuf_Ën
 = 0, 
obuf_pos
 = 0;

6977 
ibuf
[1024*16], 
obuf
[1024*16];

6978 
ª‘”r
[
ANET_ERR_LEN
];

6979 
»disR—d”
 *
»ad”
 = 
	`»disR—d”C»©e
();

6980 
»disR•ly
 *
»¶y
;

6981 
eof
 = 0;

6982 
dÚe
 = 0;

6983 
magic
[20];

6984 
time_t
 
Ï¡_»ad_time
 = 
	`time
(
NULL
);

6986 
	`¤ªd
(
	`time
(
NULL
));

6989 ià(
	`ª‘NÚBlock
(
ª‘”r
,
fd
è=ğ
ANET_ERR
) {

6990 
	`årštf
(
¡d”r
, "Can't sethe socket in‚on blocking mode: %s\n",

6991 
ª‘”r
);

6992 
	`ex™
(1);

6997 !
dÚe
) {

6998 
mask
 = 
AE_READABLE
;

7000 ià(!
eof
 || 
obuf_Ën
 !ğ0è
mask
 |ğ
AE_WRITABLE
;

7001 
mask
 = 
	`«Wa™
(
fd
,mask,1000);

7004 ià(
mask
 & 
AE_READABLE
) {

7005 
ssize_t
 
Ä—d
;

7006 
»ad_”rÜ
 = 0;

7010 
Ä—d
 = 
	`»ad
(
fd
,
ibuf
,(ibuf));

7011 ià(
Ä—d
 =ğ-1 && 
”ºo
 !ğ
EAGAIN
 &&ƒ¼nØ!ğ
EINTR
) {

7012 
	`årštf
(
¡d”r
, "Error„eading fromhe server: %s\n",

7013 
	`¡»¼Ü
(
”ºo
));

7014 
»ad_”rÜ
 = 1;

7017 ià(
Ä—d
 > 0) {

7018 
	`»disR—d”F“d
(
»ad”
,
ibuf
,
Ä—d
);

7019 
Ï¡_»ad_time
 = 
	`time
(
NULL
);

7021 } 
Ä—d
 > 0);

7025 ià(
	`»disR—d”G‘R•ly
(
»ad”
,(**)&
»¶y
è=ğ
REDIS_ERR
) {

7026 
	`årštf
(
¡d”r
, "Error„eading„eplies from server\n");

7027 
	`ex™
(1);

7029 ià(
»¶y
) {

7030 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7031 
	`årštf
(
¡d”r
,"%s\n", 
»¶y
->
¡r
);

7032 
”rÜs
++;

7033 } ià(
eof
 && 
»¶y
->
ty³
 =ğ
REDIS_REPLY_STRING
 &&

7034 
»¶y
->
Ën
 == 20) {

7038 ià(
	`memcmp
(
»¶y
->
¡r
,
magic
,20) == 0) {

7039 
	`´štf
("Last„eply„eceived from server.\n");

7040 
dÚe
 = 1;

7041 
»¶›s
--;

7044 
»¶›s
++;

7045 
	`ä“R•lyObjeù
(
»¶y
);

7047 } 
»¶y
);

7052 ià(
»ad_”rÜ
è
	`ex™
(1);

7056 ià(
mask
 & 
AE_WRITABLE
) {

7057 
ssize_t
 
loİ_nwr™‹n
 = 0;

7061 ià(
obuf_Ën
 != 0) {

7062 
ssize_t
 
nwr™‹n
 = 
	`wr™e
(
fd
,
obuf
+
obuf_pos
,
obuf_Ën
);

7064 ià(
nwr™‹n
 == -1) {

7065 ià(
”ºo
 !ğ
EAGAIN
 &&ƒ¼nØ!ğ
EINTR
) {

7066 
	`årštf
(
¡d”r
, "Error writingohe server: %s\n",

7067 
	`¡»¼Ü
(
”ºo
));

7068 
	`ex™
(1);

7070 
nwr™‹n
 = 0;

7073 
obuf_Ën
 -ğ
nwr™‹n
;

7074 
obuf_pos
 +ğ
nwr™‹n
;

7075 
loİ_nwr™‹n
 +ğ
nwr™‹n
;

7076 ià(
obuf_Ën
 != 0) ;

7079 ià(
obuf_Ën
 =ğ0 && !
eof
) {

7080 
ssize_t
 
Ä—d
 = 
	`»ad
(
STDIN_FILENO
,
obuf
,(obuf));

7082 ià(
Ä—d
 == 0) {

7087 
echo
[] =

7089 
j
;

7091 
eof
 = 1;

7095 
j
 = 0; j < 20; j++)

7096 
magic
[
j
] = 
	`¿nd
() & 0xff;

7097 
	`memıy
(
echo
+21,
magic
,20);

7098 
	`memıy
(
obuf
,
echo
,(echo)-1);

7099 
obuf_Ën
 = (
echo
)-1;

7100 
obuf_pos
 = 0;

7101 
	`´štf
("All dataransferred. Waiting forhe†ast„eply...\n");

7102 } ià(
Ä—d
 == -1) {

7103 
	`årštf
(
¡d”r
, "Error„eading from stdin: %s\n",

7104 
	`¡»¼Ü
(
”ºo
));

7105 
	`ex™
(1);

7107 
obuf_Ën
 = 
Ä—d
;

7108 
obuf_pos
 = 0;

7111 ià((
obuf_Ën
 =ğ0 && 
eof
) ||

7112 
loİ_nwr™‹n
 > 
PIPEMODE_WRITE_LOOP_MAX_BYTES
) ;

7119 ià(
eof
 && 
cÚfig
.
pe_timeout
 > 0 &&

7120 
	`time
(
NULL
)-
Ï¡_»ad_time
 > 
cÚfig
.
pe_timeout
)

7122 
	`årštf
(
¡d”r
,"No„eplies for %d seconds:ƒxiting.\n",

7123 
cÚfig
.
pe_timeout
);

7124 
”rÜs
++;

7128 
	`»disR—d”F»e
(
»ad”
);

7129 
	`´štf
("”rÜs: %Îd,„•l›s: %Îd\n", 
”rÜs
, 
»¶›s
);

7130 ià(
”rÜs
)

7131 
	`ex™
(1);

7133 
	`ex™
(0);

7134 
	}
}

7140 
»disR•ly
 *
	$£ndSÿn
(*
™
) {

7141 
»disR•ly
 *
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
, "SCAN %Îu", *
™
);

7144 if(
»¶y
 =ğ
NULL
) {

7145 
	`årštf
(
¡d”r
, "\nI/Oƒrror\n");

7146 
	`ex™
(1);

7147 } if(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7148 
	`årštf
(
¡d”r
, "SCANƒ¼Ü: %s\n", 
»¶y
->
¡r
);

7149 
	`ex™
(1);

7150 } if(
»¶y
->
ty³
 !ğ
REDIS_REPLY_ARRAY
) {

7151 
	`årštf
(
¡d”r
, "Non ARRAY„esponse from SCAN!\n");

7152 
	`ex™
(1);

7153 } if(
»¶y
->
–em’ts
 != 2) {

7154 
	`årštf
(
¡d”r
, "Invalidƒlement count from SCAN!\n");

7155 
	`ex™
(1);

7159 
	`as£¹
(
»¶y
->
–em’t
[0]->
ty³
 =ğ
REDIS_REPLY_STRING
);

7160 
	`as£¹
(
»¶y
->
–em’t
[1]->
ty³
 =ğ
REDIS_REPLY_ARRAY
);

7163 *
™
 = 
	`¡¹ouÎ
(
»¶y
->
–em’t
[0]->
¡r
, 
NULL
, 10);

7165  
»¶y
;

7166 
	}
}

7168 
	$g‘DbSize
() {

7169 
»disR•ly
 *
»¶y
;

7170 
size
;

7172 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
, "DBSIZE");

7174 if(
»¶y
 =ğ
NULL
 ||„•ly->
ty³
 !ğ
REDIS_REPLY_INTEGER
) {

7175 
	`årštf
(
¡d”r
, "Couldn't determine DBSIZE!\n");

7176 
	`ex™
(1);

7180 
size
 = 
»¶y
->
š‹g”
;

7181 
	`ä“R•lyObjeù
(
»¶y
);

7183  
size
;

7184 
	}
}

7187 *
	mÇme
;

7188 *
	msizecmd
;

7189 *
	msizeun™
;

7190 
	mbigge¡
;

7191 
	mcouÁ
;

7192 
	mtÙ®size
;

7193 
sds
 
	mbigge¡_key
;

7194 } 
	tty³šfo
;

7196 
ty³šfo
 
	gty³_¡ršg
 = { "string", "STRLEN", "bytes" };

7197 
ty³šfo
 
	gty³_li¡
 = { "list", "LLEN", "items" };

7198 
ty³šfo
 
	gty³_£t
 = { "set", "SCARD", "members" };

7199 
ty³šfo
 
	gty³_hash
 = { "hash", "HLEN", "fields" };

7200 
ty³šfo
 
	gty³_z£t
 = { "zset", "ZCARD", "members" };

7201 
ty³šfo
 
	gty³_¡»am
 = { "stream", "XLEN", "entries" };

7202 
ty³šfo
 
	gty³_Ùh”
 = { "Ùh”", 
NULL
, "?" };

7204 
ty³šfo
* 
	$ty³šfo_add
(
diù
 *
ty³s
, * 
Çme
, 
ty³šfo
* 
ty³_‹m¶©e
) {

7205 
ty³šfo
 *
šfo
 = 
	`zm®loc
((typeinfo));

7206 *
šfo
 = *
ty³_‹m¶©e
;

7207 
šfo
->
Çme
 = 
	`sd¢ew
(name);

7208 
	`diùAdd
(
ty³s
, 
šfo
->
Çme
, info);

7209  
šfo
;

7210 
	}
}

7212 
	$ty³_ä“
(* 
´iv_d©a
, * 
v®
) {

7213 
ty³šfo
 *
šfo
 = 
v®
;

7214 
	`UNUSED
(
´iv_d©a
);

7215 ià(
šfo
->
bigge¡_key
)

7216 
	`sdsä“
(
šfo
->
bigge¡_key
);

7217 
	`sdsä“
(
šfo
->
Çme
);

7218 
	`zä“
(
šfo
);

7219 
	}
}

7221 
diùTy³
 
	gty³šfoDiùTy³
 = {

7222 
diùSdsHash
,

7223 
NULL
,

7224 
NULL
,

7225 
diùSdsKeyCom·»
,

7226 
NULL
,

7227 
ty³_ä“


7230 
	$g‘KeyTy³s
(
diù
 *
ty³s_diù
, 
»disR•ly
 *
keys
, 
ty³šfo
 **
ty³s
) {

7231 
»disR•ly
 *
»¶y
;

7232 
i
;

7235 
i
=0;i<
keys
->
–em’ts
;i++) {

7236 
	`»disAµ’dCommªd
(
cÚ‹xt
, "TYPE %s", 
keys
->
–em’t
[
i
]->
¡r
);

7240 
i
=0;i<
keys
->
–em’ts
;i++) {

7241 if(
	`»disG‘R•ly
(
cÚ‹xt
, (**)&
»¶y
)!=
REDIS_OK
) {

7242 
	`årštf
(
¡d”r
, "Error gettingype for key '%s' (%d: %s)\n",

7243 
keys
->
–em’t
[
i
]->
¡r
, 
cÚ‹xt
->
”r
, cÚ‹xt->
”r¡r
);

7244 
	`ex™
(1);

7245 } if(
»¶y
->
ty³
 !ğ
REDIS_REPLY_STATUS
) {

7246 if(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7247 
	`årštf
(
¡d”r
, "TYPE„‘uºed‡À”rÜ: %s\n", 
»¶y
->
¡r
);

7249 
	`årštf
(
¡d”r
,

7251 
»¶y
->
ty³
, 
keys
->
–em’t
[
i
]->
¡r
);

7253 
	`ex™
(1);

7256 
sds
 
ty³»¶y
 = 
	`sd¢ew
(
»¶y
->
¡r
);

7257 
diùEÁry
 *
de
 = 
	`diùFšd
(
ty³s_diù
, 
ty³»¶y
);

7258 
	`sdsä“
(
ty³»¶y
);

7259 
ty³šfo
 *
ty³
 = 
NULL
;

7260 ià(
de
)

7261 
ty³
 = 
	`diùG‘V®
(
de
);

7262 ià(
	`¡rcmp
(
»¶y
->
¡r
, "none"))

7263 
ty³
 = 
	`ty³šfo_add
(
ty³s_diù
, 
»¶y
->
¡r
, &
ty³_Ùh”
);

7264 
ty³s
[
i
] = 
ty³
;

7265 
	`ä“R•lyObjeù
(
»¶y
);

7267 
	}
}

7269 
	$g‘KeySizes
(
»disR•ly
 *
keys
, 
ty³šfo
 **
ty³s
,

7270 *
sizes
, 
memkeys
,

7271 
memkeys_§m¶es
)

7273 
»disR•ly
 *
»¶y
;

7274 
i
;

7277 
i
=0;i<
keys
->
–em’ts
;i++) {

7279 if(!
ty³s
[
i
] || (!ty³s[i]->
sizecmd
 && !
memkeys
))

7282 ià(!
memkeys
)

7283 
	`»disAµ’dCommªd
(
cÚ‹xt
, "%s %s",

7284 
ty³s
[
i
]->
sizecmd
, 
keys
->
–em’t
[i]->
¡r
);

7285 ià(
memkeys_§m¶es
==0)

7286 
	`»disAµ’dCommªd
(
cÚ‹xt
, "%s %s %s",

7287 "MEMORY", "USAGE", 
keys
->
–em’t
[
i
]->
¡r
);

7289 
	`»disAµ’dCommªd
(
cÚ‹xt
, "%s %s %s SAMPLES %u",

7290 "MEMORY", "USAGE", 
keys
->
–em’t
[
i
]->
¡r
, 
memkeys_§m¶es
);

7294 
i
=0;i<
keys
->
–em’ts
;i++) {

7296 if(!
ty³s
[
i
] || (!ty³s[i]->
sizecmd
 && !
memkeys
)) {

7297 
sizes
[
i
] = 0;

7302 if(
	`»disG‘R•ly
(
cÚ‹xt
, (**)&
»¶y
)!=
REDIS_OK
) {

7303 
	`årštf
(
¡d”r
, "Error getting size for key '%s' (%d: %s)\n",

7304 
keys
->
–em’t
[
i
]->
¡r
, 
cÚ‹xt
->
”r
, cÚ‹xt->
”r¡r
);

7305 
	`ex™
(1);

7306 } if(
»¶y
->
ty³
 !ğ
REDIS_REPLY_INTEGER
) {

7309 
	`årštf
(
¡d”r
,

7311 !
memkeys
? 
ty³s
[
i
]->
sizecmd
: "MEMORY USAGE",

7312 
keys
->
–em’t
[
i
]->
¡r
);

7313 
sizes
[
i
] = 0;

7315 
sizes
[
i
] = 
»¶y
->
š‹g”
;

7318 
	`ä“R•lyObjeù
(
»¶y
);

7320 
	}
}

7322 
	$fšdBigKeys
(
memkeys
, 
memkeys_§m¶es
) {

7323 
§m¶ed
 = 0, 
tÙ®_keys
, 
tÙËn
=0, *
sizes
=
NULL
, 
™
=0;

7324 
»disR•ly
 *
»¶y
, *
keys
;

7325 
¬rsize
=0, 
i
;

7326 
diùI‹¿tÜ
 *
di
;

7327 
diùEÁry
 *
de
;

7328 
ty³šfo
 **
ty³s
 = 
NULL
;

7329 
pù
;

7331 
diù
 *
ty³s_diù
 = 
	`diùC»©e
(&
ty³šfoDiùTy³
, 
NULL
);

7332 
	`ty³šfo_add
(
ty³s_diù
, "¡ršg", &
ty³_¡ršg
);

7333 
	`ty³šfo_add
(
ty³s_diù
, "li¡", &
ty³_li¡
);

7334 
	`ty³šfo_add
(
ty³s_diù
, "£t", &
ty³_£t
);

7335 
	`ty³šfo_add
(
ty³s_diù
, "hash", &
ty³_hash
);

7336 
	`ty³šfo_add
(
ty³s_diù
, "z£t", &
ty³_z£t
);

7337 
	`ty³šfo_add
(
ty³s_diù
, "¡»am", &
ty³_¡»am
);

7340 
tÙ®_keys
 = 
	`g‘DbSize
();

7343 
	`´štf
("\n# Scanningheƒntire keyspaceo find biggest keys‡s well‡s\n");

7344 
	`´štf
("#‡verage sizes…er keyype. You can use -i 0.1o sleep 0.1 sec\n");

7345 
	`´štf
("#…er 100 SCAN commands (not usually‚eeded).\n\n");

7350 
pù
 = 100 * ()
§m¶ed
/
tÙ®_keys
;

7353 
»¶y
 = 
	`£ndSÿn
(&
™
);

7354 
keys
 = 
»¶y
->
–em’t
[1];

7357 if(
keys
->
–em’ts
 > 
¬rsize
) {

7358 
ty³s
 = 
	`z»®loc
Ñy³s, (
ty³šfo
*)*
keys
->
–em’ts
);

7359 
sizes
 = 
	`z»®loc
(sizes, ()*
keys
->
–em’ts
);

7361 if(!
ty³s
 || !
sizes
) {

7362 
	`årštf
(
¡d”r
, "Failedo‡llocate storage for keys!\n");

7363 
	`ex™
(1);

7366 
¬rsize
 = 
keys
->
–em’ts
;

7370 
	`g‘KeyTy³s
(
ty³s_diù
, 
keys
, 
ty³s
);

7371 
	`g‘KeySizes
(
keys
, 
ty³s
, 
sizes
, 
memkeys
, 
memkeys_§m¶es
);

7374 
i
=0;i<
keys
->
–em’ts
;i++) {

7375 
ty³šfo
 *
ty³
 = 
ty³s
[
i
];

7377 if(!
ty³
)

7380 
ty³
->
tÙ®size
 +ğ
sizes
[
i
];

7381 
ty³
->
couÁ
++;

7382 
tÙËn
 +ğ
keys
->
–em’t
[
i
]->
Ën
;

7383 
§m¶ed
++;

7385 if(
ty³
->
bigge¡
<
sizes
[
i
]) {

7386 
	`´štf
(

7388 
pù
, 
ty³
->
Çme
, 
keys
->
–em’t
[
i
]->
¡r
, 
sizes
[i],

7389 !
memkeys
? 
ty³
->
sizeun™
: "bytes");

7392 ià(
ty³
->
bigge¡_key
)

7393 
	`sdsä“
(
ty³
->
bigge¡_key
);

7394 
ty³
->
bigge¡_key
 = 
	`sd¢ew
(
keys
->
–em’t
[
i
]->
¡r
);

7395 if(!
ty³
->
bigge¡_key
) {

7396 
	`årštf
(
¡d”r
, "Failedo‡llocate memory for key!\n");

7397 
	`ex™
(1);

7401 
ty³
->
bigge¡
 = 
sizes
[
i
];

7405 if(
§m¶ed
 % 1000000 == 0) {

7406 
	`´štf
("[%05.2f%%] Sam¶ed %Îu key sØçr\n", 
pù
, 
§m¶ed
);

7411 if(
§m¶ed
 && (§m¶ed %100è=ğ0 && 
cÚfig
.
š‹rv®
) {

7412 
	`u¦“p
(
cÚfig
.
š‹rv®
);

7415 
	`ä“R•lyObjeù
(
»¶y
);

7416 } 
™
 != 0);

7418 if(
ty³s
è
	`zä“
(types);

7419 if(
sizes
è
	`zä“
(sizes);

7422 
	`´štf
("\n-------- summary -------\n\n");

7424 
	`´štf
("Sam¶ed %Îu key šhkey¥aû!\n", 
§m¶ed
);

7425 
	`´štf
("Total key†ength in bytes is %llu (avg†en %.2f)\n\n",

7426 
tÙËn
,ÙËÀ? (éÙËn/
§m¶ed
 : 0);

7429 
di
 = 
	`diùG‘I‹¿tÜ
(
ty³s_diù
);

7430 (
de
 = 
	`diùNext
(
di
))) {

7431 
ty³šfo
 *
ty³
 = 
	`diùG‘V®
(
de
);

7432 if(
ty³
->
bigge¡_key
) {

7433 
	`´štf
("Bigge¡ %6 found '%s' ha %Îu %s\n", 
ty³
->
Çme
,y³->
bigge¡_key
,

7434 
ty³
->
bigge¡
, !
memkeys
?y³->
sizeun™
: "bytes");

7437 
	`diùR–—£I‹¿tÜ
(
di
);

7439 
	`´štf
("\n");

7441 
di
 = 
	`diùG‘I‹¿tÜ
(
ty³s_diù
);

7442 (
de
 = 
	`diùNext
(
di
))) {

7443 
ty³šfo
 *
ty³
 = 
	`diùG‘V®
(
de
);

7444 
	`´štf
("%llu %ss with %llu %s (%05.2f%% of keys,‡vg size %.2f)\n",

7445 
ty³
->
couÁ
,y³->
Çme
,y³->
tÙ®size
, !
memkeys
?y³->
sizeun™
: "bytes",

7446 
§m¶ed
 ? 100 * ()
ty³
->
couÁ
/sampled : 0,

7447 
ty³
->
couÁ
 ? (éy³->
tÙ®size
/type->count : 0);

7449 
	`diùR–—£I‹¿tÜ
(
di
);

7451 
	`diùR–—£
(
ty³s_diù
);

7454 
	`ex™
(0);

7455 
	}
}

7457 
	$g‘KeyF»qs
(
»disR•ly
 *
keys
, *
äeqs
) {

7458 
»disR•ly
 *
»¶y
;

7459 
i
;

7462 
i
=0;i<
keys
->
–em’ts
;i++) {

7463 
	`»disAµ’dCommªd
(
cÚ‹xt
, "OBJECT f»q %s", 
keys
->
–em’t
[
i
]->
¡r
);

7467 
i
=0;i<
keys
->
–em’ts
;i++) {

7468 if(
	`»disG‘R•ly
(
cÚ‹xt
, (**)&
»¶y
)!=
REDIS_OK
) {

7469 
	`årštf
(
¡d”r
, "Error getting freq for key '%s' (%d: %s)\n",

7470 
keys
->
–em’t
[
i
]->
¡r
, 
cÚ‹xt
->
”r
, cÚ‹xt->
”r¡r
);

7471 
	`ex™
(1);

7472 } if(
»¶y
->
ty³
 !ğ
REDIS_REPLY_INTEGER
) {

7473 if(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7474 
	`årštf
(
¡d”r
, "E¼Ü: %s\n", 
»¶y
->
¡r
);

7475 
	`ex™
(1);

7477 
	`årštf
(
¡d”r
, "W¬nšg: OBJECT f»q oÀ'%s' faed (may havb“Àd–‘ed)\n", 
keys
->
–em’t
[
i
]->
¡r
);

7478 
äeqs
[
i
] = 0;

7481 
äeqs
[
i
] = 
»¶y
->
š‹g”
;

7483 
	`ä“R•lyObjeù
(
»¶y
);

7485 
	}
}

7487 
	#HOTKEYS_SAMPLE
 16

	)

7488 
	$fšdHÙKeys
() {

7489 
»disR•ly
 *
keys
, *
»¶y
;

7490 
couÁ”s
[
HOTKEYS_SAMPLE
] = {0};

7491 
sds
 
hÙkeys
[
HOTKEYS_SAMPLE
] = {
NULL
};

7492 
§m¶ed
 = 0, 
tÙ®_keys
, *
äeqs
 = 
NULL
, 
™
 = 0;

7493 
¬rsize
 = 0, 
i
, 
k
;

7494 
pù
;

7497 
tÙ®_keys
 = 
	`g‘DbSize
();

7500 
	`´štf
("\n# Scanningheƒntire keyspaceo find hot keys‡s well‡s\n");

7501 
	`´štf
("#‡verage sizes…er keyype. You can use -i 0.1o sleep 0.1 sec\n");

7502 
	`´štf
("#…er 100 SCAN commands (not usually‚eeded).\n\n");

7507 
pù
 = 100 * ()
§m¶ed
/
tÙ®_keys
;

7510 
»¶y
 = 
	`£ndSÿn
(&
™
);

7511 
keys
 = 
»¶y
->
–em’t
[1];

7514 if(
keys
->
–em’ts
 > 
¬rsize
) {

7515 
äeqs
 = 
	`z»®loc
(äeqs, ()*
keys
->
–em’ts
);

7517 if(!
äeqs
) {

7518 
	`årštf
(
¡d”r
, "Failedo‡llocate storage for keys!\n");

7519 
	`ex™
(1);

7522 
¬rsize
 = 
keys
->
–em’ts
;

7525 
	`g‘KeyF»qs
(
keys
, 
äeqs
);

7528 
i
=0;i<
keys
->
–em’ts
;i++) {

7529 
§m¶ed
++;

7531 if(
§m¶ed
 % 1000000 == 0) {

7532 
	`´štf
("[%05.2f%%] Sam¶ed %Îu key sØçr\n", 
pù
, 
§m¶ed
);

7536 
k
 = 0;

7537 
k
 < 
HOTKEYS_SAMPLE
 && 
äeqs
[
i
] > 
couÁ”s
[k]) k++;

7538 ià(
k
 == 0) ;

7539 
k
--;

7540 ià(
k
 =ğ0 || 
couÁ”s
[k] == 0) {

7541 
	`sdsä“
(
hÙkeys
[
k
]);

7543 
	`sdsä“
(
hÙkeys
[0]);

7544 
	`memmove
(
couÁ”s
,couÁ”s+1,(couÁ”s[0])*
k
);

7545 
	`memmove
(
hÙkeys
,hÙkeys+1,(hÙkeys[0])*
k
);

7547 
couÁ”s
[
k
] = 
äeqs
[
i
];

7548 
hÙkeys
[
k
] = 
	`sd¢ew
(
keys
->
–em’t
[
i
]->
¡r
);

7549 
	`´štf
(

7551 
pù
, 
keys
->
–em’t
[
i
]->
¡r
, 
äeqs
[i]);

7555 if(
§m¶ed
 && (§m¶ed %100è=ğ0 && 
cÚfig
.
š‹rv®
) {

7556 
	`u¦“p
(
cÚfig
.
š‹rv®
);

7559 
	`ä“R•lyObjeù
(
»¶y
);

7560 } 
™
 != 0);

7562 ià(
äeqs
è
	`zä“
(freqs);

7565 
	`´štf
("\n-------- summary -------\n\n");

7567 
	`´štf
("Sam¶ed %Îu key šhkey¥aû!\n", 
§m¶ed
);

7569 
i
=1; i<ğ
HOTKEYS_SAMPLE
; i++) {

7570 
k
 = 
HOTKEYS_SAMPLE
 - 
i
;

7571 if(
couÁ”s
[
k
]>0) {

7572 
	`´štf
("hÙ key found w™h couÁ”: %Îu\tkeyÇme: %s\n", 
couÁ”s
[
k
], 
hÙkeys
[k]);

7573 
	`sdsä“
(
hÙkeys
[
k
]);

7577 
	`ex™
(0);

7578 
	}
}

7587 *
	$g‘InfoF›ld
(*
šfo
, *
f›ld
) {

7588 *
p
 = 
	`¡r¡r
(
šfo
,
f›ld
);

7589 *
n1
, *
n2
;

7590 *
»suÉ
;

7592 ià(!
p
è 
NULL
;

7593 
p
 +ğ
	`¡¾’
(
f›ld
)+1;

7594 
n1
 = 
	`¡rchr
(
p
,'\r');

7595 
n2
 = 
	`¡rchr
(
p
,',');

7596 ià(
n2
 &&‚2 < 
n1
)‚1 =‚2;

7597 
»suÉ
 = 
	`zm®loc
(()*(
n1
-
p
)+1);

7598 
	`memıy
(
»suÉ
,
p
,(
n1
-p));

7599 
»suÉ
[
n1
-
p
] = '\0';

7600  
»suÉ
;

7601 
	}
}

7605 
	$g‘LÚgInfoF›ld
(*
šfo
, *
f›ld
) {

7606 *
v®ue
 = 
	`g‘InfoF›ld
(
šfo
,
f›ld
);

7607 
l
;

7609 ià(!
v®ue
è 
LONG_MIN
;

7610 
l
 = 
	`¡¹Ş
(
v®ue
,
NULL
,10);

7611 
	`zä“
(
v®ue
);

7612  
l
;

7613 
	}
}

7617 
	$by‹sToHumª
(*
s
, 
n
) {

7618 
d
;

7620 ià(
n
 < 0) {

7621 *
s
 = '-';

7622 
s
++;

7623 
n
 = -n;

7625 ià(
n
 < 1024) {

7627 
	`¥rštf
(
s
,"%ÎdB",
n
);

7629 } ià(
n
 < (1024*1024)) {

7630 
d
 = ()
n
/(1024);

7631 
	`¥rštf
(
s
,"%.2fK",
d
);

7632 } ià(
n
 < (1024LL*1024*1024)) {

7633 
d
 = ()
n
/(1024*1024);

7634 
	`¥rštf
(
s
,"%.2fM",
d
);

7635 } ià(
n
 < (1024LL*1024*1024*1024)) {

7636 
d
 = ()
n
/(1024LL*1024*1024);

7637 
	`¥rštf
(
s
,"%.2fG",
d
);

7639 
	}
}

7641 
	$¡©Mode
() {

7642 
»disR•ly
 *
»¶y
;

7643 
aux
, 
»que¡s
 = 0;

7644 
i
 = 0;

7647 
buf
[64];

7648 
j
;

7650 
»¶y
 = 
	`»cÚÃùšgRedisCommªd
(
cÚ‹xt
,"INFO");

7651 ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7652 
	`´štf
("ERROR: %s\n", 
»¶y
->
¡r
);

7653 
	`ex™
(1);

7656 ià((
i
++ % 20) == 0) {

7657 
	`´štf
(

7663 
aux
 = 0;

7664 
j
 = 0; j < 20; j++) {

7665 
k
;

7667 
	`¥rštf
(
buf
,"db%d:keys",
j
);

7668 
k
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,
buf
);

7669 ià(
k
 =ğ
LONG_MIN
) ;

7670 
aux
 +ğ
k
;

7672 
	`¥rštf
(
buf
,"%ld",
aux
);

7673 
	`´štf
("%-11s",
buf
);

7676 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"used_memory");

7677 
	`by‹sToHumª
(
buf
,
aux
);

7678 
	`´štf
("%-8s",
buf
);

7681 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"connected_clients");

7682 
	`¥rštf
(
buf
,"%ld",
aux
);

7683 
	`´štf
(" %-8s",
buf
);

7686 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"blocked_clients");

7687 
	`¥rštf
(
buf
,"%ld",
aux
);

7688 
	`´štf
("%-8s",
buf
);

7691 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"total_commands_processed");

7692 
	`¥rštf
(
buf
,"%ld (+%ld)",
aux
,
»que¡s
 == 0 ? 0 :‡ux-requests);

7693 
	`´štf
("%-19s",
buf
);

7694 
»que¡s
 = 
aux
;

7697 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"total_connections_received");

7698 
	`¥rštf
(
buf
,"%ld",
aux
);

7699 
	`´štf
(" %-12s",
buf
);

7702 
aux
 = 
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"bgsave_in_progress");

7703 
aux
 |ğ
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"aof_rewrite_in_progress") << 1;

7704 
aux
 |ğ
	`g‘LÚgInfoF›ld
(
»¶y
->
¡r
,"loading") << 2;

7705 
aux
) {

7708 
	`´štf
("SAVE");

7711 
	`´štf
("AOF");

7714 
	`´štf
("SAVE+AOF");

7717 
	`´štf
("LOAD");

7721 
	`´štf
("\n");

7722 
	`ä“R•lyObjeù
(
»¶y
);

7723 
	`u¦“p
(
cÚfig
.
š‹rv®
);

7725 
	}
}

7731 
	$sÿnMode
() {

7732 
»disR•ly
 *
»¶y
;

7733 
cur
 = 0;

7736 ià(
cÚfig
.
·‰”n
)

7737 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"SCAN %llu MATCH %s",

7738 
cur
,
cÚfig
.
·‰”n
);

7740 
»¶y
 = 
	`»disCommªd
(
cÚ‹xt
,"SCAN %Îu",
cur
);

7741 ià(
»¶y
 =ğ
NULL
) {

7742 
	`´štf
("I/Oƒrror\n");

7743 
	`ex™
(1);

7744 } ià(
»¶y
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

7745 
	`´štf
("ERROR: %s\n", 
»¶y
->
¡r
);

7746 
	`ex™
(1);

7748 
j
;

7750 
cur
 = 
	`¡¹ouÎ
(
»¶y
->
–em’t
[0]->
¡r
,
NULL
,10);

7751 
j
 = 0; j < 
»¶y
->
–em’t
[1]->
–em’ts
; j++)

7752 
	`´štf
("%s\n", 
»¶y
->
–em’t
[1]->–em’t[
j
]->
¡r
);

7754 
	`ä“R•lyObjeù
(
»¶y
);

7755 } 
cur
 != 0);

7757 
	`ex™
(0);

7758 
	}
}

7770 
	$pow”LawRªd
(
mš
, 
max
, 
®pha
) {

7771 
¶
, 
r
;

7773 
max
 += 1;

7774 
r
 = (()
	`¿nd
()è/ 
RAND_MAX
;

7775 
¶
 = 
	`pow
(

7776 ((
	`pow
(
max
,
®pha
+1è-…ow(
mš
,®pha+1))*
r
 +…ow(min,alpha+1)),

7777 (1.0/(
®pha
+1)));

7778  (
max
-1-()
¶
)+
mš
;

7779 
	}
}

7783 
	$LRUTe¡G’Key
(*
buf
, 
size_t
 
buæ’
) {

7784 
	`¢´štf
(
buf
, 
buæ’
, "lru:%lld",

7785 
	`pow”LawRªd
(1, 
cÚfig
.
Ìu_‹¡_§m¶e_size
, 6.2));

7786 
	}
}

7788 
	#LRU_CYCLE_PERIOD
 1000

	)

7789 
	#LRU_CYCLE_PIPELINE_SIZE
 250

	)

7790 
	$LRUTe¡Mode
() {

7791 
»disR•ly
 *
»¶y
;

7792 
key
[128];

7793 
¡¬t_cyşe
;

7794 
j
;

7796 
	`¤ªd
(
	`time
(
NULL
)^
	`g‘pid
());

7801 
¡¬t_cyşe
 = 
	`m¡ime
();

7802 
h™s
 = 0, 
mis£s
 = 0;

7803 
	`m¡ime
(è- 
¡¬t_cyşe
 < 
LRU_CYCLE_PERIOD
) {

7805 
j
 = 0; j < 
LRU_CYCLE_PIPELINE_SIZE
; j++) {

7806 
v®
[6];

7807 
v®
[5] = '\0';

7808 
i
 = 0; i < 5; i++è
v®
[i] = 'A'+
	`¿nd
()%('z'-'A');

7809 
	`LRUTe¡G’Key
(
key
,(key));

7810 
	`»disAµ’dCommªd
(
cÚ‹xt
, "SET % %s",
key
,
v®
);

7812 
j
 = 0; j < 
LRU_CYCLE_PIPELINE_SIZE
; j++)

7813 
	`»disG‘R•ly
(
cÚ‹xt
, (**)&
»¶y
);

7816 
j
 = 0; j < 
LRU_CYCLE_PIPELINE_SIZE
; j++) {

7817 
	`LRUTe¡G’Key
(
key
,(key));

7818 
	`»disAµ’dCommªd
(
cÚ‹xt
, "GET %s",
key
);

7820 
j
 = 0; j < 
LRU_CYCLE_PIPELINE_SIZE
; j++) {

7821 ià(
	`»disG‘R•ly
(
cÚ‹xt
, (**)&
»¶y
è=ğ
REDIS_OK
) {

7822 
»¶y
->
ty³
) {

7823 
REDIS_REPLY_ERROR
:

7824 
	`´štf
("%s\n", 
»¶y
->
¡r
);

7826 
REDIS_REPLY_NIL
:

7827 
mis£s
++;

7830 
h™s
++;

7836 ià(
cÚ‹xt
->
”r
) {

7837 
	`årštf
(
¡d”r
,"I/Oƒrror during LRUest\n");

7838 
	`ex™
(1);

7842 
	`´štf
(

7844 
h™s
+
mis£s
,

7845 
h™s
, ()h™s/(h™s+
mis£s
)*100,

7846 
mis£s
, ()mis£s/(
h™s
+misses)*100);

7848 
	`ex™
(0);

7849 
	}
}

7862 
	$compu‹_som‘hšg_ç¡
() {

7863 
s
[256], 
i
, 
j
, 
t
;

7864 
couÁ
 = 1000, 
k
;

7865 
ouut
 = 0;

7867 
k
 = 0; k < 256; k++è
s
[k] = k;

7869 
i
 = 0;

7870 
j
 = 0;

7871 
couÁ
--) {

7872 
i
++;

7873 
j
 = j + 
s
[
i
];

7874 
t
 = 
s
[
i
];

7875 
s
[
i
] = s[
j
];

7876 
s
[
j
] = 
t
;

7877 
ouut
 +ğ
s
[(s[
i
]+s[
j
])&255];

7879  
ouut
;

7880 
	}
}

7882 
	$šŒšsicL©’cyModeStİ
(
s
) {

7883 
	`UNUSED
(
s
);

7884 
fÜû_ÿnûl_loİ
 = 1;

7885 
	}
}

7887 
	$šŒšsicL©’cyMode
() {

7888 
‹¡_’d
, 
run_time
, 
max_Ï‹ncy
 = 0, 
runs
 = 0;

7890 
run_time
 = 
cÚfig
.
šŒšsic_Ï‹ncy_du¿tiÚ
*1000000;

7891 
‹¡_’d
 = 
	`u¡ime
(è+ 
run_time
;

7892 
	`sigÇl
(
SIGINT
, 
šŒšsicL©’cyModeStİ
);

7895 
¡¬t
, 
’d
, 
Ï‹ncy
;

7897 
¡¬t
 = 
	`u¡ime
();

7898 
	`compu‹_som‘hšg_ç¡
();

7899 
’d
 = 
	`u¡ime
();

7900 
Ï‹ncy
 = 
’d
-
¡¬t
;

7901 
runs
++;

7902 ià(
Ï‹ncy
 <= 0) ;

7905 ià(
Ï‹ncy
 > 
max_Ï‹ncy
) {

7906 
max_Ï‹ncy
 = 
Ï‹ncy
;

7907 
	`´štf
("Max†©’cy sØçr: %Îd miüo£cÚds.\n", 
max_Ï‹ncy
);

7910 
avg_us
 = ()
run_time
/
runs
;

7911 
avg_ns
 = 
avg_us
 * 1e3;

7912 ià(
fÜû_ÿnûl_loİ
 || 
’d
 > 
‹¡_’d
) {

7913 
	`´štf
("\n%lldotal„uns "

7916 
runs
, 
avg_us
, 
avg_ns
);

7917 
	`´štf
("Worst„unook %.0fx†ongerhanhe‡verage†atency.\n",

7918 
max_Ï‹ncy
 / 
avg_us
);

7919 
	`ex™
(0);

7922 
	}
}

7924 
sds
 
	$askPasswÜd
() {

7925 
	`lš’oi£MaskModeEÇbË
();

7926 
sds
 
auth
 = 
	`lš’oi£
("Please input…assword: ");

7927 
	`lš’oi£MaskModeDi§bË
();

7928  
auth
;

7929 
	}
}

7935 
	$maš
(
¬gc
, **
¬gv
) {

7936 
fœ¡¬g
;

7938 
cÚfig
.
ho¡
 = 
	`sd¢ew
("127.0.0.1");

7939 
cÚfig
.
ho¡pÜt
 = 6379;

7940 
cÚfig
.
ho¡sock‘
 = 
NULL
;

7941 
cÚfig
.
»³©
 = 1;

7942 
cÚfig
.
š‹rv®
 = 0;

7943 
cÚfig
.
dbnum
 = 0;

7944 
cÚfig
.
š‹¿ùive
 = 0;

7945 
cÚfig
.
shutdown
 = 0;

7946 
cÚfig
.
mÚ™Ü_mode
 = 0;

7947 
cÚfig
.
pubsub_mode
 = 0;

7948 
cÚfig
.
Ï‹ncy_mode
 = 0;

7949 
cÚfig
.
Ï‹ncy_di¡_mode
 = 0;

7950 
cÚfig
.
Ï‹ncy_hi¡Üy
 = 0;

7951 
cÚfig
.
Ìu_‹¡_mode
 = 0;

7952 
cÚfig
.
Ìu_‹¡_§m¶e_size
 = 0;

7953 
cÚfig
.
şu¡”_mode
 = 0;

7954 
cÚfig
.
¦ave_mode
 = 0;

7955 
cÚfig
.
g‘rdb_mode
 = 0;

7956 
cÚfig
.
¡©_mode
 = 0;

7957 
cÚfig
.
sÿn_mode
 = 0;

7958 
cÚfig
.
šŒšsic_Ï‹ncy_mode
 = 0;

7959 
cÚfig
.
·‰”n
 = 
NULL
;

7960 
cÚfig
.
rdb_f’ame
 = 
NULL
;

7961 
cÚfig
.
pe_mode
 = 0;

7962 
cÚfig
.
pe_timeout
 = 
REDIS_CLI_DEFAULT_PIPE_TIMEOUT
;

7963 
cÚfig
.
bigkeys
 = 0;

7964 
cÚfig
.
hÙkeys
 = 0;

7965 
cÚfig
.
¡dš¬g
 = 0;

7966 
cÚfig
.
auth
 = 
NULL
;

7967 
cÚfig
.
ask·ss
 = 0;

7968 
cÚfig
.
u£r
 = 
NULL
;

7969 
cÚfig
.
ev®
 = 
NULL
;

7970 
cÚfig
.
ev®_ldb
 = 0;

7971 
cÚfig
.
ev®_ldb_’d
 = 0;

7972 
cÚfig
.
ev®_ldb_sync
 = 0;

7973 
cÚfig
.
’abË_ldb_Ú_ev®
 = 0;

7974 
cÚfig
.
Ï¡_cmd_ty³
 = -1;

7975 
cÚfig
.
v”bo£
 = 0;

7976 
cÚfig
.
no_auth_w¬nšg
 = 0;

7977 
cÚfig
.
şu¡”_mªag”_commªd
.
Çme
 = 
NULL
;

7978 
cÚfig
.
şu¡”_mªag”_commªd
.
¬gc
 = 0;

7979 
cÚfig
.
şu¡”_mªag”_commªd
.
¬gv
 = 
NULL
;

7980 
cÚfig
.
şu¡”_mªag”_commªd
.
æags
 = 0;

7981 
cÚfig
.
şu¡”_mªag”_commªd
.
»¶iÿs
 = 0;

7982 
cÚfig
.
şu¡”_mªag”_commªd
.
äom
 = 
NULL
;

7983 
cÚfig
.
şu¡”_mªag”_commªd
.
to
 = 
NULL
;

7984 
cÚfig
.
şu¡”_mªag”_commªd
.
weight
 = 
NULL
;

7985 
cÚfig
.
şu¡”_mªag”_commªd
.
weight_¬gc
 = 0;

7986 
cÚfig
.
şu¡”_mªag”_commªd
.
¦Ùs
 = 0;

7987 
cÚfig
.
şu¡”_mªag”_commªd
.
timeout
 = 
CLUSTER_MANAGER_MIGRATE_TIMEOUT
;

7988 
cÚfig
.
şu¡”_mªag”_commªd
.
p–še
 = 
CLUSTER_MANAGER_MIGRATE_PIPELINE
;

7989 
cÚfig
.
şu¡”_mªag”_commªd
.
th»shŞd
 =

7990 
CLUSTER_MANAGER_REBALANCE_THRESHOLD
;

7991 
cÚfig
.
şu¡”_mªag”_commªd
.
backup_dœ
 = 
NULL
;

7992 
´ef
.
hšts
 = 1;

7994 
¥eùrum_·Ë‰e
 = 
¥eùrum_·Ë‰e_cŞÜ
;

7995 
¥eùrum_·Ë‰e_size
 = 
¥eùrum_·Ë‰e_cŞÜ_size
;

7997 ià(!
	`i§‰y
(
	`f’o
(
¡dout
)è&& (
	`g‘’v
("FAKETTY"è=ğ
NULL
))

7998 
cÚfig
.
ouut
 = 
OUTPUT_RAW
;

8000 
cÚfig
.
ouut
 = 
OUTPUT_STANDARD
;

8001 
cÚfig
.
mb_d–im
 = 
	`sd¢ew
("\n");

8003 
fœ¡¬g
 = 
	`·r£O±iÚs
(
¬gc
,
¬gv
);

8004 
¬gc
 -ğ
fœ¡¬g
;

8005 
¬gv
 +ğ
fœ¡¬g
;

8007 
	`·r£Env
();

8009 ià(
cÚfig
.
ask·ss
) {

8010 
cÚfig
.
auth
 = 
	`askPasswÜd
();

8013 #ifdeà
USE_OPENSSL


8014 ià(
cÚfig
.
s
) {

8015 
	`ERR_lßd_üy±o_¡ršgs
();

8016 
	`SSL_lßd_”rÜ_¡ršgs
();

8017 
	`SSL_lib¿ry_š™
();

8022 ià(
	`CLUSTER_MANAGER_MODE
()) {

8023 
şu¡”Mªag”CommªdProc
 *
´oc
 = 
	`v®id©eClu¡”Mªag”Commªd
();

8024 ià(!
´oc
) {

8025 
	`sdsä“
(
cÚfig
.
ho¡
);

8026 
	`sdsä“
(
cÚfig
.
mb_d–im
);

8027 
	`ex™
(1);

8029 
	`şu¡”Mªag”Mode
(
´oc
);

8033 ià(
cÚfig
.
Ï‹ncy_mode
) {

8034 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8035 
	`Ï‹ncyMode
();

8039 ià(
cÚfig
.
Ï‹ncy_di¡_mode
) {

8040 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8041 
	`Ï‹ncyDi¡Mode
();

8045 ià(
cÚfig
.
¦ave_mode
) {

8046 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8047 
	`£ndC­a
();

8048 
	`¦aveMode
();

8052 ià(
cÚfig
.
g‘rdb_mode
) {

8053 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8054 
	`£ndC­a
();

8055 
	`g‘RDB
(
NULL
);

8059 ià(
cÚfig
.
pe_mode
) {

8060 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8061 
	`peMode
();

8065 ià(
cÚfig
.
bigkeys
) {

8066 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8067 
	`fšdBigKeys
(0, 0);

8071 ià(
cÚfig
.
memkeys
) {

8072 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8073 
	`fšdBigKeys
(1, 
cÚfig
.
memkeys_§m¶es
);

8077 ià(
cÚfig
.
hÙkeys
) {

8078 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8079 
	`fšdHÙKeys
();

8083 ià(
cÚfig
.
¡©_mode
) {

8084 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8085 ià(
cÚfig
.
š‹rv®
 == 0) config.interval = 1000000;

8086 
	`¡©Mode
();

8090 ià(
cÚfig
.
sÿn_mode
) {

8091 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8092 
	`sÿnMode
();

8096 ià(
cÚfig
.
Ìu_‹¡_mode
) {

8097 ià(
	`şiCÚÃù
(0è=ğ
REDIS_ERR
è
	`ex™
(1);

8098 
	`LRUTe¡Mode
();

8102 ià(
cÚfig
.
šŒšsic_Ï‹ncy_mode
è
	`šŒšsicL©’cyMode
();

8105 ià(
¬gc
 =ğ0 && !
cÚfig
.
ev®
) {

8107 
	`sigÇl
(
SIGPIPE
, 
SIG_IGN
);

8111 
	`şiCÚÃù
(0);

8112 
	`»¶
();

8116 ià(
	`şiCÚÃù
(0è!ğ
REDIS_OK
è
	`ex™
(1);

8117 ià(
cÚfig
.
ev®
) {

8118  
	`ev®Mode
(
¬gc
,
¬gv
);

8120  
	`nÚš‹¿ùive
(
¬gc
,
	`cÚv”tToSds
×rgc,
¬gv
));

8122 
	}
}

	@redisassert.h

38 #iâdeà
__REDIS_ASSERT_H__


39 
	#__REDIS_ASSERT_H__


	)

41 
	~<uni¡d.h
>

43 
	#as£¹
(
_e
è((_e)?()0 : (
	`_£rv”As£¹
(#_e,
__FILE__
,
__LINE__
),
	`_ex™
(1)))

	)

44 
	#·nic
(...è
	`_£rv”Pªic
(
__FILE__
,
__LINE__
,
__VA_ARGS__
),
	`_ex™
(1)

	)

46 
_£rv”As£¹
(*
e¡r
, *
fe
, 
lše
);

47 
_£rv”Pªic
(cÚ¡ *
fe
, 
lše
, cÚ¡ *
msg
, ...);

	@redismodule.h

1 #iâdeà
REDISMODULE_H


2 
	#REDISMODULE_H


	)

4 
	~<sys/ty³s.h
>

5 
	~<¡dšt.h
>

6 
	~<¡dio.h
>

11 
	#REDISMODULE_OK
 0

	)

12 
	#REDISMODULE_ERR
 1

	)

15 
	#REDISMODULE_APIVER_1
 1

	)

18 
	#REDISMODULE_READ
 (1<<0)

	)

19 
	#REDISMODULE_WRITE
 (1<<1)

	)

23 
	#REDISMODULE_OPEN_KEY_NOTOUCH
 (1<<16)

	)

25 
	#REDISMODULE_LIST_HEAD
 0

	)

26 
	#REDISMODULE_LIST_TAIL
 1

	)

29 
	#REDISMODULE_KEYTYPE_EMPTY
 0

	)

30 
	#REDISMODULE_KEYTYPE_STRING
 1

	)

31 
	#REDISMODULE_KEYTYPE_LIST
 2

	)

32 
	#REDISMODULE_KEYTYPE_HASH
 3

	)

33 
	#REDISMODULE_KEYTYPE_SET
 4

	)

34 
	#REDISMODULE_KEYTYPE_ZSET
 5

	)

35 
	#REDISMODULE_KEYTYPE_MODULE
 6

	)

36 
	#REDISMODULE_KEYTYPE_STREAM
 7

	)

39 
	#REDISMODULE_REPLY_UNKNOWN
 -1

	)

40 
	#REDISMODULE_REPLY_STRING
 0

	)

41 
	#REDISMODULE_REPLY_ERROR
 1

	)

42 
	#REDISMODULE_REPLY_INTEGER
 2

	)

43 
	#REDISMODULE_REPLY_ARRAY
 3

	)

44 
	#REDISMODULE_REPLY_NULL
 4

	)

47 
	#REDISMODULE_POSTPONED_ARRAY_LEN
 -1

	)

50 
	#REDISMODULE_NO_EXPIRE
 -1

	)

53 
	#REDISMODULE_ZADD_XX
 (1<<0)

	)

54 
	#REDISMODULE_ZADD_NX
 (1<<1)

	)

55 
	#REDISMODULE_ZADD_ADDED
 (1<<2)

	)

56 
	#REDISMODULE_ZADD_UPDATED
 (1<<3)

	)

57 
	#REDISMODULE_ZADD_NOP
 (1<<4)

	)

60 
	#REDISMODULE_HASH_NONE
 0

	)

61 
	#REDISMODULE_HASH_NX
 (1<<0)

	)

62 
	#REDISMODULE_HASH_XX
 (1<<1)

	)

63 
	#REDISMODULE_HASH_CFIELDS
 (1<<2)

	)

64 
	#REDISMODULE_HASH_EXISTS
 (1<<3)

	)

70 
	#REDISMODULE_CTX_FLAGS_LUA
 (1<<0)

	)

72 
	#REDISMODULE_CTX_FLAGS_MULTI
 (1<<1)

	)

74 
	#REDISMODULE_CTX_FLAGS_MASTER
 (1<<2)

	)

76 
	#REDISMODULE_CTX_FLAGS_SLAVE
 (1<<3)

	)

78 
	#REDISMODULE_CTX_FLAGS_READONLY
 (1<<4)

	)

80 
	#REDISMODULE_CTX_FLAGS_CLUSTER
 (1<<5)

	)

82 
	#REDISMODULE_CTX_FLAGS_AOF
 (1<<6)

	)

84 
	#REDISMODULE_CTX_FLAGS_RDB
 (1<<7)

	)

86 
	#REDISMODULE_CTX_FLAGS_MAXMEMORY
 (1<<8)

	)

88 
	#REDISMODULE_CTX_FLAGS_EVICT
 (1<<9)

	)

90 
	#REDISMODULE_CTX_FLAGS_OOM
 (1<<10)

	)

92 
	#REDISMODULE_CTX_FLAGS_OOM_WARNING
 (1<<11)

	)

94 
	#REDISMODULE_CTX_FLAGS_REPLICATED
 (1<<12)

	)

96 
	#REDISMODULE_CTX_FLAGS_LOADING
 (1<<13)

	)

103 
	#REDISMODULE_CTX_FLAGS_REPLICA_IS_STALE
 (1<<14)

	)

106 
	#REDISMODULE_CTX_FLAGS_REPLICA_IS_CONNECTING
 (1<<15)

	)

108 
	#REDISMODULE_CTX_FLAGS_REPLICA_IS_TRANSFERRING
 (1<<16)

	)

110 
	#REDISMODULE_CTX_FLAGS_REPLICA_IS_ONLINE
 (1<<17)

	)

112 
	#REDISMODULE_CTX_FLAGS_ACTIVE_CHILD
 (1<<18)

	)

114 
	#REDISMODULE_CTX_FLAGS_MULTI_DIRTY
 (1<<19)

	)

119 
	#REDISMODULE_NOTIFY_KEYSPACE
 (1<<0è

	)

120 
	#REDISMODULE_NOTIFY_KEYEVENT
 (1<<1è

	)

121 
	#REDISMODULE_NOTIFY_GENERIC
 (1<<2è

	)

122 
	#REDISMODULE_NOTIFY_STRING
 (1<<3è

	)

123 
	#REDISMODULE_NOTIFY_LIST
 (1<<4è

	)

124 
	#REDISMODULE_NOTIFY_SET
 (1<<5è

	)

125 
	#REDISMODULE_NOTIFY_HASH
 (1<<6è

	)

126 
	#REDISMODULE_NOTIFY_ZSET
 (1<<7è

	)

127 
	#REDISMODULE_NOTIFY_EXPIRED
 (1<<8è

	)

128 
	#REDISMODULE_NOTIFY_EVICTED
 (1<<9è

	)

129 
	#REDISMODULE_NOTIFY_STREAM
 (1<<10è

	)

130 
	#REDISMODULE_NOTIFY_KEY_MISS
 (1<<11è

	)

131 
	#REDISMODULE_NOTIFY_ALL
 (
REDISMODULE_NOTIFY_GENERIC
 | 
REDISMODULE_NOTIFY_STRING
 | 
REDISMODULE_NOTIFY_LIST
 | 
REDISMODULE_NOTIFY_SET
 | 
REDISMODULE_NOTIFY_HASH
 | 
REDISMODULE_NOTIFY_ZSET
 | 
REDISMODULE_NOTIFY_EXPIRED
 | 
REDISMODULE_NOTIFY_EVICTED
 | 
REDISMODULE_NOTIFY_STREAM
è

	)

136 
	#REDISMODULE_HASH_DELETE
 ((
RedisModuËSŒšg
*)()1)

	)

139 
	#REDISMODULE_ERRORMSG_WRONGTYPE
 "WRONGTYPE O³¿tiÚ‡gaš¡‡ key hŞdšghwrÚg kšd oàv®ue"

	)

141 
	#REDISMODULE_POSITIVE_INFINITE
 (1.0/0.0)

	)

142 
	#REDISMODULE_NEGATIVE_INFINITE
 (-1.0/0.0)

	)

145 
	#REDISMODULE_NODE_ID_LEN
 40

	)

146 
	#REDISMODULE_NODE_MYSELF
 (1<<0)

	)

147 
	#REDISMODULE_NODE_MASTER
 (1<<1)

	)

148 
	#REDISMODULE_NODE_SLAVE
 (1<<2)

	)

149 
	#REDISMODULE_NODE_PFAIL
 (1<<3)

	)

150 
	#REDISMODULE_NODE_FAIL
 (1<<4)

	)

151 
	#REDISMODULE_NODE_NOFAILOVER
 (1<<5)

	)

153 
	#REDISMODULE_CLUSTER_FLAG_NONE
 0

	)

154 
	#REDISMODULE_CLUSTER_FLAG_NO_FAILOVER
 (1<<1)

	)

155 
	#REDISMODULE_CLUSTER_FLAG_NO_REDIRECTION
 (1<<2)

	)

157 
	#REDISMODULE_NOT_USED
(
V
è((èV)

	)

160 
	#REDISMODULE_AUX_BEFORE_RDB
 (1<<0)

	)

161 
	#REDISMODULE_AUX_AFTER_RDB
 (1<<1)

	)

167 
ušt64_t
 
	tRedisModuËTim”ID
;

172 
	#REDISMODULE_CMDFILTER_NOSELF
 (1<<0)

	)

175 
	#REDISMODULE_OPTIONS_HANDLE_IO_ERRORS
 (1<<0)

	)

179 
	#REDISMODULE_OPTION_NO_IMPLICIT_SIGNAL_MODIFIED
 (1<<1)

	)

182 
	#REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED
 0

	)

183 
	#REDISMODULE_EVENT_PERSISTENCE
 1

	)

184 
	#REDISMODULE_EVENT_FLUSHDB
 2

	)

185 
	#REDISMODULE_EVENT_LOADING
 3

	)

186 
	#REDISMODULE_EVENT_CLIENT_CHANGE
 4

	)

187 
	#REDISMODULE_EVENT_SHUTDOWN
 5

	)

188 
	#REDISMODULE_EVENT_REPLICA_CHANGE
 6

	)

189 
	#REDISMODULE_EVENT_MASTER_LINK_CHANGE
 7

	)

190 
	#REDISMODULE_EVENT_CRON_LOOP
 8

	)

191 
	#REDISMODULE_EVENT_MODULE_CHANGE
 9

	)

192 
	#REDISMODULE_EVENT_LOADING_PROGRESS
 10

	)

194 
	sRedisModuËEv’t
 {

195 
ušt64_t
 
	mid
;

196 
ušt64_t
 
	md©av”
;

197 } 
	tRedisModuËEv’t
;

199 
	gRedisModuËCtx
;

200 (*
	tRedisModuËEv’tC®lback
)(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËEv’t
 
	teid
, 
	tušt64_t
 
	tsubev’t
, *
	td©a
);

202 cÚ¡ 
RedisModuËEv’t


203 
RedisModuËEv’t_R•liÿtiÚRŞeChªged
 = {

204 
REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED
,

206 
	}
},

207 
	gRedisModuËEv’t_P”si¡’û
 = {

208 
REDISMODULE_EVENT_PERSISTENCE
,

211 
	gRedisModuËEv’t_FlushDB
 = {

212 
REDISMODULE_EVENT_FLUSHDB
,

215 
	gRedisModuËEv’t_Lßdšg
 = {

216 
REDISMODULE_EVENT_LOADING
,

219 
	gRedisModuËEv’t_Cl›ÁChªge
 = {

220 
REDISMODULE_EVENT_CLIENT_CHANGE
,

223 
	gRedisModuËEv’t_Shutdown
 = {

224 
REDISMODULE_EVENT_SHUTDOWN
,

227 
	gRedisModuËEv’t_R•liÿChªge
 = {

228 
REDISMODULE_EVENT_REPLICA_CHANGE
,

231 
	gRedisModuËEv’t_CrÚLoİ
 = {

232 
REDISMODULE_EVENT_CRON_LOOP
,

235 
	gRedisModuËEv’t_Ma¡”LškChªge
 = {

236 
REDISMODULE_EVENT_MASTER_LINK_CHANGE
,

239 
	gRedisModuËEv’t_ModuËChªge
 = {

240 
REDISMODULE_EVENT_MODULE_CHANGE
,

243 
	gRedisModuËEv’t_LßdšgProg»ss
 = {

244 
REDISMODULE_EVENT_LOADING_PROGRESS
,

249 
	#REDISMODULE_SUBEVENT_PERSISTENCE_RDB_START
 0

	)

250 
	#REDISMODULE_SUBEVENT_PERSISTENCE_AOF_START
 1

	)

251 
	#REDISMODULE_SUBEVENT_PERSISTENCE_SYNC_RDB_START
 2

	)

252 
	#REDISMODULE_SUBEVENT_PERSISTENCE_ENDED
 3

	)

253 
	#REDISMODULE_SUBEVENT_PERSISTENCE_FAILED
 4

	)

255 
	#REDISMODULE_SUBEVENT_LOADING_RDB_START
 0

	)

256 
	#REDISMODULE_SUBEVENT_LOADING_AOF_START
 1

	)

257 
	#REDISMODULE_SUBEVENT_LOADING_REPL_START
 2

	)

258 
	#REDISMODULE_SUBEVENT_LOADING_ENDED
 3

	)

259 
	#REDISMODULE_SUBEVENT_LOADING_FAILED
 4

	)

261 
	#REDISMODULE_SUBEVENT_CLIENT_CHANGE_CONNECTED
 0

	)

262 
	#REDISMODULE_SUBEVENT_CLIENT_CHANGE_DISCONNECTED
 1

	)

264 
	#REDISMODULE_SUBEVENT_MASTER_LINK_UP
 0

	)

265 
	#REDISMODULE_SUBEVENT_MASTER_LINK_DOWN
 1

	)

267 
	#REDISMODULE_SUBEVENT_REPLICA_CHANGE_ONLINE
 0

	)

268 
	#REDISMODULE_SUBEVENT_REPLICA_CHANGE_OFFLINE
 1

	)

270 
	#REDISMODULE_EVENT_REPLROLECHANGED_NOW_MASTER
 0

	)

271 
	#REDISMODULE_EVENT_REPLROLECHANGED_NOW_REPLICA
 1

	)

273 
	#REDISMODULE_SUBEVENT_FLUSHDB_START
 0

	)

274 
	#REDISMODULE_SUBEVENT_FLUSHDB_END
 1

	)

276 
	#REDISMODULE_SUBEVENT_MODULE_LOADED
 0

	)

277 
	#REDISMODULE_SUBEVENT_MODULE_UNLOADED
 1

	)

279 
	#REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB
 0

	)

280 
	#REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF
 1

	)

283 
	#REDISMODULE_CLIENTINFO_FLAG_SSL
 (1<<0)

	)

284 
	#REDISMODULE_CLIENTINFO_FLAG_PUBSUB
 (1<<1)

	)

285 
	#REDISMODULE_CLIENTINFO_FLAG_BLOCKED
 (1<<2)

	)

286 
	#REDISMODULE_CLIENTINFO_FLAG_TRACKING
 (1<<3)

	)

287 
	#REDISMODULE_CLIENTINFO_FLAG_UNIXSOCKET
 (1<<4)

	)

288 
	#REDISMODULE_CLIENTINFO_FLAG_MULTI
 (1<<5)

	)

305 
	#REDISMODULE_CLIENTINFO_VERSION
 1

	)

306 
	sRedisModuËCl›ÁInfo
 {

307 
ušt64_t
 
	mv”siÚ
;

308 
ušt64_t
 
	mæags
;

309 
ušt64_t
 
	mid
;

310 
	maddr
[46];

311 
ušt16_t
 
	mpÜt
;

312 
ušt16_t
 
	mdb
;

313 } 
	tRedisModuËCl›ÁInfoV1
;

315 
	#RedisModuËCl›ÁInfo
 
RedisModuËCl›ÁInfoV1


	)

317 
	#REDISMODULE_REPLICATIONINFO_VERSION
 1

	)

318 
	sRedisModuËR•liÿtiÚInfo
 {

319 
ušt64_t
 
	mv”siÚ
;

322 
	mma¡”
;

323 *
	mma¡”ho¡
;

324 
	mma¡”pÜt
;

325 *
	m»¶id1
;

326 *
	m»¶id2
;

327 
ušt64_t
 
	m»¶1_off£t
;

328 
ušt64_t
 
	m»¶2_off£t
;

329 } 
	tRedisModuËR•liÿtiÚInfoV1
;

331 
	#RedisModuËR•liÿtiÚInfo
 
RedisModuËR•liÿtiÚInfoV1


	)

333 
	#REDISMODULE_FLUSHINFO_VERSION
 1

	)

334 
	sRedisModuËFlushInfo
 {

335 
ušt64_t
 
	mv”siÚ
;

338 
št32_t
 
	msync
;

339 
št32_t
 
	mdbnum
;

340 } 
	tRedisModuËFlushInfoV1
;

342 
	#RedisModuËFlushInfo
 
RedisModuËFlushInfoV1


	)

344 
	#REDISMODULE_MODULE_CHANGE_VERSION
 1

	)

345 
	sRedisModuËModuËChªge
 {

346 
ušt64_t
 
	mv”siÚ
;

349 cÚ¡ * 
	mmoduË_Çme
;

350 
št32_t
 
	mmoduË_v”siÚ
;

351 } 
	tRedisModuËModuËChªgeV1
;

353 
	#RedisModuËModuËChªge
 
RedisModuËModuËChªgeV1


	)

355 
	#REDISMODULE_CRON_LOOP_VERSION
 1

	)

356 
	sRedisModuËCrÚLoİInfo
 {

357 
ušt64_t
 
	mv”siÚ
;

360 
št32_t
 
	mhz
;

361 } 
	tRedisModuËCrÚLoİV1
;

363 
	#RedisModuËCrÚLoİ
 
RedisModuËCrÚLoİV1


	)

365 
	#REDISMODULE_LOADING_PROGRESS_VERSION
 1

	)

366 
	sRedisModuËLßdšgProg»ssInfo
 {

367 
ušt64_t
 
	mv”siÚ
;

370 
št32_t
 
	mhz
;

371 
št32_t
 
	m´og»ss
;

373 } 
	tRedisModuËLßdšgProg»ssV1
;

375 
	#RedisModuËLßdšgProg»ss
 
RedisModuËLßdšgProg»ssV1


	)

379 #iâdeà
REDISMODULE_CORE


381 
	tm¡ime_t
;

384 
RedisModuËCtx
 
	tRedisModuËCtx
;

385 
RedisModuËKey
 
	tRedisModuËKey
;

386 
RedisModuËSŒšg
 
	tRedisModuËSŒšg
;

387 
RedisModuËC®lR•ly
 
	tRedisModuËC®lR•ly
;

388 
RedisModuËIO
 
	tRedisModuËIO
;

389 
RedisModuËTy³
 
	tRedisModuËTy³
;

390 
RedisModuËDige¡
 
	tRedisModuËDige¡
;

391 
RedisModuËBlockedCl›Á
 
	tRedisModuËBlockedCl›Á
;

392 
RedisModuËClu¡”Info
 
	tRedisModuËClu¡”Info
;

393 
RedisModuËDiù
 
	tRedisModuËDiù
;

394 
RedisModuËDiùI‹r
 
	tRedisModuËDiùI‹r
;

395 
RedisModuËCommªdF‹rCtx
 
	tRedisModuËCommªdF‹rCtx
;

396 
RedisModuËCommªdF‹r
 
	tRedisModuËCommªdF‹r
;

397 
RedisModuËInfoCtx
 
	tRedisModuËInfoCtx
;

398 
RedisModuËS”v”InfoD©a
 
	tRedisModuËS”v”InfoD©a
;

399 
RedisModuËSÿnCursÜ
 
	tRedisModuËSÿnCursÜ
;

400 
RedisModuËU£r
 
	tRedisModuËU£r
;

402 (*
	tRedisModuËCmdFunc
)(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËSŒšg
 **
	t¬gv
, 
	t¬gc
);

403 (*
	tRedisModuËDiscÚÃùFunc
)(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËBlockedCl›Á
 *
	tbc
);

404 (*
	tRedisModuËNÙifiÿtiÚFunc
)(
	tRedisModuËCtx
 *
	tùx
, 
	tty³
, cÚ¡ *
	tev’t
, 
	tRedisModuËSŒšg
 *
	tkey
);

405 *(*
	tRedisModuËTy³LßdFunc
)(
	tRedisModuËIO
 *
	trdb
, 
	t’cv”
);

406 (*
	tRedisModuËTy³SaveFunc
)(
	tRedisModuËIO
 *
	trdb
, *
	tv®ue
);

407 (*
	tRedisModuËTy³AuxLßdFunc
)(
	tRedisModuËIO
 *
	trdb
, 
	t’cv”
, 
	twh’
);

408 (*
	tRedisModuËTy³AuxSaveFunc
)(
	tRedisModuËIO
 *
	trdb
, 
	twh’
);

409 (*
	tRedisModuËTy³Rewr™eFunc
)(
	tRedisModuËIO
 *
	taof
, 
	tRedisModuËSŒšg
 *
	tkey
, *
	tv®ue
);

410 
	$size_t
 (*
	tRedisModuËTy³MemU§geFunc
)(cÚ¡ *
	tv®ue
);

411 (*
	tRedisModuËTy³Dige¡Func
)(
	tRedisModuËDige¡
 *
	tdige¡
, *
	tv®ue
);

412 (*
	tRedisModuËTy³F»eFunc
)(*
	tv®ue
);

413 (*
	tRedisModuËClu¡”Mes§geReûiv”
)(
	tRedisModuËCtx
 *
	tùx
, cÚ¡ *
	t£nd”_id
, 
	tušt8_t
 
	tty³
, cÚ¡ *
	t·ylßd
, 
	tušt32_t
 
	tËn
);

414 (*
	tRedisModuËTim”Proc
)(
	tRedisModuËCtx
 *
	tùx
, *
	td©a
);

415 (*
	tRedisModuËCommªdF‹rFunc
è(
	tRedisModuËCommªdF‹rCtx
 *
	tf‹r
);

416 (*
	tRedisModuËFÜkDÚeHªdËr
è(
	tex™code
, 
	tbysigÇl
, *
	tu£r_d©a
);

417 (*
	tRedisModuËInfoFunc
)(
	tRedisModuËInfoCtx
 *
	tùx
, 
	tfÜ_üash_»pÜt
);

418 (*
	tRedisModuËSÿnCB
)(
	tRedisModuËCtx
 *
	tùx
, 
	tRedisModuËSŒšg
 *
	tkeyÇme
, 
	tRedisModuËKey
 *
	tkey
, *
	t´ivd©a
);

419 (*
	tRedisModuËSÿnKeyCB
)(
	tRedisModuËKey
 *
	tkey
, 
	tRedisModuËSŒšg
 *
	tf›ld
, RedisModuËSŒšg *
	tv®ue
, *
	t´ivd©a
);

420 (*
	tRedisModuËU£rChªgedFunc
è(
	tušt64_t
 
	tş›Á_id
, *
	t´ivd©a
);

422 
	#REDISMODULE_TYPE_METHOD_VERSION
 2

	)

423 
	sRedisModuËTy³M‘hods
 {

424 
ušt64_t
 
v”siÚ
;

425 
RedisModuËTy³LßdFunc
 
rdb_lßd
;

426 
RedisModuËTy³SaveFunc
 
rdb_§ve
;

427 
RedisModuËTy³Rewr™eFunc
 
aof_»wr™e
;

428 
RedisModuËTy³MemU§geFunc
 
mem_u§ge
;

429 
RedisModuËTy³Dige¡Func
 
dige¡
;

430 
RedisModuËTy³F»eFunc
 
ä“
;

431 
RedisModuËTy³AuxLßdFunc
 
aux_lßd
;

432 
RedisModuËTy³AuxSaveFunc
 
aux_§ve
;

433 
aux_§ve_Œigg”s
;

434 } 
	tRedisModuËTy³M‘hods
;

436 
	#REDISMODULE_GET_API
(
Çme
) \

437 
	`RedisModuË_G‘Api
("RedisModuË_" #Çme, ((**)&
RedisModuË_
 ## 
Çme
))

	)

439 
	#REDISMODULE_API_FUNC
(
x
è(*x)

	)

442 *
	$REDISMODULE_API_FUNC
(
RedisModuË_AÎoc
)(
size_t
 
by‹s
);

443 *
	$REDISMODULE_API_FUNC
(
RedisModuË_R—Îoc
)(*
±r
, 
size_t
 
by‹s
);

444 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»e
)(*
±r
);

445 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C®loc
)(
size_t
 
nmemb
, size_ˆ
size
);

446 *
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒdup
)(cÚ¡ *
¡r
);

447 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Api
)(const *, *);

448 
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eCommªd
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
RedisModuËCmdFunc
 
cmdfunc
, cÚ¡ *
¡ræags
, 
fœ¡key
, 
Ï¡key
, 
key¡•
);

449 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘ModuËA‰ribs
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
v”
, 
­iv”
);

450 
	$REDISMODULE_API_FUNC
(
RedisModuË_IsModuËNameBusy
)(cÚ¡ *
Çme
);

451 
	$REDISMODULE_API_FUNC
(
RedisModuË_WrÚgAr™y
)(
RedisModuËCtx
 *
ùx
);

452 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hLÚgLÚg
)(
RedisModuËCtx
 *
ùx
, 
Î
);

453 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘S–eùedDb
)(
RedisModuËCtx
 *
ùx
);

454 
	$REDISMODULE_API_FUNC
(
RedisModuË_S–eùDb
)(
RedisModuËCtx
 *
ùx
, 
Ãwid
);

455 *
	$REDISMODULE_API_FUNC
(
RedisModuË_O³nKey
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
keyÇme
, 
mode
);

456 
	$REDISMODULE_API_FUNC
(
RedisModuË_Clo£Key
)(
RedisModuËKey
 *
kp
);

457 
	$REDISMODULE_API_FUNC
(
RedisModuË_KeyTy³
)(
RedisModuËKey
 *
kp
);

458 
size_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_V®ueL’gth
)(
RedisModuËKey
 *
kp
);

459 
	$REDISMODULE_API_FUNC
(
RedisModuË_Li¡Push
)(
RedisModuËKey
 *
kp
, 
wh”e
, 
RedisModuËSŒšg
 *
–e
);

460 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_Li¡Pİ
)(
RedisModuËKey
 *
key
, 
wh”e
);

461 
RedisModuËC®lR•ly
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C®l
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...);

462 cÚ¡ *
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lyPrÙo
)(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 *
Ën
);

463 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eC®lR•ly
)(
RedisModuËC®lR•ly
 *
»¶y
);

464 
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lyTy³
)(
RedisModuËC®lR•ly
 *
»¶y
);

465 
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lyIÁeg”
)(
RedisModuËC®lR•ly
 *
»¶y
);

466 
size_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lyL’gth
)(
RedisModuËC®lR•ly
 *
»¶y
);

467 
RedisModuËC®lR•ly
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lyA¼ayEËm’t
)(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 
idx
);

468 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšg
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
±r
, 
size_t
 
Ën
);

469 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgFromLÚgLÚg
)(
RedisModuËCtx
 *
ùx
, 
Î
);

470 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgFromDoubË
)(
RedisModuËCtx
 *
ùx
, 
d
);

471 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgFromLÚgDoubË
)(
RedisModuËCtx
 *
ùx
, 
ld
, 
humªä›ndly
);

472 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgFromSŒšg
)(
RedisModuËCtx
 *
ùx
, cÚ¡ 
RedisModuËSŒšg
 *
¡r
);

473 #ifdeà
__GNUC__


474 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgPrštf
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
fmt
, ...è
	`__©Œibu‹__
 ((
	`fÜm©
 (
´štf
, 2, 3)));

476 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgPrštf
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
fmt
, ...);

478 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eSŒšg
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
);

479 cÚ¡ *
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgPŒL’
)(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, 
size_t
 *
Ën
);

480 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hE¼Ü
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
”r
);

481 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hSim¶eSŒšg
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
msg
);

482 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hA¼ay
)(
RedisModuËCtx
 *
ùx
, 
Ën
);

483 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hNuÎA¼ay
)(
RedisModuËCtx
 *
ùx
);

484 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hEm±yA¼ay
)(
RedisModuËCtx
 *
ùx
);

485 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyS‘A¼ayL’gth
)(
RedisModuËCtx
 *
ùx
, 
Ën
);

486 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hSŒšgBufãr
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
Ën
);

487 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hCSŒšg
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
);

488 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hSŒšg
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
);

489 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hEm±ySŒšg
)(
RedisModuËCtx
 *
ùx
);

490 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hV”b©imSŒšg
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
Ën
);

491 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hNuÎ
)(
RedisModuËCtx
 *
ùx
);

492 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hDoubË
)(
RedisModuËCtx
 *
ùx
, 
d
);

493 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hLÚgDoubË
)(
RedisModuËCtx
 *
ùx
, 
d
);

494 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•lyW™hC®lR•ly
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËC®lR•ly
 *
»¶y
);

495 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgToLÚgLÚg
)(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
Î
);

496 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgToDoubË
)(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
d
);

497 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgToLÚgDoubË
)(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, *
d
);

498 
	$REDISMODULE_API_FUNC
(
RedisModuË_AutoMemÜy
)(
RedisModuËCtx
 *
ùx
);

499 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•liÿ‹
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...);

500 
	$REDISMODULE_API_FUNC
(
RedisModuË_R•liÿ‹V”b©im
)(
RedisModuËCtx
 *
ùx
);

501 cÚ¡ *
	$REDISMODULE_API_FUNC
(
RedisModuË_C®lR•lySŒšgPŒ
)(
RedisModuËC®lR•ly
 *
»¶y
, 
size_t
 *
Ën
);

502 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eSŒšgFromC®lR•ly
)(
RedisModuËC®lR•ly
 *
»¶y
);

503 
	$REDISMODULE_API_FUNC
(
RedisModuË_D–‘eKey
)(
RedisModuËKey
 *
key
);

504 
	$REDISMODULE_API_FUNC
(
RedisModuË_UÆškKey
)(
RedisModuËKey
 *
key
);

505 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgS‘
)(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
¡r
);

506 *
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgDMA
)(
RedisModuËKey
 *
key
, 
size_t
 *
Ën
, 
mode
);

507 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgTrunÿ‹
)(
RedisModuËKey
 *
key
, 
size_t
 
ÃwËn
);

508 
m¡ime_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Expœe
)(
RedisModuËKey
 *
key
);

509 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘Expœe
)(
RedisModuËKey
 *
key
, 
m¡ime_t
 
expœe
);

510 
	$REDISMODULE_API_FUNC
(
RedisModuË_Re£tD©a£t
)(
»¡¬t_aof
, 
async
);

511 
	$REDISMODULE_API_FUNC
(
RedisModuË_DbSize
)(
RedisModuËCtx
 *
ùx
);

512 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_RªdomKey
)(
RedisModuËCtx
 *
ùx
);

513 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tAdd
)(
RedisModuËKey
 *
key
, 
scÜe
, 
RedisModuËSŒšg
 *
–e
, *
æag¥Œ
);

514 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tInüby
)(
RedisModuËKey
 *
key
, 
scÜe
, 
RedisModuËSŒšg
 *
–e
, *
æag¥Œ
, *
ÃwscÜe
);

515 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tScÜe
)(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
–e
, *
scÜe
);

516 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRem
)(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
–e
, *
d–‘ed
);

517 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRªgeStİ
)(
RedisModuËKey
 *
key
);

518 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tFœ¡InScÜeRªge
)(
RedisModuËKey
 *
key
, 
mš
, 
max
, 
mšex
, 
maxex
);

519 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tLa¡InScÜeRªge
)(
RedisModuËKey
 *
key
, 
mš
, 
max
, 
mšex
, 
maxex
);

520 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tFœ¡InLexRªge
)(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
mš
, RedisModuËSŒšg *
max
);

521 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tLa¡InLexRªge
)(
RedisModuËKey
 *
key
, 
RedisModuËSŒšg
 *
mš
, RedisModuËSŒšg *
max
);

522 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRªgeCu¼’tEËm’t
)(
RedisModuËKey
 *
key
, *
scÜe
);

523 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRªgeNext
)(
RedisModuËKey
 *
key
);

524 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRªgeP»v
)(
RedisModuËKey
 *
key
);

525 
	$REDISMODULE_API_FUNC
(
RedisModuË_Z£tRªgeEndR—ched
)(
RedisModuËKey
 *
key
);

526 
	$REDISMODULE_API_FUNC
(
RedisModuË_HashS‘
)(
RedisModuËKey
 *
key
, 
æags
, ...);

527 
	$REDISMODULE_API_FUNC
(
RedisModuË_HashG‘
)(
RedisModuËKey
 *
key
, 
æags
, ...);

528 
	$REDISMODULE_API_FUNC
(
RedisModuË_IsKeysPos™iÚReque¡
)(
RedisModuËCtx
 *
ùx
);

529 
	$REDISMODULE_API_FUNC
(
RedisModuË_KeyAtPos
)(
RedisModuËCtx
 *
ùx
, 
pos
);

530 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Cl›ÁId
)(
RedisModuËCtx
 *
ùx
);

531 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Cl›ÁInfoById
)(*
ci
, 
ušt64_t
 
id
);

532 
	$REDISMODULE_API_FUNC
(
RedisModuË_PublishMes§ge
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
chªÃl
, RedisModuËSŒšg *
mes§ge
);

533 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘CÚ‹xtFÏgs
)(
RedisModuËCtx
 *
ùx
);

534 
	`REDISMODULE_API_FUNC
(
RedisModuË_AvoidR•liÿT¿ffic
)();

535 *
	$REDISMODULE_API_FUNC
(
RedisModuË_PoŞAÎoc
)(
RedisModuËCtx
 *
ùx
, 
size_t
 
by‹s
);

536 
RedisModuËTy³
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eD©aTy³
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
’cv”
, 
RedisModuËTy³M‘hods
 *
ty³m‘hods
);

537 
	$REDISMODULE_API_FUNC
(
RedisModuË_ModuËTy³S‘V®ue
)(
RedisModuËKey
 *
key
, 
RedisModuËTy³
 *
mt
, *
v®ue
);

538 
	$REDISMODULE_API_FUNC
(
RedisModuË_ModuËTy³R•ÏûV®ue
)(
RedisModuËKey
 *
key
, 
RedisModuËTy³
 *
mt
, *
Ãw_v®ue
, **
Şd_v®ue
);

539 
RedisModuËTy³
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_ModuËTy³G‘Ty³
)(
RedisModuËKey
 *
key
);

540 *
	$REDISMODULE_API_FUNC
(
RedisModuË_ModuËTy³G‘V®ue
)(
RedisModuËKey
 *
key
);

541 
	$REDISMODULE_API_FUNC
(
RedisModuË_IsIOE¼Ü
)(
RedisModuËIO
 *
io
);

542 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘ModuËO±iÚs
)(
RedisModuËCtx
 *
ùx
, 
İtiÚs
);

543 
	$REDISMODULE_API_FUNC
(
RedisModuË_SigÇlModif›dKey
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
keyÇme
);

544 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveUnsigÃd
)(
RedisModuËIO
 *
io
, 
ušt64_t
 
v®ue
);

545 
ušt64_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdUnsigÃd
)(
RedisModuËIO
 *
io
);

546 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveSigÃd
)(
RedisModuËIO
 *
io
, 
št64_t
 
v®ue
);

547 
št64_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdSigÃd
)(
RedisModuËIO
 *
io
);

548 
	$REDISMODULE_API_FUNC
(
RedisModuË_Em™AOF
)(
RedisModuËIO
 *
io
, cÚ¡ *
cmdÇme
, cÚ¡ *
fmt
, ...);

549 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveSŒšg
)(
RedisModuËIO
 *
io
, 
RedisModuËSŒšg
 *
s
);

550 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveSŒšgBufãr
)(
RedisModuËIO
 *
io
, cÚ¡ *
¡r
, 
size_t
 
Ën
);

551 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdSŒšg
)(
RedisModuËIO
 *
io
);

552 *
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdSŒšgBufãr
)(
RedisModuËIO
 *
io
, 
size_t
 *
ËÅŒ
);

553 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveDoubË
)(
RedisModuËIO
 *
io
, 
v®ue
);

554 
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdDoubË
)(
RedisModuËIO
 *
io
);

555 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveFlßt
)(
RedisModuËIO
 *
io
, 
v®ue
);

556 
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdFlßt
)(
RedisModuËIO
 *
io
);

557 
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveLÚgDoubË
)(
RedisModuËIO
 *
io
, 
v®ue
);

558 
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdLÚgDoubË
)(
RedisModuËIO
 *
io
);

559 *
	$REDISMODULE_API_FUNC
(
RedisModuË_LßdD©aTy³FromSŒšg
)(cÚ¡ 
RedisModuËSŒšg
 *
¡r
, cÚ¡ 
RedisModuËTy³
 *
mt
);

560 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_SaveD©aTy³ToSŒšg
)(
RedisModuËCtx
 *
ùx
, *
d©a
, cÚ¡ 
RedisModuËTy³
 *
mt
);

561 #ifdeà
__GNUC__


562 
	$REDISMODULE_API_FUNC
(
RedisModuË_Log
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Ëv–
, cÚ¡ *
fmt
, ...è
	`__©Œibu‹__
 ((
	`fÜm©
 (
´štf
, 3, 4)));

563 
	$REDISMODULE_API_FUNC
(
RedisModuË_LogIOE¼Ü
)(
RedisModuËIO
 *
io
, cÚ¡ *
Ëv–¡r
, cÚ¡ *
fmt
, ...è
	`__©Œibu‹__
 ((
	`fÜm©
 (
´štf
, 3, 4)));

565 
	$REDISMODULE_API_FUNC
(
RedisModuË_Log
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Ëv–
, cÚ¡ *
fmt
, ...);

566 
	$REDISMODULE_API_FUNC
(
RedisModuË_LogIOE¼Ü
)(
RedisModuËIO
 *
io
, cÚ¡ *
Ëv–¡r
, cÚ¡ *
fmt
, ...);

568 
	$REDISMODULE_API_FUNC
(
RedisModuË__As£¹
)(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
);

569 
	$REDISMODULE_API_FUNC
(
RedisModuË_L©’cyAddSam¶e
)(cÚ¡ *
ev’t
, 
m¡ime_t
 
Ï‹ncy
);

570 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgAµ’dBufãr
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
, cÚ¡ *
buf
, 
size_t
 
Ën
);

571 
	$REDISMODULE_API_FUNC
(
RedisModuË_R‘ašSŒšg
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
¡r
);

572 
	$REDISMODULE_API_FUNC
(
RedisModuË_SŒšgCom·»
)(
RedisModuËSŒšg
 *
a
, RedisModuËSŒšg *
b
);

573 
RedisModuËCtx
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘CÚ‹xtFromIO
)(
RedisModuËIO
 *
io
);

574 cÚ¡ 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘KeyNameFromIO
)(
RedisModuËIO
 *
io
);

575 cÚ¡ 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘KeyNameFromModuËKey
)(
RedisModuËKey
 *
key
);

576 
	$REDISMODULE_API_FUNC
(
RedisModuË_Mli£cÚds
)();

577 
	$REDISMODULE_API_FUNC
(
RedisModuË_Dige¡AddSŒšgBufãr
)(
RedisModuËDige¡
 *
md
, *
–e
, 
size_t
 
Ën
);

578 
	$REDISMODULE_API_FUNC
(
RedisModuË_Dige¡AddLÚgLÚg
)(
RedisModuËDige¡
 *
md
, 
–e
);

579 
	$REDISMODULE_API_FUNC
(
RedisModuË_Dige¡EndSequ’û
)(
RedisModuËDige¡
 *
md
);

580 
RedisModuËDiù
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eDiù
)(
RedisModuËCtx
 *
ùx
);

581 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eDiù
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiù
 *
d
);

582 
ušt64_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùSize
)(
RedisModuËDiù
 *
d
);

583 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùS‘C
)(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
±r
);

584 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùR•ÏûC
)(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
±r
);

585 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùS‘
)(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
±r
);

586 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùR•Ïû
)(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
±r
);

587 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùG‘C
)(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
nokey
);

588 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùG‘
)(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
nokey
);

589 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùD–C
)(
RedisModuËDiù
 *
d
, *
key
, 
size_t
 
keyËn
, *
Şdv®
);

590 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùD–
)(
RedisModuËDiù
 *
d
, 
RedisModuËSŒšg
 *
key
, *
Şdv®
);

591 
RedisModuËDiùI‹r
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùI‹¿tÜS¹C
)(
RedisModuËDiù
 *
d
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
);

592 
RedisModuËDiùI‹r
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùI‹¿tÜS¹
)(
RedisModuËDiù
 *
d
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
);

593 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùI‹¿tÜStİ
)(
RedisModuËDiùI‹r
 *
di
);

594 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùI‹¿tÜRe£ekC
)(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
);

595 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùI‹¿tÜRe£ek
)(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
);

596 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùNextC
)(
RedisModuËDiùI‹r
 *
di
, 
size_t
 *
keyËn
, **
d©­Œ
);

597 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùP»vC
)(
RedisModuËDiùI‹r
 *
di
, 
size_t
 *
keyËn
, **
d©­Œ
);

598 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùNext
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiùI‹r
 *
di
, **
d©­Œ
);

599 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùP»v
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËDiùI‹r
 *
di
, **
d©­Œ
);

600 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùCom·»C
)(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, *
key
, 
size_t
 
keyËn
);

601 
	$REDISMODULE_API_FUNC
(
RedisModuË_DiùCom·»
)(
RedisModuËDiùI‹r
 *
di
, cÚ¡ *
İ
, 
RedisModuËSŒšg
 *
key
);

602 
	$REDISMODULE_API_FUNC
(
RedisModuË_Regi¡”InfoFunc
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËInfoFunc
 
cb
);

603 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddSeùiÚ
)(
RedisModuËInfoCtx
 *
ùx
, *
Çme
);

604 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoBegšDiùF›ld
)(
RedisModuËInfoCtx
 *
ùx
, *
Çme
);

605 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoEndDiùF›ld
)(
RedisModuËInfoCtx
 *
ùx
);

606 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddF›ldSŒšg
)(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
RedisModuËSŒšg
 *
v®ue
);

607 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddF›ldCSŒšg
)(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, *
v®ue
);

608 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddF›ldDoubË
)(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
);

609 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddF›ldLÚgLÚg
)(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
);

610 
	$REDISMODULE_API_FUNC
(
RedisModuË_InfoAddF›ldULÚgLÚg
)(
RedisModuËInfoCtx
 *
ùx
, *
f›ld
, 
v®ue
);

611 
RedisModuËS”v”InfoD©a
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘S”v”Info
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
£ùiÚ
);

612 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eS”v”Info
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËS”v”InfoD©a
 *
d©a
);

613 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_S”v”InfoG‘F›ld
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
);

614 cÚ¡ *
	$REDISMODULE_API_FUNC
(
RedisModuË_S”v”InfoG‘F›ldC
)(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
);

615 
	$REDISMODULE_API_FUNC
(
RedisModuË_S”v”InfoG‘F›ldSigÃd
)(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
);

616 
	$REDISMODULE_API_FUNC
(
RedisModuË_S”v”InfoG‘F›ldUnsigÃd
)(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
);

617 
	$REDISMODULE_API_FUNC
(
RedisModuË_S”v”InfoG‘F›ldDoubË
)(
RedisModuËS”v”InfoD©a
 *
d©a
, cÚ¡ * 
f›ld
, *
out_”r
);

618 
	$REDISMODULE_API_FUNC
(
RedisModuË_SubsüibeToS”v”Ev’t
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËEv’t
 
ev’t
, 
RedisModuËEv’tC®lback
 
ÿÎback
);

619 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘LRU
)(
RedisModuËKey
 *
key
, 
m¡ime_t
 
Ìu_idË
);

620 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘LRU
)(
RedisModuËKey
 *
key
, 
m¡ime_t
 *
Ìu_idË
);

621 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘LFU
)(
RedisModuËKey
 *
key
, 
lfu_äeq
);

622 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘LFU
)(
RedisModuËKey
 *
key
, *
lfu_äeq
);

623 
RedisModuËBlockedCl›Á
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_BlockCl›ÁOnKeys
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËCmdFunc
 
»¶y_ÿÎback
, RedisModuËCmdFunø
timeout_ÿÎback
, (*
ä“_´ivd©a
)(RedisModuËCtx*,*), 
timeout_ms
, 
RedisModuËSŒšg
 **
keys
, 
numkeys
, *
´ivd©a
);

624 
	$REDISMODULE_API_FUNC
(
RedisModuË_SigÇlKeyAsR—dy
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSŒšg
 *
key
);

625 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘BlockedCl›ÁR—dyKey
)(
RedisModuËCtx
 *
ùx
);

626 
RedisModuËSÿnCursÜ
 *
	`REDISMODULE_API_FUNC
(
RedisModuË_SÿnCursÜC»©e
)();

627 
	$REDISMODULE_API_FUNC
(
RedisModuË_SÿnCursÜRe¡¬t
)(
RedisModuËSÿnCursÜ
 *
cursÜ
);

628 
	$REDISMODULE_API_FUNC
(
RedisModuË_SÿnCursÜDe¡roy
)(
RedisModuËSÿnCursÜ
 *
cursÜ
);

629 
	$REDISMODULE_API_FUNC
(
RedisModuË_Sÿn
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËSÿnCursÜ
 *
cursÜ
, 
RedisModuËSÿnCB
 
â
, *
´ivd©a
);

630 
	$REDISMODULE_API_FUNC
(
RedisModuË_SÿnKey
)(
RedisModuËKey
 *
key
, 
RedisModuËSÿnCursÜ
 *
cursÜ
, 
RedisModuËSÿnKeyCB
 
â
, *
´ivd©a
);

632 #ifdeà
REDISMODULE_EXPERIMENTAL_API


633 
	#REDISMODULE_EXPERIMENTAL_API_VERSION
 3

	)

634 
RedisModuËBlockedCl›Á
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_BlockCl›Á
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËCmdFunc
 
»¶y_ÿÎback
, RedisModuËCmdFunø
timeout_ÿÎback
, (*
ä“_´ivd©a
)(RedisModuËCtx*,*), 
timeout_ms
);

635 
	$REDISMODULE_API_FUNC
(
RedisModuË_UnblockCl›Á
)(
RedisModuËBlockedCl›Á
 *
bc
, *
´ivd©a
);

636 
	$REDISMODULE_API_FUNC
(
RedisModuË_IsBlockedR•lyReque¡
)(
RedisModuËCtx
 *
ùx
);

637 
	$REDISMODULE_API_FUNC
(
RedisModuË_IsBlockedTimeoutReque¡
)(
RedisModuËCtx
 *
ùx
);

638 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘BlockedCl›ÁPriv©eD©a
)(
RedisModuËCtx
 *
ùx
);

639 
RedisModuËBlockedCl›Á
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘BlockedCl›ÁHªdË
)(
RedisModuËCtx
 *
ùx
);

640 
	$REDISMODULE_API_FUNC
(
RedisModuË_AbÜtBlock
)(
RedisModuËBlockedCl›Á
 *
bc
);

641 
RedisModuËCtx
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Th»adSaãCÚ‹xt
)(
RedisModuËBlockedCl›Á
 *
bc
);

642 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eTh»adSaãCÚ‹xt
)(
RedisModuËCtx
 *
ùx
);

643 
	$REDISMODULE_API_FUNC
(
RedisModuË_Th»adSaãCÚ‹xtLock
)(
RedisModuËCtx
 *
ùx
);

644 
	$REDISMODULE_API_FUNC
(
RedisModuË_Th»adSaãCÚ‹xtUÆock
)(
RedisModuËCtx
 *
ùx
);

645 
	$REDISMODULE_API_FUNC
(
RedisModuË_SubsüibeToKey¥aûEv’ts
)(
RedisModuËCtx
 *
ùx
, 
ty³s
, 
RedisModuËNÙifiÿtiÚFunc
 
cb
);

646 
	$REDISMODULE_API_FUNC
(
RedisModuË_NÙifyKey¥aûEv’t
)(
RedisModuËCtx
 *
ùx
, 
ty³
, cÚ¡ *
ev’t
, 
RedisModuËSŒšg
 *
key
);

647 
	`REDISMODULE_API_FUNC
(
RedisModuË_G‘NÙifyKey¥aûEv’ts
)();

648 
	$REDISMODULE_API_FUNC
(
RedisModuË_BlockedCl›ÁDiscÚÃùed
)(
RedisModuËCtx
 *
ùx
);

649 
	$REDISMODULE_API_FUNC
(
RedisModuË_Regi¡”Clu¡”Mes§geReûiv”
)(
RedisModuËCtx
 *
ùx
, 
ušt8_t
 
ty³
, 
RedisModuËClu¡”Mes§geReûiv”
 
ÿÎback
);

650 
	$REDISMODULE_API_FUNC
(
RedisModuË_S’dClu¡”Mes§ge
)(
RedisModuËCtx
 *
ùx
, *
rg‘_id
, 
ušt8_t
 
ty³
, *
msg
, 
ušt32_t
 
Ën
);

651 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Clu¡”NodeInfo
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
id
, *

, *
ma¡”_id
, *
pÜt
, *
æags
);

652 **
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Clu¡”NodesLi¡
)(
RedisModuËCtx
 *
ùx
, 
size_t
 *
numnodes
);

653 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eClu¡”NodesLi¡
)(**
ids
);

654 
RedisModuËTim”ID
 
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eTim”
)(
RedisModuËCtx
 *
ùx
, 
m¡ime_t
 
³riod
, 
RedisModuËTim”Proc
 
ÿÎback
, *
d©a
);

655 
	$REDISMODULE_API_FUNC
(
RedisModuË_StİTim”
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËTim”ID
 
id
, **
d©a
);

656 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Tim”Info
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËTim”ID
 
id
, 
ušt64_t
 *
»maššg
, **
d©a
);

657 cÚ¡ *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘MyClu¡”ID
)();

658 
size_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Clu¡”Size
)();

659 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘RªdomBy‹s
)(*
d¡
, 
size_t
 
Ën
);

660 
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘RªdomHexCh¬s
)(*
d¡
, 
size_t
 
Ën
);

661 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘DiscÚÃùC®lback
)(
RedisModuËBlockedCl›Á
 *
bc
, 
RedisModuËDiscÚÃùFunc
 
ÿÎback
);

662 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘Clu¡”FÏgs
)(
RedisModuËCtx
 *
ùx
, 
ušt64_t
 
æags
);

663 
	$REDISMODULE_API_FUNC
(
RedisModuË_ExpÜtSh¬edAPI
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
­šame
, *
func
);

664 *
	$REDISMODULE_API_FUNC
(
RedisModuË_G‘Sh¬edAPI
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
­šame
);

665 
RedisModuËCommªdF‹r
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_Regi¡”CommªdF‹r
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËCommªdF‹rFunc
 
cb
, 
æags
);

666 
	$REDISMODULE_API_FUNC
(
RedisModuË_UÄegi¡”CommªdF‹r
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËCommªdF‹r
 *
f‹r
);

667 
	$REDISMODULE_API_FUNC
(
RedisModuË_CommªdF‹rArgsCouÁ
)(
RedisModuËCommªdF‹rCtx
 *
fùx
);

668 cÚ¡ 
RedisModuËSŒšg
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_CommªdF‹rArgG‘
)(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
);

669 
	$REDISMODULE_API_FUNC
(
RedisModuË_CommªdF‹rArgIn£¹
)(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
, 
RedisModuËSŒšg
 *
¬g
);

670 
	$REDISMODULE_API_FUNC
(
RedisModuË_CommªdF‹rArgR•Ïû
)(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
, 
RedisModuËSŒšg
 *
¬g
);

671 
	$REDISMODULE_API_FUNC
(
RedisModuË_CommªdF‹rArgD–‘e
)(
RedisModuËCommªdF‹rCtx
 *
fùx
, 
pos
);

672 
	$REDISMODULE_API_FUNC
(
RedisModuË_FÜk
)(
RedisModuËFÜkDÚeHªdËr
 
cb
, *
u£r_d©a
);

673 
	$REDISMODULE_API_FUNC
(
RedisModuË_Ex™FromChd
)(
»tcode
);

674 
	$REDISMODULE_API_FUNC
(
RedisModuË_KlFÜkChd
)(
chd_pid
);

675 
	`REDISMODULE_API_FUNC
(
RedisModuË_G‘U£dMemÜyR©io
)();

676 
size_t
 
	$REDISMODULE_API_FUNC
(
RedisModuË_M®locSize
)(* 
±r
);

677 
RedisModuËU£r
 *
	$REDISMODULE_API_FUNC
(
RedisModuË_C»©eModuËU£r
)(cÚ¡ *
Çme
);

678 
	$REDISMODULE_API_FUNC
(
RedisModuË_F»eModuËU£r
)(
RedisModuËU£r
 *
u£r
);

679 
	$REDISMODULE_API_FUNC
(
RedisModuË_S‘ModuËU£rACL
)(
RedisModuËU£r
 *
u£r
, cÚ¡ * 
aş
);

680 
	$REDISMODULE_API_FUNC
(
RedisModuË_Auth’tiÿ‹Cl›ÁW™hACLU£r
)(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
size_t
 
Ën
, 
RedisModuËU£rChªgedFunc
 
ÿÎback
, *
´ivd©a
, 
ušt64_t
 *
ş›Á_id
);

681 
	$REDISMODULE_API_FUNC
(
RedisModuË_Auth’tiÿ‹Cl›ÁW™hU£r
)(
RedisModuËCtx
 *
ùx
, 
RedisModuËU£r
 *
u£r
, 
RedisModuËU£rChªgedFunc
 
ÿÎback
, *
´ivd©a
, 
ušt64_t
 *
ş›Á_id
);

682 
	$REDISMODULE_API_FUNC
(
RedisModuË_D—uth’tiÿ‹AndClo£Cl›Á
)(
RedisModuËCtx
 *
ùx
, 
ušt64_t
 
ş›Á_id
);

685 
	#RedisModuË_IsAOFCl›Á
(
id
è((idè=ğ
CLIENT_ID_AOF
)

	)

688 
	$RedisModuË_In™
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
v”
, 
­iv”
è
	`__©Œibu‹__
((
unu£d
));

689 
	$RedisModuË_In™
(
RedisModuËCtx
 *
ùx
, cÚ¡ *
Çme
, 
v”
, 
­iv”
) {

690 *
g‘­ifunıŒ
 = ((**)
ùx
)[0];

691 
RedisModuË_G‘Api
 = ((*)(cÚ¡ *, *)è()
g‘­ifunıŒ
;

692 
	`REDISMODULE_GET_API
(
AÎoc
);

693 
	`REDISMODULE_GET_API
(
C®loc
);

694 
	`REDISMODULE_GET_API
(
F»e
);

695 
	`REDISMODULE_GET_API
(
R—Îoc
);

696 
	`REDISMODULE_GET_API
(
SŒdup
);

697 
	`REDISMODULE_GET_API
(
C»©eCommªd
);

698 
	`REDISMODULE_GET_API
(
S‘ModuËA‰ribs
);

699 
	`REDISMODULE_GET_API
(
IsModuËNameBusy
);

700 
	`REDISMODULE_GET_API
(
WrÚgAr™y
);

701 
	`REDISMODULE_GET_API
(
R•lyW™hLÚgLÚg
);

702 
	`REDISMODULE_GET_API
(
R•lyW™hE¼Ü
);

703 
	`REDISMODULE_GET_API
(
R•lyW™hSim¶eSŒšg
);

704 
	`REDISMODULE_GET_API
(
R•lyW™hA¼ay
);

705 
	`REDISMODULE_GET_API
(
R•lyW™hNuÎA¼ay
);

706 
	`REDISMODULE_GET_API
(
R•lyW™hEm±yA¼ay
);

707 
	`REDISMODULE_GET_API
(
R•lyS‘A¼ayL’gth
);

708 
	`REDISMODULE_GET_API
(
R•lyW™hSŒšgBufãr
);

709 
	`REDISMODULE_GET_API
(
R•lyW™hCSŒšg
);

710 
	`REDISMODULE_GET_API
(
R•lyW™hSŒšg
);

711 
	`REDISMODULE_GET_API
(
R•lyW™hEm±ySŒšg
);

712 
	`REDISMODULE_GET_API
(
R•lyW™hV”b©imSŒšg
);

713 
	`REDISMODULE_GET_API
(
R•lyW™hNuÎ
);

714 
	`REDISMODULE_GET_API
(
R•lyW™hC®lR•ly
);

715 
	`REDISMODULE_GET_API
(
R•lyW™hDoubË
);

716 
	`REDISMODULE_GET_API
(
R•lyW™hLÚgDoubË
);

717 
	`REDISMODULE_GET_API
(
G‘S–eùedDb
);

718 
	`REDISMODULE_GET_API
(
S–eùDb
);

719 
	`REDISMODULE_GET_API
(
O³nKey
);

720 
	`REDISMODULE_GET_API
(
Clo£Key
);

721 
	`REDISMODULE_GET_API
(
KeyTy³
);

722 
	`REDISMODULE_GET_API
(
V®ueL’gth
);

723 
	`REDISMODULE_GET_API
(
Li¡Push
);

724 
	`REDISMODULE_GET_API
(
Li¡Pİ
);

725 
	`REDISMODULE_GET_API
(
SŒšgToLÚgLÚg
);

726 
	`REDISMODULE_GET_API
(
SŒšgToDoubË
);

727 
	`REDISMODULE_GET_API
(
SŒšgToLÚgDoubË
);

728 
	`REDISMODULE_GET_API
(
C®l
);

729 
	`REDISMODULE_GET_API
(
C®lR•lyPrÙo
);

730 
	`REDISMODULE_GET_API
(
F»eC®lR•ly
);

731 
	`REDISMODULE_GET_API
(
C®lR•lyIÁeg”
);

732 
	`REDISMODULE_GET_API
(
C®lR•lyTy³
);

733 
	`REDISMODULE_GET_API
(
C®lR•lyL’gth
);

734 
	`REDISMODULE_GET_API
(
C®lR•lyA¼ayEËm’t
);

735 
	`REDISMODULE_GET_API
(
C®lR•lySŒšgPŒ
);

736 
	`REDISMODULE_GET_API
(
C»©eSŒšgFromC®lR•ly
);

737 
	`REDISMODULE_GET_API
(
C»©eSŒšg
);

738 
	`REDISMODULE_GET_API
(
C»©eSŒšgFromLÚgLÚg
);

739 
	`REDISMODULE_GET_API
(
C»©eSŒšgFromDoubË
);

740 
	`REDISMODULE_GET_API
(
C»©eSŒšgFromLÚgDoubË
);

741 
	`REDISMODULE_GET_API
(
C»©eSŒšgFromSŒšg
);

742 
	`REDISMODULE_GET_API
(
C»©eSŒšgPrštf
);

743 
	`REDISMODULE_GET_API
(
F»eSŒšg
);

744 
	`REDISMODULE_GET_API
(
SŒšgPŒL’
);

745 
	`REDISMODULE_GET_API
(
AutoMemÜy
);

746 
	`REDISMODULE_GET_API
(
R•liÿ‹
);

747 
	`REDISMODULE_GET_API
(
R•liÿ‹V”b©im
);

748 
	`REDISMODULE_GET_API
(
D–‘eKey
);

749 
	`REDISMODULE_GET_API
(
UÆškKey
);

750 
	`REDISMODULE_GET_API
(
SŒšgS‘
);

751 
	`REDISMODULE_GET_API
(
SŒšgDMA
);

752 
	`REDISMODULE_GET_API
(
SŒšgTrunÿ‹
);

753 
	`REDISMODULE_GET_API
(
G‘Expœe
);

754 
	`REDISMODULE_GET_API
(
S‘Expœe
);

755 
	`REDISMODULE_GET_API
(
Re£tD©a£t
);

756 
	`REDISMODULE_GET_API
(
DbSize
);

757 
	`REDISMODULE_GET_API
(
RªdomKey
);

758 
	`REDISMODULE_GET_API
(
Z£tAdd
);

759 
	`REDISMODULE_GET_API
(
Z£tInüby
);

760 
	`REDISMODULE_GET_API
(
Z£tScÜe
);

761 
	`REDISMODULE_GET_API
(
Z£tRem
);

762 
	`REDISMODULE_GET_API
(
Z£tRªgeStİ
);

763 
	`REDISMODULE_GET_API
(
Z£tFœ¡InScÜeRªge
);

764 
	`REDISMODULE_GET_API
(
Z£tLa¡InScÜeRªge
);

765 
	`REDISMODULE_GET_API
(
Z£tFœ¡InLexRªge
);

766 
	`REDISMODULE_GET_API
(
Z£tLa¡InLexRªge
);

767 
	`REDISMODULE_GET_API
(
Z£tRªgeCu¼’tEËm’t
);

768 
	`REDISMODULE_GET_API
(
Z£tRªgeNext
);

769 
	`REDISMODULE_GET_API
(
Z£tRªgeP»v
);

770 
	`REDISMODULE_GET_API
(
Z£tRªgeEndR—ched
);

771 
	`REDISMODULE_GET_API
(
HashS‘
);

772 
	`REDISMODULE_GET_API
(
HashG‘
);

773 
	`REDISMODULE_GET_API
(
IsKeysPos™iÚReque¡
);

774 
	`REDISMODULE_GET_API
(
KeyAtPos
);

775 
	`REDISMODULE_GET_API
(
G‘Cl›ÁId
);

776 
	`REDISMODULE_GET_API
(
G‘CÚ‹xtFÏgs
);

777 
	`REDISMODULE_GET_API
(
AvoidR•liÿT¿ffic
);

778 
	`REDISMODULE_GET_API
(
PoŞAÎoc
);

779 
	`REDISMODULE_GET_API
(
C»©eD©aTy³
);

780 
	`REDISMODULE_GET_API
(
ModuËTy³S‘V®ue
);

781 
	`REDISMODULE_GET_API
(
ModuËTy³R•ÏûV®ue
);

782 
	`REDISMODULE_GET_API
(
ModuËTy³G‘Ty³
);

783 
	`REDISMODULE_GET_API
(
ModuËTy³G‘V®ue
);

784 
	`REDISMODULE_GET_API
(
IsIOE¼Ü
);

785 
	`REDISMODULE_GET_API
(
S‘ModuËO±iÚs
);

786 
	`REDISMODULE_GET_API
(
SigÇlModif›dKey
);

787 
	`REDISMODULE_GET_API
(
SaveUnsigÃd
);

788 
	`REDISMODULE_GET_API
(
LßdUnsigÃd
);

789 
	`REDISMODULE_GET_API
(
SaveSigÃd
);

790 
	`REDISMODULE_GET_API
(
LßdSigÃd
);

791 
	`REDISMODULE_GET_API
(
SaveSŒšg
);

792 
	`REDISMODULE_GET_API
(
SaveSŒšgBufãr
);

793 
	`REDISMODULE_GET_API
(
LßdSŒšg
);

794 
	`REDISMODULE_GET_API
(
LßdSŒšgBufãr
);

795 
	`REDISMODULE_GET_API
(
SaveDoubË
);

796 
	`REDISMODULE_GET_API
(
LßdDoubË
);

797 
	`REDISMODULE_GET_API
(
SaveFlßt
);

798 
	`REDISMODULE_GET_API
(
LßdFlßt
);

799 
	`REDISMODULE_GET_API
(
SaveLÚgDoubË
);

800 
	`REDISMODULE_GET_API
(
LßdLÚgDoubË
);

801 
	`REDISMODULE_GET_API
(
SaveD©aTy³ToSŒšg
);

802 
	`REDISMODULE_GET_API
(
LßdD©aTy³FromSŒšg
);

803 
	`REDISMODULE_GET_API
(
Em™AOF
);

804 
	`REDISMODULE_GET_API
(
Log
);

805 
	`REDISMODULE_GET_API
(
LogIOE¼Ü
);

806 
	`REDISMODULE_GET_API
(
_As£¹
);

807 
	`REDISMODULE_GET_API
(
L©’cyAddSam¶e
);

808 
	`REDISMODULE_GET_API
(
SŒšgAµ’dBufãr
);

809 
	`REDISMODULE_GET_API
(
R‘ašSŒšg
);

810 
	`REDISMODULE_GET_API
(
SŒšgCom·»
);

811 
	`REDISMODULE_GET_API
(
G‘CÚ‹xtFromIO
);

812 
	`REDISMODULE_GET_API
(
G‘KeyNameFromIO
);

813 
	`REDISMODULE_GET_API
(
G‘KeyNameFromModuËKey
);

814 
	`REDISMODULE_GET_API
(
Mli£cÚds
);

815 
	`REDISMODULE_GET_API
(
Dige¡AddSŒšgBufãr
);

816 
	`REDISMODULE_GET_API
(
Dige¡AddLÚgLÚg
);

817 
	`REDISMODULE_GET_API
(
Dige¡EndSequ’û
);

818 
	`REDISMODULE_GET_API
(
C»©eDiù
);

819 
	`REDISMODULE_GET_API
(
F»eDiù
);

820 
	`REDISMODULE_GET_API
(
DiùSize
);

821 
	`REDISMODULE_GET_API
(
DiùS‘C
);

822 
	`REDISMODULE_GET_API
(
DiùR•ÏûC
);

823 
	`REDISMODULE_GET_API
(
DiùS‘
);

824 
	`REDISMODULE_GET_API
(
DiùR•Ïû
);

825 
	`REDISMODULE_GET_API
(
DiùG‘C
);

826 
	`REDISMODULE_GET_API
(
DiùG‘
);

827 
	`REDISMODULE_GET_API
(
DiùD–C
);

828 
	`REDISMODULE_GET_API
(
DiùD–
);

829 
	`REDISMODULE_GET_API
(
DiùI‹¿tÜS¹C
);

830 
	`REDISMODULE_GET_API
(
DiùI‹¿tÜS¹
);

831 
	`REDISMODULE_GET_API
(
DiùI‹¿tÜStİ
);

832 
	`REDISMODULE_GET_API
(
DiùI‹¿tÜRe£ekC
);

833 
	`REDISMODULE_GET_API
(
DiùI‹¿tÜRe£ek
);

834 
	`REDISMODULE_GET_API
(
DiùNextC
);

835 
	`REDISMODULE_GET_API
(
DiùP»vC
);

836 
	`REDISMODULE_GET_API
(
DiùNext
);

837 
	`REDISMODULE_GET_API
(
DiùP»v
);

838 
	`REDISMODULE_GET_API
(
DiùCom·»
);

839 
	`REDISMODULE_GET_API
(
DiùCom·»C
);

840 
	`REDISMODULE_GET_API
(
Regi¡”InfoFunc
);

841 
	`REDISMODULE_GET_API
(
InfoAddSeùiÚ
);

842 
	`REDISMODULE_GET_API
(
InfoBegšDiùF›ld
);

843 
	`REDISMODULE_GET_API
(
InfoEndDiùF›ld
);

844 
	`REDISMODULE_GET_API
(
InfoAddF›ldSŒšg
);

845 
	`REDISMODULE_GET_API
(
InfoAddF›ldCSŒšg
);

846 
	`REDISMODULE_GET_API
(
InfoAddF›ldDoubË
);

847 
	`REDISMODULE_GET_API
(
InfoAddF›ldLÚgLÚg
);

848 
	`REDISMODULE_GET_API
(
InfoAddF›ldULÚgLÚg
);

849 
	`REDISMODULE_GET_API
(
G‘S”v”Info
);

850 
	`REDISMODULE_GET_API
(
F»eS”v”Info
);

851 
	`REDISMODULE_GET_API
(
S”v”InfoG‘F›ld
);

852 
	`REDISMODULE_GET_API
(
S”v”InfoG‘F›ldC
);

853 
	`REDISMODULE_GET_API
(
S”v”InfoG‘F›ldSigÃd
);

854 
	`REDISMODULE_GET_API
(
S”v”InfoG‘F›ldUnsigÃd
);

855 
	`REDISMODULE_GET_API
(
S”v”InfoG‘F›ldDoubË
);

856 
	`REDISMODULE_GET_API
(
G‘Cl›ÁInfoById
);

857 
	`REDISMODULE_GET_API
(
PublishMes§ge
);

858 
	`REDISMODULE_GET_API
(
SubsüibeToS”v”Ev’t
);

859 
	`REDISMODULE_GET_API
(
S‘LRU
);

860 
	`REDISMODULE_GET_API
(
G‘LRU
);

861 
	`REDISMODULE_GET_API
(
S‘LFU
);

862 
	`REDISMODULE_GET_API
(
G‘LFU
);

863 
	`REDISMODULE_GET_API
(
BlockCl›ÁOnKeys
);

864 
	`REDISMODULE_GET_API
(
SigÇlKeyAsR—dy
);

865 
	`REDISMODULE_GET_API
(
G‘BlockedCl›ÁR—dyKey
);

866 
	`REDISMODULE_GET_API
(
SÿnCursÜC»©e
);

867 
	`REDISMODULE_GET_API
(
SÿnCursÜRe¡¬t
);

868 
	`REDISMODULE_GET_API
(
SÿnCursÜDe¡roy
);

869 
	`REDISMODULE_GET_API
(
Sÿn
);

870 
	`REDISMODULE_GET_API
(
SÿnKey
);

872 #ifdeà
REDISMODULE_EXPERIMENTAL_API


873 
	`REDISMODULE_GET_API
(
G‘Th»adSaãCÚ‹xt
);

874 
	`REDISMODULE_GET_API
(
F»eTh»adSaãCÚ‹xt
);

875 
	`REDISMODULE_GET_API
(
Th»adSaãCÚ‹xtLock
);

876 
	`REDISMODULE_GET_API
(
Th»adSaãCÚ‹xtUÆock
);

877 
	`REDISMODULE_GET_API
(
BlockCl›Á
);

878 
	`REDISMODULE_GET_API
(
UnblockCl›Á
);

879 
	`REDISMODULE_GET_API
(
IsBlockedR•lyReque¡
);

880 
	`REDISMODULE_GET_API
(
IsBlockedTimeoutReque¡
);

881 
	`REDISMODULE_GET_API
(
G‘BlockedCl›ÁPriv©eD©a
);

882 
	`REDISMODULE_GET_API
(
G‘BlockedCl›ÁHªdË
);

883 
	`REDISMODULE_GET_API
(
AbÜtBlock
);

884 
	`REDISMODULE_GET_API
(
S‘DiscÚÃùC®lback
);

885 
	`REDISMODULE_GET_API
(
SubsüibeToKey¥aûEv’ts
);

886 
	`REDISMODULE_GET_API
(
NÙifyKey¥aûEv’t
);

887 
	`REDISMODULE_GET_API
(
G‘NÙifyKey¥aûEv’ts
);

888 
	`REDISMODULE_GET_API
(
BlockedCl›ÁDiscÚÃùed
);

889 
	`REDISMODULE_GET_API
(
Regi¡”Clu¡”Mes§geReûiv”
);

890 
	`REDISMODULE_GET_API
(
S’dClu¡”Mes§ge
);

891 
	`REDISMODULE_GET_API
(
G‘Clu¡”NodeInfo
);

892 
	`REDISMODULE_GET_API
(
G‘Clu¡”NodesLi¡
);

893 
	`REDISMODULE_GET_API
(
F»eClu¡”NodesLi¡
);

894 
	`REDISMODULE_GET_API
(
C»©eTim”
);

895 
	`REDISMODULE_GET_API
(
StİTim”
);

896 
	`REDISMODULE_GET_API
(
G‘Tim”Info
);

897 
	`REDISMODULE_GET_API
(
G‘MyClu¡”ID
);

898 
	`REDISMODULE_GET_API
(
G‘Clu¡”Size
);

899 
	`REDISMODULE_GET_API
(
G‘RªdomBy‹s
);

900 
	`REDISMODULE_GET_API
(
G‘RªdomHexCh¬s
);

901 
	`REDISMODULE_GET_API
(
S‘Clu¡”FÏgs
);

902 
	`REDISMODULE_GET_API
(
ExpÜtSh¬edAPI
);

903 
	`REDISMODULE_GET_API
(
G‘Sh¬edAPI
);

904 
	`REDISMODULE_GET_API
(
Regi¡”CommªdF‹r
);

905 
	`REDISMODULE_GET_API
(
UÄegi¡”CommªdF‹r
);

906 
	`REDISMODULE_GET_API
(
CommªdF‹rArgsCouÁ
);

907 
	`REDISMODULE_GET_API
(
CommªdF‹rArgG‘
);

908 
	`REDISMODULE_GET_API
(
CommªdF‹rArgIn£¹
);

909 
	`REDISMODULE_GET_API
(
CommªdF‹rArgR•Ïû
);

910 
	`REDISMODULE_GET_API
(
CommªdF‹rArgD–‘e
);

911 
	`REDISMODULE_GET_API
(
FÜk
);

912 
	`REDISMODULE_GET_API
(
Ex™FromChd
);

913 
	`REDISMODULE_GET_API
(
KlFÜkChd
);

914 
	`REDISMODULE_GET_API
(
G‘U£dMemÜyR©io
);

915 
	`REDISMODULE_GET_API
(
M®locSize
);

916 
	`REDISMODULE_GET_API
(
C»©eModuËU£r
);

917 
	`REDISMODULE_GET_API
(
F»eModuËU£r
);

918 
	`REDISMODULE_GET_API
(
S‘ModuËU£rACL
);

919 
	`REDISMODULE_GET_API
(
D—uth’tiÿ‹AndClo£Cl›Á
);

920 
	`REDISMODULE_GET_API
(
Auth’tiÿ‹Cl›ÁW™hACLU£r
);

921 
	`REDISMODULE_GET_API
(
Auth’tiÿ‹Cl›ÁW™hU£r
);

924 ià(
RedisModuË_IsModuËNameBusy
 && 
	`RedisModuË_IsModuËNameBusy
(
Çme
)è 
REDISMODULE_ERR
;

925 
	`RedisModuË_S‘ModuËA‰ribs
(
ùx
,
Çme
,
v”
,
­iv”
);

926  
REDISMODULE_OK
;

927 
	}
}

929 
	#RedisModuË_As£¹
(
_e
è((_e)?()0 : (
	`RedisModuË__As£¹
(#_e,
__FILE__
,
__LINE__
),
	`ex™
(1)))

	)

935 
	#RedisModuËSŒšg
 
robj


	)

	@release.c

34 
	~<¡ršg.h
>

35 
	~<¡dio.h
>

37 
	~"»Ëa£.h
"

38 
	~"v”siÚ.h
"

39 
	~"üc64.h
"

41 *
	$»disG™SHA1
() {

42  
REDIS_GIT_SHA1
;

43 
	}
}

45 *
	$»disG™Dœty
() {

46  
REDIS_GIT_DIRTY
;

47 
	}
}

49 
ušt64_t
 
	$»disBudId
() {

50 *
budid
 = 
REDIS_VERSION
 
REDIS_BUILD_ID
 
REDIS_GIT_DIRTY
 
REDIS_GIT_SHA1
;

52  
	`üc64
(0,(*)
budid
,
	`¡¾’
(buildid));

53 
	}
}

58 *
	$»disBudIdSŒšg
() {

59 
buf
[32];

60 
ÿched
 = 0;

61 ià(!
ÿched
) {

62 
	`¢´štf
(
buf
,(buf),"%Îx",(è
	`»disBudId
());

63 
ÿched
 = 1;

65  
buf
;

66 
	}
}

	@release.h

1 
	#REDIS_GIT_SHA1
 "5ç6f9eb"

	)

2 
	#REDIS_GIT_DIRTY
 "0"

	)

3 
	#REDIS_BUILD_ID
 "n227-016-053-1589007267"

	)

	@replication.c

32 
	~"£rv”.h
"

33 
	~"şu¡”.h
"

34 
	~"bio.h
"

36 
	~<sys/time.h
>

37 
	~<uni¡d.h
>

38 
	~<fú.h
>

39 
	~<sys/sock‘.h
>

40 
	~<sys/¡©.h
>

42 
adju¡M—nšgfulR•lOff£t
();

43 
»¶iÿtiÚDisÿrdCachedMa¡”
();

44 
»¶iÿtiÚResu¼eùCachedMa¡”
(
cÚÃùiÚ
 *
cÚn
);

45 
»¶iÿtiÚS’dAck
();

46 
putSÏveOÆše
(
ş›Á
 *
¦ave
);

47 
ÿnûlR•liÿtiÚHªdshake
();

52 
	gRDBG’”©edByR•liÿtiÚ
 = 0;

60 *
	$»¶iÿtiÚG‘SÏveName
(
ş›Á
 *
c
) {

61 
buf
[
NET_PEER_ID_LEN
];

62 

[
NET_IP_STR_LEN
];

64 

[0] = '\0';

65 
buf
[0] = '\0';

66 ià(
c
->
¦ave_
[0] != '\0' ||

67 
	`cÚnP“rToSŒšg
(
c
->
cÚn
,

,(),
NULL
) != -1)

70 ià(
c
->
¦ave_
[0] !ğ'\0'è
	`memıy
(

,c->slave_ip,(c->slave_ip));

72 ià(
c
->
¦ave_li¡’šg_pÜt
)

73 
	`ª‘FÜm©Addr
(
buf
,(buf),

,
c
->
¦ave_li¡’šg_pÜt
);

75 
	`¢´štf
(
buf
,(buf),"%s:<unknown-»¶iÿ-pÜt>",

);

77 
	`¢´štf
(
buf
,(buf),"client id #%llu",

78 (è
c
->
id
);

80  
buf
;

81 
	}
}

89 
	$bg_uÆšk
(cÚ¡ *
f’ame
) {

90 
fd
 = 
	`İ’
(
f’ame
,
O_RDONLY
|
O_NONBLOCK
);

91 ià(
fd
 == -1) {

93  
	`uÆšk
(
f’ame
);

97 
»tv®
 = 
	`uÆšk
(
f’ame
);

98 ià(
»tv®
 == -1) {

101 
Şd_”ºo
 = 
”ºo
;

102 
	`şo£
(
fd
);

103 
”ºo
 = 
Şd_”ºo
;

106 
	`bioC»©eBackgroundJob
(
BIO_CLOSE_FILE
,(*)()
fd
,
NULL
,NULL);

109 
	}
}

113 
	$ü—‹R•liÿtiÚBacklog
() {

114 
	`£rv”As£¹
(
£rv”
.
»¶_backlog
 =ğ
NULL
);

115 
£rv”
.
»¶_backlog
 = 
	`zm®loc
(£rv”.
»¶_backlog_size
);

116 
£rv”
.
»¶_backlog_hi¡Ën
 = 0;

117 
£rv”
.
»¶_backlog_idx
 = 0;

122 
£rv”
.
»¶_backlog_off
 = s”v”.
ma¡”_»¶_off£t
+1;

123 
	}
}

131 
	$»sizeR•liÿtiÚBacklog
(
Ãwsize
) {

132 ià(
Ãwsize
 < 
CONFIG_REPL_BACKLOG_MIN_SIZE
)

133 
Ãwsize
 = 
CONFIG_REPL_BACKLOG_MIN_SIZE
;

134 ià(
£rv”
.
»¶_backlog_size
 =ğ
Ãwsize
) ;

136 
£rv”
.
»¶_backlog_size
 = 
Ãwsize
;

137 ià(
£rv”
.
»¶_backlog
 !ğ
NULL
) {

143 
	`zä“
(
£rv”
.
»¶_backlog
);

144 
£rv”
.
»¶_backlog
 = 
	`zm®loc
(£rv”.
»¶_backlog_size
);

145 
£rv”
.
»¶_backlog_hi¡Ën
 = 0;

146 
£rv”
.
»¶_backlog_idx
 = 0;

148 
£rv”
.
»¶_backlog_off
 = s”v”.
ma¡”_»¶_off£t
+1;

150 
	}
}

152 
	$ä“R•liÿtiÚBacklog
() {

153 
	`£rv”As£¹
(
	`li¡L’gth
(
£rv”
.
¦aves
) == 0);

154 
	`zä“
(
£rv”
.
»¶_backlog
);

155 
£rv”
.
»¶_backlog
 = 
NULL
;

156 
	}
}

162 
	$ãedR•liÿtiÚBacklog
(*
±r
, 
size_t
 
Ën
) {

163 *
p
 = 
±r
;

165 
£rv”
.
ma¡”_»¶_off£t
 +ğ
Ën
;

166 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = s”v”.
ma¡”_»¶_off£t
;

170 
Ën
) {

171 
size_t
 
thi¦’
 = 
£rv”
.
»¶_backlog_size
 - s”v”.
»¶_backlog_idx
;

172 ià(
thi¦’
 > 
Ën
)hislen =†en;

173 
	`memıy
(
£rv”
.
»¶_backlog
+£rv”.
»¶_backlog_idx
,
p
,
thi¦’
);

174 
£rv”
.
»¶_backlog_idx
 +ğ
thi¦’
;

175 ià(
£rv”
.
»¶_backlog_idx
 =ğ£rv”.
»¶_backlog_size
)

176 
£rv”
.
»¶_backlog_idx
 = 0;

177 
Ën
 -ğ
thi¦’
;

178 
p
 +ğ
thi¦’
;

179 
£rv”
.
»¶_backlog_hi¡Ën
 +ğ
thi¦’
;

181 ià(
£rv”
.
»¶_backlog_hi¡Ën
 > s”v”.
»¶_backlog_size
)

182 
£rv”
.
»¶_backlog_hi¡Ën
 = s”v”.
»¶_backlog_size
;

184 
£rv”
.
»¶_backlog_off
 = s”v”.
ma¡”_»¶_off£t
 -

185 
£rv”
.
»¶_backlog_hi¡Ën
 + 1;

186 
	}
}

190 
	$ãedR•liÿtiÚBacklogW™hObjeù
(
robj
 *
o
) {

191 
Î¡r
[
LONG_STR_SIZE
];

192 *
p
;

193 
size_t
 
Ën
;

195 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

196 
Ën
 = 
	`Î2¡ršg
(
Î¡r
,Öl¡r),()
o
->
±r
);

197 
p
 = 
Î¡r
;

199 
Ën
 = 
	`sd¦’
(
o
->
±r
);

200 
p
 = 
o
->
±r
;

202 
	`ãedR•liÿtiÚBacklog
(
p
,
Ën
);

203 
	}
}

210 
	$»¶iÿtiÚF“dSÏves
(
li¡
 *
¦aves
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
) {

211 
li¡Node
 *
Ê
;

212 
li¡I‹r
 
li
;

213 
j
, 
Ën
;

214 
Î¡r
[
LONG_STR_SIZE
];

221 ià(
£rv”
.
ma¡”ho¡
 !ğ
NULL
) ;

225 ià(
£rv”
.
»¶_backlog
 =ğ
NULL
 && 
	`li¡L’gth
(
¦aves
) == 0) ;

228 
	`£rv”As£¹
(!(
	`li¡L’gth
(
¦aves
è!ğ0 && 
£rv”
.
»¶_backlog
 =ğ
NULL
));

231 ià(
£rv”
.
¦ave£ldb
 !ğ
diùid
) {

232 
robj
 *
£Ëùcmd
;

235 ià(
diùid
 >ğ0 && diùid < 
PROTO_SHARED_SELECT_CMDS
) {

236 
£Ëùcmd
 = 
sh¬ed
.
£Ëù
[
diùid
];

238 
diùid_Ën
;

240 
diùid_Ën
 = 
	`Î2¡ršg
(
Î¡r
,Öl¡r),
diùid
);

241 
£Ëùcmd
 = 
	`ü—‹Objeù
(
OBJ_STRING
,

242 
	`sdsÿrštf
(
	`sd£m±y
(),

244 
diùid_Ën
, 
Î¡r
));

248 ià(
£rv”
.
»¶_backlog
è
	`ãedR•liÿtiÚBacklogW™hObjeù
(
£Ëùcmd
);

251 
	`li¡Rewšd
(
¦aves
,&
li
);

252 (
Ê
 = 
	`li¡Next
(&
li
))) {

253 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

254 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) ;

255 
	`addR•ly
(
¦ave
,
£Ëùcmd
);

258 ià(
diùid
 < 0 || diùid >ğ
PROTO_SHARED_SELECT_CMDS
)

259 
	`deüRefCouÁ
(
£Ëùcmd
);

261 
£rv”
.
¦ave£ldb
 = 
diùid
;

264 ià(
£rv”
.
»¶_backlog
) {

265 
aux
[
LONG_STR_SIZE
+3];

268 
aux
[0] = '*';

269 
Ën
 = 
	`Î2¡ršg
(
aux
+1,×ux)-1,
¬gc
);

270 
aux
[
Ën
+1] = '\r';

271 
aux
[
Ën
+2] = '\n';

272 
	`ãedR•liÿtiÚBacklog
(
aux
,
Ën
+3);

274 
j
 = 0; j < 
¬gc
; j++) {

275 
objËn
 = 
	`¡ršgObjeùL’
(
¬gv
[
j
]);

280 
aux
[0] = '$';

281 
Ën
 = 
	`Î2¡ršg
(
aux
+1,×ux)-1,
objËn
);

282 
aux
[
Ën
+1] = '\r';

283 
aux
[
Ën
+2] = '\n';

284 
	`ãedR•liÿtiÚBacklog
(
aux
,
Ën
+3);

285 
	`ãedR•liÿtiÚBacklogW™hObjeù
(
¬gv
[
j
]);

286 
	`ãedR•liÿtiÚBacklog
(
aux
+
Ën
+1,2);

291 
	`li¡Rewšd
(
¦aves
,&
li
);

292 (
Ê
 = 
	`li¡Next
(&
li
))) {

293 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

296 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) ;

303 
	`addR•lyA¼ayL’
(
¦ave
,
¬gc
);

307 
j
 = 0; j < 
¬gc
; j++)

308 
	`addR•lyBulk
(
¦ave
,
¬gv
[
j
]);

310 
	}
}

314 
	~<ùy³.h
>

315 
	$»¶iÿtiÚF“dSÏvesFromMa¡”SŒ—m
(
li¡
 *
¦aves
, *
buf
, 
size_t
 
buæ’
) {

316 
li¡Node
 *
Ê
;

317 
li¡I‹r
 
li
;

322 
	`´štf
("%zu:",
buæ’
);

323 
size_t
 
j
 = 0; j < 
buæ’
; j++) {

324 
	`´štf
("%c", 
	`i¥ršt
(
buf
[
j
]) ? buf[j] : '.');

326 
	`´štf
("\n");

329 ià(
£rv”
.
»¶_backlog
è
	`ãedR•liÿtiÚBacklog
(
buf
,
buæ’
);

330 
	`li¡Rewšd
(
¦aves
,&
li
);

331 (
Ê
 = 
	`li¡Next
(&
li
))) {

332 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

335 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) ;

336 
	`addR•lyPrÙo
(
¦ave
,
buf
,
buæ’
);

338 
	}
}

340 
	$»¶iÿtiÚF“dMÚ™Üs
(
ş›Á
 *
c
, 
li¡
 *
mÚ™Üs
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
) {

341 
li¡Node
 *
Ê
;

342 
li¡I‹r
 
li
;

343 
j
;

344 
sds
 
cmd»´
 = 
	`sd¢ew
("+");

345 
robj
 *
cmdobj
;

346 
timev®
 
tv
;

348 
	`g‘timeofday
(&
tv
,
NULL
);

349 
cmd»´
 = 
	`sdsÿrštf
(cmd»´,"%ld.%06ld ",()
tv
.
tv_£c
,(év.
tv_u£c
);

350 ià(
c
->
æags
 & 
CLIENT_LUA
) {

351 
cmd»´
 = 
	`sdsÿrštf
(cmd»´,"[%d†ua] ",
diùid
);

352 } ià(
c
->
æags
 & 
CLIENT_UNIX_SOCKET
) {

353 
cmd»´
 = 
	`sdsÿrštf
(cmd»´,"[%d unix:%s] ",
diùid
,
£rv”
.
unixsock‘
);

355 
cmd»´
 = 
	`sdsÿrštf
(cmd»´,"[%d %s] ",
diùid
,
	`g‘Cl›ÁP“rId
(
c
));

358 
j
 = 0; j < 
¬gc
; j++) {

359 ià(
¬gv
[
j
]->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

360 
cmd»´
 = 
	`sdsÿrštf
(cmd»´, "\"%ld\"", ()
¬gv
[
j
]->
±r
);

362 
cmd»´
 = 
	`sdsÿŒ•r
(cmd»´,(*)
¬gv
[
j
]->
±r
,

363 
	`sd¦’
(
¬gv
[
j
]->
±r
));

365 ià(
j
 !ğ
¬gc
-1)

366 
cmd»´
 = 
	`sdsÿ’
(cmdrepr," ",1);

368 
cmd»´
 = 
	`sdsÿ’
(cmdrepr,"\r\n",2);

369 
cmdobj
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
cmd»´
);

371 
	`li¡Rewšd
(
mÚ™Üs
,&
li
);

372 (
Ê
 = 
	`li¡Next
(&
li
))) {

373 
ş›Á
 *
mÚ™Ü
 = 
Ê
->
v®ue
;

374 
	`addR•ly
(
mÚ™Ü
,
cmdobj
);

376 
	`deüRefCouÁ
(
cmdobj
);

377 
	}
}

381 
	$addR•lyR•liÿtiÚBacklog
(
ş›Á
 *
c
, 
off£t
) {

382 
j
, 
sk
, 
Ën
;

384 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] R•liÿ„eque¡ off£t: %Îd", 
off£t
);

386 ià(
£rv”
.
»¶_backlog_hi¡Ën
 == 0) {

387 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] Backlog history†en is zero");

391 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] Backlog size: %lld",

392 
£rv”
.
»¶_backlog_size
);

393 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] First byte: %lld",

394 
£rv”
.
»¶_backlog_off
);

395 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] History†en: %lld",

396 
£rv”
.
»¶_backlog_hi¡Ën
);

397 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] Current index: %lld",

398 
£rv”
.
»¶_backlog_idx
);

401 
sk
 = 
off£t
 - 
£rv”
.
»¶_backlog_off
;

402 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] Skpšg: %Îd", 
sk
);

406 
j
 = (
£rv”
.
»¶_backlog_idx
 +

407 (
£rv”
.
»¶_backlog_size
-£rv”.
»¶_backlog_hi¡Ën
)) %

408 
£rv”
.
»¶_backlog_size
;

409 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] Index oàfœ¡ by‹: %Îd", 
j
);

412 
j
 = (j + 
sk
è% 
£rv”
.
»¶_backlog_size
;

416 
Ën
 = 
£rv”
.
»¶_backlog_hi¡Ën
 - 
sk
;

417 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC] R•lyÙ®†’gth: %Îd", 
Ën
);

418 
Ën
) {

419 
thi¦’
 =

420 ((
£rv”
.
»¶_backlog_size
 - 
j
è< 
Ën
) ?

421 (
£rv”
.
»¶_backlog_size
 - 
j
è: 
Ën
;

423 
	`£rv”Log
(
LL_DEBUG
, "[PSYNC]‡ddR•ly(èËngth: %Îd", 
thi¦’
);

424 
	`addR•lySds
(
c
,
	`sd¢ewËn
(
£rv”
.
»¶_backlog
 + 
j
, 
thi¦’
));

425 
Ën
 -ğ
thi¦’
;

426 
j
 = 0;

428  
£rv”
.
»¶_backlog_hi¡Ën
 - 
sk
;

429 
	}
}

435 
	$g‘PsyncIn™ŸlOff£t
() {

436  
£rv”
.
ma¡”_»¶_off£t
;

437 
	}
}

455 
	$»¶iÿtiÚS‘upSÏveFÜFuÎResync
(
ş›Á
 *
¦ave
, 
off£t
) {

456 
buf
[128];

457 
buæ’
;

459 
¦ave
->
psync_š™Ÿl_off£t
 = 
off£t
;

460 
¦ave
->
»¶¡©e
 = 
SLAVE_STATE_WAIT_BGSAVE_END
;

464 
£rv”
.
¦ave£ldb
 = -1;

468 ià(!(
¦ave
->
æags
 & 
CLIENT_PRE_PSYNC
)) {

469 
buæ’
 = 
	`¢´štf
(
buf
,(buf),"+FULLRESYNC %s %lld\r\n",

470 
£rv”
.
»¶id
,
off£t
);

471 ià(
	`cÚnWr™e
(
¦ave
->
cÚn
,
buf
,
buæ’
) != buflen) {

472 
	`ä“Cl›ÁAsync
(
¦ave
);

473  
C_ERR
;

476  
C_OK
;

477 
	}
}

484 
	$ma¡”TryP¬tŸlResynchrÚiz©iÚ
(
ş›Á
 *
c
) {

485 
psync_off£t
, 
psync_Ën
;

486 *
ma¡”_»¶id
 = 
c
->
¬gv
[1]->
±r
;

487 
buf
[128];

488 
buæ’
;

493 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
psync_off£t
,
NULL
) !=

494 
C_OK
è
Ãed_fuÎ_»sync
;

502 ià(
	`¡rÿ£cmp
(
ma¡”_»¶id
, 
£rv”
.
»¶id
) &&

503 (
	`¡rÿ£cmp
(
ma¡”_»¶id
, 
£rv”
.
»¶id2
) ||

504 
psync_off£t
 > 
£rv”
.
£cÚd_»¶id_off£t
))

507 ià(
ma¡”_»¶id
[0] != '?') {

508 ià(
	`¡rÿ£cmp
(
ma¡”_»¶id
, 
£rv”
.
»¶id
) &&

509 
	`¡rÿ£cmp
(
ma¡”_»¶id
, 
£rv”
.
»¶id2
))

511 
	`£rv”Log
(
LL_NOTICE
,"Partial„esynchronization‚ot‡ccepted: "

514 
ma¡”_»¶id
, 
£rv”
.
»¶id
, s”v”.
»¶id2
);

516 
	`£rv”Log
(
LL_NOTICE
,"Partial„esynchronization‚ot‡ccepted: "

518 "u°tØ%Îd", 
psync_off£t
, 
£rv”
.
£cÚd_»¶id_off£t
);

521 
	`£rv”Log
(
LL_NOTICE
,"Full„esync„equested by„eplica %s",

522 
	`»¶iÿtiÚG‘SÏveName
(
c
));

524 
Ãed_fuÎ_»sync
;

528 ià(!
£rv”
.
»¶_backlog
 ||

529 
psync_off£t
 < 
£rv”
.
»¶_backlog_off
 ||

530 
psync_off£t
 > (
£rv”
.
»¶_backlog_off
 + s”v”.
»¶_backlog_hi¡Ën
))

532 
	`£rv”Log
(
LL_NOTICE
,

533 "UÇbËØ·¹ŸÈ»synøw™h„•liÿ % fÜ†ack oàbacklog (R•liÿ„eque¡ was: %Îd).", 
	`»¶iÿtiÚG‘SÏveName
(
c
), 
psync_off£t
);

534 ià(
psync_off£t
 > 
£rv”
.
ma¡”_»¶_off£t
) {

535 
	`£rv”Log
(
LL_WARNING
,

536 "W¬nšg:„•liÿ % Œ›dØPSYNC w™h‡Àoff£ˆth© i g»©”hªhma¡”„•liÿtiÚ off£t.", 
	`»¶iÿtiÚG‘SÏveName
(
c
));

538 
Ãed_fuÎ_»sync
;

545 
c
->
æags
 |ğ
CLIENT_SLAVE
;

546 
c
->
»¶¡©e
 = 
SLAVE_STATE_ONLINE
;

547 
c
->
»¶_ack_time
 = 
£rv”
.
unixtime
;

548 
c
->
»¶_put_Úlše_Ú_ack
 = 0;

549 
	`li¡AddNodeTa
(
£rv”
.
¦aves
,
c
);

553 ià(
c
->
¦ave_ÿ·
 & 
SLAVE_CAPA_PSYNC2
) {

554 
buæ’
 = 
	`¢´štf
(
buf
,(buf),"+CONTINUE %s\r\n", 
£rv”
.
»¶id
);

556 
buæ’
 = 
	`¢´štf
(
buf
,(buf),"+CONTINUE\r\n");

558 ià(
	`cÚnWr™e
(
c
->
cÚn
,
buf
,
buæ’
) != buflen) {

559 
	`ä“Cl›ÁAsync
(
c
);

560  
C_OK
;

562 
psync_Ën
 = 
	`addR•lyR•liÿtiÚBacklog
(
c
,
psync_off£t
);

563 
	`£rv”Log
(
LL_NOTICE
,

565 
	`»¶iÿtiÚG‘SÏveName
(
c
),

566 
psync_Ën
, 
psync_off£t
);

571 
	`»äeshGoodSÏvesCouÁ
();

574 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_REPLICA_CHANGE
,

575 
REDISMODULE_SUBEVENT_REPLICA_CHANGE_ONLINE
,

576 
NULL
);

578  
C_OK
;

580 
Ãed_fuÎ_»sync
:

585  
C_ERR
;

586 
	}
}

606 
	$¡¬tBg§veFÜR•liÿtiÚ
(
mšÿ·
) {

607 
»tv®
;

608 
sock‘_rg‘
 = 
£rv”
.
»¶_diskËss_sync
 && (
mšÿ·
 & 
SLAVE_CAPA_EOF
);

609 
li¡I‹r
 
li
;

610 
li¡Node
 *
Ê
;

612 
	`£rv”Log
(
LL_NOTICE
,"Starting BGSAVE for SYNC witharget: %s",

613 
sock‘_rg‘
 ? "replicas sockets" : "disk");

615 
rdbSaveInfo
 
rsi
, *
rsŒ
;

616 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

619 ià(
rsŒ
) {

620 ià(
sock‘_rg‘
)

621 
»tv®
 = 
	`rdbSaveToSÏvesSock‘s
(
rsŒ
);

623 
»tv®
 = 
	`rdbSaveBackground
(
£rv”
.
rdb_f’ame
,
rsŒ
);

625 
	`£rv”Log
(
LL_WARNING
,"BGSAVE for„eplication:„eplication information‚ot‡vailable, can't generatehe RDB file„ight‚ow. Try†ater.");

626 
»tv®
 = 
C_ERR
;

634 ià(
»tv®
 =ğ
C_OK
 && !
sock‘_rg‘
 && 
£rv”
.
rdb_d–_sync_fes
)

635 
RDBG’”©edByR•liÿtiÚ
 = 1;

640 ià(
»tv®
 =ğ
C_ERR
) {

641 
	`£rv”Log
(
LL_WARNING
,"BGSAVE for„eplication failed");

642 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

643 (
Ê
 = 
	`li¡Next
(&
li
))) {

644 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

646 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) {

647 
¦ave
->
»¶¡©e
 = 
REPL_STATE_NONE
;

648 
¦ave
->
æags
 &ğ~
CLIENT_SLAVE
;

649 
	`li¡D–Node
(
£rv”
.
¦aves
,
Ê
);

650 
	`addR•lyE¼Ü
(
¦ave
,

652 
¦ave
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

655  
»tv®
;

660 ià(!
sock‘_rg‘
) {

661 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

662 (
Ê
 = 
	`li¡Next
(&
li
))) {

663 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

665 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) {

666 
	`»¶iÿtiÚS‘upSÏveFÜFuÎResync
(
¦ave
,

667 
	`g‘PsyncIn™ŸlOff£t
());

674 ià(
»tv®
 =ğ
C_OK
è
	`»¶iÿtiÚSütCacheFlush
();

675  
»tv®
;

676 
	}
}

679 
	$syncCommªd
(
ş›Á
 *
c
) {

681 ià(
c
->
æags
 & 
CLIENT_SLAVE
) ;

685 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¡©e
 !ğ
REPL_STATE_CONNECTED
) {

686 
	`addR•lySds
(
c
,
	`sd¢ew
("-NOMASTERLINK Can't SYNC while‚ot connected with my master\r\n"));

694 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
)) {

695 
	`addR•lyE¼Ü
(
c
,"SYNC‡nd PSYNC‡re invalid with…ending output");

699 
	`£rv”Log
(
LL_NOTICE
,"Replica %s‡sks for synchronization",

700 
	`»¶iÿtiÚG‘SÏveName
(
c
));

711 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[0]->
±r
,"psync")) {

712 ià(
	`ma¡”TryP¬tŸlResynchrÚiz©iÚ
(
c
è=ğ
C_OK
) {

713 
£rv”
.
¡©_sync_·¹Ÿl_ok
++;

716 *
ma¡”_»¶id
 = 
c
->
¬gv
[1]->
±r
;

722 ià(
ma¡”_»¶id
[0] !ğ'?'è
£rv”
.
¡©_sync_·¹Ÿl_”r
++;

728 
c
->
æags
 |ğ
CLIENT_PRE_PSYNC
;

732 
£rv”
.
¡©_sync_fuÎ
++;

736 
c
->
»¶¡©e
 = 
SLAVE_STATE_WAIT_BGSAVE_START
;

737 ià(
£rv”
.
»¶_di§bË_tı_nod–ay
)

738 
	`cÚnDi§bËTıNoD–ay
(
c
->
cÚn
);

739 
c
->
»¶dbfd
 = -1;

740 
c
->
æags
 |ğ
CLIENT_SLAVE
;

741 
	`li¡AddNodeTa
(
£rv”
.
¦aves
,
c
);

744 ià(
	`li¡L’gth
(
£rv”
.
¦aves
è=ğ1 && s”v”.
»¶_backlog
 =ğ
NULL
) {

748 
	`chªgeR•liÿtiÚId
();

749 
	`ş—rR•liÿtiÚId2
();

750 
	`ü—‹R•liÿtiÚBacklog
();

754 ià(
£rv”
.
rdb_chd_pid
 != -1 &&

755 
£rv”
.
rdb_chd_ty³
 =ğ
RDB_CHILD_TYPE_DISK
)

760 
ş›Á
 *
¦ave
;

761 
li¡Node
 *
Ê
;

762 
li¡I‹r
 
li
;

764 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

765 (
Ê
 = 
	`li¡Next
(&
li
))) {

766 
¦ave
 = 
Ê
->
v®ue
;

767 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
) ;

771 ià(
Ê
 && ((
c
->
¦ave_ÿ·
 & 
¦ave
->slave_capa) == slave->slave_capa)) {

774 
	`cİyCl›ÁOuutBufãr
(
c
,
¦ave
);

775 
	`»¶iÿtiÚS‘upSÏveFÜFuÎResync
(
c
,
¦ave
->
psync_š™Ÿl_off£t
);

776 
	`£rv”Log
(
LL_NOTICE
,"Waiting forƒnd of BGSAVE for SYNC");

780 
	`£rv”Log
(
LL_NOTICE
,"Can't‡ttachhe„eplicaohe current BGSAVE. Waiting for‚ext BGSAVE for SYNC");

784 } ià(
£rv”
.
rdb_chd_pid
 != -1 &&

785 
£rv”
.
rdb_chd_ty³
 =ğ
RDB_CHILD_TYPE_SOCKET
)

790 
	`£rv”Log
(
LL_NOTICE
,"Current BGSAVE has socketarget. Waiting for‚ext BGSAVE for SYNC");

794 ià(
£rv”
.
»¶_diskËss_sync
 && (
c
->
¦ave_ÿ·
 & 
SLAVE_CAPA_EOF
)) {

798 ià(
£rv”
.
»¶_diskËss_sync_d–ay
)

799 
	`£rv”Log
(
LL_NOTICE
,"Delay‚ext BGSAVE for diskless SYNC");

804 ià(!
	`hasAùiveChdProûss
()) {

805 
	`¡¬tBg§veFÜR•liÿtiÚ
(
c
->
¦ave_ÿ·
);

807 
	`£rv”Log
(
LL_NOTICE
,

814 
	}
}

828 
	$»¶cÚfCommªd
(
ş›Á
 *
c
) {

829 
j
;

831 ià((
c
->
¬gc
 % 2) == 0) {

834 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

839 
j
 = 1; j < 
c
->
¬gc
; j+=2) {

840 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"listening-port")) {

841 
pÜt
;

843 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],

844 &
pÜt
,
NULL
è!ğ
C_OK
))

846 
c
->
¦ave_li¡’šg_pÜt
 = 
pÜt
;

847 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"ip-address")) {

848 
sds
 

 = 
c
->
¬gv
[
j
+1]->
±r
;

849 ià(
	`sd¦’
(

è< (
c
->
¦ave_
)) {

850 
	`memıy
(
c
->
¦ave_
,

,
	`sd¦’
(ip)+1);

852 
	`addR•lyE¼ÜFÜm©
(
c
,"REPLCONF ip-address…rovided by "

853 "»¶iÿ in¡ªû i toØlÚg: %zd by‹s", 
	`sd¦’
(

));

856 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"capa")) {

858 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
+1]->
±r
,"eof"))

859 
c
->
¦ave_ÿ·
 |ğ
SLAVE_CAPA_EOF
;

860 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
+1]->
±r
,"psync2"))

861 
c
->
¦ave_ÿ·
 |ğ
SLAVE_CAPA_PSYNC2
;

862 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"ack")) {

866 
off£t
;

868 ià(!(
c
->
æags
 & 
CLIENT_SLAVE
)) ;

869 ià((
	`g‘LÚgLÚgFromObjeù
(
c
->
¬gv
[
j
+1], &
off£t
è!ğ
C_OK
))

871 ià(
off£t
 > 
c
->
»¶_ack_off
)

872 
c
->
»¶_ack_off
 = 
off£t
;

873 
c
->
»¶_ack_time
 = 
£rv”
.
unixtime
;

879 ià(
c
->
»¶_put_Úlše_Ú_ack
 && c->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
)

880 
	`putSÏveOÆše
(
c
);

883 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"getack")) {

886 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
ma¡”
è
	`»¶iÿtiÚS’dAck
();

889 
	`addR•lyE¼ÜFÜm©
(
c
,"Unrecognized REPLCONF option: %s",

890 (*)
c
->
¬gv
[
j
]->
±r
);

894 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

895 
	}
}

911 
	$putSÏveOÆše
(
ş›Á
 *
¦ave
) {

912 
¦ave
->
»¶¡©e
 = 
SLAVE_STATE_ONLINE
;

913 
¦ave
->
»¶_put_Úlše_Ú_ack
 = 0;

914 
¦ave
->
»¶_ack_time
 = 
£rv”
.
unixtime
;

915 ià(
	`cÚnS‘Wr™eHªdËr
(
¦ave
->
cÚn
, 
£ndR•lyToCl›Á
è=ğ
C_ERR
) {

916 
	`£rv”Log
(
LL_WARNING
,"UÇbËØ»gi¡” wr™abËƒv’ˆfÜ„•liÿ bulk¿nsãr: %s", 
	`¡»¼Ü
(
”ºo
));

917 
	`ä“Cl›Á
(
¦ave
);

920 
	`»äeshGoodSÏvesCouÁ
();

922 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_REPLICA_CHANGE
,

923 
REDISMODULE_SUBEVENT_REPLICA_CHANGE_ONLINE
,

924 
NULL
);

925 
	`£rv”Log
(
LL_NOTICE
,"Synchronization with„eplica %s succeeded",

926 
	`»¶iÿtiÚG‘SÏveName
(
¦ave
));

927 
	}
}

934 
	$»moveRDBU£dToSyncR•liÿs
() {

941 ià(!
£rv”
.
rdb_d–_sync_fes
) {

942 
RDBG’”©edByR•liÿtiÚ
 = 0;

946 ià(
	`®lP”si¡’ûDi§bËd
(è&& 
RDBG’”©edByR•liÿtiÚ
) {

947 
ş›Á
 *
¦ave
;

948 
li¡Node
 *
Ê
;

949 
li¡I‹r
 
li
;

951 
d–rdb
 = 1;

952 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

953 (
Ê
 = 
	`li¡Next
(&
li
))) {

954 
¦ave
 = 
Ê
->
v®ue
;

955 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
 ||

956 
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
 ||

957 
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_SEND_BULK
)

959 
d–rdb
 = 0;

963 ià(
d–rdb
) {

964 
¡©
 
sb
;

965 ià(
	`l¡©
(
£rv”
.
rdb_f’ame
,&
sb
) != -1) {

966 
RDBG’”©edByR•liÿtiÚ
 = 0;

967 
	`£rv”Log
(
LL_NOTICE
,

970 
	`bg_uÆšk
(
£rv”
.
rdb_f’ame
);

974 
	}
}

976 
	$£ndBulkToSÏve
(
cÚÃùiÚ
 *
cÚn
) {

977 
ş›Á
 *
¦ave
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

978 
buf
[
PROTO_IOBUF_LEN
];

979 
ssize_t
 
nwr™‹n
, 
buæ’
;

984 ià(
¦ave
->
»¶´—mbË
) {

985 
nwr™‹n
 = 
	`cÚnWr™e
(
cÚn
,
¦ave
->
»¶´—mbË
,
	`sd¦’
(slave->replpreamble));

986 ià(
nwr™‹n
 == -1) {

987 
	`£rv”Log
(
LL_VERBOSE
,

989 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

990 
	`ä“Cl›Á
(
¦ave
);

993 
£rv”
.
¡©_Ãt_ouut_by‹s
 +ğ
nwr™‹n
;

994 
	`sd¤ªge
(
¦ave
->
»¶´—mbË
,
nwr™‹n
,-1);

995 ià(
	`sd¦’
(
¦ave
->
»¶´—mbË
) == 0) {

996 
	`sdsä“
(
¦ave
->
»¶´—mbË
);

997 
¦ave
->
»¶´—mbË
 = 
NULL
;

1005 
	`l£ek
(
¦ave
->
»¶dbfd
,¦ave->
»¶dboff
,
SEEK_SET
);

1006 
buæ’
 = 
	`»ad
(
¦ave
->
»¶dbfd
,
buf
,
PROTO_IOBUF_LEN
);

1007 ià(
buæ’
 <= 0) {

1008 
	`£rv”Log
(
LL_WARNING
,"Readƒrror sending DBo„eplica: %s",

1009 (
buæ’
 =ğ0è? "´em©u» EOF" : 
	`¡»¼Ü
(
”ºo
));

1010 
	`ä“Cl›Á
(
¦ave
);

1013 ià((
nwr™‹n
 = 
	`cÚnWr™e
(
cÚn
,
buf
,
buæ’
)) == -1) {

1014 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

1015 
	`£rv”Log
(
LL_WARNING
,"Writeƒrror sending DBo„eplica: %s",

1016 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

1017 
	`ä“Cl›Á
(
¦ave
);

1021 
¦ave
->
»¶dboff
 +ğ
nwr™‹n
;

1022 
£rv”
.
¡©_Ãt_ouut_by‹s
 +ğ
nwr™‹n
;

1023 ià(
¦ave
->
»¶dboff
 =ğ¦ave->
»¶dbsize
) {

1024 
	`şo£
(
¦ave
->
»¶dbfd
);

1025 
¦ave
->
»¶dbfd
 = -1;

1026 
	`cÚnS‘Wr™eHªdËr
(
¦ave
->
cÚn
,
NULL
);

1027 
	`putSÏveOÆše
(
¦ave
);

1029 
	}
}

1033 
	$rdbPeWr™eHªdËrCÚnRemoved
(
cÚÃùiÚ
 *
cÚn
) {

1034 ià(!
	`cÚnHasWr™eHªdËr
(
cÚn
))

1036 
	`cÚnS‘Wr™eHªdËr
(
cÚn
, 
NULL
);

1037 
£rv”
.
rdb_pe_numcÚns_wr™šg
--;

1039 ià(
£rv”
.
rdb_pe_numcÚns_wr™šg
 == 0) {

1040 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
rdb_pe_»ad
, 
AE_READABLE
, 
rdbPeR—dHªdËr
,
NULL
è=ğ
AE_ERR
) {

1041 
	`£rv”Pªic
("Unrecoverableƒrror creating server.rdb_pipe_read fileƒvent.");

1044 
	}
}

1048 
	$rdbPeWr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
) {

1049 
	`£rv”As£¹
(
£rv”
.
rdb_pe_bufæ’
>0);

1050 
ş›Á
 *
¦ave
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

1051 
nwr™‹n
;

1052 ià((
nwr™‹n
 = 
	`cÚnWr™e
(
cÚn
, 
£rv”
.
rdb_pe_buff
 + 
¦ave
->
»¶dboff
,

1053 
£rv”
.
rdb_pe_bufæ’
 - 
¦ave
->
»¶dboff
)) == -1)

1055 ià(
	`cÚnG‘S‹
(
cÚn
è=ğ
CONN_STATE_CONNECTED
)

1057 
	`£rv”Log
(
LL_WARNING
,"Writeƒrror sending DBo„eplica: %s",

1058 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

1059 
	`ä“Cl›Á
(
¦ave
);

1062 
¦ave
->
»¶dboff
 +ğ
nwr™‹n
;

1063 
£rv”
.
¡©_Ãt_ouut_by‹s
 +ğ
nwr™‹n
;

1064 ià(
¦ave
->
»¶dboff
 < 
£rv”
.
rdb_pe_bufæ’
)

1067 
	`rdbPeWr™eHªdËrCÚnRemoved
(
cÚn
);

1068 
	}
}

1073 
	$RdbPeCËªup
() {

1074 
	`şo£
(
£rv”
.
rdb_pe_»ad
);

1075 
	`zä“
(
£rv”
.
rdb_pe_cÚns
);

1076 
£rv”
.
rdb_pe_cÚns
 = 
NULL
;

1077 
£rv”
.
rdb_pe_numcÚns
 = 0;

1078 
£rv”
.
rdb_pe_numcÚns_wr™šg
 = 0;

1079 
	`zä“
(
£rv”
.
rdb_pe_buff
);

1080 
£rv”
.
rdb_pe_buff
 = 
NULL
;

1081 
£rv”
.
rdb_pe_bufæ’
 = 0;

1085 
	`checkChd»nDÚe
();

1086 
	}
}

1089 
	$rdbPeR—dHªdËr
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, *
ş›ÁD©a
, 
mask
) {

1090 
	`UNUSED
(
mask
);

1091 
	`UNUSED
(
ş›ÁD©a
);

1092 
	`UNUSED
(
ev’tLoİ
);

1093 
i
;

1094 ià(!
£rv”
.
rdb_pe_buff
)

1095 
£rv”
.
rdb_pe_buff
 = 
	`zm®loc
(
PROTO_IOBUF_LEN
);

1096 
	`£rv”As£¹
(
£rv”
.
rdb_pe_numcÚns_wr™šg
==0);

1099 
£rv”
.
rdb_pe_bufæ’
 = 
	`»ad
(
fd
, s”v”.
rdb_pe_buff
, 
PROTO_IOBUF_LEN
);

1100 ià(
£rv”
.
rdb_pe_bufæ’
 < 0) {

1101 ià(
”ºo
 =ğ
EAGAIN
 ||ƒ¼nØ=ğ
EWOULDBLOCK
)

1103 
	`£rv”Log
(
LL_WARNING
,"DiskËs rdb¿nsãr,„—dƒ¼Ü s’dšg DBØ»¶iÿs: %s", 
	`¡»¼Ü
(
”ºo
));

1104 
i
=0; i < 
£rv”
.
rdb_pe_numcÚns
; i++) {

1105 
cÚÃùiÚ
 *
cÚn
 = 
£rv”
.
rdb_pe_cÚns
[
i
];

1106 ià(!
cÚn
)

1108 
ş›Á
 *
¦ave
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

1109 
	`ä“Cl›Á
(
¦ave
);

1110 
£rv”
.
rdb_pe_cÚns
[
i
] = 
NULL
;

1112 
	`klRDBChd
();

1116 ià(
£rv”
.
rdb_pe_bufæ’
 == 0) {

1118 
¡lUp
 = 0;

1119 
	`«D–‘eFeEv’t
(
£rv”
.
–
, s”v”.
rdb_pe_»ad
, 
AE_READABLE
);

1120 
i
=0; i < 
£rv”
.
rdb_pe_numcÚns
; i++)

1122 
cÚÃùiÚ
 *
cÚn
 = 
£rv”
.
rdb_pe_cÚns
[
i
];

1123 ià(!
cÚn
)

1125 
¡lUp
++;

1127 
	`£rv”Log
(
LL_WARNING
,"DiskËs rdb¿nsãr, dÚ»adšg from…e, %d„•liÿ ¡Èup.", 
¡lUp
);

1128 
	`RdbPeCËªup
();

1132 
¡lAlive
 = 0;

1133 
i
=0; i < 
£rv”
.
rdb_pe_numcÚns
; i++)

1135 
nwr™‹n
;

1136 
cÚÃùiÚ
 *
cÚn
 = 
£rv”
.
rdb_pe_cÚns
[
i
];

1137 ià(!
cÚn
)

1140 
ş›Á
 *
¦ave
 = 
	`cÚnG‘Priv©eD©a
(
cÚn
);

1141 ià((
nwr™‹n
 = 
	`cÚnWr™e
(
cÚn
, 
£rv”
.
rdb_pe_buff
, s”v”.
rdb_pe_bufæ’
)) == -1) {

1142 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

1143 
	`£rv”Log
(
LL_WARNING
,"Diskless„dbransfer, writeƒrror sending DBo„eplica: %s",

1144 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

1145 
	`ä“Cl›Á
(
¦ave
);

1146 
£rv”
.
rdb_pe_cÚns
[
i
] = 
NULL
;

1150 
¦ave
->
»¶dboff
 = 0;

1152 
¦ave
->
»¶dboff
 = 
nwr™‹n
;

1153 
£rv”
.
¡©_Ãt_ouut_by‹s
 +ğ
nwr™‹n
;

1157 ià(
nwr™‹n
 !ğ
£rv”
.
rdb_pe_bufæ’
) {

1158 
£rv”
.
rdb_pe_numcÚns_wr™šg
++;

1159 
	`cÚnS‘Wr™eHªdËr
(
cÚn
, 
rdbPeWr™eHªdËr
);

1161 
¡lAlive
++;

1164 ià(
¡lAlive
 == 0) {

1165 
	`£rv”Log
(
LL_WARNING
,"Diskless„dbransfer,†ast„eplica dropped, killing fork child.");

1166 
	`klRDBChd
();

1167 
	`RdbPeCËªup
();

1170 ià(
£rv”
.
rdb_pe_numcÚns_wr™šg
 || 
¡lAlive
 == 0) {

1171 
	`«D–‘eFeEv’t
(
£rv”
.
–
, s”v”.
rdb_pe_»ad
, 
AE_READABLE
);

1175 
	}
}

1191 
	$upd©eSÏvesWa™šgBg§ve
(
bg§v“¼
, 
ty³
) {

1192 
li¡Node
 *
Ê
;

1193 
¡¬tbg§ve
 = 0;

1194 
mšÿ·
 = -1;

1195 
li¡I‹r
 
li
;

1197 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

1198 (
Ê
 = 
	`li¡Next
(&
li
))) {

1199 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

1201 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) {

1202 
¡¬tbg§ve
 = 1;

1203 
mšÿ·
 = (mšÿ· =ğ-1è? 
¦ave
->
¦ave_ÿ·
 :

1204 (
mšÿ·
 & 
¦ave
->
¦ave_ÿ·
);

1205 } ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
) {

1206 
»dis_¡©
 
buf
;

1213 ià(
ty³
 =ğ
RDB_CHILD_TYPE_SOCKET
) {

1214 
	`£rv”Log
(
LL_NOTICE
,

1216 
	`»¶iÿtiÚG‘SÏveName
(
¦ave
));

1242 
¦ave
->
»¶¡©e
 = 
SLAVE_STATE_ONLINE
;

1243 
¦ave
->
»¶_put_Úlše_Ú_ack
 = 1;

1244 
¦ave
->
»¶_ack_time
 = 
£rv”
.
unixtime
;

1246 ià(
bg§v“¼
 !ğ
C_OK
) {

1247 
	`ä“Cl›Á
(
¦ave
);

1248 
	`£rv”Log
(
LL_WARNING
,"SYNC failed. BGSAVE child„eturned‡nƒrror");

1251 ià((
¦ave
->
»¶dbfd
 = 
	`İ’
(
£rv”
.
rdb_f’ame
,
O_RDONLY
)) == -1 ||

1252 
	`»dis_f¡©
(
¦ave
->
»¶dbfd
,&
buf
) == -1) {

1253 
	`ä“Cl›Á
(
¦ave
);

1254 
	`£rv”Log
(
LL_WARNING
,"SYNC faed. Cª'ˆİ’/¡© DB‡á” BGSAVE: %s", 
	`¡»¼Ü
(
”ºo
));

1257 
¦ave
->
»¶dboff
 = 0;

1258 
¦ave
->
»¶dbsize
 = 
buf
.
¡_size
;

1259 
¦ave
->
»¶¡©e
 = 
SLAVE_STATE_SEND_BULK
;

1260 
¦ave
->
»¶´—mbË
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"$%lld\r\n",

1261 (è
¦ave
->
»¶dbsize
);

1263 
	`cÚnS‘Wr™eHªdËr
(
¦ave
->
cÚn
,
NULL
);

1264 ià(
	`cÚnS‘Wr™eHªdËr
(
¦ave
->
cÚn
,
£ndBulkToSÏve
è=ğ
C_ERR
) {

1265 
	`ä“Cl›Á
(
¦ave
);

1271 ià(
¡¬tbg§ve
è
	`¡¬tBg§veFÜR•liÿtiÚ
(
mšÿ·
);

1272 
	}
}

1278 
	$chªgeR•liÿtiÚId
() {

1279 
	`g‘RªdomHexCh¬s
(
£rv”
.
»¶id
,
CONFIG_RUN_ID_SIZE
);

1280 
£rv”
.
»¶id
[
CONFIG_RUN_ID_SIZE
] = '\0';

1281 
	}
}

1286 
	$ş—rR•liÿtiÚId2
() {

1287 
	`mem£t
(
£rv”
.
»¶id2
,'0',(£rv”.
»¶id
));

1288 
£rv”
.
»¶id2
[
CONFIG_RUN_ID_SIZE
] = '\0';

1289 
£rv”
.
£cÚd_»¶id_off£t
 = -1;

1290 
	}
}

1297 
	$shiáR•liÿtiÚId
() {

1298 
	`memıy
(
£rv”
.
»¶id2
,£rv”.
»¶id
,(server.replid));

1306 
£rv”
.
£cÚd_»¶id_off£t
 = s”v”.
ma¡”_»¶_off£t
+1;

1307 
	`chªgeR•liÿtiÚId
();

1308 
	`£rv”Log
(
LL_WARNING
,"S‘tšg secÚd¬y„•liÿtiÚ IDØ%s, v®id u°tØoff£t: %Îd. New„•liÿtiÚ ID i %s", 
£rv”
.
»¶id2
, s”v”.
£cÚd_»¶id_off£t
, s”v”.
»¶id
);

1309 
	}
}

1315 
	$¦aveIsInHªdshakeS‹
() {

1316  
£rv”
.
»¶_¡©e
 >ğ
REPL_STATE_RECEIVE_PONG
 &&

1317 
£rv”
.
»¶_¡©e
 <ğ
REPL_STATE_RECEIVE_PSYNC
;

1318 
	}
}

1328 
	$»¶iÿtiÚS’dNewlšeToMa¡”
() {

1329 
time_t
 
Ãwlše_£Á
;

1330 ià(
	`time
(
NULL
è!ğ
Ãwlše_£Á
) {

1331 
Ãwlše_£Á
 = 
	`time
(
NULL
);

1333 ià(
£rv”
.
»¶_Œªsãr_s
è
	`cÚnWr™e
(server.repl_transfer_s, "\n", 1);

1335 
	}
}

1339 
	$»¶iÿtiÚEm±yDbC®lback
(*
´ivd©a
) {

1340 
	`UNUSED
(
´ivd©a
);

1341 
	`»¶iÿtiÚS’dNewlšeToMa¡”
();

1342 
	}
}

1347 
	$»¶iÿtiÚC»©eMa¡”Cl›Á
(
cÚÃùiÚ
 *
cÚn
, 
dbid
) {

1348 
£rv”
.
ma¡”
 = 
	`ü—‹Cl›Á
(
cÚn
);

1349 ià(
cÚn
)

1350 
	`cÚnS‘R—dHªdËr
(
£rv”
.
ma¡”
->
cÚn
, 
»adQu”yFromCl›Á
);

1351 
£rv”
.
ma¡”
->
æags
 |ğ
CLIENT_MASTER
;

1352 
£rv”
.
ma¡”
->
auth’tiÿ‹d
 = 1;

1353 
£rv”
.
ma¡”
->
»¶off
 = s”v”.
ma¡”_š™Ÿl_off£t
;

1354 
£rv”
.
ma¡”
->
»ad_»¶off
 = s”v”.ma¡”->
»¶off
;

1355 
£rv”
.
ma¡”
->
u£r
 = 
NULL
;

1356 
	`memıy
(
£rv”
.
ma¡”
->
»¶id
, s”v”.
ma¡”_»¶id
,

1357 (
£rv”
.
ma¡”_»¶id
));

1360 ià(
£rv”
.
ma¡”
->
»¶off
 == -1)

1361 
£rv”
.
ma¡”
->
æags
 |ğ
CLIENT_PRE_PSYNC
;

1362 ià(
dbid
 !ğ-1è
	`£ËùDb
(
£rv”
.
ma¡”
,dbid);

1363 
	}
}

1369 
	$»¡¬tAOFAá”SYNC
() {

1370 
Œ›s
, 
max_Œ›s
 = 10;

1371 
Œ›s
 = 0;r› < 
max_Œ›s
; ++tries) {

1372 ià(
	`¡¬tAµ’dOÆy
(è=ğ
C_OK
) ;

1373 
	`£rv”Log
(
LL_WARNING
,

1376 
	`¦“p
(1);

1378 ià(
Œ›s
 =ğ
max_Œ›s
) {

1379 
	`£rv”Log
(
LL_WARNING
,

1382 
	`ex™
(1);

1384 
	}
}

1386 
	$u£DiskËssLßd
() {

1388 
’abËd
 = 
£rv”
.
»¶_diskËss_lßd
 =ğ
REPL_DISKLESS_LOAD_SWAPDB
 ||

1389 (
£rv”
.
»¶_diskËss_lßd
 =ğ
REPL_DISKLESS_LOAD_WHEN_DB_EMPTY
 && 
	`dbTÙ®S”v”KeyCouÁ
()==0);

1391 ià(
’abËd
 && !
	`moduËAÎD©©y³sHªdËE¼Üs
()) {

1392 
	`£rv”Log
(
LL_WARNING
,

1394 
’abËd
 = 0;

1396  
’abËd
;

1397 
	}
}

1402 
»disDb
 *
	$diskËssLßdMakeBackups
() {

1403 
»disDb
 *
backups
 = 
	`zm®loc
(ÔedisDb)*
£rv”
.
dbnum
);

1404 
i
=0; i<
£rv”
.
dbnum
; i++) {

1405 
backups
[
i
] = 
£rv”
.
db
[i];

1406 
£rv”
.
db
[
i
].
diù
 = 
	`diùC»©e
(&
dbDiùTy³
,
NULL
);

1407 
£rv”
.
db
[
i
].
expœes
 = 
	`diùC»©e
(&
key±rDiùTy³
,
NULL
);

1409  
backups
;

1410 
	}
}

1422 
	$diskËssLßdRe¡ÜeBackups
(
»disDb
 *
backup
, 
»¡Üe
, 
em±y_db_æags
)

1424 ià(
»¡Üe
) {

1426 
	`em±yDbG’”ic
(
£rv”
.
db
,-1,
em±y_db_æags
,
»¶iÿtiÚEm±yDbC®lback
);

1427 
i
=0; i<
£rv”
.
dbnum
; i++) {

1428 
	`diùR–—£
(
£rv”
.
db
[
i
].
diù
);

1429 
	`diùR–—£
(
£rv”
.
db
[
i
].
expœes
);

1430 
£rv”
.
db
[
i
] = 
backup
[i];

1434 
	`em±yDbG’”ic
(
backup
,-1,
em±y_db_æags
|
EMPTYDB_BACKUP
,
»¶iÿtiÚEm±yDbC®lback
);

1435 
i
=0; i<
£rv”
.
dbnum
; i++) {

1436 
	`diùR–—£
(
backup
[
i
].
diù
);

1437 
	`diùR–—£
(
backup
[
i
].
expœes
);

1440 
	`zä“
(
backup
);

1441 
	}
}

1444 
	#REPL_MAX_WRITTEN_BEFORE_FSYNC
 (1024*1024*8è

	)

1445 
	$»adSyncBulkPaylßd
(
cÚÃùiÚ
 *
cÚn
) {

1446 
buf
[
PROTO_IOBUF_LEN
];

1447 
ssize_t
 
Ä—d
, 
»adËn
, 
nwr™‹n
;

1448 
u£_diskËss_lßd
 = 
	`u£DiskËssLßd
();

1449 
»disDb
 *
diskËss_lßd_backup
 = 
NULL
;

1450 
em±y_db_æags
 = 
£rv”
.
»¶_¦ave_Ïzy_æush
 ? 
EMPTYDB_ASYNC
 :

1451 
EMPTYDB_NO_FLAGS
;

1452 
off_t
 
Ëá
;

1456 
eofm¬k
[
CONFIG_RUN_ID_SIZE
];

1457 
Ï¡by‹s
[
CONFIG_RUN_ID_SIZE
];

1458 
u£m¬k
 = 0;

1462 ià(
£rv”
.
»¶_Œªsãr_size
 == -1) {

1463 ià(
	`cÚnSyncR—dLše
(
cÚn
,
buf
,1024,
£rv”
.
»¶_syncio_timeout
*1000) == -1) {

1464 
	`£rv”Log
(
LL_WARNING
,

1466 
	`¡»¼Ü
(
”ºo
));

1467 
”rÜ
;

1470 ià(
buf
[0] == '-') {

1471 
	`£rv”Log
(
LL_WARNING
,

1473 
buf
+1);

1474 
”rÜ
;

1475 } ià(
buf
[0] == '\0') {

1479 
£rv”
.
»¶_Œªsãr_Ï¡io
 = s”v”.
unixtime
;

1481 } ià(
buf
[0] != '$') {

1482 
	`£rv”Log
(
LL_WARNING
,"Bad…rÙocŞ from MASTER,hfœ¡ by‹ i nÙ '$' (w»ûived '%s'),‡» you su»hho¡‡nd…Üˆ¬right?", 
buf
);

1483 
”rÜ
;

1496 ià(
	`¡ºcmp
(
buf
+1,"EOF:",4è=ğ0 && 
	`¡¾’
(buf+5è>ğ
CONFIG_RUN_ID_SIZE
) {

1497 
u£m¬k
 = 1;

1498 
	`memıy
(
eofm¬k
,
buf
+5,
CONFIG_RUN_ID_SIZE
);

1499 
	`mem£t
(
Ï¡by‹s
,0,
CONFIG_RUN_ID_SIZE
);

1502 
£rv”
.
»¶_Œªsãr_size
 = 0;

1503 
	`£rv”Log
(
LL_NOTICE
,

1505 
u£_diskËss_lßd
? "to…arser":"to disk");

1507 
u£m¬k
 = 0;

1508 
£rv”
.
»¶_Œªsãr_size
 = 
	`¡¹Ş
(
buf
+1,
NULL
,10);

1509 
	`£rv”Log
(
LL_NOTICE
,

1511 (è
£rv”
.
»¶_Œªsãr_size
,

1512 
u£_diskËss_lßd
? "to…arser":"to disk");

1517 ià(!
u£_diskËss_lßd
) {

1520 ià(
u£m¬k
) {

1521 
»adËn
 = (
buf
);

1523 
Ëá
 = 
£rv”
.
»¶_Œªsãr_size
 - s”v”.
»¶_Œªsãr_»ad
;

1524 
»adËn
 = (
Ëá
 < (sigÃd)(
buf
)) ?†eft : (signed)(buf);

1527 
Ä—d
 = 
	`cÚnR—d
(
cÚn
,
buf
,
»adËn
);

1528 ià(
Ä—d
 <= 0) {

1529 
	`£rv”Log
(
LL_WARNING
,"I/Oƒrrorryingo sync with MASTER: %s",

1530 (
Ä—d
 =ğ-1è? 
	`¡»¼Ü
(
”ºo
) : "connection†ost");

1531 
	`ÿnûlR•liÿtiÚHªdshake
();

1534 
£rv”
.
¡©_Ãt_šput_by‹s
 +ğ
Ä—d
;

1538 
eof_»ached
 = 0;

1540 ià(
u£m¬k
) {

1543 ià(
Ä—d
 >ğ
CONFIG_RUN_ID_SIZE
) {

1544 
	`memıy
(
Ï¡by‹s
,
buf
+
Ä—d
-
CONFIG_RUN_ID_SIZE
,

1545 
CONFIG_RUN_ID_SIZE
);

1547 
»m
 = 
CONFIG_RUN_ID_SIZE
-
Ä—d
;

1548 
	`memmove
(
Ï¡by‹s
,Ï¡by‹s+
Ä—d
,
»m
);

1549 
	`memıy
(
Ï¡by‹s
+
»m
,
buf
,
Ä—d
);

1551 ià(
	`memcmp
(
Ï¡by‹s
,
eofm¬k
,
CONFIG_RUN_ID_SIZE
) == 0)

1552 
eof_»ached
 = 1;

1558 
£rv”
.
»¶_Œªsãr_Ï¡io
 = s”v”.
unixtime
;

1559 ià((
nwr™‹n
 = 
	`wr™e
(
£rv”
.
»¶_Œªsãr_fd
,
buf
,
Ä—d
)) !=‚read) {

1560 
	`£rv”Log
(
LL_WARNING
,

1563 (
nwr™‹n
 =ğ-1è? 
	`¡»¼Ü
(
”ºo
) : "short write");

1564 
”rÜ
;

1566 
£rv”
.
»¶_Œªsãr_»ad
 +ğ
Ä—d
;

1569 ià(
u£m¬k
 && 
eof_»ached
) {

1570 ià(
	`árunÿ‹
(
£rv”
.
»¶_Œªsãr_fd
,

1571 
£rv”
.
»¶_Œªsãr_»ad
 - 
CONFIG_RUN_ID_SIZE
) == -1)

1573 
	`£rv”Log
(
LL_WARNING
,

1575 "fÜ SYNC: %s", 
	`¡»¼Ü
(
”ºo
));

1576 
”rÜ
;

1583 ià(
£rv”
.
»¶_Œªsãr_»ad
 >=

1584 
£rv”
.
»¶_Œªsãr_Ï¡_fsync_off
 + 
REPL_MAX_WRITTEN_BEFORE_FSYNC
)

1586 
off_t
 
sync_size
 = 
£rv”
.
»¶_Œªsãr_»ad
 -

1587 
£rv”
.
»¶_Œªsãr_Ï¡_fsync_off
;

1588 
	`rdb_fsync_¿nge
(
£rv”
.
»¶_Œªsãr_fd
,

1589 
£rv”
.
»¶_Œªsãr_Ï¡_fsync_off
, 
sync_size
);

1590 
£rv”
.
»¶_Œªsãr_Ï¡_fsync_off
 +ğ
sync_size
;

1594 ià(!
u£m¬k
) {

1595 ià(
£rv”
.
»¶_Œªsãr_»ad
 =ğ£rv”.
»¶_Œªsãr_size
)

1596 
eof_»ached
 = 1;

1601 ià(!
eof_»ached
) ;

1613 
	`£rv”Log
(
LL_NOTICE
, "MASTER <-> REPLICA sync: Flushing old data");

1617 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
è
	`¡İAµ’dOÆy
();

1622 ià(
u£_diskËss_lßd
 &&

1623 
£rv”
.
»¶_diskËss_lßd
 =ğ
REPL_DISKLESS_LOAD_SWAPDB
)

1627 
diskËss_lßd_backup
 = 
	`diskËssLßdMakeBackups
();

1633 
	`em±yDb
(-1,
em±y_db_æags
,
»¶iÿtiÚEm±yDbC®lback
);

1639 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
NULL
);

1640 
	`£rv”Log
(
LL_NOTICE
, "MASTER <-> REPLICA sync: Loading DB in memory");

1641 
rdbSaveInfo
 
rsi
 = 
RDB_SAVE_INFO_INIT
;

1642 ià(
u£_diskËss_lßd
) {

1643 
rio
 
rdb
;

1644 
	`rioIn™W™hCÚn
(&
rdb
,
cÚn
,
£rv”
.
»¶_Œªsãr_size
);

1648 
	`cÚnBlock
(
cÚn
);

1649 
	`cÚnRecvTimeout
(
cÚn
, 
£rv”
.
»¶_timeout
*1000);

1650 
	`¡¬tLßdšg
(
£rv”
.
»¶_Œªsãr_size
, 
RDBFLAGS_REPLICATION
);

1652 ià(
	`rdbLßdRio
(&
rdb
,
RDBFLAGS_REPLICATION
,&
rsi
è!ğ
C_OK
) {

1654 
	`¡İLßdšg
(0);

1655 
	`£rv”Log
(
LL_WARNING
,

1658 
	`ÿnûlR•liÿtiÚHªdshake
();

1659 
	`rioF»eCÚn
(&
rdb
, 
NULL
);

1660 ià(
£rv”
.
»¶_diskËss_lßd
 =ğ
REPL_DISKLESS_LOAD_SWAPDB
) {

1662 
	`diskËssLßdRe¡ÜeBackups
(
diskËss_lßd_backup
,1,

1663 
em±y_db_æags
);

1667 
	`em±yDb
(-1,
em±y_db_æags
,
»¶iÿtiÚEm±yDbC®lback
);

1675 
	`¡İLßdšg
(1);

1678 ià(
£rv”
.
»¶_diskËss_lßd
 =ğ
REPL_DISKLESS_LOAD_SWAPDB
) {

1682 
	`diskËssLßdRe¡ÜeBackups
(
diskËss_lßd_backup
,0,
em±y_db_æags
);

1686 ià(
u£m¬k
) {

1687 ià(!
	`rioR—d
(&
rdb
,
buf
,
CONFIG_RUN_ID_SIZE
) ||

1688 
	`memcmp
(
buf
,
eofm¬k
,
CONFIG_RUN_ID_SIZE
) != 0)

1690 
	`£rv”Log
(
LL_WARNING
,"Replication stream EOF marker is broken");

1691 
	`ÿnûlR•liÿtiÚHªdshake
();

1692 
	`rioF»eCÚn
(&
rdb
, 
NULL
);

1699 
	`rioF»eCÚn
(&
rdb
, 
NULL
);

1700 
	`cÚnNÚBlock
(
cÚn
);

1701 
	`cÚnRecvTimeout
(
cÚn
,0);

1704 ià(
£rv”
.
rdb_chd_pid
 != -1) {

1705 
	`£rv”Log
(
LL_NOTICE
,

1710 (è
£rv”
.
rdb_chd_pid
);

1711 
	`klRDBChd
();

1715 
Şd_rdb_fd
 = 
	`İ’
(
£rv”
.
rdb_f’ame
,
O_RDONLY
|
O_NONBLOCK
);

1716 ià(
	`»Çme
(
£rv”
.
»¶_Œªsãr_tmpfe
,£rv”.
rdb_f’ame
) == -1) {

1717 
	`£rv”Log
(
LL_WARNING
,

1720 
£rv”
.
rdb_f’ame
, 
	`¡»¼Ü
(
”ºo
));

1721 
	`ÿnûlR•liÿtiÚHªdshake
();

1722 ià(
Şd_rdb_fd
 !ğ-1è
	`şo£
(old_rdb_fd);

1726 ià(
Şd_rdb_fd
 !ğ-1è
	`bioC»©eBackgroundJob
(
BIO_CLOSE_FILE
,(*)()Şd_rdb_fd,
NULL
,NULL);

1728 ià(
	`rdbLßd
(
£rv”
.
rdb_f’ame
,&
rsi
,
RDBFLAGS_REPLICATION
è!ğ
C_OK
) {

1729 
	`£rv”Log
(
LL_WARNING
,

1732 
	`ÿnûlR•liÿtiÚHªdshake
();

1733 ià(
£rv”
.
rdb_d–_sync_fes
 && 
	`®lP”si¡’ûDi§bËd
()) {

1734 
	`£rv”Log
(
LL_NOTICE
,"Removinghe RDB file obtained from "

1737 
	`bg_uÆšk
(
£rv”
.
rdb_f’ame
);

1745 ià(
£rv”
.
rdb_d–_sync_fes
 && 
	`®lP”si¡’ûDi§bËd
()) {

1746 
	`£rv”Log
(
LL_NOTICE
,"Removinghe RDB file obtained from "

1749 
	`bg_uÆšk
(
£rv”
.
rdb_f’ame
);

1752 
	`zä“
(
£rv”
.
»¶_Œªsãr_tmpfe
);

1753 
	`şo£
(
£rv”
.
»¶_Œªsãr_fd
);

1754 
£rv”
.
»¶_Œªsãr_fd
 = -1;

1755 
£rv”
.
»¶_Œªsãr_tmpfe
 = 
NULL
;

1759 
	`»¶iÿtiÚC»©eMa¡”Cl›Á
(
£rv”
.
»¶_Œªsãr_s
,
rsi
.
»¶_¡»am_db
);

1760 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECTED
;

1761 
£rv”
.
»¶_down_sšû
 = 0;

1764 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MASTER_LINK_CHANGE
,

1765 
REDISMODULE_SUBEVENT_MASTER_LINK_UP
,

1766 
NULL
);

1771 
	`memıy
(
£rv”
.
»¶id
,£rv”.
ma¡”
->replid,(server.replid));

1772 
£rv”
.
ma¡”_»¶_off£t
 = s”v”.
ma¡”
->
»¶off
;

1773 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = s”v”.
ma¡”
->
»¶off
;

1774 
	`ş—rR•liÿtiÚId2
();

1780 ià(
£rv”
.
»¶_backlog
 =ğ
NULL
è
	`ü—‹R•liÿtiÚBacklog
();

1781 
	`£rv”Log
(
LL_NOTICE
, "MASTER <-> REPLICA sync: Finished with success");

1783 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
) {

1784 
	`»disCommuniÿ‹Sy¡emd
("STATUS=MASTER <-> REPLICA sync: Finished with success. Readyo‡ccept connections.\n");

1785 
	`»disCommuniÿ‹Sy¡emd
("READY=1\n");

1791 ià(
£rv”
.
aof_’abËd
è
	`»¡¬tAOFAá”SYNC
();

1794 
”rÜ
:

1795 
	`ÿnûlR•liÿtiÚHªdshake
();

1797 
	}
}

1805 
	#SYNC_CMD_READ
 (1<<0)

	)

1806 
	#SYNC_CMD_WRITE
 (1<<1)

	)

1807 
	#SYNC_CMD_FULL
 (
SYNC_CMD_READ
|
SYNC_CMD_WRITE
)

	)

1808 *
	$£ndSynchrÚousCommªd
(
æags
, 
cÚÃùiÚ
 *
cÚn
, ...) {

1813 ià(
æags
 & 
SYNC_CMD_WRITE
) {

1814 *
¬g
;

1815 
va_li¡
 
­
;

1816 
sds
 
cmd
 = 
	`sd£m±y
();

1817 
sds
 
cmd¬gs
 = 
	`sd£m±y
();

1818 
size_t
 
¬g¦’
 = 0;

1819 
	`va_¡¬t
(
­
,
cÚn
);

1822 
¬g
 = 
	`va_¬g
(
­
, *);

1823 ià(
¬g
 =ğ
NULL
) ;

1825 
cmd¬gs
 = 
	`sdsÿrštf
(cmd¬gs,"$%zu\r\n%s\r\n",
	`¡¾’
(
¬g
),arg);

1826 
¬g¦’
++;

1829 
	`va_’d
(
­
);

1831 
cmd
 = 
	`sdsÿrštf
(cmd,"*%zu\r\n",
¬g¦’
);

1832 
cmd
 = 
	`sdsÿtsds
(cmd,
cmd¬gs
);

1833 
	`sdsä“
(
cmd¬gs
);

1836 ià(
	`cÚnSyncWr™e
(
cÚn
,
cmd
,
	`sd¦’
(cmd),
£rv”
.
»¶_syncio_timeout
*1000)

1839 
	`sdsä“
(
cmd
);

1840  
	`sdsÿrštf
(
	`sd£m±y
(),"-Writingo master: %s",

1841 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

1843 
	`sdsä“
(
cmd
);

1847 ià(
æags
 & 
SYNC_CMD_READ
) {

1848 
buf
[256];

1850 ià(
	`cÚnSyncR—dLše
(
cÚn
,
buf
,(buf),
£rv”
.
»¶_syncio_timeout
*1000)

1853  
	`sdsÿrštf
(
	`sd£m±y
(),"-Reading from master: %s",

1854 
	`¡»¼Ü
(
”ºo
));

1856 
£rv”
.
»¶_Œªsãr_Ï¡io
 = s”v”.
unixtime
;

1857  
	`sd¢ew
(
buf
);

1859  
NULL
;

1860 
	}
}

1910 
	#PSYNC_WRITE_ERROR
 0

	)

1911 
	#PSYNC_WAIT_REPLY
 1

	)

1912 
	#PSYNC_CONTINUE
 2

	)

1913 
	#PSYNC_FULLRESYNC
 3

	)

1914 
	#PSYNC_NOT_SUPPORTED
 4

	)

1915 
	#PSYNC_TRY_LATER
 5

	)

1916 
	$¦aveTryP¬tŸlResynchrÚiz©iÚ
(
cÚÃùiÚ
 *
cÚn
, 
»ad_»¶y
) {

1917 *
psync_»¶id
;

1918 
psync_off£t
[32];

1919 
sds
 
»¶y
;

1922 ià(!
»ad_»¶y
) {

1928 
£rv”
.
ma¡”_š™Ÿl_off£t
 = -1;

1930 ià(
£rv”
.
ÿched_ma¡”
) {

1931 
psync_»¶id
 = 
£rv”
.
ÿched_ma¡”
->
»¶id
;

1932 
	`¢´štf
(
psync_off£t
,Õsync_off£t),"%Îd", 
£rv”
.
ÿched_ma¡”
->
»¶off
+1);

1933 
	`£rv”Log
(
LL_NOTICE
,"Tryšg‡…¬tŸÈ»synchrÚiz©iÚ (»que¡ %s:%s).", 
psync_»¶id
, 
psync_off£t
);

1935 
	`£rv”Log
(
LL_NOTICE
,"Partial„esynchronization‚ot…ossible (no cached master)");

1936 
psync_»¶id
 = "?";

1937 
	`memıy
(
psync_off£t
,"-1",3);

1941 
»¶y
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"PSYNC",
psync_»¶id
,
psync_off£t
,
NULL
);

1942 ià(
»¶y
 !ğ
NULL
) {

1943 
	`£rv”Log
(
LL_WARNING
,"UÇbËØ£nd PSYNCØma¡”: %s",
»¶y
);

1944 
	`sdsä“
(
»¶y
);

1945 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
NULL
);

1946  
PSYNC_WRITE_ERROR
;

1948  
PSYNC_WAIT_REPLY
;

1952 
»¶y
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

1953 ià(
	`sd¦’
(
»¶y
) == 0) {

1956 
	`sdsä“
(
»¶y
);

1957  
PSYNC_WAIT_REPLY
;

1960 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
NULL
);

1962 ià(!
	`¡ºcmp
(
»¶y
,"+FULLRESYNC",11)) {

1963 *
»¶id
 = 
NULL
, *
off£t
 = NULL;

1967 
»¶id
 = 
	`¡rchr
(
»¶y
,' ');

1968 ià(
»¶id
) {

1969 
»¶id
++;

1970 
off£t
 = 
	`¡rchr
(
»¶id
,' ');

1971 ià(
off£t
) offset++;

1973 ià(!
»¶id
 || !
off£t
 || (off£t-»¶id-1è!ğ
CONFIG_RUN_ID_SIZE
) {

1974 
	`£rv”Log
(
LL_WARNING
,

1980 
	`mem£t
(
£rv”
.
ma¡”_»¶id
,0,
CONFIG_RUN_ID_SIZE
+1);

1982 
	`memıy
(
£rv”
.
ma¡”_»¶id
, 
»¶id
, 
off£t
-replid-1);

1983 
£rv”
.
ma¡”_»¶id
[
CONFIG_RUN_ID_SIZE
] = '\0';

1984 
£rv”
.
ma¡”_š™Ÿl_off£t
 = 
	`¡¹Şl
(
off£t
,
NULL
,10);

1985 
	`£rv”Log
(
LL_NOTICE
,"Full„esync from master: %s:%lld",

1986 
£rv”
.
ma¡”_»¶id
,

1987 
£rv”
.
ma¡”_š™Ÿl_off£t
);

1990 
	`»¶iÿtiÚDisÿrdCachedMa¡”
();

1991 
	`sdsä“
(
»¶y
);

1992  
PSYNC_FULLRESYNC
;

1995 ià(!
	`¡ºcmp
(
»¶y
,"+CONTINUE",9)) {

1997 
	`£rv”Log
(
LL_NOTICE
,

2005 *
¡¬t
 = 
»¶y
+10;

2006 *
’d
 = 
»¶y
+9;

2007 
’d
[0] != '\r' &&ƒnd[0] != '\n' &&ƒnd[0] != '\0')ƒnd++;

2008 ià(
’d
-
¡¬t
 =ğ
CONFIG_RUN_ID_SIZE
) {

2009 
Ãw
[
CONFIG_RUN_ID_SIZE
+1];

2010 
	`memıy
(
Ãw
,
¡¬t
,
CONFIG_RUN_ID_SIZE
);

2011 
Ãw
[
CONFIG_RUN_ID_SIZE
] = '\0';

2013 ià(
	`¡rcmp
(
Ãw
,
£rv”
.
ÿched_ma¡”
->
»¶id
)) {

2015 
	`£rv”Log
(
LL_WARNING
,"Ma¡”„•liÿtiÚ ID chªgedØ%s",
Ãw
);

2018 
	`memıy
(
£rv”
.
»¶id2
,£rv”.
ÿched_ma¡”
->
»¶id
,

2019 (
£rv”
.
»¶id2
));

2020 
£rv”
.
£cÚd_»¶id_off£t
 = s”v”.
ma¡”_»¶_off£t
+1;

2024 
	`memıy
(
£rv”
.
»¶id
,
Ãw
,(server.replid));

2025 
	`memıy
(
£rv”
.
ÿched_ma¡”
->
»¶id
,
Ãw
,(server.replid));

2028 
	`discÚÃùSÏves
();

2033 
	`sdsä“
(
»¶y
);

2034 
	`»¶iÿtiÚResu¼eùCachedMa¡”
(
cÚn
);

2039 ià(
£rv”
.
»¶_backlog
 =ğ
NULL
è
	`ü—‹R•liÿtiÚBacklog
();

2040  
PSYNC_CONTINUE
;

2050 ià(!
	`¡ºcmp
(
»¶y
,"-NOMASTERLINK",13) ||

2051 !
	`¡ºcmp
(
»¶y
,"-LOADING",8))

2053 
	`£rv”Log
(
LL_NOTICE
,

2055 "buˆshould bšhfutu»: %s", 
»¶y
);

2056 
	`sdsä“
(
»¶y
);

2057  
PSYNC_TRY_LATER
;

2060 ià(
	`¡ºcmp
(
»¶y
,"-ERR",4)) {

2062 
	`£rv”Log
(
LL_WARNING
,

2063 "UÃx³ùed„•lyØPSYNC from ma¡”: %s", 
»¶y
);

2065 
	`£rv”Log
(
LL_NOTICE
,

2067 "”rÜ s‹ (»¶y: %s)", 
»¶y
);

2069 
	`sdsä“
(
»¶y
);

2070 
	`»¶iÿtiÚDisÿrdCachedMa¡”
();

2071  
PSYNC_NOT_SUPPORTED
;

2072 
	}
}

2076 
	$syncW™hMa¡”
(
cÚÃùiÚ
 *
cÚn
) {

2077 
tmpfe
[256], *
”r
 = 
NULL
;

2078 
dfd
 = -1, 
maxŒ›s
 = 5;

2079 
psync_»suÉ
;

2083 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_NONE
) {

2084 
	`cÚnClo£
(
cÚn
);

2090 ià(
	`cÚnG‘S‹
(
cÚn
è!ğ
CONN_STATE_CONNECTED
) {

2091 
	`£rv”Log
(
LL_WARNING
,"Error condition on socket for SYNC: %s",

2092 
	`cÚnG‘La¡E¼Ü
(
cÚn
));

2093 
”rÜ
;

2097 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTING
) {

2098 
	`£rv”Log
(
LL_NOTICE
,"Non blocking connect for SYNC firedheƒvent.");

2101 
	`cÚnS‘R—dHªdËr
(
cÚn
, 
syncW™hMa¡”
);

2102 
	`cÚnS‘Wr™eHªdËr
(
cÚn
, 
NULL
);

2103 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_PONG
;

2106 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"PING",
NULL
);

2107 ià(
”r
è
wr™e_”rÜ
;

2112 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_RECEIVE_PONG
) {

2113 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

2120 ià(
”r
[0] != '+' &&

2121 
	`¡ºcmp
(
”r
,"-NOAUTH",7) != 0 &&

2122 
	`¡ºcmp
(
”r
,"-ERR operation‚ot…ermitted",28) != 0)

2124 
	`£rv”Log
(
LL_WARNING
,"E¼Ü„•lyØPING from ma¡”: '%s'",
”r
);

2125 
	`sdsä“
(
”r
);

2126 
”rÜ
;

2128 
	`£rv”Log
(
LL_NOTICE
,

2131 
	`sdsä“
(
”r
);

2132 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_AUTH
;

2136 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_AUTH
) {

2137 ià(
£rv”
.
ma¡”u£r
 && s”v”.
ma¡”auth
) {

2138 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"AUTH",

2139 
£rv”
.
ma¡”u£r
,£rv”.
ma¡”auth
,
NULL
);

2140 ià(
”r
è
wr™e_”rÜ
;

2141 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_AUTH
;

2143 } ià(
£rv”
.
ma¡”auth
) {

2144 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"AUTH",
£rv”
.
ma¡”auth
,
NULL
);

2145 ià(
”r
è
wr™e_”rÜ
;

2146 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_AUTH
;

2149 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_PORT
;

2154 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_RECEIVE_AUTH
) {

2155 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

2156 ià(
”r
[0] == '-') {

2157 
	`£rv”Log
(
LL_WARNING
,"UÇbËØAUTHØMASTER: %s",
”r
);

2158 
	`sdsä“
(
”r
);

2159 
”rÜ
;

2161 
	`sdsä“
(
”r
);

2162 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_PORT
;

2167 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_PORT
) {

2168 
pÜt
;

2169 ià(
£rv”
.
¦ave_ªnounû_pÜt
è
pÜt
 = server.slave_announce_port;

2170 ià(
£rv”
.
s_»¶iÿtiÚ
 && s”v”.
s_pÜt
è
pÜt
 = server.tls_port;

2171 
pÜt
 = 
£rv”
.port;

2172 
sds
 
pÜt¡r
 = 
	`sdsäomlÚglÚg
(
pÜt
);

2173 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"REPLCONF",

2174 "li¡’šg-pÜt",
pÜt¡r
, 
NULL
);

2175 
	`sdsä“
(
pÜt¡r
);

2176 ià(
”r
è
wr™e_”rÜ
;

2177 
	`sdsä“
(
”r
);

2178 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_PORT
;

2183 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_RECEIVE_PORT
) {

2184 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

2187 ià(
”r
[0] == '-') {

2188 
	`£rv”Log
(
LL_NOTICE
,"(Non critical) Master does‚ot understand "

2189 "REPLCONF†i¡’šg-pÜt: %s", 
”r
);

2191 
	`sdsä“
(
”r
);

2192 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_IP
;

2196 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_IP
 &&

2197 
£rv”
.
¦ave_ªnounû_
 =ğ
NULL
)

2199 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_CAPA
;

2204 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_IP
) {

2205 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"REPLCONF",

2206 "-add»ss",
£rv”
.
¦ave_ªnounû_
, 
NULL
);

2207 ià(
”r
è
wr™e_”rÜ
;

2208 
	`sdsä“
(
”r
);

2209 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_IP
;

2214 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_RECEIVE_IP
) {

2215 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

2218 ià(
”r
[0] == '-') {

2219 
	`£rv”Log
(
LL_NOTICE
,"(Non critical) Master does‚ot understand "

2220 "REPLCONF ip-add»ss: %s", 
”r
);

2222 
	`sdsä“
(
”r
);

2223 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_CAPA
;

2232 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_CAPA
) {

2233 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_WRITE
,
cÚn
,"REPLCONF",

2234 "ÿ·","eof","ÿ·","psync2",
NULL
);

2235 ià(
”r
è
wr™e_”rÜ
;

2236 
	`sdsä“
(
”r
);

2237 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_CAPA
;

2242 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_RECEIVE_CAPA
) {

2243 
”r
 = 
	`£ndSynchrÚousCommªd
(
SYNC_CMD_READ
,
cÚn
,
NULL
);

2246 ià(
”r
[0] == '-') {

2247 
	`£rv”Log
(
LL_NOTICE
,"(Non critical) Master does‚ot understand "

2248 "REPLCONF c­a: %s", 
”r
);

2250 
	`sdsä“
(
”r
);

2251 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_SEND_PSYNC
;

2259 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_SEND_PSYNC
) {

2260 ià(
	`¦aveTryP¬tŸlResynchrÚiz©iÚ
(
cÚn
,0è=ğ
PSYNC_WRITE_ERROR
) {

2261 
”r
 = 
	`sd¢ew
("Writeƒrror sendinghe PSYNC command.");

2262 
wr™e_”rÜ
;

2264 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_RECEIVE_PSYNC
;

2269 ià(
£rv”
.
»¶_¡©e
 !ğ
REPL_STATE_RECEIVE_PSYNC
) {

2270 
	`£rv”Log
(
LL_WARNING
,"syncWithMaster(): state machineƒrror, "

2272 
£rv”
.
»¶_¡©e
);

2273 
”rÜ
;

2276 
psync_»suÉ
 = 
	`¦aveTryP¬tŸlResynchrÚiz©iÚ
(
cÚn
,1);

2277 ià(
psync_»suÉ
 =ğ
PSYNC_WAIT_REPLY
) ;

2283 ià(
psync_»suÉ
 =ğ
PSYNC_TRY_LATER
è
”rÜ
;

2288 ià(
psync_»suÉ
 =ğ
PSYNC_CONTINUE
) {

2289 
	`£rv”Log
(
LL_NOTICE
, "MASTER <-> REPLICA sync: Master‡ccepted‡ Partial Resynchronization.");

2290 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
) {

2291 
	`»disCommuniÿ‹Sy¡emd
("STATUS=MASTER <-> REPLICA sync: Partial Resynchronization‡ccepted. Readyo‡ccept connections.\n");

2292 
	`»disCommuniÿ‹Sy¡emd
("READY=1\n");

2301 
	`discÚÃùSÏves
();

2302 
	`ä“R•liÿtiÚBacklog
();

2307 ià(
psync_»suÉ
 =ğ
PSYNC_NOT_SUPPORTED
) {

2308 
	`£rv”Log
(
LL_NOTICE
,"Retrying with SYNC...");

2309 ià(
	`cÚnSyncWr™e
(
cÚn
,"SYNC\r\n",6,
£rv”
.
»¶_syncio_timeout
*1000) == -1) {

2310 
	`£rv”Log
(
LL_WARNING
,"I/Oƒrror writingo MASTER: %s",

2311 
	`¡»¼Ü
(
”ºo
));

2312 
”rÜ
;

2317 ià(!
	`u£DiskËssLßd
()) {

2318 
maxŒ›s
--) {

2319 
	`¢´štf
(
tmpfe
,256,

2320 "‹mp-%d.%ld.rdb",()
£rv”
.
unixtime
,()
	`g‘pid
());

2321 
dfd
 = 
	`İ’
(
tmpfe
,
O_CREAT
|
O_WRONLY
|
O_EXCL
,0644);

2322 ià(
dfd
 != -1) ;

2323 
	`¦“p
(1);

2325 ià(
dfd
 == -1) {

2326 
	`£rv”Log
(
LL_WARNING
,"O³nšgh‹m°fÃeded fÜ MASTER <-> REPLICA synchrÚiz©iÚ: %s",
	`¡»¼Ü
(
”ºo
));

2327 
”rÜ
;

2329 
£rv”
.
»¶_Œªsãr_tmpfe
 = 
	`z¡rdup
(
tmpfe
);

2330 
£rv”
.
»¶_Œªsãr_fd
 = 
dfd
;

2334 ià(
	`cÚnS‘R—dHªdËr
(
cÚn
, 
»adSyncBulkPaylßd
)

2335 =ğ
C_ERR
)

2337 
cÚnšfo
[
CONN_INFO_LEN
];

2338 
	`£rv”Log
(
LL_WARNING
,

2340 
	`¡»¼Ü
(
”ºo
), 
	`cÚnG‘Info
(
cÚn
, 
cÚnšfo
, (conninfo)));

2341 
”rÜ
;

2344 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_TRANSFER
;

2345 
£rv”
.
»¶_Œªsãr_size
 = -1;

2346 
£rv”
.
»¶_Œªsãr_»ad
 = 0;

2347 
£rv”
.
»¶_Œªsãr_Ï¡_fsync_off
 = 0;

2348 
£rv”
.
»¶_Œªsãr_Ï¡io
 = s”v”.
unixtime
;

2351 
”rÜ
:

2352 ià(
dfd
 !ğ-1è
	`şo£
(dfd);

2353 
	`cÚnClo£
(
cÚn
);

2354 
£rv”
.
»¶_Œªsãr_s
 = 
NULL
;

2355 ià(
£rv”
.
»¶_Œªsãr_fd
 != -1)

2356 
	`şo£
(
£rv”
.
»¶_Œªsãr_fd
);

2357 ià(
£rv”
.
»¶_Œªsãr_tmpfe
)

2358 
	`zä“
(
£rv”
.
»¶_Œªsãr_tmpfe
);

2359 
£rv”
.
»¶_Œªsãr_tmpfe
 = 
NULL
;

2360 
£rv”
.
»¶_Œªsãr_fd
 = -1;

2361 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

2364 
wr™e_”rÜ
:

2365 
	`£rv”Log
(
LL_WARNING
,"S’dšg commªdØma¡” iÀ»¶iÿtiÚ hªdshake: %s", 
”r
);

2366 
	`sdsä“
(
”r
);

2367 
”rÜ
;

2368 
	}
}

2370 
	$cÚÃùW™hMa¡”
() {

2371 
£rv”
.
»¶_Œªsãr_s
 = s”v”.
s_»¶iÿtiÚ
 ? 
	`cÚnC»©eTLS
(è: 
	`cÚnC»©eSock‘
();

2372 ià(
	`cÚnCÚÃù
(
£rv”
.
»¶_Œªsãr_s
, s”v”.
ma¡”ho¡
, s”v”.
ma¡”pÜt
,

2373 
NET_FIRST_BIND_ADDR
, 
syncW™hMa¡”
è=ğ
C_ERR
) {

2374 
	`£rv”Log
(
LL_WARNING
,"Unableo connecto MASTER: %s",

2375 
	`cÚnG‘La¡E¼Ü
(
£rv”
.
»¶_Œªsãr_s
));

2376 
	`cÚnClo£
(
£rv”
.
»¶_Œªsãr_s
);

2377 
£rv”
.
»¶_Œªsãr_s
 = 
NULL
;

2378  
C_ERR
;

2382 
£rv”
.
»¶_Œªsãr_Ï¡io
 = s”v”.
unixtime
;

2383 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECTING
;

2384  
C_OK
;

2385 
	}
}

2391 
	$undoCÚÃùW™hMa¡”
() {

2392 
	`cÚnClo£
(
£rv”
.
»¶_Œªsãr_s
);

2393 
£rv”
.
»¶_Œªsãr_s
 = 
NULL
;

2394 
	}
}

2399 
	$»¶iÿtiÚAbÜtSyncT¿nsãr
() {

2400 
	`£rv”As£¹
(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
);

2401 
	`undoCÚÃùW™hMa¡”
();

2402 ià(
£rv”
.
»¶_Œªsãr_fd
!=-1) {

2403 
	`şo£
(
£rv”
.
»¶_Œªsãr_fd
);

2404 
	`uÆšk
(
£rv”
.
»¶_Œªsãr_tmpfe
);

2405 
	`zä“
(
£rv”
.
»¶_Œªsãr_tmpfe
);

2406 
£rv”
.
»¶_Œªsãr_tmpfe
 = 
NULL
;

2407 
£rv”
.
»¶_Œªsãr_fd
 = -1;

2409 
	}
}

2419 
	$ÿnûlR•liÿtiÚHªdshake
() {

2420 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
) {

2421 
	`»¶iÿtiÚAbÜtSyncT¿nsãr
();

2422 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

2423 } ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTING
 ||

2424 
	`¦aveIsInHªdshakeS‹
())

2426 
	`undoCÚÃùW™hMa¡”
();

2427 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

2432 
	}
}

2435 
	$»¶iÿtiÚS‘Ma¡”
(*

, 
pÜt
) {

2436 
was_ma¡”
 = 
£rv”
.
ma¡”ho¡
 =ğ
NULL
;

2438 
	`sdsä“
(
£rv”
.
ma¡”ho¡
);

2439 
£rv”
.
ma¡”ho¡
 = 
	`sd¢ew
(

);

2440 
£rv”
.
ma¡”pÜt
 = 
pÜt
;

2441 ià(
£rv”
.
ma¡”
) {

2442 
	`ä“Cl›Á
(
£rv”
.
ma¡”
);

2444 
	`discÚÃùAÎBlockedCl›Ás
();

2448 
	`discÚÃùSÏves
();

2449 
	`ÿnûlR•liÿtiÚHªdshake
();

2452 ià(
was_ma¡”
) {

2453 
	`»¶iÿtiÚDisÿrdCachedMa¡”
();

2454 
	`»¶iÿtiÚCacheMa¡”UsšgMy£lf
();

2458 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED
,

2459 
REDISMODULE_EVENT_REPLROLECHANGED_NOW_REPLICA
,

2460 
NULL
);

2463 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
)

2464 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MASTER_LINK_CHANGE
,

2465 
REDISMODULE_SUBEVENT_MASTER_LINK_DOWN
,

2466 
NULL
);

2468 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

2469 
	}
}

2472 
	$»¶iÿtiÚUn£tMa¡”
() {

2473 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
) ;

2476 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
)

2477 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MASTER_LINK_CHANGE
,

2478 
REDISMODULE_SUBEVENT_MASTER_LINK_DOWN
,

2479 
NULL
);

2481 
	`sdsä“
(
£rv”
.
ma¡”ho¡
);

2482 
£rv”
.
ma¡”ho¡
 = 
NULL
;

2487 
	`shiáR•liÿtiÚId
();

2488 ià(
£rv”
.
ma¡”
è
	`ä“Cl›Á
(server.master);

2489 
	`»¶iÿtiÚDisÿrdCachedMa¡”
();

2490 
	`ÿnûlR•liÿtiÚHªdshake
();

2495 
	`discÚÃùSÏves
();

2496 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_NONE
;

2502 
£rv”
.
¦ave£ldb
 = -1;

2508 
£rv”
.
»¶_no_¦aves_sšû
 = s”v”.
unixtime
;

2511 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_REPLICATION_ROLE_CHANGED
,

2512 
REDISMODULE_EVENT_REPLROLECHANGED_NOW_MASTER
,

2513 
NULL
);

2517 ià(
£rv”
.
aof_’abËd
 && s”v”.
aof_¡©e
 =ğ
AOF_OFF
è
	`»¡¬tAOFAá”SYNC
();

2518 
	}
}

2522 
	$»¶iÿtiÚHªdËMa¡”DiscÚÃùiÚ
() {

2524 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
)

2525 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_MASTER_LINK_CHANGE
,

2526 
REDISMODULE_SUBEVENT_MASTER_LINK_DOWN
,

2527 
NULL
);

2529 
£rv”
.
ma¡”
 = 
NULL
;

2530 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECT
;

2531 
£rv”
.
»¶_down_sšû
 = s”v”.
unixtime
;

2535 
	}
}

2537 
	$»¶iÿofCommªd
(
ş›Á
 *
c
) {

2540 ià(
£rv”
.
şu¡”_’abËd
) {

2541 
	`addR•lyE¼Ü
(
c
,"REPLICAOF‚ot‡llowed in cluster mode.");

2547 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"no") &&

2548 !
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"one")) {

2549 ià(
£rv”
.
ma¡”ho¡
) {

2550 
	`»¶iÿtiÚUn£tMa¡”
();

2551 
sds
 
ş›Á
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
c
);

2552 
	`£rv”Log
(
LL_NOTICE
,"MASTER MODEƒnabled (user„equest from '%s')",

2553 
ş›Á
);

2554 
	`sdsä“
(
ş›Á
);

2557 
pÜt
;

2559 ià(
c
->
æags
 & 
CLIENT_SLAVE
)

2564 
	`addR•lyE¼Ü
(
c
, "Command is‚ot valid when client is‡„eplica.");

2568 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
pÜt
, 
NULL
è!ğ
C_OK
))

2572 ià(
£rv”
.
ma¡”ho¡
 && !
	`¡rÿ£cmp
(£rv”.ma¡”ho¡,
c
->
¬gv
[1]->
±r
)

2573 && 
£rv”
.
ma¡”pÜt
 =ğ
pÜt
) {

2574 
	`£rv”Log
(
LL_NOTICE
,"REPLICAOF would„esult into synchronization "

2577 
	`addR•lySds
(
c
,
	`sd¢ew
("+OK Already connectedo specified "

2583 
	`»¶iÿtiÚS‘Ma¡”
(
c
->
¬gv
[1]->
±r
, 
pÜt
);

2584 
sds
 
ş›Á
 = 
	`ÿtCl›ÁInfoSŒšg
(
	`sd£m±y
(),
c
);

2585 
	`£rv”Log
(
LL_NOTICE
,"REPLICAOF %s:%dƒnabled (user„equest from '%s')",

2586 
£rv”
.
ma¡”ho¡
, s”v”.
ma¡”pÜt
, 
ş›Á
);

2587 
	`sdsä“
(
ş›Á
);

2589 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

2590 
	}
}

2595 
	$rŞeCommªd
(
ş›Á
 *
c
) {

2596 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
) {

2597 
li¡I‹r
 
li
;

2598 
li¡Node
 *
Ê
;

2599 *
mbcouÁ
;

2600 
¦aves
 = 0;

2602 
	`addR•lyA¼ayL’
(
c
,3);

2603 
	`addR•lyBulkCBufãr
(
c
,"master",6);

2604 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
ma¡”_»¶_off£t
);

2605 
mbcouÁ
 = 
	`addR•lyDeã¼edL’
(
c
);

2606 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2607 (
Ê
 = 
	`li¡Next
(&
li
))) {

2608 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

2609 

[
NET_IP_STR_LEN
], *
¦ave
 = 
¦ave
->
¦ave_
;

2611 ià(
¦ave
[0] == '\0') {

2612 ià(
	`cÚnP“rToSŒšg
(
¦ave
->
cÚn
,

,(),
NULL
) == -1)

2614 
¦ave
 = 

;

2616 ià(
¦ave
->
»¶¡©e
 !ğ
SLAVE_STATE_ONLINE
) ;

2617 
	`addR•lyA¼ayL’
(
c
,3);

2618 
	`addR•lyBulkCSŒšg
(
c
,
¦ave
);

2619 
	`addR•lyBulkLÚgLÚg
(
c
,
¦ave
->
¦ave_li¡’šg_pÜt
);

2620 
	`addR•lyBulkLÚgLÚg
(
c
,
¦ave
->
»¶_ack_off
);

2621 
¦aves
++;

2623 
	`£tDeã¼edA¼ayL’
(
c
,
mbcouÁ
,
¦aves
);

2625 *
¦ave¡©e
 = 
NULL
;

2627 
	`addR•lyA¼ayL’
(
c
,5);

2628 
	`addR•lyBulkCBufãr
(
c
,"slave",5);

2629 
	`addR•lyBulkCSŒšg
(
c
,
£rv”
.
ma¡”ho¡
);

2630 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
ma¡”pÜt
);

2631 ià(
	`¦aveIsInHªdshakeS‹
()) {

2632 
¦ave¡©e
 = "handshake";

2634 
£rv”
.
»¶_¡©e
) {

2635 
REPL_STATE_NONE
: 
¦ave¡©e
 = "none"; ;

2636 
REPL_STATE_CONNECT
: 
¦ave¡©e
 = "connect"; ;

2637 
REPL_STATE_CONNECTING
: 
¦ave¡©e
 = "connecting"; ;

2638 
REPL_STATE_TRANSFER
: 
¦ave¡©e
 = "sync"; ;

2639 
REPL_STATE_CONNECTED
: 
¦ave¡©e
 = "connected"; ;

2640 : 
¦ave¡©e
 = "unknown"; ;

2643 
	`addR•lyBulkCSŒšg
(
c
,
¦ave¡©e
);

2644 
	`addR•lyLÚgLÚg
(
c
,
£rv”
.
ma¡”
 ? s”v”.ma¡”->
»¶off
 : -1);

2646 
	}
}

2651 
	$»¶iÿtiÚS’dAck
() {

2652 
ş›Á
 *
c
 = 
£rv”
.
ma¡”
;

2654 ià(
c
 !ğ
NULL
) {

2655 
c
->
æags
 |ğ
CLIENT_MASTER_FORCE_REPLY
;

2656 
	`addR•lyA¼ayL’
(
c
,3);

2657 
	`addR•lyBulkCSŒšg
(
c
,"REPLCONF");

2658 
	`addR•lyBulkCSŒšg
(
c
,"ACK");

2659 
	`addR•lyBulkLÚgLÚg
(
c
,c->
»¶off
);

2660 
c
->
æags
 &ğ~
CLIENT_MASTER_FORCE_REPLY
;

2662 
	}
}

2684 
	$»¶iÿtiÚCacheMa¡”
(
ş›Á
 *
c
) {

2685 
	`£rv”As£¹
(
£rv”
.
ma¡”
 !ğ
NULL
 && s”v”.
ÿched_ma¡”
 == NULL);

2686 
	`£rv”Log
(
LL_NOTICE
,"Cachinghe disconnected master state.");

2689 
	`uÆškCl›Á
(
c
);

2695 
	`sdsş—r
(
£rv”
.
ma¡”
->
qu”ybuf
);

2696 
	`sdsş—r
(
£rv”
.
ma¡”
->
³ndšg_qu”ybuf
);

2699 
£rv”
.
ma¡”
->
»¶off
 = 
	`adju¡M—nšgfulR•lOff£t
();

2700 
£rv”
.
ma¡”
->
»ad_»¶off
 = s”v”.ma¡”->
»¶off
;

2701 ià(
c
->
æags
 & 
CLIENT_MULTI
è
	`disÿrdT¿n§ùiÚ
(c);

2702 
	`li¡Em±y
(
c
->
»¶y
);

2703 
c
->
£ÁËn
 = 0;

2704 
c
->
»¶y_by‹s
 = 0;

2705 
c
->
buåos
 = 0;

2706 
	`»£tCl›Á
(
c
);

2710 
£rv”
.
ÿched_ma¡”
 = s”v”.
ma¡”
;

2713 ià(
c
->
³”id
) {

2714 
	`sdsä“
(
c
->
³”id
);

2715 
c
->
³”id
 = 
NULL
;

2721 
	`»¶iÿtiÚHªdËMa¡”DiscÚÃùiÚ
();

2722 
	}
}

2732 
	$adju¡M—nšgfulR•lOff£t
() {

2733 ià(
£rv”
.
ma¡”_»¶_off£t
 > s”v”.
ma¡”_»¶_m—nšgful_off£t
) {

2734 
d–
 = 
£rv”
.
ma¡”_»¶_off£t
 -

2735 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
;

2736 
	`£rv”Log
(
LL_NOTICE
,

2739 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
,

2740 
£rv”
.
ma¡”_»¶_off£t
,

2741 
d–
);

2742 
£rv”
.
ma¡”_»¶_off£t
 = s”v”.
ma¡”_»¶_m—nšgful_off£t
;

2743 ià(
£rv”
.
»¶_backlog_hi¡Ën
 <ğ
d–
) {

2744 
£rv”
.
»¶_backlog_hi¡Ën
 = 0;

2745 
£rv”
.
»¶_backlog_idx
 = 0;

2747 
£rv”
.
»¶_backlog_hi¡Ën
 -ğ
d–
;

2748 
£rv”
.
»¶_backlog_idx
 =

2749 (
£rv”
.
»¶_backlog_idx
 + (£rv”.
»¶_backlog_size
 - 
d–
)) %

2750 
£rv”
.
»¶_backlog_size
;

2753  
£rv”
.
ma¡”_»¶_off£t
;

2754 
	}
}

2765 
	$»¶iÿtiÚCacheMa¡”UsšgMy£lf
() {

2766 
	`£rv”Log
(
LL_NOTICE
,

2775 
£rv”
.
ma¡”_š™Ÿl_off£t
 = 
	`adju¡M—nšgfulR•lOff£t
();

2779 
	`»¶iÿtiÚC»©eMa¡”Cl›Á
(
NULL
,-1);

2782 
	`memıy
(
£rv”
.
ma¡”
->
»¶id
, server.replid, (server.replid));

2785 
	`uÆškCl›Á
(
£rv”
.
ma¡”
);

2786 
£rv”
.
ÿched_ma¡”
 = s”v”.
ma¡”
;

2787 
£rv”
.
ma¡”
 = 
NULL
;

2788 
	}
}

2792 
	$»¶iÿtiÚDisÿrdCachedMa¡”
() {

2793 ià(
£rv”
.
ÿched_ma¡”
 =ğ
NULL
) ;

2795 
	`£rv”Log
(
LL_NOTICE
,"Discarding…reviously cached master state.");

2796 
£rv”
.
ÿched_ma¡”
->
æags
 &ğ~
CLIENT_MASTER
;

2797 
	`ä“Cl›Á
(
£rv”
.
ÿched_ma¡”
);

2798 
£rv”
.
ÿched_ma¡”
 = 
NULL
;

2799 
	}
}

2807 
	$»¶iÿtiÚResu¼eùCachedMa¡”
(
cÚÃùiÚ
 *
cÚn
) {

2808 
£rv”
.
ma¡”
 = s”v”.
ÿched_ma¡”
;

2809 
£rv”
.
ÿched_ma¡”
 = 
NULL
;

2810 
£rv”
.
ma¡”
->
cÚn
 = conn;

2811 
	`cÚnS‘Priv©eD©a
(
£rv”
.
ma¡”
->
cÚn
, server.master);

2812 
£rv”
.
ma¡”
->
æags
 &ğ~(
CLIENT_CLOSE_AFTER_REPLY
|
CLIENT_CLOSE_ASAP
);

2813 
£rv”
.
ma¡”
->
auth’tiÿ‹d
 = 1;

2814 
£rv”
.
ma¡”
->
Ï¡š‹¿ùiÚ
 = s”v”.
unixtime
;

2815 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_CONNECTED
;

2816 
£rv”
.
»¶_down_sšû
 = 0;

2819 
	`lškCl›Á
(
£rv”
.
ma¡”
);

2820 ià(
	`cÚnS‘R—dHªdËr
(
£rv”
.
ma¡”
->
cÚn
, 
»adQu”yFromCl›Á
)) {

2821 
	`£rv”Log
(
LL_WARNING
,"E¼Ü„esu¼eùšghÿched ma¡”, impossibËØaddh»adabË hªdËr: %s", 
	`¡»¼Ü
(
”ºo
));

2822 
	`ä“Cl›ÁAsync
(
£rv”
.
ma¡”
);

2827 ià(
	`ş›ÁHasP’dšgR•l›s
(
£rv”
.
ma¡”
)) {

2828 ià(
	`cÚnS‘Wr™eHªdËr
(
£rv”
.
ma¡”
->
cÚn
, 
£ndR•lyToCl›Á
)) {

2829 
	`£rv”Log
(
LL_WARNING
,"E¼Ü„esu¼eùšghÿched ma¡”, impossibËØaddhwr™abË hªdËr: %s", 
	`¡»¼Ü
(
”ºo
));

2830 
	`ä“Cl›ÁAsync
(
£rv”
.
ma¡”
);

2833 
	}
}

2840 
	$»äeshGoodSÏvesCouÁ
() {

2841 
li¡I‹r
 
li
;

2842 
li¡Node
 *
Ê
;

2843 
good
 = 0;

2845 ià(!
£rv”
.
»¶_mš_¦aves_to_wr™e
 ||

2846 !
£rv”
.
»¶_mš_¦aves_max_Ïg
) ;

2848 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2849 (
Ê
 = 
	`li¡Next
(&
li
))) {

2850 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

2851 
time_t
 
Ïg
 = 
£rv”
.
unixtime
 - 
¦ave
->
»¶_ack_time
;

2853 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
 &&

2854 
Ïg
 <ğ
£rv”
.
»¶_mš_¦aves_max_Ïg
è
good
++;

2856 
£rv”
.
»¶_good_¦aves_couÁ
 = 
good
;

2857 
	}
}

2891 
	$»¶iÿtiÚSütCacheIn™
() {

2892 
£rv”
.
»¶_sütÿche_size
 = 10000;

2893 
£rv”
.
»¶_sütÿche_diù
 = 
	`diùC»©e
(&
»¶SütCacheDiùTy³
,
NULL
);

2894 
£rv”
.
»¶_sütÿche_fifo
 = 
	`li¡C»©e
();

2895 
	}
}

2908 
	$»¶iÿtiÚSütCacheFlush
() {

2909 
	`diùEm±y
(
£rv”
.
»¶_sütÿche_diù
,
NULL
);

2910 
	`li¡R–—£
(
£rv”
.
»¶_sütÿche_fifo
);

2911 
£rv”
.
»¶_sütÿche_fifo
 = 
	`li¡C»©e
();

2912 
	}
}

2916 
	$»¶iÿtiÚSütCacheAdd
(
sds
 
sha1
) {

2917 
»tv®
;

2918 
sds
 
key
 = 
	`sdsdup
(
sha1
);

2921 ià(
	`li¡L’gth
(
£rv”
.
»¶_sütÿche_fifo
è=ğ£rv”.
»¶_sütÿche_size
)

2923 
li¡Node
 *
Ê
 = 
	`li¡La¡
(
£rv”
.
»¶_sütÿche_fifo
);

2924 
sds
 
Şde¡
 = 
	`li¡NodeV®ue
(
Ê
);

2926 
»tv®
 = 
	`diùD–‘e
(
£rv”
.
»¶_sütÿche_diù
,
Şde¡
);

2927 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

2928 
	`li¡D–Node
(
£rv”
.
»¶_sütÿche_fifo
,
Ê
);

2932 
»tv®
 = 
	`diùAdd
(
£rv”
.
»¶_sütÿche_diù
,
key
,
NULL
);

2933 
	`li¡AddNodeH—d
(
£rv”
.
»¶_sütÿche_fifo
,
key
);

2934 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

2935 
	}
}

2939 
	$»¶iÿtiÚSütCacheExi¡s
(
sds
 
sha1
) {

2940  
	`diùFšd
(
£rv”
.
»¶_sütÿche_diù
,
sha1
è!ğ
NULL
;

2941 
	}
}

2973 
	$»¶iÿtiÚReque¡AckFromSÏves
() {

2974 
£rv”
.
g‘_ack_äom_¦aves
 = 1;

2975 
	}
}

2979 
	$»¶iÿtiÚCouÁAcksByOff£t
(
off£t
) {

2980 
li¡I‹r
 
li
;

2981 
li¡Node
 *
Ê
;

2982 
couÁ
 = 0;

2984 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

2985 (
Ê
 = 
	`li¡Next
(&
li
))) {

2986 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

2988 ià(
¦ave
->
»¶¡©e
 !ğ
SLAVE_STATE_ONLINE
) ;

2989 ià(
¦ave
->
»¶_ack_off
 >ğ
off£t
è
couÁ
++;

2991  
couÁ
;

2992 
	}
}

2996 
	$wa™Commªd
(
ş›Á
 *
c
) {

2997 
m¡ime_t
 
timeout
;

2998 
num»¶iÿs
, 
ack»¶iÿs
;

2999 
off£t
 = 
c
->
woff
;

3001 ià(
£rv”
.
ma¡”ho¡
) {

3002 
	`addR•lyE¼Ü
(
c
,"WAIT cannot be used with„eplica instances. Please‡lso‚otehat since Redis 4.0 if‡„eplica is configuredo be writable (which is‚othe default) writeso„eplicas‡re just†ocal‡nd‡re‚ot…ropagated.");

3007 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[1],&
num»¶iÿs
,
NULL
è!ğ
C_OK
)

3009 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
timeout
,
UNIT_MILLISECONDS
)

3010 !ğ
C_OK
) ;

3013 
ack»¶iÿs
 = 
	`»¶iÿtiÚCouÁAcksByOff£t
(
c
->
woff
);

3014 ià(
ack»¶iÿs
 >ğ
num»¶iÿs
 || 
c
->
æags
 & 
CLIENT_MULTI
) {

3015 
	`addR•lyLÚgLÚg
(
c
,
ack»¶iÿs
);

3021 
c
->
bpİ
.
timeout
 =imeout;

3022 
c
->
bpİ
.
»¶off£t
 = 
off£t
;

3023 
c
->
bpİ
.
num»¶iÿs
 =‚umreplicas;

3024 
	`li¡AddNodeTa
(
£rv”
.
ş›Ás_wa™šg_acks
,
c
);

3025 
	`blockCl›Á
(
c
,
BLOCKED_WAIT
);

3029 
	`»¶iÿtiÚReque¡AckFromSÏves
();

3030 
	}
}

3036 
	$unblockCl›ÁWa™šgR•liÿs
(
ş›Á
 *
c
) {

3037 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
£rv”
.
ş›Ás_wa™šg_acks
,
c
);

3038 
	`£rv”As£¹
(
Ê
 !ğ
NULL
);

3039 
	`li¡D–Node
(
£rv”
.
ş›Ás_wa™šg_acks
,
Ê
);

3040 
	}
}

3044 
	$´oûssCl›ÁsWa™šgR•liÿs
() {

3045 
Ï¡_off£t
 = 0;

3046 
Ï¡_num»¶iÿs
 = 0;

3048 
li¡I‹r
 
li
;

3049 
li¡Node
 *
Ê
;

3051 
	`li¡Rewšd
(
£rv”
.
ş›Ás_wa™šg_acks
,&
li
);

3052 (
Ê
 = 
	`li¡Next
(&
li
))) {

3053 
ş›Á
 *
c
 = 
Ê
->
v®ue
;

3059 ià(
Ï¡_off£t
 &&†a¡_off£ˆ> 
c
->
bpİ
.
»¶off£t
 &&

3060 
Ï¡_num»¶iÿs
 > 
c
->
bpİ
.
num»¶iÿs
)

3062 
	`unblockCl›Á
(
c
);

3063 
	`addR•lyLÚgLÚg
(
c
,
Ï¡_num»¶iÿs
);

3065 
num»¶iÿs
 = 
	`»¶iÿtiÚCouÁAcksByOff£t
(
c
->
bpİ
.
»¶off£t
);

3067 ià(
num»¶iÿs
 >ğ
c
->
bpİ
.numreplicas) {

3068 
Ï¡_off£t
 = 
c
->
bpİ
.
»¶off£t
;

3069 
Ï¡_num»¶iÿs
 = 
num»¶iÿs
;

3070 
	`unblockCl›Á
(
c
);

3071 
	`addR•lyLÚgLÚg
(
c
,
num»¶iÿs
);

3075 
	}
}

3079 
	$»¶iÿtiÚG‘SÏveOff£t
() {

3080 
off£t
 = 0;

3082 ià(
£rv”
.
ma¡”ho¡
 !ğ
NULL
) {

3083 ià(
£rv”
.
ma¡”
) {

3084 
off£t
 = 
£rv”
.
ma¡”
->
»¶off
;

3085 } ià(
£rv”
.
ÿched_ma¡”
) {

3086 
off£t
 = 
£rv”
.
ÿched_ma¡”
->
»¶off
;

3093 ià(
off£t
 < 0) offset = 0;

3094  
off£t
;

3095 
	}
}

3100 
	$»¶iÿtiÚCrÚ
() {

3101 
»¶iÿtiÚ_üÚ_loİs
 = 0;

3104 ià(
£rv”
.
ma¡”ho¡
 &&

3105 (
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTING
 ||

3106 
	`¦aveIsInHªdshakeS‹
()) &&

3107 (
	`time
(
NULL
)-
£rv”
.
»¶_Œªsãr_Ï¡io
è> s”v”.
»¶_timeout
)

3109 
	`£rv”Log
(
LL_WARNING
,"Timeout connectingohe MASTER...");

3110 
	`ÿnûlR•liÿtiÚHªdshake
();

3114 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
 &&

3115 (
	`time
(
NULL
)-
£rv”
.
»¶_Œªsãr_Ï¡io
è> s”v”.
»¶_timeout
)

3117 
	`£rv”Log
(
LL_WARNING
,"Timeout„eceiving bulk data from MASTER... Ifhe…roblem…ersistsryo sethe 'repl-timeout'…arameter in„edis.confo‡†arger value.");

3118 
	`ÿnûlR•liÿtiÚHªdshake
();

3122 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
 &&

3123 (
	`time
(
NULL
)-
£rv”
.
ma¡”
->
Ï¡š‹¿ùiÚ
è> s”v”.
»¶_timeout
)

3125 
	`£rv”Log
(
LL_WARNING
,"MASTERimeout:‚o data‚or PING„eceived...");

3126 
	`ä“Cl›Á
(
£rv”
.
ma¡”
);

3130 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECT
) {

3131 
	`£rv”Log
(
LL_NOTICE
,"Connectingo MASTER %s:%d",

3132 
£rv”
.
ma¡”ho¡
, s”v”.
ma¡”pÜt
);

3133 ià(
	`cÚÃùW™hMa¡”
(è=ğ
C_OK
) {

3134 
	`£rv”Log
(
LL_NOTICE
,"MASTER <-> REPLICA sync started");

3141 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
ma¡”
 &&

3142 !(
£rv”
.
ma¡”
->
æags
 & 
CLIENT_PRE_PSYNC
))

3143 
	`»¶iÿtiÚS’dAck
();

3149 
li¡I‹r
 
li
;

3150 
li¡Node
 *
Ê
;

3151 
robj
 *
pšg_¬gv
[1];

3154 ià((
»¶iÿtiÚ_üÚ_loİs
 % 
£rv”
.
»¶_pšg_¦ave_³riod
) == 0 &&

3155 
	`li¡L’gth
(
£rv”
.
¦aves
))

3161 
mªu®_çov”_š_´og»ss
 =

3162 
£rv”
.
şu¡”_’abËd
 &&

3163 
£rv”
.
şu¡”
->
mf_’d
 &&

3164 
	`ş›ÁsA»Pau£d
();

3166 ià(!
mªu®_çov”_š_´og»ss
) {

3167 
befÜe_pšg
 = 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
;

3168 
pšg_¬gv
[0] = 
	`ü—‹SŒšgObjeù
("PING",4);

3169 
	`»¶iÿtiÚF“dSÏves
(
£rv”
.
¦aves
, s”v”.
¦ave£ldb
,

3170 
pšg_¬gv
, 1);

3171 
	`deüRefCouÁ
(
pšg_¬gv
[0]);

3178 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = 
befÜe_pšg
;

3196 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

3197 (
Ê
 = 
	`li¡Next
(&
li
))) {

3198 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

3200 
is_´esync
 =

3201 (
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
 ||

3202 (
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_END
 &&

3203 
£rv”
.
rdb_chd_ty³
 !ğ
RDB_CHILD_TYPE_SOCKET
));

3205 ià(
is_´esync
) {

3206 
	`cÚnWr™e
(
¦ave
->
cÚn
, "\n", 1);

3211 ià(
	`li¡L’gth
(
£rv”
.
¦aves
)) {

3212 
li¡I‹r
 
li
;

3213 
li¡Node
 *
Ê
;

3215 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

3216 (
Ê
 = 
	`li¡Next
(&
li
))) {

3217 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

3219 ià(
¦ave
->
»¶¡©e
 !ğ
SLAVE_STATE_ONLINE
) ;

3220 ià(
¦ave
->
æags
 & 
CLIENT_PRE_PSYNC
) ;

3221 ià((
£rv”
.
unixtime
 - 
¦ave
->
»¶_ack_time
è> s”v”.
»¶_timeout
)

3223 
	`£rv”Log
(
LL_WARNING
, "Disconnectingimedout„eplica: %s",

3224 
	`»¶iÿtiÚG‘SÏveName
(
¦ave
));

3225 
	`ä“Cl›Á
(
¦ave
);

3236 ià(
	`li¡L’gth
(
£rv”
.
¦aves
è=ğ0 && s”v”.
»¶_backlog_time_lim™
 &&

3237 
£rv”
.
»¶_backlog
 && s”v”.
ma¡”ho¡
 =ğ
NULL
)

3239 
time_t
 
idË
 = 
£rv”
.
unixtime
 - s”v”.
»¶_no_¦aves_sšû
;

3241 ià(
idË
 > 
£rv”
.
»¶_backlog_time_lim™
) {

3257 
	`chªgeR•liÿtiÚId
();

3258 
	`ş—rR•liÿtiÚId2
();

3259 
	`ä“R•liÿtiÚBacklog
();

3260 
	`£rv”Log
(
LL_NOTICE
,

3263 (è
£rv”
.
»¶_backlog_time_lim™
);

3270 ià(
	`li¡L’gth
(
£rv”
.
¦aves
) == 0 &&

3271 
£rv”
.
aof_¡©e
 =ğ
AOF_OFF
 &&

3272 
	`li¡L’gth
(
£rv”
.
»¶_sütÿche_fifo
) != 0)

3274 
	`»¶iÿtiÚSütCacheFlush
();

3283 ià(!
	`hasAùiveChdProûss
()) {

3284 
time_t
 
idË
, 
max_idË
 = 0;

3285 
¦aves_wa™šg
 = 0;

3286 
mšÿ·
 = -1;

3287 
li¡Node
 *
Ê
;

3288 
li¡I‹r
 
li
;

3290 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

3291 (
Ê
 = 
	`li¡Next
(&
li
))) {

3292 
ş›Á
 *
¦ave
 = 
Ê
->
v®ue
;

3293 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_WAIT_BGSAVE_START
) {

3294 
idË
 = 
£rv”
.
unixtime
 - 
¦ave
->
Ï¡š‹¿ùiÚ
;

3295 ià(
idË
 > 
max_idË
) max_idle = idle;

3296 
¦aves_wa™šg
++;

3297 
mšÿ·
 = (mšÿ· =ğ-1è? 
¦ave
->
¦ave_ÿ·
 :

3298 (
mšÿ·
 & 
¦ave
->
¦ave_ÿ·
);

3302 ià(
¦aves_wa™šg
 &&

3303 (!
£rv”
.
»¶_diskËss_sync
 ||

3304 
max_idË
 > 
£rv”
.
»¶_diskËss_sync_d–ay
))

3309 
	`¡¬tBg§veFÜR•liÿtiÚ
(
mšÿ·
);

3315 
	`»moveRDBU£dToSyncR•liÿs
();

3318 
	`»äeshGoodSÏvesCouÁ
();

3319 
»¶iÿtiÚ_üÚ_loİs
++;

3320 
	}
}

	@rio.c

48 
	~"fmaüos.h
"

49 
	~<¡ršg.h
>

50 
	~<¡dio.h
>

51 
	~<uni¡d.h
>

52 
	~"rio.h
"

53 
	~"ut.h
"

54 
	~"üc64.h
"

55 
	~"cÚfig.h
"

56 
	~"£rv”.h
"

61 
size_t
 
	$rioBufãrWr™e
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

62 
r
->
io
.
bufãr
.
±r
 = 
	`sdsÿ’
Ô->io.bufãr.±r,(*)
buf
,
Ën
);

63 
r
->
io
.
bufãr
.
pos
 +ğ
Ën
;

65 
	}
}

68 
size_t
 
	$rioBufãrR—d
(
rio
 *
r
, *
buf
, 
size_t
 
Ën
) {

69 ià(
	`sd¦’
(
r
->
io
.
bufãr
.
±r
)-r->io.bufãr.
pos
 < 
Ën
)

71 
	`memıy
(
buf
,
r
->
io
.
bufãr
.
±r
+r->io.bufãr.
pos
,
Ën
);

72 
r
->
io
.
bufãr
.
pos
 +ğ
Ën
;

74 
	}
}

77 
off_t
 
	$rioBufãrT–l
(
rio
 *
r
) {

78  
r
->
io
.
bufãr
.
pos
;

79 
	}
}

83 
	$rioBufãrFlush
(
rio
 *
r
) {

84 
	`UNUSED
(
r
);

86 
	}
}

88 cÚ¡ 
rio
 
	grioBufãrIO
 = {

89 
rioBufãrR—d
,

90 
rioBufãrWr™e
,

91 
rioBufãrT–l
,

92 
rioBufãrFlush
,

93 
NULL
,

98 { { 
NULL
, 0 } }

101 
	$rioIn™W™hBufãr
(
rio
 *
r
, 
sds
 
s
) {

102 *
r
 = 
rioBufãrIO
;

103 
r
->
io
.
bufãr
.
±r
 = 
s
;

104 
r
->
io
.
bufãr
.
pos
 = 0;

105 
	}
}

110 
size_t
 
	$rioFeWr™e
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

111 
size_t
 
»tv®
;

113 
»tv®
 = 
	`fwr™e
(
buf
,
Ën
,1,
r
->
io
.
fe
.
å
);

114 
r
->
io
.
fe
.
bufã»d
 +ğ
Ën
;

116 ià(
r
->
io
.
fe
.
autosync
 &&

117 
r
->
io
.
fe
.
bufã»d
 >ğr->io.fe.
autosync
)

119 
	`fæush
(
r
->
io
.
fe
.
å
);

120 
	`»dis_fsync
(
	`f’o
(
r
->
io
.
fe
.
å
));

121 
r
->
io
.
fe
.
bufã»d
 = 0;

123  
»tv®
;

124 
	}
}

127 
size_t
 
	$rioFeR—d
(
rio
 *
r
, *
buf
, 
size_t
 
Ën
) {

128  
	`ä—d
(
buf
,
Ën
,1,
r
->
io
.
fe
.
å
);

129 
	}
}

132 
off_t
 
	$rioFeT–l
(
rio
 *
r
) {

133  
	`á–lo
(
r
->
io
.
fe
.
å
);

134 
	}
}

138 
	$rioFeFlush
(
rio
 *
r
) {

139  (
	`fæush
(
r
->
io
.
fe
.
å
) == 0) ? 1 : 0;

140 
	}
}

142 cÚ¡ 
rio
 
	grioFeIO
 = {

143 
rioFeR—d
,

144 
rioFeWr™e
,

145 
rioFeT–l
,

146 
rioFeFlush
,

147 
NULL
,

152 { { 
NULL
, 0 } }

155 
	$rioIn™W™hFe
(
rio
 *
r
, 
FILE
 *
å
) {

156 *
r
 = 
rioFeIO
;

157 
r
->
io
.
fe
.
å
 = fp;

158 
r
->
io
.
fe
.
bufã»d
 = 0;

159 
r
->
io
.
fe
.
autosync
 = 0;

160 
	}
}

168 
size_t
 
	$rioCÚnWr™e
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

169 
	`UNUSED
(
r
);

170 
	`UNUSED
(
buf
);

171 
	`UNUSED
(
Ën
);

173 
	}
}

176 
size_t
 
	$rioCÚnR—d
(
rio
 *
r
, *
buf
, 
size_t
 
Ën
) {

177 
size_t
 
ava
 = 
	`sd¦’
(
r
->
io
.
cÚn
.
buf
)-r->io.cÚn.
pos
;

180 ià(
	`sd¦’
(
r
->
io
.
cÚn
.
buf
è+ 
	`sd§va
Ô->io.cÚn.bufè< 
Ën
)

181 
r
->
io
.
cÚn
.
buf
 = 
	`sdsMakeRoomFÜ
Ô->io.cÚn.buf, 
Ën
 - 
	`sd¦’
(r->io.conn.buf));

185 ià(
Ën
 > 
ava
 && 
	`sd§va
(
r
->
io
.
cÚn
.
buf
) <†en -‡vail) {

186 
	`sd¤ªge
(
r
->
io
.
cÚn
.
buf
,„->io.cÚn.
pos
, -1);

187 
r
->
io
.
cÚn
.
pos
 = 0;

191 
Ën
 > 
	`sd¦’
(
r
->
io
.
cÚn
.
buf
è-„->io.cÚn.
pos
) {

192 
size_t
 
bufã»d
 = 
	`sd¦’
(
r
->
io
.
cÚn
.
buf
è-„->io.cÚn.
pos
;

193 
size_t
 
tÜ—d
 = 
Ën
 - 
bufã»d
;

196 ià(
tÜ—d
 < 
PROTO_IOBUF_LEN
)oread = PROTO_IOBUF_LEN;

197 ià(
tÜ—d
 > 
	`sd§va
(
r
->
io
.
cÚn
.
buf
))oread = sdsavail(r->io.conn.buf);

198 ià(
r
->
io
.
cÚn
.
»ad_lim™
 != 0 &&

199 
r
->
io
.
cÚn
.
»ad_so_çr
 + 
bufã»d
 + 
tÜ—d
 >„->io.cÚn.
»ad_lim™
)

201 ià(
r
->
io
.
cÚn
.
»ad_lim™
 >ğr->io.cÚn.
»ad_so_çr
 - 
bufã»d
)

202 
tÜ—d
 = 
r
->
io
.
cÚn
.
»ad_lim™
 -„->io.cÚn.
»ad_so_çr
 - 
bufã»d
;

204 
”ºo
 = 
EOVERFLOW
;

208 
»tv®
 = 
	`cÚnR—d
(
r
->
io
.
cÚn
.conn,

209 (*)
r
->
io
.
cÚn
.
buf
 + 
	`sd¦’
(r->io.conn.buf),

210 
tÜ—d
);

211 ià(
»tv®
 <= 0) {

212 ià(
”ºo
 =ğ
EWOULDBLOCK
è”ºØğ
ETIMEDOUT
;

215 
	`sdsInüL’
(
r
->
io
.
cÚn
.
buf
, 
»tv®
);

218 
	`memıy
(
buf
, (*)
r
->
io
.
cÚn
.buà+„->io.cÚn.
pos
, 
Ën
);

219 
r
->
io
.
cÚn
.
»ad_so_çr
 +ğ
Ën
;

220 
r
->
io
.
cÚn
.
pos
 +ğ
Ën
;

221  
Ën
;

222 
	}
}

225 
off_t
 
	$rioCÚnT–l
(
rio
 *
r
) {

226  
r
->
io
.
cÚn
.
»ad_so_çr
;

227 
	}
}

231 
	$rioCÚnFlush
(
rio
 *
r
) {

234  
	`rioCÚnWr™e
(
r
,
NULL
,0);

235 
	}
}

237 cÚ¡ 
rio
 
	grioCÚnIO
 = {

238 
rioCÚnR—d
,

239 
rioCÚnWr™e
,

240 
rioCÚnT–l
,

241 
rioCÚnFlush
,

242 
NULL
,

247 { { 
NULL
, 0 } }

252 
	$rioIn™W™hCÚn
(
rio
 *
r
, 
cÚÃùiÚ
 *
cÚn
, 
size_t
 
»ad_lim™
) {

253 *
r
 = 
rioCÚnIO
;

254 
r
->
io
.
cÚn
.conn = conn;

255 
r
->
io
.
cÚn
.
pos
 = 0;

256 
r
->
io
.
cÚn
.
»ad_lim™
 =„ead_limit;

257 
r
->
io
.
cÚn
.
»ad_so_çr
 = 0;

258 
r
->
io
.
cÚn
.
buf
 = 
	`sd¢ewËn
(
NULL
, 
PROTO_IOBUF_LEN
);

259 
	`sdsş—r
(
r
->
io
.
cÚn
.
buf
);

260 
	}
}

264 
	$rioF»eCÚn
(
rio
 *
r
, 
sds
 *
»maššg
) {

265 ià(
»maššg
 && (
size_t
)
r
->
io
.
cÚn
.
pos
 < 
	`sd¦’
Ô->io.cÚn.
buf
)) {

266 ià(
r
->
io
.
cÚn
.
pos
 > 0è
	`sd¤ªge
Ô->io.cÚn.
buf
,„->io.conn.pos, -1);

267 *
»maššg
 = 
r
->
io
.
cÚn
.
buf
;

269 
	`sdsä“
(
r
->
io
.
cÚn
.
buf
);

270 ià(
»maššg
è*»maššg = 
NULL
;

272 
r
->
io
.
cÚn
.
buf
 = 
NULL
;

273 
	}
}

286 
size_t
 
	$rioFdWr™e
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

287 
ssize_t
 
»tv®
;

288 *
p
 = (*è
buf
;

289 
doæush
 = (
buf
 =ğ
NULL
 && 
Ën
 == 0);

295 ià(
Ën
 > 
PROTO_IOBUF_LEN
) {

297 ià(
	`sd¦’
(
r
->
io
.
fd
.
buf
)) {

298 ià(
	`rioFdWr™e
(
r
, 
NULL
, 0) == 0)

303 ià(
Ën
) {

304 
r
->
io
.
fd
.
buf
 = 
	`sdsÿ’
Ô->io.fd.buf,buf,
Ën
);

305 ià(
	`sd¦’
(
r
->
io
.
fd
.
buf
è> 
PROTO_IOBUF_LEN
)

306 
doæush
 = 1;

307 ià(!
doæush
)

311 
p
 = (*è
r
->
io
.
fd
.
buf
;

312 
Ën
 = 
	`sd¦’
(
r
->
io
.
fd
.
buf
);

315 
size_t
 
nwr™‹n
 = 0;

316 
nwr™‹n
 !ğ
Ën
) {

317 
»tv®
 = 
	`wr™e
(
r
->
io
.
fd
.fd,
p
+
nwr™‹n
,
Ën
-nwritten);

318 ià(
»tv®
 <= 0) {

323 ià(
»tv®
 =ğ-1 && 
”ºo
 =ğ
EWOULDBLOCK
è”ºØğ
ETIMEDOUT
;

326 
nwr™‹n
 +ğ
»tv®
;

329 
r
->
io
.
fd
.
pos
 +ğ
Ën
;

330 
	`sdsş—r
(
r
->
io
.
fd
.
buf
);

332 
	}
}

335 
size_t
 
	$rioFdR—d
(
rio
 *
r
, *
buf
, 
size_t
 
Ën
) {

336 
	`UNUSED
(
r
);

337 
	`UNUSED
(
buf
);

338 
	`UNUSED
(
Ën
);

340 
	}
}

343 
off_t
 
	$rioFdT–l
(
rio
 *
r
) {

344  
r
->
io
.
fd
.
pos
;

345 
	}
}

349 
	$rioFdFlush
(
rio
 *
r
) {

352  
	`rioFdWr™e
(
r
,
NULL
,0);

353 
	}
}

355 cÚ¡ 
rio
 
	grioFdIO
 = {

356 
rioFdR—d
,

357 
rioFdWr™e
,

358 
rioFdT–l
,

359 
rioFdFlush
,

360 
NULL
,

365 { { 
NULL
, 0 } }

368 
	$rioIn™W™hFd
(
rio
 *
r
, 
fd
) {

369 *
r
 = 
rioFdIO
;

370 
r
->
io
.
fd
.fd = fd;

371 
r
->
io
.
fd
.
pos
 = 0;

372 
r
->
io
.
fd
.
buf
 = 
	`sd£m±y
();

373 
	}
}

376 
	$rioF»eFd
(
rio
 *
r
) {

377 
	`sdsä“
(
r
->
io
.
fd
.
buf
);

378 
	}
}

384 
	$rioG’”icUpd©eChecksum
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

385 
r
->
cksum
 = 
	`üc64
Ô->cksum,
buf
,
Ën
);

386 
	}
}

396 
	$rioS‘AutoSync
(
rio
 *
r
, 
off_t
 
by‹s
) {

397 if(
r
->
wr™e
 !ğ
rioFeIO
.write) ;

398 
r
->
io
.
fe
.
autosync
 = 
by‹s
;

399 
	}
}

407 
size_t
 
	$rioWr™eBulkCouÁ
(
rio
 *
r
, 
´efix
, 
couÁ
) {

408 
cbuf
[128];

409 
ş’
;

411 
cbuf
[0] = 
´efix
;

412 
ş’
 = 1+
	`Î2¡ršg
(
cbuf
+1,(cbuf)-1,
couÁ
);

413 
cbuf
[
ş’
++] = '\r';

414 
cbuf
[
ş’
++] = '\n';

415 ià(
	`rioWr™e
(
r
,
cbuf
,
ş’
) == 0)  0;

416  
ş’
;

417 
	}
}

420 
size_t
 
	$rioWr™eBulkSŒšg
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

421 
size_t
 
nwr™‹n
;

423 ià((
nwr™‹n
 = 
	`rioWr™eBulkCouÁ
(
r
,'$',
Ën
)) == 0)  0;

424 ià(
Ën
 > 0 && 
	`rioWr™e
(
r
,
buf
,len) == 0)  0;

425 ià(
	`rioWr™e
(
r
,"\r\n",2) == 0)  0;

426  
nwr™‹n
+
Ën
+2;

427 
	}
}

430 
size_t
 
	$rioWr™eBulkLÚgLÚg
(
rio
 *
r
, 
l
) {

431 
lbuf
[32];

432 
Î’
;

434 
Î’
 = 
	`Î2¡ršg
(
lbuf
,Öbuf),
l
);

435  
	`rioWr™eBulkSŒšg
(
r
,
lbuf
,
Î’
);

436 
	}
}

439 
size_t
 
	$rioWr™eBulkDoubË
(
rio
 *
r
, 
d
) {

440 
dbuf
[128];

441 
dËn
;

443 
dËn
 = 
	`¢´štf
(
dbuf
,(dbuf),"%.17g",
d
);

444  
	`rioWr™eBulkSŒšg
(
r
,
dbuf
,
dËn
);

445 
	}
}

	@rio.h

32 #iâdeà
__REDIS_RIO_H


33 
	#__REDIS_RIO_H


	)

35 
	~<¡dio.h
>

36 
	~<¡dšt.h
>

37 
	~"sds.h
"

38 
	~"cÚÃùiÚ.h
"

40 
	#RIO_FLAG_READ_ERROR
 (1<<0)

	)

41 
	#RIO_FLAG_WRITE_ERROR
 (1<<1)

	)

43 
	s_rio
 {

47 
size_t
 (*
»ad
)(
	m_rio
 *, *
	mbuf
, size_ˆ
	mËn
);

48 
size_t
 (*
wr™e
)(
	m_rio
 *, cÚ¡ *
	mbuf
, size_ˆ
	mËn
);

49 
off_t
 (*
‹Î
)(
	m_rio
 *);

50 (*
	mæush
)(
	m_rio
 *);

56 (*
	mupd©e_cksum
)(
	m_rio
 *, cÚ¡ *
	mbuf
, 
size_t
 
	mËn
);

59 
ušt64_t
 
	mcksum
, 
	mæags
;

62 
size_t
 
	m´oûs£d_by‹s
;

65 
size_t
 
	mmax_´oûssšg_chunk
;

71 
sds
 
	m±r
;

72 
off_t
 
	mpos
;

73 } 
	mbufãr
;

76 
FILE
 *
	må
;

77 
off_t
 
	mbufã»d
;

78 
off_t
 
	mautosync
;

79 } 
	mfe
;

82 
cÚÃùiÚ
 *
	mcÚn
;

83 
off_t
 
	mpos
;

84 
sds
 
	mbuf
;

85 
size_t
 
	m»ad_lim™
;

86 
size_t
 
	m»ad_so_çr
;

87 } 
	mcÚn
;

90 
	mfd
;

91 
off_t
 
	mpos
;

92 
sds
 
	mbuf
;

93 } 
	mfd
;

94 } 
	mio
;

97 
_rio
 
	trio
;

103 
šlše
 
size_t
 
	$rioWr™e
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
) {

104 ià(
r
->
æags
 & 
RIO_FLAG_WRITE_ERROR
)  0;

105 
Ën
) {

106 
size_t
 
by‹s_to_wr™e
 = (
r
->
max_´oûssšg_chunk
 &&„->max_´oûssšg_chunk < 
Ën
) ?„->max_processing_chunk :†en;

107 ià(
r
->
upd©e_cksum
èr->
	`upd©e_cksum
Ô,
buf
,
by‹s_to_wr™e
);

108 ià(
r
->
	`wr™e
Ô,
buf
,
by‹s_to_wr™e
) == 0) {

109 
r
->
æags
 |ğ
RIO_FLAG_WRITE_ERROR
;

112 
buf
 = (*)buà+ 
by‹s_to_wr™e
;

113 
Ën
 -ğ
by‹s_to_wr™e
;

114 
r
->
´oûs£d_by‹s
 +ğ
by‹s_to_wr™e
;

117 
	}
}

119 
šlše
 
size_t
 
	$rioR—d
(
rio
 *
r
, *
buf
, 
size_t
 
Ën
) {

120 ià(
r
->
æags
 & 
RIO_FLAG_READ_ERROR
)  0;

121 
Ën
) {

122 
size_t
 
by‹s_to_»ad
 = (
r
->
max_´oûssšg_chunk
 &&„->max_´oûssšg_chunk < 
Ën
) ?„->max_processing_chunk :†en;

123 ià(
r
->
	`»ad
Ô,
buf
,
by‹s_to_»ad
) == 0) {

124 
r
->
æags
 |ğ
RIO_FLAG_READ_ERROR
;

127 ià(
r
->
upd©e_cksum
èr->
	`upd©e_cksum
Ô,
buf
,
by‹s_to_»ad
);

128 
buf
 = (*)buà+ 
by‹s_to_»ad
;

129 
Ën
 -ğ
by‹s_to_»ad
;

130 
r
->
´oûs£d_by‹s
 +ğ
by‹s_to_»ad
;

133 
	}
}

135 
šlše
 
off_t
 
	$rioT–l
(
rio
 *
r
) {

136  
r
->
	`‹Î
(r);

137 
	}
}

139 
šlše
 
	$rioFlush
(
rio
 *
r
) {

140  
r
->
	`æush
(r);

141 
	}
}

146 
šlše
 
	$rioG‘R—dE¼Ü
(
rio
 *
r
) {

147  (
r
->
æags
 & 
RIO_FLAG_READ_ERROR
) != 0;

148 
	}
}

151 
šlše
 
	$rioG‘Wr™eE¼Ü
(
rio
 *
r
) {

152  (
r
->
æags
 & 
RIO_FLAG_WRITE_ERROR
) != 0;

153 
	}
}

155 
šlše
 
	$rioCË¬E¼Üs
(
rio
 *
r
) {

156 
r
->
æags
 &ğ~(
RIO_FLAG_READ_ERROR
|
RIO_FLAG_WRITE_ERROR
);

157 
	}
}

159 
rioIn™W™hFe
(
rio
 *
r
, 
FILE
 *
å
);

160 
rioIn™W™hBufãr
(
rio
 *
r
, 
sds
 
s
);

161 
rioIn™W™hCÚn
(
rio
 *
r
, 
cÚÃùiÚ
 *
cÚn
, 
size_t
 
»ad_lim™
);

162 
rioIn™W™hFd
(
rio
 *
r
, 
fd
);

164 
rioF»eFd
(
rio
 *
r
);

165 
rioF»eCÚn
(
rio
 *
r
, 
sds
* 
out_»maššgBufã»dD©a
);

167 
size_t
 
rioWr™eBulkCouÁ
(
rio
 *
r
, 
´efix
, 
couÁ
);

168 
size_t
 
rioWr™eBulkSŒšg
(
rio
 *
r
, cÚ¡ *
buf
, size_ˆ
Ën
);

169 
size_t
 
rioWr™eBulkLÚgLÚg
(
rio
 *
r
, 
l
);

170 
size_t
 
rioWr™eBulkDoubË
(
rio
 *
r
, 
d
);

172 
	g»disObjeù
;

173 
rioWr™eBulkObjeù
(
rio
 *
r
, 
»disObjeù
 *
obj
);

175 
rioG’”icUpd©eChecksum
(
rio
 *
r
, cÚ¡ *
buf
, 
size_t
 
Ën
);

176 
rioS‘AutoSync
(
rio
 *
r
, 
off_t
 
by‹s
);

	@scripting.c

30 
	~"£rv”.h
"

31 
	~"sha1.h
"

32 
	~"¿nd.h
"

33 
	~"şu¡”.h
"

35 
	~<lua.h
>

36 
	~<Ïuxlib.h
>

37 
	~<lu®ib.h
>

38 
	~<ùy³.h
>

39 
	~<m©h.h
>

41 *
»disPrÙocŞToLuaTy³_IÁ
(
lua_S‹
 *
lua
, *
»¶y
);

42 *
»disPrÙocŞToLuaTy³_Bulk
(
lua_S‹
 *
lua
, *
»¶y
);

43 *
»disPrÙocŞToLuaTy³_Stus
(
lua_S‹
 *
lua
, *
»¶y
);

44 *
»disPrÙocŞToLuaTy³_E¼Ü
(
lua_S‹
 *
lua
, *
»¶y
);

45 *
»disPrÙocŞToLuaTy³_Agg»g©e
(
lua_S‹
 *
lua
, *
»¶y
, 
©y³
);

46 *
»disPrÙocŞToLuaTy³_NuÎ
(
lua_S‹
 *
lua
, *
»¶y
);

47 *
»disPrÙocŞToLuaTy³_BoŞ
(
lua_S‹
 *
lua
, *
»¶y
, 
tf
);

48 *
»disPrÙocŞToLuaTy³_DoubË
(
lua_S‹
 *
lua
, *
»¶y
);

49 
»dis_m©h_¿ndom
 (
lua_S‹
 *
L
);

50 
»dis_m©h_¿ndom£ed
 (
lua_S‹
 *
L
);

51 
ldbIn™
();

52 
ldbDi§bË
(
ş›Á
 *
c
);

53 
ldbEÇbË
(
ş›Á
 *
c
);

54 
ev®G’”icCommªdW™hDebuggšg
(
ş›Á
 *
c
, 
ev®sha
);

55 
luaLdbLšeHook
(
lua_S‹
 *
lua
, 
lua_Debug
 *
¬
);

56 
ldbLog
(
sds
 
’Œy
);

57 
ldbLogRedisR•ly
(*
»¶y
);

58 
sds
 
ldbC©SckV®ue
(sd 
s
, 
lua_S‹
 *
lua
, 
idx
);

61 
	#LDB_BREAKPOINTS_MAX
 64

	)

62 
	#LDB_MAX_LEN_DEFAULT
 256

	)

63 
	sldbS‹
 {

64 
cÚÃùiÚ
 *
	mcÚn
;

65 
	maùive
;

66 
	mfÜked
;

67 
li¡
 *
	mlogs
;

68 
li¡
 *
	mŒaûs
;

69 
li¡
 *
	mchd»n
;

70 
	mbp
[
LDB_BREAKPOINTS_MAX
];

71 
	mbpcouÁ
;

72 
	m¡•
;

73 
	mluabp
;

74 
sds
 *
	m¤c
;

75 
	mlšes
;

76 
	mcu¼’še
;

77 
sds
 
	mcbuf
;

78 
size_t
 
	mmaxËn
;

79 
	mmaxËn_hšt_£Á
;

80 } 
	gldb
;

92 
	$sha1hex
(*
dige¡
, *
süt
, 
size_t
 
Ën
) {

93 
SHA1_CTX
 
ùx
;

94 
hash
[20];

95 *
c£t
 = "0123456789abcdef";

96 
j
;

98 
	`SHA1In™
(&
ùx
);

99 
	`SHA1Upd©e
(&
ùx
,(*)
süt
,
Ën
);

100 
	`SHA1Fš®
(
hash
,&
ùx
);

102 
j
 = 0; j < 20; j++) {

103 
dige¡
[
j
*2] = 
c£t
[((
hash
[j]&0xF0)>>4)];

104 
dige¡
[
j
*2+1] = 
c£t
[(
hash
[j]&0xF)];

106 
dige¡
[40] = '\0';

107 
	}
}

130 *
	$»disPrÙocŞToLuaTy³
(
lua_S‹
 *
lua
, * 
»¶y
) {

131 *
p
 = 
»¶y
;

133 *
p
) {

134 ':': 
p
 = 
	`»disPrÙocŞToLuaTy³_IÁ
(
lua
,
»¶y
); ;

135 '$': 
p
 = 
	`»disPrÙocŞToLuaTy³_Bulk
(
lua
,
»¶y
); ;

136 '+': 
p
 = 
	`»disPrÙocŞToLuaTy³_Stus
(
lua
,
»¶y
); ;

137 '-': 
p
 = 
	`»disPrÙocŞToLuaTy³_E¼Ü
(
lua
,
»¶y
); ;

138 '*': 
p
 = 
	`»disPrÙocŞToLuaTy³_Agg»g©e
(
lua
,
»¶y
,*p); ;

139 '%': 
p
 = 
	`»disPrÙocŞToLuaTy³_Agg»g©e
(
lua
,
»¶y
,*p); ;

140 '~': 
p
 = 
	`»disPrÙocŞToLuaTy³_Agg»g©e
(
lua
,
»¶y
,*p); ;

141 '_': 
p
 = 
	`»disPrÙocŞToLuaTy³_NuÎ
(
lua
,
»¶y
); ;

142 '#': 
p
 = 
	`»disPrÙocŞToLuaTy³_BoŞ
(
lua
,
»¶y
,p[1]); ;

143 ',': 
p
 = 
	`»disPrÙocŞToLuaTy³_DoubË
(
lua
,
»¶y
); ;

145  
p
;

146 
	}
}

148 *
	$»disPrÙocŞToLuaTy³_IÁ
(
lua_S‹
 *
lua
, *
»¶y
) {

149 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

150 
v®ue
;

152 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
v®ue
);

153 
	`lua_pushnumb”
(
lua
,(
lua_Numb”
)
v®ue
);

154  
p
+2;

155 
	}
}

157 *
	$»disPrÙocŞToLuaTy³_Bulk
(
lua_S‹
 *
lua
, *
»¶y
) {

158 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

159 
bulkËn
;

161 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
bulkËn
);

162 ià(
bulkËn
 == -1) {

163 
	`lua_pushboŞ—n
(
lua
,0);

164  
p
+2;

166 
	`lua_pushl¡ršg
(
lua
,
p
+2,
bulkËn
);

167  
p
+2+
bulkËn
+2;

169 
	}
}

171 *
	$»disPrÙocŞToLuaTy³_Stus
(
lua_S‹
 *
lua
, *
»¶y
) {

172 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

174 
	`lua_ÃwbË
(
lua
);

175 
	`lua_push¡ršg
(
lua
,"ok");

176 
	`lua_pushl¡ršg
(
lua
,
»¶y
+1,
p
-reply-1);

177 
	`lua_£‰abË
(
lua
,-3);

178  
p
+2;

179 
	}
}

181 *
	$»disPrÙocŞToLuaTy³_E¼Ü
(
lua_S‹
 *
lua
, *
»¶y
) {

182 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

184 
	`lua_ÃwbË
(
lua
);

185 
	`lua_push¡ršg
(
lua
,"err");

186 
	`lua_pushl¡ršg
(
lua
,
»¶y
+1,
p
-reply-1);

187 
	`lua_£‰abË
(
lua
,-3);

188  
p
+2;

189 
	}
}

191 *
	$»disPrÙocŞToLuaTy³_Agg»g©e
(
lua_S‹
 *
lua
, *
»¶y
, 
©y³
) {

192 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

193 
mbulkËn
;

194 
j
 = 0;

196 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
mbulkËn
);

197 ià(
£rv”
.
lua_ş›Á
->
»¥
 =ğ2 || 
©y³
 == '*') {

198 
p
 += 2;

199 ià(
mbulkËn
 == -1) {

200 
	`lua_pushboŞ—n
(
lua
,0);

201  
p
;

203 
	`lua_ÃwbË
(
lua
);

204 
j
 = 0; j < 
mbulkËn
; j++) {

205 
	`lua_pushnumb”
(
lua
,
j
+1);

206 
p
 = 
	`»disPrÙocŞToLuaTy³
(
lua
,p);

207 
	`lua_£‰abË
(
lua
,-3);

209 } ià(
£rv”
.
lua_ş›Á
->
»¥
 == 3) {

214 
p
 += 2;

215 
	`lua_ÃwbË
(
lua
);

216 
	`lua_push¡ršg
(
lua
,
©y³
 == '%' ? "map" : "set");

217 
	`lua_ÃwbË
(
lua
);

218 
j
 = 0; j < 
mbulkËn
; j++) {

219 
p
 = 
	`»disPrÙocŞToLuaTy³
(
lua
,p);

220 ià(
©y³
 == '%') {

221 
p
 = 
	`»disPrÙocŞToLuaTy³
(
lua
,p);

223 
	`lua_pushboŞ—n
(
lua
,1);

225 
	`lua_£‰abË
(
lua
,-3);

227 
	`lua_£‰abË
(
lua
,-3);

229  
p
;

230 
	}
}

232 *
	$»disPrÙocŞToLuaTy³_NuÎ
(
lua_S‹
 *
lua
, *
»¶y
) {

233 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

234 
	`lua_pushn
(
lua
);

235  
p
+2;

236 
	}
}

238 *
	$»disPrÙocŞToLuaTy³_BoŞ
(
lua_S‹
 *
lua
, *
»¶y
, 
tf
) {

239 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

240 
	`lua_pushboŞ—n
(
lua
,
tf
 == 't');

241  
p
+2;

242 
	}
}

244 *
	$»disPrÙocŞToLuaTy³_DoubË
(
lua_S‹
 *
lua
, *
»¶y
) {

245 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

246 
buf
[
MAX_LONG_DOUBLE_CHARS
+1];

247 
size_t
 
Ën
 = 
p
-
»¶y
-1;

248 
d
;

250 ià(
Ën
 <ğ
MAX_LONG_DOUBLE_CHARS
) {

251 
	`memıy
(
buf
,
»¶y
+1,
Ën
);

252 
buf
[
Ën
] = '\0';

253 
d
 = 
	`¡¹od
(
buf
,
NULL
);

255 
d
 = 0;

258 
	`lua_ÃwbË
(
lua
);

259 
	`lua_push¡ršg
(
lua
,"double");

260 
	`lua_pushnumb”
(
lua
,
d
);

261 
	`lua_£‰abË
(
lua
,-3);

262  
p
+2;

263 
	}
}

270 
	$luaPushE¼Ü
(
lua_S‹
 *
lua
, *
”rÜ
) {

271 
lua_Debug
 
dbg
;

275 ià(
ldb
.
aùive
 &&†db.
¡•
) {

276 
	`ldbLog
(
	`sdsÿrštf
(
	`sd£m±y
(),"<”rÜ> %s",
”rÜ
));

279 
	`lua_ÃwbË
(
lua
);

280 
	`lua_push¡ršg
(
lua
,"err");

283 if(
	`lua_g‘¡ack
(
lua
, 1, &
dbg
è&& 
	`lua_g‘šfo
(lua, "nSl", &dbg)) {

284 
sds
 
msg
 = 
	`sdsÿrštf
(
	`sd£m±y
(), "%s: %d: %s",

285 
dbg
.
sourû
, dbg.
cu¼’še
, 
”rÜ
);

286 
	`lua_push¡ršg
(
lua
, 
msg
);

287 
	`sdsä“
(
msg
);

289 
	`lua_push¡ršg
(
lua
, 
”rÜ
);

291 
	`lua_£‰abË
(
lua
,-3);

292 
	}
}

298 
	$luaRai£E¼Ü
(
lua_S‹
 *
lua
) {

299 
	`lua_push¡ršg
(
lua
,"err");

300 
	`lua_g‘bË
(
lua
,-2);

301  
	`lua_”rÜ
(
lua
);

302 
	}
}

310 
	$luaSÜtA¼ay
(
lua_S‹
 *
lua
) {

312 
	`lua_g‘glob®
(
lua
,"table");

313 
	`lua_push¡ršg
(
lua
,"sort");

314 
	`lua_g‘bË
(
lua
,-2);

315 
	`lua_pushv®ue
(
lua
,-3);

316 ià(
	`lua_pÿÎ
(
lua
,1,0,0)) {

323 
	`lua_pİ
(
lua
,1);

324 
	`lua_push¡ršg
(
lua
,"sort");

325 
	`lua_g‘bË
(
lua
,-2);

326 
	`lua_pushv®ue
(
lua
,-3);

327 
	`lua_g‘glob®
(
lua
,"__redis__compare_helper");

329 
	`lua_ÿÎ
(
lua
,2,0);

332 
	`lua_pİ
(
lua
,1);

333 
	}
}

341 
	$luaR•lyToRedisR•ly
(
ş›Á
 *
c
, 
lua_S‹
 *
lua
) {

342 
t
 = 
	`lua_ty³
(
lua
,-1);

344 
t
) {

345 
LUA_TSTRING
:

346 
	`addR•lyBulkCBufãr
(
c
,(*)
	`lua_to¡ršg
(
lua
,-1),
	`lua_¡¾’
(lua,-1));

348 
LUA_TBOOLEAN
:

349 ià(
£rv”
.
lua_ş›Á
->
»¥
 == 2)

350 
	`addR•ly
(
c
,
	`lua_toboŞ—n
(
lua
,-1è? 
sh¬ed
.
cÚe
 :

351 
sh¬ed
.
nuÎ
[
c
->
»¥
]);

353 
	`addR•lyBoŞ
(
c
,
	`lua_toboŞ—n
(
lua
,-1));

355 
LUA_TNUMBER
:

356 
	`addR•lyLÚgLÚg
(
c
,()
	`lua_tÚumb”
(
lua
,-1));

358 
LUA_TTABLE
:

365 
	`lua_push¡ršg
(
lua
,"err");

366 
	`lua_g‘bË
(
lua
,-2);

367 
t
 = 
	`lua_ty³
(
lua
,-1);

368 ià(
t
 =ğ
LUA_TSTRING
) {

369 
sds
 
”r
 = 
	`sd¢ew
(
	`lua_to¡ršg
(
lua
,-1));

370 
	`sdsm­ch¬s
(
”r
,"\r\n"," ",2);

371 
	`addR•lySds
(
c
,
	`sdsÿrštf
(
	`sd£m±y
(),"-%s\r\n",
”r
));

372 
	`sdsä“
(
”r
);

373 
	`lua_pİ
(
lua
,2);

376 
	`lua_pİ
(
lua
,1);

379 
	`lua_push¡ršg
(
lua
,"ok");

380 
	`lua_g‘bË
(
lua
,-2);

381 
t
 = 
	`lua_ty³
(
lua
,-1);

382 ià(
t
 =ğ
LUA_TSTRING
) {

383 
sds
 
ok
 = 
	`sd¢ew
(
	`lua_to¡ršg
(
lua
,-1));

384 
	`sdsm­ch¬s
(
ok
,"\r\n"," ",2);

385 
	`addR•lySds
(
c
,
	`sdsÿrštf
(
	`sd£m±y
(),"+%s\r\n",
ok
));

386 
	`sdsä“
(
ok
);

387 
	`lua_pİ
(
lua
,2);

390 
	`lua_pİ
(
lua
,1);

393 
	`lua_push¡ršg
(
lua
,"double");

394 
	`lua_g‘bË
(
lua
,-2);

395 
t
 = 
	`lua_ty³
(
lua
,-1);

396 ià(
t
 =ğ
LUA_TNUMBER
) {

397 
	`addR•lyDoubË
(
c
,
	`lua_tÚumb”
(
lua
,-1));

398 
	`lua_pİ
(
lua
,2);

401 
	`lua_pİ
(
lua
,1);

404 
	`lua_push¡ršg
(
lua
,"map");

405 
	`lua_g‘bË
(
lua
,-2);

406 
t
 = 
	`lua_ty³
(
lua
,-1);

407 ià(
t
 =ğ
LUA_TTABLE
) {

408 
m­Ën
 = 0;

409 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

410 
	`lua_pushn
(
lua
);

411 
	`lua_Ãxt
(
lua
,-2)) {

413 
	`luaR•lyToRedisR•ly
(
c
, 
lua
);

414 
	`lua_pushv®ue
(
lua
,-1);

415 
	`luaR•lyToRedisR•ly
(
c
, 
lua
);

417 
m­Ën
++;

419 
	`£tDeã¼edM­L’
(
c
,
»¶yËn
,
m­Ën
);

420 
	`lua_pİ
(
lua
,2);

423 
	`lua_pİ
(
lua
,1);

426 
	`lua_push¡ršg
(
lua
,"set");

427 
	`lua_g‘bË
(
lua
,-2);

428 
t
 = 
	`lua_ty³
(
lua
,-1);

429 ià(
t
 =ğ
LUA_TTABLE
) {

430 
£’
 = 0;

431 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

432 
	`lua_pushn
(
lua
);

433 
	`lua_Ãxt
(
lua
,-2)) {

435 
	`lua_pİ
(
lua
,1);

436 
	`lua_pushv®ue
(
lua
,-1);

437 
	`luaR•lyToRedisR•ly
(
c
, 
lua
);

439 
£’
++;

441 
	`£tDeã¼edS‘L’
(
c
,
»¶yËn
,
£’
);

442 
	`lua_pİ
(
lua
,2);

445 
	`lua_pİ
(
lua
,1);

448 *
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

449 
j
 = 1, 
mbulkËn
 = 0;

451 
	`lua_pushnumb”
(
lua
,
j
++);

452 
	`lua_g‘bË
(
lua
,-2);

453 
t
 = 
	`lua_ty³
(
lua
,-1);

454 ià(
t
 =ğ
LUA_TNIL
) {

455 
	`lua_pİ
(
lua
,1);

458 
	`luaR•lyToRedisR•ly
(
c
, 
lua
);

459 
mbulkËn
++;

461 
	`£tDeã¼edA¼ayL’
(
c
,
»¶yËn
,
mbulkËn
);

464 
	`addR•lyNuÎ
(
c
);

466 
	`lua_pİ
(
lua
,1);

467 
	}
}

473 
	#LUA_CMD_OBJCACHE_SIZE
 32

	)

474 
	#LUA_CMD_OBJCACHE_MAX_LEN
 64

	)

475 
	$luaRedisG’”icCommªd
(
lua_S‹
 *
lua
, 
¿i£_”rÜ
) {

476 
j
, 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

477 
»disCommªd
 *
cmd
;

478 
ş›Á
 *
c
 = 
£rv”
.
lua_ş›Á
;

479 
sds
 
»¶y
;

482 
robj
 **
¬gv
 = 
NULL
;

483 
¬gv_size
 = 0;

484 
robj
 *
ÿched_objeùs
[
LUA_CMD_OBJCACHE_SIZE
];

485 
size_t
 
ÿched_objeùs_Ën
[
LUA_CMD_OBJCACHE_SIZE
];

486 
šu£
 = 0;

492 ià(
šu£
) {

493 *
»cursiÚ_w¬nšg
 =

496 
	`£rv”Log
(
LL_WARNING
,"%s",
»cursiÚ_w¬nšg
);

497 
	`luaPushE¼Ü
(
lua
,
»cursiÚ_w¬nšg
);

500 
šu£
++;

503 ià(
¬gc
 == 0) {

504 
	`luaPushE¼Ü
(
lua
,

506 
šu£
--;

507  
¿i£_”rÜ
 ? 
	`luaRai£E¼Ü
(
lua
) : 1;

511 ià(
¬gv_size
 < 
¬gc
) {

512 
¬gv
 = 
	`z»®loc
×rgv,(
robj
*)*
¬gc
);

513 
¬gv_size
 = 
¬gc
;

516 
j
 = 0; j < 
¬gc
; j++) {

517 *
obj_s
;

518 
size_t
 
obj_Ën
;

519 
dbuf
[64];

521 ià(
	`lua_ty³
(
lua
,
j
+1è=ğ
LUA_TNUMBER
) {

524 
lua_Numb”
 
num
 = 
	`lua_tÚumb”
(
lua
,
j
+1);

526 
obj_Ën
 = 
	`¢´štf
(
dbuf
,(dbuf),"%.17g",()
num
);

527 
obj_s
 = 
dbuf
;

529 
obj_s
 = (*)
	`lua_tŞ¡ršg
(
lua
,
j
+1,&
obj_Ën
);

530 ià(
obj_s
 =ğ
NULL
) ;

534 ià(
j
 < 
LUA_CMD_OBJCACHE_SIZE
 && 
ÿched_objeùs
[j] &&

535 
ÿched_objeùs_Ën
[
j
] >ğ
obj_Ën
)

537 
sds
 
s
 = 
ÿched_objeùs
[
j
]->
±r
;

538 
¬gv
[
j
] = 
ÿched_objeùs
[j];

539 
ÿched_objeùs
[
j
] = 
NULL
;

540 
	`memıy
(
s
,
obj_s
,
obj_Ën
+1);

541 
	`sds£’
(
s
, 
obj_Ën
);

543 
¬gv
[
j
] = 
	`ü—‹SŒšgObjeù
(
obj_s
, 
obj_Ën
);

550 ià(
j
 !ğ
¬gc
) {

551 
j
--;

552 
j
 >= 0) {

553 
	`deüRefCouÁ
(
¬gv
[
j
]);

554 
j
--;

556 
	`luaPushE¼Ü
(
lua
,

558 
šu£
--;

559  
¿i£_”rÜ
 ? 
	`luaRai£E¼Ü
(
lua
) : 1;

563 
c
->
¬gv
 =‡rgv;

564 
c
->
¬gc
 =‡rgc;

565 
c
->
u£r
 = 
£rv”
.
lua_ÿÎ”
->user;

568 
	`moduËC®lCommªdF‹rs
(
c
);

569 
¬gv
 = 
c
->argv;

570 
¬gc
 = 
c
->argc;

573 ià(
ldb
.
aùive
 &&†db.
¡•
) {

574 
sds
 
cmdlog
 = 
	`sd¢ew
("<redis>");

575 
j
 = 0; j < 
c
->
¬gc
; j++) {

576 ià(
j
 == 10) {

577 
cmdlog
 = 
	`sdsÿrštf
(cmdlog," ... (%d more)",

578 
c
->
¬gc
-
j
-1);

581 
cmdlog
 = 
	`sdsÿ’
(cmdlog," ",1);

582 
cmdlog
 = 
	`sdsÿtsds
(cmdlog,
c
->
¬gv
[
j
]->
±r
);

585 
	`ldbLog
(
cmdlog
);

589 
cmd
 = 
	`lookupCommªd
(
¬gv
[0]->
±r
);

590 ià(!
cmd
 || ((cmd->
¬™y
 > 0 && cmd->¬™y !ğ
¬gc
) ||

591 (
¬gc
 < -
cmd
->
¬™y
)))

593 ià(
cmd
)

594 
	`luaPushE¼Ü
(
lua
,

597 
	`luaPushE¼Ü
(
lua
,"Unknown Redis command called from Lua script");

598 
ş—nup
;

600 
c
->
cmd
 = c->
Ï¡cmd
 = cmd;

603 ià(
cmd
->
æags
 & 
CMD_NOSCRIPT
) {

604 
	`luaPushE¼Ü
(
lua
, "This Redis command is‚ot‡llowed from scripts");

605 
ş—nup
;

609 
aş_keypos
;

610 
aş_»tv®
 = 
	`ACLCheckCommªdP”m
(
c
,&
aş_keypos
);

611 ià(
aş_»tv®
 !ğ
ACL_OK
) {

612 
	`addACLLogEÁry
(
c
,
aş_»tv®
,
aş_keypos
,
NULL
);

613 ià(
aş_»tv®
 =ğ
ACL_DENIED_CMD
)

614 
	`luaPushE¼Ü
(
lua
, "The userƒxecutinghe script can't„unhis "

617 
	`luaPushE¼Ü
(
lua
, "The userƒxecutinghe script can't‡ccess "

620 
ş—nup
;

626 ià(
cmd
->
æags
 & 
CMD_WRITE
) {

627 
d’y_wr™e_ty³
 = 
	`wr™eCommªdsD’›dByDiskE¼Ü
();

628 ià(
£rv”
.
lua_¿ndom_dœty
 && !£rv”.
lua_»¶iÿ‹_commªds
) {

629 
	`luaPushE¼Ü
(
lua
,

631 
ş—nup
;

632 } ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¦ave_ro
 &&

633 !
£rv”
.
lßdšg
 &&

634 !(
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MASTER
))

636 
	`luaPushE¼Ü
(
lua
, 
sh¬ed
.
ro¦av“¼
->
±r
);

637 
ş—nup
;

638 } ià(
d’y_wr™e_ty³
 !ğ
DISK_ERROR_TYPE_NONE
) {

639 ià(
d’y_wr™e_ty³
 =ğ
DISK_ERROR_TYPE_RDB
) {

640 
	`luaPushE¼Ü
(
lua
, 
sh¬ed
.
bg§v“¼
->
±r
);

642 
sds
 
aof_wr™e_”r
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),

644 
	`¡»¼Ü
(
£rv”
.
aof_Ï¡_wr™e_”ºo
));

645 
	`luaPushE¼Ü
(
lua
, 
aof_wr™e_”r
);

646 
	`sdsä“
(
aof_wr™e_”r
);

648 
ş—nup
;

656 ià(
£rv”
.
maxmemÜy
 &&

657 !
£rv”
.
lßdšg
 &&

658 !
£rv”
.
ma¡”ho¡
 &&

659 
£rv”
.
lua_wr™e_dœty
 == 0 &&

660 
£rv”
.
lua_oom
 &&

661 (
cmd
->
æags
 & 
CMD_DENYOOM
))

663 
	`luaPushE¼Ü
(
lua
, 
sh¬ed
.
oom”r
->
±r
);

664 
ş—nup
;

667 ià(
cmd
->
æags
 & 
CMD_RANDOM
è
£rv”
.
lua_¿ndom_dœty
 = 1;

668 ià(
cmd
->
æags
 & 
CMD_WRITE
è
£rv”
.
lua_wr™e_dœty
 = 1;

673 ià(
£rv”
.
şu¡”_’abËd
 && !£rv”.
lßdšg
 &&

674 !(
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MASTER
))

676 
”rÜ_code
;

678 
c
->
æags
 &ğ~(
CLIENT_READONLY
|
CLIENT_ASKING
);

679 
c
->
æags
 |ğ
£rv”
.
lua_ÿÎ”
->æag & (
CLIENT_READONLY
|
CLIENT_ASKING
);

680 ià(
	`g‘NodeByQu”y
(
c
,c->
cmd
,c->
¬gv
,c->
¬gc
,
NULL
,&
”rÜ_code
) !=

681 
£rv”
.
şu¡”
->
my£lf
)

683 ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_RO_STATE
) {

684 
	`luaPushE¼Ü
(
lua
,

687 } ià(
”rÜ_code
 =ğ
CLUSTER_REDIR_DOWN_STATE
) {

688 
	`luaPushE¼Ü
(
lua
,

692 
	`luaPushE¼Ü
(
lua
,

697 
ş—nup
;

704 ià(
£rv”
.
lua_»¶iÿ‹_commªds
 &&

705 !
£rv”
.
lua_muÉi_em™‹d
 &&

706 !(
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MULTI
) &&

707 
£rv”
.
lua_wr™e_dœty
 &&

708 
£rv”
.
lua_»¶
 !ğ
PROPAGATE_NONE
)

710 
	`execCommªdPrİag©eMuÉi
(
£rv”
.
lua_ÿÎ”
);

711 
£rv”
.
lua_muÉi_em™‹d
 = 1;

714 
c
->
æags
 |ğ
CLIENT_MULTI
;

718 
ÿÎ_æags
 = 
CMD_CALL_SLOWLOG
 | 
CMD_CALL_STATS
;

719 ià(
£rv”
.
lua_»¶iÿ‹_commªds
) {

721 ià(
£rv”
.
lua_»¶
 & 
PROPAGATE_AOF
)

722 
ÿÎ_æags
 |ğ
CMD_CALL_PROPAGATE_AOF
;

723 ià(
£rv”
.
lua_»¶
 & 
PROPAGATE_REPL
)

724 
ÿÎ_æags
 |ğ
CMD_CALL_PROPAGATE_REPL
;

726 
	`ÿÎ
(
c
,
ÿÎ_æags
);

731 ià(
	`li¡L’gth
(
c
->
»¶y
è=ğ0 && c->
buåos
 < 
PROTO_REPLY_CHUNK_BYTES
) {

735 
c
->
buf
[c->
buåos
] = '\0';

736 
»¶y
 = 
c
->
buf
;

737 
c
->
buåos
 = 0;

739 
»¶y
 = 
	`sd¢ewËn
(
c
->
buf
,c->
buåos
);

740 
c
->
buåos
 = 0;

741 
	`li¡L’gth
(
c
->
»¶y
)) {

742 
ş›ÁR•lyBlock
 *
o
 = 
	`li¡NodeV®ue
(
	`li¡Fœ¡
(
c
->
»¶y
));

744 
»¶y
 = 
	`sdsÿ’
Ô•ly,
o
->
buf
,o->
u£d
);

745 
	`li¡D–Node
(
c
->
»¶y
,
	`li¡Fœ¡
(c->reply));

748 ià(
¿i£_”rÜ
 && 
»¶y
[0] != '-')„aise_error = 0;

749 
	`»disPrÙocŞToLuaTy³
(
lua
,
»¶y
);

752 ià(
ldb
.
aùive
 &&†db.
¡•
)

753 
	`ldbLogRedisR•ly
(
»¶y
);

757 ià((
cmd
->
æags
 & 
CMD_SORT_FOR_SCRIPT
) &&

758 (
£rv”
.
lua_»¶iÿ‹_commªds
 == 0) &&

759 (
»¶y
[0] == '*' &&„eply[1] != '-')) {

760 
	`luaSÜtA¼ay
(
lua
);

762 ià(
»¶y
 !ğ
c
->
buf
è
	`sdsä“
(reply);

763 
c
->
»¶y_by‹s
 = 0;

765 
ş—nup
:

768 
j
 = 0; j < 
c
->
¬gc
; j++) {

769 
robj
 *
o
 = 
c
->
¬gv
[
j
];

774 ià(
j
 < 
LUA_CMD_OBJCACHE_SIZE
 &&

775 
o
->
»fcouÁ
 == 1 &&

776 (
o
->
’codšg
 =ğ
OBJ_ENCODING_RAW
 ||

777 
o
->
’codšg
 =ğ
OBJ_ENCODING_EMBSTR
) &&

778 
	`sd¦’
(
o
->
±r
è<ğ
LUA_CMD_OBJCACHE_MAX_LEN
)

780 
sds
 
s
 = 
o
->
±r
;

781 ià(
ÿched_objeùs
[
j
]è
	`deüRefCouÁ
(cached_objects[j]);

782 
ÿched_objeùs
[
j
] = 
o
;

783 
ÿched_objeùs_Ën
[
j
] = 
	`sd§Îoc
(
s
);

785 
	`deüRefCouÁ
(
o
);

789 ià(
c
->
¬gv
 !=‡rgv) {

790 
	`zä“
(
c
->
¬gv
);

791 
¬gv
 = 
NULL
;

792 
¬gv_size
 = 0;

795 
c
->
u£r
 = 
NULL
;

797 ià(
¿i£_”rÜ
) {

801 
šu£
--;

802  
	`luaRai£E¼Ü
(
lua
);

804 
šu£
--;

806 
	}
}

809 
	$luaRedisC®lCommªd
(
lua_S‹
 *
lua
) {

810  
	`luaRedisG’”icCommªd
(
lua
,1);

811 
	}
}

814 
	$luaRedisPC®lCommªd
(
lua_S‹
 *
lua
) {

815  
	`luaRedisG’”icCommªd
(
lua
,0);

816 
	}
}

820 
	$luaRedisSha1hexCommªd
(
lua_S‹
 *
lua
) {

821 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

822 
dige¡
[41];

823 
size_t
 
Ën
;

824 *
s
;

826 ià(
¬gc
 != 1) {

827 
	`lua_push¡ršg
(
lua
, "wrong‚umber of‡rguments");

828  
	`lua_”rÜ
(
lua
);

831 
s
 = (*)
	`lua_tŞ¡ršg
(
lua
,1,&
Ën
);

832 
	`sha1hex
(
dige¡
,
s
,
Ën
);

833 
	`lua_push¡ršg
(
lua
,
dige¡
);

835 
	}
}

844 
	$luaRedisR‘uºSšgËF›ldTabË
(
lua_S‹
 *
lua
, *
f›ld
) {

845 ià(
	`lua_g‘tİ
(
lua
è!ğ1 || 
	`lua_ty³
Öua,-1è!ğ
LUA_TSTRING
) {

846 
	`luaPushE¼Ü
(
lua
, "wrong‚umber orype of‡rguments");

850 
	`lua_ÃwbË
(
lua
);

851 
	`lua_push¡ršg
(
lua
, 
f›ld
);

852 
	`lua_pushv®ue
(
lua
, -3);

853 
	`lua_£‰abË
(
lua
, -3);

855 
	}
}

858 
	$luaRedisE¼ÜR•lyCommªd
(
lua_S‹
 *
lua
) {

859  
	`luaRedisR‘uºSšgËF›ldTabË
(
lua
,"err");

860 
	}
}

863 
	$luaRedisStusR•lyCommªd
(
lua_S‹
 *
lua
) {

864  
	`luaRedisR‘uºSšgËF›ldTabË
(
lua
,"ok");

865 
	}
}

873 
	$luaRedisR•liÿ‹CommªdsCommªd
(
lua_S‹
 *
lua
) {

874 ià(
£rv”
.
lua_wr™e_dœty
) {

875 
	`lua_pushboŞ—n
(
lua
,0);

877 
£rv”
.
lua_»¶iÿ‹_commªds
 = 1;

881 
	`»disS¿nd48
(
	`¿nd
());

882 
	`lua_pushboŞ—n
(
lua
,1);

885 
	}
}

892 
	$luaRedisB»akpoštCommªd
(
lua_S‹
 *
lua
) {

893 ià(
ldb
.
aùive
) {

894 
ldb
.
luabp
 = 1;

895 
	`lua_pushboŞ—n
(
lua
,1);

897 
	`lua_pushboŞ—n
(
lua
,0);

900 
	}
}

907 
	$luaRedisDebugCommªd
(
lua_S‹
 *
lua
) {

908 ià(!
ldb
.
aùive
)  0;

909 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

910 
sds
 
log
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"<debug>†š%d: ", 
ldb
.
cu¼’še
);

911 
¬gc
--) {

912 
log
 = 
	`ldbC©SckV®ue
Öog,
lua
,-1 - 
¬gc
);

913 ià(
¬gc
 !ğ0è
log
 = 
	`sdsÿ’
(log,", ",2);

915 
	`ldbLog
(
log
);

917 
	}
}

923 
	$luaRedisS‘R•lCommªd
(
lua_S‹
 *
lua
) {

924 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

925 
æags
;

927 ià(
£rv”
.
lua_»¶iÿ‹_commªds
 == 0) {

928 
	`lua_push¡ršg
(
lua
, "You can sethe„eplication behavior only‡fterurning on single commands„eplication with„edis.replicate_commands().");

929  
	`lua_”rÜ
(
lua
);

930 } ià(
¬gc
 != 1) {

931 
	`lua_push¡ršg
(
lua
, "redis.set_repl()„equireswo‡rguments.");

932  
	`lua_”rÜ
(
lua
);

935 
æags
 = 
	`lua_tÚumb”
(
lua
,-1);

936 ià((
æags
 & ~(
PROPAGATE_AOF
|
PROPAGATE_REPL
)) != 0) {

937 
	`lua_push¡ršg
(
lua
, "Invalid„eplication flags. Use REPL_AOF, REPL_REPLICA, REPL_ALL or REPL_NONE.");

938  
	`lua_”rÜ
(
lua
);

940 
£rv”
.
lua_»¶
 = 
æags
;

942 
	}
}

945 
	$luaLogCommªd
(
lua_S‹
 *
lua
) {

946 
j
, 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

947 
Ëv–
;

948 
sds
 
log
;

950 ià(
¬gc
 < 2) {

951 
	`lua_push¡ršg
(
lua
, "redis.log()„equireswo‡rguments or more.");

952  
	`lua_”rÜ
(
lua
);

953 } ià(!
	`lua_i¢umb”
(
lua
,-
¬gc
)) {

954 
	`lua_push¡ršg
(
lua
, "First‡rgument must be‡‚umber (log†evel).");

955  
	`lua_”rÜ
(
lua
);

957 
Ëv–
 = 
	`lua_tÚumb”
(
lua
,-
¬gc
);

958 ià(
Ëv–
 < 
LL_DEBUG
 ||†ev– > 
LL_WARNING
) {

959 
	`lua_push¡ršg
(
lua
, "Invalid debug†evel.");

960  
	`lua_”rÜ
(
lua
);

962 ià(
Ëv–
 < 
£rv”
.
v”bos™y
)  0;

965 
log
 = 
	`sd£m±y
();

966 
j
 = 1; j < 
¬gc
; j++) {

967 
size_t
 
Ën
;

968 *
s
;

970 
s
 = (*)
	`lua_tŞ¡ršg
(
lua
,(-
¬gc
)+
j
,&
Ën
);

971 ià(
s
) {

972 ià(
j
 !ğ1è
log
 = 
	`sdsÿ’
(log," ",1);

973 
log
 = 
	`sdsÿ’
Öog,
s
,
Ën
);

976 
	`£rv”LogRaw
(
Ëv–
,
log
);

977 
	`sdsä“
(
log
);

979 
	}
}

982 
	$luaS‘Re¥
(
lua_S‹
 *
lua
) {

983 
¬gc
 = 
	`lua_g‘tİ
(
lua
);

985 ià(
¬gc
 != 1) {

986 
	`lua_push¡ršg
(
lua
, "redis.setresp()„equires one‡rgument.");

987  
	`lua_”rÜ
(
lua
);

990 
»¥
 = 
	`lua_tÚumb”
(
lua
,-
¬gc
);

991 ià(
»¥
 != 2 &&„esp != 3) {

992 
	`lua_push¡ršg
(
lua
, "RESP version must be 2 or 3.");

993  
	`lua_”rÜ
(
lua
);

996 
£rv”
.
lua_ş›Á
->
»¥
 =„esp;

998 
	}
}

1004 
	$luaLßdLib
(
lua_S‹
 *
lua
, cÚ¡ *
libÇme
, 
lua_CFunùiÚ
 
luafunc
) {

1005 
	`lua_pushcfunùiÚ
(
lua
, 
luafunc
);

1006 
	`lua_push¡ršg
(
lua
, 
libÇme
);

1007 
	`lua_ÿÎ
(
lua
, 1, 0);

1008 
	}
}

1010 
LUALIB_API
 (
luaİ’_cjsÚ
è(
lua_S‹
 *
L
);

1011 
LUALIB_API
 (
luaİ’_¡ruù
è(
lua_S‹
 *
L
);

1012 
LUALIB_API
 (
luaİ’_cmsg·ck
è(
lua_S‹
 *
L
);

1013 
LUALIB_API
 (
luaİ’_b™
è(
lua_S‹
 *
L
);

1015 
	$luaLßdLib¿r›s
(
lua_S‹
 *
lua
) {

1016 
	`luaLßdLib
(
lua
, "", 
luaİ’_ba£
);

1017 
	`luaLßdLib
(
lua
, 
LUA_TABLIBNAME
, 
luaİ’_bË
);

1018 
	`luaLßdLib
(
lua
, 
LUA_STRLIBNAME
, 
luaİ’_¡ršg
);

1019 
	`luaLßdLib
(
lua
, 
LUA_MATHLIBNAME
, 
luaİ’_m©h
);

1020 
	`luaLßdLib
(
lua
, 
LUA_DBLIBNAME
, 
luaİ’_debug
);

1021 
	`luaLßdLib
(
lua
, "cjsÚ", 
luaİ’_cjsÚ
);

1022 
	`luaLßdLib
(
lua
, "¡ruù", 
luaİ’_¡ruù
);

1023 
	`luaLßdLib
(
lua
, "cmsg·ck", 
luaİ’_cmsg·ck
);

1024 
	`luaLßdLib
(
lua
, "b™", 
luaİ’_b™
);

1027 
	`luaLßdLib
(
lua
, 
LUA_LOADLIBNAME
, 
luaİ’_·ckage
);

1028 
	`luaLßdLib
(
lua
, 
LUA_OSLIBNAME
, 
luaİ’_os
);

1030 
	}
}

1034 
	$luaRemoveUnsuµÜ‹dFunùiÚs
(
lua_S‹
 *
lua
) {

1035 
	`lua_pushn
(
lua
);

1036 
	`lua_£tglob®
(
lua
,"loadfile");

1037 
	`lua_pushn
(
lua
);

1038 
	`lua_£tglob®
(
lua
,"dofile");

1039 
	}
}

1046 
	$sütšgEÇbËGlob®sPrÙeùiÚ
(
lua_S‹
 *
lua
) {

1047 *
s
[32];

1048 
sds
 
code
 = 
	`sd£m±y
();

1049 
j
 = 0;

1053 
s
[
j
++]="local dbg=debug\n";

1054 
s
[
j
++]="local mt = {}\n";

1055 
s
[
j
++]="setmetatable(_G, mt)\n";

1056 
s
[
j
++]="mt.__newindex = function (t,‚, v)\n";

1057 
s
[
j
++]=" if dbg.getinfo(2)hen\n";

1058 
s
[
j
++]="†ocal w = dbg.getinfo(2, \"S\").what\n";

1059 
s
[
j
++]=" if w ~= \"main\"‡nd w ~= \"C\"hen\n";

1060 
s
[
j
++]="ƒrror(\"Script‡ttemptedo create global variable '\"..tostring(n)..\"'\", 2)\n";

1061 
s
[
j
++]="ƒnd\n";

1062 
s
[
j
++]="ƒnd\n";

1063 
s
[
j
++]="„awset(t,‚, v)\n";

1064 
s
[
j
++]="end\n";

1065 
s
[
j
++]="mt.__index = function (t,‚)\n";

1066 
s
[
j
++]=" if dbg.getinfo(2)‡nd dbg.getinfo(2, \"S\").what ~= \"C\"hen\n";

1067 
s
[
j
++]="ƒrror(\"Script‡ttemptedo‡ccess‚onexistent global variable '\"..tostring(n)..\"'\", 2)\n";

1068 
s
[
j
++]="ƒnd\n";

1069 
s
[
j
++]="„eturn„awget(t,‚)\n";

1070 
s
[
j
++]="end\n";

1071 
s
[
j
++]="debug =‚il\n";

1072 
s
[
j
++]=
NULL
;

1074 
j
 = 0; 
s
[j] !ğ
NULL
; j++è
code
 = 
	`sdsÿ’
(code,s[j],
	`¡¾’
(s[j]));

1075 
	`luaL_lßdbufãr
(
lua
,
code
,
	`sd¦’
(code),"@enable_strict_lua");

1076 
	`lua_pÿÎ
(
lua
,0,0,0);

1077 
	`sdsä“
(
code
);

1078 
	}
}

1090 
	$sütšgIn™
(
£tup
) {

1091 
lua_S‹
 *
lua
 = 
	`lua_İ’
();

1093 ià(
£tup
) {

1094 
£rv”
.
lua_ş›Á
 = 
NULL
;

1095 
£rv”
.
lua_ÿÎ”
 = 
NULL
;

1096 
£rv”
.
lua_cur_süt
 = 
NULL
;

1097 
£rv”
.
lua_timedout
 = 0;

1098 
	`ldbIn™
();

1101 
	`luaLßdLib¿r›s
(
lua
);

1102 
	`luaRemoveUnsuµÜ‹dFunùiÚs
(
lua
);

1107 
£rv”
.
lua_süts
 = 
	`diùC»©e
(&
shaSütObjeùDiùTy³
,
NULL
);

1108 
£rv”
.
lua_süts_mem
 = 0;

1111 
	`lua_ÃwbË
(
lua
);

1114 
	`lua_push¡ršg
(
lua
,"call");

1115 
	`lua_pushcfunùiÚ
(
lua
,
luaRedisC®lCommªd
);

1116 
	`lua_£‰abË
(
lua
,-3);

1119 
	`lua_push¡ršg
(
lua
,"pcall");

1120 
	`lua_pushcfunùiÚ
(
lua
,
luaRedisPC®lCommªd
);

1121 
	`lua_£‰abË
(
lua
,-3);

1124 
	`lua_push¡ršg
(
lua
,"log");

1125 
	`lua_pushcfunùiÚ
(
lua
,
luaLogCommªd
);

1126 
	`lua_£‰abË
(
lua
,-3);

1129 
	`lua_push¡ršg
(
lua
,"setresp");

1130 
	`lua_pushcfunùiÚ
(
lua
,
luaS‘Re¥
);

1131 
	`lua_£‰abË
(
lua
,-3);

1133 
	`lua_push¡ršg
(
lua
,"LOG_DEBUG");

1134 
	`lua_pushnumb”
(
lua
,
LL_DEBUG
);

1135 
	`lua_£‰abË
(
lua
,-3);

1137 
	`lua_push¡ršg
(
lua
,"LOG_VERBOSE");

1138 
	`lua_pushnumb”
(
lua
,
LL_VERBOSE
);

1139 
	`lua_£‰abË
(
lua
,-3);

1141 
	`lua_push¡ršg
(
lua
,"LOG_NOTICE");

1142 
	`lua_pushnumb”
(
lua
,
LL_NOTICE
);

1143 
	`lua_£‰abË
(
lua
,-3);

1145 
	`lua_push¡ršg
(
lua
,"LOG_WARNING");

1146 
	`lua_pushnumb”
(
lua
,
LL_WARNING
);

1147 
	`lua_£‰abË
(
lua
,-3);

1150 
	`lua_push¡ršg
(
lua
, "sha1hex");

1151 
	`lua_pushcfunùiÚ
(
lua
, 
luaRedisSha1hexCommªd
);

1152 
	`lua_£‰abË
(
lua
, -3);

1155 
	`lua_push¡ršg
(
lua
, "error_reply");

1156 
	`lua_pushcfunùiÚ
(
lua
, 
luaRedisE¼ÜR•lyCommªd
);

1157 
	`lua_£‰abË
(
lua
, -3);

1158 
	`lua_push¡ršg
(
lua
, "status_reply");

1159 
	`lua_pushcfunùiÚ
(
lua
, 
luaRedisStusR•lyCommªd
);

1160 
	`lua_£‰abË
(
lua
, -3);

1163 
	`lua_push¡ršg
(
lua
, "replicate_commands");

1164 
	`lua_pushcfunùiÚ
(
lua
, 
luaRedisR•liÿ‹CommªdsCommªd
);

1165 
	`lua_£‰abË
(
lua
, -3);

1168 
	`lua_push¡ršg
(
lua
,"set_repl");

1169 
	`lua_pushcfunùiÚ
(
lua
,
luaRedisS‘R•lCommªd
);

1170 
	`lua_£‰abË
(
lua
,-3);

1172 
	`lua_push¡ršg
(
lua
,"REPL_NONE");

1173 
	`lua_pushnumb”
(
lua
,
PROPAGATE_NONE
);

1174 
	`lua_£‰abË
(
lua
,-3);

1176 
	`lua_push¡ršg
(
lua
,"REPL_AOF");

1177 
	`lua_pushnumb”
(
lua
,
PROPAGATE_AOF
);

1178 
	`lua_£‰abË
(
lua
,-3);

1180 
	`lua_push¡ršg
(
lua
,"REPL_SLAVE");

1181 
	`lua_pushnumb”
(
lua
,
PROPAGATE_REPL
);

1182 
	`lua_£‰abË
(
lua
,-3);

1184 
	`lua_push¡ršg
(
lua
,"REPL_REPLICA");

1185 
	`lua_pushnumb”
(
lua
,
PROPAGATE_REPL
);

1186 
	`lua_£‰abË
(
lua
,-3);

1188 
	`lua_push¡ršg
(
lua
,"REPL_ALL");

1189 
	`lua_pushnumb”
(
lua
,
PROPAGATE_AOF
|
PROPAGATE_REPL
);

1190 
	`lua_£‰abË
(
lua
,-3);

1193 
	`lua_push¡ršg
(
lua
,"breakpoint");

1194 
	`lua_pushcfunùiÚ
(
lua
,
luaRedisB»akpoštCommªd
);

1195 
	`lua_£‰abË
(
lua
,-3);

1198 
	`lua_push¡ršg
(
lua
,"debug");

1199 
	`lua_pushcfunùiÚ
(
lua
,
luaRedisDebugCommªd
);

1200 
	`lua_£‰abË
(
lua
,-3);

1203 
	`lua_£tglob®
(
lua
,"redis");

1206 
	`lua_g‘glob®
(
lua
,"math");

1208 
	`lua_push¡ršg
(
lua
,"random");

1209 
	`lua_pushcfunùiÚ
(
lua
,
»dis_m©h_¿ndom
);

1210 
	`lua_£‰abË
(
lua
,-3);

1212 
	`lua_push¡ršg
(
lua
,"randomseed");

1213 
	`lua_pushcfunùiÚ
(
lua
,
»dis_m©h_¿ndom£ed
);

1214 
	`lua_£‰abË
(
lua
,-3);

1216 
	`lua_£tglob®
(
lua
,"math");

1221 *
com·»_func
 = "function __redis__compare_helper(a,b)\n"

1226 
	`luaL_lßdbufãr
(
lua
,
com·»_func
,
	`¡¾’
(compare_func),"@cmp_func_def");

1227 
	`lua_pÿÎ
(
lua
,0,0,0);

1235 *
”rh_func
 = "local dbg = debug\n"

1247 
	`luaL_lßdbufãr
(
lua
,
”rh_func
,
	`¡¾’
(errh_func),"@err_handler_def");

1248 
	`lua_pÿÎ
(
lua
,0,0,0);

1255 ià(
£rv”
.
lua_ş›Á
 =ğ
NULL
) {

1256 
£rv”
.
lua_ş›Á
 = 
	`ü—‹Cl›Á
(
NULL
);

1257 
£rv”
.
lua_ş›Á
->
æags
 |ğ
CLIENT_LUA
;

1263 
	`sütšgEÇbËGlob®sPrÙeùiÚ
(
lua
);

1265 
£rv”
.
lua
 =†ua;

1266 
	}
}

1270 
	$sütšgR–—£
() {

1271 
	`diùR–—£
(
£rv”
.
lua_süts
);

1272 
£rv”
.
lua_süts_mem
 = 0;

1273 
	`lua_şo£
(
£rv”
.
lua
);

1274 
	}
}

1276 
	$sütšgRe£t
() {

1277 
	`sütšgR–—£
();

1278 
	`sütšgIn™
(0);

1279 
	}
}

1283 
	$luaS‘Glob®A¼ay
(
lua_S‹
 *
lua
, *
v¬
, 
robj
 **
–ev
, 
–ec
) {

1284 
j
;

1286 
	`lua_ÃwbË
(
lua
);

1287 
j
 = 0; j < 
–ec
; j++) {

1288 
	`lua_pushl¡ršg
(
lua
,(*)
–ev
[
j
]->
±r
,
	`sd¦’
(elev[j]->ptr));

1289 
	`lua_¿w£ti
(
lua
,-2,
j
+1);

1291 
	`lua_£tglob®
(
lua
,
v¬
);

1292 
	}
}

1304 
	$»dis_m©h_¿ndom
 (
lua_S‹
 *
L
) {

1307 
lua_Numb”
 
r
 = (lua_Numb”)(
	`»disL¿nd48
()%
REDIS_LRAND48_MAX
) /

1308 (
lua_Numb”
)
REDIS_LRAND48_MAX
;

1309 
	`lua_g‘tİ
(
L
)) {

1311 
	`lua_pushnumb”
(
L
, 
r
);

1315 
u
 = 
	`luaL_checkšt
(
L
, 1);

1316 
	`luaL_¬gcheck
(
L
, 1<=
u
, 1, "interval isƒmpty");

1317 
	`lua_pushnumb”
(
L
, 
	`æoÜ
(
r
*
u
)+1);

1321 
l
 = 
	`luaL_checkšt
(
L
, 1);

1322 
u
 = 
	`luaL_checkšt
(
L
, 2);

1323 
	`luaL_¬gcheck
(
L
, 
l
<=
u
, 2, "interval isƒmpty");

1324 
	`lua_pushnumb”
(
L
, 
	`æoÜ
(
r
*(
u
-
l
+1))+l);

1327 :  
	`luaL_”rÜ
(
L
, "wrong‚umber of‡rguments");

1330 
	}
}

1332 
	$»dis_m©h_¿ndom£ed
 (
lua_S‹
 *
L
) {

1333 
	`»disS¿nd48
(
	`luaL_checkšt
(
L
, 1));

1335 
	}
}

1358 
sds
 
	$luaC»©eFunùiÚ
(
ş›Á
 *
c
, 
lua_S‹
 *
lua
, 
robj
 *
body
) {

1359 
funúame
[43];

1360 
diùEÁry
 *
de
;

1362 
funúame
[0] = 'f';

1363 
funúame
[1] = '_';

1364 
	`sha1hex
(
funúame
+2,
body
->
±r
,
	`sd¦’
(body->ptr));

1366 
sds
 
sha
 = 
	`sd¢ewËn
(
funúame
+2,40);

1367 ià((
de
 = 
	`diùFšd
(
£rv”
.
lua_süts
,
sha
)è!ğ
NULL
) {

1368 
	`sdsä“
(
sha
);

1369  
	`diùG‘Key
(
de
);

1372 
sds
 
funcdef
 = 
	`sd£m±y
();

1373 
funcdef
 = 
	`sdsÿt
(funcdef,"function ");

1374 
funcdef
 = 
	`sdsÿ’
(funcdef,
funúame
,42);

1375 
funcdef
 = 
	`sdsÿ’
(funcdef,"() ",3);

1376 
funcdef
 = 
	`sdsÿ’
(funcdef,
body
->
±r
,
	`sd¦’
(body->ptr));

1377 
funcdef
 = 
	`sdsÿ’
(funcdef,"\nend",4);

1379 ià(
	`luaL_lßdbufãr
(
lua
,
funcdef
,
	`sd¦’
(funcdef),"@user_script")) {

1380 ià(
c
 !ğ
NULL
) {

1381 
	`addR•lyE¼ÜFÜm©
(
c
,

1383 
	`lua_to¡ršg
(
lua
,-1));

1385 
	`lua_pİ
(
lua
,1);

1386 
	`sdsä“
(
sha
);

1387 
	`sdsä“
(
funcdef
);

1388  
NULL
;

1390 
	`sdsä“
(
funcdef
);

1392 ià(
	`lua_pÿÎ
(
lua
,0,0,0)) {

1393 ià(
c
 !ğ
NULL
) {

1394 
	`addR•lyE¼ÜFÜm©
(
c
,"Error„unning script (new function): %s\n",

1395 
	`lua_to¡ršg
(
lua
,-1));

1397 
	`lua_pİ
(
lua
,1);

1398 
	`sdsä“
(
sha
);

1399  
NULL
;

1405 
»tv®
 = 
	`diùAdd
(
£rv”
.
lua_süts
,
sha
,
body
);

1406 
	`£rv”As£¹W™hInfo
(
c
 ? c : 
£rv”
.
lua_ş›Á
,
NULL
,
»tv®
 =ğ
DICT_OK
);

1407 
£rv”
.
lua_süts_mem
 +ğ
	`sdsZm®locSize
(
sha
è+ 
	`g‘SŒšgObjeùSdsU£dMemÜy
(
body
);

1408 
	`šüRefCouÁ
(
body
);

1409  
sha
;

1410 
	}
}

1413 
	$luaMaskCouÁHook
(
lua_S‹
 *
lua
, 
lua_Debug
 *
¬
) {

1414 
–­£d
 = 
	`m¡ime
(è- 
£rv”
.
lua_time_¡¬t
;

1415 
	`UNUSED
(
¬
);

1416 
	`UNUSED
(
lua
);

1420 ià(
–­£d
 >ğ
£rv”
.
lua_time_lim™
 && s”v”.
lua_timedout
 == 0) {

1421 
	`£rv”Log
(
LL_WARNING
,

1425 
–­£d
, 
£rv”
.
lua_cur_süt
);

1426 
£rv”
.
lua_timedout
 = 1;

1432 
	`´ÙeùCl›Á
(
£rv”
.
lua_ÿÎ”
);

1434 ià(
£rv”
.
lua_timedout
è
	`´oûssEv’tsWheBlocked
();

1435 ià(
£rv”
.
lua_kl
) {

1436 
	`£rv”Log
(
LL_WARNING
,"Lua script killed by user with SCRIPT KILL.");

1437 
	`lua_push¡ršg
(
lua
,"Script killed by user with SCRIPT KILL...");

1438 
	`lua_”rÜ
(
lua
);

1440 
	}
}

1442 
	$´•¬eLuaCl›Á
() {

1444 
	`£ËùDb
(
£rv”
.
lua_ş›Á
,£rv”.
lua_ÿÎ”
->
db
->
id
);

1445 
£rv”
.
lua_ş›Á
->
»¥
 = 2;

1448 ià(
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MULTI
) {

1449 
£rv”
.
lua_ş›Á
->
æags
 |ğ
CLIENT_MULTI
;

1451 
	}
}

1453 
	$»£tLuaCl›Á
() {

1455 
£rv”
.
lua_ş›Á
->
æags
 &ğ~
CLIENT_MULTI
;

1456 
	}
}

1458 
	$ev®G’”icCommªd
(
ş›Á
 *
c
, 
ev®sha
) {

1459 
lua_S‹
 *
lua
 = 
£rv”
.lua;

1460 
funúame
[43];

1461 
numkeys
;

1462 
š™Ÿl_£rv”_dœty
 = 
£rv”
.
dœty
;

1463 
d–hook
 = 0, 
”r
;

1467 
	`»disS¿nd48
(0);

1477 
£rv”
.
lua_¿ndom_dœty
 = 0;

1478 
£rv”
.
lua_wr™e_dœty
 = 0;

1479 
£rv”
.
lua_»¶iÿ‹_commªds
 = s”v”.
lua_®ways_»¶iÿ‹_commªds
;

1480 
£rv”
.
lua_muÉi_em™‹d
 = 0;

1481 
£rv”
.
lua_»¶
 = 
PROPAGATE_AOF
|
PROPAGATE_REPL
;

1484 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
numkeys
,
NULL
è!ğ
C_OK
)

1486 ià(
numkeys
 > (
c
->
¬gc
 - 3)) {

1487 
	`addR•lyE¼Ü
(
c
,"Number of keys can't be greaterhan‚umber of‡rgs");

1489 } ià(
numkeys
 < 0) {

1490 
	`addR•lyE¼Ü
(
c
,"Number of keys can't be‚egative");

1496 
funúame
[0] = 'f';

1497 
funúame
[1] = '_';

1498 ià(!
ev®sha
) {

1500 
	`sha1hex
(
funúame
+2,
c
->
¬gv
[1]->
±r
,
	`sd¦’
(c->argv[1]->ptr));

1503 
j
;

1504 *
sha
 = 
c
->
¬gv
[1]->
±r
;

1509 
j
 = 0; j < 40; j++)

1510 
funúame
[
j
+2] = (
sha
[j] >= 'A' && sha[j] <= 'Z') ?

1511 
sha
[
j
]+('a'-'A') : sha[j];

1512 
funúame
[42] = '\0';

1516 
	`lua_g‘glob®
(
lua
, "__redis__err__handler");

1519 
	`lua_g‘glob®
(
lua
, 
funúame
);

1520 ià(
	`lua_i¢
(
lua
,-1)) {

1521 
	`lua_pİ
(
lua
,1);

1525 ià(
ev®sha
) {

1526 
	`lua_pİ
(
lua
,1);

1527 
	`addR•ly
(
c
, 
sh¬ed
.
nosü‹¼
);

1530 ià(
	`luaC»©eFunùiÚ
(
c
,
lua
,c->
¬gv
[1]è=ğ
NULL
) {

1531 
	`lua_pİ
(
lua
,1);

1537 
	`lua_g‘glob®
(
lua
, 
funúame
);

1538 
	`£rv”As£¹
(!
	`lua_i¢
(
lua
,-1));

1543 
	`luaS‘Glob®A¼ay
(
lua
,"KEYS",
c
->
¬gv
+3,
numkeys
);

1544 
	`luaS‘Glob®A¼ay
(
lua
,"ARGV",
c
->
¬gv
+3+
numkeys
,c->
¬gc
-3-numkeys);

1553 
£rv”
.
lua_ÿÎ”
 = 
c
;

1554 
£rv”
.
lua_cur_süt
 = 
funúame
 + 2;

1555 
£rv”
.
lua_time_¡¬t
 = 
	`m¡ime
();

1556 
£rv”
.
lua_kl
 = 0;

1557 ià(
£rv”
.
lua_time_lim™
 > 0 && 
ldb
.
aùive
 == 0) {

1558 
	`lua_£thook
(
lua
,
luaMaskCouÁHook
,
LUA_MASKCOUNT
,100000);

1559 
d–hook
 = 1;

1560 } ià(
ldb
.
aùive
) {

1561 
	`lua_£thook
(
£rv”
.
lua
,
luaLdbLšeHook
,
LUA_MASKLINE
|
LUA_MASKCOUNT
,100000);

1562 
d–hook
 = 1;

1565 
	`´•¬eLuaCl›Á
();

1570 
”r
 = 
	`lua_pÿÎ
(
lua
,0,1,-2);

1572 
	`»£tLuaCl›Á
();

1575 ià(
d–hook
è
	`lua_£thook
(
lua
,
NULL
,0,0);

1576 ià(
£rv”
.
lua_timedout
) {

1577 
£rv”
.
lua_timedout
 = 0;

1580 
	`uÅrÙeùCl›Á
(
c
);

1581 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
ma¡”
)

1582 
	`queueCl›ÁFÜR•roûssšg
(
£rv”
.
ma¡”
);

1584 
£rv”
.
lua_ÿÎ”
 = 
NULL
;

1585 
£rv”
.
lua_cur_süt
 = 
NULL
;

1593 
	#LUA_GC_CYCLE_PERIOD
 50

	)

1595 
gc_couÁ
 = 0;

1597 
gc_couÁ
++;

1598 ià(
gc_couÁ
 =ğ
LUA_GC_CYCLE_PERIOD
) {

1599 
	`lua_gc
(
lua
,
LUA_GCSTEP
,
LUA_GC_CYCLE_PERIOD
);

1600 
gc_couÁ
 = 0;

1604 ià(
”r
) {

1605 
	`addR•lyE¼ÜFÜm©
(
c
,"Error„unning script (callo %s): %s\n",

1606 
funúame
, 
	`lua_to¡ršg
(
lua
,-1));

1607 
	`lua_pİ
(
lua
,2);

1611 
	`luaR•lyToRedisR•ly
(
c
,
lua
);

1612 
	`lua_pİ
(
lua
,1);

1617 ià(
£rv”
.
lua_»¶iÿ‹_commªds
) {

1618 
	`´ev’tCommªdPrİag©iÚ
(
c
);

1619 ià(
£rv”
.
lua_muÉi_em™‹d
) {

1620 
	`execCommªdPrİag©eExec
(
c
);

1634 ià(
ev®sha
 && !
£rv”
.
lua_»¶iÿ‹_commªds
) {

1635 ià(!
	`»¶iÿtiÚSütCacheExi¡s
(
c
->
¬gv
[1]->
±r
)) {

1639 
robj
 *
süt
 = 
	`diùF‘chV®ue
(
£rv”
.
lua_süts
,
c
->
¬gv
[1]->
±r
);

1641 
	`»¶iÿtiÚSütCacheAdd
(
c
->
¬gv
[1]->
±r
);

1642 
	`£rv”As£¹W™hInfo
(
c
,
NULL
,
süt
 != NULL);

1648 ià(
£rv”
.
dœty
 =ğ
š™Ÿl_£rv”_dœty
) {

1649 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,3,

1650 
	`»£tRefCouÁ
(
	`ü—‹SŒšgObjeù
("SCRIPT",6)),

1651 
	`»£tRefCouÁ
(
	`ü—‹SŒšgObjeù
("LOAD",4)),

1652 
süt
);

1654 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,0,

1655 
	`»£tRefCouÁ
(
	`ü—‹SŒšgObjeù
("EVAL",4)));

1656 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,1,
süt
);

1658 
	`fÜûCommªdPrİag©iÚ
(
c
,
PROPAGATE_REPL
|
PROPAGATE_AOF
);

1661 
	}
}

1663 
	$ev®Commªd
(
ş›Á
 *
c
) {

1664 ià(!(
c
->
æags
 & 
CLIENT_LUA_DEBUG
))

1665 
	`ev®G’”icCommªd
(
c
,0);

1667 
	`ev®G’”icCommªdW™hDebuggšg
(
c
,0);

1668 
	}
}

1670 
	$ev®ShaCommªd
(
ş›Á
 *
c
) {

1671 ià(
	`sd¦’
(
c
->
¬gv
[1]->
±r
) != 40) {

1676 
	`addR•ly
(
c
, 
sh¬ed
.
nosü‹¼
);

1679 ià(!(
c
->
æags
 & 
CLIENT_LUA_DEBUG
))

1680 
	`ev®G’”icCommªd
(
c
,1);

1682 
	`addR•lyE¼Ü
(
c
,"Please use EVAL instead of EVALSHA for debugging");

1685 
	}
}

1687 
	$sütCommªd
(
ş›Á
 *
c
) {

1688 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

1689 cÚ¡ *
h–p
[] = {

1695 
NULL


1697 
	`addR•lyH–p
(
c
, 
h–p
);

1698 } ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"flush")) {

1699 
	`sütšgRe£t
();

1700 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1701 
	`»¶iÿtiÚSütCacheFlush
();

1702 
£rv”
.
dœty
++;

1703 } ià(
c
->
¬gc
 >ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"exists")) {

1704 
j
;

1706 
	`addR•lyA¼ayL’
(
c
, c->
¬gc
-2);

1707 
j
 = 2; j < 
c
->
¬gc
; j++) {

1708 ià(
	`diùFšd
(
£rv”
.
lua_süts
,
c
->
¬gv
[
j
]->
±r
))

1709 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

1711 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1713 } ià(
c
->
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"load")) {

1714 
sds
 
sha
 = 
	`luaC»©eFunùiÚ
(
c
,
£rv”
.
lua
,c->
¬gv
[2]);

1715 ià(
sha
 =ğ
NULL
) ;

1716 
	`addR•lyBulkCBufãr
(
c
,
sha
,40);

1717 
	`fÜûCommªdPrİag©iÚ
(
c
,
PROPAGATE_REPL
|
PROPAGATE_AOF
);

1718 } ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"kill")) {

1719 ià(
£rv”
.
lua_ÿÎ”
 =ğ
NULL
) {

1720 
	`addR•lySds
(
c
,
	`sd¢ew
("-NOTBUSY No scripts inƒxecution„ight‚ow.\r\n"));

1721 } ià(
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MASTER
) {

1722 
	`addR•lySds
(
c
,
	`sd¢ew
("-UNKILLABLE The busy script was sent by‡ master instance inhe context of„eplication‡nd cannot be killed.\r\n"));

1723 } ià(
£rv”
.
lua_wr™e_dœty
) {

1724 
	`addR•lySds
(
c
,
	`sd¢ew
("-UNKILLABLE Sorryhe script‡lreadyƒxecuted write commands‡gainsthe dataset. You canƒither waithe scriptermination or killhe server in‡ hard way usinghe SHUTDOWN NOSAVE command.\r\n"));

1726 
£rv”
.
lua_kl
 = 1;

1727 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1729 } ià(
c
->
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"debug")) {

1730 ià(
	`ş›ÁHasP’dšgR•l›s
(
c
)) {

1731 
	`addR•lyE¼Ü
(
c
,"SCRIPT DEBUG must be called outside‡…ipeline");

1734 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"no")) {

1735 
	`ldbDi§bË
(
c
);

1736 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1737 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"yes")) {

1738 
	`ldbEÇbË
(
c
);

1739 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1740 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"sync")) {

1741 
	`ldbEÇbË
(
c
);

1742 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1743 
c
->
æags
 |ğ
CLIENT_LUA_DEBUG_SYNC
;

1745 
	`addR•lyE¼Ü
(
c
,"Use SCRIPT DEBUG yes/sync/no");

1749 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

1751 
	}
}

1758 
	$ldbIn™
() {

1759 
ldb
.
cÚn
 = 
NULL
;

1760 
ldb
.
aùive
 = 0;

1761 
ldb
.
logs
 = 
	`li¡C»©e
();

1762 
	`li¡S‘F»eM‘hod
(
ldb
.
logs
,((*)(*))
sdsä“
);

1763 
ldb
.
chd»n
 = 
	`li¡C»©e
();

1764 
ldb
.
¤c
 = 
NULL
;

1765 
ldb
.
lšes
 = 0;

1766 
ldb
.
cbuf
 = 
	`sd£m±y
();

1767 
	}
}

1770 
	$ldbFlushLog
(
li¡
 *
log
) {

1771 
li¡Node
 *
Ê
;

1773 (
Ê
 = 
	`li¡Fœ¡
(
log
)è!ğ
NULL
)

1774 
	`li¡D–Node
(
log
,
Ê
);

1775 
	}
}

1778 
	$ldbEÇbË
(
ş›Á
 *
c
) {

1779 
c
->
æags
 |ğ
CLIENT_LUA_DEBUG
;

1780 
	`ldbFlushLog
(
ldb
.
logs
);

1781 
ldb
.
cÚn
 = 
c
->conn;

1782 
ldb
.
¡•
 = 1;

1783 
ldb
.
bpcouÁ
 = 0;

1784 
ldb
.
luabp
 = 0;

1785 
	`sdsä“
(
ldb
.
cbuf
);

1786 
ldb
.
cbuf
 = 
	`sd£m±y
();

1787 
ldb
.
maxËn
 = 
LDB_MAX_LEN_DEFAULT
;

1788 
ldb
.
maxËn_hšt_£Á
 = 0;

1789 
	}
}

1794 
	$ldbDi§bË
(
ş›Á
 *
c
) {

1795 
c
->
æags
 &ğ~(
CLIENT_LUA_DEBUG
|
CLIENT_LUA_DEBUG_SYNC
);

1796 
	}
}

1799 
	$ldbLog
(
sds
 
’Œy
) {

1800 
	`li¡AddNodeTa
(
ldb
.
logs
,
’Œy
);

1801 
	}
}

1807 
	$ldbLogW™hMaxL’
(
sds
 
’Œy
) {

1808 
Œimmed
 = 0;

1809 ià(
ldb
.
maxËn
 && 
	`sd¦’
(
’Œy
) >†db.maxlen) {

1810 
	`sd¤ªge
(
’Œy
,0,
ldb
.
maxËn
-1);

1811 
’Œy
 = 
	`sdsÿ’
(entry," ...",4);

1812 
Œimmed
 = 1;

1814 
	`ldbLog
(
’Œy
);

1815 ià(
Œimmed
 && 
ldb
.
maxËn_hšt_£Á
 == 0) {

1816 
ldb
.
maxËn_hšt_£Á
 = 1;

1817 
	`ldbLog
(
	`sd¢ew
(

1820 
	}
}

1825 
	$ldbS’dLogs
() {

1826 
sds
 
´Ùo
 = 
	`sd£m±y
();

1827 
´Ùo
 = 
	`sdsÿtfmt
ÕrÙo,"*%i\r\n", ()
	`li¡L’gth
(
ldb
.
logs
));

1828 
	`li¡L’gth
(
ldb
.
logs
)) {

1829 
li¡Node
 *
Ê
 = 
	`li¡Fœ¡
(
ldb
.
logs
);

1830 
´Ùo
 = 
	`sdsÿ’
(proto,"+",1);

1831 
	`sdsm­ch¬s
(
Ê
->
v®ue
,"\r\n"," ",2);

1832 
´Ùo
 = 
	`sdsÿtsds
ÕrÙo,
Ê
->
v®ue
);

1833 
´Ùo
 = 
	`sdsÿ’
(proto,"\r\n",2);

1834 
	`li¡D–Node
(
ldb
.
logs
,
Ê
);

1836 ià(
	`cÚnWr™e
(
ldb
.
cÚn
,
´Ùo
,
	`sd¦’
(proto)) == -1) {

1841 
	`sdsä“
(
´Ùo
);

1842 
	}
}

1856 
	$ldbS¹SessiÚ
(
ş›Á
 *
c
) {

1857 
ldb
.
fÜked
 = (
c
->
æags
 & 
CLIENT_LUA_DEBUG_SYNC
) == 0;

1858 ià(
ldb
.
fÜked
) {

1859 
pid_t
 
ı
 = 
	`»disFÜk
();

1860 ià(
ı
 == -1) {

1861 
	`addR•lyE¼Ü
(
c
,"Fork() failed: can't„un EVAL in debugging mode.");

1863 } ià(
ı
 == 0) {

1865 
sigaùiÚ
 
aù
;

1866 
	`sigem±y£t
(&
aù
.
§_mask
);

1867 
aù
.
§_æags
 = 0;

1868 
aù
.
§_hªdËr
 = 
SIG_IGN
;

1869 
	`sigaùiÚ
(
SIGTERM
, &
aù
, 
NULL
);

1870 
	`sigaùiÚ
(
SIGINT
, &
aù
, 
NULL
);

1875 
	`£rv”Log
(
LL_WARNING
,"Redis forked for debuggingƒval");

1878 
	`li¡AddNodeTa
(
ldb
.
chd»n
,(*)()
ı
);

1879 
	`ä“Cl›ÁAsync
(
c
);

1883 
	`£rv”Log
(
LL_WARNING
,

1888 
	`cÚnBlock
(
ldb
.
cÚn
);

1889 
	`cÚnS’dTimeout
(
ldb
.
cÚn
,5000);

1890 
ldb
.
aùive
 = 1;

1894 
sds
 
¤c¡ršg
 = 
	`sdsdup
(
c
->
¬gv
[1]->
±r
);

1895 
size_t
 
¤ş’
 = 
	`sd¦’
(
¤c¡ršg
);

1896 
¤ş’
 && (
¤c¡ršg
[srclen-1] == '\n' ||

1897 
¤c¡ršg
[
¤ş’
-1] == '\r'))

1899 
¤c¡ršg
[--
¤ş’
] = '\0';

1901 
	`sds£’
(
¤c¡ršg
,
¤ş’
);

1902 
ldb
.
¤c
 = 
	`sds¥l™Ën
(
¤c¡ršg
,
	`sd¦’
(¤c¡ršg),"\n",1,&ldb.
lšes
);

1903 
	`sdsä“
(
¤c¡ršg
);

1905 
	}
}

1909 
	$ldbEndSessiÚ
(
ş›Á
 *
c
) {

1911 
	`ldbLog
(
	`sd¢ew
("<endsession>"));

1912 
	`ldbS’dLogs
();

1915 ià(
ldb
.
fÜked
) {

1916 
	`wr™eToCl›Á
(
c
,0);

1917 
	`£rv”Log
(
LL_WARNING
,"Lua debugging session childƒxiting");

1918 
	`ex™FromChd
(0);

1920 
	`£rv”Log
(
LL_WARNING
,

1925 
	`cÚnNÚBlock
(
ldb
.
cÚn
);

1926 
	`cÚnS’dTimeout
(
ldb
.
cÚn
,0);

1930 
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

1933 
	`sdsä“¥l™»s
(
ldb
.
¤c
,ldb.
lšes
);

1934 
ldb
.
lšes
 = 0;

1935 
ldb
.
aùive
 = 0;

1936 
	}
}

1941 
	$ldbRemoveChd
(
pid_t
 
pid
) {

1942 
li¡Node
 *
Ê
 = 
	`li¡S—rchKey
(
ldb
.
chd»n
,(*)()
pid
);

1943 ià(
Ê
) {

1944 
	`li¡D–Node
(
ldb
.
chd»n
,
Ê
);

1948 
	}
}

1952 
	$ldbP’dšgChd»n
() {

1953  
	`li¡L’gth
(
ldb
.
chd»n
);

1954 
	}
}

1957 
	$ldbKlFÜkedSessiÚs
() {

1958 
li¡I‹r
 
li
;

1959 
li¡Node
 *
Ê
;

1961 
	`li¡Rewšd
(
ldb
.
chd»n
,&
li
);

1962 (
Ê
 = 
	`li¡Next
(&
li
))) {

1963 
pid_t
 
pid
 = (è
Ê
->
v®ue
;

1964 
	`£rv”Log
(
LL_WARNING
,"Klšg debuggšg sessiÚ %ld",()
pid
);

1965 
	`kl
(
pid
,
SIGKILL
);

1967 
	`li¡R–—£
(
ldb
.
chd»n
);

1968 
ldb
.
chd»n
 = 
	`li¡C»©e
();

1969 
	}
}

1973 
	$ev®G’”icCommªdW™hDebuggšg
(
ş›Á
 *
c
, 
ev®sha
) {

1974 ià(
	`ldbS¹SessiÚ
(
c
)) {

1975 
	`ev®G’”icCommªd
(
c
,
ev®sha
);

1976 
	`ldbEndSessiÚ
(
c
);

1978 
	`ldbDi§bË
(
c
);

1980 
	}
}

1984 *
	$ldbG‘SourûLše
(
lše
) {

1985 
idx
 = 
lše
-1;

1986 ià(
idx
 < 0 || idx >ğ
ldb
.
lšes
)  "<out of„ange source code†ine>";

1987  
ldb
.
¤c
[
idx
];

1988 
	}
}

1991 
	$ldbIsB»akpošt
(
lše
) {

1992 
j
;

1994 
j
 = 0; j < 
ldb
.
bpcouÁ
; j++)

1995 ià(
ldb
.
bp
[
j
] =ğ
lše
)  1;

1997 
	}
}

2002 
	$ldbAddB»akpošt
(
lše
) {

2003 ià(
lše
 <ğ0 ||†š> 
ldb
.
lšes
)  0;

2004 ià(!
	`ldbIsB»akpošt
(
lše
è&& 
ldb
.
bpcouÁ
 !ğ
LDB_BREAKPOINTS_MAX
) {

2005 
ldb
.
bp
[ldb.
bpcouÁ
++] = 
lše
;

2009 
	}
}

2013 
	$ldbD–B»akpošt
(
lše
) {

2014 
j
;

2016 
j
 = 0; j < 
ldb
.
bpcouÁ
; j++) {

2017 ià(
ldb
.
bp
[
j
] =ğ
lše
) {

2018 
ldb
.
bpcouÁ
--;

2019 
	`memmove
(
ldb
.
bp
+
j
,ldb.bp+j+1,ldb.
bpcouÁ
-j);

2024 
	}
}

2029 
sds
 *
	$ldbR•lP¬£Commªd
(*
¬gı
) {

2030 
sds
 *
¬gv
 = 
NULL
;

2031 
¬gc
 = 0;

2032 ià(
	`sd¦’
(
ldb
.
cbuf
è=ğ0è 
NULL
;

2036 
sds
 
cİy
 = 
	`sdsdup
(
ldb
.
cbuf
);

2037 *
p
 = 
cİy
;

2044 
p
 = 
	`¡rchr
Õ,'*'); ià(!pè
´ÙÛ¼
;

2045 *
¶’
 = 
p
+1;

2046 
p
 = 
	`¡r¡r
Õ,"\r\n"); ià(!pè
´ÙÛ¼
;

2047 *
p
 = '\0';… += 2;

2048 *
¬gı
 = 
	`©oi
(
¶’
);

2049 ià(*
¬gı
 <ğ0 || *¬gı > 1024è
´ÙÛ¼
;

2052 
¬gv
 = 
	`zm®loc
((
sds
)*(*
¬gı
));

2053 
¬gc
 = 0;

2054 
¬gc
 < *
¬gı
) {

2055 ià(*
p
 !ğ'$'è
´ÙÛ¼
;

2056 
¶’
 = 
p
+1;

2057 
p
 = 
	`¡r¡r
Õ,"\r\n"); ià(!pè
´ÙÛ¼
;

2058 *
p
 = '\0';… += 2;

2059 
¦’
 = 
	`©oi
(
¶’
);

2060 ià(
¦’
 <ğ0 || sËÀ> 1024è
´ÙÛ¼
;

2061 
¬gv
[
¬gc
++] = 
	`sd¢ewËn
(
p
,
¦’
);

2062 
p
 +ğ
¦’
;

2063 ià(
p
[0] !ğ'\r' ||…[1] !ğ'\n'è
´ÙÛ¼
;

2064 
p
 += 2;

2066 
	`sdsä“
(
cİy
);

2067  
¬gv
;

2069 
´ÙÛ¼
:

2070 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2071 
	`sdsä“
(
cİy
);

2072  
NULL
;

2073 
	}
}

2076 
	$ldbLogSourûLše
(
Êum
) {

2077 *
lše
 = 
	`ldbG‘SourûLše
(
Êum
);

2078 *
´efix
;

2079 
bp
 = 
	`ldbIsB»akpošt
(
Êum
);

2080 
cu¼’t
 = 
ldb
.
cu¼’še
 =ğ
Êum
;

2082 ià(
cu¼’t
 && 
bp
)

2083 
´efix
 = "->#";

2084 ià(
cu¼’t
)

2085 
´efix
 = "-> ";

2086 ià(
bp
)

2087 
´efix
 = " #";

2089 
´efix
 = " ";

2090 
sds
 
thi¦še
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"%s%-3d %s", 
´efix
, 
Êum
, 
lše
);

2091 
	`ldbLog
(
thi¦še
);

2092 
	}
}

2099 
	$ldbLi¡
(
¬ound
, 
cÚ‹xt
) {

2100 
j
;

2102 
j
 = 1; j <ğ
ldb
.
lšes
; j++) {

2103 ià(
¬ound
 !ğ0 && 
	`abs
×round-
j
è> 
cÚ‹xt
) ;

2104 
	`ldbLogSourûLše
(
j
);

2106 
	}
}

2115 
	#LDB_MAX_VALUES_DEPTH
 (
LUA_MINSTACK
/2)

	)

2116 
sds
 
	$ldbC©SckV®ueRec
(
sds
 
s
, 
lua_S‹
 *
lua
, 
idx
, 
Ëv–
) {

2117 
t
 = 
	`lua_ty³
(
lua
,
idx
);

2119 ià(
Ëv–
++ =ğ
LDB_MAX_VALUES_DEPTH
)

2120  
	`sdsÿt
(
s
,"<max„ecursion†evel„eached! Nestedable?>");

2122 
t
) {

2123 
LUA_TSTRING
:

2125 
size_t
 
¡¾
;

2126 *
¡½
 = (*)
	`lua_tŞ¡ršg
(
lua
,
idx
,&
¡¾
);

2127 
s
 = 
	`sdsÿŒ•r
(s,
¡½
,
¡¾
);

2130 
LUA_TBOOLEAN
:

2131 
s
 = 
	`sdsÿt
(s,
	`lua_toboŞ—n
(
lua
,
idx
) ? "true" : "false");

2133 
LUA_TNUMBER
:

2134 
s
 = 
	`sdsÿrštf
(s,"%g",()
	`lua_tÚumb”
(
lua
,
idx
));

2136 
LUA_TNIL
:

2137 
s
 = 
	`sdsÿ’
(s,"nil",3);

2139 
LUA_TTABLE
:

2141 
ex³ùed_šdex
 = 1;

2142 
is_¬¿y
 = 1;

2146 
sds
 
»´1
 = 
	`sd£m±y
();

2147 
sds
 
»´2
 = 
	`sd£m±y
();

2148 
	`lua_pushn
(
lua
);

2149 
	`lua_Ãxt
(
lua
,
idx
-1)) {

2151 ià(
is_¬¿y
 &&

2152 (
	`lua_ty³
(
lua
,-2è!ğ
LUA_TNUMBER
 ||

2153 
	`lua_tÚumb”
(
lua
,-2è!ğ
ex³ùed_šdex
)è
is_¬¿y
 = 0;

2156 
»´1
 = 
	`ldbC©SckV®ueRec
Ô•r1,
lua
,-1,
Ëv–
);

2157 
»´1
 = 
	`sdsÿ’
(repr1,"; ",2);

2159 
»´2
 = 
	`sdsÿ’
(repr2,"[",1);

2160 
»´2
 = 
	`ldbC©SckV®ueRec
Ô•r2,
lua
,-2,
Ëv–
);

2161 
»´2
 = 
	`sdsÿ’
(repr2,"]=",2);

2162 
»´2
 = 
	`ldbC©SckV®ueRec
Ô•r2,
lua
,-1,
Ëv–
);

2163 
»´2
 = 
	`sdsÿ’
(repr2,"; ",2);

2164 
	`lua_pİ
(
lua
,1);

2165 
ex³ùed_šdex
++;

2168 ià(
	`sd¦’
(
»´1
)è
	`sd¤ªge
(repr1,0,-3);

2169 ià(
	`sd¦’
(
»´2
)è
	`sd¤ªge
(repr2,0,-3);

2171 
s
 = 
	`sdsÿ’
(s,"{",1);

2172 
s
 = 
	`sdsÿtsds
(s,
is_¬¿y
 ? 
»´1
 : 
»´2
);

2173 
s
 = 
	`sdsÿ’
(s,"}",1);

2174 
	`sdsä“
(
»´1
);

2175 
	`sdsä“
(
»´2
);

2178 
LUA_TFUNCTION
:

2179 
LUA_TUSERDATA
:

2180 
LUA_TTHREAD
:

2181 
LUA_TLIGHTUSERDATA
:

2183 cÚ¡ *
p
 = 
	`lua_tİoš‹r
(
lua
,
idx
);

2184 *
ty³Çme
 = "unknown";

2185 ià(
t
 =ğ
LUA_TFUNCTION
è
ty³Çme
 = "function";

2186 ià(
t
 =ğ
LUA_TUSERDATA
è
ty³Çme
 = "userdata";

2187 ià(
t
 =ğ
LUA_TTHREAD
è
ty³Çme
 = "thread";

2188 ià(
t
 =ğ
LUA_TLIGHTUSERDATA
è
ty³Çme
 = "light-userdata";

2189 
s
 = 
	`sdsÿrštf
(s,"\"%s@%p\"",
ty³Çme
,
p
);

2193 
s
 = 
	`sdsÿt
(s,"\"<unknown-lua-type>\"");

2196  
s
;

2197 
	}
}

2201 
sds
 
	$ldbC©SckV®ue
(
sds
 
s
, 
lua_S‹
 *
lua
, 
idx
) {

2202  
	`ldbC©SckV®ueRec
(
s
,
lua
,
idx
,0);

2203 
	}
}

2208 
	$ldbLogSckV®ue
(
lua_S‹
 *
lua
, *
´efix
) {

2209 
sds
 
s
 = 
	`sd¢ew
(
´efix
);

2210 
s
 = 
	`ldbC©SckV®ue
(s,
lua
,-1);

2211 
	`ldbLogW™hMaxL’
(
s
);

2212 
	}
}

2214 *
ldbRedisPrÙocŞToHumª_IÁ
(
sds
 *
o
, *
»¶y
);

2215 *
ldbRedisPrÙocŞToHumª_Bulk
(
sds
 *
o
, *
»¶y
);

2216 *
ldbRedisPrÙocŞToHumª_Stus
(
sds
 *
o
, *
»¶y
);

2217 *
ldbRedisPrÙocŞToHumª_MuÉiBulk
(
sds
 *
o
, *
»¶y
);

2218 *
ldbRedisPrÙocŞToHumª_S‘
(
sds
 *
o
, *
»¶y
);

2219 *
ldbRedisPrÙocŞToHumª_M­
(
sds
 *
o
, *
»¶y
);

2220 *
ldbRedisPrÙocŞToHumª_NuÎ
(
sds
 *
o
, *
»¶y
);

2221 *
ldbRedisPrÙocŞToHumª_BoŞ
(
sds
 *
o
, *
»¶y
);

2222 *
ldbRedisPrÙocŞToHumª_DoubË
(
sds
 *
o
, *
»¶y
);

2229 *
	$ldbRedisPrÙocŞToHumª
(
sds
 *
o
, *
»¶y
) {

2230 *
p
 = 
»¶y
;

2231 *
p
) {

2232 ':': 
p
 = 
	`ldbRedisPrÙocŞToHumª_IÁ
(
o
,
»¶y
); ;

2233 '$': 
p
 = 
	`ldbRedisPrÙocŞToHumª_Bulk
(
o
,
»¶y
); ;

2234 '+': 
p
 = 
	`ldbRedisPrÙocŞToHumª_Stus
(
o
,
»¶y
); ;

2235 '-': 
p
 = 
	`ldbRedisPrÙocŞToHumª_Stus
(
o
,
»¶y
); ;

2236 '*': 
p
 = 
	`ldbRedisPrÙocŞToHumª_MuÉiBulk
(
o
,
»¶y
); ;

2237 '~': 
p
 = 
	`ldbRedisPrÙocŞToHumª_S‘
(
o
,
»¶y
); ;

2238 '%': 
p
 = 
	`ldbRedisPrÙocŞToHumª_M­
(
o
,
»¶y
); ;

2239 '_': 
p
 = 
	`ldbRedisPrÙocŞToHumª_NuÎ
(
o
,
»¶y
); ;

2240 '#': 
p
 = 
	`ldbRedisPrÙocŞToHumª_BoŞ
(
o
,
»¶y
); ;

2241 ',': 
p
 = 
	`ldbRedisPrÙocŞToHumª_DoubË
(
o
,
»¶y
); ;

2243  
p
;

2244 
	}
}

2249 *
	$ldbRedisPrÙocŞToHumª_IÁ
(
sds
 *
o
, *
»¶y
) {

2250 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2251 *
o
 = 
	`sdsÿ’
(*o,
»¶y
+1,
p
-reply-1);

2252  
p
+2;

2253 
	}
}

2255 *
	$ldbRedisPrÙocŞToHumª_Bulk
(
sds
 *
o
, *
»¶y
) {

2256 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2257 
bulkËn
;

2259 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
bulkËn
);

2260 ià(
bulkËn
 == -1) {

2261 *
o
 = 
	`sdsÿ’
(*o,"NULL",4);

2262  
p
+2;

2264 *
o
 = 
	`sdsÿŒ•r
(*o,
p
+2,
bulkËn
);

2265  
p
+2+
bulkËn
+2;

2267 
	}
}

2269 *
	$ldbRedisPrÙocŞToHumª_Stus
(
sds
 *
o
, *
»¶y
) {

2270 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2272 *
o
 = 
	`sdsÿŒ•r
(*o,
»¶y
,
p
-reply);

2273  
p
+2;

2274 
	}
}

2276 *
	$ldbRedisPrÙocŞToHumª_MuÉiBulk
(
sds
 *
o
, *
»¶y
) {

2277 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2278 
mbulkËn
;

2279 
j
 = 0;

2281 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
mbulkËn
);

2282 
p
 += 2;

2283 ià(
mbulkËn
 == -1) {

2284 *
o
 = 
	`sdsÿ’
(*o,"NULL",4);

2285  
p
;

2287 *
o
 = 
	`sdsÿ’
(*o,"[",1);

2288 
j
 = 0; j < 
mbulkËn
; j++) {

2289 
p
 = 
	`ldbRedisPrÙocŞToHumª
(
o
,p);

2290 ià(
j
 !ğ
mbulkËn
-1è*
o
 = 
	`sdsÿ’
(*o,",",1);

2292 *
o
 = 
	`sdsÿ’
(*o,"]",1);

2293  
p
;

2294 
	}
}

2296 *
	$ldbRedisPrÙocŞToHumª_S‘
(
sds
 *
o
, *
»¶y
) {

2297 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2298 
mbulkËn
;

2299 
j
 = 0;

2301 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
mbulkËn
);

2302 
p
 += 2;

2303 *
o
 = 
	`sdsÿ’
(*o,"~(",2);

2304 
j
 = 0; j < 
mbulkËn
; j++) {

2305 
p
 = 
	`ldbRedisPrÙocŞToHumª
(
o
,p);

2306 ià(
j
 !ğ
mbulkËn
-1è*
o
 = 
	`sdsÿ’
(*o,",",1);

2308 *
o
 = 
	`sdsÿ’
(*o,")",1);

2309  
p
;

2310 
	}
}

2312 *
	$ldbRedisPrÙocŞToHumª_M­
(
sds
 *
o
, *
»¶y
) {

2313 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2314 
mbulkËn
;

2315 
j
 = 0;

2317 
	`¡ršg2Î
(
»¶y
+1,
p
-»¶y-1,&
mbulkËn
);

2318 
p
 += 2;

2319 *
o
 = 
	`sdsÿ’
(*o,"{",1);

2320 
j
 = 0; j < 
mbulkËn
; j++) {

2321 
p
 = 
	`ldbRedisPrÙocŞToHumª
(
o
,p);

2322 *
o
 = 
	`sdsÿ’
(*o," => ",4);

2323 
p
 = 
	`ldbRedisPrÙocŞToHumª
(
o
,p);

2324 ià(
j
 !ğ
mbulkËn
-1è*
o
 = 
	`sdsÿ’
(*o,",",1);

2326 *
o
 = 
	`sdsÿ’
(*o,"}",1);

2327  
p
;

2328 
	}
}

2330 *
	$ldbRedisPrÙocŞToHumª_NuÎ
(
sds
 *
o
, *
»¶y
) {

2331 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2332 *
o
 = 
	`sdsÿ’
(*o,"(null)",6);

2333  
p
+2;

2334 
	}
}

2336 *
	$ldbRedisPrÙocŞToHumª_BoŞ
(
sds
 *
o
, *
»¶y
) {

2337 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2338 ià(
»¶y
[1] == 't')

2339 *
o
 = 
	`sdsÿ’
(*o,"#true",5);

2341 *
o
 = 
	`sdsÿ’
(*o,"#false",6);

2342  
p
+2;

2343 
	}
}

2345 *
	$ldbRedisPrÙocŞToHumª_DoubË
(
sds
 *
o
, *
»¶y
) {

2346 *
p
 = 
	`¡rchr
(
»¶y
+1,'\r');

2347 *
o
 = 
	`sdsÿ’
(*o,"(double) ",9);

2348 *
o
 = 
	`sdsÿ’
(*o,
»¶y
+1,
p
-reply-1);

2349  
p
+2;

2350 
	}
}

2355 
	$ldbLogRedisR•ly
(*
»¶y
) {

2356 
sds
 
log
 = 
	`sd¢ew
("<reply> ");

2357 
	`ldbRedisPrÙocŞToHumª
(&
log
,
»¶y
);

2358 
	`ldbLogW™hMaxL’
(
log
);

2359 
	}
}

2364 
	$ldbPršt
(
lua_S‹
 *
lua
, *
v¬Çme
) {

2365 
lua_Debug
 
¬
;

2367 
l
 = 0;

2368 
	`lua_g‘¡ack
(
lua
,
l
,&
¬
) != 0) {

2369 
l
++;

2370 cÚ¡ *
Çme
;

2371 
i
 = 1;

2372 (
Çme
 = 
	`lua_g‘loÿl
(
lua
,&
¬
,
i
)è!ğ
NULL
) {

2373 
i
++;

2374 ià(
	`¡rcmp
(
v¬Çme
,
Çme
) == 0) {

2375 
	`ldbLogSckV®ue
(
lua
,"<value> ");

2376 
	`lua_pİ
(
lua
,1);

2379 
	`lua_pİ
(
lua
,1);

2385 ià(!
	`¡rcmp
(
v¬Çme
,"ARGV") || !strcmp(varname,"KEYS")) {

2386 
	`lua_g‘glob®
(
lua
, 
v¬Çme
);

2387 
	`ldbLogSckV®ue
(
lua
,"<value> ");

2388 
	`lua_pİ
(
lua
,1);

2390 
	`ldbLog
(
	`sd¢ew
("No such variable."));

2392 
	}
}

2396 
	$ldbPrštAÎ
(
lua_S‹
 *
lua
) {

2397 
lua_Debug
 
¬
;

2398 
v¬s
 = 0;

2400 ià(
	`lua_g‘¡ack
(
lua
,0,&
¬
) != 0) {

2401 cÚ¡ *
Çme
;

2402 
i
 = 1;

2403 (
Çme
 = 
	`lua_g‘loÿl
(
lua
,&
¬
,
i
)è!ğ
NULL
) {

2404 
i
++;

2405 ià(!
	`¡r¡r
(
Çme
,"(*temporary)")) {

2406 
sds
 
´efix
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"<v®ue> % ğ",
Çme
);

2407 
	`ldbLogSckV®ue
(
lua
,
´efix
);

2408 
	`sdsä“
(
´efix
);

2409 
v¬s
++;

2411 
	`lua_pİ
(
lua
,1);

2415 ià(
v¬s
 == 0) {

2416 
	`ldbLog
(
	`sd¢ew
("No†ocal variables inhe current context."));

2418 
	}
}

2421 
	$ldbB»ak
(
sds
 *
¬gv
, 
¬gc
) {

2422 ià(
¬gc
 == 1) {

2423 ià(
ldb
.
bpcouÁ
 == 0) {

2424 
	`ldbLog
(
	`sd¢ew
("No breakpoints set. Use 'b <line>'o‡dd one."));

2427 
	`ldbLog
(
	`sdsÿtfmt
(
	`sd£m±y
(),"%˜b»akpošt £t:",
ldb
.
bpcouÁ
));

2428 
j
;

2429 
j
 = 0; j < 
ldb
.
bpcouÁ
; j++)

2430 
	`ldbLogSourûLše
(
ldb
.
bp
[
j
]);

2433 
j
;

2434 
j
 = 1; j < 
¬gc
; j++) {

2435 *
¬g
 = 
¬gv
[
j
];

2436 
lše
;

2437 ià(!
	`¡ršg2l
(
¬g
,
	`sd¦’
×rg),&
lše
)) {

2438 
	`ldbLog
(
	`sdsÿtfmt
(
	`sd£m±y
(),"Inv®id‡rgum’t:'%s'",
¬g
));

2440 ià(
lše
 == 0) {

2441 
ldb
.
bpcouÁ
 = 0;

2442 
	`ldbLog
(
	`sd¢ew
("All breakpoints„emoved."));

2443 } ià(
lše
 > 0) {

2444 ià(
ldb
.
bpcouÁ
 =ğ
LDB_BREAKPOINTS_MAX
) {

2445 
	`ldbLog
(
	`sd¢ew
("Too many breakpoints set."));

2446 } ià(
	`ldbAddB»akpošt
(
lše
)) {

2447 
	`ldbLi¡
(
lše
,1);

2449 
	`ldbLog
(
	`sd¢ew
("Wrong†ine‚umber."));

2451 } ià(
lše
 < 0) {

2452 ià(
	`ldbD–B»akpošt
(-
lše
))

2453 
	`ldbLog
(
	`sd¢ew
("Breakpoint„emoved."));

2455 
	`ldbLog
(
	`sd¢ew
("No breakpoint inhe specified†ine."));

2460 
	}
}

2465 
	$ldbEv®
(
lua_S‹
 *
lua
, 
sds
 *
¬gv
, 
¬gc
) {

2467 
sds
 
code
 = 
	`sdsjošsds
(
¬gv
+1,
¬gc
-1," ",1);

2468 
sds
 
ex´
 = 
	`sdsÿtsds
(
	`sd¢ew
("»tuº "),
code
);

2471 ià(
	`luaL_lßdbufãr
(
lua
,
ex´
,
	`sd¦’
(expr),"@ldb_eval")) {

2472 
	`lua_pİ
(
lua
,1);

2474 ià(
	`luaL_lßdbufãr
(
lua
,
code
,
	`sd¦’
(code),"@ldb_eval")) {

2475 
	`ldbLog
(
	`sdsÿtfmt
(
	`sd£m±y
(),"<”rÜ> %s",
	`lua_to¡ršg
(
lua
,-1)));

2476 
	`lua_pİ
(
lua
,1);

2477 
	`sdsä“
(
code
);

2478 
	`sdsä“
(
ex´
);

2484 
	`sdsä“
(
code
);

2485 
	`sdsä“
(
ex´
);

2486 ià(
	`lua_pÿÎ
(
lua
,0,1,0)) {

2487 
	`ldbLog
(
	`sdsÿtfmt
(
	`sd£m±y
(),"<”rÜ> %s",
	`lua_to¡ršg
(
lua
,-1)));

2488 
	`lua_pİ
(
lua
,1);

2491 
	`ldbLogSckV®ue
(
lua
,"<retval> ");

2492 
	`lua_pİ
(
lua
,1);

2493 
	}
}

2499 
	$ldbRedis
(
lua_S‹
 *
lua
, 
sds
 *
¬gv
, 
¬gc
) {

2500 
j
, 
§ved_rc
 = 
£rv”
.
lua_»¶iÿ‹_commªds
;

2502 
	`lua_g‘glob®
(
lua
,"redis");

2503 
	`lua_push¡ršg
(
lua
,"call");

2504 
	`lua_g‘bË
(
lua
,-2);

2505 
j
 = 1; j < 
¬gc
; j++)

2506 
	`lua_pushl¡ršg
(
lua
,
¬gv
[
j
],
	`sd¦’
(argv[j]));

2507 
ldb
.
¡•
 = 1;

2508 
£rv”
.
lua_»¶iÿ‹_commªds
 = 1;

2509 
	`lua_pÿÎ
(
lua
,
¬gc
-1,1,0);

2510 
ldb
.
¡•
 = 0;

2511 
£rv”
.
lua_»¶iÿ‹_commªds
 = 
§ved_rc
;

2512 
	`lua_pİ
(
lua
,2);

2513 
	}
}

2517 
	$ldbT¿û
(
lua_S‹
 *
lua
) {

2518 
lua_Debug
 
¬
;

2519 
Ëv–
 = 0;

2521 
	`lua_g‘¡ack
(
lua
,
Ëv–
,&
¬
)) {

2522 
	`lua_g‘šfo
(
lua
,"SÆ",&
¬
);

2523 if(
	`¡r¡r
(
¬
.
shÜt_¤c
,"u£r_süt"è!ğ
NULL
) {

2524 
	`ldbLog
(
	`sdsÿrštf
(
	`sd£m±y
(),"%s %s:",

2525 (
Ëv–
 == 0) ? "In" : "From",

2526 
¬
.
Çme
 ?‡r.name : "top†evel"));

2527 
	`ldbLogSourûLše
(
¬
.
cu¼’še
);

2529 
Ëv–
++;

2531 ià(
Ëv–
 == 0) {

2532 
	`ldbLog
(
	`sd¢ew
("<error> Can't„etrieve Lua stack."));

2534 
	}
}

2538 
	$ldbMaxËn
(
sds
 *
¬gv
, 
¬gc
) {

2539 ià(
¬gc
 == 2) {

2540 
Ãwv®
 = 
	`©oi
(
¬gv
[1]);

2541 
ldb
.
maxËn_hšt_£Á
 = 1;

2542 ià(
Ãwv®
 != 0 &&‚ewval <= 60)‚ewval = 60;

2543 
ldb
.
maxËn
 = 
Ãwv®
;

2545 ià(
ldb
.
maxËn
) {

2546 
	`ldbLog
(
	`sdsÿrštf
(
	`sd£m±y
(),"<v®ue>„•l› ¬Œunÿ‹d‡ˆ%d by‹s.",()
ldb
.
maxËn
));

2548 
	`ldbLog
(
	`sdsÿrštf
(
	`sd£m±y
(),"<value>„eplies‡re unlimited."));

2550 
	}
}

2555 
	$ldbR•l
(
lua_S‹
 *
lua
) {

2556 
sds
 *
¬gv
;

2557 
¬gc
;

2562 (
¬gv
 = 
	`ldbR•lP¬£Commªd
(&
¬gc
)è=ğ
NULL
) {

2563 
buf
[1024];

2564 
Ä—d
 = 
	`cÚnR—d
(
ldb
.
cÚn
,
buf
,(buf));

2565 ià(
Ä—d
 <= 0) {

2568 
ldb
.
¡•
 = 0;

2569 
ldb
.
bpcouÁ
 = 0;

2570  
C_ERR
;

2572 
ldb
.
cbuf
 = 
	`sdsÿ’
Ödb.cbuf,
buf
,
Ä—d
);

2576 
	`sdsä“
(
ldb
.
cbuf
);

2577 
ldb
.
cbuf
 = 
	`sd£m±y
();

2580 ià(!
	`¡rÿ£cmp
(
¬gv
[0],"h") || !strcasecmp(argv[0],"help")) {

2581 
	`ldbLog
(
	`sd¢ew
("Redis Lua debugger help:"));

2582 
	`ldbLog
(
	`sd¢ew
("[h]elp Showhis help."));

2583 
	`ldbLog
(
	`sd¢ew
("[s]tep Run current†ine‡nd stop‡gain."));

2584 
	`ldbLog
(
	`sd¢ew
("[n]ext Alias for step."));

2585 
	`ldbLog
(
	`sd¢ew
("[c]continue Runill‚ext breakpoint."));

2586 
	`ldbLog
(
	`sd¢ew
("[l]list List source code‡round current†ine."));

2587 
	`ldbLog
(
	`sd¢ew
("[l]list [line] List source code‡round [line]."));

2588 
	`ldbLog
(
	`sd¢ew
("†ine = 0 means: current…osition."));

2589 
	`ldbLog
(
	`sd¢ew
("[l]list [line] [ctx] Inhis form [ctx] specifies how many†ines"));

2590 
	`ldbLog
(
	`sd¢ew
("o show before/after [line]."));

2591 
	`ldbLog
(
	`sd¢ew
("[w]hole List‡ll source code. Alias for 'list 1 1000000'."));

2592 
	`ldbLog
(
	`sd¢ew
("[p]rint Show‡llhe†ocal variables."));

2593 
	`ldbLog
(
	`sd¢ew
("[p]rint <var> Showhe value ofhe specified variable."));

2594 
	`ldbLog
(
	`sd¢ew
(" Can‡lso show global vars KEYS‡nd ARGV."));

2595 
	`ldbLog
(
	`sd¢ew
("[b]reak Show‡ll breakpoints."));

2596 
	`ldbLog
(
	`sd¢ew
("[b]reak <line> Add‡ breakpointohe specified†ine."));

2597 
	`ldbLog
(
	`sd¢ew
("[b]reak -<line> Remove breakpoint fromhe specified†ine."));

2598 
	`ldbLog
(
	`sd¢ew
("[b]reak 0 Remove‡ll breakpoints."));

2599 
	`ldbLog
(
	`sd¢ew
("[t]race Show‡ backtrace."));

2600 
	`ldbLog
(
	`sd¢ew
("[e]eval <code> Execute some Lua code (in‡ different callframe)."));

2601 
	`ldbLog
(
	`sd¢ew
("[r]edis <cmd> Execute‡ Redis command."));

2602 
	`ldbLog
(
	`sd¢ew
("[m]axlen [len] Trim†ogged Redis„eplies‡nd Lua var dumpso†en."));

2603 
	`ldbLog
(
	`sd¢ew
(" Specifying zero‡s <len> means unlimited."));

2604 
	`ldbLog
(
	`sd¢ew
("[a]bort Stopheƒxecution ofhe script. In sync"));

2605 
	`ldbLog
(
	`sd¢ew
(" mode dataset changes will be„etained."));

2606 
	`ldbLog
(
	`sd¢ew
(""));

2607 
	`ldbLog
(
	`sd¢ew
("Debugger functions you can call from Lua scripts:"));

2608 
	`ldbLog
(
	`sd¢ew
("redis.debug() Produce†ogs inhe debugger console."));

2609 
	`ldbLog
(
	`sd¢ew
("redis.breakpoint() Stopƒxecution†ike ifhere was‡ breakpoing."));

2610 
	`ldbLog
(
	`sd¢ew
(" inhe‚ext†ine of code."));

2611 
	`ldbS’dLogs
();

2612 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"s") || !strcasecmp(argv[0],"step") ||

2613 !
	`¡rÿ£cmp
(
¬gv
[0],"n") || !strcasecmp(argv[0],"next")) {

2614 
ldb
.
¡•
 = 1;

2616 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"c") || !strcasecmp(argv[0],"continue")){

2618 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"t") || !strcasecmp(argv[0],"trace")) {

2619 
	`ldbT¿û
(
lua
);

2620 
	`ldbS’dLogs
();

2621 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"m") || !strcasecmp(argv[0],"maxlen")) {

2622 
	`ldbMaxËn
(
¬gv
,
¬gc
);

2623 
	`ldbS’dLogs
();

2624 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"b") || !strcasecmp(argv[0],"break")) {

2625 
	`ldbB»ak
(
¬gv
,
¬gc
);

2626 
	`ldbS’dLogs
();

2627 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"e") || !strcasecmp(argv[0],"eval")) {

2628 
	`ldbEv®
(
lua
,
¬gv
,
¬gc
);

2629 
	`ldbS’dLogs
();

2630 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"a") || !strcasecmp(argv[0],"abort")) {

2631 
	`lua_push¡ršg
(
lua
, "script‡borted for user„equest");

2632 
	`lua_”rÜ
(
lua
);

2633 } ià(
¬gc
 > 1 &&

2634 (!
	`¡rÿ£cmp
(
¬gv
[0],"r") || !strcasecmp(argv[0],"redis"))) {

2635 
	`ldbRedis
(
lua
,
¬gv
,
¬gc
);

2636 
	`ldbS’dLogs
();

2637 } ià((!
	`¡rÿ£cmp
(
¬gv
[0],"p") || !strcasecmp(argv[0],"print"))) {

2638 ià(
¬gc
 == 2)

2639 
	`ldbPršt
(
lua
,
¬gv
[1]);

2641 
	`ldbPrštAÎ
(
lua
);

2642 
	`ldbS’dLogs
();

2643 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"l") || !strcasecmp(argv[0],"list")){

2644 
¬ound
 = 
ldb
.
cu¼’še
, 
ùx
 = 5;

2645 ià(
¬gc
 > 1) {

2646 
num
 = 
	`©oi
(
¬gv
[1]);

2647 ià(
num
 > 0è
¬ound
 =‚um;

2649 ià(
¬gc
 > 2è
ùx
 = 
	`©oi
(
¬gv
[2]);

2650 
	`ldbLi¡
(
¬ound
,
ùx
);

2651 
	`ldbS’dLogs
();

2652 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"w") || !strcasecmp(argv[0],"whole")){

2653 
	`ldbLi¡
(1,1000000);

2654 
	`ldbS’dLogs
();

2656 
	`ldbLog
(
	`sd¢ew
("<error> Unknown Redis Lua debugger command or "

2658 
	`ldbS’dLogs
();

2662 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2666 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2667  
C_OK
;

2668 
	}
}

2672 
	$luaLdbLšeHook
(
lua_S‹
 *
lua
, 
lua_Debug
 *
¬
) {

2673 
	`lua_g‘¡ack
(
lua
,0,
¬
);

2674 
	`lua_g‘šfo
(
lua
,"Sl",
¬
);

2675 
ldb
.
cu¼’še
 = 
¬
->currentline;

2677 
bp
 = 
	`ldbIsB»akpošt
(
ldb
.
cu¼’še
è||†db.
luabp
;

2678 
timeout
 = 0;

2681 if(
	`¡r¡r
(
¬
->
shÜt_¤c
,"u£r_süt"è=ğ
NULL
) ;

2684 ià(
¬
->
ev’t
 =ğ
LUA_HOOKCOUNT
 && 
ldb
.
¡•
 =ğ0 && 
bp
 == 0) {

2685 
m¡ime_t
 
–­£d
 = 
	`m¡ime
(è- 
£rv”
.
lua_time_¡¬t
;

2686 
m¡ime_t
 
tim–im™
 = 
£rv”
.
lua_time_lim™
 ?

2687 
£rv”
.
lua_time_lim™
 : 5000;

2688 ià(
–­£d
 >ğ
tim–im™
) {

2689 
timeout
 = 1;

2690 
ldb
.
¡•
 = 1;

2696 ià(
ldb
.
¡•
 || 
bp
) {

2697 *
»asÚ
 = "step over";

2698 ià(
bp
è
»asÚ
 = 
ldb
.
luabp
 ? "redis.breakpoint() called" :

2700 ià(
timeout
è
»asÚ
 = "timeout„eached, infinite†oop?";

2701 
ldb
.
¡•
 = 0;

2702 
ldb
.
luabp
 = 0;

2703 
	`ldbLog
(
	`sdsÿrštf
(
	`sd£m±y
(),

2705 
ldb
.
cu¼’še
, 
»asÚ
));

2706 
	`ldbLogSourûLše
(
ldb
.
cu¼’še
);

2707 
	`ldbS’dLogs
();

2708 ià(
	`ldbR•l
(
lua
è=ğ
C_ERR
 && 
timeout
) {

2712 
	`lua_push¡ršg
(
lua
, "timeout during Lua debugging with client closing connection");

2713 
	`lua_”rÜ
(
lua
);

2715 
£rv”
.
lua_time_¡¬t
 = 
	`m¡ime
();

2717 
	}
}

	@sds.c

33 
	~<¡dio.h
>

34 
	~<¡dlib.h
>

35 
	~<¡ršg.h
>

36 
	~<ùy³.h
>

37 
	~<as£¹.h
>

38 
	~<lim™s.h
>

39 
	~"sds.h
"

40 
	~"sd§Îoc.h
"

42 cÚ¡ *
	gSDS_NOINIT
 = "SDS_NOINIT";

44 
šlše
 
	$sdsHdrSize
(
ty³
) {

45 
ty³
&
SDS_TYPE_MASK
) {

46 
SDS_TYPE_5
:

47  (
sdshdr5
);

48 
SDS_TYPE_8
:

49  (
sdshdr8
);

50 
SDS_TYPE_16
:

51  (
sdshdr16
);

52 
SDS_TYPE_32
:

53  (
sdshdr32
);

54 
SDS_TYPE_64
:

55  (
sdshdr64
);

58 
	}
}

60 
šlše
 
	$sdsReqTy³
(
size_t
 
¡ršg_size
) {

61 ià(
¡ršg_size
 < 1<<5)

62  
SDS_TYPE_5
;

63 ià(
¡ršg_size
 < 1<<8)

64  
SDS_TYPE_8
;

65 ià(
¡ršg_size
 < 1<<16)

66  
SDS_TYPE_16
;

67 #ià(
LONG_MAX
 =ğ
LLONG_MAX
)

68 ià(
¡ršg_size
 < 1ll<<32)

69  
SDS_TYPE_32
;

70  
SDS_TYPE_64
;

72  
SDS_TYPE_32
;

74 
	}
}

89 
sds
 
	$sd¢ewËn
(cÚ¡ *
š™
, 
size_t
 
š™Ën
) {

90 *
sh
;

91 
sds
 
s
;

92 
ty³
 = 
	`sdsReqTy³
(
š™Ën
);

95 ià(
ty³
 =ğ
SDS_TYPE_5
 && 
š™Ën
 =ğ0èty³ = 
SDS_TYPE_8
;

96 
hd¾’
 = 
	`sdsHdrSize
(
ty³
);

97 *
å
;

99 
sh
 = 
	`s_m®loc
(
hd¾’
+
š™Ën
+1);

100 ià(
sh
 =ğ
NULL
)  NULL;

101 ià(
š™
==
SDS_NOINIT
)

102 
š™
 = 
NULL
;

103 ià(!
š™
)

104 
	`mem£t
(
sh
, 0, 
hd¾’
+
š™Ën
+1);

105 
s
 = (*)
sh
+
hd¾’
;

106 
å
 = ((*)
s
)-1;

107 
ty³
) {

108 
SDS_TYPE_5
: {

109 *
å
 = 
ty³
 | (
š™Ën
 << 
SDS_TYPE_BITS
);

112 
SDS_TYPE_8
: {

113 
	`SDS_HDR_VAR
(8,
s
);

114 
sh
->
Ën
 = 
š™Ën
;

115 
sh
->
®loc
 = 
š™Ën
;

116 *
å
 = 
ty³
;

119 
SDS_TYPE_16
: {

120 
	`SDS_HDR_VAR
(16,
s
);

121 
sh
->
Ën
 = 
š™Ën
;

122 
sh
->
®loc
 = 
š™Ën
;

123 *
å
 = 
ty³
;

126 
SDS_TYPE_32
: {

127 
	`SDS_HDR_VAR
(32,
s
);

128 
sh
->
Ën
 = 
š™Ën
;

129 
sh
->
®loc
 = 
š™Ën
;

130 *
å
 = 
ty³
;

133 
SDS_TYPE_64
: {

134 
	`SDS_HDR_VAR
(64,
s
);

135 
sh
->
Ën
 = 
š™Ën
;

136 
sh
->
®loc
 = 
š™Ën
;

137 *
å
 = 
ty³
;

141 ià(
š™Ën
 && 
š™
)

142 
	`memıy
(
s
, 
š™
, 
š™Ën
);

143 
s
[
š™Ën
] = '\0';

144  
s
;

145 
	}
}

149 
sds
 
	$sd£m±y
() {

150  
	`sd¢ewËn
("",0);

151 
	}
}

154 
sds
 
	$sd¢ew
(cÚ¡ *
š™
) {

155 
size_t
 
š™Ën
 = (
š™
 =ğ
NULL
è? 0 : 
	`¡¾’
(init);

156  
	`sd¢ewËn
(
š™
, 
š™Ën
);

157 
	}
}

160 
sds
 
	$sdsdup
(cÚ¡ 
sds
 
s
) {

161  
	`sd¢ewËn
(
s
, 
	`sd¦’
(s));

162 
	}
}

165 
	$sdsä“
(
sds
 
s
) {

166 ià(
s
 =ğ
NULL
) ;

167 
	`s_ä“
((*)
s
-
	`sdsHdrSize
(s[-1]));

168 
	}
}

184 
	$sdsupd©–’
(
sds
 
s
) {

185 
size_t
 
»®Ën
 = 
	`¡¾’
(
s
);

186 
	`sds£’
(
s
, 
»®Ën
);

187 
	}
}

193 
	$sdsş—r
(
sds
 
s
) {

194 
	`sds£’
(
s
, 0);

195 
s
[0] = '\0';

196 
	}
}

204 
sds
 
	$sdsMakeRoomFÜ
(
sds
 
s
, 
size_t
 
addËn
) {

205 *
sh
, *
Ãwsh
;

206 
size_t
 
ava
 = 
	`sd§va
(
s
);

207 
size_t
 
Ën
, 
ÃwËn
;

208 
ty³
, 
Şdty³
 = 
s
[-1] & 
SDS_TYPE_MASK
;

209 
hd¾’
;

212 ià(
ava
 >ğ
addËn
è 
s
;

214 
Ën
 = 
	`sd¦’
(
s
);

215 
sh
 = (*)
s
-
	`sdsHdrSize
(
Şdty³
);

216 
ÃwËn
 = (
Ën
+
addËn
);

217 ià(
ÃwËn
 < 
SDS_MAX_PREALLOC
)

218 
ÃwËn
 *= 2;

220 
ÃwËn
 +ğ
SDS_MAX_PREALLOC
;

222 
ty³
 = 
	`sdsReqTy³
(
ÃwËn
);

227 ià(
ty³
 =ğ
SDS_TYPE_5
èty³ = 
SDS_TYPE_8
;

229 
hd¾’
 = 
	`sdsHdrSize
(
ty³
);

230 ià(
Şdty³
==
ty³
) {

231 
Ãwsh
 = 
	`s_»®loc
(
sh
, 
hd¾’
+
ÃwËn
+1);

232 ià(
Ãwsh
 =ğ
NULL
)  NULL;

233 
s
 = (*)
Ãwsh
+
hd¾’
;

237 
Ãwsh
 = 
	`s_m®loc
(
hd¾’
+
ÃwËn
+1);

238 ià(
Ãwsh
 =ğ
NULL
)  NULL;

239 
	`memıy
((*)
Ãwsh
+
hd¾’
, 
s
, 
Ën
+1);

240 
	`s_ä“
(
sh
);

241 
s
 = (*)
Ãwsh
+
hd¾’
;

242 
s
[-1] = 
ty³
;

243 
	`sds£’
(
s
, 
Ën
);

245 
	`sds£Îoc
(
s
, 
ÃwËn
);

246  
s
;

247 
	}
}

255 
sds
 
	$sdsRemoveF»eS·û
(
sds
 
s
) {

256 *
sh
, *
Ãwsh
;

257 
ty³
, 
Şdty³
 = 
s
[-1] & 
SDS_TYPE_MASK
;

258 
hd¾’
, 
Şdhd¾’
 = 
	`sdsHdrSize
(
Şdty³
);

259 
size_t
 
Ën
 = 
	`sd¦’
(
s
);

260 
size_t
 
ava
 = 
	`sd§va
(
s
);

261 
sh
 = (*)
s
-
Şdhd¾’
;

264 ià(
ava
 =ğ0è 
s
;

268 
ty³
 = 
	`sdsReqTy³
(
Ën
);

269 
hd¾’
 = 
	`sdsHdrSize
(
ty³
);

275 ià(
Şdty³
==
ty³
 ||y³ > 
SDS_TYPE_8
) {

276 
Ãwsh
 = 
	`s_»®loc
(
sh
, 
Şdhd¾’
+
Ën
+1);

277 ià(
Ãwsh
 =ğ
NULL
)  NULL;

278 
s
 = (*)
Ãwsh
+
Şdhd¾’
;

280 
Ãwsh
 = 
	`s_m®loc
(
hd¾’
+
Ën
+1);

281 ià(
Ãwsh
 =ğ
NULL
)  NULL;

282 
	`memıy
((*)
Ãwsh
+
hd¾’
, 
s
, 
Ën
+1);

283 
	`s_ä“
(
sh
);

284 
s
 = (*)
Ãwsh
+
hd¾’
;

285 
s
[-1] = 
ty³
;

286 
	`sds£’
(
s
, 
Ën
);

288 
	`sds£Îoc
(
s
, 
Ën
);

289  
s
;

290 
	}
}

299 
size_t
 
	$sdsAÎocSize
(
sds
 
s
) {

300 
size_t
 
®loc
 = 
	`sd§Îoc
(
s
);

301  
	`sdsHdrSize
(
s
[-1])+
®loc
+1;

302 
	}
}

306 *
	$sdsAÎocPŒ
(
sds
 
s
) {

307  (*è(
s
-
	`sdsHdrSize
(s[-1]));

308 
	}
}

333 
	$sdsInüL’
(
sds
 
s
, 
ssize_t
 
šü
) {

334 
æags
 = 
s
[-1];

335 
size_t
 
Ën
;

336 
æags
&
SDS_TYPE_MASK
) {

337 
SDS_TYPE_5
: {

338 *
å
 = ((*)
s
)-1;

339 
ŞdËn
 = 
	`SDS_TYPE_5_LEN
(
æags
);

340 
	`as£¹
((
šü
 > 0 && 
ŞdËn
+incr < 32) || (incr < 0 && oldlen >= ()(-incr)));

341 *
å
 = 
SDS_TYPE_5
 | ((
ŞdËn
+
šü
è<< 
SDS_TYPE_BITS
);

342 
Ën
 = 
ŞdËn
+
šü
;

345 
SDS_TYPE_8
: {

346 
	`SDS_HDR_VAR
(8,
s
);

347 
	`as£¹
((
šü
 >ğ0 && 
sh
->
®loc
-sh->
Ën
 >= incr) || (incr < 0 && sh->len >= ()(-incr)));

348 
Ën
 = (
sh
->ËÀ+ğ
šü
);

351 
SDS_TYPE_16
: {

352 
	`SDS_HDR_VAR
(16,
s
);

353 
	`as£¹
((
šü
 >ğ0 && 
sh
->
®loc
-sh->
Ën
 >= incr) || (incr < 0 && sh->len >= ()(-incr)));

354 
Ën
 = (
sh
->ËÀ+ğ
šü
);

357 
SDS_TYPE_32
: {

358 
	`SDS_HDR_VAR
(32,
s
);

359 
	`as£¹
((
šü
 >ğ0 && 
sh
->
®loc
-sh->
Ën
 >= ()incr) || (incr < 0 && sh->len >= ()(-incr)));

360 
Ën
 = (
sh
->ËÀ+ğ
šü
);

363 
SDS_TYPE_64
: {

364 
	`SDS_HDR_VAR
(64,
s
);

365 
	`as£¹
((
šü
 >ğ0 && 
sh
->
®loc
-sh->
Ën
 >ğ(
ušt64_t
)incr) || (incr < 0 && sh->len >= (uint64_t)(-incr)));

366 
Ën
 = (
sh
->ËÀ+ğ
šü
);

369 : 
Ën
 = 0;

371 
s
[
Ën
] = '\0';

372 
	}
}

379 
sds
 
	$sdsgrowz”o
(
sds
 
s
, 
size_t
 
Ën
) {

380 
size_t
 
cu¾’
 = 
	`sd¦’
(
s
);

382 ià(
Ën
 <ğ
cu¾’
è 
s
;

383 
s
 = 
	`sdsMakeRoomFÜ
(s,
Ën
-
cu¾’
);

384 ià(
s
 =ğ
NULL
)  NULL;

387 
	`mem£t
(
s
+
cu¾’
,0,(
Ën
-curlen+1));

388 
	`sds£’
(
s
, 
Ën
);

389  
s
;

390 
	}
}

397 
sds
 
	$sdsÿ’
(
sds
 
s
, cÚ¡ *
t
, 
size_t
 
Ën
) {

398 
size_t
 
cu¾’
 = 
	`sd¦’
(
s
);

400 
s
 = 
	`sdsMakeRoomFÜ
(s,
Ën
);

401 ià(
s
 =ğ
NULL
)  NULL;

402 
	`memıy
(
s
+
cu¾’
, 
t
, 
Ën
);

403 
	`sds£’
(
s
, 
cu¾’
+
Ën
);

404 
s
[
cu¾’
+
Ën
] = '\0';

405  
s
;

406 
	}
}

412 
sds
 
	$sdsÿt
(
sds
 
s
, cÚ¡ *
t
) {

413  
	`sdsÿ’
(
s
, 
t
, 
	`¡¾’
(t));

414 
	}
}

420 
sds
 
	$sdsÿtsds
(
sds
 
s
, cÚ¡ sd 
t
) {

421  
	`sdsÿ’
(
s
, 
t
, 
	`sd¦’
(t));

422 
	}
}

426 
sds
 
	$sdsıyËn
(
sds
 
s
, cÚ¡ *
t
, 
size_t
 
Ën
) {

427 ià(
	`sd§Îoc
(
s
è< 
Ën
) {

428 
s
 = 
	`sdsMakeRoomFÜ
(s,
Ën
-
	`sd¦’
(s));

429 ià(
s
 =ğ
NULL
)  NULL;

431 
	`memıy
(
s
, 
t
, 
Ën
);

432 
s
[
Ën
] = '\0';

433 
	`sds£’
(
s
, 
Ën
);

434  
s
;

435 
	}
}

439 
sds
 
	$sdsıy
(
sds
 
s
, cÚ¡ *
t
) {

440  
	`sdsıyËn
(
s
, 
t
, 
	`¡¾’
(t));

441 
	}
}

449 
	#SDS_LLSTR_SIZE
 21

	)

450 
	$sd¦l2¡r
(*
s
, 
v®ue
) {

451 *
p
, 
aux
;

452 
v
;

453 
size_t
 
l
;

457 
v
 = (
v®ue
 < 0) ? -value : value;

458 
p
 = 
s
;

460 *
p
++ = '0'+(
v
%10);

461 
v
 /= 10;

462 } 
v
);

463 ià(
v®ue
 < 0è*
p
++ = '-';

466 
l
 = 
p
-
s
;

467 *
p
 = '\0';

470 
p
--;

471 
s
 < 
p
) {

472 
aux
 = *
s
;

473 *
s
 = *
p
;

474 *
p
 = 
aux
;

475 
s
++;

476 
p
--;

478  
l
;

479 
	}
}

482 
	$sdsuÎ2¡r
(*
s
, 
v
) {

483 *
p
, 
aux
;

484 
size_t
 
l
;

488 
p
 = 
s
;

490 *
p
++ = '0'+(
v
%10);

491 
v
 /= 10;

492 } 
v
);

495 
l
 = 
p
-
s
;

496 *
p
 = '\0';

499 
p
--;

500 
s
 < 
p
) {

501 
aux
 = *
s
;

502 *
s
 = *
p
;

503 *
p
 = 
aux
;

504 
s
++;

505 
p
--;

507  
l
;

508 
	}
}

514 
sds
 
	$sdsäomlÚglÚg
(
v®ue
) {

515 
buf
[
SDS_LLSTR_SIZE
];

516 
Ën
 = 
	`sd¦l2¡r
(
buf
,
v®ue
);

518  
	`sd¢ewËn
(
buf
,
Ën
);

519 
	}
}

522 
sds
 
	$sdsÿtv´štf
(
sds
 
s
, cÚ¡ *
fmt
, 
va_li¡
 
­
) {

523 
va_li¡
 
ıy
;

524 
¡©icbuf
[1024], *
buf
 = sticbuf, *
t
;

525 
size_t
 
buæ’
 = 
	`¡¾’
(
fmt
)*2;

529 ià(
buæ’
 > (
¡©icbuf
)) {

530 
buf
 = 
	`s_m®loc
(
buæ’
);

531 ià(
buf
 =ğ
NULL
)  NULL;

533 
buæ’
 = (
¡©icbuf
);

539 
buf
[
buæ’
-2] = '\0';

540 
	`va_cİy
(
ıy
,
­
);

541 
	`v¢´štf
(
buf
, 
buæ’
, 
fmt
, 
ıy
);

542 
	`va_’d
(
ıy
);

543 ià(
buf
[
buæ’
-2] != '\0') {

544 ià(
buf
 !ğ
¡©icbuf
è
	`s_ä“
(buf);

545 
buæ’
 *= 2;

546 
buf
 = 
	`s_m®loc
(
buæ’
);

547 ià(
buf
 =ğ
NULL
)  NULL;

554 
t
 = 
	`sdsÿt
(
s
, 
buf
);

555 ià(
buf
 !ğ
¡©icbuf
è
	`s_ä“
(buf);

556  
t
;

557 
	}
}

575 
sds
 
	$sdsÿrštf
(
sds
 
s
, cÚ¡ *
fmt
, ...) {

576 
va_li¡
 
­
;

577 *
t
;

578 
	`va_¡¬t
(
­
, 
fmt
);

579 
t
 = 
	`sdsÿtv´štf
(
s
,
fmt
,
­
);

580 
	`va_’d
(
­
);

581  
t
;

582 
	}
}

600 
sds
 
	$sdsÿtfmt
(
sds
 
s
, cÚ¡ *
fmt
, ...) {

601 
size_t
 
š™Ën
 = 
	`sd¦’
(
s
);

602 cÚ¡ *
f
 = 
fmt
;

603 
i
;

604 
va_li¡
 
­
;

609 
s
 = 
	`sdsMakeRoomFÜ
(s, 
š™Ën
 + 
	`¡¾’
(
fmt
)*2);

610 
	`va_¡¬t
(
­
,
fmt
);

611 
f
 = 
fmt
;

612 
i
 = 
š™Ën
;

613 *
f
) {

614 
Ãxt
, *
¡r
;

615 
size_t
 
l
;

616 
num
;

617 
unum
;

620 ià(
	`sd§va
(
s
)==0) {

621 
s
 = 
	`sdsMakeRoomFÜ
(s,1);

624 *
f
) {

626 
Ãxt
 = *(
f
+1);

627 
f
++;

628 
Ãxt
) {

631 
¡r
 = 
	`va_¬g
(
­
,*);

632 
l
 = (
Ãxt
 =ğ's'è? 
	`¡¾’
(
¡r
è: 
	`sd¦’
(str);

633 ià(
	`sd§va
(
s
è< 
l
) {

634 
s
 = 
	`sdsMakeRoomFÜ
(s,
l
);

636 
	`memıy
(
s
+
i
,
¡r
,
l
);

637 
	`sdsšş’
(
s
,
l
);

638 
i
 +ğ
l
;

642 ià(
Ãxt
 == 'i')

643 
num
 = 
	`va_¬g
(
­
,);

645 
num
 = 
	`va_¬g
(
­
,);

647 
buf
[
SDS_LLSTR_SIZE
];

648 
l
 = 
	`sd¦l2¡r
(
buf
,
num
);

649 ià(
	`sd§va
(
s
è< 
l
) {

650 
s
 = 
	`sdsMakeRoomFÜ
(s,
l
);

652 
	`memıy
(
s
+
i
,
buf
,
l
);

653 
	`sdsšş’
(
s
,
l
);

654 
i
 +ğ
l
;

659 ià(
Ãxt
 == 'u')

660 
unum
 = 
	`va_¬g
(
­
,);

662 
unum
 = 
	`va_¬g
(
­
,);

664 
buf
[
SDS_LLSTR_SIZE
];

665 
l
 = 
	`sdsuÎ2¡r
(
buf
,
unum
);

666 ià(
	`sd§va
(
s
è< 
l
) {

667 
s
 = 
	`sdsMakeRoomFÜ
(s,
l
);

669 
	`memıy
(
s
+
i
,
buf
,
l
);

670 
	`sdsšş’
(
s
,
l
);

671 
i
 +ğ
l
;

675 
s
[
i
++] = 
Ãxt
;

676 
	`sdsšş’
(
s
,1);

681 
s
[
i
++] = *
f
;

682 
	`sdsšş’
(
s
,1);

685 
f
++;

687 
	`va_’d
(
­
);

690 
s
[
i
] = '\0';

691  
s
;

692 
	}
}

708 
sds
 
	$sd¡rim
(
sds
 
s
, cÚ¡ *
c£t
) {

709 *
¡¬t
, *
’d
, *
¥
, *
•
;

710 
size_t
 
Ën
;

712 
¥
 = 
¡¬t
 = 
s
;

713 
•
 = 
’d
 = 
s
+
	`sd¦’
(s)-1;

714 
¥
 <ğ
’d
 && 
	`¡rchr
(
c£t
, *sp)) sp++;

715 
•
 > 
¥
 && 
	`¡rchr
(
c£t
, *ep))ƒp--;

716 
Ën
 = (
¥
 > 
•
) ? 0 : ((ep-sp)+1);

717 ià(
s
 !ğ
¥
è
	`memmove
(s, sp, 
Ën
);

718 
s
[
Ën
] = '\0';

719 
	`sds£’
(
s
,
Ën
);

720  
s
;

721 
	}
}

739 
	$sd¤ªge
(
sds
 
s
, 
ssize_t
 
¡¬t
, ssize_ˆ
’d
) {

740 
size_t
 
ÃwËn
, 
Ën
 = 
	`sd¦’
(
s
);

742 ià(
Ën
 == 0) ;

743 ià(
¡¬t
 < 0) {

744 
¡¬t
 = 
Ën
+start;

745 ià(
¡¬t
 < 0) start = 0;

747 ià(
’d
 < 0) {

748 
’d
 = 
Ën
+end;

749 ià(
’d
 < 0)ƒnd = 0;

751 
ÃwËn
 = (
¡¬t
 > 
’d
) ? 0 : (end-start)+1;

752 ià(
ÃwËn
 != 0) {

753 ià(
¡¬t
 >ğ(
ssize_t
)
Ën
) {

754 
ÃwËn
 = 0;

755 } ià(
’d
 >ğ(
ssize_t
)
Ën
) {

756 
’d
 = 
Ën
-1;

757 
ÃwËn
 = (
¡¬t
 > 
’d
) ? 0 : (end-start)+1;

760 
¡¬t
 = 0;

762 ià(
¡¬t
 && 
ÃwËn
è
	`memmove
(
s
, s+start,‚ewlen);

763 
s
[
ÃwËn
] = 0;

764 
	`sds£’
(
s
,
ÃwËn
);

765 
	}
}

768 
	$sd¡Şow”
(
sds
 
s
) {

769 
size_t
 
Ën
 = 
	`sd¦’
(
s
), 
j
;

771 
j
 = 0; j < 
Ën
; j++è
s
[j] = 
	`tŞow”
(s[j]);

772 
	}
}

775 
	$sd¡ouµ”
(
sds
 
s
) {

776 
size_t
 
Ën
 = 
	`sd¦’
(
s
), 
j
;

778 
j
 = 0; j < 
Ën
; j++è
s
[j] = 
	`touµ”
(s[j]);

779 
	}
}

792 
	$sdscmp
(cÚ¡ 
sds
 
s1
, cÚ¡ sd 
s2
) {

793 
size_t
 
l1
, 
l2
, 
mšËn
;

794 
cmp
;

796 
l1
 = 
	`sd¦’
(
s1
);

797 
l2
 = 
	`sd¦’
(
s2
);

798 
mšËn
 = (
l1
 < 
l2
) ?†1 :†2;

799 
cmp
 = 
	`memcmp
(
s1
,
s2
,
mšËn
);

800 ià(
cmp
 =ğ0è 
l1
>
l2
? 1: (l1<l2? -1: 0);

801  
cmp
;

802 
	}
}

820 
sds
 *
	$sds¥l™Ën
(cÚ¡ *
s
, 
ssize_t
 
Ën
, cÚ¡ *
£p
, 
£¶’
, *
couÁ
) {

821 
–em’ts
 = 0, 
¦Ùs
 = 5;

822 
¡¬t
 = 0, 
j
;

823 
sds
 *
tok’s
;

825 ià(
£¶’
 < 1 || 
Ën
 < 0è 
NULL
;

827 
tok’s
 = 
	`s_m®loc
((
sds
)*
¦Ùs
);

828 ià(
tok’s
 =ğ
NULL
)  NULL;

830 ià(
Ën
 == 0) {

831 *
couÁ
 = 0;

832  
tok’s
;

834 
j
 = 0; j < (
Ën
-(
£¶’
-1)); j++) {

836 ià(
¦Ùs
 < 
–em’ts
+2) {

837 
sds
 *
Ãwtok’s
;

839 
¦Ùs
 *= 2;

840 
Ãwtok’s
 = 
	`s_»®loc
(
tok’s
,(
sds
)*
¦Ùs
);

841 ià(
Ãwtok’s
 =ğ
NULL
è
ş—nup
;

842 
tok’s
 = 
Ãwtok’s
;

845 ià((
£¶’
 =ğ1 && *(
s
+
j
è=ğ
£p
[0]è|| (
	`memcmp
(s+j,sep,seplen) == 0)) {

846 
tok’s
[
–em’ts
] = 
	`sd¢ewËn
(
s
+
¡¬t
,
j
-start);

847 ià(
tok’s
[
–em’ts
] =ğ
NULL
è
ş—nup
;

848 
–em’ts
++;

849 
¡¬t
 = 
j
+
£¶’
;

850 
j
 = j+
£¶’
-1;

854 
tok’s
[
–em’ts
] = 
	`sd¢ewËn
(
s
+
¡¬t
,
Ën
-start);

855 ià(
tok’s
[
–em’ts
] =ğ
NULL
è
ş—nup
;

856 
–em’ts
++;

857 *
couÁ
 = 
–em’ts
;

858  
tok’s
;

860 
ş—nup
:

862 
i
;

863 
i
 = 0; i < 
–em’ts
; i++è
	`sdsä“
(
tok’s
[i]);

864 
	`s_ä“
(
tok’s
);

865 *
couÁ
 = 0;

866  
NULL
;

868 
	}
}

871 
	$sdsä“¥l™»s
(
sds
 *
tok’s
, 
couÁ
) {

872 ià(!
tok’s
) ;

873 
couÁ
--)

874 
	`sdsä“
(
tok’s
[
couÁ
]);

875 
	`s_ä“
(
tok’s
);

876 
	}
}

884 
sds
 
	$sdsÿŒ•r
(
sds
 
s
, cÚ¡ *
p
, 
size_t
 
Ën
) {

885 
s
 = 
	`sdsÿ’
(s,"\"",1);

886 
Ën
--) {

887 *
p
) {

890 
s
 = 
	`sdsÿrštf
(s,"\\%c",*
p
);

892 '\n': 
s
 = 
	`sdsÿ’
(s,"\\n",2); ;

893 '\r': 
s
 = 
	`sdsÿ’
(s,"\\r",2); ;

894 '\t': 
s
 = 
	`sdsÿ’
(s,"\\t",2); ;

895 '\a': 
s
 = 
	`sdsÿ’
(s,"\\a",2); ;

896 '\b': 
s
 = 
	`sdsÿ’
(s,"\\b",2); ;

898 ià(
	`i¥ršt
(*
p
))

899 
s
 = 
	`sdsÿrštf
(s,"%c",*
p
);

901 
s
 = 
	`sdsÿrštf
(s,"\\x%02x",()*
p
);

904 
p
++;

906  
	`sdsÿ’
(
s
,"\"",1);

907 
	}
}

911 
	$is_hex_dig™
(
c
) {

912  (
c
 >= '0' && c <= '9') || (c >= 'a' && c <= 'f') ||

913 (
c
 >= 'A' && c <= 'F');

914 
	}
}

918 
	$hex_dig™_to_št
(
c
) {

919 
c
) {

938 
	}
}

959 
sds
 *
	$sds¥l™¬gs
(cÚ¡ *
lše
, *
¬gc
) {

960 cÚ¡ *
p
 = 
lše
;

961 *
cu¼’t
 = 
NULL
;

962 **
veùÜ
 = 
NULL
;

964 *
¬gc
 = 0;

967 *
p
 && 
	`is¥aû
(*p))…++;

968 ià(*
p
) {

970 
šq
=0;

971 
šsq
=0;

972 
dÚe
=0;

974 ià(
cu¼’t
 =ğ
NULL
ècu¼’ˆğ
	`sd£m±y
();

975 !
dÚe
) {

976 ià(
šq
) {

977 ià(*
p
 == '\\' && *(p+1) == 'x' &&

978 
	`is_hex_dig™
(*(
p
+2)) &&

979 
	`is_hex_dig™
(*(
p
+3)))

981 
by‹
;

983 
by‹
 = (
	`hex_dig™_to_št
(*(
p
+2))*16)+

984 
	`hex_dig™_to_št
(*(
p
+3));

985 
cu¼’t
 = 
	`sdsÿ’
(cu¼’t,(*)&
by‹
,1);

986 
p
 += 3;

987 } ià(*
p
 == '\\' && *(p+1)) {

988 
c
;

990 
p
++;

991 *
p
) {

992 'n': 
c
 = '\n'; ;

993 'r': 
c
 = '\r'; ;

994 't': 
c
 = '\t'; ;

995 'b': 
c
 = '\b'; ;

996 'a': 
c
 = '\a'; ;

997 : 
c
 = *
p
; ;

999 
cu¼’t
 = 
	`sdsÿ’
(cu¼’t,&
c
,1);

1000 } ià(*
p
 == '"') {

1003 ià(*(
p
+1è&& !
	`is¥aû
(*Õ+1))è
”r
;

1004 
dÚe
=1;

1005 } ià(!*
p
) {

1007 
”r
;

1009 
cu¼’t
 = 
	`sdsÿ’
(cu¼’t,
p
,1);

1011 } ià(
šsq
) {

1012 ià(*
p
 == '\\' && *(p+1) == '\'') {

1013 
p
++;

1014 
cu¼’t
 = 
	`sdsÿ’
(current,"'",1);

1015 } ià(*
p
 == '\'') {

1018 ià(*(
p
+1è&& !
	`is¥aû
(*Õ+1))è
”r
;

1019 
dÚe
=1;

1020 } ià(!*
p
) {

1022 
”r
;

1024 
cu¼’t
 = 
	`sdsÿ’
(cu¼’t,
p
,1);

1027 *
p
) {

1033 
dÚe
=1;

1036 
šq
=1;

1039 
šsq
=1;

1042 
cu¼’t
 = 
	`sdsÿ’
(cu¼’t,
p
,1);

1046 ià(*
p
)…++;

1049 
veùÜ
 = 
	`s_»®loc
(veùÜ,((*
¬gc
)+1)*(*));

1050 
veùÜ
[*
¬gc
] = 
cu¼’t
;

1051 (*
¬gc
)++;

1052 
cu¼’t
 = 
NULL
;

1055 ià(
veùÜ
 =ğ
NULL
èveùÜ = 
	`s_m®loc
((*));

1056  
veùÜ
;

1060 
”r
:

1061 (*
¬gc
)--)

1062 
	`sdsä“
(
veùÜ
[*
¬gc
]);

1063 
	`s_ä“
(
veùÜ
);

1064 ià(
cu¼’t
è
	`sdsä“
(current);

1065 *
¬gc
 = 0;

1066  
NULL
;

1067 
	}
}

1078 
sds
 
	$sdsm­ch¬s
(
sds
 
s
, cÚ¡ *
äom
, cÚ¡ *
to
, 
size_t
 
£’
) {

1079 
size_t
 
j
, 
i
, 
l
 = 
	`sd¦’
(
s
);

1081 
j
 = 0; j < 
l
; j++) {

1082 
i
 = 0; i < 
£’
; i++) {

1083 ià(
s
[
j
] =ğ
äom
[
i
]) {

1084 
s
[
j
] = 
to
[
i
];

1089  
s
;

1090 
	}
}

1094 
sds
 
	$sdsjoš
(**
¬gv
, 
¬gc
, *
£p
) {

1095 
sds
 
još
 = 
	`sd£m±y
();

1096 
j
;

1098 
j
 = 0; j < 
¬gc
; j++) {

1099 
još
 = 
	`sdsÿt
(još, 
¬gv
[
j
]);

1100 ià(
j
 !ğ
¬gc
-1è
još
 = 
	`sdsÿt
(još,
£p
);

1102  
još
;

1103 
	}
}

1106 
sds
 
	$sdsjošsds
(
sds
 *
¬gv
, 
¬gc
, cÚ¡ *
£p
, 
size_t
 
£¶’
) {

1107 
sds
 
još
 = 
	`sd£m±y
();

1108 
j
;

1110 
j
 = 0; j < 
¬gc
; j++) {

1111 
još
 = 
	`sdsÿtsds
(još, 
¬gv
[
j
]);

1112 ià(
j
 !ğ
¬gc
-1è
još
 = 
	`sdsÿ’
(još,
£p
,
£¶’
);

1114  
još
;

1115 
	}
}

1122 *
	$sds_m®loc
(
size_t
 
size
è{  
	`s_m®loc
(size); 
	}
}

1123 *
	$sds_»®loc
(*
±r
, 
size_t
 
size
è{  
	`s_»®loc
ÕŒ,size); 
	}
}

1124 
	$sds_ä“
(*
±r
è{ 
	`s_ä“
ÕŒ); 
	}
}

1126 #ià
defšed
(
SDS_TEST_MAIN
)

1127 
	~<¡dio.h
>

1128 
	~"‹¡h–p.h
"

1129 
	~"lim™s.h
"

1131 
	#UNUSED
(
x
è()(x)

	)

1132 
	$sdsTe¡
() {

1134 
sds
 
x
 = 
	`sd¢ew
("foo"), 
y
;

1136 
	`‹¡_cÚd
("Create‡ string‡nd obtainhe†ength",

1137 
	`sd¦’
(
x
è=ğ3 && 
	`memcmp
(x,"foo\0",4) == 0)

1139 
	`sdsä“
(
x
);

1140 
x
 = 
	`sd¢ewËn
("foo",2);

1141 
	`‹¡_cÚd
("Create‡ string with specified†ength",

1142 
	`sd¦’
(
x
è=ğ2 && 
	`memcmp
(x,"fo\0",3) == 0)

1144 
x
 = 
	`sdsÿt
(x,"bar");

1145 
	`‹¡_cÚd
("Strings concatenation",

1146 
	`sd¦’
(
x
è=ğ5 && 
	`memcmp
(x,"fobar\0",6) == 0);

1148 
x
 = 
	`sdsıy
(x,"a");

1149 
	`‹¡_cÚd
("sdscpy()‡gainst‡n originally†onger string",

1150 
	`sd¦’
(
x
è=ğ1 && 
	`memcmp
(x,"a\0",2) == 0)

1152 
x
 = 
	`sdsıy
(x,"xyzxxxxxxxxxxyyyyyyyyyykkkkkkkkkk");

1153 
	`‹¡_cÚd
("sdscpy()‡gainst‡n originally shorter string",

1154 
	`sd¦’
(
x
) == 33 &&

1155 
	`memcmp
(
x
,"xyzxxxxxxxxxxyyyyyyyyyykkkkkkkkkk\0",33) == 0)

1157 
	`sdsä“
(
x
);

1158 
x
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"%d",123);

1159 
	`‹¡_cÚd
("sdscatprintf() seems working inhe base case",

1160 
	`sd¦’
(
x
è=ğ3 && 
	`memcmp
(x,"123\0",4) == 0)

1162 
	`sdsä“
(
x
);

1163 
x
 = 
	`sd¢ew
("--");

1164 
x
 = 
	`sdsÿtfmt
(x, "H–lØ% WÜld %I,%I--", "Hi!", 
LLONG_MIN
,
LLONG_MAX
);

1165 
	`‹¡_cÚd
("sdscatfmt() seems working inhe base case",

1166 
	`sd¦’
(
x
) == 60 &&

1167 
	`memcmp
(
x
,"--Hello Hi! World -9223372036854775808,"

1169 
	`´štf
("[%s]\n",
x
);

1171 
	`sdsä“
(
x
);

1172 
x
 = 
	`sd¢ew
("--");

1173 
x
 = 
	`sdsÿtfmt
(x, "%u,%U--", 
UINT_MAX
, 
ULLONG_MAX
);

1174 
	`‹¡_cÚd
("sdscatfmt() seems working with unsigned‚umbers",

1175 
	`sd¦’
(
x
) == 35 &&

1176 
	`memcmp
(
x
,"--4294967295,18446744073709551615--",35) == 0)

1178 
	`sdsä“
(
x
);

1179 
x
 = 
	`sd¢ew
(" x ");

1180 
	`sd¡rim
(
x
," x");

1181 
	`‹¡_cÚd
("sdstrim() works when‡ll chars match",

1182 
	`sd¦’
(
x
) == 0)

1184 
	`sdsä“
(
x
);

1185 
x
 = 
	`sd¢ew
(" x ");

1186 
	`sd¡rim
(
x
," ");

1187 
	`‹¡_cÚd
("sdstrim() works when‡ single char„emains",

1188 
	`sd¦’
(
x
) == 1 && x[0] == 'x')

1190 
	`sdsä“
(
x
);

1191 
x
 = 
	`sd¢ew
("xxciaoyyy");

1192 
	`sd¡rim
(
x
,"xy");

1193 
	`‹¡_cÚd
("sdstrim() correctlyrims characters",

1194 
	`sd¦’
(
x
è=ğ4 && 
	`memcmp
(x,"ciao\0",5) == 0)

1196 
y
 = 
	`sdsdup
(
x
);

1197 
	`sd¤ªge
(
y
,1,1);

1198 
	`‹¡_cÚd
("sdsrange(...,1,1)",

1199 
	`sd¦’
(
y
è=ğ1 && 
	`memcmp
(y,"i\0",2) == 0)

1201 
	`sdsä“
(
y
);

1202 
y
 = 
	`sdsdup
(
x
);

1203 
	`sd¤ªge
(
y
,1,-1);

1204 
	`‹¡_cÚd
("sdsrange(...,1,-1)",

1205 
	`sd¦’
(
y
è=ğ3 && 
	`memcmp
(y,"iao\0",4) == 0)

1207 
	`sdsä“
(
y
);

1208 
y
 = 
	`sdsdup
(
x
);

1209 
	`sd¤ªge
(
y
,-2,-1);

1210 
	`‹¡_cÚd
("sdsrange(...,-2,-1)",

1211 
	`sd¦’
(
y
è=ğ2 && 
	`memcmp
(y,"ao\0",3) == 0)

1213 
	`sdsä“
(
y
);

1214 
y
 = 
	`sdsdup
(
x
);

1215 
	`sd¤ªge
(
y
,2,1);

1216 
	`‹¡_cÚd
("sdsrange(...,2,1)",

1217 
	`sd¦’
(
y
è=ğ0 && 
	`memcmp
(y,"\0",1) == 0)

1219 
	`sdsä“
(
y
);

1220 
y
 = 
	`sdsdup
(
x
);

1221 
	`sd¤ªge
(
y
,1,100);

1222 
	`‹¡_cÚd
("sdsrange(...,1,100)",

1223 
	`sd¦’
(
y
è=ğ3 && 
	`memcmp
(y,"iao\0",4) == 0)

1225 
	`sdsä“
(
y
);

1226 
y
 = 
	`sdsdup
(
x
);

1227 
	`sd¤ªge
(
y
,100,100);

1228 
	`‹¡_cÚd
("sdsrange(...,100,100)",

1229 
	`sd¦’
(
y
è=ğ0 && 
	`memcmp
(y,"\0",1) == 0)

1231 
	`sdsä“
(
y
);

1232 
	`sdsä“
(
x
);

1233 
x
 = 
	`sd¢ew
("foo");

1234 
y
 = 
	`sd¢ew
("foa");

1235 
	`‹¡_cÚd
("sdscmp(foo,fß)", 
	`sdscmp
(
x
,
y
) > 0)

1237 
	`sdsä“
(
y
);

1238 
	`sdsä“
(
x
);

1239 
x
 = 
	`sd¢ew
("bar");

1240 
y
 = 
	`sd¢ew
("bar");

1241 
	`‹¡_cÚd
("sdscmp(b¬,b¬)", 
	`sdscmp
(
x
,
y
) == 0)

1243 
	`sdsä“
(
y
);

1244 
	`sdsä“
(
x
);

1245 
x
 = 
	`sd¢ew
("aar");

1246 
y
 = 
	`sd¢ew
("bar");

1247 
	`‹¡_cÚd
("sdscmp(b¬,b¬)", 
	`sdscmp
(
x
,
y
) < 0)

1249 
	`sdsä“
(
y
);

1250 
	`sdsä“
(
x
);

1251 
x
 = 
	`sd¢ewËn
("\a\n\0foo\r",7);

1252 
y
 = 
	`sdsÿŒ•r
(
	`sd£m±y
(),
x
,
	`sd¦’
(x));

1253 
	`‹¡_cÚd
("sdscatrepr(...data...)",

1254 
	`memcmp
(
y
,"\"\\a\\n\\x00foo\\r\"",15) == 0)

1257 
Şdä“
;

1258 *
p
;

1259 
¡•
 = 10, 
j
, 
i
;

1261 
	`sdsä“
(
x
);

1262 
	`sdsä“
(
y
);

1263 
x
 = 
	`sd¢ew
("0");

1264 
	`‹¡_cÚd
("sd¢ew(èä“/ËÀbufãrs", 
	`sd¦’
(
x
è=ğ1 && 
	`sd§va
(x) == 0);

1268 
i
 = 0; i < 10; i++) {

1269 
ŞdËn
 = 
	`sd¦’
(
x
);

1270 
x
 = 
	`sdsMakeRoomFÜ
(x,
¡•
);

1271 
ty³
 = 
x
[-1]&
SDS_TYPE_MASK
;

1273 
	`‹¡_cÚd
("sdsMakeRoomFÜ(èËn", 
	`sd¦’
(
x
è=ğ
ŞdËn
);

1274 ià(
ty³
 !ğ
SDS_TYPE_5
) {

1275 
	`‹¡_cÚd
("sdsMakeRoomFÜ(èä“", 
	`sd§va
(
x
è>ğ
¡•
);

1276 
Şdä“
 = 
	`sd§va
(
x
);

1278 
p
 = 
x
+
ŞdËn
;

1279 
j
 = 0; j < 
¡•
; j++) {

1280 
p
[
j
] = 'A'+j;

1282 
	`sdsInüL’
(
x
,
¡•
);

1284 
	`‹¡_cÚd
("sdsMakeRoomFor() content",

1285 
	`memcmp
("0ABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJ",
x
,101) == 0);

1286 
	`‹¡_cÚd
("sdsMakeRoomFÜ(èfš®†’gth",
	`sd¦’
(
x
)==101);

1288 
	`sdsä“
(
x
);

1291 
	`‹¡_»pÜt
()

1293 
	}
}

1296 #ifdeà
SDS_TEST_MAIN


1297 
	$maš
() {

1298  
	`sdsTe¡
();

1299 
	}
}

	@sds.h

33 #iâdeà
__SDS_H


34 
	#__SDS_H


	)

36 
	#SDS_MAX_PREALLOC
 (1024*1024)

	)

37 cÚ¡ *
SDS_NOINIT
;

39 
	~<sys/ty³s.h
>

40 
	~<¡d¬g.h
>

41 
	~<¡dšt.h
>

43 *
	tsds
;

47 
__©Œibu‹__
 ((
__·cked__
)è
	gsdshdr5
 {

48 
	gæags
;

49 
	gbuf
[];

51 
__©Œibu‹__
 ((
__·cked__
)è
	gsdshdr8
 {

52 
ušt8_t
 
	gËn
;

53 
ušt8_t
 
	g®loc
;

54 
	gæags
;

55 
	gbuf
[];

57 
__©Œibu‹__
 ((
__·cked__
)è
	gsdshdr16
 {

58 
ušt16_t
 
	gËn
;

59 
ušt16_t
 
	g®loc
;

60 
	gæags
;

61 
	gbuf
[];

63 
__©Œibu‹__
 ((
__·cked__
)è
	gsdshdr32
 {

64 
ušt32_t
 
	gËn
;

65 
ušt32_t
 
	g®loc
;

66 
	gæags
;

67 
	gbuf
[];

69 
__©Œibu‹__
 ((
__·cked__
)è
	gsdshdr64
 {

70 
ušt64_t
 
	gËn
;

71 
ušt64_t
 
	g®loc
;

72 
	gæags
;

73 
	gbuf
[];

76 
	#SDS_TYPE_5
 0

	)

77 
	#SDS_TYPE_8
 1

	)

78 
	#SDS_TYPE_16
 2

	)

79 
	#SDS_TYPE_32
 3

	)

80 
	#SDS_TYPE_64
 4

	)

81 
	#SDS_TYPE_MASK
 7

	)

82 
	#SDS_TYPE_BITS
 3

	)

83 
	#SDS_HDR_VAR
(
T
,
s
è
sdshdr
##T *
sh
 = (*)((s)-((sdshdr##T)));

	)

84 
	#SDS_HDR
(
T
,
s
è((
sdshdr
##T *)((s)-((sdshdr##T))))

	)

85 
	#SDS_TYPE_5_LEN
(
f
è((f)>>
SDS_TYPE_BITS
)

	)

87 
šlše
 
size_t
 
	$sd¦’
(cÚ¡ 
sds
 
s
) {

88 
æags
 = 
s
[-1];

89 
æags
&
SDS_TYPE_MASK
) {

90 
SDS_TYPE_5
:

91  
	`SDS_TYPE_5_LEN
(
æags
);

92 
SDS_TYPE_8
:

93  
	`SDS_HDR
(8,
s
)->
Ën
;

94 
SDS_TYPE_16
:

95  
	`SDS_HDR
(16,
s
)->
Ën
;

96 
SDS_TYPE_32
:

97  
	`SDS_HDR
(32,
s
)->
Ën
;

98 
SDS_TYPE_64
:

99  
	`SDS_HDR
(64,
s
)->
Ën
;

102 
	}
}

104 
šlše
 
size_t
 
	$sd§va
(cÚ¡ 
sds
 
s
) {

105 
æags
 = 
s
[-1];

106 
æags
&
SDS_TYPE_MASK
) {

107 
SDS_TYPE_5
: {

110 
SDS_TYPE_8
: {

111 
	`SDS_HDR_VAR
(8,
s
);

112  
sh
->
®loc
 - sh->
Ën
;

114 
SDS_TYPE_16
: {

115 
	`SDS_HDR_VAR
(16,
s
);

116  
sh
->
®loc
 - sh->
Ën
;

118 
SDS_TYPE_32
: {

119 
	`SDS_HDR_VAR
(32,
s
);

120  
sh
->
®loc
 - sh->
Ën
;

122 
SDS_TYPE_64
: {

123 
	`SDS_HDR_VAR
(64,
s
);

124  
sh
->
®loc
 - sh->
Ën
;

128 
	}
}

130 
šlše
 
	$sds£’
(
sds
 
s
, 
size_t
 
ÃwËn
) {

131 
æags
 = 
s
[-1];

132 
æags
&
SDS_TYPE_MASK
) {

133 
SDS_TYPE_5
:

135 *
å
 = ((*)
s
)-1;

136 *
å
 = 
SDS_TYPE_5
 | (
ÃwËn
 << 
SDS_TYPE_BITS
);

139 
SDS_TYPE_8
:

140 
	`SDS_HDR
(8,
s
)->
Ën
 = 
ÃwËn
;

142 
SDS_TYPE_16
:

143 
	`SDS_HDR
(16,
s
)->
Ën
 = 
ÃwËn
;

145 
SDS_TYPE_32
:

146 
	`SDS_HDR
(32,
s
)->
Ën
 = 
ÃwËn
;

148 
SDS_TYPE_64
:

149 
	`SDS_HDR
(64,
s
)->
Ën
 = 
ÃwËn
;

152 
	}
}

154 
šlše
 
	$sdsšş’
(
sds
 
s
, 
size_t
 
šc
) {

155 
æags
 = 
s
[-1];

156 
æags
&
SDS_TYPE_MASK
) {

157 
SDS_TYPE_5
:

159 *
å
 = ((*)
s
)-1;

160 
ÃwËn
 = 
	`SDS_TYPE_5_LEN
(
æags
)+
šc
;

161 *
å
 = 
SDS_TYPE_5
 | (
ÃwËn
 << 
SDS_TYPE_BITS
);

164 
SDS_TYPE_8
:

165 
	`SDS_HDR
(8,
s
)->
Ën
 +ğ
šc
;

167 
SDS_TYPE_16
:

168 
	`SDS_HDR
(16,
s
)->
Ën
 +ğ
šc
;

170 
SDS_TYPE_32
:

171 
	`SDS_HDR
(32,
s
)->
Ën
 +ğ
šc
;

173 
SDS_TYPE_64
:

174 
	`SDS_HDR
(64,
s
)->
Ën
 +ğ
šc
;

177 
	}
}

180 
šlše
 
size_t
 
	$sd§Îoc
(cÚ¡ 
sds
 
s
) {

181 
æags
 = 
s
[-1];

182 
æags
&
SDS_TYPE_MASK
) {

183 
SDS_TYPE_5
:

184  
	`SDS_TYPE_5_LEN
(
æags
);

185 
SDS_TYPE_8
:

186  
	`SDS_HDR
(8,
s
)->
®loc
;

187 
SDS_TYPE_16
:

188  
	`SDS_HDR
(16,
s
)->
®loc
;

189 
SDS_TYPE_32
:

190  
	`SDS_HDR
(32,
s
)->
®loc
;

191 
SDS_TYPE_64
:

192  
	`SDS_HDR
(64,
s
)->
®loc
;

195 
	}
}

197 
šlše
 
	$sds£Îoc
(
sds
 
s
, 
size_t
 
ÃwËn
) {

198 
æags
 = 
s
[-1];

199 
æags
&
SDS_TYPE_MASK
) {

200 
SDS_TYPE_5
:

203 
SDS_TYPE_8
:

204 
	`SDS_HDR
(8,
s
)->
®loc
 = 
ÃwËn
;

206 
SDS_TYPE_16
:

207 
	`SDS_HDR
(16,
s
)->
®loc
 = 
ÃwËn
;

209 
SDS_TYPE_32
:

210 
	`SDS_HDR
(32,
s
)->
®loc
 = 
ÃwËn
;

212 
SDS_TYPE_64
:

213 
	`SDS_HDR
(64,
s
)->
®loc
 = 
ÃwËn
;

216 
	}
}

218 
sds
 
sd¢ewËn
(cÚ¡ *
š™
, 
size_t
 
š™Ën
);

219 
sds
 
sd¢ew
(cÚ¡ *
š™
);

220 
sds
 
sd£m±y
();

221 
sds
 
sdsdup
(cÚ¡ sd 
s
);

222 
sdsä“
(
sds
 
s
);

223 
sds
 
sdsgrowz”o
(sd 
s
, 
size_t
 
Ën
);

224 
sds
 
sdsÿ’
(sd 
s
, cÚ¡ *
t
, 
size_t
 
Ën
);

225 
sds
 
sdsÿt
(sd 
s
, cÚ¡ *
t
);

226 
sds
 
sdsÿtsds
(sd 
s
, cÚ¡ sd 
t
);

227 
sds
 
sdsıyËn
(sd 
s
, cÚ¡ *
t
, 
size_t
 
Ën
);

228 
sds
 
sdsıy
(sd 
s
, cÚ¡ *
t
);

230 
sds
 
sdsÿtv´štf
(sd 
s
, cÚ¡ *
fmt
, 
va_li¡
 
­
);

231 #ifdeà
__GNUC__


232 
sds
 
	$sdsÿrštf
(
sds
 
s
, cÚ¡ *
fmt
, ...)

233 
	`__©Œibu‹__
((
	`fÜm©
(
´štf
, 2, 3)));

235 
sds
 
	`sdsÿrštf
(sd 
s
, cÚ¡ *
fmt
, ...);

238 
sds
 
	`sdsÿtfmt
(sd 
s
, cÚ¡ *
fmt
, ...);

239 
sds
 
	`sd¡rim
(sd 
s
, cÚ¡ *
c£t
);

240 
	`sd¤ªge
(
sds
 
s
, 
ssize_t
 
¡¬t
, ssize_ˆ
’d
);

241 
	`sdsupd©–’
(
sds
 
s
);

242 
	`sdsş—r
(
sds
 
s
);

243 
	`sdscmp
(cÚ¡ 
sds
 
s1
, cÚ¡ sd 
s2
);

244 
sds
 *
	`sds¥l™Ën
(cÚ¡ *
s
, 
ssize_t
 
Ën
, cÚ¡ *
£p
, 
£¶’
, *
couÁ
);

245 
	`sdsä“¥l™»s
(
sds
 *
tok’s
, 
couÁ
);

246 
	`sd¡Şow”
(
sds
 
s
);

247 
	`sd¡ouµ”
(
sds
 
s
);

248 
sds
 
	`sdsäomlÚglÚg
(
v®ue
);

249 
sds
 
	`sdsÿŒ•r
(sd 
s
, cÚ¡ *
p
, 
size_t
 
Ën
);

250 
sds
 *
	`sds¥l™¬gs
(cÚ¡ *
lše
, *
¬gc
);

251 
sds
 
	`sdsm­ch¬s
(sd 
s
, cÚ¡ *
äom
, cÚ¡ *
to
, 
size_t
 
£’
);

252 
sds
 
	`sdsjoš
(**
¬gv
, 
¬gc
, *
£p
);

253 
sds
 
	`sdsjošsds
(sd *
¬gv
, 
¬gc
, cÚ¡ *
£p
, 
size_t
 
£¶’
);

256 
sds
 
	`sdsMakeRoomFÜ
(sd 
s
, 
size_t
 
addËn
);

257 
	`sdsInüL’
(
sds
 
s
, 
ssize_t
 
šü
);

258 
sds
 
	`sdsRemoveF»eS·û
(sd 
s
);

259 
size_t
 
	`sdsAÎocSize
(
sds
 
s
);

260 *
	`sdsAÎocPŒ
(
sds
 
s
);

266 *
	`sds_m®loc
(
size_t
 
size
);

267 *
	`sds_»®loc
(*
±r
, 
size_t
 
size
);

268 
	`sds_ä“
(*
±r
);

270 #ifdeà
REDIS_TEST


271 
	`sdsTe¡
(
¬gc
, *
¬gv
[]);

	@sdsalloc.h

39 #iâdeà
__SDS_ALLOC_H__


40 
	#__SDS_ALLOC_H__


	)

42 
	~"zm®loc.h
"

43 
	#s_m®loc
 
zm®loc


	)

44 
	#s_»®loc
 
z»®loc


	)

45 
	#s_ä“
 
zä“


	)

	@sentinel.c

31 
	~"£rv”.h
"

32 
	~"hœedis.h
"

33 #ifdeà
USE_OPENSSL


34 
	~"İ’s¦/s¦.h
"

35 
	~"hœedis_s¦.h
"

37 
	~"async.h
"

39 
	~<ùy³.h
>

40 
	~<¬·/š‘.h
>

41 
	~<sys/sock‘.h
>

42 
	~<sys/wa™.h
>

43 
	~<fú.h
>

45 **
’vœÚ
;

47 #ifdeà
USE_OPENSSL


48 
SSL_CTX
 *
»dis_s_ùx
;

51 
	#REDIS_SENTINEL_PORT
 26379

	)

56 
	s£Áš–Addr
 {

57 *
	m
;

58 
	mpÜt
;

59 } 
	t£Áš–Addr
;

62 
	#SRI_MASTER
 (1<<0)

	)

63 
	#SRI_SLAVE
 (1<<1)

	)

64 
	#SRI_SENTINEL
 (1<<2)

	)

65 
	#SRI_S_DOWN
 (1<<3è

	)

66 
	#SRI_O_DOWN
 (1<<4è

	)

67 
	#SRI_MASTER_DOWN
 (1<<5è

	)

69 
	#SRI_FAILOVER_IN_PROGRESS
 (1<<6è

	)

71 
	#SRI_PROMOTED
 (1<<7è

	)

72 
	#SRI_RECONF_SENT
 (1<<8è

	)

73 
	#SRI_RECONF_INPROG
 (1<<9è

	)

74 
	#SRI_RECONF_DONE
 (1<<10è

	)

75 
	#SRI_FORCE_FAILOVER
 (1<<11è

	)

76 
	#SRI_SCRIPT_KILL_SENT
 (1<<12è

	)

79 
	#SENTINEL_INFO_PERIOD
 10000

	)

80 
	#SENTINEL_PING_PERIOD
 1000

	)

81 
	#SENTINEL_ASK_PERIOD
 1000

	)

82 
	#SENTINEL_PUBLISH_PERIOD
 2000

	)

83 
	#SENTINEL_DEFAULT_DOWN_AFTER
 30000

	)

84 
	#SENTINEL_HELLO_CHANNEL
 "__£Áš–__:h–lo"

	)

85 
	#SENTINEL_TILT_TRIGGER
 2000

	)

86 
	#SENTINEL_TILT_PERIOD
 (
SENTINEL_PING_PERIOD
*30)

	)

87 
	#SENTINEL_DEFAULT_SLAVE_PRIORITY
 100

	)

88 
	#SENTINEL_SLAVE_RECONF_TIMEOUT
 10000

	)

89 
	#SENTINEL_DEFAULT_PARALLEL_SYNCS
 1

	)

90 
	#SENTINEL_MIN_LINK_RECONNECT_PERIOD
 15000

	)

91 
	#SENTINEL_DEFAULT_FAILOVER_TIMEOUT
 (60*3*1000)

	)

92 
	#SENTINEL_MAX_PENDING_COMMANDS
 100

	)

93 
	#SENTINEL_ELECTION_TIMEOUT
 10000

	)

94 
	#SENTINEL_MAX_DESYNC
 1000

	)

95 
	#SENTINEL_DEFAULT_DENY_SCRIPTS_RECONFIG
 1

	)

98 
	#SENTINEL_FAILOVER_STATE_NONE
 0

	)

99 
	#SENTINEL_FAILOVER_STATE_WAIT_START
 1

	)

100 
	#SENTINEL_FAILOVER_STATE_SELECT_SLAVE
 2

	)

101 
	#SENTINEL_FAILOVER_STATE_SEND_SLAVEOF_NOONE
 3

	)

102 
	#SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
 4

	)

103 
	#SENTINEL_FAILOVER_STATE_RECONF_SLAVES
 5

	)

104 
	#SENTINEL_FAILOVER_STATE_UPDATE_CONFIG
 6

	)

106 
	#SENTINEL_MASTER_LINK_STATUS_UP
 0

	)

107 
	#SENTINEL_MASTER_LINK_STATUS_DOWN
 1

	)

112 
	#SENTINEL_NO_FLAGS
 0

	)

113 
	#SENTINEL_GENERATE_EVENT
 (1<<16)

	)

114 
	#SENTINEL_LEADER
 (1<<17)

	)

115 
	#SENTINEL_OBSERVER
 (1<<18)

	)

118 
	#SENTINEL_SCRIPT_NONE
 0

	)

119 
	#SENTINEL_SCRIPT_RUNNING
 1

	)

120 
	#SENTINEL_SCRIPT_MAX_QUEUE
 256

	)

121 
	#SENTINEL_SCRIPT_MAX_RUNNING
 16

	)

122 
	#SENTINEL_SCRIPT_MAX_RUNTIME
 60000

	)

123 
	#SENTINEL_SCRIPT_MAX_RETRY
 10

	)

124 
	#SENTINEL_SCRIPT_RETRY_DELAY
 30000

	)

127 
	#SENTINEL_SIMFAILURE_NONE
 0

	)

128 
	#SENTINEL_SIMFAILURE_CRASH_AFTER_ELECTION
 (1<<0)

	)

129 
	#SENTINEL_SIMFAILURE_CRASH_AFTER_PROMOTION
 (1<<1)

	)

145 
	sš¡ªûLšk
 {

146 
	m»fcouÁ
;

147 
	mdiscÚÃùed
;

148 
	m³ndšg_commªds
;

149 
»disAsyncCÚ‹xt
 *
	mcc
;

150 
»disAsyncCÚ‹xt
 *
	mpc
;

151 
m¡ime_t
 
	mcc_cÚn_time
;

152 
m¡ime_t
 
	mpc_cÚn_time
;

153 
m¡ime_t
 
	mpc_Ï¡_aùiv™y
;

154 
m¡ime_t
 
	mÏ¡_ava_time
;

156 
m¡ime_t
 
	maù_pšg_time
;

161 
m¡ime_t
 
	mÏ¡_pšg_time
;

165 
m¡ime_t
 
	mÏ¡_pÚg_time
;

168 
m¡ime_t
 
	mÏ¡_»cÚn_time
;

170 } 
	tš¡ªûLšk
;

172 
	s£Áš–RedisIn¡ªû
 {

173 
	mæags
;

174 *
	mÇme
;

175 *
	mrunid
;

176 
ušt64_t
 
	mcÚfig_•och
;

177 
£Áš–Addr
 *
	maddr
;

178 
š¡ªûLšk
 *
	mlšk
;

179 
m¡ime_t
 
	mÏ¡_pub_time
;

180 
m¡ime_t
 
	mÏ¡_h–lo_time
;

183 
m¡ime_t
 
	mÏ¡_ma¡”_down_»¶y_time
;

185 
m¡ime_t
 
	ms_down_sšû_time
;

186 
m¡ime_t
 
	mo_down_sšû_time
;

187 
m¡ime_t
 
	mdown_aá”_³riod
;

188 
m¡ime_t
 
	mšfo_»äesh
;

189 
diù
 *
	m»Çmed_commªds
;

199 
	mrŞe_»pÜ‹d
;

200 
m¡ime_t
 
	mrŞe_»pÜ‹d_time
;

201 
m¡ime_t
 
	m¦ave_cÚf_chªge_time
;

204 
diù
 *
	m£Áš–s
;

205 
diù
 *
	m¦aves
;

206 
	mquÜum
;

207 
	m·¿Î–_syncs
;

208 *
	mauth_·ss
;

209 *
	mauth_u£r
;

212 
m¡ime_t
 
	mma¡”_lšk_down_time
;

213 
	m¦ave_´iÜ™y
;

214 
m¡ime_t
 
	m¦ave_»cÚf_£Á_time
;

215 
£Áš–RedisIn¡ªû
 *
	mma¡”
;

216 *
	m¦ave_ma¡”_ho¡
;

217 
	m¦ave_ma¡”_pÜt
;

218 
	m¦ave_ma¡”_lšk_¡©us
;

219 
	m¦ave_»¶_off£t
;

221 *
	mËad”
;

225 
ušt64_t
 
	mËad”_•och
;

226 
ušt64_t
 
	mçov”_•och
;

227 
	mçov”_¡©e
;

228 
m¡ime_t
 
	mçov”_¡©e_chªge_time
;

229 
m¡ime_t
 
	mçov”_¡¬t_time
;

230 
m¡ime_t
 
	mçov”_timeout
;

231 
m¡ime_t
 
	mçov”_d–ay_logged
;

233 
£Áš–RedisIn¡ªû
 *
	m´omÙed_¦ave
;

236 *
	mnÙifiÿtiÚ_süt
;

237 *
	mş›Á_»cÚfig_süt
;

238 
sds
 
	mšfo
;

239 } 
	t£Áš–RedisIn¡ªû
;

242 
	s£Áš–S‹
 {

243 
	mmyid
[
CONFIG_RUN_ID_SIZE
+1];

244 
ušt64_t
 
	mcu¼’t_•och
;

245 
diù
 *
	mma¡”s
;

248 
	mtt
;

249 
	mruÂšg_süts
;

250 
m¡ime_t
 
	mtt_¡¬t_time
;

251 
m¡ime_t
 
	m´evious_time
;

252 
li¡
 *
	msüts_queue
;

253 *
	mªnounû_
;

255 
	mªnounû_pÜt
;

257 
	msimçu»_æags
;

258 
	md’y_süts_»cÚfig
;

260 } 
	g£Áš–
;

263 
	s£Áš–SütJob
 {

264 
	mæags
;

265 
	m»Œy_num
;

266 **
	m¬gv
;

267 
m¡ime_t
 
	m¡¬t_time
;

272 
pid_t
 
	mpid
;

273 } 
	t£Áš–SütJob
;

280 
	s»disAeEv’ts
 {

281 
»disAsyncCÚ‹xt
 *
	mcÚ‹xt
;

282 
«Ev’tLoİ
 *
	mloİ
;

283 
	mfd
;

284 
	m»adšg
, 
	mwr™šg
;

285 } 
	t»disAeEv’ts
;

287 
	$»disAeR—dEv’t
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

288 (()
–
); (()
fd
); (()
mask
);

290 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

291 
	`»disAsyncHªdËR—d
(
e
->
cÚ‹xt
);

292 
	}
}

294 
	$»disAeWr™eEv’t
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
) {

295 (()
–
); (()
fd
); (()
mask
);

297 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

298 
	`»disAsyncHªdËWr™e
(
e
->
cÚ‹xt
);

299 
	}
}

301 
	$»disAeAddR—d
(*
´ivd©a
) {

302 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

303 
«Ev’tLoİ
 *
loİ
 = 
e
->loop;

304 ià(!
e
->
»adšg
) {

305 
e
->
»adšg
 = 1;

306 
	`«C»©eFeEv’t
(
loİ
,
e
->
fd
,
AE_READABLE
,
»disAeR—dEv’t
,e);

308 
	}
}

310 
	$»disAeD–R—d
(*
´ivd©a
) {

311 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

312 
«Ev’tLoİ
 *
loİ
 = 
e
->loop;

313 ià(
e
->
»adšg
) {

314 
e
->
»adšg
 = 0;

315 
	`«D–‘eFeEv’t
(
loİ
,
e
->
fd
,
AE_READABLE
);

317 
	}
}

319 
	$»disAeAddWr™e
(*
´ivd©a
) {

320 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

321 
«Ev’tLoİ
 *
loİ
 = 
e
->loop;

322 ià(!
e
->
wr™šg
) {

323 
e
->
wr™šg
 = 1;

324 
	`«C»©eFeEv’t
(
loİ
,
e
->
fd
,
AE_WRITABLE
,
»disAeWr™eEv’t
,e);

326 
	}
}

328 
	$»disAeD–Wr™e
(*
´ivd©a
) {

329 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

330 
«Ev’tLoİ
 *
loİ
 = 
e
->loop;

331 ià(
e
->
wr™šg
) {

332 
e
->
wr™šg
 = 0;

333 
	`«D–‘eFeEv’t
(
loİ
,
e
->
fd
,
AE_WRITABLE
);

335 
	}
}

337 
	$»disAeCËªup
(*
´ivd©a
) {

338 
»disAeEv’ts
 *
e
 = (»disAeEv’ts*)
´ivd©a
;

339 
	`»disAeD–R—d
(
´ivd©a
);

340 
	`»disAeD–Wr™e
(
´ivd©a
);

341 
	`zä“
(
e
);

342 
	}
}

344 
	$»disAeA‰ach
(
«Ev’tLoİ
 *
loİ
, 
»disAsyncCÚ‹xt
 *
ac
) {

345 
»disCÚ‹xt
 *
c
 = &(
ac
->c);

346 
»disAeEv’ts
 *
e
;

349 ià(
ac
->
ev
.
d©a
 !ğ
NULL
)

350  
C_ERR
;

353 
e
 = (
»disAeEv’ts
*)
	`zm®loc
((*e));

354 
e
->
cÚ‹xt
 = 
ac
;

355 
e
->
loİ
 =†oop;

356 
e
->
fd
 = 
c
->fd;

357 
e
->
»adšg
 =ƒ->
wr™šg
 = 0;

360 
ac
->
ev
.
addR—d
 = 
»disAeAddR—d
;

361 
ac
->
ev
.
d–R—d
 = 
»disAeD–R—d
;

362 
ac
->
ev
.
addWr™e
 = 
»disAeAddWr™e
;

363 
ac
->
ev
.
d–Wr™e
 = 
»disAeD–Wr™e
;

364 
ac
->
ev
.
ş—nup
 = 
»disAeCËªup
;

365 
ac
->
ev
.
d©a
 = 
e
;

367  
C_OK
;

368 
	}
}

372 
£Áš–LškE¡ablishedC®lback
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
, 
¡©us
);

373 
£Áš–DiscÚÃùC®lback
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
, 
¡©us
);

374 
£Áš–ReûiveH–loMes§ges
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
);

375 
£Áš–RedisIn¡ªû
 *
£Áš–G‘Ma¡”ByName
(*
Çme
);

376 *
£Áš–G‘SubjeùiveL—d”
(
£Áš–RedisIn¡ªû
 *
ma¡”
);

377 *
£Áš–G‘ObjeùiveL—d”
(
£Áš–RedisIn¡ªû
 *
ma¡”
);

378 
ye¢Ùoi
(*
s
);

379 
š¡ªûLškCÚÃùiÚE¼Ü
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
);

380 cÚ¡ *
£Áš–RedisIn¡ªûTy³SŒ
(
£Áš–RedisIn¡ªû
 *
ri
);

381 
£Áš–AbÜtFaov”
(
£Áš–RedisIn¡ªû
 *
ri
);

382 
£Áš–Ev’t
(
Ëv–
, *
ty³
, 
£Áš–RedisIn¡ªû
 *
ri
, cÚ¡ *
fmt
, ...);

383 
£Áš–RedisIn¡ªû
 *
£Áš–S–eùSÏve
(£Áš–RedisIn¡ªû *
ma¡”
);

384 
£Áš–ScheduËSütExecutiÚ
(*
·th
, ...);

385 
£Áš–S¹Faov”
(
£Áš–RedisIn¡ªû
 *
ma¡”
);

386 
£Áš–DisÿrdR•lyC®lback
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
);

387 
£Áš–S’dSÏveOf
(
£Áš–RedisIn¡ªû
 *
ri
, *
ho¡
, 
pÜt
);

388 *
£Áš–VÙeL—d”
(
£Áš–RedisIn¡ªû
 *
ma¡”
, 
ušt64_t
 
»q_•och
, *
»q_runid
, ušt64_ˆ*
Ëad”_•och
);

389 
£Áš–FlushCÚfig
();

390 
£Áš–G’”©eIn™ŸlMÚ™ÜEv’ts
();

391 
£Áš–S’dPšg
(
£Áš–RedisIn¡ªû
 *
ri
);

392 
£Áš–FÜûH–loUpd©eFÜMa¡”
(
£Áš–RedisIn¡ªû
 *
ma¡”
);

393 
£Áš–RedisIn¡ªû
 *
g‘S’tš–RedisIn¡ªûByAddrAndRunID
(
diù
 *
š¡ªûs
, *

, 
pÜt
, *
runid
);

394 
£Áš–SimFau»C¿sh
();

398 
ušt64_t
 
diùSdsHash
(cÚ¡ *
key
);

399 
ušt64_t
 
diùSdsCa£Hash
(cÚ¡ *
key
);

400 
diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
);

401 
diùSdsKeyCa£Com·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
);

402 
»Ëa£S’tš–RedisIn¡ªû
(
£Áš–RedisIn¡ªû
 *
ri
);

404 
	$diùIn¡ªûsV®De¡ruùÜ
 (*
´ivd©a
, *
obj
) {

405 
	`UNUSED
(
´ivd©a
);

406 
	`»Ëa£S’tš–RedisIn¡ªû
(
obj
);

407 
	}
}

413 
diùTy³
 
	gš¡ªûsDiùTy³
 = {

414 
diùSdsHash
,

415 
NULL
,

416 
NULL
,

417 
diùSdsKeyCom·»
,

418 
NULL
,

419 
diùIn¡ªûsV®De¡ruùÜ


426 
diùTy³
 
	gËad”VÙesDiùTy³
 = {

427 
diùSdsHash
,

428 
NULL
,

429 
NULL
,

430 
diùSdsKeyCom·»
,

431 
NULL
,

432 
NULL


436 
diùTy³
 
	g»ÇmedCommªdsDiùTy³
 = {

437 
diùSdsCa£Hash
,

438 
NULL
,

439 
NULL
,

440 
diùSdsKeyCa£Com·»
,

441 
diùSdsDe¡ruùÜ
,

442 
diùSdsDe¡ruùÜ


447 
£Áš–Commªd
(
ş›Á
 *
c
);

448 
£Áš–InfoCommªd
(
ş›Á
 *
c
);

449 
£Áš–S‘Commªd
(
ş›Á
 *
c
);

450 
£Áš–PublishCommªd
(
ş›Á
 *
c
);

451 
£Áš–RŞeCommªd
(
ş›Á
 *
c
);

453 
»disCommªd
 
	g£Áš–cmds
[] = {

454 {"pšg",
pšgCommªd
,1,"",0,
NULL
,0,0,0,0,0},

455 {"£Áš–",
£Áš–Commªd
,-2,"",0,
NULL
,0,0,0,0,0},

456 {"subsüibe",
subsüibeCommªd
,-2,"",0,
NULL
,0,0,0,0,0},

457 {"unsubsüibe",
unsubsüibeCommªd
,-1,"",0,
NULL
,0,0,0,0,0},

458 {"psubsüibe",
psubsüibeCommªd
,-2,"",0,
NULL
,0,0,0,0,0},

459 {"punsubsüibe",
punsubsüibeCommªd
,-1,"",0,
NULL
,0,0,0,0,0},

460 {"publish",
£Áš–PublishCommªd
,3,"",0,
NULL
,0,0,0,0,0},

461 {"šfo",
£Áš–InfoCommªd
,-1,"",0,
NULL
,0,0,0,0,0},

462 {"rŞe",
£Áš–RŞeCommªd
,1,"ok-lßdšg",0,
NULL
,0,0,0,0,0},

463 {"ş›Á",
ş›ÁCommªd
,-2,"»ad-Úly‚o-süt",0,
NULL
,0,0,0,0,0},

464 {"shutdown",
shutdownCommªd
,-1,"",0,
NULL
,0,0,0,0,0},

465 {"auth",
authCommªd
,2,"no-auth‚o-süˆok-lßdšg ok-¡®ç¡",0,
NULL
,0,0,0,0,0},

466 {"h–lo",
h–loCommªd
,-2,"no-auth‚o-süˆç¡",0,
NULL
,0,0,0,0,0}

471 
	$š™S’tš–CÚfig
() {

472 
£rv”
.
pÜt
 = 
REDIS_SENTINEL_PORT
;

473 
£rv”
.
´Ùeùed_mode
 = 0;

474 
	}
}

477 
	$š™S’tš–
() {

478 
j
;

482 
	`diùEm±y
(
£rv”
.
commªds
,
NULL
);

483 
j
 = 0; j < (
£Áš–cmds
)/(sentinelcmds[0]); j++) {

484 
»tv®
;

485 
»disCommªd
 *
cmd
 = 
£Áš–cmds
+
j
;

487 
»tv®
 = 
	`diùAdd
(
£rv”
.
commªds
, 
	`sd¢ew
(
cmd
->
Çme
), cmd);

488 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

492 ià(
	`pİuÏ‹CommªdTabËP¬£FÏgs
(
cmd
,cmd->
sæags
è=ğ
C_ERR
)

493 
	`£rv”Pªic
("Unsupported command flag");

497 
£Áš–
.
cu¼’t_•och
 = 0;

498 
£Áš–
.
ma¡”s
 = 
	`diùC»©e
(&
š¡ªûsDiùTy³
,
NULL
);

499 
£Áš–
.
tt
 = 0;

500 
£Áš–
.
tt_¡¬t_time
 = 0;

501 
£Áš–
.
´evious_time
 = 
	`m¡ime
();

502 
£Áš–
.
ruÂšg_süts
 = 0;

503 
£Áš–
.
süts_queue
 = 
	`li¡C»©e
();

504 
£Áš–
.
ªnounû_
 = 
NULL
;

505 
£Áš–
.
ªnounû_pÜt
 = 0;

506 
£Áš–
.
simçu»_æags
 = 
SENTINEL_SIMFAILURE_NONE
;

507 
£Áš–
.
d’y_süts_»cÚfig
 = 
SENTINEL_DEFAULT_DENY_SCRIPTS_RECONFIG
;

508 
	`mem£t
(
£Áš–
.
myid
,0,(sentinel.myid));

509 
	}
}

513 
	$£Áš–IsRuÂšg
() {

514 
j
;

516 ià(
£rv”
.
cÚfigfe
 =ğ
NULL
) {

517 
	`£rv”Log
(
LL_WARNING
,

519 
	`ex™
(1);

520 } ià(
	`acûss
(
£rv”
.
cÚfigfe
,
W_OK
) == -1) {

521 
	`£rv”Log
(
LL_WARNING
,

523 
£rv”
.
cÚfigfe
,
	`¡»¼Ü
(
”ºo
));

524 
	`ex™
(1);

530 
j
 = 0; j < 
CONFIG_RUN_ID_SIZE
; j++)

531 ià(
£Áš–
.
myid
[
j
] != 0) ;

533 ià(
j
 =ğ
CONFIG_RUN_ID_SIZE
) {

535 
	`g‘RªdomHexCh¬s
(
£Áš–
.
myid
,
CONFIG_RUN_ID_SIZE
);

536 
	`£Áš–FlushCÚfig
();

540 
	`£rv”Log
(
LL_WARNING
,"S’tš– ID i %s", 
£Áš–
.
myid
);

544 
	`£Áš–G’”©eIn™ŸlMÚ™ÜEv’ts
();

545 
	}
}

554 
£Áš–Addr
 *
	$ü—‹S’tš–Addr
(*
ho¡Çme
, 
pÜt
) {

555 

[
NET_IP_STR_LEN
];

556 
£Áš–Addr
 *
§
;

558 ià(
pÜt
 < 0 ||…ort > 65535) {

559 
”ºo
 = 
EINVAL
;

560  
NULL
;

562 ià(
	`ª‘ResŞve
(
NULL
,
ho¡Çme
,

,()è=ğ
ANET_ERR
) {

563 
”ºo
 = 
ENOENT
;

564  
NULL
;

566 
§
 = 
	`zm®loc
((*sa));

567 
§
->

 = 
	`sd¢ew
(ip);

568 
§
->
pÜt
 =…ort;

569  
§
;

570 
	}
}

573 
£Áš–Addr
 *
	$dupS’tš–Addr
(
£Áš–Addr
 *
¤c
) {

574 
£Áš–Addr
 *
§
;

576 
§
 = 
	`zm®loc
((*sa));

577 
§
->

 = 
	`sd¢ew
(
¤c
->ip);

578 
§
->
pÜt
 = 
¤c
->port;

579  
§
;

580 
	}
}

583 
	$»Ëa£S’tš–Addr
(
£Áš–Addr
 *
§
) {

584 
	`sdsä“
(
§
->

);

585 
	`zä“
(
§
);

586 
	}
}

589 
	$£Áš–AddrIsEqu®
(
£Áš–Addr
 *
a
, s’tš–Add¸*
b
) {

590  
a
->
pÜt
 =ğ
b
->pÜˆ&& !
	`¡rÿ£cmp
×->

,b->ip);

591 
	}
}

619 
	$£Áš–Ev’t
(
Ëv–
, *
ty³
, 
£Áš–RedisIn¡ªû
 *
ri
,

620 cÚ¡ *
fmt
, ...) {

621 
va_li¡
 
­
;

622 
msg
[
LOG_MAX_LEN
];

623 
robj
 *
chªÃl
, *
·ylßd
;

626 ià(
fmt
[0] == '%' && fmt[1] == '@') {

627 
£Áš–RedisIn¡ªû
 *
ma¡”
 = (
ri
->
æags
 & 
SRI_MASTER
) ?

628 
NULL
 : 
ri
->
ma¡”
;

630 ià(
ma¡”
) {

631 
	`¢´štf
(
msg
, (msg), "%s %s %s %d @ %s %s %d",

632 
	`£Áš–RedisIn¡ªûTy³SŒ
(
ri
),

633 
ri
->
Çme
,„i->
addr
->

,„i->addr->
pÜt
,

634 
ma¡”
->
Çme
, ma¡”->
addr
->

, ma¡”->addr->
pÜt
);

636 
	`¢´štf
(
msg
, (msg), "%s %s %s %d",

637 
	`£Áš–RedisIn¡ªûTy³SŒ
(
ri
),

638 
ri
->
Çme
,„i->
addr
->

,„i->addr->
pÜt
);

640 
fmt
 += 2;

642 
msg
[0] = '\0';

646 ià(
fmt
[0] != '\0') {

647 
	`va_¡¬t
(
­
, 
fmt
);

648 
	`v¢´štf
(
msg
+
	`¡¾’
(msg), (msg)-¡¾’(msg), 
fmt
, 
­
);

649 
	`va_’d
(
­
);

653 ià(
Ëv–
 >ğ
£rv”
.
v”bos™y
)

654 
	`£rv”Log
(
Ëv–
,"% %s",
ty³
,
msg
);

657 ià(
Ëv–
 !ğ
LL_DEBUG
) {

658 
chªÃl
 = 
	`ü—‹SŒšgObjeù
(
ty³
,
	`¡¾’
(type));

659 
·ylßd
 = 
	`ü—‹SŒšgObjeù
(
msg
,
	`¡¾’
(msg));

660 
	`pubsubPublishMes§ge
(
chªÃl
,
·ylßd
);

661 
	`deüRefCouÁ
(
chªÃl
);

662 
	`deüRefCouÁ
(
·ylßd
);

666 ià(
Ëv–
 =ğ
LL_WARNING
 && 
ri
 !ğ
NULL
) {

667 
£Áš–RedisIn¡ªû
 *
ma¡”
 = (
ri
->
æags
 & 
SRI_MASTER
) ?

668 
ri
 :„i->
ma¡”
;

669 ià(
ma¡”
 && ma¡”->
nÙifiÿtiÚ_süt
) {

670 
	`£Áš–ScheduËSütExecutiÚ
(
ma¡”
->
nÙifiÿtiÚ_süt
,

671 
ty³
,
msg
,
NULL
);

674 
	}
}

680 
	$£Áš–G’”©eIn™ŸlMÚ™ÜEv’ts
() {

681 
diùI‹¿tÜ
 *
di
;

682 
diùEÁry
 *
de
;

684 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

685 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

686 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

687 
	`£Áš–Ev’t
(
LL_WARNING
,"+mÚ™Ü",
ri
,"%@ quÜum %d",ri->
quÜum
);

689 
	`diùR–—£I‹¿tÜ
(
di
);

690 
	}
}

695 
	$£Áš–R–—£SütJob
(
£Áš–SütJob
 *
sj
) {

696 
j
 = 0;

698 
sj
->
¬gv
[
j
]è
	`sdsä“
(sj->argv[j++]);

699 
	`zä“
(
sj
->
¬gv
);

700 
	`zä“
(
sj
);

701 
	}
}

703 
	#SENTINEL_SCRIPT_MAX_ARGS
 16

	)

704 
	$£Áš–ScheduËSütExecutiÚ
(*
·th
, ...) {

705 
va_li¡
 
­
;

706 *
¬gv
[
SENTINEL_SCRIPT_MAX_ARGS
+1];

707 
¬gc
 = 1;

708 
£Áš–SütJob
 *
sj
;

710 
	`va_¡¬t
(
­
, 
·th
);

711 
¬gc
 < 
SENTINEL_SCRIPT_MAX_ARGS
) {

712 
¬gv
[
¬gc
] = 
	`va_¬g
(
­
,*);

713 ià(!
¬gv
[
¬gc
]) ;

714 
¬gv
[
¬gc
] = 
	`sd¢ew
(argv[argc]);

715 
¬gc
++;

717 
	`va_’d
(
­
);

718 
¬gv
[0] = 
	`sd¢ew
(
·th
);

720 
sj
 = 
	`zm®loc
((*sj));

721 
sj
->
æags
 = 
SENTINEL_SCRIPT_NONE
;

722 
sj
->
»Œy_num
 = 0;

723 
sj
->
¬gv
 = 
	`zm®loc
((*)*(
¬gc
+1));

724 
sj
->
¡¬t_time
 = 0;

725 
sj
->
pid
 = 0;

726 
	`memıy
(
sj
->
¬gv
,¬gv,(*)*(
¬gc
+1));

728 
	`li¡AddNodeTa
(
£Áš–
.
süts_queue
,
sj
);

731 ià(
	`li¡L’gth
(
£Áš–
.
süts_queue
è> 
SENTINEL_SCRIPT_MAX_QUEUE
) {

732 
li¡Node
 *
Ê
;

733 
li¡I‹r
 
li
;

735 
	`li¡Rewšd
(
£Áš–
.
süts_queue
,&
li
);

736 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

737 
sj
 = 
Ê
->
v®ue
;

739 ià(
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
) ;

741 
	`li¡D–Node
(
£Áš–
.
süts_queue
,
Ê
);

742 
	`£Áš–R–—£SütJob
(
sj
);

745 
	`£rv”As£¹
(
	`li¡L’gth
(
£Áš–
.
süts_queue
) <=

746 
SENTINEL_SCRIPT_MAX_QUEUE
);

748 
	}
}

752 
li¡Node
 *
	$£Áš–G‘SütLi¡NodeByPid
(
pid_t
 
pid
) {

753 
li¡Node
 *
Ê
;

754 
li¡I‹r
 
li
;

756 
	`li¡Rewšd
(
£Áš–
.
süts_queue
,&
li
);

757 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

758 
£Áš–SütJob
 *
sj
 = 
Ê
->
v®ue
;

760 ià((
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
è&& sj->
pid
 ==…id)

761  
Ê
;

763  
NULL
;

764 
	}
}

768 
	$£Áš–RunP’dšgSüts
() {

769 
li¡Node
 *
Ê
;

770 
li¡I‹r
 
li
;

771 
m¡ime_t
 
now
 = 
	`m¡ime
();

775 
	`li¡Rewšd
(
£Áš–
.
süts_queue
,&
li
);

776 
£Áš–
.
ruÂšg_süts
 < 
SENTINEL_SCRIPT_MAX_RUNNING
 &&

777 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
)

779 
£Áš–SütJob
 *
sj
 = 
Ê
->
v®ue
;

780 
pid_t
 
pid
;

783 ià(
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
) ;

786 ià(
sj
->
¡¬t_time
 && sj->¡¬t_tim> 
now
) ;

788 
sj
->
æags
 |ğ
SENTINEL_SCRIPT_RUNNING
;

789 
sj
->
¡¬t_time
 = 
	`m¡ime
();

790 
sj
->
»Œy_num
++;

791 
pid
 = 
	`fÜk
();

793 ià(
pid
 == -1) {

797 
	`£Áš–Ev’t
(
LL_WARNING
,"-süt-”rÜ",
NULL
,

798 "% %d %d", 
sj
->
¬gv
[0], 99, 0);

799 
sj
->
æags
 &ğ~
SENTINEL_SCRIPT_RUNNING
;

800 
sj
->
pid
 = 0;

801 } ià(
pid
 == 0) {

803 
	`execve
(
sj
->
¬gv
[0],sj->¬gv,
’vœÚ
);

805 
	`_ex™
(2);

807 
£Áš–
.
ruÂšg_süts
++;

808 
sj
->
pid
 =…id;

809 
	`£Áš–Ev’t
(
LL_DEBUG
,"+süt-chd",
NULL
,"%ld",()
pid
);

812 
	}
}

821 
m¡ime_t
 
	$£Áš–SütR‘ryD–ay
(
»Œy_num
) {

822 
m¡ime_t
 
d–ay
 = 
SENTINEL_SCRIPT_RETRY_DELAY
;

824 
»Œy_num
-- > 1è
d–ay
 *= 2;

825  
d–ay
;

826 
	}
}

832 
	$£Áš–CŞËùT”mš©edSüts
() {

833 
¡©loc
;

834 
pid_t
 
pid
;

836 (
pid
 = 
	`wa™3
(&
¡©loc
,
WNOHANG
,
NULL
)) > 0) {

837 
ex™code
 = 
	`WEXITSTATUS
(
¡©loc
);

838 
bysigÇl
 = 0;

839 
li¡Node
 *
Ê
;

840 
£Áš–SütJob
 *
sj
;

842 ià(
	`WIFSIGNALED
(
¡©loc
)è
bysigÇl
 = 
	`WTERMSIG
(statloc);

843 
	`£Áš–Ev’t
(
LL_DEBUG
,"-süt-chd",
NULL
,"%ld %d %d",

844 ()
pid
, 
ex™code
, 
bysigÇl
);

846 
Ê
 = 
	`£Áš–G‘SütLi¡NodeByPid
(
pid
);

847 ià(
Ê
 =ğ
NULL
) {

848 
	`£rv”Log
(
LL_WARNING
,"wa™3(è»tuºed‡…id (%ldèwÿn'ˆfšd iÀou¸süt executiÚ queue!", ()
pid
);

851 
sj
 = 
Ê
->
v®ue
;

856 ià((
bysigÇl
 || 
ex™code
 == 1) &&

857 
sj
->
»Œy_num
 !ğ
SENTINEL_SCRIPT_MAX_RETRY
)

859 
sj
->
æags
 &ğ~
SENTINEL_SCRIPT_RUNNING
;

860 
sj
->
pid
 = 0;

861 
sj
->
¡¬t_time
 = 
	`m¡ime
() +

862 
	`£Áš–SütR‘ryD–ay
(
sj
->
»Œy_num
);

866 ià(
bysigÇl
 || 
ex™code
 != 0) {

867 
	`£Áš–Ev’t
(
LL_WARNING
,"-süt-”rÜ",
NULL
,

868 "% %d %d", 
sj
->
¬gv
[0], 
bysigÇl
, 
ex™code
);

870 
	`li¡D–Node
(
£Áš–
.
süts_queue
,
Ê
);

871 
	`£Áš–R–—£SütJob
(
sj
);

873 
£Áš–
.
ruÂšg_süts
--;

875 
	}
}

879 
	$£Áš–KlTimedoutSüts
() {

880 
li¡Node
 *
Ê
;

881 
li¡I‹r
 
li
;

882 
m¡ime_t
 
now
 = 
	`m¡ime
();

884 
	`li¡Rewšd
(
£Áš–
.
süts_queue
,&
li
);

885 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

886 
£Áš–SütJob
 *
sj
 = 
Ê
->
v®ue
;

888 ià(
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
 &&

889 (
now
 - 
sj
->
¡¬t_time
è> 
SENTINEL_SCRIPT_MAX_RUNTIME
)

891 
	`£Áš–Ev’t
(
LL_WARNING
,"-süt-timeout",
NULL
,"%s %ld",

892 
sj
->
¬gv
[0], ()sj->
pid
);

893 
	`kl
(
sj
->
pid
,
SIGKILL
);

896 
	}
}

899 
	$£Áš–P’dšgSütsCommªd
(
ş›Á
 *
c
) {

900 
li¡Node
 *
Ê
;

901 
li¡I‹r
 
li
;

903 
	`addR•lyA¼ayL’
(
c
,
	`li¡L’gth
(
£Áš–
.
süts_queue
));

904 
	`li¡Rewšd
(
£Áš–
.
süts_queue
,&
li
);

905 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

906 
£Áš–SütJob
 *
sj
 = 
Ê
->
v®ue
;

907 
j
 = 0;

909 
	`addR•lyM­L’
(
c
,5);

911 
	`addR•lyBulkCSŒšg
(
c
,"argv");

912 
sj
->
¬gv
[
j
]) j++;

913 
	`addR•lyA¼ayL’
(
c
,
j
);

914 
j
 = 0;

915 
sj
->
¬gv
[
j
]è
	`addR•lyBulkCSŒšg
(
c
,sj->argv[j++]);

917 
	`addR•lyBulkCSŒšg
(
c
,"flags");

918 
	`addR•lyBulkCSŒšg
(
c
,

919 (
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
) ? "running" : "scheduled");

921 
	`addR•lyBulkCSŒšg
(
c
,"pid");

922 
	`addR•lyBulkLÚgLÚg
(
c
,
sj
->
pid
);

924 ià(
sj
->
æags
 & 
SENTINEL_SCRIPT_RUNNING
) {

925 
	`addR•lyBulkCSŒšg
(
c
,"run-time");

926 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
sj
->
¡¬t_time
);

928 
m¡ime_t
 
d–ay
 = 
sj
->
¡¬t_time
 ? (sj->¡¬t_time-
	`m¡ime
()) : 0;

929 ià(
d–ay
 < 0) delay = 0;

930 
	`addR•lyBulkCSŒšg
(
c
,"run-delay");

931 
	`addR•lyBulkLÚgLÚg
(
c
,
d–ay
);

934 
	`addR•lyBulkCSŒšg
(
c
,"retry-num");

935 
	`addR•lyBulkLÚgLÚg
(
c
,
sj
->
»Œy_num
);

937 
	}
}

951 
	$£Áš–C®lCl›ÁRecÚfSüt
(
£Áš–RedisIn¡ªû
 *
ma¡”
, 
rŞe
, *
¡©e
, 
£Áš–Addr
 *
äom
, s’tš–Add¸*
to
) {

952 
äompÜt
[32], 
tİÜt
[32];

954 ià(
ma¡”
->
ş›Á_»cÚfig_süt
 =ğ
NULL
) ;

955 
	`Î2¡ršg
(
äompÜt
,(äompÜt),
äom
->
pÜt
);

956 
	`Î2¡ršg
(
tİÜt
,ÑİÜt),
to
->
pÜt
);

957 
	`£Áš–ScheduËSütExecutiÚ
(
ma¡”
->
ş›Á_»cÚfig_süt
,

958 
ma¡”
->
Çme
,

959 (
rŞe
 =ğ
SENTINEL_LEADER
) ? "leader" : "observer",

960 
¡©e
, 
äom
->

, 
äompÜt
, 
to
->, 
tİÜt
, 
NULL
);

961 
	}
}

966 
š¡ªûLšk
 *
	$ü—‹In¡ªûLšk
() {

967 
š¡ªûLšk
 *
lšk
 = 
	`zm®loc
((*link));

969 
lšk
->
»fcouÁ
 = 1;

970 
lšk
->
discÚÃùed
 = 1;

971 
lšk
->
³ndšg_commªds
 = 0;

972 
lšk
->
cc
 = 
NULL
;

973 
lšk
->
pc
 = 
NULL
;

974 
lšk
->
cc_cÚn_time
 = 0;

975 
lšk
->
pc_cÚn_time
 = 0;

976 
lšk
->
Ï¡_»cÚn_time
 = 0;

977 
lšk
->
pc_Ï¡_aùiv™y
 = 0;

982 
lšk
->
aù_pšg_time
 = 
	`m¡ime
();

983 
lšk
->
Ï¡_pšg_time
 = 0;

984 
lšk
->
Ï¡_ava_time
 = 
	`m¡ime
();

985 
lšk
->
Ï¡_pÚg_time
 = 
	`m¡ime
();

986  
lšk
;

987 
	}
}

990 
	$š¡ªûLškClo£CÚÃùiÚ
(
š¡ªûLšk
 *
lšk
, 
»disAsyncCÚ‹xt
 *
c
) {

991 ià(
c
 =ğ
NULL
) ;

993 ià(
lšk
->
cc
 =ğ
c
) {

994 
lšk
->
cc
 = 
NULL
;

995 
lšk
->
³ndšg_commªds
 = 0;

997 ià(
lšk
->
pc
 =ğ
c
èlšk->pøğ
NULL
;

998 
c
->
d©a
 = 
NULL
;

999 
lšk
->
discÚÃùed
 = 1;

1000 
	`»disAsyncF»e
(
c
);

1001 
	}
}

1011 
š¡ªûLšk
 *
	$»Ëa£In¡ªûLšk
(
š¡ªûLšk
 *
lšk
, 
£Áš–RedisIn¡ªû
 *
ri
)

1013 
	`£rv”As£¹
(
lšk
->
»fcouÁ
 > 0);

1014 
lšk
->
»fcouÁ
--;

1015 ià(
lšk
->
»fcouÁ
 != 0) {

1016 ià(
ri
 &&„i->
lšk
->
cc
) {

1022 
»disC®lback
 *
cb
;

1023 
»disC®lbackLi¡
 *
ÿÎbacks
 = &
lšk
->
cc
->
»¶›s
;

1025 
cb
 = 
ÿÎbacks
->
h—d
;

1026 
cb
) {

1027 ià(
cb
->
´ivd©a
 =ğ
ri
) {

1028 
cb
->
â
 = 
£Áš–DisÿrdR•lyC®lback
;

1029 
cb
->
´ivd©a
 = 
NULL
;

1031 
cb
 = cb->
Ãxt
;

1034  
lšk
;

1037 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
cc
);

1038 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
pc
);

1039 
	`zä“
(
lšk
);

1040  
NULL
;

1041 
	}
}

1055 
	$£Áš–TryCÚÃùiÚSh¬šg
(
£Áš–RedisIn¡ªû
 *
ri
) {

1056 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_SENTINEL
);

1057 
diùI‹¿tÜ
 *
di
;

1058 
diùEÁry
 *
de
;

1060 ià(
ri
->
runid
 =ğ
NULL
è 
C_ERR
;

1061 ià(
ri
->
lšk
->
»fcouÁ
 > 1è 
C_ERR
;

1063 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

1064 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1065 
£Áš–RedisIn¡ªû
 *
ma¡”
 = 
	`diùG‘V®
(
de
), *
m©ch
;

1068 ià(
ma¡”
 =ğ
ri
->master) ;

1069 
m©ch
 = 
	`g‘S’tš–RedisIn¡ªûByAddrAndRunID
(
ma¡”
->
£Áš–s
,

1070 
NULL
,0,
ri
->
runid
);

1071 ià(
m©ch
 =ğ
NULL
) ;

1072 ià(
m©ch
 =ğ
ri
) ;

1076 
	`»Ëa£In¡ªûLšk
(
ri
->
lšk
,
NULL
);

1077 
ri
->
lšk
 = 
m©ch
->link;

1078 
m©ch
->
lšk
->
»fcouÁ
++;

1079  
C_OK
;

1081 
	`diùR–—£I‹¿tÜ
(
di
);

1082  
C_ERR
;

1083 
	}
}

1091 
	$£Áš–Upd©eS’tš–Add»ssInAÎMa¡”s
(
£Áš–RedisIn¡ªû
 *
ri
) {

1092 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_SENTINEL
);

1093 
diùI‹¿tÜ
 *
di
;

1094 
diùEÁry
 *
de
;

1095 
»cÚfigu»d
 = 0;

1097 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

1098 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1099 
£Áš–RedisIn¡ªû
 *
ma¡”
 = 
	`diùG‘V®
(
de
), *
m©ch
;

1100 
m©ch
 = 
	`g‘S’tš–RedisIn¡ªûByAddrAndRunID
(
ma¡”
->
£Áš–s
,

1101 
NULL
,0,
ri
->
runid
);

1104 ià(
m©ch
 =ğ
NULL
) ;

1107 ià(
m©ch
->
lšk
->
cc
 !ğ
NULL
)

1108 
	`š¡ªûLškClo£CÚÃùiÚ
(
m©ch
->
lšk
,m©ch->lšk->
cc
);

1109 ià(
m©ch
->
lšk
->
pc
 !ğ
NULL
)

1110 
	`š¡ªûLškClo£CÚÃùiÚ
(
m©ch
->
lšk
,m©ch->lšk->
pc
);

1112 ià(
m©ch
 =ğ
ri
) ;

1116 
	`»Ëa£S’tš–Addr
(
m©ch
->
addr
);

1117 
m©ch
->
addr
 = 
	`dupS’tš–Addr
(
ri
->addr);

1118 
»cÚfigu»d
++;

1120 
	`diùR–—£I‹¿tÜ
(
di
);

1121 ià(
»cÚfigu»d
)

1122 
	`£Áš–Ev’t
(
LL_NOTICE
,"+£Áš–-add»ss-upd©e", 
ri
,

1123 "%@ %d‡dd™iÚ® m©chšg in¡ªûs", 
»cÚfigu»d
);

1124  
»cÚfigu»d
;

1125 
	}
}

1133 
	$š¡ªûLškCÚÃùiÚE¼Ü
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
) {

1134 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

1135 
pubsub
;

1137 ià(!
lšk
) ;

1139 
pubsub
 = (
lšk
->
pc
 =ğ
c
);

1140 ià(
pubsub
)

1141 
lšk
->
pc
 = 
NULL
;

1143 
lšk
->
cc
 = 
NULL
;

1144 
lšk
->
discÚÃùed
 = 1;

1145 
	}
}

1149 
	$£Áš–LškE¡ablishedC®lback
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
, 
¡©us
) {

1150 ià(
¡©us
 !ğ
C_OK
è
	`š¡ªûLškCÚÃùiÚE¼Ü
(
c
);

1151 
	}
}

1153 
	$£Áš–DiscÚÃùC®lback
(cÚ¡ 
»disAsyncCÚ‹xt
 *
c
, 
¡©us
) {

1154 
	`UNUSED
(
¡©us
);

1155 
	`š¡ªûLškCÚÃùiÚE¼Ü
(
c
);

1156 
	}
}

1182 
£Áš–RedisIn¡ªû
 *
	$ü—‹S’tš–RedisIn¡ªû
(*
Çme
, 
æags
, *
ho¡Çme
, 
pÜt
, 
quÜum
, 
£Áš–RedisIn¡ªû
 *
ma¡”
) {

1183 
£Áš–RedisIn¡ªû
 *
ri
;

1184 
£Áš–Addr
 *
addr
;

1185 
diù
 *
bË
 = 
NULL
;

1186 
¦av’ame
[
NET_PEER_ID_LEN
], *
sd¢ame
;

1188 
	`£rv”As£¹
(
æags
 & (
SRI_MASTER
|
SRI_SLAVE
|
SRI_SENTINEL
));

1189 
	`£rv”As£¹
((
æags
 & 
SRI_MASTER
è|| 
ma¡”
 !ğ
NULL
);

1192 
addr
 = 
	`ü—‹S’tš–Addr
(
ho¡Çme
,
pÜt
);

1193 ià(
addr
 =ğ
NULL
)  NULL;

1196 ià(
æags
 & 
SRI_SLAVE
) {

1197 
	`ª‘FÜm©Addr
(
¦av’ame
, (¦av’ame), 
ho¡Çme
, 
pÜt
);

1198 
Çme
 = 
¦av’ame
;

1205 ià(
æags
 & 
SRI_MASTER
è
bË
 = 
£Áš–
.
ma¡”s
;

1206 ià(
æags
 & 
SRI_SLAVE
è
bË
 = 
ma¡”
->
¦aves
;

1207 ià(
æags
 & 
SRI_SENTINEL
è
bË
 = 
ma¡”
->
£Áš–s
;

1208 
sd¢ame
 = 
	`sd¢ew
(
Çme
);

1209 ià(
	`diùFšd
(
bË
,
sd¢ame
)) {

1210 
	`»Ëa£S’tš–Addr
(
addr
);

1211 
	`sdsä“
(
sd¢ame
);

1212 
”ºo
 = 
EBUSY
;

1213  
NULL
;

1217 
ri
 = 
	`zm®loc
((*ri));

1220 
ri
->
æags
 = flags;

1221 
ri
->
Çme
 = 
sd¢ame
;

1222 
ri
->
runid
 = 
NULL
;

1223 
ri
->
cÚfig_•och
 = 0;

1224 
ri
->
addr
 =‡ddr;

1225 
ri
->
lšk
 = 
	`ü—‹In¡ªûLšk
();

1226 
ri
->
Ï¡_pub_time
 = 
	`m¡ime
();

1227 
ri
->
Ï¡_h–lo_time
 = 
	`m¡ime
();

1228 
ri
->
Ï¡_ma¡”_down_»¶y_time
 = 
	`m¡ime
();

1229 
ri
->
s_down_sšû_time
 = 0;

1230 
ri
->
o_down_sšû_time
 = 0;

1231 
ri
->
down_aá”_³riod
 = 
ma¡”
 ? master->down_after_period :

1232 
SENTINEL_DEFAULT_DOWN_AFTER
;

1233 
ri
->
ma¡”_lšk_down_time
 = 0;

1234 
ri
->
auth_·ss
 = 
NULL
;

1235 
ri
->
auth_u£r
 = 
NULL
;

1236 
ri
->
¦ave_´iÜ™y
 = 
SENTINEL_DEFAULT_SLAVE_PRIORITY
;

1237 
ri
->
¦ave_»cÚf_£Á_time
 = 0;

1238 
ri
->
¦ave_ma¡”_ho¡
 = 
NULL
;

1239 
ri
->
¦ave_ma¡”_pÜt
 = 0;

1240 
ri
->
¦ave_ma¡”_lšk_¡©us
 = 
SENTINEL_MASTER_LINK_STATUS_DOWN
;

1241 
ri
->
¦ave_»¶_off£t
 = 0;

1242 
ri
->
£Áš–s
 = 
	`diùC»©e
(&
š¡ªûsDiùTy³
,
NULL
);

1243 
ri
->
quÜum
 = quorum;

1244 
ri
->
·¿Î–_syncs
 = 
SENTINEL_DEFAULT_PARALLEL_SYNCS
;

1245 
ri
->
ma¡”
 = master;

1246 
ri
->
¦aves
 = 
	`diùC»©e
(&
š¡ªûsDiùTy³
,
NULL
);

1247 
ri
->
šfo_»äesh
 = 0;

1248 
ri
->
»Çmed_commªds
 = 
	`diùC»©e
(&
»ÇmedCommªdsDiùTy³
,
NULL
);

1251 
ri
->
Ëad”
 = 
NULL
;

1252 
ri
->
Ëad”_•och
 = 0;

1253 
ri
->
çov”_•och
 = 0;

1254 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_NONE
;

1255 
ri
->
çov”_¡©e_chªge_time
 = 0;

1256 
ri
->
çov”_¡¬t_time
 = 0;

1257 
ri
->
çov”_timeout
 = 
SENTINEL_DEFAULT_FAILOVER_TIMEOUT
;

1258 
ri
->
çov”_d–ay_logged
 = 0;

1259 
ri
->
´omÙed_¦ave
 = 
NULL
;

1260 
ri
->
nÙifiÿtiÚ_süt
 = 
NULL
;

1261 
ri
->
ş›Á_»cÚfig_süt
 = 
NULL
;

1262 
ri
->
šfo
 = 
NULL
;

1265 
ri
->
rŞe_»pÜ‹d
 =„i->
æags
 & (
SRI_MASTER
|
SRI_SLAVE
);

1266 
ri
->
rŞe_»pÜ‹d_time
 = 
	`m¡ime
();

1267 
ri
->
¦ave_cÚf_chªge_time
 = 
	`m¡ime
();

1270 
	`diùAdd
(
bË
, 
ri
->
Çme
,„i);

1271  
ri
;

1272 
	}
}

1278 
	$»Ëa£S’tš–RedisIn¡ªû
(
£Áš–RedisIn¡ªû
 *
ri
) {

1280 
	`diùR–—£
(
ri
->
£Áš–s
);

1281 
	`diùR–—£
(
ri
->
¦aves
);

1284 
	`»Ëa£In¡ªûLšk
(
ri
->
lšk
,ri);

1287 
	`sdsä“
(
ri
->
Çme
);

1288 
	`sdsä“
(
ri
->
runid
);

1289 
	`sdsä“
(
ri
->
nÙifiÿtiÚ_süt
);

1290 
	`sdsä“
(
ri
->
ş›Á_»cÚfig_süt
);

1291 
	`sdsä“
(
ri
->
¦ave_ma¡”_ho¡
);

1292 
	`sdsä“
(
ri
->
Ëad”
);

1293 
	`sdsä“
(
ri
->
auth_·ss
);

1294 
	`sdsä“
(
ri
->
auth_u£r
);

1295 
	`sdsä“
(
ri
->
šfo
);

1296 
	`»Ëa£S’tš–Addr
(
ri
->
addr
);

1297 
	`diùR–—£
(
ri
->
»Çmed_commªds
);

1300 ià((
ri
->
æags
 & 
SRI_SLAVE
è&& (ri->æag & 
SRI_PROMOTED
è&&„i->
ma¡”
)

1301 
ri
->
ma¡”
->
´omÙed_¦ave
 = 
NULL
;

1303 
	`zä“
(
ri
);

1304 
	}
}

1307 
£Áš–RedisIn¡ªû
 *
	$£Áš–RedisIn¡ªûLookupSÏve
(

1308 
£Áš–RedisIn¡ªû
 *
ri
, *

, 
pÜt
)

1310 
sds
 
key
;

1311 
£Áš–RedisIn¡ªû
 *
¦ave
;

1312 
buf
[
NET_PEER_ID_LEN
];

1314 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_MASTER
);

1315 
	`ª‘FÜm©Addr
(
buf
,(buf),

,
pÜt
);

1316 
key
 = 
	`sd¢ew
(
buf
);

1317 
¦ave
 = 
	`diùF‘chV®ue
(
ri
->
¦aves
,
key
);

1318 
	`sdsä“
(
key
);

1319  
¦ave
;

1320 
	}
}

1323 cÚ¡ *
	$£Áš–RedisIn¡ªûTy³SŒ
(
£Áš–RedisIn¡ªû
 *
ri
) {

1324 ià(
ri
->
æags
 & 
SRI_MASTER
)  "master";

1325 ià(
ri
->
æags
 & 
SRI_SLAVE
)  "slave";

1326 ià(
ri
->
æags
 & 
SRI_SENTINEL
)  "sentinel";

1328 
	}
}

1341 
	$»moveM©chšgS’tš–FromMa¡”
(
£Áš–RedisIn¡ªû
 *
ma¡”
, *
runid
) {

1342 
diùI‹¿tÜ
 *
di
;

1343 
diùEÁry
 *
de
;

1344 
»moved
 = 0;

1346 ià(
runid
 =ğ
NULL
)  0;

1348 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
ma¡”
->
£Áš–s
);

1349 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1350 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1352 ià(
ri
->
runid
 && 
	`¡rcmp
(ri->runid,runid) == 0) {

1353 
	`diùD–‘e
(
ma¡”
->
£Áš–s
,
ri
->
Çme
);

1354 
»moved
++;

1357 
	`diùR–—£I‹¿tÜ
(
di
);

1358  
»moved
;

1359 
	}
}

1367 
£Áš–RedisIn¡ªû
 *
	$g‘S’tš–RedisIn¡ªûByAddrAndRunID
(
diù
 *
š¡ªûs
, *

, 
pÜt
, *
runid
) {

1368 
diùI‹¿tÜ
 *
di
;

1369 
diùEÁry
 *
de
;

1370 
£Áš–RedisIn¡ªû
 *
š¡ªû
 = 
NULL
;

1372 
	`£rv”As£¹
(

 || 
runid
);

1373 
di
 = 
	`diùG‘I‹¿tÜ
(
š¡ªûs
);

1374 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1375 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1377 ià(
runid
 && !
ri
->runid) ;

1378 ià((
runid
 =ğ
NULL
 || 
	`¡rcmp
(
ri
->runid,„unid) == 0) &&

1379 (

 =ğ
NULL
 || (
	`¡rcmp
(
ri
->
addr
->ip, ip) == 0 &&

1380 
ri
->
addr
->
pÜt
 ==…ort)))

1382 
š¡ªû
 = 
ri
;

1386 
	`diùR–—£I‹¿tÜ
(
di
);

1387  
š¡ªû
;

1388 
	}
}

1391 
£Áš–RedisIn¡ªû
 *
	$£Áš–G‘Ma¡”ByName
(*
Çme
) {

1392 
£Áš–RedisIn¡ªû
 *
ri
;

1393 
sds
 
sd¢ame
 = 
	`sd¢ew
(
Çme
);

1395 
ri
 = 
	`diùF‘chV®ue
(
£Áš–
.
ma¡”s
,
sd¢ame
);

1396 
	`sdsä“
(
sd¢ame
);

1397  
ri
;

1398 
	}
}

1401 
	$£Áš–AddFÏgsToDiùOfRedisIn¡ªûs
(
diù
 *
š¡ªûs
, 
æags
) {

1402 
diùI‹¿tÜ
 *
di
;

1403 
diùEÁry
 *
de
;

1405 
di
 = 
	`diùG‘I‹¿tÜ
(
š¡ªûs
);

1406 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1407 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1408 
ri
->
æags
 |= flags;

1410 
	`diùR–—£I‹¿tÜ
(
di
);

1411 
	}
}

1415 
	$£Áš–D–FÏgsToDiùOfRedisIn¡ªûs
(
diù
 *
š¡ªûs
, 
æags
) {

1416 
diùI‹¿tÜ
 *
di
;

1417 
diùEÁry
 *
de
;

1419 
di
 = 
	`diùG‘I‹¿tÜ
(
š¡ªûs
);

1420 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1421 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1422 
ri
->
æags
 &= ~flags;

1424 
	`diùR–—£I‹¿tÜ
(
di
);

1425 
	}
}

1438 
	#SENTINEL_RESET_NO_SENTINELS
 (1<<0)

	)

1439 
	$£Áš–Re£tMa¡”
(
£Áš–RedisIn¡ªû
 *
ri
, 
æags
) {

1440 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_MASTER
);

1441 
	`diùR–—£
(
ri
->
¦aves
);

1442 
ri
->
¦aves
 = 
	`diùC»©e
(&
š¡ªûsDiùTy³
,
NULL
);

1443 ià(!(
æags
 & 
SENTINEL_RESET_NO_SENTINELS
)) {

1444 
	`diùR–—£
(
ri
->
£Áš–s
);

1445 
ri
->
£Áš–s
 = 
	`diùC»©e
(&
š¡ªûsDiùTy³
,
NULL
);

1447 
	`š¡ªûLškClo£CÚÃùiÚ
(
ri
->
lšk
,ri->lšk->
cc
);

1448 
	`š¡ªûLškClo£CÚÃùiÚ
(
ri
->
lšk
,ri->lšk->
pc
);

1449 
ri
->
æags
 &ğ
SRI_MASTER
;

1450 ià(
ri
->
Ëad”
) {

1451 
	`sdsä“
(
ri
->
Ëad”
);

1452 
ri
->
Ëad”
 = 
NULL
;

1454 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_NONE
;

1455 
ri
->
çov”_¡©e_chªge_time
 = 0;

1456 
ri
->
çov”_¡¬t_time
 = 0;

1457 
ri
->
´omÙed_¦ave
 = 
NULL
;

1458 
	`sdsä“
(
ri
->
runid
);

1459 
	`sdsä“
(
ri
->
¦ave_ma¡”_ho¡
);

1460 
ri
->
runid
 = 
NULL
;

1461 
ri
->
¦ave_ma¡”_ho¡
 = 
NULL
;

1462 
ri
->
lšk
->
aù_pšg_time
 = 
	`m¡ime
();

1463 
ri
->
lšk
->
Ï¡_pšg_time
 = 0;

1464 
ri
->
lšk
->
Ï¡_ava_time
 = 
	`m¡ime
();

1465 
ri
->
lšk
->
Ï¡_pÚg_time
 = 
	`m¡ime
();

1466 
ri
->
rŞe_»pÜ‹d_time
 = 
	`m¡ime
();

1467 
ri
->
rŞe_»pÜ‹d
 = 
SRI_MASTER
;

1468 ià(
æags
 & 
SENTINEL_GENERATE_EVENT
)

1469 
	`£Áš–Ev’t
(
LL_WARNING
,"+»£t-ma¡”",
ri
,"%@");

1470 
	}
}

1474 
	$£Áš–Re£tMa¡”sByP©‹º
(*
·‰”n
, 
æags
) {

1475 
diùI‹¿tÜ
 *
di
;

1476 
diùEÁry
 *
de
;

1477 
»£t
 = 0;

1479 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

1480 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1481 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1483 ià(
ri
->
Çme
) {

1484 ià(
	`¡ršgm©ch
(
·‰”n
,
ri
->
Çme
,0)) {

1485 
	`£Áš–Re£tMa¡”
(
ri
,
æags
);

1486 
»£t
++;

1490 
	`diùR–—£I‹¿tÜ
(
di
);

1491  
»£t
;

1492 
	}
}

1501 
	$£Áš–Re£tMa¡”AndChªgeAdd»ss
(
£Áš–RedisIn¡ªû
 *
ma¡”
, *

, 
pÜt
) {

1502 
£Áš–Addr
 *
Şdaddr
, *
Ãwaddr
;

1503 
£Áš–Addr
 **
¦aves
 = 
NULL
;

1504 
num¦aves
 = 0, 
j
;

1505 
diùI‹¿tÜ
 *
di
;

1506 
diùEÁry
 *
de
;

1508 
Ãwaddr
 = 
	`ü—‹S’tš–Addr
(

,
pÜt
);

1509 ià(
Ãwaddr
 =ğ
NULL
è 
C_ERR
;

1513 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

1514 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1515 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

1517 ià(
	`£Áš–AddrIsEqu®
(
¦ave
->
addr
,
Ãwaddr
)) ;

1518 
¦aves
 = 
	`z»®loc
(¦aves,(
£Áš–Addr
*)*(
num¦aves
+1));

1519 
¦aves
[
num¦aves
++] = 
	`ü—‹S’tš–Addr
(
¦ave
->
addr
->

,

1520 
¦ave
->
addr
->
pÜt
);

1522 
	`diùR–—£I‹¿tÜ
(
di
);

1527 ià(!
	`£Áš–AddrIsEqu®
(
Ãwaddr
,
ma¡”
->
addr
)) {

1528 
¦aves
 = 
	`z»®loc
(¦aves,(
£Áš–Addr
*)*(
num¦aves
+1));

1529 
¦aves
[
num¦aves
++] = 
	`ü—‹S’tš–Addr
(
ma¡”
->
addr
->

,

1530 
ma¡”
->
addr
->
pÜt
);

1534 
	`£Áš–Re£tMa¡”
(
ma¡”
,
SENTINEL_RESET_NO_SENTINELS
);

1535 
Şdaddr
 = 
ma¡”
->
addr
;

1536 
ma¡”
->
addr
 = 
Ãwaddr
;

1537 
ma¡”
->
o_down_sšû_time
 = 0;

1538 
ma¡”
->
s_down_sšû_time
 = 0;

1541 
j
 = 0; j < 
num¦aves
; j++) {

1542 
£Áš–RedisIn¡ªû
 *
¦ave
;

1544 
¦ave
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
NULL
,
SRI_SLAVE
,
¦aves
[
j
]->

,

1545 
¦aves
[
j
]->
pÜt
, 
ma¡”
->
quÜum
, master);

1546 
	`»Ëa£S’tš–Addr
(
¦aves
[
j
]);

1547 ià(
¦ave
è
	`£Áš–Ev’t
(
LL_NOTICE
,"+slave",slave,"%@");

1549 
	`zä“
(
¦aves
);

1553 
	`»Ëa£S’tš–Addr
(
Şdaddr
);

1554 
	`£Áš–FlushCÚfig
();

1555  
C_OK
;

1556 
	}
}

1560 
	$£Áš–RedisIn¡ªûNoDownFÜ
(
£Áš–RedisIn¡ªû
 *
ri
, 
m¡ime_t
 
ms
) {

1561 
m¡ime_t
 
mo¡_»ûÁ
;

1563 
mo¡_»ûÁ
 = 
ri
->
s_down_sšû_time
;

1564 ià(
ri
->
o_down_sšû_time
 > 
mo¡_»ûÁ
)

1565 
mo¡_»ûÁ
 = 
ri
->
o_down_sšû_time
;

1566  
mo¡_»ûÁ
 =ğ0 || (
	`m¡ime
(è- mo¡_»ûÁè> 
ms
;

1567 
	}
}

1571 
£Áš–Addr
 *
	$£Áš–G‘Cu¼’tMa¡”Add»ss
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

1577 ià((
ma¡”
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
) &&

1578 
ma¡”
->
´omÙed_¦ave
 &&

1579 
ma¡”
->
çov”_¡©e
 >ğ
SENTINEL_FAILOVER_STATE_RECONF_SLAVES
)

1581  
ma¡”
->
´omÙed_¦ave
->
addr
;

1583  
ma¡”
->
addr
;

1585 
	}
}

1589 
	$£Áš–Prİag©eDownAá”P”iod
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

1590 
diùI‹¿tÜ
 *
di
;

1591 
diùEÁry
 *
de
;

1592 
j
;

1593 
diù
 *
d
[] = {
ma¡”
->
¦aves
, ma¡”->
£Áš–s
, 
NULL
};

1595 
j
 = 0; 
d
[j]; j++) {

1596 
di
 = 
	`diùG‘I‹¿tÜ
(
d
[
j
]);

1597 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1598 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

1599 
ri
->
down_aá”_³riod
 = 
ma¡”
->down_after_period;

1601 
	`diùR–—£I‹¿tÜ
(
di
);

1603 
	}
}

1605 *
	$£Áš–G‘In¡ªûTy³SŒšg
(
£Áš–RedisIn¡ªû
 *
ri
) {

1606 ià(
ri
->
æags
 & 
SRI_MASTER
)  "master";

1607 ià(
ri
->
æags
 & 
SRI_SLAVE
)  "slave";

1608 ià(
ri
->
æags
 & 
SRI_SENTINEL
)  "sentinel";

1610 
	}
}

1619 *
	$£Áš–In¡ªûM­Commªd
(
£Áš–RedisIn¡ªû
 *
ri
, *
commªd
) {

1620 
sds
 
sc
 = 
	`sd¢ew
(
commªd
);

1621 ià(
ri
->
ma¡”
)„i =„i->master;

1622 *
»tv®
 = 
	`diùF‘chV®ue
(
ri
->
»Çmed_commªds
, 
sc
);

1623 
	`sdsä“
(
sc
);

1624  
»tv®
 ?„‘v® : 
commªd
;

1625 
	}
}

1628 *
	$£Áš–HªdËCÚfigu¿tiÚ
(**
¬gv
, 
¬gc
) {

1629 
£Áš–RedisIn¡ªû
 *
ri
;

1631 ià(!
	`¡rÿ£cmp
(
¬gv
[0],"mÚ™Ü"è&& 
¬gc
 == 5) {

1633 
quÜum
 = 
	`©oi
(
¬gv
[4]);

1635 ià(
quÜum
 <= 0)  "Quorum must be 1 or greater.";

1636 ià(
	`ü—‹S’tš–RedisIn¡ªû
(
¬gv
[1],
SRI_MASTER
,argv[2],

1637 
	`©oi
(
¬gv
[3]),
quÜum
,
NULL
) == NULL)

1639 
”ºo
) {

1640 
EBUSY
:  "Duplicated master‚ame.";

1641 
ENOENT
:  "Can't„esolve master instance hostname.";

1642 
EINVAL
:  "Invalid…ort‚umber";

1645 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"down-aá”-mli£cÚds"è&& 
¬gc
 == 3) {

1647 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1648 ià(!
ri
)  "No such master with specified‚ame.";

1649 
ri
->
down_aá”_³riod
 = 
	`©oi
(
¬gv
[2]);

1650 ià(
ri
->
down_aá”_³riod
 <= 0)

1652 
	`£Áš–Prİag©eDownAá”P”iod
(
ri
);

1653 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"çov”-timeout"è&& 
¬gc
 == 3) {

1655 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1656 ià(!
ri
)  "No such master with specified‚ame.";

1657 
ri
->
çov”_timeout
 = 
	`©oi
(
¬gv
[2]);

1658 ià(
ri
->
çov”_timeout
 <= 0)

1660 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"·¿Î–-syncs"è&& 
¬gc
 == 3) {

1662 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1663 ià(!
ri
)  "No such master with specified‚ame.";

1664 
ri
->
·¿Î–_syncs
 = 
	`©oi
(
¬gv
[2]);

1665 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"nÙifiÿtiÚ-süt"è&& 
¬gc
 == 3) {

1667 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1668 ià(!
ri
)  "No such master with specified‚ame.";

1669 ià(
	`acûss
(
¬gv
[2],
X_OK
) == -1)

1671 
ri
->
nÙifiÿtiÚ_süt
 = 
	`sd¢ew
(
¬gv
[2]);

1672 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"ş›Á-»cÚfig-süt"è&& 
¬gc
 == 3) {

1674 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1675 ià(!
ri
)  "No such master with specified‚ame.";

1676 ià(
	`acûss
(
¬gv
[2],
X_OK
) == -1)

1679 
ri
->
ş›Á_»cÚfig_süt
 = 
	`sd¢ew
(
¬gv
[2]);

1680 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"auth-·ss"è&& 
¬gc
 == 3) {

1682 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1683 ià(!
ri
)  "No such master with specified‚ame.";

1684 
ri
->
auth_·ss
 = 
	`sd¢ew
(
¬gv
[2]);

1685 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"auth-u£r"è&& 
¬gc
 == 3) {

1687 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1688 ià(!
ri
)  "No such master with specified‚ame.";

1689 
ri
->
auth_u£r
 = 
	`sd¢ew
(
¬gv
[2]);

1690 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"cu¼’t-•och"è&& 
¬gc
 == 2) {

1692 
cu¼’t_•och
 = 
	`¡¹ouÎ
(
¬gv
[1],
NULL
,10);

1693 ià(
cu¼’t_•och
 > 
£Áš–
.current_epoch)

1694 
£Áš–
.
cu¼’t_•och
 = current_epoch;

1695 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"myid"è&& 
¬gc
 == 2) {

1696 ià(
	`¡¾’
(
¬gv
[1]è!ğ
CONFIG_RUN_ID_SIZE
)

1698 
	`memıy
(
£Áš–
.
myid
,
¬gv
[1],
CONFIG_RUN_ID_SIZE
);

1699 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"cÚfig-•och"è&& 
¬gc
 == 3) {

1701 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1702 ià(!
ri
)  "No such master with specified‚ame.";

1703 
ri
->
cÚfig_•och
 = 
	`¡¹ouÎ
(
¬gv
[2],
NULL
,10);

1707 ià(
ri
->
cÚfig_•och
 > 
£Áš–
.
cu¼’t_•och
)

1708 
£Áš–
.
cu¼’t_•och
 = 
ri
->
cÚfig_•och
;

1709 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"Ëad”-•och"è&& 
¬gc
 == 3) {

1711 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1712 ià(!
ri
)  "No such master with specified‚ame.";

1713 
ri
->
Ëad”_•och
 = 
	`¡¹ouÎ
(
¬gv
[2],
NULL
,10);

1714 } ià((!
	`¡rÿ£cmp
(
¬gv
[0],"known-slave") ||

1715 !
	`¡rÿ£cmp
(
¬gv
[0],"known-»¶iÿ")è&& 
¬gc
 == 4)

1717 
£Áš–RedisIn¡ªû
 *
¦ave
;

1720 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1721 ià(!
ri
)  "No such master with specified‚ame.";

1722 ià((
¦ave
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
NULL
,
SRI_SLAVE
,
¬gv
[2],

1723 
	`©oi
(
¬gv
[3]), 
ri
->
quÜum
,„i)è=ğ
NULL
)

1727 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"known-sentinel") &&

1728 (
¬gc
 == 4 ||‡rgc == 5)) {

1729 
£Áš–RedisIn¡ªû
 *
si
;

1731 ià(
¬gc
 == 5) {

1733 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1734 ià(!
ri
)  "No such master with specified‚ame.";

1735 ià((
si
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
¬gv
[4],
SRI_SENTINEL
,argv[2],

1736 
	`©oi
(
¬gv
[3]), 
ri
->
quÜum
,„i)è=ğ
NULL
)

1740 
si
->
runid
 = 
	`sd¢ew
(
¬gv
[4]);

1741 
	`£Áš–TryCÚÃùiÚSh¬šg
(
si
);

1743 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"»Çme-commªd"è&& 
¬gc
 == 4) {

1745 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
¬gv
[1]);

1746 ià(!
ri
)  "No such master with specified‚ame.";

1747 
sds
 
Şdcmd
 = 
	`sd¢ew
(
¬gv
[2]);

1748 
sds
 
Ãwcmd
 = 
	`sd¢ew
(
¬gv
[3]);

1749 ià(
	`diùAdd
(
ri
->
»Çmed_commªds
,
Şdcmd
,
Ãwcmd
è!ğ
DICT_OK
) {

1750 
	`sdsä“
(
Şdcmd
);

1751 
	`sdsä“
(
Ãwcmd
);

1754 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"ªnounû-"è&& 
¬gc
 == 2) {

1756 ià(
	`¡¾’
(
¬gv
[1]))

1757 
£Áš–
.
ªnounû_
 = 
	`sd¢ew
(
¬gv
[1]);

1758 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"ªnounû-pÜt"è&& 
¬gc
 == 2) {

1760 
£Áš–
.
ªnounû_pÜt
 = 
	`©oi
(
¬gv
[1]);

1761 } ià(!
	`¡rÿ£cmp
(
¬gv
[0],"d’y-süts-»cÚfig"è&& 
¬gc
 == 2) {

1763 ià((
£Áš–
.
d’y_süts_»cÚfig
 = 
	`ye¢Ùoi
(
¬gv
[1])) == -1) {

1770  
NULL
;

1771 
	}
}

1778 
	$»wr™eCÚfigS’tš–O±iÚ
(
»wr™eCÚfigS‹
 *
¡©e
) {

1779 
diùI‹¿tÜ
 *
di
, *
di2
;

1780 
diùEÁry
 *
de
;

1781 
sds
 
lše
;

1784 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(), "£Áš– myid %s", 
£Áš–
.
myid
);

1785 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1788 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(), "sentinel deny-scripts-reconfig %s",

1789 
£Áš–
.
d’y_süts_»cÚfig
 ? "yes" : "no");

1790 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,

1791 
£Áš–
.
d’y_süts_»cÚfig
 !ğ
SENTINEL_DEFAULT_DENY_SCRIPTS_RECONFIG
);

1794 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

1795 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

1796 
£Áš–RedisIn¡ªû
 *
ma¡”
, *
ri
;

1797 
£Áš–Addr
 *
ma¡”_addr
;

1800 
ma¡”
 = 
	`diùG‘V®
(
de
);

1801 
ma¡”_addr
 = 
	`£Áš–G‘Cu¼’tMa¡”Add»ss
(
ma¡”
);

1802 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"sentinel monitor %s %s %d %d",

1803 
ma¡”
->
Çme
, 
ma¡”_addr
->

, ma¡”_addr->
pÜt
,

1804 
ma¡”
->
quÜum
);

1805 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1808 ià(
ma¡”
->
down_aá”_³riod
 !ğ
SENTINEL_DEFAULT_DOWN_AFTER
) {

1809 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1811 
ma¡”
->
Çme
, (èma¡”->
down_aá”_³riod
);

1812 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1816 ià(
ma¡”
->
çov”_timeout
 !ğ
SENTINEL_DEFAULT_FAILOVER_TIMEOUT
) {

1817 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1819 
ma¡”
->
Çme
, (èma¡”->
çov”_timeout
);

1820 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1824 ià(
ma¡”
->
·¿Î–_syncs
 !ğ
SENTINEL_DEFAULT_PARALLEL_SYNCS
) {

1825 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1827 
ma¡”
->
Çme
, ma¡”->
·¿Î–_syncs
);

1828 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1832 ià(
ma¡”
->
nÙifiÿtiÚ_süt
) {

1833 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1835 
ma¡”
->
Çme
, ma¡”->
nÙifiÿtiÚ_süt
);

1836 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1840 ià(
ma¡”
->
ş›Á_»cÚfig_süt
) {

1841 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1843 
ma¡”
->
Çme
, ma¡”->
ş›Á_»cÚfig_süt
);

1844 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1848 ià(
ma¡”
->
auth_·ss
) {

1849 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1851 
ma¡”
->
Çme
, ma¡”->
auth_·ss
);

1852 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1855 ià(
ma¡”
->
auth_u£r
) {

1856 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1858 
ma¡”
->
Çme
, ma¡”->
auth_u£r
);

1859 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1863 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1865 
ma¡”
->
Çme
, (èma¡”->
cÚfig_•och
);

1866 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1869 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1871 
ma¡”
->
Çme
, (èma¡”->
Ëad”_•och
);

1872 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1875 
di2
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

1876 (
de
 = 
	`diùNext
(
di2
)è!ğ
NULL
) {

1877 
£Áš–Addr
 *
¦ave_addr
;

1879 
ri
 = 
	`diùG‘V®
(
de
);

1880 
¦ave_addr
 = 
ri
->
addr
;

1887 ià(
	`£Áš–AddrIsEqu®
(
¦ave_addr
,
ma¡”_addr
))

1888 
¦ave_addr
 = 
ma¡”
->
addr
;

1889 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1891 
ma¡”
->
Çme
, 
¦ave_addr
->

, sÏve_addr->
pÜt
);

1892 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1894 
	`diùR–—£I‹¿tÜ
(
di2
);

1897 
di2
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
£Áš–s
);

1898 (
de
 = 
	`diùNext
(
di2
)è!ğ
NULL
) {

1899 
ri
 = 
	`diùG‘V®
(
de
);

1900 ià(
ri
->
runid
 =ğ
NULL
) ;

1901 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1903 
ma¡”
->
Çme
, 
ri
->
addr
->

,„i->addr->
pÜt
,„i->
runid
);

1904 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1906 
	`diùR–—£I‹¿tÜ
(
di2
);

1909 
di2
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
»Çmed_commªds
);

1910 (
de
 = 
	`diùNext
(
di2
)è!ğ
NULL
) {

1911 
sds
 
ŞdÇme
 = 
	`diùG‘Key
(
de
);

1912 
sds
 
ÃwÇme
 = 
	`diùG‘V®
(
de
);

1913 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1915 
ma¡”
->
Çme
, 
ŞdÇme
, 
ÃwÇme
);

1916 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1918 
	`diùR–—£I‹¿tÜ
(
di2
);

1922 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),

1923 "£Áš– cu¼’t-•och %Îu", (è
£Áš–
.
cu¼’t_•och
);

1924 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1927 ià(
£Áš–
.
ªnounû_
) {

1928 
lše
 = 
	`sd¢ew
("sentinel‡nnounce-ip ");

1929 
lše
 = 
	`sdsÿŒ•r
Öše, 
£Áš–
.
ªnounû_
, 
	`sd¦’
(sentinel.announce_ip));

1930 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1934 ià(
£Áš–
.
ªnounû_pÜt
) {

1935 
lše
 = 
	`sdsÿrštf
(
	`sd£m±y
(),"sentinel‡nnounce-port %d",

1936 
£Áš–
.
ªnounû_pÜt
);

1937 
	`»wr™eCÚfigRewr™eLše
(
¡©e
,"£Áš–",
lše
,1);

1940 
	`diùR–—£I‹¿tÜ
(
di
);

1941 
	}
}

1950 
	$£Áš–FlushCÚfig
() {

1951 
fd
 = -1;

1952 
§ved_hz
 = 
£rv”
.
hz
;

1953 
»wr™e_¡©us
;

1955 
£rv”
.
hz
 = 
CONFIG_DEFAULT_HZ
;

1956 
»wr™e_¡©us
 = 
	`»wr™eCÚfig
(
£rv”
.
cÚfigfe
);

1957 
£rv”
.
hz
 = 
§ved_hz
;

1959 ià(
»wr™e_¡©us
 =ğ-1è
w”r
;

1960 ià((
fd
 = 
	`İ’
(
£rv”
.
cÚfigfe
,
O_RDONLY
)è=ğ-1è
w”r
;

1961 ià(
	`fsync
(
fd
è=ğ-1è
w”r
;

1962 ià(
	`şo£
(
fd
è=ğ
EOF
è
w”r
;

1965 
w”r
:

1966 ià(
fd
 !ğ-1è
	`şo£
(fd);

1967 
	`£rv”Log
(
LL_WARNING
,"WARNING: S’tš– wa nÙ‡bËØ§vthÃw cÚfigu¿tiÚ oÀdisk!!!: %s", 
	`¡»¼Ü
(
”ºo
));

1968 
	}
}

1984 
	$£Áš–S’dAuthIfN“ded
(
£Áš–RedisIn¡ªû
 *
ri
, 
»disAsyncCÚ‹xt
 *
c
) {

1985 *
auth_·ss
 = 
NULL
;

1986 *
auth_u£r
 = 
NULL
;

1988 ià(
ri
->
æags
 & 
SRI_MASTER
) {

1989 
auth_·ss
 = 
ri
->auth_pass;

1990 
auth_u£r
 = 
ri
->auth_user;

1991 } ià(
ri
->
æags
 & 
SRI_SLAVE
) {

1992 
auth_·ss
 = 
ri
->
ma¡”
->auth_pass;

1993 
auth_u£r
 = 
ri
->
ma¡”
->auth_user;

1994 } ià(
ri
->
æags
 & 
SRI_SENTINEL
) {

1995 
auth_·ss
 = 
£rv”
.
»quœ•ass
;

1996 
auth_u£r
 = 
NULL
;

1999 ià(
auth_·ss
 && 
auth_u£r
 =ğ
NULL
) {

2000 ià(
	`»disAsyncCommªd
(
c
, 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s %s",

2001 
	`£Áš–In¡ªûM­Commªd
(
ri
,"AUTH"),

2002 
auth_·ss
è=ğ
C_OK
è
ri
->
lšk
->
³ndšg_commªds
++;

2003 } ià(
auth_·ss
 && 
auth_u£r
) {

2006 ià(
	`»disAsyncCommªd
(
c
, 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s %s %s",

2007 
	`£Áš–In¡ªûM­Commªd
(
ri
,"AUTH"),

2008 
auth_u£r
, 
auth_·ss
è=ğ
C_OK
è
ri
->
lšk
->
³ndšg_commªds
++;

2010 
	}
}

2018 
	$£Áš–S‘Cl›ÁName
(
£Áš–RedisIn¡ªû
 *
ri
, 
»disAsyncCÚ‹xt
 *
c
, *
ty³
) {

2019 
Çme
[64];

2021 
	`¢´štf
(
Çme
,Òame),"£Áš–-%.8s-%s",
£Áš–
.
myid
,
ty³
);

2022 ià(
	`»disAsyncCommªd
(
c
, 
£Áš–DisÿrdR•lyC®lback
, 
ri
,

2024 
	`£Áš–In¡ªûM­Commªd
(
ri
,"CLIENT"),

2025 
Çme
è=ğ
C_OK
)

2027 
ri
->
lšk
->
³ndšg_commªds
++;

2029 
	}
}

2031 
	$š¡ªûLškNegÙŸ‹TLS
(
»disAsyncCÚ‹xt
 *
cÚ‹xt
) {

2032 #iâdeà
USE_OPENSSL


2033 (è
cÚ‹xt
;

2035 ià(!
»dis_s_ùx
è 
C_ERR
;

2036 
SSL
 *
s¦
 = 
	`SSL_Ãw
(
»dis_s_ùx
);

2037 ià(!
s¦
è 
C_ERR
;

2039 ià(
	`»disIn™Ÿ‹SSL
(&
cÚ‹xt
->
c
, 
s¦
è=ğ
REDIS_ERR
è 
C_ERR
;

2041  
C_OK
;

2042 
	}
}

2047 
	$£Áš–RecÚÃùIn¡ªû
(
£Áš–RedisIn¡ªû
 *
ri
) {

2048 ià(
ri
->
lšk
->
discÚÃùed
 == 0) ;

2049 ià(
ri
->
addr
->
pÜt
 == 0) ;

2050 
š¡ªûLšk
 *
lšk
 = 
ri
->link;

2051 
m¡ime_t
 
now
 = 
	`m¡ime
();

2053 ià(
now
 - 
ri
->
lšk
->
Ï¡_»cÚn_time
 < 
SENTINEL_PING_PERIOD
) ;

2054 
ri
->
lšk
->
Ï¡_»cÚn_time
 = 
now
;

2057 ià(
lšk
->
cc
 =ğ
NULL
) {

2058 
lšk
->
cc
 = 
	`»disAsyncCÚÃùBšd
(
ri
->
addr
->

,ri->addr->
pÜt
,
NET_FIRST_BIND_ADDR
);

2059 ià(!
lšk
->
cc
->
”r
 && 
£rv”
.
s_»¶iÿtiÚ
 &&

2060 (
	`š¡ªûLškNegÙŸ‹TLS
(
lšk
->
cc
è=ğ
C_ERR
)) {

2061 
	`£Áš–Ev’t
(
LL_DEBUG
,"-cmd-lšk-»cÚÃùiÚ",
ri
,"%@ #Failedo initialize TLS");

2062 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
cc
);

2063 } ià(
lšk
->
cc
->
”r
) {

2064 
	`£Áš–Ev’t
(
LL_DEBUG
,"-cmd-lšk-»cÚÃùiÚ",
ri
,"%@ #%s",

2065 
lšk
->
cc
->
”r¡r
);

2066 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
cc
);

2068 
lšk
->
³ndšg_commªds
 = 0;

2069 
lšk
->
cc_cÚn_time
 = 
	`m¡ime
();

2070 
lšk
->
cc
->
d©a
 =†ink;

2071 
	`»disAeA‰ach
(
£rv”
.
–
,
lšk
->
cc
);

2072 
	`»disAsyncS‘CÚÃùC®lback
(
lšk
->
cc
,

2073 
£Áš–LškE¡ablishedC®lback
);

2074 
	`»disAsyncS‘DiscÚÃùC®lback
(
lšk
->
cc
,

2075 
£Áš–DiscÚÃùC®lback
);

2076 
	`£Áš–S’dAuthIfN“ded
(
ri
,
lšk
->
cc
);

2077 
	`£Áš–S‘Cl›ÁName
(
ri
,
lšk
->
cc
,"cmd");

2080 
	`£Áš–S’dPšg
(
ri
);

2084 ià((
ri
->
æags
 & (
SRI_MASTER
|
SRI_SLAVE
)è&& 
lšk
->
pc
 =ğ
NULL
) {

2085 
lšk
->
pc
 = 
	`»disAsyncCÚÃùBšd
(
ri
->
addr
->

,ri->addr->
pÜt
,
NET_FIRST_BIND_ADDR
);

2086 ià(!
lšk
->
pc
->
”r
 && 
£rv”
.
s_»¶iÿtiÚ
 &&

2087 (
	`š¡ªûLškNegÙŸ‹TLS
(
lšk
->
pc
è=ğ
C_ERR
)) {

2088 
	`£Áš–Ev’t
(
LL_DEBUG
,"-pubsub-lšk-»cÚÃùiÚ",
ri
,"%@ #Failedo initialize TLS");

2089 } ià(
lšk
->
pc
->
”r
) {

2090 
	`£Áš–Ev’t
(
LL_DEBUG
,"-pubsub-lšk-»cÚÃùiÚ",
ri
,"%@ #%s",

2091 
lšk
->
pc
->
”r¡r
);

2092 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
pc
);

2094 
»tv®
;

2096 
lšk
->
pc_cÚn_time
 = 
	`m¡ime
();

2097 
lšk
->
pc
->
d©a
 =†ink;

2098 
	`»disAeA‰ach
(
£rv”
.
–
,
lšk
->
pc
);

2099 
	`»disAsyncS‘CÚÃùC®lback
(
lšk
->
pc
,

2100 
£Áš–LškE¡ablishedC®lback
);

2101 
	`»disAsyncS‘DiscÚÃùC®lback
(
lšk
->
pc
,

2102 
£Áš–DiscÚÃùC®lback
);

2103 
	`£Áš–S’dAuthIfN“ded
(
ri
,
lšk
->
pc
);

2104 
	`£Áš–S‘Cl›ÁName
(
ri
,
lšk
->
pc
,"pubsub");

2106 
»tv®
 = 
	`»disAsyncCommªd
(
lšk
->
pc
,

2107 
£Áš–ReûiveH–loMes§ges
, 
ri
, "%s %s",

2108 
	`£Áš–In¡ªûM­Commªd
(
ri
,"SUBSCRIBE"),

2109 
SENTINEL_HELLO_CHANNEL
);

2110 ià(
»tv®
 !ğ
C_OK
) {

2113 
	`š¡ªûLškClo£CÚÃùiÚ
(
lšk
,lšk->
pc
);

2120 ià(
lšk
->
cc
 && (
ri
->
æags
 & 
SRI_SENTINEL
 ||†šk->
pc
))

2121 
lšk
->
discÚÃùed
 = 0;

2122 
	}
}

2131 
	$£Áš–Ma¡”LooksSªe
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

2133 
ma¡”
->
æags
 & 
SRI_MASTER
 &&

2134 
ma¡”
->
rŞe_»pÜ‹d
 =ğ
SRI_MASTER
 &&

2135 (
ma¡”
->
æags
 & (
SRI_S_DOWN
|
SRI_O_DOWN
)) == 0 &&

2136 (
	`m¡ime
(è- 
ma¡”
->
šfo_»äesh
è< 
SENTINEL_INFO_PERIOD
*2;

2137 
	}
}

2140 
	$£Áš–ReäeshIn¡ªûInfo
(
£Áš–RedisIn¡ªû
 *
ri
, cÚ¡ *
šfo
) {

2141 
sds
 *
lšes
;

2142 
numlšes
, 
j
;

2143 
rŞe
 = 0;

2146 
	`sdsä“
(
ri
->
šfo
);

2147 
ri
->
šfo
 = 
	`sd¢ew
(info);

2151 
ri
->
ma¡”_lšk_down_time
 = 0;

2154 
lšes
 = 
	`sds¥l™Ën
(
šfo
,
	`¡¾’
(šfo),"\r\n",2,&
numlšes
);

2155 
j
 = 0; j < 
numlšes
; j++) {

2156 
£Áš–RedisIn¡ªû
 *
¦ave
;

2157 
sds
 
l
 = 
lšes
[
j
];

2160 ià(
	`sd¦’
(
l
è>ğ47 && !
	`memcmp
(l,"run_id:",7)) {

2161 ià(
ri
->
runid
 =ğ
NULL
) {

2162 
ri
->
runid
 = 
	`sd¢ewËn
(
l
+7,40);

2164 ià(
	`¡ºcmp
(
ri
->
runid
,
l
+7,40) != 0) {

2165 
	`£Áš–Ev’t
(
LL_NOTICE
,"+»boÙ",
ri
,"%@");

2166 
	`sdsä“
(
ri
->
runid
);

2167 
ri
->
runid
 = 
	`sd¢ewËn
(
l
+7,40);

2174 ià((
ri
->
æags
 & 
SRI_MASTER
) &&

2175 
	`sd¦’
(
l
) >= 7 &&

2176 !
	`memcmp
(
l
,"¦ave",5è&& 
	`isdig™
(l[5]))

2178 *

, *
pÜt
, *
’d
;

2180 ià(
	`¡r¡r
(
l
,"="è=ğ
NULL
) {

2182 

 = 
	`¡rchr
(
l
,':'); if (!ip) ;

2183 

++;

2184 
pÜt
 = 
	`¡rchr
(

,','); if (!port) ;

2185 *
pÜt
 = '\0';

2186 
pÜt
++;

2187 
’d
 = 
	`¡rchr
(
pÜt
,','); if (!end) ;

2188 *
’d
 = '\0';

2191 

 = 
	`¡r¡r
(
l
,"ip="); if (!ip) ;

2192 

 += 3;

2193 
pÜt
 = 
	`¡r¡r
(
l
,"port="); if (!port) ;

2194 
pÜt
 += 5;

2196 
’d
 = 
	`¡rchr
(

,','); if (end) *end = '\0';

2197 
’d
 = 
	`¡rchr
(
pÜt
,','); if (end) *end = '\0';

2202 ià(
	`£Áš–RedisIn¡ªûLookupSÏve
(
ri
,

,
	`©oi
(
pÜt
)è=ğ
NULL
) {

2203 ià((
¦ave
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
NULL
,
SRI_SLAVE
,

,

2204 
	`©oi
(
pÜt
), 
ri
->
quÜum
,„i)è!ğ
NULL
)

2206 
	`£Áš–Ev’t
(
LL_NOTICE
,"+¦ave",
¦ave
,"%@");

2207 
	`£Áš–FlushCÚfig
();

2213 ià(
	`sd¦’
(
l
) >= 32 &&

2214 !
	`memcmp
(
l
,"master_link_down_since_seconds",30))

2216 
ri
->
ma¡”_lšk_down_time
 = 
	`¡¹Şl
(
l
+31,
NULL
,10)*1000;

2220 ià(!
	`memcmp
(
l
,"rŞe:ma¡”",11)è
rŞe
 = 
SRI_MASTER
;

2221 ià(!
	`memcmp
(
l
,"rŞe:¦ave",10)è
rŞe
 = 
SRI_SLAVE
;

2223 ià(
rŞe
 =ğ
SRI_SLAVE
) {

2225 ià(
	`sd¦’
(
l
è>ğ12 && !
	`memcmp
(l,"master_host:",12)) {

2226 ià(
ri
->
¦ave_ma¡”_ho¡
 =ğ
NULL
 ||

2227 
	`¡rÿ£cmp
(
l
+12,
ri
->
¦ave_ma¡”_ho¡
))

2229 
	`sdsä“
(
ri
->
¦ave_ma¡”_ho¡
);

2230 
ri
->
¦ave_ma¡”_ho¡
 = 
	`sd¢ew
(
l
+12);

2231 
ri
->
¦ave_cÚf_chªge_time
 = 
	`m¡ime
();

2236 ià(
	`sd¦’
(
l
è>ğ12 && !
	`memcmp
(l,"master_port:",12)) {

2237 
¦ave_ma¡”_pÜt
 = 
	`©oi
(
l
+12);

2239 ià(
ri
->
¦ave_ma¡”_pÜt
 != slave_master_port) {

2240 
ri
->
¦ave_ma¡”_pÜt
 = slave_master_port;

2241 
ri
->
¦ave_cÚf_chªge_time
 = 
	`m¡ime
();

2246 ià(
	`sd¦’
(
l
è>ğ19 && !
	`memcmp
(l,"master_link_status:",19)) {

2247 
ri
->
¦ave_ma¡”_lšk_¡©us
 =

2248 (
	`¡rÿ£cmp
(
l
+19,"up") == 0) ?

2249 
SENTINEL_MASTER_LINK_STATUS_UP
 :

2250 
SENTINEL_MASTER_LINK_STATUS_DOWN
;

2254 ià(
	`sd¦’
(
l
è>ğ15 && !
	`memcmp
(l,"slave_priority:",15))

2255 
ri
->
¦ave_´iÜ™y
 = 
	`©oi
(
l
+15);

2258 ià(
	`sd¦’
(
l
è>ğ18 && !
	`memcmp
(l,"slave_repl_offset:",18))

2259 
ri
->
¦ave_»¶_off£t
 = 
	`¡¹ouÎ
(
l
+18,
NULL
,10);

2262 
ri
->
šfo_»äesh
 = 
	`m¡ime
();

2263 
	`sdsä“¥l™»s
(
lšes
,
numlšes
);

2270 ià(
rŞe
 !ğ
ri
->
rŞe_»pÜ‹d
) {

2271 
ri
->
rŞe_»pÜ‹d_time
 = 
	`m¡ime
();

2272 
ri
->
rŞe_»pÜ‹d
 = 
rŞe
;

2273 ià(
rŞe
 =ğ
SRI_SLAVE
è
ri
->
¦ave_cÚf_chªge_time
 = 
	`m¡ime
();

2276 
	`£Áš–Ev’t
(
LL_VERBOSE
,

2277 ((
ri
->
æags
 & (
SRI_MASTER
|
SRI_SLAVE
)è=ğ
rŞe
) ?

2279 
ri
, "%@‚ew„eported„ole is %s",

2280 
rŞe
 =ğ
SRI_MASTER
 ? "master" : "slave",

2281 
ri
->
æags
 & 
SRI_MASTER
 ? "master" : "slave");

2286 ià(
£Áš–
.
tt
) ;

2289 ià((
ri
->
æags
 & 
SRI_MASTER
è&& 
rŞe
 =ğ
SRI_SLAVE
) {

2296 ià((
ri
->
æags
 & 
SRI_SLAVE
è&& 
rŞe
 =ğ
SRI_MASTER
) {

2299 ià((
ri
->
æags
 & 
SRI_PROMOTED
) &&

2300 (
ri
->
ma¡”
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
) &&

2301 (
ri
->
ma¡”
->
çov”_¡©e
 ==

2302 
SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
))

2309 
ri
->
ma¡”
->
cÚfig_•och
 =„i->ma¡”->
çov”_•och
;

2310 
ri
->
ma¡”
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_RECONF_SLAVES
;

2311 
ri
->
ma¡”
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

2312 
	`£Áš–FlushCÚfig
();

2313 
	`£Áš–Ev’t
(
LL_WARNING
,"+´omÙed-¦ave",
ri
,"%@");

2314 ià(
£Áš–
.
simçu»_æags
 &

2315 
SENTINEL_SIMFAILURE_CRASH_AFTER_PROMOTION
)

2316 
	`£Áš–SimFau»C¿sh
();

2317 
	`£Áš–Ev’t
(
LL_WARNING
,"+failover-state-reconf-slaves",

2318 
ri
->
ma¡”
,"%@");

2319 
	`£Áš–C®lCl›ÁRecÚfSüt
(
ri
->
ma¡”
,
SENTINEL_LEADER
,

2320 "¡¬t",
ri
->
ma¡”
->
addr
,ri->addr);

2321 
	`£Áš–FÜûH–loUpd©eFÜMa¡”
(
ri
->
ma¡”
);

2326 
m¡ime_t
 
wa™_time
 = 
SENTINEL_PUBLISH_PERIOD
*4;

2328 ià(!(
ri
->
æags
 & 
SRI_PROMOTED
) &&

2329 
	`£Áš–Ma¡”LooksSªe
(
ri
->
ma¡”
) &&

2330 
	`£Áš–RedisIn¡ªûNoDownFÜ
(
ri
,
wa™_time
) &&

2331 
	`m¡ime
(è- 
ri
->
rŞe_»pÜ‹d_time
 > 
wa™_time
)

2333 
»tv®
 = 
	`£Áš–S’dSÏveOf
(
ri
,

2334 
ri
->
ma¡”
->
addr
->

,

2335 
ri
->
ma¡”
->
addr
->
pÜt
);

2336 ià(
»tv®
 =ğ
C_OK
)

2337 
	`£Áš–Ev’t
(
LL_NOTICE
,"+cÚv”t-to-¦ave",
ri
,"%@");

2343 ià((
ri
->
æags
 & 
SRI_SLAVE
) &&

2344 
rŞe
 =ğ
SRI_SLAVE
 &&

2345 (
ri
->
¦ave_ma¡”_pÜt
 !ğri->
ma¡”
->
addr
->
pÜt
 ||

2346 
	`¡rÿ£cmp
(
ri
->
¦ave_ma¡”_ho¡
,ri->
ma¡”
->
addr
->

)))

2348 
m¡ime_t
 
wa™_time
 = 
ri
->
ma¡”
->
çov”_timeout
;

2352 ià(
	`£Áš–Ma¡”LooksSªe
(
ri
->
ma¡”
) &&

2353 
	`£Áš–RedisIn¡ªûNoDownFÜ
(
ri
,
wa™_time
) &&

2354 
	`m¡ime
(è- 
ri
->
¦ave_cÚf_chªge_time
 > 
wa™_time
)

2356 
»tv®
 = 
	`£Áš–S’dSÏveOf
(
ri
,

2357 
ri
->
ma¡”
->
addr
->

,

2358 
ri
->
ma¡”
->
addr
->
pÜt
);

2359 ià(
»tv®
 =ğ
C_OK
)

2360 
	`£Áš–Ev’t
(
LL_NOTICE
,"+fix-¦ave-cÚfig",
ri
,"%@");

2366 ià((
ri
->
æags
 & 
SRI_SLAVE
è&& 
rŞe
 == SRI_SLAVE &&

2367 (
ri
->
æags
 & (
SRI_RECONF_SENT
|
SRI_RECONF_INPROG
)))

2370 ià((
ri
->
æags
 & 
SRI_RECONF_SENT
) &&

2371 
ri
->
¦ave_ma¡”_ho¡
 &&

2372 
	`¡rcmp
(
ri
->
¦ave_ma¡”_ho¡
,

2373 
ri
->
ma¡”
->
´omÙed_¦ave
->
addr
->

) == 0 &&

2374 
ri
->
¦ave_ma¡”_pÜt
 =ğri->
ma¡”
->
´omÙed_¦ave
->
addr
->
pÜt
)

2376 
ri
->
æags
 &ğ~
SRI_RECONF_SENT
;

2377 
ri
->
æags
 |ğ
SRI_RECONF_INPROG
;

2378 
	`£Áš–Ev’t
(
LL_NOTICE
,"+¦ave-»cÚf-š´og",
ri
,"%@");

2382 ià((
ri
->
æags
 & 
SRI_RECONF_INPROG
) &&

2383 
ri
->
¦ave_ma¡”_lšk_¡©us
 =ğ
SENTINEL_MASTER_LINK_STATUS_UP
)

2385 
ri
->
æags
 &ğ~
SRI_RECONF_INPROG
;

2386 
ri
->
æags
 |ğ
SRI_RECONF_DONE
;

2387 
	`£Áš–Ev’t
(
LL_NOTICE
,"+¦ave-»cÚf-dÚe",
ri
,"%@");

2390 
	}
}

2392 
	$£Áš–InfoR•lyC®lback
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

2393 
£Áš–RedisIn¡ªû
 *
ri
 = 
´ivd©a
;

2394 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

2395 
»disR•ly
 *
r
;

2397 ià(!
»¶y
 || !
lšk
) ;

2398 
lšk
->
³ndšg_commªds
--;

2399 
r
 = 
»¶y
;

2401 ià(
r
->
ty³
 =ğ
REDIS_REPLY_STRING
)

2402 
	`£Áš–ReäeshIn¡ªûInfo
(
ri
,
r
->
¡r
);

2403 
	}
}

2407 
	$£Áš–DisÿrdR•lyC®lback
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

2408 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

2409 
	`UNUSED
(
»¶y
);

2410 
	`UNUSED
(
´ivd©a
);

2412 ià(
lšk
èlšk->
³ndšg_commªds
--;

2413 
	}
}

2415 
	$£Áš–PšgR•lyC®lback
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

2416 
£Áš–RedisIn¡ªû
 *
ri
 = 
´ivd©a
;

2417 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

2418 
»disR•ly
 *
r
;

2420 ià(!
»¶y
 || !
lšk
) ;

2421 
lšk
->
³ndšg_commªds
--;

2422 
r
 = 
»¶y
;

2424 ià(
r
->
ty³
 =ğ
REDIS_REPLY_STATUS
 ||

2425 
r
->
ty³
 =ğ
REDIS_REPLY_ERROR
) {

2428 ià(
	`¡ºcmp
(
r
->
¡r
,"PONG",4) == 0 ||

2429 
	`¡ºcmp
(
r
->
¡r
,"LOADING",7) == 0 ||

2430 
	`¡ºcmp
(
r
->
¡r
,"MASTERDOWN",10) == 0)

2432 
lšk
->
Ï¡_ava_time
 = 
	`m¡ime
();

2433 
lšk
->
aù_pšg_time
 = 0;

2437 ià(
	`¡ºcmp
(
r
->
¡r
,"BUSY",4) == 0 &&

2438 (
ri
->
æags
 & 
SRI_S_DOWN
) &&

2439 !(
ri
->
æags
 & 
SRI_SCRIPT_KILL_SENT
))

2441 ià(
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

2442 
£Áš–DisÿrdR•lyC®lback
, 
ri
,

2444 
	`£Áš–In¡ªûM­Commªd
(
ri
,"SCRIPT")è=ğ
C_OK
)

2446 
ri
->
lšk
->
³ndšg_commªds
++;

2448 
ri
->
æags
 |ğ
SRI_SCRIPT_KILL_SENT
;

2452 
lšk
->
Ï¡_pÚg_time
 = 
	`m¡ime
();

2453 
	}
}

2457 
	$£Áš–PublishR•lyC®lback
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

2458 
£Áš–RedisIn¡ªû
 *
ri
 = 
´ivd©a
;

2459 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

2460 
»disR•ly
 *
r
;

2462 ià(!
»¶y
 || !
lšk
) ;

2463 
lšk
->
³ndšg_commªds
--;

2464 
r
 = 
»¶y
;

2468 ià(
r
->
ty³
 !ğ
REDIS_REPLY_ERROR
)

2469 
ri
->
Ï¡_pub_time
 = 
	`m¡ime
();

2470 
	}
}

2477 
	$£Áš–ProûssH–loMes§ge
(*
h–lo
, 
h–lo_Ën
) {

2481 
numtok’s
, 
pÜt
, 
»moved
, 
ma¡”_pÜt
;

2482 
ušt64_t
 
cu¼’t_•och
, 
ma¡”_cÚfig_•och
;

2483 **
tok’
 = 
	`sds¥l™Ën
(
h–lo
, 
h–lo_Ën
, ",", 1, &
numtok’s
);

2484 
£Áš–RedisIn¡ªû
 *
si
, *
ma¡”
;

2486 ià(
numtok’s
 == 8) {

2488 
ma¡”
 = 
	`£Áš–G‘Ma¡”ByName
(
tok’
[4]);

2489 ià(!
ma¡”
è
ş—nup
;

2492 
pÜt
 = 
	`©oi
(
tok’
[1]);

2493 
ma¡”_pÜt
 = 
	`©oi
(
tok’
[6]);

2494 
si
 = 
	`g‘S’tš–RedisIn¡ªûByAddrAndRunID
(

2495 
ma¡”
->
£Áš–s
,
tok’
[0],
pÜt
,token[2]);

2496 
cu¼’t_•och
 = 
	`¡¹ouÎ
(
tok’
[3],
NULL
,10);

2497 
ma¡”_cÚfig_•och
 = 
	`¡¹ouÎ
(
tok’
[7],
NULL
,10);

2499 ià(!
si
) {

2503 
»moved
 = 
	`»moveM©chšgS’tš–FromMa¡”
(
ma¡”
,
tok’
[2]);

2504 ià(
»moved
) {

2505 
	`£Áš–Ev’t
(
LL_NOTICE
,"+£Áš–-add»ss-sw™ch",
ma¡”
,

2506 "%@ i°% pÜˆ%d fÜ %s", 
tok’
[0],
pÜt
,token[2]);

2512 
£Áš–RedisIn¡ªû
 *
Ùh”
 =

2513 
	`g‘S’tš–RedisIn¡ªûByAddrAndRunID
(

2514 
ma¡”
->
£Áš–s
, 
tok’
[0],
pÜt
,
NULL
);

2515 ià(
Ùh”
) {

2516 
	`£Áš–Ev’t
(
LL_NOTICE
,"+£Áš–-šv®id-addr",
Ùh”
,"%@");

2517 
Ùh”
->
addr
->
pÜt
 = 0;

2518 
	`£Áš–Upd©eS’tš–Add»ssInAÎMa¡”s
(
Ùh”
);

2523 
si
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
tok’
[2],
SRI_SENTINEL
,

2524 
tok’
[0],
pÜt
,
ma¡”
->
quÜum
,master);

2526 ià(
si
) {

2527 ià(!
»moved
è
	`£Áš–Ev’t
(
LL_NOTICE
,"+£Áš–",
si
,"%@");

2531 
si
->
runid
 = 
	`sd¢ew
(
tok’
[2]);

2532 
	`£Áš–TryCÚÃùiÚSh¬šg
(
si
);

2533 ià(
»moved
è
	`£Áš–Upd©eS’tš–Add»ssInAÎMa¡”s
(
si
);

2534 
	`£Áš–FlushCÚfig
();

2539 ià(
cu¼’t_•och
 > 
£Áš–
.current_epoch) {

2540 
£Áš–
.
cu¼’t_•och
 = current_epoch;

2541 
	`£Áš–FlushCÚfig
();

2542 
	`£Áš–Ev’t
(
LL_WARNING
,"+Ãw-•och",
ma¡”
,"%llu",

2543 (è
£Áš–
.
cu¼’t_•och
);

2547 ià(
si
 && 
ma¡”
->
cÚfig_•och
 < 
ma¡”_cÚfig_•och
) {

2548 
ma¡”
->
cÚfig_•och
 = 
ma¡”_cÚfig_•och
;

2549 ià(
ma¡”_pÜt
 !ğ
ma¡”
->
addr
->
pÜt
 ||

2550 
	`¡rcmp
(
ma¡”
->
addr
->

, 
tok’
[5]))

2552 
£Áš–Addr
 *
Şd_addr
;

2554 
	`£Áš–Ev’t
(
LL_WARNING
,"+cÚfig-upd©e-äom",
si
,"%@");

2555 
	`£Áš–Ev’t
(
LL_WARNING
,"+switch-master",

2556 
ma¡”
,"%s %s %d %s %d",

2557 
ma¡”
->
Çme
,

2558 
ma¡”
->
addr
->

, ma¡”->addr->
pÜt
,

2559 
tok’
[5], 
ma¡”_pÜt
);

2561 
Şd_addr
 = 
	`dupS’tš–Addr
(
ma¡”
->
addr
);

2562 
	`£Áš–Re£tMa¡”AndChªgeAdd»ss
(
ma¡”
, 
tok’
[5], 
ma¡”_pÜt
);

2563 
	`£Áš–C®lCl›ÁRecÚfSüt
(
ma¡”
,

2564 
SENTINEL_OBSERVER
,"start",

2565 
Şd_addr
,
ma¡”
->
addr
);

2566 
	`»Ëa£S’tš–Addr
(
Şd_addr
);

2571 ià(
si
èsi->
Ï¡_h–lo_time
 = 
	`m¡ime
();

2574 
ş—nup
:

2575 
	`sdsä“¥l™»s
(
tok’
,
numtok’s
);

2576 
	}
}

2581 
	$£Áš–ReûiveH–loMes§ges
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

2582 
£Áš–RedisIn¡ªû
 *
ri
 = 
´ivd©a
;

2583 
»disR•ly
 *
r
;

2584 
	`UNUSED
(
c
);

2586 ià(!
»¶y
 || !
ri
) ;

2587 
r
 = 
»¶y
;

2592 
ri
->
lšk
->
pc_Ï¡_aùiv™y
 = 
	`m¡ime
();

2596 ià(
r
->
ty³
 !ğ
REDIS_REPLY_ARRAY
 ||

2597 
r
->
–em’ts
 != 3 ||

2598 
r
->
–em’t
[0]->
ty³
 !ğ
REDIS_REPLY_STRING
 ||

2599 
r
->
–em’t
[1]->
ty³
 !ğ
REDIS_REPLY_STRING
 ||

2600 
r
->
–em’t
[2]->
ty³
 !ğ
REDIS_REPLY_STRING
 ||

2601 
	`¡rcmp
(
r
->
–em’t
[0]->
¡r
,"message") != 0) ;

2604 ià(
	`¡r¡r
(
r
->
–em’t
[2]->
¡r
,
£Áš–
.
myid
è!ğ
NULL
) ;

2606 
	`£Áš–ProûssH–loMes§ge
(
r
->
–em’t
[2]->
¡r
,„->–em’t[2]->
Ën
);

2607 
	}
}

2620 
	$£Áš–S’dH–lo
(
£Áš–RedisIn¡ªû
 *
ri
) {

2621 

[
NET_IP_STR_LEN
];

2622 
·ylßd
[
NET_IP_STR_LEN
+1024];

2623 
»tv®
;

2624 *
ªnounû_
;

2625 
ªnounû_pÜt
;

2626 
£Áš–RedisIn¡ªû
 *
ma¡”
 = (
ri
->
æags
 & 
SRI_MASTER
) ?„i :„i->master;

2627 
£Áš–Addr
 *
ma¡”_addr
 = 
	`£Áš–G‘Cu¼’tMa¡”Add»ss
(
ma¡”
);

2629 ià(
ri
->
lšk
->
discÚÃùed
è 
C_ERR
;

2633 ià(
£Áš–
.
ªnounû_
) {

2634 
ªnounû_
 = 
£Áš–
.announce_ip;

2636 ià(
	`ª‘SockName
(
ri
->
lšk
->
cc
->
c
.
fd
,

,(),
NULL
) == -1)

2637  
C_ERR
;

2638 
ªnounû_
 = 

;

2640 ià(
£Áš–
.
ªnounû_pÜt
)‡nnounce_port = sentinel.announce_port;

2641 ià(
£rv”
.
s_»¶iÿtiÚ
 && s”v”.
s_pÜt
è
ªnounû_pÜt
 = server.tls_port;

2642 
ªnounû_pÜt
 = 
£rv”
.
pÜt
;

2645 
	`¢´štf
(
·ylßd
,(payload),

2648 
ªnounû_
, 
ªnounû_pÜt
, 
£Áš–
.
myid
,

2649 (è
£Áš–
.
cu¼’t_•och
,

2651 
ma¡”
->
Çme
,
ma¡”_addr
->

,ma¡”_addr->
pÜt
,

2652 (è
ma¡”
->
cÚfig_•och
);

2653 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

2654 
£Áš–PublishR•lyC®lback
, 
ri
, "%s %s %s",

2655 
	`£Áš–In¡ªûM­Commªd
(
ri
,"PUBLISH"),

2656 
SENTINEL_HELLO_CHANNEL
,
·ylßd
);

2657 ià(
»tv®
 !ğ
C_OK
è 
C_ERR
;

2658 
ri
->
lšk
->
³ndšg_commªds
++;

2659  
C_OK
;

2660 
	}
}

2664 
	$£Áš–FÜûH–loUpd©eDiùOfRedisIn¡ªûs
(
diù
 *
š¡ªûs
) {

2665 
diùI‹¿tÜ
 *
di
;

2666 
diùEÁry
 *
de
;

2668 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
š¡ªûs
);

2669 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

2670 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

2671 ià(
ri
->
Ï¡_pub_time
 >ğ(
SENTINEL_PUBLISH_PERIOD
+1))

2672 
ri
->
Ï¡_pub_time
 -ğ(
SENTINEL_PUBLISH_PERIOD
+1);

2674 
	`diùR–—£I‹¿tÜ
(
di
);

2675 
	}
}

2685 
	$£Áš–FÜûH–loUpd©eFÜMa¡”
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

2686 ià(!(
ma¡”
->
æags
 & 
SRI_MASTER
)è 
C_ERR
;

2687 ià(
ma¡”
->
Ï¡_pub_time
 >ğ(
SENTINEL_PUBLISH_PERIOD
+1))

2688 
ma¡”
->
Ï¡_pub_time
 -ğ(
SENTINEL_PUBLISH_PERIOD
+1);

2689 
	`£Áš–FÜûH–loUpd©eDiùOfRedisIn¡ªûs
(
ma¡”
->
£Áš–s
);

2690 
	`£Áš–FÜûH–loUpd©eDiùOfRedisIn¡ªûs
(
ma¡”
->
¦aves
);

2691  
C_OK
;

2692 
	}
}

2699 
	$£Áš–S’dPšg
(
£Áš–RedisIn¡ªû
 *
ri
) {

2700 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

2701 
£Áš–PšgR•lyC®lback
, 
ri
, "%s",

2702 
	`£Áš–In¡ªûM­Commªd
(
ri
,"PING"));

2703 ià(
»tv®
 =ğ
C_OK
) {

2704 
ri
->
lšk
->
³ndšg_commªds
++;

2705 
ri
->
lšk
->
Ï¡_pšg_time
 = 
	`m¡ime
();

2709 ià(
ri
->
lšk
->
aù_pšg_time
 == 0)

2710 
ri
->
lšk
->
aù_pšg_time
 =„i->lšk->
Ï¡_pšg_time
;

2715 
	}
}

2719 
	$£Áš–S’dP”iodicCommªds
(
£Áš–RedisIn¡ªû
 *
ri
) {

2720 
m¡ime_t
 
now
 = 
	`m¡ime
();

2721 
m¡ime_t
 
šfo_³riod
, 
pšg_³riod
;

2722 
»tv®
;

2726 ià(
ri
->
lšk
->
discÚÃùed
) ;

2734 ià(
ri
->
lšk
->
³ndšg_commªds
 >=

2735 
SENTINEL_MAX_PENDING_COMMANDS
 * 
ri
->
lšk
->
»fcouÁ
) ;

2745 ià((
ri
->
æags
 & 
SRI_SLAVE
) &&

2746 ((
ri
->
ma¡”
->
æags
 & (
SRI_O_DOWN
|
SRI_FAILOVER_IN_PROGRESS
)) ||

2747 (
ri
->
ma¡”_lšk_down_time
 != 0)))

2749 
šfo_³riod
 = 1000;

2751 
šfo_³riod
 = 
SENTINEL_INFO_PERIOD
;

2757 
pšg_³riod
 = 
ri
->
down_aá”_³riod
;

2758 ià(
pšg_³riod
 > 
SENTINEL_PING_PERIOD
)…ing_period = SENTINEL_PING_PERIOD;

2761 ià((
ri
->
æags
 & 
SRI_SENTINEL
) == 0 &&

2762 (
ri
->
šfo_»äesh
 == 0 ||

2763 (
now
 - 
ri
->
šfo_»äesh
è> 
šfo_³riod
))

2765 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

2766 
£Áš–InfoR•lyC®lback
, 
ri
, "%s",

2767 
	`£Áš–In¡ªûM­Commªd
(
ri
,"INFO"));

2768 ià(
»tv®
 =ğ
C_OK
è
ri
->
lšk
->
³ndšg_commªds
++;

2772 ià((
now
 - 
ri
->
lšk
->
Ï¡_pÚg_time
è> 
pšg_³riod
 &&

2773 (
now
 - 
ri
->
lšk
->
Ï¡_pšg_time
è> 
pšg_³riod
/2) {

2774 
	`£Áš–S’dPšg
(
ri
);

2778 ià((
now
 - 
ri
->
Ï¡_pub_time
è> 
SENTINEL_PUBLISH_PERIOD
) {

2779 
	`£Áš–S’dH–lo
(
ri
);

2781 
	}
}

2785 cÚ¡ *
	$£Áš–Faov”S‹SŒ
(
¡©e
) {

2786 
¡©e
) {

2787 
SENTINEL_FAILOVER_STATE_NONE
:  "none";

2788 
SENTINEL_FAILOVER_STATE_WAIT_START
:  "wait_start";

2789 
SENTINEL_FAILOVER_STATE_SELECT_SLAVE
:  "select_slave";

2790 
SENTINEL_FAILOVER_STATE_SEND_SLAVEOF_NOONE
:  "send_slaveof_noone";

2791 
SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
:  "wait_promotion";

2792 
SENTINEL_FAILOVER_STATE_RECONF_SLAVES
:  "reconf_slaves";

2793 
SENTINEL_FAILOVER_STATE_UPDATE_CONFIG
:  "update_config";

2796 
	}
}

2799 
	$addR•lyS’tš–RedisIn¡ªû
(
ş›Á
 *
c
, 
£Áš–RedisIn¡ªû
 *
ri
) {

2800 *
æags
 = 
	`sd£m±y
();

2801 *
mbl
;

2802 
f›lds
 = 0;

2804 
mbl
 = 
	`addR•lyDeã¼edL’
(
c
);

2806 
	`addR•lyBulkCSŒšg
(
c
,"name");

2807 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
Çme
);

2808 
f›lds
++;

2810 
	`addR•lyBulkCSŒšg
(
c
,"ip");

2811 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
addr
->

);

2812 
f›lds
++;

2814 
	`addR•lyBulkCSŒšg
(
c
,"port");

2815 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
addr
->
pÜt
);

2816 
f›lds
++;

2818 
	`addR•lyBulkCSŒšg
(
c
,"runid");

2819 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
runid
 ?„i->runid : "");

2820 
f›lds
++;

2822 
	`addR•lyBulkCSŒšg
(
c
,"flags");

2823 ià(
ri
->
æags
 & 
SRI_S_DOWN
èæag ğ
	`sdsÿt
(flags,"s_down,");

2824 ià(
ri
->
æags
 & 
SRI_O_DOWN
èæag ğ
	`sdsÿt
(flags,"o_down,");

2825 ià(
ri
->
æags
 & 
SRI_MASTER
èæag ğ
	`sdsÿt
(flags,"master,");

2826 ià(
ri
->
æags
 & 
SRI_SLAVE
èæag ğ
	`sdsÿt
(flags,"slave,");

2827 ià(
ri
->
æags
 & 
SRI_SENTINEL
èæag ğ
	`sdsÿt
(flags,"sentinel,");

2828 ià(
ri
->
lšk
->
discÚÃùed
è
æags
 = 
	`sdsÿt
(flags,"disconnected,");

2829 ià(
ri
->
æags
 & 
SRI_MASTER_DOWN
èæag ğ
	`sdsÿt
(flags,"master_down,");

2830 ià(
ri
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
)

2831 
æags
 = 
	`sdsÿt
(flags,"failover_in_progress,");

2832 ià(
ri
->
æags
 & 
SRI_PROMOTED
èæag ğ
	`sdsÿt
(flags,"promoted,");

2833 ià(
ri
->
æags
 & 
SRI_RECONF_SENT
èæag ğ
	`sdsÿt
(flags,"reconf_sent,");

2834 ià(
ri
->
æags
 & 
SRI_RECONF_INPROG
èæag ğ
	`sdsÿt
(flags,"reconf_inprog,");

2835 ià(
ri
->
æags
 & 
SRI_RECONF_DONE
èæag ğ
	`sdsÿt
(flags,"reconf_done,");

2837 ià(
	`sd¦’
(
æags
è!ğ0è
	`sd¤ªge
(flags,0,-2);

2838 
	`addR•lyBulkCSŒšg
(
c
,
æags
);

2839 
	`sdsä“
(
æags
);

2840 
f›lds
++;

2842 
	`addR•lyBulkCSŒšg
(
c
,"link-pending-commands");

2843 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
lšk
->
³ndšg_commªds
);

2844 
f›lds
++;

2846 
	`addR•lyBulkCSŒšg
(
c
,"link-refcount");

2847 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
lšk
->
»fcouÁ
);

2848 
f›lds
++;

2850 ià(
ri
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
) {

2851 
	`addR•lyBulkCSŒšg
(
c
,"failover-state");

2852 
	`addR•lyBulkCSŒšg
(
c
,(*)
	`£Áš–Faov”S‹SŒ
(
ri
->
çov”_¡©e
));

2853 
f›lds
++;

2856 
	`addR•lyBulkCSŒšg
(
c
,"last-ping-sent");

2857 
	`addR•lyBulkLÚgLÚg
(
c
,

2858 
ri
->
lšk
->
aù_pšg_time
 ? (
	`m¡ime
() -„i->link->act_ping_time) : 0);

2859 
f›lds
++;

2861 
	`addR•lyBulkCSŒšg
(
c
,"last-ok-ping-reply");

2862 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
ri
->
lšk
->
Ï¡_ava_time
);

2863 
f›lds
++;

2865 
	`addR•lyBulkCSŒšg
(
c
,"last-ping-reply");

2866 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
ri
->
lšk
->
Ï¡_pÚg_time
);

2867 
f›lds
++;

2869 ià(
ri
->
æags
 & 
SRI_S_DOWN
) {

2870 
	`addR•lyBulkCSŒšg
(
c
,"s-down-time");

2871 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
()-
ri
->
s_down_sšû_time
);

2872 
f›lds
++;

2875 ià(
ri
->
æags
 & 
SRI_O_DOWN
) {

2876 
	`addR•lyBulkCSŒšg
(
c
,"o-down-time");

2877 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
()-
ri
->
o_down_sšû_time
);

2878 
f›lds
++;

2881 
	`addR•lyBulkCSŒšg
(
c
,"down-after-milliseconds");

2882 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
down_aá”_³riod
);

2883 
f›lds
++;

2886 ià(
ri
->
æags
 & (
SRI_MASTER
|
SRI_SLAVE
)) {

2887 
	`addR•lyBulkCSŒšg
(
c
,"info-refresh");

2888 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
ri
->
šfo_»äesh
);

2889 
f›lds
++;

2891 
	`addR•lyBulkCSŒšg
(
c
,"role-reported");

2892 
	`addR•lyBulkCSŒšg
(
c
, (
ri
->
rŞe_»pÜ‹d
 =ğ
SRI_MASTER
) ? "master" :

2894 
f›lds
++;

2896 
	`addR•lyBulkCSŒšg
(
c
,"role-reported-time");

2897 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
ri
->
rŞe_»pÜ‹d_time
);

2898 
f›lds
++;

2902 ià(
ri
->
æags
 & 
SRI_MASTER
) {

2903 
	`addR•lyBulkCSŒšg
(
c
,"config-epoch");

2904 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
cÚfig_•och
);

2905 
f›lds
++;

2907 
	`addR•lyBulkCSŒšg
(
c
,"num-slaves");

2908 
	`addR•lyBulkLÚgLÚg
(
c
,
	`diùSize
(
ri
->
¦aves
));

2909 
f›lds
++;

2911 
	`addR•lyBulkCSŒšg
(
c
,"num-other-sentinels");

2912 
	`addR•lyBulkLÚgLÚg
(
c
,
	`diùSize
(
ri
->
£Áš–s
));

2913 
f›lds
++;

2915 
	`addR•lyBulkCSŒšg
(
c
,"quorum");

2916 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
quÜum
);

2917 
f›lds
++;

2919 
	`addR•lyBulkCSŒšg
(
c
,"failover-timeout");

2920 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
çov”_timeout
);

2921 
f›lds
++;

2923 
	`addR•lyBulkCSŒšg
(
c
,"parallel-syncs");

2924 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
·¿Î–_syncs
);

2925 
f›lds
++;

2927 ià(
ri
->
nÙifiÿtiÚ_süt
) {

2928 
	`addR•lyBulkCSŒšg
(
c
,"notification-script");

2929 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
nÙifiÿtiÚ_süt
);

2930 
f›lds
++;

2933 ià(
ri
->
ş›Á_»cÚfig_süt
) {

2934 
	`addR•lyBulkCSŒšg
(
c
,"client-reconfig-script");

2935 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
ş›Á_»cÚfig_süt
);

2936 
f›lds
++;

2941 ià(
ri
->
æags
 & 
SRI_SLAVE
) {

2942 
	`addR•lyBulkCSŒšg
(
c
,"master-link-down-time");

2943 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
ma¡”_lšk_down_time
);

2944 
f›lds
++;

2946 
	`addR•lyBulkCSŒšg
(
c
,"master-link-status");

2947 
	`addR•lyBulkCSŒšg
(
c
,

2948 (
ri
->
¦ave_ma¡”_lšk_¡©us
 =ğ
SENTINEL_MASTER_LINK_STATUS_UP
) ?

2950 
f›lds
++;

2952 
	`addR•lyBulkCSŒšg
(
c
,"master-host");

2953 
	`addR•lyBulkCSŒšg
(
c
,

2954 
ri
->
¦ave_ma¡”_ho¡
 ?„i->slave_master_host : "?");

2955 
f›lds
++;

2957 
	`addR•lyBulkCSŒšg
(
c
,"master-port");

2958 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
¦ave_ma¡”_pÜt
);

2959 
f›lds
++;

2961 
	`addR•lyBulkCSŒšg
(
c
,"slave-priority");

2962 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
¦ave_´iÜ™y
);

2963 
f›lds
++;

2965 
	`addR•lyBulkCSŒšg
(
c
,"slave-repl-offset");

2966 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
¦ave_»¶_off£t
);

2967 
f›lds
++;

2971 ià(
ri
->
æags
 & 
SRI_SENTINEL
) {

2972 
	`addR•lyBulkCSŒšg
(
c
,"last-hello-message");

2973 
	`addR•lyBulkLÚgLÚg
(
c
,
	`m¡ime
(è- 
ri
->
Ï¡_h–lo_time
);

2974 
f›lds
++;

2976 
	`addR•lyBulkCSŒšg
(
c
,"voted-leader");

2977 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
Ëad”
 ?„i->leader : "?");

2978 
f›lds
++;

2980 
	`addR•lyBulkCSŒšg
(
c
,"voted-leader-epoch");

2981 
	`addR•lyBulkLÚgLÚg
(
c
,
ri
->
Ëad”_•och
);

2982 
f›lds
++;

2985 
	`£tDeã¼edM­L’
(
c
,
mbl
,
f›lds
);

2986 
	}
}

2990 
	$addR•lyDiùOfRedisIn¡ªûs
(
ş›Á
 *
c
, 
diù
 *
š¡ªûs
) {

2991 
diùI‹¿tÜ
 *
di
;

2992 
diùEÁry
 *
de
;

2994 
di
 = 
	`diùG‘I‹¿tÜ
(
š¡ªûs
);

2995 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
š¡ªûs
));

2996 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

2997 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

2999 
	`addR•lyS’tš–RedisIn¡ªû
(
c
,
ri
);

3001 
	`diùR–—£I‹¿tÜ
(
di
);

3002 
	}
}

3007 
£Áš–RedisIn¡ªû
 *
	$£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
ş›Á
 *
c
,

3008 
robj
 *
Çme
)

3010 
£Áš–RedisIn¡ªû
 *
ri
;

3012 
ri
 = 
	`diùF‘chV®ue
(
£Áš–
.
ma¡”s
,
Çme
->
±r
);

3013 ià(!
ri
) {

3014 
	`addR•lyE¼Ü
(
c
,"No such master withhat‚ame");

3015  
NULL
;

3017  
ri
;

3018 
	}
}

3020 
	#SENTINEL_ISQR_OK
 0

	)

3021 
	#SENTINEL_ISQR_NOQUORUM
 (1<<0)

	)

3022 
	#SENTINEL_ISQR_NOAUTH
 (1<<1)

	)

3023 
	$£Áš–IsQuÜumR—chabË
(
£Áš–RedisIn¡ªû
 *
ma¡”
, *
u§bË±r
) {

3024 
diùI‹¿tÜ
 *
di
;

3025 
diùEÁry
 *
de
;

3026 
u§bË
 = 1;

3027 
»suÉ
 = 
SENTINEL_ISQR_OK
;

3028 
vÙ”s
 = 
	`diùSize
(
ma¡”
->
£Áš–s
)+1;

3030 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
£Áš–s
);

3031 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3032 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3034 ià(
ri
->
æags
 & (
SRI_S_DOWN
|
SRI_O_DOWN
)) ;

3035 
u§bË
++;

3037 
	`diùR–—£I‹¿tÜ
(
di
);

3039 ià(
u§bË
 < ()
ma¡”
->
quÜum
è
»suÉ
 |ğ
SENTINEL_ISQR_NOQUORUM
;

3040 ià(
u§bË
 < 
vÙ”s
/2+1è
»suÉ
 |ğ
SENTINEL_ISQR_NOAUTH
;

3041 ià(
u§bË±r
è*u§bË±¸ğ
u§bË
;

3042  
»suÉ
;

3043 
	}
}

3045 
	$£Áš–Commªd
(
ş›Á
 *
c
) {

3046 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"masters")) {

3048 ià(
c
->
¬gc
 !ğ2è
num¬g£¼
;

3049 
	`addR•lyDiùOfRedisIn¡ªûs
(
c
,
£Áš–
.
ma¡”s
);

3050 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"master")) {

3052 
£Áš–RedisIn¡ªû
 *
ri
;

3054 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3055 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2]))

3056 =ğ
NULL
) ;

3057 
	`addR•lyS’tš–RedisIn¡ªû
(
c
,
ri
);

3058 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"slaves") ||

3059 !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"replicas"))

3062 
£Áš–RedisIn¡ªû
 *
ri
;

3064 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3065 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2])è=ğ
NULL
)

3067 
	`addR•lyDiùOfRedisIn¡ªûs
(
c
,
ri
->
¦aves
);

3068 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"sentinels")) {

3070 
£Áš–RedisIn¡ªû
 *
ri
;

3072 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3073 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2])è=ğ
NULL
)

3075 
	`addR•lyDiùOfRedisIn¡ªûs
(
c
,
ri
->
£Áš–s
);

3076 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"is-master-down-by-addr")) {

3094 
£Áš–RedisIn¡ªû
 *
ri
;

3095 
»q_•och
;

3096 
ušt64_t
 
Ëad”_•och
 = 0;

3097 *
Ëad”
 = 
NULL
;

3098 
pÜt
;

3099 
isdown
 = 0;

3101 ià(
c
->
¬gc
 !ğ6è
num¬g£¼
;

3102 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
pÜt
,
NULL
è!ğ
C_OK
 ||

3103 
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[4],&
»q_•och
,
NULL
)

3104 !ğ
C_OK
)

3106 
ri
 = 
	`g‘S’tš–RedisIn¡ªûByAddrAndRunID
(
£Áš–
.
ma¡”s
,

3107 
c
->
¬gv
[2]->
±r
,
pÜt
,
NULL
);

3111 ià(!
£Áš–
.
tt
 && 
ri
 && (ri->
æags
 & 
SRI_S_DOWN
) &&

3112 (
ri
->
æags
 & 
SRI_MASTER
))

3113 
isdown
 = 1;

3117 ià(
ri
 &&„i->
æags
 & 
SRI_MASTER
 && 
	`¡rÿ£cmp
(
c
->
¬gv
[5]->
±r
,"*")) {

3118 
Ëad”
 = 
	`£Áš–VÙeL—d”
(
ri
,(
ušt64_t
)
»q_•och
,

3119 
c
->
¬gv
[5]->
±r
,

3120 &
Ëad”_•och
);

3125 
	`addR•lyA¼ayL’
(
c
,3);

3126 
	`addR•ly
(
c
, 
isdown
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

3127 
	`addR•lyBulkCSŒšg
(
c
, 
Ëad”
 ?†eader : "*");

3128 
	`addR•lyLÚgLÚg
(
c
, ()
Ëad”_•och
);

3129 ià(
Ëad”
è
	`sdsä“
(leader);

3130 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"reset")) {

3132 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3133 
	`addR•lyLÚgLÚg
(
c
,
	`£Áš–Re£tMa¡”sByP©‹º
(c->
¬gv
[2]->
±r
,
SENTINEL_GENERATE_EVENT
));

3134 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"get-master-addr-by-name")) {

3136 
£Áš–RedisIn¡ªû
 *
ri
;

3138 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3139 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
c
->
¬gv
[2]->
±r
);

3140 ià(
ri
 =ğ
NULL
) {

3141 
	`addR•lyNuÎA¼ay
(
c
);

3143 
£Áš–Addr
 *
addr
 = 
	`£Áš–G‘Cu¼’tMa¡”Add»ss
(
ri
);

3145 
	`addR•lyA¼ayL’
(
c
,2);

3146 
	`addR•lyBulkCSŒšg
(
c
,
addr
->

);

3147 
	`addR•lyBulkLÚgLÚg
(
c
,
addr
->
pÜt
);

3149 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"failover")) {

3151 
£Áš–RedisIn¡ªû
 *
ri
;

3153 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3154 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2])è=ğ
NULL
)

3156 ià(
ri
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
) {

3157 
	`addR•lySds
(
c
,
	`sd¢ew
("-INPROG Failover‡lready in…rogress\r\n"));

3160 ià(
	`£Áš–S–eùSÏve
(
ri
è=ğ
NULL
) {

3161 
	`addR•lySds
(
c
,
	`sd¢ew
("-NOGOODSLAVE No suitable„eplicao…romote\r\n"));

3164 
	`£rv”Log
(
LL_WARNING
,"Executing user„equested FAILOVER of '%s'",

3165 
ri
->
Çme
);

3166 
	`£Áš–S¹Faov”
(
ri
);

3167 
ri
->
æags
 |ğ
SRI_FORCE_FAILOVER
;

3168 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3169 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"pending-scripts")) {

3172 ià(
c
->
¬gc
 !ğ2è
num¬g£¼
;

3173 
	`£Áš–P’dšgSütsCommªd
(
c
);

3174 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"monitor")) {

3176 
£Áš–RedisIn¡ªû
 *
ri
;

3177 
quÜum
, 
pÜt
;

3178 

[
NET_IP_STR_LEN
];

3180 ià(
c
->
¬gc
 !ğ6è
num¬g£¼
;

3181 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[5],&
quÜum
,"Invalid quorum")

3182 !ğ
C_OK
) ;

3183 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[4],&
pÜt
,"Invalid…ort")

3184 !ğ
C_OK
) ;

3186 ià(
quÜum
 <= 0) {

3187 
	`addR•lyE¼Ü
(
c
, "Quorum must be 1 or greater.");

3194 ià(
	`ª‘ResŞveIP
(
NULL
,
c
->
¬gv
[3]->
±r
,

,()è=ğ
ANET_ERR
) {

3195 
	`addR•lyE¼Ü
(
c
,"Invalid IP‡ddress specified");

3200 
ri
 = 
	`ü—‹S’tš–RedisIn¡ªû
(
c
->
¬gv
[2]->
±r
,
SRI_MASTER
,

3201 
c
->
¬gv
[3]->
±r
,
pÜt
,
quÜum
,
NULL
);

3202 ià(
ri
 =ğ
NULL
) {

3203 
”ºo
) {

3204 
EBUSY
:

3205 
	`addR•lyE¼Ü
(
c
,"Duplicated master‚ame");

3207 
EINVAL
:

3208 
	`addR•lyE¼Ü
(
c
,"Invalid…ort‚umber");

3211 
	`addR•lyE¼Ü
(
c
,"Unspecifiedƒrror‡ddinghe instance");

3215 
	`£Áš–FlushCÚfig
();

3216 
	`£Áš–Ev’t
(
LL_WARNING
,"+mÚ™Ü",
ri
,"%@ quÜum %d",ri->
quÜum
);

3217 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3219 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"flushconfig")) {

3220 ià(
c
->
¬gc
 !ğ2è
num¬g£¼
;

3221 
	`£Áš–FlushCÚfig
();

3222 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3224 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"remove")) {

3226 
£Áš–RedisIn¡ªû
 *
ri
;

3228 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3229 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2]))

3230 =ğ
NULL
) ;

3231 
	`£Áš–Ev’t
(
LL_WARNING
,"-mÚ™Ü",
ri
,"%@");

3232 
	`diùD–‘e
(
£Áš–
.
ma¡”s
,
c
->
¬gv
[2]->
±r
);

3233 
	`£Áš–FlushCÚfig
();

3234 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3235 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"ckquorum")) {

3237 
£Áš–RedisIn¡ªû
 *
ri
;

3238 
u§bË
;

3240 ià(
c
->
¬gc
 !ğ3è
num¬g£¼
;

3241 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2]))

3242 =ğ
NULL
) ;

3243 
»suÉ
 = 
	`£Áš–IsQuÜumR—chabË
(
ri
,&
u§bË
);

3244 ià(
»suÉ
 =ğ
SENTINEL_ISQR_OK
) {

3245 
	`addR•lySds
(
c
, 
	`sdsÿtfmt
(
	`sd£m±y
(),

3247 "ÿÀb»ached\r\n",
u§bË
));

3249 
sds
 
e
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),

3250 "-NOQUORUM %˜u§bË S’tš–s. ",
u§bË
);

3251 ià(
»suÉ
 & 
SENTINEL_ISQR_NOQUORUM
)

3252 
e
 = 
	`sdsÿt
(e,"Notƒnough‡vailable Sentinelso„eachhe"

3254 ià(
»suÉ
 & 
SENTINEL_ISQR_NOAUTH
) {

3255 ià(
»suÉ
 & 
SENTINEL_ISQR_NOQUORUM
è
e
 = 
	`sdsÿt
(e,". ");

3256 
e
 = 
	`sdsÿt
(e, "Notƒnough‡vailable Sentinelso„eachhe"

3259 
e
 = 
	`sdsÿt
(e,"\r\n");

3260 
	`addR•lySds
(
c
,
e
);

3262 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"set")) {

3263 ià(
c
->
¬gc
 < 3è
num¬g£¼
;

3264 
	`£Áš–S‘Commªd
(
c
);

3265 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"info-cache")) {

3267 ià(
c
->
¬gc
 < 2è
num¬g£¼
;

3268 
m¡ime_t
 
now
 = 
	`m¡ime
();

3273 
diùTy³
 
cİy_k“³r
 = 
š¡ªûsDiùTy³
;

3274 
cİy_k“³r
.
v®De¡ruùÜ
 = 
NULL
;

3275 
diù
 *
ma¡”s_loÿl
 = 
£Áš–
.
ma¡”s
;

3276 ià(
c
->
¬gc
 > 2) {

3277 
ma¡”s_loÿl
 = 
	`diùC»©e
(&
cİy_k“³r
, 
NULL
);

3279 
i
 = 2; i < 
c
->
¬gc
; i++) {

3280 
£Áš–RedisIn¡ªû
 *
ri
;

3281 
ri
 = 
	`£Áš–G‘Ma¡”ByName
(
c
->
¬gv
[
i
]->
±r
);

3282 ià(!
ri
) ;

3283 
	`diùAdd
(
ma¡”s_loÿl
, 
ri
->
Çme
,„i);

3295 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
ma¡”s_loÿl
) * 2);

3297 
diùI‹¿tÜ
 *
di
;

3298 
diùEÁry
 *
de
;

3299 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”s_loÿl
);

3300 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3301 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3302 
	`addR•lyBulkCBufãr
(
c
,
ri
->
Çme
,
	`¡¾’
(ri->name));

3303 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
ri
->
¦aves
) + 1);

3304 
	`addR•lyA¼ayL’
(
c
,2);

3305 
	`addR•lyLÚgLÚg
(
c
, 
now
 - 
ri
->
šfo_»äesh
);

3306 ià(
ri
->
šfo
)

3307 
	`addR•lyBulkCBufãr
(
c
,
ri
->
šfo
,
	`sd¦’
(ri->info));

3309 
	`addR•lyNuÎ
(
c
);

3311 
diùI‹¿tÜ
 *
sdi
;

3312 
diùEÁry
 *
sde
;

3313 
sdi
 = 
	`diùG‘I‹¿tÜ
(
ri
->
¦aves
);

3314 (
sde
 = 
	`diùNext
(
sdi
)è!ğ
NULL
) {

3315 
£Áš–RedisIn¡ªû
 *
¤i
 = 
	`diùG‘V®
(
sde
);

3316 
	`addR•lyA¼ayL’
(
c
,2);

3317 
	`addR•lyLÚgLÚg
(
c
, 
now
 - 
¤i
->
šfo_»äesh
);

3318 ià(
¤i
->
šfo
)

3319 
	`addR•lyBulkCBufãr
(
c
,
¤i
->
šfo
,
	`sd¦’
(sri->info));

3321 
	`addR•lyNuÎ
(
c
);

3323 
	`diùR–—£I‹¿tÜ
(
sdi
);

3325 
	`diùR–—£I‹¿tÜ
(
di
);

3326 ià(
ma¡”s_loÿl
 !ğ
£Áš–
.
ma¡”s
è
	`diùR–—£
(masters_local);

3327 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"simulate-failure")) {

3329 
j
;

3331 
£Áš–
.
simçu»_æags
 = 
SENTINEL_SIMFAILURE_NONE
;

3332 
j
 = 2; j < 
c
->
¬gc
; j++) {

3333 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"crash-after-election")) {

3334 
£Áš–
.
simçu»_æags
 |=

3335 
SENTINEL_SIMFAILURE_CRASH_AFTER_ELECTION
;

3336 
	`£rv”Log
(
LL_WARNING
,"Failure simulation:his Sentinel "

3339 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"crash-after-promotion")) {

3340 
£Áš–
.
simçu»_æags
 |=

3341 
SENTINEL_SIMFAILURE_CRASH_AFTER_PROMOTION
;

3342 
	`£rv”Log
(
LL_WARNING
,"Failure simulation:his Sentinel "

3344 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"help")) {

3345 
	`addR•lyA¼ayL’
(
c
,2);

3346 
	`addR•lyBulkCSŒšg
(
c
,"crash-after-election");

3347 
	`addR•lyBulkCSŒšg
(
c
,"crash-after-promotion");

3349 
	`addR•lyE¼Ü
(
c
,"Unknown failure simulation specified");

3353 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3355 
	`addR•lyE¼ÜFÜm©
(
c
,"Unknown sentinel subcommand '%s'",

3356 (*)
c
->
¬gv
[1]->
±r
);

3360 
num¬g£¼
:

3361 
	`addR•lyE¼ÜFÜm©
(
c
,"Wrong‚umber of‡rguments for 'sentinel %s'",

3362 (*)
c
->
¬gv
[1]->
±r
);

3363 
	}
}

3365 
	#šfo_£ùiÚ_äom_»dis
(
£ùiÚ_Çme
) do { \

3366 ià(
def£ùiÚs
 || 
®l£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,
£ùiÚ_Çme
)) { \

3367 
sds
 
»dis£ùiÚ
; \

3368 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n"); \

3369 
»dis£ùiÚ
 = 
	`g’RedisInfoSŒšg
(
£ùiÚ_Çme
); \

3370 
šfo
 = 
	`sdsÿ’
(šfo,
»dis£ùiÚ
,
	`sd¦’
(redissection)); \

3371 
	`sdsä“
(
»dis£ùiÚ
); \

3373 } 0)

	)

3376 
	$£Áš–InfoCommªd
(
ş›Á
 *
c
) {

3377 ià(
c
->
¬gc
 > 2) {

3378 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

3382 
def£ùiÚs
 = 0, 
®l£ùiÚs
 = 0;

3383 *
£ùiÚ
 = 
c
->
¬gc
 =ğ2 ? c->
¬gv
[1]->
±r
 : 
NULL
;

3384 ià(
£ùiÚ
) {

3385 
®l£ùiÚs
 = !
	`¡rÿ£cmp
(
£ùiÚ
,"all");

3386 
def£ùiÚs
 = !
	`¡rÿ£cmp
(
£ùiÚ
,"default");

3388 
def£ùiÚs
 = 1;

3391 
£ùiÚs
 = 0;

3392 
sds
 
šfo
 = 
	`sd£m±y
();

3394 
	`šfo_£ùiÚ_äom_»dis
("server");

3395 
	`šfo_£ùiÚ_äom_»dis
("clients");

3396 
	`šfo_£ùiÚ_äom_»dis
("cpu");

3397 
	`šfo_£ùiÚ_äom_»dis
("stats");

3399 ià(
def£ùiÚs
 || 
®l£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"sentinel")) {

3400 
diùI‹¿tÜ
 *
di
;

3401 
diùEÁry
 *
de
;

3402 
ma¡”_id
 = 0;

3404 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

3405 
šfo
 = 
	`sdsÿrštf
(info,

3412 
	`diùSize
(
£Áš–
.
ma¡”s
),

3413 
£Áš–
.
tt
,

3414 
£Áš–
.
ruÂšg_süts
,

3415 
	`li¡L’gth
(
£Áš–
.
süts_queue
),

3416 
£Áš–
.
simçu»_æags
);

3418 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

3419 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3420 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3421 *
¡©us
 = "ok";

3423 ià(
ri
->
æags
 & 
SRI_O_DOWN
è
¡©us
 = "odown";

3424 ià(
ri
->
æags
 & 
SRI_S_DOWN
è
¡©us
 = "sdown";

3425 
šfo
 = 
	`sdsÿrštf
(info,

3428 
ma¡”_id
++, 
ri
->
Çme
, 
¡©us
,

3429 
ri
->
addr
->

,„i->addr->
pÜt
,

3430 
	`diùSize
(
ri
->
¦aves
),

3431 
	`diùSize
(
ri
->
£Áš–s
)+1);

3433 
	`diùR–—£I‹¿tÜ
(
di
);

3436 
	`addR•lyBulkSds
(
c
, 
šfo
);

3437 
	}
}

3441 
	$£Áš–RŞeCommªd
(
ş›Á
 *
c
) {

3442 
diùI‹¿tÜ
 *
di
;

3443 
diùEÁry
 *
de
;

3445 
	`addR•lyA¼ayL’
(
c
,2);

3446 
	`addR•lyBulkCBufãr
(
c
,"sentinel",8);

3447 
	`addR•lyA¼ayL’
(
c
,
	`diùSize
(
£Áš–
.
ma¡”s
));

3449 
di
 = 
	`diùG‘I‹¿tÜ
(
£Áš–
.
ma¡”s
);

3450 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3451 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3453 
	`addR•lyBulkCSŒšg
(
c
,
ri
->
Çme
);

3455 
	`diùR–—£I‹¿tÜ
(
di
);

3456 
	}
}

3459 
	$£Áš–S‘Commªd
(
ş›Á
 *
c
) {

3460 
£Áš–RedisIn¡ªû
 *
ri
;

3461 
j
, 
chªges
 = 0;

3462 
bad¬g
 = 0;

3463 *
İtiÚ
;

3465 ià((
ri
 = 
	`£Áš–G‘Ma¡”ByNameOrR•lyE¼Ü
(
c
,c->
¬gv
[2]))

3466 =ğ
NULL
) ;

3469 
j
 = 3; j < 
c
->
¬gc
; j++) {

3470 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

3471 
İtiÚ
 = 
c
->
¬gv
[
j
]->
±r
;

3472 
Î
;

3473 
Şd_j
 = 
j
;

3475 ià(!
	`¡rÿ£cmp
(
İtiÚ
,"down-aá”-mli£cÚds"è&& 
mÜ—rgs
 > 0) {

3477 
robj
 *
o
 = 
c
->
¬gv
[++
j
];

3478 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
Î
è=ğ
C_ERR
 ||†l <= 0) {

3479 
bad¬g
 = 
j
;

3480 
badfmt
;

3482 
ri
->
down_aá”_³riod
 = 
Î
;

3483 
	`£Áš–Prİag©eDownAá”P”iod
(
ri
);

3484 
chªges
++;

3485 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"çov”-timeout"è&& 
mÜ—rgs
 > 0) {

3487 
robj
 *
o
 = 
c
->
¬gv
[++
j
];

3488 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
Î
è=ğ
C_ERR
 ||†l <= 0) {

3489 
bad¬g
 = 
j
;

3490 
badfmt
;

3492 
ri
->
çov”_timeout
 = 
Î
;

3493 
chªges
++;

3494 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"·¿Î–-syncs"è&& 
mÜ—rgs
 > 0) {

3496 
robj
 *
o
 = 
c
->
¬gv
[++
j
];

3497 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
Î
è=ğ
C_ERR
 ||†l <= 0) {

3498 
bad¬g
 = 
j
;

3499 
badfmt
;

3501 
ri
->
·¿Î–_syncs
 = 
Î
;

3502 
chªges
++;

3503 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"nÙifiÿtiÚ-süt"è&& 
mÜ—rgs
 > 0) {

3505 *
v®ue
 = 
c
->
¬gv
[++
j
]->
±r
;

3506 ià(
£Áš–
.
d’y_süts_»cÚfig
) {

3507 
	`addR•lyE¼Ü
(
c
,

3514 ià(
	`¡¾’
(
v®ue
è&& 
	`acûss
(v®ue,
X_OK
) == -1) {

3515 
	`addR•lyE¼Ü
(
c
,

3517 ià(
chªges
è
	`£Áš–FlushCÚfig
();

3520 
	`sdsä“
(
ri
->
nÙifiÿtiÚ_süt
);

3521 
ri
->
nÙifiÿtiÚ_süt
 = 
	`¡¾’
(
v®ue
è? 
	`sd¢ew
(v®ueè: 
NULL
;

3522 
chªges
++;

3523 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"ş›Á-»cÚfig-süt"è&& 
mÜ—rgs
 > 0) {

3525 *
v®ue
 = 
c
->
¬gv
[++
j
]->
±r
;

3526 ià(
£Áš–
.
d’y_süts_»cÚfig
) {

3527 
	`addR•lyE¼Ü
(
c
,

3534 ià(
	`¡¾’
(
v®ue
è&& 
	`acûss
(v®ue,
X_OK
) == -1) {

3535 
	`addR•lyE¼Ü
(
c
,

3538 ià(
chªges
è
	`£Áš–FlushCÚfig
();

3541 
	`sdsä“
(
ri
->
ş›Á_»cÚfig_süt
);

3542 
ri
->
ş›Á_»cÚfig_süt
 = 
	`¡¾’
(
v®ue
è? 
	`sd¢ew
(v®ueè: 
NULL
;

3543 
chªges
++;

3544 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"auth-·ss"è&& 
mÜ—rgs
 > 0) {

3546 *
v®ue
 = 
c
->
¬gv
[++
j
]->
±r
;

3547 
	`sdsä“
(
ri
->
auth_·ss
);

3548 
ri
->
auth_·ss
 = 
	`¡¾’
(
v®ue
è? 
	`sd¢ew
(v®ueè: 
NULL
;

3549 
chªges
++;

3550 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"auth-u£r"è&& 
mÜ—rgs
 > 0) {

3552 *
v®ue
 = 
c
->
¬gv
[++
j
]->
±r
;

3553 
	`sdsä“
(
ri
->
auth_u£r
);

3554 
ri
->
auth_u£r
 = 
	`¡¾’
(
v®ue
è? 
	`sd¢ew
(v®ueè: 
NULL
;

3555 
chªges
++;

3556 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"quÜum"è&& 
mÜ—rgs
 > 0) {

3558 
robj
 *
o
 = 
c
->
¬gv
[++
j
];

3559 ià(
	`g‘LÚgLÚgFromObjeù
(
o
,&
Î
è=ğ
C_ERR
 ||†l <= 0) {

3560 
bad¬g
 = 
j
;

3561 
badfmt
;

3563 
ri
->
quÜum
 = 
Î
;

3564 
chªges
++;

3565 } ià(!
	`¡rÿ£cmp
(
İtiÚ
,"»Çme-commªd"è&& 
mÜ—rgs
 > 1) {

3567 
sds
 
ŞdÇme
 = 
c
->
¬gv
[++
j
]->
±r
;

3568 
sds
 
ÃwÇme
 = 
c
->
¬gv
[++
j
]->
±r
;

3570 ià((
	`sd¦’
(
ŞdÇme
è=ğ0è|| (sd¦’(
ÃwÇme
) == 0)) {

3571 
bad¬g
 = 
	`sd¦’
(
ÃwÇme
è? 
j
-1 : j;

3572 
badfmt
;

3576 
	`diùD–‘e
(
ri
->
»Çmed_commªds
,
ŞdÇme
);

3580 ià(!
	`diùSdsKeyCa£Com·»
(
NULL
,
ŞdÇme
,
ÃwÇme
)) {

3581 
ŞdÇme
 = 
	`sdsdup
(oldname);

3582 
ÃwÇme
 = 
	`sdsdup
(newname);

3583 
	`diùAdd
(
ri
->
»Çmed_commªds
,
ŞdÇme
,
ÃwÇme
);

3585 
chªges
++;

3587 
	`addR•lyE¼ÜFÜm©
(
c
,"Unknown option or‚umber of‡rguments for "

3588 "SENTINEL SET '%s'", 
İtiÚ
);

3589 ià(
chªges
è
	`£Áš–FlushCÚfig
();

3594 
num¬gs
 = 
j
-
Şd_j
+1;

3595 
num¬gs
) {

3597 
	`£Áš–Ev’t
(
LL_WARNING
,"+£t",
ri
,"%@ % %s",
c
->
¬gv
[
Şd_j
]->
±r
,

3598 
c
->
¬gv
[
Şd_j
+1]->
±r
);

3601 
	`£Áš–Ev’t
(
LL_WARNING
,"+£t",
ri
,"%@ % % %s",
c
->
¬gv
[
Şd_j
]->
±r
,

3602 
c
->
¬gv
[
Şd_j
+1]->
±r
,

3603 
c
->
¬gv
[
Şd_j
+2]->
±r
);

3606 
	`£Áš–Ev’t
(
LL_WARNING
,"+£t",
ri
,"%@ %s",
c
->
¬gv
[
Şd_j
]->
±r
);

3611 ià(
chªges
è
	`£Áš–FlushCÚfig
();

3612 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3615 
badfmt
:

3616 ià(
chªges
è
	`£Áš–FlushCÚfig
();

3617 
	`addR•lyE¼ÜFÜm©
(
c
,"Invalid‡rgument '%s' for SENTINEL SET '%s'",

3618 (*)
c
->
¬gv
[
bad¬g
]->
±r
,
İtiÚ
);

3619 
	}
}

3627 
	$£Áš–PublishCommªd
(
ş›Á
 *
c
) {

3628 ià(
	`¡rcmp
(
c
->
¬gv
[1]->
±r
,
SENTINEL_HELLO_CHANNEL
)) {

3629 
	`addR•lyE¼Ü
(
c
, "Only HELLO messages‡re‡ccepted by Sentinel instances.");

3632 
	`£Áš–ProûssH–loMes§ge
(
c
->
¬gv
[2]->
±r
,
	`sd¦’
(c->argv[2]->ptr));

3633 
	`addR•lyLÚgLÚg
(
c
,1);

3634 
	}
}

3639 
	$£Áš–CheckSubjeùiv–yDown
(
£Áš–RedisIn¡ªû
 *
ri
) {

3640 
m¡ime_t
 
–­£d
 = 0;

3642 ià(
ri
->
lšk
->
aù_pšg_time
)

3643 
–­£d
 = 
	`m¡ime
(è- 
ri
->
lšk
->
aù_pšg_time
;

3644 ià(
ri
->
lšk
->
discÚÃùed
)

3645 
–­£d
 = 
	`m¡ime
(è- 
ri
->
lšk
->
Ï¡_ava_time
;

3653 ià(
ri
->
lšk
->
cc
 &&

3654 (
	`m¡ime
(è- 
ri
->
lšk
->
cc_cÚn_time
) >

3655 
SENTINEL_MIN_LINK_RECONNECT_PERIOD
 &&

3656 
ri
->
lšk
->
aù_pšg_time
 != 0 &&

3659 (
	`m¡ime
(è- 
ri
->
lšk
->
aù_pšg_time
è> (ri->
down_aá”_³riod
/2) &&

3660 (
	`m¡ime
(è- 
ri
->
lšk
->
Ï¡_pÚg_time
è> (ri->
down_aá”_³riod
/2))

3662 
	`š¡ªûLškClo£CÚÃùiÚ
(
ri
->
lšk
,ri->lšk->
cc
);

3670 ià(
ri
->
lšk
->
pc
 &&

3671 (
	`m¡ime
(è- 
ri
->
lšk
->
pc_cÚn_time
) >

3672 
SENTINEL_MIN_LINK_RECONNECT_PERIOD
 &&

3673 (
	`m¡ime
(è- 
ri
->
lšk
->
pc_Ï¡_aùiv™y
è> (
SENTINEL_PUBLISH_PERIOD
*3))

3675 
	`š¡ªûLškClo£CÚÃùiÚ
(
ri
->
lšk
,ri->lšk->
pc
);

3684 ià(
–­£d
 > 
ri
->
down_aá”_³riod
 ||

3685 (
ri
->
æags
 & 
SRI_MASTER
 &&

3686 
ri
->
rŞe_»pÜ‹d
 =ğ
SRI_SLAVE
 &&

3687 
	`m¡ime
(è- 
ri
->
rŞe_»pÜ‹d_time
 >

3688 (
ri
->
down_aá”_³riod
+
SENTINEL_INFO_PERIOD
*2)))

3691 ià((
ri
->
æags
 & 
SRI_S_DOWN
) == 0) {

3692 
	`£Áš–Ev’t
(
LL_WARNING
,"+sdown",
ri
,"%@");

3693 
ri
->
s_down_sšû_time
 = 
	`m¡ime
();

3694 
ri
->
æags
 |ğ
SRI_S_DOWN
;

3698 ià(
ri
->
æags
 & 
SRI_S_DOWN
) {

3699 
	`£Áš–Ev’t
(
LL_WARNING
,"-sdown",
ri
,"%@");

3700 
ri
->
æags
 &ğ~(
SRI_S_DOWN
|
SRI_SCRIPT_KILL_SENT
);

3703 
	}
}

3711 
	$£Áš–CheckObjeùiv–yDown
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

3712 
diùI‹¿tÜ
 *
di
;

3713 
diùEÁry
 *
de
;

3714 
quÜum
 = 0, 
odown
 = 0;

3716 ià(
ma¡”
->
æags
 & 
SRI_S_DOWN
) {

3718 
quÜum
 = 1;

3720 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
£Áš–s
);

3721 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3722 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3724 ià(
ri
->
æags
 & 
SRI_MASTER_DOWN
è
quÜum
++;

3726 
	`diùR–—£I‹¿tÜ
(
di
);

3727 ià(
quÜum
 >ğ
ma¡”
->quÜumè
odown
 = 1;

3731 ià(
odown
) {

3732 ià((
ma¡”
->
æags
 & 
SRI_O_DOWN
) == 0) {

3733 
	`£Áš–Ev’t
(
LL_WARNING
,"+odown",
ma¡”
,"%@ #quorum %d/%d",

3734 
quÜum
, 
ma¡”
->quorum);

3735 
ma¡”
->
æags
 |ğ
SRI_O_DOWN
;

3736 
ma¡”
->
o_down_sšû_time
 = 
	`m¡ime
();

3739 ià(
ma¡”
->
æags
 & 
SRI_O_DOWN
) {

3740 
	`£Áš–Ev’t
(
LL_WARNING
,"-odown",
ma¡”
,"%@");

3741 
ma¡”
->
æags
 &ğ~
SRI_O_DOWN
;

3744 
	}
}

3748 
	$£Áš–ReûiveIsMa¡”DownR•ly
(
»disAsyncCÚ‹xt
 *
c
, *
»¶y
, *
´ivd©a
) {

3749 
£Áš–RedisIn¡ªû
 *
ri
 = 
´ivd©a
;

3750 
š¡ªûLšk
 *
lšk
 = 
c
->
d©a
;

3751 
»disR•ly
 *
r
;

3753 ià(!
»¶y
 || !
lšk
) ;

3754 
lšk
->
³ndšg_commªds
--;

3755 
r
 = 
»¶y
;

3760 ià(
r
->
ty³
 =ğ
REDIS_REPLY_ARRAY
 &&„->
–em’ts
 == 3 &&

3761 
r
->
–em’t
[0]->
ty³
 =ğ
REDIS_REPLY_INTEGER
 &&

3762 
r
->
–em’t
[1]->
ty³
 =ğ
REDIS_REPLY_STRING
 &&

3763 
r
->
–em’t
[2]->
ty³
 =ğ
REDIS_REPLY_INTEGER
)

3765 
ri
->
Ï¡_ma¡”_down_»¶y_time
 = 
	`m¡ime
();

3766 ià(
r
->
–em’t
[0]->
š‹g”
 == 1) {

3767 
ri
->
æags
 |ğ
SRI_MASTER_DOWN
;

3769 
ri
->
æags
 &ğ~
SRI_MASTER_DOWN
;

3771 ià(
	`¡rcmp
(
r
->
–em’t
[1]->
¡r
,"*")) {

3774 
	`sdsä“
(
ri
->
Ëad”
);

3775 ià(()
ri
->
Ëad”_•och
 !ğ
r
->
–em’t
[2]->
š‹g”
)

3776 
	`£rv”Log
(
LL_WARNING
,

3777 "% vÙed fÜ % %Îu", 
ri
->
Çme
,

3778 
r
->
–em’t
[1]->
¡r
,

3779 (è
r
->
–em’t
[2]->
š‹g”
);

3780 
ri
->
Ëad”
 = 
	`sd¢ew
(
r
->
–em’t
[1]->
¡r
);

3781 
ri
->
Ëad”_•och
 = 
r
->
–em’t
[2]->
š‹g”
;

3784 
	}
}

3790 
	#SENTINEL_ASK_FORCED
 (1<<0)

	)

3791 
	$£Áš–AskMa¡”S‹ToOth”S’tš–s
(
£Áš–RedisIn¡ªû
 *
ma¡”
, 
æags
) {

3792 
diùI‹¿tÜ
 *
di
;

3793 
diùEÁry
 *
de
;

3795 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
£Áš–s
);

3796 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3797 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3798 
m¡ime_t
 
–­£d
 = 
	`m¡ime
(è- 
ri
->
Ï¡_ma¡”_down_»¶y_time
;

3799 
pÜt
[32];

3800 
»tv®
;

3803 ià(
–­£d
 > 
SENTINEL_ASK_PERIOD
*5) {

3804 
ri
->
æags
 &ğ~
SRI_MASTER_DOWN
;

3805 
	`sdsä“
(
ri
->
Ëad”
);

3806 
ri
->
Ëad”
 = 
NULL
;

3814 ià((
ma¡”
->
æags
 & 
SRI_S_DOWN
) == 0) ;

3815 ià(
ri
->
lšk
->
discÚÃùed
) ;

3816 ià(!(
æags
 & 
SENTINEL_ASK_FORCED
) &&

3817 
	`m¡ime
(è- 
ri
->
Ï¡_ma¡”_down_»¶y_time
 < 
SENTINEL_ASK_PERIOD
)

3821 
	`Î2¡ršg
(
pÜt
,ÕÜt),
ma¡”
->
addr
->port);

3822 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

3823 
£Áš–ReûiveIsMa¡”DownR•ly
, 
ri
,

3825 
	`£Áš–In¡ªûM­Commªd
(
ri
,"SENTINEL"),

3826 
ma¡”
->
addr
->

, 
pÜt
,

3827 
£Áš–
.
cu¼’t_•och
,

3828 (
ma¡”
->
çov”_¡©e
 > 
SENTINEL_FAILOVER_STATE_NONE
) ?

3829 
£Áš–
.
myid
 : "*");

3830 ià(
»tv®
 =ğ
C_OK
è
ri
->
lšk
->
³ndšg_commªds
++;

3832 
	`diùR–—£I‹¿tÜ
(
di
);

3833 
	}
}

3838 
	$£Áš–SimFau»C¿sh
() {

3839 
	`£rv”Log
(
LL_WARNING
,

3841 
	`ex™
(99);

3842 
	}
}

3849 *
	$£Áš–VÙeL—d”
(
£Áš–RedisIn¡ªû
 *
ma¡”
, 
ušt64_t
 
»q_•och
, *
»q_runid
, ušt64_ˆ*
Ëad”_•och
) {

3850 ià(
»q_•och
 > 
£Áš–
.
cu¼’t_•och
) {

3851 
£Áš–
.
cu¼’t_•och
 = 
»q_•och
;

3852 
	`£Áš–FlushCÚfig
();

3853 
	`£Áš–Ev’t
(
LL_WARNING
,"+Ãw-•och",
ma¡”
,"%llu",

3854 (è
£Áš–
.
cu¼’t_•och
);

3857 ià(
ma¡”
->
Ëad”_•och
 < 
»q_•och
 && 
£Áš–
.
cu¼’t_•och
 <=„eq_epoch)

3859 
	`sdsä“
(
ma¡”
->
Ëad”
);

3860 
ma¡”
->
Ëad”
 = 
	`sd¢ew
(
»q_runid
);

3861 
ma¡”
->
Ëad”_•och
 = 
£Áš–
.
cu¼’t_•och
;

3862 
	`£Áš–FlushCÚfig
();

3863 
	`£Áš–Ev’t
(
LL_WARNING
,"+vÙe-fÜ-Ëad”",
ma¡”
,"%s %llu",

3864 
ma¡”
->
Ëad”
, (èma¡”->
Ëad”_•och
);

3868 ià(
	`¡rÿ£cmp
(
ma¡”
->
Ëad”
,
£Áš–
.
myid
))

3869 
ma¡”
->
çov”_¡¬t_time
 = 
	`m¡ime
()+
	`¿nd
()%
SENTINEL_MAX_DESYNC
;

3872 *
Ëad”_•och
 = 
ma¡”
->leader_epoch;

3873  
ma¡”
->
Ëad”
 ? 
	`sd¢ew
(ma¡”->Ëad”è: 
NULL
;

3874 
	}
}

3876 
	s£Áš–L—d”
 {

3877 *
	mrunid
;

3878 
	mvÙes
;

3883 
	$£Áš–L—d”Inü
(
diù
 *
couÁ”s
, *
runid
) {

3884 
diùEÁry
 *
exi¡šg
, *
de
;

3885 
ušt64_t
 
Şdv®
;

3887 
de
 = 
	`diùAddRaw
(
couÁ”s
,
runid
,&
exi¡šg
);

3888 ià(
exi¡šg
) {

3889 
Şdv®
 = 
	`diùG‘UnsigÃdIÁeg”V®
(
exi¡šg
);

3890 
	`diùS‘UnsigÃdIÁeg”V®
(
exi¡šg
,
Şdv®
+1);

3891  
Şdv®
+1;

3893 
	`£rv”As£¹
(
de
 !ğ
NULL
);

3894 
	`diùS‘UnsigÃdIÁeg”V®
(
de
,1);

3897 
	}
}

3905 *
	$£Áš–G‘L—d”
(
£Áš–RedisIn¡ªû
 *
ma¡”
, 
ušt64_t
 
•och
) {

3906 
diù
 *
couÁ”s
;

3907 
diùI‹¿tÜ
 *
di
;

3908 
diùEÁry
 *
de
;

3909 
vÙ”s
 = 0, 
vÙ”s_quÜum
;

3910 *
myvÙe
;

3911 *
wšÃr
 = 
NULL
;

3912 
ušt64_t
 
Ëad”_•och
;

3913 
ušt64_t
 
max_vÙes
 = 0;

3915 
	`£rv”As£¹
(
ma¡”
->
æags
 & (
SRI_O_DOWN
|
SRI_FAILOVER_IN_PROGRESS
));

3916 
couÁ”s
 = 
	`diùC»©e
(&
Ëad”VÙesDiùTy³
,
NULL
);

3918 
vÙ”s
 = 
	`diùSize
(
ma¡”
->
£Áš–s
)+1;

3921 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
£Áš–s
);

3922 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3923 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

3924 ià(
ri
->
Ëad”
 !ğ
NULL
 &&„i->
Ëad”_•och
 =ğ
£Áš–
.
cu¼’t_•och
)

3925 
	`£Áš–L—d”Inü
(
couÁ”s
,
ri
->
Ëad”
);

3927 
	`diùR–—£I‹¿tÜ
(
di
);

3932 
di
 = 
	`diùG‘I‹¿tÜ
(
couÁ”s
);

3933 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3934 
ušt64_t
 
vÙes
 = 
	`diùG‘UnsigÃdIÁeg”V®
(
de
);

3936 ià(
vÙes
 > 
max_vÙes
) {

3937 
max_vÙes
 = 
vÙes
;

3938 
wšÃr
 = 
	`diùG‘Key
(
de
);

3941 
	`diùR–—£I‹¿tÜ
(
di
);

3946 ià(
wšÃr
)

3947 
myvÙe
 = 
	`£Áš–VÙeL—d”
(
ma¡”
,
•och
,
wšÃr
,&
Ëad”_•och
);

3949 
myvÙe
 = 
	`£Áš–VÙeL—d”
(
ma¡”
,
•och
,
£Áš–
.
myid
,&
Ëad”_•och
);

3951 ià(
myvÙe
 && 
Ëad”_•och
 =ğ
•och
) {

3952 
ušt64_t
 
vÙes
 = 
	`£Áš–L—d”Inü
(
couÁ”s
,
myvÙe
);

3954 ià(
vÙes
 > 
max_vÙes
) {

3955 
max_vÙes
 = 
vÙes
;

3956 
wšÃr
 = 
myvÙe
;

3960 
vÙ”s_quÜum
 = 
vÙ”s
/2+1;

3961 ià(
wšÃr
 && (
max_vÙes
 < 
vÙ”s_quÜum
 || max_vÙe < 
ma¡”
->
quÜum
))

3962 
wšÃr
 = 
NULL
;

3964 
wšÃr
 = wšÃ¸? 
	`sd¢ew
(wšÃrè: 
NULL
;

3965 
	`sdsä“
(
myvÙe
);

3966 
	`diùR–—£
(
couÁ”s
);

3967  
wšÃr
;

3968 
	}
}

3980 
	$£Áš–S’dSÏveOf
(
£Áš–RedisIn¡ªû
 *
ri
, *
ho¡
, 
pÜt
) {

3981 
pÜt¡r
[32];

3982 
»tv®
;

3984 
	`Î2¡ršg
(
pÜt¡r
,ÕÜt¡r),
pÜt
);

3988 ià(
ho¡
 =ğ
NULL
) {

3989 
ho¡
 = "NO";

3990 
	`memıy
(
pÜt¡r
,"ONE",4);

4003 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

4004 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s",

4005 
	`£Áš–In¡ªûM­Commªd
(
ri
,"MULTI"));

4006 ià(
»tv®
 =ğ
C_ERR
) „etval;

4007 
ri
->
lšk
->
³ndšg_commªds
++;

4009 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

4010 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s %s %s",

4011 
	`£Áš–In¡ªûM­Commªd
(
ri
,"SLAVEOF"),

4012 
ho¡
, 
pÜt¡r
);

4013 ià(
»tv®
 =ğ
C_ERR
) „etval;

4014 
ri
->
lšk
->
³ndšg_commªds
++;

4016 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

4017 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s REWRITE",

4018 
	`£Áš–In¡ªûM­Commªd
(
ri
,"CONFIG"));

4019 ià(
»tv®
 =ğ
C_ERR
) „etval;

4020 
ri
->
lšk
->
³ndšg_commªds
++;

4027 
ty³
 = 0;ype < 2;ype++) {

4028 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

4029 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s KILL TYPE %s",

4030 
	`£Áš–In¡ªûM­Commªd
(
ri
,"CLIENT"),

4031 
ty³
 == 0 ? "normal" : "pubsub");

4032 ià(
»tv®
 =ğ
C_ERR
) „etval;

4033 
ri
->
lšk
->
³ndšg_commªds
++;

4036 
»tv®
 = 
	`»disAsyncCommªd
(
ri
->
lšk
->
cc
,

4037 
£Áš–DisÿrdR•lyC®lback
, 
ri
, "%s",

4038 
	`£Áš–In¡ªûM­Commªd
(
ri
,"EXEC"));

4039 ià(
»tv®
 =ğ
C_ERR
) „etval;

4040 
ri
->
lšk
->
³ndšg_commªds
++;

4042  
C_OK
;

4043 
	}
}

4046 
	$£Áš–S¹Faov”
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4047 
	`£rv”As£¹
(
ma¡”
->
æags
 & 
SRI_MASTER
);

4049 
ma¡”
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_WAIT_START
;

4050 
ma¡”
->
æags
 |ğ
SRI_FAILOVER_IN_PROGRESS
;

4051 
ma¡”
->
çov”_•och
 = ++
£Áš–
.
cu¼’t_•och
;

4052 
	`£Áš–Ev’t
(
LL_WARNING
,"+Ãw-•och",
ma¡”
,"%llu",

4053 (è
£Áš–
.
cu¼’t_•och
);

4054 
	`£Áš–Ev’t
(
LL_WARNING
,"+Œy-çov”",
ma¡”
,"%@");

4055 
ma¡”
->
çov”_¡¬t_time
 = 
	`m¡ime
()+
	`¿nd
()%
SENTINEL_MAX_DESYNC
;

4056 
ma¡”
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4057 
	}
}

4070 
	$£Áš–S¹Faov”IfN“ded
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4072 ià(!(
ma¡”
->
æags
 & 
SRI_O_DOWN
))  0;

4075 ià(
ma¡”
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
)  0;

4078 ià(
	`m¡ime
(è- 
ma¡”
->
çov”_¡¬t_time
 <

4079 
ma¡”
->
çov”_timeout
*2)

4081 ià(
ma¡”
->
çov”_d–ay_logged
 !ğma¡”->
çov”_¡¬t_time
) {

4082 
time_t
 
şock
 = (
ma¡”
->
çov”_¡¬t_time
 +

4083 
ma¡”
->
çov”_timeout
*2) / 1000;

4084 
ùimebuf
[26];

4086 
	`ùime_r
(&
şock
,
ùimebuf
);

4087 
ùimebuf
[24] = '\0';

4088 
ma¡”
->
çov”_d–ay_logged
 = ma¡”->
çov”_¡¬t_time
;

4089 
	`£rv”Log
(
LL_WARNING
,

4091 
ùimebuf
);

4096 
	`£Áš–S¹Faov”
(
ma¡”
);

4098 
	}
}

4132 
	$com·»SÏvesFÜPromÙiÚ
(cÚ¡ *
a
, cÚ¡ *
b
) {

4133 
£Áš–RedisIn¡ªû
 **
§
 = (£Áš–RedisIn¡ªû **)
a
,

4134 **
sb
 = (
£Áš–RedisIn¡ªû
 **)
b
;

4135 *
§_runid
, *
sb_runid
;

4137 ià((*
§
)->
¦ave_´iÜ™y
 !ğ(*
sb
)->slave_priority)

4138  (*
§
)->
¦ave_´iÜ™y
 - (*
sb
)->slave_priority;

4142 ià((*
§
)->
¦ave_»¶_off£t
 > (*
sb
)->slave_repl_offset) {

4144 } ià((*
§
)->
¦ave_»¶_off£t
 < (*
sb
)->slave_repl_offset) {

4152 
§_runid
 = (*
§
)->
runid
;

4153 
sb_runid
 = (*
sb
)->
runid
;

4154 ià(
§_runid
 =ğ
NULL
 && 
sb_runid
 == NULL)  0;

4155 ià(
§_runid
 =ğ
NULL
)  1;

4156 ià(
sb_runid
 =ğ
NULL
)  -1;

4157  
	`¡rÿ£cmp
(
§_runid
, 
sb_runid
);

4158 
	}
}

4160 
£Áš–RedisIn¡ªû
 *
	$£Áš–S–eùSÏve
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4161 
£Áš–RedisIn¡ªû
 **
š¡ªû
 =

4162 
	`zm®loc
((
š¡ªû
[0])*
	`diùSize
(
ma¡”
->
¦aves
));

4163 
£Áš–RedisIn¡ªû
 *
£Ëùed
 = 
NULL
;

4164 
š¡ªûs
 = 0;

4165 
diùI‹¿tÜ
 *
di
;

4166 
diùEÁry
 *
de
;

4167 
m¡ime_t
 
max_ma¡”_down_time
 = 0;

4169 ià(
ma¡”
->
æags
 & 
SRI_S_DOWN
)

4170 
max_ma¡”_down_time
 +ğ
	`m¡ime
(è- 
ma¡”
->
s_down_sšû_time
;

4171 
max_ma¡”_down_time
 +ğ
ma¡”
->
down_aá”_³riod
 * 10;

4173 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

4174 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4175 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

4176 
m¡ime_t
 
šfo_v®id™y_time
;

4178 ià(
¦ave
->
æags
 & (
SRI_S_DOWN
|
SRI_O_DOWN
)) ;

4179 ià(
¦ave
->
lšk
->
discÚÃùed
) ;

4180 ià(
	`m¡ime
(è- 
¦ave
->
lšk
->
Ï¡_ava_time
 > 
SENTINEL_PING_PERIOD
*5) ;

4181 ià(
¦ave
->
¦ave_´iÜ™y
 == 0) ;

4186 ià(
ma¡”
->
æags
 & 
SRI_S_DOWN
)

4187 
šfo_v®id™y_time
 = 
SENTINEL_PING_PERIOD
*5;

4189 
šfo_v®id™y_time
 = 
SENTINEL_INFO_PERIOD
*3;

4190 ià(
	`m¡ime
(è- 
¦ave
->
šfo_»äesh
 > 
šfo_v®id™y_time
) ;

4191 ià(
¦ave
->
ma¡”_lšk_down_time
 > 
max_ma¡”_down_time
) ;

4192 
š¡ªû
[
š¡ªûs
++] = 
¦ave
;

4194 
	`diùR–—£I‹¿tÜ
(
di
);

4195 ià(
š¡ªûs
) {

4196 
	`qsÜt
(
š¡ªû
,
š¡ªûs
,(
£Áš–RedisIn¡ªû
*),

4197 
com·»SÏvesFÜPromÙiÚ
);

4198 
£Ëùed
 = 
š¡ªû
[0];

4200 
	`zä“
(
š¡ªû
);

4201  
£Ëùed
;

4202 
	}
}

4205 
	$£Áš–Faov”Wa™S¹
(
£Áš–RedisIn¡ªû
 *
ri
) {

4206 *
Ëad”
;

4207 
i¦—d”
;

4210 
Ëad”
 = 
	`£Áš–G‘L—d”
(
ri
,„i->
çov”_•och
);

4211 
i¦—d”
 = 
Ëad”
 && 
	`¡rÿ£cmp
Ö—d”,
£Áš–
.
myid
) == 0;

4212 
	`sdsä“
(
Ëad”
);

4216 ià(!
i¦—d”
 && !(
ri
->
æags
 & 
SRI_FORCE_FAILOVER
)) {

4217 
–eùiÚ_timeout
 = 
SENTINEL_ELECTION_TIMEOUT
;

4221 ià(
–eùiÚ_timeout
 > 
ri
->
çov”_timeout
)

4222 
–eùiÚ_timeout
 = 
ri
->
çov”_timeout
;

4224 ià(
	`m¡ime
(è- 
ri
->
çov”_¡¬t_time
 > 
–eùiÚ_timeout
) {

4225 
	`£Áš–Ev’t
(
LL_WARNING
,"-çov”-abÜt-nÙ-–eùed",
ri
,"%@");

4226 
	`£Áš–AbÜtFaov”
(
ri
);

4230 
	`£Áš–Ev’t
(
LL_WARNING
,"+–eùed-Ëad”",
ri
,"%@");

4231 ià(
£Áš–
.
simçu»_æags
 & 
SENTINEL_SIMFAILURE_CRASH_AFTER_ELECTION
)

4232 
	`£Áš–SimFau»C¿sh
();

4233 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_SELECT_SLAVE
;

4234 
ri
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4235 
	`£Áš–Ev’t
(
LL_WARNING
,"+çov”-¡©e-£Ëù-¦ave",
ri
,"%@");

4236 
	}
}

4238 
	$£Áš–Faov”S–eùSÏve
(
£Áš–RedisIn¡ªû
 *
ri
) {

4239 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`£Áš–S–eùSÏve
(
ri
);

4243 ià(
¦ave
 =ğ
NULL
) {

4244 
	`£Áš–Ev’t
(
LL_WARNING
,"-çov”-abÜt-no-good-¦ave",
ri
,"%@");

4245 
	`£Áš–AbÜtFaov”
(
ri
);

4247 
	`£Áš–Ev’t
(
LL_WARNING
,"+£Ëùed-¦ave",
¦ave
,"%@");

4248 
¦ave
->
æags
 |ğ
SRI_PROMOTED
;

4249 
ri
->
´omÙed_¦ave
 = 
¦ave
;

4250 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_SEND_SLAVEOF_NOONE
;

4251 
ri
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4252 
	`£Áš–Ev’t
(
LL_NOTICE
,"+failover-state-send-slaveof-noone",

4253 
¦ave
, "%@");

4255 
	}
}

4257 
	$£Áš–Faov”S’dSÏveOfNoOÃ
(
£Áš–RedisIn¡ªû
 *
ri
) {

4258 
»tv®
;

4263 ià(
ri
->
´omÙed_¦ave
->
lšk
->
discÚÃùed
) {

4264 ià(
	`m¡ime
(è- 
ri
->
çov”_¡©e_chªge_time
 >„i->
çov”_timeout
) {

4265 
	`£Áš–Ev’t
(
LL_WARNING
,"-çov”-abÜt-¦ave-timeout",
ri
,"%@");

4266 
	`£Áš–AbÜtFaov”
(
ri
);

4275 
»tv®
 = 
	`£Áš–S’dSÏveOf
(
ri
->
´omÙed_¦ave
,
NULL
,0);

4276 ià(
»tv®
 !ğ
C_OK
) ;

4277 
	`£Áš–Ev’t
(
LL_NOTICE
, "+failover-state-wait-promotion",

4278 
ri
->
´omÙed_¦ave
,"%@");

4279 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
;

4280 
ri
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4281 
	}
}

4285 
	$£Áš–Faov”Wa™PromÙiÚ
(
£Áš–RedisIn¡ªû
 *
ri
) {

4288 ià(
	`m¡ime
(è- 
ri
->
çov”_¡©e_chªge_time
 >„i->
çov”_timeout
) {

4289 
	`£Áš–Ev’t
(
LL_WARNING
,"-çov”-abÜt-¦ave-timeout",
ri
,"%@");

4290 
	`£Áš–AbÜtFaov”
(
ri
);

4292 
	}
}

4294 
	$£Áš–Faov”D‘eùEnd
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4295 
nÙ_»cÚfigu»d
 = 0, 
timeout
 = 0;

4296 
diùI‹¿tÜ
 *
di
;

4297 
diùEÁry
 *
de
;

4298 
m¡ime_t
 
–­£d
 = 
	`m¡ime
(è- 
ma¡”
->
çov”_¡©e_chªge_time
;

4302 ià(
ma¡”
->
´omÙed_¦ave
 =ğ
NULL
 ||

4303 
ma¡”
->
´omÙed_¦ave
->
æags
 & 
SRI_S_DOWN
) ;

4307 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

4308 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4309 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

4311 ià(
¦ave
->
æags
 & (
SRI_PROMOTED
|
SRI_RECONF_DONE
)) ;

4312 ià(
¦ave
->
æags
 & 
SRI_S_DOWN
) ;

4313 
nÙ_»cÚfigu»d
++;

4315 
	`diùR–—£I‹¿tÜ
(
di
);

4318 ià(
–­£d
 > 
ma¡”
->
çov”_timeout
) {

4319 
nÙ_»cÚfigu»d
 = 0;

4320 
timeout
 = 1;

4321 
	`£Áš–Ev’t
(
LL_WARNING
,"+çov”-’d-fÜ-timeout",
ma¡”
,"%@");

4324 ià(
nÙ_»cÚfigu»d
 == 0) {

4325 
	`£Áš–Ev’t
(
LL_WARNING
,"+çov”-’d",
ma¡”
,"%@");

4326 
ma¡”
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_UPDATE_CONFIG
;

4327 
ma¡”
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4333 ià(
timeout
) {

4334 
diùI‹¿tÜ
 *
di
;

4335 
diùEÁry
 *
de
;

4337 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

4338 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4339 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

4340 
»tv®
;

4342 ià(
¦ave
->
æags
 & (
SRI_PROMOTED
|
SRI_RECONF_DONE
|
SRI_RECONF_SENT
)) ;

4343 ià(
¦ave
->
lšk
->
discÚÃùed
) ;

4345 
»tv®
 = 
	`£Áš–S’dSÏveOf
(
¦ave
,

4346 
ma¡”
->
´omÙed_¦ave
->
addr
->

,

4347 
ma¡”
->
´omÙed_¦ave
->
addr
->
pÜt
);

4348 ià(
»tv®
 =ğ
C_OK
) {

4349 
	`£Áš–Ev’t
(
LL_NOTICE
,"+¦ave-»cÚf-£Á-be",
¦ave
,"%@");

4350 
¦ave
->
æags
 |ğ
SRI_RECONF_SENT
;

4353 
	`diùR–—£I‹¿tÜ
(
di
);

4355 
	}
}

4359 
	$£Áš–Faov”RecÚfNextSÏve
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4360 
diùI‹¿tÜ
 *
di
;

4361 
diùEÁry
 *
de
;

4362 
š_´og»ss
 = 0;

4364 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

4365 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4366 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

4368 ià(
¦ave
->
æags
 & (
SRI_RECONF_SENT
|
SRI_RECONF_INPROG
))

4369 
š_´og»ss
++;

4371 
	`diùR–—£I‹¿tÜ
(
di
);

4373 
di
 = 
	`diùG‘I‹¿tÜ
(
ma¡”
->
¦aves
);

4374 
š_´og»ss
 < 
ma¡”
->
·¿Î–_syncs
 &&

4375 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
)

4377 
£Áš–RedisIn¡ªû
 *
¦ave
 = 
	`diùG‘V®
(
de
);

4378 
»tv®
;

4381 ià(
¦ave
->
æags
 & (
SRI_PROMOTED
|
SRI_RECONF_DONE
)) ;

4387 ià((
¦ave
->
æags
 & 
SRI_RECONF_SENT
) &&

4388 (
	`m¡ime
(è- 
¦ave
->
¦ave_»cÚf_£Á_time
) >

4389 
SENTINEL_SLAVE_RECONF_TIMEOUT
)

4391 
	`£Áš–Ev’t
(
LL_NOTICE
,"-¦ave-»cÚf-£Á-timeout",
¦ave
,"%@");

4392 
¦ave
->
æags
 &ğ~
SRI_RECONF_SENT
;

4393 
¦ave
->
æags
 |ğ
SRI_RECONF_DONE
;

4398 ià(
¦ave
->
æags
 & (
SRI_RECONF_SENT
|
SRI_RECONF_INPROG
)) ;

4399 ià(
¦ave
->
lšk
->
discÚÃùed
) ;

4402 
»tv®
 = 
	`£Áš–S’dSÏveOf
(
¦ave
,

4403 
ma¡”
->
´omÙed_¦ave
->
addr
->

,

4404 
ma¡”
->
´omÙed_¦ave
->
addr
->
pÜt
);

4405 ià(
»tv®
 =ğ
C_OK
) {

4406 
¦ave
->
æags
 |ğ
SRI_RECONF_SENT
;

4407 
¦ave
->
¦ave_»cÚf_£Á_time
 = 
	`m¡ime
();

4408 
	`£Áš–Ev’t
(
LL_NOTICE
,"+¦ave-»cÚf-£Á",
¦ave
,"%@");

4409 
š_´og»ss
++;

4412 
	`diùR–—£I‹¿tÜ
(
di
);

4415 
	`£Áš–Faov”D‘eùEnd
(
ma¡”
);

4416 
	}
}

4421 
	$£Áš–Faov”Sw™chToPromÙedSÏve
(
£Áš–RedisIn¡ªû
 *
ma¡”
) {

4422 
£Áš–RedisIn¡ªû
 *
»f
 = 
ma¡”
->
´omÙed_¦ave
 ?

4423 
ma¡”
->
´omÙed_¦ave
 : master;

4425 
	`£Áš–Ev’t
(
LL_WARNING
,"+sw™ch-ma¡”",
ma¡”
,"%s %s %d %s %d",

4426 
ma¡”
->
Çme
, ma¡”->
addr
->

, ma¡”->addr->
pÜt
,

4427 
»f
->
addr
->

,„ef->addr->
pÜt
);

4429 
	`£Áš–Re£tMa¡”AndChªgeAdd»ss
(
ma¡”
,
»f
->
addr
->

,»f->addr->
pÜt
);

4430 
	}
}

4432 
	$£Áš–Faov”S‹Machše
(
£Áš–RedisIn¡ªû
 *
ri
) {

4433 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_MASTER
);

4435 ià(!(
ri
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
)) ;

4437 
ri
->
çov”_¡©e
) {

4438 
SENTINEL_FAILOVER_STATE_WAIT_START
:

4439 
	`£Áš–Faov”Wa™S¹
(
ri
);

4441 
SENTINEL_FAILOVER_STATE_SELECT_SLAVE
:

4442 
	`£Áš–Faov”S–eùSÏve
(
ri
);

4444 
SENTINEL_FAILOVER_STATE_SEND_SLAVEOF_NOONE
:

4445 
	`£Áš–Faov”S’dSÏveOfNoOÃ
(
ri
);

4447 
SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
:

4448 
	`£Áš–Faov”Wa™PromÙiÚ
(
ri
);

4450 
SENTINEL_FAILOVER_STATE_RECONF_SLAVES
:

4451 
	`£Áš–Faov”RecÚfNextSÏve
(
ri
);

4454 
	}
}

4461 
	$£Áš–AbÜtFaov”
(
£Áš–RedisIn¡ªû
 *
ri
) {

4462 
	`£rv”As£¹
(
ri
->
æags
 & 
SRI_FAILOVER_IN_PROGRESS
);

4463 
	`£rv”As£¹
(
ri
->
çov”_¡©e
 <ğ
SENTINEL_FAILOVER_STATE_WAIT_PROMOTION
);

4465 
ri
->
æags
 &ğ~(
SRI_FAILOVER_IN_PROGRESS
|
SRI_FORCE_FAILOVER
);

4466 
ri
->
çov”_¡©e
 = 
SENTINEL_FAILOVER_STATE_NONE
;

4467 
ri
->
çov”_¡©e_chªge_time
 = 
	`m¡ime
();

4468 ià(
ri
->
´omÙed_¦ave
) {

4469 
ri
->
´omÙed_¦ave
->
æags
 &ğ~
SRI_PROMOTED
;

4470 
ri
->
´omÙed_¦ave
 = 
NULL
;

4472 
	}
}

4480 
	$£Áš–HªdËRedisIn¡ªû
(
£Áš–RedisIn¡ªû
 *
ri
) {

4483 
	`£Áš–RecÚÃùIn¡ªû
(
ri
);

4484 
	`£Áš–S’dP”iodicCommªds
(
ri
);

4490 ià(
£Áš–
.
tt
) {

4491 ià(
	`m¡ime
()-
£Áš–
.
tt_¡¬t_time
 < 
SENTINEL_TILT_PERIOD
) ;

4492 
£Áš–
.
tt
 = 0;

4493 
	`£Áš–Ev’t
(
LL_WARNING
,"-tt",
NULL
,"#tilt modeƒxited");

4497 
	`£Áš–CheckSubjeùiv–yDown
(
ri
);

4500 ià(
ri
->
æags
 & (
SRI_MASTER
|
SRI_SLAVE
)) {

4505 ià(
ri
->
æags
 & 
SRI_MASTER
) {

4506 
	`£Áš–CheckObjeùiv–yDown
(
ri
);

4507 ià(
	`£Áš–S¹Faov”IfN“ded
(
ri
))

4508 
	`£Áš–AskMa¡”S‹ToOth”S’tš–s
(
ri
,
SENTINEL_ASK_FORCED
);

4509 
	`£Áš–Faov”S‹Machše
(
ri
);

4510 
	`£Áš–AskMa¡”S‹ToOth”S’tš–s
(
ri
,
SENTINEL_NO_FLAGS
);

4512 
	}
}

4516 
	$£Áš–HªdËDiùOfRedisIn¡ªûs
(
diù
 *
š¡ªûs
) {

4517 
diùI‹¿tÜ
 *
di
;

4518 
diùEÁry
 *
de
;

4519 
£Áš–RedisIn¡ªû
 *
sw™ch_to_´omÙed
 = 
NULL
;

4522 
di
 = 
	`diùG‘I‹¿tÜ
(
š¡ªûs
);

4523 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4524 
£Áš–RedisIn¡ªû
 *
ri
 = 
	`diùG‘V®
(
de
);

4526 
	`£Áš–HªdËRedisIn¡ªû
(
ri
);

4527 ià(
ri
->
æags
 & 
SRI_MASTER
) {

4528 
	`£Áš–HªdËDiùOfRedisIn¡ªûs
(
ri
->
¦aves
);

4529 
	`£Áš–HªdËDiùOfRedisIn¡ªûs
(
ri
->
£Áš–s
);

4530 ià(
ri
->
çov”_¡©e
 =ğ
SENTINEL_FAILOVER_STATE_UPDATE_CONFIG
) {

4531 
sw™ch_to_´omÙed
 = 
ri
;

4535 ià(
sw™ch_to_´omÙed
)

4536 
	`£Áš–Faov”Sw™chToPromÙedSÏve
(
sw™ch_to_´omÙed
);

4537 
	`diùR–—£I‹¿tÜ
(
di
);

4538 
	}
}

4559 
	$£Áš–CheckTtCÚd™iÚ
() {

4560 
m¡ime_t
 
now
 = 
	`m¡ime
();

4561 
m¡ime_t
 
d–
 = 
now
 - 
£Áš–
.
´evious_time
;

4563 ià(
d–
 < 0 || d– > 
SENTINEL_TILT_TRIGGER
) {

4564 
£Áš–
.
tt
 = 1;

4565 
£Áš–
.
tt_¡¬t_time
 = 
	`m¡ime
();

4566 
	`£Áš–Ev’t
(
LL_WARNING
,"+tt",
NULL
,"#tilt modeƒntered");

4568 
£Áš–
.
´evious_time
 = 
	`m¡ime
();

4569 
	}
}

4571 
	$£Áš–Tim”
() {

4572 
	`£Áš–CheckTtCÚd™iÚ
();

4573 
	`£Áš–HªdËDiùOfRedisIn¡ªûs
(
£Áš–
.
ma¡”s
);

4574 
	`£Áš–RunP’dšgSüts
();

4575 
	`£Áš–CŞËùT”mš©edSüts
();

4576 
	`£Áš–KlTimedoutSüts
();

4584 
£rv”
.
hz
 = 
CONFIG_DEFAULT_HZ
 + 
	`¿nd
() % CONFIG_DEFAULT_HZ;

4585 
	}
}

	@server.c

30 
	~"£rv”.h
"

31 
	~"şu¡”.h
"

32 
	~"¦owlog.h
"

33 
	~"bio.h
"

34 
	~"Ï‹ncy.h
"

35 
	~"©omicv¬.h
"

37 
	~<time.h
>

38 
	~<sigÇl.h
>

39 
	~<sys/wa™.h
>

40 
	~<”ºo.h
>

41 
	~<as£¹.h
>

42 
	~<ùy³.h
>

43 
	~<¡d¬g.h
>

44 
	~<¬·/š‘.h
>

45 
	~<sys/¡©.h
>

46 
	~<fú.h
>

47 
	~<sys/time.h
>

48 
	~<sys/»sourû.h
>

49 
	~<sys/uio.h
>

50 
	~<sys/un.h
>

51 
	~<lim™s.h
>

52 
	~<æßt.h
>

53 
	~<m©h.h
>

54 
	~<sys/»sourû.h
>

55 
	~<sys/ut¢ame.h
>

56 
	~<loÿË.h
>

57 
	~<sys/sock‘.h
>

61 
sh¬edObjeùsSŒuù
 
	gsh¬ed
;

67 
	gR_Z”o
, 
	gR_PosInf
, 
	gR_NegInf
, 
	gR_Nª
;

72 
»disS”v”
 
	g£rv”
;

73 vŞ©
	gÌu_şock
;

182 
»disCommªd
 
	g»disCommªdTabË
[] = {

183 {"moduË",
moduËCommªd
,-2,

185 0,
NULL
,0,0,0,0,0,0},

187 {"g‘",
g‘Commªd
,2,

189 0,
NULL
,1,1,1,0,0,0},

193 {"£t",
£tCommªd
,-3,

195 0,
NULL
,1,1,1,0,0,0},

197 {"£Šx",
£ŠxCommªd
,3,

199 0,
NULL
,1,1,1,0,0,0},

201 {"£‹x",
£‹xCommªd
,4,

203 0,
NULL
,1,1,1,0,0,0},

205 {"p£‹x",
p£‹xCommªd
,4,

207 0,
NULL
,1,1,1,0,0,0},

209 {"­³nd",
­³ndCommªd
,3,

211 0,
NULL
,1,1,1,0,0,0},

213 {"¡¾’",
¡¾’Commªd
,2,

215 0,
NULL
,1,1,1,0,0,0},

217 {"d–",
d–Commªd
,-2,

219 0,
NULL
,1,-1,1,0,0,0},

221 {"uÆšk",
uÆškCommªd
,-2,

223 0,
NULL
,1,-1,1,0,0,0},

225 {"exi¡s",
exi¡sCommªd
,-2,

227 0,
NULL
,1,-1,1,0,0,0},

229 {"£tb™",
£tb™Commªd
,4,

231 0,
NULL
,1,1,1,0,0,0},

233 {"g‘b™",
g‘b™Commªd
,3,

235 0,
NULL
,1,1,1,0,0,0},

237 {"b™f›ld",
b™f›ldCommªd
,-2,

239 0,
NULL
,1,1,1,0,0,0},

241 {"b™f›ld_ro",
b™f›ldroCommªd
,-2,

243 0,
NULL
,1,1,1,0,0,0},

245 {"£Œªge",
£ŒªgeCommªd
,4,

247 0,
NULL
,1,1,1,0,0,0},

249 {"g‘¿nge",
g‘¿ngeCommªd
,4,

251 0,
NULL
,1,1,1,0,0,0},

253 {"sub¡r",
g‘¿ngeCommªd
,4,

255 0,
NULL
,1,1,1,0,0,0},

257 {"šü",
šüCommªd
,2,

259 0,
NULL
,1,1,1,0,0,0},

261 {"deü",
deüCommªd
,2,

263 0,
NULL
,1,1,1,0,0,0},

265 {"mg‘",
mg‘Commªd
,-2,

267 0,
NULL
,1,-1,1,0,0,0},

269 {"½ush",
½ushCommªd
,-3,

271 0,
NULL
,1,1,1,0,0,0},

273 {"Íush",
ÍushCommªd
,-3,

275 0,
NULL
,1,1,1,0,0,0},

277 {"½ushx",
½ushxCommªd
,-3,

279 0,
NULL
,1,1,1,0,0,0},

281 {"Íushx",
ÍushxCommªd
,-3,

283 0,
NULL
,1,1,1,0,0,0},

285 {"lš£¹",
lš£¹Commªd
,5,

287 0,
NULL
,1,1,1,0,0,0},

289 {"½İ",
½İCommªd
,2,

291 0,
NULL
,1,1,1,0,0,0},

293 {"Íİ",
ÍİCommªd
,2,

295 0,
NULL
,1,1,1,0,0,0},

297 {"b½İ",
b½İCommªd
,-3,

299 0,
NULL
,1,-2,1,0,0,0},

301 {"b½İÍush",
b½İÍushCommªd
,4,

303 0,
NULL
,1,2,1,0,0,0},

305 {"bÍİ",
bÍİCommªd
,-3,

307 0,
NULL
,1,-2,1,0,0,0},

309 {"Î’",
Î’Commªd
,2,

311 0,
NULL
,1,1,1,0,0,0},

313 {"lšdex",
lšdexCommªd
,3,

315 0,
NULL
,1,1,1,0,0,0},

317 {"l£t",
l£tCommªd
,4,

319 0,
NULL
,1,1,1,0,0,0},

321 {"Ìªge",
ÌªgeCommªd
,4,

323 0,
NULL
,1,1,1,0,0,0},

325 {"Érim",
ÉrimCommªd
,4,

327 0,
NULL
,1,1,1,0,0,0},

329 {"Ìem",
ÌemCommªd
,4,

331 0,
NULL
,1,1,1,0,0,0},

333 {"½İÍush",
½İÍushCommªd
,3,

335 0,
NULL
,1,2,1,0,0,0},

337 {"§dd",
§ddCommªd
,-3,

339 0,
NULL
,1,1,1,0,0,0},

341 {"¤em",
¤emCommªd
,-3,

343 0,
NULL
,1,1,1,0,0,0},

345 {"smove",
smoveCommªd
,4,

347 0,
NULL
,1,2,1,0,0,0},

349 {"sismemb”",
sismemb”Commªd
,3,

351 0,
NULL
,1,1,1,0,0,0},

353 {"sÿrd",
sÿrdCommªd
,2,

355 0,
NULL
,1,1,1,0,0,0},

357 {"¥İ",
¥İCommªd
,-2,

359 0,
NULL
,1,1,1,0,0,0},

361 {"¤ªdmemb”",
¤ªdmemb”Commªd
,-2,

363 0,
NULL
,1,1,1,0,0,0},

365 {"sš‹r",
sš‹rCommªd
,-2,

367 0,
NULL
,1,-1,1,0,0,0},

369 {"sš‹r¡Üe",
sš‹r¡ÜeCommªd
,-3,

371 0,
NULL
,1,-1,1,0,0,0},

373 {"suniÚ",
suniÚCommªd
,-2,

375 0,
NULL
,1,-1,1,0,0,0},

377 {"suniÚ¡Üe",
suniÚ¡ÜeCommªd
,-3,

379 0,
NULL
,1,-1,1,0,0,0},

381 {"sdiff",
sdiffCommªd
,-2,

383 0,
NULL
,1,-1,1,0,0,0},

385 {"sdiff¡Üe",
sdiff¡ÜeCommªd
,-3,

387 0,
NULL
,1,-1,1,0,0,0},

389 {"smemb”s",
sš‹rCommªd
,2,

391 0,
NULL
,1,1,1,0,0,0},

393 {"ssÿn",
ssÿnCommªd
,-3,

395 0,
NULL
,1,1,1,0,0,0},

397 {"zadd",
zaddCommªd
,-4,

399 0,
NULL
,1,1,1,0,0,0},

401 {"zšüby",
zšübyCommªd
,4,

403 0,
NULL
,1,1,1,0,0,0},

405 {"z»m",
z»mCommªd
,-3,

407 0,
NULL
,1,1,1,0,0,0},

409 {"z»m¿ngebyscÜe",
z»m¿ngebyscÜeCommªd
,4,

411 0,
NULL
,1,1,1,0,0,0},

413 {"z»m¿ngeby¿nk",
z»m¿ngeby¿nkCommªd
,4,

415 0,
NULL
,1,1,1,0,0,0},

417 {"z»m¿ngebyËx",
z»m¿ngebyËxCommªd
,4,

419 0,
NULL
,1,1,1,0,0,0},

421 {"zuniÚ¡Üe",
zuniÚ¡ÜeCommªd
,-4,

423 0,
zuniÚIÁ”G‘Keys
,0,0,0,0,0,0},

425 {"zš‹r¡Üe",
zš‹r¡ÜeCommªd
,-4,

427 0,
zuniÚIÁ”G‘Keys
,0,0,0,0,0,0},

429 {"z¿nge",
z¿ngeCommªd
,-4,

431 0,
NULL
,1,1,1,0,0,0},

433 {"z¿ngebyscÜe",
z¿ngebyscÜeCommªd
,-4,

435 0,
NULL
,1,1,1,0,0,0},

437 {"z»v¿ngebyscÜe",
z»v¿ngebyscÜeCommªd
,-4,

439 0,
NULL
,1,1,1,0,0,0},

441 {"z¿ngebyËx",
z¿ngebyËxCommªd
,-4,

443 0,
NULL
,1,1,1,0,0,0},

445 {"z»v¿ngebyËx",
z»v¿ngebyËxCommªd
,-4,

447 0,
NULL
,1,1,1,0,0,0},

449 {"zcouÁ",
zcouÁCommªd
,4,

451 0,
NULL
,1,1,1,0,0,0},

453 {"zËxcouÁ",
zËxcouÁCommªd
,4,

455 0,
NULL
,1,1,1,0,0,0},

457 {"z»v¿nge",
z»v¿ngeCommªd
,-4,

459 0,
NULL
,1,1,1,0,0,0},

461 {"zÿrd",
zÿrdCommªd
,2,

463 0,
NULL
,1,1,1,0,0,0},

465 {"zscÜe",
zscÜeCommªd
,3,

467 0,
NULL
,1,1,1,0,0,0},

469 {"z¿nk",
z¿nkCommªd
,3,

471 0,
NULL
,1,1,1,0,0,0},

473 {"z»v¿nk",
z»v¿nkCommªd
,3,

475 0,
NULL
,1,1,1,0,0,0},

477 {"zsÿn",
zsÿnCommªd
,-3,

479 0,
NULL
,1,1,1,0,0,0},

481 {"zpİmš",
zpİmšCommªd
,-2,

483 0,
NULL
,1,1,1,0,0,0},

485 {"zpİmax",
zpİmaxCommªd
,-2,

487 0,
NULL
,1,1,1,0,0,0},

489 {"bzpİmš",
bzpİmšCommªd
,-3,

491 0,
NULL
,1,-2,1,0,0,0},

493 {"bzpİmax",
bzpİmaxCommªd
,-3,

495 0,
NULL
,1,-2,1,0,0,0},

497 {"h£t",
h£tCommªd
,-4,

499 0,
NULL
,1,1,1,0,0,0},

501 {"h£Šx",
h£ŠxCommªd
,4,

503 0,
NULL
,1,1,1,0,0,0},

505 {"hg‘",
hg‘Commªd
,3,

507 0,
NULL
,1,1,1,0,0,0},

509 {"hm£t",
h£tCommªd
,-4,

511 0,
NULL
,1,1,1,0,0,0},

513 {"hmg‘",
hmg‘Commªd
,-3,

515 0,
NULL
,1,1,1,0,0,0},

517 {"hšüby",
hšübyCommªd
,4,

519 0,
NULL
,1,1,1,0,0,0},

521 {"hšübyæßt",
hšübyæßtCommªd
,4,

523 0,
NULL
,1,1,1,0,0,0},

525 {"hd–",
hd–Commªd
,-3,

527 0,
NULL
,1,1,1,0,0,0},

529 {"hËn",
hËnCommªd
,2,

531 0,
NULL
,1,1,1,0,0,0},

533 {"h¡¾’",
h¡¾’Commªd
,3,

535 0,
NULL
,1,1,1,0,0,0},

537 {"hkeys",
hkeysCommªd
,2,

539 0,
NULL
,1,1,1,0,0,0},

541 {"hv®s",
hv®sCommªd
,2,

543 0,
NULL
,1,1,1,0,0,0},

545 {"hg‘®l",
hg‘®lCommªd
,2,

547 0,
NULL
,1,1,1,0,0,0},

549 {"hexi¡s",
hexi¡sCommªd
,3,

551 0,
NULL
,1,1,1,0,0,0},

553 {"hsÿn",
hsÿnCommªd
,-3,

555 0,
NULL
,1,1,1,0,0,0},

557 {"šüby",
šübyCommªd
,3,

559 0,
NULL
,1,1,1,0,0,0},

561 {"deüby",
deübyCommªd
,3,

563 0,
NULL
,1,1,1,0,0,0},

565 {"šübyæßt",
šübyæßtCommªd
,3,

567 0,
NULL
,1,1,1,0,0,0},

569 {"g‘£t",
g‘£tCommªd
,3,

571 0,
NULL
,1,1,1,0,0,0},

573 {"m£t",
m£tCommªd
,-3,

575 0,
NULL
,1,-1,2,0,0,0},

577 {"m£Šx",
m£ŠxCommªd
,-3,

579 0,
NULL
,1,-1,2,0,0,0},

581 {"¿ndomkey",
¿ndomkeyCommªd
,1,

583 0,
NULL
,0,0,0,0,0,0},

585 {"£Ëù",
£ËùCommªd
,2,

587 0,
NULL
,0,0,0,0,0,0},

589 {"sw­db",
sw­dbCommªd
,3,

591 0,
NULL
,0,0,0,0,0,0},

593 {"move",
moveCommªd
,3,

595 0,
NULL
,1,1,1,0,0,0},

599 {"»Çme",
»ÇmeCommªd
,3,

601 0,
NULL
,1,2,1,0,0,0},

603 {"»Çm’x",
»Çm’xCommªd
,3,

605 0,
NULL
,1,2,1,0,0,0},

607 {"expœe",
expœeCommªd
,3,

609 0,
NULL
,1,1,1,0,0,0},

611 {"expœ—t",
expœ—tCommªd
,3,

613 0,
NULL
,1,1,1,0,0,0},

615 {"³xpœe",
³xpœeCommªd
,3,

617 0,
NULL
,1,1,1,0,0,0},

619 {"³xpœ—t",
³xpœ—tCommªd
,3,

621 0,
NULL
,1,1,1,0,0,0},

623 {"keys",
keysCommªd
,2,

625 0,
NULL
,0,0,0,0,0,0},

627 {"sÿn",
sÿnCommªd
,-2,

629 0,
NULL
,0,0,0,0,0,0},

631 {"dbsize",
dbsizeCommªd
,1,

633 0,
NULL
,0,0,0,0,0,0},

635 {"auth",
authCommªd
,-2,

637 0,
NULL
,0,0,0,0,0,0},

642 {"pšg",
pšgCommªd
,-1,

644 0,
NULL
,0,0,0,0,0,0},

646 {"echo",
echoCommªd
,2,

648 0,
NULL
,0,0,0,0,0,0},

650 {"§ve",
§veCommªd
,1,

652 0,
NULL
,0,0,0,0,0,0},

654 {"bg§ve",
bg§veCommªd
,-1,

656 0,
NULL
,0,0,0,0,0,0},

658 {"bg»wr™—of",
bg»wr™—ofCommªd
,1,

660 0,
NULL
,0,0,0,0,0,0},

662 {"shutdown",
shutdownCommªd
,-1,

664 0,
NULL
,0,0,0,0,0,0},

666 {"Ï¡§ve",
Ï¡§veCommªd
,1,

668 0,
NULL
,0,0,0,0,0,0},

670 {"ty³",
ty³Commªd
,2,

672 0,
NULL
,1,1,1,0,0,0},

674 {"muÉi",
muÉiCommªd
,1,

676 0,
NULL
,0,0,0,0,0,0},

678 {"exec",
execCommªd
,1,

680 0,
NULL
,0,0,0,0,0,0},

682 {"disÿrd",
disÿrdCommªd
,1,

684 0,
NULL
,0,0,0,0,0,0},

686 {"sync",
syncCommªd
,1,

688 0,
NULL
,0,0,0,0,0,0},

690 {"psync",
syncCommªd
,3,

692 0,
NULL
,0,0,0,0,0,0},

694 {"»¶cÚf",
»¶cÚfCommªd
,-1,

696 0,
NULL
,0,0,0,0,0,0},

698 {"æushdb",
æushdbCommªd
,-1,

700 0,
NULL
,0,0,0,0,0,0},

702 {"æush®l",
æush®lCommªd
,-1,

704 0,
NULL
,0,0,0,0,0,0},

706 {"sÜt",
sÜtCommªd
,-2,

708 0,
sÜtG‘Keys
,1,1,1,0,0,0},

710 {"šfo",
šfoCommªd
,-1,

712 0,
NULL
,0,0,0,0,0,0},

714 {"mÚ™Ü",
mÚ™ÜCommªd
,1,

716 0,
NULL
,0,0,0,0,0,0},

718 {"‰l",
‰lCommªd
,2,

720 0,
NULL
,1,1,1,0,0,0},

722 {"touch",
touchCommªd
,-2,

724 0,
NULL
,1,-1,1,0,0,0},

726 {"±",
±Commªd
,2,

728 0,
NULL
,1,1,1,0,0,0},

730 {"³rsi¡",
³rsi¡Commªd
,2,

732 0,
NULL
,1,1,1,0,0,0},

734 {"¦aveof",
»¶iÿofCommªd
,3,

736 0,
NULL
,0,0,0,0,0,0},

738 {"»¶iÿof",
»¶iÿofCommªd
,3,

740 0,
NULL
,0,0,0,0,0,0},

742 {"rŞe",
rŞeCommªd
,1,

744 0,
NULL
,0,0,0,0,0,0},

746 {"debug",
debugCommªd
,-2,

748 0,
NULL
,0,0,0,0,0,0},

750 {"cÚfig",
cÚfigCommªd
,-2,

752 0,
NULL
,0,0,0,0,0,0},

754 {"subsüibe",
subsüibeCommªd
,-2,

756 0,
NULL
,0,0,0,0,0,0},

758 {"unsubsüibe",
unsubsüibeCommªd
,-1,

760 0,
NULL
,0,0,0,0,0,0},

762 {"psubsüibe",
psubsüibeCommªd
,-2,

764 0,
NULL
,0,0,0,0,0,0},

766 {"punsubsüibe",
punsubsüibeCommªd
,-1,

768 0,
NULL
,0,0,0,0,0,0},

770 {"publish",
publishCommªd
,3,

772 0,
NULL
,0,0,0,0,0,0},

774 {"pubsub",
pubsubCommªd
,-2,

776 0,
NULL
,0,0,0,0,0,0},

778 {"w©ch",
w©chCommªd
,-2,

780 0,
NULL
,1,-1,1,0,0,0},

782 {"unw©ch",
unw©chCommªd
,1,

784 0,
NULL
,0,0,0,0,0,0},

786 {"şu¡”",
şu¡”Commªd
,-2,

788 0,
NULL
,0,0,0,0,0,0},

790 {"»¡Üe",
»¡ÜeCommªd
,-4,

792 0,
NULL
,1,1,1,0,0,0},

794 {"»¡Üe-askšg",
»¡ÜeCommªd
,-4,

796 0,
NULL
,1,1,1,0,0,0},

798 {"mig¿‹",
mig¿‹Commªd
,-6,

800 0,
mig¿‹G‘Keys
,0,0,0,0,0,0},

802 {"askšg",
askšgCommªd
,1,

804 0,
NULL
,0,0,0,0,0,0},

806 {"»adÚly",
»adÚlyCommªd
,1,

808 0,
NULL
,0,0,0,0,0,0},

810 {"»adwr™e",
»adwr™eCommªd
,1,

812 0,
NULL
,0,0,0,0,0,0},

814 {"dump",
dumpCommªd
,2,

816 0,
NULL
,1,1,1,0,0,0},

818 {"objeù",
objeùCommªd
,-2,

820 0,
NULL
,2,2,1,0,0,0},

822 {"memÜy",
memÜyCommªd
,-2,

824 0,
memÜyG‘Keys
,0,0,0,0,0,0},

826 {"ş›Á",
ş›ÁCommªd
,-2,

828 0,
NULL
,0,0,0,0,0,0},

830 {"h–lo",
h–loCommªd
,-2,

832 0,
NULL
,0,0,0,0,0,0},

836 {"ev®",
ev®Commªd
,-3,

838 0,
ev®G‘Keys
,0,0,0,0,0,0},

840 {"ev®sha",
ev®ShaCommªd
,-3,

842 0,
ev®G‘Keys
,0,0,0,0,0,0},

844 {"¦owlog",
¦owlogCommªd
,-2,

846 0,
NULL
,0,0,0,0,0,0},

848 {"süt",
sütCommªd
,-2,

850 0,
NULL
,0,0,0,0,0,0},

852 {"time",
timeCommªd
,1,

854 0,
NULL
,0,0,0,0,0,0},

856 {"b™İ",
b™İCommªd
,-4,

858 0,
NULL
,2,-1,1,0,0,0},

860 {"b™couÁ",
b™couÁCommªd
,-2,

862 0,
NULL
,1,1,1,0,0,0},

864 {"b™pos",
b™posCommªd
,-3,

866 0,
NULL
,1,1,1,0,0,0},

868 {"wa™",
wa™Commªd
,3,

870 0,
NULL
,0,0,0,0,0,0},

872 {"commªd",
commªdCommªd
,-1,

874 0,
NULL
,0,0,0,0,0,0},

876 {"geßdd",
geßddCommªd
,-5,

878 0,
NULL
,1,1,1,0,0,0},

881 {"geÜadius",
geÜadiusCommªd
,-6,

883 0,
geÜadiusG‘Keys
,1,1,1,0,0,0},

885 {"geÜadius_ro",
geÜadiu¤oCommªd
,-6,

887 0,
geÜadiusG‘Keys
,1,1,1,0,0,0},

889 {"geÜadiusbymemb”",
geÜadiusbymemb”Commªd
,-5,

891 0,
geÜadiusG‘Keys
,1,1,1,0,0,0},

893 {"geÜadiusbymemb”_ro",
geÜadiusbymemb”roCommªd
,-5,

895 0,
geÜadiusG‘Keys
,1,1,1,0,0,0},

897 {"geohash",
geohashCommªd
,-2,

899 0,
NULL
,1,1,1,0,0,0},

901 {"geİos",
geİosCommªd
,-2,

903 0,
NULL
,1,1,1,0,0,0},

905 {"geodi¡",
geodi¡Commªd
,-4,

907 0,
NULL
,1,1,1,0,0,0},

909 {"pf£láe¡",
pf£láe¡Commªd
,1,

911 0,
NULL
,0,0,0,0,0,0},

913 {"pçdd",
pçddCommªd
,-2,

915 0,
NULL
,1,1,1,0,0,0},

921 {"pfcouÁ",
pfcouÁCommªd
,-2,

923 0,
NULL
,1,-1,1,0,0,0},

925 {"pfm”ge",
pfm”geCommªd
,-2,

927 0,
NULL
,1,-1,1,0,0,0},

929 {"pfdebug",
pfdebugCommªd
,-3,

931 0,
NULL
,0,0,0,0,0,0},

933 {"xadd",
xaddCommªd
,-5,

935 0,
NULL
,1,1,1,0,0,0},

937 {"x¿nge",
x¿ngeCommªd
,-4,

939 0,
NULL
,1,1,1,0,0,0},

941 {"x»v¿nge",
x»v¿ngeCommªd
,-4,

943 0,
NULL
,1,1,1,0,0,0},

945 {"xËn",
xËnCommªd
,2,

947 0,
NULL
,1,1,1,0,0,0},

949 {"x»ad",
x»adCommªd
,-4,

951 0,
x»adG‘Keys
,1,1,1,0,0,0},

953 {"x»adgroup",
x»adCommªd
,-7,

955 0,
x»adG‘Keys
,1,1,1,0,0,0},

957 {"xgroup",
xgroupCommªd
,-2,

959 0,
NULL
,2,2,1,0,0,0},

961 {"x£tid",
x£tidCommªd
,3,

963 0,
NULL
,1,1,1,0,0,0},

965 {"xack",
xackCommªd
,-4,

967 0,
NULL
,1,1,1,0,0,0},

969 {"x³ndšg",
x³ndšgCommªd
,-3,

971 0,
NULL
,1,1,1,0,0,0},

973 {"xşaim",
xşaimCommªd
,-6,

975 0,
NULL
,1,1,1,0,0,0},

977 {"xšfo",
xšfoCommªd
,-2,

979 0,
NULL
,2,2,1,0,0,0},

981 {"xd–",
xd–Commªd
,-3,

983 0,
NULL
,1,1,1,0,0,0},

985 {"xŒim",
xŒimCommªd
,-2,

987 0,
NULL
,1,1,1,0,0,0},

989 {"po¡",
£cur™yW¬nšgCommªd
,-1,

991 0,
NULL
,0,0,0,0,0,0},

993 {"ho¡:",
£cur™yW¬nšgCommªd
,-1,

995 0,
NULL
,0,0,0,0,0,0},

997 {"Ï‹ncy",
Ï‹ncyCommªd
,-2,

999 0,
NULL
,0,0,0,0,0,0},

1001 {"lŞwut",
lŞwutCommªd
,-1,

1003 0,
NULL
,0,0,0,0,0,0},

1005 {"aş",
aşCommªd
,-2,

1007 0,
NULL
,0,0,0,0,0,0},

1009 {"¡¿lgo",
¡¿lgoCommªd
,-2,

1011 0,
lcsG‘Keys
,0,0,0,0,0,0}

1018 
nŞocks_loÿÉime
(
tm
 *
tmp
, 
time_t
 
t
,ime_ˆ
tz
, 
d¡
);

1022 
	$£rv”LogRaw
(
Ëv–
, cÚ¡ *
msg
) {

1023 cÚ¡ 
sy¦ogLev–M­
[] = { 
LOG_DEBUG
, 
LOG_INFO
, 
LOG_NOTICE
, 
LOG_WARNING
 };

1024 cÚ¡ *
c
 = ".-*#";

1025 
FILE
 *
å
;

1026 
buf
[64];

1027 
¿wmode
 = (
Ëv–
 & 
LL_RAW
);

1028 
log_to_¡dout
 = 
£rv”
.
logfe
[0] == '\0';

1030 
Ëv–
 &= 0xff;

1031 ià(
Ëv–
 < 
£rv”
.
v”bos™y
) ;

1033 
å
 = 
log_to_¡dout
 ? 
¡dout
 : 
	`fİ’
(
£rv”
.
logfe
,"a");

1034 ià(!
å
) ;

1036 ià(
¿wmode
) {

1037 
	`årštf
(
å
,"%s",
msg
);

1039 
off
;

1040 
timev®
 
tv
;

1041 
rŞe_ch¬
;

1042 
pid_t
 
pid
 = 
	`g‘pid
();

1044 
	`g‘timeofday
(&
tv
,
NULL
);

1045 
tm
m;

1046 
	`nŞocks_loÿÉime
(&
tm
,
tv
.
tv_£c
,
£rv”
.
timezÚe
,£rv”.
daylight_aùive
);

1047 
off
 = 
	`¡ráime
(
buf
,(buf),"%d %b %Y %H:%M:%S.",&
tm
);

1048 
	`¢´štf
(
buf
+
off
,(buf)-off,"%03d",()
tv
.
tv_u£c
/1000);

1049 ià(
£rv”
.
£Áš–_mode
) {

1050 
rŞe_ch¬
 = 'X';

1051 } ià(
pid
 !ğ
£rv”
.pid) {

1052 
rŞe_ch¬
 = 'C';

1054 
rŞe_ch¬
 = (
£rv”
.
ma¡”ho¡
 ? 'S':'M');

1056 
	`årštf
(
å
,"%d:%c %s %c %s\n",

1057 ()
	`g‘pid
(),
rŞe_ch¬
, 
buf
,
c
[
Ëv–
],
msg
);

1059 
	`fæush
(
å
);

1061 ià(!
log_to_¡dout
è
	`fşo£
(
å
);

1062 ià(
£rv”
.
sy¦og_’abËd
è
	`sy¦og
(
sy¦ogLev–M­
[
Ëv–
], "%s", 
msg
);

1063 
	}
}

1068 
	$£rv”Log
(
Ëv–
, cÚ¡ *
fmt
, ...) {

1069 
va_li¡
 
­
;

1070 
msg
[
LOG_MAX_LEN
];

1072 ià((
Ëv–
&0xffè< 
£rv”
.
v”bos™y
) ;

1074 
	`va_¡¬t
(
­
, 
fmt
);

1075 
	`v¢´štf
(
msg
, (msg), 
fmt
, 
­
);

1076 
	`va_’d
(
­
);

1078 
	`£rv”LogRaw
(
Ëv–
,
msg
);

1079 
	}
}

1087 
	$£rv”LogFromHªdËr
(
Ëv–
, cÚ¡ *
msg
) {

1088 
fd
;

1089 
log_to_¡dout
 = 
£rv”
.
logfe
[0] == '\0';

1090 
buf
[64];

1092 ià((
Ëv–
&0xffè< 
£rv”
.
v”bos™y
 || (
log_to_¡dout
 && s”v”.
d«mÚize
))

1094 
fd
 = 
log_to_¡dout
 ? 
STDOUT_FILENO
 :

1095 
	`İ’
(
£rv”
.
logfe
, 
O_APPEND
|
O_CREAT
|
O_WRONLY
, 0644);

1096 ià(
fd
 == -1) ;

1097 
	`Î2¡ršg
(
buf
,(buf),
	`g‘pid
());

1098 ià(
	`wr™e
(
fd
,
buf
,
	`¡¾’
(buf)è=ğ-1è
”r
;

1099 ià(
	`wr™e
(
fd
,":sigÇl-hªdË¸(",17è=ğ-1è
”r
;

1100 
	`Î2¡ršg
(
buf
,(buf),
	`time
(
NULL
));

1101 ià(
	`wr™e
(
fd
,
buf
,
	`¡¾’
(buf)è=ğ-1è
”r
;

1102 ià(
	`wr™e
(
fd
,"è",2è=ğ-1è
”r
;

1103 ià(
	`wr™e
(
fd
,
msg
,
	`¡¾’
(msg)è=ğ-1è
”r
;

1104 ià(
	`wr™e
(
fd
,"\n",1è=ğ-1è
”r
;

1105 
”r
:

1106 ià(!
log_to_¡dout
è
	`şo£
(
fd
);

1107 
	}
}

1110 
	$u¡ime
() {

1111 
timev®
 
tv
;

1112 
u¡
;

1114 
	`g‘timeofday
(&
tv
, 
NULL
);

1115 
u¡
 = (()
tv
.
tv_£c
)*1000000;

1116 
u¡
 +ğ
tv
.
tv_u£c
;

1117  
u¡
;

1118 
	}
}

1121 
m¡ime_t
 
	$m¡ime
() {

1122  
	`u¡ime
()/1000;

1123 
	}
}

1129 
	$ex™FromChd
(
»tcode
) {

1130 #ifdeà
COVERAGE_TEST


1131 
	`ex™
(
»tcode
);

1133 
	`_ex™
(
»tcode
);

1135 
	}
}

1143 
	$diùVªÏF»e
(*
´ivd©a
, *
v®
)

1145 
	`DICT_NOTUSED
(
´ivd©a
);

1146 
	`zä“
(
v®
);

1147 
	}
}

1149 
	$diùLi¡De¡ruùÜ
(*
´ivd©a
, *
v®
)

1151 
	`DICT_NOTUSED
(
´ivd©a
);

1152 
	`li¡R–—£
((
li¡
*)
v®
);

1153 
	}
}

1155 
	$diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

1156 cÚ¡ *
key2
)

1158 
l1
,
l2
;

1159 
	`DICT_NOTUSED
(
´ivd©a
);

1161 
l1
 = 
	`sd¦’
((
sds
)
key1
);

1162 
l2
 = 
	`sd¦’
((
sds
)
key2
);

1163 ià(
l1
 !ğ
l2
)  0;

1164  
	`memcmp
(
key1
, 
key2
, 
l1
) == 0;

1165 
	}
}

1169 
	$diùSdsKeyCa£Com·»
(*
´ivd©a
, cÚ¡ *
key1
,

1170 cÚ¡ *
key2
)

1172 
	`DICT_NOTUSED
(
´ivd©a
);

1174  
	`¡rÿ£cmp
(
key1
, 
key2
) == 0;

1175 
	}
}

1177 
	$diùObjeùDe¡ruùÜ
(*
´ivd©a
, *
v®
)

1179 
	`DICT_NOTUSED
(
´ivd©a
);

1181 ià(
v®
 =ğ
NULL
) ;

1182 
	`deüRefCouÁ
(
v®
);

1183 
	}
}

1185 
	$diùSdsDe¡ruùÜ
(*
´ivd©a
, *
v®
)

1187 
	`DICT_NOTUSED
(
´ivd©a
);

1189 
	`sdsä“
(
v®
);

1190 
	}
}

1192 
	$diùObjKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

1193 cÚ¡ *
key2
)

1195 cÚ¡ 
robj
 *
o1
 = 
key1
, *
o2
 = 
key2
;

1196  
	`diùSdsKeyCom·»
(
´ivd©a
,
o1
->
±r
,
o2
->ptr);

1197 
	}
}

1199 
ušt64_t
 
	$diùObjHash
(cÚ¡ *
key
) {

1200 cÚ¡ 
robj
 *
o
 = 
key
;

1201  
	`diùG’HashFunùiÚ
(
o
->
±r
, 
	`sd¦’
((
sds
)o->ptr));

1202 
	}
}

1204 
ušt64_t
 
	$diùSdsHash
(cÚ¡ *
key
) {

1205  
	`diùG’HashFunùiÚ
((*)
key
, 
	`sd¦’
((*)key));

1206 
	}
}

1208 
ušt64_t
 
	$diùSdsCa£Hash
(cÚ¡ *
key
) {

1209  
	`diùG’Ca£HashFunùiÚ
((*)
key
, 
	`sd¦’
((*)key));

1210 
	}
}

1212 
	$diùEncObjKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
,

1213 cÚ¡ *
key2
)

1215 
robj
 *
o1
 = (robj*è
key1
, *
o2
 = (robj*è
key2
;

1216 
cmp
;

1218 ià(
o1
->
’codšg
 =ğ
OBJ_ENCODING_INT
 &&

1219 
o2
->
’codšg
 =ğ
OBJ_ENCODING_INT
)

1220  
o1
->
±r
 =ğ
o2
->ptr;

1226 ià(
o1
->
»fcouÁ
 !ğ
OBJ_STATIC_REFCOUNT
èo1 = 
	`g‘DecodedObjeù
(o1);

1227 ià(
o2
->
»fcouÁ
 !ğ
OBJ_STATIC_REFCOUNT
èo2 = 
	`g‘DecodedObjeù
(o2);

1228 
cmp
 = 
	`diùSdsKeyCom·»
(
´ivd©a
,
o1
->
±r
,
o2
->ptr);

1229 ià(
o1
->
»fcouÁ
 !ğ
OBJ_STATIC_REFCOUNT
è
	`deüRefCouÁ
(o1);

1230 ià(
o2
->
»fcouÁ
 !ğ
OBJ_STATIC_REFCOUNT
è
	`deüRefCouÁ
(o2);

1231  
cmp
;

1232 
	}
}

1234 
ušt64_t
 
	$diùEncObjHash
(cÚ¡ *
key
) {

1235 
robj
 *
o
 = (robj*è
key
;

1237 ià(
	`sdsEncodedObjeù
(
o
)) {

1238  
	`diùG’HashFunùiÚ
(
o
->
±r
, 
	`sd¦’
((
sds
)o->ptr));

1240 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

1241 
buf
[32];

1242 
Ën
;

1244 
Ën
 = 
	`Î2¡ršg
(
buf
,32,()
o
->
±r
);

1245  
	`diùG’HashFunùiÚ
((*)
buf
, 
Ën
);

1247 
ušt64_t
 
hash
;

1249 
o
 = 
	`g‘DecodedObjeù
(o);

1250 
hash
 = 
	`diùG’HashFunùiÚ
(
o
->
±r
, 
	`sd¦’
((
sds
)o->ptr));

1251 
	`deüRefCouÁ
(
o
);

1252  
hash
;

1255 
	}
}

1259 
diùTy³
 
	gobjeùKeyPoš‹rV®ueDiùTy³
 = {

1260 
diùEncObjHash
,

1261 
NULL
,

1262 
NULL
,

1263 
diùEncObjKeyCom·»
,

1264 
diùObjeùDe¡ruùÜ
,

1265 
NULL


1270 
diùTy³
 
	gobjeùKeyH—pPoš‹rV®ueDiùTy³
 = {

1271 
diùEncObjHash
,

1272 
NULL
,

1273 
NULL
,

1274 
diùEncObjKeyCom·»
,

1275 
diùObjeùDe¡ruùÜ
,

1276 
diùVªÏF»e


1280 
diùTy³
 
	g£tDiùTy³
 = {

1281 
diùSdsHash
,

1282 
NULL
,

1283 
NULL
,

1284 
diùSdsKeyCom·»
,

1285 
diùSdsDe¡ruùÜ
,

1286 
NULL


1290 
diùTy³
 
	gz£tDiùTy³
 = {

1291 
diùSdsHash
,

1292 
NULL
,

1293 
NULL
,

1294 
diùSdsKeyCom·»
,

1295 
NULL
,

1296 
NULL


1300 
diùTy³
 
	gdbDiùTy³
 = {

1301 
diùSdsHash
,

1302 
NULL
,

1303 
NULL
,

1304 
diùSdsKeyCom·»
,

1305 
diùSdsDe¡ruùÜ
,

1306 
diùObjeùDe¡ruùÜ


1310 
diùTy³
 
	gshaSütObjeùDiùTy³
 = {

1311 
diùSdsCa£Hash
,

1312 
NULL
,

1313 
NULL
,

1314 
diùSdsKeyCa£Com·»
,

1315 
diùSdsDe¡ruùÜ
,

1316 
diùObjeùDe¡ruùÜ


1320 
diùTy³
 
	gkey±rDiùTy³
 = {

1321 
diùSdsHash
,

1322 
NULL
,

1323 
NULL
,

1324 
diùSdsKeyCom·»
,

1325 
NULL
,

1326 
NULL


1330 
diùTy³
 
	gcommªdTabËDiùTy³
 = {

1331 
diùSdsCa£Hash
,

1332 
NULL
,

1333 
NULL
,

1334 
diùSdsKeyCa£Com·»
,

1335 
diùSdsDe¡ruùÜ
,

1336 
NULL


1340 
diùTy³
 
	ghashDiùTy³
 = {

1341 
diùSdsHash
,

1342 
NULL
,

1343 
NULL
,

1344 
diùSdsKeyCom·»
,

1345 
diùSdsDe¡ruùÜ
,

1346 
diùSdsDe¡ruùÜ


1352 
diùTy³
 
	gkeyli¡DiùTy³
 = {

1353 
diùObjHash
,

1354 
NULL
,

1355 
NULL
,

1356 
diùObjKeyCom·»
,

1357 
diùObjeùDe¡ruùÜ
,

1358 
diùLi¡De¡ruùÜ


1363 
diùTy³
 
	gşu¡”NodesDiùTy³
 = {

1364 
diùSdsHash
,

1365 
NULL
,

1366 
NULL
,

1367 
diùSdsKeyCom·»
,

1368 
diùSdsDe¡ruùÜ
,

1369 
NULL


1375 
diùTy³
 
	gşu¡”NodesBÏckLi¡DiùTy³
 = {

1376 
diùSdsCa£Hash
,

1377 
NULL
,

1378 
NULL
,

1379 
diùSdsKeyCa£Com·»
,

1380 
diùSdsDe¡ruùÜ
,

1381 
NULL


1387 
diùTy³
 
	gmoduËsDiùTy³
 = {

1388 
diùSdsCa£Hash
,

1389 
NULL
,

1390 
NULL
,

1391 
diùSdsKeyCa£Com·»
,

1392 
diùSdsDe¡ruùÜ
,

1393 
NULL


1397 
diùTy³
 
	gmig¿‹CacheDiùTy³
 = {

1398 
diùSdsHash
,

1399 
NULL
,

1400 
NULL
,

1401 
diùSdsKeyCom·»
,

1402 
diùSdsDe¡ruùÜ
,

1403 
NULL


1409 
diùTy³
 
	g»¶SütCacheDiùTy³
 = {

1410 
diùSdsCa£Hash
,

1411 
NULL
,

1412 
NULL
,

1413 
diùSdsKeyCa£Com·»
,

1414 
diùSdsDe¡ruùÜ
,

1415 
NULL


1418 
	$htN“dsResize
(
diù
 *dict) {

1419 
size
, 
u£d
;

1421 
size
 = 
	`diùSlÙs
(
diù
);

1422 
u£d
 = 
	`diùSize
(
diù
);

1423  (
size
 > 
DICT_HT_INITIAL_SIZE
 &&

1424 (
u£d
*100/
size
 < 
HASHTABLE_MIN_FILL
));

1425 
	}
}

1429 
	$ŒyResizeHashTabËs
(
dbid
) {

1430 ià(
	`htN“dsResize
(
£rv”
.
db
[
dbid
].
diù
))

1431 
	`diùResize
(
£rv”
.
db
[
dbid
].
diù
);

1432 ià(
	`htN“dsResize
(
£rv”
.
db
[
dbid
].
expœes
))

1433 
	`diùResize
(
£rv”
.
db
[
dbid
].
expœes
);

1434 
	}
}

1443 
	$šüem’ÎyRehash
(
dbid
) {

1445 ià(
	`diùIsRehashšg
(
£rv”
.
db
[
dbid
].
diù
)) {

1446 
	`diùRehashMli£cÚds
(
£rv”
.
db
[
dbid
].
diù
,1);

1450 ià(
	`diùIsRehashšg
(
£rv”
.
db
[
dbid
].
expœes
)) {

1451 
	`diùRehashMli£cÚds
(
£rv”
.
db
[
dbid
].
expœes
,1);

1455 
	}
}

1463 
	$upd©eDiùResizePŞicy
() {

1464 ià(!
	`hasAùiveChdProûss
())

1465 
	`diùEÇbËResize
();

1467 
	`diùDi§bËResize
();

1468 
	}
}

1472 
	$hasAùiveChdProûss
() {

1473  
£rv”
.
rdb_chd_pid
 != -1 ||

1474 
£rv”
.
aof_chd_pid
 != -1 ||

1475 
£rv”
.
moduË_chd_pid
 != -1;

1476 
	}
}

1480 
	$®lP”si¡’ûDi§bËd
() {

1481  
£rv”
.
§v•¬am¦’
 =ğ0 && s”v”.
aof_¡©e
 =ğ
AOF_OFF
;

1482 
	}
}

1487 
	$ŒackIn¡ªÃousM‘ric
(
m‘ric
, 
cu¼’t_»adšg
) {

1488 
t
 = 
	`m¡ime
(è- 
£rv”
.
š¡_m‘ric
[
m‘ric
].
Ï¡_§m¶e_time
;

1489 
İs
 = 
cu¼’t_»adšg
 -

1490 
£rv”
.
š¡_m‘ric
[
m‘ric
].
Ï¡_§m¶e_couÁ
;

1491 
İs_£c
;

1493 
İs_£c
 = 
t
 > 0 ? (
İs
*1000/t) : 0;

1495 
£rv”
.
š¡_m‘ric
[
m‘ric
].
§m¶es
[£rv”.š¡_m‘ric[m‘ric].
idx
] =

1496 
İs_£c
;

1497 
£rv”
.
š¡_m‘ric
[
m‘ric
].
idx
++;

1498 
£rv”
.
š¡_m‘ric
[
m‘ric
].
idx
 %ğ
STATS_METRIC_SAMPLES
;

1499 
£rv”
.
š¡_m‘ric
[
m‘ric
].
Ï¡_§m¶e_time
 = 
	`m¡ime
();

1500 
£rv”
.
š¡_m‘ric
[
m‘ric
].
Ï¡_§m¶e_couÁ
 = 
cu¼’t_»adšg
;

1501 
	}
}

1504 
	$g‘In¡ªÃousM‘ric
(
m‘ric
) {

1505 
j
;

1506 
sum
 = 0;

1508 
j
 = 0; j < 
STATS_METRIC_SAMPLES
; j++)

1509 
sum
 +ğ
£rv”
.
š¡_m‘ric
[
m‘ric
].
§m¶es
[
j
];

1510  
sum
 / 
STATS_METRIC_SAMPLES
;

1511 
	}
}

1517 
	$ş›ÁsCrÚResizeQu”yBufãr
(
ş›Á
 *
c
) {

1518 
size_t
 
qu”ybuf_size
 = 
	`sdsAÎocSize
(
c
->
qu”ybuf
);

1519 
time_t
 
idËtime
 = 
£rv”
.
unixtime
 - 
c
->
Ï¡š‹¿ùiÚ
;

1524 ià(
qu”ybuf_size
 > 
PROTO_MBULK_BIG_ARG
 &&

1525 ((
qu”ybuf_size
/(
c
->
qu”ybuf_³ak
+1)) > 2 ||

1526 
idËtime
 > 2))

1530 ià(
	`sd§va
(
c
->
qu”ybuf
) > 1024*4) {

1531 
c
->
qu”ybuf
 = 
	`sdsRemoveF»eS·û
(c->querybuf);

1536 
c
->
qu”ybuf_³ak
 = 0;

1543 ià(
c
->
æags
 & 
CLIENT_MASTER
) {

1547 
size_t
 
³ndšg_qu”ybuf_size
 = 
	`sdsAÎocSize
(
c
->
³ndšg_qu”ybuf
);

1548 if(
³ndšg_qu”ybuf_size
 > 
LIMIT_PENDING_QUERYBUF
 &&

1549 
	`sd¦’
(
c
->
³ndšg_qu”ybuf
è< (
³ndšg_qu”ybuf_size
/2))

1551 
c
->
³ndšg_qu”ybuf
 = 
	`sdsRemoveF»eS·û
(c->pending_querybuf);

1555 
	}
}

1569 
	#CLIENTS_PEAK_MEM_USAGE_SLOTS
 8

	)

1570 
size_t
 
	gCl›ÁsP—kMemIÅut
[
CLIENTS_PEAK_MEM_USAGE_SLOTS
];

1571 
size_t
 
	gCl›ÁsP—kMemOuut
[
CLIENTS_PEAK_MEM_USAGE_SLOTS
];

1573 
	$ş›ÁsCrÚT¿ckEx·nsiveCl›Ás
(
ş›Á
 *
c
) {

1574 
size_t
 
š_u§ge
 = 
	`sdsAÎocSize
(
c
->
qu”ybuf
);

1575 
size_t
 
out_u§ge
 = 
	`g‘Cl›ÁOuutBufãrMemÜyU§ge
(
c
);

1576 
i
 = 
£rv”
.
unixtime
 % 
CLIENTS_PEAK_MEM_USAGE_SLOTS
;

1577 
z”oidx
 = (
i
+1è% 
CLIENTS_PEAK_MEM_USAGE_SLOTS
;

1590 
Cl›ÁsP—kMemIÅut
[
z”oidx
] = 0;

1591 
Cl›ÁsP—kMemOuut
[
z”oidx
] = 0;

1594 ià(
š_u§ge
 > 
Cl›ÁsP—kMemIÅut
[
i
]) ClientsPeakMemInput[i] = in_usage;

1595 ià(
out_u§ge
 > 
Cl›ÁsP—kMemOuut
[
i
]) ClientsPeakMemOutput[i] = out_usage;

1598 
	}
}

1605 
	$ş›ÁsCrÚT¿ckCl›ÁsMemU§ge
(
ş›Á
 *
c
) {

1606 
size_t
 
mem
 = 0;

1607 
ty³
 = 
	`g‘Cl›ÁTy³
(
c
);

1608 
mem
 +ğ
	`g‘Cl›ÁOuutBufãrMemÜyU§ge
(
c
);

1609 
mem
 +ğ
	`sdsAÎocSize
(
c
->
qu”ybuf
);

1610 
mem
 +ğ(
ş›Á
);

1613 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
c
->
ş›Á_üÚ_Ï¡_memÜy_ty³
] -=

1614 
c
->
ş›Á_üÚ_Ï¡_memÜy_u§ge
;

1615 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
ty³
] +ğ
mem
;

1617 
c
->
ş›Á_üÚ_Ï¡_memÜy_u§ge
 = 
mem
;

1618 
c
->
ş›Á_üÚ_Ï¡_memÜy_ty³
 = 
ty³
;

1620 
	}
}

1624 
	$g‘Ex·nsiveCl›ÁsInfo
(
size_t
 *
š_u§ge
, size_ˆ*
out_u§ge
) {

1625 
size_t
 
i
 = 0, 
o
 = 0;

1626 
j
 = 0; j < 
CLIENTS_PEAK_MEM_USAGE_SLOTS
; j++) {

1627 ià(
Cl›ÁsP—kMemIÅut
[
j
] > 
i
) i = ClientsPeakMemInput[j];

1628 ià(
Cl›ÁsP—kMemOuut
[
j
] > 
o
) o = ClientsPeakMemOutput[j];

1630 *
š_u§ge
 = 
i
;

1631 *
out_u§ge
 = 
o
;

1632 
	}
}

1649 
	#CLIENTS_CRON_MIN_ITERATIONS
 5

	)

1650 
	$ş›ÁsCrÚ
() {

1655 
numş›Ás
 = 
	`li¡L’gth
(
£rv”
.
ş›Ás
);

1656 
™”©iÚs
 = 
numş›Ás
/
£rv”
.
hz
;

1657 
m¡ime_t
 
now
 = 
	`m¡ime
();

1662 ià(
™”©iÚs
 < 
CLIENTS_CRON_MIN_ITERATIONS
)

1663 
™”©iÚs
 = (
numş›Ás
 < 
CLIENTS_CRON_MIN_ITERATIONS
) ?

1664 
numş›Ás
 : 
CLIENTS_CRON_MIN_ITERATIONS
;

1666 
	`li¡L’gth
(
£rv”
.
ş›Ás
è&& 
™”©iÚs
--) {

1667 
ş›Á
 *
c
;

1668 
li¡Node
 *
h—d
;

1673 
	`li¡RÙ©eTaToH—d
(
£rv”
.
ş›Ás
);

1674 
h—d
 = 
	`li¡Fœ¡
(
£rv”
.
ş›Ás
);

1675 
c
 = 
	`li¡NodeV®ue
(
h—d
);

1679 ià(
	`ş›ÁsCrÚHªdËTimeout
(
c
,
now
)) ;

1680 ià(
	`ş›ÁsCrÚResizeQu”yBufãr
(
c
)) ;

1681 ià(
	`ş›ÁsCrÚT¿ckEx·nsiveCl›Ás
(
c
)) ;

1682 ià(
	`ş›ÁsCrÚT¿ckCl›ÁsMemU§ge
(
c
)) ;

1684 
	}
}

1689 
	$d©aba£sCrÚ
() {

1692 ià(
£rv”
.
aùive_expœe_’abËd
) {

1693 ià(
	`iAmMa¡”
()) {

1694 
	`aùiveExpœeCyşe
(
ACTIVE_EXPIRE_CYCLE_SLOW
);

1696 
	`expœeSÏveKeys
();

1701 
	`aùiveDeäagCyşe
();

1706 ià(!
	`hasAùiveChdProûss
()) {

1710 
»size_db
 = 0;

1711 
»hash_db
 = 0;

1712 
dbs_³r_ÿÎ
 = 
CRON_DBS_PER_CALL
;

1713 
j
;

1716 ià(
dbs_³r_ÿÎ
 > 
£rv”
.
dbnum
) dbs_per_call = server.dbnum;

1719 
j
 = 0; j < 
dbs_³r_ÿÎ
; j++) {

1720 
	`ŒyResizeHashTabËs
(
»size_db
 % 
£rv”
.
dbnum
);

1721 
»size_db
++;

1725 ià(
£rv”
.
aùiv”ehashšg
) {

1726 
j
 = 0; j < 
dbs_³r_ÿÎ
; j++) {

1727 
wÜk_dÚe
 = 
	`šüem’ÎyRehash
(
»hash_db
);

1728 ià(
wÜk_dÚe
) {

1734 
»hash_db
++;

1735 
»hash_db
 %ğ
£rv”
.
dbnum
;

1740 
	}
}

1752 
	$upd©eCachedTime
(
upd©e_daylight_šfo
) {

1753 
£rv”
.
u¡ime
 = 
	`u¡ime
();

1754 
£rv”
.
m¡ime
 = s”v”.
u¡ime
 / 1000;

1755 
£rv”
.
unixtime
 = s”v”.
m¡ime
 / 1000;

1762 ià(
upd©e_daylight_šfo
) {

1763 
tm
m;

1764 
time_t
 
ut
 = 
£rv”
.
unixtime
;

1765 
	`loÿÉime_r
(&
ut
,&
tm
);

1766 
£rv”
.
daylight_aùive
 = 
tm
.
tm_isd¡
;

1768 
	}
}

1770 
	$checkChd»nDÚe
() {

1771 
¡©loc
;

1772 
pid_t
 
pid
;

1779 ià(
£rv”
.
rdb_chd_pid
 !ğ-1 && s”v”.
rdb_pe_cÚns
)

1782 ià((
pid
 = 
	`wa™3
(&
¡©loc
,
WNOHANG
,
NULL
)) != 0) {

1783 
ex™code
 = 
	`WEXITSTATUS
(
¡©loc
);

1784 
bysigÇl
 = 0;

1786 ià(
	`WIFSIGNALED
(
¡©loc
)è
bysigÇl
 = 
	`WTERMSIG
(statloc);

1793 ià(
ex™code
 =ğ
SERVER_CHILD_NOERROR_RETVAL
) {

1794 
bysigÇl
 = 
SIGUSR1
;

1795 
ex™code
 = 1;

1798 ià(
pid
 == -1) {

1799 
	`£rv”Log
(
LL_WARNING
,"wait3()„eturned‡nƒrror: %s. "

1801 
	`¡»¼Ü
(
”ºo
),

1802 (è
£rv”
.
rdb_chd_pid
,

1803 (è
£rv”
.
aof_chd_pid
,

1804 (è
£rv”
.
moduË_chd_pid
);

1805 } ià(
pid
 =ğ
£rv”
.
rdb_chd_pid
) {

1806 
	`backgroundSaveDÚeHªdËr
(
ex™code
,
bysigÇl
);

1807 ià(!
bysigÇl
 && 
ex™code
 =ğ0è
	`»ûiveChdInfo
();

1808 } ià(
pid
 =ğ
£rv”
.
aof_chd_pid
) {

1809 
	`backgroundRewr™eDÚeHªdËr
(
ex™code
,
bysigÇl
);

1810 ià(!
bysigÇl
 && 
ex™code
 =ğ0è
	`»ûiveChdInfo
();

1811 } ià(
pid
 =ğ
£rv”
.
moduË_chd_pid
) {

1812 
	`ModuËFÜkDÚeHªdËr
(
ex™code
,
bysigÇl
);

1813 ià(!
bysigÇl
 && 
ex™code
 =ğ0è
	`»ûiveChdInfo
();

1815 ià(!
	`ldbRemoveChd
(
pid
)) {

1816 
	`£rv”Log
(
LL_WARNING
,

1818 ()
pid
);

1821 
	`upd©eDiùResizePŞicy
();

1822 
	`şo£ChdInfoPe
();

1824 
	}
}

1845 
	$£rv”CrÚ
(
«Ev’tLoİ
 *
ev’tLoİ
, 
id
, *
ş›ÁD©a
) {

1846 
j
;

1847 
	`UNUSED
(
ev’tLoİ
);

1848 
	`UNUSED
(
id
);

1849 
	`UNUSED
(
ş›ÁD©a
);

1853 ià(
£rv”
.
w©chdog_³riod
è
	`w©chdogScheduËSigÇl
(server.watchdog_period);

1856 
	`upd©eCachedTime
(1);

1858 
£rv”
.
hz
 = s”v”.
cÚfig_hz
;

1861 ià(
£rv”
.
dyÇmic_hz
) {

1862 
	`li¡L’gth
(
£rv”
.
ş›Ás
è/ s”v”.
hz
 >

1863 
MAX_CLIENTS_PER_CLOCK_TICK
)

1865 
£rv”
.
hz
 *= 2;

1866 ià(
£rv”
.
hz
 > 
CONFIG_MAX_HZ
) {

1867 
£rv”
.
hz
 = 
CONFIG_MAX_HZ
;

1873 
	`run_w™h_³riod
(100) {

1874 
	`ŒackIn¡ªÃousM‘ric
(
STATS_METRIC_COMMAND
,
£rv”
.
¡©_numcommªds
);

1875 
	`ŒackIn¡ªÃousM‘ric
(
STATS_METRIC_NET_INPUT
,

1876 
£rv”
.
¡©_Ãt_šput_by‹s
);

1877 
	`ŒackIn¡ªÃousM‘ric
(
STATS_METRIC_NET_OUTPUT
,

1878 
£rv”
.
¡©_Ãt_ouut_by‹s
);

1892 
£rv”
.
Ìuşock
 = 
	`g‘LRUClock
();

1895 ià(
	`zm®loc_u£d_memÜy
(è> 
£rv”
.
¡©_³ak_memÜy
)

1896 
£rv”
.
¡©_³ak_memÜy
 = 
	`zm®loc_u£d_memÜy
();

1898 
	`run_w™h_³riod
(100) {

1902 
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 = 
	`zm®loc_g‘_rss
();

1903 
£rv”
.
üÚ_m®loc_¡©s
.
zm®loc_u£d
 = 
	`zm®loc_u£d_memÜy
();

1908 
	`zm®loc_g‘_®loÿtÜ_šfo
(&
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
,

1909 &
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
,

1910 &
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
);

1913 ià(!
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
) {

1917 
size_t
 
lua_memÜy
 = 
	`lua_gc
(
£rv”
.
lua
,
LUA_GCCOUNT
,0)*1024LL;

1918 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
 = s”v”.üÚ_m®loc_¡©s.
´oûss_rss
 - 
lua_memÜy
;

1920 ià(!
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
)

1921 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
 = s”v”.üÚ_m®loc_¡©s.
®loÿtÜ_»sid’t
;

1922 ià(!
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
)

1923 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
 = s”v”.üÚ_m®loc_¡©s.
zm®loc_u£d
;

1928 ià(
£rv”
.
shutdown_a§p
) {

1929 ià(
	`´•¬eFÜShutdown
(
SHUTDOWN_NOFLAGS
è=ğ
C_OK
è
	`ex™
(0);

1930 
	`£rv”Log
(
LL_WARNING
,"SIGTERM„eceived butƒrrorsryingo shut downhe server, checkhe†ogs for more information");

1931 
£rv”
.
shutdown_a§p
 = 0;

1935 
	`run_w™h_³riod
(5000) {

1936 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

1937 
size
, 
u£d
, 
vkeys
;

1939 
size
 = 
	`diùSlÙs
(
£rv”
.
db
[
j
].
diù
);

1940 
u£d
 = 
	`diùSize
(
£rv”
.
db
[
j
].
diù
);

1941 
vkeys
 = 
	`diùSize
(
£rv”
.
db
[
j
].
expœes
);

1942 ià(
u£d
 || 
vkeys
) {

1943 
	`£rv”Log
(
LL_VERBOSE
,"DB %d: %Îd key (%Îd vŞ©eèš %Îd slÙ HT.",
j
,
u£d
,
vkeys
,
size
);

1950 ià(!
£rv”
.
£Áš–_mode
) {

1951 
	`run_w™h_³riod
(5000) {

1952 
	`£rv”Log
(
LL_DEBUG
,

1954 
	`li¡L’gth
(
£rv”
.
ş›Ás
)-li¡L’gth(£rv”.
¦aves
),

1955 
	`li¡L’gth
(
£rv”
.
¦aves
),

1956 
	`zm®loc_u£d_memÜy
());

1961 
	`ş›ÁsCrÚ
();

1964 
	`d©aba£sCrÚ
();

1968 ià(!
	`hasAùiveChdProûss
() &&

1969 
£rv”
.
aof_»wr™e_scheduËd
)

1971 
	`»wr™eAµ’dOÆyFeBackground
();

1975 ià(
	`hasAùiveChdProûss
(è|| 
	`ldbP’dšgChd»n
())

1977 
	`checkChd»nDÚe
();

1981 
j
 = 0; j < 
£rv”
.
§v•¬am¦’
; j++) {

1982 
§v•¬am
 *
¥
 = 
£rv”
.
§v•¬ams
+
j
;

1988 ià(
£rv”
.
dœty
 >ğ
¥
->
chªges
 &&

1989 
£rv”
.
unixtime
-£rv”.
Ï¡§ve
 > 
¥
->
£cÚds
 &&

1990 (
£rv”
.
unixtime
-£rv”.
Ï¡bg§ve_Œy
 >

1991 
CONFIG_BGSAVE_RETRY_DELAY
 ||

1992 
£rv”
.
Ï¡bg§ve_¡©us
 =ğ
C_OK
))

1994 
	`£rv”Log
(
LL_NOTICE
,"%d changes in %d seconds. Saving...",

1995 
¥
->
chªges
, ()¥->
£cÚds
);

1996 
rdbSaveInfo
 
rsi
, *
rsŒ
;

1997 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

1998 
	`rdbSaveBackground
(
£rv”
.
rdb_f’ame
,
rsŒ
);

2004 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_ON
 &&

2005 !
	`hasAùiveChdProûss
() &&

2006 
£rv”
.
aof_»wr™e_³rc
 &&

2007 
£rv”
.
aof_cu¼’t_size
 > s”v”.
aof_»wr™e_mš_size
)

2009 
ba£
 = 
£rv”
.
aof_»wr™e_ba£_size
 ?

2010 
£rv”
.
aof_»wr™e_ba£_size
 : 1;

2011 
growth
 = (
£rv”
.
aof_cu¼’t_size
*100/
ba£
) - 100;

2012 ià(
growth
 >ğ
£rv”
.
aof_»wr™e_³rc
) {

2013 
	`£rv”Log
(
LL_NOTICE
,"S¹šg‡utom©iø»wr™šg oàAOF oÀ%Îd%% growth",
growth
);

2014 
	`»wr™eAµ’dOÆyFeBackground
();

2022 ià(
£rv”
.
aof_æush_po¡pÚed_¡¬t
è
	`æushAµ’dOÆyFe
(0);

2028 
	`run_w™h_³riod
(1000) {

2029 ià(
£rv”
.
aof_Ï¡_wr™e_¡©us
 =ğ
C_ERR
)

2030 
	`æushAµ’dOÆyFe
(0);

2034 
	`ş›ÁsA»Pau£d
();

2038 
	`run_w™h_³riod
(1000è
	`»¶iÿtiÚCrÚ
();

2041 
	`run_w™h_³riod
(100) {

2042 ià(
£rv”
.
şu¡”_’abËd
è
	`şu¡”CrÚ
();

2046 ià(
£rv”
.
£Áš–_mode
è
	`£Áš–Tim”
();

2049 
	`run_w™h_³riod
(1000) {

2050 
	`mig¿‹Clo£TimedoutSock‘s
();

2054 
	`¡İTh»adedIOIfN“ded
();

2063 ià(!
	`hasAùiveChdProûss
() &&

2064 
£rv”
.
rdb_bg§ve_scheduËd
 &&

2065 (
£rv”
.
unixtime
-£rv”.
Ï¡bg§ve_Œy
 > 
CONFIG_BGSAVE_RETRY_DELAY
 ||

2066 
£rv”
.
Ï¡bg§ve_¡©us
 =ğ
C_OK
))

2068 
rdbSaveInfo
 
rsi
, *
rsŒ
;

2069 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

2070 ià(
	`rdbSaveBackground
(
£rv”
.
rdb_f’ame
,
rsŒ
è=ğ
C_OK
)

2071 
£rv”
.
rdb_bg§ve_scheduËd
 = 0;

2075 
RedisModuËCrÚLoİV1
 
ei
 = {
REDISMODULE_CRON_LOOP_VERSION
,
£rv”
.
hz
};

2076 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_CRON_LOOP
,

2078 &
ei
);

2080 
£rv”
.
üÚloİs
++;

2081  1000/
£rv”
.
hz
;

2082 
	}
}

2087 
	$befÜeSË•
(
«Ev’tLoİ
 *
ev’tLoİ
) {

2088 
	`UNUSED
(
ev’tLoİ
);

2091 
	`hªdËBlockedCl›ÁsTimeout
();

2094 
	`hªdËCl›ÁsW™hP’dšgR—dsUsšgTh»ads
();

2097 
	`sProûssP’dšgD©a
();

2100 
	`«S‘DÚtWa™
(
£rv”
.
–
, 
	`sHasP’dšgD©a
());

2106 ià(
£rv”
.
şu¡”_’abËd
è
	`şu¡”BefÜeSË•
();

2110 ià(
£rv”
.
aùive_expœe_’abËd
 && s”v”.
ma¡”ho¡
 =ğ
NULL
)

2111 
	`aùiveExpœeCyşe
(
ACTIVE_EXPIRE_CYCLE_FAST
);

2115 ià(
	`li¡L’gth
(
£rv”
.
ş›Ás_wa™šg_acks
))

2116 
	`´oûssCl›ÁsWa™šgR•liÿs
();

2120 ià(
	`moduËCouÁ
()è
	`moduËHªdËBlockedCl›Ás
();

2123 ià(
	`li¡L’gth
(
£rv”
.
unblocked_ş›Ás
))

2124 
	`´oûssUnblockedCl›Ás
();

2131 ià(
£rv”
.
g‘_ack_äom_¦aves
) {

2132 
robj
 *
¬gv
[3];

2134 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
("REPLCONF",8);

2135 
¬gv
[1] = 
	`ü—‹SŒšgObjeù
("GETACK",6);

2136 
¬gv
[2] = 
	`ü—‹SŒšgObjeù
("*",1);

2137 
	`»¶iÿtiÚF“dSÏves
(
£rv”
.
¦aves
, s”v”.
¦ave£ldb
, 
¬gv
, 3);

2138 
	`deüRefCouÁ
(
¬gv
[0]);

2139 
	`deüRefCouÁ
(
¬gv
[1]);

2140 
	`deüRefCouÁ
(
¬gv
[2]);

2141 
£rv”
.
g‘_ack_äom_¦aves
 = 0;

2146 
	`ŒackšgBrßdÿ¡Inv®id©iÚMes§ges
();

2149 
	`æushAµ’dOÆyFe
(0);

2152 
	`hªdËCl›ÁsW™hP’dšgWr™esUsšgTh»ads
();

2155 
	`ä“Cl›ÁsInAsyncF»eQueue
();

2160 ià(
	`moduËCouÁ
()è
	`moduËR–—£GIL
();

2161 
	}
}

2166 
	$aá”SË•
(
«Ev’tLoİ
 *
ev’tLoİ
) {

2167 
	`UNUSED
(
ev’tLoİ
);

2168 ià(
	`moduËCouÁ
()è
	`moduËAcquœeGIL
();

2169 
	}
}

2173 
	$ü—‹Sh¬edObjeùs
() {

2174 
j
;

2176 
sh¬ed
.
ülf
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("\r\n"));

2177 
sh¬ed
.
ok
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("+OK\r\n"));

2178 
sh¬ed
.
”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("-ERR\r\n"));

2179 
sh¬ed
.
em±ybulk
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("$0\r\n\r\n"));

2180 
sh¬ed
.
cz”o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(":0\r\n"));

2181 
sh¬ed
.
cÚe
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(":1\r\n"));

2182 
sh¬ed
.
em±y¬¿y
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("*0\r\n"));

2183 
sh¬ed
.
pÚg
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("+PONG\r\n"));

2184 
sh¬ed
.
queued
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("+QUEUED\r\n"));

2185 
sh¬ed
.
em±ysÿn
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("*2\r\n$1\r\n0\r\n*0\r\n"));

2186 
sh¬ed
.
wrÚgty³”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2188 
sh¬ed
.
nokey”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2190 
sh¬ed
.
syÁax”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2192 
sh¬ed
.
§meobjeù”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2194 
sh¬ed
.
outoäªg“¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2196 
sh¬ed
.
nosü‹¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2198 
sh¬ed
.
lßdšg”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2200 
sh¬ed
.
¦owsü‹¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2202 
sh¬ed
.
ma¡”dowÃ¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2204 
sh¬ed
.
bg§v“¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2206 
sh¬ed
.
ro¦av“¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2208 
sh¬ed
.
nßuth”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2210 
sh¬ed
.
oom”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2212 
sh¬ed
.
exeÿbÜ‹¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2214 
sh¬ed
.
nÜ•liÿ£¼
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2216 
sh¬ed
.
busykey”r
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(

2218 
sh¬ed
.
¥aû
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(" "));

2219 
sh¬ed
.
cŞÚ
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
(":"));

2220 
sh¬ed
.
¶us
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("+"));

2223 
sh¬ed
.
nuÎ
[0] = 
NULL
;

2224 
sh¬ed
.
nuÎ
[1] = 
NULL
;

2225 
sh¬ed
.
nuÎ
[2] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("$-1\r\n"));

2226 
sh¬ed
.
nuÎ
[3] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("_\r\n"));

2228 
sh¬ed
.
nuÎ¬¿y
[0] = 
NULL
;

2229 
sh¬ed
.
nuÎ¬¿y
[1] = 
NULL
;

2230 
sh¬ed
.
nuÎ¬¿y
[2] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("*-1\r\n"));

2231 
sh¬ed
.
nuÎ¬¿y
[3] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("_\r\n"));

2233 
sh¬ed
.
em±ym­
[0] = 
NULL
;

2234 
sh¬ed
.
em±ym­
[1] = 
NULL
;

2235 
sh¬ed
.
em±ym­
[2] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("*0\r\n"));

2236 
sh¬ed
.
em±ym­
[3] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("%0\r\n"));

2238 
sh¬ed
.
em±y£t
[0] = 
NULL
;

2239 
sh¬ed
.
em±y£t
[1] = 
NULL
;

2240 
sh¬ed
.
em±y£t
[2] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("*0\r\n"));

2241 
sh¬ed
.
em±y£t
[3] = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ew
("~0\r\n"));

2243 
j
 = 0; j < 
PROTO_SHARED_SELECT_CMDS
; j++) {

2244 
diùid_¡r
[64];

2245 
diùid_Ën
;

2247 
diùid_Ën
 = 
	`Î2¡ršg
(
diùid_¡r
,(diùid_¡r),
j
);

2248 
sh¬ed
.
£Ëù
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,

2249 
	`sdsÿrštf
(
	`sd£m±y
(),

2251 
diùid_Ën
, 
diùid_¡r
));

2253 
sh¬ed
.
mes§gebulk
 = 
	`ü—‹SŒšgObjeù
("$7\r\nmessage\r\n",13);

2254 
sh¬ed
.
pmes§gebulk
 = 
	`ü—‹SŒšgObjeù
("$8\r\npmessage\r\n",14);

2255 
sh¬ed
.
subsüibebulk
 = 
	`ü—‹SŒšgObjeù
("$9\r\nsubscribe\r\n",15);

2256 
sh¬ed
.
unsubsüibebulk
 = 
	`ü—‹SŒšgObjeù
("$11\r\nunsubscribe\r\n",18);

2257 
sh¬ed
.
psubsüibebulk
 = 
	`ü—‹SŒšgObjeù
("$10\r\npsubscribe\r\n",17);

2258 
sh¬ed
.
punsubsüibebulk
 = 
	`ü—‹SŒšgObjeù
("$12\r\npunsubscribe\r\n",19);

2259 
sh¬ed
.
d–
 = 
	`ü—‹SŒšgObjeù
("DEL",3);

2260 
sh¬ed
.
uÆšk
 = 
	`ü—‹SŒšgObjeù
("UNLINK",6);

2261 
sh¬ed
.
½İ
 = 
	`ü—‹SŒšgObjeù
("RPOP",4);

2262 
sh¬ed
.
Íİ
 = 
	`ü—‹SŒšgObjeù
("LPOP",4);

2263 
sh¬ed
.
Íush
 = 
	`ü—‹SŒšgObjeù
("LPUSH",5);

2264 
sh¬ed
.
½İÍush
 = 
	`ü—‹SŒšgObjeù
("RPOPLPUSH",9);

2265 
sh¬ed
.
zpİmš
 = 
	`ü—‹SŒšgObjeù
("ZPOPMIN",7);

2266 
sh¬ed
.
zpİmax
 = 
	`ü—‹SŒšgObjeù
("ZPOPMAX",7);

2267 
sh¬ed
.
muÉi
 = 
	`ü—‹SŒšgObjeù
("MULTI",5);

2268 
sh¬ed
.
exec
 = 
	`ü—‹SŒšgObjeù
("EXEC",4);

2269 
j
 = 0; j < 
OBJ_SHARED_INTEGERS
; j++) {

2270 
sh¬ed
.
š‹g”s
[
j
] =

2271 
	`makeObjeùSh¬ed
(
	`ü—‹Objeù
(
OBJ_STRING
,(*)()
j
));

2272 
sh¬ed
.
š‹g”s
[
j
]->
’codšg
 = 
OBJ_ENCODING_INT
;

2274 
j
 = 0; j < 
OBJ_SHARED_BULKHDR_LEN
; j++) {

2275 
sh¬ed
.
mbulkhdr
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,

2276 
	`sdsÿrštf
(
	`sd£m±y
(),"*%d\r\n",
j
));

2277 
sh¬ed
.
bulkhdr
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,

2278 
	`sdsÿrštf
(
	`sd£m±y
(),"$%d\r\n",
j
));

2284 
sh¬ed
.
mš¡ršg
 = 
	`sd¢ew
("minstring");

2285 
sh¬ed
.
max¡ršg
 = 
	`sd¢ew
("maxstring");

2286 
	}
}

2288 
	$š™S”v”CÚfig
() {

2289 
j
;

2291 
	`upd©eCachedTime
(1);

2292 
	`g‘RªdomHexCh¬s
(
£rv”
.
runid
,
CONFIG_RUN_ID_SIZE
);

2293 
£rv”
.
runid
[
CONFIG_RUN_ID_SIZE
] = '\0';

2294 
	`chªgeR•liÿtiÚId
();

2295 
	`ş—rR•liÿtiÚId2
();

2296 
£rv”
.
hz
 = 
CONFIG_DEFAULT_HZ
;

2300 
£rv”
.
timezÚe
 = 
	`g‘TimeZÚe
();

2301 
£rv”
.
cÚfigfe
 = 
NULL
;

2302 
£rv”
.
execubË
 = 
NULL
;

2303 
£rv”
.
¬ch_b™s
 = (() == 8) ? 64 : 32;

2304 
£rv”
.
bšdaddr_couÁ
 = 0;

2305 
£rv”
.
unixsock‘³rm
 = 
CONFIG_DEFAULT_UNIX_SOCKET_PERM
;

2306 
£rv”
.
fd_couÁ
 = 0;

2307 
£rv”
.
sfd_couÁ
 = 0;

2308 
£rv”
.
sofd
 = -1;

2309 
£rv”
.
aùive_expœe_’abËd
 = 1;

2310 
£rv”
.
ş›Á_max_qu”ybuf_Ën
 = 
PROTO_MAX_QUERYBUF_LEN
;

2311 
£rv”
.
§v•¬ams
 = 
NULL
;

2312 
£rv”
.
lßdšg
 = 0;

2313 
£rv”
.
logfe
 = 
	`z¡rdup
(
CONFIG_DEFAULT_LOGFILE
);

2314 
£rv”
.
aof_¡©e
 = 
AOF_OFF
;

2315 
£rv”
.
aof_»wr™e_ba£_size
 = 0;

2316 
£rv”
.
aof_»wr™e_scheduËd
 = 0;

2317 
£rv”
.
aof_æush_¦“p
 = 0;

2318 
£rv”
.
aof_Ï¡_fsync
 = 
	`time
(
NULL
);

2319 
£rv”
.
aof_»wr™e_time_Ï¡
 = -1;

2320 
£rv”
.
aof_»wr™e_time_¡¬t
 = -1;

2321 
£rv”
.
aof_Ï¡bg»wr™e_¡©us
 = 
C_OK
;

2322 
£rv”
.
aof_d–ayed_fsync
 = 0;

2323 
£rv”
.
aof_fd
 = -1;

2324 
£rv”
.
aof_£Ëùed_db
 = -1;

2325 
£rv”
.
aof_æush_po¡pÚed_¡¬t
 = 0;

2326 
£rv”
.
pidfe
 = 
NULL
;

2327 
£rv”
.
aùive_deäag_ruÂšg
 = 0;

2328 
£rv”
.
nÙify_key¥aû_ev’ts
 = 0;

2329 
£rv”
.
blocked_ş›Ás
 = 0;

2330 
	`mem£t
(
£rv”
.
blocked_ş›Ás_by_ty³
,0,

2331 (
£rv”
.
blocked_ş›Ás_by_ty³
));

2332 
£rv”
.
shutdown_a§p
 = 0;

2333 
£rv”
.
şu¡”_cÚfigfe
 = 
	`z¡rdup
(
CONFIG_DEFAULT_CLUSTER_CONFIG_FILE
);

2334 
£rv”
.
şu¡”_moduË_æags
 = 
CLUSTER_MODULE_FLAG_NONE
;

2335 
£rv”
.
mig¿‹_ÿched_sock‘s
 = 
	`diùC»©e
(&
mig¿‹CacheDiùTy³
,
NULL
);

2336 
£rv”
.
Ãxt_ş›Á_id
 = 1;

2337 
£rv”
.
lßdšg_´oûss_ev’ts_š‹rv®_by‹s
 = (1024*1024*2);

2339 
£rv”
.
Ìuşock
 = 
	`g‘LRUClock
();

2340 
	`»£tS”v”SaveP¬ams
();

2342 
	`­³ndS”v”SaveP¬ams
(60*60,1);

2343 
	`­³ndS”v”SaveP¬ams
(300,100);

2344 
	`­³ndS”v”SaveP¬ams
(60,10000);

2347 
£rv”
.
ma¡”auth
 = 
NULL
;

2348 
£rv”
.
ma¡”ho¡
 = 
NULL
;

2349 
£rv”
.
ma¡”pÜt
 = 6379;

2350 
£rv”
.
ma¡”
 = 
NULL
;

2351 
£rv”
.
ÿched_ma¡”
 = 
NULL
;

2352 
£rv”
.
ma¡”_š™Ÿl_off£t
 = -1;

2353 
£rv”
.
»¶_¡©e
 = 
REPL_STATE_NONE
;

2354 
£rv”
.
»¶_Œªsãr_tmpfe
 = 
NULL
;

2355 
£rv”
.
»¶_Œªsãr_fd
 = -1;

2356 
£rv”
.
»¶_Œªsãr_s
 = 
NULL
;

2357 
£rv”
.
»¶_syncio_timeout
 = 
CONFIG_REPL_SYNCIO_TIMEOUT
;

2358 
£rv”
.
»¶_down_sšû
 = 0;

2359 
£rv”
.
ma¡”_»¶_off£t
 = 0;

2360 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = 0;

2363 
£rv”
.
»¶_backlog
 = 
NULL
;

2364 
£rv”
.
»¶_backlog_hi¡Ën
 = 0;

2365 
£rv”
.
»¶_backlog_idx
 = 0;

2366 
£rv”
.
»¶_backlog_off
 = 0;

2367 
£rv”
.
»¶_no_¦aves_sšû
 = 
	`time
(
NULL
);

2370 
j
 = 0; j < 
CLIENT_TYPE_OBUF_COUNT
; j++)

2371 
£rv”
.
ş›Á_obuf_lim™s
[
j
] = 
ş›ÁBufãrLim™sDeçuÉs
[j];

2374 
R_Z”o
 = 0.0;

2375 
R_PosInf
 = 1.0/
R_Z”o
;

2376 
R_NegInf
 = -1.0/
R_Z”o
;

2377 
R_Nª
 = 
R_Z”o
/R_Zero;

2382 
£rv”
.
commªds
 = 
	`diùC»©e
(&
commªdTabËDiùTy³
,
NULL
);

2383 
£rv”
.
Üig_commªds
 = 
	`diùC»©e
(&
commªdTabËDiùTy³
,
NULL
);

2384 
	`pİuÏ‹CommªdTabË
();

2385 
£rv”
.
d–Commªd
 = 
	`lookupCommªdByCSŒšg
("del");

2386 
£rv”
.
muÉiCommªd
 = 
	`lookupCommªdByCSŒšg
("multi");

2387 
£rv”
.
ÍushCommªd
 = 
	`lookupCommªdByCSŒšg
("lpush");

2388 
£rv”
.
ÍİCommªd
 = 
	`lookupCommªdByCSŒšg
("lpop");

2389 
£rv”
.
½İCommªd
 = 
	`lookupCommªdByCSŒšg
("rpop");

2390 
£rv”
.
zpİmšCommªd
 = 
	`lookupCommªdByCSŒšg
("zpopmin");

2391 
£rv”
.
zpİmaxCommªd
 = 
	`lookupCommªdByCSŒšg
("zpopmax");

2392 
£rv”
.
¤emCommªd
 = 
	`lookupCommªdByCSŒšg
("srem");

2393 
£rv”
.
execCommªd
 = 
	`lookupCommªdByCSŒšg
("exec");

2394 
£rv”
.
expœeCommªd
 = 
	`lookupCommªdByCSŒšg
("expire");

2395 
£rv”
.
³xpœeCommªd
 = 
	`lookupCommªdByCSŒšg
("pexpire");

2396 
£rv”
.
xşaimCommªd
 = 
	`lookupCommªdByCSŒšg
("xclaim");

2397 
£rv”
.
xgroupCommªd
 = 
	`lookupCommªdByCSŒšg
("xgroup");

2398 
£rv”
.
½İÍushCommªd
 = 
	`lookupCommªdByCSŒšg
("rpoplpush");

2401 
£rv”
.
as£¹_çed
 = "<no‡ssertion failed>";

2402 
£rv”
.
as£¹_fe
 = "<no file>";

2403 
£rv”
.
as£¹_lše
 = 0;

2404 
£rv”
.
bug_»pÜt_¡¬t
 = 0;

2405 
£rv”
.
w©chdog_³riod
 = 0;

2411 
£rv”
.
lua_®ways_»¶iÿ‹_commªds
 = 1;

2413 
	`š™CÚfigV®ues
();

2414 
	}
}

2416 **
’vœÚ
;

2433 
	$»¡¬tS”v”
(
æags
, 
m¡ime_t
 
d–ay
) {

2434 
j
;

2438 ià(
	`acûss
(
£rv”
.
execubË
,
X_OK
) == -1) {

2439 
	`£rv”Log
(
LL_WARNING
,"Can't„estart:his…rocess has‚o "

2440 "³rmissiÚ tØexecu‹ %s", 
£rv”
.
execubË
);

2441  
C_ERR
;

2445 ià(
æags
 & 
RESTART_SERVER_CONFIG_REWRITE
 &&

2446 
£rv”
.
cÚfigfe
 &&

2447 
	`»wr™eCÚfig
(
£rv”
.
cÚfigfe
) == -1)

2449 
	`£rv”Log
(
LL_WARNING
,"Can't„estart: configuration„ewrite…rocess "

2451  
C_ERR
;

2455 ià(
æags
 & 
RESTART_SERVER_GRACEFULLY
 &&

2456 
	`´•¬eFÜShutdown
(
SHUTDOWN_NOFLAGS
è!ğ
C_OK
)

2458 
	`£rv”Log
(
LL_WARNING
,"Can't„estart:ƒrror…reparing for shutdown");

2459  
C_ERR
;

2464 
j
 = 3; j < ()
£rv”
.
maxş›Ás
 + 1024; j++) {

2467 ià(
	`fú
(
j
,
F_GETFD
è!ğ-1è
	`şo£
(j);

2471 ià(
d–ay
è
	`u¦“p
(delay*1000);

2472 
	`zä“
(
£rv”
.
exec_¬gv
[0]);

2473 
£rv”
.
exec_¬gv
[0] = 
	`z¡rdup
(£rv”.
execubË
);

2474 
	`execve
(
£rv”
.
execubË
,£rv”.
exec_¬gv
,
’vœÚ
);

2477 
	`_ex™
(1);

2479  
C_ERR
;

2480 
	}
}

2490 
	$adju¡O³nFesLim™
() {

2491 
¾im_t
 
maxfes
 = 
£rv”
.
maxş›Ás
+
CONFIG_MIN_RESERVED_FDS
;

2492 
¾im™
 
lim™
;

2494 ià(
	`g‘¾im™
(
RLIMIT_NOFILE
,&
lim™
) == -1) {

2495 
	`£rv”Log
(
LL_WARNING
,"Unableo obtainhe current NOFILE†imit (%s),‡ssuming 1024‡nd settinghe max clients configuration‡ccordingly.",

2496 
	`¡»¼Ü
(
”ºo
));

2497 
£rv”
.
maxş›Ás
 = 1024-
CONFIG_MIN_RESERVED_FDS
;

2499 
¾im_t
 
Şdlim™
 = 
lim™
.
¾im_cur
;

2503 ià(
Şdlim™
 < 
maxfes
) {

2504 
¾im_t
 
be¡lim™
;

2505 
£Œlim™_”rÜ
 = 0;

2509 
be¡lim™
 = 
maxfes
;

2510 
be¡lim™
 > 
Şdlim™
) {

2511 
¾im_t
 
deü_¡•
 = 16;

2513 
lim™
.
¾im_cur
 = 
be¡lim™
;

2514 
lim™
.
¾im_max
 = 
be¡lim™
;

2515 ià(
	`£Œlim™
(
RLIMIT_NOFILE
,&
lim™
) != -1) ;

2516 
£Œlim™_”rÜ
 = 
”ºo
;

2520 ià(
be¡lim™
 < 
deü_¡•
) ;

2521 
be¡lim™
 -ğ
deü_¡•
;

2526 ià(
be¡lim™
 < 
Şdlim™
) bestlimit = oldlimit;

2528 ià(
be¡lim™
 < 
maxfes
) {

2529 
Şd_maxş›Ás
 = 
£rv”
.
maxş›Ás
;

2530 
£rv”
.
maxş›Ás
 = 
be¡lim™
-
CONFIG_MIN_RESERVED_FDS
;

2534 ià(
be¡lim™
 <ğ
CONFIG_MIN_RESERVED_FDS
) {

2535 
	`£rv”Log
(
LL_WARNING
,"Your current 'ulimit -n' "

2539 (è
Şdlim™
,

2540 (è
maxfes
);

2541 
	`ex™
(1);

2543 
	`£rv”Log
(
LL_WARNING
,"You„equested maxclients of %d "

2545 
Şd_maxş›Ás
,

2546 (è
maxfes
);

2547 
	`£rv”Log
(
LL_WARNING
,"Server can't set maximum open files "

2549 (è
maxfes
, 
	`¡»¼Ü
(
£Œlim™_”rÜ
));

2550 
	`£rv”Log
(
LL_WARNING
,"Current maximum open files is %llu. "

2554 (è
be¡lim™
, 
£rv”
.
maxş›Ás
);

2556 
	`£rv”Log
(
LL_NOTICE
,"Increased maximum‚umber of open files "

2558 (è
maxfes
,

2559 (è
Şdlim™
);

2563 
	}
}

2567 
	$checkTıBacklogS‘tšgs
() {

2568 #ifdeà
HAVE_PROC_SOMAXCONN


2569 
FILE
 *
å
 = 
	`fİ’
("/proc/sys/net/core/somaxconn","r");

2570 
buf
[1024];

2571 ià(!
å
) ;

2572 ià(
	`fg‘s
(
buf
,(buf),
å
è!ğ
NULL
) {

2573 
somaxcÚn
 = 
	`©oi
(
buf
);

2574 ià(
somaxcÚn
 > 0 && somaxcÚÀ< 
£rv”
.
tı_backlog
) {

2575 
	`£rv”Log
(
LL_WARNING
,"WARNING: ThTCP backlog s‘tšg oà%d cªnÙ b’fÜûd beÿu£ /´oc/sys/Ãt/cÜe/somaxcÚÀi £ˆtØthlow” v®uoà%d.", 
£rv”
.
tı_backlog
, 
somaxcÚn
);

2578 
	`fşo£
(
å
);

2580 
	}
}

2600 
	$li¡’ToPÜt
(
pÜt
, *
fds
, *
couÁ
) {

2601 
j
;

2605 ià(
£rv”
.
bšdaddr_couÁ
 =ğ0è£rv”.
bšdaddr
[0] = 
NULL
;

2606 
j
 = 0; j < 
£rv”
.
bšdaddr_couÁ
 || j == 0; j++) {

2607 ià(
£rv”
.
bšdaddr
[
j
] =ğ
NULL
) {

2608 
unsuµÜ‹d
 = 0;

2611 
fds
[*
couÁ
] = 
	`ª‘Tı6S”v”
(
£rv”
.
Ã‹¼
,
pÜt
,
NULL
,

2612 
£rv”
.
tı_backlog
);

2613 ià(
fds
[*
couÁ
] !ğ
ANET_ERR
) {

2614 
	`ª‘NÚBlock
(
NULL
,
fds
[*
couÁ
]);

2615 (*
couÁ
)++;

2616 } ià(
”ºo
 =ğ
EAFNOSUPPORT
) {

2617 
unsuµÜ‹d
++;

2618 
	`£rv”Log
(
LL_WARNING
,"Not†isteningo IPv6: unsupported");

2621 ià(*
couÁ
 =ğ1 || 
unsuµÜ‹d
) {

2623 
fds
[*
couÁ
] = 
	`ª‘TıS”v”
(
£rv”
.
Ã‹¼
,
pÜt
,
NULL
,

2624 
£rv”
.
tı_backlog
);

2625 ià(
fds
[*
couÁ
] !ğ
ANET_ERR
) {

2626 
	`ª‘NÚBlock
(
NULL
,
fds
[*
couÁ
]);

2627 (*
couÁ
)++;

2628 } ià(
”ºo
 =ğ
EAFNOSUPPORT
) {

2629 
unsuµÜ‹d
++;

2630 
	`£rv”Log
(
LL_WARNING
,"Not†isteningo IPv4: unsupported");

2636 ià(*
couÁ
 + 
unsuµÜ‹d
 == 2) ;

2637 } ià(
	`¡rchr
(
£rv”
.
bšdaddr
[
j
],':')) {

2639 
fds
[*
couÁ
] = 
	`ª‘Tı6S”v”
(
£rv”
.
Ã‹¼
,
pÜt
,£rv”.
bšdaddr
[
j
],

2640 
£rv”
.
tı_backlog
);

2643 
fds
[*
couÁ
] = 
	`ª‘TıS”v”
(
£rv”
.
Ã‹¼
,
pÜt
,£rv”.
bšdaddr
[
j
],

2644 
£rv”
.
tı_backlog
);

2646 ià(
fds
[*
couÁ
] =ğ
ANET_ERR
) {

2647 
	`£rv”Log
(
LL_WARNING
,

2649 
£rv”
.
bšdaddr
[
j
] ? server.bindaddr[j] : "*",

2650 
pÜt
, 
£rv”
.
Ã‹¼
);

2651 ià(
”ºo
 =ğ
ENOPROTOOPT
 ||ƒ¼nØ=ğ
EPROTONOSUPPORT
 ||

2652 
”ºo
 =ğ
ESOCKTNOSUPPORT
 ||ƒ¼nØ=ğ
EPFNOSUPPORT
 ||

2653 
”ºo
 =ğ
EAFNOSUPPORT
 ||ƒ¼nØ=ğ
EADDRNOTAVAIL
)

2655  
C_ERR
;

2657 
	`ª‘NÚBlock
(
NULL
,
fds
[*
couÁ
]);

2658 (*
couÁ
)++;

2660  
C_OK
;

2661 
	}
}

2666 
	$»£tS”v”Sts
() {

2667 
j
;

2669 
£rv”
.
¡©_numcommªds
 = 0;

2670 
£rv”
.
¡©_numcÚÃùiÚs
 = 0;

2671 
£rv”
.
¡©_expœedkeys
 = 0;

2672 
£rv”
.
¡©_expœed_¡®e_³rc
 = 0;

2673 
£rv”
.
¡©_expœed_time_ÿp_»ached_couÁ
 = 0;

2674 
£rv”
.
¡©_expœe_cyşe_time_u£d
 = 0;

2675 
£rv”
.
¡©_eviùedkeys
 = 0;

2676 
£rv”
.
¡©_key¥aû_mis£s
 = 0;

2677 
£rv”
.
¡©_key¥aû_h™s
 = 0;

2678 
£rv”
.
¡©_aùive_deäag_h™s
 = 0;

2679 
£rv”
.
¡©_aùive_deäag_mis£s
 = 0;

2680 
£rv”
.
¡©_aùive_deäag_key_h™s
 = 0;

2681 
£rv”
.
¡©_aùive_deäag_key_mis£s
 = 0;

2682 
£rv”
.
¡©_aùive_deäag_sÿÂed
 = 0;

2683 
£rv”
.
¡©_fÜk_time
 = 0;

2684 
£rv”
.
¡©_fÜk_¿‹
 = 0;

2685 
£rv”
.
¡©_»jeùed_cÚn
 = 0;

2686 
£rv”
.
¡©_sync_fuÎ
 = 0;

2687 
£rv”
.
¡©_sync_·¹Ÿl_ok
 = 0;

2688 
£rv”
.
¡©_sync_·¹Ÿl_”r
 = 0;

2689 
j
 = 0; j < 
STATS_METRIC_COUNT
; j++) {

2690 
£rv”
.
š¡_m‘ric
[
j
].
idx
 = 0;

2691 
£rv”
.
š¡_m‘ric
[
j
].
Ï¡_§m¶e_time
 = 
	`m¡ime
();

2692 
£rv”
.
š¡_m‘ric
[
j
].
Ï¡_§m¶e_couÁ
 = 0;

2693 
	`mem£t
(
£rv”
.
š¡_m‘ric
[
j
].
§m¶es
,0,

2694 (
£rv”
.
š¡_m‘ric
[
j
].
§m¶es
));

2696 
£rv”
.
¡©_Ãt_šput_by‹s
 = 0;

2697 
£rv”
.
¡©_Ãt_ouut_by‹s
 = 0;

2698 
£rv”
.
¡©_uÃx³ùed_”rÜ_»¶›s
 = 0;

2699 
£rv”
.
aof_d–ayed_fsync
 = 0;

2700 
	}
}

2702 
	$š™S”v”
() {

2703 
j
;

2705 
	`sigÇl
(
SIGHUP
, 
SIG_IGN
);

2706 
	`sigÇl
(
SIGPIPE
, 
SIG_IGN
);

2707 
	`£tupSigÇlHªdËrs
();

2709 ià(
£rv”
.
sy¦og_’abËd
) {

2710 
	`İ’log
(
£rv”
.
sy¦og_id’t
, 
LOG_PID
 | 
LOG_NDELAY
 | 
LOG_NOWAIT
,

2711 
£rv”
.
sy¦og_çc™y
);

2715 
£rv”
.
aof_¡©e
 = s”v”.
aof_’abËd
 ? 
AOF_ON
 : 
AOF_OFF
;

2716 
£rv”
.
hz
 = s”v”.
cÚfig_hz
;

2717 
£rv”
.
pid
 = 
	`g‘pid
();

2718 
£rv”
.
cu¼’t_ş›Á
 = 
NULL
;

2719 
£rv”
.
fixed_time_expœe
 = 0;

2720 
£rv”
.
ş›Ás
 = 
	`li¡C»©e
();

2721 
£rv”
.
ş›Ás_šdex
 = 
	`¿xNew
();

2722 
£rv”
.
ş›Ás_to_şo£
 = 
	`li¡C»©e
();

2723 
£rv”
.
¦aves
 = 
	`li¡C»©e
();

2724 
£rv”
.
mÚ™Üs
 = 
	`li¡C»©e
();

2725 
£rv”
.
ş›Ás_³ndšg_wr™e
 = 
	`li¡C»©e
();

2726 
£rv”
.
ş›Ás_³ndšg_»ad
 = 
	`li¡C»©e
();

2727 
£rv”
.
ş›Ás_timeout_bË
 = 
	`¿xNew
();

2728 
£rv”
.
¦ave£ldb
 = -1;

2729 
£rv”
.
unblocked_ş›Ás
 = 
	`li¡C»©e
();

2730 
£rv”
.
»ady_keys
 = 
	`li¡C»©e
();

2731 
£rv”
.
ş›Ás_wa™šg_acks
 = 
	`li¡C»©e
();

2732 
£rv”
.
g‘_ack_äom_¦aves
 = 0;

2733 
£rv”
.
ş›Ás_·u£d
 = 0;

2734 
£rv”
.
sy¡em_memÜy_size
 = 
	`zm®loc_g‘_memÜy_size
();

2736 ià(
£rv”
.
s_pÜt
 && 
	`sCÚfigu»
(&£rv”.
s_ùx_cÚfig
è=ğ
C_ERR
) {

2737 
	`£rv”Log
(
LL_WARNING
, "Failedo configure TLS. Check†ogs for more info.");

2738 
	`ex™
(1);

2741 
	`ü—‹Sh¬edObjeùs
();

2742 
	`adju¡O³nFesLim™
();

2743 
£rv”
.
–
 = 
	`«C»©eEv’tLoİ
(£rv”.
maxş›Ás
+
CONFIG_FDSET_INCR
);

2744 ià(
£rv”
.
–
 =ğ
NULL
) {

2745 
	`£rv”Log
(
LL_WARNING
,

2747 
	`¡»¼Ü
(
”ºo
));

2748 
	`ex™
(1);

2750 
£rv”
.
db
 = 
	`zm®loc
((
»disDb
)*£rv”.
dbnum
);

2753 ià(
£rv”
.
pÜt
 != 0 &&

2754 
	`li¡’ToPÜt
(
£rv”
.
pÜt
,£rv”.
fd
,&£rv”.
fd_couÁ
è=ğ
C_ERR
)

2755 
	`ex™
(1);

2756 ià(
£rv”
.
s_pÜt
 != 0 &&

2757 
	`li¡’ToPÜt
(
£rv”
.
s_pÜt
,£rv”.
sfd
,&£rv”.
sfd_couÁ
è=ğ
C_ERR
)

2758 
	`ex™
(1);

2761 ià(
£rv”
.
unixsock‘
 !ğ
NULL
) {

2762 
	`uÆšk
(
£rv”
.
unixsock‘
);

2763 
£rv”
.
sofd
 = 
	`ª‘UnixS”v”
(£rv”.
Ã‹¼
,£rv”.
unixsock‘
,

2764 
£rv”
.
unixsock‘³rm
, s”v”.
tı_backlog
);

2765 ià(
£rv”
.
sofd
 =ğ
ANET_ERR
) {

2766 
	`£rv”Log
(
LL_WARNING
, "O³nšg Unix sock‘: %s", 
£rv”
.
Ã‹¼
);

2767 
	`ex™
(1);

2769 
	`ª‘NÚBlock
(
NULL
,
£rv”
.
sofd
);

2773 ià(
£rv”
.
fd_couÁ
 =ğ0 && s”v”.
sfd_couÁ
 =ğ0 && s”v”.
sofd
 < 0) {

2774 
	`£rv”Log
(
LL_WARNING
, "Configuredo‚ot†isten‡nywhere,ƒxiting.");

2775 
	`ex™
(1);

2779 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

2780 
£rv”
.
db
[
j
].
diù
 = 
	`diùC»©e
(&
dbDiùTy³
,
NULL
);

2781 
£rv”
.
db
[
j
].
expœes
 = 
	`diùC»©e
(&
key±rDiùTy³
,
NULL
);

2782 
£rv”
.
db
[
j
].
expœes_cursÜ
 = 0;

2783 
£rv”
.
db
[
j
].
blockšg_keys
 = 
	`diùC»©e
(&
keyli¡DiùTy³
,
NULL
);

2784 
£rv”
.
db
[
j
].
»ady_keys
 = 
	`diùC»©e
(&
objeùKeyPoš‹rV®ueDiùTy³
,
NULL
);

2785 
£rv”
.
db
[
j
].
w©ched_keys
 = 
	`diùC»©e
(&
keyli¡DiùTy³
,
NULL
);

2786 
£rv”
.
db
[
j
].
id
 = j;

2787 
£rv”
.
db
[
j
].
avg_‰l
 = 0;

2788 
£rv”
.
db
[
j
].
deäag_Ï‹r
 = 
	`li¡C»©e
();

2789 
	`li¡S‘F»eM‘hod
(
£rv”
.
db
[
j
].
deäag_Ï‹r
,((*)(*))
sdsä“
);

2791 
	`eviùiÚPoŞAÎoc
();

2792 
£rv”
.
pubsub_chªÃls
 = 
	`diùC»©e
(&
keyli¡DiùTy³
,
NULL
);

2793 
£rv”
.
pubsub_·‰”ns
 = 
	`li¡C»©e
();

2794 
£rv”
.
pubsub_·‰”ns_diù
 = 
	`diùC»©e
(&
keyli¡DiùTy³
,
NULL
);

2795 
	`li¡S‘F»eM‘hod
(
£rv”
.
pubsub_·‰”ns
,
ä“PubsubP©‹º
);

2796 
	`li¡S‘M©chM‘hod
(
£rv”
.
pubsub_·‰”ns
,
li¡M©chPubsubP©‹º
);

2797 
£rv”
.
üÚloİs
 = 0;

2798 
£rv”
.
rdb_chd_pid
 = -1;

2799 
£rv”
.
aof_chd_pid
 = -1;

2800 
£rv”
.
moduË_chd_pid
 = -1;

2801 
£rv”
.
rdb_chd_ty³
 = 
RDB_CHILD_TYPE_NONE
;

2802 
£rv”
.
rdb_pe_cÚns
 = 
NULL
;

2803 
£rv”
.
rdb_pe_numcÚns
 = 0;

2804 
£rv”
.
rdb_pe_numcÚns_wr™šg
 = 0;

2805 
£rv”
.
rdb_pe_buff
 = 
NULL
;

2806 
£rv”
.
rdb_pe_bufæ’
 = 0;

2807 
£rv”
.
rdb_bg§ve_scheduËd
 = 0;

2808 
£rv”
.
chd_šfo_pe
[0] = -1;

2809 
£rv”
.
chd_šfo_pe
[1] = -1;

2810 
£rv”
.
chd_šfo_d©a
.
magic
 = 0;

2811 
	`aofRewr™eBufãrRe£t
();

2812 
£rv”
.
aof_buf
 = 
	`sd£m±y
();

2813 
£rv”
.
Ï¡§ve
 = 
	`time
(
NULL
);

2814 
£rv”
.
Ï¡bg§ve_Œy
 = 0;

2815 
£rv”
.
rdb_§ve_time_Ï¡
 = -1;

2816 
£rv”
.
rdb_§ve_time_¡¬t
 = -1;

2817 
£rv”
.
dœty
 = 0;

2818 
	`»£tS”v”Sts
();

2820 
£rv”
.
¡©_¡¬‰ime
 = 
	`time
(
NULL
);

2821 
£rv”
.
¡©_³ak_memÜy
 = 0;

2822 
£rv”
.
¡©_rdb_cow_by‹s
 = 0;

2823 
£rv”
.
¡©_aof_cow_by‹s
 = 0;

2824 
£rv”
.
¡©_moduË_cow_by‹s
 = 0;

2825 
j
 = 0; j < 
CLIENT_TYPE_COUNT
; j++)

2826 
£rv”
.
¡©_ş›Ás_ty³_memÜy
[
j
] = 0;

2827 
£rv”
.
üÚ_m®loc_¡©s
.
zm®loc_u£d
 = 0;

2828 
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
 = 0;

2829 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
 = 0;

2830 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
 = 0;

2831 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
 = 0;

2832 
£rv”
.
Ï¡bg§ve_¡©us
 = 
C_OK
;

2833 
£rv”
.
aof_Ï¡_wr™e_¡©us
 = 
C_OK
;

2834 
£rv”
.
aof_Ï¡_wr™e_”ºo
 = 0;

2835 
£rv”
.
»¶_good_¦aves_couÁ
 = 0;

2840 ià(
	`«C»©eTimeEv’t
(
£rv”
.
–
, 1, 
£rv”CrÚ
, 
NULL
, NULLè=ğ
AE_ERR
) {

2841 
	`£rv”Pªic
("Can't createƒvent†oopimers.");

2842 
	`ex™
(1);

2847 
j
 = 0; j < 
£rv”
.
fd_couÁ
; j++) {

2848 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
fd
[
j
], 
AE_READABLE
,

2849 
acû±TıHªdËr
,
NULL
è=ğ
AE_ERR
)

2851 
	`£rv”Pªic
(

2855 
j
 = 0; j < 
£rv”
.
sfd_couÁ
; j++) {

2856 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
sfd
[
j
], 
AE_READABLE
,

2857 
acû±TLSHªdËr
,
NULL
è=ğ
AE_ERR
)

2859 
	`£rv”Pªic
(

2863 ià(
£rv”
.
sofd
 > 0 && 
	`«C»©eFeEv’t
(£rv”.
–
,£rv”.sofd,
AE_READABLE
,

2864 
acû±UnixHªdËr
,
NULL
è=ğ
AE_ERR
è
	`£rv”Pªic
("Unrecoverableƒrror creating server.sofd fileƒvent.");

2869 ià(
	`«C»©eFeEv’t
(
£rv”
.
–
, s”v”.
moduË_blocked_pe
[0], 
AE_READABLE
,

2870 
moduËBlockedCl›ÁPeR—dabË
,
NULL
è=ğ
AE_ERR
) {

2871 
	`£rv”Pªic
(

2877 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_ON
) {

2878 
£rv”
.
aof_fd
 = 
	`İ’
(£rv”.
aof_f’ame
,

2879 
O_WRONLY
|
O_APPEND
|
O_CREAT
,0644);

2880 ià(
£rv”
.
aof_fd
 == -1) {

2881 
	`£rv”Log
(
LL_WARNING
, "Can't openhe‡ppend-only file: %s",

2882 
	`¡»¼Ü
(
”ºo
));

2883 
	`ex™
(1);

2891 ià(
£rv”
.
¬ch_b™s
 =ğ32 && s”v”.
maxmemÜy
 == 0) {

2892 
	`£rv”Log
(
LL_WARNING
,"Warning: 32 bit instance detected but‚o memory†imit set. Setting 3 GB maxmemory†imit with 'noeviction'…olicy‚ow.");

2893 
£rv”
.
maxmemÜy
 = 3072LL*(1024*1024);

2894 
£rv”
.
maxmemÜy_pŞicy
 = 
MAXMEMORY_NO_EVICTION
;

2897 ià(
£rv”
.
şu¡”_’abËd
è
	`şu¡”In™
();

2898 
	`»¶iÿtiÚSütCacheIn™
();

2899 
	`sütšgIn™
(1);

2900 
	`¦owlogIn™
();

2901 
	`Ï‹ncyMÚ™ÜIn™
();

2902 
	}
}

2909 
	$In™S”v”La¡
() {

2910 
	`bioIn™
();

2911 
	`š™Th»adedIO
();

2912 
	`£t_jem®loc_bg_th»ad
(
£rv”
.
jem®loc_bg_th»ad
);

2913 
£rv”
.
š™Ÿl_memÜy_u§ge
 = 
	`zm®loc_u£d_memÜy
();

2914 
	}
}

2919 
	$pİuÏ‹CommªdTabËP¬£FÏgs
(
»disCommªd
 *
c
, *
¡ræags
) {

2920 
¬gc
;

2921 
sds
 *
¬gv
;

2924 
¬gv
 = 
	`sds¥l™¬gs
(
¡ræags
,&
¬gc
);

2925 ià(
¬gv
 =ğ
NULL
è 
C_ERR
;

2927 
j
 = 0; j < 
¬gc
; j++) {

2928 *
æag
 = 
¬gv
[
j
];

2929 ià(!
	`¡rÿ£cmp
(
æag
,"write")) {

2930 
c
->
æags
 |ğ
CMD_WRITE
|
CMD_CATEGORY_WRITE
;

2931 } ià(!
	`¡rÿ£cmp
(
æag
,"read-only")) {

2932 
c
->
æags
 |ğ
CMD_READONLY
|
CMD_CATEGORY_READ
;

2933 } ià(!
	`¡rÿ£cmp
(
æag
,"use-memory")) {

2934 
c
->
æags
 |ğ
CMD_DENYOOM
;

2935 } ià(!
	`¡rÿ£cmp
(
æag
,"admin")) {

2936 
c
->
æags
 |ğ
CMD_ADMIN
|
CMD_CATEGORY_ADMIN
|
CMD_CATEGORY_DANGEROUS
;

2937 } ià(!
	`¡rÿ£cmp
(
æag
,"pub-sub")) {

2938 
c
->
æags
 |ğ
CMD_PUBSUB
|
CMD_CATEGORY_PUBSUB
;

2939 } ià(!
	`¡rÿ£cmp
(
æag
,"no-script")) {

2940 
c
->
æags
 |ğ
CMD_NOSCRIPT
;

2941 } ià(!
	`¡rÿ£cmp
(
æag
,"random")) {

2942 
c
->
æags
 |ğ
CMD_RANDOM
;

2943 } ià(!
	`¡rÿ£cmp
(
æag
,"to-sort")) {

2944 
c
->
æags
 |ğ
CMD_SORT_FOR_SCRIPT
;

2945 } ià(!
	`¡rÿ£cmp
(
æag
,"ok-loading")) {

2946 
c
->
æags
 |ğ
CMD_LOADING
;

2947 } ià(!
	`¡rÿ£cmp
(
æag
,"ok-stale")) {

2948 
c
->
æags
 |ğ
CMD_STALE
;

2949 } ià(!
	`¡rÿ£cmp
(
æag
,"no-monitor")) {

2950 
c
->
æags
 |ğ
CMD_SKIP_MONITOR
;

2951 } ià(!
	`¡rÿ£cmp
(
æag
,"no-slowlog")) {

2952 
c
->
æags
 |ğ
CMD_SKIP_SLOWLOG
;

2953 } ià(!
	`¡rÿ£cmp
(
æag
,"cluster-asking")) {

2954 
c
->
æags
 |ğ
CMD_ASKING
;

2955 } ià(!
	`¡rÿ£cmp
(
æag
,"fast")) {

2956 
c
->
æags
 |ğ
CMD_FAST
 | 
CMD_CATEGORY_FAST
;

2957 } ià(!
	`¡rÿ£cmp
(
æag
,"no-auth")) {

2958 
c
->
æags
 |ğ
CMD_NO_AUTH
;

2961 
ušt64_t
 
ÿtæag
;

2962 ià(
æag
[0] == '@' &&

2963 (
ÿtæag
 = 
	`ACLG‘CommªdC©egÜyFÏgByName
(
æag
+1)) != 0)

2965 
c
->
æags
 |ğ
ÿtæag
;

2967 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2968  
C_ERR
;

2973 ià(!(
c
->
æags
 & 
CMD_CATEGORY_FAST
)èc->æag |ğ
CMD_CATEGORY_SLOW
;

2975 
	`sdsä“¥l™»s
(
¬gv
,
¬gc
);

2976  
C_OK
;

2977 
	}
}

2981 
	$pİuÏ‹CommªdTabË
() {

2982 
j
;

2983 
numcommªds
 = (
»disCommªdTabË
)/(
»disCommªd
);

2985 
j
 = 0; j < 
numcommªds
; j++) {

2986 
»disCommªd
 *
c
 = 
»disCommªdTabË
+
j
;

2987 
»tv®1
, 
»tv®2
;

2991 ià(
	`pİuÏ‹CommªdTabËP¬£FÏgs
(
c
,c->
sæags
è=ğ
C_ERR
)

2992 
	`£rv”Pªic
("Unsupported command flag");

2994 
c
->
id
 = 
	`ACLG‘CommªdID
(c->
Çme
);

2995 
»tv®1
 = 
	`diùAdd
(
£rv”
.
commªds
, 
	`sd¢ew
(
c
->
Çme
), c);

2998 
»tv®2
 = 
	`diùAdd
(
£rv”
.
Üig_commªds
, 
	`sd¢ew
(
c
->
Çme
), c);

2999 
	`£rv”As£¹
(
»tv®1
 =ğ
DICT_OK
 && 
»tv®2
 == DICT_OK);

3001 
	}
}

3003 
	$»£tCommªdTabËSts
() {

3004 
»disCommªd
 *
c
;

3005 
diùEÁry
 *
de
;

3006 
diùI‹¿tÜ
 *
di
;

3008 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
commªds
);

3009 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3010 
c
 = (
»disCommªd
 *è
	`diùG‘V®
(
de
);

3011 
c
->
miüo£cÚds
 = 0;

3012 
c
->
ÿÎs
 = 0;

3014 
	`diùR–—£I‹¿tÜ
(
di
);

3016 
	}
}

3020 
	$»disOpA¼ayIn™
(
»disOpA¼ay
 *
ß
) {

3021 
ß
->
İs
 = 
NULL
;

3022 
ß
->
numİs
 = 0;

3023 
	}
}

3025 
	$»disOpA¼ayAµ’d
(
»disOpA¼ay
 *
ß
, 
»disCommªd
 *
cmd
, 
dbid
,

3026 
robj
 **
¬gv
, 
¬gc
, 
rg‘
)

3028 
»disOp
 *
İ
;

3030 
ß
->
İs
 = 
	`z»®loc
(ß->İs,(
»disOp
)*(ß->
numİs
+1));

3031 
İ
 = 
ß
->
İs
+ß->
numİs
;

3032 
İ
->
cmd
 = cmd;

3033 
İ
->
dbid
 = dbid;

3034 
İ
->
¬gv
 =‡rgv;

3035 
İ
->
¬gc
 =‡rgc;

3036 
İ
->
rg‘
 =arget;

3037 
ß
->
numİs
++;

3038  
ß
->
numİs
;

3039 
	}
}

3041 
	$»disOpA¼ayF»e
(
»disOpA¼ay
 *
ß
) {

3042 
ß
->
numİs
) {

3043 
j
;

3044 
»disOp
 *
İ
;

3046 
ß
->
numİs
--;

3047 
İ
 = 
ß
->
İs
+ß->
numİs
;

3048 
j
 = 0; j < 
İ
->
¬gc
; j++)

3049 
	`deüRefCouÁ
(
İ
->
¬gv
[
j
]);

3050 
	`zä“
(
İ
->
¬gv
);

3052 
	`zä“
(
ß
->
İs
);

3053 
	}
}

3057 
»disCommªd
 *
	$lookupCommªd
(
sds
 
Çme
) {

3058  
	`diùF‘chV®ue
(
£rv”
.
commªds
, 
Çme
);

3059 
	}
}

3061 
»disCommªd
 *
	$lookupCommªdByCSŒšg
(*
s
) {

3062 
»disCommªd
 *
cmd
;

3063 
sds
 
Çme
 = 
	`sd¢ew
(
s
);

3065 
cmd
 = 
	`diùF‘chV®ue
(
£rv”
.
commªds
, 
Çme
);

3066 
	`sdsä“
(
Çme
);

3067  
cmd
;

3068 
	}
}

3077 
»disCommªd
 *
	$lookupCommªdOrOrigš®
(
sds
 
Çme
) {

3078 
»disCommªd
 *
cmd
 = 
	`diùF‘chV®ue
(
£rv”
.
commªds
, 
Çme
);

3080 ià(!
cmd
ècmd = 
	`diùF‘chV®ue
(
£rv”
.
Üig_commªds
,
Çme
);

3081  
cmd
;

3082 
	}
}

3100 
	$´İag©e
(
»disCommªd
 *
cmd
, 
dbid
, 
robj
 **
¬gv
, 
¬gc
,

3101 
æags
)

3103 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
 && 
æags
 & 
PROPAGATE_AOF
)

3104 
	`ãedAµ’dOÆyFe
(
cmd
,
dbid
,
¬gv
,
¬gc
);

3105 ià(
æags
 & 
PROPAGATE_REPL
)

3106 
	`»¶iÿtiÚF“dSÏves
(
£rv”
.
¦aves
,
dbid
,
¬gv
,
¬gc
);

3107 
	}
}

3121 
	$®soPrİag©e
(
»disCommªd
 *
cmd
, 
dbid
, 
robj
 **
¬gv
, 
¬gc
,

3122 
rg‘
)

3124 
robj
 **
¬gvcİy
;

3125 
j
;

3127 ià(
£rv”
.
lßdšg
) ;

3129 
¬gvcİy
 = 
	`zm®loc
((
robj
*)*
¬gc
);

3130 
j
 = 0; j < 
¬gc
; j++) {

3131 
¬gvcİy
[
j
] = 
¬gv
[j];

3132 
	`šüRefCouÁ
(
¬gv
[
j
]);

3134 
	`»disOpA¼ayAµ’d
(&
£rv”
.
®so_´İag©e
,
cmd
,
dbid
,
¬gvcİy
,
¬gc
,
rg‘
);

3135 
	}
}

3140 
	$fÜûCommªdPrİag©iÚ
(
ş›Á
 *
c
, 
æags
) {

3141 ià(
æags
 & 
PROPAGATE_REPL
è
c
->æag |ğ
CLIENT_FORCE_REPL
;

3142 ià(
æags
 & 
PROPAGATE_AOF
è
c
->æag |ğ
CLIENT_FORCE_AOF
;

3143 
	}
}

3148 
	$´ev’tCommªdPrİag©iÚ
(
ş›Á
 *
c
) {

3149 
c
->
æags
 |ğ
CLIENT_PREVENT_PROP
;

3150 
	}
}

3153 
	$´ev’tCommªdAOF
(
ş›Á
 *
c
) {

3154 
c
->
æags
 |ğ
CLIENT_PREVENT_AOF_PROP
;

3155 
	}
}

3158 
	$´ev’tCommªdR•liÿtiÚ
(
ş›Á
 *
c
) {

3159 
c
->
æags
 |ğ
CLIENT_PREVENT_REPL_PROP
;

3160 
	}
}

3199 
	$ÿÎ
(
ş›Á
 *
c
, 
æags
) {

3200 
dœty
;

3201 
u¡ime_t
 
¡¬t
, 
du¿tiÚ
;

3202 
ş›Á_Şd_æags
 = 
c
->
æags
;

3203 
»disCommªd
 *
»®_cmd
 = 
c
->
cmd
;

3205 
£rv”
.
fixed_time_expœe
++;

3209 ià(
	`li¡L’gth
(
£rv”
.
mÚ™Üs
) &&

3210 !
£rv”
.
lßdšg
 &&

3211 !(
c
->
cmd
->
æags
 & (
CMD_SKIP_MONITOR
|
CMD_ADMIN
)))

3213 
	`»¶iÿtiÚF“dMÚ™Üs
(
c
,
£rv”
.
mÚ™Üs
,c->
db
->
id
,c->
¬gv
,c->
¬gc
);

3218 
c
->
æags
 &ğ~(
CLIENT_FORCE_AOF
|
CLIENT_FORCE_REPL
|
CLIENT_PREVENT_PROP
);

3219 
»disOpA¼ay
 
´ev_®so_´İag©e
 = 
£rv”
.
®so_´İag©e
;

3220 
	`»disOpA¼ayIn™
(&
£rv”
.
®so_´İag©e
);

3223 
dœty
 = 
£rv”
.dirty;

3224 
	`upd©eCachedTime
(0);

3225 
¡¬t
 = 
£rv”
.
u¡ime
;

3226 
c
->
cmd
->
	`´oc
(c);

3227 
du¿tiÚ
 = 
	`u¡ime
()-
¡¬t
;

3228 
dœty
 = 
£rv”
.dirty-dirty;

3229 ià(
dœty
 < 0) dirty = 0;

3233 ià(
£rv”
.
lßdšg
 && 
c
->
æags
 & 
CLIENT_LUA
)

3234 
æags
 &ğ~(
CMD_CALL_SLOWLOG
 | 
CMD_CALL_STATS
);

3239 ià(
c
->
æags
 & 
CLIENT_LUA
 && 
£rv”
.
lua_ÿÎ”
) {

3240 ià(
c
->
æags
 & 
CLIENT_FORCE_REPL
)

3241 
£rv”
.
lua_ÿÎ”
->
æags
 |ğ
CLIENT_FORCE_REPL
;

3242 ià(
c
->
æags
 & 
CLIENT_FORCE_AOF
)

3243 
£rv”
.
lua_ÿÎ”
->
æags
 |ğ
CLIENT_FORCE_AOF
;

3248 ià(
æags
 & 
CMD_CALL_SLOWLOG
 && !(
c
->
cmd
->æag & 
CMD_SKIP_SLOWLOG
)) {

3249 *
Ï‹ncy_ev’t
 = (
c
->
cmd
->
æags
 & 
CMD_FAST
) ?

3251 
	`Ï‹ncyAddSam¶eIfN“ded
(
Ï‹ncy_ev’t
,
du¿tiÚ
/1000);

3252 
	`¦owlogPushEÁryIfN“ded
(
c
,c->
¬gv
,c->
¬gc
,
du¿tiÚ
);

3255 ià(
æags
 & 
CMD_CALL_STATS
) {

3259 
»®_cmd
->
miüo£cÚds
 +ğ
du¿tiÚ
;

3260 
»®_cmd
->
ÿÎs
++;

3264 ià(
æags
 & 
CMD_CALL_PROPAGATE
 &&

3265 (
c
->
æags
 & 
CLIENT_PREVENT_PROP
) != CLIENT_PREVENT_PROP)

3267 
´İag©e_æags
 = 
PROPAGATE_NONE
;

3271 ià(
dœty
è
´İag©e_æags
 |ğ(
PROPAGATE_AOF
|
PROPAGATE_REPL
);

3275 ià(
c
->
æags
 & 
CLIENT_FORCE_REPL
è
´İag©e_æags
 |ğ
PROPAGATE_REPL
;

3276 ià(
c
->
æags
 & 
CLIENT_FORCE_AOF
è
´İag©e_æags
 |ğ
PROPAGATE_AOF
;

3281 ià(
c
->
æags
 & 
CLIENT_PREVENT_REPL_PROP
 ||

3282 !(
æags
 & 
CMD_CALL_PROPAGATE_REPL
))

3283 
´İag©e_æags
 &ğ~
PROPAGATE_REPL
;

3284 ià(
c
->
æags
 & 
CLIENT_PREVENT_AOF_PROP
 ||

3285 !(
æags
 & 
CMD_CALL_PROPAGATE_AOF
))

3286 
´İag©e_æags
 &ğ~
PROPAGATE_AOF
;

3291 ià(
´İag©e_æags
 !ğ
PROPAGATE_NONE
 && !(
c
->
cmd
->
æags
 & 
CMD_MODULE
))

3292 
	`´İag©e
(
c
->
cmd
,c->
db
->
id
,c->
¬gv
,c->
¬gc
,
´İag©e_æags
);

3297 
c
->
æags
 &ğ~(
CLIENT_FORCE_AOF
|
CLIENT_FORCE_REPL
|
CLIENT_PREVENT_PROP
);

3298 
c
->
æags
 |ğ
ş›Á_Şd_æags
 &

3299 (
CLIENT_FORCE_AOF
|
CLIENT_FORCE_REPL
|
CLIENT_PREVENT_PROP
);

3304 ià(
£rv”
.
®so_´İag©e
.
numİs
) {

3305 
j
;

3306 
»disOp
 *
rİ
;

3308 ià(
æags
 & 
CMD_CALL_PROPAGATE
) {

3309 
muÉi_em™‹d
 = 0;

3316 ià(
£rv”
.
®so_´İag©e
.
numİs
 > 1 &&

3317 !(
c
->
cmd
->
æags
 & 
CMD_MODULE
) &&

3318 !(
c
->
æags
 & 
CLIENT_MULTI
) &&

3319 !(
æags
 & 
CMD_CALL_NOWRAP
))

3321 
	`execCommªdPrİag©eMuÉi
(
c
);

3322 
muÉi_em™‹d
 = 1;

3325 
j
 = 0; j < 
£rv”
.
®so_´İag©e
.
numİs
; j++) {

3326 
rİ
 = &
£rv”
.
®so_´İag©e
.
İs
[
j
];

3327 
rg‘
 = 
rİ
->target;

3329 ià(!(
æags
&
CMD_CALL_PROPAGATE_AOF
)è
rg‘
 &ğ~
PROPAGATE_AOF
;

3330 ià(!(
æags
&
CMD_CALL_PROPAGATE_REPL
)è
rg‘
 &ğ~
PROPAGATE_REPL
;

3331 ià(
rg‘
)

3332 
	`´İag©e
(
rİ
->
cmd
,rİ->
dbid
,rİ->
¬gv
,rİ->
¬gc
,
rg‘
);

3335 ià(
muÉi_em™‹d
) {

3336 
	`execCommªdPrİag©eExec
(
c
);

3339 
	`»disOpA¼ayF»e
(&
£rv”
.
®so_´İag©e
);

3341 
£rv”
.
®so_´İag©e
 = 
´ev_®so_´İag©e
;

3345 ià(
c
->
cmd
->
æags
 & 
CMD_READONLY
) {

3346 
ş›Á
 *
ÿÎ”
 = (
c
->
æags
 & 
CLIENT_LUA
 && 
£rv”
.
lua_ÿÎ”
) ?

3347 
£rv”
.
lua_ÿÎ”
 : 
c
;

3348 ià(
ÿÎ”
->
æags
 & 
CLIENT_TRACKING
 &&

3349 !(
ÿÎ”
->
æags
 & 
CLIENT_TRACKING_BCAST
))

3351 
	`ŒackšgRememb”Keys
(
ÿÎ”
);

3355 
£rv”
.
fixed_time_expœe
--;

3356 
£rv”
.
¡©_numcommªds
++;

3357 
	}
}

3367 
	$´oûssCommªd
(
ş›Á
 *
c
) {

3368 
	`moduËC®lCommªdF‹rs
(
c
);

3374 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[0]->
±r
,"quit")) {

3375 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

3376 
c
->
æags
 |ğ
CLIENT_CLOSE_AFTER_REPLY
;

3377  
C_ERR
;

3382 
c
->
cmd
 = c->
Ï¡cmd
 = 
	`lookupCommªd
(c->
¬gv
[0]->
±r
);

3383 ià(!
c
->
cmd
) {

3384 
	`æagT¿n§ùiÚ
(
c
);

3385 
sds
 
¬gs
 = 
	`sd£m±y
();

3386 
i
;

3387 
i
=1; i < 
c
->
¬gc
 && 
	`sd¦’
(
¬gs
) < 128; i++)

3388 
¬gs
 = 
	`sdsÿrštf
×rgs, "`%.*s`, ", 128-()
	`sd¦’
×rgs), (*)
c
->
¬gv
[
i
]->
±r
);

3389 
	`addR•lyE¼ÜFÜm©
(
c
,"unknown command `%s`, with‡rgs beginning with: %s",

3390 (*)
c
->
¬gv
[0]->
±r
, 
¬gs
);

3391 
	`sdsä“
(
¬gs
);

3392  
C_OK
;

3393 } ià((
c
->
cmd
->
¬™y
 > 0 && c->cmd->¬™y !ğc->
¬gc
) ||

3394 (
c
->
¬gc
 < -c->
cmd
->
¬™y
)) {

3395 
	`æagT¿n§ùiÚ
(
c
);

3396 
	`addR•lyE¼ÜFÜm©
(
c
,"wrong‚umber of‡rguments for '%s' command",

3397 
c
->
cmd
->
Çme
);

3398  
C_OK
;

3403 
auth_»quœed
 = (!(
DeçuÉU£r
->
æags
 & 
USER_FLAG_NOPASS
) ||

3404 (
DeçuÉU£r
->
æags
 & 
USER_FLAG_DISABLED
)) &&

3405 !
c
->
auth’tiÿ‹d
;

3406 ià(
auth_»quœed
) {

3409 ià(!(
c
->
cmd
->
æags
 & 
CMD_NO_AUTH
)) {

3410 
	`æagT¿n§ùiÚ
(
c
);

3411 
	`addR•ly
(
c
,
sh¬ed
.
nßuth”r
);

3412  
C_OK
;

3418 
aş_keypos
;

3419 
aş_»tv®
 = 
	`ACLCheckCommªdP”m
(
c
,&
aş_keypos
);

3420 ià(
aş_»tv®
 !ğ
ACL_OK
) {

3421 
	`addACLLogEÁry
(
c
,
aş_»tv®
,
aş_keypos
,
NULL
);

3422 
	`æagT¿n§ùiÚ
(
c
);

3423 ià(
aş_»tv®
 =ğ
ACL_DENIED_CMD
)

3424 
	`addR•lyE¼ÜFÜm©
(
c
,

3426 "th'%s' commªd o¸™ subcommªd", 
c
->
cmd
->
Çme
);

3428 
	`addR•lyE¼ÜFÜm©
(
c
,

3431  
C_OK
;

3438 ià(
£rv”
.
şu¡”_’abËd
 &&

3439 !(
c
->
æags
 & 
CLIENT_MASTER
) &&

3440 !(
c
->
æags
 & 
CLIENT_LUA
 &&

3441 
£rv”
.
lua_ÿÎ”
->
æags
 & 
CLIENT_MASTER
) &&

3442 !(
c
->
cmd
->
g‘keys_´oc
 =ğ
NULL
 && c->cmd->
fœ¡key
 == 0 &&

3443 
c
->
cmd
->
´oc
 !ğ
execCommªd
))

3445 
hash¦Ù
;

3446 
”rÜ_code
;

3447 
şu¡”Node
 *
n
 = 
	`g‘NodeByQu”y
(
c
,c->
cmd
,c->
¬gv
,c->
¬gc
,

3448 &
hash¦Ù
,&
”rÜ_code
);

3449 ià(
n
 =ğ
NULL
 ||‚ !ğ
£rv”
.
şu¡”
->
my£lf
) {

3450 ià(
c
->
cmd
->
´oc
 =ğ
execCommªd
) {

3451 
	`disÿrdT¿n§ùiÚ
(
c
);

3453 
	`æagT¿n§ùiÚ
(
c
);

3455 
	`şu¡”RedœeùCl›Á
(
c
,
n
,
hash¦Ù
,
”rÜ_code
);

3456  
C_OK
;

3466 ià(
£rv”
.
maxmemÜy
 && !£rv”.
lua_timedout
) {

3467 
out_of_memÜy
 = 
	`ä“MemÜyIfN“dedAndSaã
(è=ğ
C_ERR
;

3470 ià(
£rv”
.
cu¼’t_ş›Á
 =ğ
NULL
è 
C_ERR
;

3475 ià(
out_of_memÜy
 &&

3476 (
c
->
cmd
->
æags
 & 
CMD_DENYOOM
 ||

3477 (
c
->
æags
 & 
CLIENT_MULTI
 &&

3478 
c
->
cmd
->
´oc
 !ğ
execCommªd
 &&

3479 
c
->
cmd
->
´oc
 !ğ
disÿrdCommªd
)))

3481 
	`æagT¿n§ùiÚ
(
c
);

3482 
	`addR•ly
(
c
, 
sh¬ed
.
oom”r
);

3483  
C_OK
;

3489 ià(
c
->
cmd
->
´oc
 =ğ
ev®Commªd
 || c->cmd->´oø=ğ
ev®ShaCommªd
) {

3490 
£rv”
.
lua_oom
 = 
out_of_memÜy
;

3496 ià(
£rv”
.
Œackšg_ş›Ás
è
	`ŒackšgLim™U£dSlÙs
();

3500 
d’y_wr™e_ty³
 = 
	`wr™eCommªdsD’›dByDiskE¼Ü
();

3501 ià(
d’y_wr™e_ty³
 !ğ
DISK_ERROR_TYPE_NONE
 &&

3502 
£rv”
.
ma¡”ho¡
 =ğ
NULL
 &&

3503 (
c
->
cmd
->
æags
 & 
CMD_WRITE
 ||

3504 
c
->
cmd
->
´oc
 =ğ
pšgCommªd
))

3506 
	`æagT¿n§ùiÚ
(
c
);

3507 ià(
d’y_wr™e_ty³
 =ğ
DISK_ERROR_TYPE_RDB
)

3508 
	`addR•ly
(
c
, 
sh¬ed
.
bg§v“¼
);

3510 
	`addR•lySds
(
c
,

3511 
	`sdsÿrštf
(
	`sd£m±y
(),

3513 
	`¡»¼Ü
(
£rv”
.
aof_Ï¡_wr™e_”ºo
)));

3514  
C_OK
;

3519 ià(
£rv”
.
ma¡”ho¡
 =ğ
NULL
 &&

3520 
£rv”
.
»¶_mš_¦aves_to_wr™e
 &&

3521 
£rv”
.
»¶_mš_¦aves_max_Ïg
 &&

3522 
c
->
cmd
->
æags
 & 
CMD_WRITE
 &&

3523 
£rv”
.
»¶_good_¦aves_couÁ
 < s”v”.
»¶_mš_¦aves_to_wr™e
)

3525 
	`æagT¿n§ùiÚ
(
c
);

3526 
	`addR•ly
(
c
, 
sh¬ed
.
nÜ•liÿ£¼
);

3527  
C_OK
;

3532 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¦ave_ro
 &&

3533 !(
c
->
æags
 & 
CLIENT_MASTER
) &&

3534 
c
->
cmd
->
æags
 & 
CMD_WRITE
)

3536 
	`æagT¿n§ùiÚ
(
c
);

3537 
	`addR•ly
(
c
, 
sh¬ed
.
ro¦av“¼
);

3538  
C_OK
;

3543 ià((
c
->
æags
 & 
CLIENT_PUBSUB
 && c->
»¥
 == 2) &&

3544 
c
->
cmd
->
´oc
 !ğ
pšgCommªd
 &&

3545 
c
->
cmd
->
´oc
 !ğ
subsüibeCommªd
 &&

3546 
c
->
cmd
->
´oc
 !ğ
unsubsüibeCommªd
 &&

3547 
c
->
cmd
->
´oc
 !ğ
psubsüibeCommªd
 &&

3548 
c
->
cmd
->
´oc
 !ğ
punsubsüibeCommªd
) {

3549 
	`addR•lyE¼ÜFÜm©
(
c
,

3552 
c
->
cmd
->
Çme
);

3553  
C_OK
;

3559 ià(
£rv”
.
ma¡”ho¡
 && s”v”.
»¶_¡©e
 !ğ
REPL_STATE_CONNECTED
 &&

3560 
£rv”
.
»¶_£rve_¡®e_d©a
 == 0 &&

3561 !(
c
->
cmd
->
æags
 & 
CMD_STALE
))

3563 
	`æagT¿n§ùiÚ
(
c
);

3564 
	`addR•ly
(
c
, 
sh¬ed
.
ma¡”dowÃ¼
);

3565  
C_OK
;

3570 ià(
£rv”
.
lßdšg
 && !(
c
->
cmd
->
æags
 & 
CMD_LOADING
)) {

3571 
	`addR•ly
(
c
, 
sh¬ed
.
lßdšg”r
);

3572  
C_OK
;

3581 ià(
£rv”
.
lua_timedout
 &&

3582 
c
->
cmd
->
´oc
 !ğ
authCommªd
 &&

3583 
c
->
cmd
->
´oc
 !ğ
h–loCommªd
 &&

3584 
c
->
cmd
->
´oc
 !ğ
»¶cÚfCommªd
 &&

3585 
c
->
cmd
->
´oc
 !ğ
muÉiCommªd
 &&

3586 
c
->
cmd
->
´oc
 !ğ
execCommªd
 &&

3587 
c
->
cmd
->
´oc
 !ğ
disÿrdCommªd
 &&

3588 !(
c
->
cmd
->
´oc
 =ğ
shutdownCommªd
 &&

3589 
c
->
¬gc
 == 2 &&

3590 
	`tŞow”
(((*)
c
->
¬gv
[1]->
±r
)[0]) == 'n') &&

3591 !(
c
->
cmd
->
´oc
 =ğ
sütCommªd
 &&

3592 
c
->
¬gc
 == 2 &&

3593 
	`tŞow”
(((*)
c
->
¬gv
[1]->
±r
)[0]) == 'k'))

3595 
	`æagT¿n§ùiÚ
(
c
);

3596 
	`addR•ly
(
c
, 
sh¬ed
.
¦owsü‹¼
);

3597  
C_OK
;

3601 ià(
c
->
æags
 & 
CLIENT_MULTI
 &&

3602 
c
->
cmd
->
´oc
 !ğ
execCommªd
 && c->cmd->´oø!ğ
disÿrdCommªd
 &&

3603 
c
->
cmd
->
´oc
 !ğ
muÉiCommªd
 && c->cmd->´oø!ğ
w©chCommªd
)

3605 
	`queueMuÉiCommªd
(
c
);

3606 
	`addR•ly
(
c
,
sh¬ed
.
queued
);

3608 
	`ÿÎ
(
c
,
CMD_CALL_FULL
);

3609 
c
->
woff
 = 
£rv”
.
ma¡”_»¶_off£t
;

3610 ià(
	`li¡L’gth
(
£rv”
.
»ady_keys
))

3611 
	`hªdËCl›ÁsBlockedOnKeys
();

3613  
C_OK
;

3614 
	}
}

3620 
	$şo£Li¡’šgSock‘s
(
uÆšk_unix_sock‘
) {

3621 
j
;

3623 
j
 = 0; j < 
£rv”
.
fd_couÁ
; j++è
	`şo£
(£rv”.
fd
[j]);

3624 
j
 = 0; j < 
£rv”
.
sfd_couÁ
; j++è
	`şo£
(£rv”.
sfd
[j]);

3625 ià(
£rv”
.
sofd
 !ğ-1è
	`şo£
(server.sofd);

3626 ià(
£rv”
.
şu¡”_’abËd
)

3627 
j
 = 0; j < 
£rv”
.
cfd_couÁ
; j++è
	`şo£
(£rv”.
cfd
[j]);

3628 ià(
uÆšk_unix_sock‘
 && 
£rv”
.
unixsock‘
) {

3629 
	`£rv”Log
(
LL_NOTICE
,"Removinghe unix socket file.");

3630 
	`uÆšk
(
£rv”
.
unixsock‘
);

3632 
	}
}

3634 
	$´•¬eFÜShutdown
(
æags
) {

3635 
§ve
 = 
æags
 & 
SHUTDOWN_SAVE
;

3636 
no§ve
 = 
æags
 & 
SHUTDOWN_NOSAVE
;

3638 
	`£rv”Log
(
LL_WARNING
,"User„equested shutdown...");

3639 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
)

3640 
	`»disCommuniÿ‹Sy¡emd
("STOPPING=1\n");

3643 
	`ldbKlFÜkedSessiÚs
();

3648 ià(
£rv”
.
rdb_chd_pid
 != -1) {

3649 
	`£rv”Log
(
LL_WARNING
,"There is‡ child saving‡n .rdb. Killing it!");

3650 
	`klRDBChd
();

3654 ià(
£rv”
.
moduË_chd_pid
 != -1) {

3655 
	`£rv”Log
(
LL_WARNING
,"There is‡ module fork child. Killing it!");

3656 
	`T”mš©eModuËFÜkChd
(
£rv”
.
moduË_chd_pid
,0);

3659 ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
) {

3662 ià(
£rv”
.
aof_chd_pid
 != -1) {

3665 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_WAIT_REWRITE
) {

3666 
	`£rv”Log
(
LL_WARNING
, "Writing initial AOF, can'tƒxit.");

3667  
C_ERR
;

3669 
	`£rv”Log
(
LL_WARNING
,

3671 
	`klAµ’dOÆyChd
();

3674 
	`£rv”Log
(
LL_NOTICE
,"Calling fsync() onhe AOF file.");

3675 
	`æushAµ’dOÆyFe
(1);

3676 
	`»dis_fsync
(
£rv”
.
aof_fd
);

3680 ià((
£rv”
.
§v•¬am¦’
 > 0 && !
no§ve
è|| 
§ve
) {

3681 
	`£rv”Log
(
LL_NOTICE
,"Savinghe final RDB snapshot beforeƒxiting.");

3682 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
)

3683 
	`»disCommuniÿ‹Sy¡emd
("STATUS=Savinghe final RDB snapshot\n");

3685 
rdbSaveInfo
 
rsi
, *
rsŒ
;

3686 
rsŒ
 = 
	`rdbPİuÏ‹SaveInfo
(&
rsi
);

3687 ià(
	`rdbSave
(
£rv”
.
rdb_f’ame
,
rsŒ
è!ğ
C_OK
) {

3693 
	`£rv”Log
(
LL_WARNING
,"Errorryingo savehe DB, can'tƒxit.");

3694 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
)

3695 
	`»disCommuniÿ‹Sy¡emd
("STATUS=Errorryingo savehe DB, can'tƒxit.\n");

3696  
C_ERR
;

3701 
	`moduËFœeS”v”Ev’t
(
REDISMODULE_EVENT_SHUTDOWN
,0,
NULL
);

3704 ià(
£rv”
.
d«mÚize
 || s”v”.
pidfe
) {

3705 
	`£rv”Log
(
LL_NOTICE
,"Removinghe…id file.");

3706 
	`uÆšk
(
£rv”
.
pidfe
);

3711 
	`æushSÏvesOuutBufãrs
();

3714 
	`şo£Li¡’šgSock‘s
(1);

3715 
	`£rv”Log
(
LL_WARNING
,"%s is‚ow„eadyoƒxit, bye bye...",

3716 
£rv”
.
£Áš–_mode
 ? "Sentinel" : "Redis");

3717  
C_OK
;

3718 
	}
}

3733 
	$wr™eCommªdsD’›dByDiskE¼Ü
() {

3734 ià(
£rv”
.
¡İ_wr™es_Ú_bg§ve_”r
 &&

3735 
£rv”
.
§v•¬am¦’
 > 0 &&

3736 
£rv”
.
Ï¡bg§ve_¡©us
 =ğ
C_ERR
)

3738  
DISK_ERROR_TYPE_RDB
;

3739 } ià(
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
 &&

3740 
£rv”
.
aof_Ï¡_wr™e_¡©us
 =ğ
C_ERR
)

3742  
DISK_ERROR_TYPE_AOF
;

3744  
DISK_ERROR_TYPE_NONE
;

3746 
	}
}

3750 
	$pšgCommªd
(
ş›Á
 *
c
) {

3752 ià(
c
->
¬gc
 > 2) {

3753 
	`addR•lyE¼ÜFÜm©
(
c
,"wrong‚umber of‡rguments for '%s' command",

3754 
c
->
cmd
->
Çme
);

3758 ià(
c
->
æags
 & 
CLIENT_PUBSUB
 && c->
»¥
 == 2) {

3759 
	`addR•ly
(
c
,
sh¬ed
.
mbulkhdr
[2]);

3760 
	`addR•lyBulkCBufãr
(
c
,"pong",4);

3761 ià(
c
->
¬gc
 == 1)

3762 
	`addR•lyBulkCBufãr
(
c
,"",0);

3764 
	`addR•lyBulk
(
c
,c->
¬gv
[1]);

3766 ià(
c
->
¬gc
 == 1)

3767 
	`addR•ly
(
c
,
sh¬ed
.
pÚg
);

3769 
	`addR•lyBulk
(
c
,c->
¬gv
[1]);

3771 
	}
}

3773 
	$echoCommªd
(
ş›Á
 *
c
) {

3774 
	`addR•lyBulk
(
c
,c->
¬gv
[1]);

3775 
	}
}

3777 
	$timeCommªd
(
ş›Á
 *
c
) {

3778 
timev®
 
tv
;

3782 
	`g‘timeofday
(&
tv
,
NULL
);

3783 
	`addR•lyA¼ayL’
(
c
,2);

3784 
	`addR•lyBulkLÚgLÚg
(
c
,
tv
.
tv_£c
);

3785 
	`addR•lyBulkLÚgLÚg
(
c
,
tv
.
tv_u£c
);

3786 
	}
}

3789 
	$addR•lyCommªdFÏg
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
, 
f
, *
»¶y
) {

3790 ià(
cmd
->
æags
 & 
f
) {

3791 
	`addR•lyStus
(
c
, 
»¶y
);

3795 
	}
}

3798 
	$addR•lyCommªd
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
) {

3799 ià(!
cmd
) {

3800 
	`addR•lyNuÎ
(
c
);

3803 
	`addR•lyA¼ayL’
(
c
, 7);

3804 
	`addR•lyBulkCSŒšg
(
c
, 
cmd
->
Çme
);

3805 
	`addR•lyLÚgLÚg
(
c
, 
cmd
->
¬™y
);

3807 
æagcouÁ
 = 0;

3808 *
æagËn
 = 
	`addR•lyDeã¼edL’
(
c
);

3809 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_WRITE
, "write");

3810 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_READONLY
, "readonly");

3811 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_DENYOOM
, "denyoom");

3812 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_ADMIN
, "admin");

3813 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_PUBSUB
, "pubsub");

3814 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_NOSCRIPT
, "noscript");

3815 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_RANDOM
, "random");

3816 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_SORT_FOR_SCRIPT
,"sort_for_script");

3817 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_LOADING
, "loading");

3818 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_STALE
, "stale");

3819 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_SKIP_MONITOR
, "skip_monitor");

3820 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_SKIP_SLOWLOG
, "skip_slowlog");

3821 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_ASKING
, "asking");

3822 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_FAST
, "fast");

3823 
æagcouÁ
 +ğ
	`addR•lyCommªdFÏg
(
c
,
cmd
,
CMD_NO_AUTH
, "no_auth");

3824 ià((
cmd
->
g‘keys_´oc
 && !(cmd->
æags
 & 
CMD_MODULE
)) ||

3825 
cmd
->
æags
 & 
CMD_MODULE_GETKEYS
)

3827 
	`addR•lyStus
(
c
, "movablekeys");

3828 
æagcouÁ
 += 1;

3830 
	`£tDeã¼edS‘L’
(
c
, 
æagËn
, 
æagcouÁ
);

3832 
	`addR•lyLÚgLÚg
(
c
, 
cmd
->
fœ¡key
);

3833 
	`addR•lyLÚgLÚg
(
c
, 
cmd
->
Ï¡key
);

3834 
	`addR•lyLÚgLÚg
(
c
, 
cmd
->
key¡•
);

3836 
	`addR•lyCommªdC©egÜ›s
(
c
,
cmd
);

3838 
	}
}

3841 
	$commªdCommªd
(
ş›Á
 *
c
) {

3842 
diùI‹¿tÜ
 *
di
;

3843 
diùEÁry
 *
de
;

3845 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

3846 cÚ¡ *
h–p
[] = {

3851 
NULL


3853 
	`addR•lyH–p
(
c
, 
h–p
);

3854 } ià(
c
->
¬gc
 == 1) {

3855 
	`addR•lyA¼ayL’
(
c
, 
	`diùSize
(
£rv”
.
commªds
));

3856 
di
 = 
	`diùG‘I‹¿tÜ
(
£rv”
.
commªds
);

3857 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

3858 
	`addR•lyCommªd
(
c
, 
	`diùG‘V®
(
de
));

3860 
	`diùR–—£I‹¿tÜ
(
di
);

3861 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
, "info")) {

3862 
i
;

3863 
	`addR•lyA¼ayL’
(
c
, c->
¬gc
-2);

3864 
i
 = 2; i < 
c
->
¬gc
; i++) {

3865 
	`addR•lyCommªd
(
c
, 
	`diùF‘chV®ue
(
£rv”
.
commªds
, c->
¬gv
[
i
]->
±r
));

3867 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
, "couÁ"è&& c->
¬gc
 == 2) {

3868 
	`addR•lyLÚgLÚg
(
c
, 
	`diùSize
(
£rv”
.
commªds
));

3869 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"g‘keys"è&& c->
¬gc
 >= 3) {

3870 
»disCommªd
 *
cmd
 = 
	`lookupCommªd
(
c
->
¬gv
[2]->
±r
);

3871 *
keys
, 
numkeys
, 
j
;

3873 ià(!
cmd
) {

3874 
	`addR•lyE¼Ü
(
c
,"Invalid command specified");

3876 } ià(
cmd
->
g‘keys_´oc
 =ğ
NULL
 && cmd->
fœ¡key
 == 0) {

3877 
	`addR•lyE¼Ü
(
c
,"The command has‚o key‡rguments");

3879 } ià((
cmd
->
¬™y
 > 0 && cmd->¬™y !ğ
c
->
¬gc
-2) ||

3880 ((
c
->
¬gc
-2è< -
cmd
->
¬™y
))

3882 
	`addR•lyE¼Ü
(
c
,"Invalid‚umber of‡rguments specified for command");

3886 
keys
 = 
	`g‘KeysFromCommªd
(
cmd
,
c
->
¬gv
+2,c->
¬gc
-2,&
numkeys
);

3887 ià(!
keys
) {

3888 
	`addR•lyE¼Ü
(
c
,"Invalid‡rguments specified for command");

3890 
	`addR•lyA¼ayL’
(
c
,
numkeys
);

3891 
j
 = 0; j < 
numkeys
; j++è
	`addR•lyBulk
(
c
,c->
¬gv
[
keys
[j]+2]);

3892 
	`g‘KeysF»eResuÉ
(
keys
);

3895 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

3897 
	}
}

3901 
	$by‹sToHumª
(*
s
, 
n
) {

3902 
d
;

3904 ià(
n
 < 1024) {

3906 
	`¥rštf
(
s
,"%ÎuB",
n
);

3907 } ià(
n
 < (1024*1024)) {

3908 
d
 = ()
n
/(1024);

3909 
	`¥rštf
(
s
,"%.2fK",
d
);

3910 } ià(
n
 < (1024LL*1024*1024)) {

3911 
d
 = ()
n
/(1024*1024);

3912 
	`¥rštf
(
s
,"%.2fM",
d
);

3913 } ià(
n
 < (1024LL*1024*1024*1024)) {

3914 
d
 = ()
n
/(1024LL*1024*1024);

3915 
	`¥rštf
(
s
,"%.2fG",
d
);

3916 } ià(
n
 < (1024LL*1024*1024*1024*1024)) {

3917 
d
 = ()
n
/(1024LL*1024*1024*1024);

3918 
	`¥rštf
(
s
,"%.2fT",
d
);

3919 } ià(
n
 < (1024LL*1024*1024*1024*1024*1024)) {

3920 
d
 = ()
n
/(1024LL*1024*1024*1024*1024);

3921 
	`¥rštf
(
s
,"%.2fP",
d
);

3924 
	`¥rštf
(
s
,"%ÎuB",
n
);

3926 
	}
}

3931 
sds
 
	$g’RedisInfoSŒšg
(cÚ¡ *
£ùiÚ
) {

3932 
sds
 
šfo
 = 
	`sd£m±y
();

3933 
time_t
 
u±ime
 = 
£rv”
.
unixtime
-£rv”.
¡©_¡¬‰ime
;

3934 
j
;

3935 
ru§ge
 
£lf_ru
, 
c_ru
;

3936 
®l£ùiÚs
 = 0, 
def£ùiÚs
 = 0, 
ev”ythšg
 = 0, 
moduËs
 = 0;

3937 
£ùiÚs
 = 0;

3939 ià(
£ùiÚ
 =ğ
NULL
) section = "default";

3940 
®l£ùiÚs
 = 
	`¡rÿ£cmp
(
£ùiÚ
,"all") == 0;

3941 
def£ùiÚs
 = 
	`¡rÿ£cmp
(
£ùiÚ
,"default") == 0;

3942 
ev”ythšg
 = 
	`¡rÿ£cmp
(
£ùiÚ
,"everything") == 0;

3943 
moduËs
 = 
	`¡rÿ£cmp
(
£ùiÚ
,"modules") == 0;

3944 ià(
ev”ythšg
è
®l£ùiÚs
 = 1;

3946 
	`g‘ru§ge
(
RUSAGE_SELF
, &
£lf_ru
);

3947 
	`g‘ru§ge
(
RUSAGE_CHILDREN
, &
c_ru
);

3950 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"server")) {

3951 
ÿÎ_uÇme
 = 1;

3952 
ut¢ame
 
Çme
;

3953 *
mode
;

3955 ià(
£rv”
.
şu¡”_’abËd
è
mode
 = "cluster";

3956 ià(
£rv”
.
£Áš–_mode
è
mode
 = "sentinel";

3957 
mode
 = "standalone";

3959 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

3961 ià(
ÿÎ_uÇme
) {

3963 
	`uÇme
(&
Çme
);

3964 
ÿÎ_uÇme
 = 0;

3967 
šfo
 = 
	`sdsÿtfmt
(info,

3989 
REDIS_VERSION
,

3990 
	`»disG™SHA1
(),

3991 
	`¡¹Ş
(
	`»disG™Dœty
(),
NULL
,10) > 0,

3992 
	`»disBudIdSŒšg
(),

3993 
mode
,

3994 
Çme
.
sy¢ame
,‚ame.
»Ëa£
,‚ame.
machše
,

3995 
£rv”
.
¬ch_b™s
,

3996 
	`«G‘ApiName
(),

3997 
REDIS_ATOMIC_API
,

3998 #ifdeà
__GNUC__


3999 
__GNUC__
,
__GNUC_MINOR__
,
__GNUC_PATCHLEVEL__
,

4003 (
št64_t
è
	`g‘pid
(),

4004 
£rv”
.
runid
,

4005 
£rv”
.
pÜt
 ? s”v”.pÜˆ: s”v”.
s_pÜt
,

4006 (
št64_t
)
u±ime
,

4007 (
št64_t
)(
u±ime
/(3600*24)),

4008 
£rv”
.
hz
,

4009 
£rv”
.
cÚfig_hz
,

4010 
£rv”
.
Ìuşock
,

4011 
£rv”
.
execubË
 ? server.executable : "",

4012 
£rv”
.
cÚfigfe
 ? server.configfile : "");

4016 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"clients")) {

4017 
size_t
 
maxš
, 
maxout
;

4018 
	`g‘Ex·nsiveCl›ÁsInfo
(&
maxš
,&
maxout
);

4019 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4020 
šfo
 = 
	`sdsÿrštf
(info,

4028 
	`li¡L’gth
(
£rv”
.
ş›Ás
)-li¡L’gth(£rv”.
¦aves
),

4029 
maxš
, 
maxout
,

4030 
£rv”
.
blocked_ş›Ás
,

4031 
£rv”
.
Œackšg_ş›Ás
,

4032 (è
	`¿xSize
(
£rv”
.
ş›Ás_timeout_bË
));

4036 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"memory")) {

4037 
hmem
[64];

4038 
³ak_hmem
[64];

4039 
tÙ®_sy¡em_hmem
[64];

4040 
u£d_memÜy_lua_hmem
[64];

4041 
u£d_memÜy_süts_hmem
[64];

4042 
u£d_memÜy_rss_hmem
[64];

4043 
maxmemÜy_hmem
[64];

4044 
size_t
 
zm®loc_u£d
 = 
	`zm®loc_u£d_memÜy
();

4045 
size_t
 
tÙ®_sy¡em_mem
 = 
£rv”
.
sy¡em_memÜy_size
;

4046 cÚ¡ *
eviù_pŞicy
 = 
	`eviùPŞicyToSŒšg
();

4047 
memÜy_lua
 = 
£rv”
.
lua
 ? ()
	`lua_gc
(£rv”.lua,
LUA_GCCOUNT
,0)*1024 : 0;

4048 
»disMemOv”h—d
 *
mh
 = 
	`g‘MemÜyOv”h—dD©a
();

4054 ià(
zm®loc_u£d
 > 
£rv”
.
¡©_³ak_memÜy
)

4055 
£rv”
.
¡©_³ak_memÜy
 = 
zm®loc_u£d
;

4057 
	`by‹sToHumª
(
hmem
,
zm®loc_u£d
);

4058 
	`by‹sToHumª
(
³ak_hmem
,
£rv”
.
¡©_³ak_memÜy
);

4059 
	`by‹sToHumª
(
tÙ®_sy¡em_hmem
,
tÙ®_sy¡em_mem
);

4060 
	`by‹sToHumª
(
u£d_memÜy_lua_hmem
,
memÜy_lua
);

4061 
	`by‹sToHumª
(
u£d_memÜy_süts_hmem
,
mh
->
lua_ÿches
);

4062 
	`by‹sToHumª
(
u£d_memÜy_rss_hmem
,
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
);

4063 
	`by‹sToHumª
(
maxmemÜy_hmem
,
£rv”
.
maxmemÜy
);

4065 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4066 
šfo
 = 
	`sdsÿrštf
(info,

4108 
zm®loc_u£d
,

4109 
hmem
,

4110 
£rv”
.
üÚ_m®loc_¡©s
.
´oûss_rss
,

4111 
u£d_memÜy_rss_hmem
,

4112 
£rv”
.
¡©_³ak_memÜy
,

4113 
³ak_hmem
,

4114 
mh
->
³ak_³rc
,

4115 
mh
->
ov”h—d_tÙ®
,

4116 
mh
->
¡¬tup_®loÿ‹d
,

4117 
mh
->
d©a£t
,

4118 
mh
->
d©a£t_³rc
,

4119 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_®loÿ‹d
,

4120 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_aùive
,

4121 
£rv”
.
üÚ_m®loc_¡©s
.
®loÿtÜ_»sid’t
,

4122 ()
tÙ®_sy¡em_mem
,

4123 
tÙ®_sy¡em_hmem
,

4124 
memÜy_lua
,

4125 
u£d_memÜy_lua_hmem
,

4126 (è
mh
->
lua_ÿches
,

4127 
u£d_memÜy_süts_hmem
,

4128 
	`diùSize
(
£rv”
.
lua_süts
),

4129 
£rv”
.
maxmemÜy
,

4130 
maxmemÜy_hmem
,

4131 
eviù_pŞicy
,

4132 
mh
->
®loÿtÜ_äag
,

4133 
mh
->
®loÿtÜ_äag_by‹s
,

4134 
mh
->
®loÿtÜ_rss
,

4135 
mh
->
®loÿtÜ_rss_by‹s
,

4136 
mh
->
rss_exŒa
,

4137 
mh
->
rss_exŒa_by‹s
,

4138 
mh
->
tÙ®_äag
,

4142 
mh
->
tÙ®_äag_by‹s
,

4143 
	`ä“MemÜyG‘NÙCouÁedMemÜy
(),

4144 
mh
->
»¶_backlog
,

4145 
mh
->
ş›Ás_¦aves
,

4146 
mh
->
ş›Ás_nÜm®
,

4147 
mh
->
aof_bufãr
,

4148 
ZMALLOC_LIB
,

4149 
£rv”
.
aùive_deäag_ruÂšg
,

4150 
	`Ïzyä“G‘P’dšgObjeùsCouÁ
()

4152 
	`ä“MemÜyOv”h—dD©a
(
mh
);

4156 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"persistence")) {

4157 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4158 
šfo
 = 
	`sdsÿrštf
(info,

4178 
£rv”
.
lßdšg
,

4179 
£rv”
.
dœty
,

4180 
£rv”
.
rdb_chd_pid
 != -1,

4181 (
štmax_t
)
£rv”
.
Ï¡§ve
,

4182 (
£rv”
.
Ï¡bg§ve_¡©us
 =ğ
C_OK
) ? "ok" : "err",

4183 (
štmax_t
)
£rv”
.
rdb_§ve_time_Ï¡
,

4184 (
štmax_t
)((
£rv”
.
rdb_chd_pid
 == -1) ?

4185 -1 : 
	`time
(
NULL
)-
£rv”
.
rdb_§ve_time_¡¬t
),

4186 
£rv”
.
¡©_rdb_cow_by‹s
,

4187 
£rv”
.
aof_¡©e
 !ğ
AOF_OFF
,

4188 
£rv”
.
aof_chd_pid
 != -1,

4189 
£rv”
.
aof_»wr™e_scheduËd
,

4190 (
štmax_t
)
£rv”
.
aof_»wr™e_time_Ï¡
,

4191 (
štmax_t
)((
£rv”
.
aof_chd_pid
 == -1) ?

4192 -1 : 
	`time
(
NULL
)-
£rv”
.
aof_»wr™e_time_¡¬t
),

4193 (
£rv”
.
aof_Ï¡bg»wr™e_¡©us
 =ğ
C_OK
) ? "ok" : "err",

4194 (
£rv”
.
aof_Ï¡_wr™e_¡©us
 =ğ
C_OK
) ? "ok" : "err",

4195 
£rv”
.
¡©_aof_cow_by‹s
,

4196 
£rv”
.
moduË_chd_pid
 != -1,

4197 
£rv”
.
¡©_moduË_cow_by‹s
);

4199 ià(
£rv”
.
aof_’abËd
) {

4200 
šfo
 = 
	`sdsÿrštf
(info,

4208 (è
£rv”
.
aof_cu¼’t_size
,

4209 (è
£rv”
.
aof_»wr™e_ba£_size
,

4210 
£rv”
.
aof_»wr™e_scheduËd
,

4211 
	`sd¦’
(
£rv”
.
aof_buf
),

4212 
	`aofRewr™eBufãrSize
(),

4213 
	`bioP’dšgJobsOfTy³
(
BIO_AOF_FSYNC
),

4214 
£rv”
.
aof_d–ayed_fsync
);

4217 ià(
£rv”
.
lßdšg
) {

4218 
³rc
;

4219 
time_t
 
‘a
, 
–­£d
;

4220 
off_t
 
»maššg_by‹s
 = 
£rv”
.
lßdšg_tÙ®_by‹s
-

4221 
£rv”
.
lßdšg_lßded_by‹s
;

4223 
³rc
 = (()
£rv”
.
lßdšg_lßded_by‹s
 /

4224 (
£rv”
.
lßdšg_tÙ®_by‹s
+1)) * 100;

4226 
–­£d
 = 
	`time
(
NULL
)-
£rv”
.
lßdšg_¡¬t_time
;

4227 ià(
–­£d
 == 0) {

4228 
‘a
 = 1;

4231 
‘a
 = (
–­£d
*
»maššg_by‹s
)/(
£rv”
.
lßdšg_lßded_by‹s
+1);

4234 
šfo
 = 
	`sdsÿrštf
(info,

4240 (
štmax_t
è
£rv”
.
lßdšg_¡¬t_time
,

4241 (è
£rv”
.
lßdšg_tÙ®_by‹s
,

4242 (è
£rv”
.
lßdšg_lßded_by‹s
,

4243 
³rc
,

4244 (
štmax_t
)
‘a


4250 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"stats")) {

4251 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4252 
šfo
 = 
	`sdsÿrštf
(info,

4285 
£rv”
.
¡©_numcÚÃùiÚs
,

4286 
£rv”
.
¡©_numcommªds
,

4287 
	`g‘In¡ªÃousM‘ric
(
STATS_METRIC_COMMAND
),

4288 
£rv”
.
¡©_Ãt_šput_by‹s
,

4289 
£rv”
.
¡©_Ãt_ouut_by‹s
,

4290 ()
	`g‘In¡ªÃousM‘ric
(
STATS_METRIC_NET_INPUT
)/1024,

4291 ()
	`g‘In¡ªÃousM‘ric
(
STATS_METRIC_NET_OUTPUT
)/1024,

4292 
£rv”
.
¡©_»jeùed_cÚn
,

4293 
£rv”
.
¡©_sync_fuÎ
,

4294 
£rv”
.
¡©_sync_·¹Ÿl_ok
,

4295 
£rv”
.
¡©_sync_·¹Ÿl_”r
,

4296 
£rv”
.
¡©_expœedkeys
,

4297 
£rv”
.
¡©_expœed_¡®e_³rc
*100,

4298 
£rv”
.
¡©_expœed_time_ÿp_»ached_couÁ
,

4299 
£rv”
.
¡©_expœe_cyşe_time_u£d
/1000,

4300 
£rv”
.
¡©_eviùedkeys
,

4301 
£rv”
.
¡©_key¥aû_h™s
,

4302 
£rv”
.
¡©_key¥aû_mis£s
,

4303 
	`diùSize
(
£rv”
.
pubsub_chªÃls
),

4304 
	`li¡L’gth
(
£rv”
.
pubsub_·‰”ns
),

4305 
£rv”
.
¡©_fÜk_time
,

4306 
	`diùSize
(
£rv”
.
mig¿‹_ÿched_sock‘s
),

4307 
	`g‘SÏveKeyW™hExpœeCouÁ
(),

4308 
£rv”
.
¡©_aùive_deäag_h™s
,

4309 
£rv”
.
¡©_aùive_deäag_mis£s
,

4310 
£rv”
.
¡©_aùive_deäag_key_h™s
,

4311 
£rv”
.
¡©_aùive_deäag_key_mis£s
,

4312 (è
	`ŒackšgG‘TÙ®Keys
(),

4313 (è
	`ŒackšgG‘TÙ®I‹ms
(),

4314 (è
	`ŒackšgG‘TÙ®P»fixes
(),

4315 
£rv”
.
¡©_uÃx³ùed_”rÜ_»¶›s
);

4319 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"replication")) {

4320 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4321 
šfo
 = 
	`sdsÿrštf
(info,

4324 
£rv”
.
ma¡”ho¡
 =ğ
NULL
 ? "master" : "slave");

4325 ià(
£rv”
.
ma¡”ho¡
) {

4326 
¦ave_»¶_off£t
 = 1;

4328 ià(
£rv”
.
ma¡”
)

4329 
¦ave_»¶_off£t
 = 
£rv”
.
ma¡”
->
»¶off
;

4330 ià(
£rv”
.
ÿched_ma¡”
)

4331 
¦ave_»¶_off£t
 = 
£rv”
.
ÿched_ma¡”
->
»¶off
;

4333 
šfo
 = 
	`sdsÿrštf
(info,

4340 ,
£rv”
.
ma¡”ho¡
,

4341 
£rv”
.
ma¡”pÜt
,

4342 (
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_CONNECTED
) ?

4344 
£rv”
.
ma¡”
 ?

4345 (()(
£rv”
.
unixtime
-£rv”.
ma¡”
->
Ï¡š‹¿ùiÚ
)) : -1,

4346 
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
,

4347 
¦ave_»¶_off£t


4350 ià(
£rv”
.
»¶_¡©e
 =ğ
REPL_STATE_TRANSFER
) {

4351 
šfo
 = 
	`sdsÿrštf
(info,

4355 (
£rv”
.
»¶_Œªsãr_size
 - s”v”.
»¶_Œªsãr_»ad
),

4356 ()(
£rv”
.
unixtime
-£rv”.
»¶_Œªsãr_Ï¡io
)

4360 ià(
£rv”
.
»¶_¡©e
 !ğ
REPL_STATE_CONNECTED
) {

4361 
šfo
 = 
	`sdsÿrštf
(info,

4363 (
štmax_t
)(
£rv”
.
unixtime
-£rv”.
»¶_down_sšû
));

4365 
šfo
 = 
	`sdsÿrštf
(info,

4368 
£rv”
.
¦ave_´iÜ™y
,

4369 
£rv”
.
»¶_¦ave_ro
);

4372 
šfo
 = 
	`sdsÿrštf
(info,

4374 
	`li¡L’gth
(
£rv”
.
¦aves
));

4378 ià(
£rv”
.
»¶_mš_¦aves_to_wr™e
 &&

4379 
£rv”
.
»¶_mš_¦aves_max_Ïg
) {

4380 
šfo
 = 
	`sdsÿrštf
(info,

4382 
£rv”
.
»¶_good_¦aves_couÁ
);

4385 ià(
	`li¡L’gth
(
£rv”
.
¦aves
)) {

4386 
¦aveid
 = 0;

4387 
li¡Node
 *
Ê
;

4388 
li¡I‹r
 
li
;

4390 
	`li¡Rewšd
(
£rv”
.
¦aves
,&
li
);

4391 (
Ê
 = 
	`li¡Next
(&
li
))) {

4392 
ş›Á
 *
¦ave
 = 
	`li¡NodeV®ue
(
Ê
);

4393 *
¡©e
 = 
NULL
;

4394 

[
NET_IP_STR_LEN
], *
¦ave
 = 
¦ave
->
¦ave_
;

4395 
pÜt
;

4396 
Ïg
 = 0;

4398 ià(
¦ave
[0] == '\0') {

4399 ià(
	`cÚnP“rToSŒšg
(
¦ave
->
cÚn
,

,(),&
pÜt
) == -1)

4401 
¦ave
 = 

;

4403 
¦ave
->
»¶¡©e
) {

4404 
SLAVE_STATE_WAIT_BGSAVE_START
:

4405 
SLAVE_STATE_WAIT_BGSAVE_END
:

4406 
¡©e
 = "wait_bgsave";

4408 
SLAVE_STATE_SEND_BULK
:

4409 
¡©e
 = "send_bulk";

4411 
SLAVE_STATE_ONLINE
:

4412 
¡©e
 = "online";

4415 ià(
¡©e
 =ğ
NULL
) ;

4416 ià(
¦ave
->
»¶¡©e
 =ğ
SLAVE_STATE_ONLINE
)

4417 
Ïg
 = 
	`time
(
NULL
è- 
¦ave
->
»¶_ack_time
;

4419 
šfo
 = 
	`sdsÿrštf
(info,

4422 
¦aveid
,
¦ave
,
¦ave
->
¦ave_li¡’šg_pÜt
,
¡©e
,

4423 
¦ave
->
»¶_ack_off
, 
Ïg
);

4424 
¦aveid
++;

4427 
šfo
 = 
	`sdsÿrštf
(info,

4437 
£rv”
.
»¶id
,

4438 
£rv”
.
»¶id2
,

4439 
£rv”
.
ma¡”_»¶_off£t
,

4440 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
,

4441 
£rv”
.
£cÚd_»¶id_off£t
,

4442 
£rv”
.
»¶_backlog
 !ğ
NULL
,

4443 
£rv”
.
»¶_backlog_size
,

4444 
£rv”
.
»¶_backlog_off
,

4445 
£rv”
.
»¶_backlog_hi¡Ën
);

4449 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"cpu")) {

4450 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4451 
šfo
 = 
	`sdsÿrštf
(info,

4457 ()
£lf_ru
.
ru_¡ime
.
tv_£c
, ()£lf_ru.ru_¡ime.
tv_u£c
,

4458 ()
£lf_ru
.
ru_utime
.
tv_£c
, ()£lf_ru.ru_utime.
tv_u£c
,

4459 ()
c_ru
.
ru_¡ime
.
tv_£c
, ()c_ru.ru_¡ime.
tv_u£c
,

4460 ()
c_ru
.
ru_utime
.
tv_£c
, ()c_ru.ru_utime.
tv_u£c
);

4464 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"modules")) {

4465 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4466 
šfo
 = 
	`sdsÿrštf
(info,"# Modules\r\n");

4467 
šfo
 = 
	`g’ModuËsInfoSŒšg
(info);

4471 ià(
®l£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"commandstats")) {

4472 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4473 
šfo
 = 
	`sdsÿrštf
(info, "# Commandstats\r\n");

4475 
»disCommªd
 *
c
;

4476 
diùEÁry
 *
de
;

4477 
diùI‹¿tÜ
 *
di
;

4478 
di
 = 
	`diùG‘SaãI‹¿tÜ
(
£rv”
.
commªds
);

4479 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

4480 
c
 = (
»disCommªd
 *è
	`diùG‘V®
(
de
);

4481 ià(!
c
->
ÿÎs
) ;

4482 
šfo
 = 
	`sdsÿrštf
(info,

4484 
c
->
Çme
, c->
ÿÎs
, c->
miüo£cÚds
,

4485 (
c
->
ÿÎs
 =ğ0è? 0 : (()c->
miüo£cÚds
/c->calls));

4487 
	`diùR–—£I‹¿tÜ
(
di
);

4491 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"cluster")) {

4492 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4493 
šfo
 = 
	`sdsÿrštf
(info,

4496 
£rv”
.
şu¡”_’abËd
);

4500 ià(
®l£ùiÚs
 || 
def£ùiÚs
 || !
	`¡rÿ£cmp
(
£ùiÚ
,"keyspace")) {

4501 ià(
£ùiÚs
++è
šfo
 = 
	`sdsÿt
(info,"\r\n");

4502 
šfo
 = 
	`sdsÿrštf
(info, "# Keyspace\r\n");

4503 
j
 = 0; j < 
£rv”
.
dbnum
; j++) {

4504 
keys
, 
vkeys
;

4506 
keys
 = 
	`diùSize
(
£rv”
.
db
[
j
].
diù
);

4507 
vkeys
 = 
	`diùSize
(
£rv”
.
db
[
j
].
expœes
);

4508 ià(
keys
 || 
vkeys
) {

4509 
šfo
 = 
	`sdsÿrštf
(info,

4511 
j
, 
keys
, 
vkeys
, 
£rv”
.
db
[j].
avg_‰l
);

4519 ià(
ev”ythšg
 || 
moduËs
 ||

4520 (!
®l£ùiÚs
 && !
def£ùiÚs
 && 
£ùiÚs
==0)) {

4521 
šfo
 = 
	`moduËsCŞËùInfo
(info,

4522 
ev”ythšg
 || 
moduËs
 ? 
NULL
: 
£ùiÚ
,

4524 
£ùiÚs
);

4526  
šfo
;

4527 
	}
}

4529 
	$šfoCommªd
(
ş›Á
 *
c
) {

4530 *
£ùiÚ
 = 
c
->
¬gc
 =ğ2 ? c->
¬gv
[1]->
±r
 : "default";

4532 ià(
c
->
¬gc
 > 2) {

4533 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

4536 
sds
 
šfo
 = 
	`g’RedisInfoSŒšg
(
£ùiÚ
);

4537 
	`addR•lyV”b©im
(
c
,
šfo
,
	`sd¦’
(info),"txt");

4538 
	`sdsä“
(
šfo
);

4539 
	}
}

4541 
	$mÚ™ÜCommªd
(
ş›Á
 *
c
) {

4543 ià(
c
->
æags
 & 
CLIENT_SLAVE
) ;

4545 
c
->
æags
 |ğ(
CLIENT_SLAVE
|
CLIENT_MONITOR
);

4546 
	`li¡AddNodeTa
(
£rv”
.
mÚ™Üs
,
c
);

4547 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

4548 
	}
}

4552 #ifdeà
__lšux__


4553 
	$lšuxOv”comm™MemÜyV®ue
() {

4554 
FILE
 *
å
 = 
	`fİ’
("/proc/sys/vm/overcommit_memory","r");

4555 
buf
[64];

4557 ià(!
å
)  -1;

4558 ià(
	`fg‘s
(
buf
,64,
å
è=ğ
NULL
) {

4559 
	`fşo£
(
å
);

4562 
	`fşo£
(
å
);

4564  
	`©oi
(
buf
);

4565 
	}
}

4567 
	$lšuxMemÜyW¬nšgs
() {

4568 ià(
	`lšuxOv”comm™MemÜyV®ue
() == 0) {

4569 
	`£rv”Log
(
LL_WARNING
,"WARNING overcommit_memory is seto 0! Background save may fail under†ow memory condition. To fixhis issue‡dd 'vm.overcommit_memory = 1'o /etc/sysctl.conf‡ndhen„eboot or„unhe command 'sysctl vm.overcommit_memory=1' forhisoakeƒffect.");

4571 ià(
	`THPIsEÇbËd
()) {

4572 
	`£rv”Log
(
LL_WARNING
,"WARNING you have Transparent Huge Pages (THP) supportƒnabled in your kernel. This will create†atency‡nd memory usage issues with Redis. To fixhis issue„unhe command 'echo‚ever > /sys/kernel/mm/transparent_hugepage/enabled'‡s„oot,‡nd‡dd ito your /etc/rc.local in ordero„etainhe setting‡fter‡„eboot. Redis must be„estarted‡fter THP is disabled.");

4574 
	}
}

4577 
	$ü—‹PidFe
() {

4580 ià(!
£rv”
.
pidfe
è£rv”.pidfğ
	`z¡rdup
(
CONFIG_DEFAULT_PID_FILE
);

4583 
FILE
 *
å
 = 
	`fİ’
(
£rv”
.
pidfe
,"w");

4584 ià(
å
) {

4585 
	`årštf
(
å
,"%d\n",()
	`g‘pid
());

4586 
	`fşo£
(
å
);

4588 
	}
}

4590 
	$d«mÚize
() {

4591 
fd
;

4593 ià(
	`fÜk
(è!ğ0è
	`ex™
(0);

4594 
	`£tsid
();

4599 ià((
fd
 = 
	`İ’
("/dev/nuÎ", 
O_RDWR
, 0)) != -1) {

4600 
	`dup2
(
fd
, 
STDIN_FILENO
);

4601 
	`dup2
(
fd
, 
STDOUT_FILENO
);

4602 
	`dup2
(
fd
, 
STDERR_FILENO
);

4603 ià(
fd
 > 
STDERR_FILENO
è
	`şo£
(fd);

4605 
	}
}

4607 
	$v”siÚ
() {

4608 
	`´štf
("Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\n",

4609 
REDIS_VERSION
,

4610 
	`»disG™SHA1
(),

4611 
	`©oi
(
	`»disG™Dœty
()) > 0,

4612 
ZMALLOC_LIB
,

4614 (è
	`»disBudId
());

4615 
	`ex™
(0);

4616 
	}
}

4618 
	$u§ge
() {

4619 
	`årštf
(
¡d”r
,"Usage: ./redis-server [/path/to/redis.conf] [options]\n");

4620 
	`årštf
(
¡d”r
," ./redis-server - (read config from stdin)\n");

4621 
	`årštf
(
¡d”r
," ./redis-server -v or --version\n");

4622 
	`årštf
(
¡d”r
," ./redis-server -h or --help\n");

4623 
	`årštf
(
¡d”r
," ./redis-server --test-memory <megabytes>\n\n");

4624 
	`årštf
(
¡d”r
,"Examples:\n");

4625 
	`årštf
(
¡d”r
," ./redis-server (runhe server with default conf)\n");

4626 
	`årštf
(
¡d”r
," ./redis-server /etc/redis/6379.conf\n");

4627 
	`årštf
(
¡d”r
," ./redis-server --port 7777\n");

4628 
	`årštf
(
¡d”r
," ./redis-server --port 7777 --replicaof 127.0.0.1 8888\n");

4629 
	`årštf
(
¡d”r
," ./redis-server /etc/myredis.conf --loglevel verbose\n\n");

4630 
	`årštf
(
¡d”r
,"Sentinel mode:\n");

4631 
	`årštf
(
¡d”r
," ./redis-server /etc/sentinel.conf --sentinel\n");

4632 
	`ex™
(1);

4633 
	}
}

4635 
	$»disAsciiA¹
() {

4636 
	~"asciogo.h
"

4637 *
buf
 = 
	`zm®loc
(1024*16);

4638 *
mode
;

4640 ià(
£rv”
.
şu¡”_’abËd
è
mode
 = "cluster";

4641 ià(
£rv”
.
£Áš–_mode
è
mode
 = "sentinel";

4642 
mode
 = "standalone";

4647 
show_logo
 = ((!
£rv”
.
sy¦og_’abËd
 &&

4648 
£rv”
.
logfe
[0] == '\0' &&

4649 
	`i§‰y
(
	`f’o
(
¡dout
))) ||

4650 
£rv”
.
®ways_show_logo
);

4652 ià(!
show_logo
) {

4653 
	`£rv”Log
(
LL_NOTICE
,

4655 
mode
, 
£rv”
.
pÜt
 ? s”v”.pÜˆ: s”v”.
s_pÜt


4658 
	`¢´štf
(
buf
,1024*16,
ascii_logo
,

4659 
REDIS_VERSION
,

4660 
	`»disG™SHA1
(),

4661 
	`¡¹Ş
(
	`»disG™Dœty
(),
NULL
,10) > 0,

4663 
mode
, 
£rv”
.
pÜt
 ? s”v”.pÜˆ: s”v”.
s_pÜt
,

4664 (è
	`g‘pid
()

4666 
	`£rv”LogRaw
(
LL_NOTICE
|
LL_RAW
,
buf
);

4668 
	`zä“
(
buf
);

4669 
	}
}

4671 
	$sigShutdownHªdËr
(
sig
) {

4672 *
msg
;

4674 
sig
) {

4675 
SIGINT
:

4676 
msg
 = "Received SIGINT scheduling shutdown...";

4678 
SIGTERM
:

4679 
msg
 = "Received SIGTERM scheduling shutdown...";

4682 
msg
 = "Received shutdown signal, scheduling shutdown...";

4689 ià(
£rv”
.
shutdown_a§p
 && 
sig
 =ğ
SIGINT
) {

4690 
	`£rv”LogFromHªdËr
(
LL_WARNING
, "You insist...ƒxiting‚ow.");

4691 
	`rdbRemoveTempFe
(
	`g‘pid
());

4692 
	`ex™
(1);

4693 } ià(
£rv”
.
lßdšg
) {

4694 
	`£rv”LogFromHªdËr
(
LL_WARNING
, "Received shutdown signal during†oading,ƒxiting‚ow.");

4695 
	`ex™
(0);

4698 
	`£rv”LogFromHªdËr
(
LL_WARNING
, 
msg
);

4699 
£rv”
.
shutdown_a§p
 = 1;

4700 
	}
}

4702 
	$£tupSigÇlHªdËrs
() {

4703 
sigaùiÚ
 
aù
;

4707 
	`sigem±y£t
(&
aù
.
§_mask
);

4708 
aù
.
§_æags
 = 0;

4709 
aù
.
§_hªdËr
 = 
sigShutdownHªdËr
;

4710 
	`sigaùiÚ
(
SIGTERM
, &
aù
, 
NULL
);

4711 
	`sigaùiÚ
(
SIGINT
, &
aù
, 
NULL
);

4713 #ifdeà
HAVE_BACKTRACE


4714 
	`sigem±y£t
(&
aù
.
§_mask
);

4715 
aù
.
§_æags
 = 
SA_NODEFER
 | 
SA_RESETHAND
 | 
SA_SIGINFO
;

4716 
aù
.
§_sigaùiÚ
 = 
sig£gvHªdËr
;

4717 
	`sigaùiÚ
(
SIGSEGV
, &
aù
, 
NULL
);

4718 
	`sigaùiÚ
(
SIGBUS
, &
aù
, 
NULL
);

4719 
	`sigaùiÚ
(
SIGFPE
, &
aù
, 
NULL
);

4720 
	`sigaùiÚ
(
SIGILL
, &
aù
, 
NULL
);

4723 
	}
}

4729 
	$sigKlChdHªdËr
(
sig
) {

4730 
	`UNUSED
(
sig
);

4731 
	`£rv”LogFromHªdËr
(
LL_WARNING
, "Received SIGUSR1 in child,ƒxiting‚ow.");

4732 
	`ex™FromChd
(
SERVER_CHILD_NOERROR_RETVAL
);

4733 
	}
}

4735 
	$£tupChdSigÇlHªdËrs
() {

4736 
sigaùiÚ
 
aù
;

4740 
	`sigem±y£t
(&
aù
.
§_mask
);

4741 
aù
.
§_æags
 = 0;

4742 
aù
.
§_hªdËr
 = 
sigKlChdHªdËr
;

4743 
	`sigaùiÚ
(
SIGUSR1
, &
aù
, 
NULL
);

4745 
	}
}

4747 
	$»disFÜk
() {

4748 
chdpid
;

4749 
¡¬t
 = 
	`u¡ime
();

4750 ià((
chdpid
 = 
	`fÜk
()) == 0) {

4752 
	`şo£Li¡’šgSock‘s
(0);

4753 
	`£tupChdSigÇlHªdËrs
();

4756 
£rv”
.
¡©_fÜk_time
 = 
	`u¡ime
()-
¡¬t
;

4757 
£rv”
.
¡©_fÜk_¿‹
 = (è
	`zm®loc_u£d_memÜy
(è* 1000000 / s”v”.
¡©_fÜk_time
 / (1024*1024*1024);

4758 
	`Ï‹ncyAddSam¶eIfN“ded
("fÜk",
£rv”
.
¡©_fÜk_time
/1000);

4759 ià(
chdpid
 == -1) {

4762 
	`upd©eDiùResizePŞicy
();

4764  
chdpid
;

4765 
	}
}

4767 
	$£ndChdCOWInfo
(
±y³
, *
²ame
) {

4768 
size_t
 
´iv©e_dœty
 = 
	`zm®loc_g‘_´iv©e_dœty
(-1);

4770 ià(
´iv©e_dœty
) {

4771 
	`£rv”Log
(
LL_NOTICE
,

4773 
²ame
, 
´iv©e_dœty
/(1024*1024));

4776 
£rv”
.
chd_šfo_d©a
.
cow_size
 = 
´iv©e_dœty
;

4777 
	`£ndChdInfo
(
±y³
);

4778 
	}
}

4780 
mem‹¡
(
size_t
 
megaby‹s
, 
·s£s
);

4784 
	$checkFÜS’tš–Mode
(
¬gc
, **
¬gv
) {

4785 
j
;

4787 ià(
	`¡r¡r
(
¬gv
[0],"»dis-£Áš–"è!ğ
NULL
)  1;

4788 
j
 = 1; j < 
¬gc
; j++)

4789 ià(!
	`¡rcmp
(
¬gv
[
j
],"--sentinel"))  1;

4791 
	}
}

4794 
	$lßdD©aFromDisk
() {

4795 
¡¬t
 = 
	`u¡ime
();

4796 ià(
£rv”
.
aof_¡©e
 =ğ
AOF_ON
) {

4797 ià(
	`lßdAµ’dOÆyFe
(
£rv”
.
aof_f’ame
è=ğ
C_OK
)

4798 
	`£rv”Log
(
LL_NOTICE
,"DB†ßded from‡µ’d oÆy fe: %.3à£cÚds",()(
	`u¡ime
()-
¡¬t
)/1000000);

4800 
rdbSaveInfo
 
rsi
 = 
RDB_SAVE_INFO_INIT
;

4801 ià(
	`rdbLßd
(
£rv”
.
rdb_f’ame
,&
rsi
,
RDBFLAGS_NONE
è=ğ
C_OK
) {

4802 
	`£rv”Log
(
LL_NOTICE
,"DB†oaded from disk: %.3f seconds",

4803 ()(
	`u¡ime
()-
¡¬t
)/1000000);

4806 ià((
£rv”
.
ma¡”ho¡
 ||

4807 (
£rv”
.
şu¡”_’abËd
 &&

4808 
	`nodeIsSÏve
(
£rv”
.
şu¡”
->
my£lf
))) &&

4809 
rsi
.
»¶_id_is_£t
 &&

4810 
rsi
.
»¶_off£t
 != -1 &&

4814 
rsi
.
»¶_¡»am_db
 != -1)

4816 
	`memıy
(
£rv”
.
»¶id
,
rsi
.
»¶_id
,(server.replid));

4817 
£rv”
.
ma¡”_»¶_off£t
 = 
rsi
.
»¶_off£t
;

4818 
£rv”
.
ma¡”_»¶_m—nšgful_off£t
 = 
rsi
.
»¶_off£t
;

4822 
	`»¶iÿtiÚCacheMa¡”UsšgMy£lf
();

4823 
	`£ËùDb
(
£rv”
.
ÿched_ma¡”
,
rsi
.
»¶_¡»am_db
);

4825 } ià(
”ºo
 !ğ
ENOENT
) {

4826 
	`£rv”Log
(
LL_WARNING
,"F©®ƒ¼Ü†ßdšghDB: %s. Ex™šg.",
	`¡»¼Ü
(
”ºo
));

4827 
	`ex™
(1);

4830 
	}
}

4832 
	$»disOutOfMemÜyHªdËr
(
size_t
 
®loÿtiÚ_size
) {

4833 
	`£rv”Log
(
LL_WARNING
,"Out Of Memory‡llocating %zu bytes!",

4834 
®loÿtiÚ_size
);

4835 
	`£rv”Pªic
("Redis‡borting for OUT OF MEMORY");

4836 
	}
}

4838 
	$»disS‘ProcT™Ë
(*
t™Ë
) {

4839 #ifdeà
USE_SETPROCTITLE


4840 *
£rv”_mode
 = "";

4841 ià(
£rv”
.
şu¡”_’abËd
è
£rv”_mode
 = " [cluster]";

4842 ià(
£rv”
.
£Áš–_mode
è
£rv”_mode
 = " [sentinel]";

4844 
	`£roù™Ë
("%s %s:%d%s",

4845 
t™Ë
,

4846 
£rv”
.
bšdaddr_couÁ
 ? s”v”.
bšdaddr
[0] : "*",

4847 
£rv”
.
pÜt
 ? s”v”.pÜˆ: s”v”.
s_pÜt
,

4848 
£rv”_mode
);

4850 
	`UNUSED
(
t™Ë
);

4852 
	}
}

4854 
	$»disS‘CpuAffš™y
(cÚ¡ *
ıuli¡
) {

4855 #ifdeà
USE_SETCPUAFFINITY


4856 
	`£tıuaffš™y
(
ıuli¡
);

4858 
	`UNUSED
(
ıuli¡
);

4860 
	}
}

4866 
	$»disSu³rvi£dUp¡¬t
() {

4867 cÚ¡ *
up¡¬t_job
 = 
	`g‘’v
("UPSTART_JOB");

4869 ià(!
up¡¬t_job
) {

4870 
	`£rv”Log
(
LL_WARNING
,

4875 
	`£rv”Log
(
LL_NOTICE
, "supervised by upstart, will stopo signal„eadiness");

4876 
	`¿i£
(
SIGSTOP
);

4877 
	`un£‹nv
("UPSTART_JOB");

4879 
	}
}

4881 
	$»disCommuniÿ‹Sy¡emd
(cÚ¡ *
sd_nÙify_msg
) {

4882 cÚ¡ *
nÙify_sock‘
 = 
	`g‘’v
("NOTIFY_SOCKET");

4883 ià(!
nÙify_sock‘
) {

4884 
	`£rv”Log
(
LL_WARNING
,

4888 #ifdeà
HAVE_LIBSYSTEMD


4889 (è
	`sd_nÙify
(0, 
sd_nÙify_msg
);

4891 
	`UNUSED
(
sd_nÙify_msg
);

4894 
	}
}

4896 
	$»disIsSu³rvi£d
(
mode
) {

4897 ià(
mode
 =ğ
SUPERVISED_AUTODETECT
) {

4898 cÚ¡ *
up¡¬t_job
 = 
	`g‘’v
("UPSTART_JOB");

4899 cÚ¡ *
nÙify_sock‘
 = 
	`g‘’v
("NOTIFY_SOCKET");

4901 ià(
up¡¬t_job
) {

4902 
	`»disSu³rvi£dUp¡¬t
();

4903 } ià(
nÙify_sock‘
) {

4904 
£rv”
.
su³rvi£d_mode
 = 
SUPERVISED_SYSTEMD
;

4905 
	`£rv”Log
(
LL_WARNING
,

4907  
	`»disCommuniÿ‹Sy¡emd
("STATUS=Redis is†oading...\n");

4909 } ià(
mode
 =ğ
SUPERVISED_UPSTART
) {

4910  
	`»disSu³rvi£dUp¡¬t
();

4911 } ià(
mode
 =ğ
SUPERVISED_SYSTEMD
) {

4912 
	`£rv”Log
(
LL_WARNING
,

4914  
	`»disCommuniÿ‹Sy¡emd
("STATUS=Redis is†oading...\n");

4918 
	}
}

4920 
	$iAmMa¡”
() {

4921  ((!
£rv”
.
şu¡”_’abËd
 && s”v”.
ma¡”ho¡
 =ğ
NULL
) ||

4922 (
£rv”
.
şu¡”_’abËd
 && 
	`nodeIsMa¡”
(£rv”.
şu¡”
->
my£lf
)));

4923 
	}
}

4926 
	$maš
(
¬gc
, **
¬gv
) {

4927 
timev®
 
tv
;

4928 
j
;

4930 #ifdeà
REDIS_TEST


4931 ià(
¬gc
 =ğ3 && !
	`¡rÿ£cmp
(
¬gv
[1], "test")) {

4932 ià(!
	`¡rÿ£cmp
(
¬gv
[2], "ziplist")) {

4933  
	`zli¡Te¡
(
¬gc
, 
¬gv
);

4934 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "quicklist")) {

4935 
	`quickli¡Te¡
(
¬gc
, 
¬gv
);

4936 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "intset")) {

4937  
	`št£tTe¡
(
¬gc
, 
¬gv
);

4938 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "zipmap")) {

4939  
	`zm­Te¡
(
¬gc
, 
¬gv
);

4940 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "sha1test")) {

4941  
	`sha1Te¡
(
¬gc
, 
¬gv
);

4942 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "util")) {

4943  
	`utTe¡
(
¬gc
, 
¬gv
);

4944 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "endianconv")) {

4945  
	`’dŸncÚvTe¡
(
¬gc
, 
¬gv
);

4946 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "crc64")) {

4947  
	`üc64Te¡
(
¬gc
, 
¬gv
);

4948 } ià(!
	`¡rÿ£cmp
(
¬gv
[2], "zmalloc")) {

4949  
	`zm®loc_‹¡
(
¬gc
, 
¬gv
);

4957 #ifdeà
INIT_SETPROCTITLE_REPLACEMENT


4958 
	`¥t_š™
(
¬gc
, 
¬gv
);

4960 
	`£oÿË
(
LC_COLLATE
,"");

4961 
	`tz£t
();

4962 
	`zm®loc_£t_oom_hªdËr
(
»disOutOfMemÜyHªdËr
);

4963 
	`¤ªd
(
	`time
(
NULL
)^
	`g‘pid
());

4964 
	`g‘timeofday
(&
tv
,
NULL
);

4965 
	`üc64_š™
();

4967 
ušt8_t
 
hash£ed
[16];

4968 
	`g‘RªdomBy‹s
(
hash£ed
,(hashseed));

4969 
	`diùS‘HashFunùiÚS“d
(
hash£ed
);

4970 
£rv”
.
£Áš–_mode
 = 
	`checkFÜS’tš–Mode
(
¬gc
,
¬gv
);

4971 
	`š™S”v”CÚfig
();

4972 
	`ACLIn™
();

4974 
	`moduËIn™ModuËsSy¡em
();

4975 
	`sIn™
();

4979 
£rv”
.
execubË
 = 
	`g‘AbsŞu‹P©h
(
¬gv
[0]);

4980 
£rv”
.
exec_¬gv
 = 
	`zm®loc
((*)*(
¬gc
+1));

4981 
£rv”
.
exec_¬gv
[
¬gc
] = 
NULL
;

4982 
j
 = 0; j < 
¬gc
; j++è
£rv”
.
exec_¬gv
[j] = 
	`z¡rdup
(
¬gv
[j]);

4987 ià(
£rv”
.
£Áš–_mode
) {

4988 
	`š™S’tš–CÚfig
();

4989 
	`š™S’tš–
();

4995 ià(
	`¡r¡r
(
¬gv
[0],"»dis-check-rdb"è!ğ
NULL
)

4996 
	`»dis_check_rdb_maš
(
¬gc
,
¬gv
,
NULL
);

4997 ià(
	`¡r¡r
(
¬gv
[0],"»dis-check-aof"è!ğ
NULL
)

4998 
	`»dis_check_aof_maš
(
¬gc
,
¬gv
);

5000 ià(
¬gc
 >= 2) {

5001 
j
 = 1;

5002 
sds
 
İtiÚs
 = 
	`sd£m±y
();

5003 *
cÚfigfe
 = 
NULL
;

5006 ià(
	`¡rcmp
(
¬gv
[1], "-v") == 0 ||

5007 
	`¡rcmp
(
¬gv
[1], "--v”siÚ"è=ğ0è
	`v”siÚ
();

5008 ià(
	`¡rcmp
(
¬gv
[1], "--help") == 0 ||

5009 
	`¡rcmp
(
¬gv
[1], "-h"è=ğ0è
	`u§ge
();

5010 ià(
	`¡rcmp
(
¬gv
[1], "--test-memory") == 0) {

5011 ià(
¬gc
 == 3) {

5012 
	`mem‹¡
(
	`©oi
(
¬gv
[2]),50);

5013 
	`ex™
(0);

5015 
	`årštf
(
¡d”r
,"Please specifyhe‡mount of memoryoest in megabytes.\n");

5016 
	`årštf
(
¡d”r
,"Example: ./redis-server --test-memory 4096\n\n");

5017 
	`ex™
(1);

5022 ià(
¬gv
[
j
][0] != '-' ||‡rgv[j][1] != '-') {

5023 
cÚfigfe
 = 
¬gv
[
j
];

5024 
£rv”
.
cÚfigfe
 = 
	`g‘AbsŞu‹P©h
(configfile);

5027 
	`zä“
(
£rv”
.
exec_¬gv
[
j
]);

5028 
£rv”
.
exec_¬gv
[
j
] = 
	`z¡rdup
(£rv”.
cÚfigfe
);

5029 
j
++;

5036 
j
 !ğ
¬gc
) {

5037 ià(
¬gv
[
j
][0] == '-' &&‡rgv[j][1] == '-') {

5039 ià(!
	`¡rcmp
(
¬gv
[
j
], "--check-rdb")) {

5041 
j
++;

5044 ià(
	`sd¦’
(
İtiÚs
)èİtiÚ ğ
	`sdsÿt
(options,"\n");

5045 
İtiÚs
 = 
	`sdsÿt
(İtiÚs,
¬gv
[
j
]+2);

5046 
İtiÚs
 = 
	`sdsÿt
(options," ");

5049 
İtiÚs
 = 
	`sdsÿŒ•r
(İtiÚs,
¬gv
[
j
],
	`¡¾’
(argv[j]));

5050 
İtiÚs
 = 
	`sdsÿt
(options," ");

5052 
j
++;

5054 ià(
£rv”
.
£Áš–_mode
 && 
cÚfigfe
 && *configfile == '-') {

5055 
	`£rv”Log
(
LL_WARNING
,

5057 
	`£rv”Log
(
LL_WARNING
,

5059 
	`ex™
(1);

5061 
	`»£tS”v”SaveP¬ams
();

5062 
	`lßdS”v”CÚfig
(
cÚfigfe
,
İtiÚs
);

5063 
	`sdsä“
(
İtiÚs
);

5066 
	`£rv”Log
(
LL_WARNING
, "oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo");

5067 
	`£rv”Log
(
LL_WARNING
,

5069 
REDIS_VERSION
,

5071 
	`»disG™SHA1
(),

5072 
	`¡¹Ş
(
	`»disG™Dœty
(),
NULL
,10) > 0,

5073 ()
	`g‘pid
());

5075 ià(
¬gc
 == 1) {

5076 
	`£rv”Log
(
LL_WARNING
, "W¬nšg:‚ØcÚfig f¥ecif›d, usšghdeçuÉ cÚfig. IÀÜd”Ø¥ecify‡ cÚfig fu£ % /·th/to/%s.cÚf", 
¬gv
[0], 
£rv”
.
£Áš–_mode
 ? "sentinel" : "redis");

5078 
	`£rv”Log
(
LL_WARNING
, "Configuration†oaded");

5081 
£rv”
.
su³rvi£d
 = 
	`»disIsSu³rvi£d
(£rv”.
su³rvi£d_mode
);

5082 
background
 = 
£rv”
.
d«mÚize
 && !£rv”.
su³rvi£d
;

5083 ià(
background
è
	`d«mÚize
();

5085 
	`š™S”v”
();

5086 ià(
background
 || 
£rv”
.
pidfe
è
	`ü—‹PidFe
();

5087 
	`»disS‘ProcT™Ë
(
¬gv
[0]);

5088 
	`»disAsciiA¹
();

5089 
	`checkTıBacklogS‘tšgs
();

5091 ià(!
£rv”
.
£Áš–_mode
) {

5093 
	`£rv”Log
(
LL_WARNING
,"Server initialized");

5094 #ifdeà
__lšux__


5095 
	`lšuxMemÜyW¬nšgs
();

5097 
	`moduËLßdFromQueue
();

5098 
	`ACLLßdU£rsAtS¹up
();

5099 
	`In™S”v”La¡
();

5100 
	`lßdD©aFromDisk
();

5101 ià(
£rv”
.
şu¡”_’abËd
) {

5102 ià(
	`v”ifyClu¡”CÚfigW™hD©a
(è=ğ
C_ERR
) {

5103 
	`£rv”Log
(
LL_WARNING
,

5106 
	`ex™
(1);

5109 ià(
£rv”
.
fd_couÁ
 > 0 || s”v”.
sfd_couÁ
 > 0)

5110 
	`£rv”Log
(
LL_NOTICE
,"Readyo‡ccept connections");

5111 ià(
£rv”
.
sofd
 > 0)

5112 
	`£rv”Log
(
LL_NOTICE
,"Th£rv” i now„—dyØacû± cÚÃùiÚ © %s", 
£rv”
.
unixsock‘
);

5113 ià(
£rv”
.
su³rvi£d_mode
 =ğ
SUPERVISED_SYSTEMD
) {

5114 ià(!
£rv”
.
ma¡”ho¡
) {

5115 
	`»disCommuniÿ‹Sy¡emd
("STATUS=Readyo‡ccept connections\n");

5116 
	`»disCommuniÿ‹Sy¡emd
("READY=1\n");

5118 
	`»disCommuniÿ‹Sy¡emd
("STATUS=Waiting for MASTER <-> REPLICA sync\n");

5122 
	`In™S”v”La¡
();

5123 
	`£Áš–IsRuÂšg
();

5127 ià(
£rv”
.
maxmemÜy
 > 0 && server.maxmemory < 1024*1024) {

5128 
	`£rv”Log
(
LL_WARNING
,"WARNING: You s³cif›d‡ maxmemÜy v®uth© i Ës thª 1MB (cu¼’ˆv®ui %Îu by‹s). A» you su»hi i wh© you„—Îy wªt?", 
£rv”
.
maxmemÜy
);

5131 
	`»disS‘CpuAffš™y
(
£rv”
.
£rv”_ıuli¡
);

5132 
	`«S‘BefÜeSË•Proc
(
£rv”
.
–
,
befÜeSË•
);

5133 
	`«S‘Aá”SË•Proc
(
£rv”
.
–
,
aá”SË•
);

5134 
	`«Maš
(
£rv”
.
–
);

5135 
	`«D–‘eEv’tLoİ
(
£rv”
.
–
);

5137 
	}
}

	@server.h

30 #iâdeà
__REDIS_H


31 
	#__REDIS_H


	)

33 
	~"fmaüos.h
"

34 
	~"cÚfig.h
"

35 
	~"sŞ¬isfixes.h
"

36 
	~"rio.h
"

38 
	~<¡dio.h
>

39 
	~<¡dlib.h
>

40 
	~<¡ršg.h
>

41 
	~<time.h
>

42 
	~<lim™s.h
>

43 
	~<uni¡d.h
>

44 
	~<”ºo.h
>

45 
	~<š‰y³s.h
>

46 
	~<±h»ad.h
>

47 
	~<sy¦og.h
>

48 
	~<Ãtš‘/š.h
>

49 
	~<sys/sock‘.h
>

50 
	~<lua.h
>

51 
	~<sigÇl.h
>

53 #ifdeà
HAVE_LIBSYSTEMD


54 
	~<sy¡emd/sd-d«mÚ.h
>

57 
	tm¡ime_t
;

58 
	tu¡ime_t
;

60 
	~"«.h
"

61 
	~"sds.h
"

62 
	~"diù.h
"

63 
	~"adli¡.h
"

64 
	~"zm®loc.h
"

65 
	~"ª‘.h
"

66 
	~"zli¡.h
"

67 
	~"št£t.h
"

68 
	~"v”siÚ.h
"

69 
	~"ut.h
"

70 
	~"Ï‹ncy.h
"

71 
	~"¥¬klše.h
"

72 
	~"quickli¡.h
"

74 
	~"¿x.h
"

75 
	~"cÚÃùiÚ.h
"

77 
	#REDISMODULE_CORE
 1

	)

78 
	~"»dismoduË.h
"

81 
	~"zm­.h
"

82 
	~"sha1.h
"

83 
	~"’dŸncÚv.h
"

84 
	~"üc64.h
"

87 
	#C_OK
 0

	)

88 
	#C_ERR
 -1

	)

91 
	#CONFIG_DEFAULT_HZ
 10

	)

92 
	#CONFIG_MIN_HZ
 1

	)

93 
	#CONFIG_MAX_HZ
 500

	)

94 
	#MAX_CLIENTS_PER_CLOCK_TICK
 200

	)

95 
	#CONFIG_MAX_LINE
 1024

	)

96 
	#CRON_DBS_PER_CALL
 16

	)

97 
	#NET_MAX_WRITES_PER_EVENT
 (1024*64)

	)

98 
	#PROTO_SHARED_SELECT_CMDS
 10

	)

99 
	#OBJ_SHARED_INTEGERS
 10000

	)

100 
	#OBJ_SHARED_BULKHDR_LEN
 32

	)

101 
	#LOG_MAX_LEN
 1024

	)

102 
	#AOF_REWRITE_ITEMS_PER_CMD
 64

	)

103 
	#AOF_READ_DIFF_INTERVAL_BYTES
 (1024*10)

	)

104 
	#CONFIG_AUTHPASS_MAX_LEN
 512

	)

105 
	#CONFIG_RUN_ID_SIZE
 40

	)

106 
	#RDB_EOF_MARK_SIZE
 40

	)

107 
	#CONFIG_REPL_BACKLOG_MIN_SIZE
 (1024*16è

	)

108 
	#CONFIG_BGSAVE_RETRY_DELAY
 5

	)

109 
	#CONFIG_DEFAULT_PID_FILE
 "/v¬/run/»dis.pid"

	)

110 
	#CONFIG_DEFAULT_CLUSTER_CONFIG_FILE
 "nodes.cÚf"

	)

111 
	#CONFIG_DEFAULT_UNIX_SOCKET_PERM
 0

	)

112 
	#CONFIG_DEFAULT_LOGFILE
 ""

	)

113 
	#NET_IP_STR_LEN
 46

	)

114 
	#NET_PEER_ID_LEN
 (
NET_IP_STR_LEN
+32è

	)

115 
	#CONFIG_BINDADDR_MAX
 16

	)

116 
	#CONFIG_MIN_RESERVED_FDS
 32

	)

118 
	#ACTIVE_EXPIRE_CYCLE_SLOW
 0

	)

119 
	#ACTIVE_EXPIRE_CYCLE_FAST
 1

	)

127 
	#SERVER_CHILD_NOERROR_RETVAL
 255

	)

130 
	#STATS_METRIC_SAMPLES
 16

	)

131 
	#STATS_METRIC_COMMAND
 0

	)

132 
	#STATS_METRIC_NET_INPUT
 1

	)

133 
	#STATS_METRIC_NET_OUTPUT
 2

	)

134 
	#STATS_METRIC_COUNT
 3

	)

137 
	#PROTO_MAX_QUERYBUF_LEN
 (1024*1024*1024è

	)

138 
	#PROTO_IOBUF_LEN
 (1024*16è

	)

139 
	#PROTO_REPLY_CHUNK_BYTES
 (16*1024è

	)

140 
	#PROTO_INLINE_MAX_SIZE
 (1024*64è

	)

141 
	#PROTO_MBULK_BIG_ARG
 (1024*32)

	)

142 
	#LONG_STR_SIZE
 21

	)

143 
	#REDIS_AUTOSYNC_BYTES
 (1024*1024*32è

	)

145 
	#LIMIT_PENDING_QUERYBUF
 (4*1024*1024è

	)

151 
	#CONFIG_FDSET_INCR
 (
CONFIG_MIN_RESERVED_FDS
+96)

	)

154 
	#HASHTABLE_MIN_FILL
 10

	)

158 
	#CMD_WRITE
 (1ULL<<0è

	)

159 
	#CMD_READONLY
 (1ULL<<1è

	)

160 
	#CMD_DENYOOM
 (1ULL<<2è

	)

161 
	#CMD_MODULE
 (1ULL<<3è

	)

162 
	#CMD_ADMIN
 (1ULL<<4è

	)

163 
	#CMD_PUBSUB
 (1ULL<<5è

	)

164 
	#CMD_NOSCRIPT
 (1ULL<<6è

	)

165 
	#CMD_RANDOM
 (1ULL<<7è

	)

166 
	#CMD_SORT_FOR_SCRIPT
 (1ULL<<8è

	)

167 
	#CMD_LOADING
 (1ULL<<9è

	)

168 
	#CMD_STALE
 (1ULL<<10è

	)

169 
	#CMD_SKIP_MONITOR
 (1ULL<<11è

	)

170 
	#CMD_SKIP_SLOWLOG
 (1ULL<<12è

	)

171 
	#CMD_ASKING
 (1ULL<<13è

	)

172 
	#CMD_FAST
 (1ULL<<14è

	)

173 
	#CMD_NO_AUTH
 (1ULL<<15è

	)

176 
	#CMD_MODULE_GETKEYS
 (1ULL<<16è

	)

177 
	#CMD_MODULE_NO_CLUSTER
 (1ULL<<17è

	)

180 
	#CMD_CATEGORY_KEYSPACE
 (1ULL<<18)

	)

181 
	#CMD_CATEGORY_READ
 (1ULL<<19)

	)

182 
	#CMD_CATEGORY_WRITE
 (1ULL<<20)

	)

183 
	#CMD_CATEGORY_SET
 (1ULL<<21)

	)

184 
	#CMD_CATEGORY_SORTEDSET
 (1ULL<<22)

	)

185 
	#CMD_CATEGORY_LIST
 (1ULL<<23)

	)

186 
	#CMD_CATEGORY_HASH
 (1ULL<<24)

	)

187 
	#CMD_CATEGORY_STRING
 (1ULL<<25)

	)

188 
	#CMD_CATEGORY_BITMAP
 (1ULL<<26)

	)

189 
	#CMD_CATEGORY_HYPERLOGLOG
 (1ULL<<27)

	)

190 
	#CMD_CATEGORY_GEO
 (1ULL<<28)

	)

191 
	#CMD_CATEGORY_STREAM
 (1ULL<<29)

	)

192 
	#CMD_CATEGORY_PUBSUB
 (1ULL<<30)

	)

193 
	#CMD_CATEGORY_ADMIN
 (1ULL<<31)

	)

194 
	#CMD_CATEGORY_FAST
 (1ULL<<32)

	)

195 
	#CMD_CATEGORY_SLOW
 (1ULL<<33)

	)

196 
	#CMD_CATEGORY_BLOCKING
 (1ULL<<34)

	)

197 
	#CMD_CATEGORY_DANGEROUS
 (1ULL<<35)

	)

198 
	#CMD_CATEGORY_CONNECTION
 (1ULL<<36)

	)

199 
	#CMD_CATEGORY_TRANSACTION
 (1ULL<<37)

	)

200 
	#CMD_CATEGORY_SCRIPTING
 (1ULL<<38)

	)

203 
	#AOF_OFF
 0

	)

204 
	#AOF_ON
 1

	)

205 
	#AOF_WAIT_REWRITE
 2

	)

208 
	#CLIENT_SLAVE
 (1<<0è

	)

209 
	#CLIENT_MASTER
 (1<<1è

	)

210 
	#CLIENT_MONITOR
 (1<<2è

	)

211 
	#CLIENT_MULTI
 (1<<3è

	)

212 
	#CLIENT_BLOCKED
 (1<<4è

	)

213 
	#CLIENT_DIRTY_CAS
 (1<<5è

	)

214 
	#CLIENT_CLOSE_AFTER_REPLY
 (1<<6è

	)

215 
	#CLIENT_UNBLOCKED
 (1<<7è

	)

217 
	#CLIENT_LUA
 (1<<8è

	)

218 
	#CLIENT_ASKING
 (1<<9è

	)

219 
	#CLIENT_CLOSE_ASAP
 (1<<10)

	)

220 
	#CLIENT_UNIX_SOCKET
 (1<<11è

	)

221 
	#CLIENT_DIRTY_EXEC
 (1<<12è

	)

222 
	#CLIENT_MASTER_FORCE_REPLY
 (1<<13è

	)

223 
	#CLIENT_FORCE_AOF
 (1<<14è

	)

224 
	#CLIENT_FORCE_REPL
 (1<<15è

	)

225 
	#CLIENT_PRE_PSYNC
 (1<<16è

	)

226 
	#CLIENT_READONLY
 (1<<17è

	)

227 
	#CLIENT_PUBSUB
 (1<<18è

	)

228 
	#CLIENT_PREVENT_AOF_PROP
 (1<<19è

	)

229 
	#CLIENT_PREVENT_REPL_PROP
 (1<<20è

	)

230 
	#CLIENT_PREVENT_PROP
 (
CLIENT_PREVENT_AOF_PROP
|
CLIENT_PREVENT_REPL_PROP
)

	)

231 
	#CLIENT_PENDING_WRITE
 (1<<21è

	)

233 
	#CLIENT_REPLY_OFF
 (1<<22è

	)

234 
	#CLIENT_REPLY_SKIP_NEXT
 (1<<23è

	)

235 
	#CLIENT_REPLY_SKIP
 (1<<24è

	)

236 
	#CLIENT_LUA_DEBUG
 (1<<25è

	)

237 
	#CLIENT_LUA_DEBUG_SYNC
 (1<<26è

	)

238 
	#CLIENT_MODULE
 (1<<27è

	)

239 
	#CLIENT_PROTECTED
 (1<<28è

	)

240 
	#CLIENT_PENDING_READ
 (1<<29è

	)

243 
	#CLIENT_PENDING_COMMAND
 (1<<30è

	)

247 
	#CLIENT_TRACKING
 (1ULL<<31è

	)

249 
	#CLIENT_TRACKING_BROKEN_REDIR
 (1ULL<<32è

	)

250 
	#CLIENT_TRACKING_BCAST
 (1ULL<<33è

	)

251 
	#CLIENT_TRACKING_OPTIN
 (1ULL<<34è

	)

252 
	#CLIENT_TRACKING_OPTOUT
 (1ULL<<35è

	)

253 
	#CLIENT_TRACKING_CACHING
 (1ULL<<36è

	)

255 
	#CLIENT_TRACKING_NOLOOP
 (1ULL<<37è

	)

257 
	#CLIENT_IN_TO_TABLE
 (1ULL<<38è

	)

261 
	#BLOCKED_NONE
 0

	)

262 
	#BLOCKED_LIST
 1

	)

263 
	#BLOCKED_WAIT
 2

	)

264 
	#BLOCKED_MODULE
 3

	)

265 
	#BLOCKED_STREAM
 4

	)

266 
	#BLOCKED_ZSET
 5

	)

267 
	#BLOCKED_NUM
 6

	)

270 
	#PROTO_REQ_INLINE
 1

	)

271 
	#PROTO_REQ_MULTIBULK
 2

	)

275 
	#CLIENT_TYPE_NORMAL
 0

	)

276 
	#CLIENT_TYPE_SLAVE
 1

	)

277 
	#CLIENT_TYPE_PUBSUB
 2

	)

278 
	#CLIENT_TYPE_MASTER
 3

	)

279 
	#CLIENT_TYPE_COUNT
 4

	)

280 
	#CLIENT_TYPE_OBUF_COUNT
 3

	)

286 
	#REPL_STATE_NONE
 0

	)

287 
	#REPL_STATE_CONNECT
 1

	)

288 
	#REPL_STATE_CONNECTING
 2

	)

290 
	#REPL_STATE_RECEIVE_PONG
 3

	)

291 
	#REPL_STATE_SEND_AUTH
 4

	)

292 
	#REPL_STATE_RECEIVE_AUTH
 5

	)

293 
	#REPL_STATE_SEND_PORT
 6

	)

294 
	#REPL_STATE_RECEIVE_PORT
 7

	)

295 
	#REPL_STATE_SEND_IP
 8

	)

296 
	#REPL_STATE_RECEIVE_IP
 9

	)

297 
	#REPL_STATE_SEND_CAPA
 10

	)

298 
	#REPL_STATE_RECEIVE_CAPA
 11

	)

299 
	#REPL_STATE_SEND_PSYNC
 12

	)

300 
	#REPL_STATE_RECEIVE_PSYNC
 13

	)

302 
	#REPL_STATE_TRANSFER
 14

	)

303 
	#REPL_STATE_CONNECTED
 15

	)

309 
	#SLAVE_STATE_WAIT_BGSAVE_START
 6

	)

310 
	#SLAVE_STATE_WAIT_BGSAVE_END
 7

	)

311 
	#SLAVE_STATE_SEND_BULK
 8

	)

312 
	#SLAVE_STATE_ONLINE
 9

	)

315 
	#SLAVE_CAPA_NONE
 0

	)

316 
	#SLAVE_CAPA_EOF
 (1<<0è

	)

317 
	#SLAVE_CAPA_PSYNC2
 (1<<1è

	)

320 
	#CONFIG_REPL_SYNCIO_TIMEOUT
 5

	)

323 
	#LIST_HEAD
 0

	)

324 
	#LIST_TAIL
 1

	)

325 
	#ZSET_MIN
 0

	)

326 
	#ZSET_MAX
 1

	)

329 
	#SORT_OP_GET
 0

	)

332 
	#LL_DEBUG
 0

	)

333 
	#LL_VERBOSE
 1

	)

334 
	#LL_NOTICE
 2

	)

335 
	#LL_WARNING
 3

	)

336 
	#LL_RAW
 (1<<10è

	)

339 
	#SUPERVISED_NONE
 0

	)

340 
	#SUPERVISED_AUTODETECT
 1

	)

341 
	#SUPERVISED_SYSTEMD
 2

	)

342 
	#SUPERVISED_UPSTART
 3

	)

345 
	#UNUSED
(
V
è((èV)

	)

347 
	#ZSKIPLIST_MAXLEVEL
 32

	)

348 
	#ZSKIPLIST_P
 0.25

	)

351 
	#AOF_FSYNC_NO
 0

	)

352 
	#AOF_FSYNC_ALWAYS
 1

	)

353 
	#AOF_FSYNC_EVERYSEC
 2

	)

356 
	#REPL_DISKLESS_LOAD_DISABLED
 0

	)

357 
	#REPL_DISKLESS_LOAD_WHEN_DB_EMPTY
 1

	)

358 
	#REPL_DISKLESS_LOAD_SWAPDB
 2

	)

361 
	#SET_OP_UNION
 0

	)

362 
	#SET_OP_DIFF
 1

	)

363 
	#SET_OP_INTER
 2

	)

368 
	#MAXMEMORY_FLAG_LRU
 (1<<0)

	)

369 
	#MAXMEMORY_FLAG_LFU
 (1<<1)

	)

370 
	#MAXMEMORY_FLAG_ALLKEYS
 (1<<2)

	)

371 
	#MAXMEMORY_FLAG_NO_SHARED_INTEGERS
 \

372 (
MAXMEMORY_FLAG_LRU
|
MAXMEMORY_FLAG_LFU
)

	)

374 
	#MAXMEMORY_VOLATILE_LRU
 ((0<<8)|
MAXMEMORY_FLAG_LRU
)

	)

375 
	#MAXMEMORY_VOLATILE_LFU
 ((1<<8)|
MAXMEMORY_FLAG_LFU
)

	)

376 
	#MAXMEMORY_VOLATILE_TTL
 (2<<8)

	)

377 
	#MAXMEMORY_VOLATILE_RANDOM
 (3<<8)

	)

378 
	#MAXMEMORY_ALLKEYS_LRU
 ((4<<8)|
MAXMEMORY_FLAG_LRU
|
MAXMEMORY_FLAG_ALLKEYS
)

	)

379 
	#MAXMEMORY_ALLKEYS_LFU
 ((5<<8)|
MAXMEMORY_FLAG_LFU
|
MAXMEMORY_FLAG_ALLKEYS
)

	)

380 
	#MAXMEMORY_ALLKEYS_RANDOM
 ((6<<8)|
MAXMEMORY_FLAG_ALLKEYS
)

	)

381 
	#MAXMEMORY_NO_EVICTION
 (7<<8)

	)

384 
	#UNIT_SECONDS
 0

	)

385 
	#UNIT_MILLISECONDS
 1

	)

388 
	#SHUTDOWN_NOFLAGS
 0

	)

389 
	#SHUTDOWN_SAVE
 1

	)

391 
	#SHUTDOWN_NOSAVE
 2

	)

394 
	#CMD_CALL_NONE
 0

	)

395 
	#CMD_CALL_SLOWLOG
 (1<<0)

	)

396 
	#CMD_CALL_STATS
 (1<<1)

	)

397 
	#CMD_CALL_PROPAGATE_AOF
 (1<<2)

	)

398 
	#CMD_CALL_PROPAGATE_REPL
 (1<<3)

	)

399 
	#CMD_CALL_PROPAGATE
 (
CMD_CALL_PROPAGATE_AOF
|
CMD_CALL_PROPAGATE_REPL
)

	)

400 
	#CMD_CALL_FULL
 (
CMD_CALL_SLOWLOG
 | 
CMD_CALL_STATS
 | 
CMD_CALL_PROPAGATE
)

	)

401 
	#CMD_CALL_NOWRAP
 (1<<4è

	)

405 
	#PROPAGATE_NONE
 0

	)

406 
	#PROPAGATE_AOF
 1

	)

407 
	#PROPAGATE_REPL
 2

	)

410 
	#RDB_CHILD_TYPE_NONE
 0

	)

411 
	#RDB_CHILD_TYPE_DISK
 1

	)

412 
	#RDB_CHILD_TYPE_SOCKET
 2

	)

416 
	#NOTIFY_KEYSPACE
 (1<<0è

	)

417 
	#NOTIFY_KEYEVENT
 (1<<1è

	)

418 
	#NOTIFY_GENERIC
 (1<<2è

	)

419 
	#NOTIFY_STRING
 (1<<3è

	)

420 
	#NOTIFY_LIST
 (1<<4è

	)

421 
	#NOTIFY_SET
 (1<<5è

	)

422 
	#NOTIFY_HASH
 (1<<6è

	)

423 
	#NOTIFY_ZSET
 (1<<7è

	)

424 
	#NOTIFY_EXPIRED
 (1<<8è

	)

425 
	#NOTIFY_EVICTED
 (1<<9è

	)

426 
	#NOTIFY_STREAM
 (1<<10è

	)

427 
	#NOTIFY_KEY_MISS
 (1<<11è

	)

428 
	#NOTIFY_ALL
 (
NOTIFY_GENERIC
 | 
NOTIFY_STRING
 | 
NOTIFY_LIST
 | 
NOTIFY_SET
 | 
NOTIFY_HASH
 | 
NOTIFY_ZSET
 | 
NOTIFY_EXPIRED
 | 
NOTIFY_EVICTED
 | 
NOTIFY_STREAM
è

	)

431 
	#NET_FIRST_BIND_ADDR
 (
£rv”
.
bšdaddr_couÁ
 ? s”v”.
bšdaddr
[0] : 
NULL
)

	)

436 
	#run_w™h_³riod
(
_ms_
èià((_ms_ <ğ1000/
£rv”
.
hz
è|| !(£rv”.
üÚloİs
%((_ms_)/(1000/£rv”.hz))))

	)

439 
	#£rv”As£¹W™hInfo
(
_c
,
_o
,
_e
è((_e)?()0 : (
	`_£rv”As£¹W™hInfo
(_c,_o,#_e,
__FILE__
,
__LINE__
),
	`_ex™
(1)))

	)

440 
	#£rv”As£¹
(
_e
è((_e)?()0 : (
	`_£rv”As£¹
(#_e,
__FILE__
,
__LINE__
),
	`_ex™
(1)))

	)

441 
	#£rv”Pªic
(...è
	`_£rv”Pªic
(
__FILE__
,
__LINE__
,
__VA_ARGS__
),
	`_ex™
(1)

	)

450 
	#OBJ_STRING
 0

	)

451 
	#OBJ_LIST
 1

	)

452 
	#OBJ_SET
 2

	)

453 
	#OBJ_ZSET
 3

	)

454 
	#OBJ_HASH
 4

	)

467 
	#OBJ_MODULE
 5

	)

468 
	#OBJ_STREAM
 6

	)

471 
	#REDISMODULE_TYPE_ENCVER_BITS
 10

	)

472 
	#REDISMODULE_TYPE_ENCVER_MASK
 ((1<<
REDISMODULE_TYPE_ENCVER_BITS
)-1)

	)

473 
	#REDISMODULE_TYPE_ENCVER
(
id
è(id & 
REDISMODULE_TYPE_ENCVER_MASK
)

	)

474 
	#REDISMODULE_TYPE_SIGN
(
id
è((id & ~((
ušt64_t
)
REDISMODULE_TYPE_ENCVER_MASK
)è>>
REDISMODULE_TYPE_ENCVER_BITS
)

	)

477 
	#REDISMODULE_AUX_BEFORE_RDB
 (1<<0)

	)

478 
	#REDISMODULE_AUX_AFTER_RDB
 (1<<1)

	)

480 
	gRedisModuË
;

481 
	gRedisModuËIO
;

482 
	gRedisModuËDige¡
;

483 
	gRedisModuËCtx
;

484 
	g»disObjeù
;

490 *(*
	tmoduËTy³LßdFunc
)(
	tRedisModuËIO
 *
	tio
, 
	t’cv”
);

491 (*
	tmoduËTy³SaveFunc
)(
	tRedisModuËIO
 *
	tio
, *
	tv®ue
);

492 (*
	tmoduËTy³AuxLßdFunc
)(
	tRedisModuËIO
 *
	trdb
, 
	t’cv”
, 
	twh’
);

493 (*
	tmoduËTy³AuxSaveFunc
)(
	tRedisModuËIO
 *
	trdb
, 
	twh’
);

494 (*
	tmoduËTy³Rewr™eFunc
)(
	tRedisModuËIO
 *
	tio
, 
	t»disObjeù
 *
	tkey
, *
	tv®ue
);

495 (*
	tmoduËTy³Dige¡Func
)(
	tRedisModuËDige¡
 *
	tdige¡
, *
	tv®ue
);

496 
	$size_t
 (*
	tmoduËTy³MemU§geFunc
)(cÚ¡ *
	tv®ue
);

497 (*
	tmoduËTy³F»eFunc
)(*
	tv®ue
);

501 (*
	tRedisModuËU£rChªgedFunc
è(
	tušt64_t
 
	tş›Á_id
, *
	t´ivd©a
);

506 
	sRedisModuËTy³
 {

507 
ušt64_t
 
id
;

508 
RedisModuË
 *
moduË
;

509 
moduËTy³LßdFunc
 
rdb_lßd
;

510 
moduËTy³SaveFunc
 
rdb_§ve
;

511 
moduËTy³Rewr™eFunc
 
aof_»wr™e
;

512 
moduËTy³MemU§geFunc
 
mem_u§ge
;

513 
moduËTy³Dige¡Func
 
dige¡
;

514 
moduËTy³F»eFunc
 
ä“
;

515 
moduËTy³AuxLßdFunc
 
aux_lßd
;

516 
moduËTy³AuxSaveFunc
 
aux_§ve
;

517 
aux_§ve_Œigg”s
;

518 
Çme
[10];

519 } 
	tmoduËTy³
;

536 
	smoduËV®ue
 {

537 
moduËTy³
 *
ty³
;

538 *
v®ue
;

539 } 
	tmoduËV®ue
;

544 
	sRedisModuËIO
 {

545 
size_t
 
by‹s
;

546 
rio
 *rio;

547 
moduËTy³
 *
ty³
;

548 
”rÜ
;

549 
v”
;

551 
RedisModuËCtx
 *
ùx
;

552 
»disObjeù
 *
key
;

553 } 
	tRedisModuËIO
;

557 
	#moduËIn™IOCÚ‹xt
(
iov¬
,
mty³
,
riİŒ
,
key±r
) do { \

558 
iov¬
.
rio
 = 
riİŒ
; \

559 
iov¬
.
ty³
 = 
mty³
; \

560 
iov¬
.
by‹s
 = 0; \

561 
iov¬
.
”rÜ
 = 0; \

562 
iov¬
.
v”
 = 0; \

563 
iov¬
.
key
 = 
key±r
; \

564 
iov¬
.
ùx
 = 
NULL
; \

565 
	}
} 0);

	)

572 
	sRedisModuËDige¡
 {

573 
	mo
[20];

574 
	mx
[20];

575 } 
	tRedisModuËDige¡
;

578 
	#moduËIn™Dige¡CÚ‹xt
(
mdv¬
) do { \

579 
	`mem£t
(
mdv¬
.
o
,0,(mdvar.o)); \

580 
	`mem£t
(
mdv¬
.
x
,0,(mdvar.x)); \

581 } 0);

	)

586 
	#OBJ_ENCODING_RAW
 0

	)

587 
	#OBJ_ENCODING_INT
 1

	)

588 
	#OBJ_ENCODING_HT
 2

	)

589 
	#OBJ_ENCODING_ZIPMAP
 3

	)

590 
	#OBJ_ENCODING_LINKEDLIST
 4

	)

591 
	#OBJ_ENCODING_ZIPLIST
 5

	)

592 
	#OBJ_ENCODING_INTSET
 6

	)

593 
	#OBJ_ENCODING_SKIPLIST
 7

	)

594 
	#OBJ_ENCODING_EMBSTR
 8

	)

595 
	#OBJ_ENCODING_QUICKLIST
 9

	)

596 
	#OBJ_ENCODING_STREAM
 10

	)

598 
	#LRU_BITS
 24

	)

599 
	#LRU_CLOCK_MAX
 ((1<<
LRU_BITS
)-1è

	)

600 
	#LRU_CLOCK_RESOLUTION
 1000

	)

602 
	#OBJ_SHARED_REFCOUNT
 
INT_MAX


	)

603 
	#OBJ_STATIC_REFCOUNT
 (
INT_MAX
-1è

	)

604 
	#OBJ_FIRST_SPECIAL_REFCOUNT
 
OBJ_STATIC_REFCOUNT


	)

605 
	s»disObjeù
 {

606 
	mty³
:4;

607 
	m’codšg
:4;

608 
	mÌu
:
LRU_BITS
;

611 
	m»fcouÁ
;

612 *
	m±r
;

613 } 
	trobj
;

618 *
g‘ObjeùTy³Name
(
robj
*);

624 
	#š™SticSŒšgObjeù
(
_v¬
,
_±r
) do { \

625 
_v¬
.
»fcouÁ
 = 
OBJ_STATIC_REFCOUNT
; \

626 
_v¬
.
ty³
 = 
OBJ_STRING
; \

627 
_v¬
.
’codšg
 = 
OBJ_ENCODING_RAW
; \

628 
_v¬
.
±r
 = 
_±r
; \

629 } 0)

	)

631 
	geviùiÚPoŞEÁry
;

635 
	sş›ÁR•lyBlock
 {

636 
size_t
 
	msize
, 
	mu£d
;

637 
	mbuf
[];

638 } 
	tş›ÁR•lyBlock
;

643 
	s»disDb
 {

644 
diù
 *
	mdiù
;

645 
diù
 *
	mexpœes
;

646 
diù
 *
	mblockšg_keys
;

647 
diù
 *
	m»ady_keys
;

648 
diù
 *
	mw©ched_keys
;

649 
	mid
;

650 
	mavg_‰l
;

651 
	mexpœes_cursÜ
;

652 
li¡
 *
	mdeäag_Ï‹r
;

653 } 
	t»disDb
;

656 
	smuÉiCmd
 {

657 
robj
 **
	m¬gv
;

658 
	m¬gc
;

659 
»disCommªd
 *
	mcmd
;

660 } 
	tmuÉiCmd
;

662 
	smuÉiS‹
 {

663 
muÉiCmd
 *
	mcommªds
;

664 
	mcouÁ
;

665 
	mcmd_æags
;

668 
	mmš»¶iÿs
;

669 
time_t
 
	mmš»¶iÿs_timeout
;

670 } 
	tmuÉiS‹
;

674 
	sblockšgS‹
 {

676 
m¡ime_t
 
	mtimeout
;

680 
diù
 *
	mkeys
;

682 
robj
 *
	mrg‘
;

686 
size_t
 
	mx»ad_couÁ
;

687 
robj
 *
	mx»ad_group
;

688 
robj
 *
	mx»ad_cÚsum”
;

689 
m¡ime_t
 
	mx»ad_»Œy_time
, 
	mx»ad_»Œy_‰l
;

690 
	mx»ad_group_nßck
;

693 
	mnum»¶iÿs
;

694 
	m»¶off£t
;

697 *
	mmoduË_blocked_hªdË
;

700 } 
	tblockšgS‹
;

713 
	s»adyLi¡
 {

714 
»disDb
 *
	mdb
;

715 
robj
 *
	mkey
;

716 } 
	t»adyLi¡
;

721 
	#USER_COMMAND_BITS_COUNT
 1024

	)

725 
	#USER_FLAG_ENABLED
 (1<<0è

	)

726 
	#USER_FLAG_DISABLED
 (1<<1è

	)

727 
	#USER_FLAG_ALLKEYS
 (1<<2è

	)

728 
	#USER_FLAG_ALLCOMMANDS
 (1<<3è

	)

729 
	#USER_FLAG_NOPASS
 (1<<4è

	)

736 
sds
 
	mÇme
;

737 
ušt64_t
 
	mæags
;

746 
ušt64_t
 
	m®lowed_commªds
[
USER_COMMAND_BITS_COUNT
/64];

753 
sds
 **
	m®lowed_subcommªds
;

754 
li¡
 *
	m·sswÜds
;

755 
li¡
 *
	m·‰”ns
;

758 } 
	tu£r
;

763 
	#CLIENT_ID_AOF
 (
UINT64_MAX
è

	)

767 
	sş›Á
 {

768 
ušt64_t
 
	mid
;

769 
cÚÃùiÚ
 *
	mcÚn
;

770 
	m»¥
;

771 
»disDb
 *
	mdb
;

772 
robj
 *
	mÇme
;

773 
sds
 
	mqu”ybuf
;

774 
size_t
 
	mqb_pos
;

775 
sds
 
	m³ndšg_qu”ybuf
;

779 
size_t
 
	mqu”ybuf_³ak
;

780 
	m¬gc
;

781 
robj
 **
	m¬gv
;

782 
»disCommªd
 *
	mcmd
, *
	mÏ¡cmd
;

783 
u£r
 *
	mu£r
;

786 
	m»qty³
;

787 
	mmuÉibulkËn
;

788 
	mbulkËn
;

789 
li¡
 *
	m»¶y
;

790 
	m»¶y_by‹s
;

791 
size_t
 
	m£ÁËn
;

793 
time_t
 
	mùime
;

794 
time_t
 
	mÏ¡š‹¿ùiÚ
;

795 
time_t
 
	mobuf_soá_lim™_»ached_time
;

796 
ušt64_t
 
	mæags
;

797 
	mauth’tiÿ‹d
;

798 
	m»¶¡©e
;

799 
	m»¶_put_Úlše_Ú_ack
;

800 
	m»¶dbfd
;

801 
off_t
 
	m»¶dboff
;

802 
off_t
 
	m»¶dbsize
;

803 
sds
 
	m»¶´—mbË
;

804 
	m»ad_»¶off
;

805 
	m»¶off
;

806 
	m»¶_ack_off
;

807 
	m»¶_ack_time
;

808 
	mpsync_š™Ÿl_off£t
;

811 
	m»¶id
[
CONFIG_RUN_ID_SIZE
+1];

812 
	m¦ave_li¡’šg_pÜt
;

813 
	m¦ave_
[
NET_IP_STR_LEN
];

814 
	m¦ave_ÿ·
;

815 
muÉiS‹
 
	mm¡©e
;

816 
	mbty³
;

817 
blockšgS‹
 
	mbpİ
;

818 
	mwoff
;

819 
li¡
 *
	mw©ched_keys
;

820 
diù
 *
	mpubsub_chªÃls
;

821 
li¡
 *
	mpubsub_·‰”ns
;

822 
sds
 
	m³”id
;

823 
li¡Node
 *
	mş›Á_li¡_node
;

824 
RedisModuËU£rChªgedFunc
 
	mauth_ÿÎback
;

827 *
	mauth_ÿÎback_´ivd©a
;

830 *
	mauth_moduË
;

837 
ušt64_t
 
	mş›Á_Œackšg_»dœeùiÚ
;

838 
¿x
 *
	mş›Á_Œackšg_´efixes
;

846 
ušt64_t
 
	mş›Á_üÚ_Ï¡_memÜy_u§ge
;

847 
	mş›Á_üÚ_Ï¡_memÜy_ty³
;

849 
	mbuåos
;

850 
	mbuf
[
PROTO_REPLY_CHUNK_BYTES
];

851 } 
	tş›Á
;

853 
	s§v•¬am
 {

854 
time_t
 
	m£cÚds
;

855 
	mchªges
;

858 
	smoduËLßdQueueEÁry
 {

859 
sds
 
	m·th
;

860 
	m¬gc
;

861 
robj
 **
	m¬gv
;

864 
	ssh¬edObjeùsSŒuù
 {

865 
robj
 *
	mülf
, *
	mok
, *
	m”r
, *
	mem±ybulk
, *
	mcz”o
, *
	mcÚe
, *
	mpÚg
, *
	m¥aû
,

866 *
	mcŞÚ
, *
	mqueued
, *
	mnuÎ
[4], *
	mnuÎ¬¿y
[4], *
	mem±ym­
[4], *
	mem±y£t
[4],

867 *
	mem±y¬¿y
, *
	mwrÚgty³”r
, *
	mnokey”r
, *
	msyÁax”r
, *
	m§meobjeù”r
,

868 *
	moutoäªg“¼
, *
	mnosü‹¼
, *
	mlßdšg”r
, *
	m¦owsü‹¼
, *
	mbg§v“¼
,

869 *
	mma¡”dowÃ¼
, *
	mro¦av“¼
, *
	mexeÿbÜ‹¼
, *
	mnßuth”r
, *
	mnÜ•liÿ£¼
,

870 *
	mbusykey”r
, *
	moom”r
, *
	m¶us
, *
	mmes§gebulk
, *
	mpmes§gebulk
, *
	msubsüibebulk
,

871 *
	munsubsüibebulk
, *
	mpsubsüibebulk
, *
	mpunsubsüibebulk
, *
	md–
, *
	muÆšk
,

872 *
	m½İ
, *
	mÍİ
, *
	mÍush
, *
	m½İÍush
, *
	mzpİmš
, *
	mzpİmax
, *
	mem±ysÿn
,

873 *
	mmuÉi
, *
	mexec
,

874 *
	m£Ëù
[
PROTO_SHARED_SELECT_CMDS
],

875 *
	mš‹g”s
[
OBJ_SHARED_INTEGERS
],

876 *
	mmbulkhdr
[
OBJ_SHARED_BULKHDR_LEN
],

877 *
	mbulkhdr
[
OBJ_SHARED_BULKHDR_LEN
];

878 
sds
 
	mmš¡ršg
, 
	mmax¡ršg
;

882 
	szskli¡Node
 {

883 
sds
 
	m–e
;

884 
	mscÜe
;

885 
zskli¡Node
 *
	mbackw¬d
;

886 
	szskli¡Lev–
 {

887 
zskli¡Node
 *
	mfÜw¬d
;

888 
	m¥ª
;

889 } 
	mËv–
[];

890 } 
	tzskli¡Node
;

892 
	szskli¡
 {

893 
zskli¡Node
 *
	mh—d”
, *
	m
;

894 
	mËngth
;

895 
	mËv–
;

896 } 
	tzskli¡
;

898 
	sz£t
 {

899 
diù
 *
	mdiù
;

900 
zskli¡
 *
	mz¦
;

901 } 
	tz£t
;

903 
	sş›ÁBufãrLim™sCÚfig
 {

904 
	mh¬d_lim™_by‹s
;

905 
	msoá_lim™_by‹s
;

906 
time_t
 
	msoá_lim™_£cÚds
;

907 } 
	tş›ÁBufãrLim™sCÚfig
;

909 
ş›ÁBufãrLim™sCÚfig
 
ş›ÁBufãrLim™sDeçuÉs
[
CLIENT_TYPE_OBUF_COUNT
];

917 
	s»disOp
 {

918 
robj
 **
	m¬gv
;

919 
	m¬gc
, 
	mdbid
, 
	mrg‘
;

920 
»disCommªd
 *
	mcmd
;

921 } 
	t»disOp
;

930 
	s»disOpA¼ay
 {

931 
»disOp
 *
	mİs
;

932 
	mnumİs
;

933 } 
	t»disOpA¼ay
;

937 
	s»disMemOv”h—d
 {

938 
size_t
 
	m³ak_®loÿ‹d
;

939 
size_t
 
	mtÙ®_®loÿ‹d
;

940 
size_t
 
	m¡¬tup_®loÿ‹d
;

941 
size_t
 
	m»¶_backlog
;

942 
size_t
 
	mş›Ás_¦aves
;

943 
size_t
 
	mş›Ás_nÜm®
;

944 
size_t
 
	maof_bufãr
;

945 
size_t
 
	mlua_ÿches
;

946 
size_t
 
	mov”h—d_tÙ®
;

947 
size_t
 
	md©a£t
;

948 
size_t
 
	mtÙ®_keys
;

949 
size_t
 
	mby‹s_³r_key
;

950 
	md©a£t_³rc
;

951 
	m³ak_³rc
;

952 
	mtÙ®_äag
;

953 
ssize_t
 
	mtÙ®_äag_by‹s
;

954 
	m®loÿtÜ_äag
;

955 
ssize_t
 
	m®loÿtÜ_äag_by‹s
;

956 
	m®loÿtÜ_rss
;

957 
ssize_t
 
	m®loÿtÜ_rss_by‹s
;

958 
	mrss_exŒa
;

959 
size_t
 
	mrss_exŒa_by‹s
;

960 
size_t
 
	mnum_dbs
;

962 
size_t
 
	mdbid
;

963 
size_t
 
	mov”h—d_ht_maš
;

964 
size_t
 
	mov”h—d_ht_expœes
;

965 } *
	mdb
;

976 
	srdbSaveInfo
 {

978 
	m»¶_¡»am_db
;

981 
	m»¶_id_is_£t
;

982 
	m»¶_id
[
CONFIG_RUN_ID_SIZE
+1];

983 
	m»¶_off£t
;

984 } 
	trdbSaveInfo
;

986 
	#RDB_SAVE_INFO_INIT
 {-1,0,"000000000000000000000000000000",-1}

	)

988 
	sm®loc_¡©s
 {

989 
size_t
 
	mzm®loc_u£d
;

990 
size_t
 
	m´oûss_rss
;

991 
size_t
 
	m®loÿtÜ_®loÿ‹d
;

992 
size_t
 
	m®loÿtÜ_aùive
;

993 
size_t
 
	m®loÿtÜ_»sid’t
;

1000 
	s»disTLSCÚ‹xtCÚfig
 {

1001 *
	mû¹_fe
;

1002 *
	mkey_fe
;

1003 *
	mdh_·¿ms_fe
;

1004 *
	mÿ_û¹_fe
;

1005 *
	mÿ_û¹_dœ
;

1006 *
	m´ÙocŞs
;

1007 *
	mch”s
;

1008 *
	mch”su™es
;

1009 
	m´eãr_£rv”_ch”s
;

1010 } 
	t»disTLSCÚ‹xtCÚfig
;

1016 
	gşu¡”S‹
;

1020 #ifdeà
_AIX


1021 #undeà
hz


1024 
	#CHILD_INFO_MAGIC
 0xC17DDA7A12345678LL

	)

1025 
	#CHILD_INFO_TYPE_RDB
 0

	)

1026 
	#CHILD_INFO_TYPE_AOF
 1

	)

1027 
	#CHILD_INFO_TYPE_MODULE
 3

	)

1029 
	s»disS”v”
 {

1031 
pid_t
 
	mpid
;

1032 *
	mcÚfigfe
;

1033 *
	mexecubË
;

1034 **
	mexec_¬gv
;

1035 
	mdyÇmic_hz
;

1036 
	mcÚfig_hz
;

1039 
	mhz
;

1040 
»disDb
 *
	mdb
;

1041 
diù
 *
	mcommªds
;

1042 
diù
 *
	mÜig_commªds
;

1043 
«Ev’tLoİ
 *
	m–
;

1044 
_Atomic
 
	mÌuşock
;

1045 
	mshutdown_a§p
;

1046 
	maùiv”ehashšg
;

1047 
	maùive_deäag_ruÂšg
;

1048 *
	mpidfe
;

1049 
	m¬ch_b™s
;

1050 
	müÚloİs
;

1051 
	mrunid
[
CONFIG_RUN_ID_SIZE
+1];

1052 
	m£Áš–_mode
;

1053 
size_t
 
	mš™Ÿl_memÜy_u§ge
;

1054 
	m®ways_show_logo
;

1056 
diù
 *
	mmoduË­i
;

1057 
diù
 *
	msh¬ed­i
;

1059 
li¡
 *
	mlßdmoduË_queue
;

1060 
	mmoduË_blocked_pe
[2];

1063 
pid_t
 
	mmoduË_chd_pid
;

1065 
	mpÜt
;

1066 
	ms_pÜt
;

1067 
	mtı_backlog
;

1068 *
	mbšdaddr
[
CONFIG_BINDADDR_MAX
];

1069 
	mbšdaddr_couÁ
;

1070 *
	munixsock‘
;

1071 
mode_t
 
	munixsock‘³rm
;

1072 
	mfd
[
CONFIG_BINDADDR_MAX
];

1073 
	mfd_couÁ
;

1074 
	msfd
[
CONFIG_BINDADDR_MAX
];

1075 
	msfd_couÁ
;

1076 
	msofd
;

1077 
	mcfd
[
CONFIG_BINDADDR_MAX
];

1078 
	mcfd_couÁ
;

1079 
li¡
 *
	mş›Ás
;

1080 
li¡
 *
	mş›Ás_to_şo£
;

1081 
li¡
 *
	mş›Ás_³ndšg_wr™e
;

1082 
li¡
 *
	mş›Ás_³ndšg_»ad
;

1083 
li¡
 *
	m¦aves
, *
	mmÚ™Üs
;

1084 
ş›Á
 *
	mcu¼’t_ş›Á
;

1085 
¿x
 *
	mş›Ás_timeout_bË
;

1086 
	mfixed_time_expœe
;

1087 
¿x
 *
	mş›Ás_šdex
;

1088 
	mş›Ás_·u£d
;

1089 
m¡ime_t
 
	mş›Ás_·u£_’d_time
;

1090 
	mÃ‹¼
[
ANET_ERR_LEN
];

1091 
diù
 *
	mmig¿‹_ÿched_sock‘s
;

1092 
_Atomic
 
ušt64_t
 
	mÃxt_ş›Á_id
;

1093 
	m´Ùeùed_mode
;

1094 
	mgİh”_’abËd
;

1096 
	mio_th»ads_num
;

1097 
	mio_th»ads_do_»ads
;

1100 
	mlßdšg
;

1101 
off_t
 
	mlßdšg_tÙ®_by‹s
;

1102 
off_t
 
	mlßdšg_lßded_by‹s
;

1103 
time_t
 
	mlßdšg_¡¬t_time
;

1104 
off_t
 
	mlßdšg_´oûss_ev’ts_š‹rv®_by‹s
;

1106 
»disCommªd
 *
	md–Commªd
, *
	mmuÉiCommªd
, *
	mÍushCommªd
,

1107 *
	mÍİCommªd
, *
	m½İCommªd
, *
	mzpİmšCommªd
,

1108 *
	mzpİmaxCommªd
, *
	m¤emCommªd
, *
	mexecCommªd
,

1109 *
	mexpœeCommªd
, *
	m³xpœeCommªd
, *
	mxşaimCommªd
,

1110 *
	mxgroupCommªd
, *
	m½İÍushCommªd
;

1112 
time_t
 
	m¡©_¡¬‰ime
;

1113 
	m¡©_numcommªds
;

1114 
	m¡©_numcÚÃùiÚs
;

1115 
	m¡©_expœedkeys
;

1116 
	m¡©_expœed_¡®e_³rc
;

1117 
	m¡©_expœed_time_ÿp_»ached_couÁ
;

1118 
	m¡©_expœe_cyşe_time_u£d
;

1119 
	m¡©_eviùedkeys
;

1120 
	m¡©_key¥aû_h™s
;

1121 
	m¡©_key¥aû_mis£s
;

1122 
	m¡©_aùive_deäag_h™s
;

1123 
	m¡©_aùive_deäag_mis£s
;

1124 
	m¡©_aùive_deäag_key_h™s
;

1125 
	m¡©_aùive_deäag_key_mis£s
;

1126 
	m¡©_aùive_deäag_sÿÂed
;

1127 
size_t
 
	m¡©_³ak_memÜy
;

1128 
	m¡©_fÜk_time
;

1129 
	m¡©_fÜk_¿‹
;

1130 
	m¡©_»jeùed_cÚn
;

1131 
	m¡©_sync_fuÎ
;

1132 
	m¡©_sync_·¹Ÿl_ok
;

1133 
	m¡©_sync_·¹Ÿl_”r
;

1134 
li¡
 *
	m¦owlog
;

1135 
	m¦owlog_’Œy_id
;

1136 
	m¦owlog_log_¦ow”_thª
;

1137 
	m¦owlog_max_Ën
;

1138 
m®loc_¡©s
 
	müÚ_m®loc_¡©s
;

1139 
_Atomic
 
	m¡©_Ãt_šput_by‹s
;

1140 
_Atomic
 
	m¡©_Ãt_ouut_by‹s
;

1141 
size_t
 
	m¡©_rdb_cow_by‹s
;

1142 
size_t
 
	m¡©_aof_cow_by‹s
;

1143 
size_t
 
	m¡©_moduË_cow_by‹s
;

1144 
ušt64_t
 
	m¡©_ş›Ás_ty³_memÜy
[
CLIENT_TYPE_COUNT
];

1145 
	m¡©_uÃx³ùed_”rÜ_»¶›s
;

1149 
	mÏ¡_§m¶e_time
;

1150 
	mÏ¡_§m¶e_couÁ
;

1151 
	m§m¶es
[
STATS_METRIC_SAMPLES
];

1152 
	midx
;

1153 } 
	mš¡_m‘ric
[
STATS_METRIC_COUNT
];

1155 
	mv”bos™y
;

1156 
	mmaxidËtime
;

1157 
	mtık“·live
;

1158 
	maùive_expœe_’abËd
;

1159 
	maùive_expœe_effÜt
;

1160 
	maùive_deäag_’abËd
;

1161 
	mjem®loc_bg_th»ad
;

1162 
size_t
 
	maùive_deäag_ignÜe_by‹s
;

1163 
	maùive_deäag_th»shŞd_low”
;

1164 
	maùive_deäag_th»shŞd_uµ”
;

1165 
	maùive_deäag_cyşe_mš
;

1166 
	maùive_deäag_cyşe_max
;

1167 
	maùive_deäag_max_sÿn_f›lds
;

1168 
_Atomic
 
size_t
 
	mş›Á_max_qu”ybuf_Ën
;

1169 
	mdbnum
;

1170 
	msu³rvi£d
;

1171 
	msu³rvi£d_mode
;

1172 
	md«mÚize
;

1173 
ş›ÁBufãrLim™sCÚfig
 
	mş›Á_obuf_lim™s
[
CLIENT_TYPE_OBUF_COUNT
];

1175 
	maof_’abËd
;

1176 
	maof_¡©e
;

1177 
	maof_fsync
;

1178 *
	maof_f’ame
;

1179 
	maof_no_fsync_Ú_»wr™e
;

1180 
	maof_»wr™e_³rc
;

1181 
off_t
 
	maof_»wr™e_mš_size
;

1182 
off_t
 
	maof_»wr™e_ba£_size
;

1183 
off_t
 
	maof_cu¼’t_size
;

1184 
off_t
 
	maof_fsync_off£t
;

1185 
	maof_æush_¦“p
;

1186 
	maof_»wr™e_scheduËd
;

1187 
pid_t
 
	maof_chd_pid
;

1188 
li¡
 *
	maof_»wr™e_buf_blocks
;

1189 
sds
 
	maof_buf
;

1190 
	maof_fd
;

1191 
	maof_£Ëùed_db
;

1192 
time_t
 
	maof_æush_po¡pÚed_¡¬t
;

1193 
time_t
 
	maof_Ï¡_fsync
;

1194 
time_t
 
	maof_»wr™e_time_Ï¡
;

1195 
time_t
 
	maof_»wr™e_time_¡¬t
;

1196 
	maof_Ï¡bg»wr™e_¡©us
;

1197 
	maof_d–ayed_fsync
;

1198 
	maof_»wr™e_šüem’l_fsync
;

1199 
	mrdb_§ve_šüem’l_fsync
;

1200 
	maof_Ï¡_wr™e_¡©us
;

1201 
	maof_Ï¡_wr™e_”ºo
;

1202 
	maof_lßd_Œunÿ‹d
;

1203 
	maof_u£_rdb_´—mbË
;

1205 
	maof_pe_wr™e_d©a_to_chd
;

1206 
	maof_pe_»ad_d©a_äom_·»Á
;

1207 
	maof_pe_wr™e_ack_to_·»Á
;

1208 
	maof_pe_»ad_ack_äom_chd
;

1209 
	maof_pe_wr™e_ack_to_chd
;

1210 
	maof_pe_»ad_ack_äom_·»Á
;

1211 
	maof_¡İ_£ndšg_diff
;

1213 
sds
 
	maof_chd_diff
;

1215 
	mdœty
;

1216 
	mdœty_befÜe_bg§ve
;

1217 
pid_t
 
	mrdb_chd_pid
;

1218 
§v•¬am
 *
	m§v•¬ams
;

1219 
	m§v•¬am¦’
;

1220 *
	mrdb_f’ame
;

1221 
	mrdb_com´essiÚ
;

1222 
	mrdb_checksum
;

1223 
	mrdb_d–_sync_fes
;

1225 
time_t
 
	mÏ¡§ve
;

1226 
time_t
 
	mÏ¡bg§ve_Œy
;

1227 
time_t
 
	mrdb_§ve_time_Ï¡
;

1228 
time_t
 
	mrdb_§ve_time_¡¬t
;

1229 
	mrdb_bg§ve_scheduËd
;

1230 
	mrdb_chd_ty³
;

1231 
	mÏ¡bg§ve_¡©us
;

1232 
	m¡İ_wr™es_Ú_bg§ve_”r
;

1233 
	mrdb_pe_wr™e
;

1234 
	mrdb_pe_»ad
;

1235 
cÚÃùiÚ
 **
	mrdb_pe_cÚns
;

1236 
	mrdb_pe_numcÚns
;

1237 
	mrdb_pe_numcÚns_wr™šg
;

1238 *
	mrdb_pe_buff
;

1239 
	mrdb_pe_bufæ’
;

1240 
	mrdb_key_§ve_d–ay
;

1242 
	mkey_lßd_d–ay
;

1245 
	mchd_šfo_pe
[2];

1247 
	m´oûss_ty³
;

1248 
size_t
 
	mcow_size
;

1249 
	mmagic
;

1250 } 
	mchd_šfo_d©a
;

1252 
»disOpA¼ay
 
	m®so_´İag©e
;

1254 *
	mlogfe
;

1255 
	msy¦og_’abËd
;

1256 *
	msy¦og_id’t
;

1257 
	msy¦og_çc™y
;

1259 
	m»¶id
[
CONFIG_RUN_ID_SIZE
+1];

1260 
	m»¶id2
[
CONFIG_RUN_ID_SIZE
+1];

1261 
	mma¡”_»¶_off£t
;

1262 
	mma¡”_»¶_m—nšgful_off£t
;

1263 
	m£cÚd_»¶id_off£t
;

1264 
	m¦ave£ldb
;

1265 
	m»¶_pšg_¦ave_³riod
;

1266 *
	m»¶_backlog
;

1267 
	m»¶_backlog_size
;

1268 
	m»¶_backlog_hi¡Ën
;

1269 
	m»¶_backlog_idx
;

1271 
	m»¶_backlog_off
;

1273 
time_t
 
	m»¶_backlog_time_lim™
;

1275 
time_t
 
	m»¶_no_¦aves_sšû
;

1277 
	m»¶_mš_¦aves_to_wr™e
;

1278 
	m»¶_mš_¦aves_max_Ïg
;

1279 
	m»¶_good_¦aves_couÁ
;

1280 
	m»¶_diskËss_sync
;

1281 
	m»¶_diskËss_lßd
;

1283 
	m»¶_diskËss_sync_d–ay
;

1285 *
	mma¡”u£r
;

1286 *
	mma¡”auth
;

1287 *
	mma¡”ho¡
;

1288 
	mma¡”pÜt
;

1289 
	m»¶_timeout
;

1290 
ş›Á
 *
	mma¡”
;

1291 
ş›Á
 *
	mÿched_ma¡”
;

1292 
	m»¶_syncio_timeout
;

1293 
	m»¶_¡©e
;

1294 
off_t
 
	m»¶_Œªsãr_size
;

1295 
off_t
 
	m»¶_Œªsãr_»ad
;

1296 
off_t
 
	m»¶_Œªsãr_Ï¡_fsync_off
;

1297 
cÚÃùiÚ
 *
	m»¶_Œªsãr_s
;

1298 
	m»¶_Œªsãr_fd
;

1299 *
	m»¶_Œªsãr_tmpfe
;

1300 
time_t
 
	m»¶_Œªsãr_Ï¡io
;

1301 
	m»¶_£rve_¡®e_d©a
;

1302 
	m»¶_¦ave_ro
;

1303 
	m»¶_¦ave_ignÜe_maxmemÜy
;

1304 
time_t
 
	m»¶_down_sšû
;

1305 
	m»¶_di§bË_tı_nod–ay
;

1306 
	m¦ave_´iÜ™y
;

1307 
	m¦ave_ªnounû_pÜt
;

1308 *
	m¦ave_ªnounû_
;

1312 
	mma¡”_»¶id
[
CONFIG_RUN_ID_SIZE
+1];

1313 
	mma¡”_š™Ÿl_off£t
;

1314 
	m»¶_¦ave_Ïzy_æush
;

1316 
diù
 *
	m»¶_sütÿche_diù
;

1317 
li¡
 *
	m»¶_sütÿche_fifo
;

1318 
	m»¶_sütÿche_size
;

1320 
li¡
 *
	mş›Ás_wa™šg_acks
;

1321 
	mg‘_ack_äom_¦aves
;

1323 
	mmaxş›Ás
;

1324 
	mmaxmemÜy
;

1325 
	mmaxmemÜy_pŞicy
;

1326 
	mmaxmemÜy_§m¶es
;

1327 
	mlfu_log_çùÜ
;

1328 
	mlfu_deÿy_time
;

1329 
	m´Ùo_max_bulk_Ën
;

1331 
	mblocked_ş›Ás
;

1332 
	mblocked_ş›Ás_by_ty³
[
BLOCKED_NUM
];

1333 
li¡
 *
	munblocked_ş›Ás
;

1334 
li¡
 *
	m»ady_keys
;

1336 
	mŒackšg_ş›Ás
;

1337 
size_t
 
	mŒackšg_bË_max_keys
;

1340 
	msÜt_desc
;

1341 
	msÜt_®pha
;

1342 
	msÜt_by·‰”n
;

1343 
	msÜt_¡Üe
;

1345 
size_t
 
	mhash_max_zli¡_’Œ›s
;

1346 
size_t
 
	mhash_max_zli¡_v®ue
;

1347 
size_t
 
	m£t_max_št£t_’Œ›s
;

1348 
size_t
 
	mz£t_max_zli¡_’Œ›s
;

1349 
size_t
 
	mz£t_max_zli¡_v®ue
;

1350 
size_t
 
	mhÎ_¥¬£_max_by‹s
;

1351 
size_t
 
	m¡»am_node_max_by‹s
;

1352 
	m¡»am_node_max_’Œ›s
;

1354 
	mli¡_max_zli¡_size
;

1355 
	mli¡_com´ess_d•th
;

1357 
_Atomic
 
time_t
 
	munixtime
;

1358 
time_t
 
	mtimezÚe
;

1359 
	mdaylight_aùive
;

1360 
m¡ime_t
 
	mm¡ime
;

1361 
u¡ime_t
 
	mu¡ime
;

1363 
diù
 *
	mpubsub_chªÃls
;

1364 
li¡
 *
	mpubsub_·‰”ns
;

1365 
diù
 *
	mpubsub_·‰”ns_diù
;

1366 
	mnÙify_key¥aû_ev’ts
;

1369 
	mşu¡”_’abËd
;

1370 
m¡ime_t
 
	mşu¡”_node_timeout
;

1371 *
	mşu¡”_cÚfigfe
;

1372 
şu¡”S‹
 *
	mşu¡”
;

1373 
	mşu¡”_mig¿tiÚ_b¬r›r
;

1374 
	mşu¡”_¦ave_v®id™y_çùÜ
;

1375 
	mşu¡”_»quœe_fuÎ_cov”age
;

1377 
	mşu¡”_¦ave_no_çov”
;

1379 *
	mşu¡”_ªnounû_
;

1380 
	mşu¡”_ªnounû_pÜt
;

1381 
	mşu¡”_ªnounû_bus_pÜt
;

1382 
	mşu¡”_moduË_æags
;

1386 
	mşu¡”_®low_»ads_wh’_down
;

1389 
lua_S‹
 *
	mlua
;

1390 
ş›Á
 *
	mlua_ş›Á
;

1391 
ş›Á
 *
	mlua_ÿÎ”
;

1392 * 
	mlua_cur_süt
;

1393 
diù
 *
	mlua_süts
;

1394 
	mlua_süts_mem
;

1395 
m¡ime_t
 
	mlua_time_lim™
;

1396 
m¡ime_t
 
	mlua_time_¡¬t
;

1397 
	mlua_wr™e_dœty
;

1399 
	mlua_¿ndom_dœty
;

1401 
	mlua_»¶iÿ‹_commªds
;

1402 
	mlua_muÉi_em™‹d
;

1403 
	mlua_»¶
;

1404 
	mlua_timedout
;

1406 
	mlua_kl
;

1407 
	mlua_®ways_»¶iÿ‹_commªds
;

1408 
	mlua_oom
;

1410 
	mÏzyä“_Ïzy_eviùiÚ
;

1411 
	mÏzyä“_Ïzy_expœe
;

1412 
	mÏzyä“_Ïzy_£rv”_d–
;

1413 
	mÏzyä“_Ïzy_u£r_d–
;

1415 
	mÏ‹ncy_mÚ™Ü_th»shŞd
;

1416 
diù
 *
	mÏ‹ncy_ev’ts
;

1418 *
	maş_f’ame
;

1419 
	maşlog_max_Ën
;

1420 
sds
 
	m»quœ•ass
;

1424 cÚ¡ *
	mas£¹_çed
;

1425 cÚ¡ *
	mas£¹_fe
;

1426 
	mas£¹_lše
;

1427 
	mbug_»pÜt_¡¬t
;

1428 
	mw©chdog_³riod
;

1430 
size_t
 
	msy¡em_memÜy_size
;

1432 
	ms_şu¡”
;

1433 
	ms_»¶iÿtiÚ
;

1434 
	ms_auth_ş›Ás
;

1435 
»disTLSCÚ‹xtCÚfig
 
	ms_ùx_cÚfig
;

1437 *
	m£rv”_ıuli¡
;

1438 *
	mbio_ıuli¡
;

1439 *
	maof_»wr™e_ıuli¡
;

1440 *
	mbg§ve_ıuli¡
;

1443 
	spubsubP©‹º
 {

1444 
ş›Á
 *
	mş›Á
;

1445 
robj
 *
	m·‰”n
;

1446 } 
	tpubsubP©‹º
;

1448 
	t»disCommªdProc
(
	tş›Á
 *
	tc
);

1449 *
	t»disG‘KeysProc
(
	t»disCommªd
 *
	tcmd
, 
	trobj
 **
	t¬gv
, 
	t¬gc
, *
	tnumkeys
);

1450 
	s»disCommªd
 {

1451 *
	mÇme
;

1452 
»disCommªdProc
 *
	m´oc
;

1453 
	m¬™y
;

1454 *
	msæags
;

1455 
ušt64_t
 
	mæags
;

1458 
»disG‘KeysProc
 *
	mg‘keys_´oc
;

1460 
	mfœ¡key
;

1461 
	mÏ¡key
;

1462 
	mkey¡•
;

1463 
	mmiüo£cÚds
, 
	mÿÎs
;

1464 
	mid
;

1471 
	s»disFunùiÚSym
 {

1472 *
	mÇme
;

1473 
	mpoš‹r
;

1476 
	s_»disSÜtObjeù
 {

1477 
robj
 *
	mobj
;

1479 
	mscÜe
;

1480 
robj
 *
	mcmpobj
;

1481 } 
	mu
;

1482 } 
	t»disSÜtObjeù
;

1484 
	s_»disSÜtO³¿tiÚ
 {

1485 
	mty³
;

1486 
robj
 *
	m·‰”n
;

1487 } 
	t»disSÜtO³¿tiÚ
;

1491 
robj
 *
	msubjeù
;

1492 
	m’codšg
;

1493 
	mdœeùiÚ
;

1494 
quickli¡I‹r
 *
	m™”
;

1495 } 
	tli¡Ty³I‹¿tÜ
;

1499 
li¡Ty³I‹¿tÜ
 *
	mli
;

1500 
quickli¡EÁry
 
	m’Œy
;

1501 } 
	tli¡Ty³EÁry
;

1505 
robj
 *
	msubjeù
;

1506 
	m’codšg
;

1507 
	mii
;

1508 
diùI‹¿tÜ
 *
	mdi
;

1509 } 
	t£tTy³I‹¿tÜ
;

1516 
robj
 *
	msubjeù
;

1517 
	m’codšg
;

1519 *
	måŒ
, *
	mv±r
;

1521 
diùI‹¿tÜ
 *
	mdi
;

1522 
diùEÁry
 *
	mde
;

1523 } 
	thashTy³I‹¿tÜ
;

1525 
	~"¡»am.h
"

1527 
	#OBJ_HASH_KEY
 1

	)

1528 
	#OBJ_HASH_VALUE
 2

	)

1534 
»disS”v”
 
£rv”
;

1535 
sh¬edObjeùsSŒuù
 
sh¬ed
;

1536 
diùTy³
 
objeùKeyPoš‹rV®ueDiùTy³
;

1537 
diùTy³
 
objeùKeyH—pPoš‹rV®ueDiùTy³
;

1538 
diùTy³
 
£tDiùTy³
;

1539 
diùTy³
 
z£tDiùTy³
;

1540 
diùTy³
 
şu¡”NodesDiùTy³
;

1541 
diùTy³
 
şu¡”NodesBÏckLi¡DiùTy³
;

1542 
diùTy³
 
dbDiùTy³
;

1543 
diùTy³
 
shaSütObjeùDiùTy³
;

1544 
R_Z”o
, 
R_PosInf
, 
R_NegInf
, 
R_Nª
;

1545 
diùTy³
 
hashDiùTy³
;

1546 
diùTy³
 
»¶SütCacheDiùTy³
;

1547 
diùTy³
 
key±rDiùTy³
;

1548 
diùTy³
 
moduËsDiùTy³
;

1555 
moduËIn™ModuËsSy¡em
();

1556 
moduËLßd
(cÚ¡ *
·th
, **
¬gv
, 
¬gc
);

1557 
moduËLßdFromQueue
();

1558 *
moduËG‘CommªdKeysVŸAPI
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

1559 
moduËTy³
 *
moduËTy³LookupModuËByID
(
ušt64_t
 
id
);

1560 
moduËTy³NameByID
(*
Çme
, 
ušt64_t
 
moduËid
);

1561 
moduËF»eCÚ‹xt
(
RedisModuËCtx
 *
ùx
);

1562 
unblockCl›ÁFromModuË
(
ş›Á
 *
c
);

1563 
moduËHªdËBlockedCl›Ás
();

1564 
moduËBlockedCl›ÁTimedOut
(
ş›Á
 *
c
);

1565 
moduËBlockedCl›ÁPeR—dabË
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

1566 
size_t
 
moduËCouÁ
();

1567 
moduËAcquœeGIL
();

1568 
moduËR–—£GIL
();

1569 
moduËNÙifyKey¥aûEv’t
(
ty³
, cÚ¡ *
ev’t
, 
robj
 *
key
, 
dbid
);

1570 
moduËC®lCommªdF‹rs
(
ş›Á
 *
c
);

1571 
ModuËFÜkDÚeHªdËr
(
ex™code
, 
bysigÇl
);

1572 
T”mš©eModuËFÜkChd
(
chd_pid
, 
wa™
);

1573 
ssize_t
 
rdbSaveModuËsAux
(
rio
 *
rdb
, 
wh’
);

1574 
moduËAÎD©©y³sHªdËE¼Üs
();

1575 
sds
 
moduËsCŞËùInfo
(sd 
šfo
, cÚ¡ *
£ùiÚ
, 
fÜ_üash_»pÜt
, 
£ùiÚs
);

1576 
moduËFœeS”v”Ev’t
(
ušt64_t
 
eid
, 
subid
, *
d©a
);

1577 
´oûssModuËLßdšgProg»ssEv’t
(
is_aof
);

1578 
moduËTryS”veCl›ÁBlockedOnKey
(
ş›Á
 *
c
, 
robj
 *
key
);

1579 
moduËUnblockCl›Á
(
ş›Á
 *
c
);

1580 
moduËCl›ÁIsBlockedOnKeys
(
ş›Á
 *
c
);

1581 
moduËNÙifyU£rChªged
(
ş›Á
 *
c
);

1584 
u¡ime
();

1585 
m¡ime
();

1586 
g‘RªdomHexCh¬s
(*
p
, 
size_t
 
Ën
);

1587 
g‘RªdomBy‹s
(*
p
, 
size_t
 
Ën
);

1588 
ušt64_t
 
üc64
(ušt64_ˆ
üc
, cÚ¡ *
s
, ušt64_ˆ
l
);

1589 
ex™FromChd
(
»tcode
);

1590 
size_t
 
»disPİcouÁ
(*
s
, 
couÁ
);

1591 
»disS‘ProcT™Ë
(*
t™Ë
);

1592 
»disCommuniÿ‹Sy¡emd
(cÚ¡ *
sd_nÙify_msg
);

1593 
»disS‘CpuAffš™y
(cÚ¡ *
ıuli¡
);

1596 
ş›Á
 *
ü—‹Cl›Á
(
cÚÃùiÚ
 *
cÚn
);

1597 
şo£TimedoutCl›Ás
();

1598 
ä“Cl›Á
(
ş›Á
 *
c
);

1599 
ä“Cl›ÁAsync
(
ş›Á
 *
c
);

1600 
»£tCl›Á
(
ş›Á
 *
c
);

1601 
£ndR•lyToCl›Á
(
cÚÃùiÚ
 *
cÚn
);

1602 *
addR•lyDeã¼edL’
(
ş›Á
 *
c
);

1603 
£tDeã¼edA¼ayL’
(
ş›Á
 *
c
, *
node
, 
Ëngth
);

1604 
£tDeã¼edM­L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
);

1605 
£tDeã¼edS‘L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
);

1606 
£tDeã¼edA‰ribu‹L’
(
ş›Á
 *
c
, *
node
, 
Ëngth
);

1607 
£tDeã¼edPushL’
(
ş›Á
 *
c
, *
node
, 
Ëngth
);

1608 
´oûssIÅutBufãr
(
ş›Á
 *
c
);

1609 
´oûssGİh”Reque¡
(
ş›Á
 *
c
);

1610 
acû±HªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

1611 
acû±TıHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

1612 
acû±TLSHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

1613 
acû±UnixHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
´ivd©a
, 
mask
);

1614 
»adQu”yFromCl›Á
(
cÚÃùiÚ
 *
cÚn
);

1615 
addR•lyNuÎ
(
ş›Á
 *
c
);

1616 
addR•lyNuÎA¼ay
(
ş›Á
 *
c
);

1617 
addR•lyBoŞ
(
ş›Á
 *
c
, 
b
);

1618 
addR•lyV”b©im
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
, cÚ¡ *
ext
);

1619 
addR•lyPrÙo
(
ş›Á
 *
c
, cÚ¡ *
s
, 
size_t
 
Ën
);

1620 
AddR•lyFromCl›Á
(
ş›Á
 *
c
, cl›Á *
¤c
);

1621 
addR•lyBulk
(
ş›Á
 *
c
, 
robj
 *
obj
);

1622 
addR•lyBulkCSŒšg
(
ş›Á
 *
c
, cÚ¡ *
s
);

1623 
addR•lyBulkCBufãr
(
ş›Á
 *
c
, cÚ¡ *
p
, 
size_t
 
Ën
);

1624 
addR•lyBulkLÚgLÚg
(
ş›Á
 *
c
, 
Î
);

1625 
addR•ly
(
ş›Á
 *
c
, 
robj
 *
obj
);

1626 
addR•lySds
(
ş›Á
 *
c
, 
sds
 
s
);

1627 
addR•lyBulkSds
(
ş›Á
 *
c
, 
sds
 
s
);

1628 
addR•lyE¼Ü
(
ş›Á
 *
c
, cÚ¡ *
”r
);

1629 
addR•lyStus
(
ş›Á
 *
c
, cÚ¡ *
¡©us
);

1630 
addR•lyDoubË
(
ş›Á
 *
c
, 
d
);

1631 
addR•lyHumªLÚgDoubË
(
ş›Á
 *
c
, 
d
);

1632 
addR•lyLÚgLÚg
(
ş›Á
 *
c
, 
Î
);

1633 
addR•lyA¼ayL’
(
ş›Á
 *
c
, 
Ëngth
);

1634 
addR•lyM­L’
(
ş›Á
 *
c
, 
Ëngth
);

1635 
addR•lyS‘L’
(
ş›Á
 *
c
, 
Ëngth
);

1636 
addR•lyA‰ribu‹L’
(
ş›Á
 *
c
, 
Ëngth
);

1637 
addR•lyPushL’
(
ş›Á
 *
c
, 
Ëngth
);

1638 
addR•lyH–p
(
ş›Á
 *
c
, cÚ¡ **
h–p
);

1639 
addR•lySubcommªdSyÁaxE¼Ü
(
ş›Á
 *
c
);

1640 
addR•lyLßdedModuËs
(
ş›Á
 *
c
);

1641 
cİyCl›ÁOuutBufãr
(
ş›Á
 *
d¡
, cl›Á *
¤c
);

1642 
size_t
 
sdsZm®locSize
(
sds
 
s
);

1643 
size_t
 
g‘SŒšgObjeùSdsU£dMemÜy
(
robj
 *
o
);

1644 
ä“Cl›ÁR•lyV®ue
(*
o
);

1645 *
dupCl›ÁR•lyV®ue
(*
o
);

1646 
g‘Cl›ÁsMaxBufãrs
(*
lÚge¡_ouut_li¡
,

1647 *
bigge¡_šput_bufãr
);

1648 *
g‘Cl›ÁP“rId
(
ş›Á
 *client);

1649 
sds
 
ÿtCl›ÁInfoSŒšg
(sd 
s
, 
ş›Á
 *client);

1650 
sds
 
g‘AÎCl›ÁsInfoSŒšg
(
ty³
);

1651 
»wr™eCl›ÁCommªdVeùÜ
(
ş›Á
 *
c
, 
¬gc
, ...);

1652 
»wr™eCl›ÁCommªdArgum’t
(
ş›Á
 *
c
, 
i
, 
robj
 *
Ãwv®
);

1653 
»¶aûCl›ÁCommªdVeùÜ
(
ş›Á
 *
c
, 
¬gc
, 
robj
 **
¬gv
);

1654 
g‘Cl›ÁOuutBufãrMemÜyU§ge
(
ş›Á
 *
c
);

1655 
ä“Cl›ÁsInAsyncF»eQueue
();

1656 
asyncClo£Cl›ÁOnOuutBufãrLim™R—ched
(
ş›Á
 *
c
);

1657 
g‘Cl›ÁTy³
(
ş›Á
 *
c
);

1658 
g‘Cl›ÁTy³ByName
(*
Çme
);

1659 *
g‘Cl›ÁTy³Name
(
şass
);

1660 
æushSÏvesOuutBufãrs
();

1661 
discÚÃùSÏves
();

1662 
li¡’ToPÜt
(
pÜt
, *
fds
, *
couÁ
);

1663 
·u£Cl›Ás
(
m¡ime_t
 
du¿tiÚ
);

1664 
ş›ÁsA»Pau£d
();

1665 
´oûssEv’tsWheBlocked
();

1666 
hªdËCl›ÁsW™hP’dšgWr™es
();

1667 
hªdËCl›ÁsW™hP’dšgWr™esUsšgTh»ads
();

1668 
hªdËCl›ÁsW™hP’dšgR—dsUsšgTh»ads
();

1669 
¡İTh»adedIOIfN“ded
();

1670 
ş›ÁHasP’dšgR•l›s
(
ş›Á
 *
c
);

1671 
uÆškCl›Á
(
ş›Á
 *
c
);

1672 
wr™eToCl›Á
(
ş›Á
 *
c
, 
hªdËr_š¡®Ëd
);

1673 
lškCl›Á
(
ş›Á
 *
c
);

1674 
´ÙeùCl›Á
(
ş›Á
 *
c
);

1675 
uÅrÙeùCl›Á
(
ş›Á
 *
c
);

1676 
š™Th»adedIO
();

1677 
ş›Á
 *
lookupCl›ÁByID
(
ušt64_t
 
id
);

1679 #ifdeà
__GNUC__


1680 
	$addR•lyE¼ÜFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...)

1681 
	`__©Œibu‹__
((
	`fÜm©
(
´štf
, 2, 3)));

1682 
	$addR•lyStusFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...)

1683 
	`__©Œibu‹__
((
	`fÜm©
(
´štf
, 2, 3)));

1685 
	`addR•lyE¼ÜFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...);

1686 
	`addR•lyStusFÜm©
(
ş›Á
 *
c
, cÚ¡ *
fmt
, ...);

1690 
	`’abËT¿ckšg
(
ş›Á
 *
c
, 
ušt64_t
 
»dœeù_to
, ušt64_ˆ
İtiÚs
, 
robj
 **
´efix
, 
size_t
 
num´efix
);

1691 
	`di§bËT¿ckšg
(
ş›Á
 *
c
);

1692 
	`ŒackšgRememb”Keys
(
ş›Á
 *
c
);

1693 
	`ŒackšgInv®id©eKey
(
ş›Á
 *
c
, 
robj
 *
keyobj
);

1694 
	`ŒackšgInv®id©eKeysOnFlush
(
dbid
);

1695 
	`ŒackšgLim™U£dSlÙs
();

1696 
ušt64_t
 
	`ŒackšgG‘TÙ®I‹ms
();

1697 
ušt64_t
 
	`ŒackšgG‘TÙ®Keys
();

1698 
ušt64_t
 
	`ŒackšgG‘TÙ®P»fixes
();

1699 
	`ŒackšgBrßdÿ¡Inv®id©iÚMes§ges
();

1702 
	`li¡Ty³TryCÚv”siÚ
(
robj
 *
subjeù
,„obj *
v®ue
);

1703 
	`li¡Ty³Push
(
robj
 *
subjeù
,„obj *
v®ue
, 
wh”e
);

1704 
robj
 *
	`li¡Ty³Pİ
Ôobj *
subjeù
, 
wh”e
);

1705 
	`li¡Ty³L’gth
(cÚ¡ 
robj
 *
subjeù
);

1706 
li¡Ty³I‹¿tÜ
 *
	`li¡Ty³In™I‹¿tÜ
(
robj
 *
subjeù
, 
šdex
, 
dœeùiÚ
);

1707 
	`li¡Ty³R–—£I‹¿tÜ
(
li¡Ty³I‹¿tÜ
 *
li
);

1708 
	`li¡Ty³Next
(
li¡Ty³I‹¿tÜ
 *
li
, 
li¡Ty³EÁry
 *
’Œy
);

1709 
robj
 *
	`li¡Ty³G‘
(
li¡Ty³EÁry
 *
’Œy
);

1710 
	`li¡Ty³In£¹
(
li¡Ty³EÁry
 *
’Œy
, 
robj
 *
v®ue
, 
wh”e
);

1711 
	`li¡Ty³Equ®
(
li¡Ty³EÁry
 *
’Œy
, 
robj
 *
o
);

1712 
	`li¡Ty³D–‘e
(
li¡Ty³I‹¿tÜ
 *
™”
, 
li¡Ty³EÁry
 *
’Œy
);

1713 
	`li¡Ty³CÚv”t
(
robj
 *
subjeù
, 
’c
);

1714 
	`unblockCl›ÁWa™šgD©a
(
ş›Á
 *
c
);

1715 
	`pİG’”icCommªd
(
ş›Á
 *
c
, 
wh”e
);

1718 
	`unw©chAÎKeys
(
ş›Á
 *
c
);

1719 
	`š™Cl›ÁMuÉiS‹
(
ş›Á
 *
c
);

1720 
	`ä“Cl›ÁMuÉiS‹
(
ş›Á
 *
c
);

1721 
	`queueMuÉiCommªd
(
ş›Á
 *
c
);

1722 
	`touchW©chedKey
(
»disDb
 *
db
, 
robj
 *
key
);

1723 
	`touchW©chedKeysOnFlush
(
dbid
);

1724 
	`disÿrdT¿n§ùiÚ
(
ş›Á
 *
c
);

1725 
	`æagT¿n§ùiÚ
(
ş›Á
 *
c
);

1726 
	`execCommªdPrİag©eMuÉi
(
ş›Á
 *
c
);

1727 
	`execCommªdPrİag©eExec
(
ş›Á
 *
c
);

1730 
	`deüRefCouÁ
(
robj
 *
o
);

1731 
	`deüRefCouÁVoid
(*
o
);

1732 
	`šüRefCouÁ
(
robj
 *
o
);

1733 
robj
 *
	`makeObjeùSh¬ed
Ôobj *
o
);

1734 
robj
 *
	`»£tRefCouÁ
Ôobj *
obj
);

1735 
	`ä“SŒšgObjeù
(
robj
 *
o
);

1736 
	`ä“Li¡Objeù
(
robj
 *
o
);

1737 
	`ä“S‘Objeù
(
robj
 *
o
);

1738 
	`ä“Z£tObjeù
(
robj
 *
o
);

1739 
	`ä“HashObjeù
(
robj
 *
o
);

1740 
robj
 *
	`ü—‹Objeù
(
ty³
, *
±r
);

1741 
robj
 *
	`ü—‹SŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
);

1742 
robj
 *
	`ü—‹RawSŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
);

1743 
robj
 *
	`ü—‹EmbeddedSŒšgObjeù
(cÚ¡ *
±r
, 
size_t
 
Ën
);

1744 
robj
 *
	`dupSŒšgObjeù
(cÚ¡„obj *
o
);

1745 
	`isSdsR•»£ÁabËAsLÚgLÚg
(
sds
 
s
, *
Îv®
);

1746 
	`isObjeùR•»£ÁabËAsLÚgLÚg
(
robj
 *
o
, *
ÎÚgv®
);

1747 
robj
 *
	`ŒyObjeùEncodšg
Ôobj *
o
);

1748 
robj
 *
	`g‘DecodedObjeù
Ôobj *
o
);

1749 
size_t
 
	`¡ršgObjeùL’
(
robj
 *
o
);

1750 
robj
 *
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
v®ue
);

1751 
robj
 *
	`ü—‹SŒšgObjeùFromLÚgLÚgFÜV®ue
(
v®ue
);

1752 
robj
 *
	`ü—‹SŒšgObjeùFromLÚgDoubË
(
v®ue
, 
humªä›ndly
);

1753 
robj
 *
	`ü—‹Quickli¡Objeù
();

1754 
robj
 *
	`ü—‹Zli¡Objeù
();

1755 
robj
 *
	`ü—‹S‘Objeù
();

1756 
robj
 *
	`ü—‹IÁ£tObjeù
();

1757 
robj
 *
	`ü—‹HashObjeù
();

1758 
robj
 *
	`ü—‹Z£tObjeù
();

1759 
robj
 *
	`ü—‹Z£tZli¡Objeù
();

1760 
robj
 *
	`ü—‹SŒ—mObjeù
();

1761 
robj
 *
	`ü—‹ModuËObjeù
(
moduËTy³
 *
mt
, *
v®ue
);

1762 
	`g‘LÚgFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
);

1763 
	`checkTy³
(
ş›Á
 *
c
, 
robj
 *
o
, 
ty³
);

1764 
	`g‘LÚgLÚgFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
);

1765 
	`g‘DoubËFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
);

1766 
	`g‘DoubËFromObjeù
(cÚ¡ 
robj
 *
o
, *
rg‘
);

1767 
	`g‘LÚgLÚgFromObjeù
(
robj
 *
o
, *
rg‘
);

1768 
	`g‘LÚgDoubËFromObjeù
(
robj
 *
o
, *
rg‘
);

1769 
	`g‘LÚgDoubËFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
rg‘
, cÚ¡ *
msg
);

1770 *
	`¡rEncodšg
(
’codšg
);

1771 
	`com·»SŒšgObjeùs
(
robj
 *
a
,„obj *
b
);

1772 
	`cŞÏ‹SŒšgObjeùs
(
robj
 *
a
,„obj *
b
);

1773 
	`equ®SŒšgObjeùs
(
robj
 *
a
,„obj *
b
);

1774 
	`e¡im©eObjeùIdËTime
(
robj
 *
o
);

1775 
	`ŒimSŒšgObjeùIfN“ded
(
robj
 *
o
);

1776 
	#sdsEncodedObjeù
(
obj±r
è(obj±r->
’codšg
 =ğ
OBJ_ENCODING_RAW
 || obj±r->’codšg =ğ
OBJ_ENCODING_EMBSTR
)

	)

1779 
ssize_t
 
	`syncWr™e
(
fd
, *
±r
, ssize_ˆ
size
, 
timeout
);

1780 
ssize_t
 
	`syncR—d
(
fd
, *
±r
, ssize_ˆ
size
, 
timeout
);

1781 
ssize_t
 
	`syncR—dLše
(
fd
, *
±r
, ssize_ˆ
size
, 
timeout
);

1784 
	`»¶iÿtiÚF“dSÏves
(
li¡
 *
¦aves
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
);

1785 
	`»¶iÿtiÚF“dSÏvesFromMa¡”SŒ—m
(
li¡
 *
¦aves
, *
buf
, 
size_t
 
buæ’
);

1786 
	`»¶iÿtiÚF“dMÚ™Üs
(
ş›Á
 *
c
, 
li¡
 *
mÚ™Üs
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
);

1787 
	`upd©eSÏvesWa™šgBg§ve
(
bg§v“¼
, 
ty³
);

1788 
	`»¶iÿtiÚCrÚ
();

1789 
	`»¶iÿtiÚHªdËMa¡”DiscÚÃùiÚ
();

1790 
	`»¶iÿtiÚCacheMa¡”
(
ş›Á
 *
c
);

1791 
	`»sizeR•liÿtiÚBacklog
(
Ãwsize
);

1792 
	`»¶iÿtiÚS‘Ma¡”
(*

, 
pÜt
);

1793 
	`»¶iÿtiÚUn£tMa¡”
();

1794 
	`»äeshGoodSÏvesCouÁ
();

1795 
	`»¶iÿtiÚSütCacheIn™
();

1796 
	`»¶iÿtiÚSütCacheFlush
();

1797 
	`»¶iÿtiÚSütCacheAdd
(
sds
 
sha1
);

1798 
	`»¶iÿtiÚSütCacheExi¡s
(
sds
 
sha1
);

1799 
	`´oûssCl›ÁsWa™šgR•liÿs
();

1800 
	`unblockCl›ÁWa™šgR•liÿs
(
ş›Á
 *
c
);

1801 
	`»¶iÿtiÚCouÁAcksByOff£t
(
off£t
);

1802 
	`»¶iÿtiÚS’dNewlšeToMa¡”
();

1803 
	`»¶iÿtiÚG‘SÏveOff£t
();

1804 *
	`»¶iÿtiÚG‘SÏveName
(
ş›Á
 *
c
);

1805 
	`g‘PsyncIn™ŸlOff£t
();

1806 
	`»¶iÿtiÚS‘upSÏveFÜFuÎResync
(
ş›Á
 *
¦ave
, 
off£t
);

1807 
	`chªgeR•liÿtiÚId
();

1808 
	`ş—rR•liÿtiÚId2
();

1809 
	`chİR•liÿtiÚBacklog
();

1810 
	`»¶iÿtiÚCacheMa¡”UsšgMy£lf
();

1811 
	`ãedR•liÿtiÚBacklog
(*
±r
, 
size_t
 
Ën
);

1812 
	`rdbPeR—dHªdËr
(
«Ev’tLoİ
 *
ev’tLoİ
, 
fd
, *
ş›ÁD©a
, 
mask
);

1813 
	`rdbPeWr™eHªdËrCÚnRemoved
(
cÚÃùiÚ
 *
cÚn
);

1816 
	`¡¬tLßdšgFe
(
FILE
* 
å
, * 
f’ame
, 
rdbæags
);

1817 
	`¡¬tLßdšg
(
size_t
 
size
, 
rdbæags
);

1818 
	`lßdšgProg»ss
(
off_t
 
pos
);

1819 
	`¡İLßdšg
(
sucûss
);

1820 
	`¡¬tSavšg
(
rdbæags
);

1821 
	`¡İSavšg
(
sucûss
);

1822 
	`®lP”si¡’ûDi§bËd
();

1824 
	#DISK_ERROR_TYPE_AOF
 1

	)

1825 
	#DISK_ERROR_TYPE_RDB
 2

	)

1826 
	#DISK_ERROR_TYPE_NONE
 0

	)

1827 
	`wr™eCommªdsD’›dByDiskE¼Ü
();

1830 
	~"rdb.h
"

1831 
	`klRDBChd
();

1834 
	`æushAµ’dOÆyFe
(
fÜû
);

1835 
	`ãedAµ’dOÆyFe
(
»disCommªd
 *
cmd
, 
diùid
, 
robj
 **
¬gv
, 
¬gc
);

1836 
	`aofRemoveTempFe
(
pid_t
 
chdpid
);

1837 
	`»wr™eAµ’dOÆyFeBackground
();

1838 
	`lßdAµ’dOÆyFe
(*
f’ame
);

1839 
	`¡İAµ’dOÆy
();

1840 
	`¡¬tAµ’dOÆy
();

1841 
	`backgroundRewr™eDÚeHªdËr
(
ex™code
, 
bysigÇl
);

1842 
	`aofRewr™eBufãrRe£t
();

1843 
	`aofRewr™eBufãrSize
();

1844 
ssize_t
 
	`aofR—dDiffFromP¬’t
();

1845 
	`klAµ’dOÆyChd
();

1846 
	`»¡¬tAOFAá”SYNC
();

1849 
	`İ’ChdInfoPe
();

1850 
	`şo£ChdInfoPe
();

1851 
	`£ndChdInfo
(
´oûss_ty³
);

1852 
	`»ûiveChdInfo
();

1855 
	`»disFÜk
();

1856 
	`hasAùiveChdProûss
();

1857 
	`£ndChdCOWInfo
(
±y³
, *
²ame
);

1860 
¿x
 *
U£rs
;

1861 
u£r
 *
DeçuÉU£r
;

1862 
	`ACLIn™
();

1864 
	#ACL_OK
 0

	)

1865 
	#ACL_DENIED_CMD
 1

	)

1866 
	#ACL_DENIED_KEY
 2

	)

1867 
	#ACL_DENIED_AUTH
 3

	)

1868 
	`ACLCheckU£rC»d’tŸls
(
robj
 *
u£ºame
,„obj *
·sswÜd
);

1869 
	`ACLAuth’tiÿ‹U£r
(
ş›Á
 *
c
, 
robj
 *
u£ºame
,„obj *
·sswÜd
);

1870 
	`ACLG‘CommªdID
(cÚ¡ *
cmdÇme
);

1871 
u£r
 *
	`ACLG‘U£rByName
(cÚ¡ *
Çme
, 
size_t
 
Çm–’
);

1872 
	`ACLCheckCommªdP”m
(
ş›Á
 *
c
, *
keyidx±r
);

1873 
	`ACLS‘U£r
(
u£r
 *
u
, cÚ¡ *
İ
, 
ssize_t
 
İËn
);

1874 
sds
 
	`ACLDeçuÉU£rFœ¡PasswÜd
();

1875 
ušt64_t
 
	`ACLG‘CommªdC©egÜyFÏgByName
(cÚ¡ *
Çme
);

1876 
	`ACLAµ’dU£rFÜLßdšg
(
sds
 *
¬gv
, 
¬gc
, *
¬gc_”r
);

1877 *
	`ACLS‘U£rSŒšgE¼Ü
();

1878 
	`ACLLßdCÚfigu»dU£rs
();

1879 
sds
 
	`ACLDesüibeU£r
(
u£r
 *
u
);

1880 
	`ACLLßdU£rsAtS¹up
();

1881 
	`addR•lyCommªdC©egÜ›s
(
ş›Á
 *
c
, 
»disCommªd
 *
cmd
);

1882 
u£r
 *
	`ACLC»©eUÆškedU£r
();

1883 
	`ACLF»eU£rAndKlCl›Ás
(
u£r
 *
u
);

1884 
	`addACLLogEÁry
(
ş›Á
 *
c
, 
»asÚ
, 
keypos
, 
sds
 
u£ºame
);

1889 
	#ZADD_NONE
 0

	)

1890 
	#ZADD_INCR
 (1<<0è

	)

1891 
	#ZADD_NX
 (1<<1è

	)

1892 
	#ZADD_XX
 (1<<2è

	)

1895 
	#ZADD_NOP
 (1<<3è

	)

1896 
	#ZADD_NAN
 (1<<4è

	)

1897 
	#ZADD_ADDED
 (1<<5è

	)

1898 
	#ZADD_UPDATED
 (1<<6è

	)

1901 
	#ZADD_CH
 (1<<16è

	)

1905 
mš
, 
max
;

1906 
mšex
, 
maxex
;

1907 } 
	tz¿nge¥ec
;

1911 
sds
 
mš
, 
max
;

1912 
mšex
, 
maxex
;

1913 } 
	tzËx¿nge¥ec
;

1915 
zskli¡
 *
	`z¦C»©e
();

1916 
	`z¦F»e
(
zskli¡
 *
z¦
);

1917 
zskli¡Node
 *
	`z¦In£¹
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
–e
);

1918 *
	`zzlIn£¹
(*
zl
, 
sds
 
–e
, 
scÜe
);

1919 
	`z¦D–‘e
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
–e
, 
zskli¡Node
 **
node
);

1920 
zskli¡Node
 *
	`z¦Fœ¡InRªge
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
);

1921 
zskli¡Node
 *
	`z¦La¡InRªge
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
);

1922 
	`zzlG‘ScÜe
(*
¥Œ
);

1923 
	`zzlNext
(*
zl
, **
•Œ
, **
¥Œ
);

1924 
	`zzlP»v
(*
zl
, **
•Œ
, **
¥Œ
);

1925 *
	`zzlFœ¡InRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
);

1926 *
	`zzlLa¡InRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
);

1927 
	`z£tL’gth
(cÚ¡ 
robj
 *
zobj
);

1928 
	`z£tCÚv”t
(
robj
 *
zobj
, 
’codšg
);

1929 
	`z£tCÚv”tToZli¡IfN“ded
(
robj
 *
zobj
, 
size_t
 
max––’
);

1930 
	`z£tScÜe
(
robj
 *
zobj
, 
sds
 
memb”
, *
scÜe
);

1931 
	`z¦G‘Rªk
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
o
);

1932 
	`z£tAdd
(
robj
 *
zobj
, 
scÜe
, 
sds
 
–e
, *
æags
, *
ÃwscÜe
);

1933 
	`z£tRªk
(
robj
 *
zobj
, 
sds
 
–e
, 
»v”£
);

1934 
	`z£tD–
(
robj
 *
zobj
, 
sds
 
–e
);

1935 
	`g’”icZpİCommªd
(
ş›Á
 *
c
, 
robj
 **
keyv
, 
keyc
, 
wh”e
, 
em™key
,„obj *
couÁ¬g
);

1936 
sds
 
	`zli¡G‘Objeù
(*
¥Œ
);

1937 
	`z¦V®ueG‹Mš
(
v®ue
, 
z¿nge¥ec
 *
¥ec
);

1938 
	`z¦V®ueL‹Max
(
v®ue
, 
z¿nge¥ec
 *
¥ec
);

1939 
	`z¦F»eLexRªge
(
zËx¿nge¥ec
 *
¥ec
);

1940 
	`z¦P¬£LexRªge
(
robj
 *
mš
,„obj *
max
, 
zËx¿nge¥ec
 *
¥ec
);

1941 *
	`zzlFœ¡InLexRªge
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
);

1942 *
	`zzlLa¡InLexRªge
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
);

1943 
zskli¡Node
 *
	`z¦Fœ¡InLexRªge
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
);

1944 
zskli¡Node
 *
	`z¦La¡InLexRªge
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
);

1945 
	`zzlLexV®ueG‹Mš
(*
p
, 
zËx¿nge¥ec
 *
¥ec
);

1946 
	`zzlLexV®ueL‹Max
(*
p
, 
zËx¿nge¥ec
 *
¥ec
);

1947 
	`z¦LexV®ueG‹Mš
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
);

1948 
	`z¦LexV®ueL‹Max
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
);

1951 
	`g‘MaxmemÜyS‹
(
size_t
 *
tÙ®
, size_ˆ*
logiÿl
, size_ˆ*
toä“
, *
Ëv–
);

1952 
size_t
 
	`ä“MemÜyG‘NÙCouÁedMemÜy
();

1953 
	`ä“MemÜyIfN“ded
();

1954 
	`ä“MemÜyIfN“dedAndSaã
();

1955 
	`´oûssCommªd
(
ş›Á
 *
c
);

1956 
	`£tupSigÇlHªdËrs
();

1957 
»disCommªd
 *
	`lookupCommªd
(
sds
 
Çme
);

1958 
»disCommªd
 *
	`lookupCommªdByCSŒšg
(*
s
);

1959 
»disCommªd
 *
	`lookupCommªdOrOrigš®
(
sds
 
Çme
);

1960 
	`ÿÎ
(
ş›Á
 *
c
, 
æags
);

1961 
	`´İag©e
(
»disCommªd
 *
cmd
, 
dbid
, 
robj
 **
¬gv
, 
¬gc
, 
æags
);

1962 
	`®soPrİag©e
(
»disCommªd
 *
cmd
, 
dbid
, 
robj
 **
¬gv
, 
¬gc
, 
rg‘
);

1963 
	`»disOpA¼ayIn™
(
»disOpA¼ay
 *
ß
);

1964 
	`»disOpA¼ayF»e
(
»disOpA¼ay
 *
ß
);

1965 
	`fÜûCommªdPrİag©iÚ
(
ş›Á
 *
c
, 
æags
);

1966 
	`´ev’tCommªdPrİag©iÚ
(
ş›Á
 *
c
);

1967 
	`´ev’tCommªdAOF
(
ş›Á
 *
c
);

1968 
	`´ev’tCommªdR•liÿtiÚ
(
ş›Á
 *
c
);

1969 
	`´•¬eFÜShutdown
();

1970 #ifdeà
__GNUC__


1971 
	$£rv”Log
(
Ëv–
, cÚ¡ *
fmt
, ...)

1972 
	`__©Œibu‹__
((
	`fÜm©
(
´štf
, 2, 3)));

1974 
	`£rv”Log
(
Ëv–
, cÚ¡ *
fmt
, ...);

1976 
	`£rv”LogRaw
(
Ëv–
, cÚ¡ *
msg
);

1977 
	`£rv”LogFromHªdËr
(
Ëv–
, cÚ¡ *
msg
);

1978 
	`u§ge
();

1979 
	`upd©eDiùResizePŞicy
();

1980 
	`htN“dsResize
(
diù
 *dict);

1981 
	`pİuÏ‹CommªdTabË
();

1982 
	`»£tCommªdTabËSts
();

1983 
	`adju¡O³nFesLim™
();

1984 
	`şo£Li¡’šgSock‘s
(
uÆšk_unix_sock‘
);

1985 
	`upd©eCachedTime
(
upd©e_daylight_šfo
);

1986 
	`»£tS”v”Sts
();

1987 
	`aùiveDeäagCyşe
();

1988 
	`g‘LRUClock
();

1989 
	`LRU_CLOCK
();

1990 cÚ¡ *
	`eviùPŞicyToSŒšg
();

1991 
»disMemOv”h—d
 *
	`g‘MemÜyOv”h—dD©a
();

1992 
	`ä“MemÜyOv”h—dD©a
(
»disMemOv”h—d
 *
mh
);

1993 
	`checkChd»nDÚe
();

1995 
	#RESTART_SERVER_NONE
 0

	)

1996 
	#RESTART_SERVER_GRACEFULLY
 (1<<0è

	)

1997 
	#RESTART_SERVER_CONFIG_REWRITE
 (1<<1è

	)

1998 
	`»¡¬tS”v”
(
æags
, 
m¡ime_t
 
d–ay
);

2001 
robj
 *
	`£tTy³C»©e
(
sds
 
v®ue
);

2002 
	`£tTy³Add
(
robj
 *
subjeù
, 
sds
 
v®ue
);

2003 
	`£tTy³Remove
(
robj
 *
subjeù
, 
sds
 
v®ue
);

2004 
	`£tTy³IsMemb”
(
robj
 *
subjeù
, 
sds
 
v®ue
);

2005 
£tTy³I‹¿tÜ
 *
	`£tTy³In™I‹¿tÜ
(
robj
 *
subjeù
);

2006 
	`£tTy³R–—£I‹¿tÜ
(
£tTy³I‹¿tÜ
 *
si
);

2007 
	`£tTy³Next
(
£tTy³I‹¿tÜ
 *
si
, 
sds
 *
sd£Ë
, 
št64_t
 *
Î–e
);

2008 
sds
 
	`£tTy³NextObjeù
(
£tTy³I‹¿tÜ
 *
si
);

2009 
	`£tTy³RªdomEËm’t
(
robj
 *
£tobj
, 
sds
 *
sd£Ë
, 
št64_t
 *
Î–e
);

2010 
	`£tTy³RªdomEËm’ts
(
robj
 *
£t
, 
couÁ
,„obj *
aux_£t
);

2011 
	`£tTy³Size
(cÚ¡ 
robj
 *
subjeù
);

2012 
	`£tTy³CÚv”t
(
robj
 *
subjeù
, 
’c
);

2015 
	#HASH_SET_TAKE_FIELD
 (1<<0)

	)

2016 
	#HASH_SET_TAKE_VALUE
 (1<<1)

	)

2017 
	#HASH_SET_COPY
 0

	)

2019 
	`hashTy³CÚv”t
(
robj
 *
o
, 
’c
);

2020 
	`hashTy³TryCÚv”siÚ
(
robj
 *
subjeù
,„obj **
¬gv
, 
¡¬t
, 
’d
);

2021 
	`hashTy³Exi¡s
(
robj
 *
o
, 
sds
 
key
);

2022 
	`hashTy³D–‘e
(
robj
 *
o
, 
sds
 
key
);

2023 
	`hashTy³L’gth
(cÚ¡ 
robj
 *
o
);

2024 
hashTy³I‹¿tÜ
 *
	`hashTy³In™I‹¿tÜ
(
robj
 *
subjeù
);

2025 
	`hashTy³R–—£I‹¿tÜ
(
hashTy³I‹¿tÜ
 *
hi
);

2026 
	`hashTy³Next
(
hashTy³I‹¿tÜ
 *
hi
);

2027 
	`hashTy³Cu¼’tFromZli¡
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
,

2028 **
v¡r
,

2029 *
vËn
,

2030 *
vÎ
);

2031 
sds
 
	`hashTy³Cu¼’tFromHashTabË
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
);

2032 
	`hashTy³Cu¼’tObjeù
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
, **
v¡r
, *
vËn
, *
vÎ
);

2033 
sds
 
	`hashTy³Cu¼’tObjeùNewSds
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
);

2034 
robj
 *
	`hashTy³LookupWr™eOrC»©e
(
ş›Á
 *
c
,„obj *
key
);

2035 
robj
 *
	`hashTy³G‘V®ueObjeù
Ôobj *
o
, 
sds
 
f›ld
);

2036 
	`hashTy³S‘
(
robj
 *
o
, 
sds
 
f›ld
, sd 
v®ue
, 
æags
);

2039 
	`pubsubUnsubsüibeAÎChªÃls
(
ş›Á
 *
c
, 
nÙify
);

2040 
	`pubsubUnsubsüibeAÎP©‹ºs
(
ş›Á
 *
c
, 
nÙify
);

2041 
	`ä“PubsubP©‹º
(*
p
);

2042 
	`li¡M©chPubsubP©‹º
(*
a
, *
b
);

2043 
	`pubsubPublishMes§ge
(
robj
 *
chªÃl
,„obj *
mes§ge
);

2044 
	`addR•lyPubsubMes§ge
(
ş›Á
 *
c
, 
robj
 *
chªÃl
,„obj *
msg
);

2047 
	`nÙifyKey¥aûEv’t
(
ty³
, *
ev’t
, 
robj
 *
key
, 
dbid
);

2048 
	`key¥aûEv’tsSŒšgToFÏgs
(*
şas£s
);

2049 
sds
 
	`key¥aûEv’tsFÏgsToSŒšg
(
æags
);

2052 
	`lßdS”v”CÚfig
(*
f’ame
, *
İtiÚs
);

2053 
	`­³ndS”v”SaveP¬ams
(
time_t
 
£cÚds
, 
chªges
);

2054 
	`»£tS”v”SaveP¬ams
();

2055 
»wr™eCÚfigS‹
;

2056 
	`»wr™eCÚfigRewr™eLše
(
»wr™eCÚfigS‹
 *
¡©e
, cÚ¡ *
İtiÚ
, 
sds
 
lše
, 
fÜû
);

2057 
	`»wr™eCÚfig
(*
·th
);

2058 
	`š™CÚfigV®ues
();

2061 
	`»moveExpœe
(
»disDb
 *
db
, 
robj
 *
key
);

2062 
	`´İag©eExpœe
(
»disDb
 *
db
, 
robj
 *
key
, 
Ïzy
);

2063 
	`expœeIfN“ded
(
»disDb
 *
db
, 
robj
 *
key
);

2064 
	`g‘Expœe
(
»disDb
 *
db
, 
robj
 *
key
);

2065 
	`£tExpœe
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
, 
wh’
);

2066 
robj
 *
	`lookupKey
(
»disDb
 *
db
,„obj *
key
, 
æags
);

2067 
robj
 *
	`lookupKeyR—d
(
»disDb
 *
db
,„obj *
key
);

2068 
robj
 *
	`lookupKeyWr™e
(
»disDb
 *
db
,„obj *
key
);

2069 
robj
 *
	`lookupKeyR—dOrR•ly
(
ş›Á
 *
c
,„obj *
key
,„obj *
»¶y
);

2070 
robj
 *
	`lookupKeyWr™eOrR•ly
(
ş›Á
 *
c
,„obj *
key
,„obj *
»¶y
);

2071 
robj
 *
	`lookupKeyR—dW™hFÏgs
(
»disDb
 *
db
,„obj *
key
, 
æags
);

2072 
robj
 *
	`lookupKeyWr™eW™hFÏgs
(
»disDb
 *
db
,„obj *
key
, 
æags
);

2073 
robj
 *
	`objeùCommªdLookup
(
ş›Á
 *
c
,„obj *
key
);

2074 
robj
 *
	`objeùCommªdLookupOrR•ly
(
ş›Á
 *
c
,„obj *
key
,„obj *
»¶y
);

2075 
	`objeùS‘LRUOrLFU
(
robj
 *
v®
, 
lfu_äeq
, 
Ìu_idË
,

2076 
Ìu_şock
, 
Ìu_muÉl›r
);

2077 
	#LOOKUP_NONE
 0

	)

2078 
	#LOOKUP_NOTOUCH
 (1<<0)

	)

2079 
	`dbAdd
(
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
);

2080 
	`dbAddRDBLßd
(
»disDb
 *
db
, 
sds
 
key
, 
robj
 *
v®
);

2081 
	`dbOv”wr™e
(
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
);

2082 
	`g’”icS‘Key
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
, 
k“±
, 
sigÇl
);

2083 
	`£tKey
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
,„obj *
v®
);

2084 
	`dbExi¡s
(
»disDb
 *
db
, 
robj
 *
key
);

2085 
robj
 *
	`dbRªdomKey
(
»disDb
 *
db
);

2086 
	`dbSyncD–‘e
(
»disDb
 *
db
, 
robj
 *
key
);

2087 
	`dbD–‘e
(
»disDb
 *
db
, 
robj
 *
key
);

2088 
robj
 *
	`dbUnsh¬eSŒšgV®ue
(
»disDb
 *
db
,„obj *
key
,„obj *
o
);

2090 
	#EMPTYDB_NO_FLAGS
 0

	)

2091 
	#EMPTYDB_ASYNC
 (1<<0è

	)

2092 
	#EMPTYDB_BACKUP
 (1<<2è

	)

2093 
	`em±yDb
(
dbnum
, 
æags
, (
ÿÎback
)(*));

2094 
	`em±yDbG’”ic
(
»disDb
 *
db¬¿y
, 
dbnum
, 
æags
, (
ÿÎback
)(*));

2095 
	`æushAÎD©aAndRe£tRDB
(
æags
);

2096 
	`dbTÙ®S”v”KeyCouÁ
();

2098 
	`£ËùDb
(
ş›Á
 *
c
, 
id
);

2099 
	`sigÇlModif›dKey
(
ş›Á
 *
c
, 
»disDb
 *
db
, 
robj
 *
key
);

2100 
	`sigÇlFlushedDb
(
dbid
);

2101 
	`g‘KeysInSlÙ
(
hash¦Ù
, 
robj
 **
keys
, 
couÁ
);

2102 
	`couÁKeysInSlÙ
(
hash¦Ù
);

2103 
	`d–KeysInSlÙ
(
hash¦Ù
);

2104 
	`v”ifyClu¡”CÚfigW™hD©a
();

2105 
	`sÿnG’”icCommªd
(
ş›Á
 *
c
, 
robj
 *
o
, 
cursÜ
);

2106 
	`·r£SÿnCursÜOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, *
cursÜ
);

2107 
	`¦ÙToKeyAdd
(
sds
 
key
);

2108 
	`¦ÙToKeyD–
(
sds
 
key
);

2109 
	`¦ÙToKeyFlush
();

2110 
	`dbAsyncD–‘e
(
»disDb
 *
db
, 
robj
 *
key
);

2111 
	`em±yDbAsync
(
»disDb
 *
db
);

2112 
	`¦ÙToKeyFlushAsync
();

2113 
size_t
 
	`Ïzyä“G‘P’dšgObjeùsCouÁ
();

2114 
	`ä“ObjAsync
(
robj
 *
o
);

2117 *
	`g‘KeysFromCommªd
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2118 
	`g‘KeysF»eResuÉ
(*
»suÉ
);

2119 *
	`zuniÚIÁ”G‘Keys
(
»disCommªd
 *
cmd
,
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2120 *
	`ev®G‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2121 *
	`sÜtG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2122 *
	`mig¿‹G‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2123 *
	`geÜadiusG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2124 *
	`x»adG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2125 *
	`memÜyG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2126 *
	`lcsG‘Keys
(
»disCommªd
 *
cmd
, 
robj
 **
¬gv
, 
¬gc
, *
numkeys
);

2129 
	`şu¡”In™
();

2130 
	`üc16
(cÚ¡ *
buf
, 
Ën
);

2131 
	`keyHashSlÙ
(*
key
, 
keyËn
);

2132 
	`şu¡”CrÚ
();

2133 
	`şu¡”Prİag©ePublish
(
robj
 *
chªÃl
,„obj *
mes§ge
);

2134 
	`mig¿‹Clo£TimedoutSock‘s
();

2135 
	`şu¡”BefÜeSË•
();

2136 
	`şu¡”S’dModuËMes§geToT¬g‘
(cÚ¡ *
rg‘
, 
ušt64_t
 
moduË_id
, 
ušt8_t
 
ty³
, *
·ylßd
, 
ušt32_t
 
Ën
);

2139 
	`š™S’tš–CÚfig
();

2140 
	`š™S’tš–
();

2141 
	`£Áš–Tim”
();

2142 *
	`£Áš–HªdËCÚfigu¿tiÚ
(**
¬gv
, 
¬gc
);

2143 
	`£Áš–IsRuÂšg
();

2146 
	`»dis_check_rdb
(*
rdbf’ame
, 
FILE
 *
å
);

2147 
	`»dis_check_rdb_maš
(
¬gc
, **
¬gv
, 
FILE
 *
å
);

2148 
	`»dis_check_aof_maš
(
¬gc
, **
¬gv
);

2151 
	`sütšgIn™
(
£tup
);

2152 
	`ldbRemoveChd
(
pid_t
 
pid
);

2153 
	`ldbKlFÜkedSessiÚs
();

2154 
	`ldbP’dšgChd»n
();

2155 
sds
 
	`luaC»©eFunùiÚ
(
ş›Á
 *
c
, 
lua_S‹
 *
lua
, 
robj
 *
body
);

2158 
	`´oûssUnblockedCl›Ás
();

2159 
	`blockCl›Á
(
ş›Á
 *
c
, 
bty³
);

2160 
	`unblockCl›Á
(
ş›Á
 *
c
);

2161 
	`queueCl›ÁFÜR•roûssšg
(
ş›Á
 *
c
);

2162 
	`»¶yToBlockedCl›ÁTimedOut
(
ş›Á
 *
c
);

2163 
	`g‘TimeoutFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
objeù
, 
m¡ime_t
 *
timeout
, 
un™
);

2164 
	`discÚÃùAÎBlockedCl›Ás
();

2165 
	`hªdËCl›ÁsBlockedOnKeys
();

2166 
	`sigÇlKeyAsR—dy
(
»disDb
 *
db
, 
robj
 *
key
);

2167 
	`blockFÜKeys
(
ş›Á
 *
c
, 
bty³
, 
robj
 **
keys
, 
numkeys
, 
m¡ime_t
 
timeout
,„obj *
rg‘
, 
¡»amID
 *
ids
);

2170 
	`addCl›ÁToTimeoutTabË
(
ş›Á
 *
c
);

2171 
	`»moveCl›ÁFromTimeoutTabË
(
ş›Á
 *
c
);

2172 
	`hªdËBlockedCl›ÁsTimeout
();

2173 
	`ş›ÁsCrÚHªdËTimeout
(
ş›Á
 *
c
, 
m¡ime_t
 
now_ms
);

2176 
	`aùiveExpœeCyşe
(
ty³
);

2177 
	`expœeSÏveKeys
();

2178 
	`»memb”SÏveKeyW™hExpœe
(
»disDb
 *
db
, 
robj
 *
key
);

2179 
	`æushSÏveKeysW™hExpœeLi¡
();

2180 
size_t
 
	`g‘SÏveKeyW™hExpœeCouÁ
();

2183 
	`eviùiÚPoŞAÎoc
();

2184 
	#LFU_INIT_VAL
 5

	)

2185 
	`LFUG‘TimeInMšu‹s
();

2186 
ušt8_t
 
	`LFULogInü
(ušt8_ˆ
v®ue
);

2187 
	`LFUDeüAndR‘uº
(
robj
 *
o
);

2190 
ušt64_t
 
	`diùSdsHash
(cÚ¡ *
key
);

2191 
	`diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
);

2192 
	`diùSdsDe¡ruùÜ
(*
´ivd©a
, *
v®
);

2195 *
	`»disG™SHA1
();

2196 *
	`»disG™Dœty
();

2197 
ušt64_t
 
	`»disBudId
();

2198 *
	`»disBudIdSŒšg
();

2201 
	`authCommªd
(
ş›Á
 *
c
);

2202 
	`pšgCommªd
(
ş›Á
 *
c
);

2203 
	`echoCommªd
(
ş›Á
 *
c
);

2204 
	`commªdCommªd
(
ş›Á
 *
c
);

2205 
	`£tCommªd
(
ş›Á
 *
c
);

2206 
	`£ŠxCommªd
(
ş›Á
 *
c
);

2207 
	`£‹xCommªd
(
ş›Á
 *
c
);

2208 
	`p£‹xCommªd
(
ş›Á
 *
c
);

2209 
	`g‘Commªd
(
ş›Á
 *
c
);

2210 
	`d–Commªd
(
ş›Á
 *
c
);

2211 
	`uÆškCommªd
(
ş›Á
 *
c
);

2212 
	`exi¡sCommªd
(
ş›Á
 *
c
);

2213 
	`£tb™Commªd
(
ş›Á
 *
c
);

2214 
	`g‘b™Commªd
(
ş›Á
 *
c
);

2215 
	`b™f›ldCommªd
(
ş›Á
 *
c
);

2216 
	`b™f›ldroCommªd
(
ş›Á
 *
c
);

2217 
	`£ŒªgeCommªd
(
ş›Á
 *
c
);

2218 
	`g‘¿ngeCommªd
(
ş›Á
 *
c
);

2219 
	`šüCommªd
(
ş›Á
 *
c
);

2220 
	`deüCommªd
(
ş›Á
 *
c
);

2221 
	`šübyCommªd
(
ş›Á
 *
c
);

2222 
	`deübyCommªd
(
ş›Á
 *
c
);

2223 
	`šübyæßtCommªd
(
ş›Á
 *
c
);

2224 
	`£ËùCommªd
(
ş›Á
 *
c
);

2225 
	`sw­dbCommªd
(
ş›Á
 *
c
);

2226 
	`¿ndomkeyCommªd
(
ş›Á
 *
c
);

2227 
	`keysCommªd
(
ş›Á
 *
c
);

2228 
	`sÿnCommªd
(
ş›Á
 *
c
);

2229 
	`dbsizeCommªd
(
ş›Á
 *
c
);

2230 
	`Ï¡§veCommªd
(
ş›Á
 *
c
);

2231 
	`§veCommªd
(
ş›Á
 *
c
);

2232 
	`bg§veCommªd
(
ş›Á
 *
c
);

2233 
	`bg»wr™—ofCommªd
(
ş›Á
 *
c
);

2234 
	`shutdownCommªd
(
ş›Á
 *
c
);

2235 
	`moveCommªd
(
ş›Á
 *
c
);

2236 
	`»ÇmeCommªd
(
ş›Á
 *
c
);

2237 
	`»Çm’xCommªd
(
ş›Á
 *
c
);

2238 
	`ÍushCommªd
(
ş›Á
 *
c
);

2239 
	`½ushCommªd
(
ş›Á
 *
c
);

2240 
	`ÍushxCommªd
(
ş›Á
 *
c
);

2241 
	`½ushxCommªd
(
ş›Á
 *
c
);

2242 
	`lš£¹Commªd
(
ş›Á
 *
c
);

2243 
	`ÍİCommªd
(
ş›Á
 *
c
);

2244 
	`½İCommªd
(
ş›Á
 *
c
);

2245 
	`Î’Commªd
(
ş›Á
 *
c
);

2246 
	`lšdexCommªd
(
ş›Á
 *
c
);

2247 
	`ÌªgeCommªd
(
ş›Á
 *
c
);

2248 
	`ÉrimCommªd
(
ş›Á
 *
c
);

2249 
	`ty³Commªd
(
ş›Á
 *
c
);

2250 
	`l£tCommªd
(
ş›Á
 *
c
);

2251 
	`§ddCommªd
(
ş›Á
 *
c
);

2252 
	`¤emCommªd
(
ş›Á
 *
c
);

2253 
	`smoveCommªd
(
ş›Á
 *
c
);

2254 
	`sismemb”Commªd
(
ş›Á
 *
c
);

2255 
	`sÿrdCommªd
(
ş›Á
 *
c
);

2256 
	`¥İCommªd
(
ş›Á
 *
c
);

2257 
	`¤ªdmemb”Commªd
(
ş›Á
 *
c
);

2258 
	`sš‹rCommªd
(
ş›Á
 *
c
);

2259 
	`sš‹r¡ÜeCommªd
(
ş›Á
 *
c
);

2260 
	`suniÚCommªd
(
ş›Á
 *
c
);

2261 
	`suniÚ¡ÜeCommªd
(
ş›Á
 *
c
);

2262 
	`sdiffCommªd
(
ş›Á
 *
c
);

2263 
	`sdiff¡ÜeCommªd
(
ş›Á
 *
c
);

2264 
	`ssÿnCommªd
(
ş›Á
 *
c
);

2265 
	`syncCommªd
(
ş›Á
 *
c
);

2266 
	`æushdbCommªd
(
ş›Á
 *
c
);

2267 
	`æush®lCommªd
(
ş›Á
 *
c
);

2268 
	`sÜtCommªd
(
ş›Á
 *
c
);

2269 
	`ÌemCommªd
(
ş›Á
 *
c
);

2270 
	`½İÍushCommªd
(
ş›Á
 *
c
);

2271 
	`šfoCommªd
(
ş›Á
 *
c
);

2272 
	`mg‘Commªd
(
ş›Á
 *
c
);

2273 
	`mÚ™ÜCommªd
(
ş›Á
 *
c
);

2274 
	`expœeCommªd
(
ş›Á
 *
c
);

2275 
	`expœ—tCommªd
(
ş›Á
 *
c
);

2276 
	`³xpœeCommªd
(
ş›Á
 *
c
);

2277 
	`³xpœ—tCommªd
(
ş›Á
 *
c
);

2278 
	`g‘£tCommªd
(
ş›Á
 *
c
);

2279 
	`‰lCommªd
(
ş›Á
 *
c
);

2280 
	`touchCommªd
(
ş›Á
 *
c
);

2281 
	`±Commªd
(
ş›Á
 *
c
);

2282 
	`³rsi¡Commªd
(
ş›Á
 *
c
);

2283 
	`»¶iÿofCommªd
(
ş›Á
 *
c
);

2284 
	`rŞeCommªd
(
ş›Á
 *
c
);

2285 
	`debugCommªd
(
ş›Á
 *
c
);

2286 
	`m£tCommªd
(
ş›Á
 *
c
);

2287 
	`m£ŠxCommªd
(
ş›Á
 *
c
);

2288 
	`zaddCommªd
(
ş›Á
 *
c
);

2289 
	`zšübyCommªd
(
ş›Á
 *
c
);

2290 
	`z¿ngeCommªd
(
ş›Á
 *
c
);

2291 
	`z¿ngebyscÜeCommªd
(
ş›Á
 *
c
);

2292 
	`z»v¿ngebyscÜeCommªd
(
ş›Á
 *
c
);

2293 
	`z¿ngebyËxCommªd
(
ş›Á
 *
c
);

2294 
	`z»v¿ngebyËxCommªd
(
ş›Á
 *
c
);

2295 
	`zcouÁCommªd
(
ş›Á
 *
c
);

2296 
	`zËxcouÁCommªd
(
ş›Á
 *
c
);

2297 
	`z»v¿ngeCommªd
(
ş›Á
 *
c
);

2298 
	`zÿrdCommªd
(
ş›Á
 *
c
);

2299 
	`z»mCommªd
(
ş›Á
 *
c
);

2300 
	`zscÜeCommªd
(
ş›Á
 *
c
);

2301 
	`z»m¿ngebyscÜeCommªd
(
ş›Á
 *
c
);

2302 
	`z»m¿ngebyËxCommªd
(
ş›Á
 *
c
);

2303 
	`zpİmšCommªd
(
ş›Á
 *
c
);

2304 
	`zpİmaxCommªd
(
ş›Á
 *
c
);

2305 
	`bzpİmšCommªd
(
ş›Á
 *
c
);

2306 
	`bzpİmaxCommªd
(
ş›Á
 *
c
);

2307 
	`muÉiCommªd
(
ş›Á
 *
c
);

2308 
	`execCommªd
(
ş›Á
 *
c
);

2309 
	`disÿrdCommªd
(
ş›Á
 *
c
);

2310 
	`bÍİCommªd
(
ş›Á
 *
c
);

2311 
	`b½İCommªd
(
ş›Á
 *
c
);

2312 
	`b½İÍushCommªd
(
ş›Á
 *
c
);

2313 
	`­³ndCommªd
(
ş›Á
 *
c
);

2314 
	`¡¾’Commªd
(
ş›Á
 *
c
);

2315 
	`z¿nkCommªd
(
ş›Á
 *
c
);

2316 
	`z»v¿nkCommªd
(
ş›Á
 *
c
);

2317 
	`h£tCommªd
(
ş›Á
 *
c
);

2318 
	`h£ŠxCommªd
(
ş›Á
 *
c
);

2319 
	`hg‘Commªd
(
ş›Á
 *
c
);

2320 
	`hm£tCommªd
(
ş›Á
 *
c
);

2321 
	`hmg‘Commªd
(
ş›Á
 *
c
);

2322 
	`hd–Commªd
(
ş›Á
 *
c
);

2323 
	`hËnCommªd
(
ş›Á
 *
c
);

2324 
	`h¡¾’Commªd
(
ş›Á
 *
c
);

2325 
	`z»m¿ngeby¿nkCommªd
(
ş›Á
 *
c
);

2326 
	`zuniÚ¡ÜeCommªd
(
ş›Á
 *
c
);

2327 
	`zš‹r¡ÜeCommªd
(
ş›Á
 *
c
);

2328 
	`zsÿnCommªd
(
ş›Á
 *
c
);

2329 
	`hkeysCommªd
(
ş›Á
 *
c
);

2330 
	`hv®sCommªd
(
ş›Á
 *
c
);

2331 
	`hg‘®lCommªd
(
ş›Á
 *
c
);

2332 
	`hexi¡sCommªd
(
ş›Á
 *
c
);

2333 
	`hsÿnCommªd
(
ş›Á
 *
c
);

2334 
	`cÚfigCommªd
(
ş›Á
 *
c
);

2335 
	`hšübyCommªd
(
ş›Á
 *
c
);

2336 
	`hšübyæßtCommªd
(
ş›Á
 *
c
);

2337 
	`subsüibeCommªd
(
ş›Á
 *
c
);

2338 
	`unsubsüibeCommªd
(
ş›Á
 *
c
);

2339 
	`psubsüibeCommªd
(
ş›Á
 *
c
);

2340 
	`punsubsüibeCommªd
(
ş›Á
 *
c
);

2341 
	`publishCommªd
(
ş›Á
 *
c
);

2342 
	`pubsubCommªd
(
ş›Á
 *
c
);

2343 
	`w©chCommªd
(
ş›Á
 *
c
);

2344 
	`unw©chCommªd
(
ş›Á
 *
c
);

2345 
	`şu¡”Commªd
(
ş›Á
 *
c
);

2346 
	`»¡ÜeCommªd
(
ş›Á
 *
c
);

2347 
	`mig¿‹Commªd
(
ş›Á
 *
c
);

2348 
	`askšgCommªd
(
ş›Á
 *
c
);

2349 
	`»adÚlyCommªd
(
ş›Á
 *
c
);

2350 
	`»adwr™eCommªd
(
ş›Á
 *
c
);

2351 
	`dumpCommªd
(
ş›Á
 *
c
);

2352 
	`objeùCommªd
(
ş›Á
 *
c
);

2353 
	`memÜyCommªd
(
ş›Á
 *
c
);

2354 
	`ş›ÁCommªd
(
ş›Á
 *
c
);

2355 
	`h–loCommªd
(
ş›Á
 *
c
);

2356 
	`ev®Commªd
(
ş›Á
 *
c
);

2357 
	`ev®ShaCommªd
(
ş›Á
 *
c
);

2358 
	`sütCommªd
(
ş›Á
 *
c
);

2359 
	`timeCommªd
(
ş›Á
 *
c
);

2360 
	`b™İCommªd
(
ş›Á
 *
c
);

2361 
	`b™couÁCommªd
(
ş›Á
 *
c
);

2362 
	`b™posCommªd
(
ş›Á
 *
c
);

2363 
	`»¶cÚfCommªd
(
ş›Á
 *
c
);

2364 
	`wa™Commªd
(
ş›Á
 *
c
);

2365 
	`geÛncodeCommªd
(
ş›Á
 *
c
);

2366 
	`geodecodeCommªd
(
ş›Á
 *
c
);

2367 
	`geÜadiusbymemb”Commªd
(
ş›Á
 *
c
);

2368 
	`geÜadiusbymemb”roCommªd
(
ş›Á
 *
c
);

2369 
	`geÜadiusCommªd
(
ş›Á
 *
c
);

2370 
	`geÜadiu¤oCommªd
(
ş›Á
 *
c
);

2371 
	`geßddCommªd
(
ş›Á
 *
c
);

2372 
	`geohashCommªd
(
ş›Á
 *
c
);

2373 
	`geİosCommªd
(
ş›Á
 *
c
);

2374 
	`geodi¡Commªd
(
ş›Á
 *
c
);

2375 
	`pf£láe¡Commªd
(
ş›Á
 *
c
);

2376 
	`pçddCommªd
(
ş›Á
 *
c
);

2377 
	`pfcouÁCommªd
(
ş›Á
 *
c
);

2378 
	`pfm”geCommªd
(
ş›Á
 *
c
);

2379 
	`pfdebugCommªd
(
ş›Á
 *
c
);

2380 
	`Ï‹ncyCommªd
(
ş›Á
 *
c
);

2381 
	`moduËCommªd
(
ş›Á
 *
c
);

2382 
	`£cur™yW¬nšgCommªd
(
ş›Á
 *
c
);

2383 
	`xaddCommªd
(
ş›Á
 *
c
);

2384 
	`x¿ngeCommªd
(
ş›Á
 *
c
);

2385 
	`x»v¿ngeCommªd
(
ş›Á
 *
c
);

2386 
	`xËnCommªd
(
ş›Á
 *
c
);

2387 
	`x»adCommªd
(
ş›Á
 *
c
);

2388 
	`xgroupCommªd
(
ş›Á
 *
c
);

2389 
	`x£tidCommªd
(
ş›Á
 *
c
);

2390 
	`xackCommªd
(
ş›Á
 *
c
);

2391 
	`x³ndšgCommªd
(
ş›Á
 *
c
);

2392 
	`xşaimCommªd
(
ş›Á
 *
c
);

2393 
	`xšfoCommªd
(
ş›Á
 *
c
);

2394 
	`xd–Commªd
(
ş›Á
 *
c
);

2395 
	`xŒimCommªd
(
ş›Á
 *
c
);

2396 
	`lŞwutCommªd
(
ş›Á
 *
c
);

2397 
	`aşCommªd
(
ş›Á
 *
c
);

2398 
	`¡¿lgoCommªd
(
ş›Á
 *
c
);

2400 #ià
	`defšed
(
__GNUC__
)

2401 *
	$ÿÎoc
(
size_t
 
couÁ
, size_ˆ
size
è
	`__©Œibu‹__
 ((
d•»ÿ‹d
));

2402 
	$ä“
(*
±r
è
	`__©Œibu‹__
 ((
d•»ÿ‹d
));

2403 *
	$m®loc
(
size_t
 
size
è
	`__©Œibu‹__
 ((
d•»ÿ‹d
));

2404 *
	$»®loc
(*
±r
, 
size_t
 
size
è
	`__©Œibu‹__
 ((
d•»ÿ‹d
));

2408 
	`_£rv”As£¹W™hInfo
(cÚ¡ 
ş›Á
 *
c
, cÚ¡ 
robj
 *
o
, cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
);

2409 
	`_£rv”As£¹
(cÚ¡ *
e¡r
, cÚ¡ *
fe
, 
lše
);

2410 
	`_£rv”Pªic
(cÚ¡ *
fe
, 
lše
, cÚ¡ *
msg
, ...);

2411 
	`bugR•ÜtS¹
();

2412 
	`£rv”LogObjeùDebugInfo
(cÚ¡ 
robj
 *
o
);

2413 
	`sig£gvHªdËr
(
sig
, 
sigšfo_t
 *
šfo
, *
£ü‘
);

2414 
sds
 
	`g’RedisInfoSŒšg
(cÚ¡ *
£ùiÚ
);

2415 
sds
 
	`g’ModuËsInfoSŒšg
(sd 
šfo
);

2416 
	`’abËW©chdog
(
³riod
);

2417 
	`di§bËW©chdog
();

2418 
	`w©chdogScheduËSigÇl
(
³riod
);

2419 
	`£rv”LogHexDump
(
Ëv–
, *
desü
, *
v®ue
, 
size_t
 
Ën
);

2420 
	`mem‹¡_´e£rvšg_‹¡
(*
m
, 
size_t
 
by‹s
, 
·s£s
);

2421 
	`mixDige¡
(*
dige¡
, *
±r
, 
size_t
 
Ën
);

2422 
	`xÜDige¡
(*
dige¡
, *
±r
, 
size_t
 
Ën
);

2423 
	`pİuÏ‹CommªdTabËP¬£FÏgs
(
»disCommªd
 *
c
, *
¡ræags
);

2426 
	`sIn™
();

2427 
	`sCÚfigu»
(
»disTLSCÚ‹xtCÚfig
 *
ùx_cÚfig
);

2429 
	#»disDebug
(
fmt
, ...) \

2430 
	`´štf
("DEBUG %s:%d > " 
fmt
 "\n", 
__FILE__
, 
__LINE__
, 
__VA_ARGS__
)

	)

2431 
	#»disDebugM¬k
() \

2432 
	`´štf
("-- MARK %s:%d --\n", 
__FILE__
, 
__LINE__
)

	)

2434 
	`iAmMa¡”
();

	@setcpuaffinity.c

26 #iâdeà
_GNU_SOURCE


27 
	#_GNU_SOURCE


	)

29 
	~<¡dlib.h
>

30 
	~<¡ršg.h
>

31 
	~<ùy³.h
>

32 #ifdeà
__lšux__


33 
	~<sched.h
>

35 #ifdeà
__F»eBSD__


36 
	~<sys/·¿m.h
>

37 
	~<sys/ıu£t.h
>

39 
	~"cÚfig.h
"

41 #ifdeà
USE_SETCPUAFFINITY


42 cÚ¡ *
	$Ãxt_tok’
(cÚ¡ *
q
, 
£p
) {

43 ià(
q
)

44 
q
 = 
	`¡rchr
(q, 
£p
);

45 ià(
q
)

46 
q
++;

48  
q
;

49 
	}
}

51 
	$Ãxt_num
(cÚ¡ *
¡r
, **
’d
, *
»suÉ
) {

52 ià(!
¡r
 || *¡¸=ğ'\0' || !
	`isdig™
(*str))

55 *
»suÉ
 = 
	`¡¹oul
(
¡r
, 
’d
, 10);

56 ià(
¡r
 =ğ*
’d
)

60 
	}
}

65 
	$£tıuaffš™y
(cÚ¡ *
ıuli¡
) {

66 cÚ¡ *
p
, *
q
;

67 *
’d
 = 
NULL
;

68 #ifdeà
__lšux__


69 
ıu_£t_t
 
ıu£t
;

71 #ifdeà
__F»eBSD__


72 
ıu£t_t
 
ıu£t
;

75 ià(!
ıuli¡
)

78 
	`CPU_ZERO
(&
ıu£t
);

80 
q
 = 
ıuli¡
;

81 
p
 = 
q
, q = 
	`Ãxt_tok’
(q, ','),…) {

82 
a
, 
b
, 
s
;

83 cÚ¡ *
c1
, *
c2
;

85 ià(
	`Ãxt_num
(
p
, &
’d
, &
a
) != 0)

88 
b
 = 
a
;

89 
s
 = 1;

90 
p
 = 
’d
;

92 
c1
 = 
	`Ãxt_tok’
(
p
, '-');

93 
c2
 = 
	`Ãxt_tok’
(
p
, ',');

95 ià(
c1
 !ğ
NULL
 && (
c2
 == NULL || c1 < c2)) {

96 ià(
	`Ãxt_num
(
c1
, &
’d
, &
b
) != 0)

99 
c1
 = 
’d
 && *’d ? 
	`Ãxt_tok’
Ónd, ':'è: 
NULL
;

100 ià(
c1
 !ğ
NULL
 && (
c2
 == NULL || c1 < c2)) {

101 ià(
	`Ãxt_num
(
c1
, &
’d
, &
s
) != 0)

104 ià(
s
 == 0)

109 ià((
a
 > 
b
))

112 
a
 <ğ
b
) {

113 
	`CPU_SET
(
a
, &
ıu£t
);

114 
a
 +ğ
s
;

118 ià(
’d
 && *end)

121 #ifdeà
__lšux__


122 
	`sched_£ffš™y
(0, (
ıu£t
), &cpuset);

124 #ifdeà
__F»eBSD__


125 
	`ıu£t_£ffš™y
(
CPU_LEVEL_WHICH
, 
CPU_WHICH_TID
, -1, (
ıu£t
), &cpuset);

127 
	}
}

	@setproctitle.c

28 #iâdeà
_GNU_SOURCE


29 
	#_GNU_SOURCE


	)

32 
	~<¡ddef.h
>

33 
	~<¡d¬g.h
>

34 
	~<¡dlib.h
>

35 
	~<¡dio.h
>

37 
	~<¡ršg.h
>

39 
	~<”ºo.h
>

41 #ià!
defšed
(
HAVE_SETPROCTITLE
)

42 #ià(
defšed
 
__N‘BSD__
 || defšed 
__F»eBSD__
 || defšed 
__O³nBSD__
 || defšed 
__D¿gÚFly__
)

43 
	#HAVE_SETPROCTITLE
 1

	)

45 
	#HAVE_SETPROCTITLE
 0

	)

50 #ià!
HAVE_SETPROCTITLE


51 #ià(
defšed
 
__lšux
 || defšed 
__APPLE__
)

53 **
’vœÚ
;

57 cÚ¡ *
	m¬g0
;

60 *
	mba£
, *
	m’d
;

63 *
	mnul
;

65 
_BoŞ
 
	m»£t
;

66 
	m”rÜ
;

67 } 
	gSPT
;

70 #iâdeà
SPT_MIN


71 
	#SPT_MIN
(
a
, 
b
è((×è< (b))? (aè: (b))

	)

74 
šlše
 
size_t
 
	$¥t_mš
(
size_t
 
a
, size_ˆ
b
) {

75  
	`SPT_MIN
(
a
, 
b
);

76 
	}
}

83 
	$¥t_ş—»nv
() {

84 #ià
__GLIBC__


85 
	`ş—»nv
();

89 **
’vœÚ
;

90 **
tmp
;

92 ià(!(
tmp
 = 
	`m®loc
( *tmp)))

93  
”ºo
;

95 
tmp
[0] = 
NULL
;

96 
’vœÚ
 = 
tmp
;

100 
	}
}

103 
	$¥t_cİy’v
(*
Şd’v
[]) {

104 **
’vœÚ
;

105 *
eq
;

106 
i
, 
”rÜ
;

108 ià(
’vœÚ
 !ğ
Şd’v
)

111 ià((
”rÜ
 = 
	`¥t_ş—»nv
()))

112 
”rÜ
;

114 
i
 = 0; 
Şd’v
[i]; i++) {

115 ià(!(
eq
 = 
	`¡rchr
(
Şd’v
[
i
], '=')))

118 *
eq
 = '\0';

119 
”rÜ
 = (0 !ğ
	`£‹nv
(
Şd’v
[
i
], 
eq
 + 1, 1))? 
”ºo
 : 0;

120 *
eq
 = '=';

122 ià(
”rÜ
)

123 
”rÜ
;

127 
”rÜ
:

128 
’vœÚ
 = 
Şd’v
;

130  
”rÜ
;

131 
	}
}

134 
	$¥t_cİy¬gs
(
¬gc
, *
¬gv
[]) {

135 *
tmp
;

136 
i
;

138 
i
 = 1; i < 
¬gc
 || (˜>ğ¬gø&& 
¬gv
[i]); i++) {

139 ià(!
¬gv
[
i
])

142 ià(!(
tmp
 = 
	`¡rdup
(
¬gv
[
i
])))

143  
”ºo
;

145 
¬gv
[
i
] = 
tmp
;

149 
	}
}

152 
	$¥t_š™
(
¬gc
, *
¬gv
[]) {

153 **
’vp
 = 
’vœÚ
;

154 *
ba£
, *
’d
, *
nul
, *
tmp
;

155 
i
, 
”rÜ
;

157 ià(!(
ba£
 = 
¬gv
[0]))

160 
nul
 = &
ba£
[
	`¡¾’
(base)];

161 
’d
 = 
nul
 + 1;

163 
i
 = 0; i < 
¬gc
 || (˜>ğ¬gø&& 
¬gv
[i]); i++) {

164 ià(!
¬gv
[
i
] ||‡rgv[i] < 
’d
)

167 
’d
 = 
¬gv
[
i
] + 
	`¡¾’
(argv[i]) + 1;

170 
i
 = 0; 
’vp
[i]; i++) {

171 ià(
’vp
[
i
] < 
’d
)

174 
’d
 = 
’vp
[
i
] + 
	`¡¾’
(envp[i]) + 1;

177 ià(!(
SPT
.
¬g0
 = 
	`¡rdup
(
¬gv
[0])))

178 
sy”r
;

180 #ià
__GLIBC__


181 ià(!(
tmp
 = 
	`¡rdup
(
´og¿m_švoÿtiÚ_Çme
)))

182 
sy”r
;

184 
´og¿m_švoÿtiÚ_Çme
 = 
tmp
;

186 ià(!(
tmp
 = 
	`¡rdup
(
´og¿m_švoÿtiÚ_shÜt_Çme
)))

187 
sy”r
;

189 
´og¿m_švoÿtiÚ_shÜt_Çme
 = 
tmp
;

190 #–ià
__APPLE__


191 ià(!(
tmp
 = 
	`¡rdup
(
	`g‘´ogÇme
())))

192 
sy”r
;

194 
	`£rogÇme
(
tmp
);

198 ià((
”rÜ
 = 
	`¥t_cİy’v
(
’vp
)))

199 
”rÜ
;

201 ià((
”rÜ
 = 
	`¥t_cİy¬gs
(
¬gc
, 
¬gv
)))

202 
”rÜ
;

204 
SPT
.
nul
 =‚ul;

205 
SPT
.
ba£
 = base;

206 
SPT
.
’d
 =ƒnd;

209 
sy”r
:

210 
”rÜ
 = 
”ºo
;

211 
”rÜ
:

212 
SPT
.
”rÜ
 =ƒrror;

213 
	}
}

216 #iâdeà
SPT_MAXTITLE


217 
	#SPT_MAXTITLE
 255

	)

220 
	$£roù™Ë
(cÚ¡ *
fmt
, ...) {

221 
buf
[
SPT_MAXTITLE
 + 1];

222 
va_li¡
 
­
;

223 *
nul
;

224 
Ën
, 
”rÜ
;

226 ià(!
SPT
.
ba£
)

229 ià(
fmt
) {

230 
	`va_¡¬t
(
­
, 
fmt
);

231 
Ën
 = 
	`v¢´štf
(
buf
,  buf, 
fmt
, 
­
);

232 
	`va_’d
(
­
);

234 
Ën
 = 
	`¢´štf
(
buf
,  buf, "%s", 
SPT
.
¬g0
);

237 ià(
Ën
 <= 0)

238 { 
”rÜ
 = 
”ºo
; error; }

240 ià(!
SPT
.
»£t
) {

241 
	`mem£t
(
SPT
.
ba£
, 0, SPT.
’d
 - SPT.base);

242 
SPT
.
»£t
 = 1;

244 
	`mem£t
(
SPT
.
ba£
, 0, 
	`¥t_mš
( 
buf
, SPT.
’d
 - SPT.base));

247 
Ën
 = 
	`¥t_mš
Ö’, s±_mš( 
buf
, 
SPT
.
’d
 - SPT.
ba£
) - 1);

248 
	`memıy
(
SPT
.
ba£
, 
buf
, 
Ën
);

249 
nul
 = &
SPT
.
ba£
[
Ën
];

251 ià(
nul
 < 
SPT
.nul) {

252 *
SPT
.
nul
 = '.';

253 } ià(
nul
 =ğ
SPT
.nuÈ&& &nul[1] < SPT.
’d
) {

254 *
SPT
.
nul
 = ' ';

255 *++
nul
 = '\0';

259 
”rÜ
:

260 
SPT
.
”rÜ
 =ƒrror;

261 
	}
}

	@sha1.c

22 
	#SHA1HANDSOFF


	)

24 
	~<¡dio.h
>

25 
	~<¡ršg.h
>

26 
	~<¡dšt.h
>

27 
	~"sŞ¬isfixes.h
"

28 
	~"sha1.h
"

29 
	~"cÚfig.h
"

31 
	#rŞ
(
v®ue
, 
b™s
è(((v®ueè<< (b™s)è| ((v®ueè>> (32 - (b™s))))

	)

35 #ià
BYTE_ORDER
 =ğ
LITTLE_ENDIAN


36 
	#blk0
(
i
è(
block
->
l
[i] = (
	`rŞ
(block->l[i],24)&0xFF00FF00) \

37 |(
	`rŞ
(
block
->
l
[
i
],8)&0x00FF00FF))

	)

38 #–ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


39 
	#blk0
(
i
è
block
->
l
[i]

	)

43 
	#blk
(
i
è(
block
->
l
[i&15] = 
	`rŞ
(block->l[(i+13)&15]^block->l[(i+8)&15] \

44 ^
block
->
l
[(
i
+2)&15]^block->l[i&15],1))

	)

47 
	#R0
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk0
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

48 
	#R1
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

49 
	#R2
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0x6ED9EBA1+
	`rŞ
(v,5);wôŞ(w,30);

	)

50 
	#R3
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(((w|x)&y)|(w&x))+
	`blk
(i)+0x8F1BBCDC+
	`rŞ
(v,5);wôŞ(w,30);

	)

51 
	#R4
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0xCA62C1D6+
	`rŞ
(v,5);wôŞ(w,30);

	)

56 
	$SHA1T¿nsfÜm
(
ušt32_t
 
¡©e
[5], cÚ¡ 
bufãr
[64])

58 
ušt32_t
 
a
, 
b
, 
c
, 
d
, 
e
;

60 
c
[64];

61 
ušt32_t
 
l
[16];

62 } 
	tCHAR64LONG16
;

63 #ifdeà
SHA1HANDSOFF


64 
CHAR64LONG16
 
block
[1];

65 
	`memıy
(
block
, 
bufãr
, 64);

72 
CHAR64LONG16
* 
block
 = (cÚ¡ CHAR64LONG16*)
bufãr
;

75 
a
 = 
¡©e
[0];

76 
b
 = 
¡©e
[1];

77 
c
 = 
¡©e
[2];

78 
d
 = 
¡©e
[3];

79 
e
 = 
¡©e
[4];

81 
	`R0
(
a
,
b
,
c
,
d
,
e
, 0); R0(e,a,b,c,d, 1); R0(d,e,a,b,c, 2); R0(c,d,e,a,b, 3);

82 
	`R0
(
b
,
c
,
d
,
e
,
a
, 4); R0(a,b,c,d,e, 5); R0(e,a,b,c,d, 6); R0(d,e,a,b,c, 7);

83 
	`R0
(
c
,
d
,
e
,
a
,
b
, 8); R0(b,c,d,e,a, 9); R0(a,b,c,d,e,10); R0(e,a,b,c,d,11);

84 
	`R0
(
d
,
e
,
a
,
b
,
c
,12); R0(c,d,e,a,b,13); R0(b,c,d,e,a,14); R0(a,b,c,d,e,15);

85 
	`R1
(
e
,
a
,
b
,
c
,
d
,16); R1(d,e,a,b,c,17); R1(c,d,e,a,b,18); R1(b,c,d,e,a,19);

86 
	`R2
(
a
,
b
,
c
,
d
,
e
,20); R2(e,a,b,c,d,21); R2(d,e,a,b,c,22); R2(c,d,e,a,b,23);

87 
	`R2
(
b
,
c
,
d
,
e
,
a
,24); R2(a,b,c,d,e,25); R2(e,a,b,c,d,26); R2(d,e,a,b,c,27);

88 
	`R2
(
c
,
d
,
e
,
a
,
b
,28); R2(b,c,d,e,a,29); R2(a,b,c,d,e,30); R2(e,a,b,c,d,31);

89 
	`R2
(
d
,
e
,
a
,
b
,
c
,32); R2(c,d,e,a,b,33); R2(b,c,d,e,a,34); R2(a,b,c,d,e,35);

90 
	`R2
(
e
,
a
,
b
,
c
,
d
,36); R2(d,e,a,b,c,37); R2(c,d,e,a,b,38); R2(b,c,d,e,a,39);

91 
	`R3
(
a
,
b
,
c
,
d
,
e
,40); R3(e,a,b,c,d,41); R3(d,e,a,b,c,42); R3(c,d,e,a,b,43);

92 
	`R3
(
b
,
c
,
d
,
e
,
a
,44); R3(a,b,c,d,e,45); R3(e,a,b,c,d,46); R3(d,e,a,b,c,47);

93 
	`R3
(
c
,
d
,
e
,
a
,
b
,48); R3(b,c,d,e,a,49); R3(a,b,c,d,e,50); R3(e,a,b,c,d,51);

94 
	`R3
(
d
,
e
,
a
,
b
,
c
,52); R3(c,d,e,a,b,53); R3(b,c,d,e,a,54); R3(a,b,c,d,e,55);

95 
	`R3
(
e
,
a
,
b
,
c
,
d
,56); R3(d,e,a,b,c,57); R3(c,d,e,a,b,58); R3(b,c,d,e,a,59);

96 
	`R4
(
a
,
b
,
c
,
d
,
e
,60); R4(e,a,b,c,d,61); R4(d,e,a,b,c,62); R4(c,d,e,a,b,63);

97 
	`R4
(
b
,
c
,
d
,
e
,
a
,64); R4(a,b,c,d,e,65); R4(e,a,b,c,d,66); R4(d,e,a,b,c,67);

98 
	`R4
(
c
,
d
,
e
,
a
,
b
,68); R4(b,c,d,e,a,69); R4(a,b,c,d,e,70); R4(e,a,b,c,d,71);

99 
	`R4
(
d
,
e
,
a
,
b
,
c
,72); R4(c,d,e,a,b,73); R4(b,c,d,e,a,74); R4(a,b,c,d,e,75);

100 
	`R4
(
e
,
a
,
b
,
c
,
d
,76); R4(d,e,a,b,c,77); R4(c,d,e,a,b,78); R4(b,c,d,e,a,79);

102 
¡©e
[0] +ğ
a
;

103 
¡©e
[1] +ğ
b
;

104 
¡©e
[2] +ğ
c
;

105 
¡©e
[3] +ğ
d
;

106 
¡©e
[4] +ğ
e
;

108 
a
 = 
b
 = 
c
 = 
d
 = 
e
 = 0;

109 #ifdeà
SHA1HANDSOFF


110 
	`mem£t
(
block
, '\0', (block));

112 
	}
}

117 
	$SHA1In™
(
SHA1_CTX
* 
cÚ‹xt
)

120 
cÚ‹xt
->
¡©e
[0] = 0x67452301;

121 
cÚ‹xt
->
¡©e
[1] = 0xEFCDAB89;

122 
cÚ‹xt
->
¡©e
[2] = 0x98BADCFE;

123 
cÚ‹xt
->
¡©e
[3] = 0x10325476;

124 
cÚ‹xt
->
¡©e
[4] = 0xC3D2E1F0;

125 
cÚ‹xt
->
couÁ
[0] = context->count[1] = 0;

126 
	}
}

131 
	$SHA1Upd©e
(
SHA1_CTX
* 
cÚ‹xt
, cÚ¡ * 
d©a
, 
ušt32_t
 
Ën
)

133 
ušt32_t
 
i
, 
j
;

135 
j
 = 
cÚ‹xt
->
couÁ
[0];

136 ià((
cÚ‹xt
->
couÁ
[0] +ğ
Ën
 << 3è< 
j
)

137 
cÚ‹xt
->
couÁ
[1]++;

138 
cÚ‹xt
->
couÁ
[1] +ğ(
Ën
>>29);

139 
j
 = (j >> 3) & 63;

140 ià((
j
 + 
Ën
) > 63) {

141 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], 
d©a
, (
i
 = 64-j));

142 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, cÚ‹xt->
bufãr
);

143  ; 
i
 + 63 < 
Ën
; i += 64) {

144 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, &
d©a
[
i
]);

146 
j
 = 0;

148 
i
 = 0;

149 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], &
d©a
[
i
], 
Ën
 - i);

150 
	}
}

155 
	$SHA1Fš®
(
dige¡
[20], 
SHA1_CTX
* 
cÚ‹xt
)

157 
i
;

158 
fš®couÁ
[8];

159 
c
;

167 *
fı
 = &
fš®couÁ
[8];

169 
i
 = 0; i < 2; i++)

171 
ušt32_t
 
t
 = 
cÚ‹xt
->
couÁ
[
i
];

172 
j
;

174 
j
 = 0; j < 4; 
t
 >>= 8, j++)

175 *--
fı
 = (è
t
;

178 
i
 = 0; i < 8; i++) {

179 
fš®couÁ
[
i
] = ()((
cÚ‹xt
->
couÁ
[(i >= 4 ? 0 : 1)]

180 >> ((3-(
i
 & 3)) * 8) ) & 255);

183 
c
 = 0200;

184 
	`SHA1Upd©e
(
cÚ‹xt
, &
c
, 1);

185 (
cÚ‹xt
->
couÁ
[0] & 504) != 448) {

186 
c
 = 0000;

187 
	`SHA1Upd©e
(
cÚ‹xt
, &
c
, 1);

189 
	`SHA1Upd©e
(
cÚ‹xt
, 
fš®couÁ
, 8);

190 
i
 = 0; i < 20; i++) {

191 
dige¡
[
i
] = ()

192 ((
cÚ‹xt
->
¡©e
[
i
>>2] >> ((3-(i & 3)) * 8) ) & 255);

195 
	`mem£t
(
cÚ‹xt
, '\0', (*context));

196 
	`mem£t
(&
fš®couÁ
, '\0', (finalcount));

197 
	}
}

200 #ifdeà
REDIS_TEST


201 
	#BUFSIZE
 4096

	)

203 
	#UNUSED
(
x
è()(x)

	)

204 
	$sha1Te¡
(
¬gc
, **
¬gv
)

206 
SHA1_CTX
 
ùx
;

207 
hash
[20], 
buf
[
BUFSIZE
];

208 
i
;

210 
	`UNUSED
(
¬gc
);

211 
	`UNUSED
(
¬gv
);

213 
i
=0;i<
BUFSIZE
;i++)

214 
buf
[
i
] = i;

216 
	`SHA1In™
(&
ùx
);

217 
i
=0;i<1000;i++)

218 
	`SHA1Upd©e
(&
ùx
, 
buf
, 
BUFSIZE
);

219 
	`SHA1Fš®
(
hash
, &
ùx
);

221 
	`´štf
("SHA1=");

222 
i
=0;i<20;i++)

223 
	`´štf
("%02x", 
hash
[
i
]);

224 
	`´štf
("\n");

226 
	}
}

	@sha1.h

1 #iâdeà
SHA1_H


2 
	#SHA1_H


	)

11 
ušt32_t
 
	m¡©e
[5];

12 
ušt32_t
 
	mcouÁ
[2];

13 
	mbufãr
[64];

14 } 
	tSHA1_CTX
;

16 
SHA1T¿nsfÜm
(
ušt32_t
 
¡©e
[5], cÚ¡ 
bufãr
[64]);

17 
SHA1In™
(
SHA1_CTX
* 
cÚ‹xt
);

18 
SHA1Upd©e
(
SHA1_CTX
* 
cÚ‹xt
, cÚ¡ * 
d©a
, 
ušt32_t
 
Ën
);

19 
SHA1Fš®
(
dige¡
[20], 
SHA1_CTX
* 
cÚ‹xt
);

21 #ifdeà
REDIS_TEST


22 
sha1Te¡
(
¬gc
, **
¬gv
);

	@sha256.c

16 
	~<¡dlib.h
>

17 
	~<¡ršg.h
>

18 
	~"sha256.h
"

21 
	#ROTLEFT
(
a
,
b
è((×è<< (b)è| (×è>> (32-(b))))

	)

22 
	#ROTRIGHT
(
a
,
b
è((×è>> (b)è| (×è<< (32-(b))))

	)

24 
	#CH
(
x
,
y
,
z
è(((xè& (y)è^ (~(xè& (z)))

	)

25 
	#MAJ
(
x
,
y
,
z
è(((xè& (y)è^ ((xè& (z)è^ ((yè& (z)))

	)

26 
	#EP0
(
x
è(
	`ROTRIGHT
(x,2è^ ROTRIGHT(x,13è^ ROTRIGHT(x,22))

	)

27 
	#EP1
(
x
è(
	`ROTRIGHT
(x,6è^ ROTRIGHT(x,11è^ ROTRIGHT(x,25))

	)

28 
	#SIG0
(
x
è(
	`ROTRIGHT
(x,7è^ ROTRIGHT(x,18è^ ((xè>> 3))

	)

29 
	#SIG1
(
x
è(
	`ROTRIGHT
(x,17è^ ROTRIGHT(x,19è^ ((xè>> 10))

	)

32 cÚ¡ 
WORD
 
	gk
[64] = {

44 
	$sha256_ŒªsfÜm
(
SHA256_CTX
 *
ùx
, cÚ¡ 
BYTE
 
d©a
[])

46 
WORD
 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
t1
, 
t2
, 
m
[64];

48 
i
 = 0, 
j
 = 0; i < 16; ++i, j += 4)

49 
m
[
i
] = (
d©a
[
j
] << 24) | (data[j + 1] << 16) | (data[j + 2] << 8) | (data[j + 3]);

50  ; 
i
 < 64; ++i)

51 
m
[
i
] = 
	`SIG1
(m[˜- 2]è+ m[˜- 7] + 
	`SIG0
(m[i - 15]) + m[i - 16];

53 
a
 = 
ùx
->
¡©e
[0];

54 
b
 = 
ùx
->
¡©e
[1];

55 
c
 = 
ùx
->
¡©e
[2];

56 
d
 = 
ùx
->
¡©e
[3];

57 
e
 = 
ùx
->
¡©e
[4];

58 
f
 = 
ùx
->
¡©e
[5];

59 
g
 = 
ùx
->
¡©e
[6];

60 
h
 = 
ùx
->
¡©e
[7];

62 
i
 = 0; i < 64; ++i) {

63 
t1
 = 
h
 + 
	`EP1
(
e
è+ 
	`CH
Ó,
f
,
g
è+ 
k
[
i
] + 
m
[i];

64 
t2
 = 
	`EP0
(
a
è+ 
	`MAJ
×,
b
,
c
);

65 
h
 = 
g
;

66 
g
 = 
f
;

67 
f
 = 
e
;

68 
e
 = 
d
 + 
t1
;

69 
d
 = 
c
;

70 
c
 = 
b
;

71 
b
 = 
a
;

72 
a
 = 
t1
 + 
t2
;

75 
ùx
->
¡©e
[0] +ğ
a
;

76 
ùx
->
¡©e
[1] +ğ
b
;

77 
ùx
->
¡©e
[2] +ğ
c
;

78 
ùx
->
¡©e
[3] +ğ
d
;

79 
ùx
->
¡©e
[4] +ğ
e
;

80 
ùx
->
¡©e
[5] +ğ
f
;

81 
ùx
->
¡©e
[6] +ğ
g
;

82 
ùx
->
¡©e
[7] +ğ
h
;

83 
	}
}

85 
	$sha256_š™
(
SHA256_CTX
 *
ùx
)

87 
ùx
->
d©®’
 = 0;

88 
ùx
->
b™Ën
 = 0;

89 
ùx
->
¡©e
[0] = 0x6a09e667;

90 
ùx
->
¡©e
[1] = 0xbb67ae85;

91 
ùx
->
¡©e
[2] = 0x3c6ef372;

92 
ùx
->
¡©e
[3] = 0xa54ff53a;

93 
ùx
->
¡©e
[4] = 0x510e527f;

94 
ùx
->
¡©e
[5] = 0x9b05688c;

95 
ùx
->
¡©e
[6] = 0x1f83d9ab;

96 
ùx
->
¡©e
[7] = 0x5be0cd19;

97 
	}
}

99 
	$sha256_upd©e
(
SHA256_CTX
 *
ùx
, cÚ¡ 
BYTE
 
d©a
[], 
size_t
 
Ën
)

101 
WORD
 
i
;

103 
i
 = 0; i < 
Ën
; ++i) {

104 
ùx
->
d©a
[ùx->
d©®’
] = d©a[
i
];

105 
ùx
->
d©®’
++;

106 ià(
ùx
->
d©®’
 == 64) {

107 
	`sha256_ŒªsfÜm
(
ùx
, ctx->
d©a
);

108 
ùx
->
b™Ën
 += 512;

109 
ùx
->
d©®’
 = 0;

112 
	}
}

114 
	$sha256_fš®
(
SHA256_CTX
 *
ùx
, 
BYTE
 
hash
[])

116 
WORD
 
i
;

118 
i
 = 
ùx
->
d©®’
;

121 ià(
ùx
->
d©®’
 < 56) {

122 
ùx
->
d©a
[
i
++] = 0x80;

123 
i
 < 56)

124 
ùx
->
d©a
[
i
++] = 0x00;

127 
ùx
->
d©a
[
i
++] = 0x80;

128 
i
 < 64)

129 
ùx
->
d©a
[
i
++] = 0x00;

130 
	`sha256_ŒªsfÜm
(
ùx
, ctx->
d©a
);

131 
	`mem£t
(
ùx
->
d©a
, 0, 56);

135 
ùx
->
b™Ën
 +ğùx->
d©®’
 * 8;

136 
ùx
->
d©a
[63] = ctx->
b™Ën
;

137 
ùx
->
d©a
[62] = ctx->
b™Ën
 >> 8;

138 
ùx
->
d©a
[61] = ctx->
b™Ën
 >> 16;

139 
ùx
->
d©a
[60] = ctx->
b™Ën
 >> 24;

140 
ùx
->
d©a
[59] = ctx->
b™Ën
 >> 32;

141 
ùx
->
d©a
[58] = ctx->
b™Ën
 >> 40;

142 
ùx
->
d©a
[57] = ctx->
b™Ën
 >> 48;

143 
ùx
->
d©a
[56] = ctx->
b™Ën
 >> 56;

144 
	`sha256_ŒªsfÜm
(
ùx
, ctx->
d©a
);

148 
i
 = 0; i < 4; ++i) {

149 
hash
[
i
] = (
ùx
->
¡©e
[0] >> (24 - i * 8)) & 0x000000ff;

150 
hash
[
i
 + 4] = (
ùx
->
¡©e
[1] >> (24 - i * 8)) & 0x000000ff;

151 
hash
[
i
 + 8] = (
ùx
->
¡©e
[2] >> (24 - i * 8)) & 0x000000ff;

152 
hash
[
i
 + 12] = (
ùx
->
¡©e
[3] >> (24 - i * 8)) & 0x000000ff;

153 
hash
[
i
 + 16] = (
ùx
->
¡©e
[4] >> (24 - i * 8)) & 0x000000ff;

154 
hash
[
i
 + 20] = (
ùx
->
¡©e
[5] >> (24 - i * 8)) & 0x000000ff;

155 
hash
[
i
 + 24] = (
ùx
->
¡©e
[6] >> (24 - i * 8)) & 0x000000ff;

156 
hash
[
i
 + 28] = (
ùx
->
¡©e
[7] >> (24 - i * 8)) & 0x000000ff;

158 
	}
}

	@sha256.h

9 #iâdeà
SHA256_H


10 
	#SHA256_H


	)

13 
	~<¡ddef.h
>

14 
	~<¡dšt.h
>

17 
	#SHA256_BLOCK_SIZE
 32

18 

	)

20 
ušt8_t
 
	tBYTE
;

21 
ušt32_t
 
	tWORD
;

24 
BYTE
 
	md©a
[64];

25 
WORD
 
	md©®’
;

26 
	mb™Ën
;

27 
WORD
 
	m¡©e
[8];

28 } 
	tSHA256_CTX
;

31 
sha256_š™
(
SHA256_CTX
 *
ùx
);

32 
sha256_upd©e
(
SHA256_CTX
 *
ùx
, cÚ¡ 
BYTE
 
d©a
[], 
size_t
 
Ën
);

33 
sha256_fš®
(
SHA256_CTX
 *
ùx
, 
BYTE
 
hash
[]);

	@siphash.c

42 
	~<as£¹.h
>

43 
	~<¡dšt.h
>

44 
	~<¡dio.h
>

45 
	~<¡ršg.h
>

46 
	~<ùy³.h
>

50 
	$sw
(
c
) {

51 ià(
c
 >= 'A' && c <= 'Z') {

52  
c
+('a'-'A');

54  
c
;

56 
	}
}

61 #ià
defšed
(
__X86_64__
è|| defšed(
__x86_64__
è|| defšed (
__i386__
) \

62 || 
defšed
 (
__¯rch64__
è|| 
	$defšed
 (
__¬m64__
)

63 
	#UNALIGNED_LE_CPU


	)

66 
	#ROTL
(
x
, 
b
è(
ušt64_t
)(((xè<< (b)è| ((xè>> (64 - (b))))

	)

68 
	#U32TO8_LE
(
p
, 
v
) \

69 (
p
)[0] = (
ušt8_t
)((
v
)); \

70 (
p
)[1] = (
ušt8_t
)((
v
) >> 8); \

71 (
p
)[2] = (
ušt8_t
)((
v
) >> 16); \

72 (
p
)[3] = (
ušt8_t
)((
v
è>> 24);

	)

74 
	#U64TO8_LE
(
p
, 
v
) \

75 
	`U32TO8_LE
((
p
), (
ušt32_t
)((
v
))); \

76 
	`U32TO8_LE
((
p
è+ 4, (
ušt32_t
)((
v
è>> 32));

	)

78 #ifdeà
UNALIGNED_LE_CPU


79 
	#U8TO64_LE
(
p
è(*((
ušt64_t
*)Õ)))

	)

81 
	#U8TO64_LE
(
p
) \

82 (((
ušt64_t
)((
p
)[0])) | ((uint64_t)((p)[1]) << 8) | \

83 ((
ušt64_t
)((
p
)[2]) << 16) | ((uint64_t)((p)[3]) << 24) | \

84 ((
ušt64_t
)((
p
)[4]) << 32) | ((uint64_t)((p)[5]) << 40) | \

85 ((
ušt64_t
)((
p
)[6]è<< 48è| ((ušt64_t)(Õ)[7]è<< 56))

	)

88 
	#U8TO64_LE_NOCASE
(
p
) \

89 (((
ušt64_t
)(
	`sw
((
p
)[0]))) | \

90 ((
ušt64_t
)(
	`sw
((
p
)[1])) << 8) | \

91 ((
ušt64_t
)(
	`sw
((
p
)[2])) << 16) | \

92 ((
ušt64_t
)(
	`sw
((
p
)[3])) << 24) | \

93 ((
ušt64_t
)(
	`sw
((
p
)[4])) << 32) | \

94 ((
ušt64_t
)(
	`sw
((
p
)[5])) << 40) | \

95 ((
ušt64_t
)(
	`sw
((
p
)[6])) << 48) | \

96 ((
ušt64_t
)(
	`sw
((
p
)[7])è<< 56))

	)

98 
	#SIPROUND
 \

100 
v0
 +ğ
v1
; \

101 
v1
 = 
	`ROTL
(v1, 13); \

102 
v1
 ^ğ
v0
; \

103 
v0
 = 
	`ROTL
(v0, 32); \

104 
v2
 +ğ
v3
; \

105 
v3
 = 
	`ROTL
(v3, 16); \

106 
v3
 ^ğ
v2
; \

107 
v0
 +ğ
v3
; \

108 
v3
 = 
	`ROTL
(v3, 21); \

109 
v3
 ^ğ
v0
; \

110 
v2
 +ğ
v1
; \

111 
v1
 = 
	`ROTL
(v1, 17); \

112 
v1
 ^ğ
v2
; \

113 
v2
 = 
	`ROTL
(v2, 32); \

114 
	}
} 0)

	)

116 
ušt64_t
 
	$shash
(cÚ¡ 
ušt8_t
 *
š
, cÚ¡ 
size_t
 
šËn
, cÚ¡ ušt8_ˆ*
k
) {

117 #iâdeà
UNALIGNED_LE_CPU


118 
ušt64_t
 
hash
;

119 
ušt8_t
 *
out
 = (ušt8_t*è&
hash
;

121 
ušt64_t
 
v0
 = 0x736f6d6570736575ULL;

122 
ušt64_t
 
v1
 = 0x646f72616e646f6dULL;

123 
ušt64_t
 
v2
 = 0x6c7967656e657261ULL;

124 
ušt64_t
 
v3
 = 0x7465646279746573ULL;

125 
ušt64_t
 
k0
 = 
	`U8TO64_LE
(
k
);

126 
ušt64_t
 
k1
 = 
	`U8TO64_LE
(
k
 + 8);

127 
ušt64_t
 
m
;

128 cÚ¡ 
ušt8_t
 *
’d
 = 
š
 + 
šËn
 - (šËÀ% (
ušt64_t
));

129 cÚ¡ 
Ëá
 = 
šËn
 & 7;

130 
ušt64_t
 
b
 = ((ušt64_t)
šËn
) << 56;

131 
v3
 ^ğ
k1
;

132 
v2
 ^ğ
k0
;

133 
v1
 ^ğ
k1
;

134 
v0
 ^ğ
k0
;

136 ; 
š
 !ğ
’d
; in += 8) {

137 
m
 = 
	`U8TO64_LE
(
š
);

138 
v3
 ^ğ
m
;

140 
SIPROUND
;

142 
v0
 ^ğ
m
;

145 
Ëá
) {

146 7: 
b
 |ğ((
ušt64_t
)
š
[6]) << 48;

147 6: 
b
 |ğ((
ušt64_t
)
š
[5]) << 40;

148 5: 
b
 |ğ((
ušt64_t
)
š
[4]) << 32;

149 4: 
b
 |ğ((
ušt64_t
)
š
[3]) << 24;

150 3: 
b
 |ğ((
ušt64_t
)
š
[2]) << 16;

151 2: 
b
 |ğ((
ušt64_t
)
š
[1]) << 8;

152 1: 
b
 |ğ((
ušt64_t
)
š
[0]); ;

156 
v3
 ^ğ
b
;

158 
SIPROUND
;

160 
v0
 ^ğ
b
;

161 
v2
 ^= 0xff;

163 
SIPROUND
;

164 
SIPROUND
;

166 
b
 = 
v0
 ^ 
v1
 ^ 
v2
 ^ 
v3
;

167 #iâdeà
UNALIGNED_LE_CPU


168 
	`U64TO8_LE
(
out
, 
b
);

169  
hash
;

171  
b
;

173 
	}
}

175 
ušt64_t
 
	$shash_noÿ£
(cÚ¡ 
ušt8_t
 *
š
, cÚ¡ 
size_t
 
šËn
, cÚ¡ ušt8_ˆ*
k
)

177 #iâdeà
UNALIGNED_LE_CPU


178 
ušt64_t
 
hash
;

179 
ušt8_t
 *
out
 = (ušt8_t*è&
hash
;

181 
ušt64_t
 
v0
 = 0x736f6d6570736575ULL;

182 
ušt64_t
 
v1
 = 0x646f72616e646f6dULL;

183 
ušt64_t
 
v2
 = 0x6c7967656e657261ULL;

184 
ušt64_t
 
v3
 = 0x7465646279746573ULL;

185 
ušt64_t
 
k0
 = 
	`U8TO64_LE
(
k
);

186 
ušt64_t
 
k1
 = 
	`U8TO64_LE
(
k
 + 8);

187 
ušt64_t
 
m
;

188 cÚ¡ 
ušt8_t
 *
’d
 = 
š
 + 
šËn
 - (šËÀ% (
ušt64_t
));

189 cÚ¡ 
Ëá
 = 
šËn
 & 7;

190 
ušt64_t
 
b
 = ((ušt64_t)
šËn
) << 56;

191 
v3
 ^ğ
k1
;

192 
v2
 ^ğ
k0
;

193 
v1
 ^ğ
k1
;

194 
v0
 ^ğ
k0
;

196 ; 
š
 !ğ
’d
; in += 8) {

197 
m
 = 
	`U8TO64_LE_NOCASE
(
š
);

198 
v3
 ^ğ
m
;

200 
SIPROUND
;

202 
v0
 ^ğ
m
;

205 
Ëá
) {

206 7: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[6])) << 48;

207 6: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[5])) << 40;

208 5: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[4])) << 32;

209 4: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[3])) << 24;

210 3: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[2])) << 16;

211 2: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[1])) << 8;

212 1: 
b
 |ğ((
ušt64_t
)
	`sw
(
š
[0])); ;

216 
v3
 ^ğ
b
;

218 
SIPROUND
;

220 
v0
 ^ğ
b
;

221 
v2
 ^= 0xff;

223 
SIPROUND
;

224 
SIPROUND
;

226 
b
 = 
v0
 ^ 
v1
 ^ 
v2
 ^ 
v3
;

227 #iâdeà
UNALIGNED_LE_CPU


228 
	`U64TO8_LE
(
out
, 
b
);

229  
hash
;

231  
b
;

233 
	}
}

238 #ifdeà
SIPHASH_TEST


240 cÚ¡ 
ušt8_t
 
	gveùÜs_s64
[64][8] = {

314 
	$shash_‹¡
() {

315 
ušt8_t
 
š
[64], 
k
[16];

316 
i
;

317 
çs
 = 0;

319 
i
 = 0; i < 16; ++i)

320 
k
[
i
] = i;

322 
i
 = 0; i < 64; ++i) {

323 
š
[
i
] = i;

324 
ušt64_t
 
hash
 = 
	`shash
(
š
, 
i
, 
k
);

325 cÚ¡ 
ušt8_t
 *
v
 = 
NULL
;

326 
v
 = (
ušt8_t
 *)
veùÜs_s64
;

327 ià(
	`memcmp
(&
hash
, 
v
 + (
i
 * 8), 8)) {

329 
çs
++;

334 
ušt64_t
 
h1
, 
h2
;

335 
h1
 = 
	`shash
((
ušt8_t
*)"hello world",11,(uint8_t*)"1234567812345678");

336 
h2
 = 
	`shash_noÿ£
((
ušt8_t
*)"hello world",11,(uint8_t*)"1234567812345678");

337 ià(
h1
 !ğ
h2
è
çs
++;

339 
h1
 = 
	`shash
((
ušt8_t
*)"hello world",11,(uint8_t*)"1234567812345678");

340 
h2
 = 
	`shash_noÿ£
((
ušt8_t
*)"HELLO world",11,(uint8_t*)"1234567812345678");

341 ià(
h1
 !ğ
h2
è
çs
++;

343 
h1
 = 
	`shash
((
ušt8_t
*)"HELLO world",11,(uint8_t*)"1234567812345678");

344 
h2
 = 
	`shash_noÿ£
((
ušt8_t
*)"HELLO world",11,(uint8_t*)"1234567812345678");

345 ià(
h1
 =ğ
h2
è
çs
++;

347 ià(!
çs
)  0;

349 
	}
}

351 
	$maš
() {

352 ià(
	`shash_‹¡
() == 0) {

353 
	`´štf
("SipHashest: OK\n");

356 
	`´štf
("SipHashest: FAILED\n");

359 
	}
}

	@slowlog.c

42 
	~"£rv”.h
"

43 
	~"¦owlog.h
"

48 
¦owlogEÁry
 *
	$¦owlogC»©eEÁry
(
ş›Á
 *
c
, 
robj
 **
¬gv
, 
¬gc
, 
du¿tiÚ
) {

49 
¦owlogEÁry
 *
£
 = 
	`zm®loc
((*se));

50 
j
, 
¦¬gc
 = 
¬gc
;

52 ià(
¦¬gc
 > 
SLOWLOG_ENTRY_MAX_ARGC
) slargc = SLOWLOG_ENTRY_MAX_ARGC;

53 
£
->
¬gc
 = 
¦¬gc
;

54 
£
->
¬gv
 = 
	`zm®loc
((
robj
*)*
¦¬gc
);

55 
j
 = 0; j < 
¦¬gc
; j++) {

59 ià(
¦¬gc
 !ğ
¬gc
 && 
j
 == slargc-1) {

60 
£
->
¬gv
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,

61 
	`sdsÿrštf
(
	`sd£m±y
(),"... (%d more‡rguments)",

62 
¬gc
-
¦¬gc
+1));

65 ià(
¬gv
[
j
]->
ty³
 =ğ
OBJ_STRING
 &&

66 
	`sdsEncodedObjeù
(
¬gv
[
j
]) &&

67 
	`sd¦’
(
¬gv
[
j
]->
±r
è> 
SLOWLOG_ENTRY_MAX_STRING
)

69 
sds
 
s
 = 
	`sd¢ewËn
(
¬gv
[
j
]->
±r
, 
SLOWLOG_ENTRY_MAX_STRING
);

71 
s
 = 
	`sdsÿrštf
(s,"... (%lu more bytes)",

73 
	`sd¦’
(
¬gv
[
j
]->
±r
è- 
SLOWLOG_ENTRY_MAX_STRING
);

74 
£
->
¬gv
[
j
] = 
	`ü—‹Objeù
(
OBJ_STRING
,
s
);

75 } ià(
¬gv
[
j
]->
»fcouÁ
 =ğ
OBJ_SHARED_REFCOUNT
) {

76 
£
->
¬gv
[
j
] =‡rgv[j];

84 
£
->
¬gv
[
j
] = 
	`dupSŒšgObjeù
(argv[j]);

88 
£
->
time
 = 
	`time
(
NULL
);

89 
£
->
du¿tiÚ
 = duration;

90 
£
->
id
 = 
£rv”
.
¦owlog_’Œy_id
++;

91 
£
->
³”id
 = 
	`sd¢ew
(
	`g‘Cl›ÁP“rId
(
c
));

92 
£
->
úame
 = 
c
->
Çme
 ? 
	`sd¢ew
(c->Çme->
±r
è: 
	`sd£m±y
();

93  
£
;

94 
	}
}

100 
	$¦owlogF»eEÁry
(*
£±r
) {

101 
¦owlogEÁry
 *
£
 = 
£±r
;

102 
j
;

104 
j
 = 0; j < 
£
->
¬gc
; j++)

105 
	`deüRefCouÁ
(
£
->
¬gv
[
j
]);

106 
	`zä“
(
£
->
¬gv
);

107 
	`sdsä“
(
£
->
³”id
);

108 
	`sdsä“
(
£
->
úame
);

109 
	`zä“
(
£
);

110 
	}
}

114 
	$¦owlogIn™
() {

115 
£rv”
.
¦owlog
 = 
	`li¡C»©e
();

116 
£rv”
.
¦owlog_’Œy_id
 = 0;

117 
	`li¡S‘F»eM‘hod
(
£rv”
.
¦owlog
,
¦owlogF»eEÁry
);

118 
	}
}

123 
	$¦owlogPushEÁryIfN“ded
(
ş›Á
 *
c
, 
robj
 **
¬gv
, 
¬gc
, 
du¿tiÚ
) {

124 ià(
£rv”
.
¦owlog_log_¦ow”_thª
 < 0) ;

125 ià(
du¿tiÚ
 >ğ
£rv”
.
¦owlog_log_¦ow”_thª
)

126 
	`li¡AddNodeH—d
(
£rv”
.
¦owlog
,

127 
	`¦owlogC»©eEÁry
(
c
,
¬gv
,
¬gc
,
du¿tiÚ
));

130 
	`li¡L’gth
(
£rv”
.
¦owlog
è> s”v”.
¦owlog_max_Ën
)

131 
	`li¡D–Node
(
£rv”
.
¦owlog
,
	`li¡La¡
(server.slowlog));

132 
	}
}

135 
	$¦owlogRe£t
() {

136 
	`li¡L’gth
(
£rv”
.
¦owlog
) > 0)

137 
	`li¡D–Node
(
£rv”
.
¦owlog
,
	`li¡La¡
(server.slowlog));

138 
	}
}

142 
	$¦owlogCommªd
(
ş›Á
 *
c
) {

143 ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"help")) {

144 cÚ¡ *
h–p
[] = {

150 
NULL


152 
	`addR•lyH–p
(
c
, 
h–p
);

153 } ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"reset")) {

154 
	`¦owlogRe£t
();

155 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

156 } ià(
c
->
¬gc
 =ğ2 && !
	`¡rÿ£cmp
(c->
¬gv
[1]->
±r
,"len")) {

157 
	`addR•lyLÚgLÚg
(
c
,
	`li¡L’gth
(
£rv”
.
¦owlog
));

158 } ià((
c
->
¬gc
 == 2 || c->argc == 3) &&

159 !
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"get"))

161 
couÁ
 = 10, 
£Á
 = 0;

162 
li¡I‹r
 
li
;

163 *
tÙ’Œ›s
;

164 
li¡Node
 *
Ê
;

165 
¦owlogEÁry
 *
£
;

167 ià(
c
->
¬gc
 == 3 &&

168 
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
couÁ
,
NULL
è!ğ
C_OK
)

171 
	`li¡Rewšd
(
£rv”
.
¦owlog
,&
li
);

172 
tÙ’Œ›s
 = 
	`addR•lyDeã¼edL’
(
c
);

173 
couÁ
-- && (
Ê
 = 
	`li¡Next
(&
li
))) {

174 
j
;

176 
£
 = 
Ê
->
v®ue
;

177 
	`addR•lyA¼ayL’
(
c
,6);

178 
	`addR•lyLÚgLÚg
(
c
,
£
->
id
);

179 
	`addR•lyLÚgLÚg
(
c
,
£
->
time
);

180 
	`addR•lyLÚgLÚg
(
c
,
£
->
du¿tiÚ
);

181 
	`addR•lyA¼ayL’
(
c
,
£
->
¬gc
);

182 
j
 = 0; j < 
£
->
¬gc
; j++)

183 
	`addR•lyBulk
(
c
,
£
->
¬gv
[
j
]);

184 
	`addR•lyBulkCBufãr
(
c
,
£
->
³”id
,
	`sd¦’
(se->peerid));

185 
	`addR•lyBulkCBufãr
(
c
,
£
->
úame
,
	`sd¦’
(se->cname));

186 
£Á
++;

188 
	`£tDeã¼edA¼ayL’
(
c
,
tÙ’Œ›s
,
£Á
);

190 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

192 
	}
}

	@slowlog.h

30 #iâdeà
__SLOWLOG_H__


31 
	#__SLOWLOG_H__


	)

33 
	#SLOWLOG_ENTRY_MAX_ARGC
 32

	)

34 
	#SLOWLOG_ENTRY_MAX_STRING
 128

	)

37 
	s¦owlogEÁry
 {

38 
robj
 **
	m¬gv
;

39 
	m¬gc
;

40 
	mid
;

41 
	mdu¿tiÚ
;

42 
time_t
 
	mtime
;

43 
sds
 
	múame
;

44 
sds
 
	m³”id
;

45 } 
	t¦owlogEÁry
;

48 
¦owlogIn™
();

49 
¦owlogPushEÁryIfN“ded
(
ş›Á
 *
c
, 
robj
 **
¬gv
, 
¬gc
, 
du¿tiÚ
);

52 
¦owlogCommªd
(
ş›Á
 *
c
);

	@solarisfixes.h

31 #ià
defšed
(
__sun
)

33 #ià
defšed
(
__GNUC__
)

34 
	~<m©h.h
>

35 #undeà
i¢ª


36 
	#i¢ª
(
x
) \

37 
	`__ex‹nsiÚ__
({ 
	`__ty³of
 (
x
è
__x_a
 = (x); \

38 
	`__butš_ex³ù
(
__x_a
 !ğ__x_a, 0); })

	)

40 #undeà
isfš™e


41 
	#isfš™e
(
x
) \

42 
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
x
è
__x_f
 = (x); \

43 
	`__butš_ex³ù
(!
	`i¢ª
(
__x_f
 - __x_f), 1); })

	)

45 #undeà
isšf


46 
	#isšf
(
x
) \

47 
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
x
è
__x_i
 = (x); \

48 
	`__butš_ex³ù
(!
	`i¢ª
(
__x_i
è&& !
	`isfš™e
(__x_i), 0); })

	)

50 
	#u_št
 
ušt


	)

51 
	#u_št32_t
 
ušt32_t


	)

	@sort.c

32 
	~"£rv”.h
"

33 
	~"pqsÜt.h
"

34 
	~<m©h.h
>

36 
zskli¡Node
* 
z¦G‘EËm’tByRªk
(
zskli¡
 *
z¦
, 
¿nk
);

38 
»disSÜtO³¿tiÚ
 *
	$ü—‹SÜtO³¿tiÚ
(
ty³
, 
robj
 *
·‰”n
) {

39 
»disSÜtO³¿tiÚ
 *
so
 = 
	`zm®loc
((*so));

40 
so
->
ty³
 =ype;

41 
so
->
·‰”n
 =…attern;

42  
so
;

43 
	}
}

61 
robj
 *
	$lookupKeyByP©‹º
(
»disDb
 *
db
, 
robj
 *
·‰”n
,„obj *
sub¡
, 
wr™eæag
) {

62 *
p
, *
f
, *
k
;

63 
sds
 
¥©
, 
ssub
;

64 
robj
 *
keyobj
, *
f›ldobj
 = 
NULL
, *
o
;

65 
´efixËn
, 
subËn
, 
po¡fixËn
, 
f›ldËn
;

69 
¥©
 = 
·‰”n
->
±r
;

70 ià(
¥©
[0] == '#' && spat[1] == '\0') {

71 
	`šüRefCouÁ
(
sub¡
);

72  
sub¡
;

78 
sub¡
 = 
	`g‘DecodedObjeù
(subst);

79 
ssub
 = 
sub¡
->
±r
;

83 
p
 = 
	`¡rchr
(
¥©
,'*');

84 ià(!
p
) {

85 
	`deüRefCouÁ
(
sub¡
);

86  
NULL
;

90 ià((
f
 = 
	`¡r¡r
(
p
+1, "->")è!ğ
NULL
 && *(f+2) != '\0') {

91 
f›ldËn
 = 
	`sd¦’
(
¥©
)-(
f
-spat)-2;

92 
f›ldobj
 = 
	`ü—‹SŒšgObjeù
(
f
+2,
f›ldËn
);

94 
f›ldËn
 = 0;

98 
´efixËn
 = 
p
-
¥©
;

99 
subËn
 = 
	`sd¦’
(
ssub
);

100 
po¡fixËn
 = 
	`sd¦’
(
¥©
)-(
´efixËn
+1)-(
f›ldËn
 ? fieldlen+2 : 0);

101 
keyobj
 = 
	`ü—‹SŒšgObjeù
(
NULL
,
´efixËn
+
subËn
+
po¡fixËn
);

102 
k
 = 
keyobj
->
±r
;

103 
	`memıy
(
k
,
¥©
,
´efixËn
);

104 
	`memıy
(
k
+
´efixËn
,
ssub
,
subËn
);

105 
	`memıy
(
k
+
´efixËn
+
subËn
,
p
+1,
po¡fixËn
);

106 
	`deüRefCouÁ
(
sub¡
);

109 ià(!
wr™eæag
)

110 
o
 = 
	`lookupKeyR—d
(
db
,
keyobj
);

112 
o
 = 
	`lookupKeyWr™e
(
db
,
keyobj
);

113 ià(
o
 =ğ
NULL
è
noobj
;

115 ià(
f›ldobj
) {

116 ià(
o
->
ty³
 !ğ
OBJ_HASH
è
noobj
;

120 
o
 = 
	`hashTy³G‘V®ueObjeù
(o, 
f›ldobj
->
±r
);

122 ià(
o
->
ty³
 !ğ
OBJ_STRING
è
noobj
;

126 
	`šüRefCouÁ
(
o
);

128 
	`deüRefCouÁ
(
keyobj
);

129 ià(
f›ldobj
è
	`deüRefCouÁ
(fieldobj);

130  
o
;

132 
noobj
:

133 
	`deüRefCouÁ
(
keyobj
);

134 ià(
f›ldËn
è
	`deüRefCouÁ
(
f›ldobj
);

135  
NULL
;

136 
	}
}

141 
	$sÜtCom·»
(cÚ¡ *
s1
, cÚ¡ *
s2
) {

142 cÚ¡ 
»disSÜtObjeù
 *
so1
 = 
s1
, *
so2
 = 
s2
;

143 
cmp
;

145 ià(!
£rv”
.
sÜt_®pha
) {

147 ià(
so1
->
u
.
scÜe
 > 
so2
->u.score) {

148 
cmp
 = 1;

149 } ià(
so1
->
u
.
scÜe
 < 
so2
->u.score) {

150 
cmp
 = -1;

155 
cmp
 = 
	`com·»SŒšgObjeùs
(
so1
->
obj
,
so2
->obj);

159 ià(
£rv”
.
sÜt_by·‰”n
) {

160 ià(!
so1
->
u
.
cmpobj
 || !
so2
->u.cmpobj) {

162 ià(
so1
->
u
.
cmpobj
 =ğ
so2
->u.cmpobj)

163 
cmp
 = 0;

164 ià(
so1
->
u
.
cmpobj
 =ğ
NULL
)

165 
cmp
 = -1;

167 
cmp
 = 1;

170 ià(
£rv”
.
sÜt_¡Üe
) {

171 
cmp
 = 
	`com·»SŒšgObjeùs
(
so1
->
u
.
cmpobj
,
so2
->u.cmpobj);

175 
cmp
 = 
	`¡rcŞl
(
so1
->
u
.
cmpobj
->
±r
,
so2
->u.cmpobj->ptr);

180 ià(
£rv”
.
sÜt_¡Üe
) {

181 
cmp
 = 
	`com·»SŒšgObjeùs
(
so1
->
obj
,
so2
->obj);

183 
cmp
 = 
	`cŞÏ‹SŒšgObjeùs
(
so1
->
obj
,
so2
->obj);

187  
£rv”
.
sÜt_desc
 ? -
cmp
 : cmp;

188 
	}
}

192 
	$sÜtCommªd
(
ş›Á
 *
c
) {

193 
li¡
 *
İ”©iÚs
;

194 
ouu’
 = 0;

195 
desc
 = 0, 
®pha
 = 0;

196 
lim™_¡¬t
 = 0, 
lim™_couÁ
 = -1, 
¡¬t
, 
’d
;

197 
j
, 
dÚtsÜt
 = 0, 
veùÜËn
;

198 
g‘İ
 = 0;

199 
št_cÚv”siÚ_”rÜ
 = 0;

200 
syÁax_”rÜ
 = 0;

201 
robj
 *
sÜtv®
, *
sÜtby
 = 
NULL
, *
¡Üekey
 = NULL;

202 
»disSÜtObjeù
 *
veùÜ
;

206 
İ”©iÚs
 = 
	`li¡C»©e
();

207 
	`li¡S‘F»eM‘hod
(
İ”©iÚs
,
zä“
);

208 
j
 = 2;

211 
j
 < 
c
->
¬gc
) {

212 
Ëá¬gs
 = 
c
->
¬gc
-
j
-1;

213 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"asc")) {

214 
desc
 = 0;

215 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"desc")) {

216 
desc
 = 1;

217 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"alpha")) {

218 
®pha
 = 1;

219 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"lim™"è&& 
Ëá¬gs
 >= 2) {

220 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
j
+1], &
lim™_¡¬t
, 
NULL
)

221 !ğ
C_OK
) ||

222 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
j
+2], &
lim™_couÁ
, 
NULL
)

223 !ğ
C_OK
))

225 
syÁax_”rÜ
++;

228 
j
+=2;

229 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"¡Üe"è&& 
Ëá¬gs
 >= 1) {

230 
¡Üekey
 = 
c
->
¬gv
[
j
+1];

231 
j
++;

232 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"by"è&& 
Ëá¬gs
 >= 1) {

233 
sÜtby
 = 
c
->
¬gv
[
j
+1];

236 ià(
	`¡rchr
(
c
->
¬gv
[
j
+1]->
±r
,'*'è=ğ
NULL
) {

237 
dÚtsÜt
 = 1;

241 ià(
£rv”
.
şu¡”_’abËd
) {

242 
	`addR•lyE¼Ü
(
c
,"BY option of SORT denied in Cluster mode.");

243 
syÁax_”rÜ
++;

247 
j
++;

248 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"g‘"è&& 
Ëá¬gs
 >= 1) {

249 ià(
£rv”
.
şu¡”_’abËd
) {

250 
	`addR•lyE¼Ü
(
c
,"GET option of SORT denied in Cluster mode.");

251 
syÁax_”rÜ
++;

254 
	`li¡AddNodeTa
(
İ”©iÚs
,
	`ü—‹SÜtO³¿tiÚ
(

255 
SORT_OP_GET
,
c
->
¬gv
[
j
+1]));

256 
g‘İ
++;

257 
j
++;

259 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

260 
syÁax_”rÜ
++;

263 
j
++;

267 ià(
syÁax_”rÜ
) {

268 
	`li¡R–—£
(
İ”©iÚs
);

273 ià(
¡Üekey
)

274 
sÜtv®
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1]);

276 
sÜtv®
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

277 ià(
sÜtv®
 && sÜtv®->
ty³
 !ğ
OBJ_SET
 &&

278 
sÜtv®
->
ty³
 !ğ
OBJ_LIST
 &&

279 
sÜtv®
->
ty³
 !ğ
OBJ_ZSET
)

281 
	`li¡R–—£
(
İ”©iÚs
);

282 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

289 ià(
sÜtv®
)

290 
	`šüRefCouÁ
(
sÜtv®
);

292 
sÜtv®
 = 
	`ü—‹Quickli¡Objeù
();

301 ià(
dÚtsÜt
 &&

302 
sÜtv®
->
ty³
 =ğ
OBJ_SET
 &&

303 (
¡Üekey
 || 
c
->
æags
 & 
CLIENT_LUA
))

306 
dÚtsÜt
 = 0;

307 
®pha
 = 1;

308 
sÜtby
 = 
NULL
;

312 ià(
sÜtv®
->
ty³
 =ğ
OBJ_ZSET
)

313 
	`z£tCÚv”t
(
sÜtv®
, 
OBJ_ENCODING_SKIPLIST
);

316 
sÜtv®
->
ty³
) {

317 
OBJ_LIST
: 
veùÜËn
 = 
	`li¡Ty³L’gth
(
sÜtv®
); ;

318 
OBJ_SET
: 
veùÜËn
 = 
	`£tTy³Size
(
sÜtv®
); ;

319 
OBJ_ZSET
: 
veùÜËn
 = 
	`diùSize
(((
z£t
*)
sÜtv®
->
±r
)->
diù
); ;

320 : 
veùÜËn
 = 0; 
	`£rv”Pªic
("Bad SORType");

324 
¡¬t
 = (
lim™_¡¬t
 < 0) ? 0 :†imit_start;

325 
’d
 = (
lim™_couÁ
 < 0è? 
veùÜËn
-1 : 
¡¬t
+limit_count-1;

326 ià(
¡¬t
 >ğ
veùÜËn
) {

327 
¡¬t
 = 
veùÜËn
-1;

328 
’d
 = 
veùÜËn
-2;

330 ià(
’d
 >ğ
veùÜËn
)ƒnd = vectorlen-1;

342 ià((
sÜtv®
->
ty³
 =ğ
OBJ_ZSET
 || sÜtv®->ty³ =ğ
OBJ_LIST
) &&

343 
dÚtsÜt
 &&

344 (
¡¬t
 !ğ0 || 
’d
 !ğ
veùÜËn
-1))

346 
veùÜËn
 = 
’d
-
¡¬t
+1;

350 
veùÜ
 = 
	`zm®loc
((
»disSÜtObjeù
)*
veùÜËn
);

351 
j
 = 0;

353 ià(
sÜtv®
->
ty³
 =ğ
OBJ_LIST
 && 
dÚtsÜt
) {

360 ià(
’d
 >ğ
¡¬t
) {

361 
li¡Ty³I‹¿tÜ
 *
li
;

362 
li¡Ty³EÁry
 
’Œy
;

363 
li
 = 
	`li¡Ty³In™I‹¿tÜ
(
sÜtv®
,

364 
desc
 ? ()(
	`li¡Ty³L’gth
(
sÜtv®
è- 
¡¬t
 - 1) : start,

365 
desc
 ? 
LIST_HEAD
 : 
LIST_TAIL
);

367 
j
 < 
veùÜËn
 && 
	`li¡Ty³Next
(
li
,&
’Œy
)) {

368 
veùÜ
[
j
].
obj
 = 
	`li¡Ty³G‘
(&
’Œy
);

369 
veùÜ
[
j
].
u
.
scÜe
 = 0;

370 
veùÜ
[
j
].
u
.
cmpobj
 = 
NULL
;

371 
j
++;

373 
	`li¡Ty³R–—£I‹¿tÜ
(
li
);

375 
’d
 -ğ
¡¬t
;

376 
¡¬t
 = 0;

378 } ià(
sÜtv®
->
ty³
 =ğ
OBJ_LIST
) {

379 
li¡Ty³I‹¿tÜ
 *
li
 = 
	`li¡Ty³In™I‹¿tÜ
(
sÜtv®
,0,
LIST_TAIL
);

380 
li¡Ty³EÁry
 
’Œy
;

381 
	`li¡Ty³Next
(
li
,&
’Œy
)) {

382 
veùÜ
[
j
].
obj
 = 
	`li¡Ty³G‘
(&
’Œy
);

383 
veùÜ
[
j
].
u
.
scÜe
 = 0;

384 
veùÜ
[
j
].
u
.
cmpobj
 = 
NULL
;

385 
j
++;

387 
	`li¡Ty³R–—£I‹¿tÜ
(
li
);

388 } ià(
sÜtv®
->
ty³
 =ğ
OBJ_SET
) {

389 
£tTy³I‹¿tÜ
 *
si
 = 
	`£tTy³In™I‹¿tÜ
(
sÜtv®
);

390 
sds
 
sd£Ë
;

391 (
sd£Ë
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

392 
veùÜ
[
j
].
obj
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
sd£Ë
);

393 
veùÜ
[
j
].
u
.
scÜe
 = 0;

394 
veùÜ
[
j
].
u
.
cmpobj
 = 
NULL
;

395 
j
++;

397 
	`£tTy³R–—£I‹¿tÜ
(
si
);

398 } ià(
sÜtv®
->
ty³
 =ğ
OBJ_ZSET
 && 
dÚtsÜt
) {

406 
z£t
 *
zs
 = 
sÜtv®
->
±r
;

407 
zskli¡
 *
z¦
 = 
zs
->zsl;

408 
zskli¡Node
 *
Ê
;

409 
sds
 
sd£Ë
;

410 
¿ng–’
 = 
veùÜËn
;

413 ià(
desc
) {

414 
z£’
 = 
	`diùSize
(((
z£t
*)
sÜtv®
->
±r
)->
diù
);

416 
Ê
 = 
z¦
->

;

417 ià(
¡¬t
 > 0)

418 
Ê
 = 
	`z¦G‘EËm’tByRªk
(
z¦
,
z£’
-
¡¬t
);

420 
Ê
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

421 ià(
¡¬t
 > 0)

422 
Ê
 = 
	`z¦G‘EËm’tByRªk
(
z¦
,
¡¬t
+1);

425 
¿ng–’
--) {

426 
	`£rv”As£¹W™hInfo
(
c
,
sÜtv®
,
Ê
 !ğ
NULL
);

427 
sd£Ë
 = 
Ê
->
–e
;

428 
veùÜ
[
j
].
obj
 = 
	`ü—‹SŒšgObjeù
(
sd£Ë
,
	`sd¦’
(sdsele));

429 
veùÜ
[
j
].
u
.
scÜe
 = 0;

430 
veùÜ
[
j
].
u
.
cmpobj
 = 
NULL
;

431 
j
++;

432 
Ê
 = 
desc
 ?†n->
backw¬d
 :†n->
Ëv–
[0].
fÜw¬d
;

435 
’d
 -ğ
¡¬t
;

436 
¡¬t
 = 0;

437 } ià(
sÜtv®
->
ty³
 =ğ
OBJ_ZSET
) {

438 
diù
 *
£t
 = ((
z£t
*)
sÜtv®
->
±r
)->dict;

439 
diùI‹¿tÜ
 *
di
;

440 
diùEÁry
 *
£‹Ë
;

441 
sds
 
sd£Ë
;

442 
di
 = 
	`diùG‘I‹¿tÜ
(
£t
);

443 (
£‹Ë
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

444 
sd£Ë
 = 
	`diùG‘Key
(
£‹Ë
);

445 
veùÜ
[
j
].
obj
 = 
	`ü—‹SŒšgObjeù
(
sd£Ë
,
	`sd¦’
(sdsele));

446 
veùÜ
[
j
].
u
.
scÜe
 = 0;

447 
veùÜ
[
j
].
u
.
cmpobj
 = 
NULL
;

448 
j
++;

450 
	`diùR–—£I‹¿tÜ
(
di
);

452 
	`£rv”Pªic
("Unknownype");

454 
	`£rv”As£¹W™hInfo
(
c
,
sÜtv®
,
j
 =ğ
veùÜËn
);

457 ià(!
dÚtsÜt
) {

458 
j
 = 0; j < 
veùÜËn
; j++) {

459 
robj
 *
byv®
;

460 ià(
sÜtby
) {

462 
byv®
 = 
	`lookupKeyByP©‹º
(
c
->
db
,
sÜtby
,
veùÜ
[
j
].
obj
,
¡Üekey
!=
NULL
);

463 ià(!
byv®
) ;

466 
byv®
 = 
veùÜ
[
j
].
obj
;

469 ià(
®pha
) {

470 ià(
sÜtby
è
veùÜ
[
j
].
u
.
cmpobj
 = 
	`g‘DecodedObjeù
(
byv®
);

472 ià(
	`sdsEncodedObjeù
(
byv®
)) {

473 *
•Œ
;

475 
veùÜ
[
j
].
u
.
scÜe
 = 
	`¡¹od
(
byv®
->
±r
,&
•Œ
);

476 ià(
•Œ
[0] !ğ'\0' || 
”ºo
 =ğ
ERANGE
 ||

477 
	`i¢ª
(
veùÜ
[
j
].
u
.
scÜe
))

479 
št_cÚv”siÚ_”rÜ
 = 1;

481 } ià(
byv®
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

485 
veùÜ
[
j
].
u
.
scÜe
 = ()
byv®
->
±r
;

487 
	`£rv”As£¹W™hInfo
(
c
,
sÜtv®
,1 != 1);

493 ià(
sÜtby
) {

494 
	`deüRefCouÁ
(
byv®
);

498 
£rv”
.
sÜt_desc
 = 
desc
;

499 
£rv”
.
sÜt_®pha
 = 
®pha
;

500 
£rv”
.
sÜt_by·‰”n
 = 
sÜtby
 ? 1 : 0;

501 
£rv”
.
sÜt_¡Üe
 = 
¡Üekey
 ? 1 : 0;

502 ià(
sÜtby
 && (
¡¬t
 !ğ0 || 
’d
 !ğ
veùÜËn
-1))

503 
	`pqsÜt
(
veùÜ
,
veùÜËn
,(
»disSÜtObjeù
),
sÜtCom·»
, 
¡¬t
,
’d
);

505 
	`qsÜt
(
veùÜ
,
veùÜËn
,(
»disSÜtObjeù
),
sÜtCom·»
);

510 
ouu’
 = 
g‘İ
 ? g‘İ*(
’d
-
¡¬t
+1) :ƒnd-start+1;

511 ià(
št_cÚv”siÚ_”rÜ
) {

512 
	`addR•lyE¼Ü
(
c
,"One or more scores can't be converted into double");

513 } ià(
¡Üekey
 =ğ
NULL
) {

515 
	`addR•lyA¼ayL’
(
c
,
ouu’
);

516 
j
 = 
¡¬t
; j <ğ
’d
; j++) {

517 
li¡Node
 *
Ê
;

518 
li¡I‹r
 
li
;

520 ià(!
g‘İ
è
	`addR•lyBulk
(
c
,
veùÜ
[
j
].
obj
);

521 
	`li¡Rewšd
(
İ”©iÚs
,&
li
);

522 (
Ê
 = 
	`li¡Next
(&
li
))) {

523 
»disSÜtO³¿tiÚ
 *
sİ
 = 
Ê
->
v®ue
;

524 
robj
 *
v®
 = 
	`lookupKeyByP©‹º
(
c
->
db
,
sİ
->
·‰”n
,

525 
veùÜ
[
j
].
obj
,
¡Üekey
!=
NULL
);

527 ià(
sİ
->
ty³
 =ğ
SORT_OP_GET
) {

528 ià(!
v®
) {

529 
	`addR•lyNuÎ
(
c
);

531 
	`addR•lyBulk
(
c
,
v®
);

532 
	`deüRefCouÁ
(
v®
);

536 
	`£rv”As£¹W™hInfo
(
c
,
sÜtv®
,
sİ
->
ty³
 =ğ
SORT_OP_GET
);

541 
robj
 *
sobj
 = 
	`ü—‹Quickli¡Objeù
();

544 
j
 = 
¡¬t
; j <ğ
’d
; j++) {

545 
li¡Node
 *
Ê
;

546 
li¡I‹r
 
li
;

548 ià(!
g‘İ
) {

549 
	`li¡Ty³Push
(
sobj
,
veùÜ
[
j
].
obj
,
LIST_TAIL
);

551 
	`li¡Rewšd
(
İ”©iÚs
,&
li
);

552 (
Ê
 = 
	`li¡Next
(&
li
))) {

553 
»disSÜtO³¿tiÚ
 *
sİ
 = 
Ê
->
v®ue
;

554 
robj
 *
v®
 = 
	`lookupKeyByP©‹º
(
c
->
db
,
sİ
->
·‰”n
,

555 
veùÜ
[
j
].
obj
,
¡Üekey
!=
NULL
);

557 ià(
sİ
->
ty³
 =ğ
SORT_OP_GET
) {

558 ià(!
v®
èv® = 
	`ü—‹SŒšgObjeù
("",0);

563 
	`li¡Ty³Push
(
sobj
,
v®
,
LIST_TAIL
);

564 
	`deüRefCouÁ
(
v®
);

567 
	`£rv”As£¹W™hInfo
(
c
,
sÜtv®
,
sİ
->
ty³
 =ğ
SORT_OP_GET
);

572 ià(
ouu’
) {

573 
	`£tKey
(
c
,c->
db
,
¡Üekey
,
sobj
);

574 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"sÜt¡Üe",
¡Üekey
,

575 
c
->
db
->
id
);

576 
£rv”
.
dœty
 +ğ
ouu’
;

577 } ià(
	`dbD–‘e
(
c
->
db
,
¡Üekey
)) {

578 
	`sigÇlModif›dKey
(
c
,c->
db
,
¡Üekey
);

579 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
¡Üekey
,
c
->
db
->
id
);

580 
£rv”
.
dœty
++;

582 
	`deüRefCouÁ
(
sobj
);

583 
	`addR•lyLÚgLÚg
(
c
,
ouu’
);

587 
j
 = 0; j < 
veùÜËn
; j++)

588 
	`deüRefCouÁ
(
veùÜ
[
j
].
obj
);

590 
	`deüRefCouÁ
(
sÜtv®
);

591 
	`li¡R–—£
(
İ”©iÚs
);

592 
j
 = 0; j < 
veùÜËn
; j++) {

593 ià(
®pha
 && 
veùÜ
[
j
].
u
.
cmpobj
)

594 
	`deüRefCouÁ
(
veùÜ
[
j
].
u
.
cmpobj
);

596 
	`zä“
(
veùÜ
);

597 
	}
}

	@sparkline.c

33 
	~"£rv”.h
"

35 
	~<m©h.h
>

39 
	gch¬£t
[] = "_-`";

40 
	gch¬£t_fl
[] = "_o#";

41 
	gch¬£t_Ën
 = (
ch¬£t
)-1;

42 
	gÏb–_m¬gš_tİ
 = 1;

57 
£qu’û
 *
	$ü—‹S·rklšeSequ’û
() {

58 
£qu’û
 *
£q
 = 
	`zm®loc
((*seq));

59 
£q
->
Ëngth
 = 0;

60 
£q
->
§m¶es
 = 
NULL
;

61  
£q
;

62 
	}
}

65 
	$¥¬klšeSequ’ûAddSam¶e
(
£qu’û
 *
£q
, 
v®ue
, *
Ïb–
) {

66 
Ïb–
 = (Ïb– =ğ
NULL
 ||†ab–[0] =ğ'\0'è? NULL : 
	`z¡rdup
(label);

67 ià(
£q
->
Ëngth
 == 0) {

68 
£q
->
mš
 = seq->
max
 = 
v®ue
;

70 ià(
v®ue
 < 
£q
->
mš
) seq->min = value;

71 ià(
v®ue
 > 
£q
->
max
) seq->max = value;

73 
£q
->
§m¶es
 = 
	`z»®loc
(£q->§m¶es,(
§m¶e
)*(£q->
Ëngth
+1));

74 
£q
->
§m¶es
[£q->
Ëngth
].
v®ue
 = value;

75 
£q
->
§m¶es
[£q->
Ëngth
].
Ïb–
 =†abel;

76 
£q
->
Ëngth
++;

77 ià(
Ïb–
è
£q
->
Ïb–s
++;

78 
	}
}

81 
	$ä“S·rklšeSequ’û
(
£qu’û
 *
£q
) {

82 
j
;

84 
j
 = 0; j < 
£q
->
Ëngth
; j++)

85 
	`zä“
(
£q
->
§m¶es
[
j
].
Ïb–
);

86 
	`zä“
(
£q
->
§m¶es
);

87 
	`zä“
(
£q
);

88 
	}
}

97 
sds
 
	$¥¬klšeR’d”Rªge
(
sds
 
ouut
, 
£qu’û
 *
£q
, 
rows
, 
off£t
, 
Ën
, 
æags
) {

98 
j
;

99 
»lmax
 = 
£q
->
max
 - seq->
mš
;

100 
¡•s
 = 
ch¬£t_Ën
*
rows
;

101 
row
 = 0;

102 *
ch¬s
 = 
	`zm®loc
(
Ën
);

103 
loİ
 = 1;

104 
İt_fl
 = 
æags
 & 
SPARKLINE_FILL
;

105 
İt_log
 = 
æags
 & 
SPARKLINE_LOG_SCALE
;

107 ià(
İt_log
) {

108 
»lmax
 = 
	`log
(relmax+1);

109 } ià(
»lmax
 == 0) {

110 
»lmax
 = 1;

113 
loİ
) {

114 
loİ
 = 0;

115 
	`mem£t
(
ch¬s
,' ',
Ën
);

116 
j
 = 0; j < 
Ën
; j++) {

117 
§m¶e
 *
s
 = &
£q
->
§m¶es
[
j
+
off£t
];

118 
»lv®
 = 
s
->
v®ue
 - 
£q
->
mš
;

119 
¡•
;

121 ià(
İt_log
è
»lv®
 = 
	`log
(relval+1);

122 
¡•
 = (è(
»lv®
*
¡•s
)/
»lmax
;

123 ià(
¡•
 < 0) step = 0;

124 ià(
¡•
 >ğ
¡•s
) step = steps-1;

126 ià(
row
 < 
rows
) {

128 
ch¬idx
 = 
¡•
-((
rows
-
row
-1)*
ch¬£t_Ën
);

129 
loİ
 = 1;

130 ià(
ch¬idx
 >ğ0 && ch¬idx < 
ch¬£t_Ën
) {

131 
ch¬s
[
j
] = 
İt_fl
 ? 
ch¬£t_fl
[
ch¬idx
] :

132 
ch¬£t
[
ch¬idx
];

133 } if(
İt_fl
 && 
ch¬idx
 >ğ
ch¬£t_Ën
) {

134 
ch¬s
[
j
] = '|';

138 ià(
£q
->
Ïb–s
 && 
row
-
rows
 < 
Ïb–_m¬gš_tİ
) {

139 
loİ
 = 1;

143 ià(
s
->
Ïb–
) {

144 
Ïb–_Ën
 = 
	`¡¾’
(
s
->
Ïb–
);

145 
Ïb–_ch¬
 = 
row
 - 
rows
 - 
Ïb–_m¬gš_tİ
;

147 ià(
Ïb–_Ën
 > 
Ïb–_ch¬
) {

148 
loİ
 = 1;

149 
ch¬s
[
j
] = 
s
->
Ïb–
[
Ïb–_ch¬
];

154 ià(
loİ
) {

155 
row
++;

156 
ouut
 = 
	`sdsÿ’
(ouut,
ch¬s
,
Ën
);

157 
ouut
 = 
	`sdsÿ’
(output,"\n",1);

160 
	`zä“
(
ch¬s
);

161  
ouut
;

162 
	}
}

165 
sds
 
	$¥¬klšeR’d”
(
sds
 
ouut
, 
£qu’û
 *
£q
, 
cŞumns
, 
rows
, 
æags
) {

166 
j
;

168 
j
 = 0; j < 
£q
->
Ëngth
; j +ğ
cŞumns
) {

169 
subËn
 = (
£q
->
Ëngth
-
j
è< 
cŞumns
 ? (seq->length-j) : columns;

171 ià(
j
 !ğ0è
ouut
 = 
	`sdsÿ’
(output,"\n",1);

172 
ouut
 = 
	`¥¬klšeR’d”Rªge
(ouut, 
£q
, 
rows
, 
j
, 
subËn
, 
æags
);

174  
ouut
;

175 
	}
}

	@sparkline.h

30 #iâdeà
__SPARKLINE_H


31 
	#__SPARKLINE_H


	)

34 
	s§m¶e
 {

35 
	mv®ue
;

36 *
	mÏb–
;

39 
	s£qu’û
 {

40 
	mËngth
;

41 
	mÏb–s
;

42 
§m¶e
 *
	m§m¶es
;

43 
	mmš
, 
	mmax
;

46 
	#SPARKLINE_NO_FLAGS
 0

	)

47 
	#SPARKLINE_FILL
 1

	)

48 
	#SPARKLINE_LOG_SCALE
 2

	)

50 
£qu’û
 *
ü—‹S·rklšeSequ’û
();

51 
¥¬klšeSequ’ûAddSam¶e
(
£qu’û
 *
£q
, 
v®ue
, *
Ïb–
);

52 
ä“S·rklšeSequ’û
(
£qu’û
 *
£q
);

53 
sds
 
¥¬klšeR’d”Rªge
(sd 
ouut
, 
£qu’û
 *
£q
, 
rows
, 
off£t
, 
Ën
, 
æags
);

54 
sds
 
¥¬klšeR’d”
(sd 
ouut
, 
£qu’û
 *
£q
, 
cŞumns
, 
rows
, 
æags
);

	@stream.h

1 #iâdeà
STREAM_H


2 
	#STREAM_H


	)

4 
	~"¿x.h
"

5 
	~"li¡·ck.h
"

11 
	s¡»amID
 {

12 
ušt64_t
 
	mms
;

13 
ušt64_t
 
	m£q
;

14 } 
	t¡»amID
;

16 
	s¡»am
 {

17 
¿x
 *
	m¿x
;

18 
ušt64_t
 
	mËngth
;

19 
¡»amID
 
	mÏ¡_id
;

20 
¿x
 *
	mcgroups
;

21 } 
	t¡»am
;

29 
	s¡»amI‹¿tÜ
 {

30 
¡»am
 *
	m¡»am
;

31 
¡»amID
 
	mma¡”_id
;

32 
ušt64_t
 
	mma¡”_f›lds_couÁ
;

33 *
	mma¡”_f›lds_¡¬t
;

34 *
	mma¡”_f›lds_±r
;

35 
	m’Œy_æags
;

36 
	m»v
;

37 
ušt64_t
 
	m¡¬t_key
[2];

38 
ušt64_t
 
	m’d_key
[2];

39 
¿xI‹¿tÜ
 
	mri
;

40 *
	mÍ
;

41 *
	mÍ_–e
;

42 *
	mÍ_æags
;

46 
	mf›ld_buf
[
LP_INTBUF_SIZE
];

47 
	mv®ue_buf
[
LP_INTBUF_SIZE
];

48 } 
	t¡»amI‹¿tÜ
;

51 
	s¡»amCG
 {

52 
¡»amID
 
	mÏ¡_id
;

55 
¿x
 *
	m³l
;

61 
¿x
 *
	mcÚsum”s
;

64 } 
	t¡»amCG
;

67 
	s¡»amCÚsum”
 {

68 
m¡ime_t
 
	m£’_time
;

69 
sds
 
	mÇme
;

72 
¿x
 *
	m³l
;

79 } 
	t¡»amCÚsum”
;

82 
	s¡»amNACK
 {

83 
m¡ime_t
 
	md–iv”y_time
;

84 
ušt64_t
 
	md–iv”y_couÁ
;

85 
¡»amCÚsum”
 *
	mcÚsum”
;

87 } 
	t¡»amNACK
;

91 
	s¡»amPrİInfo
 {

92 
robj
 *
	mkeyÇme
;

93 
robj
 *
	mgrou²ame
;

94 } 
	t¡»amPrİInfo
;

97 
	gş›Á
;

100 
	#SLC_NONE
 0

	)

101 
	#SLC_NOCREAT
 (1<<0è

	)

102 
	#SLC_NOREFRESH
 (1<<1è

	)

104 
¡»am
 *
¡»amNew
();

105 
ä“SŒ—m
(
¡»am
 *
s
);

106 
¡»amL’gth
(cÚ¡ 
robj
 *
subjeù
);

107 
size_t
 
¡»amR•lyW™hRªge
(
ş›Á
 *
c
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, size_ˆ
couÁ
, 
»v
, 
¡»amCG
 *
group
, 
¡»amCÚsum”
 *
cÚsum”
, 
æags
, 
¡»amPrİInfo
 *
¥i
);

108 
¡»amI‹¿tÜS¹
(
¡»amI‹¿tÜ
 *
si
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, 
»v
);

109 
¡»amI‹¿tÜG‘ID
(
¡»amI‹¿tÜ
 *
si
, 
¡»amID
 *
id
, 
št64_t
 *
numf›lds
);

110 
¡»amI‹¿tÜG‘F›ld
(
¡»amI‹¿tÜ
 *
si
, **
f›ld±r
, **
v®u•Œ
, 
št64_t
 *
f›ldËn
, iÁ64_ˆ*
v®u–’
);

111 
¡»amI‹¿tÜStİ
(
¡»amI‹¿tÜ
 *
si
);

112 
¡»amCG
 *
¡»amLookupCG
(
¡»am
 *
s
, 
sds
 
grou²ame
);

113 
¡»amCÚsum”
 *
¡»amLookupCÚsum”
(
¡»amCG
 *
cg
, 
sds
 
Çme
, 
æags
);

114 
¡»amCG
 *
¡»amC»©eCG
(
¡»am
 *
s
, *
Çme
, 
size_t
 
Çm–’
, 
¡»amID
 *
id
);

115 
¡»amNACK
 *
¡»amC»©eNACK
(
¡»amCÚsum”
 *
cÚsum”
);

116 
¡»amDecodeID
(*
buf
, 
¡»amID
 *
id
);

117 
¡»amCom·»ID
(
¡»amID
 *
a
, sŒ—mID *
b
);

118 
¡»amF»eNACK
(
¡»amNACK
 *
Ç
);

119 
¡»amInüID
(
¡»amID
 *
id
);

	@syncio.c

31 
	~"£rv”.h
"

43 
	#SYNCIO__RESOLUTION
 10

	)

49 
ssize_t
 
	$syncWr™e
(
fd
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

50 
ssize_t
 
nwr™‹n
, 
»t
 = 
size
;

51 
¡¬t
 = 
	`m¡ime
();

52 
»maššg
 = 
timeout
;

55 
wa™
 = (
»maššg
 > 
SYNCIO__RESOLUTION
) ?

56 
»maššg
 : 
SYNCIO__RESOLUTION
;

57 
–­£d
;

61 
nwr™‹n
 = 
	`wr™e
(
fd
,
±r
,
size
);

62 ià(
nwr™‹n
 == -1) {

63 ià(
”ºo
 !ğ
EAGAIN
)  -1;

65 
±r
 +ğ
nwr™‹n
;

66 
size
 -ğ
nwr™‹n
;

68 ià(
size
 =ğ0è 
»t
;

71 
	`«Wa™
(
fd
,
AE_WRITABLE
,
wa™
);

72 
–­£d
 = 
	`m¡ime
(è- 
¡¬t
;

73 ià(
–­£d
 >ğ
timeout
) {

74 
”ºo
 = 
ETIMEDOUT
;

77 
»maššg
 = 
timeout
 - 
–­£d
;

79 
	}
}

85 
ssize_t
 
	$syncR—d
(
fd
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

86 
ssize_t
 
Ä—d
, 
tÙ»ad
 = 0;

87 
¡¬t
 = 
	`m¡ime
();

88 
»maššg
 = 
timeout
;

90 ià(
size
 == 0)  0;

92 
wa™
 = (
»maššg
 > 
SYNCIO__RESOLUTION
) ?

93 
»maššg
 : 
SYNCIO__RESOLUTION
;

94 
–­£d
;

98 
Ä—d
 = 
	`»ad
(
fd
,
±r
,
size
);

99 ià(
Ä—d
 == 0)  -1;

100 ià(
Ä—d
 == -1) {

101 ià(
”ºo
 !ğ
EAGAIN
)  -1;

103 
±r
 +ğ
Ä—d
;

104 
size
 -ğ
Ä—d
;

105 
tÙ»ad
 +ğ
Ä—d
;

107 ià(
size
 =ğ0è 
tÙ»ad
;

110 
	`«Wa™
(
fd
,
AE_READABLE
,
wa™
);

111 
–­£d
 = 
	`m¡ime
(è- 
¡¬t
;

112 ià(
–­£d
 >ğ
timeout
) {

113 
”ºo
 = 
ETIMEDOUT
;

116 
»maššg
 = 
timeout
 - 
–­£d
;

118 
	}
}

125 
ssize_t
 
	$syncR—dLše
(
fd
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

126 
ssize_t
 
Ä—d
 = 0;

128 
size
--;

129 
size
) {

130 
c
;

132 ià(
	`syncR—d
(
fd
,&
c
,1,
timeout
) == -1)  -1;

133 ià(
c
 == '\n') {

134 *
±r
 = '\0';

135 ià(
Ä—d
 && *(
±r
-1) == '\r') *(ptr-1) = '\0';

136  
Ä—d
;

138 *
±r
++ = 
c
;

139 *
±r
 = '\0';

140 
Ä—d
++;

142 
size
--;

144  
Ä—d
;

145 
	}
}

	@t_hash.c

30 
	~"£rv”.h
"

31 
	~<m©h.h
>

40 
	$hashTy³TryCÚv”siÚ
(
robj
 *
o
,„obj **
¬gv
, 
¡¬t
, 
’d
) {

41 
i
;

43 ià(
o
->
’codšg
 !ğ
OBJ_ENCODING_ZIPLIST
) ;

45 
i
 = 
¡¬t
; i <ğ
’d
; i++) {

46 ià(
	`sdsEncodedObjeù
(
¬gv
[
i
]) &&

47 
	`sd¦’
(
¬gv
[
i
]->
±r
è> 
£rv”
.
hash_max_zli¡_v®ue
)

49 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

53 
	}
}

57 
	$hashTy³G‘FromZli¡
(
robj
 *
o
, 
sds
 
f›ld
,

58 **
v¡r
,

59 *
vËn
,

60 *
vÎ
)

62 *
zl
, *
åŒ
 = 
NULL
, *
v±r
 = NULL;

63 
»t
;

65 
	`£rv”As£¹
(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
);

67 
zl
 = 
o
->
±r
;

68 
åŒ
 = 
	`zli¡Index
(
zl
, 
ZIPLIST_HEAD
);

69 ià(
åŒ
 !ğ
NULL
) {

70 
åŒ
 = 
	`zli¡Fšd
(åŒ, (*)
f›ld
, 
	`sd¦’
(field), 1);

71 ià(
åŒ
 !ğ
NULL
) {

73 
v±r
 = 
	`zli¡Next
(
zl
, 
åŒ
);

74 
	`£rv”As£¹
(
v±r
 !ğ
NULL
);

78 ià(
v±r
 !ğ
NULL
) {

79 
»t
 = 
	`zli¡G‘
(
v±r
, 
v¡r
, 
vËn
, 
vÎ
);

80 
	`£rv”As£¹
(
»t
);

85 
	}
}

90 
sds
 
	$hashTy³G‘FromHashTabË
(
robj
 *
o
, 
sds
 
f›ld
) {

91 
diùEÁry
 *
de
;

93 
	`£rv”As£¹
(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
);

95 
de
 = 
	`diùFšd
(
o
->
±r
, 
f›ld
);

96 ià(
de
 =ğ
NULL
)  NULL;

97  
	`diùG‘V®
(
de
);

98 
	}
}

109 
	$hashTy³G‘V®ue
(
robj
 *
o
, 
sds
 
f›ld
, **
v¡r
, *
vËn
, *
vÎ
) {

110 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

111 *
v¡r
 = 
NULL
;

112 ià(
	`hashTy³G‘FromZli¡
(
o
, 
f›ld
, 
v¡r
, 
vËn
, 
vÎ
) == 0)

113  
C_OK
;

114 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

115 
sds
 
v®ue
;

116 ià((
v®ue
 = 
	`hashTy³G‘FromHashTabË
(
o
, 
f›ld
)è!ğ
NULL
) {

117 *
v¡r
 = (*è
v®ue
;

118 *
vËn
 = 
	`sd¦’
(
v®ue
);

119  
C_OK
;

122 
	`£rv”Pªic
("Unknown hashƒncoding");

124  
C_ERR
;

125 
	}
}

131 
robj
 *
	$hashTy³G‘V®ueObjeù
(
robj
 *
o
, 
sds
 
f›ld
) {

132 *
v¡r
;

133 
vËn
;

134 
vÎ
;

136 ià(
	`hashTy³G‘V®ue
(
o
,
f›ld
,&
v¡r
,&
vËn
,&
vÎ
è=ğ
C_ERR
è 
NULL
;

137 ià(
v¡r
è 
	`ü—‹SŒšgObjeù
((*)v¡r,
vËn
);

138  
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
vÎ
);

139 
	}
}

144 
size_t
 
	$hashTy³G‘V®ueL’gth
(
robj
 *
o
, 
sds
 
f›ld
) {

145 
size_t
 
Ën
 = 0;

146 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

147 *
v¡r
 = 
NULL
;

148 
vËn
 = 
UINT_MAX
;

149 
vÎ
 = 
LLONG_MAX
;

151 ià(
	`hashTy³G‘FromZli¡
(
o
, 
f›ld
, &
v¡r
, &
vËn
, &
vÎ
) == 0)

152 
Ën
 = 
v¡r
 ? 
vËn
 : 
	`sdig™s10
(
vÎ
);

153 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

154 
sds
 
aux
;

156 ià((
aux
 = 
	`hashTy³G‘FromHashTabË
(
o
, 
f›ld
)è!ğ
NULL
)

157 
Ën
 = 
	`sd¦’
(
aux
);

159 
	`£rv”Pªic
("Unknown hashƒncoding");

161  
Ën
;

162 
	}
}

166 
	$hashTy³Exi¡s
(
robj
 *
o
, 
sds
 
f›ld
) {

167 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

168 *
v¡r
 = 
NULL
;

169 
vËn
 = 
UINT_MAX
;

170 
vÎ
 = 
LLONG_MAX
;

172 ià(
	`hashTy³G‘FromZli¡
(
o
, 
f›ld
, &
v¡r
, &
vËn
, &
vÎ
) == 0)  1;

173 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

174 ià(
	`hashTy³G‘FromHashTabË
(
o
, 
f›ld
è!ğ
NULL
)  1;

176 
	`£rv”Pªic
("Unknown hashƒncoding");

179 
	}
}

199 
	#HASH_SET_TAKE_FIELD
 (1<<0)

	)

200 
	#HASH_SET_TAKE_VALUE
 (1<<1)

	)

201 
	#HASH_SET_COPY
 0

	)

202 
	$hashTy³S‘
(
robj
 *
o
, 
sds
 
f›ld
, sd 
v®ue
, 
æags
) {

203 
upd©e
 = 0;

205 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

206 *
zl
, *
åŒ
, *
v±r
;

208 
zl
 = 
o
->
±r
;

209 
åŒ
 = 
	`zli¡Index
(
zl
, 
ZIPLIST_HEAD
);

210 ià(
åŒ
 !ğ
NULL
) {

211 
åŒ
 = 
	`zli¡Fšd
(åŒ, (*)
f›ld
, 
	`sd¦’
(field), 1);

212 ià(
åŒ
 !ğ
NULL
) {

214 
v±r
 = 
	`zli¡Next
(
zl
, 
åŒ
);

215 
	`£rv”As£¹
(
v±r
 !ğ
NULL
);

216 
upd©e
 = 1;

219 
zl
 = 
	`zli¡D–‘e
(zl, &
v±r
);

222 
zl
 = 
	`zli¡In£¹
(zl, 
v±r
, (*)
v®ue
,

223 
	`sd¦’
(
v®ue
));

227 ià(!
upd©e
) {

229 
zl
 = 
	`zli¡Push
(zl, (*)
f›ld
, 
	`sd¦’
(field),

230 
ZIPLIST_TAIL
);

231 
zl
 = 
	`zli¡Push
(zl, (*)
v®ue
, 
	`sd¦’
(value),

232 
ZIPLIST_TAIL
);

234 
o
->
±r
 = 
zl
;

237 ià(
	`hashTy³L’gth
(
o
è> 
£rv”
.
hash_max_zli¡_’Œ›s
)

238 
	`hashTy³CÚv”t
(
o
, 
OBJ_ENCODING_HT
);

239 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

240 
diùEÁry
 *
de
 = 
	`diùFšd
(
o
->
±r
,
f›ld
);

241 ià(
de
) {

242 
	`sdsä“
(
	`diùG‘V®
(
de
));

243 ià(
æags
 & 
HASH_SET_TAKE_VALUE
) {

244 
	`diùG‘V®
(
de
èğ
v®ue
;

245 
v®ue
 = 
NULL
;

247 
	`diùG‘V®
(
de
èğ
	`sdsdup
(
v®ue
);

249 
upd©e
 = 1;

251 
sds
 
f
,
v
;

252 ià(
æags
 & 
HASH_SET_TAKE_FIELD
) {

253 
f
 = 
f›ld
;

254 
f›ld
 = 
NULL
;

256 
f
 = 
	`sdsdup
(
f›ld
);

258 ià(
æags
 & 
HASH_SET_TAKE_VALUE
) {

259 
v
 = 
v®ue
;

260 
v®ue
 = 
NULL
;

262 
v
 = 
	`sdsdup
(
v®ue
);

264 
	`diùAdd
(
o
->
±r
,
f
,
v
);

267 
	`£rv”Pªic
("Unknown hashƒncoding");

272 ià(
æags
 & 
HASH_SET_TAKE_FIELD
 && 
f›ld
è
	`sdsä“
(field);

273 ià(
æags
 & 
HASH_SET_TAKE_VALUE
 && 
v®ue
è
	`sdsä“
(value);

274  
upd©e
;

275 
	}
}

279 
	$hashTy³D–‘e
(
robj
 *
o
, 
sds
 
f›ld
) {

280 
d–‘ed
 = 0;

282 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

283 *
zl
, *
åŒ
;

285 
zl
 = 
o
->
±r
;

286 
åŒ
 = 
	`zli¡Index
(
zl
, 
ZIPLIST_HEAD
);

287 ià(
åŒ
 !ğ
NULL
) {

288 
åŒ
 = 
	`zli¡Fšd
(åŒ, (*)
f›ld
, 
	`sd¦’
(field), 1);

289 ià(
åŒ
 !ğ
NULL
) {

290 
zl
 = 
	`zli¡D–‘e
(zl,&
åŒ
);

291 
zl
 = 
	`zli¡D–‘e
(zl,&
åŒ
);

292 
o
->
±r
 = 
zl
;

293 
d–‘ed
 = 1;

296 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

297 ià(
	`diùD–‘e
((
diù
*)
o
->
±r
, 
f›ld
è=ğ
C_OK
) {

298 
d–‘ed
 = 1;

301 ià(
	`htN“dsResize
(
o
->
±r
)è
	`diùResize
(o->ptr);

305 
	`£rv”Pªic
("Unknown hashƒncoding");

307  
d–‘ed
;

308 
	}
}

311 
	$hashTy³L’gth
(cÚ¡ 
robj
 *
o
) {

312 
Ëngth
 = 
ULONG_MAX
;

314 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

315 
Ëngth
 = 
	`zli¡L’
(
o
->
±r
) / 2;

316 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

317 
Ëngth
 = 
	`diùSize
((cÚ¡ 
diù
*)
o
->
±r
);

319 
	`£rv”Pªic
("Unknown hashƒncoding");

321  
Ëngth
;

322 
	}
}

324 
hashTy³I‹¿tÜ
 *
	$hashTy³In™I‹¿tÜ
(
robj
 *
subjeù
) {

325 
hashTy³I‹¿tÜ
 *
hi
 = 
	`zm®loc
((hashTypeIterator));

326 
hi
->
subjeù
 = subject;

327 
hi
->
’codšg
 = 
subjeù
->encoding;

329 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

330 
hi
->
åŒ
 = 
NULL
;

331 
hi
->
v±r
 = 
NULL
;

332 } ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

333 
hi
->
di
 = 
	`diùG‘I‹¿tÜ
(
subjeù
->
±r
);

335 
	`£rv”Pªic
("Unknown hashƒncoding");

337  
hi
;

338 
	}
}

340 
	$hashTy³R–—£I‹¿tÜ
(
hashTy³I‹¿tÜ
 *
hi
) {

341 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

342 
	`diùR–—£I‹¿tÜ
(
hi
->
di
);

343 
	`zä“
(
hi
);

344 
	}
}

348 
	$hashTy³Next
(
hashTy³I‹¿tÜ
 *
hi
) {

349 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

350 *
zl
;

351 *
åŒ
, *
v±r
;

353 
zl
 = 
hi
->
subjeù
->
±r
;

354 
åŒ
 = 
hi
->fptr;

355 
v±r
 = 
hi
->vptr;

357 ià(
åŒ
 =ğ
NULL
) {

359 
	`£rv”As£¹
(
v±r
 =ğ
NULL
);

360 
åŒ
 = 
	`zli¡Index
(
zl
, 0);

363 
	`£rv”As£¹
(
v±r
 !ğ
NULL
);

364 
åŒ
 = 
	`zli¡Next
(
zl
, 
v±r
);

366 ià(
åŒ
 =ğ
NULL
è 
C_ERR
;

369 
v±r
 = 
	`zli¡Next
(
zl
, 
åŒ
);

370 
	`£rv”As£¹
(
v±r
 !ğ
NULL
);

373 
hi
->
åŒ
 = fptr;

374 
hi
->
v±r
 = vptr;

375 } ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

376 ià((
hi
->
de
 = 
	`diùNext
(hi->
di
)è=ğ
NULL
è 
C_ERR
;

378 
	`£rv”Pªic
("Unknown hashƒncoding");

380  
C_OK
;

381 
	}
}

385 
	$hashTy³Cu¼’tFromZli¡
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
,

386 **
v¡r
,

387 *
vËn
,

388 *
vÎ
)

390 
»t
;

392 
	`£rv”As£¹
(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
);

394 ià(
wh©
 & 
OBJ_HASH_KEY
) {

395 
»t
 = 
	`zli¡G‘
(
hi
->
åŒ
, 
v¡r
, 
vËn
, 
vÎ
);

396 
	`£rv”As£¹
(
»t
);

398 
»t
 = 
	`zli¡G‘
(
hi
->
v±r
, 
v¡r
, 
vËn
, 
vÎ
);

399 
	`£rv”As£¹
(
»t
);

401 
	}
}

406 
sds
 
	$hashTy³Cu¼’tFromHashTabË
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
) {

407 
	`£rv”As£¹
(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
);

409 ià(
wh©
 & 
OBJ_HASH_KEY
) {

410  
	`diùG‘Key
(
hi
->
de
);

412  
	`diùG‘V®
(
hi
->
de
);

414 
	}
}

426 
	$hashTy³Cu¼’tObjeù
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
, **
v¡r
, *
vËn
, *
vÎ
) {

427 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

428 *
v¡r
 = 
NULL
;

429 
	`hashTy³Cu¼’tFromZli¡
(
hi
, 
wh©
, 
v¡r
, 
vËn
, 
vÎ
);

430 } ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

431 
sds
 
–e
 = 
	`hashTy³Cu¼’tFromHashTabË
(
hi
, 
wh©
);

432 *
v¡r
 = (*è
–e
;

433 *
vËn
 = 
	`sd¦’
(
–e
);

435 
	`£rv”Pªic
("Unknown hashƒncoding");

437 
	}
}

441 
sds
 
	$hashTy³Cu¼’tObjeùNewSds
(
hashTy³I‹¿tÜ
 *
hi
, 
wh©
) {

442 *
v¡r
;

443 
vËn
;

444 
vÎ
;

446 
	`hashTy³Cu¼’tObjeù
(
hi
,
wh©
,&
v¡r
,&
vËn
,&
vÎ
);

447 ià(
v¡r
è 
	`sd¢ewËn
(v¡r,
vËn
);

448  
	`sdsäomlÚglÚg
(
vÎ
);

449 
	}
}

451 
robj
 *
	$hashTy³LookupWr™eOrC»©e
(
ş›Á
 *
c
, 
robj
 *
key
) {

452 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
,
key
);

453 ià(
o
 =ğ
NULL
) {

454 
o
 = 
	`ü—‹HashObjeù
();

455 
	`dbAdd
(
c
->
db
,
key
,
o
);

457 ià(
o
->
ty³
 !ğ
OBJ_HASH
) {

458 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

459  
NULL
;

462  
o
;

463 
	}
}

465 
	$hashTy³CÚv”tZli¡
(
robj
 *
o
, 
’c
) {

466 
	`£rv”As£¹
(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
);

468 ià(
’c
 =ğ
OBJ_ENCODING_ZIPLIST
) {

471 } ià(
’c
 =ğ
OBJ_ENCODING_HT
) {

472 
hashTy³I‹¿tÜ
 *
hi
;

473 
diù
 *dict;

474 
»t
;

476 
hi
 = 
	`hashTy³In™I‹¿tÜ
(
o
);

477 
diù
 = 
	`diùC»©e
(&
hashDiùTy³
, 
NULL
);

479 
	`hashTy³Next
(
hi
è!ğ
C_ERR
) {

480 
sds
 
key
, 
v®ue
;

482 
key
 = 
	`hashTy³Cu¼’tObjeùNewSds
(
hi
,
OBJ_HASH_KEY
);

483 
v®ue
 = 
	`hashTy³Cu¼’tObjeùNewSds
(
hi
,
OBJ_HASH_VALUE
);

484 
»t
 = 
	`diùAdd
(
diù
, 
key
, 
v®ue
);

485 ià(
»t
 !ğ
DICT_OK
) {

486 
	`£rv”LogHexDump
(
LL_WARNING
,"ziplist with dupƒlements dump",

487 
o
->
±r
,
	`zli¡BlobL’
(o->ptr));

488 
	`£rv”Pªic
("Ziplist corruption detected");

491 
	`hashTy³R–—£I‹¿tÜ
(
hi
);

492 
	`zä“
(
o
->
±r
);

493 
o
->
’codšg
 = 
OBJ_ENCODING_HT
;

494 
o
->
±r
 = 
diù
;

496 
	`£rv”Pªic
("Unknown hashƒncoding");

498 
	}
}

500 
	$hashTy³CÚv”t
(
robj
 *
o
, 
’c
) {

501 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

502 
	`hashTy³CÚv”tZli¡
(
o
, 
’c
);

503 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

504 
	`£rv”Pªic
("Not implemented");

506 
	`£rv”Pªic
("Unknown hashƒncoding");

508 
	}
}

514 
	$h£ŠxCommªd
(
ş›Á
 *
c
) {

515 
robj
 *
o
;

516 ià((
o
 = 
	`hashTy³LookupWr™eOrC»©e
(
c
,c->
¬gv
[1])è=ğ
NULL
) ;

517 
	`hashTy³TryCÚv”siÚ
(
o
,
c
->
¬gv
,2,3);

519 ià(
	`hashTy³Exi¡s
(
o
, 
c
->
¬gv
[2]->
±r
)) {

520 
	`addR•ly
(
c
, 
sh¬ed
.
cz”o
);

522 
	`hashTy³S‘
(
o
,
c
->
¬gv
[2]->
±r
,c->¬gv[3]->±r,
HASH_SET_COPY
);

523 
	`addR•ly
(
c
, 
sh¬ed
.
cÚe
);

524 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

525 
	`nÙifyKey¥aûEv’t
(
NOTIFY_HASH
,"h£t",
c
->
¬gv
[1],c->
db
->
id
);

526 
£rv”
.
dœty
++;

528 
	}
}

530 
	$h£tCommªd
(
ş›Á
 *
c
) {

531 
i
, 
ü—‹d
 = 0;

532 
robj
 *
o
;

534 ià((
c
->
¬gc
 % 2) == 1) {

535 
	`addR•lyE¼Ü
(
c
,"wrong‚umber of‡rguments for HMSET");

539 ià((
o
 = 
	`hashTy³LookupWr™eOrC»©e
(
c
,c->
¬gv
[1])è=ğ
NULL
) ;

540 
	`hashTy³TryCÚv”siÚ
(
o
,
c
->
¬gv
,2,c->
¬gc
-1);

542 
i
 = 2; i < 
c
->
¬gc
; i += 2)

543 
ü—‹d
 +ğ!
	`hashTy³S‘
(
o
,
c
->
¬gv
[
i
]->
±r
,c->¬gv[i+1]->±r,
HASH_SET_COPY
);

546 *
cmdÇme
 = 
c
->
¬gv
[0]->
±r
;

547 ià(
cmdÇme
[1] == 's' || cmdname[1] == 'S') {

549 
	`addR•lyLÚgLÚg
(
c
, 
ü—‹d
);

552 
	`addR•ly
(
c
, 
sh¬ed
.
ok
);

554 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

555 
	`nÙifyKey¥aûEv’t
(
NOTIFY_HASH
,"h£t",
c
->
¬gv
[1],c->
db
->
id
);

556 
£rv”
.
dœty
++;

557 
	}
}

559 
	$hšübyCommªd
(
ş›Á
 *
c
) {

560 
v®ue
, 
šü
, 
Şdv®ue
;

561 
robj
 *
o
;

562 
sds
 
Ãw
;

563 *
v¡r
;

564 
vËn
;

566 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
šü
,
NULL
è!ğ
C_OK
) ;

567 ià((
o
 = 
	`hashTy³LookupWr™eOrC»©e
(
c
,c->
¬gv
[1])è=ğ
NULL
) ;

568 ià(
	`hashTy³G‘V®ue
(
o
,
c
->
¬gv
[2]->
±r
,&
v¡r
,&
vËn
,&
v®ue
è=ğ
C_OK
) {

569 ià(
v¡r
) {

570 ià(
	`¡ršg2Î
((*)
v¡r
,
vËn
,&
v®ue
) == 0) {

571 
	`addR•lyE¼Ü
(
c
,"hash value is‚ot‡n integer");

576 
v®ue
 = 0;

579 
Şdv®ue
 = 
v®ue
;

580 ià((
šü
 < 0 && 
Şdv®ue
 < 0 && inü < (
LLONG_MIN
-oldvalue)) ||

581 (
šü
 > 0 && 
Şdv®ue
 > 0 && inü > (
LLONG_MAX
-oldvalue))) {

582 
	`addR•lyE¼Ü
(
c
,"increment or decrement would overflow");

585 
v®ue
 +ğ
šü
;

586 
Ãw
 = 
	`sdsäomlÚglÚg
(
v®ue
);

587 
	`hashTy³S‘
(
o
,
c
->
¬gv
[2]->
±r
,
Ãw
,
HASH_SET_TAKE_VALUE
);

588 
	`addR•lyLÚgLÚg
(
c
,
v®ue
);

589 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

590 
	`nÙifyKey¥aûEv’t
(
NOTIFY_HASH
,"hšüby",
c
->
¬gv
[1],c->
db
->
id
);

591 
£rv”
.
dœty
++;

592 
	}
}

594 
	$hšübyæßtCommªd
(
ş›Á
 *
c
) {

595 
v®ue
, 
šü
;

596 
Î
;

597 
robj
 *
o
;

598 
sds
 
Ãw
;

599 *
v¡r
;

600 
vËn
;

602 ià(
	`g‘LÚgDoubËFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
šü
,
NULL
è!ğ
C_OK
) ;

603 ià((
o
 = 
	`hashTy³LookupWr™eOrC»©e
(
c
,c->
¬gv
[1])è=ğ
NULL
) ;

604 ià(
	`hashTy³G‘V®ue
(
o
,
c
->
¬gv
[2]->
±r
,&
v¡r
,&
vËn
,&
Î
è=ğ
C_OK
) {

605 ià(
v¡r
) {

606 ià(
	`¡ršg2ld
((*)
v¡r
,
vËn
,&
v®ue
) == 0) {

607 
	`addR•lyE¼Ü
(
c
,"hash value is‚ot‡ float");

611 
v®ue
 = ()
Î
;

614 
v®ue
 = 0;

617 
v®ue
 +ğ
šü
;

618 ià(
	`i¢ª
(
v®ue
è|| 
	`isšf
(value)) {

619 
	`addR•lyE¼Ü
(
c
,"increment would…roduce NaN or Infinity");

623 
buf
[
MAX_LONG_DOUBLE_CHARS
];

624 
Ën
 = 
	`ld2¡ršg
(
buf
,(buf),
v®ue
,
LD_STR_HUMAN
);

625 
Ãw
 = 
	`sd¢ewËn
(
buf
,
Ën
);

626 
	`hashTy³S‘
(
o
,
c
->
¬gv
[2]->
±r
,
Ãw
,
HASH_SET_TAKE_VALUE
);

627 
	`addR•lyBulkCBufãr
(
c
,
buf
,
Ën
);

628 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

629 
	`nÙifyKey¥aûEv’t
(
NOTIFY_HASH
,"hšübyæßt",
c
->
¬gv
[1],c->
db
->
id
);

630 
£rv”
.
dœty
++;

635 
robj
 *
aux
, *
Ãwobj
;

636 
aux
 = 
	`ü—‹SŒšgObjeù
("HSET",4);

637 
Ãwobj
 = 
	`ü—‹RawSŒšgObjeù
(
buf
,
Ën
);

638 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,0,
aux
);

639 
	`deüRefCouÁ
(
aux
);

640 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,3,
Ãwobj
);

641 
	`deüRefCouÁ
(
Ãwobj
);

642 
	}
}

644 
	$addHashF›ldToR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, 
sds
 
f›ld
) {

645 
»t
;

647 ià(
o
 =ğ
NULL
) {

648 
	`addR•lyNuÎ
(
c
);

652 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

653 *
v¡r
 = 
NULL
;

654 
vËn
 = 
UINT_MAX
;

655 
vÎ
 = 
LLONG_MAX
;

657 
»t
 = 
	`hashTy³G‘FromZli¡
(
o
, 
f›ld
, &
v¡r
, &
vËn
, &
vÎ
);

658 ià(
»t
 < 0) {

659 
	`addR•lyNuÎ
(
c
);

661 ià(
v¡r
) {

662 
	`addR•lyBulkCBufãr
(
c
, 
v¡r
, 
vËn
);

664 
	`addR•lyBulkLÚgLÚg
(
c
, 
vÎ
);

668 } ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

669 
sds
 
v®ue
 = 
	`hashTy³G‘FromHashTabË
(
o
, 
f›ld
);

670 ià(
v®ue
 =ğ
NULL
)

671 
	`addR•lyNuÎ
(
c
);

673 
	`addR•lyBulkCBufãr
(
c
, 
v®ue
, 
	`sd¦’
(value));

675 
	`£rv”Pªic
("Unknown hashƒncoding");

677 
	}
}

679 
	$hg‘Commªd
(
ş›Á
 *
c
) {

680 
robj
 *
o
;

682 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
])è=ğ
NULL
 ||

683 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

685 
	`addHashF›ldToR•ly
(
c
, 
o
, c->
¬gv
[2]->
±r
);

686 
	}
}

688 
	$hmg‘Commªd
(
ş›Á
 *
c
) {

689 
robj
 *
o
;

690 
i
;

694 
o
 = 
	`lookupKeyR—d
(
c
->
db
, c->
¬gv
[1]);

695 ià(
o
 !ğ
NULL
 && o->
ty³
 !ğ
OBJ_HASH
) {

696 
	`addR•ly
(
c
, 
sh¬ed
.
wrÚgty³”r
);

700 
	`addR•lyA¼ayL’
(
c
, c->
¬gc
-2);

701 
i
 = 2; i < 
c
->
¬gc
; i++) {

702 
	`addHashF›ldToR•ly
(
c
, 
o
, c->
¬gv
[
i
]->
±r
);

704 
	}
}

706 
	$hd–Commªd
(
ş›Á
 *
c
) {

707 
robj
 *
o
;

708 
j
, 
d–‘ed
 = 0, 
key»moved
 = 0;

710 ià((
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

711 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

713 
j
 = 2; j < 
c
->
¬gc
; j++) {

714 ià(
	`hashTy³D–‘e
(
o
,
c
->
¬gv
[
j
]->
±r
)) {

715 
d–‘ed
++;

716 ià(
	`hashTy³L’gth
(
o
) == 0) {

717 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

718 
key»moved
 = 1;

723 ià(
d–‘ed
) {

724 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

725 
	`nÙifyKey¥aûEv’t
(
NOTIFY_HASH
,"hd–",
c
->
¬gv
[1],c->
db
->
id
);

726 ià(
key»moved
)

727 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],

728 
c
->
db
->
id
);

729 
£rv”
.
dœty
 +ğ
d–‘ed
;

731 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

732 
	}
}

734 
	$hËnCommªd
(
ş›Á
 *
c
) {

735 
robj
 *
o
;

737 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

738 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

740 
	`addR•lyLÚgLÚg
(
c
,
	`hashTy³L’gth
(
o
));

741 
	}
}

743 
	$h¡¾’Commªd
(
ş›Á
 *
c
) {

744 
robj
 *
o
;

746 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

747 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

748 
	`addR•lyLÚgLÚg
(
c
,
	`hashTy³G‘V®ueL’gth
(
o
,c->
¬gv
[2]->
±r
));

749 
	}
}

751 
	$addHashI‹¿tÜCursÜToR•ly
(
ş›Á
 *
c
, 
hashTy³I‹¿tÜ
 *
hi
, 
wh©
) {

752 ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

753 *
v¡r
 = 
NULL
;

754 
vËn
 = 
UINT_MAX
;

755 
vÎ
 = 
LLONG_MAX
;

757 
	`hashTy³Cu¼’tFromZli¡
(
hi
, 
wh©
, &
v¡r
, &
vËn
, &
vÎ
);

758 ià(
v¡r
)

759 
	`addR•lyBulkCBufãr
(
c
, 
v¡r
, 
vËn
);

761 
	`addR•lyBulkLÚgLÚg
(
c
, 
vÎ
);

762 } ià(
hi
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

763 
sds
 
v®ue
 = 
	`hashTy³Cu¼’tFromHashTabË
(
hi
, 
wh©
);

764 
	`addR•lyBulkCBufãr
(
c
, 
v®ue
, 
	`sd¦’
(value));

766 
	`£rv”Pªic
("Unknown hashƒncoding");

768 
	}
}

770 
	$g’”icHg‘®lCommªd
(
ş›Á
 *
c
, 
æags
) {

771 
robj
 *
o
;

772 
hashTy³I‹¿tÜ
 *
hi
;

773 
Ëngth
, 
couÁ
 = 0;

775 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±ym­
[c->
»¥
]))

776 =ğ
NULL
 || 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

780 
Ëngth
 = 
	`hashTy³L’gth
(
o
);

781 ià(
æags
 & 
OBJ_HASH_KEY
 && fÏg & 
OBJ_HASH_VALUE
) {

782 
	`addR•lyM­L’
(
c
, 
Ëngth
);

784 
	`addR•lyA¼ayL’
(
c
, 
Ëngth
);

787 
hi
 = 
	`hashTy³In™I‹¿tÜ
(
o
);

788 
	`hashTy³Next
(
hi
è!ğ
C_ERR
) {

789 ià(
æags
 & 
OBJ_HASH_KEY
) {

790 
	`addHashI‹¿tÜCursÜToR•ly
(
c
, 
hi
, 
OBJ_HASH_KEY
);

791 
couÁ
++;

793 ià(
æags
 & 
OBJ_HASH_VALUE
) {

794 
	`addHashI‹¿tÜCursÜToR•ly
(
c
, 
hi
, 
OBJ_HASH_VALUE
);

795 
couÁ
++;

799 
	`hashTy³R–—£I‹¿tÜ
(
hi
);

802 ià(
æags
 & 
OBJ_HASH_KEY
 && fÏg & 
OBJ_HASH_VALUE
è
couÁ
 /= 2;

803 
	`£rv”As£¹
(
couÁ
 =ğ
Ëngth
);

804 
	}
}

806 
	$hkeysCommªd
(
ş›Á
 *
c
) {

807 
	`g’”icHg‘®lCommªd
(
c
,
OBJ_HASH_KEY
);

808 
	}
}

810 
	$hv®sCommªd
(
ş›Á
 *
c
) {

811 
	`g’”icHg‘®lCommªd
(
c
,
OBJ_HASH_VALUE
);

812 
	}
}

814 
	$hg‘®lCommªd
(
ş›Á
 *
c
) {

815 
	`g’”icHg‘®lCommªd
(
c
,
OBJ_HASH_KEY
|
OBJ_HASH_VALUE
);

816 
	}
}

818 
	$hexi¡sCommªd
(
ş›Á
 *
c
) {

819 
robj
 *
o
;

820 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

821 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

823 
	`addR•ly
(
c
, 
	`hashTy³Exi¡s
(
o
,c->
¬gv
[2]->
±r
è? 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

824 
	}
}

826 
	$hsÿnCommªd
(
ş›Á
 *
c
) {

827 
robj
 *
o
;

828 
cursÜ
;

830 ià(
	`·r£SÿnCursÜOrR•ly
(
c
,c->
¬gv
[2],&
cursÜ
è=ğ
C_ERR
) ;

831 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±ysÿn
)è=ğ
NULL
 ||

832 
	`checkTy³
(
c
,
o
,
OBJ_HASH
)) ;

833 
	`sÿnG’”icCommªd
(
c
,
o
,
cursÜ
);

834 
	}
}

	@t_list.c

30 
	~"£rv”.h
"

41 
	$li¡Ty³Push
(
robj
 *
subjeù
,„obj *
v®ue
, 
wh”e
) {

42 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

43 
pos
 = (
wh”e
 =ğ
LIST_HEAD
è? 
QUICKLIST_HEAD
 : 
QUICKLIST_TAIL
;

44 
v®ue
 = 
	`g‘DecodedObjeù
(value);

45 
size_t
 
Ën
 = 
	`sd¦’
(
v®ue
->
±r
);

46 
	`quickli¡Push
(
subjeù
->
±r
, 
v®ue
->±r, 
Ën
, 
pos
);

47 
	`deüRefCouÁ
(
v®ue
);

49 
	`£rv”Pªic
("Unknown†istƒncoding");

51 
	}
}

53 *
	$li¡PİSav”
(*
d©a
, 
sz
) {

54  
	`ü—‹SŒšgObjeù
((*)
d©a
,
sz
);

55 
	}
}

57 
robj
 *
	$li¡Ty³Pİ
(
robj
 *
subjeù
, 
wh”e
) {

58 
vlÚg
;

59 
robj
 *
v®ue
 = 
NULL
;

61 
ql_wh”e
 = 
wh”e
 =ğ
LIST_HEAD
 ? 
QUICKLIST_HEAD
 : 
QUICKLIST_TAIL
;

62 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

63 ià(
	`quickli¡PİCu¡om
(
subjeù
->
±r
, 
ql_wh”e
, (**)&
v®ue
,

64 
NULL
, &
vlÚg
, 
li¡PİSav”
)) {

65 ià(!
v®ue
)

66 
v®ue
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
vlÚg
);

69 
	`£rv”Pªic
("Unknown†istƒncoding");

71  
v®ue
;

72 
	}
}

74 
	$li¡Ty³L’gth
(cÚ¡ 
robj
 *
subjeù
) {

75 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

76  
	`quickli¡CouÁ
(
subjeù
->
±r
);

78 
	`£rv”Pªic
("Unknown†istƒncoding");

80 
	}
}

83 
li¡Ty³I‹¿tÜ
 *
	$li¡Ty³In™I‹¿tÜ
(
robj
 *
subjeù
, 
šdex
,

84 
dœeùiÚ
) {

85 
li¡Ty³I‹¿tÜ
 *
li
 = 
	`zm®loc
((listTypeIterator));

86 
li
->
subjeù
 = subject;

87 
li
->
’codšg
 = 
subjeù
->encoding;

88 
li
->
dœeùiÚ
 = direction;

89 
li
->
™”
 = 
NULL
;

92 
™”_dœeùiÚ
 =

93 
dœeùiÚ
 =ğ
LIST_HEAD
 ? 
AL_START_TAIL
 : 
AL_START_HEAD
;

94 ià(
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

95 
li
->
™”
 = 
	`quickli¡G‘I‹¿tÜAtIdx
Öi->
subjeù
->
±r
,

96 
™”_dœeùiÚ
, 
šdex
);

98 
	`£rv”Pªic
("Unknown†istƒncoding");

100  
li
;

101 
	}
}

104 
	$li¡Ty³R–—£I‹¿tÜ
(
li¡Ty³I‹¿tÜ
 *
li
) {

105 
	`zä“
(
li
->
™”
);

106 
	`zä“
(
li
);

107 
	}
}

112 
	$li¡Ty³Next
(
li¡Ty³I‹¿tÜ
 *
li
, 
li¡Ty³EÁry
 *
’Œy
) {

114 
	`£rv”As£¹
(
li
->
subjeù
->
’codšg
 ==†i->encoding);

116 
’Œy
->
li
 =†i;

117 ià(
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

118  
	`quickli¡Next
(
li
->
™”
, &
’Œy
->entry);

120 
	`£rv”Pªic
("Unknown†istƒncoding");

123 
	}
}

126 
robj
 *
	$li¡Ty³G‘
(
li¡Ty³EÁry
 *
’Œy
) {

127 
robj
 *
v®ue
 = 
NULL
;

128 ià(
’Œy
->
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

129 ià(
’Œy
->’Œy.
v®ue
) {

130 
v®ue
 = 
	`ü—‹SŒšgObjeù
((*)
’Œy
->entry.value,

131 
’Œy
->’Œy.
sz
);

133 
v®ue
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
’Œy
->’Œy.
lÚgv®
);

136 
	`£rv”Pªic
("Unknown†istƒncoding");

138  
v®ue
;

139 
	}
}

141 
	$li¡Ty³In£¹
(
li¡Ty³EÁry
 *
’Œy
, 
robj
 *
v®ue
, 
wh”e
) {

142 ià(
’Œy
->
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

143 
v®ue
 = 
	`g‘DecodedObjeù
(value);

144 
sds
 
¡r
 = 
v®ue
->
±r
;

145 
size_t
 
Ën
 = 
	`sd¦’
(
¡r
);

146 ià(
wh”e
 =ğ
LIST_TAIL
) {

147 
	`quickli¡In£¹Aá”
((
quickli¡
 *)
’Œy
->entry.quicklist,

148 &
’Œy
->’Œy, 
¡r
, 
Ën
);

149 } ià(
wh”e
 =ğ
LIST_HEAD
) {

150 
	`quickli¡In£¹BefÜe
((
quickli¡
 *)
’Œy
->entry.quicklist,

151 &
’Œy
->’Œy, 
¡r
, 
Ën
);

153 
	`deüRefCouÁ
(
v®ue
);

155 
	`£rv”Pªic
("Unknown†istƒncoding");

157 
	}
}

160 
	$li¡Ty³Equ®
(
li¡Ty³EÁry
 *
’Œy
, 
robj
 *
o
) {

161 ià(
’Œy
->
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

162 
	`£rv”As£¹W™hInfo
(
NULL
,
o
,
	`sdsEncodedObjeù
(o));

163  
	`quickli¡Com·»
(
’Œy
->’Œy.
zi
,
o
->
±r
,
	`sd¦’
(o->ptr));

165 
	`£rv”Pªic
("Unknown†istƒncoding");

167 
	}
}

170 
	$li¡Ty³D–‘e
(
li¡Ty³I‹¿tÜ
 *
™”
, 
li¡Ty³EÁry
 *
’Œy
) {

171 ià(
’Œy
->
li
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

172 
	`quickli¡D–EÁry
(
™”
->™”, &
’Œy
->entry);

174 
	`£rv”Pªic
("Unknown†istƒncoding");

176 
	}
}

179 
	$li¡Ty³CÚv”t
(
robj
 *
subjeù
, 
’c
) {

180 
	`£rv”As£¹W™hInfo
(
NULL
,
subjeù
,subjeù->
ty³
==
OBJ_LIST
);

181 
	`£rv”As£¹W™hInfo
(
NULL
,
subjeù
,subjeù->
’codšg
==
OBJ_ENCODING_ZIPLIST
);

183 ià(
’c
 =ğ
OBJ_ENCODING_QUICKLIST
) {

184 
size_t
 
zËn
 = 
£rv”
.
li¡_max_zli¡_size
;

185 
d•th
 = 
£rv”
.
li¡_com´ess_d•th
;

186 
subjeù
->
±r
 = 
	`quickli¡C»©eFromZli¡
(
zËn
, 
d•th
, subject->ptr);

187 
subjeù
->
’codšg
 = 
OBJ_ENCODING_QUICKLIST
;

189 
	`£rv”Pªic
("Unsupported†ist conversion");

191 
	}
}

197 
	$pushG’”icCommªd
(
ş›Á
 *
c
, 
wh”e
) {

198 
j
, 
pushed
 = 0;

199 
robj
 *
lobj
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

201 ià(
lobj
 &&†obj->
ty³
 !ğ
OBJ_LIST
) {

202 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

206 
j
 = 2; j < 
c
->
¬gc
; j++) {

207 ià(!
lobj
) {

208 
lobj
 = 
	`ü—‹Quickli¡Objeù
();

209 
	`quickli¡S‘O±iÚs
(
lobj
->
±r
, 
£rv”
.
li¡_max_zli¡_size
,

210 
£rv”
.
li¡_com´ess_d•th
);

211 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
lobj
);

213 
	`li¡Ty³Push
(
lobj
,
c
->
¬gv
[
j
],
wh”e
);

214 
pushed
++;

216 
	`addR•lyLÚgLÚg
(
c
, (
lobj
 ? 
	`li¡Ty³L’gth
(lobj) : 0));

217 ià(
pushed
) {

218 *
ev’t
 = (
wh”e
 =ğ
LIST_HEAD
) ? "lpush" : "rpush";

220 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

221 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,
ev’t
,
c
->
¬gv
[1],c->
db
->
id
);

223 
£rv”
.
dœty
 +ğ
pushed
;

224 
	}
}

226 
	$ÍushCommªd
(
ş›Á
 *
c
) {

227 
	`pushG’”icCommªd
(
c
,
LIST_HEAD
);

228 
	}
}

230 
	$½ushCommªd
(
ş›Á
 *
c
) {

231 
	`pushG’”icCommªd
(
c
,
LIST_TAIL
);

232 
	}
}

234 
	$pushxG’”icCommªd
(
ş›Á
 *
c
, 
wh”e
) {

235 
j
, 
pushed
 = 0;

236 
robj
 *
subjeù
;

238 ià((
subjeù
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

239 
	`checkTy³
(
c
,
subjeù
,
OBJ_LIST
)) ;

241 
j
 = 2; j < 
c
->
¬gc
; j++) {

242 
	`li¡Ty³Push
(
subjeù
,
c
->
¬gv
[
j
],
wh”e
);

243 
pushed
++;

246 
	`addR•lyLÚgLÚg
(
c
,
	`li¡Ty³L’gth
(
subjeù
));

248 ià(
pushed
) {

249 *
ev’t
 = (
wh”e
 =ğ
LIST_HEAD
) ? "lpush" : "rpush";

250 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

251 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,
ev’t
,
c
->
¬gv
[1],c->
db
->
id
);

253 
£rv”
.
dœty
 +ğ
pushed
;

254 
	}
}

256 
	$ÍushxCommªd
(
ş›Á
 *
c
) {

257 
	`pushxG’”icCommªd
(
c
,
LIST_HEAD
);

258 
	}
}

260 
	$½ushxCommªd
(
ş›Á
 *
c
) {

261 
	`pushxG’”icCommªd
(
c
,
LIST_TAIL
);

262 
	}
}

264 
	$lš£¹Commªd
(
ş›Á
 *
c
) {

265 
wh”e
;

266 
robj
 *
subjeù
;

267 
li¡Ty³I‹¿tÜ
 *
™”
;

268 
li¡Ty³EÁry
 
’Œy
;

269 
š£¹ed
 = 0;

271 ià(
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"after") == 0) {

272 
wh”e
 = 
LIST_TAIL
;

273 } ià(
	`¡rÿ£cmp
(
c
->
¬gv
[2]->
±r
,"before") == 0) {

274 
wh”e
 = 
LIST_HEAD
;

276 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

280 ià((
subjeù
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

281 
	`checkTy³
(
c
,
subjeù
,
OBJ_LIST
)) ;

284 
™”
 = 
	`li¡Ty³In™I‹¿tÜ
(
subjeù
,0,
LIST_TAIL
);

285 
	`li¡Ty³Next
(
™”
,&
’Œy
)) {

286 ià(
	`li¡Ty³Equ®
(&
’Œy
,
c
->
¬gv
[3])) {

287 
	`li¡Ty³In£¹
(&
’Œy
,
c
->
¬gv
[4],
wh”e
);

288 
š£¹ed
 = 1;

292 
	`li¡Ty³R–—£I‹¿tÜ
(
™”
);

294 ià(
š£¹ed
) {

295 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

296 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"linsert",

297 
c
->
¬gv
[1],c->
db
->
id
);

298 
£rv”
.
dœty
++;

301 
	`addR•lyLÚgLÚg
(
c
,-1);

305 
	`addR•lyLÚgLÚg
(
c
,
	`li¡Ty³L’gth
(
subjeù
));

306 
	}
}

308 
	$Î’Commªd
(
ş›Á
 *
c
) {

309 
robj
 *
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
);

310 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_LIST
)) ;

311 
	`addR•lyLÚgLÚg
(
c
,
	`li¡Ty³L’gth
(
o
));

312 
	}
}

314 
	$lšdexCommªd
(
ş›Á
 *
c
) {

315 
robj
 *
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
]);

316 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_LIST
)) ;

317 
šdex
;

318 
robj
 *
v®ue
 = 
NULL
;

320 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
šdex
, 
NULL
è!ğ
C_OK
))

323 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

324 
quickli¡EÁry
 
’Œy
;

325 ià(
	`quickli¡Index
(
o
->
±r
, 
šdex
, &
’Œy
)) {

326 ià(
’Œy
.
v®ue
) {

327 
v®ue
 = 
	`ü—‹SŒšgObjeù
((*)
’Œy
.v®ue,’Œy.
sz
);

329 
v®ue
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
’Œy
.
lÚgv®
);

331 
	`addR•lyBulk
(
c
,
v®ue
);

332 
	`deüRefCouÁ
(
v®ue
);

334 
	`addR•lyNuÎ
(
c
);

337 
	`£rv”Pªic
("Unknown†istƒncoding");

339 
	}
}

341 
	$l£tCommªd
(
ş›Á
 *
c
) {

342 
robj
 *
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nokey”r
);

343 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_LIST
)) ;

344 
šdex
;

345 
robj
 *
v®ue
 = 
c
->
¬gv
[3];

347 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
šdex
, 
NULL
è!ğ
C_OK
))

350 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

351 
quickli¡
 *
ql
 = 
o
->
±r
;

352 
»¶aûd
 = 
	`quickli¡R•ÏûAtIndex
(
ql
, 
šdex
,

353 
v®ue
->
±r
, 
	`sd¦’
(value->ptr));

354 ià(!
»¶aûd
) {

355 
	`addR•ly
(
c
,
sh¬ed
.
outoäªg“¼
);

357 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

358 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

359 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"l£t",
c
->
¬gv
[1],c->
db
->
id
);

360 
£rv”
.
dœty
++;

363 
	`£rv”Pªic
("Unknown†istƒncoding");

365 
	}
}

367 
	$pİG’”icCommªd
(
ş›Á
 *
c
, 
wh”e
) {

368 
robj
 *
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
]);

369 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_LIST
)) ;

371 
robj
 *
v®ue
 = 
	`li¡Ty³Pİ
(
o
,
wh”e
);

372 ià(
v®ue
 =ğ
NULL
) {

373 
	`addR•lyNuÎ
(
c
);

375 *
ev’t
 = (
wh”e
 =ğ
LIST_HEAD
) ? "lpop" : "rpop";

377 
	`addR•lyBulk
(
c
,
v®ue
);

378 
	`deüRefCouÁ
(
v®ue
);

379 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,
ev’t
,
c
->
¬gv
[1],c->
db
->
id
);

380 ià(
	`li¡Ty³L’gth
(
o
) == 0) {

381 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"del",

382 
c
->
¬gv
[1],c->
db
->
id
);

383 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

385 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

386 
£rv”
.
dœty
++;

388 
	}
}

390 
	$ÍİCommªd
(
ş›Á
 *
c
) {

391 
	`pİG’”icCommªd
(
c
,
LIST_HEAD
);

392 
	}
}

394 
	$½İCommªd
(
ş›Á
 *
c
) {

395 
	`pİG’”icCommªd
(
c
,
LIST_TAIL
);

396 
	}
}

398 
	$ÌªgeCommªd
(
ş›Á
 *
c
) {

399 
robj
 *
o
;

400 
¡¬t
, 
’d
, 
Î’
, 
¿ng–’
;

402 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
¡¬t
, 
NULL
è!ğ
C_OK
) ||

403 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[3], &
’d
, 
NULL
è!ğ
C_OK
)) ;

405 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±y¬¿y
)è=ğ
NULL


406 || 
	`checkTy³
(
c
,
o
,
OBJ_LIST
)) ;

407 
Î’
 = 
	`li¡Ty³L’gth
(
o
);

410 ià(
¡¬t
 < 0è¡¬ˆğ
Î’
+start;

411 ià(
’d
 < 0è’d = 
Î’
+end;

412 ià(
¡¬t
 < 0) start = 0;

416 ià(
¡¬t
 > 
’d
 || s¹ >ğ
Î’
) {

417 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

420 ià(
’d
 >ğ
Î’
)ƒnd =†len-1;

421 
¿ng–’
 = (
’d
-
¡¬t
)+1;

424 
	`addR•lyA¼ayL’
(
c
,
¿ng–’
);

425 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

426 
li¡Ty³I‹¿tÜ
 *
™”
 = 
	`li¡Ty³In™I‹¿tÜ
(
o
, 
¡¬t
, 
LIST_TAIL
);

428 
¿ng–’
--) {

429 
li¡Ty³EÁry
 
’Œy
;

430 
	`li¡Ty³Next
(
™”
, &
’Œy
);

431 
quickli¡EÁry
 *
qe
 = &
’Œy
.entry;

432 ià(
qe
->
v®ue
) {

433 
	`addR•lyBulkCBufãr
(
c
,
qe
->
v®ue
,qe->
sz
);

435 
	`addR•lyBulkLÚgLÚg
(
c
,
qe
->
lÚgv®
);

438 
	`li¡Ty³R–—£I‹¿tÜ
(
™”
);

440 
	`£rv”Pªic
("Listƒncoding is‚ot QUICKLIST!");

442 
	}
}

444 
	$ÉrimCommªd
(
ş›Á
 *
c
) {

445 
robj
 *
o
;

446 
¡¬t
, 
’d
, 
Î’
, 
Érim
, 
¹rim
;

448 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
¡¬t
, 
NULL
è!ğ
C_OK
) ||

449 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[3], &
’d
, 
NULL
è!ğ
C_OK
)) ;

451 ià((
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
ok
)è=ğ
NULL
 ||

452 
	`checkTy³
(
c
,
o
,
OBJ_LIST
)) ;

453 
Î’
 = 
	`li¡Ty³L’gth
(
o
);

456 ià(
¡¬t
 < 0è¡¬ˆğ
Î’
+start;

457 ià(
’d
 < 0è’d = 
Î’
+end;

458 ià(
¡¬t
 < 0) start = 0;

462 ià(
¡¬t
 > 
’d
 || s¹ >ğ
Î’
) {

464 
Érim
 = 
Î’
;

465 
¹rim
 = 0;

467 ià(
’d
 >ğ
Î’
)ƒnd =†len-1;

468 
Érim
 = 
¡¬t
;

469 
¹rim
 = 
Î’
-
’d
-1;

473 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_QUICKLIST
) {

474 
	`quickli¡D–Rªge
(
o
->
±r
,0,
Érim
);

475 
	`quickli¡D–Rªge
(
o
->
±r
,-
¹rim
,rtrim);

477 
	`£rv”Pªic
("Unknown†istƒncoding");

480 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"Érim",
c
->
¬gv
[1],c->
db
->
id
);

481 ià(
	`li¡Ty³L’gth
(
o
) == 0) {

482 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

483 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],c->
db
->
id
);

485 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

486 
£rv”
.
dœty
++;

487 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

488 
	}
}

490 
	$ÌemCommªd
(
ş›Á
 *
c
) {

491 
robj
 *
subjeù
, *
obj
;

492 
obj
 = 
c
->
¬gv
[3];

493 
tÜemove
;

494 
»moved
 = 0;

496 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
tÜemove
, 
NULL
è!ğ
C_OK
))

499 
subjeù
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
);

500 ià(
subjeù
 =ğ
NULL
 || 
	`checkTy³
(
c
,subjeù,
OBJ_LIST
)) ;

502 
li¡Ty³I‹¿tÜ
 *
li
;

503 ià(
tÜemove
 < 0) {

504 
tÜemove
 = -toremove;

505 
li
 = 
	`li¡Ty³In™I‹¿tÜ
(
subjeù
,-1,
LIST_HEAD
);

507 
li
 = 
	`li¡Ty³In™I‹¿tÜ
(
subjeù
,0,
LIST_TAIL
);

510 
li¡Ty³EÁry
 
’Œy
;

511 
	`li¡Ty³Next
(
li
,&
’Œy
)) {

512 ià(
	`li¡Ty³Equ®
(&
’Œy
,
obj
)) {

513 
	`li¡Ty³D–‘e
(
li
, &
’Œy
);

514 
£rv”
.
dœty
++;

515 
»moved
++;

516 ià(
tÜemove
 && 
»moved
 ==oremove) ;

519 
	`li¡Ty³R–—£I‹¿tÜ
(
li
);

521 ià(
»moved
) {

522 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

523 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"Ìem",
c
->
¬gv
[1],c->
db
->
id
);

526 ià(
	`li¡Ty³L’gth
(
subjeù
) == 0) {

527 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

528 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],c->
db
->
id
);

531 
	`addR•lyLÚgLÚg
(
c
,
»moved
);

532 
	}
}

550 
	$½İÍushHªdËPush
(
ş›Á
 *
c
, 
robj
 *
d¡key
,„obj *
d¡obj
,„obj *
v®ue
) {

552 ià(!
d¡obj
) {

553 
d¡obj
 = 
	`ü—‹Quickli¡Objeù
();

554 
	`quickli¡S‘O±iÚs
(
d¡obj
->
±r
, 
£rv”
.
li¡_max_zli¡_size
,

555 
£rv”
.
li¡_com´ess_d•th
);

556 
	`dbAdd
(
c
->
db
,
d¡key
,
d¡obj
);

558 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

559 
	`li¡Ty³Push
(
d¡obj
,
v®ue
,
LIST_HEAD
);

560 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"Íush",
d¡key
,
c
->
db
->
id
);

562 
	`addR•lyBulk
(
c
,
v®ue
);

563 
	}
}

565 
	$½İÍushCommªd
(
ş›Á
 *
c
) {

566 
robj
 *
sobj
, *
v®ue
;

567 ià((
sobj
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
]))

568 =ğ
NULL
 || 
	`checkTy³
(
c
,
sobj
,
OBJ_LIST
)) ;

570 ià(
	`li¡Ty³L’gth
(
sobj
) == 0) {

573 
	`addR•lyNuÎ
(
c
);

575 
robj
 *
dobj
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[2]);

576 
robj
 *
touchedkey
 = 
c
->
¬gv
[1];

578 ià(
dobj
 && 
	`checkTy³
(
c
,dobj,
OBJ_LIST
)) ;

579 
v®ue
 = 
	`li¡Ty³Pİ
(
sobj
,
LIST_TAIL
);

583 
	`šüRefCouÁ
(
touchedkey
);

584 
	`½İÍushHªdËPush
(
c
,c->
¬gv
[2],
dobj
,
v®ue
);

587 
	`deüRefCouÁ
(
v®ue
);

590 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"½İ",
touchedkey
,
c
->
db
->
id
);

591 ià(
	`li¡Ty³L’gth
(
sobj
) == 0) {

592 
	`dbD–‘e
(
c
->
db
,
touchedkey
);

593 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"del",

594 
touchedkey
,
c
->
db
->
id
);

596 
	`sigÇlModif›dKey
(
c
,c->
db
,
touchedkey
);

597 
	`deüRefCouÁ
(
touchedkey
);

598 
£rv”
.
dœty
++;

599 ià(
c
->
cmd
->
´oc
 =ğ
b½İÍushCommªd
) {

600 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,3,
sh¬ed
.
½İÍush
,c->
¬gv
[1],c->argv[2]);

603 
	}
}

628 
	$£rveCl›ÁBlockedOnLi¡
(
ş›Á
 *
»ûiv”
, 
robj
 *
key
,„obj *
d¡key
, 
»disDb
 *
db
,„obj *
v®ue
, 
wh”e
)

630 
robj
 *
¬gv
[3];

632 ià(
d¡key
 =ğ
NULL
) {

634 
¬gv
[0] = (
wh”e
 =ğ
LIST_HEAD
è? 
sh¬ed
.
Íİ
 :

635 
sh¬ed
.
½İ
;

636 
¬gv
[1] = 
key
;

637 
	`´İag©e
((
wh”e
 =ğ
LIST_HEAD
) ?

638 
£rv”
.
ÍİCommªd
 : s”v”.
½İCommªd
,

639 
db
->
id
,
¬gv
,2,
PROPAGATE_AOF
|
PROPAGATE_REPL
);

642 
	`addR•lyA¼ayL’
(
»ûiv”
,2);

643 
	`addR•lyBulk
(
»ûiv”
,
key
);

644 
	`addR•lyBulk
(
»ûiv”
,
v®ue
);

647 *
ev’t
 = (
wh”e
 =ğ
LIST_HEAD
) ? "lpop" : "rpop";

648 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,
ev’t
,
key
,
»ûiv”
->
db
->
id
);

651 
robj
 *
d¡obj
 =

652 
	`lookupKeyWr™e
(
»ûiv”
->
db
,
d¡key
);

653 ià(!(
d¡obj
 &&

654 
	`checkTy³
(
»ûiv”
,
d¡obj
,
OBJ_LIST
)))

656 
	`½İÍushHªdËPush
(
»ûiv”
,
d¡key
,
d¡obj
,

657 
v®ue
);

659 
¬gv
[0] = 
sh¬ed
.
½İÍush
;

660 
¬gv
[1] = 
key
;

661 
¬gv
[2] = 
d¡key
;

662 
	`´İag©e
(
£rv”
.
½İÍushCommªd
,

663 
db
->
id
,
¬gv
,3,

664 
PROPAGATE_AOF
|

665 
PROPAGATE_REPL
);

668 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,"½İ",
key
,
»ûiv”
->
db
->
id
);

672  
C_ERR
;

675  
C_OK
;

676 
	}
}

679 
	$blockšgPİG’”icCommªd
(
ş›Á
 *
c
, 
wh”e
) {

680 
robj
 *
o
;

681 
m¡ime_t
 
timeout
;

682 
j
;

684 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[c->
¬gc
-1],&
timeout
,
UNIT_SECONDS
)

685 !ğ
C_OK
) ;

687 
j
 = 1; j < 
c
->
¬gc
-1; j++) {

688 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[
j
]);

689 ià(
o
 !ğ
NULL
) {

690 ià(
o
->
ty³
 !ğ
OBJ_LIST
) {

691 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

694 ià(
	`li¡Ty³L’gth
(
o
) != 0) {

696 *
ev’t
 = (
wh”e
 =ğ
LIST_HEAD
) ? "lpop" : "rpop";

697 
robj
 *
v®ue
 = 
	`li¡Ty³Pİ
(
o
,
wh”e
);

698 
	`£rv”As£¹
(
v®ue
 !ğ
NULL
);

700 
	`addR•lyA¼ayL’
(
c
,2);

701 
	`addR•lyBulk
(
c
,c->
¬gv
[
j
]);

702 
	`addR•lyBulk
(
c
,
v®ue
);

703 
	`deüRefCouÁ
(
v®ue
);

704 
	`nÙifyKey¥aûEv’t
(
NOTIFY_LIST
,
ev’t
,

705 
c
->
¬gv
[
j
],c->
db
->
id
);

706 ià(
	`li¡Ty³L’gth
(
o
) == 0) {

707 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[
j
]);

708 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"del",

709 
c
->
¬gv
[
j
],c->
db
->
id
);

711 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[
j
]);

712 
£rv”
.
dœty
++;

715 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,2,

716 (
wh”e
 =ğ
LIST_HEAD
è? 
sh¬ed
.
Íİ
 : sh¬ed.
½İ
,

717 
c
->
¬gv
[
j
]);

726 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

727 
	`addR•lyNuÎA¼ay
(
c
);

732 
	`blockFÜKeys
(
c
,
BLOCKED_LIST
,c->
¬gv
 + 1,c->
¬gc
 - 2,
timeout
,
NULL
,NULL);

733 
	}
}

735 
	$bÍİCommªd
(
ş›Á
 *
c
) {

736 
	`blockšgPİG’”icCommªd
(
c
,
LIST_HEAD
);

737 
	}
}

739 
	$b½İCommªd
(
ş›Á
 *
c
) {

740 
	`blockšgPİG’”icCommªd
(
c
,
LIST_TAIL
);

741 
	}
}

743 
	$b½İÍushCommªd
(
ş›Á
 *
c
) {

744 
m¡ime_t
 
timeout
;

746 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
timeout
,
UNIT_SECONDS
)

747 !ğ
C_OK
) ;

749 
robj
 *
key
 = 
	`lookupKeyWr™e
(
c
->
db
, c->
¬gv
[1]);

751 ià(
key
 =ğ
NULL
) {

752 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

755 
	`addR•lyNuÎ
(
c
);

758 
	`blockFÜKeys
(
c
,
BLOCKED_LIST
,c->
¬gv
 + 1,1,
timeout
,c->¬gv[2],
NULL
);

761 ià(
key
->
ty³
 !ğ
OBJ_LIST
) {

762 
	`addR•ly
(
c
, 
sh¬ed
.
wrÚgty³”r
);

766 
	`£rv”As£¹W™hInfo
(
c
,
key
,
	`li¡Ty³L’gth
(key) > 0);

767 
	`½İÍushCommªd
(
c
);

770 
	}
}

	@t_set.c

30 
	~"£rv”.h
"

36 
suniÚDiffG’”icCommªd
(
ş›Á
 *
c
, 
robj
 **
£tkeys
, 
£Šum
,

37 
robj
 *
d¡key
, 
İ
);

42 
robj
 *
	$£tTy³C»©e
(
sds
 
v®ue
) {

43 ià(
	`isSdsR•»£ÁabËAsLÚgLÚg
(
v®ue
,
NULL
è=ğ
C_OK
)

44  
	`ü—‹IÁ£tObjeù
();

45  
	`ü—‹S‘Objeù
();

46 
	}
}

52 
	$£tTy³Add
(
robj
 *
subjeù
, 
sds
 
v®ue
) {

53 
Îv®
;

54 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

55 
diù
 *
ht
 = 
subjeù
->
±r
;

56 
diùEÁry
 *
de
 = 
	`diùAddRaw
(
ht
,
v®ue
,
NULL
);

57 ià(
de
) {

58 
	`diùS‘Key
(
ht
,
de
,
	`sdsdup
(
v®ue
));

59 
	`diùS‘V®
(
ht
,
de
,
NULL
);

62 } ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

63 ià(
	`isSdsR•»£ÁabËAsLÚgLÚg
(
v®ue
,&
Îv®
è=ğ
C_OK
) {

64 
ušt8_t
 
sucûss
 = 0;

65 
subjeù
->
±r
 = 
	`št£tAdd
(subjeù->±r,
Îv®
,&
sucûss
);

66 ià(
sucûss
) {

69 ià(
	`št£tL’
(
subjeù
->
±r
è> 
£rv”
.
£t_max_št£t_’Œ›s
)

70 
	`£tTy³CÚv”t
(
subjeù
,
OBJ_ENCODING_HT
);

75 
	`£tTy³CÚv”t
(
subjeù
,
OBJ_ENCODING_HT
);

79 
	`£rv”As£¹
(
	`diùAdd
(
subjeù
->
±r
,
	`sdsdup
(
v®ue
),
NULL
è=ğ
DICT_OK
);

83 
	`£rv”Pªic
("Unknown setƒncoding");

86 
	}
}

88 
	$£tTy³Remove
(
robj
 *
£tobj
, 
sds
 
v®ue
) {

89 
Îv®
;

90 ià(
£tobj
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

91 ià(
	`diùD–‘e
(
£tobj
->
±r
,
v®ue
è=ğ
DICT_OK
) {

92 ià(
	`htN“dsResize
(
£tobj
->
±r
)è
	`diùResize
(setobj->ptr);

95 } ià(
£tobj
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

96 ià(
	`isSdsR•»£ÁabËAsLÚgLÚg
(
v®ue
,&
Îv®
è=ğ
C_OK
) {

97 
sucûss
;

98 
£tobj
->
±r
 = 
	`št£tRemove
(£tobj->±r,
Îv®
,&
sucûss
);

99 ià(
sucûss
)  1;

102 
	`£rv”Pªic
("Unknown setƒncoding");

105 
	}
}

107 
	$£tTy³IsMemb”
(
robj
 *
subjeù
, 
sds
 
v®ue
) {

108 
Îv®
;

109 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

110  
	`diùFšd
((
diù
*)
subjeù
->
±r
,
v®ue
è!ğ
NULL
;

111 } ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

112 ià(
	`isSdsR•»£ÁabËAsLÚgLÚg
(
v®ue
,&
Îv®
è=ğ
C_OK
) {

113  
	`št£tFšd
((
št£t
*)
subjeù
->
±r
,
Îv®
);

116 
	`£rv”Pªic
("Unknown setƒncoding");

119 
	}
}

121 
£tTy³I‹¿tÜ
 *
	$£tTy³In™I‹¿tÜ
(
robj
 *
subjeù
) {

122 
£tTy³I‹¿tÜ
 *
si
 = 
	`zm®loc
((setTypeIterator));

123 
si
->
subjeù
 = subject;

124 
si
->
’codšg
 = 
subjeù
->encoding;

125 ià(
si
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

126 
si
->
di
 = 
	`diùG‘I‹¿tÜ
(
subjeù
->
±r
);

127 } ià(
si
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

128 
si
->
ii
 = 0;

130 
	`£rv”Pªic
("Unknown setƒncoding");

132  
si
;

133 
	}
}

135 
	$£tTy³R–—£I‹¿tÜ
(
£tTy³I‹¿tÜ
 *
si
) {

136 ià(
si
->
’codšg
 =ğ
OBJ_ENCODING_HT
)

137 
	`diùR–—£I‹¿tÜ
(
si
->
di
);

138 
	`zä“
(
si
);

139 
	}
}

154 
	$£tTy³Next
(
£tTy³I‹¿tÜ
 *
si
, 
sds
 *
sd£Ë
, 
št64_t
 *
Î–e
) {

155 ià(
si
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

156 
diùEÁry
 *
de
 = 
	`diùNext
(
si
->
di
);

157 ià(
de
 =ğ
NULL
)  -1;

158 *
sd£Ë
 = 
	`diùG‘Key
(
de
);

159 *
Î–e
 = -123456789;

160 } ià(
si
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

161 ià(!
	`št£tG‘
(
si
->
subjeù
->
±r
,si->
ii
++,
Î–e
))

163 *
sd£Ë
 = 
NULL
;

165 
	`£rv”Pªic
("Wrong setƒncoding in setTypeNext");

167  
si
->
’codšg
;

168 
	}
}

177 
sds
 
	$£tTy³NextObjeù
(
£tTy³I‹¿tÜ
 *
si
) {

178 
št64_t
 
š‹Ë
;

179 
sds
 
sd£Ë
;

180 
’codšg
;

182 
’codšg
 = 
	`£tTy³Next
(
si
,&
sd£Ë
,&
š‹Ë
);

183 
’codšg
) {

184 -1:  
NULL
;

185 
OBJ_ENCODING_INTSET
:

186  
	`sdsäomlÚglÚg
(
š‹Ë
);

187 
OBJ_ENCODING_HT
:

188  
	`sdsdup
(
sd£Ë
);

190 
	`£rv”Pªic
("Unsupportedƒncoding");

192  
NULL
;

193 
	}
}

208 
	$£tTy³RªdomEËm’t
(
robj
 *
£tobj
, 
sds
 *
sd£Ë
, 
št64_t
 *
Î–e
) {

209 ià(
£tobj
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

210 
diùEÁry
 *
de
 = 
	`diùG‘FaœRªdomKey
(
£tobj
->
±r
);

211 *
sd£Ë
 = 
	`diùG‘Key
(
de
);

212 *
Î–e
 = -123456789;

213 } ià(
£tobj
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

214 *
Î–e
 = 
	`št£tRªdom
(
£tobj
->
±r
);

215 *
sd£Ë
 = 
NULL
;

217 
	`£rv”Pªic
("Unknown setƒncoding");

219  
£tobj
->
’codšg
;

220 
	}
}

222 
	$£tTy³Size
(cÚ¡ 
robj
 *
subjeù
) {

223 ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

224  
	`diùSize
((cÚ¡ 
diù
*)
subjeù
->
±r
);

225 } ià(
subjeù
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

226  
	`št£tL’
((cÚ¡ 
št£t
*)
subjeù
->
±r
);

228 
	`£rv”Pªic
("Unknown setƒncoding");

230 
	}
}

235 
	$£tTy³CÚv”t
(
robj
 *
£tobj
, 
’c
) {

236 
£tTy³I‹¿tÜ
 *
si
;

237 
	`£rv”As£¹W™hInfo
(
NULL
,
£tobj
,£tobj->
ty³
 =ğ
OBJ_SET
 &&

238 
£tobj
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
);

240 ià(
’c
 =ğ
OBJ_ENCODING_HT
) {

241 
št64_t
 
š‹Ë
;

242 
diù
 *
d
 = 
	`diùC»©e
(&
£tDiùTy³
,
NULL
);

243 
sds
 
–em’t
;

246 
	`diùEx·nd
(
d
,
	`št£tL’
(
£tobj
->
±r
));

249 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£tobj
);

250 
	`£tTy³Next
(
si
,&
–em’t
,&
š‹Ë
) != -1) {

251 
–em’t
 = 
	`sdsäomlÚglÚg
(
š‹Ë
);

252 
	`£rv”As£¹
(
	`diùAdd
(
d
,
–em’t
,
NULL
è=ğ
DICT_OK
);

254 
	`£tTy³R–—£I‹¿tÜ
(
si
);

256 
£tobj
->
’codšg
 = 
OBJ_ENCODING_HT
;

257 
	`zä“
(
£tobj
->
±r
);

258 
£tobj
->
±r
 = 
d
;

260 
	`£rv”Pªic
("Unsupported set conversion");

262 
	}
}

264 
	$§ddCommªd
(
ş›Á
 *
c
) {

265 
robj
 *
£t
;

266 
j
, 
added
 = 0;

268 
£t
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

269 ià(
£t
 =ğ
NULL
) {

270 
£t
 = 
	`£tTy³C»©e
(
c
->
¬gv
[2]->
±r
);

271 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
£t
);

273 ià(
£t
->
ty³
 !ğ
OBJ_SET
) {

274 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

279 
j
 = 2; j < 
c
->
¬gc
; j++) {

280 ià(
	`£tTy³Add
(
£t
,
c
->
¬gv
[
j
]->
±r
)è
added
++;

282 ià(
added
) {

283 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

284 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"§dd",
c
->
¬gv
[1],c->
db
->
id
);

286 
£rv”
.
dœty
 +ğ
added
;

287 
	`addR•lyLÚgLÚg
(
c
,
added
);

288 
	}
}

290 
	$¤emCommªd
(
ş›Á
 *
c
) {

291 
robj
 *
£t
;

292 
j
, 
d–‘ed
 = 0, 
key»moved
 = 0;

294 ià((
£t
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

295 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

297 
j
 = 2; j < 
c
->
¬gc
; j++) {

298 ià(
	`£tTy³Remove
(
£t
,
c
->
¬gv
[
j
]->
±r
)) {

299 
d–‘ed
++;

300 ià(
	`£tTy³Size
(
£t
) == 0) {

301 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

302 
key»moved
 = 1;

307 ià(
d–‘ed
) {

308 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

309 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"¤em",
c
->
¬gv
[1],c->
db
->
id
);

310 ià(
key»moved
)

311 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],

312 
c
->
db
->
id
);

313 
£rv”
.
dœty
 +ğ
d–‘ed
;

315 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

316 
	}
}

318 
	$smoveCommªd
(
ş›Á
 *
c
) {

319 
robj
 *
¤c£t
, *
d¡£t
, *
–e
;

320 
¤c£t
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

321 
d¡£t
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[2]);

322 
–e
 = 
c
->
¬gv
[3];

325 ià(
¤c£t
 =ğ
NULL
) {

326 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

332 ià(
	`checkTy³
(
c
,
¤c£t
,
OBJ_SET
) ||

333 (
d¡£t
 && 
	`checkTy³
(
c
,d¡£t,
OBJ_SET
))) ;

336 ià(
¤c£t
 =ğ
d¡£t
) {

337 
	`addR•ly
(
c
,
	`£tTy³IsMemb”
(
¤c£t
,
–e
->
±r
) ?

338 
sh¬ed
.
cÚe
 : sh¬ed.
cz”o
);

343 ià(!
	`£tTy³Remove
(
¤c£t
,
–e
->
±r
)) {

344 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

347 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"¤em",
c
->
¬gv
[1],c->
db
->
id
);

350 ià(
	`£tTy³Size
(
¤c£t
) == 0) {

351 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

352 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],c->
db
->
id
);

356 ià(!
d¡£t
) {

357 
d¡£t
 = 
	`£tTy³C»©e
(
–e
->
±r
);

358 
	`dbAdd
(
c
->
db
,c->
¬gv
[2],
d¡£t
);

361 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

362 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[2]);

363 
£rv”
.
dœty
++;

366 ià(
	`£tTy³Add
(
d¡£t
,
–e
->
±r
)) {

367 
£rv”
.
dœty
++;

368 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"§dd",
c
->
¬gv
[2],c->
db
->
id
);

370 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

371 
	}
}

373 
	$sismemb”Commªd
(
ş›Á
 *
c
) {

374 
robj
 *
£t
;

376 ià((
£t
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

377 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

379 ià(
	`£tTy³IsMemb”
(
£t
,
c
->
¬gv
[2]->
±r
))

380 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

382 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

383 
	}
}

385 
	$sÿrdCommªd
(
ş›Á
 *
c
) {

386 
robj
 *
o
;

388 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

389 
	`checkTy³
(
c
,
o
,
OBJ_SET
)) ;

391 
	`addR•lyLÚgLÚg
(
c
,
	`£tTy³Size
(
o
));

392 
	}
}

400 
	#SPOP_MOVE_STRATEGY_MUL
 5

	)

402 
	$¥İW™hCouÁCommªd
(
ş›Á
 *
c
) {

403 
l
;

404 
couÁ
, 
size
;

405 
robj
 *
£t
;

408 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
l
,
NULL
è!ğ
C_OK
) ;

409 ià(
l
 >= 0) {

410 
couÁ
 = (è
l
;

412 
	`addR•ly
(
c
,
sh¬ed
.
outoäªg“¼
);

418 ià((
£t
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±y£t
[c->
»¥
]))

419 =ğ
NULL
 || 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

423 ià(
couÁ
 == 0) {

424 
	`addR•ly
(
c
,
sh¬ed
.
em±y£t
[c->
»¥
]);

428 
size
 = 
	`£tTy³Size
(
£t
);

431 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"¥İ",
c
->
¬gv
[1],c->
db
->
id
);

432 
£rv”
.
dœty
 +ğ
couÁ
;

437 ià(
couÁ
 >ğ
size
) {

439 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+1,1,
NULL
,
SET_OP_UNION
);

442 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

443 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],c->
db
->
id
);

446 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,2,
sh¬ed
.
d–
,c->
¬gv
[1]);

447 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

448 
£rv”
.
dœty
++;

455 
robj
 *
´İ¬gv
[3];

456 
´İ¬gv
[0] = 
	`ü—‹SŒšgObjeù
("SREM",4);

457 
´İ¬gv
[1] = 
c
->
¬gv
[1];

458 
	`addR•lyS‘L’
(
c
,
couÁ
);

461 
sds
 
sd£Ë
;

462 
robj
 *
obj–e
;

463 
’codšg
;

464 
št64_t
 
Î–e
;

465 
»maššg
 = 
size
-
couÁ
;

474 ià(
»maššg
*
SPOP_MOVE_STRATEGY_MUL
 > 
couÁ
) {

475 
couÁ
--) {

477 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
sd£Ë
,&
Î–e
);

478 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

479 
	`addR•lyBulkLÚgLÚg
(
c
,
Î–e
);

480 
obj–e
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î–e
);

481 
£t
->
±r
 = 
	`št£tRemove
(£t->±r,
Î–e
,
NULL
);

483 
	`addR•lyBulkCBufãr
(
c
,
sd£Ë
,
	`sd¦’
(sdsele));

484 
obj–e
 = 
	`ü—‹SŒšgObjeù
(
sd£Ë
,
	`sd¦’
(sdsele));

485 
	`£tTy³Remove
(
£t
,
sd£Ë
);

489 
´İ¬gv
[2] = 
obj–e
;

490 
	`®soPrİag©e
(
£rv”
.
¤emCommªd
,
c
->
db
->
id
,
´İ¬gv
,3,

491 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

492 
	`deüRefCouÁ
(
obj–e
);

503 
robj
 *
Ãw£t
 = 
NULL
;

506 
»maššg
--) {

507 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
sd£Ë
,&
Î–e
);

508 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

509 
sd£Ë
 = 
	`sdsäomlÚglÚg
(
Î–e
);

511 
sd£Ë
 = 
	`sdsdup
(sdsele);

513 ià(!
Ãw£t
èÃw£ˆğ
	`£tTy³C»©e
(
sd£Ë
);

514 
	`£tTy³Add
(
Ãw£t
,
sd£Ë
);

515 
	`£tTy³Remove
(
£t
,
sd£Ë
);

516 
	`sdsä“
(
sd£Ë
);

520 
£tTy³I‹¿tÜ
 *
si
;

521 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£t
);

522 (
’codšg
 = 
	`£tTy³Next
(
si
,&
sd£Ë
,&
Î–e
)) != -1) {

523 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

524 
	`addR•lyBulkLÚgLÚg
(
c
,
Î–e
);

525 
obj–e
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î–e
);

527 
	`addR•lyBulkCBufãr
(
c
,
sd£Ë
,
	`sd¦’
(sdsele));

528 
obj–e
 = 
	`ü—‹SŒšgObjeù
(
sd£Ë
,
	`sd¦’
(sdsele));

532 
´İ¬gv
[2] = 
obj–e
;

533 
	`®soPrİag©e
(
£rv”
.
¤emCommªd
,
c
->
db
->
id
,
´İ¬gv
,3,

534 
PROPAGATE_AOF
|
PROPAGATE_REPL
);

535 
	`deüRefCouÁ
(
obj–e
);

537 
	`£tTy³R–—£I‹¿tÜ
(
si
);

540 
	`dbOv”wr™e
(
c
->
db
,c->
¬gv
[1],
Ãw£t
);

547 
	`deüRefCouÁ
(
´İ¬gv
[0]);

548 
	`´ev’tCommªdPrİag©iÚ
(
c
);

549 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

550 
£rv”
.
dœty
++;

551 
	}
}

553 
	$¥İCommªd
(
ş›Á
 *
c
) {

554 
robj
 *
£t
, *
–e
, *
aux
;

555 
sds
 
sd£Ë
;

556 
št64_t
 
Î–e
;

557 
’codšg
;

559 ià(
c
->
¬gc
 == 3) {

560 
	`¥İW™hCouÁCommªd
(
c
);

562 } ià(
c
->
¬gc
 > 3) {

563 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

569 ià((
£t
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
]))

570 =ğ
NULL
 || 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

573 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
sd£Ë
,&
Î–e
);

576 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

577 
–e
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î–e
);

578 
£t
->
±r
 = 
	`št£tRemove
(£t->±r,
Î–e
,
NULL
);

580 
–e
 = 
	`ü—‹SŒšgObjeù
(
sd£Ë
,
	`sd¦’
(sdsele));

581 
	`£tTy³Remove
(
£t
,
–e
->
±r
);

584 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"¥İ",
c
->
¬gv
[1],c->
db
->
id
);

587 
aux
 = 
	`ü—‹SŒšgObjeù
("SREM",4);

588 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,3,
aux
,c->
¬gv
[1],
–e
);

589 
	`deüRefCouÁ
(
aux
);

592 
	`addR•lyBulk
(
c
,
–e
);

593 
	`deüRefCouÁ
(
–e
);

596 ià(
	`£tTy³Size
(
£t
) == 0) {

597 
	`dbD–‘e
(
c
->
db
,c->
¬gv
[1]);

598 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
c
->
¬gv
[1],c->
db
->
id
);

602 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

603 
£rv”
.
dœty
++;

604 
	}
}

612 
	#SRANDMEMBER_SUB_STRATEGY_MUL
 3

	)

614 
	$¤ªdmemb”W™hCouÁCommªd
(
ş›Á
 *
c
) {

615 
l
;

616 
couÁ
, 
size
;

617 
uniq
 = 1;

618 
robj
 *
£t
;

619 
sds
 
–e
;

620 
št64_t
 
Î–e
;

621 
’codšg
;

623 
diù
 *
d
;

625 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
l
,
NULL
è!ğ
C_OK
) ;

626 ià(
l
 >= 0) {

627 
couÁ
 = (è
l
;

631 
couÁ
 = -
l
;

632 
uniq
 = 0;

635 ià((
£t
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±y£t
[c->
»¥
]))

636 =ğ
NULL
 || 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

637 
size
 = 
	`£tTy³Size
(
£t
);

640 ià(
couÁ
 == 0) {

641 
	`addR•ly
(
c
,
sh¬ed
.
em±y£t
[c->
»¥
]);

649 ià(!
uniq
) {

650 
	`addR•lyS‘L’
(
c
,
couÁ
);

651 
couÁ
--) {

652 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
–e
,&
Î–e
);

653 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

654 
	`addR•lyBulkLÚgLÚg
(
c
,
Î–e
);

656 
	`addR•lyBulkCBufãr
(
c
,
–e
,
	`sd¦’
(ele));

665 ià(
couÁ
 >ğ
size
) {

666 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+1,1,
NULL
,
SET_OP_UNION
);

671 
d
 = 
	`diùC»©e
(&
objeùKeyPoš‹rV®ueDiùTy³
,
NULL
);

682 ià(
couÁ
*
SRANDMEMBER_SUB_STRATEGY_MUL
 > 
size
) {

683 
£tTy³I‹¿tÜ
 *
si
;

686 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£t
);

687 (
’codšg
 = 
	`£tTy³Next
(
si
,&
–e
,&
Î–e
)) != -1) {

688 
»tv®
 = 
DICT_ERR
;

690 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

691 
»tv®
 = 
	`diùAdd
(
d
,
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î–e
),
NULL
);

693 
»tv®
 = 
	`diùAdd
(
d
,
	`ü—‹SŒšgObjeù
(
–e
,
	`sd¦’
ÓË)),
NULL
);

695 
	`£rv”As£¹
(
»tv®
 =ğ
DICT_OK
);

697 
	`£tTy³R–—£I‹¿tÜ
(
si
);

698 
	`£rv”As£¹
(
	`diùSize
(
d
è=ğ
size
);

701 
size
 > 
couÁ
) {

702 
diùEÁry
 *
de
;

704 
de
 = 
	`diùG‘RªdomKey
(
d
);

705 
	`diùD–‘e
(
d
,
	`diùG‘Key
(
de
));

706 
size
--;

715 
added
 = 0;

716 
robj
 *
obj–e
;

718 
added
 < 
couÁ
) {

719 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
–e
,&
Î–e
);

720 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

721 
obj–e
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Î–e
);

723 
obj–e
 = 
	`ü—‹SŒšgObjeù
(
–e
,
	`sd¦’
(ele));

728 ià(
	`diùAdd
(
d
,
obj–e
,
NULL
è=ğ
DICT_OK
)

729 
added
++;

731 
	`deüRefCouÁ
(
obj–e
);

737 
diùI‹¿tÜ
 *
di
;

738 
diùEÁry
 *
de
;

740 
	`addR•lyS‘L’
(
c
,
couÁ
);

741 
di
 = 
	`diùG‘I‹¿tÜ
(
d
);

742 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
)

743 
	`addR•lyBulk
(
c
,
	`diùG‘Key
(
de
));

744 
	`diùR–—£I‹¿tÜ
(
di
);

745 
	`diùR–—£
(
d
);

747 
	}
}

749 
	$¤ªdmemb”Commªd
(
ş›Á
 *
c
) {

750 
robj
 *
£t
;

751 
sds
 
–e
;

752 
št64_t
 
Î–e
;

753 
’codšg
;

755 ià(
c
->
¬gc
 == 3) {

756 
	`¤ªdmemb”W™hCouÁCommªd
(
c
);

758 } ià(
c
->
¬gc
 > 3) {

759 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

763 ià((
£t
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
]))

764 =ğ
NULL
 || 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

766 
’codšg
 = 
	`£tTy³RªdomEËm’t
(
£t
,&
–e
,&
Î–e
);

767 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

768 
	`addR•lyBulkLÚgLÚg
(
c
,
Î–e
);

770 
	`addR•lyBulkCBufãr
(
c
,
–e
,
	`sd¦’
(ele));

772 
	}
}

774 
	$qsÜtCom·»S‘sByC¬dš®™y
(cÚ¡ *
s1
, cÚ¡ *
s2
) {

775 ià(
	`£tTy³Size
(*(
robj
**)
s1
è> s‘Ty³Size(*Ôobj**)
s2
))  1;

776 ià(
	`£tTy³Size
(*(
robj
**)
s1
è< s‘Ty³Size(*Ôobj**)
s2
))  -1;

778 
	}
}

782 
	$qsÜtCom·»S‘sByRevC¬dš®™y
(cÚ¡ *
s1
, cÚ¡ *
s2
) {

783 
robj
 *
o1
 = *Ôobj**)
s1
, *
o2
 = *Ôobj**)
s2
;

784 
fœ¡
 = 
o1
 ? 
	`£tTy³Size
(o1) : 0;

785 
£cÚd
 = 
o2
 ? 
	`£tTy³Size
(o2) : 0;

787 ià(
fœ¡
 < 
£cÚd
)  1;

788 ià(
fœ¡
 > 
£cÚd
)  -1;

790 
	}
}

792 
	$sš‹rG’”icCommªd
(
ş›Á
 *
c
, 
robj
 **
£tkeys
,

793 
£Šum
, 
robj
 *
d¡key
) {

794 
robj
 **
£ts
 = 
	`zm®loc
(Ôobj*)*
£Šum
);

795 
£tTy³I‹¿tÜ
 *
si
;

796 
robj
 *
d¡£t
 = 
NULL
;

797 
sds
 
–esds
;

798 
št64_t
 
štobj
;

799 *
»¶yËn
 = 
NULL
;

800 
j
, 
ÿrdš®™y
 = 0;

801 
’codšg
;

803 
j
 = 0; j < 
£Šum
; j++) {

804 
robj
 *
£tobj
 = 
d¡key
 ?

805 
	`lookupKeyWr™e
(
c
->
db
,
£tkeys
[
j
]) :

806 
	`lookupKeyR—d
(
c
->
db
,
£tkeys
[
j
]);

807 ià(!
£tobj
) {

808 
	`zä“
(
£ts
);

809 ià(
d¡key
) {

810 ià(
	`dbD–‘e
(
c
->
db
,
d¡key
)) {

811 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

812 
£rv”
.
dœty
++;

814 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

816 
	`addR•ly
(
c
,
sh¬ed
.
em±y£t
[c->
»¥
]);

820 ià(
	`checkTy³
(
c
,
£tobj
,
OBJ_SET
)) {

821 
	`zä“
(
£ts
);

824 
£ts
[
j
] = 
£tobj
;

828 
	`qsÜt
(
£ts
,
£Šum
,(
robj
*),
qsÜtCom·»S‘sByC¬dš®™y
);

835 ià(!
d¡key
) {

836 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

840 
d¡£t
 = 
	`ü—‹IÁ£tObjeù
();

846 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£ts
[0]);

847 (
’codšg
 = 
	`£tTy³Next
(
si
,&
–esds
,&
štobj
)) != -1) {

848 
j
 = 1; j < 
£Šum
; j++) {

849 ià(
£ts
[
j
] == sets[0]) ;

850 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

852 ià(
£ts
[
j
]->
’codšg
 =ğ
OBJ_ENCODING_INTSET
 &&

853 !
	`št£tFšd
((
št£t
*)
£ts
[
j
]->
±r
,
štobj
))

859 } ià(
£ts
[
j
]->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

860 
–esds
 = 
	`sdsäomlÚglÚg
(
štobj
);

861 ià(!
	`£tTy³IsMemb”
(
£ts
[
j
],
–esds
)) {

862 
	`sdsä“
(
–esds
);

865 
	`sdsä“
(
–esds
);

867 } ià(
’codšg
 =ğ
OBJ_ENCODING_HT
) {

868 ià(!
	`£tTy³IsMemb”
(
£ts
[
j
],
–esds
)) {

875 ià(
j
 =ğ
£Šum
) {

876 ià(!
d¡key
) {

877 ià(
’codšg
 =ğ
OBJ_ENCODING_HT
)

878 
	`addR•lyBulkCBufãr
(
c
,
–esds
,
	`sd¦’
(elesds));

880 
	`addR•lyBulkLÚgLÚg
(
c
,
štobj
);

881 
ÿrdš®™y
++;

883 ià(
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

884 
–esds
 = 
	`sdsäomlÚglÚg
(
štobj
);

885 
	`£tTy³Add
(
d¡£t
,
–esds
);

886 
	`sdsä“
(
–esds
);

888 
	`£tTy³Add
(
d¡£t
,
–esds
);

893 
	`£tTy³R–—£I‹¿tÜ
(
si
);

895 ià(
d¡key
) {

898 
d–‘ed
 = 
	`dbD–‘e
(
c
->
db
,
d¡key
);

899 ià(
	`£tTy³Size
(
d¡£t
) > 0) {

900 
	`dbAdd
(
c
->
db
,
d¡key
,
d¡£t
);

901 
	`addR•lyLÚgLÚg
(
c
,
	`£tTy³Size
(
d¡£t
));

902 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,"sinterstore",

903 
d¡key
,
c
->
db
->
id
);

905 
	`deüRefCouÁ
(
d¡£t
);

906 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

907 ià(
d–‘ed
)

908 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"del",

909 
d¡key
,
c
->
db
->
id
);

911 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

912 
£rv”
.
dœty
++;

914 
	`£tDeã¼edS‘L’
(
c
,
»¶yËn
,
ÿrdš®™y
);

916 
	`zä“
(
£ts
);

917 
	}
}

919 
	$sš‹rCommªd
(
ş›Á
 *
c
) {

920 
	`sš‹rG’”icCommªd
(
c
,c->
¬gv
+1,c->
¬gc
-1,
NULL
);

921 
	}
}

923 
	$sš‹r¡ÜeCommªd
(
ş›Á
 *
c
) {

924 
	`sš‹rG’”icCommªd
(
c
,c->
¬gv
+2,c->
¬gc
-2,c->argv[1]);

925 
	}
}

927 
	#SET_OP_UNION
 0

	)

928 
	#SET_OP_DIFF
 1

	)

929 
	#SET_OP_INTER
 2

	)

931 
	$suniÚDiffG’”icCommªd
(
ş›Á
 *
c
, 
robj
 **
£tkeys
, 
£Šum
,

932 
robj
 *
d¡key
, 
İ
) {

933 
robj
 **
£ts
 = 
	`zm®loc
(Ôobj*)*
£Šum
);

934 
£tTy³I‹¿tÜ
 *
si
;

935 
robj
 *
d¡£t
 = 
NULL
;

936 
sds
 
–e
;

937 
j
, 
ÿrdš®™y
 = 0;

938 
diff_®go
 = 1;

940 
j
 = 0; j < 
£Šum
; j++) {

941 
robj
 *
£tobj
 = 
d¡key
 ?

942 
	`lookupKeyWr™e
(
c
->
db
,
£tkeys
[
j
]) :

943 
	`lookupKeyR—d
(
c
->
db
,
£tkeys
[
j
]);

944 ià(!
£tobj
) {

945 
£ts
[
j
] = 
NULL
;

948 ià(
	`checkTy³
(
c
,
£tobj
,
OBJ_SET
)) {

949 
	`zä“
(
£ts
);

952 
£ts
[
j
] = 
£tobj
;

964 ià(
İ
 =ğ
SET_OP_DIFF
 && 
£ts
[0]) {

965 
®go_Úe_wÜk
 = 0, 
®go_two_wÜk
 = 0;

967 
j
 = 0; j < 
£Šum
; j++) {

968 ià(
£ts
[
j
] =ğ
NULL
) ;

970 
®go_Úe_wÜk
 +ğ
	`£tTy³Size
(
£ts
[0]);

971 
®go_two_wÜk
 +ğ
	`£tTy³Size
(
£ts
[
j
]);

976 
®go_Úe_wÜk
 /= 2;

977 
diff_®go
 = (
®go_Úe_wÜk
 <ğ
®go_two_wÜk
) ? 1 : 2;

979 ià(
diff_®go
 =ğ1 && 
£Šum
 > 1) {

983 
	`qsÜt
(
£ts
+1,
£Šum
-1,(
robj
*),

984 
qsÜtCom·»S‘sByRevC¬dš®™y
);

991 
d¡£t
 = 
	`ü—‹IÁ£tObjeù
();

993 ià(
İ
 =ğ
SET_OP_UNION
) {

996 
j
 = 0; j < 
£Šum
; j++) {

997 ià(!
£ts
[
j
]) ;

999 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£ts
[
j
]);

1000 (
–e
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

1001 ià(
	`£tTy³Add
(
d¡£t
,
–e
)è
ÿrdš®™y
++;

1002 
	`sdsä“
(
–e
);

1004 
	`£tTy³R–—£I‹¿tÜ
(
si
);

1006 } ià(
İ
 =ğ
SET_OP_DIFF
 && 
£ts
[0] && 
diff_®go
 == 1) {

1015 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£ts
[0]);

1016 (
–e
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

1017 
j
 = 1; j < 
£Šum
; j++) {

1018 ià(!
£ts
[
j
]) ;

1019 ià(
£ts
[
j
] == sets[0]) ;

1020 ià(
	`£tTy³IsMemb”
(
£ts
[
j
],
–e
)) ;

1022 ià(
j
 =ğ
£Šum
) {

1024 
	`£tTy³Add
(
d¡£t
,
–e
);

1025 
ÿrdš®™y
++;

1027 
	`sdsä“
(
–e
);

1029 
	`£tTy³R–—£I‹¿tÜ
(
si
);

1030 } ià(
İ
 =ğ
SET_OP_DIFF
 && 
£ts
[0] && 
diff_®go
 == 2) {

1038 
j
 = 0; j < 
£Šum
; j++) {

1039 ià(!
£ts
[
j
]) ;

1041 
si
 = 
	`£tTy³In™I‹¿tÜ
(
£ts
[
j
]);

1042 (
–e
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

1043 ià(
j
 == 0) {

1044 ià(
	`£tTy³Add
(
d¡£t
,
–e
)è
ÿrdš®™y
++;

1046 ià(
	`£tTy³Remove
(
d¡£t
,
–e
)è
ÿrdš®™y
--;

1048 
	`sdsä“
(
–e
);

1050 
	`£tTy³R–—£I‹¿tÜ
(
si
);

1054 ià(
ÿrdš®™y
 == 0) ;

1059 ià(!
d¡key
) {

1060 
	`addR•lyS‘L’
(
c
,
ÿrdš®™y
);

1061 
si
 = 
	`£tTy³In™I‹¿tÜ
(
d¡£t
);

1062 (
–e
 = 
	`£tTy³NextObjeù
(
si
)è!ğ
NULL
) {

1063 
	`addR•lyBulkCBufãr
(
c
,
–e
,
	`sd¦’
(ele));

1064 
	`sdsä“
(
–e
);

1066 
	`£tTy³R–—£I‹¿tÜ
(
si
);

1067 
£rv”
.
Ïzyä“_Ïzy_£rv”_d–
 ? 
	`ä“ObjAsync
(
d¡£t
) :

1068 
	`deüRefCouÁ
(
d¡£t
);

1072 
d–‘ed
 = 
	`dbD–‘e
(
c
->
db
,
d¡key
);

1073 ià(
	`£tTy³Size
(
d¡£t
) > 0) {

1074 
	`dbAdd
(
c
->
db
,
d¡key
,
d¡£t
);

1075 
	`addR•lyLÚgLÚg
(
c
,
	`£tTy³Size
(
d¡£t
));

1076 
	`nÙifyKey¥aûEv’t
(
NOTIFY_SET
,

1077 
İ
 =ğ
SET_OP_UNION
 ? "sunionstore" : "sdiffstore",

1078 
d¡key
,
c
->
db
->
id
);

1080 
	`deüRefCouÁ
(
d¡£t
);

1081 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1082 ià(
d–‘ed
)

1083 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"del",

1084 
d¡key
,
c
->
db
->
id
);

1086 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

1087 
£rv”
.
dœty
++;

1089 
	`zä“
(
£ts
);

1090 
	}
}

1092 
	$suniÚCommªd
(
ş›Á
 *
c
) {

1093 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+1,c->
¬gc
-1,
NULL
,
SET_OP_UNION
);

1094 
	}
}

1096 
	$suniÚ¡ÜeCommªd
(
ş›Á
 *
c
) {

1097 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+2,c->
¬gc
-2,c->¬gv[1],
SET_OP_UNION
);

1098 
	}
}

1100 
	$sdiffCommªd
(
ş›Á
 *
c
) {

1101 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+1,c->
¬gc
-1,
NULL
,
SET_OP_DIFF
);

1102 
	}
}

1104 
	$sdiff¡ÜeCommªd
(
ş›Á
 *
c
) {

1105 
	`suniÚDiffG’”icCommªd
(
c
,c->
¬gv
+2,c->
¬gc
-2,c->¬gv[1],
SET_OP_DIFF
);

1106 
	}
}

1108 
	$ssÿnCommªd
(
ş›Á
 *
c
) {

1109 
robj
 *
£t
;

1110 
cursÜ
;

1112 ià(
	`·r£SÿnCursÜOrR•ly
(
c
,c->
¬gv
[2],&
cursÜ
è=ğ
C_ERR
) ;

1113 ià((
£t
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±ysÿn
)è=ğ
NULL
 ||

1114 
	`checkTy³
(
c
,
£t
,
OBJ_SET
)) ;

1115 
	`sÿnG’”icCommªd
(
c
,
£t
,
cursÜ
);

1116 
	}
}

	@t_stream.c

30 
	~"£rv”.h
"

31 
	~"’dŸncÚv.h
"

32 
	~"¡»am.h
"

34 
	#STREAM_BYTES_PER_LISTPACK
 2048

	)

39 
	#STREAM_ITEM_FLAG_NONE
 0

	)

40 
	#STREAM_ITEM_FLAG_DELETED
 (1<<0è

	)

41 
	#STREAM_ITEM_FLAG_SAMEFIELDS
 (1<<1è

	)

43 
¡»amF»eCG
(
¡»amCG
 *
cg
);

44 
¡»amF»eNACK
(
¡»amNACK
 *
Ç
);

45 
size_t
 
¡»amR•lyW™hRªgeFromCÚsum”PEL
(
ş›Á
 *
c
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, size_ˆ
couÁ
, 
¡»amCÚsum”
 *
cÚsum”
);

52 
¡»am
 *
	$¡»amNew
() {

53 
¡»am
 *
s
 = 
	`zm®loc
((*s));

54 
s
->
¿x
 = 
	`¿xNew
();

55 
s
->
Ëngth
 = 0;

56 
s
->
Ï¡_id
.
ms
 = 0;

57 
s
->
Ï¡_id
.
£q
 = 0;

58 
s
->
cgroups
 = 
NULL
;

59  
s
;

60 
	}
}

63 
	$ä“SŒ—m
(
¡»am
 *
s
) {

64 
	`¿xF»eW™hC®lback
(
s
->
¿x
,((*)(*))
ÍF»e
);

65 ià(
s
->
cgroups
)

66 
	`¿xF»eW™hC®lback
(
s
->
cgroups
,((*)(*))
¡»amF»eCG
);

67 
	`zä“
(
s
);

68 
	}
}

71 
	$¡»amL’gth
(cÚ¡ 
robj
 *
subjeù
) {

72 
¡»am
 *
s
 = 
subjeù
->
±r
;

73  
s
->
Ëngth
;

74 
	}
}

77 
	$¡»amInüID
(
¡»amID
 *
id
) {

78 ià(
id
->
£q
 =ğ
UINT64_MAX
) {

79 ià(
id
->
ms
 =ğ
UINT64_MAX
) {

81 
id
->
ms
 = id->
£q
 = 0;

83 
id
->
ms
++;

84 
id
->
£q
 = 0;

87 
id
->
£q
++;

89 
	}
}

95 
	$¡»amNextID
(
¡»amID
 *
Ï¡_id
, sŒ—mID *
Ãw_id
) {

96 
ušt64_t
 
ms
 = 
	`m¡ime
();

97 ià(
ms
 > 
Ï¡_id
->ms) {

98 
Ãw_id
->
ms
 = ms;

99 
Ãw_id
->
£q
 = 0;

101 *
Ãw_id
 = *
Ï¡_id
;

102 
	`¡»amInüID
(
Ãw_id
);

104 
	}
}

108 *
	$ÍAµ’dIÁeg”
(*
Í
, 
št64_t
 
v®ue
) {

109 
buf
[
LONG_STR_SIZE
];

110 
¦’
 = 
	`Î2¡ršg
(
buf
,(buf),
v®ue
);

111  
	`ÍAµ’d
(
Í
,(*)
buf
,
¦’
);

112 
	}
}

118 *
	$ÍR•ÏûIÁeg”
(*
Í
, **
pos
, 
št64_t
 
v®ue
) {

119 
buf
[
LONG_STR_SIZE
];

120 
¦’
 = 
	`Î2¡ršg
(
buf
,(buf),
v®ue
);

121  
	`ÍIn£¹
(
Í
, (*)
buf
, 
¦’
, *
pos
, 
LP_REPLACE
,…os);

122 
	}
}

127 
št64_t
 
	$ÍG‘IÁeg”
(*
–e
) {

128 
št64_t
 
v
;

129 *
e
 = 
	`ÍG‘
(
–e
,&
v
,
NULL
);

130 ià(
e
 =ğ
NULL
è 
v
;

134 
Î
;

135 
»tv®
 = 
	`¡ršg2Î
((*)
e
,
v
,&
Î
);

136 
	`£rv”As£¹
(
»tv®
 != 0);

137 
v
 = 
Î
;

138  
v
;

139 
	}
}

143 
	$¡»amLogLi¡·ckCÚ‹Á
(*
Í
) {

144 *
p
 = 
	`ÍFœ¡
(
Í
);

145 
p
) {

146 
buf
[
LP_INTBUF_SIZE
];

147 
št64_t
 
v
;

148 *
–e
 = 
	`ÍG‘
(
p
,&
v
,
buf
);

149 
	`£rv”Log
(
LL_WARNING
,"- [%d] '%.*s'", ()
v
, ()v, 
–e
);

150 
p
 = 
	`ÍNext
(
Í
,p);

152 
	}
}

156 
	$¡»amEncodeID
(*
buf
, 
¡»amID
 *
id
) {

157 
ušt64_t
 
e
[2];

158 
e
[0] = 
	`htÚu64
(
id
->
ms
);

159 
e
[1] = 
	`htÚu64
(
id
->
£q
);

160 
	`memıy
(
buf
,
e
,(e));

161 
	}
}

166 
	$¡»amDecodeID
(*
buf
, 
¡»amID
 *
id
) {

167 
ušt64_t
 
e
[2];

168 
	`memıy
(
e
,
buf
,(e));

169 
id
->
ms
 = 
	`Áohu64
(
e
[0]);

170 
id
->
£q
 = 
	`Áohu64
(
e
[1]);

171 
	}
}

174 
	$¡»amCom·»ID
(
¡»amID
 *
a
, sŒ—mID *
b
) {

175 ià(
a
->
ms
 > 
b
->ms)  1;

176 ià(
a
->
ms
 < 
b
->ms)  -1;

178 ià(
a
->
£q
 > 
b
->seq)  1;

179 ià(
a
->
£q
 < 
b
->seq)  -1;

182 
	}
}

196 
	$¡»amAµ’dI‹m
(
¡»am
 *
s
, 
robj
 **
¬gv
, 
št64_t
 
numf›lds
, 
¡»amID
 *
added_id
, sŒ—mID *
u£_id
) {

199 
¡»amID
 
id
;

200 ià(
u£_id
)

201 
id
 = *
u£_id
;

203 
	`¡»amNextID
(&
s
->
Ï¡_id
,&
id
);

209 ià(
	`¡»amCom·»ID
(&
id
,&
s
->
Ï¡_id
è<ğ0è 
C_ERR
;

212 
¿xI‹¿tÜ
 
ri
;

213 
	`¿xS¹
(&
ri
,
s
->
¿x
);

214 
	`¿xS“k
(&
ri
,"$",
NULL
,0);

216 
size_t
 
Í_by‹s
 = 0;

217 *
Í
 = 
NULL
;

220 ià(
	`¿xNext
(&
ri
)) {

221 
Í
 = 
ri
.
d©a
;

222 
Í_by‹s
 = 
	`ÍBy‹s
(
Í
);

224 
	`¿xStİ
(&
ri
);

229 
ušt64_t
 
¿x_key
[2];

230 
¡»amID
 
ma¡”_id
;

267 ià(
Í
 !ğ
NULL
) {

268 ià(
£rv”
.
¡»am_node_max_by‹s
 &&

269 
Í_by‹s
 >ğ
£rv”
.
¡»am_node_max_by‹s
)

271 
Í
 = 
NULL
;

272 } ià(
£rv”
.
¡»am_node_max_’Œ›s
) {

273 
št64_t
 
couÁ
 = 
	`ÍG‘IÁeg”
(
	`ÍFœ¡
(
Í
));

274 ià(
couÁ
 >ğ
£rv”
.
¡»am_node_max_’Œ›s
è
Í
 = 
NULL
;

278 
æags
 = 
STREAM_ITEM_FLAG_NONE
;

279 ià(
Í
 =ğ
NULL
 || 
Í_by‹s
 >ğ
£rv”
.
¡»am_node_max_by‹s
) {

280 
ma¡”_id
 = 
id
;

281 
	`¡»amEncodeID
(
¿x_key
,&
id
);

283 
Í
 = 
	`ÍNew
();

284 
Í
 = 
	`ÍAµ’dIÁeg”
(lp,1);

285 
Í
 = 
	`ÍAµ’dIÁeg”
(lp,0);

286 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
numf›lds
);

287 
št64_t
 
i
 = 0; i < 
numf›lds
; i++) {

288 
sds
 
f›ld
 = 
¬gv
[
i
*2]->
±r
;

289 
Í
 = 
	`ÍAµ’d
Öp,(*)
f›ld
,
	`sd¦’
(field));

291 
Í
 = 
	`ÍAµ’dIÁeg”
(lp,0);

292 
	`¿xIn£¹
(
s
->
¿x
,(*)&
¿x_key
,Ôax_key),
Í
,
NULL
);

295 
æags
 |ğ
STREAM_ITEM_FLAG_SAMEFIELDS
;

297 
	`£rv”As£¹
(
ri
.
key_Ën
 =ğ(
¿x_key
));

298 
	`memıy
(
¿x_key
,
ri
.
key
,(rax_key));

301 
	`¡»amDecodeID
(
¿x_key
,&
ma¡”_id
);

302 *
Í_–e
 = 
	`ÍFœ¡
(
Í
);

305 
št64_t
 
couÁ
 = 
	`ÍG‘IÁeg”
(
Í_–e
);

306 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
Í_–e
,
couÁ
+1);

307 
Í_–e
 = 
	`ÍNext
(
Í
,lp_ele);

308 
Í_–e
 = 
	`ÍNext
(
Í
,lp_ele);

312 
št64_t
 
ma¡”_f›lds_couÁ
 = 
	`ÍG‘IÁeg”
(
Í_–e
);

313 
Í_–e
 = 
	`ÍNext
(
Í
,lp_ele);

314 ià(
numf›lds
 =ğ
ma¡”_f›lds_couÁ
) {

315 
št64_t
 
i
;

316 
i
 = 0; i < 
ma¡”_f›lds_couÁ
; i++) {

317 
sds
 
f›ld
 = 
¬gv
[
i
*2]->
±r
;

318 
št64_t
 
e_Ën
;

319 
buf
[
LP_INTBUF_SIZE
];

320 *
e
 = 
	`ÍG‘
(
Í_–e
,&
e_Ën
,
buf
);

322 ià(
	`sd¦’
(
f›ld
è!ğ(
size_t
)
e_Ën
 ||

323 
	`memcmp
(
e
,
f›ld
,
e_Ën
) != 0) ;

324 
Í_–e
 = 
	`ÍNext
(
Í
,lp_ele);

328 ià(
i
 =ğ
ma¡”_f›lds_couÁ
è
æags
 |ğ
STREAM_ITEM_FLAG_SAMEFIELDS
;

354 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
æags
);

355 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
id
.
ms
 - 
ma¡”_id
.ms);

356 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
id
.
£q
 - 
ma¡”_id
.seq);

357 ià(!(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
))

358 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
numf›lds
);

359 
št64_t
 
i
 = 0; i < 
numf›lds
; i++) {

360 
sds
 
f›ld
 = 
¬gv
[
i
*2]->
±r
, 
v®ue
 =‡rgv[i*2+1]->ptr;

361 ià(!(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
))

362 
Í
 = 
	`ÍAµ’d
Öp,(*)
f›ld
,
	`sd¦’
(field));

363 
Í
 = 
	`ÍAµ’d
Öp,(*)
v®ue
,
	`sd¦’
(value));

366 
št64_t
 
Í_couÁ
 = 
numf›lds
;

367 
Í_couÁ
 += 3;

368 ià(!(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
)) {

371 
Í_couÁ
 +ğ
numf›lds
+1;

373 
Í
 = 
	`ÍAµ’dIÁeg”
Öp,
Í_couÁ
);

376 ià(
ri
.
d©a
 !ğ
Í
)

377 
	`¿xIn£¹
(
s
->
¿x
,(*)&
¿x_key
,Ôax_key),
Í
,
NULL
);

378 
s
->
Ëngth
++;

379 
s
->
Ï¡_id
 = 
id
;

380 ià(
added_id
è*added_id = 
id
;

381  
C_OK
;

382 
	}
}

398 
št64_t
 
	$¡»amTrimByL’gth
(
¡»am
 *
s
, 
size_t
 
maxËn
, 
­´ox
) {

399 ià(
s
->
Ëngth
 <ğ
maxËn
)  0;

401 
¿xI‹¿tÜ
 
ri
;

402 
	`¿xS¹
(&
ri
,
s
->
¿x
);

403 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

405 
št64_t
 
d–‘ed
 = 0;

406 
s
->
Ëngth
 > 
maxËn
 && 
	`¿xNext
(&
ri
)) {

407 *
Í
 = 
ri
.
d©a
, *
p
 = 
	`ÍFœ¡
(lp);

408 
št64_t
 
’Œ›s
 = 
	`ÍG‘IÁeg”
(
p
);

412 ià(
s
->
Ëngth
 - 
’Œ›s
 >ğ
maxËn
) {

413 
	`ÍF»e
(
Í
);

414 
	`¿xRemove
(
s
->
¿x
,
ri
.
key
,ri.
key_Ën
,
NULL
);

415 
	`¿xS“k
(&
ri
,">=",ri.
key
,ri.
key_Ën
);

416 
s
->
Ëngth
 -ğ
’Œ›s
;

417 
d–‘ed
 +ğ
’Œ›s
;

423 ià(
­´ox
) ;

427 
št64_t
 
to_d–‘e
 = 
s
->
Ëngth
 - 
maxËn
;

428 
	`£rv”As£¹
(
to_d–‘e
 < 
’Œ›s
);

429 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
p
,
’Œ›s
-
to_d–‘e
);

430 
p
 = 
	`ÍNext
(
Í
,p);

431 
št64_t
 
m¬ked_d–‘ed
 = 
	`ÍG‘IÁeg”
(
p
);

432 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
p
,
m¬ked_d–‘ed
+
to_d–‘e
);

433 
p
 = 
	`ÍNext
(
Í
,p);

436 
št64_t
 
ma¡”_f›lds_couÁ
 = 
	`ÍG‘IÁeg”
(
p
);

437 
p
 = 
	`ÍNext
(
Í
,p);

438 
št64_t
 
j
 = 0; j < 
ma¡”_f›lds_couÁ
; j++)

439 
p
 = 
	`ÍNext
(
Í
,p);

440 
p
 = 
	`ÍNext
(
Í
,p);

445 
p
) {

446 
æags
 = 
	`ÍG‘IÁeg”
(
p
);

447 
to_sk
;

450 ià(!(
æags
 & 
STREAM_ITEM_FLAG_DELETED
)) {

451 
æags
 |ğ
STREAM_ITEM_FLAG_DELETED
;

452 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
p
,
æags
);

453 
d–‘ed
++;

454 
s
->
Ëngth
--;

455 ià(
s
->
Ëngth
 <ğ
maxËn
) ;

458 
p
 = 
	`ÍNext
(
Í
,p);

459 
p
 = 
	`ÍNext
(
Í
,p);

460 
p
 = 
	`ÍNext
(
Í
,p);

461 ià(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
) {

462 
to_sk
 = 
ma¡”_f›lds_couÁ
;

464 
to_sk
 = 
	`ÍG‘IÁeg”
(
p
);

465 
to_sk
 = 1+(to_skip*2);

468 
to_sk
--è
p
 = 
	`ÍNext
(
Í
,p);

469 
p
 = 
	`ÍNext
(
Í
,p);

474 
’Œ›s
 -ğ
to_d–‘e
;

475 
m¬ked_d–‘ed
 +ğ
to_d–‘e
;

476 ià(
’Œ›s
 + 
m¬ked_d–‘ed
 > 10 && marked_deleted >ƒntries/2) {

481 
	`¿xIn£¹
(
s
->
¿x
,
ri
.
key
,ri.
key_Ën
,
Í
,
NULL
);

487 
	`¿xStİ
(&
ri
);

488  
d–‘ed
;

489 
	}
}

512 
	$¡»amI‹¿tÜS¹
(
¡»amI‹¿tÜ
 *
si
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, 
»v
) {

515 ià(
¡¬t
) {

516 
	`¡»amEncodeID
(
si
->
¡¬t_key
,
¡¬t
);

518 
si
->
¡¬t_key
[0] = 0;

519 
si
->
¡¬t_key
[1] = 0;

522 ià(
’d
) {

523 
	`¡»amEncodeID
(
si
->
’d_key
,
’d
);

525 
si
->
’d_key
[0] = 
UINT64_MAX
;

526 
si
->
’d_key
[1] = 
UINT64_MAX
;

530 
	`¿xS¹
(&
si
->
ri
,
s
->
¿x
);

531 ià(!
»v
) {

532 ià(
¡¬t
 && (¡¬t->
ms
 || s¹->
£q
)) {

533 
	`¿xS“k
(&
si
->
ri
,"<=",(*)si->
¡¬t_key
,

534 (
si
->
¡¬t_key
));

535 ià(
	`¿xEOF
(&
si
->
ri
)è
	`¿xS“k
(&si->ri,"^",
NULL
,0);

537 
	`¿xS“k
(&
si
->
ri
,"^",
NULL
,0);

540 ià(
’d
 && (’d->
ms
 ||ƒnd->
£q
)) {

541 
	`¿xS“k
(&
si
->
ri
,"<=",(*)si->
’d_key
,

542 (
si
->
’d_key
));

543 ià(
	`¿xEOF
(&
si
->
ri
)è
	`¿xS“k
(&si->ri,"$",
NULL
,0);

545 
	`¿xS“k
(&
si
->
ri
,"$",
NULL
,0);

548 
si
->
¡»am
 = 
s
;

549 
si
->
Í
 = 
NULL
;

550 
si
->
Í_–e
 = 
NULL
;

551 
si
->
»v
 =„ev;

552 
	}
}

557 
	$¡»amI‹¿tÜG‘ID
(
¡»amI‹¿tÜ
 *
si
, 
¡»amID
 *
id
, 
št64_t
 *
numf›lds
) {

562 ià(
si
->
Í
 =ğ
NULL
 || si->
Í_–e
 == NULL) {

563 ià(!
si
->
»v
 && !
	`¿xNext
(&si->
ri
))  0;

564 ià(
si
->
»v
 && !
	`¿xP»v
(&si->
ri
))  0;

565 
	`£rv”As£¹
(
si
->
ri
.
key_Ën
 =ğ(
¡»amID
));

567 
	`¡»amDecodeID
(
si
->
ri
.
key
,&si->
ma¡”_id
);

569 
si
->
Í
 = si->
ri
.
d©a
;

570 
si
->
Í_–e
 = 
	`ÍFœ¡
(si->
Í
);

571 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

572 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

573 
si
->
ma¡”_f›lds_couÁ
 = 
	`ÍG‘IÁeg”
(si->
Í_–e
);

574 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

575 
si
->
ma¡”_f›lds_¡¬t
 = si->
Í_–e
;

579 ià(!
si
->
»v
) {

582 
ušt64_t
 
i
 = 0; i < 
si
->
ma¡”_f›lds_couÁ
; i++)

583 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

588 
si
->
Í_–e
 = 
	`ÍLa¡
(si->
Í
);

590 } ià(
si
->
»v
) {

595 
Í_couÁ
 = 
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

596 
Í_couÁ
--è
si
->
Í_–e
 = 
	`ÍP»v
(si->
Í
,si->lp_ele);

598 
si
->
Í_–e
 = 
	`ÍP»v
(si->
Í
,si->lp_ele);

604 ià(!
si
->
»v
) {

608 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

609 ià(
si
->
Í_–e
 =ğ
NULL
) ;

614 
št64_t
 
Í_couÁ
 = 
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

615 ià(
Í_couÁ
 == 0) {

616 
si
->
Í
 = 
NULL
;

617 
si
->
Í_–e
 = 
NULL
;

620 
Í_couÁ
--è
si
->
Í_–e
 = 
	`ÍP»v
(si->
Í
,si->lp_ele);

624 
si
->
Í_æags
 = si->
Í_–e
;

625 
æags
 = 
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

626 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

630 *
id
 = 
si
->
ma¡”_id
;

631 
id
->
ms
 +ğ
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

632 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

633 
id
->
£q
 +ğ
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

634 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

635 
buf
[(
¡»amID
)];

636 
	`¡»amEncodeID
(
buf
,
id
);

640 ià(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
) {

641 *
numf›lds
 = 
si
->
ma¡”_f›lds_couÁ
;

643 *
numf›lds
 = 
	`ÍG‘IÁeg”
(
si
->
Í_–e
);

644 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

649 ià(!
si
->
»v
) {

650 ià(
	`memcmp
(
buf
,
si
->
¡¬t_key
,(
¡»amID
)) >= 0 &&

651 !(
æags
 & 
STREAM_ITEM_FLAG_DELETED
))

653 ià(
	`memcmp
(
buf
,
si
->
’d_key
,(
¡»amID
)) > 0)

655 
si
->
’Œy_æags
 = 
æags
;

656 ià(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
)

657 
si
->
ma¡”_f›lds_±r
 = si->
ma¡”_f›lds_¡¬t
;

661 ià(
	`memcmp
(
buf
,
si
->
’d_key
,(
¡»amID
)) <= 0 &&

662 !(
æags
 & 
STREAM_ITEM_FLAG_DELETED
))

664 ià(
	`memcmp
(
buf
,
si
->
¡¬t_key
,(
¡»amID
)) < 0)

666 
si
->
’Œy_æags
 = 
æags
;

667 ià(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
)

668 
si
->
ma¡”_f›lds_±r
 = si->
ma¡”_f›lds_¡¬t
;

676 ià(!
si
->
»v
) {

677 
št64_t
 
to_disÿrd
 = (
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
) ?

678 *
numf›lds
 : *numfields*2;

679 
št64_t
 
i
 = 0; i < 
to_disÿrd
; i++)

680 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

682 
št64_t
 
´ev_times
 = 4;

687 ià(!(
æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
)è
´ev_times
++;

688 
´ev_times
--è
si
->
Í_–e
 = 
	`ÍP»v
(si->
Í
,si->lp_ele);

694 
	}
}

702 
	$¡»amI‹¿tÜG‘F›ld
(
¡»amI‹¿tÜ
 *
si
, **
f›ld±r
, **
v®u•Œ
, 
št64_t
 *
f›ldËn
, iÁ64_ˆ*
v®u–’
) {

703 ià(
si
->
’Œy_æags
 & 
STREAM_ITEM_FLAG_SAMEFIELDS
) {

704 *
f›ld±r
 = 
	`ÍG‘
(
si
->
ma¡”_f›lds_±r
,
f›ldËn
,si->
f›ld_buf
);

705 
si
->
ma¡”_f›lds_±r
 = 
	`ÍNext
(si->
Í
,si->master_fields_ptr);

707 *
f›ld±r
 = 
	`ÍG‘
(
si
->
Í_–e
,
f›ldËn
,si->
f›ld_buf
);

708 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

710 *
v®u•Œ
 = 
	`ÍG‘
(
si
->
Í_–e
,
v®u–’
,si->
v®ue_buf
);

711 
si
->
Í_–e
 = 
	`ÍNext
(si->
Í
,si->lp_ele);

712 
	}
}

724 
	$¡»amI‹¿tÜRemoveEÁry
(
¡»amI‹¿tÜ
 *
si
, 
¡»amID
 *
cu¼’t
) {

725 *
Í
 = 
si
->lp;

726 
št64_t
 
aux
;

733 
æags
 = 
	`ÍG‘IÁeg”
(
si
->
Í_æags
);

734 
æags
 |ğ
STREAM_ITEM_FLAG_DELETED
;

735 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
si
->
Í_æags
,
æags
);

738 *
p
 = 
	`ÍFœ¡
(
Í
);

739 
aux
 = 
	`ÍG‘IÁeg”
(
p
);

741 ià(
aux
 == 1) {

744 
	`ÍF»e
(
Í
);

745 
	`¿xRemove
(
si
->
¡»am
->
¿x
,si->
ri
.
key
,si->ri.
key_Ën
,
NULL
);

748 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
p
,
aux
-1);

749 
p
 = 
	`ÍNext
(
Í
,p);

750 
aux
 = 
	`ÍG‘IÁeg”
(
p
);

751 
Í
 = 
	`ÍR•ÏûIÁeg”
Öp,&
p
,
aux
+1);

754 ià(
si
->
Í
 !=†p)

755 
	`¿xIn£¹
(
si
->
¡»am
->
¿x
,si->
ri
.
key
,si->ri.
key_Ën
,
Í
,
NULL
);

759 
si
->
¡»am
->
Ëngth
--;

762 
¡»amID
 
¡¬t
, 
’d
;

763 ià(
si
->
»v
) {

764 
	`¡»amDecodeID
(
si
->
¡¬t_key
,&
¡¬t
);

765 
’d
 = *
cu¼’t
;

767 
¡¬t
 = *
cu¼’t
;

768 
	`¡»amDecodeID
(
si
->
’d_key
,&
’d
);

770 
	`¡»amI‹¿tÜStİ
(
si
);

771 
	`¡»amI‹¿tÜS¹
(
si
,si->
¡»am
,&
¡¬t
,&
’d
,si->
»v
);

775 
	}
}

780 
	$¡»amI‹¿tÜStİ
(
¡»amI‹¿tÜ
 *
si
) {

781 
	`¿xStİ
(&
si
->
ri
);

782 
	}
}

786 
	$¡»amD–‘eI‹m
(
¡»am
 *
s
, 
¡»amID
 *
id
) {

787 
d–‘ed
 = 0;

788 
¡»amI‹¿tÜ
 
si
;

789 
	`¡»amI‹¿tÜS¹
(&
si
,
s
,
id
,id,0);

790 
¡»amID
 
myid
;

791 
št64_t
 
numf›lds
;

792 ià(
	`¡»amI‹¿tÜG‘ID
(&
si
,&
myid
,&
numf›lds
)) {

793 
	`¡»amI‹¿tÜRemoveEÁry
(&
si
,&
myid
);

794 
d–‘ed
 = 1;

796 
	`¡»amI‹¿tÜStİ
(&
si
);

797  
d–‘ed
;

798 
	}
}

801 
	$¡»amLa¡V®idID
(
¡»am
 *
s
, 
¡»amID
 *
maxid
)

803 
¡»amI‹¿tÜ
 
si
;

804 
	`¡»amI‹¿tÜS¹
(&
si
,
s
,
NULL
,NULL,1);

805 
št64_t
 
numf›lds
;

806 
	`¡»amI‹¿tÜG‘ID
(&
si
,
maxid
,&
numf›lds
);

807 
	`¡»amI‹¿tÜStİ
(&
si
);

808 
	}
}

813 
	$addR•lySŒ—mID
(
ş›Á
 *
c
, 
¡»amID
 *
id
) {

814 
sds
 
»¶yid
 = 
	`sdsÿtfmt
(
	`sd£m±y
(),"%U-%U",
id
->
ms
,id->
£q
);

815 
	`addR•lyBulkSds
(
c
,
»¶yid
);

816 
	}
}

820 
robj
 *
	$ü—‹ObjeùFromSŒ—mID
(
¡»amID
 *
id
) {

821  
	`ü—‹Objeù
(
OBJ_STRING
, 
	`sdsÿtfmt
(
	`sd£m±y
(),"%U-%U",

822 
id
->
ms
,id->
£q
));

823 
	}
}

828 
	$¡»amPrİag©eXCLAIM
(
ş›Á
 *
c
, 
robj
 *
key
, 
¡»amCG
 *
group
,„obj *
grou²ame
,„obj *
id
, 
¡»amNACK
 *
Çck
) {

836 
robj
 *
¬gv
[14];

837 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
("XCLAIM",6);

838 
¬gv
[1] = 
key
;

839 
¬gv
[2] = 
grou²ame
;

840 
¬gv
[3] = 
	`ü—‹SŒšgObjeù
(
Çck
->
cÚsum”
->
Çme
,
	`sd¦’
(nack->consumer->name));

841 
¬gv
[4] = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(0);

842 
¬gv
[5] = 
id
;

843 
¬gv
[6] = 
	`ü—‹SŒšgObjeù
("TIME",4);

844 
¬gv
[7] = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Çck
->
d–iv”y_time
);

845 
¬gv
[8] = 
	`ü—‹SŒšgObjeù
("RETRYCOUNT",10);

846 
¬gv
[9] = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
Çck
->
d–iv”y_couÁ
);

847 
¬gv
[10] = 
	`ü—‹SŒšgObjeù
("FORCE",5);

848 
¬gv
[11] = 
	`ü—‹SŒšgObjeù
("JUSTID",6);

849 
¬gv
[12] = 
	`ü—‹SŒšgObjeù
("LASTID",6);

850 
¬gv
[13] = 
	`ü—‹ObjeùFromSŒ—mID
(&
group
->
Ï¡_id
);

856 
	`´İag©e
(
£rv”
.
xşaimCommªd
,
c
->
db
->
id
,
¬gv
,14,
PROPAGATE_AOF
|
PROPAGATE_REPL
);

857 
	`deüRefCouÁ
(
¬gv
[0]);

858 
	`deüRefCouÁ
(
¬gv
[3]);

859 
	`deüRefCouÁ
(
¬gv
[4]);

860 
	`deüRefCouÁ
(
¬gv
[6]);

861 
	`deüRefCouÁ
(
¬gv
[7]);

862 
	`deüRefCouÁ
(
¬gv
[8]);

863 
	`deüRefCouÁ
(
¬gv
[9]);

864 
	`deüRefCouÁ
(
¬gv
[10]);

865 
	`deüRefCouÁ
(
¬gv
[11]);

866 
	`deüRefCouÁ
(
¬gv
[12]);

867 
	`deüRefCouÁ
(
¬gv
[13]);

868 
	}
}

876 
	$¡»amPrİag©eGroupID
(
ş›Á
 *
c
, 
robj
 *
key
, 
¡»amCG
 *
group
,„obj *
grou²ame
) {

877 
robj
 *
¬gv
[5];

878 
¬gv
[0] = 
	`ü—‹SŒšgObjeù
("XGROUP",6);

879 
¬gv
[1] = 
	`ü—‹SŒšgObjeù
("SETID",5);

880 
¬gv
[2] = 
key
;

881 
¬gv
[3] = 
grou²ame
;

882 
¬gv
[4] = 
	`ü—‹ObjeùFromSŒ—mID
(&
group
->
Ï¡_id
);

888 
	`´İag©e
(
£rv”
.
xgroupCommªd
,
c
->
db
->
id
,
¬gv
,5,
PROPAGATE_AOF
|
PROPAGATE_REPL
);

889 
	`deüRefCouÁ
(
¬gv
[0]);

890 
	`deüRefCouÁ
(
¬gv
[1]);

891 
	`deüRefCouÁ
(
¬gv
[4]);

892 
	}
}

938 
	#STREAM_RWR_NOACK
 (1<<0è

	)

939 
	#STREAM_RWR_RAWENTRIES
 (1<<1è

	)

941 
	#STREAM_RWR_HISTORY
 (1<<2è

	)

942 
size_t
 
	$¡»amR•lyW™hRªge
(
ş›Á
 *
c
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, 
size_t
 
couÁ
, 
»v
, 
¡»amCG
 *
group
, 
¡»amCÚsum”
 *
cÚsum”
, 
æags
, 
¡»amPrİInfo
 *
¥i
) {

943 *
¬¿yËn_±r
 = 
NULL
;

944 
size_t
 
¬¿yËn
 = 0;

945 
¡»amI‹¿tÜ
 
si
;

946 
št64_t
 
numf›lds
;

947 
¡»amID
 
id
;

948 
´İag©e_Ï¡_id
 = 0;

949 
nßck
 = 
æags
 & 
STREAM_RWR_NOACK
;

956 ià(
group
 && (
æags
 & 
STREAM_RWR_HISTORY
)) {

957  
	`¡»amR•lyW™hRªgeFromCÚsum”PEL
(
c
,
s
,
¡¬t
,
’d
,
couÁ
,

958 
cÚsum”
);

961 ià(!(
æags
 & 
STREAM_RWR_RAWENTRIES
))

962 
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

963 
	`¡»amI‹¿tÜS¹
(&
si
,
s
,
¡¬t
,
’d
,
»v
);

964 
	`¡»amI‹¿tÜG‘ID
(&
si
,&
id
,&
numf›lds
)) {

966 ià(
group
 && 
	`¡»amCom·»ID
(&
id
,&group->
Ï¡_id
) > 0) {

967 
group
->
Ï¡_id
 = 
id
;

971 ià(
nßck
è
´İag©e_Ï¡_id
 = 1;

976 
	`addR•lyA¼ayL’
(
c
,2);

977 
	`addR•lySŒ—mID
(
c
,&
id
);

979 
	`addR•lyA¼ayL’
(
c
,
numf›lds
*2);

982 
numf›lds
--) {

983 *
key
, *
v®ue
;

984 
št64_t
 
key_Ën
, 
v®ue_Ën
;

985 
	`¡»amI‹¿tÜG‘F›ld
(&
si
,&
key
,&
v®ue
,&
key_Ën
,&
v®ue_Ën
);

986 
	`addR•lyBulkCBufãr
(
c
,
key
,
key_Ën
);

987 
	`addR•lyBulkCBufãr
(
c
,
v®ue
,
v®ue_Ën
);

999 ià(
group
 && !
nßck
) {

1000 
buf
[(
¡»amID
)];

1001 
	`¡»amEncodeID
(
buf
,&
id
);

1006 
¡»amNACK
 *
Çck
 = 
	`¡»amC»©eNACK
(
cÚsum”
);

1007 
group_š£¹ed
 =

1008 
	`¿xTryIn£¹
(
group
->
³l
,
buf
,(buf),
Çck
,
NULL
);

1009 
cÚsum”_š£¹ed
 =

1010 
	`¿xTryIn£¹
(
cÚsum”
->
³l
,
buf
,(buf),
Çck
,
NULL
);

1015 ià(
group_š£¹ed
 == 0) {

1016 
	`¡»amF»eNACK
(
Çck
);

1017 
Çck
 = 
	`¿xFšd
(
group
->
³l
,
buf
,(buf));

1018 
	`£rv”As£¹
(
Çck
 !ğ
¿xNÙFound
);

1019 
	`¿xRemove
(
Çck
->
cÚsum”
->
³l
,
buf
,(buf),
NULL
);

1021 
Çck
->
cÚsum”
 = consumer;

1022 
Çck
->
d–iv”y_time
 = 
	`m¡ime
();

1023 
Çck
->
d–iv”y_couÁ
 = 1;

1025 
	`¿xIn£¹
(
cÚsum”
->
³l
,
buf
,(buf),
Çck
,
NULL
);

1026 } ià(
group_š£¹ed
 =ğ1 && 
cÚsum”_š£¹ed
 == 0) {

1027 
	`£rv”Pªic
("NACK half-created. Should‚ot be…ossible.");

1031 ià(
¥i
) {

1032 
robj
 *
id¬g
 = 
	`ü—‹ObjeùFromSŒ—mID
(&
id
);

1033 
	`¡»amPrİag©eXCLAIM
(
c
,
¥i
->
keyÇme
,
group
,¥i->
grou²ame
,
id¬g
,
Çck
);

1034 
	`deüRefCouÁ
(
id¬g
);

1038 
¬¿yËn
++;

1039 ià(
couÁ
 && couÁ =ğ
¬¿yËn
) ;

1042 ià(
¥i
 && 
´İag©e_Ï¡_id
)

1043 
	`¡»amPrİag©eGroupID
(
c
,
¥i
->
keyÇme
,
group
,¥i->
grou²ame
);

1045 
	`¡»amI‹¿tÜStİ
(&
si
);

1046 ià(
¬¿yËn_±r
è
	`£tDeã¼edA¼ayL’
(
c
,¬¿yËn_±r,
¬¿yËn
);

1047  
¬¿yËn
;

1048 
	}
}

1063 
size_t
 
	$¡»amR•lyW™hRªgeFromCÚsum”PEL
(
ş›Á
 *
c
, 
¡»am
 *
s
, 
¡»amID
 *
¡¬t
, sŒ—mID *
’d
, 
size_t
 
couÁ
, 
¡»amCÚsum”
 *
cÚsum”
) {

1064 
¿xI‹¿tÜ
 
ri
;

1065 
¡¬tkey
[(
¡»amID
)];

1066 
’dkey
[(
¡»amID
)];

1067 
	`¡»amEncodeID
(
¡¬tkey
,
¡¬t
);

1068 ià(
’d
è
	`¡»amEncodeID
(
’dkey
,end);

1070 
size_t
 
¬¿yËn
 = 0;

1071 *
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

1072 
	`¿xS¹
(&
ri
,
cÚsum”
->
³l
);

1073 
	`¿xS“k
(&
ri
,">=",
¡¬tkey
,(startkey));

1074 
	`¿xNext
(&
ri
è&& (!
couÁ
 || 
¬¿yËn
 < count)) {

1075 ià(
’d
 && 
	`memcmp
(
ri
.
key
,’d,ri.
key_Ën
) > 0) ;

1076 
¡»amID
 
thisid
;

1077 
	`¡»amDecodeID
(
ri
.
key
,&
thisid
);

1078 ià(
	`¡»amR•lyW™hRªge
(
c
,
s
,&
thisid
,&thisid,1,0,
NULL
,NULL,

1079 
STREAM_RWR_RAWENTRIES
,
NULL
) == 0)

1085 
	`addR•lyA¼ayL’
(
c
,2);

1086 
	`addR•lySŒ—mID
(
c
,&
thisid
);

1087 
	`addR•lyNuÎA¼ay
(
c
);

1089 
¡»amNACK
 *
Çck
 = 
ri
.
d©a
;

1090 
Çck
->
d–iv”y_time
 = 
	`m¡ime
();

1091 
Çck
->
d–iv”y_couÁ
++;

1093 
¬¿yËn
++;

1095 
	`¿xStİ
(&
ri
);

1096 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËn_±r
,
¬¿yËn
);

1097  
¬¿yËn
;

1098 
	}
}

1106 
robj
 *
	$¡»amTy³LookupWr™eOrC»©e
(
ş›Á
 *
c
, 
robj
 *
key
) {

1107 
robj
 *
o
 = 
	`lookupKeyWr™e
(
c
->
db
,
key
);

1108 ià(
o
 =ğ
NULL
) {

1109 
o
 = 
	`ü—‹SŒ—mObjeù
();

1110 
	`dbAdd
(
c
->
db
,
key
,
o
);

1112 ià(
o
->
ty³
 !ğ
OBJ_STREAM
) {

1113 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

1114  
NULL
;

1117  
o
;

1118 
	}
}

1132 
	$¡»amG’”icP¬£IDOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, 
¡»amID
 *
id
, 
ušt64_t
 
missšg_£q
, 
¡riù
) {

1133 
buf
[128];

1134 ià(
	`sd¦’
(
o
->
±r
è> (
buf
)-1è
šv®id
;

1135 
	`memıy
(
buf
,
o
->
±r
,
	`sd¦’
(o->ptr)+1);

1137 ià(
¡riù
 && (
buf
[0] == '-' || buf[0] == '+') && buf[1] == '\0')

1138 
šv®id
;

1141 ià(
buf
[0] == '-' && buf[1] == '\0') {

1142 
id
->
ms
 = 0;

1143 
id
->
£q
 = 0;

1144  
C_OK
;

1145 } ià(
buf
[0] == '+' && buf[1] == '\0') {

1146 
id
->
ms
 = 
UINT64_MAX
;

1147 
id
->
£q
 = 
UINT64_MAX
;

1148  
C_OK
;

1152 *
dÙ
 = 
	`¡rchr
(
buf
,'-');

1153 ià(
dÙ
) *dot = '\0';

1154 
ms
, 
£q
;

1155 ià(
	`¡ršg2uÎ
(
buf
,&
ms
è=ğ0è
šv®id
;

1156 ià(
dÙ
 && 
	`¡ršg2uÎ
(dÙ+1,&
£q
è=ğ0è
šv®id
;

1157 ià(!
dÙ
è
£q
 = 
missšg_£q
;

1158 
id
->
ms
 = ms;

1159 
id
->
£q
 = seq;

1160  
C_OK
;

1162 
šv®id
:

1163 ià(
c
è
	`addR•lyE¼Ü
(c,"Invalid stream ID specified‡s stream "

1165  
C_ERR
;

1166 
	}
}

1170 
	$¡»amP¬£IDOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, 
¡»amID
 *
id
, 
ušt64_t
 
missšg_£q
) {

1171  
	`¡»amG’”icP¬£IDOrR•ly
(
c
,
o
,
id
,
missšg_£q
,0);

1172 
	}
}

1177 
	$¡»amP¬£SŒiùIDOrR•ly
(
ş›Á
 *
c
, 
robj
 *
o
, 
¡»amID
 *
id
, 
ušt64_t
 
missšg_£q
) {

1178  
	`¡»amG’”icP¬£IDOrR•ly
(
c
,
o
,
id
,
missšg_£q
,1);

1179 
	}
}

1183 
	$¡»amRewr™eAµroxMaxËn
(
ş›Á
 *
c
, 
¡»am
 *
s
, 
maxËn_¬g_idx
) {

1184 
robj
 *
maxËn_obj
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚg
(
s
->
Ëngth
);

1185 
robj
 *
equ®_obj
 = 
	`ü—‹SŒšgObjeù
("=",1);

1187 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,
maxËn_¬g_idx
,
maxËn_obj
);

1188 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,
maxËn_¬g_idx
-1,
equ®_obj
);

1190 
	`deüRefCouÁ
(
equ®_obj
);

1191 
	`deüRefCouÁ
(
maxËn_obj
);

1192 
	}
}

1195 
	$xaddCommªd
(
ş›Á
 *
c
) {

1196 
¡»amID
 
id
;

1197 
id_giv’
 = 0;

1198 
maxËn
 = -1;

1199 
­´ox_maxËn
 = 0;

1201 
maxËn_¬g_idx
 = 0;

1204 
i
 = 2;

1206 ; 
i
 < 
c
->
¬gc
; i++) {

1207 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
i
;

1208 *
İt
 = 
c
->
¬gv
[
i
]->
±r
;

1209 ià(
İt
[0] == '*' && opt[1] == '\0') {

1213 } ià(!
	`¡rÿ£cmp
(
İt
,"maxËn"è&& 
mÜ—rgs
) {

1214 
­´ox_maxËn
 = 0;

1215 *
Ãxt
 = 
c
->
¬gv
[
i
+1]->
±r
;

1217 ià(
mÜ—rgs
 >ğ2 && 
Ãxt
[0] == '~' &&‚ext[1] == '\0') {

1218 
­´ox_maxËn
 = 1;

1219 
i
++;

1220 } ià(
mÜ—rgs
 >ğ2 && 
Ãxt
[0] == '=' &&‚ext[1] == '\0') {

1221 
i
++;

1223 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
i
+1],&
maxËn
,
NULL
)

1224 !ğ
C_OK
) ;

1226 ià(
maxËn
 < 0) {

1227 
	`addR•lyE¼Ü
(
c
,"The MAXLEN‡rgument must be >= 0.");

1230 
i
++;

1231 
maxËn_¬g_idx
 = 
i
;

1234 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
i
],&
id
,0è!ğ
C_OK
) ;

1235 
id_giv’
 = 1;

1239 
f›ld_pos
 = 
i
+1;

1242 ià((
c
->
¬gc
 - 
f›ld_pos
) < 2 || ((c->argc-field_pos) % 2) == 1) {

1243 
	`addR•lyE¼Ü
(
c
,"wrong‚umber of‡rguments for XADD");

1250 ià(
id_giv’
 && 
id
.
ms
 =ğ0 && id.
£q
 == 0) {

1251 
	`addR•lyE¼Ü
(
c
,"The ID specified in XADD must be greaterhan 0-0");

1256 
robj
 *
o
;

1257 
¡»am
 *
s
;

1258 ià((
o
 = 
	`¡»amTy³LookupWr™eOrC»©e
(
c
,c->
¬gv
[1])è=ğ
NULL
) ;

1259 
s
 = 
o
->
±r
;

1262 ià(
s
->
Ï¡_id
.
ms
 =ğ
UINT64_MAX
 && s->Ï¡_id.
£q
 == UINT64_MAX) {

1263 
	`addR•lyE¼Ü
(
c
,"The stream hasƒxhaustedhe†ast…ossible ID, "

1269 ià(
	`¡»amAµ’dI‹m
(
s
,
c
->
¬gv
+
f›ld_pos
,(c->
¬gc
-field_pos)/2,

1270 &
id
, 
id_giv’
 ? &id : 
NULL
)

1271 =ğ
C_ERR
)

1273 
	`addR•lyE¼Ü
(
c
,"The ID specified in XADD isƒqual or smallerhanhe "

1277 
	`addR•lySŒ—mID
(
c
,&
id
);

1279 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

1280 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xadd",
c
->
¬gv
[1],c->
db
->
id
);

1281 
£rv”
.
dœty
++;

1283 ià(
maxËn
 >= 0) {

1285 ià(
	`¡»amTrimByL’gth
(
s
,
maxËn
,
­´ox_maxËn
)) {

1286 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xŒim",
c
->
¬gv
[1],c->
db
->
id
);

1288 ià(
­´ox_maxËn
è
	`¡»amRewr™eAµroxMaxËn
(
c
,
s
,
maxËn_¬g_idx
);

1293 
robj
 *
id¬g
 = 
	`ü—‹ObjeùFromSŒ—mID
(&
id
);

1294 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,
i
,
id¬g
);

1295 
	`deüRefCouÁ
(
id¬g
);

1299 ià(
£rv”
.
blocked_ş›Ás_by_ty³
[
BLOCKED_STREAM
])

1300 
	`sigÇlKeyAsR—dy
(
c
->
db
, c->
¬gv
[1]);

1301 
	}
}

1304 
	$x¿ngeG’”icCommªd
(
ş›Á
 *
c
, 
»v
) {

1305 
robj
 *
o
;

1306 
¡»am
 *
s
;

1307 
¡»amID
 
¡¬tid
, 
’did
;

1308 
couÁ
 = -1;

1309 
robj
 *
¡¬rg
 = 
»v
 ? 
c
->
¬gv
[3] : c->argv[2];

1310 
robj
 *
’d¬g
 = 
»v
 ? 
c
->
¬gv
[2] : c->argv[3];

1312 ià(
	`¡»amP¬£IDOrR•ly
(
c
,
¡¬rg
,&
¡¬tid
,0è=ğ
C_ERR
) ;

1313 ià(
	`¡»amP¬£IDOrR•ly
(
c
,
’d¬g
,&
’did
,
UINT64_MAX
è=ğ
C_ERR
) ;

1316 ià(
c
->
¬gc
 > 4) {

1317 
j
 = 4; j < 
c
->
¬gc
; j++) {

1318 
add™iÚ®
 = 
c
->
¬gc
-
j
-1;

1319 ià(
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"COUNT"è=ğ0 && 
add™iÚ®
 >= 1) {

1320 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],&
couÁ
,
NULL
)

1321 !ğ
C_OK
) ;

1322 ià(
couÁ
 < 0) count = 0;

1323 
j
++;

1325 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1332 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±y¬¿y
)è=ğ
NULL
 ||

1333 
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

1335 
s
 = 
o
->
±r
;

1337 ià(
couÁ
 == 0) {

1338 
	`addR•lyNuÎA¼ay
(
c
);

1340 ià(
couÁ
 == -1) count = 0;

1341 
	`¡»amR•lyW™hRªge
(
c
,
s
,&
¡¬tid
,&
’did
,
couÁ
,
»v
,
NULL
,NULL,0,NULL);

1343 
	}
}

1346 
	$x¿ngeCommªd
(
ş›Á
 *
c
) {

1347 
	`x¿ngeG’”icCommªd
(
c
,0);

1348 
	}
}

1351 
	$x»v¿ngeCommªd
(
ş›Á
 *
c
) {

1352 
	`x¿ngeG’”icCommªd
(
c
,1);

1353 
	}
}

1356 
	$xËnCommªd
(
ş›Á
 *
c
) {

1357 
robj
 *
o
;

1358 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL


1359 || 
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

1360 
¡»am
 *
s
 = 
o
->
±r
;

1361 
	`addR•lyLÚgLÚg
(
c
,
s
->
Ëngth
);

1362 
	}
}

1371 
	#XREAD_BLOCKED_DEFAULT_COUNT
 1000

	)

1372 
	$x»adCommªd
(
ş›Á
 *
c
) {

1373 
timeout
 = -1;

1374 
couÁ
 = 0;

1375 
¡»ams_couÁ
 = 0;

1376 
¡»ams_¬g
 = 0;

1377 
nßck
 = 0;

1378 
	#STREAMID_STATIC_VECTOR_LEN
 8

	)

1379 
¡»amID
 
¡©ic_ids
[
STREAMID_STATIC_VECTOR_LEN
];

1380 
¡»amID
 *
ids
 = 
¡©ic_ids
;

1381 
¡»amCG
 **
groups
 = 
NULL
;

1382 
x»adgroup
 = 
	`sd¦’
(
c
->
¬gv
[0]->
±r
) == 10;

1383 
robj
 *
grou²ame
 = 
NULL
;

1384 
robj
 *
cÚsum”Çme
 = 
NULL
;

1387 
i
 = 1; i < 
c
->
¬gc
; i++) {

1388 
mÜ—rgs
 = 
c
->
¬gc
-
i
-1;

1389 *
o
 = 
c
->
¬gv
[
i
]->
±r
;

1390 ià(!
	`¡rÿ£cmp
(
o
,"BLOCK"è&& 
mÜ—rgs
) {

1391 ià(
c
->
æags
 & 
CLIENT_LUA
) {

1393 
	`addR•lyE¼ÜFÜm©
(
c
, "% commªd i nÙ‡Îowed w™h BLOCK o±iÚ from süts", (*)c->
¬gv
[0]->
±r
);

1396 
i
++;

1397 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[
i
],&
timeout
,

1398 
UNIT_MILLISECONDS
è!ğ
C_OK
) ;

1399 } ià(!
	`¡rÿ£cmp
(
o
,"COUNT"è&& 
mÜ—rgs
) {

1400 
i
++;

1401 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
i
],&
couÁ
,
NULL
è!ğ
C_OK
)

1403 ià(
couÁ
 < 0) count = 0;

1404 } ià(!
	`¡rÿ£cmp
(
o
,"STREAMS"è&& 
mÜ—rgs
) {

1405 
¡»ams_¬g
 = 
i
+1;

1406 
¡»ams_couÁ
 = (
c
->
¬gc
-
¡»ams_¬g
);

1407 ià((
¡»ams_couÁ
 % 2) != 0) {

1408 
	`addR•lyE¼Ü
(
c
,"Unbalanced XREAD†ist of streams: "

1413 
¡»ams_couÁ
 /= 2;

1415 } ià(!
	`¡rÿ£cmp
(
o
,"GROUP"è&& 
mÜ—rgs
 >= 2) {

1416 ià(!
x»adgroup
) {

1417 
	`addR•lyE¼Ü
(
c
,"The GROUP option is only supported by "

1421 
grou²ame
 = 
c
->
¬gv
[
i
+1];

1422 
cÚsum”Çme
 = 
c
->
¬gv
[
i
+2];

1423 
i
 += 2;

1424 } ià(!
	`¡rÿ£cmp
(
o
,"NOACK")) {

1425 ià(!
x»adgroup
) {

1426 
	`addR•lyE¼Ü
(
c
,"The NOACK option is only supported by "

1430 
nßck
 = 1;

1432 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1438 ià(
¡»ams_¬g
 == 0) {

1439 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1445 ià(
x»adgroup
 && 
grou²ame
 =ğ
NULL
) {

1446 
	`addR•lyE¼Ü
(
c
,"Missing GROUP option for XREADGROUP");

1451 ià(
¡»ams_couÁ
 > 
STREAMID_STATIC_VECTOR_LEN
)

1452 
ids
 = 
	`zm®loc
((
¡»amID
)*
¡»ams_couÁ
);

1453 ià(
grou²ame
è
groups
 = 
	`zm®loc
((
¡»amCG
*)*
¡»ams_couÁ
);

1455 
i
 = 
¡»ams_¬g
 + 
¡»ams_couÁ
; i < 
c
->
¬gc
; i++) {

1459 
id_idx
 = 
i
 - 
¡»ams_¬g
 - 
¡»ams_couÁ
;

1460 
robj
 *
key
 = 
c
->
¬gv
[
i
-
¡»ams_couÁ
];

1461 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,
key
);

1462 ià(
o
 && 
	`checkTy³
(
c
,o,
OBJ_STREAM
)è
ş—nup
;

1463 
¡»amCG
 *
group
 = 
NULL
;

1467 ià(
grou²ame
) {

1468 ià(
o
 =ğ
NULL
 ||

1469 (
group
 = 
	`¡»amLookupCG
(
o
->
±r
,
grou²ame
->±r)è=ğ
NULL
)

1471 
	`addR•lyE¼ÜFÜm©
(
c
, "-NOGROUP No such key '%s' or consumer "

1474 (*)
key
->
±r
,(*)
grou²ame
->ptr);

1475 
ş—nup
;

1477 
groups
[
id_idx
] = 
group
;

1480 ià(
	`¡rcmp
(
c
->
¬gv
[
i
]->
±r
,"$") == 0) {

1481 ià(
x»adgroup
) {

1482 
	`addR•lyE¼Ü
(
c
,"The $ ID is meaningless inhe context of "

1487 
ş—nup
;

1489 ià(
o
) {

1490 
¡»am
 *
s
 = 
o
->
±r
;

1491 
ids
[
id_idx
] = 
s
->
Ï¡_id
;

1493 
ids
[
id_idx
].
ms
 = 0;

1494 
ids
[
id_idx
].
£q
 = 0;

1497 } ià(
	`¡rcmp
(
c
->
¬gv
[
i
]->
±r
,">") == 0) {

1498 ià(!
x»adgroup
) {

1499 
	`addR•lyE¼Ü
(
c
,"The > ID can be specified only when calling "

1502 
ş—nup
;

1507 
ids
[
id_idx
].
ms
 = 
UINT64_MAX
;

1508 
ids
[
id_idx
].
£q
 = 
UINT64_MAX
;

1511 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
i
],
ids
+
id_idx
,0è!ğ
C_OK
)

1512 
ş—nup
;

1516 
size_t
 
¬¿yËn
 = 0;

1517 *
¬¿yËn_±r
 = 
NULL
;

1518 
i
 = 0; i < 
¡»ams_couÁ
; i++) {

1519 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
¡»ams_¬g
+
i
]);

1520 ià(
o
 =ğ
NULL
) ;

1521 
¡»am
 *
s
 = 
o
->
±r
;

1522 
¡»amID
 *
gt
 = 
ids
+
i
;

1523 
£rve_synchrÚou¦y
 = 0;

1524 
£rve_hi¡Üy
 = 0;

1528 ià(
groups
) {

1532 ià(
gt
->
ms
 !ğ
UINT64_MAX
 ||

1533 
gt
->
£q
 !ğ
UINT64_MAX
)

1535 
£rve_synchrÚou¦y
 = 1;

1536 
£rve_hi¡Üy
 = 1;

1537 } ià(
s
->
Ëngth
) {

1541 
¡»amID
 
maxid
, *
Ï¡
 = &
groups
[
i
]->
Ï¡_id
;

1542 
	`¡»amLa¡V®idID
(
s
, &
maxid
);

1543 ià(
	`¡»amCom·»ID
(&
maxid
, 
Ï¡
) > 0) {

1544 
£rve_synchrÚou¦y
 = 1;

1545 *
gt
 = *
Ï¡
;

1548 } ià(
s
->
Ëngth
) {

1551 
¡»amID
 
maxid
;

1552 
	`¡»amLa¡V®idID
(
s
, &
maxid
);

1553 ià(
	`¡»amCom·»ID
(&
maxid
, 
gt
) > 0) {

1554 
£rve_synchrÚou¦y
 = 1;

1558 ià(
£rve_synchrÚou¦y
) {

1559 
¬¿yËn
++;

1560 ià(
¬¿yËn
 =ğ1è
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

1564 
¡»amID
 
¡¬t
 = *
gt
;

1565 
	`¡»amInüID
(&
¡¬t
);

1569 ià(
c
->
»¥
 =ğ2è
	`addR•lyA¼ayL’
(c,2);

1570 
	`addR•lyBulk
(
c
,c->
¬gv
[
¡»ams_¬g
+
i
]);

1571 
¡»amCÚsum”
 *
cÚsum”
 = 
NULL
;

1572 ià(
groups
è
cÚsum”
 = 
	`¡»amLookupCÚsum”
(groups[
i
],

1573 
cÚsum”Çme
->
±r
,

1574 
SLC_NONE
);

1575 
¡»amPrİInfo
 
¥i
 = {
c
->
¬gv
[
i
+
¡»ams_¬g
],
grou²ame
};

1576 
æags
 = 0;

1577 ià(
nßck
è
æags
 |ğ
STREAM_RWR_NOACK
;

1578 ià(
£rve_hi¡Üy
è
æags
 |ğ
STREAM_RWR_HISTORY
;

1579 
	`¡»amR•lyW™hRªge
(
c
,
s
,&
¡¬t
,
NULL
,
couÁ
,0,

1580 
groups
 ? groups[
i
] : 
NULL
,

1581 
cÚsum”
, 
æags
, &
¥i
);

1582 ià(
groups
è
£rv”
.
dœty
++;

1587 ià(
¬¿yËn
) {

1588 ià(
c
->
»¥
 == 2)

1589 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËn_±r
,
¬¿yËn
);

1591 
	`£tDeã¼edM­L’
(
c
,
¬¿yËn_±r
,
¬¿yËn
);

1592 
ş—nup
;

1596 ià(
timeout
 != -1) {

1599 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

1600 
	`addR•lyNuÎA¼ay
(
c
);

1601 
ş—nup
;

1603 
	`blockFÜKeys
(
c
, 
BLOCKED_STREAM
, c->
¬gv
+
¡»ams_¬g
, 
¡»ams_couÁ
,

1604 
timeout
, 
NULL
, 
ids
);

1608 
c
->
bpİ
.
x»ad_couÁ
 = 
couÁ
 ? couÁ : 
XREAD_BLOCKED_DEFAULT_COUNT
;

1614 ià(
grou²ame
) {

1615 
	`šüRefCouÁ
(
grou²ame
);

1616 
	`šüRefCouÁ
(
cÚsum”Çme
);

1617 
c
->
bpİ
.
x»ad_group
 = 
grou²ame
;

1618 
c
->
bpİ
.
x»ad_cÚsum”
 = 
cÚsum”Çme
;

1619 
c
->
bpİ
.
x»ad_group_nßck
 = 
nßck
;

1621 
c
->
bpİ
.
x»ad_group
 = 
NULL
;

1622 
c
->
bpİ
.
x»ad_cÚsum”
 = 
NULL
;

1624 
ş—nup
;

1629 
	`addR•lyNuÎA¼ay
(
c
);

1632 
ş—nup
:

1636 
	`´ev’tCommªdPrİag©iÚ
(
c
);

1637 ià(
ids
 !ğ
¡©ic_ids
è
	`zä“
(ids);

1638 
	`zä“
(
groups
);

1639 
	}
}

1648 
¡»amNACK
 *
	$¡»amC»©eNACK
(
¡»amCÚsum”
 *
cÚsum”
) {

1649 
¡»amNACK
 *
Çck
 = 
	`zm®loc
((*nack));

1650 
Çck
->
d–iv”y_time
 = 
	`m¡ime
();

1651 
Çck
->
d–iv”y_couÁ
 = 1;

1652 
Çck
->
cÚsum”
 = consumer;

1653  
Çck
;

1654 
	}
}

1657 
	$¡»amF»eNACK
(
¡»amNACK
 *
Ç
) {

1658 
	`zä“
(
Ç
);

1659 
	}
}

1666 
	$¡»amF»eCÚsum”
(
¡»amCÚsum”
 *
sc
) {

1667 
	`¿xF»e
(
sc
->
³l
);

1669 
	`sdsä“
(
sc
->
Çme
);

1670 
	`zä“
(
sc
);

1671 
	}
}

1677 
¡»amCG
 *
	$¡»amC»©eCG
(
¡»am
 *
s
, *
Çme
, 
size_t
 
Çm–’
, 
¡»amID
 *
id
) {

1678 ià(
s
->
cgroups
 =ğ
NULL
ès->cgroup ğ
	`¿xNew
();

1679 ià(
	`¿xFšd
(
s
->
cgroups
,(*)
Çme
,
Çm–’
è!ğ
¿xNÙFound
)

1680  
NULL
;

1682 
¡»amCG
 *
cg
 = 
	`zm®loc
((*cg));

1683 
cg
->
³l
 = 
	`¿xNew
();

1684 
cg
->
cÚsum”s
 = 
	`¿xNew
();

1685 
cg
->
Ï¡_id
 = *
id
;

1686 
	`¿xIn£¹
(
s
->
cgroups
,(*)
Çme
,
Çm–’
,
cg
,
NULL
);

1687  
cg
;

1688 
	}
}

1691 
	$¡»amF»eCG
(
¡»amCG
 *
cg
) {

1692 
	`¿xF»eW™hC®lback
(
cg
->
³l
,((*)(*))
¡»amF»eNACK
);

1693 
	`¿xF»eW™hC®lback
(
cg
->
cÚsum”s
,((*)(*))
¡»amF»eCÚsum”
);

1694 
	`zä“
(
cg
);

1695 
	}
}

1699 
¡»amCG
 *
	$¡»amLookupCG
(
¡»am
 *
s
, 
sds
 
grou²ame
) {

1700 ià(
s
->
cgroups
 =ğ
NULL
)  NULL;

1701 
¡»amCG
 *
cg
 = 
	`¿xFšd
(
s
->
cgroups
,(*)
grou²ame
,

1702 
	`sd¦’
(
grou²ame
));

1703  (
cg
 =ğ
¿xNÙFound
è? 
NULL
 : cg;

1704 
	}
}

1710 
¡»amCÚsum”
 *
	$¡»amLookupCÚsum”
(
¡»amCG
 *
cg
, 
sds
 
Çme
, 
æags
) {

1711 
ü—‹
 = !(
æags
 & 
SLC_NOCREAT
);

1712 
»äesh
 = !(
æags
 & 
SLC_NOREFRESH
);

1713 
¡»amCÚsum”
 *
cÚsum”
 = 
	`¿xFšd
(
cg
->
cÚsum”s
,(*)
Çme
,

1714 
	`sd¦’
(
Çme
));

1715 ià(
cÚsum”
 =ğ
¿xNÙFound
) {

1716 ià(!
ü—‹
è 
NULL
;

1717 
cÚsum”
 = 
	`zm®loc
((*consumer));

1718 
cÚsum”
->
Çme
 = 
	`sdsdup
(name);

1719 
cÚsum”
->
³l
 = 
	`¿xNew
();

1720 
	`¿xIn£¹
(
cg
->
cÚsum”s
,(*)
Çme
,
	`sd¦’
(name),

1721 
cÚsum”
,
NULL
);

1723 ià(
»äesh
è
cÚsum”
->
£’_time
 = 
	`m¡ime
();

1724  
cÚsum”
;

1725 
	}
}

1730 
ušt64_t
 
	$¡»amD–CÚsum”
(
¡»amCG
 *
cg
, 
sds
 
Çme
) {

1731 
¡»amCÚsum”
 *
cÚsum”
 =

1732 
	`¡»amLookupCÚsum”
(
cg
,
Çme
,
SLC_NOCREAT
|
SLC_NOREFRESH
);

1733 ià(
cÚsum”
 =ğ
NULL
)  0;

1735 
ušt64_t
 
»tv®
 = 
	`¿xSize
(
cÚsum”
->
³l
);

1739 
¿xI‹¿tÜ
 
ri
;

1740 
	`¿xS¹
(&
ri
,
cÚsum”
->
³l
);

1741 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

1742 
	`¿xNext
(&
ri
)) {

1743 
¡»amNACK
 *
Çck
 = 
ri
.
d©a
;

1744 
	`¿xRemove
(
cg
->
³l
,
ri
.
key
,ri.
key_Ën
,
NULL
);

1745 
	`¡»amF»eNACK
(
Çck
);

1747 
	`¿xStİ
(&
ri
);

1750 
	`¿xRemove
(
cg
->
cÚsum”s
,(*)
Çme
,
	`sd¦’
Òame),
NULL
);

1751 
	`¡»amF»eCÚsum”
(
cÚsum”
);

1752  
»tv®
;

1753 
	}
}

1763 
	$xgroupCommªd
(
ş›Á
 *
c
) {

1764 cÚ¡ *
h–p
[] = {

1771 
NULL


1773 
¡»am
 *
s
 = 
NULL
;

1774 
sds
 
g½Çme
 = 
NULL
;

1775 
¡»amCG
 *
cg
 = 
NULL
;

1776 *
İt
 = 
c
->
¬gv
[1]->
±r
;

1777 
mk¡»am
 = 0;

1778 
robj
 *
o
;

1782 ià(
c
->
¬gc
 =ğ6 && !
	`¡rÿ£cmp
(
İt
,"CREATE")) {

1783 ià(
	`¡rÿ£cmp
(
c
->
¬gv
[5]->
±r
,"MKSTREAM")) {

1784 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

1787 
mk¡»am
 = 1;

1788 
g½Çme
 = 
c
->
¬gv
[3]->
±r
;

1792 ià(
c
->
¬gc
 >= 4) {

1793 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[2]);

1794 ià(
o
) {

1795 ià(
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

1796 
s
 = 
o
->
±r
;

1798 
g½Çme
 = 
c
->
¬gv
[3]->
±r
;

1802 ià(
c
->
¬gc
 >ğ4 && !
mk¡»am
) {

1804 ià(
s
 =ğ
NULL
) {

1805 
	`addR•lyE¼Ü
(
c
,

1813 ià((
cg
 = 
	`¡»amLookupCG
(
s
,
g½Çme
)è=ğ
NULL
 &&

1814 (!
	`¡rÿ£cmp
(
İt
,"SETID") ||

1815 !
	`¡rÿ£cmp
(
İt
,"DELCONSUMER")))

1817 
	`addR•lyE¼ÜFÜm©
(
c
, "-NOGROUP No such consumer group '%s' "

1819 (*)
g½Çme
, (*)
c
->
¬gv
[2]->
±r
);

1825 ià(!
	`¡rÿ£cmp
(
İt
,"CREATE"è&& (
c
->
¬gc
 == 5 || c->argc == 6)) {

1826 
¡»amID
 
id
;

1827 ià(!
	`¡rcmp
(
c
->
¬gv
[4]->
±r
,"$")) {

1828 ià(
s
) {

1829 
id
 = 
s
->
Ï¡_id
;

1831 
id
.
ms
 = 0;

1832 
id
.
£q
 = 0;

1834 } ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[4],&
id
,0è!ğ
C_OK
) {

1839 ià(
s
 =ğ
NULL
) {

1840 
	`£rv”As£¹
(
mk¡»am
);

1841 
o
 = 
	`ü—‹SŒ—mObjeù
();

1842 
	`dbAdd
(
c
->
db
,c->
¬gv
[2],
o
);

1843 
s
 = 
o
->
±r
;

1846 
¡»amCG
 *
cg
 = 
	`¡»amC»©eCG
(
s
,
g½Çme
,
	`sd¦’
(g½Çme),&
id
);

1847 ià(
cg
) {

1848 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1849 
£rv”
.
dœty
++;

1850 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xgroup-create",

1851 
c
->
¬gv
[2],c->
db
->
id
);

1853 
	`addR•lySds
(
c
,

1854 
	`sd¢ew
("-BUSYGROUP Consumer Group‚ame‡lreadyƒxists\r\n"));

1856 } ià(!
	`¡rÿ£cmp
(
İt
,"SETID"è&& 
c
->
¬gc
 == 5) {

1857 
¡»amID
 
id
;

1858 ià(!
	`¡rcmp
(
c
->
¬gv
[4]->
±r
,"$")) {

1859 
id
 = 
s
->
Ï¡_id
;

1860 } ià(
	`¡»amP¬£IDOrR•ly
(
c
,c->
¬gv
[4],&
id
,0è!ğ
C_OK
) {

1863 
cg
->
Ï¡_id
 = 
id
;

1864 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1865 
£rv”
.
dœty
++;

1866 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xgroup-£tid",
c
->
¬gv
[2],c->
db
->
id
);

1867 } ià(!
	`¡rÿ£cmp
(
İt
,"DESTROY"è&& 
c
->
¬gc
 == 4) {

1868 ià(
cg
) {

1869 
	`¿xRemove
(
s
->
cgroups
,(*)
g½Çme
,
	`sd¦’
(g½Çme),
NULL
);

1870 
	`¡»amF»eCG
(
cg
);

1871 
	`addR•ly
(
c
,
sh¬ed
.
cÚe
);

1872 
£rv”
.
dœty
++;

1873 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xgroup-destroy",

1874 
c
->
¬gv
[2],c->
db
->
id
);

1876 
	`sigÇlKeyAsR—dy
(
c
->
db
,c->
¬gv
[2]);

1878 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1880 } ià(!
	`¡rÿ£cmp
(
İt
,"DELCONSUMER"è&& 
c
->
¬gc
 == 5) {

1883 
³ndšg
 = 
	`¡»amD–CÚsum”
(
cg
,
c
->
¬gv
[4]->
±r
);

1884 
	`addR•lyLÚgLÚg
(
c
,
³ndšg
);

1885 
£rv”
.
dœty
++;

1886 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xgroup-delconsumer",

1887 
c
->
¬gv
[2],c->
db
->
id
);

1888 } ià(!
	`¡rÿ£cmp
(
İt
,"HELP")) {

1889 
	`addR•lyH–p
(
c
, 
h–p
);

1891 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

1893 
	}
}

1898 
	$x£tidCommªd
(
ş›Á
 *
c
) {

1899 
robj
 *
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nokey”r
);

1900 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_STREAM
)) ;

1902 
¡»am
 *
s
 = 
o
->
±r
;

1903 
¡»amID
 
id
;

1904 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[2],&
id
,0è!ğ
C_OK
) ;

1909 ià(
s
->
Ëngth
 > 0) {

1910 
¡»amID
 
maxid
;

1911 
	`¡»amLa¡V®idID
(
s
,&
maxid
);

1913 ià(
	`¡»amCom·»ID
(&
id
,&
maxid
) < 0) {

1914 
	`addR•lyE¼Ü
(
c
,"The ID specified in XSETID is smallerhanhe "

1919 
s
->
Ï¡_id
 = 
id
;

1920 
	`addR•ly
(
c
,
sh¬ed
.
ok
);

1921 
£rv”
.
dœty
++;

1922 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"x£tid",
c
->
¬gv
[1],c->
db
->
id
);

1923 
	}
}

1934 
	$xackCommªd
(
ş›Á
 *
c
) {

1935 
¡»amCG
 *
group
 = 
NULL
;

1936 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1]);

1937 ià(
o
) {

1938 ià(
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

1939 
group
 = 
	`¡»amLookupCG
(
o
->
±r
,
c
->
¬gv
[2]->ptr);

1943 ià(
o
 =ğ
NULL
 || 
group
 == NULL) {

1944 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1952 
j
 = 3; j < 
c
->
¬gc
; j++) {

1953 
¡»amID
 
id
;

1954 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
id
,0è!ğ
C_OK
) ;

1957 
acknowËdged
 = 0;

1958 
j
 = 3; j < 
c
->
¬gc
; j++) {

1959 
¡»amID
 
id
;

1960 
buf
[(
¡»amID
)];

1961 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
id
,0è!ğ
C_OK
)

1962 
	`£rv”Pªic
("StreamID invalid‡fter check. Should‚ot be…ossible.");

1963 
	`¡»amEncodeID
(
buf
,&
id
);

1968 
¡»amNACK
 *
Çck
 = 
	`¿xFšd
(
group
->
³l
,
buf
,(buf));

1969 ià(
Çck
 !ğ
¿xNÙFound
) {

1970 
	`¿xRemove
(
group
->
³l
,
buf
,(buf),
NULL
);

1971 
	`¿xRemove
(
Çck
->
cÚsum”
->
³l
,
buf
,(buf),
NULL
);

1972 
	`¡»amF»eNACK
(
Çck
);

1973 
acknowËdged
++;

1974 
£rv”
.
dœty
++;

1977 
	`addR•lyLÚgLÚg
(
c
,
acknowËdged
);

1978 
	}
}

1989 
	$x³ndšgCommªd
(
ş›Á
 *
c
) {

1990 
ju¡šfo
 = 
c
->
¬gc
 == 3;

1992 
robj
 *
key
 = 
c
->
¬gv
[1];

1993 
robj
 *
grou²ame
 = 
c
->
¬gv
[2];

1994 
robj
 *
cÚsum”Çme
 = (
c
->
¬gc
 =ğ7è? c->
¬gv
[6] : 
NULL
;

1995 
¡»amID
 
¡¬tid
, 
’did
;

1996 
couÁ
;

1999 ià(
c
->
¬gc
 != 3 && c->argc != 6 && c->argc != 7) {

2000 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2006 ià(
c
->
¬gc
 >= 6) {

2007 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[5],&
couÁ
,
NULL
è=ğ
C_ERR
)

2009 ià(
couÁ
 < 0) count = 0;

2010 ià(
	`¡»amP¬£IDOrR•ly
(
c
,c->
¬gv
[3],&
¡¬tid
,0è=ğ
C_ERR
)

2012 ià(
	`¡»amP¬£IDOrR•ly
(
c
,c->
¬gv
[4],&
’did
,
UINT64_MAX
è=ğ
C_ERR
)

2017 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1]);

2018 
¡»amCG
 *
group
;

2020 ià(
o
 && 
	`checkTy³
(
c
,o,
OBJ_STREAM
)) ;

2021 ià(
o
 =ğ
NULL
 ||

2022 (
group
 = 
	`¡»amLookupCG
(
o
->
±r
,
grou²ame
->±r)è=ğ
NULL
)

2024 
	`addR•lyE¼ÜFÜm©
(
c
, "-NOGROUP No such key '%s' or consumer "

2026 (*)
key
->
±r
,(*)
grou²ame
->ptr);

2031 ià(
ju¡šfo
) {

2032 
	`addR•lyA¼ayL’
(
c
,4);

2034 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
group
->
³l
));

2036 ià(
	`¿xSize
(
group
->
³l
) == 0) {

2037 
	`addR•lyNuÎ
(
c
);

2038 
	`addR•lyNuÎ
(
c
);

2039 
	`addR•lyNuÎA¼ay
(
c
);

2042 
¿xI‹¿tÜ
 
ri
;

2043 
	`¿xS¹
(&
ri
,
group
->
³l
);

2044 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

2045 
	`¿xNext
(&
ri
);

2046 
	`¡»amDecodeID
(
ri
.
key
,&
¡¬tid
);

2047 
	`addR•lySŒ—mID
(
c
,&
¡¬tid
);

2050 
	`¿xS“k
(&
ri
,"$",
NULL
,0);

2051 
	`¿xNext
(&
ri
);

2052 
	`¡»amDecodeID
(
ri
.
key
,&
’did
);

2053 
	`addR•lySŒ—mID
(
c
,&
’did
);

2054 
	`¿xStİ
(&
ri
);

2057 
	`¿xS¹
(&
ri
,
group
->
cÚsum”s
);

2058 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

2059 *
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

2060 
size_t
 
¬¿yËn
 = 0;

2061 
	`¿xNext
(&
ri
)) {

2062 
¡»amCÚsum”
 *
cÚsum”
 = 
ri
.
d©a
;

2063 ià(
	`¿xSize
(
cÚsum”
->
³l
) == 0) ;

2064 
	`addR•lyA¼ayL’
(
c
,2);

2065 
	`addR•lyBulkCBufãr
(
c
,
ri
.
key
,ri.
key_Ën
);

2066 
	`addR•lyBulkLÚgLÚg
(
c
,
	`¿xSize
(
cÚsum”
->
³l
));

2067 
¬¿yËn
++;

2069 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËn_±r
,
¬¿yËn
);

2070 
	`¿xStİ
(&
ri
);

2075 
¡»amCÚsum”
 *
cÚsum”
 = 
NULL
;

2076 ià(
cÚsum”Çme
) {

2077 
cÚsum”
 = 
	`¡»amLookupCÚsum”
(
group
,

2078 
cÚsum”Çme
->
±r
,

2079 
SLC_NOCREAT
|
SLC_NOREFRESH
);

2083 ià(
cÚsum”
 =ğ
NULL
) {

2084 
	`addR•lyA¼ayL’
(
c
,0);

2089 
¿x
 *
³l
 = 
cÚsum”
 ? cÚsum”->³È: 
group
->pel;

2090 
¡¬tkey
[(
¡»amID
)];

2091 
’dkey
[(
¡»amID
)];

2092 
¿xI‹¿tÜ
 
ri
;

2093 
m¡ime_t
 
now
 = 
	`m¡ime
();

2095 
	`¡»amEncodeID
(
¡¬tkey
,&
¡¬tid
);

2096 
	`¡»amEncodeID
(
’dkey
,&
’did
);

2097 
	`¿xS¹
(&
ri
,
³l
);

2098 
	`¿xS“k
(&
ri
,">=",
¡¬tkey
,(startkey));

2099 *
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

2100 
size_t
 
¬¿yËn
 = 0;

2102 
couÁ
 && 
	`¿xNext
(&
ri
è&& 
	`memcmp
Ôi.
key
,
’dkey
,ri.
key_Ën
) <= 0) {

2103 
¡»amNACK
 *
Çck
 = 
ri
.
d©a
;

2105 
¬¿yËn
++;

2106 
couÁ
--;

2107 
	`addR•lyA¼ayL’
(
c
,4);

2110 
¡»amID
 
id
;

2111 
	`¡»amDecodeID
(
ri
.
key
,&
id
);

2112 
	`addR•lySŒ—mID
(
c
,&
id
);

2115 
	`addR•lyBulkCBufãr
(
c
,
Çck
->
cÚsum”
->
Çme
,

2116 
	`sd¦’
(
Çck
->
cÚsum”
->
Çme
));

2119 
m¡ime_t
 
–­£d
 = 
now
 - 
Çck
->
d–iv”y_time
;

2120 ià(
–­£d
 < 0)ƒlapsed = 0;

2121 
	`addR•lyLÚgLÚg
(
c
,
–­£d
);

2124 
	`addR•lyLÚgLÚg
(
c
,
Çck
->
d–iv”y_couÁ
);

2126 
	`¿xStİ
(&
ri
);

2127 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËn_±r
,
¬¿yËn
);

2129 
	}
}

2197 
	$xşaimCommªd
(
ş›Á
 *
c
) {

2198 
¡»amCG
 *
group
 = 
NULL
;

2199 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[1]);

2200 
mšidË
;

2201 
»ŒycouÁ
 = -1;

2202 
m¡ime_t
 
d–iv”ytime
 = -1;

2203 
fÜû
 = 0;

2204 
ju¡id
 = 0;

2206 ià(
o
) {

2207 ià(
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

2208 
group
 = 
	`¡»amLookupCG
(
o
->
±r
,
c
->
¬gv
[2]->ptr);

2213 ià(
o
 =ğ
NULL
 || 
group
 == NULL) {

2214 
	`addR•lyE¼ÜFÜm©
(
c
,"-NOGROUP No such key '%s' or "

2215 "cÚsum” grou°'%s'", (*)
c
->
¬gv
[1]->
±r
,

2216 (*)
c
->
¬gv
[2]->
±r
);

2220 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[4],&
mšidË
,

2222 !ğ
C_OK
) ;

2223 ià(
mšidË
 < 0) minidle = 0;

2229 
j
;

2230 
j
 = 5; j < 
c
->
¬gc
; j++) {

2231 
¡»amID
 
id
;

2232 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
NULL
,
c
->
¬gv
[
j
],&
id
,0è!ğ
C_OK
) ;

2234 
Ï¡_id_¬g
 = 
j
-1;

2238 
m¡ime_t
 
now
 = 
	`m¡ime
();

2239 
¡»amID
 
Ï¡_id
 = {0,0};

2240 
´İag©e_Ï¡_id
 = 0;

2241 ; 
j
 < 
c
->
¬gc
; j++) {

2242 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

2243 *
İt
 = 
c
->
¬gv
[
j
]->
±r
;

2244 ià(!
	`¡rÿ£cmp
(
İt
,"FORCE")) {

2245 
fÜû
 = 1;

2246 } ià(!
	`¡rÿ£cmp
(
İt
,"JUSTID")) {

2247 
ju¡id
 = 1;

2248 } ià(!
	`¡rÿ£cmp
(
İt
,"IDLE"è&& 
mÜ—rgs
) {

2249 
j
++;

2250 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
],&
d–iv”ytime
,

2252 !ğ
C_OK
) ;

2253 
d–iv”ytime
 = 
now
 - deliverytime;

2254 } ià(!
	`¡rÿ£cmp
(
İt
,"TIME"è&& 
mÜ—rgs
) {

2255 
j
++;

2256 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
],&
d–iv”ytime
,

2258 !ğ
C_OK
) ;

2259 } ià(!
	`¡rÿ£cmp
(
İt
,"RETRYCOUNT"è&& 
mÜ—rgs
) {

2260 
j
++;

2261 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
],&
»ŒycouÁ
,

2263 !ğ
C_OK
) ;

2264 } ià(!
	`¡rÿ£cmp
(
İt
,"LASTID"è&& 
mÜ—rgs
) {

2265 
j
++;

2266 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
Ï¡_id
,0è!ğ
C_OK
) ;

2268 
	`addR•lyE¼ÜFÜm©
(
c
,"UÄecognized XCLAIM o±iÚ '%s'",
İt
);

2273 ià(
	`¡»amCom·»ID
(&
Ï¡_id
,&
group
->last_id) > 0) {

2274 
group
->
Ï¡_id
 =†ast_id;

2275 
´İag©e_Ï¡_id
 = 1;

2278 ià(
d–iv”ytime
 != -1) {

2286 ià(
d–iv”ytime
 < 0 || d–iv”ytim> 
now
) deliverytime =‚ow;

2291 
d–iv”ytime
 = 
now
;

2295 
¡»amCÚsum”
 *
cÚsum”
 = 
NULL
;

2296 *
¬¿yËÅŒ
 = 
	`addR•lyDeã¼edL’
(
c
);

2297 
size_t
 
¬¿yËn
 = 0;

2298 
j
 = 5; j <ğ
Ï¡_id_¬g
; j++) {

2299 
¡»amID
 
id
;

2300 
buf
[(
¡»amID
)];

2301 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
id
,0è!ğ
C_OK
)

2302 
	`£rv”Pªic
("StreamID invalid‡fter check. Should‚ot be…ossible.");

2303 
	`¡»amEncodeID
(
buf
,&
id
);

2306 
¡»amNACK
 *
Çck
 = 
	`¿xFšd
(
group
->
³l
,
buf
,(buf));

2313 ià(
fÜû
 && 
Çck
 =ğ
¿xNÙFound
) {

2314 
¡»amI‹¿tÜ
 
my™”©Ü
;

2315 
	`¡»amI‹¿tÜS¹
(&
my™”©Ü
,
o
->
±r
,&
id
,&id,0);

2316 
št64_t
 
numf›lds
;

2317 
found
 = 0;

2318 
¡»amID
 
™em_id
;

2319 ià(
	`¡»amI‹¿tÜG‘ID
(&
my™”©Ü
,&
™em_id
,&
numf›lds
)è
found
 = 1;

2320 
	`¡»amI‹¿tÜStİ
(&
my™”©Ü
);

2323 ià(!
found
) ;

2326 
Çck
 = 
	`¡»amC»©eNACK
(
NULL
);

2327 
	`¿xIn£¹
(
group
->
³l
,
buf
,(buf),
Çck
,
NULL
);

2330 ià(
Çck
 !ğ
¿xNÙFound
) {

2337 ià(
Çck
->
cÚsum”
 && 
mšidË
) {

2338 
m¡ime_t
 
this_idË
 = 
now
 - 
Çck
->
d–iv”y_time
;

2339 ià(
this_idË
 < 
mšidË
) ;

2344 ià(
Çck
->
cÚsum”
)

2345 
	`¿xRemove
(
Çck
->
cÚsum”
->
³l
,
buf
,(buf),
NULL
);

2347 ià(
cÚsum”
 =ğ
NULL
)

2348 
cÚsum”
 = 
	`¡»amLookupCÚsum”
(
group
,
c
->
¬gv
[3]->
±r
,
SLC_NONE
);

2349 
Çck
->
cÚsum”
 = consumer;

2350 
Çck
->
d–iv”y_time
 = 
d–iv”ytime
;

2353 ià(
»ŒycouÁ
 >= 0) {

2354 
Çck
->
d–iv”y_couÁ
 = 
»ŒycouÁ
;

2355 } ià(!
ju¡id
) {

2356 
Çck
->
d–iv”y_couÁ
++;

2359 
	`¿xIn£¹
(
cÚsum”
->
³l
,
buf
,(buf),
Çck
,
NULL
);

2361 ià(
ju¡id
) {

2362 
	`addR•lySŒ—mID
(
c
,&
id
);

2364 
size_t
 
em™‹d
 = 
	`¡»amR•lyW™hRªge
(
c
,
o
->
±r
,&
id
,&id,1,0,

2365 
NULL
,NULL,
STREAM_RWR_RAWENTRIES
,NULL);

2366 ià(!
em™‹d
è
	`addR•lyNuÎ
(
c
);

2368 
¬¿yËn
++;

2371 
	`¡»amPrİag©eXCLAIM
(
c
,c->
¬gv
[1],
group
,c->¬gv[2],c->¬gv[
j
],
Çck
);

2372 
´İag©e_Ï¡_id
 = 0;

2373 
£rv”
.
dœty
++;

2376 ià(
´İag©e_Ï¡_id
) {

2377 
	`¡»amPrİag©eGroupID
(
c
,c->
¬gv
[1],
group
,c->argv[2]);

2378 
£rv”
.
dœty
++;

2380 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËÅŒ
,
¬¿yËn
);

2381 
	`´ev’tCommªdPrİag©iÚ
(
c
);

2382 
	}
}

2390 
	$xd–Commªd
(
ş›Á
 *
c
) {

2391 
robj
 *
o
;

2393 ià((
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL


2394 || 
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

2395 
¡»am
 *
s
 = 
o
->
±r
;

2400 
¡»amID
 
id
;

2401 
j
 = 2; j < 
c
->
¬gc
; j++) {

2402 ià(
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
id
,0è!ğ
C_OK
) ;

2406 
d–‘ed
 = 0;

2407 
j
 = 2; j < 
c
->
¬gc
; j++) {

2408 
	`¡»amP¬£SŒiùIDOrR•ly
(
c
,c->
¬gv
[
j
],&
id
,0);

2409 
d–‘ed
 +ğ
	`¡»amD–‘eI‹m
(
s
,&
id
);

2413 ià(
d–‘ed
) {

2414 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

2415 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xd–",
c
->
¬gv
[1],c->
db
->
id
);

2416 
£rv”
.
dœty
 +ğ
d–‘ed
;

2418 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

2419 
	}
}

2431 
	#TRIM_STRATEGY_NONE
 0

	)

2432 
	#TRIM_STRATEGY_MAXLEN
 1

	)

2433 
	$xŒimCommªd
(
ş›Á
 *
c
) {

2434 
robj
 *
o
;

2438 ià((
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL


2439 || 
	`checkTy³
(
c
,
o
,
OBJ_STREAM
)) ;

2440 
¡»am
 *
s
 = 
o
->
±r
;

2443 
Œim_¡¿‹gy
 = 
TRIM_STRATEGY_NONE
;

2444 
maxËn
 = -1;

2445 
­´ox_maxËn
 = 0;

2447 
maxËn_¬g_idx
 = 0;

2450 
i
 = 2;

2451 ; 
i
 < 
c
->
¬gc
; i++) {

2452 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
i
;

2453 *
İt
 = 
c
->
¬gv
[
i
]->
±r
;

2454 ià(!
	`¡rÿ£cmp
(
İt
,"maxËn"è&& 
mÜ—rgs
) {

2455 
­´ox_maxËn
 = 0;

2456 
Œim_¡¿‹gy
 = 
TRIM_STRATEGY_MAXLEN
;

2457 *
Ãxt
 = 
c
->
¬gv
[
i
+1]->
±r
;

2459 ià(
mÜ—rgs
 >ğ2 && 
Ãxt
[0] == '~' &&‚ext[1] == '\0') {

2460 
­´ox_maxËn
 = 1;

2461 
i
++;

2462 } ià(
mÜ—rgs
 >ğ2 && 
Ãxt
[0] == '=' &&‚ext[1] == '\0') {

2463 
i
++;

2465 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
i
+1],&
maxËn
,
NULL
)

2466 !ğ
C_OK
) ;

2468 ià(
maxËn
 < 0) {

2469 
	`addR•lyE¼Ü
(
c
,"The MAXLEN‡rgument must be >= 0.");

2472 
i
++;

2473 
maxËn_¬g_idx
 = 
i
;

2475 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2481 
št64_t
 
d–‘ed
 = 0;

2482 ià(
Œim_¡¿‹gy
 =ğ
TRIM_STRATEGY_MAXLEN
) {

2483 
d–‘ed
 = 
	`¡»amTrimByL’gth
(
s
,
maxËn
,
­´ox_maxËn
);

2485 
	`addR•lyE¼Ü
(
c
,"XTRIM called without‡n optionorimhe stream");

2490 ià(
d–‘ed
) {

2491 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

2492 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STREAM
,"xŒim",
c
->
¬gv
[1],c->
db
->
id
);

2493 
£rv”
.
dœty
 +ğ
d–‘ed
;

2494 ià(
­´ox_maxËn
è
	`¡»amRewr™eAµroxMaxËn
(
c
,
s
,
maxËn_¬g_idx
);

2496 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

2497 
	}
}

2501 
	$xšfoR•lyW™hSŒ—mInfo
(
ş›Á
 *
c
, 
¡»am
 *
s
) {

2502 
fuÎ
 = 1;

2503 
couÁ
 = 10;

2504 
robj
 **
İtv
 = 
c
->
¬gv
 + 3;

2505 
İtc
 = 
c
->
¬gc
 - 3;

2508 ià(
İtc
 == 0) {

2509 
fuÎ
 = 0;

2512 ià(
İtc
 != 1 && optc != 3) {

2513 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

2518 ià(
	`¡rÿ£cmp
(
İtv
[0]->
±r
,"full")) {

2519 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

2523 ià(
İtc
 == 3) {

2525 ià(
	`¡rÿ£cmp
(
İtv
[1]->
±r
,"count")) {

2526 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

2529 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,
İtv
[2],&
couÁ
,
NULL
è=ğ
C_ERR
)

2531 ià(
couÁ
 < 0) count = 10;

2535 
	`addR•lyM­L’
(
c
,
fuÎ
 ? 6 : 7);

2536 
	`addR•lyBulkCSŒšg
(
c
,"length");

2537 
	`addR•lyLÚgLÚg
(
c
,
s
->
Ëngth
);

2538 
	`addR•lyBulkCSŒšg
(
c
,"radix-tree-keys");

2539 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
s
->
¿x
));

2540 
	`addR•lyBulkCSŒšg
(
c
,"radix-tree-nodes");

2541 
	`addR•lyLÚgLÚg
(
c
,
s
->
¿x
->
numnodes
);

2542 
	`addR•lyBulkCSŒšg
(
c
,"last-generated-id");

2543 
	`addR•lySŒ—mID
(
c
,&
s
->
Ï¡_id
);

2545 ià(!
fuÎ
) {

2548 
	`addR•lyBulkCSŒšg
(
c
,"groups");

2549 
	`addR•lyLÚgLÚg
(
c
,
s
->
cgroups
 ? 
	`¿xSize
(s->cgroups) : 0);

2552 
em™‹d
;

2553 
¡»amID
 
¡¬t
, 
’d
;

2554 
¡¬t
.
ms
 = s¹.
£q
 = 0;

2555 
’d
.
ms
 =ƒnd.
£q
 = 
UINT64_MAX
;

2556 
	`addR•lyBulkCSŒšg
(
c
,"first-entry");

2557 
em™‹d
 = 
	`¡»amR•lyW™hRªge
(
c
,
s
,&
¡¬t
,&
’d
,1,0,
NULL
,NULL,

2558 
STREAM_RWR_RAWENTRIES
,
NULL
);

2559 ià(!
em™‹d
è
	`addR•lyNuÎ
(
c
);

2560 
	`addR•lyBulkCSŒšg
(
c
,"last-entry");

2561 
em™‹d
 = 
	`¡»amR•lyW™hRªge
(
c
,
s
,&
¡¬t
,&
’d
,1,1,
NULL
,NULL,

2562 
STREAM_RWR_RAWENTRIES
,
NULL
);

2563 ià(!
em™‹d
è
	`addR•lyNuÎ
(
c
);

2568 
	`addR•lyBulkCSŒšg
(
c
,"entries");

2569 
	`¡»amR•lyW™hRªge
(
c
,
s
,
NULL
,NULL,
couÁ
,0,NULL,NULL,0,NULL);

2572 
	`addR•lyBulkCSŒšg
(
c
,"groups");

2573 ià(
s
->
cgroups
 =ğ
NULL
) {

2574 
	`addR•lyA¼ayL’
(
c
,0);

2576 
	`addR•lyA¼ayL’
(
c
,
	`¿xSize
(
s
->
cgroups
));

2577 
¿xI‹¿tÜ
 
ri_cgroups
;

2578 
	`¿xS¹
(&
ri_cgroups
,
s
->
cgroups
);

2579 
	`¿xS“k
(&
ri_cgroups
,"^",
NULL
,0);

2580 
	`¿xNext
(&
ri_cgroups
)) {

2581 
¡»amCG
 *
cg
 = 
ri_cgroups
.
d©a
;

2582 
	`addR•lyM­L’
(
c
,5);

2585 
	`addR•lyBulkCSŒšg
(
c
,"name");

2586 
	`addR•lyBulkCBufãr
(
c
,
ri_cgroups
.
key
,ri_cgroups.
key_Ën
);

2589 
	`addR•lyBulkCSŒšg
(
c
,"last-delivered-id");

2590 
	`addR•lySŒ—mID
(
c
,&
cg
->
Ï¡_id
);

2593 
	`addR•lyBulkCSŒšg
(
c
,"pel-count");

2594 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
cg
->
³l
));

2597 
	`addR•lyBulkCSŒšg
(
c
,"pending");

2598 
¬¿yËn_cg_³l
 = 0;

2599 *
¬¿y±r_cg_³l
 = 
	`addR•lyDeã¼edL’
(
c
);

2600 
¿xI‹¿tÜ
 
ri_cg_³l
;

2601 
	`¿xS¹
(&
ri_cg_³l
,
cg
->
³l
);

2602 
	`¿xS“k
(&
ri_cg_³l
,"^",
NULL
,0);

2603 
	`¿xNext
(&
ri_cg_³l
è&& (!
couÁ
 || 
¬¿yËn_cg_³l
 < count)) {

2604 
¡»amNACK
 *
Çck
 = 
ri_cg_³l
.
d©a
;

2605 
	`addR•lyA¼ayL’
(
c
,4);

2608 
¡»amID
 
id
;

2609 
	`¡»amDecodeID
(
ri_cg_³l
.
key
,&
id
);

2610 
	`addR•lySŒ—mID
(
c
,&
id
);

2613 
	`addR•lyBulkCBufãr
(
c
,
Çck
->
cÚsum”
->
Çme
,

2614 
	`sd¦’
(
Çck
->
cÚsum”
->
Çme
));

2617 
	`addR•lyLÚgLÚg
(
c
,
Çck
->
d–iv”y_time
);

2620 
	`addR•lyLÚgLÚg
(
c
,
Çck
->
d–iv”y_couÁ
);

2622 
¬¿yËn_cg_³l
++;

2624 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿y±r_cg_³l
,
¬¿yËn_cg_³l
);

2625 
	`¿xStİ
(&
ri_cg_³l
);

2628 
	`addR•lyBulkCSŒšg
(
c
,"consumers");

2629 
	`addR•lyA¼ayL’
(
c
,
	`¿xSize
(
cg
->
cÚsum”s
));

2630 
¿xI‹¿tÜ
 
ri_cÚsum”s
;

2631 
	`¿xS¹
(&
ri_cÚsum”s
,
cg
->
cÚsum”s
);

2632 
	`¿xS“k
(&
ri_cÚsum”s
,"^",
NULL
,0);

2633 
	`¿xNext
(&
ri_cÚsum”s
)) {

2634 
¡»amCÚsum”
 *
cÚsum”
 = 
ri_cÚsum”s
.
d©a
;

2635 
	`addR•lyM­L’
(
c
,4);

2638 
	`addR•lyBulkCSŒšg
(
c
,"name");

2639 
	`addR•lyBulkCBufãr
(
c
,
cÚsum”
->
Çme
,
	`sd¦’
(consumer->name));

2642 
	`addR•lyBulkCSŒšg
(
c
,"seen-time");

2643 
	`addR•lyLÚgLÚg
(
c
,
cÚsum”
->
£’_time
);

2646 
	`addR•lyBulkCSŒšg
(
c
,"pel-count");

2647 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
cÚsum”
->
³l
));

2650 
	`addR•lyBulkCSŒšg
(
c
,"pending");

2651 
¬¿yËn_ı–
 = 0;

2652 *
¬¿y±r_ı–
 = 
	`addR•lyDeã¼edL’
(
c
);

2653 
¿xI‹¿tÜ
 
ri_ı–
;

2654 
	`¿xS¹
(&
ri_ı–
,
cÚsum”
->
³l
);

2655 
	`¿xS“k
(&
ri_ı–
,"^",
NULL
,0);

2656 
	`¿xNext
(&
ri_ı–
è&& (!
couÁ
 || 
¬¿yËn_ı–
 < count)) {

2657 
¡»amNACK
 *
Çck
 = 
ri_ı–
.
d©a
;

2658 
	`addR•lyA¼ayL’
(
c
,3);

2661 
¡»amID
 
id
;

2662 
	`¡»amDecodeID
(
ri_ı–
.
key
,&
id
);

2663 
	`addR•lySŒ—mID
(
c
,&
id
);

2666 
	`addR•lyLÚgLÚg
(
c
,
Çck
->
d–iv”y_time
);

2669 
	`addR•lyLÚgLÚg
(
c
,
Çck
->
d–iv”y_couÁ
);

2671 
¬¿yËn_ı–
++;

2673 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿y±r_ı–
,
¬¿yËn_ı–
);

2674 
	`¿xStİ
(&
ri_ı–
);

2676 
	`¿xStİ
(&
ri_cÚsum”s
);

2678 
	`¿xStİ
(&
ri_cgroups
);

2681 
	}
}

2687 
	$xšfoCommªd
(
ş›Á
 *
c
) {

2688 cÚ¡ *
h–p
[] = {

2697 
NULL


2699 
¡»am
 *
s
 = 
NULL
;

2700 *
İt
;

2701 
robj
 *
key
;

2704 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"HELP")) {

2705 
	`addR•lyH–p
(
c
, 
h–p
);

2707 } ià(
c
->
¬gc
 < 3) {

2708 
	`addR•lyE¼Ü
(
c
,"syntaxƒrror,ry 'XINFO HELP'");

2714 
İt
 = 
c
->
¬gv
[1]->
±r
;

2715 
key
 = 
c
->
¬gv
[2];

2718 
robj
 *
o
 = 
	`lookupKeyWr™eOrR•ly
(
c
,
key
,
sh¬ed
.
nokey”r
);

2719 ià(
o
 =ğ
NULL
 || 
	`checkTy³
(
c
,o,
OBJ_STREAM
)) ;

2720 
s
 = 
o
->
±r
;

2723 ià(!
	`¡rÿ£cmp
(
İt
,"CONSUMERS"è&& 
c
->
¬gc
 == 4) {

2725 
¡»amCG
 *
cg
 = 
	`¡»amLookupCG
(
s
,
c
->
¬gv
[3]->
±r
);

2726 ià(
cg
 =ğ
NULL
) {

2727 
	`addR•lyE¼ÜFÜm©
(
c
, "-NOGROUP No such consumer group '%s' "

2729 (*)
c
->
¬gv
[3]->
±r
, (*)
key
->ptr);

2733 
	`addR•lyA¼ayL’
(
c
,
	`¿xSize
(
cg
->
cÚsum”s
));

2734 
¿xI‹¿tÜ
 
ri
;

2735 
	`¿xS¹
(&
ri
,
cg
->
cÚsum”s
);

2736 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

2737 
m¡ime_t
 
now
 = 
	`m¡ime
();

2738 
	`¿xNext
(&
ri
)) {

2739 
¡»amCÚsum”
 *
cÚsum”
 = 
ri
.
d©a
;

2740 
m¡ime_t
 
idË
 = 
now
 - 
cÚsum”
->
£’_time
;

2741 ià(
idË
 < 0) idle = 0;

2743 
	`addR•lyM­L’
(
c
,3);

2744 
	`addR•lyBulkCSŒšg
(
c
,"name");

2745 
	`addR•lyBulkCBufãr
(
c
,
cÚsum”
->
Çme
,
	`sd¦’
(consumer->name));

2746 
	`addR•lyBulkCSŒšg
(
c
,"pending");

2747 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
cÚsum”
->
³l
));

2748 
	`addR•lyBulkCSŒšg
(
c
,"idle");

2749 
	`addR•lyLÚgLÚg
(
c
,
idË
);

2751 
	`¿xStİ
(&
ri
);

2752 } ià(!
	`¡rÿ£cmp
(
İt
,"GROUPS"è&& 
c
->
¬gc
 == 3) {

2754 ià(
s
->
cgroups
 =ğ
NULL
) {

2755 
	`addR•lyA¼ayL’
(
c
,0);

2759 
	`addR•lyA¼ayL’
(
c
,
	`¿xSize
(
s
->
cgroups
));

2760 
¿xI‹¿tÜ
 
ri
;

2761 
	`¿xS¹
(&
ri
,
s
->
cgroups
);

2762 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

2763 
	`¿xNext
(&
ri
)) {

2764 
¡»amCG
 *
cg
 = 
ri
.
d©a
;

2765 
	`addR•lyM­L’
(
c
,4);

2766 
	`addR•lyBulkCSŒšg
(
c
,"name");

2767 
	`addR•lyBulkCBufãr
(
c
,
ri
.
key
,ri.
key_Ën
);

2768 
	`addR•lyBulkCSŒšg
(
c
,"consumers");

2769 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
cg
->
cÚsum”s
));

2770 
	`addR•lyBulkCSŒšg
(
c
,"pending");

2771 
	`addR•lyLÚgLÚg
(
c
,
	`¿xSize
(
cg
->
³l
));

2772 
	`addR•lyBulkCSŒšg
(
c
,"last-delivered-id");

2773 
	`addR•lySŒ—mID
(
c
,&
cg
->
Ï¡_id
);

2775 
	`¿xStİ
(&
ri
);

2776 } ià(!
	`¡rÿ£cmp
(
İt
,"STREAM")) {

2778 
	`xšfoR•lyW™hSŒ—mInfo
(
c
,
s
);

2780 
	`addR•lySubcommªdSyÁaxE¼Ü
(
c
);

2782 
	}
}

	@t_string.c

30 
	~"£rv”.h
"

31 
	~<m©h.h
>

37 
	$checkSŒšgL’gth
(
ş›Á
 *
c
, 
size
) {

38 ià(
size
 > 512*1024*1024) {

39 
	`addR•lyE¼Ü
(
c
,"stringƒxceeds maximum‡llowed size (512MB)");

40  
C_ERR
;

42  
C_OK
;

43 
	}
}

61 
	#OBJ_SET_NO_FLAGS
 0

	)

62 
	#OBJ_SET_NX
 (1<<0è

	)

63 
	#OBJ_SET_XX
 (1<<1è

	)

64 
	#OBJ_SET_EX
 (1<<2è

	)

65 
	#OBJ_SET_PX
 (1<<3è

	)

66 
	#OBJ_SET_KEEPTTL
 (1<<4è

	)

68 
	$£tG’”icCommªd
(
ş›Á
 *
c
, 
æags
, 
robj
 *
key
,„obj *
v®
,„obj *
expœe
, 
un™
,„obj *
ok_»¶y
,„obj *
abÜt_»¶y
) {

69 
mli£cÚds
 = 0;

71 ià(
expœe
) {

72 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, 
expœe
, &
mli£cÚds
, 
NULL
è!ğ
C_OK
)

74 ià(
mli£cÚds
 <= 0) {

75 
	`addR•lyE¼ÜFÜm©
(
c
,"šv®idƒxpœtimš %s",c->
cmd
->
Çme
);

78 ià(
un™
 =ğ
UNIT_SECONDS
è
mli£cÚds
 *= 1000;

81 ià((
æags
 & 
OBJ_SET_NX
 && 
	`lookupKeyWr™e
(
c
->
db
,
key
è!ğ
NULL
) ||

82 (
æags
 & 
OBJ_SET_XX
 && 
	`lookupKeyWr™e
(
c
->
db
,
key
è=ğ
NULL
))

84 
	`addR•ly
(
c
, 
abÜt_»¶y
 ?‡bÜt_»¶y : 
sh¬ed
.
nuÎ
[c->
»¥
]);

87 
	`g’”icS‘Key
(
c
,c->
db
,
key
,
v®
,
æags
 & 
OBJ_SET_KEEPTTL
,1);

88 
£rv”
.
dœty
++;

89 ià(
expœe
è
	`£tExpœe
(
c
,c->
db
,
key
,
	`m¡ime
()+
mli£cÚds
);

90 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£t",
key
,
c
->
db
->
id
);

91 ià(
expœe
è
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,

92 "expœe",
key
,
c
->
db
->
id
);

93 
	`addR•ly
(
c
, 
ok_»¶y
 ? ok_»¶y : 
sh¬ed
.
ok
);

94 
	}
}

97 
	$£tCommªd
(
ş›Á
 *
c
) {

98 
j
;

99 
robj
 *
expœe
 = 
NULL
;

100 
un™
 = 
UNIT_SECONDS
;

101 
æags
 = 
OBJ_SET_NO_FLAGS
;

103 
j
 = 3; j < 
c
->
¬gc
; j++) {

104 *
a
 = 
c
->
¬gv
[
j
]->
±r
;

105 
robj
 *
Ãxt
 = (
j
 =ğ
c
->
¬gc
-1è? 
NULL
 : c->
¬gv
[j+1];

107 ià((
a
[0] == 'n' ||‡[0] == 'N') &&

108 (
a
[1] == 'x' ||‡[1] == 'X') &&‡[2] == '\0' &&

109 !(
æags
 & 
OBJ_SET_XX
))

111 
æags
 |ğ
OBJ_SET_NX
;

112 } ià((
a
[0] == 'x' ||‡[0] == 'X') &&

113 (
a
[1] == 'x' ||‡[1] == 'X') &&‡[2] == '\0' &&

114 !(
æags
 & 
OBJ_SET_NX
))

116 
æags
 |ğ
OBJ_SET_XX
;

117 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"KEEPTTL") &&

118 !(
æags
 & 
OBJ_SET_EX
è&& !(æag & 
OBJ_SET_PX
))

120 
æags
 |ğ
OBJ_SET_KEEPTTL
;

121 } ià((
a
[0] == 'e' ||‡[0] == 'E') &&

122 (
a
[1] == 'x' ||‡[1] == 'X') &&‡[2] == '\0' &&

123 !(
æags
 & 
OBJ_SET_KEEPTTL
) &&

124 !(
æags
 & 
OBJ_SET_PX
è&& 
Ãxt
)

126 
æags
 |ğ
OBJ_SET_EX
;

127 
un™
 = 
UNIT_SECONDS
;

128 
expœe
 = 
Ãxt
;

129 
j
++;

130 } ià((
a
[0] == 'p' ||‡[0] == 'P') &&

131 (
a
[1] == 'x' ||‡[1] == 'X') &&‡[2] == '\0' &&

132 !(
æags
 & 
OBJ_SET_KEEPTTL
) &&

133 !(
æags
 & 
OBJ_SET_EX
è&& 
Ãxt
)

135 
æags
 |ğ
OBJ_SET_PX
;

136 
un™
 = 
UNIT_MILLISECONDS
;

137 
expœe
 = 
Ãxt
;

138 
j
++;

140 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

145 
c
->
¬gv
[2] = 
	`ŒyObjeùEncodšg
(c->argv[2]);

146 
	`£tG’”icCommªd
(
c
,
æags
,c->
¬gv
[1],c->¬gv[2],
expœe
,
un™
,
NULL
,NULL);

147 
	}
}

149 
	$£ŠxCommªd
(
ş›Á
 *
c
) {

150 
c
->
¬gv
[2] = 
	`ŒyObjeùEncodšg
(c->argv[2]);

151 
	`£tG’”icCommªd
(
c
,
OBJ_SET_NX
,c->
¬gv
[1],c->¬gv[2],
NULL
,0,
sh¬ed
.
cÚe
,sh¬ed.
cz”o
);

152 
	}
}

154 
	$£‹xCommªd
(
ş›Á
 *
c
) {

155 
c
->
¬gv
[3] = 
	`ŒyObjeùEncodšg
(c->argv[3]);

156 
	`£tG’”icCommªd
(
c
,
OBJ_SET_NO_FLAGS
,c->
¬gv
[1],c->¬gv[3],c->¬gv[2],
UNIT_SECONDS
,
NULL
,NULL);

157 
	}
}

159 
	$p£‹xCommªd
(
ş›Á
 *
c
) {

160 
c
->
¬gv
[3] = 
	`ŒyObjeùEncodšg
(c->argv[3]);

161 
	`£tG’”icCommªd
(
c
,
OBJ_SET_NO_FLAGS
,c->
¬gv
[1],c->¬gv[3],c->¬gv[2],
UNIT_MILLISECONDS
,
NULL
,NULL);

162 
	}
}

164 
	$g‘G’”icCommªd
(
ş›Á
 *
c
) {

165 
robj
 *
o
;

167 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
nuÎ
[c->
»¥
])è=ğ
NULL
)

168  
C_OK
;

170 ià(
o
->
ty³
 !ğ
OBJ_STRING
) {

171 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

172  
C_ERR
;

174 
	`addR•lyBulk
(
c
,
o
);

175  
C_OK
;

177 
	}
}

179 
	$g‘Commªd
(
ş›Á
 *
c
) {

180 
	`g‘G’”icCommªd
(
c
);

181 
	}
}

183 
	$g‘£tCommªd
(
ş›Á
 *
c
) {

184 ià(
	`g‘G’”icCommªd
(
c
è=ğ
C_ERR
) ;

185 
c
->
¬gv
[2] = 
	`ŒyObjeùEncodšg
(c->argv[2]);

186 
	`£tKey
(
c
,c->
db
,c->
¬gv
[1],c->argv[2]);

187 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£t",
c
->
¬gv
[1],c->
db
->
id
);

188 
£rv”
.
dœty
++;

189 
	}
}

191 
	$£ŒªgeCommªd
(
ş›Á
 *
c
) {

192 
robj
 *
o
;

193 
off£t
;

194 
sds
 
v®ue
 = 
c
->
¬gv
[3]->
±r
;

196 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
off£t
,
NULL
è!ğ
C_OK
)

199 ià(
off£t
 < 0) {

200 
	`addR•lyE¼Ü
(
c
,"offset is out of„ange");

204 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

205 ià(
o
 =ğ
NULL
) {

207 ià(
	`sd¦’
(
v®ue
) == 0) {

208 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

213 ià(
	`checkSŒšgL’gth
(
c
,
off£t
+
	`sd¦’
(
v®ue
)è!ğ
C_OK
)

216 
o
 = 
	`ü—‹Objeù
(
OBJ_STRING
,
	`sd¢ewËn
(
NULL
, 
off£t
+
	`sd¦’
(
v®ue
)));

217 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
o
);

219 
size_t
 
Ş’
;

222 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
))

226 
Ş’
 = 
	`¡ršgObjeùL’
(
o
);

227 ià(
	`sd¦’
(
v®ue
) == 0) {

228 
	`addR•lyLÚgLÚg
(
c
,
Ş’
);

233 ià(
	`checkSŒšgL’gth
(
c
,
off£t
+
	`sd¦’
(
v®ue
)è!ğ
C_OK
)

237 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

240 ià(
	`sd¦’
(
v®ue
) > 0) {

241 
o
->
±r
 = 
	`sdsgrowz”o
(o->±r,
off£t
+
	`sd¦’
(
v®ue
));

242 
	`memıy
((*)
o
->
±r
+
off£t
,
v®ue
,
	`sd¦’
(value));

243 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

244 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,

245 "£Œªge",
c
->
¬gv
[1],c->
db
->
id
);

246 
£rv”
.
dœty
++;

248 
	`addR•lyLÚgLÚg
(
c
,
	`sd¦’
(
o
->
±r
));

249 
	}
}

251 
	$g‘¿ngeCommªd
(
ş›Á
 *
c
) {

252 
robj
 *
o
;

253 
¡¬t
, 
’d
;

254 *
¡r
, 
Îbuf
[32];

255 
size_t
 
¡¾’
;

257 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
¡¬t
,
NULL
è!ğ
C_OK
)

259 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
’d
,
NULL
è!ğ
C_OK
)

261 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±ybulk
)è=ğ
NULL
 ||

262 
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) ;

264 ià(
o
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

265 
¡r
 = 
Îbuf
;

266 
¡¾’
 = 
	`Î2¡ršg
(
Îbuf
,Ölbuf),()
o
->
±r
);

268 
¡r
 = 
o
->
±r
;

269 
¡¾’
 = 
	`sd¦’
(
¡r
);

273 ià(
¡¬t
 < 0 && 
’d
 < 0 && start >ƒnd) {

274 
	`addR•ly
(
c
,
sh¬ed
.
em±ybulk
);

277 ià(
¡¬t
 < 0è¡¬ˆğ
¡¾’
+start;

278 ià(
’d
 < 0è’d = 
¡¾’
+end;

279 ià(
¡¬t
 < 0) start = 0;

280 ià(
’d
 < 0)ƒnd = 0;

281 ià(()
’d
 >ğ
¡¾’
)ƒnd = strlen-1;

285 ià(
¡¬t
 > 
’d
 || 
¡¾’
 == 0) {

286 
	`addR•ly
(
c
,
sh¬ed
.
em±ybulk
);

288 
	`addR•lyBulkCBufãr
(
c
,(*)
¡r
+
¡¬t
,
’d
-start+1);

290 
	}
}

292 
	$mg‘Commªd
(
ş›Á
 *
c
) {

293 
j
;

295 
	`addR•lyA¼ayL’
(
c
,c->
¬gc
-1);

296 
j
 = 1; j < 
c
->
¬gc
; j++) {

297 
robj
 *
o
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
]);

298 ià(
o
 =ğ
NULL
) {

299 
	`addR•lyNuÎ
(
c
);

301 ià(
o
->
ty³
 !ğ
OBJ_STRING
) {

302 
	`addR•lyNuÎ
(
c
);

304 
	`addR•lyBulk
(
c
,
o
);

308 
	}
}

310 
	$m£tG’”icCommªd
(
ş›Á
 *
c
, 
nx
) {

311 
j
;

313 ià((
c
->
¬gc
 % 2) == 0) {

314 
	`addR•lyE¼Ü
(
c
,"wrong‚umber of‡rguments for MSET");

320 ià(
nx
) {

321 
j
 = 1; j < 
c
->
¬gc
; j += 2) {

322 ià(
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[
j
]è!ğ
NULL
) {

323 
	`addR•ly
(
c
, 
sh¬ed
.
cz”o
);

329 
j
 = 1; j < 
c
->
¬gc
; j += 2) {

330 
c
->
¬gv
[
j
+1] = 
	`ŒyObjeùEncodšg
(c->argv[j+1]);

331 
	`£tKey
(
c
,c->
db
,c->
¬gv
[
j
],c->argv[j+1]);

332 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"£t",
c
->
¬gv
[
j
],c->
db
->
id
);

334 
£rv”
.
dœty
 +ğ(
c
->
¬gc
-1)/2;

335 
	`addR•ly
(
c
, 
nx
 ? 
sh¬ed
.
cÚe
 : sh¬ed.
ok
);

336 
	}
}

338 
	$m£tCommªd
(
ş›Á
 *
c
) {

339 
	`m£tG’”icCommªd
(
c
,0);

340 
	}
}

342 
	$m£ŠxCommªd
(
ş›Á
 *
c
) {

343 
	`m£tG’”icCommªd
(
c
,1);

344 
	}
}

346 
	$šüDeüCommªd
(
ş›Á
 *
c
, 
šü
) {

347 
v®ue
, 
Şdv®ue
;

348 
robj
 *
o
, *
Ãw
;

350 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

351 ià(
o
 !ğ
NULL
 && 
	`checkTy³
(
c
,o,
OBJ_STRING
)) ;

352 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,
o
,&
v®ue
,
NULL
è!ğ
C_OK
) ;

354 
Şdv®ue
 = 
v®ue
;

355 ià((
šü
 < 0 && 
Şdv®ue
 < 0 && inü < (
LLONG_MIN
-oldvalue)) ||

356 (
šü
 > 0 && 
Şdv®ue
 > 0 && inü > (
LLONG_MAX
-oldvalue))) {

357 
	`addR•lyE¼Ü
(
c
,"increment or decrement would overflow");

360 
v®ue
 +ğ
šü
;

362 ià(
o
 && o->
»fcouÁ
 =ğ1 && o->
’codšg
 =ğ
OBJ_ENCODING_INT
 &&

363 (
v®ue
 < 0 || v®u>ğ
OBJ_SHARED_INTEGERS
) &&

364 
v®ue
 >ğ
LONG_MIN
 && v®u<ğ
LONG_MAX
)

366 
Ãw
 = 
o
;

367 
o
->
±r
 = (*)(()
v®ue
);

369 
Ãw
 = 
	`ü—‹SŒšgObjeùFromLÚgLÚgFÜV®ue
(
v®ue
);

370 ià(
o
) {

371 
	`dbOv”wr™e
(
c
->
db
,c->
¬gv
[1],
Ãw
);

373 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
Ãw
);

376 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

377 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"šüby",
c
->
¬gv
[1],c->
db
->
id
);

378 
£rv”
.
dœty
++;

379 
	`addR•ly
(
c
,
sh¬ed
.
cŞÚ
);

380 
	`addR•ly
(
c
,
Ãw
);

381 
	`addR•ly
(
c
,
sh¬ed
.
ülf
);

382 
	}
}

384 
	$šüCommªd
(
ş›Á
 *
c
) {

385 
	`šüDeüCommªd
(
c
,1);

386 
	}
}

388 
	$deüCommªd
(
ş›Á
 *
c
) {

389 
	`šüDeüCommªd
(
c
,-1);

390 
	}
}

392 
	$šübyCommªd
(
ş›Á
 *
c
) {

393 
šü
;

395 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
šü
, 
NULL
è!ğ
C_OK
) ;

396 
	`šüDeüCommªd
(
c
,
šü
);

397 
	}
}

399 
	$deübyCommªd
(
ş›Á
 *
c
) {

400 
šü
;

402 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
šü
, 
NULL
è!ğ
C_OK
) ;

403 
	`šüDeüCommªd
(
c
,-
šü
);

404 
	}
}

406 
	$šübyæßtCommªd
(
ş›Á
 *
c
) {

407 
šü
, 
v®ue
;

408 
robj
 *
o
, *
Ãw
, *
aux1
, *
aux2
;

410 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

411 ià(
o
 !ğ
NULL
 && 
	`checkTy³
(
c
,o,
OBJ_STRING
)) ;

412 ià(
	`g‘LÚgDoubËFromObjeùOrR•ly
(
c
,
o
,&
v®ue
,
NULL
è!ğ
C_OK
 ||

413 
	`g‘LÚgDoubËFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
šü
,
NULL
è!ğ
C_OK
)

416 
v®ue
 +ğ
šü
;

417 ià(
	`i¢ª
(
v®ue
è|| 
	`isšf
(value)) {

418 
	`addR•lyE¼Ü
(
c
,"increment would…roduce NaN or Infinity");

421 
Ãw
 = 
	`ü—‹SŒšgObjeùFromLÚgDoubË
(
v®ue
,1);

422 ià(
o
)

423 
	`dbOv”wr™e
(
c
->
db
,c->
¬gv
[1],
Ãw
);

425 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],
Ãw
);

426 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

427 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"šübyæßt",
c
->
¬gv
[1],c->
db
->
id
);

428 
£rv”
.
dœty
++;

429 
	`addR•lyBulk
(
c
,
Ãw
);

434 
aux1
 = 
	`ü—‹SŒšgObjeù
("SET",3);

435 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,0,
aux1
);

436 
	`deüRefCouÁ
(
aux1
);

437 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,2,
Ãw
);

438 
aux2
 = 
	`ü—‹SŒšgObjeù
("KEEPTTL",7);

439 
	`»wr™eCl›ÁCommªdArgum’t
(
c
,3,
aux2
);

440 
	`deüRefCouÁ
(
aux2
);

441 
	}
}

443 
	$­³ndCommªd
(
ş›Á
 *
c
) {

444 
size_t
 
tÙËn
;

445 
robj
 *
o
, *
­³nd
;

447 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[1]);

448 ià(
o
 =ğ
NULL
) {

450 
c
->
¬gv
[2] = 
	`ŒyObjeùEncodšg
(c->argv[2]);

451 
	`dbAdd
(
c
->
db
,c->
¬gv
[1],c->argv[2]);

452 
	`šüRefCouÁ
(
c
->
¬gv
[2]);

453 
tÙËn
 = 
	`¡ršgObjeùL’
(
c
->
¬gv
[2]);

456 ià(
	`checkTy³
(
c
,
o
,
OBJ_STRING
))

460 
­³nd
 = 
c
->
¬gv
[2];

461 
tÙËn
 = 
	`¡ršgObjeùL’
(
o
)+
	`sd¦’
(
­³nd
->
±r
);

462 ià(
	`checkSŒšgL’gth
(
c
,
tÙËn
è!ğ
C_OK
)

466 
o
 = 
	`dbUnsh¬eSŒšgV®ue
(
c
->
db
,c->
¬gv
[1],o);

467 
o
->
±r
 = 
	`sdsÿ’
(o->±r,
­³nd
->±r,
	`sd¦’
(append->ptr));

468 
tÙËn
 = 
	`sd¦’
(
o
->
±r
);

470 
	`sigÇlModif›dKey
(
c
,c->
db
,c->
¬gv
[1]);

471 
	`nÙifyKey¥aûEv’t
(
NOTIFY_STRING
,"­³nd",
c
->
¬gv
[1],c->
db
->
id
);

472 
£rv”
.
dœty
++;

473 
	`addR•lyLÚgLÚg
(
c
,
tÙËn
);

474 
	}
}

476 
	$¡¾’Commªd
(
ş›Á
 *
c
) {

477 
robj
 *
o
;

478 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

479 
	`checkTy³
(
c
,
o
,
OBJ_STRING
)) ;

480 
	`addR•lyLÚgLÚg
(
c
,
	`¡ršgObjeùL’
(
o
));

481 
	}
}

487 
¡¿lgoLCS
(
ş›Á
 *
c
);

488 
	$¡¿lgoCommªd
(
ş›Á
 *
c
) {

490 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[1]->
±r
,"lcs")) {

491 
	`¡¿lgoLCS
(
c
);

493 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

495 
	}
}

500 
	$¡¿lgoLCS
(
ş›Á
 *
c
) {

501 
ušt32_t
 
i
, 
j
;

502 
mšm©chËn
 = 0;

503 
sds
 
a
 = 
NULL
, 
b
 = NULL;

504 
g‘Ën
 = 0, 
g‘idx
 = 0, 
w™hm©chËn
 = 0;

505 
robj
 *
obja
 = 
NULL
, *
objb
 = NULL;

507 
j
 = 2; j < (
ušt32_t
)
c
->
¬gc
; j++) {

508 *
İt
 = 
c
->
¬gv
[
j
]->
±r
;

509 
mÜ—rgs
 = (
c
->
¬gc
-1è- 
j
;

511 ià(!
	`¡rÿ£cmp
(
İt
,"IDX")) {

512 
g‘idx
 = 1;

513 } ià(!
	`¡rÿ£cmp
(
İt
,"LEN")) {

514 
g‘Ën
 = 1;

515 } ià(!
	`¡rÿ£cmp
(
İt
,"WITHMATCHLEN")) {

516 
w™hm©chËn
 = 1;

517 } ià(!
	`¡rÿ£cmp
(
İt
,"MINMATCHLEN"è&& 
mÜ—rgs
) {

518 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
+1],&
mšm©chËn
,
NULL
)

519 !ğ
C_OK
) ;

520 ià(
mšm©chËn
 < 0) minmatchlen = 0;

521 
j
++;

522 } ià(!
	`¡rÿ£cmp
(
İt
,"STRINGS")) {

523 ià(
a
 !ğ
NULL
) {

524 
	`addR•lyE¼Ü
(
c
,"Either use STRINGS or KEYS");

527 
a
 = 
c
->
¬gv
[
j
+1]->
±r
;

528 
b
 = 
c
->
¬gv
[
j
+2]->
±r
;

529 
j
 += 2;

530 } ià(!
	`¡rÿ£cmp
(
İt
,"KEYS")) {

531 ià(
a
 !ğ
NULL
) {

532 
	`addR•lyE¼Ü
(
c
,"Either use STRINGS or KEYS");

535 
obja
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
+1]);

536 
objb
 = 
	`lookupKeyR—d
(
c
->
db
,c->
¬gv
[
j
+2]);

537 
obja
 = obj¨? 
	`g‘DecodedObjeù
(objaè: 
	`ü—‹SŒšgObjeù
("",0);

538 
objb
 = objb ? 
	`g‘DecodedObjeù
(objbè: 
	`ü—‹SŒšgObjeù
("",0);

539 
a
 = 
obja
->
±r
;

540 
b
 = 
objb
->
±r
;

541 
j
 += 2;

543 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

549 ià(
a
 =ğ
NULL
) {

550 
	`addR•lyE¼Ü
(
c
,"Please specifywo strings: "

553 } ià(
g‘Ën
 && 
g‘idx
) {

554 
	`addR•lyE¼Ü
(
c
,

562 
ušt32_t
 
®’
 = 
	`sd¦’
(
a
);

563 
ušt32_t
 
bËn
 = 
	`sd¦’
(
b
);

568 
ušt32_t
 *
lcs
 = 
	`zm®loc
((
®’
+1)*(
bËn
+1)*(uint32_t));

569 
	#LCS
(
A
,
B
è
lcs
[(B)+((A)*(
bËn
+1))]

	)

572 
ušt32_t
 
i
 = 0; i <ğ
®’
; i++) {

573 
ušt32_t
 
j
 = 0; j <ğ
bËn
; j++) {

574 ià(
i
 =ğ0 || 
j
 == 0) {

577 
	`LCS
(
i
,
j
) = 0;

578 } ià(
a
[
i
-1] =ğ
b
[
j
-1]) {

583 
	`LCS
(
i
,
j
) = LCS(i-1,j-1)+1;

588 
ušt32_t
 
lcs1
 = 
	`LCS
(
i
-1,
j
);

589 
ušt32_t
 
lcs2
 = 
	`LCS
(
i
,
j
-1);

590 
	`LCS
(
i
,
j
èğ
lcs1
 > 
lcs2
 ?†cs1 :†cs2;

597 
ušt32_t
 
idx
 = 
	`LCS
(
®’
,
bËn
);

598 
sds
 
»suÉ
 = 
NULL
;

599 *
¬¿yËÅŒ
 = 
NULL
;

600 
ušt32_t
 
¬ªge_¡¬t
 = 
®’
,

601 
¬ªge_’d
 = 0,

602 
b¿nge_¡¬t
 = 0,

603 
b¿nge_’d
 = 0;

606 
compu‹lcs
 = 
g‘idx
 || !
g‘Ën
;

607 ià(
compu‹lcs
è
»suÉ
 = 
	`sd¢ewËn
(
SDS_NOINIT
,
idx
);

610 
ušt32_t
 
¬¿yËn
 = 0;

611 ià(
g‘idx
) {

612 
	`addR•lyM­L’
(
c
,2);

613 
	`addR•lyBulkCSŒšg
(
c
,"matches");

614 
¬¿yËÅŒ
 = 
	`addR•lyDeã¼edL’
(
c
);

617 
i
 = 
®’
, 
j
 = 
bËn
;

618 
compu‹lcs
 && 
i
 > 0 && 
j
 > 0) {

619 
em™_¿nge
 = 0;

620 ià(
a
[
i
-1] =ğ
b
[
j
-1]) {

623 
»suÉ
[
idx
-1] = 
a
[
i
-1];

626 ià(
¬ªge_¡¬t
 =ğ
®’
) {

627 
¬ªge_¡¬t
 = 
i
-1;

628 
¬ªge_’d
 = 
i
-1;

629 
b¿nge_¡¬t
 = 
j
-1;

630 
b¿nge_’d
 = 
j
-1;

634 ià(
¬ªge_¡¬t
 =ğ
i
 && 
b¿nge_¡¬t
 =ğ
j
) {

635 
¬ªge_¡¬t
--;

636 
b¿nge_¡¬t
--;

638 
em™_¿nge
 = 1;

643 ià(
¬ªge_¡¬t
 =ğ0 || 
b¿nge_¡¬t
 =ğ0è
em™_¿nge
 = 1;

644 
idx
--; 
i
--; 
j
--;

648 
ušt32_t
 
lcs1
 = 
	`LCS
(
i
-1,
j
);

649 
ušt32_t
 
lcs2
 = 
	`LCS
(
i
,
j
-1);

650 ià(
lcs1
 > 
lcs2
)

651 
i
--;

653 
j
--;

654 ià(
¬ªge_¡¬t
 !ğ
®’
è
em™_¿nge
 = 1;

658 
ušt32_t
 
m©ch_Ën
 = 
¬ªge_’d
 - 
¬ªge_¡¬t
 + 1;

659 ià(
em™_¿nge
) {

660 ià(
mšm©chËn
 =ğ0 || 
m©ch_Ën
 >= minmatchlen) {

661 ià(
¬¿yËÅŒ
) {

662 
	`addR•lyA¼ayL’
(
c
,2+
w™hm©chËn
);

663 
	`addR•lyA¼ayL’
(
c
,2);

664 
	`addR•lyLÚgLÚg
(
c
,
¬ªge_¡¬t
);

665 
	`addR•lyLÚgLÚg
(
c
,
¬ªge_’d
);

666 
	`addR•lyA¼ayL’
(
c
,2);

667 
	`addR•lyLÚgLÚg
(
c
,
b¿nge_¡¬t
);

668 
	`addR•lyLÚgLÚg
(
c
,
b¿nge_’d
);

669 ià(
w™hm©chËn
è
	`addR•lyLÚgLÚg
(
c
,
m©ch_Ën
);

670 
¬¿yËn
++;

673 
¬ªge_¡¬t
 = 
®’
;

680 ià(
¬¿yËÅŒ
) {

681 
	`addR•lyBulkCSŒšg
(
c
,"len");

682 
	`addR•lyLÚgLÚg
(
c
,
	`LCS
(
®’
,
bËn
));

683 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËÅŒ
,
¬¿yËn
);

684 } ià(
g‘Ën
) {

685 
	`addR•lyLÚgLÚg
(
c
,
	`LCS
(
®’
,
bËn
));

687 
	`addR•lyBulkSds
(
c
,
»suÉ
);

688 
»suÉ
 = 
NULL
;

692 ià(
obja
è
	`deüRefCouÁ
(obja);

693 ià(
objb
è
	`deüRefCouÁ
(objb);

694 
	`sdsä“
(
»suÉ
);

695 
	`zä“
(
lcs
);

697 
	}
}

	@t_zset.c

59 
	~"£rv”.h
"

60 
	~<m©h.h
>

66 
z¦LexV®ueG‹Mš
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
);

67 
z¦LexV®ueL‹Max
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
);

71 
zskli¡Node
 *
	$z¦C»©eNode
(
Ëv–
, 
scÜe
, 
sds
 
–e
) {

72 
zskli¡Node
 *
zn
 =

73 
	`zm®loc
((*
zn
)+
Ëv–
*(
zskli¡Lev–
));

74 
zn
->
scÜe
 = score;

75 
zn
->
–e
 =ƒle;

76  
zn
;

77 
	}
}

80 
zskli¡
 *
	$z¦C»©e
() {

81 
j
;

82 
zskli¡
 *
z¦
;

84 
z¦
 = 
	`zm®loc
((*zsl));

85 
z¦
->
Ëv–
 = 1;

86 
z¦
->
Ëngth
 = 0;

87 
z¦
->
h—d”
 = 
	`z¦C»©eNode
(
ZSKIPLIST_MAXLEVEL
,0,
NULL
);

88 
j
 = 0; j < 
ZSKIPLIST_MAXLEVEL
; j++) {

89 
z¦
->
h—d”
->
Ëv–
[
j
].
fÜw¬d
 = 
NULL
;

90 
z¦
->
h—d”
->
Ëv–
[
j
].
¥ª
 = 0;

92 
z¦
->
h—d”
->
backw¬d
 = 
NULL
;

93 
z¦
->

 = 
NULL
;

94  
z¦
;

95 
	}
}

100 
	$z¦F»eNode
(
zskli¡Node
 *
node
) {

101 
	`sdsä“
(
node
->
–e
);

102 
	`zä“
(
node
);

103 
	}
}

106 
	$z¦F»e
(
zskli¡
 *
z¦
) {

107 
zskli¡Node
 *
node
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
, *
Ãxt
;

109 
	`zä“
(
z¦
->
h—d”
);

110 
node
) {

111 
Ãxt
 = 
node
->
Ëv–
[0].
fÜw¬d
;

112 
	`z¦F»eNode
(
node
);

113 
node
 = 
Ãxt
;

115 
	`zä“
(
z¦
);

116 
	}
}

122 
	$z¦RªdomLev–
() {

123 
Ëv–
 = 1;

124 (
	`¿ndom
()&0xFFFFè< (
ZSKIPLIST_P
 * 0xFFFF))

125 
Ëv–
 += 1;

126  (
Ëv–
<
ZSKIPLIST_MAXLEVEL
) ?†evel : ZSKIPLIST_MAXLEVEL;

127 
	}
}

132 
zskli¡Node
 *
	$z¦In£¹
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
–e
) {

133 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

134 
¿nk
[
ZSKIPLIST_MAXLEVEL
];

135 
i
, 
Ëv–
;

137 
	`£rv”As£¹
(!
	`i¢ª
(
scÜe
));

138 
x
 = 
z¦
->
h—d”
;

139 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

141 
¿nk
[
i
] = i =ğ(
z¦
->
Ëv–
-1) ? 0 :„ank[i+1];

142 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

143 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < score ||

144 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 == score &&

145 
	`sdscmp
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,ele) < 0)))

147 
¿nk
[
i
] +ğ
x
->
Ëv–
[i].
¥ª
;

148 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

150 
upd©e
[
i
] = 
x
;

156 
Ëv–
 = 
	`z¦RªdomLev–
();

157 ià(
Ëv–
 > 
z¦
->level) {

158 
i
 = 
z¦
->
Ëv–
; i <†evel; i++) {

159 
¿nk
[
i
] = 0;

160 
upd©e
[
i
] = 
z¦
->
h—d”
;

161 
upd©e
[
i
]->
Ëv–
[i].
¥ª
 = 
z¦
->
Ëngth
;

163 
z¦
->
Ëv–
 =†evel;

165 
x
 = 
	`z¦C»©eNode
(
Ëv–
,
scÜe
,
–e
);

166 
i
 = 0; i < 
Ëv–
; i++) {

167 
x
->
Ëv–
[
i
].
fÜw¬d
 = 
upd©e
[i]->level[i].forward;

168 
upd©e
[
i
]->
Ëv–
[i].
fÜw¬d
 = 
x
;

171 
x
->
Ëv–
[
i
].
¥ª
 = 
upd©e
[i]->Ëv–[i].¥ª - (
¿nk
[0] -„ank[i]);

172 
upd©e
[
i
]->
Ëv–
[i].
¥ª
 = (
¿nk
[0] -„ank[i]) + 1;

176 
i
 = 
Ëv–
; i < 
z¦
->level; i++) {

177 
upd©e
[
i
]->
Ëv–
[i].
¥ª
++;

180 
x
->
backw¬d
 = (
upd©e
[0] =ğ
z¦
->
h—d”
è? 
NULL
 : update[0];

181 ià(
x
->
Ëv–
[0].
fÜw¬d
)

182 
x
->
Ëv–
[0].
fÜw¬d
->
backw¬d
 = x;

184 
z¦
->

 = 
x
;

185 
z¦
->
Ëngth
++;

186  
x
;

187 
	}
}

191 
	$z¦D–‘eNode
(
zskli¡
 *
z¦
, 
zskli¡Node
 *
x
, zskli¡Nod**
upd©e
) {

192 
i
;

193 
i
 = 0; i < 
z¦
->
Ëv–
; i++) {

194 ià(
upd©e
[
i
]->
Ëv–
[i].
fÜw¬d
 =ğ
x
) {

195 
upd©e
[
i
]->
Ëv–
[i].
¥ª
 +ğ
x
->level[i].span - 1;

196 
upd©e
[
i
]->
Ëv–
[i].
fÜw¬d
 = 
x
->level[i].forward;

198 
upd©e
[
i
]->
Ëv–
[i].
¥ª
 -= 1;

201 ià(
x
->
Ëv–
[0].
fÜw¬d
) {

202 
x
->
Ëv–
[0].
fÜw¬d
->
backw¬d
 = x->backward;

204 
z¦
->

 = 
x
->
backw¬d
;

206 
z¦
->
Ëv–
 > 1 && z¦->
h—d”
->Ëv–[z¦->Ëv–-1].
fÜw¬d
 =ğ
NULL
)

207 
z¦
->
Ëv–
--;

208 
z¦
->
Ëngth
--;

209 
	}
}

219 
	$z¦D–‘e
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
–e
, 
zskli¡Node
 **
node
) {

220 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

221 
i
;

223 
x
 = 
z¦
->
h—d”
;

224 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

225 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

226 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < score ||

227 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 == score &&

228 
	`sdscmp
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,ele) < 0)))

230 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

232 
upd©e
[
i
] = 
x
;

236 
x
 = x->
Ëv–
[0].
fÜw¬d
;

237 ià(
x
 && 
scÜe
 =ğx->scÜ&& 
	`sdscmp
(x->
–e
,ele) == 0) {

238 
	`z¦D–‘eNode
(
z¦
, 
x
, 
upd©e
);

239 ià(!
node
)

240 
	`z¦F»eNode
(
x
);

242 *
node
 = 
x
;

246 
	}
}

259 
zskli¡Node
 *
	$z¦Upd©eScÜe
(
zskli¡
 *
z¦
, 
curscÜe
, 
sds
 
–e
, 
ÃwscÜe
) {

260 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

261 
i
;

265 
x
 = 
z¦
->
h—d”
;

266 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

267 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

268 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < 
curscÜe
 ||

269 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 =ğ
curscÜe
 &&

270 
	`sdscmp
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,ele) < 0)))

272 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

274 
upd©e
[
i
] = 
x
;

279 
x
 = x->
Ëv–
[0].
fÜw¬d
;

280 
	`£rv”As£¹
(
x
 && 
curscÜe
 =ğx->
scÜe
 && 
	`sdscmp
(x->
–e
,ele) == 0);

285 ià((
x
->
backw¬d
 =ğ
NULL
 || x->backw¬d->
scÜe
 < 
ÃwscÜe
) &&

286 (
x
->
Ëv–
[0].
fÜw¬d
 =ğ
NULL
 || x->Ëv–[0].fÜw¬d->
scÜe
 > 
ÃwscÜe
))

288 
x
->
scÜe
 = 
ÃwscÜe
;

289  
x
;

294 
	`z¦D–‘eNode
(
z¦
, 
x
, 
upd©e
);

295 
zskli¡Node
 *
Ãwnode
 = 
	`z¦In£¹
(
z¦
,
ÃwscÜe
,
x
->
–e
);

298 
x
->
–e
 = 
NULL
;

299 
	`z¦F»eNode
(
x
);

300  
Ãwnode
;

301 
	}
}

303 
	$z¦V®ueG‹Mš
(
v®ue
, 
z¿nge¥ec
 *
¥ec
) {

304  
¥ec
->
mšex
 ? (
v®ue
 > s³c->
mš
) : (value >= spec->min);

305 
	}
}

307 
	$z¦V®ueL‹Max
(
v®ue
, 
z¿nge¥ec
 *
¥ec
) {

308  
¥ec
->
maxex
 ? (
v®ue
 < s³c->
max
) : (value <= spec->max);

309 
	}
}

312 
	$z¦IsInRªge
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
) {

313 
zskli¡Node
 *
x
;

316 ià(
¿nge
->
mš
 >„ªge->
max
 ||

317 (
¿nge
->
mš
 =ğ¿nge->
max
 && (¿nge->
mšex
 ||„ªge->
maxex
)))

319 
x
 = 
z¦
->

;

320 ià(
x
 =ğ
NULL
 || !
	`z¦V®ueG‹Mš
(x->
scÜe
,
¿nge
))

322 
x
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

323 ià(
x
 =ğ
NULL
 || !
	`z¦V®ueL‹Max
(x->
scÜe
,
¿nge
))

326 
	}
}

330 
zskli¡Node
 *
	$z¦Fœ¡InRªge
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
) {

331 
zskli¡Node
 *
x
;

332 
i
;

335 ià(!
	`z¦IsInRªge
(
z¦
,
¿nge
)è 
NULL
;

337 
x
 = 
z¦
->
h—d”
;

338 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

340 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

341 !
	`z¦V®ueG‹Mš
(
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
,
¿nge
))

342 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

346 
x
 = x->
Ëv–
[0].
fÜw¬d
;

347 
	`£rv”As£¹
(
x
 !ğ
NULL
);

350 ià(!
	`z¦V®ueL‹Max
(
x
->
scÜe
,
¿nge
)è 
NULL
;

351  
x
;

352 
	}
}

356 
zskli¡Node
 *
	$z¦La¡InRªge
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
) {

357 
zskli¡Node
 *
x
;

358 
i
;

361 ià(!
	`z¦IsInRªge
(
z¦
,
¿nge
)è 
NULL
;

363 
x
 = 
z¦
->
h—d”
;

364 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

366 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

367 
	`z¦V®ueL‹Max
(
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
,
¿nge
))

368 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

372 
	`£rv”As£¹
(
x
 !ğ
NULL
);

375 ià(!
	`z¦V®ueG‹Mš
(
x
->
scÜe
,
¿nge
)è 
NULL
;

376  
x
;

377 
	}
}

383 
	$z¦D–‘eRªgeByScÜe
(
zskli¡
 *
z¦
, 
z¿nge¥ec
 *
¿nge
, 
diù
 *dict) {

384 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

385 
»moved
 = 0;

386 
i
;

388 
x
 = 
z¦
->
h—d”
;

389 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

390 
x
->
Ëv–
[
i
].
fÜw¬d
 && (
¿nge
->
mšex
 ?

391 
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 <ğ
¿nge
->
mš
 :

392 
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < 
¿nge
->
mš
))

393 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

394 
upd©e
[
i
] = 
x
;

398 
x
 = x->
Ëv–
[0].
fÜw¬d
;

401 
x
 &&

402 (
¿nge
->
maxex
 ? 
x
->
scÜe
 <„ªge->
max
 : x->score <=„ange->max))

404 
zskli¡Node
 *
Ãxt
 = 
x
->
Ëv–
[0].
fÜw¬d
;

405 
	`z¦D–‘eNode
(
z¦
,
x
,
upd©e
);

406 
	`diùD–‘e
(
diù
,
x
->
–e
);

407 
	`z¦F»eNode
(
x
);

408 
»moved
++;

409 
x
 = 
Ãxt
;

411  
»moved
;

412 
	}
}

414 
	$z¦D–‘eRªgeByLex
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
, 
diù
 *dict) {

415 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

416 
»moved
 = 0;

417 
i
;

420 
x
 = 
z¦
->
h—d”
;

421 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

422 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

423 !
	`z¦LexV®ueG‹Mš
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,
¿nge
))

424 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

425 
upd©e
[
i
] = 
x
;

429 
x
 = x->
Ëv–
[0].
fÜw¬d
;

432 
x
 && 
	`z¦LexV®ueL‹Max
(x->
–e
,
¿nge
)) {

433 
zskli¡Node
 *
Ãxt
 = 
x
->
Ëv–
[0].
fÜw¬d
;

434 
	`z¦D–‘eNode
(
z¦
,
x
,
upd©e
);

435 
	`diùD–‘e
(
diù
,
x
->
–e
);

436 
	`z¦F»eNode
(
x
);

437 
»moved
++;

438 
x
 = 
Ãxt
;

440  
»moved
;

441 
	}
}

445 
	$z¦D–‘eRªgeByRªk
(
zskli¡
 *
z¦
, 
¡¬t
, 
’d
, 
diù
 *dict) {

446 
zskli¡Node
 *
upd©e
[
ZSKIPLIST_MAXLEVEL
], *
x
;

447 
Œav”£d
 = 0, 
»moved
 = 0;

448 
i
;

450 
x
 = 
z¦
->
h—d”
;

451 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

452 
x
->
Ëv–
[
i
].
fÜw¬d
 && (
Œav”£d
 + x->Ëv–[i].
¥ª
è< 
¡¬t
) {

453 
Œav”£d
 +ğ
x
->
Ëv–
[
i
].
¥ª
;

454 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

456 
upd©e
[
i
] = 
x
;

459 
Œav”£d
++;

460 
x
 = x->
Ëv–
[0].
fÜw¬d
;

461 
x
 && 
Œav”£d
 <ğ
’d
) {

462 
zskli¡Node
 *
Ãxt
 = 
x
->
Ëv–
[0].
fÜw¬d
;

463 
	`z¦D–‘eNode
(
z¦
,
x
,
upd©e
);

464 
	`diùD–‘e
(
diù
,
x
->
–e
);

465 
	`z¦F»eNode
(
x
);

466 
»moved
++;

467 
Œav”£d
++;

468 
x
 = 
Ãxt
;

470  
»moved
;

471 
	}
}

477 
	$z¦G‘Rªk
(
zskli¡
 *
z¦
, 
scÜe
, 
sds
 
–e
) {

478 
zskli¡Node
 *
x
;

479 
¿nk
 = 0;

480 
i
;

482 
x
 = 
z¦
->
h—d”
;

483 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

484 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

485 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 < score ||

486 (
x
->
Ëv–
[
i
].
fÜw¬d
->
scÜe
 == score &&

487 
	`sdscmp
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,ele) <= 0))) {

488 
¿nk
 +ğ
x
->
Ëv–
[
i
].
¥ª
;

489 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

493 ià(
x
->
–e
 && 
	`sdscmp
(x->ele,ele) == 0) {

494  
¿nk
;

498 
	}
}

501 
zskli¡Node
* 
	$z¦G‘EËm’tByRªk
(
zskli¡
 *
z¦
, 
¿nk
) {

502 
zskli¡Node
 *
x
;

503 
Œav”£d
 = 0;

504 
i
;

506 
x
 = 
z¦
->
h—d”
;

507 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

508 
x
->
Ëv–
[
i
].
fÜw¬d
 && (
Œav”£d
 + x->Ëv–[i].
¥ª
è<ğ
¿nk
)

510 
Œav”£d
 +ğ
x
->
Ëv–
[
i
].
¥ª
;

511 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

513 ià(
Œav”£d
 =ğ
¿nk
) {

514  
x
;

517  
NULL
;

518 
	}
}

521 
	$z¦P¬£Rªge
(
robj
 *
mš
,„obj *
max
, 
z¿nge¥ec
 *
¥ec
) {

522 *
•Œ
;

523 
¥ec
->
mšex
 = s³c->
maxex
 = 0;

529 ià(
mš
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

530 
¥ec
->
mš
 = ()mš->
±r
;

532 ià(((*)
mš
->
±r
)[0] == '(') {

533 
¥ec
->
mš
 = 
	`¡¹od
((*)mš->
±r
+1,&
•Œ
);

534 ià(
•Œ
[0] !ğ'\0' || 
	`i¢ª
(
¥ec
->
mš
)è 
C_ERR
;

535 
¥ec
->
mšex
 = 1;

537 
¥ec
->
mš
 = 
	`¡¹od
((*)mš->
±r
,&
•Œ
);

538 ià(
•Œ
[0] !ğ'\0' || 
	`i¢ª
(
¥ec
->
mš
)è 
C_ERR
;

541 ià(
max
->
’codšg
 =ğ
OBJ_ENCODING_INT
) {

542 
¥ec
->
max
 = ()max->
±r
;

544 ià(((*)
max
->
±r
)[0] == '(') {

545 
¥ec
->
max
 = 
	`¡¹od
((*)max->
±r
+1,&
•Œ
);

546 ià(
•Œ
[0] !ğ'\0' || 
	`i¢ª
(
¥ec
->
max
)è 
C_ERR
;

547 
¥ec
->
maxex
 = 1;

549 
¥ec
->
max
 = 
	`¡¹od
((*)max->
±r
,&
•Œ
);

550 ià(
•Œ
[0] !ğ'\0' || 
	`i¢ª
(
¥ec
->
max
)è 
C_ERR
;

554  
C_OK
;

555 
	}
}

572 
	$z¦P¬£LexRªgeI‹m
(
robj
 *
™em
, 
sds
 *
de¡
, *
ex
) {

573 *
c
 = 
™em
->
±r
;

575 
c
[0]) {

577 ià(
c
[1] !ğ'\0'è 
C_ERR
;

578 *
ex
 = 1;

579 *
de¡
 = 
sh¬ed
.
max¡ršg
;

580  
C_OK
;

582 ià(
c
[1] !ğ'\0'è 
C_ERR
;

583 *
ex
 = 1;

584 *
de¡
 = 
sh¬ed
.
mš¡ršg
;

585  
C_OK
;

587 *
ex
 = 1;

588 *
de¡
 = 
	`sd¢ewËn
(
c
+1,
	`sd¦’
(c)-1);

589  
C_OK
;

591 *
ex
 = 0;

592 *
de¡
 = 
	`sd¢ewËn
(
c
+1,
	`sd¦’
(c)-1);

593  
C_OK
;

595  
C_ERR
;

597 
	}
}

601 
	$z¦F»eLexRªge
(
zËx¿nge¥ec
 *
¥ec
) {

602 ià(
¥ec
->
mš
 !ğ
sh¬ed
.
mš¡ršg
 &&

603 
¥ec
->
mš
 !ğ
sh¬ed
.
max¡ršg
è
	`sdsä“
(spec->min);

604 ià(
¥ec
->
max
 !ğ
sh¬ed
.
mš¡ršg
 &&

605 
¥ec
->
max
 !ğ
sh¬ed
.
max¡ršg
è
	`sdsä“
(spec->max);

606 
	}
}

613 
	$z¦P¬£LexRªge
(
robj
 *
mš
,„obj *
max
, 
zËx¿nge¥ec
 *
¥ec
) {

616 ià(
mš
->
’codšg
 =ğ
OBJ_ENCODING_INT
 ||

617 
max
->
’codšg
 =ğ
OBJ_ENCODING_INT
è 
C_ERR
;

619 
¥ec
->
mš
 = s³c->
max
 = 
NULL
;

620 ià(
	`z¦P¬£LexRªgeI‹m
(
mš
, &
¥ec
->mš, &¥ec->
mšex
è=ğ
C_ERR
 ||

621 
	`z¦P¬£LexRªgeI‹m
(
max
, &
¥ec
->max, &¥ec->
maxex
è=ğ
C_ERR
) {

622 
	`z¦F»eLexRªge
(
¥ec
);

623  
C_ERR
;

625  
C_OK
;

627 
	}
}

632 
	$sdscm¶ex
(
sds
 
a
, sd 
b
) {

633 ià(
a
 =ğ
b
)  0;

634 ià(
a
 =ğ
sh¬ed
.
mš¡ršg
 || 
b
 =ğsh¬ed.
max¡ršg
)  -1;

635 ià(
a
 =ğ
sh¬ed
.
max¡ršg
 || 
b
 =ğsh¬ed.
mš¡ršg
)  1;

636  
	`sdscmp
(
a
,
b
);

637 
	}
}

639 
	$z¦LexV®ueG‹Mš
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
) {

640  
¥ec
->
mšex
 ?

641 (
	`sdscm¶ex
(
v®ue
,
¥ec
->
mš
) > 0) :

642 (
	`sdscm¶ex
(
v®ue
,
¥ec
->
mš
) >= 0);

643 
	}
}

645 
	$z¦LexV®ueL‹Max
(
sds
 
v®ue
, 
zËx¿nge¥ec
 *
¥ec
) {

646  
¥ec
->
maxex
 ?

647 (
	`sdscm¶ex
(
v®ue
,
¥ec
->
max
) < 0) :

648 (
	`sdscm¶ex
(
v®ue
,
¥ec
->
max
) <= 0);

649 
	}
}

652 
	$z¦IsInLexRªge
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
) {

653 
zskli¡Node
 *
x
;

656 
cmp
 = 
	`sdscm¶ex
(
¿nge
->
mš
,¿nge->
max
);

657 ià(
cmp
 > 0 || (cm°=ğ0 && (
¿nge
->
mšex
 ||„ªge->
maxex
)))

659 
x
 = 
z¦
->

;

660 ià(
x
 =ğ
NULL
 || !
	`z¦LexV®ueG‹Mš
(x->
–e
,
¿nge
))

662 
x
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

663 ià(
x
 =ğ
NULL
 || !
	`z¦LexV®ueL‹Max
(x->
–e
,
¿nge
))

666 
	}
}

670 
zskli¡Node
 *
	$z¦Fœ¡InLexRªge
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
) {

671 
zskli¡Node
 *
x
;

672 
i
;

675 ià(!
	`z¦IsInLexRªge
(
z¦
,
¿nge
)è 
NULL
;

677 
x
 = 
z¦
->
h—d”
;

678 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

680 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

681 !
	`z¦LexV®ueG‹Mš
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,
¿nge
))

682 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

686 
x
 = x->
Ëv–
[0].
fÜw¬d
;

687 
	`£rv”As£¹
(
x
 !ğ
NULL
);

690 ià(!
	`z¦LexV®ueL‹Max
(
x
->
–e
,
¿nge
)è 
NULL
;

691  
x
;

692 
	}
}

696 
zskli¡Node
 *
	$z¦La¡InLexRªge
(
zskli¡
 *
z¦
, 
zËx¿nge¥ec
 *
¿nge
) {

697 
zskli¡Node
 *
x
;

698 
i
;

701 ià(!
	`z¦IsInLexRªge
(
z¦
,
¿nge
)è 
NULL
;

703 
x
 = 
z¦
->
h—d”
;

704 
i
 = 
z¦
->
Ëv–
-1; i >= 0; i--) {

706 
x
->
Ëv–
[
i
].
fÜw¬d
 &&

707 
	`z¦LexV®ueL‹Max
(
x
->
Ëv–
[
i
].
fÜw¬d
->
–e
,
¿nge
))

708 
x
 = x->
Ëv–
[
i
].
fÜw¬d
;

712 
	`£rv”As£¹
(
x
 !ğ
NULL
);

715 ià(!
	`z¦LexV®ueG‹Mš
(
x
->
–e
,
¿nge
)è 
NULL
;

716  
x
;

717 
	}
}

723 
	$zzlG‘ScÜe
(*
¥Œ
) {

724 *
v¡r
;

725 
vËn
;

726 
vlÚg
;

727 
buf
[128];

728 
scÜe
;

730 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

731 
	`£rv”As£¹
(
	`zli¡G‘
(
¥Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

733 ià(
v¡r
) {

734 
	`memıy
(
buf
,
v¡r
,
vËn
);

735 
buf
[
vËn
] = '\0';

736 
scÜe
 = 
	`¡¹od
(
buf
,
NULL
);

738 
scÜe
 = 
vlÚg
;

741  
scÜe
;

742 
	}
}

745 
sds
 
	$zli¡G‘Objeù
(*
¥Œ
) {

746 *
v¡r
;

747 
vËn
;

748 
vlÚg
;

750 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

751 
	`£rv”As£¹
(
	`zli¡G‘
(
¥Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

753 ià(
v¡r
) {

754  
	`sd¢ewËn
((*)
v¡r
,
vËn
);

756  
	`sdsäomlÚglÚg
(
vlÚg
);

758 
	}
}

761 
	$zzlCom·»EËm’ts
(*
•Œ
, *
c¡r
, 
ş’
) {

762 *
v¡r
;

763 
vËn
;

764 
vlÚg
;

765 
vbuf
[32];

766 
mšËn
, 
cmp
;

768 
	`£rv”As£¹
(
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

769 ià(
v¡r
 =ğ
NULL
) {

771 
vËn
 = 
	`Î2¡ršg
((*)
vbuf
,(vbuf),
vlÚg
);

772 
v¡r
 = 
vbuf
;

775 
mšËn
 = (
vËn
 < 
ş’
) ? vlen : clen;

776 
cmp
 = 
	`memcmp
(
v¡r
,
c¡r
,
mšËn
);

777 ià(
cmp
 =ğ0è 
vËn
-
ş’
;

778  
cmp
;

779 
	}
}

781 
	$zzlL’gth
(*
zl
) {

782  
	`zli¡L’
(
zl
)/2;

783 
	}
}

787 
	$zzlNext
(*
zl
, **
•Œ
, **
¥Œ
) {

788 *
_•Œ
, *
_¥Œ
;

789 
	`£rv”As£¹
(*
•Œ
 !ğ
NULL
 && *
¥Œ
 != NULL);

791 
_•Œ
 = 
	`zli¡Next
(
zl
,*
¥Œ
);

792 ià(
_•Œ
 !ğ
NULL
) {

793 
_¥Œ
 = 
	`zli¡Next
(
zl
,
_•Œ
);

794 
	`£rv”As£¹
(
_¥Œ
 !ğ
NULL
);

797 
_¥Œ
 = 
NULL
;

800 *
•Œ
 = 
_•Œ
;

801 *
¥Œ
 = 
_¥Œ
;

802 
	}
}

806 
	$zzlP»v
(*
zl
, **
•Œ
, **
¥Œ
) {

807 *
_•Œ
, *
_¥Œ
;

808 
	`£rv”As£¹
(*
•Œ
 !ğ
NULL
 && *
¥Œ
 != NULL);

810 
_¥Œ
 = 
	`zli¡P»v
(
zl
,*
•Œ
);

811 ià(
_¥Œ
 !ğ
NULL
) {

812 
_•Œ
 = 
	`zli¡P»v
(
zl
,
_¥Œ
);

813 
	`£rv”As£¹
(
_•Œ
 !ğ
NULL
);

816 
_•Œ
 = 
NULL
;

819 *
•Œ
 = 
_•Œ
;

820 *
¥Œ
 = 
_¥Œ
;

821 
	}
}

825 
	$zzlIsInRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
) {

826 *
p
;

827 
scÜe
;

830 ià(
¿nge
->
mš
 >„ªge->
max
 ||

831 (
¿nge
->
mš
 =ğ¿nge->
max
 && (¿nge->
mšex
 ||„ªge->
maxex
)))

834 
p
 = 
	`zli¡Index
(
zl
,-1);

835 ià(
p
 =ğ
NULL
)  0;

836 
scÜe
 = 
	`zzlG‘ScÜe
(
p
);

837 ià(!
	`z¦V®ueG‹Mš
(
scÜe
,
¿nge
))

840 
p
 = 
	`zli¡Index
(
zl
,1);

841 
	`£rv”As£¹
(
p
 !ğ
NULL
);

842 
scÜe
 = 
	`zzlG‘ScÜe
(
p
);

843 ià(!
	`z¦V®ueL‹Max
(
scÜe
,
¿nge
))

847 
	}
}

851 *
	$zzlFœ¡InRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
) {

852 *
•Œ
 = 
	`zli¡Index
(
zl
,0), *
¥Œ
;

853 
scÜe
;

856 ià(!
	`zzlIsInRªge
(
zl
,
¿nge
)è 
NULL
;

858 
•Œ
 !ğ
NULL
) {

859 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

860 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

862 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

863 ià(
	`z¦V®ueG‹Mš
(
scÜe
,
¿nge
)) {

865 ià(
	`z¦V®ueL‹Max
(
scÜe
,
¿nge
))

866  
•Œ
;

867  
NULL
;

871 
•Œ
 = 
	`zli¡Next
(
zl
,
¥Œ
);

874  
NULL
;

875 
	}
}

879 *
	$zzlLa¡InRªge
(*
zl
, 
z¿nge¥ec
 *
¿nge
) {

880 *
•Œ
 = 
	`zli¡Index
(
zl
,-2), *
¥Œ
;

881 
scÜe
;

884 ià(!
	`zzlIsInRªge
(
zl
,
¿nge
)è 
NULL
;

886 
•Œ
 !ğ
NULL
) {

887 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

888 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

890 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

891 ià(
	`z¦V®ueL‹Max
(
scÜe
,
¿nge
)) {

893 ià(
	`z¦V®ueG‹Mš
(
scÜe
,
¿nge
))

894  
•Œ
;

895  
NULL
;

900 
¥Œ
 = 
	`zli¡P»v
(
zl
,
•Œ
);

901 ià(
¥Œ
 !ğ
NULL
)

902 
	`£rv”As£¹
((
•Œ
 = 
	`zli¡P»v
(
zl
,
¥Œ
)è!ğ
NULL
);

904 
•Œ
 = 
NULL
;

907  
NULL
;

908 
	}
}

910 
	$zzlLexV®ueG‹Mš
(*
p
, 
zËx¿nge¥ec
 *
¥ec
) {

911 
sds
 
v®ue
 = 
	`zli¡G‘Objeù
(
p
);

912 
»s
 = 
	`z¦LexV®ueG‹Mš
(
v®ue
,
¥ec
);

913 
	`sdsä“
(
v®ue
);

914  
»s
;

915 
	}
}

917 
	$zzlLexV®ueL‹Max
(*
p
, 
zËx¿nge¥ec
 *
¥ec
) {

918 
sds
 
v®ue
 = 
	`zli¡G‘Objeù
(
p
);

919 
»s
 = 
	`z¦LexV®ueL‹Max
(
v®ue
,
¥ec
);

920 
	`sdsä“
(
v®ue
);

921  
»s
;

922 
	}
}

926 
	$zzlIsInLexRªge
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
) {

927 *
p
;

930 
cmp
 = 
	`sdscm¶ex
(
¿nge
->
mš
,¿nge->
max
);

931 ià(
cmp
 > 0 || (cm°=ğ0 && (
¿nge
->
mšex
 ||„ªge->
maxex
)))

934 
p
 = 
	`zli¡Index
(
zl
,-2);

935 ià(
p
 =ğ
NULL
)  0;

936 ià(!
	`zzlLexV®ueG‹Mš
(
p
,
¿nge
))

939 
p
 = 
	`zli¡Index
(
zl
,0);

940 
	`£rv”As£¹
(
p
 !ğ
NULL
);

941 ià(!
	`zzlLexV®ueL‹Max
(
p
,
¿nge
))

945 
	}
}

949 *
	$zzlFœ¡InLexRªge
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
) {

950 *
•Œ
 = 
	`zli¡Index
(
zl
,0), *
¥Œ
;

953 ià(!
	`zzlIsInLexRªge
(
zl
,
¿nge
)è 
NULL
;

955 
•Œ
 !ğ
NULL
) {

956 ià(
	`zzlLexV®ueG‹Mš
(
•Œ
,
¿nge
)) {

958 ià(
	`zzlLexV®ueL‹Max
(
•Œ
,
¿nge
))

959  
•Œ
;

960  
NULL
;

964 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

965 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

966 
•Œ
 = 
	`zli¡Next
(
zl
,
¥Œ
);

969  
NULL
;

970 
	}
}

974 *
	$zzlLa¡InLexRªge
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
) {

975 *
•Œ
 = 
	`zli¡Index
(
zl
,-2), *
¥Œ
;

978 ià(!
	`zzlIsInLexRªge
(
zl
,
¿nge
)è 
NULL
;

980 
•Œ
 !ğ
NULL
) {

981 ià(
	`zzlLexV®ueL‹Max
(
•Œ
,
¿nge
)) {

983 ià(
	`zzlLexV®ueG‹Mš
(
•Œ
,
¿nge
))

984  
•Œ
;

985  
NULL
;

990 
¥Œ
 = 
	`zli¡P»v
(
zl
,
•Œ
);

991 ià(
¥Œ
 !ğ
NULL
)

992 
	`£rv”As£¹
((
•Œ
 = 
	`zli¡P»v
(
zl
,
¥Œ
)è!ğ
NULL
);

994 
•Œ
 = 
NULL
;

997  
NULL
;

998 
	}
}

1000 *
	$zzlFšd
(*
zl
, 
sds
 
–e
, *
scÜe
) {

1001 *
•Œ
 = 
	`zli¡Index
(
zl
,0), *
¥Œ
;

1003 
•Œ
 !ğ
NULL
) {

1004 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

1005 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

1007 ià(
	`zli¡Com·»
(
•Œ
,(*)
–e
,
	`sd¦’
(ele))) {

1009 ià(
scÜe
 !ğ
NULL
è*scÜğ
	`zzlG‘ScÜe
(
¥Œ
);

1010  
•Œ
;

1014 
•Œ
 = 
	`zli¡Next
(
zl
,
¥Œ
);

1016  
NULL
;

1017 
	}
}

1021 *
	$zzlD–‘e
(*
zl
, *
•Œ
) {

1022 *
p
 = 
•Œ
;

1025 
zl
 = 
	`zli¡D–‘e
(zl,&
p
);

1026 
zl
 = 
	`zli¡D–‘e
(zl,&
p
);

1027  
zl
;

1028 
	}
}

1030 *
	$zzlIn£¹At
(*
zl
, *
•Œ
, 
sds
 
–e
, 
scÜe
) {

1031 *
¥Œ
;

1032 
scÜebuf
[128];

1033 
scÜ–’
;

1034 
size_t
 
off£t
;

1036 
scÜ–’
 = 
	`d2¡ršg
(
scÜebuf
,(scÜebuf),
scÜe
);

1037 ià(
•Œ
 =ğ
NULL
) {

1038 
zl
 = 
	`zli¡Push
(zl,(*)
–e
,
	`sd¦’
ÓË),
ZIPLIST_TAIL
);

1039 
zl
 = 
	`zli¡Push
(zl,(*)
scÜebuf
,
scÜ–’
,
ZIPLIST_TAIL
);

1042 
off£t
 = 
•Œ
-
zl
;

1043 
zl
 = 
	`zli¡In£¹
(zl,
•Œ
,(*)
–e
,
	`sd¦’
(ele));

1044 
•Œ
 = 
zl
+
off£t
;

1047 
	`£rv”As£¹
((
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
)è!ğ
NULL
);

1048 
zl
 = 
	`zli¡In£¹
(zl,
¥Œ
,(*)
scÜebuf
,
scÜ–’
);

1050  
zl
;

1051 
	}
}

1055 *
	$zzlIn£¹
(*
zl
, 
sds
 
–e
, 
scÜe
) {

1056 *
•Œ
 = 
	`zli¡Index
(
zl
,0), *
¥Œ
;

1057 
s
;

1059 
•Œ
 !ğ
NULL
) {

1060 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

1061 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

1062 
s
 = 
	`zzlG‘ScÜe
(
¥Œ
);

1064 ià(
s
 > 
scÜe
) {

1068 
zl
 = 
	`zzlIn£¹At
(zl,
•Œ
,
–e
,
scÜe
);

1070 } ià(
s
 =ğ
scÜe
) {

1072 ià(
	`zzlCom·»EËm’ts
(
•Œ
,(*)
–e
,
	`sd¦’
(ele)) > 0) {

1073 
zl
 = 
	`zzlIn£¹At
(zl,
•Œ
,
–e
,
scÜe
);

1079 
•Œ
 = 
	`zli¡Next
(
zl
,
¥Œ
);

1083 ià(
•Œ
 =ğ
NULL
)

1084 
zl
 = 
	`zzlIn£¹At
(zl,
NULL
,
–e
,
scÜe
);

1085  
zl
;

1086 
	}
}

1088 *
	$zzlD–‘eRªgeByScÜe
(*
zl
, 
z¿nge¥ec
 *
¿nge
, *
d–‘ed
) {

1089 *
•Œ
, *
¥Œ
;

1090 
scÜe
;

1091 
num
 = 0;

1093 ià(
d–‘ed
 !ğ
NULL
) *deleted = 0;

1095 
•Œ
 = 
	`zzlFœ¡InRªge
(
zl
,
¿nge
);

1096 ià(
•Œ
 =ğ
NULL
è 
zl
;

1100 (
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
)è!ğ
NULL
) {

1101 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

1102 ià(
	`z¦V®ueL‹Max
(
scÜe
,
¿nge
)) {

1104 
zl
 = 
	`zli¡D–‘e
(zl,&
•Œ
);

1105 
zl
 = 
	`zli¡D–‘e
(zl,&
•Œ
);

1106 
num
++;

1113 ià(
d–‘ed
 !ğ
NULL
è*d–‘ed = 
num
;

1114  
zl
;

1115 
	}
}

1117 *
	$zzlD–‘eRªgeByLex
(*
zl
, 
zËx¿nge¥ec
 *
¿nge
, *
d–‘ed
) {

1118 *
•Œ
, *
¥Œ
;

1119 
num
 = 0;

1121 ià(
d–‘ed
 !ğ
NULL
) *deleted = 0;

1123 
•Œ
 = 
	`zzlFœ¡InLexRªge
(
zl
,
¿nge
);

1124 ià(
•Œ
 =ğ
NULL
è 
zl
;

1128 (
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
)è!ğ
NULL
) {

1129 ià(
	`zzlLexV®ueL‹Max
(
•Œ
,
¿nge
)) {

1131 
zl
 = 
	`zli¡D–‘e
(zl,&
•Œ
);

1132 
zl
 = 
	`zli¡D–‘e
(zl,&
•Œ
);

1133 
num
++;

1140 ià(
d–‘ed
 !ğ
NULL
è*d–‘ed = 
num
;

1141  
zl
;

1142 
	}
}

1146 *
	$zzlD–‘eRªgeByRªk
(*
zl
, 
¡¬t
, 
’d
, *
d–‘ed
) {

1147 
num
 = (
’d
-
¡¬t
)+1;

1148 ià(
d–‘ed
è*d–‘ed = 
num
;

1149 
zl
 = 
	`zli¡D–‘eRªge
(zl,2*(
¡¬t
-1),2*
num
);

1150  
zl
;

1151 
	}
}

1157 
	$z£tL’gth
(cÚ¡ 
robj
 *
zobj
) {

1158 
Ëngth
 = 0;

1159 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1160 
Ëngth
 = 
	`zzlL’gth
(
zobj
->
±r
);

1161 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1162 
Ëngth
 = ((cÚ¡ 
z£t
*)
zobj
->
±r
)->
z¦
->length;

1164 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1166  
Ëngth
;

1167 
	}
}

1169 
	$z£tCÚv”t
(
robj
 *
zobj
, 
’codšg
) {

1170 
z£t
 *
zs
;

1171 
zskli¡Node
 *
node
, *
Ãxt
;

1172 
sds
 
–e
;

1173 
scÜe
;

1175 ià(
zobj
->
’codšg
 ==ƒncoding) ;

1176 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1177 *
zl
 = 
zobj
->
±r
;

1178 *
•Œ
, *
¥Œ
;

1179 *
v¡r
;

1180 
vËn
;

1181 
vlÚg
;

1183 ià(
’codšg
 !ğ
OBJ_ENCODING_SKIPLIST
)

1184 
	`£rv”Pªic
("Unknownargetƒncoding");

1186 
zs
 = 
	`zm®loc
((*zs));

1187 
zs
->
diù
 = 
	`diùC»©e
(&
z£tDiùTy³
,
NULL
);

1188 
zs
->
z¦
 = 
	`z¦C»©e
();

1190 
•Œ
 = 
	`zli¡Index
(
zl
,0);

1191 
	`£rv”As£¹W™hInfo
(
NULL
,
zobj
,
•Œ
 != NULL);

1192 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

1193 
	`£rv”As£¹W™hInfo
(
NULL
,
zobj
,
¥Œ
 != NULL);

1195 
•Œ
 !ğ
NULL
) {

1196 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

1197 
	`£rv”As£¹W™hInfo
(
NULL
,
zobj
,
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

1198 ià(
v¡r
 =ğ
NULL
)

1199 
–e
 = 
	`sdsäomlÚglÚg
(
vlÚg
);

1201 
–e
 = 
	`sd¢ewËn
((*)
v¡r
,
vËn
);

1203 
node
 = 
	`z¦In£¹
(
zs
->
z¦
,
scÜe
,
–e
);

1204 
	`£rv”As£¹
(
	`diùAdd
(
zs
->
diù
,
–e
,&
node
->
scÜe
è=ğ
DICT_OK
);

1205 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

1208 
	`zä“
(
zobj
->
±r
);

1209 
zobj
->
±r
 = 
zs
;

1210 
zobj
->
’codšg
 = 
OBJ_ENCODING_SKIPLIST
;

1211 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1212 *
zl
 = 
	`zli¡New
();

1214 ià(
’codšg
 !ğ
OBJ_ENCODING_ZIPLIST
)

1215 
	`£rv”Pªic
("Unknownargetƒncoding");

1219 
zs
 = 
zobj
->
±r
;

1220 
	`diùR–—£
(
zs
->
diù
);

1221 
node
 = 
zs
->
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

1222 
	`zä“
(
zs
->
z¦
->
h—d”
);

1223 
	`zä“
(
zs
->
z¦
);

1225 
node
) {

1226 
zl
 = 
	`zzlIn£¹At
(zl,
NULL
,
node
->
–e
,node->
scÜe
);

1227 
Ãxt
 = 
node
->
Ëv–
[0].
fÜw¬d
;

1228 
	`z¦F»eNode
(
node
);

1229 
node
 = 
Ãxt
;

1232 
	`zä“
(
zs
);

1233 
zobj
->
±r
 = 
zl
;

1234 
zobj
->
’codšg
 = 
OBJ_ENCODING_ZIPLIST
;

1236 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1238 
	}
}

1243 
	$z£tCÚv”tToZli¡IfN“ded
(
robj
 *
zobj
, 
size_t
 
max––’
) {

1244 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) ;

1245 
z£t
 *z£ˆğ
zobj
->
±r
;

1247 ià(
z£t
->
z¦
->
Ëngth
 <ğ
£rv”
.
z£t_max_zli¡_’Œ›s
 &&

1248 
max––’
 <ğ
£rv”
.
z£t_max_zli¡_v®ue
)

1249 
	`z£tCÚv”t
(
zobj
,
OBJ_ENCODING_ZIPLIST
);

1250 
	}
}

1256 
	$z£tScÜe
(
robj
 *
zobj
, 
sds
 
memb”
, *
scÜe
) {

1257 ià(!
zobj
 || !
memb”
è 
C_ERR
;

1259 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1260 ià(
	`zzlFšd
(
zobj
->
±r
, 
memb”
, 
scÜe
è=ğ
NULL
è 
C_ERR
;

1261 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1262 
z£t
 *
zs
 = 
zobj
->
±r
;

1263 
diùEÁry
 *
de
 = 
	`diùFšd
(
zs
->
diù
, 
memb”
);

1264 ià(
de
 =ğ
NULL
è 
C_ERR
;

1265 *
scÜe
 = *(*)
	`diùG‘V®
(
de
);

1267 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1269  
C_OK
;

1270 
	}
}

1315 
	$z£tAdd
(
robj
 *
zobj
, 
scÜe
, 
sds
 
–e
, *
æags
, *
ÃwscÜe
) {

1317 
šü
 = (*
æags
 & 
ZADD_INCR
) != 0;

1318 
nx
 = (*
æags
 & 
ZADD_NX
) != 0;

1319 
xx
 = (*
æags
 & 
ZADD_XX
) != 0;

1320 *
æags
 = 0;

1321 
curscÜe
;

1324 ià(
	`i¢ª
(
scÜe
)) {

1325 *
æags
 = 
ZADD_NAN
;

1330 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1331 *
•Œ
;

1333 ià((
•Œ
 = 
	`zzlFšd
(
zobj
->
±r
,
–e
,&
curscÜe
)è!ğ
NULL
) {

1335 ià(
nx
) {

1336 *
æags
 |ğ
ZADD_NOP
;

1341 ià(
šü
) {

1342 
scÜe
 +ğ
curscÜe
;

1343 ià(
	`i¢ª
(
scÜe
)) {

1344 *
æags
 |ğ
ZADD_NAN
;

1347 ià(
ÃwscÜe
è*ÃwscÜğ
scÜe
;

1351 ià(
scÜe
 !ğ
curscÜe
) {

1352 
zobj
->
±r
 = 
	`zzlD–‘e
(zobj->±r,
•Œ
);

1353 
zobj
->
±r
 = 
	`zzlIn£¹
(zobj->±r,
–e
,
scÜe
);

1354 *
æags
 |ğ
ZADD_UPDATED
;

1357 } ià(!
xx
) {

1360 
zobj
->
±r
 = 
	`zzlIn£¹
(zobj->±r,
–e
,
scÜe
);

1361 ià(
	`zzlL’gth
(
zobj
->
±r
è> 
£rv”
.
z£t_max_zli¡_’Œ›s
 ||

1362 
	`sd¦’
(
–e
è> 
£rv”
.
z£t_max_zli¡_v®ue
)

1363 
	`z£tCÚv”t
(
zobj
,
OBJ_ENCODING_SKIPLIST
);

1364 ià(
ÃwscÜe
è*ÃwscÜğ
scÜe
;

1365 *
æags
 |ğ
ZADD_ADDED
;

1368 *
æags
 |ğ
ZADD_NOP
;

1371 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1372 
z£t
 *
zs
 = 
zobj
->
±r
;

1373 
zskli¡Node
 *
znode
;

1374 
diùEÁry
 *
de
;

1376 
de
 = 
	`diùFšd
(
zs
->
diù
,
–e
);

1377 ià(
de
 !ğ
NULL
) {

1379 ià(
nx
) {

1380 *
æags
 |ğ
ZADD_NOP
;

1383 
curscÜe
 = *(*)
	`diùG‘V®
(
de
);

1386 ià(
šü
) {

1387 
scÜe
 +ğ
curscÜe
;

1388 ià(
	`i¢ª
(
scÜe
)) {

1389 *
æags
 |ğ
ZADD_NAN
;

1392 ià(
ÃwscÜe
è*ÃwscÜğ
scÜe
;

1396 ià(
scÜe
 !ğ
curscÜe
) {

1397 
znode
 = 
	`z¦Upd©eScÜe
(
zs
->
z¦
,
curscÜe
,
–e
,
scÜe
);

1401 
	`diùG‘V®
(
de
èğ&
znode
->
scÜe
;

1402 *
æags
 |ğ
ZADD_UPDATED
;

1405 } ià(!
xx
) {

1406 
–e
 = 
	`sdsdup
(ele);

1407 
znode
 = 
	`z¦In£¹
(
zs
->
z¦
,
scÜe
,
–e
);

1408 
	`£rv”As£¹
(
	`diùAdd
(
zs
->
diù
,
–e
,&
znode
->
scÜe
è=ğ
DICT_OK
);

1409 *
æags
 |ğ
ZADD_ADDED
;

1410 ià(
ÃwscÜe
è*ÃwscÜğ
scÜe
;

1413 *
æags
 |ğ
ZADD_NOP
;

1417 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1420 
	}
}

1424 
	$z£tD–
(
robj
 *
zobj
, 
sds
 
–e
) {

1425 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1426 *
•Œ
;

1428 ià((
•Œ
 = 
	`zzlFšd
(
zobj
->
±r
,
–e
,
NULL
)) != NULL) {

1429 
zobj
->
±r
 = 
	`zzlD–‘e
(zobj->±r,
•Œ
);

1432 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1433 
z£t
 *
zs
 = 
zobj
->
±r
;

1434 
diùEÁry
 *
de
;

1435 
scÜe
;

1437 
de
 = 
	`diùUÆšk
(
zs
->
diù
,
–e
);

1438 ià(
de
 !ğ
NULL
) {

1440 
scÜe
 = *(*)
	`diùG‘V®
(
de
);

1447 
	`diùF»eUÆškedEÁry
(
zs
->
diù
,
de
);

1450 
»tv®
 = 
	`z¦D–‘e
(
zs
->
z¦
,
scÜe
,
–e
,
NULL
);

1451 
	`£rv”As£¹
(
»tv®
);

1453 ià(
	`htN“dsResize
(
zs
->
diù
)è
	`diùResize
(zs->dict);

1457 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1460 
	}
}

1473 
	$z£tRªk
(
robj
 *
zobj
, 
sds
 
–e
, 
»v”£
) {

1474 
Î’
;

1475 
¿nk
;

1477 
Î’
 = 
	`z£tL’gth
(
zobj
);

1479 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1480 *
zl
 = 
zobj
->
±r
;

1481 *
•Œ
, *
¥Œ
;

1483 
•Œ
 = 
	`zli¡Index
(
zl
,0);

1484 
	`£rv”As£¹
(
•Œ
 !ğ
NULL
);

1485 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

1486 
	`£rv”As£¹
(
¥Œ
 !ğ
NULL
);

1488 
¿nk
 = 1;

1489 
•Œ
 !ğ
NULL
) {

1490 ià(
	`zli¡Com·»
(
•Œ
,(*)
–e
,
	`sd¦’
(ele)))

1492 
¿nk
++;

1493 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

1496 ià(
•Œ
 !ğ
NULL
) {

1497 ià(
»v”£
)

1498  
Î’
-
¿nk
;

1500  
¿nk
-1;

1504 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1505 
z£t
 *
zs
 = 
zobj
->
±r
;

1506 
zskli¡
 *
z¦
 = 
zs
->zsl;

1507 
diùEÁry
 *
de
;

1508 
scÜe
;

1510 
de
 = 
	`diùFšd
(
zs
->
diù
,
–e
);

1511 ià(
de
 !ğ
NULL
) {

1512 
scÜe
 = *(*)
	`diùG‘V®
(
de
);

1513 
¿nk
 = 
	`z¦G‘Rªk
(
z¦
,
scÜe
,
–e
);

1515 
	`£rv”As£¹
(
¿nk
 != 0);

1516 ià(
»v”£
)

1517  
Î’
-
¿nk
;

1519  
¿nk
-1;

1524 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1526 
	}
}

1533 
	$zaddG’”icCommªd
(
ş›Á
 *
c
, 
æags
) {

1534 *
ÇÃ¼
 = "resulting score is‚ot‡‚umber (NaN)";

1535 
robj
 *
key
 = 
c
->
¬gv
[1];

1536 
robj
 *
zobj
;

1537 
sds
 
–e
;

1538 
scÜe
 = 0, *
scÜes
 = 
NULL
;

1539 
j
, 
–em’ts
;

1540 
scÜeidx
 = 0;

1544 
added
 = 0;

1545 
upd©ed
 = 0;

1546 
´oûs£d
 = 0;

1551 
scÜeidx
 = 2;

1552 
scÜeidx
 < 
c
->
¬gc
) {

1553 *
İt
 = 
c
->
¬gv
[
scÜeidx
]->
±r
;

1554 ià(!
	`¡rÿ£cmp
(
İt
,"nx")è
æags
 |ğ
ZADD_NX
;

1555 ià(!
	`¡rÿ£cmp
(
İt
,"xx")è
æags
 |ğ
ZADD_XX
;

1556 ià(!
	`¡rÿ£cmp
(
İt
,"ch")è
æags
 |ğ
ZADD_CH
;

1557 ià(!
	`¡rÿ£cmp
(
İt
,"šü")è
æags
 |ğ
ZADD_INCR
;

1559 
scÜeidx
++;

1563 
šü
 = (
æags
 & 
ZADD_INCR
) != 0;

1564 
nx
 = (
æags
 & 
ZADD_NX
) != 0;

1565 
xx
 = (
æags
 & 
ZADD_XX
) != 0;

1566 
ch
 = (
æags
 & 
ZADD_CH
) != 0;

1570 
–em’ts
 = 
c
->
¬gc
-
scÜeidx
;

1571 ià(
–em’ts
 % 2 || !elements) {

1572 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

1575 
–em’ts
 /= 2;

1578 ià(
nx
 && 
xx
) {

1579 
	`addR•lyE¼Ü
(
c
,

1584 ià(
šü
 && 
–em’ts
 > 1) {

1585 
	`addR•lyE¼Ü
(
c
,

1593 
scÜes
 = 
	`zm®loc
(()*
–em’ts
);

1594 
j
 = 0; j < 
–em’ts
; j++) {

1595 ià(
	`g‘DoubËFromObjeùOrR•ly
(
c
,c->
¬gv
[
scÜeidx
+
j
*2],&
scÜes
[j],
NULL
)

1596 !ğ
C_OK
è
ş—nup
;

1600 
zobj
 = 
	`lookupKeyWr™e
(
c
->
db
,
key
);

1601 ià(
zobj
 =ğ
NULL
) {

1602 ià(
xx
è
»¶y_to_ş›Á
;

1603 ià(
£rv”
.
z£t_max_zli¡_’Œ›s
 == 0 ||

1604 
£rv”
.
z£t_max_zli¡_v®ue
 < 
	`sd¦’
(
c
->
¬gv
[
scÜeidx
+1]->
±r
))

1606 
zobj
 = 
	`ü—‹Z£tObjeù
();

1608 
zobj
 = 
	`ü—‹Z£tZli¡Objeù
();

1610 
	`dbAdd
(
c
->
db
,
key
,
zobj
);

1612 ià(
zobj
->
ty³
 !ğ
OBJ_ZSET
) {

1613 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

1614 
ş—nup
;

1618 
j
 = 0; j < 
–em’ts
; j++) {

1619 
ÃwscÜe
;

1620 
scÜe
 = 
scÜes
[
j
];

1621 
»tæags
 = 
æags
;

1623 
–e
 = 
c
->
¬gv
[
scÜeidx
+1+
j
*2]->
±r
;

1624 
»tv®
 = 
	`z£tAdd
(
zobj
, 
scÜe
, 
–e
, &
»tæags
, &
ÃwscÜe
);

1625 ià(
»tv®
 == 0) {

1626 
	`addR•lyE¼Ü
(
c
,
ÇÃ¼
);

1627 
ş—nup
;

1629 ià(
»tæags
 & 
ZADD_ADDED
è
added
++;

1630 ià(
»tæags
 & 
ZADD_UPDATED
è
upd©ed
++;

1631 ià(!(
»tæags
 & 
ZADD_NOP
)è
´oûs£d
++;

1632 
scÜe
 = 
ÃwscÜe
;

1634 
£rv”
.
dœty
 +ğ(
added
+
upd©ed
);

1636 
»¶y_to_ş›Á
:

1637 ià(
šü
) {

1638 ià(
´oûs£d
)

1639 
	`addR•lyDoubË
(
c
,
scÜe
);

1641 
	`addR•lyNuÎ
(
c
);

1643 
	`addR•lyLÚgLÚg
(
c
,
ch
 ? 
added
+
upd©ed
 :‡dded);

1646 
ş—nup
:

1647 
	`zä“
(
scÜes
);

1648 ià(
added
 || 
upd©ed
) {

1649 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

1650 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,

1651 
šü
 ? "zšü" : "zadd", 
key
, 
c
->
db
->
id
);

1653 
	}
}

1655 
	$zaddCommªd
(
ş›Á
 *
c
) {

1656 
	`zaddG’”icCommªd
(
c
,
ZADD_NONE
);

1657 
	}
}

1659 
	$zšübyCommªd
(
ş›Á
 *
c
) {

1660 
	`zaddG’”icCommªd
(
c
,
ZADD_INCR
);

1661 
	}
}

1663 
	$z»mCommªd
(
ş›Á
 *
c
) {

1664 
robj
 *
key
 = 
c
->
¬gv
[1];

1665 
robj
 *
zobj
;

1666 
d–‘ed
 = 0, 
key»moved
 = 0, 
j
;

1668 ià((
zobj
 = 
	`lookupKeyWr™eOrR•ly
(
c
,
key
,
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

1669 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

1671 
j
 = 2; j < 
c
->
¬gc
; j++) {

1672 ià(
	`z£tD–
(
zobj
,
c
->
¬gv
[
j
]->
±r
)è
d–‘ed
++;

1673 ià(
	`z£tL’gth
(
zobj
) == 0) {

1674 
	`dbD–‘e
(
c
->
db
,
key
);

1675 
key»moved
 = 1;

1680 ià(
d–‘ed
) {

1681 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,"z»m",
key
,
c
->
db
->
id
);

1682 ià(
key»moved
)

1683 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
key
,
c
->
db
->
id
);

1684 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

1685 
£rv”
.
dœty
 +ğ
d–‘ed
;

1687 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

1688 
	}
}

1691 
	#ZRANGE_RANK
 0

	)

1692 
	#ZRANGE_SCORE
 1

	)

1693 
	#ZRANGE_LEX
 2

	)

1694 
	$z»m¿ngeG’”icCommªd
(
ş›Á
 *
c
, 
¿ng‘y³
) {

1695 
robj
 *
key
 = 
c
->
¬gv
[1];

1696 
robj
 *
zobj
;

1697 
key»moved
 = 0;

1698 
d–‘ed
 = 0;

1699 
z¿nge¥ec
 
¿nge
;

1700 
zËx¿nge¥ec
 
Ëx¿nge
;

1701 
¡¬t
, 
’d
, 
Î’
;

1704 ià(
¿ng‘y³
 =ğ
ZRANGE_RANK
) {

1705 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[2],&
¡¬t
,
NULL
è!ğ
C_OK
) ||

1706 (
	`g‘LÚgFromObjeùOrR•ly
(
c
,c->
¬gv
[3],&
’d
,
NULL
è!ğ
C_OK
))

1708 } ià(
¿ng‘y³
 =ğ
ZRANGE_SCORE
) {

1709 ià(
	`z¦P¬£Rªge
(
c
->
¬gv
[2],c->¬gv[3],&
¿nge
è!ğ
C_OK
) {

1710 
	`addR•lyE¼Ü
(
c
,"min or max is‚ot‡ float");

1713 } ià(
¿ng‘y³
 =ğ
ZRANGE_LEX
) {

1714 ià(
	`z¦P¬£LexRªge
(
c
->
¬gv
[2],c->¬gv[3],&
Ëx¿nge
è!ğ
C_OK
) {

1715 
	`addR•lyE¼Ü
(
c
,"min or max‚ot valid string„ange item");

1721 ià((
zobj
 = 
	`lookupKeyWr™eOrR•ly
(
c
,
key
,
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

1722 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)è
ş—nup
;

1724 ià(
¿ng‘y³
 =ğ
ZRANGE_RANK
) {

1726 
Î’
 = 
	`z£tL’gth
(
zobj
);

1727 ià(
¡¬t
 < 0è¡¬ˆğ
Î’
+start;

1728 ià(
’d
 < 0è’d = 
Î’
+end;

1729 ià(
¡¬t
 < 0) start = 0;

1733 ià(
¡¬t
 > 
’d
 || s¹ >ğ
Î’
) {

1734 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

1735 
ş—nup
;

1737 ià(
’d
 >ğ
Î’
)ƒnd =†len-1;

1741 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1742 
¿ng‘y³
) {

1743 
ZRANGE_RANK
:

1744 
zobj
->
±r
 = 
	`zzlD–‘eRªgeByRªk
(zobj->±r,
¡¬t
+1,
’d
+1,&
d–‘ed
);

1746 
ZRANGE_SCORE
:

1747 
zobj
->
±r
 = 
	`zzlD–‘eRªgeByScÜe
(zobj->±r,&
¿nge
,&
d–‘ed
);

1749 
ZRANGE_LEX
:

1750 
zobj
->
±r
 = 
	`zzlD–‘eRªgeByLex
(zobj->±r,&
Ëx¿nge
,&
d–‘ed
);

1753 ià(
	`zzlL’gth
(
zobj
->
±r
) == 0) {

1754 
	`dbD–‘e
(
c
->
db
,
key
);

1755 
key»moved
 = 1;

1757 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1758 
z£t
 *
zs
 = 
zobj
->
±r
;

1759 
¿ng‘y³
) {

1760 
ZRANGE_RANK
:

1761 
d–‘ed
 = 
	`z¦D–‘eRªgeByRªk
(
zs
->
z¦
,
¡¬t
+1,
’d
+1,zs->
diù
);

1763 
ZRANGE_SCORE
:

1764 
d–‘ed
 = 
	`z¦D–‘eRªgeByScÜe
(
zs
->
z¦
,&
¿nge
,zs->
diù
);

1766 
ZRANGE_LEX
:

1767 
d–‘ed
 = 
	`z¦D–‘eRªgeByLex
(
zs
->
z¦
,&
Ëx¿nge
,zs->
diù
);

1770 ià(
	`htN“dsResize
(
zs
->
diù
)è
	`diùResize
(zs->dict);

1771 ià(
	`diùSize
(
zs
->
diù
) == 0) {

1772 
	`dbD–‘e
(
c
->
db
,
key
);

1773 
key»moved
 = 1;

1776 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1780 ià(
d–‘ed
) {

1781 *
ev’t
[3] = {"zremrangebyrank","zremrangebyscore","zremrangebylex"};

1782 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

1783 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,
ev’t
[
¿ng‘y³
],
key
,
c
->
db
->
id
);

1784 ià(
key»moved
)

1785 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
key
,
c
->
db
->
id
);

1787 
£rv”
.
dœty
 +ğ
d–‘ed
;

1788 
	`addR•lyLÚgLÚg
(
c
,
d–‘ed
);

1790 
ş—nup
:

1791 ià(
¿ng‘y³
 =ğ
ZRANGE_LEX
è
	`z¦F»eLexRªge
(&
Ëx¿nge
);

1792 
	}
}

1794 
	$z»m¿ngeby¿nkCommªd
(
ş›Á
 *
c
) {

1795 
	`z»m¿ngeG’”icCommªd
(
c
,
ZRANGE_RANK
);

1796 
	}
}

1798 
	$z»m¿ngebyscÜeCommªd
(
ş›Á
 *
c
) {

1799 
	`z»m¿ngeG’”icCommªd
(
c
,
ZRANGE_SCORE
);

1800 
	}
}

1802 
	$z»m¿ngebyËxCommªd
(
ş›Á
 *
c
) {

1803 
	`z»m¿ngeG’”icCommªd
(
c
,
ZRANGE_LEX
);

1804 
	}
}

1807 
robj
 *
	msubjeù
;

1808 
	mty³
;

1809 
	m’codšg
;

1810 
	mweight
;

1814 
	u_™”£t
 {

1816 
št£t
 *
	mis
;

1817 
	mii
;

1818 } 
	mis
;

1820 
diù
 *
	mdiù
;

1821 
diùI‹¿tÜ
 *
	mdi
;

1822 
diùEÁry
 *
	mde
;

1823 } 
	mht
;

1824 } 
	m£t
;

1827 
	u_™”z£t
 {

1829 *
	mzl
;

1830 *
	m•Œ
, *
	m¥Œ
;

1831 } 
	mzl
;

1833 
z£t
 *
	mzs
;

1834 
zskli¡Node
 *
	mnode
;

1835 } 
	m¦
;

1836 } 
	mz£t
;

1837 } 
	m™”
;

1838 } 
	tz£tİ¤c
;

1847 
	#OPVAL_DIRTY_SDS
 1

	)

1848 
	#OPVAL_DIRTY_LL
 2

	)

1849 
	#OPVAL_VALID_LL
 4

	)

1853 
	mæags
;

1854 
	m_buf
[32];

1855 
sds
 
	m–e
;

1856 *
	me¡r
;

1857 
	m–’
;

1858 
	m–l
;

1859 
	mscÜe
;

1860 } 
	tz£tİv®
;

1862 
_™”£t
 
	t™”£t
;

1863 
_™”z£t
 
	t™”z£t
;

1865 
	$zuiIn™I‹¿tÜ
(
z£tİ¤c
 *
İ
) {

1866 ià(
İ
->
subjeù
 =ğ
NULL
)

1869 ià(
İ
->
ty³
 =ğ
OBJ_SET
) {

1870 
™”£t
 *
™
 = &
İ
->
™”
.
£t
;

1871 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

1872 
™
->
is
.i ğ
İ
->
subjeù
->
±r
;

1873 
™
->
is
.
ii
 = 0;

1874 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1875 
™
->
ht
.
diù
 = 
İ
->
subjeù
->
±r
;

1876 
™
->
ht
.
di
 = 
	`diùG‘I‹¿tÜ
(
İ
->
subjeù
->
±r
);

1877 
™
->
ht
.
de
 = 
	`diùNext
(™->ht.
di
);

1879 
	`£rv”Pªic
("Unknown setƒncoding");

1881 } ià(
İ
->
ty³
 =ğ
OBJ_ZSET
) {

1882 
™”z£t
 *
™
 = &
İ
->
™”
.
z£t
;

1883 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1884 
™
->
zl
.zÈğ
İ
->
subjeù
->
±r
;

1885 
™
->
zl
.
•Œ
 = 
	`zli¡Index
(it->zl.zl,0);

1886 ià(
™
->
zl
.
•Œ
 !ğ
NULL
) {

1887 
™
->
zl
.
¥Œ
 = 
	`zli¡Next
(™->zl.zl,™->zl.
•Œ
);

1888 
	`£rv”As£¹
(
™
->
zl
.
¥Œ
 !ğ
NULL
);

1890 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1891 
™
->
¦
.
zs
 = 
İ
->
subjeù
->
±r
;

1892 
™
->
¦
.
node
 = it->¦.
zs
->
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

1894 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1897 
	`£rv”Pªic
("Unsupportedype");

1899 
	}
}

1901 
	$zuiCË¬I‹¿tÜ
(
z£tİ¤c
 *
İ
) {

1902 ià(
İ
->
subjeù
 =ğ
NULL
)

1905 ià(
İ
->
ty³
 =ğ
OBJ_SET
) {

1906 
™”£t
 *
™
 = &
İ
->
™”
.
£t
;

1907 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

1908 
	`UNUSED
(
™
);

1909 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1910 
	`diùR–—£I‹¿tÜ
(
™
->
ht
.
di
);

1912 
	`£rv”Pªic
("Unknown setƒncoding");

1914 } ià(
İ
->
ty³
 =ğ
OBJ_ZSET
) {

1915 
™”z£t
 *
™
 = &
İ
->
™”
.
z£t
;

1916 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1917 
	`UNUSED
(
™
);

1918 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1919 
	`UNUSED
(
™
);

1921 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1924 
	`£rv”Pªic
("Unsupportedype");

1926 
	}
}

1928 
	$zuiL’gth
(
z£tİ¤c
 *
İ
) {

1929 ià(
İ
->
subjeù
 =ğ
NULL
)

1932 ià(
İ
->
ty³
 =ğ
OBJ_SET
) {

1933 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

1934  
	`št£tL’
(
İ
->
subjeù
->
±r
);

1935 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1936 
diù
 *
ht
 = 
İ
->
subjeù
->
±r
;

1937  
	`diùSize
(
ht
);

1939 
	`£rv”Pªic
("Unknown setƒncoding");

1941 } ià(
İ
->
ty³
 =ğ
OBJ_ZSET
) {

1942 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1943  
	`zzlL’gth
(
İ
->
subjeù
->
±r
);

1944 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

1945 
z£t
 *
zs
 = 
İ
->
subjeù
->
±r
;

1946  
zs
->
z¦
->
Ëngth
;

1948 
	`£rv”Pªic
("Unknown sorted setƒncoding");

1951 
	`£rv”Pªic
("Unsupportedype");

1953 
	}
}

1958 
	$zuiNext
(
z£tİ¤c
 *
İ
, 
z£tİv®
 *
v®
) {

1959 ià(
İ
->
subjeù
 =ğ
NULL
)

1962 ià(
v®
->
æags
 & 
OPVAL_DIRTY_SDS
)

1963 
	`sdsä“
(
v®
->
–e
);

1965 
	`mem£t
(
v®
,0,(
z£tİv®
));

1967 ià(
İ
->
ty³
 =ğ
OBJ_SET
) {

1968 
™”£t
 *
™
 = &
İ
->
™”
.
£t
;

1969 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

1970 
št64_t
 
–l
;

1972 ià(!
	`št£tG‘
(
™
->
is
.is,™->is.
ii
,&
–l
))

1974 
v®
->
–l
 =ƒll;

1975 
v®
->
scÜe
 = 1.0;

1978 
™
->
is
.
ii
++;

1979 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

1980 ià(
™
->
ht
.
de
 =ğ
NULL
)

1982 
v®
->
–e
 = 
	`diùG‘Key
(
™
->
ht
.
de
);

1983 
v®
->
scÜe
 = 1.0;

1986 
™
->
ht
.
de
 = 
	`diùNext
(™->ht.
di
);

1988 
	`£rv”Pªic
("Unknown setƒncoding");

1990 } ià(
İ
->
ty³
 =ğ
OBJ_ZSET
) {

1991 
™”z£t
 *
™
 = &
İ
->
™”
.
z£t
;

1992 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

1994 ià(
™
->
zl
.
•Œ
 =ğ
NULL
 || it->zl.
¥Œ
 == NULL)

1996 
	`£rv”As£¹
(
	`zli¡G‘
(
™
->
zl
.
•Œ
,&
v®
->
e¡r
,&v®->
–’
,&v®->
–l
));

1997 
v®
->
scÜe
 = 
	`zzlG‘ScÜe
(
™
->
zl
.
¥Œ
);

2000 
	`zzlNext
(
™
->
zl
.zl,&™->zl.
•Œ
,&™->zl.
¥Œ
);

2001 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2002 ià(
™
->
¦
.
node
 =ğ
NULL
)

2004 
v®
->
–e
 = 
™
->
¦
.
node
->ele;

2005 
v®
->
scÜe
 = 
™
->
¦
.
node
->score;

2008 
™
->
¦
.
node
 = it->¦.node->
Ëv–
[0].
fÜw¬d
;

2010 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2013 
	`£rv”Pªic
("Unsupportedype");

2016 
	}
}

2018 
	$zuiLÚgLÚgFromV®ue
(
z£tİv®
 *
v®
) {

2019 ià(!(
v®
->
æags
 & 
OPVAL_DIRTY_LL
)) {

2020 
v®
->
æags
 |ğ
OPVAL_DIRTY_LL
;

2022 ià(
v®
->
–e
 !ğ
NULL
) {

2023 ià(
	`¡ršg2Î
(
v®
->
–e
,
	`sd¦’
(v®->–e),&v®->
–l
))

2024 
v®
->
æags
 |ğ
OPVAL_VALID_LL
;

2025 } ià(
v®
->
e¡r
 !ğ
NULL
) {

2026 ià(
	`¡ršg2Î
((*)
v®
->
e¡r
,v®->
–’
,&v®->
–l
))

2027 
v®
->
æags
 |ğ
OPVAL_VALID_LL
;

2030 
v®
->
æags
 |ğ
OPVAL_VALID_LL
;

2033  
v®
->
æags
 & 
OPVAL_VALID_LL
;

2034 
	}
}

2036 
sds
 
	$zuiSdsFromV®ue
(
z£tİv®
 *
v®
) {

2037 ià(
v®
->
–e
 =ğ
NULL
) {

2038 ià(
v®
->
e¡r
 !ğ
NULL
) {

2039 
v®
->
–e
 = 
	`sd¢ewËn
((*)v®->
e¡r
,v®->
–’
);

2041 
v®
->
–e
 = 
	`sdsäomlÚglÚg
(v®->
–l
);

2043 
v®
->
æags
 |ğ
OPVAL_DIRTY_SDS
;

2045  
v®
->
–e
;

2046 
	}
}

2050 
sds
 
	$zuiNewSdsFromV®ue
(
z£tİv®
 *
v®
) {

2051 ià(
v®
->
æags
 & 
OPVAL_DIRTY_SDS
) {

2053 
sds
 
–e
 = 
v®
->ele;

2054 
v®
->
æags
 &ğ~
OPVAL_DIRTY_SDS
;

2055 
v®
->
–e
 = 
NULL
;

2056  
–e
;

2057 } ià(
v®
->
–e
) {

2058  
	`sdsdup
(
v®
->
–e
);

2059 } ià(
v®
->
e¡r
) {

2060  
	`sd¢ewËn
((*)
v®
->
e¡r
,v®->
–’
);

2062  
	`sdsäomlÚglÚg
(
v®
->
–l
);

2064 
	}
}

2066 
	$zuiBufãrFromV®ue
(
z£tİv®
 *
v®
) {

2067 ià(
v®
->
e¡r
 =ğ
NULL
) {

2068 ià(
v®
->
–e
 !ğ
NULL
) {

2069 
v®
->
–’
 = 
	`sd¦’
(v®->
–e
);

2070 
v®
->
e¡r
 = (*)v®->
–e
;

2072 
v®
->
–’
 = 
	`Î2¡ršg
((*)v®->
_buf
,(v®->_buf),v®->
–l
);

2073 
v®
->
e¡r
 = v®->
_buf
;

2077 
	}
}

2081 
	$zuiFšd
(
z£tİ¤c
 *
İ
, 
z£tİv®
 *
v®
, *
scÜe
) {

2082 ià(
İ
->
subjeù
 =ğ
NULL
)

2085 ià(
İ
->
ty³
 =ğ
OBJ_SET
) {

2086 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_INTSET
) {

2087 ià(
	`zuiLÚgLÚgFromV®ue
(
v®
) &&

2088 
	`št£tFšd
(
İ
->
subjeù
->
±r
,
v®
->
–l
))

2090 *
scÜe
 = 1.0;

2095 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_HT
) {

2096 
diù
 *
ht
 = 
İ
->
subjeù
->
±r
;

2097 
	`zuiSdsFromV®ue
(
v®
);

2098 ià(
	`diùFšd
(
ht
,
v®
->
–e
è!ğ
NULL
) {

2099 *
scÜe
 = 1.0;

2105 
	`£rv”Pªic
("Unknown setƒncoding");

2107 } ià(
İ
->
ty³
 =ğ
OBJ_ZSET
) {

2108 
	`zuiSdsFromV®ue
(
v®
);

2110 ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2111 ià(
	`zzlFšd
(
İ
->
subjeù
->
±r
,
v®
->
–e
,
scÜe
è!ğ
NULL
) {

2117 } ià(
İ
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2118 
z£t
 *
zs
 = 
İ
->
subjeù
->
±r
;

2119 
diùEÁry
 *
de
;

2120 ià((
de
 = 
	`diùFšd
(
zs
->
diù
,
v®
->
–e
)è!ğ
NULL
) {

2121 *
scÜe
 = *(*)
	`diùG‘V®
(
de
);

2127 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2130 
	`£rv”Pªic
("Unsupportedype");

2132 
	}
}

2134 
	$zuiCom·»ByC¬dš®™y
(cÚ¡ *
s1
, cÚ¡ *
s2
) {

2135 
fœ¡
 = 
	`zuiL’gth
((
z£tİ¤c
*)
s1
);

2136 
£cÚd
 = 
	`zuiL’gth
((
z£tİ¤c
*)
s2
);

2137 ià(
fœ¡
 > 
£cÚd
)  1;

2138 ià(
fœ¡
 < 
£cÚd
)  -1;

2140 
	}
}

2142 
	#REDIS_AGGR_SUM
 1

	)

2143 
	#REDIS_AGGR_MIN
 2

	)

2144 
	#REDIS_AGGR_MAX
 3

	)

2145 
	#zuniÚIÁ”DiùV®ue
(
_e
è(
	`diùG‘V®
(_eè=ğ
NULL
 ? 1.0 : *(*)diùG‘V®(_e))

	)

2147 
šlše
 
	$zuniÚIÁ”Agg»g©e
(*
rg‘
, 
v®
, 
agg»g©e
) {

2148 ià(
agg»g©e
 =ğ
REDIS_AGGR_SUM
) {

2149 *
rg‘
 = *rg‘ + 
v®
;

2153 ià(
	`i¢ª
(*
rg‘
)) *target = 0.0;

2154 } ià(
agg»g©e
 =ğ
REDIS_AGGR_MIN
) {

2155 *
rg‘
 = 
v®
 < *target ? val : *target;

2156 } ià(
agg»g©e
 =ğ
REDIS_AGGR_MAX
) {

2157 *
rg‘
 = 
v®
 > *target ? val : *target;

2160 
	`£rv”Pªic
("Unknown ZUNION/INTER‡ggregateype");

2162 
	}
}

2164 
ušt64_t
 
diùSdsHash
(cÚ¡ *
key
);

2165 
diùSdsKeyCom·»
(*
´ivd©a
, cÚ¡ *
key1
, cÚ¡ *
key2
);

2167 
diùTy³
 
	g£tAccumuÏtÜDiùTy³
 = {

2168 
diùSdsHash
,

2169 
NULL
,

2170 
NULL
,

2171 
diùSdsKeyCom·»
,

2172 
NULL
,

2173 
NULL


2176 
	$zuniÚIÁ”G’”icCommªd
(
ş›Á
 *
c
, 
robj
 *
d¡key
, 
İ
) {

2177 
i
, 
j
;

2178 
£Šum
;

2179 
agg»g©e
 = 
REDIS_AGGR_SUM
;

2180 
z£tİ¤c
 *
¤c
;

2181 
z£tİv®
 
zv®
;

2182 
sds
 
tmp
;

2183 
size_t
 
max––’
 = 0;

2184 
robj
 *
d¡obj
;

2185 
z£t
 *
d¡z£t
;

2186 
zskli¡Node
 *
znode
;

2187 
touched
 = 0;

2190 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
£Šum
, 
NULL
è!ğ
C_OK
))

2193 ià(
£Šum
 < 1) {

2194 
	`addR•lyE¼Ü
(
c
,

2200 ià(
£Šum
 > 
c
->
¬gc
-3) {

2201 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2206 
¤c
 = 
	`zÿÎoc
((
z£tİ¤c
è* 
£Šum
);

2207 
i
 = 0, 
j
 = 3; i < 
£Šum
; i++, j++) {

2208 
robj
 *
obj
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[
j
]);

2209 ià(
obj
 !ğ
NULL
) {

2210 ià(
obj
->
ty³
 !ğ
OBJ_ZSET
 && obj->ty³ !ğ
OBJ_SET
) {

2211 
	`zä“
(
¤c
);

2212 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

2216 
¤c
[
i
].
subjeù
 = 
obj
;

2217 
¤c
[
i
].
ty³
 = 
obj
->type;

2218 
¤c
[
i
].
’codšg
 = 
obj
->encoding;

2220 
¤c
[
i
].
subjeù
 = 
NULL
;

2224 
¤c
[
i
].
weight
 = 1.0;

2228 ià(
j
 < 
c
->
¬gc
) {

2229 
»maššg
 = 
c
->
¬gc
 - 
j
;

2231 
»maššg
) {

2232 ià(
»maššg
 >ğ(
£Šum
 + 1) &&

2233 !
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"weights"))

2235 
j
++; 
»maššg
--;

2236 
i
 = 0; i < 
£Šum
; i++, 
j
++, 
»maššg
--) {

2237 ià(
	`g‘DoubËFromObjeùOrR•ly
(
c
,c->
¬gv
[
j
],&
¤c
[
i
].
weight
,

2238 "weighˆv®ui nÙ‡ flßt"è!ğ
C_OK
)

2240 
	`zä“
(
¤c
);

2244 } ià(
»maššg
 >= 2 &&

2245 !
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"aggregate"))

2247 
j
++; 
»maššg
--;

2248 ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"sum")) {

2249 
agg»g©e
 = 
REDIS_AGGR_SUM
;

2250 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"min")) {

2251 
agg»g©e
 = 
REDIS_AGGR_MIN
;

2252 } ià(!
	`¡rÿ£cmp
(
c
->
¬gv
[
j
]->
±r
,"max")) {

2253 
agg»g©e
 = 
REDIS_AGGR_MAX
;

2255 
	`zä“
(
¤c
);

2256 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2259 
j
++; 
»maššg
--;

2261 
	`zä“
(
¤c
);

2262 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2270 
	`qsÜt
(
¤c
,
£Šum
,(
z£tİ¤c
),
zuiCom·»ByC¬dš®™y
);

2272 
d¡obj
 = 
	`ü—‹Z£tObjeù
();

2273 
d¡z£t
 = 
d¡obj
->
±r
;

2274 
	`mem£t
(&
zv®
, 0, (zval));

2276 ià(
İ
 =ğ
SET_OP_INTER
) {

2278 ià(
	`zuiL’gth
(&
¤c
[0]) > 0) {

2281 
	`zuiIn™I‹¿tÜ
(&
¤c
[0]);

2282 
	`zuiNext
(&
¤c
[0],&
zv®
)) {

2283 
scÜe
, 
v®ue
;

2285 
scÜe
 = 
¤c
[0].
weight
 * 
zv®
.score;

2286 ià(
	`i¢ª
(
scÜe
)) score = 0;

2288 
j
 = 1; j < 
£Šum
; j++) {

2291 ià(
¤c
[
j
].
subjeù
 == src[0].subject) {

2292 
v®ue
 = 
zv®
.
scÜe
*
¤c
[
j
].
weight
;

2293 
	`zuniÚIÁ”Agg»g©e
(&
scÜe
,
v®ue
,
agg»g©e
);

2294 } ià(
	`zuiFšd
(&
¤c
[
j
],&
zv®
,&
v®ue
)) {

2295 
v®ue
 *ğ
¤c
[
j
].
weight
;

2296 
	`zuniÚIÁ”Agg»g©e
(&
scÜe
,
v®ue
,
agg»g©e
);

2303 ià(
j
 =ğ
£Šum
) {

2304 
tmp
 = 
	`zuiNewSdsFromV®ue
(&
zv®
);

2305 
znode
 = 
	`z¦In£¹
(
d¡z£t
->
z¦
,
scÜe
,
tmp
);

2306 
	`diùAdd
(
d¡z£t
->
diù
,
tmp
,&
znode
->
scÜe
);

2307 ià(
	`sd¦’
(
tmp
è> 
max––’
) maxelelen = sdslen(tmp);

2310 
	`zuiCË¬I‹¿tÜ
(&
¤c
[0]);

2312 } ià(
İ
 =ğ
SET_OP_UNION
) {

2313 
diù
 *
accumuÏtÜ
 = 
	`diùC»©e
(&
£tAccumuÏtÜDiùTy³
,
NULL
);

2314 
diùI‹¿tÜ
 *
di
;

2315 
diùEÁry
 *
de
, *
exi¡šg
;

2316 
scÜe
;

2318 ià(
£Šum
) {

2321 
	`diùEx·nd
(
accumuÏtÜ
,
	`zuiL’gth
(&
¤c
[
£Šum
-1]));

2326 
i
 = 0; i < 
£Šum
; i++) {

2327 ià(
	`zuiL’gth
(&
¤c
[
i
]) == 0) ;

2329 
	`zuiIn™I‹¿tÜ
(&
¤c
[
i
]);

2330 
	`zuiNext
(&
¤c
[
i
],&
zv®
)) {

2332 
scÜe
 = 
¤c
[
i
].
weight
 * 
zv®
.score;

2333 ià(
	`i¢ª
(
scÜe
)) score = 0;

2336 
de
 = 
	`diùAddRaw
(
accumuÏtÜ
,
	`zuiSdsFromV®ue
(&
zv®
),&
exi¡šg
);

2338 ià(!
exi¡šg
) {

2339 
tmp
 = 
	`zuiNewSdsFromV®ue
(&
zv®
);

2343 ià(
	`sd¦’
(
tmp
è> 
max––’
) maxelelen = sdslen(tmp);

2345 
	`diùS‘Key
(
accumuÏtÜ
, 
de
, 
tmp
);

2346 
	`diùS‘DoubËV®
(
de
,
scÜe
);

2354 
	`zuniÚIÁ”Agg»g©e
(&
exi¡šg
->
v
.
d
,
scÜe
,
agg»g©e
);

2357 
	`zuiCË¬I‹¿tÜ
(&
¤c
[
i
]);

2361 
di
 = 
	`diùG‘I‹¿tÜ
(
accumuÏtÜ
);

2366 
	`diùEx·nd
(
d¡z£t
->
diù
,
	`diùSize
(
accumuÏtÜ
));

2368 (
de
 = 
	`diùNext
(
di
)è!ğ
NULL
) {

2369 
sds
 
–e
 = 
	`diùG‘Key
(
de
);

2370 
scÜe
 = 
	`diùG‘DoubËV®
(
de
);

2371 
znode
 = 
	`z¦In£¹
(
d¡z£t
->
z¦
,
scÜe
,
–e
);

2372 
	`diùAdd
(
d¡z£t
->
diù
,
–e
,&
znode
->
scÜe
);

2374 
	`diùR–—£I‹¿tÜ
(
di
);

2375 
	`diùR–—£
(
accumuÏtÜ
);

2377 
	`£rv”Pªic
("Unknown operator");

2380 ià(
	`dbD–‘e
(
c
->
db
,
d¡key
))

2381 
touched
 = 1;

2382 ià(
d¡z£t
->
z¦
->
Ëngth
) {

2383 
	`z£tCÚv”tToZli¡IfN“ded
(
d¡obj
,
max––’
);

2384 
	`dbAdd
(
c
->
db
,
d¡key
,
d¡obj
);

2385 
	`addR•lyLÚgLÚg
(
c
,
	`z£tL’gth
(
d¡obj
));

2386 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

2387 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,

2388 (
İ
 =ğ
SET_OP_UNION
) ? "zunionstore" : "zinterstore",

2389 
d¡key
,
c
->
db
->
id
);

2390 
£rv”
.
dœty
++;

2392 
	`deüRefCouÁ
(
d¡obj
);

2393 
	`addR•ly
(
c
,
sh¬ed
.
cz”o
);

2394 ià(
touched
) {

2395 
	`sigÇlModif›dKey
(
c
,c->
db
,
d¡key
);

2396 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
d¡key
,
c
->
db
->
id
);

2397 
£rv”
.
dœty
++;

2400 
	`zä“
(
¤c
);

2401 
	}
}

2403 
	$zuniÚ¡ÜeCommªd
(
ş›Á
 *
c
) {

2404 
	`zuniÚIÁ”G’”icCommªd
(
c
,c->
¬gv
[1], 
SET_OP_UNION
);

2405 
	}
}

2407 
	$zš‹r¡ÜeCommªd
(
ş›Á
 *
c
) {

2408 
	`zuniÚIÁ”G’”icCommªd
(
c
,c->
¬gv
[1], 
SET_OP_INTER
);

2409 
	}
}

2411 
	$z¿ngeG’”icCommªd
(
ş›Á
 *
c
, 
»v”£
) {

2412 
robj
 *
key
 = 
c
->
¬gv
[1];

2413 
robj
 *
zobj
;

2414 
w™hscÜes
 = 0;

2415 
¡¬t
;

2416 
’d
;

2417 
Î’
;

2418 
¿ng–’
;

2420 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[2], &
¡¬t
, 
NULL
è!ğ
C_OK
) ||

2421 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[3], &
’d
, 
NULL
è!ğ
C_OK
)) ;

2423 ià(
c
->
¬gc
 =ğ5 && !
	`¡rÿ£cmp
(c->
¬gv
[4]->
±r
,"withscores")) {

2424 
w™hscÜes
 = 1;

2425 } ià(
c
->
¬gc
 >= 5) {

2426 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2430 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
em±y¬¿y
)è=ğ
NULL


2431 || 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

2434 
Î’
 = 
	`z£tL’gth
(
zobj
);

2435 ià(
¡¬t
 < 0è¡¬ˆğ
Î’
+start;

2436 ià(
’d
 < 0è’d = 
Î’
+end;

2437 ià(
¡¬t
 < 0) start = 0;

2441 ià(
¡¬t
 > 
’d
 || s¹ >ğ
Î’
) {

2442 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

2445 ià(
’d
 >ğ
Î’
)ƒnd =†len-1;

2446 
¿ng–’
 = (
’d
-
¡¬t
)+1;

2451 ià(
w™hscÜes
 && 
c
->
»¥
 == 2)

2452 
	`addR•lyA¼ayL’
(
c
, 
¿ng–’
*2);

2454 
	`addR•lyA¼ayL’
(
c
, 
¿ng–’
);

2456 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2457 *
zl
 = 
zobj
->
±r
;

2458 *
•Œ
, *
¥Œ
;

2459 *
v¡r
;

2460 
vËn
;

2461 
vlÚg
;

2463 ià(
»v”£
)

2464 
•Œ
 = 
	`zli¡Index
(
zl
,-2-(2*
¡¬t
));

2466 
•Œ
 = 
	`zli¡Index
(
zl
,2*
¡¬t
);

2468 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
•Œ
 !ğ
NULL
);

2469 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

2471 
¿ng–’
--) {

2472 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
•Œ
 !ğ
NULL
 && 
¥Œ
 != NULL);

2473 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

2475 ià(
w™hscÜes
 && 
c
->
»¥
 > 2è
	`addR•lyA¼ayL’
(c,2);

2476 ià(
v¡r
 =ğ
NULL
)

2477 
	`addR•lyBulkLÚgLÚg
(
c
,
vlÚg
);

2479 
	`addR•lyBulkCBufãr
(
c
,
v¡r
,
vËn
);

2480 ià(
w™hscÜes
è
	`addR•lyDoubË
(
c
,
	`zzlG‘ScÜe
(
¥Œ
));

2482 ià(
»v”£
)

2483 
	`zzlP»v
(
zl
,&
•Œ
,&
¥Œ
);

2485 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2488 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2489 
z£t
 *
zs
 = 
zobj
->
±r
;

2490 
zskli¡
 *
z¦
 = 
zs
->zsl;

2491 
zskli¡Node
 *
Ê
;

2492 
sds
 
–e
;

2495 ià(
»v”£
) {

2496 
Ê
 = 
z¦
->

;

2497 ià(
¡¬t
 > 0)

2498 
Ê
 = 
	`z¦G‘EËm’tByRªk
(
z¦
,
Î’
-
¡¬t
);

2500 
Ê
 = 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
;

2501 ià(
¡¬t
 > 0)

2502 
Ê
 = 
	`z¦G‘EËm’tByRªk
(
z¦
,
¡¬t
+1);

2505 
¿ng–’
--) {

2506 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
Ê
 !ğ
NULL
);

2507 
–e
 = 
Ê
->ele;

2508 ià(
w™hscÜes
 && 
c
->
»¥
 > 2è
	`addR•lyA¼ayL’
(c,2);

2509 
	`addR•lyBulkCBufãr
(
c
,
–e
,
	`sd¦’
(ele));

2510 ià(
w™hscÜes
è
	`addR•lyDoubË
(
c
,
Ê
->
scÜe
);

2511 
Ê
 = 
»v”£
 ?†n->
backw¬d
 :†n->
Ëv–
[0].
fÜw¬d
;

2514 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2516 
	}
}

2518 
	$z¿ngeCommªd
(
ş›Á
 *
c
) {

2519 
	`z¿ngeG’”icCommªd
(
c
,0);

2520 
	}
}

2522 
	$z»v¿ngeCommªd
(
ş›Á
 *
c
) {

2523 
	`z¿ngeG’”icCommªd
(
c
,1);

2524 
	}
}

2527 
	$g’”icZ¿ngebyscÜeCommªd
(
ş›Á
 *
c
, 
»v”£
) {

2528 
z¿nge¥ec
 
¿nge
;

2529 
robj
 *
key
 = 
c
->
¬gv
[1];

2530 
robj
 *
zobj
;

2531 
off£t
 = 0, 
lim™
 = -1;

2532 
w™hscÜes
 = 0;

2533 
¿ng–’
 = 0;

2534 *
»¶yËn
 = 
NULL
;

2535 
mšidx
, 
maxidx
;

2538 ià(
»v”£
) {

2540 
maxidx
 = 2; 
mšidx
 = 3;

2543 
mšidx
 = 2; 
maxidx
 = 3;

2546 ià(
	`z¦P¬£Rªge
(
c
->
¬gv
[
mšidx
],c->¬gv[
maxidx
],&
¿nge
è!ğ
C_OK
) {

2547 
	`addR•lyE¼Ü
(
c
,"min or max is‚ot‡ float");

2553 ià(
c
->
¬gc
 > 4) {

2554 
»maššg
 = 
c
->
¬gc
 - 4;

2555 
pos
 = 4;

2557 
»maššg
) {

2558 ià(
»maššg
 >ğ1 && !
	`¡rÿ£cmp
(
c
->
¬gv
[
pos
]->
±r
,"withscores")) {

2559 
pos
++; 
»maššg
--;

2560 
w™hscÜes
 = 1;

2561 } ià(
»maššg
 >ğ3 && !
	`¡rÿ£cmp
(
c
->
¬gv
[
pos
]->
±r
,"limit")) {

2562 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
pos
+1], &
off£t
, 
NULL
)

2563 !ğ
C_OK
) ||

2564 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
pos
+2], &
lim™
, 
NULL
)

2565 !ğ
C_OK
))

2569 
pos
 +ğ3; 
»maššg
 -= 3;

2571 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2578 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
em±y¬¿y
)è=ğ
NULL
 ||

2579 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

2581 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2582 *
zl
 = 
zobj
->
±r
;

2583 *
•Œ
, *
¥Œ
;

2584 *
v¡r
;

2585 
vËn
;

2586 
vlÚg
;

2587 
scÜe
;

2590 ià(
»v”£
) {

2591 
•Œ
 = 
	`zzlLa¡InRªge
(
zl
,&
¿nge
);

2593 
•Œ
 = 
	`zzlFœ¡InRªge
(
zl
,&
¿nge
);

2597 ià(
•Œ
 =ğ
NULL
) {

2598 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

2603 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
•Œ
 !ğ
NULL
);

2604 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

2609 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

2613 
•Œ
 && 
off£t
--) {

2614 ià(
»v”£
) {

2615 
	`zzlP»v
(
zl
,&
•Œ
,&
¥Œ
);

2617 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2621 
•Œ
 && 
lim™
--) {

2622 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

2625 ià(
»v”£
) {

2626 ià(!
	`z¦V®ueG‹Mš
(
scÜe
,&
¿nge
)) ;

2628 ià(!
	`z¦V®ueL‹Max
(
scÜe
,&
¿nge
)) ;

2633 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

2635 
¿ng–’
++;

2636 ià(
w™hscÜes
 && 
c
->
»¥
 > 2è
	`addR•lyA¼ayL’
(c,2);

2637 ià(
v¡r
 =ğ
NULL
) {

2638 
	`addR•lyBulkLÚgLÚg
(
c
,
vlÚg
);

2640 
	`addR•lyBulkCBufãr
(
c
,
v¡r
,
vËn
);

2642 ià(
w™hscÜes
è
	`addR•lyDoubË
(
c
,
scÜe
);

2645 ià(
»v”£
) {

2646 
	`zzlP»v
(
zl
,&
•Œ
,&
¥Œ
);

2648 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2651 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2652 
z£t
 *
zs
 = 
zobj
->
±r
;

2653 
zskli¡
 *
z¦
 = 
zs
->zsl;

2654 
zskli¡Node
 *
Ê
;

2657 ià(
»v”£
) {

2658 
Ê
 = 
	`z¦La¡InRªge
(
z¦
,&
¿nge
);

2660 
Ê
 = 
	`z¦Fœ¡InRªge
(
z¦
,&
¿nge
);

2664 ià(
Ê
 =ğ
NULL
) {

2665 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

2672 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

2676 
Ê
 && 
off£t
--) {

2677 ià(
»v”£
) {

2678 
Ê
 =†n->
backw¬d
;

2680 
Ê
 =†n->
Ëv–
[0].
fÜw¬d
;

2684 
Ê
 && 
lim™
--) {

2686 ià(
»v”£
) {

2687 ià(!
	`z¦V®ueG‹Mš
(
Ê
->
scÜe
,&
¿nge
)) ;

2689 ià(!
	`z¦V®ueL‹Max
(
Ê
->
scÜe
,&
¿nge
)) ;

2692 
¿ng–’
++;

2693 ià(
w™hscÜes
 && 
c
->
»¥
 > 2è
	`addR•lyA¼ayL’
(c,2);

2694 
	`addR•lyBulkCBufãr
(
c
,
Ê
->
–e
,
	`sd¦’
(ln->ele));

2695 ià(
w™hscÜes
è
	`addR•lyDoubË
(
c
,
Ê
->
scÜe
);

2698 ià(
»v”£
) {

2699 
Ê
 =†n->
backw¬d
;

2701 
Ê
 =†n->
Ëv–
[0].
fÜw¬d
;

2705 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2708 ià(
w™hscÜes
 && 
c
->
»¥
 =ğ2è
¿ng–’
 *= 2;

2709 
	`£tDeã¼edA¼ayL’
(
c
, 
»¶yËn
, 
¿ng–’
);

2710 
	}
}

2712 
	$z¿ngebyscÜeCommªd
(
ş›Á
 *
c
) {

2713 
	`g’”icZ¿ngebyscÜeCommªd
(
c
,0);

2714 
	}
}

2716 
	$z»v¿ngebyscÜeCommªd
(
ş›Á
 *
c
) {

2717 
	`g’”icZ¿ngebyscÜeCommªd
(
c
,1);

2718 
	}
}

2720 
	$zcouÁCommªd
(
ş›Á
 *
c
) {

2721 
robj
 *
key
 = 
c
->
¬gv
[1];

2722 
robj
 *
zobj
;

2723 
z¿nge¥ec
 
¿nge
;

2724 
couÁ
 = 0;

2727 ià(
	`z¦P¬£Rªge
(
c
->
¬gv
[2],c->¬gv[3],&
¿nge
è!ğ
C_OK
) {

2728 
	`addR•lyE¼Ü
(
c
,"min or max is‚ot‡ float");

2733 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
, 
key
, 
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

2734 
	`checkTy³
(
c
, 
zobj
, 
OBJ_ZSET
)) ;

2736 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2737 *
zl
 = 
zobj
->
±r
;

2738 *
•Œ
, *
¥Œ
;

2739 
scÜe
;

2742 
•Œ
 = 
	`zzlFœ¡InRªge
(
zl
,&
¿nge
);

2745 ià(
•Œ
 =ğ
NULL
) {

2746 
	`addR•ly
(
c
, 
sh¬ed
.
cz”o
);

2751 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

2752 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

2753 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`z¦V®ueL‹Max
(
scÜe
,&
¿nge
));

2756 
•Œ
) {

2757 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

2760 ià(!
	`z¦V®ueL‹Max
(
scÜe
,&
¿nge
)) {

2763 
couÁ
++;

2764 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2767 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2768 
z£t
 *
zs
 = 
zobj
->
±r
;

2769 
zskli¡
 *
z¦
 = 
zs
->zsl;

2770 
zskli¡Node
 *
zn
;

2771 
¿nk
;

2774 
zn
 = 
	`z¦Fœ¡InRªge
(
z¦
, &
¿nge
);

2777 ià(
zn
 !ğ
NULL
) {

2778 
¿nk
 = 
	`z¦G‘Rªk
(
z¦
, 
zn
->
scÜe
, zn->
–e
);

2779 
couÁ
 = (
z¦
->
Ëngth
 - (
¿nk
 - 1));

2782 
zn
 = 
	`z¦La¡InRªge
(
z¦
, &
¿nge
);

2785 ià(
zn
 !ğ
NULL
) {

2786 
¿nk
 = 
	`z¦G‘Rªk
(
z¦
, 
zn
->
scÜe
, zn->
–e
);

2787 
couÁ
 -ğ(
z¦
->
Ëngth
 - 
¿nk
);

2791 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2794 
	`addR•lyLÚgLÚg
(
c
, 
couÁ
);

2795 
	}
}

2797 
	$zËxcouÁCommªd
(
ş›Á
 *
c
) {

2798 
robj
 *
key
 = 
c
->
¬gv
[1];

2799 
robj
 *
zobj
;

2800 
zËx¿nge¥ec
 
¿nge
;

2801 
couÁ
 = 0;

2804 ià(
	`z¦P¬£LexRªge
(
c
->
¬gv
[2],c->¬gv[3],&
¿nge
è!ğ
C_OK
) {

2805 
	`addR•lyE¼Ü
(
c
,"min or max‚ot valid string„ange item");

2810 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
, 
key
, 
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

2811 
	`checkTy³
(
c
, 
zobj
, 
OBJ_ZSET
))

2813 
	`z¦F»eLexRªge
(&
¿nge
);

2817 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2818 *
zl
 = 
zobj
->
±r
;

2819 *
•Œ
, *
¥Œ
;

2822 
•Œ
 = 
	`zzlFœ¡InLexRªge
(
zl
,&
¿nge
);

2825 ià(
•Œ
 =ğ
NULL
) {

2826 
	`z¦F»eLexRªge
(&
¿nge
);

2827 
	`addR•ly
(
c
, 
sh¬ed
.
cz”o
);

2832 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

2833 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`zzlLexV®ueL‹Max
(
•Œ
,&
¿nge
));

2836 
•Œ
) {

2838 ià(!
	`zzlLexV®ueL‹Max
(
•Œ
,&
¿nge
)) {

2841 
couÁ
++;

2842 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2845 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2846 
z£t
 *
zs
 = 
zobj
->
±r
;

2847 
zskli¡
 *
z¦
 = 
zs
->zsl;

2848 
zskli¡Node
 *
zn
;

2849 
¿nk
;

2852 
zn
 = 
	`z¦Fœ¡InLexRªge
(
z¦
, &
¿nge
);

2855 ià(
zn
 !ğ
NULL
) {

2856 
¿nk
 = 
	`z¦G‘Rªk
(
z¦
, 
zn
->
scÜe
, zn->
–e
);

2857 
couÁ
 = (
z¦
->
Ëngth
 - (
¿nk
 - 1));

2860 
zn
 = 
	`z¦La¡InLexRªge
(
z¦
, &
¿nge
);

2863 ià(
zn
 !ğ
NULL
) {

2864 
¿nk
 = 
	`z¦G‘Rªk
(
z¦
, 
zn
->
scÜe
, zn->
–e
);

2865 
couÁ
 -ğ(
z¦
->
Ëngth
 - 
¿nk
);

2869 
	`£rv”Pªic
("Unknown sorted setƒncoding");

2872 
	`z¦F»eLexRªge
(&
¿nge
);

2873 
	`addR•lyLÚgLÚg
(
c
, 
couÁ
);

2874 
	}
}

2877 
	$g’”icZ¿ngebyËxCommªd
(
ş›Á
 *
c
, 
»v”£
) {

2878 
zËx¿nge¥ec
 
¿nge
;

2879 
robj
 *
key
 = 
c
->
¬gv
[1];

2880 
robj
 *
zobj
;

2881 
off£t
 = 0, 
lim™
 = -1;

2882 
¿ng–’
 = 0;

2883 *
»¶yËn
 = 
NULL
;

2884 
mšidx
, 
maxidx
;

2887 ià(
»v”£
) {

2889 
maxidx
 = 2; 
mšidx
 = 3;

2892 
mšidx
 = 2; 
maxidx
 = 3;

2895 ià(
	`z¦P¬£LexRªge
(
c
->
¬gv
[
mšidx
],c->¬gv[
maxidx
],&
¿nge
è!ğ
C_OK
) {

2896 
	`addR•lyE¼Ü
(
c
,"min or max‚ot valid string„ange item");

2902 ià(
c
->
¬gc
 > 4) {

2903 
»maššg
 = 
c
->
¬gc
 - 4;

2904 
pos
 = 4;

2906 
»maššg
) {

2907 ià(
»maššg
 >ğ3 && !
	`¡rÿ£cmp
(
c
->
¬gv
[
pos
]->
±r
,"limit")) {

2908 ià((
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
pos
+1], &
off£t
, 
NULL
è!ğ
C_OK
) ||

2909 (
	`g‘LÚgFromObjeùOrR•ly
(
c
, c->
¬gv
[
pos
+2], &
lim™
, 
NULL
è!ğ
C_OK
)) {

2910 
	`z¦F»eLexRªge
(&
¿nge
);

2913 
pos
 +ğ3; 
»maššg
 -= 3;

2915 
	`z¦F»eLexRªge
(&
¿nge
);

2916 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

2923 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
em±y¬¿y
)è=ğ
NULL
 ||

2924 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
))

2926 
	`z¦F»eLexRªge
(&
¿nge
);

2930 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

2931 *
zl
 = 
zobj
->
±r
;

2932 *
•Œ
, *
¥Œ
;

2933 *
v¡r
;

2934 
vËn
;

2935 
vlÚg
;

2938 ià(
»v”£
) {

2939 
•Œ
 = 
	`zzlLa¡InLexRªge
(
zl
,&
¿nge
);

2941 
•Œ
 = 
	`zzlFœ¡InLexRªge
(
zl
,&
¿nge
);

2945 ià(
•Œ
 =ğ
NULL
) {

2946 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

2947 
	`z¦F»eLexRªge
(&
¿nge
);

2952 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
•Œ
 !ğ
NULL
);

2953 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

2958 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

2962 
•Œ
 && 
off£t
--) {

2963 ià(
»v”£
) {

2964 
	`zzlP»v
(
zl
,&
•Œ
,&
¥Œ
);

2966 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2970 
•Œ
 && 
lim™
--) {

2972 ià(
»v”£
) {

2973 ià(!
	`zzlLexV®ueG‹Mš
(
•Œ
,&
¿nge
)) ;

2975 ià(!
	`zzlLexV®ueL‹Max
(
•Œ
,&
¿nge
)) ;

2980 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

2982 
¿ng–’
++;

2983 ià(
v¡r
 =ğ
NULL
) {

2984 
	`addR•lyBulkLÚgLÚg
(
c
,
vlÚg
);

2986 
	`addR•lyBulkCBufãr
(
c
,
v¡r
,
vËn
);

2990 ià(
»v”£
) {

2991 
	`zzlP»v
(
zl
,&
•Œ
,&
¥Œ
);

2993 
	`zzlNext
(
zl
,&
•Œ
,&
¥Œ
);

2996 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

2997 
z£t
 *
zs
 = 
zobj
->
±r
;

2998 
zskli¡
 *
z¦
 = 
zs
->zsl;

2999 
zskli¡Node
 *
Ê
;

3002 ià(
»v”£
) {

3003 
Ê
 = 
	`z¦La¡InLexRªge
(
z¦
,&
¿nge
);

3005 
Ê
 = 
	`z¦Fœ¡InLexRªge
(
z¦
,&
¿nge
);

3009 ià(
Ê
 =ğ
NULL
) {

3010 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

3011 
	`z¦F»eLexRªge
(&
¿nge
);

3018 
»¶yËn
 = 
	`addR•lyDeã¼edL’
(
c
);

3022 
Ê
 && 
off£t
--) {

3023 ià(
»v”£
) {

3024 
Ê
 =†n->
backw¬d
;

3026 
Ê
 =†n->
Ëv–
[0].
fÜw¬d
;

3030 
Ê
 && 
lim™
--) {

3032 ià(
»v”£
) {

3033 ià(!
	`z¦LexV®ueG‹Mš
(
Ê
->
–e
,&
¿nge
)) ;

3035 ià(!
	`z¦LexV®ueL‹Max
(
Ê
->
–e
,&
¿nge
)) ;

3038 
¿ng–’
++;

3039 
	`addR•lyBulkCBufãr
(
c
,
Ê
->
–e
,
	`sd¦’
(ln->ele));

3042 ià(
»v”£
) {

3043 
Ê
 =†n->
backw¬d
;

3045 
Ê
 =†n->
Ëv–
[0].
fÜw¬d
;

3049 
	`£rv”Pªic
("Unknown sorted setƒncoding");

3052 
	`z¦F»eLexRªge
(&
¿nge
);

3053 
	`£tDeã¼edA¼ayL’
(
c
, 
»¶yËn
, 
¿ng–’
);

3054 
	}
}

3056 
	$z¿ngebyËxCommªd
(
ş›Á
 *
c
) {

3057 
	`g’”icZ¿ngebyËxCommªd
(
c
,0);

3058 
	}
}

3060 
	$z»v¿ngebyËxCommªd
(
ş›Á
 *
c
) {

3061 
	`g’”icZ¿ngebyËxCommªd
(
c
,1);

3062 
	}
}

3064 
	$zÿrdCommªd
(
ş›Á
 *
c
) {

3065 
robj
 *
key
 = 
c
->
¬gv
[1];

3066 
robj
 *
zobj
;

3068 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
cz”o
)è=ğ
NULL
 ||

3069 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

3071 
	`addR•lyLÚgLÚg
(
c
,
	`z£tL’gth
(
zobj
));

3072 
	}
}

3074 
	$zscÜeCommªd
(
ş›Á
 *
c
) {

3075 
robj
 *
key
 = 
c
->
¬gv
[1];

3076 
robj
 *
zobj
;

3077 
scÜe
;

3079 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
nuÎ
[c->
»¥
])è=ğ
NULL
 ||

3080 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

3082 ià(
	`z£tScÜe
(
zobj
,
c
->
¬gv
[2]->
±r
,&
scÜe
è=ğ
C_ERR
) {

3083 
	`addR•lyNuÎ
(
c
);

3085 
	`addR•lyDoubË
(
c
,
scÜe
);

3087 
	}
}

3089 
	$z¿nkG’”icCommªd
(
ş›Á
 *
c
, 
»v”£
) {

3090 
robj
 *
key
 = 
c
->
¬gv
[1];

3091 
robj
 *
–e
 = 
c
->
¬gv
[2];

3092 
robj
 *
zobj
;

3093 
¿nk
;

3095 ià((
zobj
 = 
	`lookupKeyR—dOrR•ly
(
c
,
key
,
sh¬ed
.
nuÎ
[c->
»¥
])è=ğ
NULL
 ||

3096 
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

3098 
	`£rv”As£¹W™hInfo
(
c
,
–e
,
	`sdsEncodedObjeù
(ele));

3099 
¿nk
 = 
	`z£tRªk
(
zobj
,
–e
->
±r
,
»v”£
);

3100 ià(
¿nk
 >= 0) {

3101 
	`addR•lyLÚgLÚg
(
c
,
¿nk
);

3103 
	`addR•lyNuÎ
(
c
);

3105 
	}
}

3107 
	$z¿nkCommªd
(
ş›Á
 *
c
) {

3108 
	`z¿nkG’”icCommªd
(
c
, 0);

3109 
	}
}

3111 
	$z»v¿nkCommªd
(
ş›Á
 *
c
) {

3112 
	`z¿nkG’”icCommªd
(
c
, 1);

3113 
	}
}

3115 
	$zsÿnCommªd
(
ş›Á
 *
c
) {

3116 
robj
 *
o
;

3117 
cursÜ
;

3119 ià(
	`·r£SÿnCursÜOrR•ly
(
c
,c->
¬gv
[2],&
cursÜ
è=ğ
C_ERR
) ;

3120 ià((
o
 = 
	`lookupKeyR—dOrR•ly
(
c
,c->
¬gv
[1],
sh¬ed
.
em±ysÿn
)è=ğ
NULL
 ||

3121 
	`checkTy³
(
c
,
o
,
OBJ_ZSET
)) ;

3122 
	`sÿnG’”icCommªd
(
c
,
o
,
cursÜ
);

3123 
	}
}

3134 
	$g’”icZpİCommªd
(
ş›Á
 *
c
, 
robj
 **
keyv
, 
keyc
, 
wh”e
, 
em™key
,„obj *
couÁ¬g
) {

3135 
idx
;

3136 
robj
 *
key
 = 
NULL
;

3137 
robj
 *
zobj
 = 
NULL
;

3138 
sds
 
–e
;

3139 
scÜe
;

3140 
couÁ
 = 1;

3143 ià(
couÁ¬g
) {

3144 ià(
	`g‘LÚgFromObjeùOrR•ly
(
c
,
couÁ¬g
,&
couÁ
,
NULL
è!ğ
C_OK
)

3146 ià(
couÁ
 <= 0) {

3147 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

3153 
idx
 = 0;

3154 
idx
 < 
keyc
) {

3155 
key
 = 
keyv
[
idx
++];

3156 
zobj
 = 
	`lookupKeyWr™e
(
c
->
db
,
key
);

3157 ià(!
zobj
) ;

3158 ià(
	`checkTy³
(
c
,
zobj
,
OBJ_ZSET
)) ;

3163 ià(!
zobj
) {

3164 
	`addR•ly
(
c
,
sh¬ed
.
em±y¬¿y
);

3168 *
¬¿yËn_±r
 = 
	`addR•lyDeã¼edL’
(
c
);

3169 
¬¿yËn
 = 0;

3172 ià(
em™key
è
	`addR•lyBulk
(
c
,
key
);

3176 ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_ZIPLIST
) {

3177 *
zl
 = 
zobj
->
±r
;

3178 *
•Œ
, *
¥Œ
;

3179 *
v¡r
;

3180 
vËn
;

3181 
vlÚg
;

3184 
•Œ
 = 
	`zli¡Index
(
zl
,
wh”e
 =ğ
ZSET_MAX
 ? -2 : 0);

3185 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
•Œ
 !ğ
NULL
);

3186 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`zli¡G‘
(
•Œ
,&
v¡r
,&
vËn
,&
vlÚg
));

3187 ià(
v¡r
 =ğ
NULL
)

3188 
–e
 = 
	`sdsäomlÚglÚg
(
vlÚg
);

3190 
–e
 = 
	`sd¢ewËn
(
v¡r
,
vËn
);

3193 
¥Œ
 = 
	`zli¡Next
(
zl
,
•Œ
);

3194 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
¥Œ
 !ğ
NULL
);

3195 
scÜe
 = 
	`zzlG‘ScÜe
(
¥Œ
);

3196 } ià(
zobj
->
’codšg
 =ğ
OBJ_ENCODING_SKIPLIST
) {

3197 
z£t
 *
zs
 = 
zobj
->
±r
;

3198 
zskli¡
 *
z¦
 = 
zs
->zsl;

3199 
zskli¡Node
 *
zÊ
;

3202 
zÊ
 = (
wh”e
 =ğ
ZSET_MAX
 ? 
z¦
->

 :

3203 
z¦
->
h—d”
->
Ëv–
[0].
fÜw¬d
);

3206 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
zÊ
 !ğ
NULL
);

3207 
–e
 = 
	`sdsdup
(
zÊ
->ele);

3208 
scÜe
 = 
zÊ
->score;

3210 
	`£rv”Pªic
("Unknown sorted setƒncoding");

3213 
	`£rv”As£¹W™hInfo
(
c
,
zobj
,
	`z£tD–
(zobj,
–e
));

3214 
£rv”
.
dœty
++;

3216 ià(
¬¿yËn
 == 0) {

3217 *
ev’ts
[2] = {"zpopmin","zpopmax"};

3218 
	`nÙifyKey¥aûEv’t
(
NOTIFY_ZSET
,
ev’ts
[
wh”e
],
key
,
c
->
db
->
id
);

3219 
	`sigÇlModif›dKey
(
c
,c->
db
,
key
);

3222 
	`addR•lyBulkCBufãr
(
c
,
–e
,
	`sd¦’
(ele));

3223 
	`addR•lyDoubË
(
c
,
scÜe
);

3224 
	`sdsä“
(
–e
);

3225 
¬¿yËn
 += 2;

3228 ià(
	`z£tL’gth
(
zobj
) == 0) {

3229 
	`dbD–‘e
(
c
->
db
,
key
);

3230 
	`nÙifyKey¥aûEv’t
(
NOTIFY_GENERIC
,"d–",
key
,
c
->
db
->
id
);

3233 } --
couÁ
);

3235 
	`£tDeã¼edA¼ayL’
(
c
,
¬¿yËn_±r
,
¬¿yËn
 + (
em™key
 != 0));

3236 
	}
}

3239 
	$zpİmšCommªd
(
ş›Á
 *
c
) {

3240 ià(
c
->
¬gc
 > 3) {

3241 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

3244 
	`g’”icZpİCommªd
(
c
,&c->
¬gv
[1],1,
ZSET_MIN
,0,

3245 
c
->
¬gc
 =ğ3 ? c->
¬gv
[2] : 
NULL
);

3246 
	}
}

3249 
	$zpİmaxCommªd
(
ş›Á
 *
c
) {

3250 ià(
c
->
¬gc
 > 3) {

3251 
	`addR•ly
(
c
,
sh¬ed
.
syÁax”r
);

3254 
	`g’”icZpİCommªd
(
c
,&c->
¬gv
[1],1,
ZSET_MAX
,0,

3255 
c
->
¬gc
 =ğ3 ? c->
¬gv
[2] : 
NULL
);

3256 
	}
}

3259 
	$blockšgG’”icZpİCommªd
(
ş›Á
 *
c
, 
wh”e
) {

3260 
robj
 *
o
;

3261 
m¡ime_t
 
timeout
;

3262 
j
;

3264 ià(
	`g‘TimeoutFromObjeùOrR•ly
(
c
,c->
¬gv
[c->
¬gc
-1],&
timeout
,
UNIT_SECONDS
)

3265 !ğ
C_OK
) ;

3267 
j
 = 1; j < 
c
->
¬gc
-1; j++) {

3268 
o
 = 
	`lookupKeyWr™e
(
c
->
db
,c->
¬gv
[
j
]);

3269 ià(
o
 !ğ
NULL
) {

3270 ià(
o
->
ty³
 !ğ
OBJ_ZSET
) {

3271 
	`addR•ly
(
c
,
sh¬ed
.
wrÚgty³”r
);

3274 ià(
	`z£tL’gth
(
o
) != 0) {

3276 
	`g’”icZpİCommªd
(
c
,&c->
¬gv
[
j
],1,
wh”e
,1,
NULL
);

3278 
	`»wr™eCl›ÁCommªdVeùÜ
(
c
,2,

3279 
wh”e
 =ğ
ZSET_MAX
 ? 
sh¬ed
.
zpİmax
 : sh¬ed.
zpİmš
,

3280 
c
->
¬gv
[
j
]);

3289 ià(
c
->
æags
 & 
CLIENT_MULTI
) {

3290 
	`addR•lyNuÎA¼ay
(
c
);

3295 
	`blockFÜKeys
(
c
,
BLOCKED_ZSET
,c->
¬gv
 + 1,c->
¬gc
 - 2,
timeout
,
NULL
,NULL);

3296 
	}
}

3299 
	$bzpİmšCommªd
(
ş›Á
 *
c
) {

3300 
	`blockšgG’”icZpİCommªd
(
c
,
ZSET_MIN
);

3301 
	}
}

3304 
	$bzpİmaxCommªd
(
ş›Á
 *
c
) {

3305 
	`blockšgG’”icZpİCommªd
(
c
,
ZSET_MAX
);

3306 
	}
}

	@testhelp.h

39 #iâdeà
__TESTHELP_H


40 
	#__TESTHELP_H


	)

42 
	g__çed_‹¡s
 = 0;

43 
	g__‹¡_num
 = 0;

44 
	#‹¡_cÚd
(
desü
,
_c
) do { \

45 
__‹¡_num
++; 
	`´štf
("%d - %s: ", __‹¡_num, 
desü
); \

46 if(
_c
è
	`´štf
("PASSED\n"); {´štf("FAILED\n"); 
__çed_‹¡s
++;} \

47 } 0);

	)

48 
	#‹¡_»pÜt
() do { \

49 
	`´štf
("%de¡s, %d…as£d, %d faed\n", 
__‹¡_num
, \

50 
__‹¡_num
-
__çed_‹¡s
, __failed_tests); \

51 ià(
__çed_‹¡s
) { \

52 
	`´štf
("=== WARNING === We have failedests here...\n"); \

53 
	`ex™
(1); \

55 } 0);

	)

	@timeout.c

29 
	~"£rv”.h
"

30 
	~"şu¡”.h
"

37 
	$checkBlockedCl›ÁTimeout
(
ş›Á
 *
c
, 
m¡ime_t
 
now
) {

38 ià(
c
->
æags
 & 
CLIENT_BLOCKED
 &&

39 
c
->
bpİ
.
timeout
 != 0

40 && 
c
->
bpİ
.
timeout
 < 
now
)

43 
	`»¶yToBlockedCl›ÁTimedOut
(
c
);

44 
	`unblockCl›Á
(
c
);

49 
	}
}

55 
	$ş›ÁsCrÚHªdËTimeout
(
ş›Á
 *
c
, 
m¡ime_t
 
now_ms
) {

56 
time_t
 
now
 = 
now_ms
/1000;

58 ià(
£rv”
.
maxidËtime
 &&

60 !(
c
->
æags
 & 
CLIENT_SLAVE
) &&

61 !(
c
->
æags
 & 
CLIENT_MASTER
) &&

62 !(
c
->
æags
 & 
CLIENT_BLOCKED
) &&

63 !(
c
->
æags
 & 
CLIENT_PUBSUB
) &&

64 (
now
 - 
c
->
Ï¡š‹¿ùiÚ
 > 
£rv”
.
maxidËtime
))

66 
	`£rv”Log
(
LL_VERBOSE
,"Closing idle client");

67 
	`ä“Cl›Á
(
c
);

69 } ià(
c
->
æags
 & 
CLIENT_BLOCKED
) {

72 ià(
£rv”
.
şu¡”_’abËd
) {

73 ià(
	`şu¡”RedœeùBlockedCl›ÁIfN“ded
(
c
))

74 
	`unblockCl›Á
(
c
);

78 
	}
}

93 
	#CLIENT_ST_KEYLEN
 16

	)

96 
	$’codeTimeoutKey
(*
buf
, 
ušt64_t
 
timeout
, 
ş›Á
 *
c
) {

97 
timeout
 = 
	`htÚu64
(timeout);

98 
	`memıy
(
buf
,&
timeout
,(timeout));

99 
	`memıy
(
buf
+8,&
c
,(c));

100 ià((
c
è=ğ4è
	`mem£t
(
buf
+12,0,4);

101 
	}
}

105 
	$decodeTimeoutKey
(*
buf
, 
ušt64_t
 *
tİŒ
, 
ş›Á
 **
ıŒ
) {

106 
	`memıy
(
tİŒ
,
buf
,(*toptr));

107 *
tİŒ
 = 
	`Áohu64
(*toptr);

108 
	`memıy
(
ıŒ
,
buf
+8,(*cptr));

109 
	}
}

114 
	$addCl›ÁToTimeoutTabË
(
ş›Á
 *
c
) {

115 ià(
c
->
bpİ
.
timeout
 == 0) ;

116 
ušt64_t
 
timeout
 = 
c
->
bpİ
.timeout;

117 
buf
[
CLIENT_ST_KEYLEN
];

118 
	`’codeTimeoutKey
(
buf
,
timeout
,
c
);

119 ià(
	`¿xTryIn£¹
(
£rv”
.
ş›Ás_timeout_bË
,
buf
,(buf),
NULL
,NULL))

120 
c
->
æags
 |ğ
CLIENT_IN_TO_TABLE
;

121 
	}
}

125 
	$»moveCl›ÁFromTimeoutTabË
(
ş›Á
 *
c
) {

126 ià(!(
c
->
æags
 & 
CLIENT_IN_TO_TABLE
)) ;

127 
c
->
æags
 &ğ~
CLIENT_IN_TO_TABLE
;

128 
ušt64_t
 
timeout
 = 
c
->
bpİ
.timeout;

129 
buf
[
CLIENT_ST_KEYLEN
];

130 
	`’codeTimeoutKey
(
buf
,
timeout
,
c
);

131 
	`¿xRemove
(
£rv”
.
ş›Ás_timeout_bË
,
buf
,(buf),
NULL
);

132 
	}
}

136 
	$hªdËBlockedCl›ÁsTimeout
() {

137 ià(
	`¿xSize
(
£rv”
.
ş›Ás_timeout_bË
) == 0) ;

138 
ušt64_t
 
now
 = 
	`m¡ime
();

139 
¿xI‹¿tÜ
 
ri
;

140 
	`¿xS¹
(&
ri
,
£rv”
.
ş›Ás_timeout_bË
);

141 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

143 
	`¿xNext
(&
ri
)) {

144 
ušt64_t
 
timeout
;

145 
ş›Á
 *
c
;

146 
	`decodeTimeoutKey
(
ri
.
key
,&
timeout
,&
c
);

147 ià(
timeout
 >ğ
now
) ;

148 
c
->
æags
 &ğ~
CLIENT_IN_TO_TABLE
;

149 
	`checkBlockedCl›ÁTimeout
(
c
,
now
);

150 
	`¿xRemove
(
£rv”
.
ş›Ás_timeout_bË
,
ri
.
key
,ri.
key_Ën
,
NULL
);

151 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

153 
	}
}

163 
	$g‘TimeoutFromObjeùOrR•ly
(
ş›Á
 *
c
, 
robj
 *
objeù
, 
m¡ime_t
 *
timeout
, 
un™
) {

164 
tv®
;

165 
áv®
;

167 ià(
un™
 =ğ
UNIT_SECONDS
) {

168 ià(
	`g‘LÚgDoubËFromObjeùOrR•ly
(
c
,
objeù
,&
áv®
,

169 "timeouˆi nÙ‡ flßˆÜ ouˆoà¿nge"è!ğ
C_OK
)

170  
C_ERR
;

171 
tv®
 = (è(
áv®
 * 1000.0);

173 ià(
	`g‘LÚgLÚgFromObjeùOrR•ly
(
c
,
objeù
,&
tv®
,

174 "timeouˆi nÙ‡Àš‹g” o¸ouˆoà¿nge"è!ğ
C_OK
)

175  
C_ERR
;

178 ià(
tv®
 < 0) {

179 
	`addR•lyE¼Ü
(
c
,"timeout is‚egative");

180  
C_ERR
;

183 ià(
tv®
 > 0) {

184 
tv®
 +ğ
	`m¡ime
();

186 *
timeout
 = 
tv®
;

188  
C_OK
;

189 
	}
}

	@tls.c

31 
	~"£rv”.h
"

32 
	~"cÚnh–³rs.h
"

33 
	~"adli¡.h
"

35 #ifdeà
USE_OPENSSL


37 
	~<İ’s¦/s¦.h
>

38 
	~<İ’s¦/”r.h
>

39 
	~<İ’s¦/¿nd.h
>

41 
	#REDIS_TLS_PROTO_TLSv1
 (1<<0)

	)

42 
	#REDIS_TLS_PROTO_TLSv1_1
 (1<<1)

	)

43 
	#REDIS_TLS_PROTO_TLSv1_2
 (1<<2)

	)

44 
	#REDIS_TLS_PROTO_TLSv1_3
 (1<<3)

	)

47 #ifdeà
TLS1_3_VERSION


48 
	#REDIS_TLS_PROTO_DEFAULT
 (
REDIS_TLS_PROTO_TLSv1_2
|
REDIS_TLS_PROTO_TLSv1_3
)

	)

50 
	#REDIS_TLS_PROTO_DEFAULT
 (
REDIS_TLS_PROTO_TLSv1_2
)

	)

53 
CÚÃùiÚTy³
 
CT_Sock‘
;

55 
SSL_CTX
 *
	g»dis_s_ùx
;

57 
	$·r£PrÙocŞsCÚfig
(cÚ¡ *
¡r
) {

58 
i
, 
couÁ
 = 0;

59 
´ÙocŞs
 = 0;

61 ià(!
¡r
è 
REDIS_TLS_PROTO_DEFAULT
;

62 
sds
 *
tok’s
 = 
	`sds¥l™Ën
(
¡r
, 
	`¡¾’
(¡r), " ", 1, &
couÁ
);

64 ià(!
tok’s
) {

65 
	`£rv”Log
(
LL_WARNING
, "Invalidls-protocols configuration string");

68 
i
 = 0; i < 
couÁ
; i++) {

69 ià(!
	`¡rÿ£cmp
(
tok’s
[
i
], "sv1")è
´ÙocŞs
 |ğ
REDIS_TLS_PROTO_TLSv1
;

70 ià(!
	`¡rÿ£cmp
(
tok’s
[
i
], "sv1.1")è
´ÙocŞs
 |ğ
REDIS_TLS_PROTO_TLSv1_1
;

71 ià(!
	`¡rÿ£cmp
(
tok’s
[
i
], "sv1.2")è
´ÙocŞs
 |ğ
REDIS_TLS_PROTO_TLSv1_2
;

72 ià(!
	`¡rÿ£cmp
(
tok’s
[
i
], "tlsv1.3")) {

73 #ifdeà
TLS1_3_VERSION


74 
´ÙocŞs
 |ğ
REDIS_TLS_PROTO_TLSv1_3
;

76 
	`£rv”Log
(
LL_WARNING
, "TLSv1.3 is specified inls-protocols but‚ot supported by OpenSSL.");

77 
´ÙocŞs
 = -1;

81 
	`£rv”Log
(
LL_WARNING
, "Invalidls-protocols specified. "

83 
´ÙocŞs
 = -1;

87 
	`sdsä“¥l™»s
(
tok’s
, 
couÁ
);

89  
´ÙocŞs
;

90 
	}
}

94 
li¡
 *
	g³ndšg_li¡
 = 
NULL
;

96 
	$sIn™
() {

97 
	`ERR_lßd_üy±o_¡ršgs
();

98 
	`SSL_lßd_”rÜ_¡ršgs
();

99 
	`SSL_lib¿ry_š™
();

101 ià(!
	`RAND_pŞl
()) {

102 
	`£rv”Log
(
LL_WARNING
, "OpenSSL: Failedo seed„andom‚umber generator.");

105 
³ndšg_li¡
 = 
	`li¡C»©e
();

108 
£rv”
.
s_auth_ş›Ás
 = 1;

109 
	}
}

114 
	$sCÚfigu»
(
»disTLSCÚ‹xtCÚfig
 *
ùx_cÚfig
) {

115 
”rbuf
[256];

116 
SSL_CTX
 *
ùx
 = 
NULL
;

118 ià(!
ùx_cÚfig
->
û¹_fe
) {

119 
	`£rv”Log
(
LL_WARNING
, "Nols-cert-file configured!");

120 
”rÜ
;

123 ià(!
ùx_cÚfig
->
key_fe
) {

124 
	`£rv”Log
(
LL_WARNING
, "Nols-key-file configured!");

125 
”rÜ
;

128 ià(!
ùx_cÚfig
->
ÿ_û¹_fe
 && !ùx_cÚfig->
ÿ_û¹_dœ
) {

129 
	`£rv”Log
(
LL_WARNING
, "Eitherls-ca-cert-file orls-ca-cert-dir must be configured!");

130 
”rÜ
;

133 
ùx
 = 
	`SSL_CTX_Ãw
(
	`SSLv23_m‘hod
());

135 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_SSLv2
|
SSL_OP_NO_SSLv3
);

136 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_SINGLE_DH_USE
);

138 #ifdeà
SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS


139 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS
);

142 
´ÙocŞs
 = 
	`·r£PrÙocŞsCÚfig
(
ùx_cÚfig
->protocols);

143 ià(
´ÙocŞs
 =ğ-1è
”rÜ
;

145 ià(!(
´ÙocŞs
 & 
REDIS_TLS_PROTO_TLSv1
))

146 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_TLSv1
);

147 ià(!(
´ÙocŞs
 & 
REDIS_TLS_PROTO_TLSv1_1
))

148 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_TLSv1_1
);

149 #ifdeà
SSL_OP_NO_TLSv1_2


150 ià(!(
´ÙocŞs
 & 
REDIS_TLS_PROTO_TLSv1_2
))

151 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_TLSv1_2
);

153 #ifdeà
SSL_OP_NO_TLSv1_3


154 ià(!(
´ÙocŞs
 & 
REDIS_TLS_PROTO_TLSv1_3
))

155 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_TLSv1_3
);

158 #ifdeà
SSL_OP_NO_COMPRESSION


159 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_COMPRESSION
);

162 #ifdeà
SSL_OP_NO_CLIENT_RENEGOTIATION


163 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_NO_CLIENT_RENEGOTIATION
);

166 ià(
ùx_cÚfig
->
´eãr_£rv”_ch”s
)

167 
	`SSL_CTX_£t_İtiÚs
(
ùx
, 
SSL_OP_CIPHER_SERVER_PREFERENCE
);

169 
	`SSL_CTX_£t_mode
(
ùx
, 
SSL_MODE_ENABLE_PARTIAL_WRITE
|
SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER
);

170 
	`SSL_CTX_£t_v”ify
(
ùx
, 
SSL_VERIFY_PEER
|
SSL_VERIFY_FAIL_IF_NO_PEER_CERT
, 
NULL
);

171 #ià
	`defšed
(
SSL_CTX_£t_ecdh_auto
)

172 
	`SSL_CTX_£t_ecdh_auto
(
ùx
, 1);

175 ià(
	`SSL_CTX_u£_û¹ifiÿ‹_fe
(
ùx
, 
ùx_cÚfig
->
û¹_fe
, 
SSL_FILETYPE_PEM
) <= 0) {

176 
	`ERR_”rÜ_¡ršg_n
(
	`ERR_g‘_”rÜ
(), 
”rbuf
, (errbuf));

177 
	`£rv”Log
(
LL_WARNING
, "FaedØlßd c”tifiÿ‹: %s: %s", 
ùx_cÚfig
->
û¹_fe
, 
”rbuf
);

178 
”rÜ
;

181 ià(
	`SSL_CTX_u£_Priv©eKey_fe
(
ùx
, 
ùx_cÚfig
->
key_fe
, 
SSL_FILETYPE_PEM
) <= 0) {

182 
	`ERR_”rÜ_¡ršg_n
(
	`ERR_g‘_”rÜ
(), 
”rbuf
, (errbuf));

183 
	`£rv”Log
(
LL_WARNING
, "FaedØlßd…riv©key: %s: %s", 
ùx_cÚfig
->
key_fe
, 
”rbuf
);

184 
”rÜ
;

187 ià(
	`SSL_CTX_lßd_v”ify_loÿtiÚs
(
ùx
, 
ùx_cÚfig
->
ÿ_û¹_fe
, ctx_cÚfig->
ÿ_û¹_dœ
) <= 0) {

188 
	`ERR_”rÜ_¡ršg_n
(
	`ERR_g‘_”rÜ
(), 
”rbuf
, (errbuf));

189 
	`£rv”Log
(
LL_WARNING
, "FaedØcÚfigu» CA c”tifiÿ‹(sèfe/dœeùÜy: %s", 
”rbuf
);

190 
”rÜ
;

193 ià(
ùx_cÚfig
->
dh_·¿ms_fe
) {

194 
FILE
 *
dhfe
 = 
	`fİ’
(
ùx_cÚfig
->
dh_·¿ms_fe
, "r");

195 
DH
 *
dh
 = 
NULL
;

196 ià(!
dhfe
) {

197 
	`£rv”Log
(
LL_WARNING
, "FaedØlßd %s: %s", 
ùx_cÚfig
->
dh_·¿ms_fe
, 
	`¡»¼Ü
(
”ºo
));

198 
”rÜ
;

201 
dh
 = 
	`PEM_»ad_DH·¿ms
(
dhfe
, 
NULL
, NULL, NULL);

202 
	`fşo£
(
dhfe
);

203 ià(!
dh
) {

204 
	`£rv”Log
(
LL_WARNING
, "%s: faedØ»ad DH…¬ams.", 
ùx_cÚfig
->
dh_·¿ms_fe
);

205 
”rÜ
;

208 ià(
	`SSL_CTX_£t_tmp_dh
(
ùx
, 
dh
) <= 0) {

209 
	`ERR_”rÜ_¡ršg_n
(
	`ERR_g‘_”rÜ
(), 
”rbuf
, (errbuf));

210 
	`£rv”Log
(
LL_WARNING
, "FaedØlßd DH…¬am fe: %s: %s", 
ùx_cÚfig
->
dh_·¿ms_fe
, 
”rbuf
);

211 
	`DH_ä“
(
dh
);

212 
”rÜ
;

215 
	`DH_ä“
(
dh
);

218 ià(
ùx_cÚfig
->
ch”s
 && !
	`SSL_CTX_£t_ch”_li¡
(
ùx
, ctx_config->ciphers)) {

219 
	`£rv”Log
(
LL_WARNING
, "FaedØcÚfigu» ch”s: %s", 
ùx_cÚfig
->
ch”s
);

220 
”rÜ
;

223 #ifdeà
TLS1_3_VERSION


224 ià(
ùx_cÚfig
->
ch”su™es
 && !
	`SSL_CTX_£t_ch”su™es
(
ùx
, ctx_config->ciphersuites)) {

225 
	`£rv”Log
(
LL_WARNING
, "FaedØcÚfigu» ch”su™es: %s", 
ùx_cÚfig
->
ch”su™es
);

226 
”rÜ
;

230 
	`SSL_CTX_ä“
(
»dis_s_ùx
);

231 
»dis_s_ùx
 = 
ùx
;

233  
C_OK
;

235 
”rÜ
:

236 ià(
ùx
è
	`SSL_CTX_ä“
(ctx);

237  
C_ERR
;

238 
	}
}

240 #ifdeà
TLS_DEBUGGING


241 
	#TLSCONN_DEBUG
(
fmt
, ...) \

242 
	`£rv”Log
(
LL_DEBUG
, "TLSCONN: " 
fmt
, 
__VA_ARGS__
)

	)

244 
	#TLSCONN_DEBUG
(
fmt
, ...)

	)

247 
CÚÃùiÚTy³
 
	gCT_TLS
;

265 
	mWANT_READ
 = 1,

266 
	mWANT_WRITE


267 } 
	tWªtIOTy³
;

269 
	#TLS_CONN_FLAG_READ_WANT_WRITE
 (1<<0)

	)

270 
	#TLS_CONN_FLAG_WRITE_WANT_READ
 (1<<1)

	)

271 
	#TLS_CONN_FLAG_FD_SET
 (1<<2)

	)

273 
	ss_cÚÃùiÚ
 {

274 
cÚÃùiÚ
 
	mc
;

275 
	mæags
;

276 
SSL
 *
	ms¦
;

277 *
	ms¦_”rÜ
;

278 
li¡Node
 *
	m³ndšg_li¡_node
;

279 } 
	ts_cÚÃùiÚ
;

281 
cÚÃùiÚ
 *
	$cÚnC»©eTLS
() {

282 
s_cÚÃùiÚ
 *
cÚn
 = 
	`zÿÎoc
((tls_connection));

283 
cÚn
->
c
.
ty³
 = &
CT_TLS
;

284 
cÚn
->
c
.
fd
 = -1;

285 
cÚn
->
s¦
 = 
	`SSL_Ãw
(
»dis_s_ùx
);

286  (
cÚÃùiÚ
 *è
cÚn
;

287 
	}
}

289 
cÚÃùiÚ
 *
	$cÚnC»©eAcû±edTLS
(
fd
, 
»quœe_auth
) {

290 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
	`cÚnC»©eTLS
();

291 
cÚn
->
c
.
fd
 = fd;

292 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ACCEPTING
;

294 ià(!
»quœe_auth
) {

297 
	`SSL_£t_v”ify
(
cÚn
->
s¦
, 
SSL_VERIFY_PEER
, 
NULL
);

300 
	`SSL_£t_fd
(
cÚn
->
s¦
, cÚn->
c
.
fd
);

301 
	`SSL_£t_acû±_¡©e
(
cÚn
->
s¦
);

303  (
cÚÃùiÚ
 *è
cÚn
;

304 
	}
}

306 
sEv’tHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
ş›ÁD©a
, 
mask
);

313 
	$hªdËSSLR‘uºCode
(
s_cÚÃùiÚ
 *
cÚn
, 
»t_v®ue
, 
WªtIOTy³
 *
wªt
) {

314 ià(
»t_v®ue
 <= 0) {

315 
s¦_”r
 = 
	`SSL_g‘_”rÜ
(
cÚn
->
s¦
, 
»t_v®ue
);

316 
s¦_”r
) {

317 
SSL_ERROR_WANT_WRITE
:

318 *
wªt
 = 
WANT_WRITE
;

320 
SSL_ERROR_WANT_READ
:

321 *
wªt
 = 
WANT_READ
;

323 
SSL_ERROR_SYSCALL
:

324 
cÚn
->
c
.
Ï¡_”ºo
 = 
”ºo
;

325 ià(
cÚn
->
s¦_”rÜ
è
	`zä“
(conn->ssl_error);

326 
cÚn
->
s¦_”rÜ
 = 
”ºo
 ? 
	`z¡rdup
(
	`¡»¼Ü
Ó¼no)è: 
NULL
;

330 
cÚn
->
c
.
Ï¡_”ºo
 = 0;

331 ià(
cÚn
->
s¦_”rÜ
è
	`zä“
(conn->ssl_error);

332 
cÚn
->
s¦_”rÜ
 = 
	`zm®loc
(512);

333 
	`ERR_”rÜ_¡ršg_n
(
	`ERR_g‘_”rÜ
(), 
cÚn
->
s¦_”rÜ
, 512);

337  
s¦_”r
;

341 
	}
}

343 
	$»gi¡”SSLEv’t
(
s_cÚÃùiÚ
 *
cÚn
, 
WªtIOTy³
 
wªt
) {

344 
mask
 = 
	`«G‘FeEv’ts
(
£rv”
.
–
, 
cÚn
->
c
.
fd
);

346 
wªt
) {

347 
WANT_READ
:

348 ià(
mask
 & 
AE_WRITABLE
è
	`«D–‘eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, AE_WRITABLE);

349 ià(!(
mask
 & 
AE_READABLE
)è
	`«C»©eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, AE_READABLE,

350 
sEv’tHªdËr
, 
cÚn
);

352 
WANT_WRITE
:

353 ià(
mask
 & 
AE_READABLE
è
	`«D–‘eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, AE_READABLE);

354 ià(!(
mask
 & 
AE_WRITABLE
)è
	`«C»©eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, AE_WRITABLE,

355 
sEv’tHªdËr
, 
cÚn
);

358 
	`£rv”As£¹
(0);

361 
	}
}

363 
	$upd©eSSLEv’t
(
s_cÚÃùiÚ
 *
cÚn
) {

364 
mask
 = 
	`«G‘FeEv’ts
(
£rv”
.
–
, 
cÚn
->
c
.
fd
);

365 
Ãed_»ad
 = 
cÚn
->
c
.
»ad_hªdËr
 || (cÚn->
æags
 & 
TLS_CONN_FLAG_WRITE_WANT_READ
);

366 
Ãed_wr™e
 = 
cÚn
->
c
.
wr™e_hªdËr
 || (cÚn->
æags
 & 
TLS_CONN_FLAG_READ_WANT_WRITE
);

368 ià(
Ãed_»ad
 && !(
mask
 & 
AE_READABLE
))

369 
	`«C»©eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, 
AE_READABLE
, 
sEv’tHªdËr
, conn);

370 ià(!
Ãed_»ad
 && (
mask
 & 
AE_READABLE
))

371 
	`«D–‘eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, 
AE_READABLE
);

373 ià(
Ãed_wr™e
 && !(
mask
 & 
AE_WRITABLE
))

374 
	`«C»©eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, 
AE_WRITABLE
, 
sEv’tHªdËr
, conn);

375 ià(!
Ãed_wr™e
 && (
mask
 & 
AE_WRITABLE
))

376 
	`«D–‘eFeEv’t
(
£rv”
.
–
, 
cÚn
->
c
.
fd
, 
AE_WRITABLE
);

377 
	}
}

379 
	$sHªdËEv’t
(
s_cÚÃùiÚ
 *
cÚn
, 
mask
) {

380 
»t
;

382 
	`TLSCONN_DEBUG
("tlsEventHandler(): fd=%d, state=%d, mask=%d,„=%d, w=%d, flags=%d",

383 
fd
, 
cÚn
->
c
.
¡©e
, 
mask
, cÚn->c.
»ad_hªdËr
 !ğ
NULL
, cÚn->c.
wr™e_hªdËr
 != NULL,

384 
cÚn
->
æags
);

386 
	`ERR_ş—r_”rÜ
();

388 
cÚn
->
c
.
¡©e
) {

389 
CONN_STATE_CONNECTING
:

390 ià(
	`cÚnG‘Sock‘E¼Ü
((
cÚÃùiÚ
 *è
cÚn
)) {

391 
cÚn
->
c
.
Ï¡_”ºo
 = 
”ºo
;

392 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

394 ià(!(
cÚn
->
æags
 & 
TLS_CONN_FLAG_FD_SET
)) {

395 
	`SSL_£t_fd
(
cÚn
->
s¦
, cÚn->
c
.
fd
);

396 
cÚn
->
æags
 |ğ
TLS_CONN_FLAG_FD_SET
;

398 
»t
 = 
	`SSL_cÚÃù
(
cÚn
->
s¦
);

399 ià(
»t
 <= 0) {

400 
WªtIOTy³
 
wªt
 = 0;

401 ià(!
	`hªdËSSLR‘uºCode
(
cÚn
, 
»t
, &
wªt
)) {

402 
	`»gi¡”SSLEv’t
(
cÚn
, 
wªt
);

412 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

414 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CONNECTED
;

418 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
cÚn_hªdËr
)) ;

419 
cÚn
->
c
.
cÚn_hªdËr
 = 
NULL
;

421 
CONN_STATE_ACCEPTING
:

422 
»t
 = 
	`SSL_acû±
(
cÚn
->
s¦
);

423 ià(
»t
 <= 0) {

424 
WªtIOTy³
 
wªt
 = 0;

425 ià(!
	`hªdËSSLR‘uºCode
(
cÚn
, 
»t
, &
wªt
)) {

430 
	`»gi¡”SSLEv’t
(
cÚn
, 
wªt
);

435 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

437 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CONNECTED
;

440 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
cÚn_hªdËr
)) ;

441 
cÚn
->
c
.
cÚn_hªdËr
 = 
NULL
;

443 
CONN_STATE_CONNECTED
:

445 
ÿÎ_»ad
 = ((
mask
 & 
AE_READABLE
è&& 
cÚn
->
c
.
»ad_hªdËr
) ||

446 ((
mask
 & 
AE_WRITABLE
è&& (
cÚn
->
æags
 & 
TLS_CONN_FLAG_READ_WANT_WRITE
));

447 
ÿÎ_wr™e
 = ((
mask
 & 
AE_WRITABLE
è&& 
cÚn
->
c
.
wr™e_hªdËr
) ||

448 ((
mask
 & 
AE_READABLE
è&& (
cÚn
->
æags
 & 
TLS_CONN_FLAG_WRITE_WANT_READ
));

461 
šv”t
 = 
cÚn
->
c
.
æags
 & 
CONN_FLAG_WRITE_BARRIER
;

463 ià(!
šv”t
 && 
ÿÎ_»ad
) {

464 
cÚn
->
æags
 &ğ~
TLS_CONN_FLAG_READ_WANT_WRITE
;

465 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
»ad_hªdËr
)) ;

469 ià(
ÿÎ_wr™e
) {

470 
cÚn
->
æags
 &ğ~
TLS_CONN_FLAG_WRITE_WANT_READ
;

471 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
wr™e_hªdËr
)) ;

476 ià(
šv”t
 && 
ÿÎ_»ad
) {

477 
cÚn
->
æags
 &ğ~
TLS_CONN_FLAG_READ_WANT_WRITE
;

478 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
»ad_hªdËr
)) ;

484 ià((
mask
 & 
AE_READABLE
)) {

485 ià(
	`SSL_³ndšg
(
cÚn
->
s¦
) > 0) {

486 ià(!
cÚn
->
³ndšg_li¡_node
) {

487 
	`li¡AddNodeTa
(
³ndšg_li¡
, 
cÚn
);

488 
cÚn
->
³ndšg_li¡_node
 = 
	`li¡La¡
(
³ndšg_li¡
);

490 } ià(
cÚn
->
³ndšg_li¡_node
) {

491 
	`li¡D–Node
(
³ndšg_li¡
, 
cÚn
->
³ndšg_li¡_node
);

492 
cÚn
->
³ndšg_li¡_node
 = 
NULL
;

502 
	`upd©eSSLEv’t
(
cÚn
);

503 
	}
}

505 
	$sEv’tHªdËr
(
«Ev’tLoİ
 *
–
, 
fd
, *
ş›ÁD©a
, 
mask
) {

506 
	`UNUSED
(
–
);

507 
	`UNUSED
(
fd
);

508 
s_cÚÃùiÚ
 *
cÚn
 = 
ş›ÁD©a
;

509 
	`sHªdËEv’t
(
cÚn
, 
mask
);

510 
	}
}

512 
	$cÚnTLSClo£
(
cÚÃùiÚ
 *
cÚn_
) {

513 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

515 ià(
cÚn
->
s¦
) {

516 
	`SSL_ä“
(
cÚn
->
s¦
);

517 
cÚn
->
s¦
 = 
NULL
;

520 ià(
cÚn
->
s¦_”rÜ
) {

521 
	`zä“
(
cÚn
->
s¦_”rÜ
);

522 
cÚn
->
s¦_”rÜ
 = 
NULL
;

525 ià(
cÚn
->
³ndšg_li¡_node
) {

526 
	`li¡D–Node
(
³ndšg_li¡
, 
cÚn
->
³ndšg_li¡_node
);

527 
cÚn
->
³ndšg_li¡_node
 = 
NULL
;

530 
CT_Sock‘
.
	`şo£
(
cÚn_
);

531 
	}
}

533 
	$cÚnTLSAcû±
(
cÚÃùiÚ
 *
_cÚn
, 
CÚÃùiÚC®lbackFunc
 
acû±_hªdËr
) {

534 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
_cÚn
;

535 
»t
;

537 ià(
cÚn
->
c
.
¡©e
 !ğ
CONN_STATE_ACCEPTING
è 
C_ERR
;

538 
	`ERR_ş—r_”rÜ
();

541 
cÚn
->
c
.
cÚn_hªdËr
 = 
acû±_hªdËr
;

542 
»t
 = 
	`SSL_acû±
(
cÚn
->
s¦
);

544 ià(
»t
 <= 0) {

545 
WªtIOTy³
 
wªt
 = 0;

546 ià(!
	`hªdËSSLR‘uºCode
(
cÚn
, 
»t
, &
wªt
)) {

547 
	`»gi¡”SSLEv’t
(
cÚn
, 
wªt
);

548  
C_OK
;

550 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

551  
C_ERR
;

555 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CONNECTED
;

556 ià(!
	`ÿÎHªdËr
((
cÚÃùiÚ
 *è
cÚn
, cÚn->
c
.
cÚn_hªdËr
)è 
C_OK
;

557 
cÚn
->
c
.
cÚn_hªdËr
 = 
NULL
;

559  
C_OK
;

560 
	}
}

562 
	$cÚnTLSCÚÃù
(
cÚÃùiÚ
 *
cÚn_
, cÚ¡ *
addr
, 
pÜt
, cÚ¡ *
¤c_addr
, 
CÚÃùiÚC®lbackFunc
 
cÚÃù_hªdËr
) {

563 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

565 ià(
cÚn
->
c
.
¡©e
 !ğ
CONN_STATE_NONE
è 
C_ERR
;

566 
	`ERR_ş—r_”rÜ
();

569 ià(
CT_Sock‘
.
	`cÚÃù
(
cÚn_
, 
addr
, 
pÜt
, 
¤c_addr
, 
cÚÃù_hªdËr
è=ğ
C_ERR
)  C_ERR;

574  
C_OK
;

575 
	}
}

577 
	$cÚnTLSWr™e
(
cÚÃùiÚ
 *
cÚn_
, cÚ¡ *
d©a
, 
size_t
 
d©a_Ën
) {

578 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

579 
»t
, 
s¦_”r
;

581 ià(
cÚn
->
c
.
¡©e
 !ğ
CONN_STATE_CONNECTED
)  -1;

582 
	`ERR_ş—r_”rÜ
();

583 
»t
 = 
	`SSL_wr™e
(
cÚn
->
s¦
, 
d©a
, 
d©a_Ën
);

585 ià(
»t
 <= 0) {

586 
WªtIOTy³
 
wªt
 = 0;

587 ià(!(
s¦_”r
 = 
	`hªdËSSLR‘uºCode
(
cÚn
, 
»t
, &
wªt
))) {

588 ià(
wªt
 =ğ
WANT_READ
è
cÚn
->
æags
 |ğ
TLS_CONN_FLAG_WRITE_WANT_READ
;

589 
	`upd©eSSLEv’t
(
cÚn
);

590 
”ºo
 = 
EAGAIN
;

593 ià(
s¦_”r
 =ğ
SSL_ERROR_ZERO_RETURN
 ||

594 ((
s¦_”r
 =ğ
SSL_ERROR_SYSCALL
 && !
”ºo
))) {

595 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CLOSED
;

598 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

604  
»t
;

605 
	}
}

607 
	$cÚnTLSR—d
(
cÚÃùiÚ
 *
cÚn_
, *
buf
, 
size_t
 
buf_Ën
) {

608 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

609 
»t
;

610 
s¦_”r
;

612 ià(
cÚn
->
c
.
¡©e
 !ğ
CONN_STATE_CONNECTED
)  -1;

613 
	`ERR_ş—r_”rÜ
();

614 
»t
 = 
	`SSL_»ad
(
cÚn
->
s¦
, 
buf
, 
buf_Ën
);

615 ià(
»t
 <= 0) {

616 
WªtIOTy³
 
wªt
 = 0;

617 ià(!(
s¦_”r
 = 
	`hªdËSSLR‘uºCode
(
cÚn
, 
»t
, &
wªt
))) {

618 ià(
wªt
 =ğ
WANT_WRITE
è
cÚn
->
æags
 |ğ
TLS_CONN_FLAG_READ_WANT_WRITE
;

619 
	`upd©eSSLEv’t
(
cÚn
);

621 
”ºo
 = 
EAGAIN
;

624 ià(
s¦_”r
 =ğ
SSL_ERROR_ZERO_RETURN
 ||

625 ((
s¦_”r
 =ğ
SSL_ERROR_SYSCALL
è&& !
”ºo
)) {

626 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CLOSED
;

629 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

635  
»t
;

636 
	}
}

638 cÚ¡ *
	$cÚnTLSG‘La¡E¼Ü
(
cÚÃùiÚ
 *
cÚn_
) {

639 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

641 ià(
cÚn
->
s¦_”rÜ
)  conn->ssl_error;

642  
NULL
;

643 
	}
}

645 
	$cÚnTLSS‘Wr™eHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
, 
b¬r›r
) {

646 
cÚn
->
wr™e_hªdËr
 = 
func
;

647 ià(
b¬r›r
)

648 
cÚn
->
æags
 |ğ
CONN_FLAG_WRITE_BARRIER
;

650 
cÚn
->
æags
 &ğ~
CONN_FLAG_WRITE_BARRIER
;

651 
	`upd©eSSLEv’t
((
s_cÚÃùiÚ
 *è
cÚn
);

652  
C_OK
;

653 
	}
}

655 
	$cÚnTLSS‘R—dHªdËr
(
cÚÃùiÚ
 *
cÚn
, 
CÚÃùiÚC®lbackFunc
 
func
) {

656 
cÚn
->
»ad_hªdËr
 = 
func
;

657 
	`upd©eSSLEv’t
((
s_cÚÃùiÚ
 *è
cÚn
);

658  
C_OK
;

659 
	}
}

661 
	$£tBlockšgTimeout
(
s_cÚÃùiÚ
 *
cÚn
, 
timeout
) {

662 
	`ª‘Block
(
NULL
, 
cÚn
->
c
.
fd
);

663 
	`ª‘S’dTimeout
(
NULL
, 
cÚn
->
c
.
fd
, 
timeout
);

664 
	`ª‘RecvTimeout
(
NULL
, 
cÚn
->
c
.
fd
, 
timeout
);

665 
	}
}

667 
	$un£tBlockšgTimeout
(
s_cÚÃùiÚ
 *
cÚn
) {

668 
	`ª‘NÚBlock
(
NULL
, 
cÚn
->
c
.
fd
);

669 
	`ª‘S’dTimeout
(
NULL
, 
cÚn
->
c
.
fd
, 0);

670 
	`ª‘RecvTimeout
(
NULL
, 
cÚn
->
c
.
fd
, 0);

671 
	}
}

673 
	$cÚnTLSBlockšgCÚÃù
(
cÚÃùiÚ
 *
cÚn_
, cÚ¡ *
addr
, 
pÜt
, 
timeout
) {

674 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

675 
»t
;

677 ià(
cÚn
->
c
.
¡©e
 !ğ
CONN_STATE_NONE
è 
C_ERR
;

680 ià(
CT_Sock‘
.
	`blockšg_cÚÃù
(
cÚn_
, 
addr
, 
pÜt
, 
timeout
è=ğ
C_ERR
)  C_ERR;

684 
	`SSL_£t_fd
(
cÚn
->
s¦
, cÚn->
c
.
fd
);

685 
	`£tBlockšgTimeout
(
cÚn
, 
timeout
);

687 ià((
»t
 = 
	`SSL_cÚÃù
(
cÚn
->
s¦
)) <= 0) {

688 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_ERROR
;

689  
C_ERR
;

691 
	`un£tBlockšgTimeout
(
cÚn
);

693 
cÚn
->
c
.
¡©e
 = 
CONN_STATE_CONNECTED
;

694  
C_OK
;

695 
	}
}

697 
ssize_t
 
	$cÚnTLSSyncWr™e
(
cÚÃùiÚ
 *
cÚn_
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

698 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

700 
	`£tBlockšgTimeout
(
cÚn
, 
timeout
);

701 
	`SSL_ş—r_mode
(
cÚn
->
s¦
, 
SSL_MODE_ENABLE_PARTIAL_WRITE
);

702 
»t
 = 
	`SSL_wr™e
(
cÚn
->
s¦
, 
±r
, 
size
);

703 
	`SSL_£t_mode
(
cÚn
->
s¦
, 
SSL_MODE_ENABLE_PARTIAL_WRITE
);

704 
	`un£tBlockšgTimeout
(
cÚn
);

706  
»t
;

707 
	}
}

709 
ssize_t
 
	$cÚnTLSSyncR—d
(
cÚÃùiÚ
 *
cÚn_
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

710 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

712 
	`£tBlockšgTimeout
(
cÚn
, 
timeout
);

713 
»t
 = 
	`SSL_»ad
(
cÚn
->
s¦
, 
±r
, 
size
);

714 
	`un£tBlockšgTimeout
(
cÚn
);

716  
»t
;

717 
	}
}

719 
ssize_t
 
	$cÚnTLSSyncR—dLše
(
cÚÃùiÚ
 *
cÚn_
, *
±r
, 
ssize_t
 
size
, 
timeout
) {

720 
s_cÚÃùiÚ
 *
cÚn
 = (s_cÚÃùiÚ *è
cÚn_
;

721 
ssize_t
 
Ä—d
 = 0;

723 
	`£tBlockšgTimeout
(
cÚn
, 
timeout
);

725 
size
--;

726 
size
) {

727 
c
;

729 ià(
	`SSL_»ad
(
cÚn
->
s¦
,&
c
,1) <= 0) {

730 
Ä—d
 = -1;

731 
ex™
;

733 ià(
c
 == '\n') {

734 *
±r
 = '\0';

735 ià(
Ä—d
 && *(
±r
-1) == '\r') *(ptr-1) = '\0';

736 
ex™
;

738 *
±r
++ = 
c
;

739 *
±r
 = '\0';

740 
Ä—d
++;

742 
size
--;

744 
ex™
:

745 
	`un£tBlockšgTimeout
(
cÚn
);

746  
Ä—d
;

747 
	}
}

749 
CÚÃùiÚTy³
 
	gCT_TLS
 = {

750 .
«_hªdËr
 = 
sEv’tHªdËr
,

751 .
	gacû±
 = 
cÚnTLSAcû±
,

752 .
	gcÚÃù
 = 
cÚnTLSCÚÃù
,

753 .
	gblockšg_cÚÃù
 = 
cÚnTLSBlockšgCÚÃù
,

754 .
	g»ad
 = 
cÚnTLSR—d
,

755 .
	gwr™e
 = 
cÚnTLSWr™e
,

756 .
	gşo£
 = 
cÚnTLSClo£
,

757 .
	g£t_wr™e_hªdËr
 = 
cÚnTLSS‘Wr™eHªdËr
,

758 .
	g£t_»ad_hªdËr
 = 
cÚnTLSS‘R—dHªdËr
,

759 .
	gg‘_Ï¡_”rÜ
 = 
cÚnTLSG‘La¡E¼Ü
,

760 .
	gsync_wr™e
 = 
cÚnTLSSyncWr™e
,

761 .
	gsync_»ad
 = 
cÚnTLSSyncR—d
,

762 .
	gsync_»adlše
 = 
cÚnTLSSyncR—dLše
,

765 
	$sHasP’dšgD©a
() {

766 ià(!
³ndšg_li¡
)

768  
	`li¡L’gth
(
³ndšg_li¡
) > 0;

769 
	}
}

771 
	$sProûssP’dšgD©a
() {

772 
li¡I‹r
 
li
;

773 
li¡Node
 *
Ê
;

775 
	`li¡Rewšd
(
³ndšg_li¡
,&
li
);

776 (
Ê
 = 
	`li¡Next
(&
li
))) {

777 
s_cÚÃùiÚ
 *
cÚn
 = 
	`li¡NodeV®ue
(
Ê
);

778 
	`sHªdËEv’t
(
cÚn
, 
AE_READABLE
);

780 
	}
}

784 
	$sIn™
() {

785 
	}
}

787 
	$sCÚfigu»
(
»disTLSCÚ‹xtCÚfig
 *
ùx_cÚfig
) {

788 
	`UNUSED
(
ùx_cÚfig
);

789  
C_OK
;

790 
	}
}

792 
cÚÃùiÚ
 *
	$cÚnC»©eTLS
() {

793  
NULL
;

794 
	}
}

796 
cÚÃùiÚ
 *
	$cÚnC»©eAcû±edTLS
(
fd
, 
»quœe_auth
) {

797 
	`UNUSED
(
fd
);

798 
	`UNUSED
(
»quœe_auth
);

800  
NULL
;

801 
	}
}

803 
	$sHasP’dšgD©a
() {

805 
	}
}

807 
	$sProûssP’dšgD©a
() {

808 
	}
}

	@tracking.c

31 
	~"£rv”.h
"

44 
¿x
 *
	gT¿ckšgTabË
 = 
NULL
;

45 
¿x
 *
	gP»fixTabË
 = 
NULL
;

46 
ušt64_t
 
	gT¿ckšgTabËTÙ®I‹ms
 = 0;

50 
robj
 *
	gT¿ckšgChªÃlName
;

55 
	sbÿ¡S‹
 {

56 
¿x
 *
	mkeys
;

57 
¿x
 *
	mş›Ás
;

59 } 
	tbÿ¡S‹
;

67 
	$di§bËT¿ckšg
(
ş›Á
 *
c
) {

70 ià(
c
->
æags
 & 
CLIENT_TRACKING_BCAST
) {

71 
¿xI‹¿tÜ
 
ri
;

72 
	`¿xS¹
(&
ri
,
c
->
ş›Á_Œackšg_´efixes
);

73 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

74 
	`¿xNext
(&
ri
)) {

75 
bÿ¡S‹
 *
bs
 = 
	`¿xFšd
(
P»fixTabË
,
ri
.
key
,ri.
key_Ën
);

76 
	`£rv”As£¹
(
bs
 !ğ
¿xNÙFound
);

77 
	`¿xRemove
(
bs
->
ş›Ás
,(*)&
c
,(c),
NULL
);

80 ià(
	`¿xSize
(
bs
->
ş›Ás
) == 0) {

81 
	`¿xF»e
(
bs
->
ş›Ás
);

82 
	`¿xF»e
(
bs
->
keys
);

83 
	`zä“
(
bs
);

84 
	`¿xRemove
(
P»fixTabË
,
ri
.
key
,ri.
key_Ën
,
NULL
);

87 
	`¿xStİ
(&
ri
);

88 
	`¿xF»e
(
c
->
ş›Á_Œackšg_´efixes
);

89 
c
->
ş›Á_Œackšg_´efixes
 = 
NULL
;

93 ià(
c
->
æags
 & 
CLIENT_TRACKING
) {

94 
£rv”
.
Œackšg_ş›Ás
--;

95 
c
->
æags
 &ğ~(
CLIENT_TRACKING
|
CLIENT_TRACKING_BROKEN_REDIR
|

96 
CLIENT_TRACKING_BCAST
|
CLIENT_TRACKING_OPTIN
|

97 
CLIENT_TRACKING_OPTOUT
|
CLIENT_TRACKING_CACHING
|

98 
CLIENT_TRACKING_NOLOOP
);

100 
	}
}

104 
	$’abËBÿ¡T¿ckšgFÜP»fix
(
ş›Á
 *
c
, *
´efix
, 
size_t
 
¶’
) {

105 
bÿ¡S‹
 *
bs
 = 
	`¿xFšd
(
P»fixTabË
,(*)
´efix
,
	`sd¦’
(prefix));

108 ià(
bs
 =ğ
¿xNÙFound
) {

109 
bs
 = 
	`zm®loc
((*bs));

110 
bs
->
keys
 = 
	`¿xNew
();

111 
bs
->
ş›Ás
 = 
	`¿xNew
();

112 
	`¿xIn£¹
(
P»fixTabË
,(*)
´efix
,
¶’
,
bs
,
NULL
);

114 ià(
	`¿xTryIn£¹
(
bs
->
ş›Ás
,(*)&
c
,(c),
NULL
,NULL)) {

115 ià(
c
->
ş›Á_Œackšg_´efixes
 =ğ
NULL
)

116 
c
->
ş›Á_Œackšg_´efixes
 = 
	`¿xNew
();

117 
	`¿xIn£¹
(
c
->
ş›Á_Œackšg_´efixes
,

118 (*)
´efix
,
¶’
,
NULL
,NULL);

120 
	}
}

129 
	$’abËT¿ckšg
(
ş›Á
 *
c
, 
ušt64_t
 
»dœeù_to
, ušt64_ˆ
İtiÚs
, 
robj
 **
´efix
, 
size_t
 
num´efix
) {

130 ià(!(
c
->
æags
 & 
CLIENT_TRACKING
)è
£rv”
.
Œackšg_ş›Ás
++;

131 
c
->
æags
 |ğ
CLIENT_TRACKING
;

132 
c
->
æags
 &ğ~(
CLIENT_TRACKING_BROKEN_REDIR
|
CLIENT_TRACKING_BCAST
|

133 
CLIENT_TRACKING_OPTIN
|
CLIENT_TRACKING_OPTOUT
|

134 
CLIENT_TRACKING_NOLOOP
);

135 
c
->
ş›Á_Œackšg_»dœeùiÚ
 = 
»dœeù_to
;

139 ià(
T¿ckšgTabË
 =ğ
NULL
) {

140 
T¿ckšgTabË
 = 
	`¿xNew
();

141 
P»fixTabË
 = 
	`¿xNew
();

142 
T¿ckšgChªÃlName
 = 
	`ü—‹SŒšgObjeù
("__redis__:invalidate",20);

146 ià(
İtiÚs
 & 
CLIENT_TRACKING_BCAST
) {

147 
c
->
æags
 |ğ
CLIENT_TRACKING_BCAST
;

148 ià(
num´efix
 =ğ0è
	`’abËBÿ¡T¿ckšgFÜP»fix
(
c
,"",0);

149 
size_t
 
j
 = 0; j < 
num´efix
; j++) {

150 
sds
 
sd¥»fix
 = 
´efix
[
j
]->
±r
;

151 
	`’abËBÿ¡T¿ckšgFÜP»fix
(
c
,
sd¥»fix
,
	`sd¦’
(sdsprefix));

156 
c
->
æags
 |ğ
İtiÚs
 & (
CLIENT_TRACKING_OPTIN
|
CLIENT_TRACKING_OPTOUT
|

157 
CLIENT_TRACKING_NOLOOP
);

158 
	}
}

166 
	$ŒackšgRememb”Keys
(
ş›Á
 *
c
) {

169 
ušt64_t
 
İtš
 = 
c
->
æags
 & 
CLIENT_TRACKING_OPTIN
;

170 
ušt64_t
 
İtout
 = 
c
->
æags
 & 
CLIENT_TRACKING_OPTOUT
;

171 
ušt64_t
 
ÿchšg_giv’
 = 
c
->
æags
 & 
CLIENT_TRACKING_CACHING
;

172 ià((
İtš
 && !
ÿchšg_giv’
è|| (
İtout
 && caching_given)) ;

174 
numkeys
;

175 *
keys
 = 
	`g‘KeysFromCommªd
(
c
->
cmd
,c->
¬gv
,c->
¬gc
,&
numkeys
);

176 ià(
keys
 =ğ
NULL
) ;

178 
j
 = 0; j < 
numkeys
; j++) {

179 
idx
 = 
keys
[
j
];

180 
sds
 
sdskey
 = 
c
->
¬gv
[
idx
]->
±r
;

181 
¿x
 *
ids
 = 
	`¿xFšd
(
T¿ckšgTabË
,(*)
sdskey
,
	`sd¦’
(sdskey));

182 ià(
ids
 =ğ
¿xNÙFound
) {

183 
ids
 = 
	`¿xNew
();

184 
š£¹ed
 = 
	`¿xTryIn£¹
(
T¿ckšgTabË
,(*)
sdskey
,

185 
	`sd¦’
(
sdskey
),
ids
, 
NULL
);

186 
	`£rv”As£¹
(
š£¹ed
 == 1);

188 ià(
	`¿xTryIn£¹
(
ids
,(*)&
c
->
id
,(c->id),
NULL
,NULL))

189 
T¿ckšgTabËTÙ®I‹ms
++;

191 
	`g‘KeysF»eResuÉ
(
keys
);

192 
	}
}

204 
	$£ndT¿ckšgMes§ge
(
ş›Á
 *
c
, *
keyÇme
, 
size_t
 
keyËn
, 
´Ùo
) {

205 
usšg_»dœeùiÚ
 = 0;

206 ià(
c
->
ş›Á_Œackšg_»dœeùiÚ
) {

207 
ş›Á
 *
»dœ
 = 
	`lookupCl›ÁByID
(
c
->
ş›Á_Œackšg_»dœeùiÚ
);

208 ià(!
»dœ
) {

212 ià(
c
->
»¥
 > 2) {

213 
	`addR•lyPushL’
(
c
,3);

214 
	`addR•lyBulkCBufãr
(
c
,"tracking-redir-broken",21);

215 
	`addR•lyLÚgLÚg
(
c
,c->
ş›Á_Œackšg_»dœeùiÚ
);

219 
c
 = 
»dœ
;

220 
usšg_»dœeùiÚ
 = 1;

227 ià(
c
->
»¥
 > 2) {

228 
	`addR•lyPushL’
(
c
,2);

229 
	`addR•lyBulkCBufãr
(
c
,"invalidate",10);

230 } ià(
usšg_»dœeùiÚ
 && 
c
->
æags
 & 
CLIENT_PUBSUB
) {

233 
	`addR•lyPubsubMes§ge
(
c
,
T¿ckšgChªÃlName
,
NULL
);

243 ià(
´Ùo
) {

244 
	`addR•lyPrÙo
(
c
,
keyÇme
,
keyËn
);

246 
	`addR•lyA¼ayL’
(
c
,1);

247 
	`addR•lyBulkCBufãr
(
c
,
keyÇme
,
keyËn
);

249 
	}
}

257 
	$ŒackšgRememb”KeyToBrßdÿ¡
(
ş›Á
 *
c
, *
keyÇme
, 
size_t
 
keyËn
) {

258 
¿xI‹¿tÜ
 
ri
;

259 
	`¿xS¹
(&
ri
,
P»fixTabË
);

260 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

261 
	`¿xNext
(&
ri
)) {

262 ià(
ri
.
key_Ën
 > 
keyËn
) ;

263 ià(
ri
.
key_Ën
 !ğ0 && 
	`memcmp
Ôi.
key
,
keyÇme
,ri.key_len) != 0)

265 
bÿ¡S‹
 *
bs
 = 
ri
.
d©a
;

270 
	`¿xTryIn£¹
(
bs
->
keys
,(*)
keyÇme
,
keyËn
,
c
,
NULL
);

272 
	`¿xStİ
(&
ri
);

273 
	}
}

283 
	$ŒackšgInv®id©eKey
(
ş›Á
 *
c
, 
robj
 *
keyobj
) {

284 ià(
T¿ckšgTabË
 =ğ
NULL
) ;

285 
sds
 
sdskey
 = 
keyobj
->
±r
;

287 ià(
	`¿xSize
(
P»fixTabË
) > 0)

288 
	`ŒackšgRememb”KeyToBrßdÿ¡
(
c
,
sdskey
,
	`sd¦’
(sdskey));

290 
¿x
 *
ids
 = 
	`¿xFšd
(
T¿ckšgTabË
,(*)
sdskey
,
	`sd¦’
(sdskey));

291 ià(
ids
 =ğ
¿xNÙFound
) ;

293 
¿xI‹¿tÜ
 
ri
;

294 
	`¿xS¹
(&
ri
,
ids
);

295 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

296 
	`¿xNext
(&
ri
)) {

297 
ušt64_t
 
id
;

298 
	`memıy
(&
id
,
ri
.
key
,(id));

299 
ş›Á
 *
rg‘
 = 
	`lookupCl›ÁByID
(
id
);

305 ià(
rg‘
 =ğ
NULL
 ||

306 !(
rg‘
->
æags
 & 
CLIENT_TRACKING
)||

307 
rg‘
->
æags
 & 
CLIENT_TRACKING_BCAST
)

314 ià(
rg‘
->
æags
 & 
CLIENT_TRACKING_NOLOOP
 &&

315 
rg‘
 =ğ
c
)

320 
	`£ndT¿ckšgMes§ge
(
rg‘
,
sdskey
,
	`sd¦’
(sdskey),0);

322 
	`¿xStİ
(&
ri
);

326 
T¿ckšgTabËTÙ®I‹ms
 -ğ
	`¿xSize
(
ids
);

327 
	`¿xF»e
(
ids
);

328 
	`¿xRemove
(
T¿ckšgTabË
,(*)
sdskey
,
	`sd¦’
(sdskey),
NULL
);

329 
	}
}

338 
	$ä“T¿ckšgRadixT»e
(*
¹
) {

339 
	`¿xF»e
(
¹
);

340 
	}
}

342 
	$ŒackšgInv®id©eKeysOnFlush
(
dbid
) {

343 ià(
£rv”
.
Œackšg_ş›Ás
) {

344 
li¡Node
 *
Ê
;

345 
li¡I‹r
 
li
;

346 
	`li¡Rewšd
(
£rv”
.
ş›Ás
,&
li
);

347 (
Ê
 = 
	`li¡Next
(&
li
)è!ğ
NULL
) {

348 
ş›Á
 *
c
 = 
	`li¡NodeV®ue
(
Ê
);

349 ià(
c
->
æags
 & 
CLIENT_TRACKING
) {

350 
	`£ndT¿ckšgMes§ge
(
c
,"",1,0);

356 ià(
dbid
 =ğ-1 && 
T¿ckšgTabË
) {

357 
	`¿xF»eW™hC®lback
(
T¿ckšgTabË
,
ä“T¿ckšgRadixT»e
);

358 
T¿ckšgTabË
 = 
	`¿xNew
();

359 
T¿ckšgTabËTÙ®I‹ms
 = 0;

361 
	}
}

373 
	$ŒackšgLim™U£dSlÙs
() {

374 
timeout_couÁ”
 = 0;

375 ià(
T¿ckšgTabË
 =ğ
NULL
) ;

376 ià(
£rv”
.
Œackšg_bË_max_keys
 == 0) ;

377 
size_t
 
max_keys
 = 
£rv”
.
Œackšg_bË_max_keys
;

378 ià(
	`¿xSize
(
T¿ckšgTabË
è<ğ
max_keys
) {

379 
timeout_couÁ”
 = 0;

386 
effÜt
 = 100 * (
timeout_couÁ”
+1);

389 
¿xI‹¿tÜ
 
ri
;

390 
	`¿xS¹
(&
ri
,
T¿ckšgTabË
);

391 
effÜt
 > 0) {

392 
effÜt
--;

393 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

394 
	`¿xRªdomW®k
(&
ri
,0);

395 
¿x
 *
ids
 = 
ri
.
d©a
;

396 
T¿ckšgTabËTÙ®I‹ms
 -ğ
	`¿xSize
(
ids
);

397 
	`¿xF»e
(
ids
);

398 
	`¿xRemove
(
T¿ckšgTabË
,
ri
.
key
,ri.
key_Ën
,
NULL
);

399 ià(
	`¿xSize
(
T¿ckšgTabË
è<ğ
max_keys
) {

400 
timeout_couÁ”
 = 0;

401 
	`¿xStİ
(&
ri
);

408 
	`¿xStİ
(&
ri
);

409 
timeout_couÁ”
++;

410 
	}
}

418 
sds
 
	$ŒackšgBudBrßdÿ¡R•ly
(
ş›Á
 *
c
, 
¿x
 *
keys
) {

419 
¿xI‹¿tÜ
 
ri
;

420 
ušt64_t
 
couÁ
;

422 ià(
c
 =ğ
NULL
) {

423 
couÁ
 = 
	`¿xSize
(
keys
);

425 
couÁ
 = 0;

426 
	`¿xS¹
(&
ri
,
keys
);

427 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

428 
	`¿xNext
(&
ri
)) {

429 ià(
ri
.
d©a
 !ğ
c
è
couÁ
++;

431 
	`¿xStİ
(&
ri
);

433 ià(
couÁ
 =ğ0è 
NULL
;

438 
buf
[32];

439 
size_t
 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
couÁ
);

440 
sds
 
´Ùo
 = 
	`sd£m±y
();

441 
´Ùo
 = 
	`sdsMakeRoomFÜ
ÕrÙo,
couÁ
*15);

442 
´Ùo
 = 
	`sdsÿ’
(proto,"*",1);

443 
´Ùo
 = 
	`sdsÿ’
ÕrÙo,
buf
,
Ën
);

444 
´Ùo
 = 
	`sdsÿ’
(proto,"\r\n",2);

445 
	`¿xS¹
(&
ri
,
keys
);

446 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

447 
	`¿xNext
(&
ri
)) {

448 ià(
c
 && 
ri
.
d©a
 == c) ;

449 
Ën
 = 
	`Î2¡ršg
(
buf
,(buf),
ri
.
key_Ën
);

450 
´Ùo
 = 
	`sdsÿ’
(proto,"$",1);

451 
´Ùo
 = 
	`sdsÿ’
ÕrÙo,
buf
,
Ën
);

452 
´Ùo
 = 
	`sdsÿ’
(proto,"\r\n",2);

453 
´Ùo
 = 
	`sdsÿ’
ÕrÙo,
ri
.
key
,ri.
key_Ën
);

454 
´Ùo
 = 
	`sdsÿ’
(proto,"\r\n",2);

456 
	`¿xStİ
(&
ri
);

457  
´Ùo
;

458 
	}
}

463 
	$ŒackšgBrßdÿ¡Inv®id©iÚMes§ges
() {

464 
¿xI‹¿tÜ
 
ri
, 
ri2
;

467 ià(
T¿ckšgTabË
 =ğ
NULL
 || !
£rv”
.
Œackšg_ş›Ás
) ;

469 
	`¿xS¹
(&
ri
,
P»fixTabË
);

470 
	`¿xS“k
(&
ri
,"^",
NULL
,0);

473 
	`¿xNext
(&
ri
)) {

474 
bÿ¡S‹
 *
bs
 = 
ri
.
d©a
;

476 ià(
	`¿xSize
(
bs
->
keys
)) {

479 
sds
 
´Ùo
 = 
	`ŒackšgBudBrßdÿ¡R•ly
(
NULL
,
bs
->
keys
);

482 
	`¿xS¹
(&
ri2
,
bs
->
ş›Ás
);

483 
	`¿xS“k
(&
ri2
,"^",
NULL
,0);

484 
	`¿xNext
(&
ri2
)) {

485 
ş›Á
 *
c
;

486 
	`memıy
(&
c
,
ri2
.
key
,(c));

487 ià(
c
->
æags
 & 
CLIENT_TRACKING_NOLOOP
) {

489 
sds
 
adhoc
 = 
	`ŒackšgBudBrßdÿ¡R•ly
(
c
,
bs
->
keys
);

490 ià(
adhoc
) {

491 
	`£ndT¿ckšgMes§ge
(
c
,
adhoc
,
	`sd¦’
(adhoc),1);

492 
	`sdsä“
(
adhoc
);

495 
	`£ndT¿ckšgMes§ge
(
c
,
´Ùo
,
	`sd¦’
(proto),1);

498 
	`¿xStİ
(&
ri2
);

503 
	`sdsä“
(
´Ùo
);

505 
	`¿xF»e
(
bs
->
keys
);

506 
bs
->
keys
 = 
	`¿xNew
();

508 
	`¿xStİ
(&
ri
);

509 
	}
}

513 
ušt64_t
 
	$ŒackšgG‘TÙ®I‹ms
() {

514  
T¿ckšgTabËTÙ®I‹ms
;

515 
	}
}

517 
ušt64_t
 
	$ŒackšgG‘TÙ®Keys
() {

518 ià(
T¿ckšgTabË
 =ğ
NULL
)  0;

519  
	`¿xSize
(
T¿ckšgTabË
);

520 
	}
}

522 
ušt64_t
 
	$ŒackšgG‘TÙ®P»fixes
() {

523 ià(
P»fixTabË
 =ğ
NULL
)  0;

524  
	`¿xSize
(
P»fixTabË
);

525 
	}
}

	@util.c

30 
	~"fmaüos.h
"

31 
	~<¡dlib.h
>

32 
	~<¡dio.h
>

33 
	~<¡ršg.h
>

34 
	~<ùy³.h
>

35 
	~<lim™s.h
>

36 
	~<m©h.h
>

37 
	~<uni¡d.h
>

38 
	~<sys/time.h
>

39 
	~<æßt.h
>

40 
	~<¡dšt.h
>

41 
	~<”ºo.h
>

42 
	~<time.h
>

44 
	~"ut.h
"

45 
	~"sha256.h
"

48 
	$¡ršgm©chËn
(cÚ¡ *
·‰”n
, 
·‰”nL’
,

49 cÚ¡ *
¡ršg
, 
¡ršgL’
, 
noÿ£
)

51 
·‰”nL’
 && 
¡ršgL’
) {

52 
·‰”n
[0]) {

54 
·‰”nL’
 && 
·‰”n
[1] == '*') {

55 
·‰”n
++;

56 
·‰”nL’
--;

58 ià(
·‰”nL’
 == 1)

60 
¡ršgL’
) {

61 ià(
	`¡ršgm©chËn
(
·‰”n
+1, 
·‰”nL’
-1,

62 
¡ršg
, 
¡ršgL’
, 
noÿ£
))

64 
¡ršg
++;

65 
¡ršgL’
--;

70 
¡ršg
++;

71 
¡ršgL’
--;

75 
nÙ
, 
m©ch
;

77 
·‰”n
++;

78 
·‰”nL’
--;

79 
nÙ
 = 
·‰”n
[0] == '^';

80 ià(
nÙ
) {

81 
·‰”n
++;

82 
·‰”nL’
--;

84 
m©ch
 = 0;

86 ià(
·‰”n
[0] =ğ'\\' && 
·‰”nL’
 >= 2) {

87 
·‰”n
++;

88 
·‰”nL’
--;

89 ià(
·‰”n
[0] =ğ
¡ršg
[0])

90 
m©ch
 = 1;

91 } ià(
·‰”n
[0] == ']') {

93 } ià(
·‰”nL’
 == 0) {

94 
·‰”n
--;

95 
·‰”nL’
++;

97 } ià(
·‰”nL’
 >ğ3 && 
·‰”n
[1] == '-') {

98 
¡¬t
 = 
·‰”n
[0];

99 
’d
 = 
·‰”n
[2];

100 
c
 = 
¡ršg
[0];

101 ià(
¡¬t
 > 
’d
) {

102 
t
 = 
¡¬t
;

103 
¡¬t
 = 
’d
;

104 
’d
 = 
t
;

106 ià(
noÿ£
) {

107 
¡¬t
 = 
	`tŞow”
(start);

108 
’d
 = 
	`tŞow”
(end);

109 
c
 = 
	`tŞow”
(c);

111 
·‰”n
 += 2;

112 
·‰”nL’
 -= 2;

113 ià(
c
 >ğ
¡¬t
 && c <ğ
’d
)

114 
m©ch
 = 1;

116 ià(!
noÿ£
) {

117 ià(
·‰”n
[0] =ğ
¡ršg
[0])

118 
m©ch
 = 1;

120 ià(
	`tŞow”
(()
·‰”n
[0]è=ğtŞow”(()
¡ršg
[0]))

121 
m©ch
 = 1;

124 
·‰”n
++;

125 
·‰”nL’
--;

127 ià(
nÙ
)

128 
m©ch
 = !match;

129 ià(!
m©ch
)

131 
¡ršg
++;

132 
¡ršgL’
--;

136 ià(
·‰”nL’
 >= 2) {

137 
·‰”n
++;

138 
·‰”nL’
--;

142 ià(!
noÿ£
) {

143 ià(
·‰”n
[0] !ğ
¡ršg
[0])

146 ià(
	`tŞow”
(()
·‰”n
[0]è!ğtŞow”(()
¡ršg
[0]))

149 
¡ršg
++;

150 
¡ršgL’
--;

153 
·‰”n
++;

154 
·‰”nL’
--;

155 ià(
¡ršgL’
 == 0) {

156 *
·‰”n
 == '*') {

157 
·‰”n
++;

158 
·‰”nL’
--;

163 ià(
·‰”nL’
 =ğ0 && 
¡ršgL’
 == 0)

166 
	}
}

168 
	$¡ršgm©ch
(cÚ¡ *
·‰”n
, cÚ¡ *
¡ršg
, 
noÿ£
) {

169  
	`¡ršgm©chËn
(
·‰”n
,
	`¡¾’
Õ©‹º),
¡ršg
,¡¾’(¡ršg),
noÿ£
);

170 
	}
}

173 
	$¡ršgm©chËn_fuzz_‹¡
() {

174 
¡r
[32];

175 
·t
[32];

176 
cyşes
 = 10000000;

177 
tÙ®_m©ches
 = 0;

178 
cyşes
--) {

179 
¡¾’
 = 
	`¿nd
(è% (
¡r
);

180 
·’
 = 
	`¿nd
(è% (
·t
);

181 
j
 = 0; j < 
¡¾’
; j++è
¡r
[j] = 
	`¿nd
() % 128;

182 
j
 = 0; j < 
·’
; j++è
·t
[j] = 
	`¿nd
() % 128;

183 
tÙ®_m©ches
 +ğ
	`¡ršgm©chËn
(
·t
, 
·’
, 
¡r
, 
¡¾’
, 0);

185  
tÙ®_m©ches
;

186 
	}
}

195 
	$memtŞl
(cÚ¡ *
p
, *
”r
) {

196 cÚ¡ *
u
;

197 
buf
[128];

198 
mul
;

199 
v®
;

200 
dig™s
;

202 ià(
”r
) *err = 0;

205 
u
 = 
p
;

206 ià(*
u
 == '-') u++;

207 *
u
 && 
	`isdig™
(*u)) u++;

208 ià(*
u
 =ğ'\0' || !
	`¡rÿ£cmp
(u,"b")) {

209 
mul
 = 1;

210 } ià(!
	`¡rÿ£cmp
(
u
,"k")) {

211 
mul
 = 1000;

212 } ià(!
	`¡rÿ£cmp
(
u
,"kb")) {

213 
mul
 = 1024;

214 } ià(!
	`¡rÿ£cmp
(
u
,"m")) {

215 
mul
 = 1000*1000;

216 } ià(!
	`¡rÿ£cmp
(
u
,"mb")) {

217 
mul
 = 1024*1024;

218 } ià(!
	`¡rÿ£cmp
(
u
,"g")) {

219 
mul
 = 1000L*1000*1000;

220 } ià(!
	`¡rÿ£cmp
(
u
,"gb")) {

221 
mul
 = 1024L*1024*1024;

223 ià(
”r
) *err = 1;

229 
dig™s
 = 
u
-
p
;

230 ià(
dig™s
 >ğ(
buf
)) {

231 ià(
”r
) *err = 1;

234 
	`memıy
(
buf
,
p
,
dig™s
);

235 
buf
[
dig™s
] = '\0';

237 *
’d±r
;

238 
”ºo
 = 0;

239 
v®
 = 
	`¡¹Şl
(
buf
,&
’d±r
,10);

240 ià((
v®
 =ğ0 && 
”ºo
 =ğ
EINVAL
è|| *
’d±r
 != '\0') {

241 ià(
”r
) *err = 1;

244  
v®
*
mul
;

245 
	}
}

249 
ušt32_t
 
	$dig™s10
(
ušt64_t
 
v
) {

250 ià(
v
 < 10)  1;

251 ià(
v
 < 100)  2;

252 ià(
v
 < 1000)  3;

253 ià(
v
 < 1000000000000UL) {

254 ià(
v
 < 100000000UL) {

255 ià(
v
 < 1000000) {

256 ià(
v
 < 10000)  4;

257  5 + (
v
 >= 100000);

259  7 + (
v
 >= 10000000UL);

261 ià(
v
 < 10000000000UL) {

262  9 + (
v
 >= 1000000000UL);

264  11 + (
v
 >= 100000000000UL);

266  12 + 
	`dig™s10
(
v
 / 1000000000000UL);

267 
	}
}

270 
ušt32_t
 
	$sdig™s10
(
št64_t
 
v
) {

271 ià(
v
 < 0) {

273 
ušt64_t
 
uv
 = (
v
 !ğ
LLONG_MIN
) ?

274 (
ušt64_t
)-
v
 : ((ušt64_tè
LLONG_MAX
)+1;

275  
	`dig™s10
(
uv
)+1;

277  
	`dig™s10
(
v
);

279 
	}
}

292 
	$Î2¡ršg
(*
d¡
, 
size_t
 
d¡Ën
, 
sv®ue
) {

293 cÚ¡ 
dig™s
[201] =

299 
Ãg©ive
;

300 
v®ue
;

304 ià(
sv®ue
 < 0) {

305 ià(
sv®ue
 !ğ
LLONG_MIN
) {

306 
v®ue
 = -
sv®ue
;

308 
v®ue
 = ((è
LLONG_MAX
)+1;

310 
Ãg©ive
 = 1;

312 
v®ue
 = 
sv®ue
;

313 
Ãg©ive
 = 0;

317 
ušt32_t
 cÚ¡ 
Ëngth
 = 
	`dig™s10
(
v®ue
)+
Ãg©ive
;

318 ià(
Ëngth
 >ğ
d¡Ën
)  0;

321 
ušt32_t
 
Ãxt
 = 
Ëngth
;

322 
d¡
[
Ãxt
] = '\0';

323 
Ãxt
--;

324 
v®ue
 >= 100) {

325 cÚ¡ 
i
 = (
v®ue
 % 100) * 2;

326 
v®ue
 /= 100;

327 
d¡
[
Ãxt
] = 
dig™s
[
i
 + 1];

328 
d¡
[
Ãxt
 - 1] = 
dig™s
[
i
];

329 
Ãxt
 -= 2;

333 ià(
v®ue
 < 10) {

334 
d¡
[
Ãxt
] = '0' + (
ušt32_t
è
v®ue
;

336 
i
 = (
ušt32_t
è
v®ue
 * 2;

337 
d¡
[
Ãxt
] = 
dig™s
[
i
 + 1];

338 
d¡
[
Ãxt
 - 1] = 
dig™s
[
i
];

342 ià(
Ãg©ive
è
d¡
[0] = '-';

343  
Ëngth
;

344 
	}
}

358 
	$¡ršg2Î
(cÚ¡ *
s
, 
size_t
 
¦’
, *
v®ue
) {

359 cÚ¡ *
p
 = 
s
;

360 
size_t
 
¶’
 = 0;

361 
Ãg©ive
 = 0;

362 
v
;

365 ià(
¶’
 =ğ
¦’
)

369 ià(
¦’
 =ğ1 && 
p
[0] == '0') {

370 ià(
v®ue
 !ğ
NULL
) *value = 0;

376 ià(
p
[0] == '-') {

377 
Ãg©ive
 = 1;

378 
p
++; 
¶’
++;

381 ià(
¶’
 =ğ
¦’
)

386 ià(
p
[0] >= '1' &&…[0] <= '9') {

387 
v
 = 
p
[0]-'0';

388 
p
++; 
¶’
++;

394 
¶’
 < 
¦’
 && 
p
[0] >= '0' &&…[0] <= '9') {

395 ià(
v
 > (
ULLONG_MAX
 / 10))

397 
v
 *= 10;

399 ià(
v
 > (
ULLONG_MAX
 - (
p
[0]-'0')))

401 
v
 +ğ
p
[0]-'0';

403 
p
++; 
¶’
++;

407 ià(
¶’
 < 
¦’
)

412 ià(
Ãg©ive
) {

413 ià(
v
 > (()(-(
LLONG_MIN
+1))+1))

415 ià(
v®ue
 !ğ
NULL
è*v®uğ-
v
;

417 ià(
v
 > 
LLONG_MAX
)

419 ià(
v®ue
 !ğ
NULL
è*v®uğ
v
;

422 
	}
}

429 
	$¡ršg2uÎ
(cÚ¡ *
s
, *
v®ue
) {

430 
Î
;

431 ià(
	`¡ršg2Î
(
s
,
	`¡¾’
(s),&
Î
)) {

432 ià(
Î
 < 0)  0;

433 *
v®ue
 = 
Î
;

436 
”ºo
 = 0;

437 *
’d±r
 = 
NULL
;

438 *
v®ue
 = 
	`¡¹ouÎ
(
s
,&
’d±r
,10);

439 ià(
”ºo
 =ğ
EINVAL
 ||ƒ¼nØ=ğ
ERANGE
 || !(*
s
 !ğ'\0' && *
’d±r
 == '\0'))

442 
	}
}

447 
	$¡ršg2l
(cÚ¡ *
s
, 
size_t
 
¦’
, *
lv®
) {

448 
Îv®
;

450 ià(!
	`¡ršg2Î
(
s
,
¦’
,&
Îv®
))

453 ià(
Îv®
 < 
LONG_MIN
 ||†lv® > 
LONG_MAX
)

456 *
lv®
 = ()
Îv®
;

458 
	}
}

467 
	$¡ršg2ld
(cÚ¡ *
s
, 
size_t
 
¦’
, *
dp
) {

468 
buf
[
MAX_LONG_DOUBLE_CHARS
];

469 
v®ue
;

470 *
•Œ
;

472 ià(
¦’
 =ğ0 || sËÀ>ğ(
buf
))  0;

473 
	`memıy
(
buf
,
s
,
¦’
);

474 
buf
[
¦’
] = '\0';

476 
”ºo
 = 0;

477 
v®ue
 = 
	`¡¹Şd
(
buf
, &
•Œ
);

478 ià(
	`is¥aû
(
buf
[0]è|| 
•Œ
[0] != '\0' ||

479 (
size_t
)(
•Œ
-
buf
è!ğ
¦’
 ||

480 (
”ºo
 =ğ
ERANGE
 &&

481 (
v®ue
 =ğ
HUGE_VAL
 || value == -HUGE_VAL || value == 0)) ||

482 
”ºo
 =ğ
EINVAL
 ||

483 
	`i¢ª
(
v®ue
))

486 ià(
dp
è*d°ğ
v®ue
;

488 
	}
}

497 
	$¡ršg2d
(cÚ¡ *
s
, 
size_t
 
¦’
, *
dp
) {

498 
”ºo
 = 0;

499 *
•Œ
;

500 *
dp
 = 
	`¡¹od
(
s
, &
•Œ
);

501 ià(
¦’
 == 0 ||

502 
	`is¥aû
(((cÚ¡ *)
s
)[0]) ||

503 (
size_t
)(
•Œ
-(*)
s
è!ğ
¦’
 ||

504 (
”ºo
 =ğ
ERANGE
 &&

505 (*
dp
 =ğ
HUGE_VAL
 || *dp == -HUGE_VAL || *dp == 0)) ||

506 
	`i¢ª
(*
dp
))

509 
	}
}

516 
	$d2¡ršg
(*
buf
, 
size_t
 
Ën
, 
v®ue
) {

517 ià(
	`i¢ª
(
v®ue
)) {

518 
Ën
 = 
	`¢´štf
(
buf
,len,"nan");

519 } ià(
	`isšf
(
v®ue
)) {

520 ià(
v®ue
 < 0)

521 
Ën
 = 
	`¢´štf
(
buf
,len,"-inf");

523 
Ën
 = 
	`¢´štf
(
buf
,len,"inf");

524 } ià(
v®ue
 == 0) {

526 ià(1.0/
v®ue
 < 0)

527 
Ën
 = 
	`¢´štf
(
buf
,len,"-0");

529 
Ën
 = 
	`¢´štf
(
buf
,len,"0");

531 #ià(
DBL_MANT_DIG
 >ğ52è&& (
LLONG_MAX
 == 0x7fffffffffffffffLL)

541 
mš
 = -4503599627370495;

542 
max
 = 4503599627370496;

543 ià(
v®ue
 > 
mš
 && v®u< 
max
 && value == (()(()value)))

544 
Ën
 = 
	`Î2¡ršg
(
buf
,Ën,()
v®ue
);

547 
Ën
 = 
	`¢´štf
(
buf
,Ën,"%.17g",
v®ue
);

550  
Ën
;

551 
	}
}

562 
	$ld2¡ršg
(*
buf
, 
size_t
 
Ën
, 
v®ue
, 
ld2¡ršg_mode
 
mode
) {

563 
size_t
 
l
 = 0;

565 ià(
	`isšf
(
v®ue
)) {

568 ià(
Ën
 < 5)  0;

569 ià(
v®ue
 > 0) {

570 
	`memıy
(
buf
,"inf",3);

571 
l
 = 3;

573 
	`memıy
(
buf
,"-inf",4);

574 
l
 = 4;

577 
mode
) {

578 
LD_STR_AUTO
:

579 
l
 = 
	`¢´štf
(
buf
,
Ën
,"%.17Lg",
v®ue
);

580 ià(
l
+1 > 
Ën
)  0;

582 
LD_STR_HEX
:

583 
l
 = 
	`¢´štf
(
buf
,
Ën
,"%La",
v®ue
);

584 ià(
l
+1 > 
Ën
)  0;

586 
LD_STR_HUMAN
:

592 
l
 = 
	`¢´štf
(
buf
,
Ën
,"%.17Lf",
v®ue
);

593 ià(
l
+1 > 
Ën
)  0;

595 ià(
	`¡rchr
(
buf
,'.'è!ğ
NULL
) {

596 *
p
 = 
buf
+
l
-1;

597 *
p
 == '0') {

598 
p
--;

599 
l
--;

601 ià(*
p
 =ğ'.'è
l
--;

603 ià(
l
 =ğ2 && 
buf
[0] == '-' && buf[1] == '0') {

604 
buf
[0] = '0';

605 
l
 = 1;

611 
buf
[
l
] = '\0';

612  
l
;

613 
	}
}

620 
	$g‘RªdomBy‹s
(*
p
, 
size_t
 
Ën
) {

622 
£ed_š™Ÿlized
 = 0;

623 
£ed
[64];

624 
ušt64_t
 
couÁ”
 = 0;

626 ià(!
£ed_š™Ÿlized
) {

631 
FILE
 *
å
 = 
	`fİ’
("/dev/urandom","r");

632 ià(
å
 =ğ
NULL
 || 
	`ä—d
(
£ed
,(seed),1,fp) != 1) {

635 
j
 = 0; j < (
£ed
); j++) {

636 
timev®
 
tv
;

637 
	`g‘timeofday
(&
tv
,
NULL
);

638 
pid_t
 
pid
 = 
	`g‘pid
();

639 
£ed
[
j
] = 
tv
.
tv_£c
 ^v.
tv_u£c
 ^ 
pid
 ^ ()
å
;

642 
£ed_š™Ÿlized
 = 1;

644 ià(
å
è
	`fşo£
(fp);

647 
Ën
) {

649 
dige¡
[
SHA256_BLOCK_SIZE
];

650 
kxÜ
[64];

651 
cİyËn
 =

652 
Ën
 > 
SHA256_BLOCK_SIZE
 ? SHA256_BLOCK_SIZE :†en;

655 
	`memıy
(
kxÜ
,
£ed
,(kxor));

656 
i
 = 0; i < (
kxÜ
); i++) kxor[i] ^= 0x36;

659 
SHA256_CTX
 
ùx
;

660 
	`sha256_š™
(&
ùx
);

661 
	`sha256_upd©e
(&
ùx
,
kxÜ
,(kxor));

662 
	`sha256_upd©e
(&
ùx
,(*)&
couÁ”
,(counter));

663 
	`sha256_fš®
(&
ùx
,
dige¡
);

666 
	`memıy
(
kxÜ
,
£ed
,(kxor));

667 
i
 = 0; i < (
kxÜ
); i++) kxor[i] ^= 0x5C;

670 
	`sha256_š™
(&
ùx
);

671 
	`sha256_upd©e
(&
ùx
,
kxÜ
,(kxor));

672 
	`sha256_upd©e
(&
ùx
,
dige¡
,
SHA256_BLOCK_SIZE
);

673 
	`sha256_fš®
(&
ùx
,
dige¡
);

676 
couÁ”
++;

678 
	`memıy
(
p
,
dige¡
,
cİyËn
);

679 
Ën
 -ğ
cİyËn
;

680 
p
 +ğ
cİyËn
;

682 
	}
}

688 
	$g‘RªdomHexCh¬s
(*
p
, 
size_t
 
Ën
) {

689 *
ch¬£t
 = "0123456789abcdef";

690 
size_t
 
j
;

692 
	`g‘RªdomBy‹s
((*)
p
,
Ën
);

693 
j
 = 0; j < 
Ën
; j++è
p
[j] = 
ch¬£t
[p[j] & 0x0F];

694 
	}
}

703 
sds
 
	$g‘AbsŞu‹P©h
(*
f’ame
) {

704 
cwd
[1024];

705 
sds
 
ab¥©h
;

706 
sds
 
»Í©h
 = 
	`sd¢ew
(
f’ame
);

708 
»Í©h
 = 
	`sd¡rim
(relpath," \r\n\t");

709 ià(
»Í©h
[0] == '/') „elpath;

712 ià(
	`g‘cwd
(
cwd
,(cwd)è=ğ
NULL
) {

713 
	`sdsä“
(
»Í©h
);

714  
NULL
;

716 
ab¥©h
 = 
	`sd¢ew
(
cwd
);

717 ià(
	`sd¦’
(
ab¥©h
) &&‡bspath[sdslen(abspath)-1] != '/')

718 
ab¥©h
 = 
	`sdsÿt
(abspath,"/");

726 
	`sd¦’
(
»Í©h
) >= 3 &&

727 
»Í©h
[0] == '.' &&„elpath[1] == '.' &&„elpath[2] == '/')

729 
	`sd¤ªge
(
»Í©h
,3,-1);

730 ià(
	`sd¦’
(
ab¥©h
) > 1) {

731 *
p
 = 
ab¥©h
 + 
	`sd¦’
(abspath)-2;

732 
ŒimËn
 = 1;

734 *
p
 != '/') {

735 
p
--;

736 
ŒimËn
++;

738 
	`sd¤ªge
(
ab¥©h
,0,-(
ŒimËn
+1));

743 
ab¥©h
 = 
	`sdsÿtsds
×b¥©h,
»Í©h
);

744 
	`sdsä“
(
»Í©h
);

745  
ab¥©h
;

746 
	}
}

753 
	$g‘TimeZÚe
() {

754 #ifdeà
__lšux__


755  
timezÚe
;

757 
timev®
 
tv
;

758 
timezÚe
 
tz
;

760 
	`g‘timeofday
(&
tv
, &
tz
);

762  
tz
.
tz_mšu‹swe¡
 * 60UL;

764 
	}
}

770 
	$·thIsBa£Name
(*
·th
) {

771  
	`¡rchr
(
·th
,'/'è=ğ
NULL
 && strchr(path,'\\') == NULL;

772 
	}
}

774 #ifdeà
REDIS_TEST


775 
	~<as£¹.h
>

777 
	$‹¡_¡ršg2Î
() {

778 
buf
[32];

779 
v
;

782 
	`¡rıy
(
buf
,"+1");

783 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

786 
	`¡rıy
(
buf
," 1");

787 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

790 
	`¡rıy
(
buf
,"1 ");

791 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

794 
	`¡rıy
(
buf
,"01");

795 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

797 
	`¡rıy
(
buf
,"-1");

798 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

799 
	`as£¹
(
v
 == -1);

801 
	`¡rıy
(
buf
,"0");

802 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

803 
	`as£¹
(
v
 == 0);

805 
	`¡rıy
(
buf
,"1");

806 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

807 
	`as£¹
(
v
 == 1);

809 
	`¡rıy
(
buf
,"99");

810 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

811 
	`as£¹
(
v
 == 99);

813 
	`¡rıy
(
buf
,"-99");

814 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

815 
	`as£¹
(
v
 == -99);

817 
	`¡rıy
(
buf
,"-9223372036854775808");

818 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

819 
	`as£¹
(
v
 =ğ
LLONG_MIN
);

821 
	`¡rıy
(
buf
,"-9223372036854775809");

822 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

824 
	`¡rıy
(
buf
,"9223372036854775807");

825 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

826 
	`as£¹
(
v
 =ğ
LLONG_MAX
);

828 
	`¡rıy
(
buf
,"9223372036854775808");

829 
	`as£¹
(
	`¡ršg2Î
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

830 
	}
}

832 
	$‹¡_¡ršg2l
() {

833 
buf
[32];

834 
v
;

837 
	`¡rıy
(
buf
,"+1");

838 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

841 
	`¡rıy
(
buf
,"01");

842 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

844 
	`¡rıy
(
buf
,"-1");

845 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

846 
	`as£¹
(
v
 == -1);

848 
	`¡rıy
(
buf
,"0");

849 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

850 
	`as£¹
(
v
 == 0);

852 
	`¡rıy
(
buf
,"1");

853 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

854 
	`as£¹
(
v
 == 1);

856 
	`¡rıy
(
buf
,"99");

857 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

858 
	`as£¹
(
v
 == 99);

860 
	`¡rıy
(
buf
,"-99");

861 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

862 
	`as£¹
(
v
 == -99);

864 #ià
LONG_MAX
 !ğ
LLONG_MAX


865 
	`¡rıy
(
buf
,"-2147483648");

866 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

867 
	`as£¹
(
v
 =ğ
LONG_MIN
);

869 
	`¡rıy
(
buf
,"-2147483649");

870 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

872 
	`¡rıy
(
buf
,"2147483647");

873 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 1);

874 
	`as£¹
(
v
 =ğ
LONG_MAX
);

876 
	`¡rıy
(
buf
,"2147483648");

877 
	`as£¹
(
	`¡ršg2l
(
buf
,
	`¡¾’
(buf),&
v
) == 0);

879 
	}
}

881 
	$‹¡_Î2¡ršg
() {

882 
buf
[32];

883 
v
;

884 
sz
;

886 
v
 = 0;

887 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

888 
	`as£¹
(
sz
 == 1);

889 
	`as£¹
(!
	`¡rcmp
(
buf
, "0"));

891 
v
 = -1;

892 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

893 
	`as£¹
(
sz
 == 2);

894 
	`as£¹
(!
	`¡rcmp
(
buf
, "-1"));

896 
v
 = 99;

897 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

898 
	`as£¹
(
sz
 == 2);

899 
	`as£¹
(!
	`¡rcmp
(
buf
, "99"));

901 
v
 = -99;

902 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

903 
	`as£¹
(
sz
 == 3);

904 
	`as£¹
(!
	`¡rcmp
(
buf
, "-99"));

906 
v
 = -2147483648;

907 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

908 
	`as£¹
(
sz
 == 11);

909 
	`as£¹
(!
	`¡rcmp
(
buf
, "-2147483648"));

911 
v
 = 
LLONG_MIN
;

912 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

913 
	`as£¹
(
sz
 == 20);

914 
	`as£¹
(!
	`¡rcmp
(
buf
, "-9223372036854775808"));

916 
v
 = 
LLONG_MAX
;

917 
sz
 = 
	`Î2¡ršg
(
buf
,  buf, 
v
);

918 
	`as£¹
(
sz
 == 19);

919 
	`as£¹
(!
	`¡rcmp
(
buf
, "9223372036854775807"));

920 
	}
}

922 
	#UNUSED
(
x
è()(x)

	)

923 
	$utTe¡
(
¬gc
, **
¬gv
) {

924 
	`UNUSED
(
¬gc
);

925 
	`UNUSED
(
¬gv
);

927 
	`‹¡_¡ršg2Î
();

928 
	`‹¡_¡ršg2l
();

929 
	`‹¡_Î2¡ršg
();

931 
	}
}

	@util.h

30 #iâdeà
__REDIS_UTIL_H


31 
	#__REDIS_UTIL_H


	)

33 
	~<¡dšt.h
>

34 
	~"sds.h
"

39 
	#MAX_LONG_DOUBLE_CHARS
 5*1024

	)

43 
	mLD_STR_AUTO
,

44 
	mLD_STR_HUMAN
,

45 
	mLD_STR_HEX


46 } 
	tld2¡ršg_mode
;

48 
¡ršgm©chËn
(cÚ¡ *
p
, 
¶’
, cÚ¡ *
s
, 
¦’
, 
noÿ£
);

49 
¡ršgm©ch
(cÚ¡ *
p
, cÚ¡ *
s
, 
noÿ£
);

50 
¡ršgm©chËn_fuzz_‹¡
();

51 
memtŞl
(cÚ¡ *
p
, *
”r
);

52 
ušt32_t
 
dig™s10
(
ušt64_t
 
v
);

53 
ušt32_t
 
sdig™s10
(
št64_t
 
v
);

54 
Î2¡ršg
(*
s
, 
size_t
 
Ën
, 
v®ue
);

55 
¡ršg2Î
(cÚ¡ *
s
, 
size_t
 
¦’
, *
v®ue
);

56 
¡ršg2uÎ
(cÚ¡ *
s
, *
v®ue
);

57 
¡ršg2l
(cÚ¡ *
s
, 
size_t
 
¦’
, *
v®ue
);

58 
¡ršg2ld
(cÚ¡ *
s
, 
size_t
 
¦’
, *
dp
);

59 
¡ršg2d
(cÚ¡ *
s
, 
size_t
 
¦’
, *
dp
);

60 
d2¡ršg
(*
buf
, 
size_t
 
Ën
, 
v®ue
);

61 
ld2¡ršg
(*
buf
, 
size_t
 
Ën
, 
v®ue
, 
ld2¡ršg_mode
 
mode
);

62 
sds
 
g‘AbsŞu‹P©h
(*
f’ame
);

63 
g‘TimeZÚe
();

64 
·thIsBa£Name
(*
·th
);

66 #ifdeà
REDIS_TEST


67 
utTe¡
(
¬gc
, **
¬gv
);

	@version.h

1 
	#REDIS_VERSION
 "999.999.999"

	)

	@ziplist.c

182 
	~<¡dio.h
>

183 
	~<¡dlib.h
>

184 
	~<¡ršg.h
>

185 
	~<¡dšt.h
>

186 
	~<lim™s.h
>

187 
	~"zm®loc.h
"

188 
	~"ut.h
"

189 
	~"zli¡.h
"

190 
	~"’dŸncÚv.h
"

191 
	~"»di§s£¹.h
"

193 
	#ZIP_END
 255

	)

194 
	#ZIP_BIG_PREVLEN
 254

	)

202 
	#ZIP_STR_MASK
 0xc0

	)

203 
	#ZIP_INT_MASK
 0x30

	)

204 
	#ZIP_STR_06B
 (0 << 6)

	)

205 
	#ZIP_STR_14B
 (1 << 6)

	)

206 
	#ZIP_STR_32B
 (2 << 6)

	)

207 
	#ZIP_INT_16B
 (0xc0 | 0<<4)

	)

208 
	#ZIP_INT_32B
 (0xc0 | 1<<4)

	)

209 
	#ZIP_INT_64B
 (0xc0 | 2<<4)

	)

210 
	#ZIP_INT_24B
 (0xc0 | 3<<4)

	)

211 
	#ZIP_INT_8B
 0xã

	)

215 
	#ZIP_INT_IMM_MASK
 0x0à

	)

217 
	#ZIP_INT_IMM_MIN
 0xf1

	)

218 
	#ZIP_INT_IMM_MAX
 0xfd

	)

220 
	#INT24_MAX
 0x7fffff

	)

221 
	#INT24_MIN
 (-
INT24_MAX
 - 1)

	)

225 
	#ZIP_IS_STR
(
’c
è((Óncè& 
ZIP_STR_MASK
è< ZIP_STR_MASK)

	)

230 
	#ZIPLIST_BYTES
(
zl
è(*((
ušt32_t
*)(zl)))

	)

233 
	#ZIPLIST_TAIL_OFFSET
(
zl
è(*((
ušt32_t
*)((zl)+(ušt32_t))))

	)

237 
	#ZIPLIST_LENGTH
(
zl
è(*((
ušt16_t
*)((zl)+(
ušt32_t
)*2)))

	)

242 
	#ZIPLIST_HEADER_SIZE
 ((
ušt32_t
)*2+(
ušt16_t
))

	)

245 
	#ZIPLIST_END_SIZE
 ((
ušt8_t
))

	)

248 
	#ZIPLIST_ENTRY_HEAD
(
zl
è((zl)+
ZIPLIST_HEADER_SIZE
)

	)

252 
	#ZIPLIST_ENTRY_TAIL
(
zl
è((zl)+
	`šŒev32ifbe
(
	`ZIPLIST_TAIL_OFFSET
(zl)))

	)

256 
	#ZIPLIST_ENTRY_END
(
zl
è((zl)+
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(zl))-1)

	)

263 
	#ZIPLIST_INCR_LENGTH
(
zl
,
šü
) { \

264 ià(
	`ZIPLIST_LENGTH
(
zl
è< 
UINT16_MAX
) \

265 
	`ZIPLIST_LENGTH
(
zl
èğ
	`šŒev16ifbe
(šŒev16ifbe(ZIPLIST_LENGTH(zl))+
šü
); \

266 }

	)

271 
	szËÁry
 {

272 
	m´ev¿wËnsize
;

273 
	m´ev¿wËn
;

274 
	mËnsize
;

277 
	mËn
;

282 
	mh—d”size
;

283 
	m’codšg
;

287 *
	mp
;

289 } 
	tzËÁry
;

291 
	#ZIPLIST_ENTRY_ZERO
(
zË
) { \

292 (
zË
)->
´ev¿wËnsize
 = (zË)->
´ev¿wËn
 = 0; \

293 (
zË
)->
Ënsize
 = (zË)->
Ën
 = (zË)->
h—d”size
 = 0; \

294 (
zË
)->
’codšg
 = 0; \

295 (
zË
)->
p
 = 
NULL
; \

296 }

	)

300 
	#ZIP_ENTRY_ENCODING
(
±r
, 
’codšg
) do { \

301 (
’codšg
èğ(
±r
[0]); \

302 ià((
’codšg
è< 
ZIP_STR_MASK
) (encoding) &= ZIP_STR_MASK; \

303 } 0)

	)

306 
	$zIÁSize
(
’codšg
) {

307 
’codšg
) {

308 
ZIP_INT_8B
:  1;

309 
ZIP_INT_16B
:  2;

310 
ZIP_INT_24B
:  3;

311 
ZIP_INT_32B
:  4;

312 
ZIP_INT_64B
:  8;

314 ià(
’codšg
 >ğ
ZIP_INT_IMM_MIN
 &&ƒncodšg <ğ
ZIP_INT_IMM_MAX
)

316 
	`·nic
("Inv®id iÁeg”ƒncodšg 0x%02X", 
’codšg
);

318 
	}
}

332 
	$zStÜeEÁryEncodšg
(*
p
, 
’codšg
, 
¿wËn
) {

333 
Ën
 = 1, 
buf
[5];

335 ià(
	`ZIP_IS_STR
(
’codšg
)) {

338 ià(
¿wËn
 <= 0x3f) {

339 ià(!
p
è 
Ën
;

340 
buf
[0] = 
ZIP_STR_06B
 | 
¿wËn
;

341 } ià(
¿wËn
 <= 0x3fff) {

342 
Ën
 += 1;

343 ià(!
p
è 
Ën
;

344 
buf
[0] = 
ZIP_STR_14B
 | ((
¿wËn
 >> 8) & 0x3f);

345 
buf
[1] = 
¿wËn
 & 0xff;

347 
Ën
 += 4;

348 ià(!
p
è 
Ën
;

349 
buf
[0] = 
ZIP_STR_32B
;

350 
buf
[1] = (
¿wËn
 >> 24) & 0xff;

351 
buf
[2] = (
¿wËn
 >> 16) & 0xff;

352 
buf
[3] = (
¿wËn
 >> 8) & 0xff;

353 
buf
[4] = 
¿wËn
 & 0xff;

357 ià(!
p
è 
Ën
;

358 
buf
[0] = 
’codšg
;

362 
	`memıy
(
p
,
buf
,
Ën
);

363  
Ën
;

364 
	}
}

371 
	#ZIP_DECODE_LENGTH
(
±r
, 
’codšg
, 
Ënsize
, 
Ën
) do { \

372 
	`ZIP_ENTRY_ENCODING
((
±r
), (
’codšg
)); \

373 ià((
’codšg
è< 
ZIP_STR_MASK
) { \

374 ià((
’codšg
è=ğ
ZIP_STR_06B
) { \

375 (
Ënsize
) = 1; \

376 (
Ën
èğ(
±r
)[0] & 0x3f; \

377 } ià((
’codšg
è=ğ
ZIP_STR_14B
) { \

378 (
Ënsize
) = 2; \

379 (
Ën
èğ(((
±r
)[0] & 0x3f) << 8) | (ptr)[1]; \

380 } ià((
’codšg
è=ğ
ZIP_STR_32B
) { \

381 (
Ënsize
) = 5; \

382 (
Ën
èğ((
±r
)[1] << 24) | \

383 ((
±r
)[2] << 16) | \

384 ((
±r
)[3] << 8) | \

385 ((
±r
)[4]); \

387 
	`·nic
("Inv®id sŒšgƒncodšg 0x%02X", (
’codšg
)); \

390 (
Ënsize
) = 1; \

391 (
Ën
èğ
	`zIÁSize
(
’codšg
); \

393 } 0);

	)

397 
	$zStÜeP»vEÁryL’gthL¬ge
(*
p
, 
Ën
) {

398 ià(
p
 !ğ
NULL
) {

399 
p
[0] = 
ZIP_BIG_PREVLEN
;

400 
	`memıy
(
p
+1,&
Ën
,(len));

401 
	`mem»v32ifbe
(
p
+1);

403  1+(
Ën
);

404 
	}
}

408 
	$zStÜeP»vEÁryL’gth
(*
p
, 
Ën
) {

409 ià(
p
 =ğ
NULL
) {

410  (
Ën
 < 
ZIP_BIG_PREVLEN
) ? 1 : (len)+1;

412 ià(
Ën
 < 
ZIP_BIG_PREVLEN
) {

413 
p
[0] = 
Ën
;

416  
	`zStÜeP»vEÁryL’gthL¬ge
(
p
,
Ën
);

419 
	}
}

423 
	#ZIP_DECODE_PREVLENSIZE
(
±r
, 
´evËnsize
) do { \

424 ià((
±r
)[0] < 
ZIP_BIG_PREVLEN
) { \

425 (
´evËnsize
) = 1; \

427 (
´evËnsize
) = 5; \

429 } 0);

	)

438 
	#ZIP_DECODE_PREVLEN
(
±r
, 
´evËnsize
, 
´evËn
) do { \

439 
	`ZIP_DECODE_PREVLENSIZE
(
±r
, 
´evËnsize
); \

440 ià((
´evËnsize
) == 1) { \

441 (
´evËn
èğ(
±r
)[0]; \

442 } ià((
´evËnsize
) == 5) { \

443 
	`as£¹
(((
´evËn
)) == 4); \

444 
	`memıy
(&(
´evËn
), ((*)(
±r
)) + 1, 4); \

445 
	`mem»v32ifbe
(&
´evËn
); \

447 } 0);

	)

464 
	$zP»vL’By‹Diff
(*
p
, 
Ën
) {

465 
´evËnsize
;

466 
	`ZIP_DECODE_PREVLENSIZE
(
p
, 
´evËnsize
);

467  
	`zStÜeP»vEÁryL’gth
(
NULL
, 
Ën
è- 
´evËnsize
;

468 
	}
}

471 
	$zRawEÁryL’gth
(*
p
) {

472 
´evËnsize
, 
’codšg
, 
Ënsize
, 
Ën
;

473 
	`ZIP_DECODE_PREVLENSIZE
(
p
, 
´evËnsize
);

474 
	`ZIP_DECODE_LENGTH
(
p
 + 
´evËnsize
, 
’codšg
, 
Ënsize
, 
Ën
);

475  
´evËnsize
 + 
Ënsize
 + 
Ën
;

476 
	}
}

480 
	$zTryEncodšg
(*
’Œy
, 
’ŒyËn
, *
v
, *
’codšg
) {

481 
v®ue
;

483 ià(
’ŒyËn
 >= 32 ||ƒntrylen == 0)  0;

484 ià(
	`¡ršg2Î
((*)
’Œy
,
’ŒyËn
,&
v®ue
)) {

487 ià(
v®ue
 >= 0 && value <= 12) {

488 *
’codšg
 = 
ZIP_INT_IMM_MIN
+
v®ue
;

489 } ià(
v®ue
 >ğ
INT8_MIN
 && v®u<ğ
INT8_MAX
) {

490 *
’codšg
 = 
ZIP_INT_8B
;

491 } ià(
v®ue
 >ğ
INT16_MIN
 && v®u<ğ
INT16_MAX
) {

492 *
’codšg
 = 
ZIP_INT_16B
;

493 } ià(
v®ue
 >ğ
INT24_MIN
 && v®u<ğ
INT24_MAX
) {

494 *
’codšg
 = 
ZIP_INT_24B
;

495 } ià(
v®ue
 >ğ
INT32_MIN
 && v®u<ğ
INT32_MAX
) {

496 *
’codšg
 = 
ZIP_INT_32B
;

498 *
’codšg
 = 
ZIP_INT_64B
;

500 *
v
 = 
v®ue
;

504 
	}
}

507 
	$zSaveIÁeg”
(*
p
, 
št64_t
 
v®ue
, 
’codšg
) {

508 
št16_t
 
i16
;

509 
št32_t
 
i32
;

510 
št64_t
 
i64
;

511 ià(
’codšg
 =ğ
ZIP_INT_8B
) {

512 ((
št8_t
*)
p
)[0] = (št8_t)
v®ue
;

513 } ià(
’codšg
 =ğ
ZIP_INT_16B
) {

514 
i16
 = 
v®ue
;

515 
	`memıy
(
p
,&
i16
,(i16));

516 
	`mem»v16ifbe
(
p
);

517 } ià(
’codšg
 =ğ
ZIP_INT_24B
) {

518 
i32
 = 
v®ue
<<8;

519 
	`mem»v32ifbe
(&
i32
);

520 
	`memıy
(
p
,((
ušt8_t
*)&
i32
)+1,(i32)-(uint8_t));

521 } ià(
’codšg
 =ğ
ZIP_INT_32B
) {

522 
i32
 = 
v®ue
;

523 
	`memıy
(
p
,&
i32
,(i32));

524 
	`mem»v32ifbe
(
p
);

525 } ià(
’codšg
 =ğ
ZIP_INT_64B
) {

526 
i64
 = 
v®ue
;

527 
	`memıy
(
p
,&
i64
,(i64));

528 
	`mem»v64ifbe
(
p
);

529 } ià(
’codšg
 >ğ
ZIP_INT_IMM_MIN
 &&ƒncodšg <ğ
ZIP_INT_IMM_MAX
) {

532 
	`as£¹
(
NULL
);

534 
	}
}

537 
št64_t
 
	$zLßdIÁeg”
(*
p
, 
’codšg
) {

538 
št16_t
 
i16
;

539 
št32_t
 
i32
;

540 
št64_t
 
i64
, 
»t
 = 0;

541 ià(
’codšg
 =ğ
ZIP_INT_8B
) {

542 
»t
 = ((
št8_t
*)
p
)[0];

543 } ià(
’codšg
 =ğ
ZIP_INT_16B
) {

544 
	`memıy
(&
i16
,
p
,(i16));

545 
	`mem»v16ifbe
(&
i16
);

546 
»t
 = 
i16
;

547 } ià(
’codšg
 =ğ
ZIP_INT_32B
) {

548 
	`memıy
(&
i32
,
p
,(i32));

549 
	`mem»v32ifbe
(&
i32
);

550 
»t
 = 
i32
;

551 } ià(
’codšg
 =ğ
ZIP_INT_24B
) {

552 
i32
 = 0;

553 
	`memıy
(((
ušt8_t
*)&
i32
)+1,
p
,(i32)-(uint8_t));

554 
	`mem»v32ifbe
(&
i32
);

555 
»t
 = 
i32
>>8;

556 } ià(
’codšg
 =ğ
ZIP_INT_64B
) {

557 
	`memıy
(&
i64
,
p
,(i64));

558 
	`mem»v64ifbe
(&
i64
);

559 
»t
 = 
i64
;

560 } ià(
’codšg
 >ğ
ZIP_INT_IMM_MIN
 &&ƒncodšg <ğ
ZIP_INT_IMM_MAX
) {

561 
»t
 = (
’codšg
 & 
ZIP_INT_IMM_MASK
)-1;

563 
	`as£¹
(
NULL
);

565  
»t
;

566 
	}
}

569 
	$zEÁry
(*
p
, 
zËÁry
 *
e
) {

571 
	`ZIP_DECODE_PREVLEN
(
p
, 
e
->
´ev¿wËnsize
,ƒ->
´ev¿wËn
);

572 
	`ZIP_DECODE_LENGTH
(
p
 + 
e
->
´ev¿wËnsize
,ƒ->
’codšg
,ƒ->
Ënsize
,ƒ->
Ën
);

573 
e
->
h—d”size
 =ƒ->
´ev¿wËnsize
 +ƒ->
Ënsize
;

574 
e
->
p
 =…;

575 
	}
}

578 *
	$zli¡New
() {

579 
by‹s
 = 
ZIPLIST_HEADER_SIZE
+
ZIPLIST_END_SIZE
;

580 *
zl
 = 
	`zm®loc
(
by‹s
);

581 
	`ZIPLIST_BYTES
(
zl
èğ
	`šŒev32ifbe
(
by‹s
);

582 
	`ZIPLIST_TAIL_OFFSET
(
zl
èğ
	`šŒev32ifbe
(
ZIPLIST_HEADER_SIZE
);

583 
	`ZIPLIST_LENGTH
(
zl
) = 0;

584 
zl
[
by‹s
-1] = 
ZIP_END
;

585  
zl
;

586 
	}
}

589 *
	$zli¡Resize
(*
zl
, 
Ën
) {

590 
zl
 = 
	`z»®loc
(zl,
Ën
);

591 
	`ZIPLIST_BYTES
(
zl
èğ
	`šŒev32ifbe
(
Ën
);

592 
zl
[
Ën
-1] = 
ZIP_END
;

593  
zl
;

594 
	}
}

616 *
	$__zli¡CasÿdeUpd©e
(*
zl
, *
p
) {

617 
size_t
 
cu¾’
 = 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
)), 
¿wËn
, 
¿wËnsize
;

618 
size_t
 
off£t
, 
noff£t
, 
exŒa
;

619 *
Å
;

620 
zËÁry
 
cur
, 
Ãxt
;

622 
p
[0] !ğ
ZIP_END
) {

623 
	`zEÁry
(
p
, &
cur
);

624 
¿wËn
 = 
cur
.
h—d”size
 + cur.
Ën
;

625 
¿wËnsize
 = 
	`zStÜeP»vEÁryL’gth
(
NULL
,
¿wËn
);

628 ià(
p
[
¿wËn
] =ğ
ZIP_END
) ;

629 
	`zEÁry
(
p
+
¿wËn
, &
Ãxt
);

632 ià(
Ãxt
.
´ev¿wËn
 =ğ
¿wËn
) ;

634 ià(
Ãxt
.
´ev¿wËnsize
 < 
¿wËnsize
) {

637 
off£t
 = 
p
-
zl
;

638 
exŒa
 = 
¿wËnsize
-
Ãxt
.
´ev¿wËnsize
;

639 
zl
 = 
	`zli¡Resize
(zl,
cu¾’
+
exŒa
);

640 
p
 = 
zl
+
off£t
;

643 
Å
 = 
p
+
¿wËn
;

644 
noff£t
 = 
Å
-
zl
;

647 ià((
zl
+
	`šŒev32ifbe
(
	`ZIPLIST_TAIL_OFFSET
(zl))è!ğ
Å
) {

648 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

649 
	`šŒev32ifbe
(šŒev32ifbe(
	`ZIPLIST_TAIL_OFFSET
(
zl
))+
exŒa
);

653 
	`memmove
(
Å
+
¿wËnsize
,

654 
Å
+
Ãxt
.
´ev¿wËnsize
,

655 
cu¾’
-
noff£t
-
Ãxt
.
´ev¿wËnsize
-1);

656 
	`zStÜeP»vEÁryL’gth
(
Å
,
¿wËn
);

659 
p
 +ğ
¿wËn
;

660 
cu¾’
 +ğ
exŒa
;

662 ià(
Ãxt
.
´ev¿wËnsize
 > 
¿wËnsize
) {

665 
	`zStÜeP»vEÁryL’gthL¬ge
(
p
+
¿wËn
,rawlen);

667 
	`zStÜeP»vEÁryL’gth
(
p
+
¿wËn
,rawlen);

674  
zl
;

675 
	}
}

678 *
	$__zli¡D–‘e
(*
zl
, *
p
, 
num
) {

679 
i
, 
tÙËn
, 
d–‘ed
 = 0;

680 
size_t
 
off£t
;

681 
Ãxtdiff
 = 0;

682 
zËÁry
 
fœ¡
, 

;

684 
	`zEÁry
(
p
, &
fœ¡
);

685 
i
 = 0; 
p
[0] !ğ
ZIP_END
 && i < 
num
; i++) {

686 
p
 +ğ
	`zRawEÁryL’gth
(p);

687 
d–‘ed
++;

690 
tÙËn
 = 
p
-
fœ¡
.p;

691 ià(
tÙËn
 > 0) {

692 ià(
p
[0] !ğ
ZIP_END
) {

697 
Ãxtdiff
 = 
	`zP»vL’By‹Diff
(
p
,
fœ¡
.
´ev¿wËn
);

703 
p
 -ğ
Ãxtdiff
;

704 
	`zStÜeP»vEÁryL’gth
(
p
,
fœ¡
.
´ev¿wËn
);

707 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

708 
	`šŒev32ifbe
(šŒev32ifbe(
	`ZIPLIST_TAIL_OFFSET
(
zl
))-
tÙËn
);

713 
	`zEÁry
(
p
, &

);

714 ià(
p
[

.
h—d”size
+.
Ën
] !ğ
ZIP_END
) {

715 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

716 
	`šŒev32ifbe
(šŒev32ifbe(
	`ZIPLIST_TAIL_OFFSET
(
zl
))+
Ãxtdiff
);

720 
	`memmove
(
fœ¡
.
p
,p,

721 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
))-(
p
-zl)-1);

724 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

725 
	`šŒev32ifbe
((
fœ¡
.
p
-
zl
)-fœ¡.
´ev¿wËn
);

729 
off£t
 = 
fœ¡
.
p
-
zl
;

730 
zl
 = 
	`zli¡Resize
(zl, 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(zl))-
tÙËn
+
Ãxtdiff
);

731 
	`ZIPLIST_INCR_LENGTH
(
zl
,-
d–‘ed
);

732 
p
 = 
zl
+
off£t
;

736 ià(
Ãxtdiff
 != 0)

737 
zl
 = 
	`__zli¡CasÿdeUpd©e
(zl,
p
);

739  
zl
;

740 
	}
}

743 *
	$__zli¡In£¹
(*
zl
, *
p
, *
s
, 
¦’
) {

744 
size_t
 
cu¾’
 = 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
)), 
»qËn
;

745 
´evËnsize
, 
´evËn
 = 0;

746 
size_t
 
off£t
;

747 
Ãxtdiff
 = 0;

748 
’codšg
 = 0;

749 
v®ue
 = 123456789;

752 
zËÁry
 

;

755 ià(
p
[0] !ğ
ZIP_END
) {

756 
	`ZIP_DECODE_PREVLEN
(
p
, 
´evËnsize
, 
´evËn
);

758 *
±a
 = 
	`ZIPLIST_ENTRY_TAIL
(
zl
);

759 ià(
±a
[0] !ğ
ZIP_END
) {

760 
´evËn
 = 
	`zRawEÁryL’gth
(
±a
);

765 ià(
	`zTryEncodšg
(
s
,
¦’
,&
v®ue
,&
’codšg
)) {

767 
»qËn
 = 
	`zIÁSize
(
’codšg
);

771 
»qËn
 = 
¦’
;

775 
»qËn
 +ğ
	`zStÜeP»vEÁryL’gth
(
NULL
,
´evËn
);

776 
»qËn
 +ğ
	`zStÜeEÁryEncodšg
(
NULL
,
’codšg
,
¦’
);

781 
fÜûÏrge
 = 0;

782 
Ãxtdiff
 = (
p
[0] !ğ
ZIP_END
è? 
	`zP»vL’By‹Diff
Õ,
»qËn
) : 0;

783 ià(
Ãxtdiff
 =ğ-4 && 
»qËn
 < 4) {

784 
Ãxtdiff
 = 0;

785 
fÜûÏrge
 = 1;

789 
off£t
 = 
p
-
zl
;

790 
zl
 = 
	`zli¡Resize
(zl,
cu¾’
+
»qËn
+
Ãxtdiff
);

791 
p
 = 
zl
+
off£t
;

794 ià(
p
[0] !ğ
ZIP_END
) {

796 
	`memmove
(
p
+
»qËn
,p-
Ãxtdiff
,
cu¾’
-
off£t
-1+nextdiff);

799 ià(
fÜûÏrge
)

800 
	`zStÜeP»vEÁryL’gthL¬ge
(
p
+
»qËn
,reqlen);

802 
	`zStÜeP»vEÁryL’gth
(
p
+
»qËn
,reqlen);

805 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

806 
	`šŒev32ifbe
(šŒev32ifbe(
	`ZIPLIST_TAIL_OFFSET
(
zl
))+
»qËn
);

811 
	`zEÁry
(
p
+
»qËn
, &

);

812 ià(
p
[
»qËn
+

.
h—d”size
+.
Ën
] !ğ
ZIP_END
) {

813 
	`ZIPLIST_TAIL_OFFSET
(
zl
) =

814 
	`šŒev32ifbe
(šŒev32ifbe(
	`ZIPLIST_TAIL_OFFSET
(
zl
))+
Ãxtdiff
);

818 
	`ZIPLIST_TAIL_OFFSET
(
zl
èğ
	`šŒev32ifbe
(
p
-zl);

823 ià(
Ãxtdiff
 != 0) {

824 
off£t
 = 
p
-
zl
;

825 
zl
 = 
	`__zli¡CasÿdeUpd©e
(zl,
p
+
»qËn
);

826 
p
 = 
zl
+
off£t
;

830 
p
 +ğ
	`zStÜeP»vEÁryL’gth
Õ,
´evËn
);

831 
p
 +ğ
	`zStÜeEÁryEncodšg
Õ,
’codšg
,
¦’
);

832 ià(
	`ZIP_IS_STR
(
’codšg
)) {

833 
	`memıy
(
p
,
s
,
¦’
);

835 
	`zSaveIÁeg”
(
p
,
v®ue
,
’codšg
);

837 
	`ZIPLIST_INCR_LENGTH
(
zl
,1);

838  
zl
;

839 
	}
}

856 *
	$zli¡M”ge
(**
fœ¡
, **
£cÚd
) {

858 ià(
fœ¡
 =ğ
NULL
 || *fœ¡ =ğNULL || 
£cÚd
 == NULL || *second == NULL)

859  
NULL
;

862 ià(*
fœ¡
 =ğ*
£cÚd
)

863  
NULL
;

865 
size_t
 
fœ¡_by‹s
 = 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(*
fœ¡
));

866 
size_t
 
fœ¡_Ën
 = 
	`šŒev16ifbe
(
	`ZIPLIST_LENGTH
(*
fœ¡
));

868 
size_t
 
£cÚd_by‹s
 = 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(*
£cÚd
));

869 
size_t
 
£cÚd_Ën
 = 
	`šŒev16ifbe
(
	`ZIPLIST_LENGTH
(*
£cÚd
));

871 
­³nd
;

872 *
sourû
, *
rg‘
;

873 
size_t
 
rg‘_by‹s
, 
sourû_by‹s
;

877 ià(
fœ¡_Ën
 >ğ
£cÚd_Ën
) {

879 
rg‘
 = *
fœ¡
;

880 
rg‘_by‹s
 = 
fœ¡_by‹s
;

881 
sourû
 = *
£cÚd
;

882 
sourû_by‹s
 = 
£cÚd_by‹s
;

883 
­³nd
 = 1;

886 
rg‘
 = *
£cÚd
;

887 
rg‘_by‹s
 = 
£cÚd_by‹s
;

888 
sourû
 = *
fœ¡
;

889 
sourû_by‹s
 = 
fœ¡_by‹s
;

890 
­³nd
 = 0;

894 
size_t
 
zlby‹s
 = 
fœ¡_by‹s
 + 
£cÚd_by‹s
 -

895 
ZIPLIST_HEADER_SIZE
 - 
ZIPLIST_END_SIZE
;

896 
size_t
 
zÎ’gth
 = 
fœ¡_Ën
 + 
£cÚd_Ën
;

899 
zÎ’gth
 = zÎ’gth < 
UINT16_MAX
 ? zllength : UINT16_MAX;

902 
size_t
 
fœ¡_off£t
 = 
	`šŒev32ifbe
(
	`ZIPLIST_TAIL_OFFSET
(*
fœ¡
));

903 
size_t
 
£cÚd_off£t
 = 
	`šŒev32ifbe
(
	`ZIPLIST_TAIL_OFFSET
(*
£cÚd
));

906 
rg‘
 = 
	`z»®loc
Ñ¬g‘, 
zlby‹s
);

907 ià(
­³nd
) {

911 
	`memıy
(
rg‘
 + 
rg‘_by‹s
 - 
ZIPLIST_END_SIZE
,

912 
sourû
 + 
ZIPLIST_HEADER_SIZE
,

913 
sourû_by‹s
 - 
ZIPLIST_HEADER_SIZE
);

919 
	`memmove
(
rg‘
 + 
sourû_by‹s
 - 
ZIPLIST_END_SIZE
,

920 
rg‘
 + 
ZIPLIST_HEADER_SIZE
,

921 
rg‘_by‹s
 - 
ZIPLIST_HEADER_SIZE
);

922 
	`memıy
(
rg‘
, 
sourû
, 
sourû_by‹s
 - 
ZIPLIST_END_SIZE
);

926 
	`ZIPLIST_BYTES
(
rg‘
èğ
	`šŒev32ifbe
(
zlby‹s
);

927 
	`ZIPLIST_LENGTH
(
rg‘
èğ
	`šŒev16ifbe
(
zÎ’gth
);

933 
	`ZIPLIST_TAIL_OFFSET
(
rg‘
èğ
	`šŒev32ifbe
(

934 (
fœ¡_by‹s
 - 
ZIPLIST_END_SIZE
) +

935 (
£cÚd_off£t
 - 
ZIPLIST_HEADER_SIZE
));

941 
rg‘
 = 
	`__zli¡CasÿdeUpd©e
Ñ¬g‘,¬g‘+
fœ¡_off£t
);

944 ià(
­³nd
) {

945 
	`zä“
(*
£cÚd
);

946 *
£cÚd
 = 
NULL
;

947 *
fœ¡
 = 
rg‘
;

949 
	`zä“
(*
fœ¡
);

950 *
fœ¡
 = 
NULL
;

951 *
£cÚd
 = 
rg‘
;

953  
rg‘
;

954 
	}
}

956 *
	$zli¡Push
(*
zl
, *
s
, 
¦’
, 
wh”e
) {

957 *
p
;

958 
p
 = (
wh”e
 =ğ
ZIPLIST_HEAD
è? 
	`ZIPLIST_ENTRY_HEAD
(
zl
è: 
	`ZIPLIST_ENTRY_END
(zl);

959  
	`__zli¡In£¹
(
zl
,
p
,
s
,
¦’
);

960 
	}
}

965 *
	$zli¡Index
(*
zl
, 
šdex
) {

966 *
p
;

967 
´evËnsize
, 
´evËn
 = 0;

968 ià(
šdex
 < 0) {

969 
šdex
 = (-index)-1;

970 
p
 = 
	`ZIPLIST_ENTRY_TAIL
(
zl
);

971 ià(
p
[0] !ğ
ZIP_END
) {

972 
	`ZIP_DECODE_PREVLEN
(
p
, 
´evËnsize
, 
´evËn
);

973 
´evËn
 > 0 && 
šdex
--) {

974 
p
 -ğ
´evËn
;

975 
	`ZIP_DECODE_PREVLEN
(
p
, 
´evËnsize
, 
´evËn
);

979 
p
 = 
	`ZIPLIST_ENTRY_HEAD
(
zl
);

980 
p
[0] !ğ
ZIP_END
 && 
šdex
--) {

981 
p
 +ğ
	`zRawEÁryL’gth
(p);

984  (
p
[0] =ğ
ZIP_END
 || 
šdex
 > 0è? 
NULL
 :…;

985 
	}
}

993 *
	$zli¡Next
(*
zl
, *
p
) {

994 ((è
zl
);

999 ià(
p
[0] =ğ
ZIP_END
) {

1000  
NULL
;

1003 
p
 +ğ
	`zRawEÁryL’gth
(p);

1004 ià(
p
[0] =ğ
ZIP_END
) {

1005  
NULL
;

1008  
p
;

1009 
	}
}

1012 *
	$zli¡P»v
(*
zl
, *
p
) {

1013 
´evËnsize
, 
´evËn
 = 0;

1018 ià(
p
[0] =ğ
ZIP_END
) {

1019 
p
 = 
	`ZIPLIST_ENTRY_TAIL
(
zl
);

1020  (
p
[0] =ğ
ZIP_END
è? 
NULL
 :…;

1021 } ià(
p
 =ğ
	`ZIPLIST_ENTRY_HEAD
(
zl
)) {

1022  
NULL
;

1024 
	`ZIP_DECODE_PREVLEN
(
p
, 
´evËnsize
, 
´evËn
);

1025 
	`as£¹
(
´evËn
 > 0);

1026  
p
-
´evËn
;

1028 
	}
}

1034 
	$zli¡G‘
(*
p
, **
s¡r
, *
¦’
, *
sv®
) {

1035 
zËÁry
 
’Œy
;

1036 ià(
p
 =ğ
NULL
 ||…[0] =ğ
ZIP_END
)  0;

1037 ià(
s¡r
è*s¡¸ğ
NULL
;

1039 
	`zEÁry
(
p
, &
’Œy
);

1040 ià(
	`ZIP_IS_STR
(
’Œy
.
’codšg
)) {

1041 ià(
s¡r
) {

1042 *
¦’
 = 
’Œy
.
Ën
;

1043 *
s¡r
 = 
p
+
’Œy
.
h—d”size
;

1046 ià(
sv®
) {

1047 *
sv®
 = 
	`zLßdIÁeg”
(
p
+
’Œy
.
h—d”size
,’Œy.
’codšg
);

1051 
	}
}

1054 *
	$zli¡In£¹
(*
zl
, *
p
, *
s
, 
¦’
) {

1055  
	`__zli¡In£¹
(
zl
,
p
,
s
,
¦’
);

1056 
	}
}

1061 *
	$zli¡D–‘e
(*
zl
, **
p
) {

1062 
size_t
 
off£t
 = *
p
-
zl
;

1063 
zl
 = 
	`__zli¡D–‘e
(zl,*
p
,1);

1069 *
p
 = 
zl
+
off£t
;

1070  
zl
;

1071 
	}
}

1074 *
	$zli¡D–‘eRªge
(*
zl
, 
šdex
, 
num
) {

1075 *
p
 = 
	`zli¡Index
(
zl
,
šdex
);

1076  (
p
 =ğ
NULL
è? 
zl
 : 
	`__zli¡D–‘e
(zl,p,
num
);

1077 
	}
}

1081 
	$zli¡Com·»
(*
p
, *
s¡r
, 
¦’
) {

1082 
zËÁry
 
’Œy
;

1083 
£ncodšg
;

1084 
zv®
, 
sv®
;

1085 ià(
p
[0] =ğ
ZIP_END
)  0;

1087 
	`zEÁry
(
p
, &
’Œy
);

1088 ià(
	`ZIP_IS_STR
(
’Œy
.
’codšg
)) {

1090 ià(
’Œy
.
Ën
 =ğ
¦’
) {

1091  
	`memcmp
(
p
+
’Œy
.
h—d”size
,
s¡r
,
¦’
) == 0;

1098 ià(
	`zTryEncodšg
(
s¡r
,
¦’
,&
sv®
,&
£ncodšg
)) {

1099 
zv®
 = 
	`zLßdIÁeg”
(
p
+
’Œy
.
h—d”size
,’Œy.
’codšg
);

1100  
zv®
 =ğ
sv®
;

1104 
	}
}

1108 *
	$zli¡Fšd
(*
p
, *
v¡r
, 
vËn
, 
sk
) {

1109 
skút
 = 0;

1110 
v’codšg
 = 0;

1111 
vÎ
 = 0;

1113 
p
[0] !ğ
ZIP_END
) {

1114 
´evËnsize
, 
’codšg
, 
Ënsize
, 
Ën
;

1115 *
q
;

1117 
	`ZIP_DECODE_PREVLENSIZE
(
p
, 
´evËnsize
);

1118 
	`ZIP_DECODE_LENGTH
(
p
 + 
´evËnsize
, 
’codšg
, 
Ënsize
, 
Ën
);

1119 
q
 = 
p
 + 
´evËnsize
 + 
Ënsize
;

1121 ià(
skút
 == 0) {

1123 ià(
	`ZIP_IS_STR
(
’codšg
)) {

1124 ià(
Ën
 =ğ
vËn
 && 
	`memcmp
(
q
, 
v¡r
, vlen) == 0) {

1125  
p
;

1131 ià(
v’codšg
 == 0) {

1132 ià(!
	`zTryEncodšg
(
v¡r
, 
vËn
, &
vÎ
, &
v’codšg
)) {

1136 
v’codšg
 = 
UCHAR_MAX
;

1139 
	`as£¹
(
v’codšg
);

1145 ià(
v’codšg
 !ğ
UCHAR_MAX
) {

1146 
Î
 = 
	`zLßdIÁeg”
(
q
, 
’codšg
);

1147 ià(
Î
 =ğ
vÎ
) {

1148  
p
;

1154 
skút
 = 
sk
;

1157 
skút
--;

1161 
p
 = 
q
 + 
Ën
;

1164  
NULL
;

1165 
	}
}

1168 
	$zli¡L’
(*
zl
) {

1169 
Ën
 = 0;

1170 ià(
	`šŒev16ifbe
(
	`ZIPLIST_LENGTH
(
zl
)è< 
UINT16_MAX
) {

1171 
Ën
 = 
	`šŒev16ifbe
(
	`ZIPLIST_LENGTH
(
zl
));

1173 *
p
 = 
zl
+
ZIPLIST_HEADER_SIZE
;

1174 *
p
 !ğ
ZIP_END
) {

1175 
p
 +ğ
	`zRawEÁryL’gth
(p);

1176 
Ën
++;

1180 ià(
Ën
 < 
UINT16_MAX
è
	`ZIPLIST_LENGTH
(
zl
èğ
	`šŒev16ifbe
(len);

1182  
Ën
;

1183 
	}
}

1186 
size_t
 
	$zli¡BlobL’
(*
zl
) {

1187  
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
));

1188 
	}
}

1190 
	$zli¡R•r
(*
zl
) {

1191 *
p
;

1192 
šdex
 = 0;

1193 
zËÁry
 
’Œy
;

1195 
	`´štf
(

1199 
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
)),

1200 
	`šŒev16ifbe
(
	`ZIPLIST_LENGTH
(
zl
)),

1201 
	`šŒev32ifbe
(
	`ZIPLIST_TAIL_OFFSET
(
zl
)));

1202 
p
 = 
	`ZIPLIST_ENTRY_HEAD
(
zl
);

1203 *
p
 !ğ
ZIP_END
) {

1204 
	`zEÁry
(
p
, &
’Œy
);

1205 
	`´štf
(

1215 ()
p
,

1216 
šdex
,

1217 (è(
p
-
zl
),

1218 
’Œy
.
h—d”size
+’Œy.
Ën
,

1219 
’Œy
.
h—d”size
,

1220 
’Œy
.
´ev¿wËn
,

1221 
’Œy
.
´ev¿wËnsize
,

1222 
’Œy
.
Ën
);

1223 
	`´štf
("\tbytes: ");

1224 
i
 = 0; i < 
’Œy
.
h—d”size
+’Œy.
Ën
; i++) {

1225 
	`´štf
("%02x|",
p
[
i
]);

1227 
	`´štf
("\n");

1228 
p
 +ğ
’Œy
.
h—d”size
;

1229 ià(
	`ZIP_IS_STR
(
’Œy
.
’codšg
)) {

1230 
	`´štf
("\t[str]");

1231 ià(
’Œy
.
Ën
 > 40) {

1232 ià(
	`fwr™e
(
p
,40,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1233 
	`´štf
("...");

1235 ià(
’Œy
.
Ën
 &&

1236 
	`fwr™e
(
p
,
’Œy
.
Ën
,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1239 
	`´štf
("\t[št]%Îd", (è
	`zLßdIÁeg”
(
p
,
’Œy
.
’codšg
));

1241 
	`´štf
("\n}\n");

1242 
p
 +ğ
’Œy
.
Ën
;

1243 
šdex
++;

1245 
	`´štf
("{end}\n\n");

1246 
	}
}

1248 #ifdeà
REDIS_TEST


1249 
	~<sys/time.h
>

1250 
	~"adli¡.h
"

1251 
	~"sds.h
"

1253 
	#debug
(
f
, ...è{ ià(
DEBUG
è
	`´štf
(f, 
__VA_ARGS__
); }

	)

1255 *
	$ü—‹Li¡
() {

1256 *
zl
 = 
	`zli¡New
();

1257 
zl
 = 
	`zli¡Push
(zl, (*)"foo", 3, 
ZIPLIST_TAIL
);

1258 
zl
 = 
	`zli¡Push
(zl, (*)"quux", 4, 
ZIPLIST_TAIL
);

1259 
zl
 = 
	`zli¡Push
(zl, (*)"h–lo", 5, 
ZIPLIST_HEAD
);

1260 
zl
 = 
	`zli¡Push
(zl, (*)"1024", 4, 
ZIPLIST_TAIL
);

1261  
zl
;

1262 
	}
}

1264 *
	$ü—‹IÁLi¡
() {

1265 *
zl
 = 
	`zli¡New
();

1266 
buf
[32];

1268 
	`¥rštf
(
buf
, "100");

1269 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_TAIL
);

1270 
	`¥rštf
(
buf
, "128000");

1271 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_TAIL
);

1272 
	`¥rštf
(
buf
, "-100");

1273 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_HEAD
);

1274 
	`¥rštf
(
buf
, "4294967296");

1275 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_HEAD
);

1276 
	`¥rštf
(
buf
, "non integer");

1277 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_TAIL
);

1278 
	`¥rštf
(
buf
, "much much†onger‚on integer");

1279 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
	`¡¾’
(buf), 
ZIPLIST_TAIL
);

1280  
zl
;

1281 
	}
}

1283 
	$u£c
() {

1284 
timev®
 
tv
;

1285 
	`g‘timeofday
(&
tv
,
NULL
);

1286  ((()
tv
.
tv_£c
)*1000000)+tv.
tv_u£c
;

1287 
	}
}

1289 
	$¡»ss
(
pos
, 
num
, 
maxsize
, 
dnum
) {

1290 
i
,
j
,
k
;

1291 *
zl
;

1292 
pos¡r
[2][5] = { "HEAD", "TAIL" };

1293 
¡¬t
;

1294 
i
 = 0; i < 
maxsize
; i+=
dnum
) {

1295 
zl
 = 
	`zli¡New
();

1296 
j
 = 0; j < 
i
; j++) {

1297 
zl
 = 
	`zli¡Push
(zl,(*)"quux",4,
ZIPLIST_TAIL
);

1301 
¡¬t
 = 
	`u£c
();

1302 
k
 = 0; k < 
num
; k++) {

1303 
zl
 = 
	`zli¡Push
(zl,(*)"quux",4,
pos
);

1304 
zl
 = 
	`zli¡D–‘eRªge
(zl,0,1);

1306 
	`´štf
("List size: %8d, bytes: %8d, %dx…ush+pop (%s): %6lld usec\n",

1307 
i
,
	`šŒev32ifbe
(
	`ZIPLIST_BYTES
(
zl
)),
num
,
pos¡r
[
pos
],
	`u£c
()-
¡¬t
);

1308 
	`zä“
(
zl
);

1310 
	}
}

1312 *
	$pİ
(*
zl
, 
wh”e
) {

1313 *
p
, *
v¡r
;

1314 
vËn
;

1315 
vlÚg
;

1317 
p
 = 
	`zli¡Index
(
zl
,
wh”e
 =ğ
ZIPLIST_HEAD
 ? 0 : -1);

1318 ià(
	`zli¡G‘
(
p
,&
v¡r
,&
vËn
,&
vlÚg
)) {

1319 ià(
wh”e
 =ğ
ZIPLIST_HEAD
)

1320 
	`´štf
("Pop head: ");

1322 
	`´štf
("Popail: ");

1324 ià(
v¡r
) {

1325 ià(
vËn
 && 
	`fwr™e
(
v¡r
,vËn,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1328 
	`´štf
("%Îd", 
vlÚg
);

1331 
	`´štf
("\n");

1332  
	`zli¡D–‘e
(
zl
,&
p
);

1334 
	`´štf
("ERROR: Could‚ot…op\n");

1335 
	`ex™
(1);

1337 
	}
}

1339 
	$¿nd¡ršg
(*
rg‘
, 
mš
, 
max
) {

1340 
p
 = 0;

1341 
Ën
 = 
mš
+
	`¿nd
()%(
max
-min+1);

1342 
mšv®
, 
maxv®
;

1343 
	`¿nd
() % 3) {

1345 
mšv®
 = 0;

1346 
maxv®
 = 255;

1349 
mšv®
 = 48;

1350 
maxv®
 = 122;

1353 
mšv®
 = 48;

1354 
maxv®
 = 52;

1357 
	`as£¹
(
NULL
);

1360 
p
 < 
Ën
)

1361 
rg‘
[
p
++] = 
mšv®
+
	`¿nd
()%(
maxv®
-minval+1);

1362  
Ën
;

1363 
	}
}

1365 
	$v”ify
(*
zl
, 
zËÁry
 *
e
) {

1366 
Ën
 = 
	`zli¡L’
(
zl
);

1367 
zËÁry
 
_e
;

1369 
	`ZIPLIST_ENTRY_ZERO
(&
_e
);

1371 
i
 = 0; i < 
Ën
; i++) {

1372 
	`mem£t
(&
e
[
i
], 0, (
zËÁry
));

1373 
	`zEÁry
(
	`zli¡Index
(
zl
, 
i
), &
e
[i]);

1375 
	`mem£t
(&
_e
, 0, (
zËÁry
));

1376 
	`zEÁry
(
	`zli¡Index
(
zl
, -
Ën
+
i
), &
_e
);

1378 
	`as£¹
(
	`memcmp
(&
e
[
i
], &
_e
, (
zËÁry
)) == 0);

1380 
	}
}

1382 
	$zli¡Te¡
(
¬gc
, **
¬gv
) {

1383 *
zl
, *
p
;

1384 *
’Œy
;

1385 
–’
;

1386 
v®ue
;

1389 ià(
¬gc
 == 2)

1390 
	`¤ªd
(
	`©oi
(
¬gv
[1]));

1392 
zl
 = 
	`ü—‹IÁLi¡
();

1393 
	`zli¡R•r
(
zl
);

1395 
	`zä“
(
zl
);

1397 
zl
 = 
	`ü—‹Li¡
();

1398 
	`zli¡R•r
(
zl
);

1400 
zl
 = 
	`pİ
(zl,
ZIPLIST_TAIL
);

1401 
	`zli¡R•r
(
zl
);

1403 
zl
 = 
	`pİ
(zl,
ZIPLIST_HEAD
);

1404 
	`zli¡R•r
(
zl
);

1406 
zl
 = 
	`pİ
(zl,
ZIPLIST_TAIL
);

1407 
	`zli¡R•r
(
zl
);

1409 
zl
 = 
	`pİ
(zl,
ZIPLIST_TAIL
);

1410 
	`zli¡R•r
(
zl
);

1412 
	`zä“
(
zl
);

1414 
	`´štf
("Getƒlement‡t index 3:\n");

1416 
zl
 = 
	`ü—‹Li¡
();

1417 
p
 = 
	`zli¡Index
(
zl
, 3);

1418 ià(!
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1419 
	`´štf
("ERROR: Could‚ot‡ccess index 3\n");

1422 ià(
’Œy
) {

1423 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1424 
	`´štf
("\n");

1426 
	`´štf
("%Îd\n", 
v®ue
);

1428 
	`´štf
("\n");

1429 
	`zä“
(
zl
);

1432 
	`´štf
("Getƒlement‡t index 4 (out of„ange):\n");

1434 
zl
 = 
	`ü—‹Li¡
();

1435 
p
 = 
	`zli¡Index
(
zl
, 4);

1436 ià(
p
 =ğ
NULL
) {

1437 
	`´štf
("Noƒntry\n");

1439 
	`´štf
("ERROR: Ouˆoà¿ngšdex should„‘uº NULL,„‘uºed off£t: %ld\n", 
p
-
zl
);

1442 
	`´štf
("\n");

1443 
	`zä“
(
zl
);

1446 
	`´štf
("Getƒlement‡t index -1 (lastƒlement):\n");

1448 
zl
 = 
	`ü—‹Li¡
();

1449 
p
 = 
	`zli¡Index
(
zl
, -1);

1450 ià(!
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1451 
	`´štf
("ERROR: Could‚ot‡ccess index -1\n");

1454 ià(
’Œy
) {

1455 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1456 
	`´štf
("\n");

1458 
	`´štf
("%Îd\n", 
v®ue
);

1460 
	`´štf
("\n");

1461 
	`zä“
(
zl
);

1464 
	`´štf
("Getƒlement‡t index -4 (firstƒlement):\n");

1466 
zl
 = 
	`ü—‹Li¡
();

1467 
p
 = 
	`zli¡Index
(
zl
, -4);

1468 ià(!
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1469 
	`´štf
("ERROR: Could‚ot‡ccess index -4\n");

1472 ià(
’Œy
) {

1473 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1474 
	`´štf
("\n");

1476 
	`´štf
("%Îd\n", 
v®ue
);

1478 
	`´štf
("\n");

1479 
	`zä“
(
zl
);

1482 
	`´štf
("Getƒlement‡t index -5 (reverse out of„ange):\n");

1484 
zl
 = 
	`ü—‹Li¡
();

1485 
p
 = 
	`zli¡Index
(
zl
, -5);

1486 ià(
p
 =ğ
NULL
) {

1487 
	`´štf
("Noƒntry\n");

1489 
	`´štf
("ERROR: Ouˆoà¿ngšdex should„‘uº NULL,„‘uºed off£t: %ld\n", 
p
-
zl
);

1492 
	`´štf
("\n");

1493 
	`zä“
(
zl
);

1496 
	`´štf
("Iterate†ist from 0oƒnd:\n");

1498 
zl
 = 
	`ü—‹Li¡
();

1499 
p
 = 
	`zli¡Index
(
zl
, 0);

1500 
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1501 
	`´štf
("Entry: ");

1502 ià(
’Œy
) {

1503 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1505 
	`´štf
("%Îd", 
v®ue
);

1507 
p
 = 
	`zli¡Next
(
zl
,p);

1508 
	`´štf
("\n");

1510 
	`´štf
("\n");

1511 
	`zä“
(
zl
);

1514 
	`´štf
("Iterate†ist from 1oƒnd:\n");

1516 
zl
 = 
	`ü—‹Li¡
();

1517 
p
 = 
	`zli¡Index
(
zl
, 1);

1518 
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1519 
	`´štf
("Entry: ");

1520 ià(
’Œy
) {

1521 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1523 
	`´štf
("%Îd", 
v®ue
);

1525 
p
 = 
	`zli¡Next
(
zl
,p);

1526 
	`´štf
("\n");

1528 
	`´štf
("\n");

1529 
	`zä“
(
zl
);

1532 
	`´štf
("Iterate†ist from 2oƒnd:\n");

1534 
zl
 = 
	`ü—‹Li¡
();

1535 
p
 = 
	`zli¡Index
(
zl
, 2);

1536 
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1537 
	`´štf
("Entry: ");

1538 ià(
’Œy
) {

1539 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1541 
	`´štf
("%Îd", 
v®ue
);

1543 
p
 = 
	`zli¡Next
(
zl
,p);

1544 
	`´štf
("\n");

1546 
	`´štf
("\n");

1547 
	`zä“
(
zl
);

1550 
	`´štf
("Iterate starting out of„ange:\n");

1552 
zl
 = 
	`ü—‹Li¡
();

1553 
p
 = 
	`zli¡Index
(
zl
, 4);

1554 ià(!
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1555 
	`´štf
("Noƒntry\n");

1557 
	`´štf
("ERROR\n");

1559 
	`´štf
("\n");

1560 
	`zä“
(
zl
);

1563 
	`´štf
("Iterate from backo front:\n");

1565 
zl
 = 
	`ü—‹Li¡
();

1566 
p
 = 
	`zli¡Index
(
zl
, -1);

1567 
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1568 
	`´štf
("Entry: ");

1569 ià(
’Œy
) {

1570 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1572 
	`´štf
("%Îd", 
v®ue
);

1574 
p
 = 
	`zli¡P»v
(
zl
,p);

1575 
	`´štf
("\n");

1577 
	`´štf
("\n");

1578 
	`zä“
(
zl
);

1581 
	`´štf
("Iterate from backo front, deleting‡ll items:\n");

1583 
zl
 = 
	`ü—‹Li¡
();

1584 
p
 = 
	`zli¡Index
(
zl
, -1);

1585 
	`zli¡G‘
(
p
, &
’Œy
, &
–’
, &
v®ue
)) {

1586 
	`´štf
("Entry: ");

1587 ià(
’Œy
) {

1588 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

1590 
	`´štf
("%Îd", 
v®ue
);

1592 
zl
 = 
	`zli¡D–‘e
(zl,&
p
);

1593 
p
 = 
	`zli¡P»v
(
zl
,p);

1594 
	`´štf
("\n");

1596 
	`´štf
("\n");

1597 
	`zä“
(
zl
);

1600 
	`´štf
("Delete inclusive„ange 0,0:\n");

1602 
zl
 = 
	`ü—‹Li¡
();

1603 
zl
 = 
	`zli¡D–‘eRªge
(zl, 0, 1);

1604 
	`zli¡R•r
(
zl
);

1605 
	`zä“
(
zl
);

1608 
	`´štf
("Delete inclusive„ange 0,1:\n");

1610 
zl
 = 
	`ü—‹Li¡
();

1611 
zl
 = 
	`zli¡D–‘eRªge
(zl, 0, 2);

1612 
	`zli¡R•r
(
zl
);

1613 
	`zä“
(
zl
);

1616 
	`´štf
("Delete inclusive„ange 1,2:\n");

1618 
zl
 = 
	`ü—‹Li¡
();

1619 
zl
 = 
	`zli¡D–‘eRªge
(zl, 1, 2);

1620 
	`zli¡R•r
(
zl
);

1621 
	`zä“
(
zl
);

1624 
	`´štf
("Delete with start index out of„ange:\n");

1626 
zl
 = 
	`ü—‹Li¡
();

1627 
zl
 = 
	`zli¡D–‘eRªge
(zl, 5, 1);

1628 
	`zli¡R•r
(
zl
);

1629 
	`zä“
(
zl
);

1632 
	`´štf
("Delete with‚um overflow:\n");

1634 
zl
 = 
	`ü—‹Li¡
();

1635 
zl
 = 
	`zli¡D–‘eRªge
(zl, 1, 5);

1636 
	`zli¡R•r
(
zl
);

1637 
	`zä“
(
zl
);

1640 
	`´štf
("Delete foo while iterating:\n");

1642 
zl
 = 
	`ü—‹Li¡
();

1643 
p
 = 
	`zli¡Index
(
zl
,0);

1644 
	`zli¡G‘
(
p
,&
’Œy
,&
–’
,&
v®ue
)) {

1645 ià(
’Œy
 && 
	`¡ºcmp
("foo",(*ëÁry,
–’
) == 0) {

1646 
	`´štf
("Delete foo\n");

1647 
zl
 = 
	`zli¡D–‘e
(zl,&
p
);

1649 
	`´štf
("Entry: ");

1650 ià(
’Œy
) {

1651 ià(
–’
 && 
	`fwr™e
(
’Œy
,–’,1,
¡dout
) == 0)

1652 
	`³¼Ü
("fwrite");

1654 
	`´štf
("%Îd",
v®ue
);

1656 
p
 = 
	`zli¡Next
(
zl
,p);

1657 
	`´štf
("\n");

1660 
	`´štf
("\n");

1661 
	`zli¡R•r
(
zl
);

1662 
	`zä“
(
zl
);

1665 
	`´štf
("Regressionest for >255 byte strings:\n");

1667 
v1
[257] = {0}, 
v2
[257] = {0};

1668 
	`mem£t
(
v1
,'x',256);

1669 
	`mem£t
(
v2
,'y',256);

1670 
zl
 = 
	`zli¡New
();

1671 
zl
 = 
	`zli¡Push
(zl,(*)
v1
,
	`¡¾’
(v1),
ZIPLIST_TAIL
);

1672 
zl
 = 
	`zli¡Push
(zl,(*)
v2
,
	`¡¾’
(v2),
ZIPLIST_TAIL
);

1675 
p
 = 
	`zli¡Index
(
zl
,0);

1676 
	`as£¹
(
	`zli¡G‘
(
p
,&
’Œy
,&
–’
,&
v®ue
));

1677 
	`as£¹
(
	`¡ºcmp
(
v1
,(*)
’Œy
,
–’
) == 0);

1678 
p
 = 
	`zli¡Index
(
zl
,1);

1679 
	`as£¹
(
	`zli¡G‘
(
p
,&
’Œy
,&
–’
,&
v®ue
));

1680 
	`as£¹
(
	`¡ºcmp
(
v2
,(*)
’Œy
,
–’
) == 0);

1681 
	`´štf
("SUCCESS\n\n");

1682 
	`zä“
(
zl
);

1685 
	`´štf
("Regressionest deleting‚exto†astƒntries:\n");

1687 
v
[3][257] = {{0}};

1688 
zËÁry
 
e
[3] = {{.
´ev¿wËnsize
 = 0, .
´ev¿wËn
 = 0, .
Ënsize
 = 0,

1689 .
Ën
 = 0, .
h—d”size
 = 0, .
’codšg
 = 0, .
p
 = 
NULL
}};

1690 
size_t
 
i
;

1692 
i
 = 0; i < ((
v
)/(v[0])); i++) {

1693 
	`mem£t
(
v
[
i
], 'a' + i, (v[0]));

1696 
v
[0][256] = '\0';

1697 
v
[1][ 1] = '\0';

1698 
v
[2][256] = '\0';

1700 
zl
 = 
	`zli¡New
();

1701 
i
 = 0; i < ((
v
)/(v[0])); i++) {

1702 
zl
 = 
	`zli¡Push
(zl, (*è
v
[
i
], 
	`¡¾’
(v[i]), 
ZIPLIST_TAIL
);

1705 
	`v”ify
(
zl
, 
e
);

1707 
	`as£¹
(
e
[0].
´ev¿wËnsize
 == 1);

1708 
	`as£¹
(
e
[1].
´ev¿wËnsize
 == 5);

1709 
	`as£¹
(
e
[2].
´ev¿wËnsize
 == 1);

1712 *
p
 = 
e
[1].p;

1713 
zl
 = 
	`zli¡D–‘e
(zl, &
p
);

1715 
	`v”ify
(
zl
, 
e
);

1717 
	`as£¹
(
e
[0].
´ev¿wËnsize
 == 1);

1718 
	`as£¹
(
e
[1].
´ev¿wËnsize
 == 5);

1720 
	`´štf
("SUCCESS\n\n");

1721 
	`zä“
(
zl
);

1724 
	`´štf
("Create†ong†ist‡nd check indices:\n");

1726 
zl
 = 
	`zli¡New
();

1727 
buf
[32];

1728 
i
,
Ën
;

1729 
i
 = 0; i < 1000; i++) {

1730 
Ën
 = 
	`¥rštf
(
buf
,"%d",
i
);

1731 
zl
 = 
	`zli¡Push
(zl,(*)
buf
,
Ën
,
ZIPLIST_TAIL
);

1733 
i
 = 0; i < 1000; i++) {

1734 
p
 = 
	`zli¡Index
(
zl
,
i
);

1735 
	`as£¹
(
	`zli¡G‘
(
p
,
NULL
,NULL,&
v®ue
));

1736 
	`as£¹
(
i
 =ğ
v®ue
);

1738 
p
 = 
	`zli¡Index
(
zl
,-
i
-1);

1739 
	`as£¹
(
	`zli¡G‘
(
p
,
NULL
,NULL,&
v®ue
));

1740 
	`as£¹
(999-
i
 =ğ
v®ue
);

1742 
	`´štf
("SUCCESS\n\n");

1743 
	`zä“
(
zl
);

1746 
	`´štf
("Compare strings with ziplistƒntries:\n");

1748 
zl
 = 
	`ü—‹Li¡
();

1749 
p
 = 
	`zli¡Index
(
zl
,0);

1750 ià(!
	`zli¡Com·»
(
p
,(*)"hello",5)) {

1751 
	`´štf
("ERROR:‚ot \"hello\"\n");

1754 ià(
	`zli¡Com·»
(
p
,(*)"hella",5)) {

1755 
	`´štf
("ERROR: \"hella\"\n");

1759 
p
 = 
	`zli¡Index
(
zl
,3);

1760 ià(!
	`zli¡Com·»
(
p
,(*)"1024",4)) {

1761 
	`´štf
("ERROR:‚ot \"1024\"\n");

1764 ià(
	`zli¡Com·»
(
p
,(*)"1025",4)) {

1765 
	`´štf
("ERROR: \"1025\"\n");

1768 
	`´štf
("SUCCESS\n\n");

1769 
	`zä“
(
zl
);

1772 
	`´štf
("Mergeest:\n");

1775 
zl
 = 
	`ü—‹Li¡
();

1776 *
zl2
 = 
	`ü—‹Li¡
();

1778 *
zl3
 = 
	`zli¡New
();

1779 *
zl4
 = 
	`zli¡New
();

1781 ià(
	`zli¡M”ge
(&
zl4
, &zl4)) {

1782 
	`´štf
("ERROR: Allowed merging of one ziplist into itself.\n");

1787 
zl4
 = 
	`zli¡M”ge
(&
zl3
, &zl4);

1788 
	`zli¡R•r
(
zl4
);

1789 ià(
	`zli¡L’
(
zl4
)) {

1790 
	`´štf
("ERROR: Mergingwoƒmpty ziplists createdƒntries.\n");

1793 
	`zä“
(
zl4
);

1795 
zl2
 = 
	`zli¡M”ge
(&
zl
, &zl2);

1797 
	`zli¡R•r
(
zl2
);

1799 ià(
	`zli¡L’
(
zl2
) != 8) {

1800 
	`´štf
("ERROR: M”ged†’gth‚Ù 8, but: %u\n", 
	`zli¡L’
(
zl2
));

1804 
p
 = 
	`zli¡Index
(
zl2
,0);

1805 ià(!
	`zli¡Com·»
(
p
,(*)"hello",5)) {

1806 
	`´štf
("ERROR:‚ot \"hello\"\n");

1809 ià(
	`zli¡Com·»
(
p
,(*)"hella",5)) {

1810 
	`´štf
("ERROR: \"hella\"\n");

1814 
p
 = 
	`zli¡Index
(
zl2
,3);

1815 ià(!
	`zli¡Com·»
(
p
,(*)"1024",4)) {

1816 
	`´štf
("ERROR:‚ot \"1024\"\n");

1819 ià(
	`zli¡Com·»
(
p
,(*)"1025",4)) {

1820 
	`´štf
("ERROR: \"1025\"\n");

1824 
p
 = 
	`zli¡Index
(
zl2
,4);

1825 ià(!
	`zli¡Com·»
(
p
,(*)"hello",5)) {

1826 
	`´štf
("ERROR:‚ot \"hello\"\n");

1829 ià(
	`zli¡Com·»
(
p
,(*)"hella",5)) {

1830 
	`´štf
("ERROR: \"hella\"\n");

1834 
p
 = 
	`zli¡Index
(
zl2
,7);

1835 ià(!
	`zli¡Com·»
(
p
,(*)"1024",4)) {

1836 
	`´štf
("ERROR:‚ot \"1024\"\n");

1839 ià(
	`zli¡Com·»
(
p
,(*)"1025",4)) {

1840 
	`´štf
("ERROR: \"1025\"\n");

1843 
	`´štf
("SUCCESS\n\n");

1844 
	`zä“
(
zl
);

1847 
	`´štf
("Stress with„andom…ayloads of differentƒncoding:\n");

1849 
i
,
j
,
Ën
,
wh”e
;

1850 *
p
;

1851 
buf
[1024];

1852 
buæ’
;

1853 
li¡
 *
»f
;

1854 
li¡Node
 *
»âode
;

1857 *
s¡r
;

1858 
¦’
;

1859 
sv®
;

1861 
i
 = 0; i < 20000; i++) {

1862 
zl
 = 
	`zli¡New
();

1863 
»f
 = 
	`li¡C»©e
();

1864 
	`li¡S‘F»eM‘hod
(
»f
,((*)(*))
sdsä“
);

1865 
Ën
 = 
	`¿nd
() % 256;

1868 
j
 = 0; j < 
Ën
; j++) {

1869 
wh”e
 = (
	`¿nd
(è& 1è? 
ZIPLIST_HEAD
 : 
ZIPLIST_TAIL
;

1870 ià(
	`¿nd
() % 2) {

1871 
buæ’
 = 
	`¿nd¡ršg
(
buf
,1,(buf)-1);

1873 
	`¿nd
() % 3) {

1875 
buæ’
 = 
	`¥rštf
(
buf
,"%Îd",(0LL + 
	`¿nd
()) >> 20);

1878 
buæ’
 = 
	`¥rštf
(
buf
,"%Îd",(0LL + 
	`¿nd
()));

1881 
buæ’
 = 
	`¥rštf
(
buf
,"%Îd",(0LL + 
	`¿nd
()) << 20);

1884 
	`as£¹
(
NULL
);

1889 
zl
 = 
	`zli¡Push
(zl, (*)
buf
, 
buæ’
, 
wh”e
);

1892 ià(
wh”e
 =ğ
ZIPLIST_HEAD
) {

1893 
	`li¡AddNodeH—d
(
»f
,
	`sd¢ewËn
(
buf
, 
buæ’
));

1894 } ià(
wh”e
 =ğ
ZIPLIST_TAIL
) {

1895 
	`li¡AddNodeTa
(
»f
,
	`sd¢ewËn
(
buf
, 
buæ’
));

1897 
	`as£¹
(
NULL
);

1901 
	`as£¹
(
	`li¡L’gth
(
»f
è=ğ
	`zli¡L’
(
zl
));

1902 
j
 = 0; j < 
Ën
; j++) {

1905 
p
 = 
	`zli¡Index
(
zl
,
j
);

1906 
»âode
 = 
	`li¡Index
(
»f
,
j
);

1908 
	`as£¹
(
	`zli¡G‘
(
p
,&
s¡r
,&
¦’
,&
sv®
));

1909 ià(
s¡r
 =ğ
NULL
) {

1910 
buæ’
 = 
	`¥rštf
(
buf
,"%Îd",
sv®
);

1912 
buæ’
 = 
¦’
;

1913 
	`memıy
(
buf
,
s¡r
,
buæ’
);

1914 
buf
[
buæ’
] = '\0';

1916 
	`as£¹
(
	`memcmp
(
buf
,
	`li¡NodeV®ue
(
»âode
),
buæ’
) == 0);

1918 
	`zä“
(
zl
);

1919 
	`li¡R–—£
(
»f
);

1921 
	`´štf
("SUCCESS\n\n");

1924 
	`´štf
("Stress with variable ziplist size:\n");

1926 
	`¡»ss
(
ZIPLIST_HEAD
,100000,16384,256);

1927 
	`¡»ss
(
ZIPLIST_TAIL
,100000,16384,256);

1931 
	}
}

	@ziplist.h

31 #iâdeà
_ZIPLIST_H


32 
	#_ZIPLIST_H


	)

34 
	#ZIPLIST_HEAD
 0

	)

35 
	#ZIPLIST_TAIL
 1

	)

37 *
zli¡New
();

38 *
zli¡M”ge
(**
fœ¡
, **
£cÚd
);

39 *
zli¡Push
(*
zl
, *
s
, 
¦’
, 
wh”e
);

40 *
zli¡Index
(*
zl
, 
šdex
);

41 *
zli¡Next
(*
zl
, *
p
);

42 *
zli¡P»v
(*
zl
, *
p
);

43 
zli¡G‘
(*
p
, **
sv®
, *
¦’
, *
lv®
);

44 *
zli¡In£¹
(*
zl
, *
p
, *
s
, 
¦’
);

45 *
zli¡D–‘e
(*
zl
, **
p
);

46 *
zli¡D–‘eRªge
(*
zl
, 
šdex
, 
num
);

47 
zli¡Com·»
(*
p
, *
s
, 
¦’
);

48 *
zli¡Fšd
(*
p
, *
v¡r
, 
vËn
, 
sk
);

49 
zli¡L’
(*
zl
);

50 
size_t
 
zli¡BlobL’
(*
zl
);

51 
zli¡R•r
(*
zl
);

53 #ifdeà
REDIS_TEST


54 
zli¡Te¡
(
¬gc
, *
¬gv
[]);

	@zipmap.c

78 
	~<¡dio.h
>

79 
	~<¡ršg.h
>

80 
	~"zm®loc.h
"

81 
	~"’dŸncÚv.h
"

83 
	#ZIPMAP_BIGLEN
 254

	)

84 
	#ZIPMAP_END
 255

	)

88 
	#ZIPMAP_VALUE_MAX_FREE
 4

	)

93 
	#ZIPMAP_LEN_BYTES
(
_l
è(((_lè< 
ZIPMAP_BIGLEN
è? 1 : ()+1)

	)

96 *
	$zm­New
() {

97 *
zm
 = 
	`zm®loc
(2);

99 
zm
[0] = 0;

100 
zm
[1] = 
ZIPMAP_END
;

101  
zm
;

102 
	}
}

105 
	$zm­DecodeL’gth
(*
p
) {

106 
Ën
 = *
p
;

108 ià(
Ën
 < 
ZIPMAP_BIGLEN
) †en;

109 
	`memıy
(&
Ën
,
p
+1,());

110 
	`mem»v32ifbe
(&
Ën
);

111  
Ën
;

112 
	}
}

116 
	$zm­EncodeL’gth
(*
p
, 
Ën
) {

117 ià(
p
 =ğ
NULL
) {

118  
	`ZIPMAP_LEN_BYTES
(
Ën
);

120 ià(
Ën
 < 
ZIPMAP_BIGLEN
) {

121 
p
[0] = 
Ën
;

124 
p
[0] = 
ZIPMAP_BIGLEN
;

125 
	`memıy
(
p
+1,&
Ën
,(len));

126 
	`mem»v32ifbe
(
p
+1);

127  1+(
Ën
);

130 
	}
}

138 *
	$zm­LookupRaw
(*
zm
, *
key
, 
kËn
, *
tÙËn
) {

139 *
p
 = 
zm
+1, *
k
 = 
NULL
;

140 
l
,
Î’
;

142 *
p
 !ğ
ZIPMAP_END
) {

143 
ä“
;

146 
l
 = 
	`zm­DecodeL’gth
(
p
);

147 
Î’
 = 
	`zm­EncodeL’gth
(
NULL
,
l
);

148 ià(
key
 !ğ
NULL
 && 
k
 =ğNULL && 
l
 =ğ
kËn
 && !
	`memcmp
(
p
+
Î’
,key,l)) {

151 ià(
tÙËn
 !ğ
NULL
) {

152 
k
 = 
p
;

154  
p
;

157 
p
 +ğ
Î’
+
l
;

159 
l
 = 
	`zm­DecodeL’gth
(
p
);

160 
p
 +ğ
	`zm­EncodeL’gth
(
NULL
,
l
);

161 
ä“
 = 
p
[0];

162 
p
 +ğ
l
+1+
ä“
;

164 ià(
tÙËn
 !ğ
NULL
è*tÙËÀğ()(
p
-
zm
)+1;

165  
k
;

166 
	}
}

168 
	$zm­RequœedL’gth
(
kËn
, 
vËn
) {

169 
l
;

171 
l
 = 
kËn
+
vËn
+3;

172 ià(
kËn
 >ğ
ZIPMAP_BIGLEN
è
l
 += 4;

173 ià(
vËn
 >ğ
ZIPMAP_BIGLEN
è
l
 += 4;

174  
l
;

175 
	}
}

178 
	$zm­RawKeyL’gth
(*
p
) {

179 
l
 = 
	`zm­DecodeL’gth
(
p
);

180  
	`zm­EncodeL’gth
(
NULL
,
l
) +†;

181 
	}
}

185 
	$zm­RawV®ueL’gth
(*
p
) {

186 
l
 = 
	`zm­DecodeL’gth
(
p
);

187 
u£d
;

189 
u£d
 = 
	`zm­EncodeL’gth
(
NULL
,
l
);

190 
u£d
 +ğ
p
[u£d] + 1 + 
l
;

191  
u£d
;

192 
	}
}

197 
	$zm­RawEÁryL’gth
(*
p
) {

198 
l
 = 
	`zm­RawKeyL’gth
(
p
);

199  
l
 + 
	`zm­RawV®ueL’gth
(
p
+l);

200 
	}
}

202 
šlše
 *
	$zm­Resize
(*
zm
, 
Ën
) {

203 
zm
 = 
	`z»®loc
(zm, 
Ën
);

204 
zm
[
Ën
-1] = 
ZIPMAP_END
;

205  
zm
;

206 
	}
}

211 *
	$zm­S‘
(*
zm
, *
key
, 
kËn
, *
v®
, 
vËn
, *
upd©e
) {

212 
zmËn
, 
off£t
;

213 
ä“Ën
, 
»qËn
 = 
	`zm­RequœedL’gth
(
kËn
,
vËn
);

214 
em±y
, 
vem±y
;

215 *
p
;

217 
ä“Ën
 = 
»qËn
;

218 ià(
upd©e
) *update = 0;

219 
p
 = 
	`zm­LookupRaw
(
zm
,
key
,
kËn
,&
zmËn
);

220 ià(
p
 =ğ
NULL
) {

222 
zm
 = 
	`zm­Resize
(zm, 
zmËn
+
»qËn
);

223 
p
 = 
zm
+
zmËn
-1;

224 
zmËn
 = zmËn+
»qËn
;

227 ià(
zm
[0] < 
ZIPMAP_BIGLEN
) zm[0]++;

231 ià(
upd©e
) *update = 1;

232 
ä“Ën
 = 
	`zm­RawEÁryL’gth
(
p
);

233 ià(
ä“Ën
 < 
»qËn
) {

237 
off£t
 = 
p
-
zm
;

238 
zm
 = 
	`zm­Resize
(zm, 
zmËn
-
ä“Ën
+
»qËn
);

239 
p
 = 
zm
+
off£t
;

243 
	`memmove
(
p
+
»qËn
,…+
ä“Ën
, 
zmËn
-(
off£t
+freelen+1));

244 
zmËn
 = zmËn-
ä“Ën
+
»qËn
;

245 
ä“Ën
 = 
»qËn
;

253 
em±y
 = 
ä“Ën
-
»qËn
;

254 ià(
em±y
 >ğ
ZIPMAP_VALUE_MAX_FREE
) {

257 
off£t
 = 
p
-
zm
;

258 
	`memmove
(
p
+
»qËn
,…+
ä“Ën
, 
zmËn
-(
off£t
+freelen+1));

259 
zmËn
 -ğ
em±y
;

260 
zm
 = 
	`zm­Resize
(zm, 
zmËn
);

261 
p
 = 
zm
+
off£t
;

262 
vem±y
 = 0;

264 
vem±y
 = 
em±y
;

269 
p
 +ğ
	`zm­EncodeL’gth
Õ,
kËn
);

270 
	`memıy
(
p
,
key
,
kËn
);

271 
p
 +ğ
kËn
;

273 
p
 +ğ
	`zm­EncodeL’gth
Õ,
vËn
);

274 *
p
++ = 
vem±y
;

275 
	`memıy
(
p
,
v®
,
vËn
);

276  
zm
;

277 
	}
}

281 *
	$zm­D–
(*
zm
, *
key
, 
kËn
, *
d–‘ed
) {

282 
zmËn
, 
ä“Ën
;

283 *
p
 = 
	`zm­LookupRaw
(
zm
,
key
,
kËn
,&
zmËn
);

284 ià(
p
) {

285 
ä“Ën
 = 
	`zm­RawEÁryL’gth
(
p
);

286 
	`memmove
(
p
,…+
ä“Ën
, 
zmËn
-(Õ-
zm
)+freelen+1));

287 
zm
 = 
	`zm­Resize
(zm, 
zmËn
-
ä“Ën
);

290 ià(
zm
[0] < 
ZIPMAP_BIGLEN
) zm[0]--;

292 ià(
d–‘ed
) *deleted = 1;

294 ià(
d–‘ed
) *deleted = 0;

296  
zm
;

297 
	}
}

300 *
	$zm­Rewšd
(*
zm
) {

301  
zm
+1;

302 
	}
}

315 *
	$zm­Next
(*
zm
, **
key
, *
kËn
, **
v®ue
, *
vËn
) {

316 ià(
zm
[0] =ğ
ZIPMAP_END
è 
NULL
;

317 ià(
key
) {

318 *
key
 = 
zm
;

319 *
kËn
 = 
	`zm­DecodeL’gth
(
zm
);

320 *
key
 +ğ
	`ZIPMAP_LEN_BYTES
(*
kËn
);

322 
zm
 +ğ
	`zm­RawKeyL’gth
(zm);

323 ià(
v®ue
) {

324 *
v®ue
 = 
zm
+1;

325 *
vËn
 = 
	`zm­DecodeL’gth
(
zm
);

326 *
v®ue
 +ğ
	`ZIPMAP_LEN_BYTES
(*
vËn
);

328 
zm
 +ğ
	`zm­RawV®ueL’gth
(zm);

329  
zm
;

330 
	}
}

334 
	$zm­G‘
(*
zm
, *
key
, 
kËn
, **
v®ue
, *
vËn
) {

335 *
p
;

337 ià((
p
 = 
	`zm­LookupRaw
(
zm
,
key
,
kËn
,
NULL
)) == NULL)  0;

338 
p
 +ğ
	`zm­RawKeyL’gth
(p);

339 *
vËn
 = 
	`zm­DecodeL’gth
(
p
);

340 *
v®ue
 = 
p
 + 
	`ZIPMAP_LEN_BYTES
(*
vËn
) + 1;

342 
	}
}

345 
	$zm­Exi¡s
(*
zm
, *
key
, 
kËn
) {

346  
	`zm­LookupRaw
(
zm
,
key
,
kËn
,
NULL
) != NULL;

347 
	}
}

350 
	$zm­L’
(*
zm
) {

351 
Ën
 = 0;

352 ià(
zm
[0] < 
ZIPMAP_BIGLEN
) {

353 
Ën
 = 
zm
[0];

355 *
p
 = 
	`zm­Rewšd
(
zm
);

356 (
p
 = 
	`zm­Next
Õ,
NULL
,NULL,NULL,NULL)è!ğNULLè
Ën
++;

359 ià(
Ën
 < 
ZIPMAP_BIGLEN
è
zm
[0] =†en;

361  
Ën
;

362 
	}
}

367 
size_t
 
	$zm­BlobL’
(*
zm
) {

368 
tÙËn
;

369 
	`zm­LookupRaw
(
zm
,
NULL
,0,&
tÙËn
);

370  
tÙËn
;

371 
	}
}

373 #ifdeà
REDIS_TEST


374 
	$zm­R•r
(*
p
) {

375 
l
;

377 
	`´štf
("{¡©u %u}",*
p
++);

379 ià(
p
[0] =ğ
ZIPMAP_END
) {

380 
	`´štf
("{end}");

383 
e
;

385 
l
 = 
	`zm­DecodeL’gth
(
p
);

386 
	`´štf
("{key %u}",
l
);

387 
p
 +ğ
	`zm­EncodeL’gth
(
NULL
,
l
);

388 ià(
l
 !ğ0 && 
	`fwr™e
(
p
,l,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

389 
p
 +ğ
l
;

391 
l
 = 
	`zm­DecodeL’gth
(
p
);

392 
	`´štf
("{v®u%u}",
l
);

393 
p
 +ğ
	`zm­EncodeL’gth
(
NULL
,
l
);

394 
e
 = *
p
++;

395 ià(
l
 !ğ0 && 
	`fwr™e
(
p
,l,1,
¡dout
è=ğ0è
	`³¼Ü
("fwrite");

396 
p
 +ğ
l
+
e
;

397 ià(
e
) {

398 
	`´štf
("[");

399 
e
--è
	`´štf
(".");

400 
	`´štf
("]");

404 
	`´štf
("\n");

405 
	}
}

407 
	#UNUSED
(
x
è()(x)

	)

408 
	$zm­Te¡
(
¬gc
, *
¬gv
[]) {

409 *
zm
;

411 
	`UNUSED
(
¬gc
);

412 
	`UNUSED
(
¬gv
);

414 
zm
 = 
	`zm­New
();

416 
zm
 = 
	`zm­S‘
(zm,(*è"Çme",4, (*è"foo",3,
NULL
);

417 
zm
 = 
	`zm­S‘
(zm,(*è"suºame",7, (*è"foo",3,
NULL
);

418 
zm
 = 
	`zm­S‘
(zm,(*è"age",3, (*è"foo",3,
NULL
);

419 
	`zm­R•r
(
zm
);

421 
zm
 = 
	`zm­S‘
(zm,(*è"h–lo",5, (*è"wÜld!",6,
NULL
);

422 
zm
 = 
	`zm­S‘
(zm,(*è"foo",3, (*è"b¬",3,
NULL
);

423 
zm
 = 
	`zm­S‘
(zm,(*è"foo",3, (*è"!",1,
NULL
);

424 
	`zm­R•r
(
zm
);

425 
zm
 = 
	`zm­S‘
(zm,(*è"foo",3, (*è"12345",5,
NULL
);

426 
	`zm­R•r
(
zm
);

427 
zm
 = 
	`zm­S‘
(zm,(*è"Ãw",3, (*è"xx",2,
NULL
);

428 
zm
 = 
	`zm­S‘
(zm,(*è"nov®",5, (*è"",0,
NULL
);

429 
	`zm­R•r
(
zm
);

430 
zm
 = 
	`zm­D–
(zm,(*è"Ãw",3,
NULL
);

431 
	`zm­R•r
(
zm
);

433 
	`´štf
("\nLook up†arge key:\n");

435 
buf
[512];

436 *
v®ue
;

437 
vËn
, 
i
;

438 
i
 = 0; i < 512; i++è
buf
[i] = 'a';

440 
zm
 = 
	`zm­S‘
(zm,
buf
,512,(*è"lÚg",4,
NULL
);

441 ià(
	`zm­G‘
(
zm
,
buf
,512,&
v®ue
,&
vËn
)) {

442 
	`´štf
(" <long key> is‡ssociatedohe %d bytes value: %.*s\n",

443 
vËn
, vËn, 
v®ue
);

447 
	`´štf
("\nPerform‡ direct†ookup:\n");

449 *
v®ue
;

450 
vËn
;

452 ià(
	`zm­G‘
(
zm
,(*è"foo",3,&
v®ue
,&
vËn
)) {

453 
	`´štf
(" foo is‡ssociatedohe %d bytes value: %.*s\n",

454 
vËn
, vËn, 
v®ue
);

457 
	`´štf
("\nIteratehroughƒlements:\n");

459 *
i
 = 
	`zm­Rewšd
(
zm
);

460 *
key
, *
v®ue
;

461 
kËn
, 
vËn
;

463 (
i
 = 
	`zm­Next
(i,&
key
,&
kËn
,&
v®ue
,&
vËn
)è!ğ
NULL
) {

464 
	`´štf
(" %d:%.* => %d:%.*s\n", 
kËn
, kËn, 
key
, 
vËn
, vËn, 
v®ue
);

468 
	}
}

	@zipmap.h

35 #iâdeà
_ZIPMAP_H


36 
	#_ZIPMAP_H


	)

38 *
zm­New
();

39 *
zm­S‘
(*
zm
, *
key
, 
kËn
, *
v®
, 
vËn
, *
upd©e
);

40 *
zm­D–
(*
zm
, *
key
, 
kËn
, *
d–‘ed
);

41 *
zm­Rewšd
(*
zm
);

42 *
zm­Next
(*
zm
, **
key
, *
kËn
, **
v®ue
, *
vËn
);

43 
zm­G‘
(*
zm
, *
key
, 
kËn
, **
v®ue
, *
vËn
);

44 
zm­Exi¡s
(*
zm
, *
key
, 
kËn
);

45 
zm­L’
(*
zm
);

46 
size_t
 
zm­BlobL’
(*
zm
);

47 
zm­R•r
(*
p
);

49 #ifdeà
REDIS_TEST


50 
zm­Te¡
(
¬gc
, *
¬gv
[]);

	@zmalloc.c

31 
	~<¡dio.h
>

32 
	~<¡dlib.h
>

33 
	~<¡dšt.h
>

39 
	$zlibc_ä“
(*
±r
) {

40 
	`ä“
(
±r
);

41 
	}
}

43 
	~<¡ršg.h
>

44 
	~<±h»ad.h
>

45 
	~"cÚfig.h
"

46 
	~"zm®loc.h
"

47 
	~"©omicv¬.h
"

49 #ifdeà
HAVE_MALLOC_SIZE


50 
	#PREFIX_SIZE
 (0)

	)

52 #ià
defšed
(
__sun
è|| defšed(
__¥¬c
è|| defšed(
__¥¬c__
)

53 
	#PREFIX_SIZE
 (())

	)

55 
	#PREFIX_SIZE
 ((
size_t
))

	)

60 #ià
defšed
(
USE_TCMALLOC
)

61 
	#m®loc
(
size
è
	`tc_m®loc
(size)

	)

62 
	#ÿÎoc
(
couÁ
,
size
è
	`tc_ÿÎoc
(couÁ,size)

	)

63 
	#»®loc
(
±r
,
size
è
	`tc_»®loc
ÕŒ,size)

	)

64 
	#ä“
(
±r
è
	`tc_ä“
ÕŒ)

	)

65 #–ià
defšed
(
USE_JEMALLOC
)

66 
	#m®loc
(
size
è
	`je_m®loc
(size)

	)

67 
	#ÿÎoc
(
couÁ
,
size
è
	`je_ÿÎoc
(couÁ,size)

	)

68 
	#»®loc
(
±r
,
size
è
	`je_»®loc
ÕŒ,size)

	)

69 
	#ä“
(
±r
è
	`je_ä“
ÕŒ)

	)

70 
	#m®locx
(
size
,
æags
è
	`je_m®locx
(size,æags)

	)

71 
	#d®locx
(
±r
,
æags
è
	`je_d®locx
ÕŒ,æags)

	)

74 
	#upd©e_zm®loc_¡©_®loc
(
__n
) do { \

75 
size_t
 
_n
 = (
__n
); \

76 ià(
_n
&(()-1)) _n += ()-(_n&(()-1)); \

77 
	`©omicInü
(
u£d_memÜy
,
__n
); \

78 } 0)

	)

80 
	#upd©e_zm®loc_¡©_ä“
(
__n
) do { \

81 
size_t
 
_n
 = (
__n
); \

82 ià(
_n
&(()-1)) _n += ()-(_n&(()-1)); \

83 
	`©omicDeü
(
u£d_memÜy
,
__n
); \

84 } 0)

	)

86 
size_t
 
	gu£d_memÜy
 = 0;

87 
±h»ad_mu‹x_t
 
	gu£d_memÜy_mu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

89 
	$zm®loc_deçuÉ_oom
(
size_t
 
size
) {

90 
	`årštf
(
¡d”r
, "zmalloc: Out of memoryryingo‡llocate %zu bytes\n",

91 
size
);

92 
	`fæush
(
¡d”r
);

93 
	`abÜt
();

94 
	}
}

96 (*
zm®loc_oom_hªdËr
)(
size_t
èğ
zm®loc_deçuÉ_oom
;

98 *
	$zm®loc
(
size_t
 
size
) {

99 *
±r
 = 
	`m®loc
(
size
+
PREFIX_SIZE
);

101 ià(!
±r
è
	`zm®loc_oom_hªdËr
(
size
);

102 #ifdeà
HAVE_MALLOC_SIZE


103 
	`upd©e_zm®loc_¡©_®loc
(
	`zm®loc_size
(
±r
));

104  
±r
;

106 *((
size_t
*)
±r
èğ
size
;

107 
	`upd©e_zm®loc_¡©_®loc
(
size
+
PREFIX_SIZE
);

108  (*)
±r
+
PREFIX_SIZE
;

110 
	}
}

115 #ifdeà
HAVE_DEFRAG


116 *
	$zm®loc_no_tÿche
(
size_t
 
size
) {

117 *
±r
 = 
	`m®locx
(
size
+
PREFIX_SIZE
, 
MALLOCX_TCACHE_NONE
);

118 ià(!
±r
è
	`zm®loc_oom_hªdËr
(
size
);

119 
	`upd©e_zm®loc_¡©_®loc
(
	`zm®loc_size
(
±r
));

120  
±r
;

121 
	}
}

123 
	$zä“_no_tÿche
(*
±r
) {

124 ià(
±r
 =ğ
NULL
) ;

125 
	`upd©e_zm®loc_¡©_ä“
(
	`zm®loc_size
(
±r
));

126 
	`d®locx
(
±r
, 
MALLOCX_TCACHE_NONE
);

127 
	}
}

130 *
	$zÿÎoc
(
size_t
 
size
) {

131 *
±r
 = 
	`ÿÎoc
(1, 
size
+
PREFIX_SIZE
);

133 ià(!
±r
è
	`zm®loc_oom_hªdËr
(
size
);

134 #ifdeà
HAVE_MALLOC_SIZE


135 
	`upd©e_zm®loc_¡©_®loc
(
	`zm®loc_size
(
±r
));

136  
±r
;

138 *((
size_t
*)
±r
èğ
size
;

139 
	`upd©e_zm®loc_¡©_®loc
(
size
+
PREFIX_SIZE
);

140  (*)
±r
+
PREFIX_SIZE
;

142 
	}
}

144 *
	$z»®loc
(*
±r
, 
size_t
 
size
) {

145 #iâdeà
HAVE_MALLOC_SIZE


146 *
»®±r
;

148 
size_t
 
Şdsize
;

149 *
Ãw±r
;

151 ià(
size
 =ğ0 && 
±r
 !ğ
NULL
) {

152 
	`zä“
(
±r
);

153  
NULL
;

155 ià(
±r
 =ğ
NULL
è 
	`zm®loc
(
size
);

156 #ifdeà
HAVE_MALLOC_SIZE


157 
Şdsize
 = 
	`zm®loc_size
(
±r
);

158 
Ãw±r
 = 
	`»®loc
(
±r
,
size
);

159 ià(!
Ãw±r
è
	`zm®loc_oom_hªdËr
(
size
);

161 
	`upd©e_zm®loc_¡©_ä“
(
Şdsize
);

162 
	`upd©e_zm®loc_¡©_®loc
(
	`zm®loc_size
(
Ãw±r
));

163  
Ãw±r
;

165 
»®±r
 = (*)
±r
-
PREFIX_SIZE
;

166 
Şdsize
 = *((
size_t
*)
»®±r
);

167 
Ãw±r
 = 
	`»®loc
(
»®±r
,
size
+
PREFIX_SIZE
);

168 ià(!
Ãw±r
è
	`zm®loc_oom_hªdËr
(
size
);

170 *((
size_t
*)
Ãw±r
èğ
size
;

171 
	`upd©e_zm®loc_¡©_ä“
(
Şdsize
+
PREFIX_SIZE
);

172 
	`upd©e_zm®loc_¡©_®loc
(
size
+
PREFIX_SIZE
);

173  (*)
Ãw±r
+
PREFIX_SIZE
;

175 
	}
}

180 #iâdeà
HAVE_MALLOC_SIZE


181 
size_t
 
	$zm®loc_size
(*
±r
) {

182 *
»®±r
 = (*)
±r
-
PREFIX_SIZE
;

183 
size_t
 
size
 = *((size_t*)
»®±r
);

186 ià(
size
&(()-1)) size += ()-(size&(()-1));

187  
size
+
PREFIX_SIZE
;

188 
	}
}

189 
size_t
 
	$zm®loc_u§bË
(*
±r
) {

190  
	`zm®loc_size
(
±r
)-
PREFIX_SIZE
;

191 
	}
}

194 
	$zä“
(*
±r
) {

195 #iâdeà
HAVE_MALLOC_SIZE


196 *
»®±r
;

197 
size_t
 
Şdsize
;

200 ià(
±r
 =ğ
NULL
) ;

201 #ifdeà
HAVE_MALLOC_SIZE


202 
	`upd©e_zm®loc_¡©_ä“
(
	`zm®loc_size
(
±r
));

203 
	`ä“
(
±r
);

205 
»®±r
 = (*)
±r
-
PREFIX_SIZE
;

206 
Şdsize
 = *((
size_t
*)
»®±r
);

207 
	`upd©e_zm®loc_¡©_ä“
(
Şdsize
+
PREFIX_SIZE
);

208 
	`ä“
(
»®±r
);

210 
	}
}

212 *
	$z¡rdup
(cÚ¡ *
s
) {

213 
size_t
 
l
 = 
	`¡¾’
(
s
)+1;

214 *
p
 = 
	`zm®loc
(
l
);

216 
	`memıy
(
p
,
s
,
l
);

217  
p
;

218 
	}
}

220 
size_t
 
	$zm®loc_u£d_memÜy
() {

221 
size_t
 
um
;

222 
	`©omicG‘
(
u£d_memÜy
,
um
);

223  
um
;

224 
	}
}

226 
	$zm®loc_£t_oom_hªdËr
((*
oom_hªdËr
)(
size_t
)) {

227 
zm®loc_oom_hªdËr
 = 
oom_hªdËr
;

228 
	}
}

240 #ià
defšed
(
HAVE_PROC_STAT
)

241 
	~<uni¡d.h
>

242 
	~<sys/ty³s.h
>

243 
	~<sys/¡©.h
>

244 
	~<fú.h
>

246 
size_t
 
	$zm®loc_g‘_rss
() {

247 
·ge
 = 
	`syscÚf
(
_SC_PAGESIZE
);

248 
size_t
 
rss
;

249 
buf
[4096];

250 
f’ame
[256];

251 
fd
, 
couÁ
;

252 *
p
, *
x
;

254 
	`¢´štf
(
f’ame
,256,"/´oc/%d/¡©",
	`g‘pid
());

255 ià((
fd
 = 
	`İ’
(
f’ame
,
O_RDONLY
)) == -1)  0;

256 ià(
	`»ad
(
fd
,
buf
,4096) <= 0) {

257 
	`şo£
(
fd
);

260 
	`şo£
(
fd
);

262 
p
 = 
buf
;

263 
couÁ
 = 23;

264 
p
 && 
couÁ
--) {

265 
p
 = 
	`¡rchr
(p,' ');

266 ià(
p
)…++;

268 ià(!
p
)  0;

269 
x
 = 
	`¡rchr
(
p
,' ');

270 ià(!
x
)  0;

271 *
x
 = '\0';

273 
rss
 = 
	`¡¹Şl
(
p
,
NULL
,10);

274 
rss
 *ğ
·ge
;

275  
rss
;

276 
	}
}

277 #–ià
defšed
(
HAVE_TASKINFO
)

278 
	~<uni¡d.h
>

279 
	~<¡dio.h
>

280 
	~<¡dlib.h
>

281 
	~<sys/ty³s.h
>

282 
	~<sys/sysùl.h
>

283 
	~<mach/sk.h
>

284 
	~<mach/mach_š™.h
>

286 
size_t
 
	$zm®loc_g‘_rss
() {

287 
sk_t
 
sk
 = 
MACH_PORT_NULL
;

288 
sk_basic_šfo
 
t_šfo
;

289 
mach_msg_ty³_numb”_t
 
t_šfo_couÁ
 = 
TASK_BASIC_INFO_COUNT
;

291 ià(
	`sk_fÜ_pid
(
	`cu¼’t_sk
(), 
	`g‘pid
(), &
sk
è!ğ
KERN_SUCCESS
)

293 
	`sk_šfo
(
sk
, 
TASK_BASIC_INFO
, (
sk_šfo_t
)&
t_šfo
, &
t_šfo_couÁ
);

295  
t_šfo
.
»sid’t_size
;

296 
	}
}

297 #–ià
defšed
(
__F»eBSD__
)

298 
	~<sys/ty³s.h
>

299 
	~<sys/sysùl.h
>

300 
	~<sys/u£r.h
>

301 
	~<uni¡d.h
>

303 
size_t
 
	$zm®loc_g‘_rss
() {

304 
kšfo_´oc
 
šfo
;

305 
size_t
 
šfŞ’
 = (
šfo
);

306 
mib
[4];

307 
mib
[0] = 
CTL_KERN
;

308 
mib
[1] = 
KERN_PROC
;

309 
mib
[2] = 
KERN_PROC_PID
;

310 
mib
[3] = 
	`g‘pid
();

312 ià(
	`sysùl
(
mib
, 4, &
šfo
, &
šfŞ’
, 
NULL
, 0) == 0)

313  (
size_t
)
šfo
.
ki_rssize
;

316 
	}
}

318 
size_t
 
	$zm®loc_g‘_rss
() {

324  
	`zm®loc_u£d_memÜy
();

325 
	}
}

328 #ià
defšed
(
USE_JEMALLOC
)

330 
	$zm®loc_g‘_®loÿtÜ_šfo
(
size_t
 *
®loÿ‹d
,

331 
size_t
 *
aùive
,

332 
size_t
 *
»sid’t
) {

333 
ušt64_t
 
•och
 = 1;

334 
size_t
 
sz
;

335 *
®loÿ‹d
 = *
»sid’t
 = *
aùive
 = 0;

337 
sz
 = (
•och
);

338 
	`je_m®lùl
("•och", &
•och
, &
sz
, &epoch, sz);

339 
sz
 = (
size_t
);

342 
	`je_m®lùl
("¡©s.»sid’t", 
»sid’t
, &
sz
, 
NULL
, 0);

345 
	`je_m®lùl
("¡©s.aùive", 
aùive
, &
sz
, 
NULL
, 0);

348 
	`je_m®lùl
("¡©s.®loÿ‹d", 
®loÿ‹d
, &
sz
, 
NULL
, 0);

350 
	}
}

352 
	$£t_jem®loc_bg_th»ad
(
’abË
) {

355 
v®
 = !!
’abË
;

356 
	`je_m®lùl
("background_th»ad", 
NULL
, 0, &
v®
, 1);

357 
	}
}

359 
	$jem®loc_purge
() {

361 
tmp
[32];

362 
Ç»Çs
 = 0;

363 
size_t
 
sz
 = ();

364 ià(!
	`je_m®lùl
("¬’as.Ç»Çs", &
Ç»Çs
, &
sz
, 
NULL
, 0)) {

365 
	`¥rštf
(
tmp
, "¬’a.%d.purge", 
Ç»Çs
);

366 ià(!
	`je_m®lùl
(
tmp
, 
NULL
, 0, NULL, 0))

370 
	}
}

374 
	$zm®loc_g‘_®loÿtÜ_šfo
(
size_t
 *
®loÿ‹d
,

375 
size_t
 *
aùive
,

376 
size_t
 *
»sid’t
) {

377 *
®loÿ‹d
 = *
»sid’t
 = *
aùive
 = 0;

379 
	}
}

381 
	$£t_jem®loc_bg_th»ad
(
’abË
) {

382 (()(
’abË
));

383 
	}
}

385 
	$jem®loc_purge
() {

387 
	}
}

391 #ià
defšed
(
__APPLE__
)

396 
	~<lib´oc.h
>

409 #ià
defšed
(
HAVE_PROC_SMAPS
)

410 
size_t
 
	$zm®loc_g‘_sm­_by‹s_by_f›ld
(*
f›ld
, 
pid
) {

411 
lše
[1024];

412 
size_t
 
by‹s
 = 0;

413 
æ’
 = 
	`¡¾’
(
f›ld
);

414 
FILE
 *
å
;

416 ià(
pid
 == -1) {

417 
å
 = 
	`fİ’
("/proc/self/smaps","r");

419 
f’ame
[128];

420 
	`¢´štf
(
f’ame
,(f’ame),"/´oc/%ld/sm­s",
pid
);

421 
å
 = 
	`fİ’
(
f’ame
,"r");

424 ià(!
å
)  0;

425 
	`fg‘s
(
lše
,Öše),
å
è!ğ
NULL
) {

426 ià(
	`¡ºcmp
(
lše
,
f›ld
,
æ’
) == 0) {

427 *
p
 = 
	`¡rchr
(
lše
,'k');

428 ià(
p
) {

429 *
p
 = '\0';

430 
by‹s
 +ğ
	`¡¹Ş
(
lše
+
æ’
,
NULL
,10) * 1024;

434 
	`fşo£
(
å
);

435  
by‹s
;

436 
	}
}

445 
size_t
 
	$zm®loc_g‘_sm­_by‹s_by_f›ld
(*
f›ld
, 
pid
) {

446 #ià
	`defšed
(
__APPLE__
)

447 
´oc_»giÚšfo
 
´i
;

448 ià(
	`´oc_pidšfo
(
pid
, 
PROC_PIDREGIONINFO
, 0, &
´i
, 
PROC_PIDREGIONINFO_SIZE
) ==

449 
PROC_PIDREGIONINFO_SIZE
) {

450 ià(!
	`¡rcmp
(
f›ld
, "Private_Dirty:")) {

451  (
size_t
)
´i
.
´i_·ges_dœt›d
 * 4096;

452 } ià(!
	`¡rcmp
(
f›ld
, "Rss:")) {

453  (
size_t
)
´i
.
´i_·ges_»sid’t
 * 4096;

454 } ià(!
	`¡rcmp
(
f›ld
, "AnonHugePages:")) {

460 ((è
f›ld
);

461 ((è
pid
);

463 
	}
}

466 
size_t
 
	$zm®loc_g‘_´iv©e_dœty
(
pid
) {

467  
	`zm®loc_g‘_sm­_by‹s_by_f›ld
("Priv©e_Dœty:",
pid
);

468 
	}
}

483 
size_t
 
	$zm®loc_g‘_memÜy_size
() {

484 #ià
	`defšed
(
__unix__
è|| defšed(
__unix
è|| defšed(
unix
) || \

485 (
	`defšed
(
__APPLE__
è&& defšed(
__MACH__
))

486 #ià
	`defšed
(
CTL_HW
è&& (defšed(
HW_MEMSIZE
è|| defšed(
HW_PHYSMEM64
))

487 
mib
[2];

488 
mib
[0] = 
CTL_HW
;

489 #ià
	`defšed
(
HW_MEMSIZE
)

490 
mib
[1] = 
HW_MEMSIZE
;

491 #–ià
	`defšed
(
HW_PHYSMEM64
)

492 
mib
[1] = 
HW_PHYSMEM64
;

494 
št64_t
 
size
 = 0;

495 
size_t
 
Ën
 = (
size
);

496 ià(
	`sysùl
Ğ
mib
, 2, &
size
, &
Ën
, 
NULL
, 0) == 0)

497  (
size_t
)
size
;

500 #–ià
	`defšed
(
_SC_PHYS_PAGES
è&& defšed(
_SC_PAGESIZE
)

502  (
size_t
)
	`syscÚf
(
_SC_PHYS_PAGES
è* (size_t)syscÚf(
_SC_PAGESIZE
);

504 #–ià
	`defšed
(
CTL_HW
è&& (defšed(
HW_PHYSMEM
è|| defšed(
HW_REALMEM
))

506 
mib
[2];

507 
mib
[0] = 
CTL_HW
;

508 #ià
	`defšed
(
HW_REALMEM
)

509 
mib
[1] = 
HW_REALMEM
;

510 #–ià
	`defšed
(
HW_PHYSMEM
)

511 
mib
[1] = 
HW_PHYSMEM
;

513 
size
 = 0;

514 
size_t
 
Ën
 = (
size
);

515 ià(
	`sysùl
(
mib
, 2, &
size
, &
Ën
, 
NULL
, 0) == 0)

516  (
size_t
)
size
;

524 
	}
}

526 #ifdeà
REDIS_TEST


527 
	#UNUSED
(
x
è(()(x))

	)

528 
	$zm®loc_‹¡
(
¬gc
, **
¬gv
) {

529 *
±r
;

531 
	`UNUSED
(
¬gc
);

532 
	`UNUSED
(
¬gv
);

533 
	`´štf
("In™ŸÈu£d memÜy: %zu\n", 
	`zm®loc_u£d_memÜy
());

534 
±r
 = 
	`zm®loc
(123);

535 
	`´štf
("AÎoÿ‹d 123 by‹s; u£d: %zu\n", 
	`zm®loc_u£d_memÜy
());

536 
±r
 = 
	`z»®loc
(ptr, 456);

537 
	`´štf
("R—Îoÿ‹dØ456 by‹s; u£d: %zu\n", 
	`zm®loc_u£d_memÜy
());

538 
	`zä“
(
±r
);

539 
	`´štf
("F»ed…oš‹r; u£d: %zu\n", 
	`zm®loc_u£d_memÜy
());

541 
	}
}

	@zmalloc.h

31 #iâdeà
__ZMALLOC_H


32 
	#__ZMALLOC_H


	)

35 
	#__x¡r
(
s
è
	`__¡r
(s)

	)

36 
	#__¡r
(
s
è#s

	)

38 #ià
defšed
(
USE_TCMALLOC
)

39 
	#ZMALLOC_LIB
 ("tcm®loc-" 
	`__x¡r
(
TC_VERSION_MAJOR
è"." __x¡r(
TC_VERSION_MINOR
))

	)

40 
	~<googË/tcm®loc.h
>

41 #ià(
TC_VERSION_MAJOR
 =ğ1 && 
TC_VERSION_MINOR
 >= 6) || (TC_VERSION_MAJOR > 1)

42 
	#HAVE_MALLOC_SIZE
 1

	)

43 
	#zm®loc_size
(
p
è
	`tc_m®loc_size
Õ)

	)

48 #–ià
defšed
(
USE_JEMALLOC
)

49 
	#ZMALLOC_LIB
 ("jem®loc-" 
	`__x¡r
(
JEMALLOC_VERSION_MAJOR
è"." __x¡r(
JEMALLOC_VERSION_MINOR
è"." __x¡r(
JEMALLOC_VERSION_BUGFIX
))

	)

50 
	~<jem®loc/jem®loc.h
>

51 #ià(
JEMALLOC_VERSION_MAJOR
 =ğ2 && 
JEMALLOC_VERSION_MINOR
 >= 1) || (JEMALLOC_VERSION_MAJOR > 2)

52 
	#HAVE_MALLOC_SIZE
 1

	)

53 
	#zm®loc_size
(
p
è
	`je_m®loc_u§bË_size
Õ)

	)

58 #–ià
defšed
(
__APPLE__
)

59 
	~<m®loc/m®loc.h
>

60 
	#HAVE_MALLOC_SIZE
 1

	)

61 
	#zm®loc_size
(
p
è
	`m®loc_size
Õ)

	)

64 #iâdeà
ZMALLOC_LIB


65 
	#ZMALLOC_LIB
 "libc"

	)

66 #ifdeà
__GLIBC__


67 
	~<m®loc.h
>

68 
	#HAVE_MALLOC_SIZE
 1

	)

69 
	#zm®loc_size
(
p
è
	`m®loc_u§bË_size
Õ)

	)

76 #ià
defšed
(
USE_JEMALLOC
è&& defšed(
JEMALLOC_FRAG_HINT
)

77 
	#HAVE_DEFRAG


	)

80 *
zm®loc
(
size_t
 
size
);

81 *
zÿÎoc
(
size_t
 
size
);

82 *
z»®loc
(*
±r
, 
size_t
 
size
);

83 
zä“
(*
±r
);

84 *
z¡rdup
(cÚ¡ *
s
);

85 
size_t
 
zm®loc_u£d_memÜy
();

86 
zm®loc_£t_oom_hªdËr
((*
oom_hªdËr
)(
size_t
));

87 
size_t
 
	`zm®loc_g‘_rss
();

88 
	`zm®loc_g‘_®loÿtÜ_šfo
(
size_t
 *
®loÿ‹d
, size_ˆ*
aùive
, size_ˆ*
»sid’t
);

89 
	`£t_jem®loc_bg_th»ad
(
’abË
);

90 
	`jem®loc_purge
();

91 
size_t
 
	`zm®loc_g‘_´iv©e_dœty
(
pid
);

92 
size_t
 
	`zm®loc_g‘_sm­_by‹s_by_f›ld
(*
f›ld
, 
pid
);

93 
size_t
 
	`zm®loc_g‘_memÜy_size
();

94 
	`zlibc_ä“
(*
±r
);

96 #ifdeà
HAVE_DEFRAG


97 
	`zä“_no_tÿche
(*
±r
);

98 *
	`zm®loc_no_tÿche
(
size_t
 
size
);

101 #iâdeà
HAVE_MALLOC_SIZE


102 
size_t
 
	`zm®loc_size
(*
±r
);

103 
size_t
 
	`zm®loc_u§bË
(*
±r
);

105 
	#zm®loc_u§bË
(
p
è
	`zm®loc_size
Õ)

	)

108 #ifdeà
REDIS_TEST


109 
	`zm®loc_‹¡
(
¬gc
, **
¬gv
);

	@/usr/include/arpa/inet.h

18 #iâdeà
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<Ãtš‘/š.h
>

25 #iâdeà
__sockËn_t_defšed


26 
__sockËn_t
 
	tsockËn_t
;

27 
	#__sockËn_t_defšed


	)

30 
__BEGIN_DECLS


34 
š_addr_t
 
	$š‘_addr
 (cÚ¡ *
__ı
è
__THROW
;

37 
š_addr_t
 
	$š‘_Êaof
 (
š_addr
 
__š
è
__THROW
;

41 
š_addr
 
	$š‘_mak—ddr
 (
š_addr_t
 
__Ãt
, in_addr_ˆ
__ho¡
)

42 
__THROW
;

45 
š_addr_t
 
	$š‘_Ãtof
 (
š_addr
 
__š
è
__THROW
;

49 
š_addr_t
 
	$š‘_ÃtwÜk
 (cÚ¡ *
__ı
è
__THROW
;

53 *
	$š‘_Áß
 (
š_addr
 
__š
è
__THROW
;

58 
	$š‘_±Ú
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

59 *
__»¡riù
 
__buf
è
__THROW
;

64 cÚ¡ *
	$š‘_Áİ
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

65 *
__»¡riù
 
__buf
, 
sockËn_t
 
__Ën
)

66 
__THROW
;

70 #ifdeà
__USE_MISC


73 
	$š‘_©Ú
 (cÚ¡ *
__ı
, 
š_addr
 *
__šp
è
__THROW
;

77 *
	$š‘_Ã
 (
š_addr_t
 
__Ãt
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

82 *
	$š‘_Ãt_Áİ
 (
__af
, cÚ¡ *
__ı
, 
__b™s
,

83 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

88 
	$š‘_Ãt_±Ú
 (
__af
, cÚ¡ *
__ı
,

89 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

94 
	$š‘_n§p_addr
 (cÚ¡ *
__ı
,

95 *
__buf
, 
__Ën
è
__THROW
;

99 *
	$š‘_n§p_Áß
 (
__Ën
, cÚ¡ *
__ı
,

100 *
__buf
è
__THROW
;

103 
__END_DECLS


	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


119 #undeà
¡©ic_as£¹


120 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ifdeà
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ifdeà
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/dlfcn.h

19 #iâdef 
_DLFCN_H


20 
	#_DLFCN_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

27 
	~<b™s/dlfú.h
>

30 #ifdeà
__USE_GNU


35 
	#RTLD_NEXT
 ((*è-1l)

	)

40 
	#RTLD_DEFAULT
 ((*è0)

	)

44 
	tLmid_t
;

47 
	#LM_ID_BASE
 0

	)

48 
	#LM_ID_NEWLM
 -1

	)

52 
__BEGIN_DECLS


56 *
	$dlİ’
 (cÚ¡ *
__fe
, 
__mode
è
__THROWNL
;

60 
	$dlşo£
 (*
__hªdË
è
__THROWNL
 
	`__nÚnuÎ
 ((1));

64 *
	$dlsym
 (*
__»¡riù
 
__hªdË
,

65 cÚ¡ *
__»¡riù
 
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((2));

67 #ifdeà
__USE_GNU


69 *
	$dlmİ’
 (
Lmid_t
 
__nsid
, cÚ¡ *
__fe
, 
__mode
è
__THROWNL
;

73 *
	$dlvsym
 (*
__»¡riù
 
__hªdË
,

74 cÚ¡ *
__»¡riù
 
__Çme
,

75 cÚ¡ *
__»¡riù
 
__v”siÚ
)

76 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

82 *
	$dË¼Ü
 (è
__THROW
;

85 #ifdeà
__USE_GNU


90 cÚ¡ *
dli_âame
;

91 *
dli_fba£
;

92 cÚ¡ *
dli_¢ame
;

93 *
dli_§ddr
;

94 } 
	tDl_šfo
;

98 
	$dÏddr
 (cÚ¡ *
__add»ss
, 
Dl_šfo
 *
__šfo
)

99 
__THROW
 
	`__nÚnuÎ
 ((2));

102 
	$dÏddr1
 (cÚ¡ *
__add»ss
, 
Dl_šfo
 *
__šfo
,

103 **
__exŒa_šfo
, 
__æags
è
__THROW
 
	`__nÚnuÎ
 ((2));

111 
RTLD_DL_SYMENT
 = 1,

114 
RTLD_DL_LINKMAP
 = 2

123 
	$dlšfo
 (*
__»¡riù
 
__hªdË
,

124 
__»que¡
, *
__»¡riù
 
__¬g
)

125 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

131 
RTLD_DI_LMID
 = 1,

135 
RTLD_DI_LINKMAP
 = 2,

137 
RTLD_DI_CONFIGADDR
 = 3,

144 
RTLD_DI_SERINFO
 = 4,

145 
RTLD_DI_SERINFOSIZE
 = 5,

149 
RTLD_DI_ORIGIN
 = 6,

151 
RTLD_DI_PROFILENAME
 = 7,

152 
RTLD_DI_PROFILEOUT
 = 8,

157 
RTLD_DI_TLS_MODID
 = 9,

163 
RTLD_DI_TLS_DATA
 = 10,

165 
RTLD_DI_MAX
 = 10

173 *
dls_Çme
;

174 
dls_æags
;

175 } 
	tDl_£½©h
;

181 
size_t
 
dls_size
;

182 
dls_út
;

183 
Dl_£½©h
 
dls_£½©h
[1];

184 } 
	tDl_£ršfo
;

188 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/execinfo.h

18 #iâdeà
_EXECINFO_H


19 
	#_EXECINFO_H
 1

	)

21 
	~<ã©u»s.h
>

23 
__BEGIN_DECLS


27 
	$backŒaû
 (**
__¬¿y
, 
__size
è
	`__nÚnuÎ
 ((1));

32 **
	$backŒaû_symbŞs
 (*cÚ¡ *
__¬¿y
, 
__size
)

33 
__THROW
 
	`__nÚnuÎ
 ((1));

38 
	$backŒaû_symbŞs_fd
 (*cÚ¡ *
__¬¿y
, 
__size
, 
__fd
)

39 
__THROW
 
	`__nÚnuÎ
 ((1));

41 
__END_DECLS


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

39 #ifdeà
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oæag
) \

41 (((
oæag
è& 
O_CREAT
è!ğ0 || ((oæagè& 
__O_TMPFILE
è=ğ__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oæag
è(((oæagè& 
O_CREAT
è!ğ0)

	)

49 #iâdeà
__mode_t_defšed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_defšed


	)

54 #iâdeà
__off_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_defšed


	)

63 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_defšed


	)

68 #iâdeà
__pid_t_defšed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_defšed


	)

74 #ifdeà
__USE_XOPEN2K8


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

78 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


79 
	~<b™s/¡©.h
>

81 
	#S_IFMT
 
__S_IFMT


	)

82 
	#S_IFDIR
 
__S_IFDIR


	)

83 
	#S_IFCHR
 
__S_IFCHR


	)

84 
	#S_IFBLK
 
__S_IFBLK


	)

85 
	#S_IFREG
 
__S_IFREG


	)

86 #ifdeà
__S_IFIFO


87 
	#S_IFIFO
 
__S_IFIFO


	)

89 #ifdeà
__S_IFLNK


90 
	#S_IFLNK
 
__S_IFLNK


	)

92 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


93 
	#S_IFSOCK
 
__S_IFSOCK


	)

98 
	#S_ISUID
 
__S_ISUID


	)

99 
	#S_ISGID
 
__S_ISGID


	)

101 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


103 
	#S_ISVTX
 
__S_ISVTX


	)

106 
	#S_IRUSR
 
__S_IREAD


	)

107 
	#S_IWUSR
 
__S_IWRITE


	)

108 
	#S_IXUSR
 
__S_IEXEC


	)

110 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

112 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

113 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

114 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

116 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

118 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

119 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

120 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

122 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

125 #ifdef 
__USE_MISC


126 #iâdeà
R_OK


129 
	#R_OK
 4

	)

130 
	#W_OK
 2

	)

131 
	#X_OK
 1

	)

132 
	#F_OK
 0

	)

137 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


138 
	#SEEK_SET
 0

	)

139 
	#SEEK_CUR
 1

	)

140 
	#SEEK_END
 2

	)

148 
fú
 (
__fd
, 
__cmd
, ...);

157 #iâdeà
__USE_FILE_OFFSET64


158 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

160 #ifdeà
__REDIRECT


161 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

162 
	`__nÚnuÎ
 ((1));

164 
	#İ’
 
İ’64


	)

167 #ifdeà
__USE_LARGEFILE64


168 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

171 #ifdeà
__USE_ATFILE


181 #iâdeà
__USE_FILE_OFFSET64


182 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

183 
	`__nÚnuÎ
 ((2));

185 #ifdeà
__REDIRECT


186 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

187 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

189 
	#İ’©
 
İ’©64


	)

192 #ifdeà
__USE_LARGEFILE64


193 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

194 
	`__nÚnuÎ
 ((2));

203 #iâdeà
__USE_FILE_OFFSET64


204 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

206 #ifdeà
__REDIRECT


207 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

208 
ü—t64
è
	`__nÚnuÎ
 ((1));

210 
	#ü—t
 
ü—t64


	)

213 #ifdeà
__USE_LARGEFILE64


214 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

217 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

218 && !
defšed
 
__USE_POSIX
))

227 
	#F_ULOCK
 0

	)

228 
	#F_LOCK
 1

	)

229 
	#F_TLOCK
 2

	)

230 
	#F_TEST
 3

	)

232 #iâdeà
__USE_FILE_OFFSET64


233 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

235 #ifdeà
__REDIRECT


236 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

238 
	#lockf
 
lockf64


	)

241 #ifdeà
__USE_LARGEFILE64


242 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

246 #ifdeà
__USE_XOPEN2K


249 #iâdeà
__USE_FILE_OFFSET64


250 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

251 
__advi£
è
__THROW
;

253 #ifdeà
__REDIRECT_NTH


254 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

255 
__off64_t
 
__Ën
, 
__advi£
),

256 
posix_çdvi£64
);

258 
	#posix_çdvi£
 
posix_çdvi£64


	)

261 #ifdeà
__USE_LARGEFILE64


262 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

263 
__advi£
è
__THROW
;

271 #iâdeà
__USE_FILE_OFFSET64


272 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

274 #ifdeà
__REDIRECT


275 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

276 
__off64_t
 
__Ën
),

277 
posix_çÎoÿ‹64
);

279 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

282 #ifdeà
__USE_LARGEFILE64


283 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

289 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

290 && 
defšed
 
__va_¬g_·ck_Ën


291 
	~<b™s/fú2.h
>

294 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #undeà
__USE_ISOC11


98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_ISOCXX11


101 #undeà
__USE_POSIX


102 #undeà
__USE_POSIX2


103 #undeà
__USE_POSIX199309


104 #undeà
__USE_POSIX199506


105 #undeà
__USE_XOPEN


106 #undeà
__USE_XOPEN_EXTENDED


107 #undeà
__USE_UNIX98


108 #undeà
__USE_XOPEN2K


109 #undeà
__USE_XOPEN2KXSI


110 #undeà
__USE_XOPEN2K8


111 #undeà
__USE_XOPEN2K8XSI


112 #undeà
__USE_LARGEFILE


113 #undeà
__USE_LARGEFILE64


114 #undeà
__USE_FILE_OFFSET64


115 #undeà
__USE_MISC


116 #undeà
__USE_ATFILE


117 #undeà
__USE_GNU


118 #undeà
__USE_REENTRANT


119 #undeà
__USE_FORTIFY_LEVEL


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

146 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

147 && !
defšed
 
	g_DEFAULT_SOURCE


149 #undeà
_DEFAULT_SOURCE


150 
	#_DEFAULT_SOURCE
 1

	)

154 #ifdeà
_GNU_SOURCE


155 #undeà
_ISOC95_SOURCE


156 
	#_ISOC95_SOURCE
 1

	)

157 #undeà
_ISOC99_SOURCE


158 
	#_ISOC99_SOURCE
 1

	)

159 #undeà
_ISOC11_SOURCE


160 
	#_ISOC11_SOURCE
 1

	)

161 #undeà
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #undeà
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #undeà
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #undeà
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #undeà
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #undeà
_DEFAULT_SOURCE


172 
	#_DEFAULT_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
))

184 #undeà
_DEFAULT_SOURCE


185 
	#_DEFAULT_SOURCE
 1

	)

189 #ià(
defšed
 
_ISOC11_SOURCE
 \

190 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

191 
	#__USE_ISOC11
 1

	)

195 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

196 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

197 
	#__USE_ISOC99
 1

	)

201 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

202 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

203 
	#__USE_ISOC95
 1

	)

210 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

211 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

212 
	#__USE_ISOCXX11
 1

	)

218 #ifdeà
_DEFAULT_SOURCE


219 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


220 
	#__USE_POSIX_IMPLICITLY
 1

	)

222 #undeà
_POSIX_SOURCE


223 
	#_POSIX_SOURCE
 1

	)

224 #undeà
_POSIX_C_SOURCE


225 
	#_POSIX_C_SOURCE
 200809L

	)

227 #ià((!
defšed
 
__STRICT_ANSI__
 \

228 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

229 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

230 
	#_POSIX_SOURCE
 1

	)

231 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

232 
	#_POSIX_C_SOURCE
 2

	)

233 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

234 
	#_POSIX_C_SOURCE
 199506L

	)

235 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

236 
	#_POSIX_C_SOURCE
 200112L

	)

238 
	#_POSIX_C_SOURCE
 200809L

	)

240 
	#__USE_POSIX_IMPLICITLY
 1

	)

243 #ià(
defšed
 
_POSIX_SOURCE
 \

244 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

245 || 
defšed
 
_XOPEN_SOURCE
)

246 
	#__USE_POSIX
 1

	)

249 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


250 
	#__USE_POSIX2
 1

	)

253 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

254 
	#__USE_POSIX199309
 1

	)

257 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

258 
	#__USE_POSIX199506
 1

	)

261 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

262 
	#__USE_XOPEN2K
 1

	)

263 #undeà
__USE_ISOC95


264 
	#__USE_ISOC95
 1

	)

265 #undeà
__USE_ISOC99


266 
	#__USE_ISOC99
 1

	)

269 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

270 
	#__USE_XOPEN2K8
 1

	)

271 #undeà
_ATFILE_SOURCE


272 
	#_ATFILE_SOURCE
 1

	)

275 #ifdef 
_XOPEN_SOURCE


276 
	#__USE_XOPEN
 1

	)

277 #ià(
_XOPEN_SOURCE
 - 0) >= 500

278 
	#__USE_XOPEN_EXTENDED
 1

	)

279 
	#__USE_UNIX98
 1

	)

280 #undeà
_LARGEFILE_SOURCE


281 
	#_LARGEFILE_SOURCE
 1

	)

282 #ià(
_XOPEN_SOURCE
 - 0) >= 600

283 #ià(
_XOPEN_SOURCE
 - 0) >= 700

284 
	#__USE_XOPEN2K8
 1

	)

285 
	#__USE_XOPEN2K8XSI
 1

	)

287 
	#__USE_XOPEN2K
 1

	)

288 
	#__USE_XOPEN2KXSI
 1

	)

289 #undeà
__USE_ISOC95


290 
	#__USE_ISOC95
 1

	)

291 #undeà
__USE_ISOC99


292 
	#__USE_ISOC99
 1

	)

295 #ifdeà
_XOPEN_SOURCE_EXTENDED


296 
	#__USE_XOPEN_EXTENDED
 1

	)

301 #ifdeà
_LARGEFILE_SOURCE


302 
	#__USE_LARGEFILE
 1

	)

305 #ifdeà
_LARGEFILE64_SOURCE


306 
	#__USE_LARGEFILE64
 1

	)

309 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

310 
	#__USE_FILE_OFFSET64
 1

	)

313 #ià
defšed
 
_DEFAULT_SOURCE


314 
	#__USE_MISC
 1

	)

317 #ifdef 
_ATFILE_SOURCE


318 
	#__USE_ATFILE
 1

	)

321 #ifdef 
_GNU_SOURCE


322 
	#__USE_GNU
 1

	)

325 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


326 
	#__USE_REENTRANT
 1

	)

329 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

330 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

331 #ià
_FORTIFY_SOURCE
 > 1

332 
	#__USE_FORTIFY_LEVEL
 2

	)

334 
	#__USE_FORTIFY_LEVEL
 1

	)

337 
	#__USE_FORTIFY_LEVEL
 0

	)

342 
	~<¡dc-´edef.h
>

350 #undeà
__GNU_LIBRARY__


351 
	#__GNU_LIBRARY__
 6

	)

355 
	#__GLIBC__
 2

	)

356 
	#__GLIBC_MINOR__
 24

	)

358 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

359 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

362 #iâdeà
__ASSEMBLER__


363 #iâdeà
_SYS_CDEFS_H


364 
	~<sys/cdefs.h
>

369 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


370 
	#__USE_LARGEFILE
 1

	)

371 
	#__USE_LARGEFILE64
 1

	)

377 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

378 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

379 && 
defšed
 
	g__ex‹º_šlše


380 
	#__USE_EXTERN_INLINES
 1

	)

388 
	~<gnu/¡ubs.h
>

	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<ã©u»s.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

41 #iâdeà
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<b™s/wÜdsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifdeà
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #ià
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #ià
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifdeà
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


123 #šşude_Ãxˆ<
lim™s
.
h
>

129 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


130 #iâdeà
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #iâdeà
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #iâdeà
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<b™s/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<b™s/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<b™s/xİ’_lim.h
>

	@/usr/include/linux/version.h

1 
	#LINUX_VERSION_CODE
 328723

	)

2 
	#KERNEL_VERSION
(
a
,
b
,
c
è((×è<< 16è+ ((bè<< 8è+ (c))

	)

	@/usr/include/locale.h

22 #iâdef 
_LOCALE_H


23 
	#_LOCALE_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	#__Ãed_NULL


	)

28 
	~<¡ddef.h
>

29 
	~<b™s/loÿË.h
>

31 
	g__BEGIN_DECLS


35 
	#LC_CTYPE
 
__LC_CTYPE


	)

36 
	#LC_NUMERIC
 
__LC_NUMERIC


	)

37 
	#LC_TIME
 
__LC_TIME


	)

38 
	#LC_COLLATE
 
__LC_COLLATE


	)

39 
	#LC_MONETARY
 
__LC_MONETARY


	)

40 
	#LC_MESSAGES
 
__LC_MESSAGES


	)

41 
	#LC_ALL
 
__LC_ALL


	)

42 
	#LC_PAPER
 
__LC_PAPER


	)

43 
	#LC_NAME
 
__LC_NAME


	)

44 
	#LC_ADDRESS
 
__LC_ADDRESS


	)

45 
	#LC_TELEPHONE
 
__LC_TELEPHONE


	)

46 
	#LC_MEASUREMENT
 
__LC_MEASUREMENT


	)

47 
	#LC_IDENTIFICATION
 
__LC_IDENTIFICATION


	)

50 
__BEGIN_NAMESPACE_STD


53 
	slcÚv


57 *
	mdecim®_pošt
;

58 *
	mthou§nds_£p
;

64 *
	mgroupšg
;

70 *
	mšt_cu¼_symbŞ
;

71 *
	mcu¼’cy_symbŞ
;

72 *
	mmÚ_decim®_pošt
;

73 *
	mmÚ_thou§nds_£p
;

74 *
	mmÚ_groupšg
;

75 *
	mpos™ive_sign
;

76 *
	mÃg©ive_sign
;

77 
	mšt_äac_dig™s
;

78 
	mäac_dig™s
;

80 
	mp_cs_´eûdes
;

82 
	mp_£p_by_¥aû
;

84 
	mn_cs_´eûdes
;

86 
	mn_£p_by_¥aû
;

93 
	mp_sign_po¢
;

94 
	mn_sign_po¢
;

95 #ifdeà
__USE_ISOC99


97 
	mšt_p_cs_´eûdes
;

99 
	mšt_p_£p_by_¥aû
;

101 
	mšt_n_cs_´eûdes
;

103 
	mšt_n_£p_by_¥aû
;

110 
	mšt_p_sign_po¢
;

111 
	mšt_n_sign_po¢
;

113 
	m__št_p_cs_´eûdes
;

114 
	m__št_p_£p_by_¥aû
;

115 
	m__št_n_cs_´eûdes
;

116 
	m__št_n_£p_by_¥aû
;

117 
	m__št_p_sign_po¢
;

118 
	m__št_n_sign_po¢
;

124 *
	$£oÿË
 (
__ÿ‹gÜy
, cÚ¡ *
__loÿË
è
__THROW
;

127 
lcÚv
 *
	$loÿËcÚv
 (è
__THROW
;

129 
__END_NAMESPACE_STD


132 #ifdef 
__USE_XOPEN2K8


145 
	~<xloÿË.h
>

151 
__loÿË_t
 
	$ÃwloÿË
 (
__ÿ‹gÜy_mask
, cÚ¡ *
__loÿË
,

152 
__loÿË_t
 
__ba£
è
__THROW
;

158 
	#LC_CTYPE_MASK
 (1 << 
__LC_CTYPE
)

	)

159 
	#LC_NUMERIC_MASK
 (1 << 
__LC_NUMERIC
)

	)

160 
	#LC_TIME_MASK
 (1 << 
__LC_TIME
)

	)

161 
	#LC_COLLATE_MASK
 (1 << 
__LC_COLLATE
)

	)

162 
	#LC_MONETARY_MASK
 (1 << 
__LC_MONETARY
)

	)

163 
	#LC_MESSAGES_MASK
 (1 << 
__LC_MESSAGES
)

	)

164 
	#LC_PAPER_MASK
 (1 << 
__LC_PAPER
)

	)

165 
	#LC_NAME_MASK
 (1 << 
__LC_NAME
)

	)

166 
	#LC_ADDRESS_MASK
 (1 << 
__LC_ADDRESS
)

	)

167 
	#LC_TELEPHONE_MASK
 (1 << 
__LC_TELEPHONE
)

	)

168 
	#LC_MEASUREMENT_MASK
 (1 << 
__LC_MEASUREMENT
)

	)

169 
	#LC_IDENTIFICATION_MASK
 (1 << 
__LC_IDENTIFICATION
)

	)

170 
	#LC_ALL_MASK
 (
LC_CTYPE_MASK
 \

171 | 
LC_NUMERIC_MASK
 \

172 | 
LC_TIME_MASK
 \

173 | 
LC_COLLATE_MASK
 \

174 | 
LC_MONETARY_MASK
 \

175 | 
LC_MESSAGES_MASK
 \

176 | 
LC_PAPER_MASK
 \

177 | 
LC_NAME_MASK
 \

178 | 
LC_ADDRESS_MASK
 \

179 | 
LC_TELEPHONE_MASK
 \

180 | 
LC_MEASUREMENT_MASK
 \

181 | 
LC_IDENTIFICATION_MASK
 \

182 )

	)

186 
__loÿË_t
 
	$du¶oÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

190 
	$ä“loÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

197 
__loÿË_t
 
	$u£loÿË
 (
__loÿË_t
 
__d©a£t
è
__THROW
;

201 
	#LC_GLOBAL_LOCALE
 ((
__loÿË_t
è-1L)

	)

205 
__END_DECLS


	@/usr/include/malloc.h

19 #iâdeà
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡ddef.h
>

24 
	~<¡dio.h
>

26 #ifdeà
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

31 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

35 
__BEGIN_DECLS


38 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

41 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

42 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

49 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

53 
	$ä“
 (*
__±r
è
__THROW
;

56 
	$cä“
 (*
__±r
è
__THROW
;

59 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

60 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

67 *
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

74 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©Œibu‹_m®loc__
;

79 
	sm®lšfo


81 
¬’a
;

82 
Üdblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
uÜdblks
;

89 
fÜdblks
;

90 
k“pco¡
;

94 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

97 #iâdeà
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #iâdeà
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #iâdeà
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #iâdeà
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

125 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

129 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

132 
	$m®loc_¡©s
 (è
__THROW
;

135 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

138 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

142 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

145 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

147 
__MALLOC_DEPRECATED
;

148 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
)(
size_t
 
__size
,

150 
__MALLOC_DEPRECATED
;

151 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
)(*
__±r
,

152 
size_t
 
__size
,

154 
__MALLOC_DEPRECATED
;

155 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
)(
size_t
 
__®ignm’t
,

156 
size_t
 
__size
,

158 
__MALLOC_DEPRECATED
;

159 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

162 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

165 
__END_DECLS


	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/m©h-veùÜ.h
>

35 
	~<b™s/huge_v®.h
>

36 #ifdeà
__USE_ISOC99


37 
	~<b™s/huge_v®f.h
>

38 
	~<b™s/huge_v®l.h
>

41 
	~<b™s/šf.h
>

44 
	~<b™s/Çn.h
>

48 
	~<b™s/m©hdef.h
>

55 
	#__SIMD_DECL
(
funùiÚ
è
	`__CONCAT
 (
__DECL_SIMD_
, funùiÚ)

	)

57 
	#__MATHCALL_VEC
(
funùiÚ
, 
suffix
, 
¬gs
) \

58 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

59 
	`__MATHCALL
 (
funùiÚ
, 
suffix
, 
¬gs
)

	)

61 
	#__MATHDECL_VEC
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

62 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

63 
	`__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
)

	)

65 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

66 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

67 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

68 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

69 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

70 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

71 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

72 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

73 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

74 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

75 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

76 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

78 
	#_MdoubË_
 

	)

79 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

80 
	#__MATH_DECLARING_DOUBLE
 1

	)

81 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

82 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

83 
	~<b™s/m©hÿÎs.h
>

84 #undeà
_MdoubË_


85 #undeà
_MdoubË_BEGIN_NAMESPACE


86 #undeà
_MdoubË_END_NAMESPACE


87 #undeà
__MATH_PRECNAME


88 #undeà
__MATH_DECLARING_DOUBLE


90 #ifdeà
__USE_ISOC99


96 #iâdeà
_Mæßt_


97 
	#_Mæßt_
 

	)

99 
	#_MdoubË_
 
_Mæßt_


	)

100 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

101 
	#__MATH_DECLARING_DOUBLE
 0

	)

102 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

103 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

104 
	~<b™s/m©hÿÎs.h
>

105 #undeà
_MdoubË_


106 #undeà
_MdoubË_BEGIN_NAMESPACE


107 #undeà
_MdoubË_END_NAMESPACE


108 #undeà
__MATH_PRECNAME


109 #undeà
__MATH_DECLARING_DOUBLE


111 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

112 || 
defšed
 
__LDBL_COMPAT
 \

113 || 
defšed
 
_LIBC_TEST


114 #ifdeà
__LDBL_COMPAT


116 #ifdeà
__USE_ISOC99


117 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

118 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

119 #ifdeà
__REDIRECT_NTH


120 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

121 
__Ædbl_Ãx‰ow¬df
)

122 
	`__©Œibu‹__
 ((
__cÚ¡__
));

123 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

124 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

125 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

126 (
__x
, 
__y
),

127 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

131 #undeà
__MATHDECL_1


132 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

133 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

134 
¬gs
, 
®Ÿs
)

	)

135 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

136 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

142 #iâdeà
_MlÚg_doubË_


143 
	#_MlÚg_doubË_
 

	)

145 
	#_MdoubË_
 
_MlÚg_doubË_


	)

146 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

147 
	#__MATH_DECLARING_DOUBLE
 0

	)

148 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

149 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

150 
	#__MATH_DECLARE_LDOUBLE
 1

	)

151 
	~<b™s/m©hÿÎs.h
>

152 #undeà
_MdoubË_


153 #undeà
_MdoubË_BEGIN_NAMESPACE


154 #undeà
_MdoubË_END_NAMESPACE


155 #undeà
__MATH_PRECNAME


156 #undeà
__MATH_DECLARING_DOUBLE


161 #undeà
__MATHDECL_1


162 #undeà
__MATHDECL


163 #undeà
__MATHCALL


166 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


168 
signgam
;

173 #ifdeà
__USE_ISOC99


211 
FP_NAN
 =

212 
	#FP_NAN
 0

	)

213 
FP_NAN
,

214 
FP_INFINITE
 =

215 
	#FP_INFINITE
 1

	)

216 
FP_INFINITE
,

217 
FP_ZERO
 =

218 
	#FP_ZERO
 2

	)

219 
FP_ZERO
,

220 
FP_SUBNORMAL
 =

221 
	#FP_SUBNORMAL
 3

	)

222 
FP_SUBNORMAL
,

223 
FP_NORMAL
 =

224 
	#FP_NORMAL
 4

	)

225 
FP_NORMAL


233 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
 \

234 && !
defšed
 
__OPTIMIZE_SIZE__


235 
	#åşassify
(
x
è
	`__butš_åşassify
 (
FP_NAN
, 
FP_INFINITE
, \

236 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

237 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


238 
	#åşassify
(
x
) \

239 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

241 
	#åşassify
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__åşassifyf
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

249 #ià
	`__GNUC_PREREQ
 (4,0)

250 
	#signb™
(
x
) \

251 ( (
x
) ==  () \

252 ? 
	`__butš_signb™f
 (
x
) \

253 :  (
x
) ==  () \

254 ? 
	`__butš_signb™
 (
x
è: 
	`__butš_signb™l
 (x))

	)

256 #ifdeà
__NO_LONG_DOUBLE_MATH


257 
	#signb™
(
x
) \

258 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

260 
	#signb™
(
x
) \

261 ( (
x
) ==  () \

262 ? 
	`__signb™f
 (
x
) \

263 :  (
x
) ==  () \

264 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

269 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


270 
	#isfš™e
(
x
è
	`__butš_isfš™e
 (x)

	)

271 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


272 
	#isfš™e
(
x
) \

273 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

275 
	#isfš™e
(
x
) \

276 ( (
x
) ==  () \

277 ? 
	`__fš™ef
 (
x
) \

278 :  (
x
) ==  () \

279 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

283 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


284 
	#i¢Üm®
(
x
è
	`__butš_i¢Üm®
 (x)

	)

286 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

291 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


292 
	#i¢ª
(
x
è
	`__butš_i¢ª
 (x)

	)

293 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


294 
	#i¢ª
(
x
) \

295 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

297 
	#i¢ª
(
x
) \

298 ( (
x
) ==  () \

299 ? 
	`__i¢ªf
 (
x
) \

300 :  (
x
) ==  () \

301 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

305 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


306 
	#isšf
(
x
è
	`__butš_isšf_sign
 (x)

	)

307 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


308 
	#isšf
(
x
) \

309 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

311 
	#isšf
(
x
) \

312 ( (
x
) ==  () \

313 ? 
	`__isšff
 (
x
) \

314 :  (
x
) ==  () \

315 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

319 
	#MATH_ERRNO
 1

	)

320 
	#MATH_ERREXCEPT
 2

	)

325 #iâdeà
__FAST_MATH__


326 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

331 #ifdeà
__USE_GNU


333 #ifdeà
__NO_LONG_DOUBLE_MATH


334 
	#issigÇlšg
(
x
) \

335 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

337 
	#issigÇlšg
(
x
) \

338 ( (
x
) ==  () \

339 ? 
	`__issigÇlšgf
 (
x
) \

340 :  (
x
) ==  () \

341 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

345 #ifdef 
__USE_MISC


349 
_IEEE_
 = -1,

350 
_SVID_
,

351 
_XOPEN_
,

352 
_POSIX_
,

353 
_ISOC_


354 } 
	t_LIB_VERSION_TYPE
;

359 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

363 #ifdeà
__USE_MISC


369 #ifdeà
__ılu¥lus


370 
__exû±iÚ


372 
exû±iÚ


375 
ty³
;

376 *
Çme
;

377 
¬g1
;

378 
¬g2
;

379 
»tv®
;

380 
	}
};

382 #ifdeà
__ılu¥lus


383 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

385 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

388 
	#X_TLOSS
 1.41484755040568800000e+16

	)

391 
	#DOMAIN
 1

	)

392 
	#SING
 2

	)

393 
	#OVERFLOW
 3

	)

394 
	#UNDERFLOW
 4

	)

395 
	#TLOSS
 5

	)

396 
	#PLOSS
 6

	)

399 
	#HUGE
 3.40282347e+38F

	)

403 #ifdeà
__USE_XOPEN


405 
	#MAXFLOAT
 3.40282347e+38F

	)

412 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


413 
	#M_E
 2.7182818284590452354

	)

414 
	#M_LOG2E
 1.4426950408889634074

	)

415 
	#M_LOG10E
 0.43429448190325182765

	)

416 
	#M_LN2
 0.69314718055994530942

	)

417 
	#M_LN10
 2.30258509299404568402

	)

418 
	#M_PI
 3.14159265358979323846

	)

419 
	#M_PI_2
 1.57079632679489661923

	)

420 
	#M_PI_4
 0.78539816339744830962

	)

421 
	#M_1_PI
 0.31830988618379067154

	)

422 
	#M_2_PI
 0.63661977236758134308

	)

423 
	#M_2_SQRTPI
 1.12837916709551257390

	)

424 
	#M_SQRT2
 1.41421356237309504880

	)

425 
	#M_SQRT1_2
 0.70710678118654752440

	)

431 #ifdeà
__USE_GNU


432 
	#M_El
 2.718281828459045235360287471352662498L

	)

433 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

434 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

435 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

436 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

437 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

438 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

439 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

440 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

441 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

442 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

443 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

444 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

451 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


452 
	#__NO_MATH_INLINES
 1

	)

455 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

462 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

463 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

464 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

465 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

466 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

467 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

471 #ifdeà
__USE_EXTERN_INLINES


472 
	~<b™s/m©hšlše.h
>

477 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

478 
	~<b™s/m©h-fš™e.h
>

481 #ifdeà
__USE_ISOC99


485 #iâdeà
isg»©”


486 
	#isg»©”
(
x
, 
y
) \

487 (
__ex‹nsiÚ__
 \

488 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

489 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

493 #iâdeà
isg»©”equ®


494 
	#isg»©”equ®
(
x
, 
y
) \

495 (
__ex‹nsiÚ__
 \

496 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

497 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

501 #iâdeà
i¦ess


502 
	#i¦ess
(
x
, 
y
) \

503 (
__ex‹nsiÚ__
 \

504 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

505 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

509 #iâdeà
i¦es£qu®


510 
	#i¦es£qu®
(
x
, 
y
) \

511 (
__ex‹nsiÚ__
 \

512 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

513 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

517 #iâdeà
i¦essg»©”


518 
	#i¦essg»©”
(
x
, 
y
) \

519 (
__ex‹nsiÚ__
 \

520 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

521 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

525 #iâdeà
isunÜd”ed


526 
	#isunÜd”ed
(
u
, 
v
) \

527 (
__ex‹nsiÚ__
 \

528 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

529 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

534 
	g__END_DECLS


	@/usr/include/netdb.h

22 #iâdef 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<Ãtš‘/š.h
>

28 
	~<¡dšt.h
>

29 #ifdeà
__USE_MISC


32 
	~<½c/Ãtdb.h
>

35 #ifdeà
__USE_GNU


36 
	#__Ãed_sigev’t_t


	)

37 
	~<b™s/sigšfo.h
>

38 
	#__Ãed_time¥ec


	)

39 
	~<time.h
>

42 
	~<b™s/Ãtdb.h
>

45 
	#_PATH_HEQUIV
 "/‘c/ho¡s.equiv"

	)

46 
	#_PATH_HOSTS
 "/‘c/ho¡s"

	)

47 
	#_PATH_NETWORKS
 "/‘c/ÃtwÜks"

	)

48 
	#_PATH_NSSWITCH_CONF
 "/‘c/nssw™ch.cÚf"

	)

49 
	#_PATH_PROTOCOLS
 "/‘c/´ÙocŞs"

	)

50 
	#_PATH_SERVICES
 "/‘c/£rviûs"

	)

53 
	g__BEGIN_DECLS


55 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


58 
	#h_”ºo
 (*
	`__h_”ºo_loÿtiÚ
 ())

	)

61 *
	$__h_”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

73 #ifdeà
__USE_MISC


74 
	#NETDB_INTERNAL
 -1

	)

75 
	#NETDB_SUCCESS
 0

	)

76 
	#NO_ADDRESS
 
NO_DATA


	)

79 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_XOPEN_EXTENDED


81 
	#IPPORT_RESERVED
 1024

	)

84 #ifdeà
__USE_GNU


86 
	#SCOPE_DELIMITER
 '%'

	)

89 #ifdeà
__USE_MISC


92 
	$h”rÜ
 (cÚ¡ *
__¡r
è
__THROW
;

95 cÚ¡ *
	$h¡»¼Ü
 (
__”r_num
è
__THROW
;

100 
	sho¡’t


102 *
h_Çme
;

103 **
h_®Ÿ£s
;

104 
h_add¹y³
;

105 
h_Ëngth
;

106 **
h_addr_li¡
;

107 #ifdeà
__USE_MISC


108 
	#h_addr
 
h_addr_li¡
[0]

	)

117 
	`£tho¡’t
 (
__¡ay_İ’
);

123 
	`’dho¡’t
 ();

130 
ho¡’t
 *
	`g‘ho¡’t
 ();

137 
ho¡’t
 *
	`g‘ho¡byaddr
 (cÚ¡ *
__addr
, 
__sockËn_t
 
__Ën
,

138 
__ty³
);

144 
ho¡’t
 *
	`g‘ho¡byÇme
 (cÚ¡ *
__Çme
);

146 #ifdeà
__USE_MISC


155 
ho¡’t
 *
	`g‘ho¡byÇme2
 (cÚ¡ *
__Çme
, 
__af
);

167 
	`g‘ho¡’t_r
 (
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

168 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

169 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

170 *
__»¡riù
 
__h_”ºİ
);

172 
	`g‘ho¡byaddr_r
 (cÚ¡ *
__»¡riù
 
__addr
, 
__sockËn_t
 
__Ën
,

173 
__ty³
,

174 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

176 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

177 *
__»¡riù
 
__h_”ºİ
);

179 
	`g‘ho¡byÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

180 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

181 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

182 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

183 *
__»¡riù
 
__h_”ºİ
);

185 
	`g‘ho¡byÇme2_r
 (cÚ¡ *
__»¡riù
 
__Çme
, 
__af
,

186 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

187 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

188 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

189 *
__»¡riù
 
__h_”ºİ
);

198 
	`£Š‘’t
 (
__¡ay_İ’
);

204 
	`’dÃ‹Á
 ();

211 
Ã‹Á
 *
	`g‘Ã‹Á
 ();

218 
Ã‹Á
 *
	`g‘Ãtbyaddr
 (
ušt32_t
 
__Ãt
, 
__ty³
);

224 
Ã‹Á
 *
	`g‘ÃtbyÇme
 (cÚ¡ *
__Çme
);

226 #ifdef 
__USE_MISC


237 
	`g‘Ã‹Á_r
 (
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

238 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

239 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

240 *
__»¡riù
 
__h_”ºİ
);

242 
	`g‘Ãtbyaddr_r
 (
ušt32_t
 
__Ãt
, 
__ty³
,

243 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

244 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

245 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

246 *
__»¡riù
 
__h_”ºİ
);

248 
	`g‘ÃtbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

249 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

250 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

251 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

252 *
__»¡riù
 
__h_”ºİ
);

257 
	s£rv’t


259 *
s_Çme
;

260 **
s_®Ÿ£s
;

261 
s_pÜt
;

262 *
s_´Ùo
;

270 
	`£t£rv’t
 (
__¡ay_İ’
);

276 
	`’d£rv’t
 ();

283 
£rv’t
 *
	`g‘£rv’t
 ();

290 
£rv’t
 *
	`g‘£rvbyÇme
 (cÚ¡ *
__Çme
, cÚ¡ *
__´Ùo
);

297 
£rv’t
 *
	`g‘£rvbypÜt
 (
__pÜt
, cÚ¡ *
__´Ùo
);

300 #ifdef 
__USE_MISC


308 
	`g‘£rv’t_r
 (
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

309 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

310 
£rv’t
 **
__»¡riù
 
__»suÉ
);

312 
	`g‘£rvbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

313 cÚ¡ *
__»¡riù
 
__´Ùo
,

314 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

315 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

316 
£rv’t
 **
__»¡riù
 
__»suÉ
);

318 
	`g‘£rvbypÜt_r
 (
__pÜt
, cÚ¡ *
__»¡riù
 
__´Ùo
,

319 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

320 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

321 
£rv’t
 **
__»¡riù
 
__»suÉ
);

326 
	s´ÙÛÁ


328 *
p_Çme
;

329 **
p_®Ÿ£s
;

330 
p_´Ùo
;

338 
	`£rÙÛÁ
 (
__¡ay_İ’
);

344 
	`’d´ÙÛÁ
 ();

351 
´ÙÛÁ
 *
	`g‘´ÙÛÁ
 ();

357 
´ÙÛÁ
 *
	`g‘´ÙobyÇme
 (cÚ¡ *
__Çme
);

363 
´ÙÛÁ
 *
	`g‘´Ùobynumb”
 (
__´Ùo
);

366 #ifdef 
__USE_MISC


374 
	`g‘´ÙÛÁ_r
 (
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

375 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

376 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

378 
	`g‘´ÙobyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

379 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

380 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

381 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

383 
	`g‘´Ùobynumb”_r
 (
__´Ùo
,

384 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

385 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

386 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

395 
	`£Š‘g»Á
 (cÚ¡ *
__Ãtgroup
);

403 
	`’dÃtg»Á
 ();

412 
	`g‘Ãtg»Á
 (**
__»¡riù
 
__ho¡p
,

413 **
__»¡riù
 
__u£½
,

414 **
__»¡riù
 
__domašp
);

423 
	`šÃtgr
 (cÚ¡ *
__Ãtgroup
, cÚ¡ *
__ho¡
,

424 cÚ¡ *
__u£r
, cÚ¡ *
__domaš
);

432 
	`g‘Ãtg»Á_r
 (**
__»¡riù
 
__ho¡p
,

433 **
__»¡riù
 
__u£½
,

434 **
__»¡riù
 
__domašp
,

435 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
);

439 #ifdeà
__USE_MISC


451 
	`rcmd
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

452 cÚ¡ *
__»¡riù
 
__locu£r
,

453 cÚ¡ *
__»¡riù
 
__»mu£r
,

454 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

463 
	`rcmd_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

464 cÚ¡ *
__»¡riù
 
__locu£r
,

465 cÚ¡ *
__»¡riù
 
__»mu£r
,

466 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

467 
§_çmy_t
 
__af
);

479 
	`»xec
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

480 cÚ¡ *
__»¡riù
 
__Çme
,

481 cÚ¡ *
__»¡riù
 
__·ss
,

482 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

491 
	`»xec_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

492 cÚ¡ *
__»¡riù
 
__Çme
,

493 cÚ¡ *
__»¡riù
 
__·ss
,

494 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

495 
§_çmy_t
 
__af
);

505 
	`ru£rok
 (cÚ¡ *
__rho¡
, 
__su£r
,

506 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

515 
	`ru£rok_af
 (cÚ¡ *
__rho¡
, 
__su£r
,

516 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

517 
§_çmy_t
 
__af
);

528 
	`œu£rok
 (
ušt32_t
 
__¿ddr
, 
__su£r
,

529 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

539 
	`œu£rok_af
 (cÚ¡ *
__¿ddr
, 
__su£r
,

540 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

541 
§_çmy_t
 
__af
);

551 
	`¼esvpÜt
 (*
__®pÜt
);

560 
	`¼esvpÜt_af
 (*
__®pÜt
, 
§_çmy_t
 
__af
);

565 #ifdeà
__USE_XOPEN2K


567 
	saddršfo


569 
ai_æags
;

570 
ai_çmy
;

571 
ai_sockty³
;

572 
ai_´ÙocŞ
;

573 
sockËn_t
 
ai_add¾’
;

574 
sockaddr
 *
ai_addr
;

575 *
ai_ÿnÚÇme
;

576 
addršfo
 *
ai_Ãxt
;

579 #ifdeà
__USE_GNU


581 
	sgaicb


583 cÚ¡ *
¬_Çme
;

584 cÚ¡ *
¬_£rviû
;

585 cÚ¡ 
addršfo
 *
¬_»que¡
;

586 
addršfo
 *
¬_»suÉ
;

588 
__»tuº
;

589 
__glibc_»£rved
[5];

593 
	#GAI_WAIT
 0

	)

594 
	#GAI_NOWAIT
 1

	)

598 
	#AI_PASSIVE
 0x0001

	)

599 
	#AI_CANONNAME
 0x0002

	)

600 
	#AI_NUMERICHOST
 0x0004

	)

601 
	#AI_V4MAPPED
 0x0008

	)

602 
	#AI_ALL
 0x0010

	)

603 
	#AI_ADDRCONFIG
 0x0020

	)

605 #ifdeà
__USE_GNU


606 
	#AI_IDN
 0x0040

	)

609 
	#AI_CANONIDN
 0x0080

	)

610 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

612 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

615 
	#AI_NUMERICSERV
 0x0400

	)

618 
	#EAI_BADFLAGS
 -1

	)

619 
	#EAI_NONAME
 -2

	)

620 
	#EAI_AGAIN
 -3

	)

621 
	#EAI_FAIL
 -4

	)

622 
	#EAI_FAMILY
 -6

	)

623 
	#EAI_SOCKTYPE
 -7

	)

624 
	#EAI_SERVICE
 -8

	)

625 
	#EAI_MEMORY
 -10

	)

626 
	#EAI_SYSTEM
 -11

	)

627 
	#EAI_OVERFLOW
 -12

	)

628 #ifdeà
__USE_GNU


629 
	#EAI_NODATA
 -5

	)

630 
	#EAI_ADDRFAMILY
 -9

	)

631 
	#EAI_INPROGRESS
 -100

	)

632 
	#EAI_CANCELED
 -101

	)

633 
	#EAI_NOTCANCELED
 -102

	)

634 
	#EAI_ALLDONE
 -103

	)

635 
	#EAI_INTR
 -104

	)

636 
	#EAI_IDN_ENCODE
 -105

	)

639 #ifdeà
__USE_MISC


640 
	#NI_MAXHOST
 1025

	)

641 
	#NI_MAXSERV
 32

	)

644 
	#NI_NUMERICHOST
 1

	)

645 
	#NI_NUMERICSERV
 2

	)

646 
	#NI_NOFQDN
 4

	)

647 
	#NI_NAMEREQD
 8

	)

648 
	#NI_DGRAM
 16

	)

649 #ifdeà
__USE_GNU


650 
	#NI_IDN
 32

	)

651 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

653 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

662 
	`g‘addršfo
 (cÚ¡ *
__»¡riù
 
__Çme
,

663 cÚ¡ *
__»¡riù
 
__£rviû
,

664 cÚ¡ 
addršfo
 *
__»¡riù
 
__»q
,

665 
addršfo
 **
__»¡riù
 
__·i
);

668 
	$ä“addršfo
 (
addršfo
 *
__ai
è
__THROW
;

671 cÚ¡ *
	$gai_¡»¼Ü
 (
__ecode
è
__THROW
;

677 
	`g‘Çmešfo
 (cÚ¡ 
sockaddr
 *
__»¡riù
 
__§
,

678 
sockËn_t
 
__§Ën
, *
__»¡riù
 
__ho¡
,

679 
sockËn_t
 
__ho¡Ën
, *
__»¡riù
 
__£rv
,

680 
sockËn_t
 
__£rvËn
, 
__æags
);

683 #ifdeà
__USE_GNU


692 
	`g‘addršfo_a
 (
__mode
, 
gaicb
 *
__li¡
[
__»¡riù_¬r
],

693 
__’t
, 
sigev’t
 *
__»¡riù
 
__sig
);

703 
	`gai_su¥’d
 (cÚ¡ 
gaicb
 *cÚ¡ 
__li¡
[], 
__’t
,

704 cÚ¡ 
time¥ec
 *
__timeout
);

707 
	$gai_”rÜ
 (
gaicb
 *
__»q
è
__THROW
;

710 
	$gai_ÿnûl
 (
gaicb
 *
__gaicbp
è
__THROW
;

713 
__END_DECLS


	@/usr/include/netinet/in.h

18 #iâdef 
_NETINET_IN_H


19 
	#_NETINET_IN_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<¡dšt.h
>

23 
	~<sys/sock‘.h
>

24 
	~<b™s/ty³s.h
>

27 
__BEGIN_DECLS


30 
ušt32_t
 
	tš_addr_t
;

31 
	sš_addr


33 
š_addr_t
 
	ms_addr
;

37 
	~<b™s/š.h
>

42 
	mIPPROTO_IP
 = 0,

43 
	#IPPROTO_IP
 
IPPROTO_IP


	)

44 
	mIPPROTO_ICMP
 = 1,

45 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

46 
	mIPPROTO_IGMP
 = 2,

47 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

48 
	mIPPROTO_IPIP
 = 4,

49 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

50 
	mIPPROTO_TCP
 = 6,

51 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

52 
	mIPPROTO_EGP
 = 8,

53 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

54 
	mIPPROTO_PUP
 = 12,

55 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

56 
	mIPPROTO_UDP
 = 17,

57 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

58 
	mIPPROTO_IDP
 = 22,

59 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

60 
	mIPPROTO_TP
 = 29,

61 
	#IPPROTO_TP
 
IPPROTO_TP


	)

62 
	mIPPROTO_DCCP
 = 33,

63 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

64 
	mIPPROTO_IPV6
 = 41,

65 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

66 
	mIPPROTO_RSVP
 = 46,

67 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

68 
	mIPPROTO_GRE
 = 47,

69 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

70 
	mIPPROTO_ESP
 = 50,

71 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

72 
	mIPPROTO_AH
 = 51,

73 
	#IPPROTO_AH
 
IPPROTO_AH


	)

74 
	mIPPROTO_MTP
 = 92,

75 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

76 
	mIPPROTO_BEETPH
 = 94,

77 
	#IPPROTO_BEETPH
 
IPPROTO_BEETPH


	)

78 
	mIPPROTO_ENCAP
 = 98,

79 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

80 
	mIPPROTO_PIM
 = 103,

81 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

82 
	mIPPROTO_COMP
 = 108,

83 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

84 
	mIPPROTO_SCTP
 = 132,

85 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

86 
	mIPPROTO_UDPLITE
 = 136,

87 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

88 
	mIPPROTO_MPLS
 = 137,

89 
	#IPPROTO_MPLS
 
IPPROTO_MPLS


	)

90 
	mIPPROTO_RAW
 = 255,

91 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

92 
	mIPPROTO_MAX


98 #ià!
__USE_KERNEL_IPV6_DEFS


101 
	mIPPROTO_HOPOPTS
 = 0,

102 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

103 
	mIPPROTO_ROUTING
 = 43,

104 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

105 
	mIPPROTO_FRAGMENT
 = 44,

106 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

107 
	mIPPROTO_ICMPV6
 = 58,

108 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

109 
	mIPPROTO_NONE
 = 59,

110 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

111 
	mIPPROTO_DSTOPTS
 = 60,

112 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

113 
	mIPPROTO_MH
 = 135

114 
	#IPPROTO_MH
 
IPPROTO_MH


	)

119 
ušt16_t
 
	tš_pÜt_t
;

124 
	mIPPORT_ECHO
 = 7,

125 
	mIPPORT_DISCARD
 = 9,

126 
	mIPPORT_SYSTAT
 = 11,

127 
	mIPPORT_DAYTIME
 = 13,

128 
	mIPPORT_NETSTAT
 = 15,

129 
	mIPPORT_FTP
 = 21,

130 
	mIPPORT_TELNET
 = 23,

131 
	mIPPORT_SMTP
 = 25,

132 
	mIPPORT_TIMESERVER
 = 37,

133 
	mIPPORT_NAMESERVER
 = 42,

134 
	mIPPORT_WHOIS
 = 43,

135 
	mIPPORT_MTP
 = 57,

137 
	mIPPORT_TFTP
 = 69,

138 
	mIPPORT_RJE
 = 77,

139 
	mIPPORT_FINGER
 = 79,

140 
	mIPPORT_TTYLINK
 = 87,

141 
	mIPPORT_SUPDUP
 = 95,

144 
	mIPPORT_EXECSERVER
 = 512,

145 
	mIPPORT_LOGINSERVER
 = 513,

146 
	mIPPORT_CMDSERVER
 = 514,

147 
	mIPPORT_EFSSERVER
 = 520,

150 
	mIPPORT_BIFFUDP
 = 512,

151 
	mIPPORT_WHOSERVER
 = 513,

152 
	mIPPORT_ROUTESERVER
 = 520,

155 
	mIPPORT_RESERVED
 = 1024,

158 
	mIPPORT_USERRESERVED
 = 5000

166 
	#IN_CLASSA
(
a
è((((
š_addr_t
)×)è& 0x80000000è=ğ0)

	)

167 
	#IN_CLASSA_NET
 0xff000000

	)

168 
	#IN_CLASSA_NSHIFT
 24

	)

169 
	#IN_CLASSA_HOST
 (0xfffffffà& ~
IN_CLASSA_NET
)

	)

170 
	#IN_CLASSA_MAX
 128

	)

172 
	#IN_CLASSB
(
a
è((((
š_addr_t
)×)è& 0xc0000000è=ğ0x80000000)

	)

173 
	#IN_CLASSB_NET
 0xffff0000

	)

174 
	#IN_CLASSB_NSHIFT
 16

	)

175 
	#IN_CLASSB_HOST
 (0xfffffffà& ~
IN_CLASSB_NET
)

	)

176 
	#IN_CLASSB_MAX
 65536

	)

178 
	#IN_CLASSC
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xc0000000)

	)

179 
	#IN_CLASSC_NET
 0xffffff00

	)

180 
	#IN_CLASSC_NSHIFT
 8

	)

181 
	#IN_CLASSC_HOST
 (0xfffffffà& ~
IN_CLASSC_NET
)

	)

183 
	#IN_CLASSD
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xe0000000)

	)

184 
	#IN_MULTICAST
(
a
è
	`IN_CLASSD
×)

	)

186 
	#IN_EXPERIMENTAL
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xe0000000)

	)

187 
	#IN_BADCLASS
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xf0000000)

	)

190 
	#INADDR_ANY
 ((
š_addr_t
è0x00000000)

	)

192 
	#INADDR_BROADCAST
 ((
š_addr_t
è0xffffffff)

	)

194 
	#INADDR_NONE
 ((
š_addr_t
è0xffffffff)

	)

197 
	#IN_LOOPBACKNET
 127

	)

199 #iâdeà
INADDR_LOOPBACK


200 
	#INADDR_LOOPBACK
 ((
š_addr_t
è0x7f000001è

	)

204 
	#INADDR_UNSPEC_GROUP
 ((
š_addr_t
è0xe0000000è

	)

205 
	#INADDR_ALLHOSTS_GROUP
 ((
š_addr_t
è0xe0000001è

	)

206 
	#INADDR_ALLRTRS_GROUP
 ((
š_addr_t
è0xe0000002è

	)

207 
	#INADDR_MAX_LOCAL_GROUP
 ((
š_addr_t
è0xe00000ffè

	)

209 #ià!
__USE_KERNEL_IPV6_DEFS


211 
	sš6_addr


215 
ušt8_t
 
	m__u6_addr8
[16];

216 #ifdeà
__USE_MISC


217 
ušt16_t
 
	m__u6_addr16
[8];

218 
ušt32_t
 
	m__u6_addr32
[4];

220 } 
	m__š6_u
;

221 
	#s6_addr
 
__š6_u
.
__u6_addr8


	)

222 #ifdeà
__USE_MISC


223 
	#s6_addr16
 
__š6_u
.
__u6_addr16


	)

224 
	#s6_addr32
 
__š6_u
.
__u6_addr32


	)

229 cÚ¡ 
š6_addr
 
š6addr_ªy
;

230 cÚ¡ 
š6_addr
 
š6addr_loİback
;

231 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

232 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

234 
	#INET_ADDRSTRLEN
 16

	)

235 
	#INET6_ADDRSTRLEN
 46

	)

239 
	ssockaddr_š


241 
__SOCKADDR_COMMON
 (
sš_
);

242 
š_pÜt_t
 
	msš_pÜt
;

243 
š_addr
 
	msš_addr
;

246 
	msš_z”o
[ (
sockaddr
) -

247 
__SOCKADDR_COMMON_SIZE
 -

248  (
š_pÜt_t
) -

249  (
š_addr
)];

252 #ià!
__USE_KERNEL_IPV6_DEFS


254 
	ssockaddr_š6


256 
__SOCKADDR_COMMON
 (
sš6_
);

257 
š_pÜt_t
 
	msš6_pÜt
;

258 
ušt32_t
 
	msš6_æowšfo
;

259 
š6_addr
 
	msš6_addr
;

260 
ušt32_t
 
	msš6_scİe_id
;

264 #ifdeà
__USE_MISC


266 
	s_m»q


269 
š_addr
 
	mimr_muÉŸddr
;

272 
š_addr
 
	mimr_š‹rçû
;

275 
	s_m»q_sourû


278 
š_addr
 
	mimr_muÉŸddr
;

281 
š_addr
 
	mimr_š‹rçû
;

284 
š_addr
 
	mimr_sourûaddr
;

288 #ià!
__USE_KERNEL_IPV6_DEFS


290 
	sv6_m»q


293 
š6_addr
 
	mv6mr_muÉŸddr
;

296 
	mv6mr_š‹rçû
;

300 #ifdeà
__USE_MISC


302 
	sgroup_»q


305 
ušt32_t
 
	mgr_š‹rçû
;

308 
sockaddr_¡Üage
 
	mgr_group
;

311 
	sgroup_sourû_»q


314 
ušt32_t
 
	mg¤_š‹rçû
;

317 
sockaddr_¡Üage
 
	mg¤_group
;

320 
sockaddr_¡Üage
 
	mg¤_sourû
;

325 
	s_msf‹r


328 
š_addr
 
	mimsf_muÉŸddr
;

331 
š_addr
 
	mimsf_š‹rçû
;

334 
ušt32_t
 
	mimsf_fmode
;

337 
ušt32_t
 
	mimsf_num¤c
;

339 
š_addr
 
	mimsf_¦i¡
[1];

342 
	#IP_MSFILTER_SIZE
(
num¤c
è( (
_msf‹r
) \

343 -  (
š_addr
) \

344 + (
num¤c
è*  (
š_addr
))

	)

346 
	sgroup_f‹r


349 
ušt32_t
 
	mgf_š‹rçû
;

352 
sockaddr_¡Üage
 
	mgf_group
;

355 
ušt32_t
 
	mgf_fmode
;

358 
ušt32_t
 
	mgf_num¤c
;

360 
sockaddr_¡Üage
 
	mgf_¦i¡
[1];

363 
	#GROUP_FILTER_SIZE
(
num¤c
è( (
group_f‹r
) \

364 -  (
sockaddr_¡Üage
) \

365 + ((
num¤c
) \

366 *  (
sockaddr_¡Üage
)))

	)

376 
ušt32_t
 
	$Áohl
 (
ušt32_t
 
__ÃÚg
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

377 
ušt16_t
 
	$Áohs
 (
ušt16_t
 
__ÃtshÜt
)

378 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

379 
ušt32_t
 
	$htÚl
 (
ušt32_t
 
__ho¡lÚg
)

380 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

381 
ušt16_t
 
	$htÚs
 (
ušt16_t
 
__ho¡shÜt
)

382 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

384 
	~<’dŸn.h
>

387 
	~<b™s/by‹sw­.h
>

389 #ifdeà
__OPTIMIZE__


393 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


396 
	#Áohl
(
x
è(x)

	)

397 
	#Áohs
(
x
è(x)

	)

398 
	#htÚl
(
x
è(x)

	)

399 
	#htÚs
(
x
è(x)

	)

401 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


402 
	#Áohl
(
x
è
	`__bsw­_32
 (x)

	)

403 
	#Áohs
(
x
è
	`__bsw­_16
 (x)

	)

404 
	#htÚl
(
x
è
	`__bsw­_32
 (x)

	)

405 
	#htÚs
(
x
è
	`__bsw­_16
 (x)

	)

410 #ifdeà
__GNUC__


411 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

412 (
__ex‹nsiÚ__
 \

413 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

414 
__a
->
s6_addr32
[0] == 0 \

415 && 
__a
->
s6_addr32
[1] == 0 \

416 && 
__a
->
s6_addr32
[2] == 0 \

417 && 
__a
->
s6_addr32
[3] =ğ0; 
	}
}))

	)

419 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

420 (
__ex‹nsiÚ__
 \

421 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

422 
__a
->
s6_addr32
[0] == 0 \

423 && 
__a
->
s6_addr32
[1] == 0 \

424 && 
__a
->
s6_addr32
[2] == 0 \

425 && 
__a
->
s6_addr32
[3] =ğ
	`htÚl
 (1); }))

	)

427 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

428 (
__ex‹nsiÚ__
 \

429 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

430 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xã800000); }))

	)

432 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

433 (
__ex‹nsiÚ__
 \

434 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

435 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xãc00000); }))

	)

437 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

438 (
__ex‹nsiÚ__
 \

439 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

440 
__a
->
s6_addr32
[0] == 0 \

441 && 
__a
->
s6_addr32
[1] == 0 \

442 && 
__a
->
s6_addr32
[2] =ğ
	`htÚl
 (0xffff); }))

	)

444 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

445 (
__ex‹nsiÚ__
 \

446 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

447 
__a
->
s6_addr32
[0] == 0 \

448 && 
__a
->
s6_addr32
[1] == 0 \

449 && 
__a
->
s6_addr32
[2] == 0 \

450 && 
	`Áohl
 (
__a
->
s6_addr32
[3]è> 1; }))

	)

452 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

453 (
__ex‹nsiÚ__
 \

454 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

455 cÚ¡ 
š6_addr
 *
__b
 = (cÚ¡ š6_add¸*è(
b
); \

456 
__a
->
s6_addr32
[0] =ğ
__b
->s6_addr32[0] \

457 && 
__a
->
s6_addr32
[1] =ğ
__b
->s6_addr32[1] \

458 && 
__a
->
s6_addr32
[2] =ğ
__b
->s6_addr32[2] \

459 && 
__a
->
s6_addr32
[3] =ğ
__b
->s6_addr32[3]; }))

	)

461 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

462 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

463 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

464 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

465 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ0)

	)

467 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

468 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

469 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

470 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

471 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ
	`htÚl
 (1))

	)

473 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

474 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

475 =ğ
	`htÚl
 (0xã800000))

	)

477 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

478 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

479 =ğ
	`htÚl
 (0xãc00000))

	)

481 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

482 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

483 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

484 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ
	`htÚl
 (0xffff)))

	)

486 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

487 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

488 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

489 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0) \

490 && (
	`Áohl
 (((cÚ¡ 
ušt32_t
 *è(
a
))[3]è> 1))

	)

492 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

493 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[0]) \

494 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[1]) \

495 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[2]) \

496 && (((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[3]))

	)

499 
	#IN6_IS_ADDR_MULTICAST
(
a
è(((cÚ¡ 
ušt8_t
 *è×))[0] =ğ0xff)

	)

501 #ifdeà
__USE_MISC


503 
	$bšd»svpÜt
 (
__sockfd
, 
sockaddr_š
 *
__sock_š
è
__THROW
;

506 
	$bšd»svpÜt6
 (
__sockfd
, 
sockaddr_š6
 *
__sock_š
)

507 
__THROW
;

511 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

512 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

513 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x1))

	)

515 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

516 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

517 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x2))

	)

519 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

520 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

521 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x5))

	)

523 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

524 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

525 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x8))

	)

527 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

528 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

529 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0xe))

	)

532 #ifdeà
__USE_GNU


533 
cmsghdr
;

535 #ià!
__USE_KERNEL_IPV6_DEFS


537 
	sš6_pktšfo


539 
š6_addr
 
i6_addr
;

540 
i6_ifšdex
;

544 
	s6_mtušfo


546 
sockaddr_š6
 
6m_addr
;

547 
ušt32_t
 
6m_mtu
;

552 
	$š‘6_İtiÚ_¥aû
 (
__nby‹s
)

553 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

554 
	$š‘6_İtiÚ_š™
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

555 
__ty³
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

556 
	$š‘6_İtiÚ_­³nd
 (
cmsghdr
 *
__cmsg
,

557 cÚ¡ 
ušt8_t
 *
__ty³p
, 
__muÉx
,

558 
__¶usy
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

559 
ušt8_t
 *
	$š‘6_İtiÚ_®loc
 (
cmsghdr
 *
__cmsg
, 
__d©®’
,

560 
__muÉx
, 
__¶usy
)

561 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

562 
	$š‘6_İtiÚ_Ãxt
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

563 
ušt8_t
 **
__Œp
)

564 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

565 
	$š‘6_İtiÚ_fšd
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

566 
ušt8_t
 **
__Œp
, 
__ty³
)

567 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

571 
	$š‘6_İt_š™
 (*
__extbuf
, 
sockËn_t
 
__ex’
è
__THROW
;

572 
	$š‘6_İt_­³nd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

573 
ušt8_t
 
__ty³
, 
sockËn_t
 
__Ën
, ušt8_ˆ
__®ign
,

574 **
__d©abuå
è
__THROW
;

575 
	$š‘6_İt_fšish
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
)

576 
__THROW
;

577 
	$š‘6_İt_£t_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

578 
sockËn_t
 
__v®Ën
è
__THROW
;

579 
	$š‘6_İt_Ãxt
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

580 
ušt8_t
 *
__ty³p
, 
sockËn_t
 *
__ËÅ
,

581 **
__d©abuå
è
__THROW
;

582 
	$š‘6_İt_fšd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

583 
ušt8_t
 
__ty³
, 
sockËn_t
 *
__ËÅ
,

584 **
__d©abuå
è
__THROW
;

585 
	$š‘6_İt_g‘_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

586 
sockËn_t
 
__v®Ën
è
__THROW
;

590 
sockËn_t
 
	$š‘6_¹h_¥aû
 (
__ty³
, 
__£gm’ts
è
__THROW
;

591 *
	$š‘6_¹h_š™
 (*
__bp
, 
sockËn_t
 
__bp_Ën
, 
__ty³
,

592 
__£gm’ts
è
__THROW
;

593 
	$š‘6_¹h_add
 (*
__bp
, cÚ¡ 
š6_addr
 *
__addr
è
__THROW
;

594 
	$š‘6_¹h_»v”£
 (cÚ¡ *
__š
, *
__out
è
__THROW
;

595 
	$š‘6_¹h_£gm’ts
 (cÚ¡ *
__bp
è
__THROW
;

596 
š6_addr
 *
	$š‘6_¹h_g‘addr
 (cÚ¡ *
__bp
, 
__šdex
)

597 
__THROW
;

603 
	$g‘v4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

604 
š_addr
 
__group
, 
ušt32_t
 *
__fmode
,

605 
ušt32_t
 *
__num¤c
, 
š_addr
 *
__¦i¡
)

606 
__THROW
;

609 
	$£tv4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

610 
š_addr
 
__group
, 
ušt32_t
 
__fmode
,

611 
ušt32_t
 
__num¤c
,

612 cÚ¡ 
š_addr
 *
__¦i¡
)

613 
__THROW
;

617 
	$g‘sourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

618 cÚ¡ 
sockaddr
 *
__group
,

619 
sockËn_t
 
__grou¶’
, 
ušt32_t
 *
__fmode
,

620 
ušt32_t
 *
__num¤c
,

621 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

624 
	$£tsourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

625 cÚ¡ 
sockaddr
 *
__group
,

626 
sockËn_t
 
__grou¶’
, 
ušt32_t
 
__fmode
,

627 
ušt32_t
 
__num¤c
,

628 cÚ¡ 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

631 
__END_DECLS


	@/usr/include/netinet/tcp.h

32 #iâdeà
_NETINET_TCP_H


33 
	#_NETINET_TCP_H
 1

	)

35 
	~<ã©u»s.h
>

40 
	#TCP_NODELAY
 1

	)

41 
	#TCP_MAXSEG
 2

	)

42 
	#TCP_CORK
 3

	)

43 
	#TCP_KEEPIDLE
 4

	)

44 
	#TCP_KEEPINTVL
 5

	)

45 
	#TCP_KEEPCNT
 6

	)

46 
	#TCP_SYNCNT
 7

	)

47 
	#TCP_LINGER2
 8

	)

48 
	#TCP_DEFER_ACCEPT
 9

	)

49 
	#TCP_WINDOW_CLAMP
 10

	)

50 
	#TCP_INFO
 11

	)

51 
	#TCP_QUICKACK
 12

	)

52 
	#TCP_CONGESTION
 13

	)

53 
	#TCP_MD5SIG
 14

	)

54 
	#TCP_COOKIE_TRANSACTIONS
 15

	)

55 
	#TCP_THIN_LINEAR_TIMEOUTS
 16

	)

56 
	#TCP_THIN_DUPACK
 17

	)

57 
	#TCP_USER_TIMEOUT
 18

	)

58 
	#TCP_REPAIR
 19

	)

59 
	#TCP_REPAIR_QUEUE
 20

	)

60 
	#TCP_QUEUE_SEQ
 21

	)

61 
	#TCP_REPAIR_OPTIONS
 22

	)

62 
	#TCP_FASTOPEN
 23

	)

63 
	#TCP_TIMESTAMP
 24

	)

64 
	#TCP_NOTSENT_LOWAT
 25

	)

66 
	#TCP_CC_INFO
 26

	)

68 
	#TCP_SAVE_SYN
 27

	)

70 
	#TCP_SAVED_SYN
 28

	)

73 #ifdeà
__USE_MISC


74 
	~<sys/ty³s.h
>

75 
	~<sys/sock‘.h
>

77 
u_št32_t
 
	ttı_£q
;

82 
	stıhdr


84 
__ex‹nsiÚ__
 union

88 
u_št16_t
 
	mth_¥Üt
;

89 
u_št16_t
 
	mth_dpÜt
;

90 
tı_£q
 
	mth_£q
;

91 
tı_£q
 
	mth_ack
;

92 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


93 
u_št8_t
 
	mth_x2
:4;

94 
u_št8_t
 
	mth_off
:4;

96 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


97 
u_št8_t
 
	mth_off
:4;

98 
u_št8_t
 
	mth_x2
:4;

100 
u_št8_t
 
	mth_æags
;

101 
	#TH_FIN
 0x01

	)

102 
	#TH_SYN
 0x02

	)

103 
	#TH_RST
 0x04

	)

104 
	#TH_PUSH
 0x08

	)

105 
	#TH_ACK
 0x10

	)

106 
	#TH_URG
 0x20

	)

107 
u_št16_t
 
	mth_wš
;

108 
u_št16_t
 
	mth_sum
;

109 
u_št16_t
 
	mth_u½
;

113 
u_št16_t
 
	msourû
;

114 
u_št16_t
 
	mde¡
;

115 
u_št32_t
 
	m£q
;

116 
u_št32_t
 
	mack_£q
;

117 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


118 
u_št16_t
 
	m»s1
:4;

119 
u_št16_t
 
	mdoff
:4;

120 
u_št16_t
 
	mfš
:1;

121 
u_št16_t
 
	msyn
:1;

122 
u_št16_t
 
	mr¡
:1;

123 
u_št16_t
 
	mpsh
:1;

124 
u_št16_t
 
	mack
:1;

125 
u_št16_t
 
	murg
:1;

126 
u_št16_t
 
	m»s2
:2;

127 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


128 
u_št16_t
 
	mdoff
:4;

129 
u_št16_t
 
	m»s1
:4;

130 
u_št16_t
 
	m»s2
:2;

131 
u_št16_t
 
	murg
:1;

132 
u_št16_t
 
	mack
:1;

133 
u_št16_t
 
	mpsh
:1;

134 
u_št16_t
 
	mr¡
:1;

135 
u_št16_t
 
	msyn
:1;

136 
u_št16_t
 
	mfš
:1;

140 
u_št16_t
 
	mwšdow
;

141 
u_št16_t
 
	mcheck
;

142 
u_št16_t
 
	murg_±r
;

149 
	mTCP_ESTABLISHED
 = 1,

150 
	mTCP_SYN_SENT
,

151 
	mTCP_SYN_RECV
,

152 
	mTCP_FIN_WAIT1
,

153 
	mTCP_FIN_WAIT2
,

154 
	mTCP_TIME_WAIT
,

155 
	mTCP_CLOSE
,

156 
	mTCP_CLOSE_WAIT
,

157 
	mTCP_LAST_ACK
,

158 
	mTCP_LISTEN
,

159 
	mTCP_CLOSING


162 
	#TCPOPT_EOL
 0

	)

163 
	#TCPOPT_NOP
 1

	)

164 
	#TCPOPT_MAXSEG
 2

	)

165 
	#TCPOLEN_MAXSEG
 4

	)

166 
	#TCPOPT_WINDOW
 3

	)

167 
	#TCPOLEN_WINDOW
 3

	)

168 
	#TCPOPT_SACK_PERMITTED
 4

	)

169 
	#TCPOLEN_SACK_PERMITTED
 2

	)

170 
	#TCPOPT_SACK
 5

	)

171 
	#TCPOPT_TIMESTAMP
 8

	)

172 
	#TCPOLEN_TIMESTAMP
 10

	)

173 
	#TCPOLEN_TSTAMP_APPA
 (
TCPOLEN_TIMESTAMP
+2è

	)

175 
	#TCPOPT_TSTAMP_HDR
 \

176 (
TCPOPT_NOP
<<24|TCPOPT_NOP<<16|
TCPOPT_TIMESTAMP
<<8|
TCPOLEN_TIMESTAMP
)

	)

184 
	#TCP_MSS
 512

	)

186 
	#TCP_MAXWIN
 65535

	)

188 
	#TCP_MAX_WINSHIFT
 14

	)

190 
	#SOL_TCP
 6

	)

193 
	#TCPI_OPT_TIMESTAMPS
 1

	)

194 
	#TCPI_OPT_SACK
 2

	)

195 
	#TCPI_OPT_WSCALE
 4

	)

196 
	#TCPI_OPT_ECN
 8

	)

197 
	#TCPI_OPT_ECN_SEEN
 16

	)

198 
	#TCPI_OPT_SYN_DATA
 32

	)

201 
	etı_ÿ_¡©e


203 
	mTCP_CA_O³n
 = 0,

204 
	mTCP_CA_DisÜd”
 = 1,

205 
	mTCP_CA_CWR
 = 2,

206 
	mTCP_CA_Recov”y
 = 3,

207 
	mTCP_CA_Loss
 = 4

210 
	stı_šfo


212 
u_št8_t
 
	mtıi_¡©e
;

213 
u_št8_t
 
	mtıi_ÿ_¡©e
;

214 
u_št8_t
 
	mtıi_»Œªsm™s
;

215 
u_št8_t
 
	mtıi_´obes
;

216 
u_št8_t
 
	mtıi_backoff
;

217 
u_št8_t
 
	mtıi_İtiÚs
;

218 
u_št8_t
 
	mtıi_¢d_wsÿË
 : 4, 
	mtıi_rcv_wsÿË
 : 4;

220 
u_št32_t
 
	mtıi_¹o
;

221 
u_št32_t
 
	mtıi_©o
;

222 
u_št32_t
 
	mtıi_¢d_mss
;

223 
u_št32_t
 
	mtıi_rcv_mss
;

225 
u_št32_t
 
	mtıi_uÇcked
;

226 
u_št32_t
 
	mtıi_§cked
;

227 
u_št32_t
 
	mtıi_lo¡
;

228 
u_št32_t
 
	mtıi_»Œªs
;

229 
u_št32_t
 
	mtıi_çck‘s
;

232 
u_št32_t
 
	mtıi_Ï¡_d©a_£Á
;

233 
u_št32_t
 
	mtıi_Ï¡_ack_£Á
;

234 
u_št32_t
 
	mtıi_Ï¡_d©a_»cv
;

235 
u_št32_t
 
	mtıi_Ï¡_ack_»cv
;

238 
u_št32_t
 
	mtıi_pmtu
;

239 
u_št32_t
 
	mtıi_rcv_s¡h»sh
;

240 
u_št32_t
 
	mtıi_¹t
;

241 
u_št32_t
 
	mtıi_¹tv¬
;

242 
u_št32_t
 
	mtıi_¢d_s¡h»sh
;

243 
u_št32_t
 
	mtıi_¢d_cwnd
;

244 
u_št32_t
 
	mtıi_advmss
;

245 
u_št32_t
 
	mtıi_»Üd”šg
;

247 
u_št32_t
 
	mtıi_rcv_¹t
;

248 
u_št32_t
 
	mtıi_rcv_¥aû
;

250 
u_št32_t
 
	mtıi_tÙ®_»Œªs
;

255 
	#TCP_MD5SIG_MAXKEYLEN
 80

	)

257 
	stı_md5sig


259 
sockaddr_¡Üage
 
	mtım_addr
;

260 
u_št16_t
 
	m__tım_·d1
;

261 
u_št16_t
 
	mtım_keyËn
;

262 
u_št32_t
 
	m__tım_·d2
;

263 
u_št8_t
 
	mtım_key
[
TCP_MD5SIG_MAXKEYLEN
];

267 
	stı_»·œ_İt


269 
u_št32_t
 
	mİt_code
;

270 
u_št32_t
 
	mİt_v®
;

276 
	mTCP_NO_QUEUE
,

277 
	mTCP_RECV_QUEUE
,

278 
	mTCP_SEND_QUEUE
,

279 
	mTCP_QUEUES_NR
,

283 
	#TCP_COOKIE_MIN
 8

	)

284 
	#TCP_COOKIE_MAX
 16

	)

285 
	#TCP_COOKIE_PAIR_SIZE
 (2*
TCP_COOKIE_MAX
)

	)

288 
	#TCP_COOKIE_IN_ALWAYS
 (1 << 0è

	)

289 
	#TCP_COOKIE_OUT_NEVER
 (1 << 1è

	)

293 
	#TCP_S_DATA_IN
 (1 << 2è

	)

294 
	#TCP_S_DATA_OUT
 (1 << 3è

	)

296 
	#TCP_MSS_DEFAULT
 536U

	)

297 
	#TCP_MSS_DESIRED
 1220U

	)

299 
	stı_cook›_Œª§ùiÚs


301 
u_št16_t
 
	mtıù_æags
;

302 
u_št8_t
 
	m__tıù_·d1
;

303 
u_št8_t
 
	mtıù_cook›_desœed
;

304 
u_št16_t
 
	mtıù_s_d©a_desœed
;

305 
u_št16_t
 
	mtıù_u£d
;

306 
u_št8_t
 
	mtıù_v®ue
[
TCP_MSS_DEFAULT
];

	@/usr/include/openssl/err.h

112 #iâdeà
HEADER_ERR_H


113 
	#HEADER_ERR_H


	)

115 
	~<İ’s¦/e_os2.h
>

117 #iâdeà
OPENSSL_NO_FP_API


118 
	~<¡dio.h
>

119 
	~<¡dlib.h
>

122 
	~<İ’s¦/os¦_typ.h
>

123 #iâdeà
OPENSSL_NO_BIO


124 
	~<İ’s¦/bio.h
>

126 #iâdeà
OPENSSL_NO_LHASH


127 
	~<İ’s¦/lhash.h
>

130 #ifdeà 
__ılu¥lus


134 #iâdeà
OPENSSL_NO_ERR


135 
	#ERR_PUT_”rÜ
(
a
,
b
,
c
,
d
,
e
è
	`ERR_put_”rÜ
×,b,c,d,e)

	)

137 
	#ERR_PUT_”rÜ
(
a
,
b
,
c
,
d
,
e
è
	`ERR_put_”rÜ
×,b,c,
NULL
,0)

	)

140 
	~<”ºo.h
>

142 
	#ERR_TXT_MALLOCED
 0x01

	)

143 
	#ERR_TXT_STRING
 0x02

	)

145 
	#ERR_FLAG_MARK
 0x01

	)

146 
	#ERR_FLAG_CLEAR
 0x02

	)

148 
	#ERR_NUM_ERRORS
 16

	)

149 
	s”r_¡©e_¡
 {

150 
CRYPTO_THREADID
 
tid
;

151 
”r_æags
[
ERR_NUM_ERRORS
];

152 
”r_bufãr
[
ERR_NUM_ERRORS
];

153 *
”r_d©a
[
ERR_NUM_ERRORS
];

154 
”r_d©a_æags
[
ERR_NUM_ERRORS
];

155 cÚ¡ *
”r_fe
[
ERR_NUM_ERRORS
];

156 
”r_lše
[
ERR_NUM_ERRORS
];

157 
tİ
, 
bÙtom
;

158 } 
	tERR_STATE
;

161 
	#ERR_LIB_NONE
 1

	)

162 
	#ERR_LIB_SYS
 2

	)

163 
	#ERR_LIB_BN
 3

	)

164 
	#ERR_LIB_RSA
 4

	)

165 
	#ERR_LIB_DH
 5

	)

166 
	#ERR_LIB_EVP
 6

	)

167 
	#ERR_LIB_BUF
 7

	)

168 
	#ERR_LIB_OBJ
 8

	)

169 
	#ERR_LIB_PEM
 9

	)

170 
	#ERR_LIB_DSA
 10

	)

171 
	#ERR_LIB_X509
 11

	)

173 
	#ERR_LIB_ASN1
 13

	)

174 
	#ERR_LIB_CONF
 14

	)

175 
	#ERR_LIB_CRYPTO
 15

	)

176 
	#ERR_LIB_EC
 16

	)

177 
	#ERR_LIB_SSL
 20

	)

183 
	#ERR_LIB_BIO
 32

	)

184 
	#ERR_LIB_PKCS7
 33

	)

185 
	#ERR_LIB_X509V3
 34

	)

186 
	#ERR_LIB_PKCS12
 35

	)

187 
	#ERR_LIB_RAND
 36

	)

188 
	#ERR_LIB_DSO
 37

	)

189 
	#ERR_LIB_ENGINE
 38

	)

190 
	#ERR_LIB_OCSP
 39

	)

191 
	#ERR_LIB_UI
 40

	)

192 
	#ERR_LIB_COMP
 41

	)

193 
	#ERR_LIB_ECDSA
 42

	)

194 
	#ERR_LIB_ECDH
 43

	)

195 
	#ERR_LIB_STORE
 44

	)

196 
	#ERR_LIB_FIPS
 45

	)

197 
	#ERR_LIB_CMS
 46

	)

198 
	#ERR_LIB_TS
 47

	)

199 
	#ERR_LIB_HMAC
 48

	)

200 
	#ERR_LIB_JPAKE
 49

	)

202 
	#ERR_LIB_USER
 128

	)

204 
	#SYS”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_SYS
,(f),Ô),
__FILE__
,
__LINE__
)

	)

205 
	#BN”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_BN
,(f),Ô),
__FILE__
,
__LINE__
)

	)

206 
	#RSA”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_RSA
,(f),Ô),
__FILE__
,
__LINE__
)

	)

207 
	#DH”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_DH
,(f),Ô),
__FILE__
,
__LINE__
)

	)

208 
	#EVP”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_EVP
,(f),Ô),
__FILE__
,
__LINE__
)

	)

209 
	#BUF”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_BUF
,(f),Ô),
__FILE__
,
__LINE__
)

	)

210 
	#OBJ”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_OBJ
,(f),Ô),
__FILE__
,
__LINE__
)

	)

211 
	#PEM”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_PEM
,(f),Ô),
__FILE__
,
__LINE__
)

	)

212 
	#DSA”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_DSA
,(f),Ô),
__FILE__
,
__LINE__
)

	)

213 
	#X509”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_X509
,(f),Ô),
__FILE__
,
__LINE__
)

	)

214 
	#ASN1”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_ASN1
,(f),Ô),
__FILE__
,
__LINE__
)

	)

215 
	#CONF”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_CONF
,(f),Ô),
__FILE__
,
__LINE__
)

	)

216 
	#CRYPTO”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_CRYPTO
,(f),Ô),
__FILE__
,
__LINE__
)

	)

217 
	#EC”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_EC
,(f),Ô),
__FILE__
,
__LINE__
)

	)

218 
	#SSL”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_SSL
,(f),Ô),
__FILE__
,
__LINE__
)

	)

219 
	#BIO”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_BIO
,(f),Ô),
__FILE__
,
__LINE__
)

	)

220 
	#PKCS7”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_PKCS7
,(f),Ô),
__FILE__
,
__LINE__
)

	)

221 
	#X509V3”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_X509V3
,(f),Ô),
__FILE__
,
__LINE__
)

	)

222 
	#PKCS12”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_PKCS12
,(f),Ô),
__FILE__
,
__LINE__
)

	)

223 
	#RAND”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_RAND
,(f),Ô),
__FILE__
,
__LINE__
)

	)

224 
	#DSO”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_DSO
,(f),Ô),
__FILE__
,
__LINE__
)

	)

225 
	#ENGINE”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_ENGINE
,(f),Ô),
__FILE__
,
__LINE__
)

	)

226 
	#OCSP”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_OCSP
,(f),Ô),
__FILE__
,
__LINE__
)

	)

227 
	#UI”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_UI
,(f),Ô),
__FILE__
,
__LINE__
)

	)

228 
	#COMP”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_COMP
,(f),Ô),
__FILE__
,
__LINE__
)

	)

229 
	#ECDSA”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_ECDSA
,(f),Ô),
__FILE__
,
__LINE__
)

	)

230 
	#ECDH”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_ECDH
,(f),Ô),
__FILE__
,
__LINE__
)

	)

231 
	#STORE”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_STORE
,(f),Ô),
__FILE__
,
__LINE__
)

	)

232 
	#FIPS”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_FIPS
,(f),Ô),
__FILE__
,
__LINE__
)

	)

233 
	#CMS”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_CMS
,(f),Ô),
__FILE__
,
__LINE__
)

	)

234 
	#TS”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_TS
,(f),Ô),
__FILE__
,
__LINE__
)

	)

235 
	#HMAC”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_HMAC
,(f),Ô),
__FILE__
,
__LINE__
)

	)

236 
	#JPAKE”r
(
f
,
r
è
	`ERR_PUT_”rÜ
(
ERR_LIB_JPAKE
,(f),Ô),
__FILE__
,
__LINE__
)

	)

242 
	#ERR_PACK
(
l
,
f
,
r
) ((((()l)&0xffL)*0x1000000)| \

243 (((()
f
)&0xfffL)*0x1000)| \

244 (((()
r
)&0xfffL)))

	)

245 
	#ERR_GET_LIB
(
l
è()((((î)>>24L)&0xffL)

	)

246 
	#ERR_GET_FUNC
(
l
è()((((î)>>12L)&0xfffL)

	)

247 
	#ERR_GET_REASON
(
l
è()(Ö)&0xfffL)

	)

248 
	#ERR_FATAL_ERROR
(
l
è()(Ö)&
ERR_R_FATAL
)

	)

251 
	#SYS_F_FOPEN
 1

	)

252 
	#SYS_F_CONNECT
 2

	)

253 
	#SYS_F_GETSERVBYNAME
 3

	)

254 
	#SYS_F_SOCKET
 4

	)

255 
	#SYS_F_IOCTLSOCKET
 5

	)

256 
	#SYS_F_BIND
 6

	)

257 
	#SYS_F_LISTEN
 7

	)

258 
	#SYS_F_ACCEPT
 8

	)

259 
	#SYS_F_WSASTARTUP
 9

	)

260 
	#SYS_F_OPENDIR
 10

	)

261 
	#SYS_F_FREAD
 11

	)

262 
	#SYS_F_FFLUSH
 18

	)

265 
	#ERR_R_SYS_LIB
 
ERR_LIB_SYS


	)

266 
	#ERR_R_BN_LIB
 
ERR_LIB_BN


	)

267 
	#ERR_R_RSA_LIB
 
ERR_LIB_RSA


	)

268 
	#ERR_R_DH_LIB
 
ERR_LIB_DH


	)

269 
	#ERR_R_EVP_LIB
 
ERR_LIB_EVP


	)

270 
	#ERR_R_BUF_LIB
 
ERR_LIB_BUF


	)

271 
	#ERR_R_OBJ_LIB
 
ERR_LIB_OBJ


	)

272 
	#ERR_R_PEM_LIB
 
ERR_LIB_PEM


	)

273 
	#ERR_R_DSA_LIB
 
ERR_LIB_DSA


	)

274 
	#ERR_R_X509_LIB
 
ERR_LIB_X509


	)

275 
	#ERR_R_ASN1_LIB
 
ERR_LIB_ASN1


	)

276 
	#ERR_R_CONF_LIB
 
ERR_LIB_CONF


	)

277 
	#ERR_R_CRYPTO_LIB
 
ERR_LIB_CRYPTO


	)

278 
	#ERR_R_EC_LIB
 
ERR_LIB_EC


	)

279 
	#ERR_R_SSL_LIB
 
ERR_LIB_SSL


	)

280 
	#ERR_R_BIO_LIB
 
ERR_LIB_BIO


	)

281 
	#ERR_R_PKCS7_LIB
 
ERR_LIB_PKCS7


	)

282 
	#ERR_R_X509V3_LIB
 
ERR_LIB_X509V3


	)

283 
	#ERR_R_PKCS12_LIB
 
ERR_LIB_PKCS12


	)

284 
	#ERR_R_RAND_LIB
 
ERR_LIB_RAND


	)

285 
	#ERR_R_DSO_LIB
 
ERR_LIB_DSO


	)

286 
	#ERR_R_ENGINE_LIB
 
ERR_LIB_ENGINE


	)

287 
	#ERR_R_OCSP_LIB
 
ERR_LIB_OCSP


	)

288 
	#ERR_R_UI_LIB
 
ERR_LIB_UI


	)

289 
	#ERR_R_COMP_LIB
 
ERR_LIB_COMP


	)

290 
	#ERR_R_ECDSA_LIB
 
ERR_LIB_ECDSA


	)

291 
	#ERR_R_ECDH_LIB
 
ERR_LIB_ECDH


	)

292 
	#ERR_R_STORE_LIB
 
ERR_LIB_STORE


	)

293 
	#ERR_R_TS_LIB
 
ERR_LIB_TS


	)

295 
	#ERR_R_NESTED_ASN1_ERROR
 58

	)

296 
	#ERR_R_BAD_ASN1_OBJECT_HEADER
 59

	)

297 
	#ERR_R_BAD_GET_ASN1_OBJECT_CALL
 60

	)

298 
	#ERR_R_EXPECTING_AN_ASN1_SEQUENCE
 61

	)

299 
	#ERR_R_ASN1_LENGTH_MISMATCH
 62

	)

300 
	#ERR_R_MISSING_ASN1_EOS
 63

	)

303 
	#ERR_R_FATAL
 64

	)

304 
	#ERR_R_MALLOC_FAILURE
 (1|
ERR_R_FATAL
)

	)

305 
	#ERR_R_SHOULD_NOT_HAVE_BEEN_CALLED
 (2|
ERR_R_FATAL
)

	)

306 
	#ERR_R_PASSED_NULL_PARAMETER
 (3|
ERR_R_FATAL
)

	)

307 
	#ERR_R_INTERNAL_ERROR
 (4|
ERR_R_FATAL
)

	)

308 
	#ERR_R_DISABLED
 (5|
ERR_R_FATAL
)

	)

315 
	sERR_¡ršg_d©a_¡
 {

316 
”rÜ
;

317 cÚ¡ *
¡ršg
;

318 } 
	tERR_STRING_DATA
;

320 
ERR_put_”rÜ
(
lib
, 
func
, 
»asÚ
, cÚ¡ *
fe
, 
lše
);

321 
ERR_£t_”rÜ_d©a
(*
d©a
, 
æags
);

323 
ERR_g‘_”rÜ
();

324 
ERR_g‘_”rÜ_lše
(cÚ¡ **
fe
, *
lše
);

325 
ERR_g‘_”rÜ_lše_d©a
(cÚ¡ **
fe
, *
lše
,

326 cÚ¡ **
d©a
, *
æags
);

327 
ERR_³ek_”rÜ
();

328 
ERR_³ek_”rÜ_lše
(cÚ¡ **
fe
, *
lše
);

329 
ERR_³ek_”rÜ_lše_d©a
(cÚ¡ **
fe
, *
lše
,

330 cÚ¡ **
d©a
, *
æags
);

331 
ERR_³ek_Ï¡_”rÜ
();

332 
ERR_³ek_Ï¡_”rÜ_lše
(cÚ¡ **
fe
, *
lše
);

333 
ERR_³ek_Ï¡_”rÜ_lše_d©a
(cÚ¡ **
fe
, *
lše
,

334 cÚ¡ **
d©a
, *
æags
);

335 
ERR_ş—r_”rÜ
();

336 *
ERR_”rÜ_¡ršg
(
e
, *
buf
);

337 
ERR_”rÜ_¡ršg_n
(
e
, *
buf
, 
size_t
 
Ën
);

338 cÚ¡ *
ERR_lib_”rÜ_¡ršg
(
e
);

339 cÚ¡ *
ERR_func_”rÜ_¡ršg
(
e
);

340 cÚ¡ *
ERR_»asÚ_”rÜ_¡ršg
(
e
);

341 
ERR_´št_”rÜs_cb
((*
cb
è(cÚ¡ *
¡r
, 
size_t
 
Ën
, *
u
),

342 *
u
);

343 #iâdeà
OPENSSL_NO_FP_API


344 
ERR_´št_”rÜs_å
(
FILE
 *
å
);

346 #iâdeà
OPENSSL_NO_BIO


347 
ERR_´št_”rÜs
(
BIO
 *
bp
);

349 
ERR_add_”rÜ_d©a
(
num
, ...);

350 
ERR_add_”rÜ_vd©a
(
num
, 
va_li¡
 
¬gs
);

351 
ERR_lßd_¡ršgs
(
lib
, 
ERR_STRING_DATA
 
¡r
[]);

352 
ERR_uÆßd_¡ršgs
(
lib
, 
ERR_STRING_DATA
 
¡r
[]);

353 
ERR_lßd_ERR_¡ršgs
();

354 
ERR_lßd_üy±o_¡ršgs
();

355 
ERR_ä“_¡ršgs
();

357 
ERR_»move_th»ad_¡©e
(cÚ¡ 
CRYPTO_THREADID
 *
tid
);

358 #iâdeà
OPENSSL_NO_DEPRECATED


359 
ERR_»move_¡©e
(
pid
);

361 
ERR_STATE
 *
ERR_g‘_¡©e
();

363 #iâdeà
OPENSSL_NO_LHASH


364 
LHASH_OF
(
ERR_STRING_DATA
è*
ERR_g‘_¡ršg_bË
();

365 
LHASH_OF
(
ERR_STATE
è*
ERR_g‘_”r_¡©e_bË
();

366 
ERR_»Ëa£_”r_¡©e_bË
(
LHASH_OF
(
ERR_STATE
è**
hash
);

369 
ERR_g‘_Ãxt_”rÜ_lib¿ry
();

371 
ERR_£t_m¬k
();

372 
ERR_pİ_to_m¬k
();

380 cÚ¡ 
ERR_FNS
 *
ERR_g‘_im¶em’tiÚ
();

385 
ERR_£t_im¶em’tiÚ
(cÚ¡ 
ERR_FNS
 *
âs
);

387 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/rand.h

59 #iâdeà
HEADER_RAND_H


60 
	#HEADER_RAND_H


	)

62 
	~<¡dlib.h
>

63 
	~<İ’s¦/os¦_typ.h
>

64 
	~<İ’s¦/e_os2.h
>

66 #ià
defšed
(
OPENSSL_SYS_WINDOWS
)

67 
	~<wšdows.h
>

70 #ifdeà 
__ılu¥lus


74 #ià
defšed
(
OPENSSL_FIPS
)

75 
	#FIPS_RAND_SIZE_T
 
size_t


	)

81 
	s¿nd_m‘h_¡
 {

82 (*
£ed
è(cÚ¡ *
buf
, 
num
);

83 (*
by‹s
è(*
buf
, 
num
);

84 (*
ş—nup
) ();

85 (*
add
è(cÚ¡ *
buf
, 
num
, 
’Œİy
);

86 (*
p£udÜªd
è(*
buf
, 
num
);

87 (*
¡©us
) ();

90 #ifdeà
BN_DEBUG


91 
¿nd_´ediùabË
;

94 
RAND_£t_¿nd_m‘hod
(cÚ¡ 
RAND_METHOD
 *
m‘h
);

95 cÚ¡ 
RAND_METHOD
 *
RAND_g‘_¿nd_m‘hod
();

96 #iâdeà
OPENSSL_NO_ENGINE


97 
RAND_£t_¿nd_’gše
(
ENGINE
 *
’gše
);

99 
RAND_METHOD
 *
RAND_SSL—y
();

100 
RAND_ş—nup
();

101 
RAND_by‹s
(*
buf
, 
num
);

102 
RAND_p£udo_by‹s
(*
buf
, 
num
);

103 
RAND_£ed
(cÚ¡ *
buf
, 
num
);

104 
RAND_add
(cÚ¡ *
buf
, 
num
, 
’Œİy
);

105 
RAND_lßd_fe
(cÚ¡ *
fe
, 
max_by‹s
);

106 
RAND_wr™e_fe
(cÚ¡ *
fe
);

107 cÚ¡ *
RAND_fe_Çme
(*
fe
, 
size_t
 
num
);

108 
RAND_¡©us
();

109 
RAND_qu”y_egd_by‹s
(cÚ¡ *
·th
, *
buf
, 
by‹s
);

110 
RAND_egd
(cÚ¡ *
·th
);

111 
RAND_egd_by‹s
(cÚ¡ *
·th
, 
by‹s
);

112 
RAND_pŞl
();

114 #ià
defšed
(
OPENSSL_SYS_WINDOWS
è|| defšed(
OPENSSL_SYS_WIN32
)

116 
RAND_sü“n
();

117 
RAND_ev’t
(
UINT
, 
WPARAM
, 
LPARAM
);

121 #ifdeà
OPENSSL_FIPS


122 
RAND_£t_fs_drbg_ty³
(
ty³
, 
æags
);

123 
RAND_š™_fs
();

131 
ERR_lßd_RAND_¡ršgs
();

136 
	#RAND_F_RAND_GET_RAND_METHOD
 101

	)

137 
	#RAND_F_RAND_INIT_FIPS
 102

	)

138 
	#RAND_F_SSLEAY_RAND_BYTES
 100

	)

141 
	#RAND_R_DUAL_EC_DRBG_DISABLED
 104

	)

142 
	#RAND_R_ERROR_INITIALISING_DRBG
 102

	)

143 
	#RAND_R_ERROR_INSTANTIATING_DRBG
 103

	)

144 
	#RAND_R_NO_FIPS_RANDOM_METHOD_SET
 101

	)

145 
	#RAND_R_PRNG_NOT_SEEDED
 100

	)

147 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ssl.h

143 #iâdeà
HEADER_SSL_H


144 
	#HEADER_SSL_H


	)

146 
	~<İ’s¦/e_os2.h
>

148 #iâdeà
OPENSSL_NO_COMP


149 
	~<İ’s¦/comp.h
>

151 #iâdeà
OPENSSL_NO_BIO


152 
	~<İ’s¦/bio.h
>

154 #iâdeà
OPENSSL_NO_DEPRECATED


155 #iâdeà
OPENSSL_NO_X509


156 
	~<İ’s¦/x509.h
>

158 
	~<İ’s¦/üy±o.h
>

159 
	~<İ’s¦/lhash.h
>

160 
	~<İ’s¦/bufãr.h
>

162 
	~<İ’s¦/³m.h
>

163 
	~<İ’s¦/hmac.h
>

165 
	~<İ’s¦/ks¦.h
>

166 
	~<İ’s¦/§ã¡ack.h
>

167 
	~<İ’s¦/symhacks.h
>

169 #ifdeà 
__ılu¥lus


178 
	#SSL_SESSION_ASN1_VERSION
 0x0001

	)

181 
	#SSL_TXT_NULL_WITH_MD5
 
SSL2_TXT_NULL_WITH_MD5


	)

182 
	#SSL_TXT_RC4_128_WITH_MD5
 
SSL2_TXT_RC4_128_WITH_MD5


	)

183 
	#SSL_TXT_RC4_128_EXPORT40_WITH_MD5
 
SSL2_TXT_RC4_128_EXPORT40_WITH_MD5


	)

184 
	#SSL_TXT_RC2_128_CBC_WITH_MD5
 
SSL2_TXT_RC2_128_CBC_WITH_MD5


	)

185 
	#SSL_TXT_RC2_128_CBC_EXPORT40_WITH_MD5
 
SSL2_TXT_RC2_128_CBC_EXPORT40_WITH_MD5


	)

186 
	#SSL_TXT_IDEA_128_CBC_WITH_MD5
 
SSL2_TXT_IDEA_128_CBC_WITH_MD5


	)

187 
	#SSL_TXT_DES_64_CBC_WITH_MD5
 
SSL2_TXT_DES_64_CBC_WITH_MD5


	)

188 
	#SSL_TXT_DES_64_CBC_WITH_SHA
 
SSL2_TXT_DES_64_CBC_WITH_SHA


	)

189 
	#SSL_TXT_DES_192_EDE3_CBC_WITH_MD5
 
SSL2_TXT_DES_192_EDE3_CBC_WITH_MD5


	)

190 
	#SSL_TXT_DES_192_EDE3_CBC_WITH_SHA
 
SSL2_TXT_DES_192_EDE3_CBC_WITH_SHA


	)

195 
	#SSL_TXT_KRB5_DES_64_CBC_SHA
 
SSL3_TXT_KRB5_DES_64_CBC_SHA


	)

196 
	#SSL_TXT_KRB5_DES_192_CBC3_SHA
 
SSL3_TXT_KRB5_DES_192_CBC3_SHA


	)

197 
	#SSL_TXT_KRB5_RC4_128_SHA
 
SSL3_TXT_KRB5_RC4_128_SHA


	)

198 
	#SSL_TXT_KRB5_IDEA_128_CBC_SHA
 
SSL3_TXT_KRB5_IDEA_128_CBC_SHA


	)

199 
	#SSL_TXT_KRB5_DES_64_CBC_MD5
 
SSL3_TXT_KRB5_DES_64_CBC_MD5


	)

200 
	#SSL_TXT_KRB5_DES_192_CBC3_MD5
 
SSL3_TXT_KRB5_DES_192_CBC3_MD5


	)

201 
	#SSL_TXT_KRB5_RC4_128_MD5
 
SSL3_TXT_KRB5_RC4_128_MD5


	)

202 
	#SSL_TXT_KRB5_IDEA_128_CBC_MD5
 
SSL3_TXT_KRB5_IDEA_128_CBC_MD5


	)

204 
	#SSL_TXT_KRB5_DES_40_CBC_SHA
 
SSL3_TXT_KRB5_DES_40_CBC_SHA


	)

205 
	#SSL_TXT_KRB5_RC2_40_CBC_SHA
 
SSL3_TXT_KRB5_RC2_40_CBC_SHA


	)

206 
	#SSL_TXT_KRB5_RC4_40_SHA
 
SSL3_TXT_KRB5_RC4_40_SHA


	)

207 
	#SSL_TXT_KRB5_DES_40_CBC_MD5
 
SSL3_TXT_KRB5_DES_40_CBC_MD5


	)

208 
	#SSL_TXT_KRB5_RC2_40_CBC_MD5
 
SSL3_TXT_KRB5_RC2_40_CBC_MD5


	)

209 
	#SSL_TXT_KRB5_RC4_40_MD5
 
SSL3_TXT_KRB5_RC4_40_MD5


	)

211 
	#SSL_TXT_KRB5_DES_40_CBC_SHA
 
SSL3_TXT_KRB5_DES_40_CBC_SHA


	)

212 
	#SSL_TXT_KRB5_DES_40_CBC_MD5
 
SSL3_TXT_KRB5_DES_40_CBC_MD5


	)

213 
	#SSL_TXT_KRB5_DES_64_CBC_SHA
 
SSL3_TXT_KRB5_DES_64_CBC_SHA


	)

214 
	#SSL_TXT_KRB5_DES_64_CBC_MD5
 
SSL3_TXT_KRB5_DES_64_CBC_MD5


	)

215 
	#SSL_TXT_KRB5_DES_192_CBC3_SHA
 
SSL3_TXT_KRB5_DES_192_CBC3_SHA


	)

216 
	#SSL_TXT_KRB5_DES_192_CBC3_MD5
 
SSL3_TXT_KRB5_DES_192_CBC3_MD5


	)

217 
	#SSL_MAX_KRB5_PRINCIPAL_LENGTH
 256

	)

219 
	#SSL_MAX_SSL_SESSION_ID_LENGTH
 32

	)

220 
	#SSL_MAX_SID_CTX_LENGTH
 32

	)

222 
	#SSL_MIN_RSA_MODULUS_LENGTH_IN_BYTES
 (512/8)

	)

223 
	#SSL_MAX_KEY_ARG_LENGTH
 8

	)

224 
	#SSL_MAX_MASTER_KEY_LENGTH
 48

	)

228 
	#SSL_TXT_EXP40
 "EXPORT40"

	)

229 
	#SSL_TXT_EXP56
 "EXPORT56"

	)

230 
	#SSL_TXT_LOW
 "LOW"

	)

231 
	#SSL_TXT_MEDIUM
 "MEDIUM"

	)

232 
	#SSL_TXT_HIGH
 "HIGH"

	)

233 
	#SSL_TXT_FIPS
 "FIPS"

	)

235 
	#SSL_TXT_kFZA
 "kFZA"

	)

236 
	#SSL_TXT_aFZA
 "aFZA"

	)

237 
	#SSL_TXT_eFZA
 "eFZA"

	)

238 
	#SSL_TXT_FZA
 "FZA"

	)

240 
	#SSL_TXT_aNULL
 "aNULL"

	)

241 
	#SSL_TXT_eNULL
 "eNULL"

	)

242 
	#SSL_TXT_NULL
 "NULL"

	)

244 
	#SSL_TXT_kRSA
 "kRSA"

	)

245 
	#SSL_TXT_kDHr
 "kDHr"

	)

246 
	#SSL_TXT_kDHd
 "kDHd"

	)

247 
	#SSL_TXT_kDH
 "kDH"

	)

248 
	#SSL_TXT_kEDH
 "kEDH"

	)

249 
	#SSL_TXT_kDHE
 "kDHE"

	)

250 
	#SSL_TXT_kKRB5
 "kKRB5"

	)

251 
	#SSL_TXT_kECDHr
 "kECDHr"

	)

252 
	#SSL_TXT_kECDHe
 "kECDHe"

	)

253 
	#SSL_TXT_kECDH
 "kECDH"

	)

254 
	#SSL_TXT_kEECDH
 "kEECDH"

	)

255 
	#SSL_TXT_kECDHE
 "kECDHE"

	)

256 
	#SSL_TXT_kPSK
 "kPSK"

	)

257 
	#SSL_TXT_kGOST
 "kGOST"

	)

258 
	#SSL_TXT_kSRP
 "kSRP"

	)

260 
	#SSL_TXT_aRSA
 "aRSA"

	)

261 
	#SSL_TXT_aDSS
 "aDSS"

	)

262 
	#SSL_TXT_aDH
 "aDH"

	)

263 
	#SSL_TXT_aECDH
 "aECDH"

	)

264 
	#SSL_TXT_aKRB5
 "aKRB5"

	)

265 
	#SSL_TXT_aECDSA
 "aECDSA"

	)

266 
	#SSL_TXT_aPSK
 "aPSK"

	)

267 
	#SSL_TXT_aGOST94
 "aGOST94"

	)

268 
	#SSL_TXT_aGOST01
 "aGOST01"

	)

269 
	#SSL_TXT_aGOST
 "aGOST"

	)

270 
	#SSL_TXT_aSRP
 "aSRP"

	)

272 
	#SSL_TXT_DSS
 "DSS"

	)

273 
	#SSL_TXT_DH
 "DH"

	)

274 
	#SSL_TXT_EDH
 "EDH"

	)

275 
	#SSL_TXT_DHE
 "DHE"

	)

276 
	#SSL_TXT_ADH
 "ADH"

	)

277 
	#SSL_TXT_RSA
 "RSA"

	)

278 
	#SSL_TXT_ECDH
 "ECDH"

	)

279 
	#SSL_TXT_EECDH
 "EECDH"

	)

280 
	#SSL_TXT_ECDHE
 "ECDHE"

	)

281 
	#SSL_TXT_AECDH
 "AECDH"

	)

282 
	#SSL_TXT_ECDSA
 "ECDSA"

	)

283 
	#SSL_TXT_KRB5
 "KRB5"

	)

284 
	#SSL_TXT_PSK
 "PSK"

	)

285 
	#SSL_TXT_SRP
 "SRP"

	)

287 
	#SSL_TXT_DES
 "DES"

	)

288 
	#SSL_TXT_3DES
 "3DES"

	)

289 
	#SSL_TXT_RC4
 "RC4"

	)

290 
	#SSL_TXT_RC2
 "RC2"

	)

291 
	#SSL_TXT_IDEA
 "IDEA"

	)

292 
	#SSL_TXT_SEED
 "SEED"

	)

293 
	#SSL_TXT_AES128
 "AES128"

	)

294 
	#SSL_TXT_AES256
 "AES256"

	)

295 
	#SSL_TXT_AES
 "AES"

	)

296 
	#SSL_TXT_AES_GCM
 "AESGCM"

	)

297 
	#SSL_TXT_CAMELLIA128
 "CAMELLIA128"

	)

298 
	#SSL_TXT_CAMELLIA256
 "CAMELLIA256"

	)

299 
	#SSL_TXT_CAMELLIA
 "CAMELLIA"

	)

301 
	#SSL_TXT_MD5
 "MD5"

	)

302 
	#SSL_TXT_SHA1
 "SHA1"

	)

303 
	#SSL_TXT_SHA
 "SHA"

	)

304 
	#SSL_TXT_GOST94
 "GOST94"

	)

305 
	#SSL_TXT_GOST89MAC
 "GOST89MAC"

	)

306 
	#SSL_TXT_SHA256
 "SHA256"

	)

307 
	#SSL_TXT_SHA384
 "SHA384"

	)

309 
	#SSL_TXT_SSLV2
 "SSLv2"

	)

310 
	#SSL_TXT_SSLV3
 "SSLv3"

	)

311 
	#SSL_TXT_TLSV1
 "TLSv1"

	)

312 
	#SSL_TXT_TLSV1_1
 "TLSv1.1"

	)

313 
	#SSL_TXT_TLSV1_2
 "TLSv1.2"

	)

315 
	#SSL_TXT_EXP
 "EXP"

	)

316 
	#SSL_TXT_EXPORT
 "EXPORT"

	)

318 
	#SSL_TXT_ALL
 "ALL"

	)

334 
	#SSL_TXT_CMPALL
 "COMPLEMENTOFALL"

	)

335 
	#SSL_TXT_CMPDEF
 "COMPLEMENTOFDEFAULT"

	)

341 
	#SSL_DEFAULT_CIPHER_LIST
 "ALL:!EXPORT:!LOW:!aNULL:!eNULL:!SSLv2"

	)

350 
	#SSL_SENT_SHUTDOWN
 1

	)

351 
	#SSL_RECEIVED_SHUTDOWN
 2

	)

353 #ifdeà
__ılu¥lus


357 #ifdeà 
__ılu¥lus


361 #ià(
defšed
(
OPENSSL_NO_RSA
è|| defšed(
OPENSSL_NO_MD5
)è&& !defšed(
OPENSSL_NO_SSL2
)

362 
	#OPENSSL_NO_SSL2


	)

365 
	#SSL_FILETYPE_ASN1
 
X509_FILETYPE_ASN1


	)

366 
	#SSL_FILETYPE_PEM
 
X509_FILETYPE_PEM


	)

372 
s¦_¡
 *
	ts¦_üock_¡
;

373 
s_£ssiÚ_tick‘_ext_¡
 
	tTLS_SESSION_TICKET_EXT
;

374 
s¦_m‘hod_¡
 
	tSSL_METHOD
;

375 
s¦_ch”_¡
 
	tSSL_CIPHER
;

376 
s¦_£ssiÚ_¡
 
	tSSL_SESSION
;

377 
s_sig®gs_¡
 
	tTLS_SIGALGS
;

378 
s¦_cÚf_ùx_¡
 
	tSSL_CONF_CTX
;

380 
DECLARE_STACK_OF
(
SSL_CIPHER
)

383 
	s¤_´ÙeùiÚ_´ofe_¡
 {

384 cÚ¡ *
Çme
;

385 
id
;

386 } 
	tSRTP_PROTECTION_PROFILE
;

388 
DECLARE_STACK_OF
(
SRTP_PROTECTION_PROFILE
)

390 (*
s_£ssiÚ_tick‘_ext_cb_â
è(
	tSSL
 *
	ts
,

391 cÚ¡ *
	td©a
,

392 
	tËn
, *
	t¬g
);

393 (*
s_£ssiÚ_£ü‘_cb_â
è(
	tSSL
 *
	ts
, *
	t£ü‘
,

394 *
	t£ü‘_Ën
,

395 
	tSTACK_OF
(
	tSSL_CIPHER
è*
	t³”_ch”s
,

396 
	tSSL_CIPHER
 **
	tch”
, *
	t¬g
);

398 #iâdeà
OPENSSL_NO_TLSEXT


402 (*
cu¡om_ext_add_cb
è(
	tSSL
 *
	ts
, 
	text_ty³
,

403 cÚ¡ **
	tout
,

404 
	tsize_t
 *
	tou’
, *
	t®
, *
	tadd_¬g
);

406 (*
cu¡om_ext_ä“_cb
è(
	tSSL
 *
	ts
, 
	text_ty³
,

407 cÚ¡ *
	tout
, *
	tadd_¬g
);

409 (*
cu¡om_ext_·r£_cb
è(
	tSSL
 *
	ts
, 
	text_ty³
,

410 cÚ¡ *
	tš
,

411 
	tsize_t
 
	tšËn
, *
	t®
, *
	t·r£_¬g
);

415 #iâdeà
OPENSSL_NO_SSL_INTERN


418 
	ss¦_ch”_¡
 {

419 
v®id
;

420 cÚ¡ *
Çme
;

421 
id
;

426 
®gÜ™hm_mkey
;

427 
®gÜ™hm_auth
;

428 
®gÜ™hm_’c
;

429 
®gÜ™hm_mac
;

430 
®gÜ™hm_s¦
;

431 
®go_¡»ngth
;

432 
®gÜ™hm2
;

433 
¡»ngth_b™s
;

434 
®g_b™s
;

438 
	ss¦_m‘hod_¡
 {

439 
v”siÚ
;

440 (*
s¦_Ãw
è(
SSL
 *
s
);

441 (*
s¦_ş—r
è(
SSL
 *
s
);

442 (*
s¦_ä“
è(
SSL
 *
s
);

443 (*
s¦_acû±
è(
SSL
 *
s
);

444 (*
s¦_cÚÃù
è(
SSL
 *
s
);

445 (*
s¦_»ad
è(
SSL
 *
s
, *
buf
, 
Ën
);

446 (*
s¦_³ek
è(
SSL
 *
s
, *
buf
, 
Ën
);

447 (*
s¦_wr™e
è(
SSL
 *
s
, cÚ¡ *
buf
, 
Ën
);

448 (*
s¦_shutdown
è(
SSL
 *
s
);

449 (*
s¦_»ÃgÙŸ‹
è(
SSL
 *
s
);

450 (*
s¦_»ÃgÙŸ‹_check
è(
SSL
 *
s
);

451 (*
s¦_g‘_mes§ge
è(
SSL
 *
s
, 
¡1
, 
¡n
, 
mt
, 

452 
max
, *
ok
);

453 (*
s¦_»ad_by‹s
è(
SSL
 *
s
, 
ty³
, *
buf
, 
Ën
,

454 
³ek
);

455 (*
s¦_wr™e_by‹s
è(
SSL
 *
s
, 
ty³
, cÚ¡ *
buf_
, 
Ën
);

456 (*
s¦_di¥©ch_®”t
è(
SSL
 *
s
);

457 (*
s¦_ù¾
è(
SSL
 *
s
, 
cmd
, 
Ïrg
, *
·rg
);

458 (*
s¦_ùx_ù¾
è(
SSL_CTX
 *
ùx
, 
cmd
, 
Ïrg
, *
·rg
);

459 cÚ¡ 
SSL_CIPHER
 *(*
g‘_ch”_by_ch¬
è(cÚ¡ *
±r
);

460 (*
put_ch”_by_ch¬
è(cÚ¡ 
SSL_CIPHER
 *
ch”
, *
±r
);

461 (*
s¦_³ndšg
è(cÚ¡ 
SSL
 *
s
);

462 (*
num_ch”s
) ();

463 cÚ¡ 
SSL_CIPHER
 *(*
g‘_ch”
è(
nch”
);

464 cÚ¡ 
s¦_m‘hod_¡
 *(*
g‘_s¦_m‘hod
è(
v”siÚ
);

465 (*
g‘_timeout
) ();

466 
s¦3_’c_m‘hod
 *
s¦3_’c
;

467 (*
s¦_v”siÚ
) ();

468 (*
s¦_ÿÎback_ù¾
è(
SSL
 *
s
, 
cb_id
, (*
å
) ());

469 (*
s¦_ùx_ÿÎback_ù¾
è(
SSL_CTX
 *
s
, 
cb_id
, (*
å
) ());

498 
	ss¦_£ssiÚ_¡
 {

499 
s¦_v”siÚ
;

502 
key_¬g_Ëngth
;

503 
key_¬g
[
SSL_MAX_KEY_ARG_LENGTH
];

504 
ma¡”_key_Ëngth
;

505 
ma¡”_key
[
SSL_MAX_MASTER_KEY_LENGTH
];

507 
£ssiÚ_id_Ëngth
;

508 
£ssiÚ_id
[
SSL_MAX_SSL_SESSION_ID_LENGTH
];

514 
sid_ùx_Ëngth
;

515 
sid_ùx
[
SSL_MAX_SID_CTX_LENGTH
];

516 #iâdeà
OPENSSL_NO_KRB5


517 
krb5_ş›Á_´šc_Ën
;

518 
krb5_ş›Á_´šc
[
SSL_MAX_KRB5_PRINCIPAL_LENGTH
];

520 #iâdeà
OPENSSL_NO_PSK


521 *
psk_id’t™y_hšt
;

522 *
psk_id’t™y
;

529 
nÙ_»sumabË
;

531 
£ss_û¹_¡
 *
£ss_û¹
;

538 
X509
 *
³”
;

543 
v”ify_»suÉ
;

544 
»ã»nûs
;

545 
timeout
;

546 
time
;

547 
com´ess_m‘h
;

548 cÚ¡ 
SSL_CIPHER
 *
ch”
;

549 
ch”_id
;

551 
STACK_OF
(
SSL_CIPHER
è*
ch”s
;

552 
CRYPTO_EX_DATA
 
ex_d©a
;

557 
s¦_£ssiÚ_¡
 *
´ev
, *
Ãxt
;

558 #iâdeà
OPENSSL_NO_TLSEXT


559 *
£xt_ho¡Çme
;

560 #iâdeà
OPENSSL_NO_EC


561 
size_t
 
£xt_eıoštfÜm©li¡_Ëngth
;

562 *
£xt_eıoštfÜm©li¡
;

563 
size_t
 
£xt_–lticcurv–i¡_Ëngth
;

564 *
£xt_–lticcurv–i¡
;

567 *
£xt_tick
;

568 
size_t
 
£xt_tickËn
;

569 
£xt_tick_liãtime_hšt
;

571 #iâdeà
OPENSSL_NO_SRP


572 *
¤p_u£ºame
;

578 
	#SSL_OP_MICROSOFT_SESS_ID_BUG
 0x00000001L

	)

579 
	#SSL_OP_NETSCAPE_CHALLENGE_BUG
 0x00000002L

	)

581 
	#SSL_OP_LEGACY_SERVER_CONNECT
 0x00000004L

	)

582 
	#SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG
 0x00000008L

	)

583 
	#SSL_OP_TLSEXT_PADDING
 0x00000010L

	)

584 
	#SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER
 0x00000020L

	)

585 
	#SSL_OP_SAFARI_ECDHE_ECDSA_BUG
 0x00000040L

	)

586 
	#SSL_OP_SSLEAY_080_CLIENT_DH_BUG
 0x00000080L

	)

587 
	#SSL_OP_TLS_D5_BUG
 0x00000100L

	)

588 
	#SSL_OP_TLS_BLOCK_PADDING_BUG
 0x00000200L

	)

591 
	#SSL_OP_MSIE_SSLV2_RSA_PADDING
 0x0

	)

593 
	#SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG
 0x0

	)

603 
	#SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS
 0x00000800L

	)

609 
	#SSL_OP_ALL
 0x80000BFFL

	)

612 
	#SSL_OP_NO_QUERY_MTU
 0x00001000L

	)

614 
	#SSL_OP_COOKIE_EXCHANGE
 0x00002000L

	)

616 
	#SSL_OP_NO_TICKET
 0x00004000L

	)

618 
	#SSL_OP_CISCO_ANYCONNECT
 0x00008000L

	)

621 
	#SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION
 0x00010000L

	)

623 
	#SSL_OP_NO_COMPRESSION
 0x00020000L

	)

625 
	#SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION
 0x00040000L

	)

627 
	#SSL_OP_SINGLE_ECDH_USE
 0x00080000L

	)

629 
	#SSL_OP_SINGLE_DH_USE
 0x00100000L

	)

631 
	#SSL_OP_EPHEMERAL_RSA
 0x0

	)

635 
	#SSL_OP_CIPHER_SERVER_PREFERENCE
 0x00400000L

	)

642 
	#SSL_OP_TLS_ROLLBACK_BUG
 0x00800000L

	)

644 
	#SSL_OP_NO_SSLv2
 0x01000000L

	)

645 
	#SSL_OP_NO_SSLv3
 0x02000000L

	)

646 
	#SSL_OP_NO_TLSv1
 0x04000000L

	)

647 
	#SSL_OP_NO_TLSv1_2
 0x08000000L

	)

648 
	#SSL_OP_NO_TLSv1_1
 0x10000000L

	)

650 
	#SSL_OP_NO_DTLSv1
 0x04000000L

	)

651 
	#SSL_OP_NO_DTLSv1_2
 0x08000000L

	)

653 
	#SSL_OP_NO_SSL_MASK
 (
SSL_OP_NO_SSLv2
|
SSL_OP_NO_SSLv3
|\

654 
SSL_OP_NO_TLSv1
|
SSL_OP_NO_TLSv1_1
|
SSL_OP_NO_TLSv1_2
)

	)

664 
	#SSL_OP_PKCS1_CHECK_1
 0x0

	)

665 
	#SSL_OP_PKCS1_CHECK_2
 0x0

	)

667 
	#SSL_OP_NETSCAPE_CA_DN_BUG
 0x20000000L

	)

668 
	#SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG
 0x40000000L

	)

674 
	#SSL_OP_CRYPTOPRO_TLSEXT_BUG
 0x80000000L

	)

680 
	#SSL_MODE_ENABLE_PARTIAL_WRITE
 0x00000001L

	)

687 
	#SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER
 0x00000002L

	)

691 
	#SSL_MODE_AUTO_RETRY
 0x00000004L

	)

693 
	#SSL_MODE_NO_AUTO_CHAIN
 0x00000008L

	)

699 
	#SSL_MODE_RELEASE_BUFFERS
 0x00000010L

	)

705 
	#SSL_MODE_SEND_CLIENTHELLO_TIME
 0x00000020L

	)

706 
	#SSL_MODE_SEND_SERVERHELLO_TIME
 0x00000040L

	)

715 
	#SSL_MODE_SEND_FALLBACK_SCSV
 0x00000080L

	)

722 
	#SSL_CERT_FLAG_TLS_STRICT
 0x00000001L

	)

725 
	#SSL_CERT_FLAG_SUITEB_128_LOS_ONLY
 0x10000

	)

727 
	#SSL_CERT_FLAG_SUITEB_192_LOS
 0x20000

	)

729 
	#SSL_CERT_FLAG_SUITEB_128_LOS
 0x30000

	)

732 
	#SSL_CERT_FLAG_BROKEN_PROTOCOL
 0x10000000

	)

736 
	#SSL_BUILD_CHAIN_FLAG_UNTRUSTED
 0x1

	)

738 
	#SSL_BUILD_CHAIN_FLAG_NO_ROOT
 0x2

	)

740 
	#SSL_BUILD_CHAIN_FLAG_CHECK
 0x4

	)

742 
	#SSL_BUILD_CHAIN_FLAG_IGNORE_ERROR
 0x8

	)

744 
	#SSL_BUILD_CHAIN_FLAG_CLEAR_ERROR
 0x10

	)

748 
	#CERT_PKEY_VALID
 0x1

	)

750 
	#CERT_PKEY_SIGN
 0x2

	)

752 
	#CERT_PKEY_EE_SIGNATURE
 0x10

	)

754 
	#CERT_PKEY_CA_SIGNATURE
 0x20

	)

756 
	#CERT_PKEY_EE_PARAM
 0x40

	)

758 
	#CERT_PKEY_CA_PARAM
 0x80

	)

760 
	#CERT_PKEY_EXPLICIT_SIGN
 0x100

	)

762 
	#CERT_PKEY_ISSUER_NAME
 0x200

	)

764 
	#CERT_PKEY_CERT_TYPE
 0x400

	)

766 
	#CERT_PKEY_SUITEB
 0x800

	)

768 
	#SSL_CONF_FLAG_CMDLINE
 0x1

	)

769 
	#SSL_CONF_FLAG_FILE
 0x2

	)

770 
	#SSL_CONF_FLAG_CLIENT
 0x4

	)

771 
	#SSL_CONF_FLAG_SERVER
 0x8

	)

772 
	#SSL_CONF_FLAG_SHOW_ERRORS
 0x10

	)

773 
	#SSL_CONF_FLAG_CERTIFICATE
 0x20

	)

775 
	#SSL_CONF_TYPE_UNKNOWN
 0x0

	)

776 
	#SSL_CONF_TYPE_STRING
 0x1

	)

777 
	#SSL_CONF_TYPE_FILE
 0x2

	)

778 
	#SSL_CONF_TYPE_DIR
 0x3

	)

785 
	#SSL_CTX_£t_İtiÚs
(
ùx
,
İ
) \

786 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_OPTIONS
,(
İ
),
NULL
)

	)

787 
	#SSL_CTX_ş—r_İtiÚs
(
ùx
,
İ
) \

788 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_CLEAR_OPTIONS
,(
İ
),
NULL
)

	)

789 
	#SSL_CTX_g‘_İtiÚs
(
ùx
) \

790 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_OPTIONS
,0,
NULL
)

	)

791 
	#SSL_£t_İtiÚs
(
s¦
,
İ
) \

792 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_OPTIONS
,(
İ
),
NULL
)

	)

793 
	#SSL_ş—r_İtiÚs
(
s¦
,
İ
) \

794 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_CLEAR_OPTIONS
,(
İ
),
NULL
)

	)

795 
	#SSL_g‘_İtiÚs
(
s¦
) \

796 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_OPTIONS
,0,
NULL
)

	)

798 
	#SSL_CTX_£t_mode
(
ùx
,
İ
) \

799 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_MODE
,(
İ
),
NULL
)

	)

800 
	#SSL_CTX_ş—r_mode
(
ùx
,
İ
) \

801 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_CLEAR_MODE
,(
İ
),
NULL
)

	)

802 
	#SSL_CTX_g‘_mode
(
ùx
) \

803 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_MODE
,0,
NULL
)

	)

804 
	#SSL_ş—r_mode
(
s¦
,
İ
) \

805 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_CLEAR_MODE
,(
İ
),
NULL
)

	)

806 
	#SSL_£t_mode
(
s¦
,
İ
) \

807 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_MODE
,(
İ
),
NULL
)

	)

808 
	#SSL_g‘_mode
(
s¦
) \

809 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_MODE
,0,
NULL
)

	)

810 
	#SSL_£t_mtu
(
s¦
, 
mtu
) \

811 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_SET_MTU
,(
mtu
),
NULL
)

	)

812 
	#DTLS_£t_lšk_mtu
(
s¦
, 
mtu
) \

813 
	`SSL_ù¾
((
s¦
),
DTLS_CTRL_SET_LINK_MTU
,(
mtu
),
NULL
)

	)

814 
	#DTLS_g‘_lšk_mš_mtu
(
s¦
) \

815 
	`SSL_ù¾
((
s¦
),
DTLS_CTRL_GET_LINK_MIN_MTU
,0,
NULL
)

	)

817 
	#SSL_g‘_£cu»_»ÃgÙŸtiÚ_suµÜt
(
s¦
) \

818 
	`SSL_ù¾
((
s¦
), 
SSL_CTRL_GET_RI_SUPPORT
, 0, 
NULL
)

	)

820 #iâdeà
OPENSSL_NO_HEARTBEATS


821 
	#SSL_h—¹b—t
(
s¦
) \

822 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_TLS_EXT_SEND_HEARTBEAT
,0,
NULL
)

	)

825 
	#SSL_CTX_£t_û¹_æags
(
ùx
,
İ
) \

826 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_CERT_FLAGS
,(
İ
),
NULL
)

	)

827 
	#SSL_£t_û¹_æags
(
s
,
İ
) \

828 
	`SSL_ù¾
((
s
),
SSL_CTRL_CERT_FLAGS
,(
İ
),
NULL
)

	)

829 
	#SSL_CTX_ş—r_û¹_æags
(
ùx
,
İ
) \

830 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_CLEAR_CERT_FLAGS
,(
İ
),
NULL
)

	)

831 
	#SSL_ş—r_û¹_æags
(
s
,
İ
) \

832 
	`SSL_ù¾
((
s
),
SSL_CTRL_CLEAR_CERT_FLAGS
,(
İ
),
NULL
)

	)

834 
SSL_CTX_£t_msg_ÿÎback
(
SSL_CTX
 *
ùx
,

835 (*
cb
è(
wr™e_p
, 
v”siÚ
,

836 
cÚ‹Á_ty³
, cÚ¡ *
buf
,

837 
size_t
 
Ën
, 
SSL
 *
s¦
, *
¬g
));

838 
SSL_£t_msg_ÿÎback
(
SSL
 *
s¦
,

839 (*
cb
è(
wr™e_p
, 
v”siÚ
,

840 
cÚ‹Á_ty³
, cÚ¡ *
buf
,

841 
size_t
 
Ën
, 
SSL
 *
s¦
, *
¬g
));

842 
	#SSL_CTX_£t_msg_ÿÎback_¬g
(
ùx
, 
¬g
è
	`SSL_CTX_ù¾
((ùx), 
SSL_CTRL_SET_MSG_CALLBACK_ARG
, 0, (¬g))

	)

843 
	#SSL_£t_msg_ÿÎback_¬g
(
s¦
, 
¬g
è
	`SSL_ù¾
((s¦), 
SSL_CTRL_SET_MSG_CALLBACK_ARG
, 0, (¬g))

	)

845 #iâdeà
OPENSSL_NO_SRP


847 #iâdeà
OPENSSL_NO_SSL_INTERN


849 
	s¤p_ùx_¡
 {

851 *
SRP_cb_¬g
;

853 (*
TLS_ext_¤p_u£ºame_ÿÎback
è(
SSL
 *, *, *);

855 (*
SRP_v”ify_·¿m_ÿÎback
è(
SSL
 *, *);

857 *(*
SRP_give_¤p_ş›Á_pwd_ÿÎback
è(
SSL
 *, *);

858 *
logš
;

859 
BIGNUM
 *
N
, *
g
, *
s
, *
B
, *
A
;

860 
BIGNUM
 *
a
, *
b
, *
v
;

861 *
šfo
;

862 
¡»ngth
;

863 
¤p_Mask
;

864 } 
	tSRP_CTX
;

869 
SSL_SRP_CTX_š™
(
SSL
 *
s
);

870 
SSL_CTX_SRP_CTX_š™
(
SSL_CTX
 *
ùx
);

871 
SSL_SRP_CTX_ä“
(
SSL
 *
ùx
);

872 
SSL_CTX_SRP_CTX_ä“
(
SSL_CTX
 *
ùx
);

873 
SSL_¤p_£rv”_·¿m_w™h_u£ºame
(
SSL
 *
s
, *
ad
);

874 
SRP_g’”©e_£rv”_ma¡”_£ü‘
(
SSL
 *
s
, *
ma¡”_key
);

875 
SRP_C®c_A_·¿m
(
SSL
 *
s
);

876 
SRP_g’”©e_ş›Á_ma¡”_£ü‘
(
SSL
 *
s
, *
ma¡”_key
);

880 #ià
defšed
(
OPENSSL_SYS_MSDOS
è&& !defšed(
OPENSSL_SYS_WIN32
)

881 
	#SSL_MAX_CERT_LIST_DEFAULT
 1024*30

	)

884 
	#SSL_MAX_CERT_LIST_DEFAULT
 1024*100

	)

888 
	#SSL_SESSION_CACHE_MAX_SIZE_DEFAULT
 (1024*20)

	)

905 (*
GEN_SESSION_CB
è(cÚ¡ 
	tSSL
 *
	ts¦
, *
	tid
,

906 *
	tid_Ën
);

908 
s¦_comp_¡
 
	tSSL_COMP
;

910 #iâdeà
OPENSSL_NO_SSL_INTERN


912 
	ss¦_comp_¡
 {

913 
id
;

914 cÚ¡ *
Çme
;

915 #iâdeà
OPENSSL_NO_COMP


916 
COMP_METHOD
 *
m‘hod
;

918 *
m‘hod
;

922 
DECLARE_STACK_OF
(
SSL_COMP
)

923 
DECLARE_LHASH_OF
(
SSL_SESSION
);

925 
	ss¦_ùx_¡
 {

926 cÚ¡ 
SSL_METHOD
 *
m‘hod
;

927 
STACK_OF
(
SSL_CIPHER
è*
ch”_li¡
;

929 
STACK_OF
(
SSL_CIPHER
è*
ch”_li¡_by_id
;

930 
x509_¡Üe_¡
 *
û¹_¡Üe
;

931 
LHASH_OF
(
SSL_SESSION
è*
£ssiÚs
;

936 
£ssiÚ_ÿche_size
;

937 
s¦_£ssiÚ_¡
 *
£ssiÚ_ÿche_h—d
;

938 
s¦_£ssiÚ_¡
 *
£ssiÚ_ÿche_
;

944 
£ssiÚ_ÿche_mode
;

950 
£ssiÚ_timeout
;

960 (*
Ãw_£ssiÚ_cb
è(
s¦_¡
 *
s¦
, 
SSL_SESSION
 *
£ss
);

961 (*
»move_£ssiÚ_cb
è(
s¦_ùx_¡
 *
ùx
, 
SSL_SESSION
 *
£ss
);

962 
SSL_SESSION
 *(*
g‘_£ssiÚ_cb
è(
s¦_¡
 *
s¦
,

963 *
d©a
, 
Ën
, *
cİy
);

965 
£ss_cÚÃù
;

966 
£ss_cÚÃù_»ÃgÙŸ‹
;

967 
£ss_cÚÃù_good
;

968 
£ss_acû±
;

969 
£ss_acû±_»ÃgÙŸ‹
;

970 
£ss_acû±_good
;

971 
£ss_miss
;

972 
£ss_timeout
;

973 
£ss_ÿche_fuÎ
;

974 
£ss_h™
;

975 
£ss_cb_h™
;

980 } 
¡©s
;

982 
»ã»nûs
;

985 (*
­p_v”ify_ÿÎback
è(
X509_STORE_CTX
 *, *);

986 *
­p_v”ify_¬g
;

993 
³m_·sswÜd_cb
 *
deçuÉ_·sswd_ÿÎback
;

996 *
deçuÉ_·sswd_ÿÎback_u£rd©a
;

999 (*
ş›Á_û¹_cb
è(
SSL
 *
s¦
, 
X509
 **
x509
, 
EVP_PKEY
 **
pkey
);

1002 (*
­p_g’_cook›_cb
è(
SSL
 *
s¦
, *
cook›
,

1003 *
cook›_Ën
);

1006 (*
­p_v”ify_cook›_cb
è(
SSL
 *
s¦
, *
cook›
,

1007 
cook›_Ën
);

1009 
CRYPTO_EX_DATA
 
ex_d©a
;

1011 cÚ¡ 
EVP_MD
 *
r§_md5
;

1012 cÚ¡ 
EVP_MD
 *
md5
;

1013 cÚ¡ 
EVP_MD
 *
sha1
;

1015 
STACK_OF
(
X509
è*
exŒa_û¹s
;

1016 
STACK_OF
(
SSL_COMP
è*
comp_m‘hods
;

1021 (*
šfo_ÿÎback
è(cÚ¡ 
SSL
 *
s¦
, 
ty³
, 
v®
);

1024 
STACK_OF
(
X509_NAME
è*
ş›Á_CA
;

1031 
İtiÚs
;

1032 
mode
;

1033 
max_û¹_li¡
;

1035 
û¹_¡
 *
û¹
;

1036 
»ad_ah—d
;

1039 (*
msg_ÿÎback
è(
wr™e_p
, 
v”siÚ
, 
cÚ‹Á_ty³
,

1040 cÚ¡ *
buf
, 
size_t
 
Ën
, 
SSL
 *
s¦
, *
¬g
);

1041 *
msg_ÿÎback_¬g
;

1043 
v”ify_mode
;

1044 
sid_ùx_Ëngth
;

1045 
sid_ùx
[
SSL_MAX_SID_CTX_LENGTH
];

1047 (*
deçuÉ_v”ify_ÿÎback
è(
ok
, 
X509_STORE_CTX
 *
ùx
);

1050 
GEN_SESSION_CB
 
g’”©e_£ssiÚ_id
;

1052 
X509_VERIFY_PARAM
 *
·¿m
;

1055 
pu½o£
;

1056 
Œu¡
;

1059 
qu›t_shutdown
;

1065 
max_£nd_äagm’t
;

1067 #iâdeà
OPENSSL_NO_ENGINE


1071 
ENGINE
 *
ş›Á_û¹_’gše
;

1074 #iâdeà
OPENSSL_NO_TLSEXT


1076 (*
£xt_£rv”Çme_ÿÎback
è(
SSL
 *, *, *);

1077 *
£xt_£rv”Çme_¬g
;

1079 
£xt_tick_key_Çme
[16];

1080 
£xt_tick_hmac_key
[16];

1081 
£xt_tick_«s_key
[16];

1083 (*
£xt_tick‘_key_cb
è(
SSL
 *
s¦
,

1084 *
Çme
, *
iv
,

1085 
EVP_CIPHER_CTX
 *
eùx
,

1086 
HMAC_CTX
 *
hùx
, 
’c
);

1090 (*
£xt_¡©us_cb
è(
SSL
 *
s¦
, *
¬g
);

1091 *
£xt_¡©us_¬g
;

1094 (*
£xt_İaque_´f_šput_ÿÎback
è(
SSL
 *, *
³”šput
,

1095 
size_t
 
Ën
, *
¬g
);

1096 *
£xt_İaque_´f_šput_ÿÎback_¬g
;

1099 #iâdeà
OPENSSL_NO_PSK


1100 *
psk_id’t™y_hšt
;

1101 (*
psk_ş›Á_ÿÎback
è(
SSL
 *
s¦
, cÚ¡ *
hšt
,

1102 *
id’t™y
,

1103 
max_id’t™y_Ën
,

1104 *
psk
,

1105 
max_psk_Ën
);

1106 (*
psk_£rv”_ÿÎback
è(
SSL
 *
s¦
, cÚ¡ *
id’t™y
,

1107 *
psk
,

1108 
max_psk_Ën
);

1111 #iâdeà
OPENSSL_NO_BUF_FREELISTS


1112 
	#SSL_MAX_BUF_FREELIST_LEN_DEFAULT
 32

	)

1113 
ä“li¡_max_Ën
;

1114 
s¦3_buf_ä“li¡_¡
 *
wbuf_ä“li¡
;

1115 
s¦3_buf_ä“li¡_¡
 *
rbuf_ä“li¡
;

1117 #iâdeà
OPENSSL_NO_SRP


1118 
SRP_CTX
 
¤p_ùx
;

1121 #iâdeà
OPENSSL_NO_TLSEXT


1123 #iâdeà
OPENSSL_NO_NEXTPROTONEG


1131 (*
Ãxt_´Ùos_adv”ti£d_cb
è(
SSL
 *
s
, cÚ¡ **
buf
,

1132 *
Ën
, *
¬g
);

1133 *
Ãxt_´Ùos_adv”ti£d_cb_¬g
;

1138 (*
Ãxt_´Ùo_£Ëù_cb
è(
SSL
 *
s
, **
out
,

1139 *
ou’
,

1140 cÚ¡ *
š
,

1141 
šËn
, *
¬g
);

1142 *
Ãxt_´Ùo_£Ëù_cb_¬g
;

1145 
STACK_OF
(
SRTP_PROTECTION_PROFILE
è*
¤_´ofes
;

1162 (*
®²_£Ëù_cb
è(
SSL
 *
s
,

1163 cÚ¡ **
out
,

1164 *
ou’
,

1165 cÚ¡ *
š
,

1166 
šËn
, *
¬g
);

1167 *
®²_£Ëù_cb_¬g
;

1173 *
®²_ş›Á_´Ùo_li¡
;

1174 
®²_ş›Á_´Ùo_li¡_Ën
;

1176 #iâdeà
OPENSSL_NO_EC


1178 
size_t
 
£xt_eıoštfÜm©li¡_Ëngth
;

1179 *
£xt_eıoštfÜm©li¡
;

1180 
size_t
 
£xt_–lticcurv–i¡_Ëngth
;

1181 *
£xt_–lticcurv–i¡
;

1188 
	#SSL_SESS_CACHE_OFF
 0x0000

	)

1189 
	#SSL_SESS_CACHE_CLIENT
 0x0001

	)

1190 
	#SSL_SESS_CACHE_SERVER
 0x0002

	)

1191 
	#SSL_SESS_CACHE_BOTH
 (
SSL_SESS_CACHE_CLIENT
|
SSL_SESS_CACHE_SERVER
)

	)

1192 
	#SSL_SESS_CACHE_NO_AUTO_CLEAR
 0x0080

	)

1194 
	#SSL_SESS_CACHE_NO_INTERNAL_LOOKUP
 0x0100

	)

1195 
	#SSL_SESS_CACHE_NO_INTERNAL_STORE
 0x0200

	)

1196 
	#SSL_SESS_CACHE_NO_INTERNAL
 \

1197 (
SSL_SESS_CACHE_NO_INTERNAL_LOOKUP
|
SSL_SESS_CACHE_NO_INTERNAL_STORE
)

	)

1199 
LHASH_OF
(
SSL_SESSION
è*
SSL_CTX_£ssiÚs
(
SSL_CTX
 *
ùx
);

1200 
	#SSL_CTX_£ss_numb”
(
ùx
) \

1201 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_NUMBER
,0,
NULL
)

	)

1202 
	#SSL_CTX_£ss_cÚÃù
(
ùx
) \

1203 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_CONNECT
,0,
NULL
)

	)

1204 
	#SSL_CTX_£ss_cÚÃù_good
(
ùx
) \

1205 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_CONNECT_GOOD
,0,
NULL
)

	)

1206 
	#SSL_CTX_£ss_cÚÃù_»ÃgÙŸ‹
(
ùx
) \

1207 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_CONNECT_RENEGOTIATE
,0,
NULL
)

	)

1208 
	#SSL_CTX_£ss_acû±
(
ùx
) \

1209 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_ACCEPT
,0,
NULL
)

	)

1210 
	#SSL_CTX_£ss_acû±_»ÃgÙŸ‹
(
ùx
) \

1211 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_ACCEPT_RENEGOTIATE
,0,
NULL
)

	)

1212 
	#SSL_CTX_£ss_acû±_good
(
ùx
) \

1213 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_ACCEPT_GOOD
,0,
NULL
)

	)

1214 
	#SSL_CTX_£ss_h™s
(
ùx
) \

1215 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_HIT
,0,
NULL
)

	)

1216 
	#SSL_CTX_£ss_cb_h™s
(
ùx
) \

1217 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_CB_HIT
,0,
NULL
)

	)

1218 
	#SSL_CTX_£ss_mis£s
(
ùx
) \

1219 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_MISSES
,0,
NULL
)

	)

1220 
	#SSL_CTX_£ss_timeouts
(
ùx
) \

1221 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_TIMEOUTS
,0,
NULL
)

	)

1222 
	#SSL_CTX_£ss_ÿche_fuÎ
(
ùx
) \

1223 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SESS_CACHE_FULL
,0,
NULL
)

	)

1225 
SSL_CTX_£ss_£t_Ãw_cb
(
SSL_CTX
 *
ùx
,

1226 (*
Ãw_£ssiÚ_cb
è(
s¦_¡
 *
s¦
,

1227 
SSL_SESSION
 *
£ss
));

1228 (*
SSL_CTX_£ss_g‘_Ãw_cb
(
SSL_CTX
 *
ùx
)è(
s¦_¡
 *
s¦
,

1229 
SSL_SESSION
 *
£ss
);

1230 
SSL_CTX_£ss_£t_»move_cb
(
SSL_CTX
 *
ùx
,

1231 (*
»move_£ssiÚ_cb
è(
s¦_ùx_¡


1232 *
ùx
,

1233 
SSL_SESSION


1234 *
£ss
));

1235 (*
SSL_CTX_£ss_g‘_»move_cb
(
SSL_CTX
 *
ùx
)è(
s¦_ùx_¡
 *ctx,

1236 
SSL_SESSION
 *
£ss
);

1237 
SSL_CTX_£ss_£t_g‘_cb
(
SSL_CTX
 *
ùx
,

1238 
SSL_SESSION
 *(*
g‘_£ssiÚ_cb
è(
s¦_¡


1239 *
s¦
,

1241 *
d©a
, 
Ën
,

1242 *
cİy
));

1243 
SSL_SESSION
 *(*
SSL_CTX_£ss_g‘_g‘_cb
(
SSL_CTX
 *
ùx
)è(
s¦_¡
 *
s¦
,

1244 *
D©a
,

1245 
Ën
, *
cİy
);

1246 
SSL_CTX_£t_šfo_ÿÎback
(
SSL_CTX
 *
ùx
,

1247 (*
cb
è(cÚ¡ 
SSL
 *
s¦
, 
ty³
,

1248 
v®
));

1249 (*
SSL_CTX_g‘_šfo_ÿÎback
(
SSL_CTX
 *
ùx
)è(cÚ¡ 
SSL
 *
s¦
, 
ty³
,

1250 
v®
);

1251 
SSL_CTX_£t_ş›Á_û¹_cb
(
SSL_CTX
 *
ùx
,

1252 (*
ş›Á_û¹_cb
è(
SSL
 *
s¦
, 
X509
 **
x509
,

1253 
EVP_PKEY
 **
pkey
));

1254 (*
SSL_CTX_g‘_ş›Á_û¹_cb
(
SSL_CTX
 *
ùx
)è(
SSL
 *
s¦
, 
X509
 **
x509
,

1255 
EVP_PKEY
 **
pkey
);

1256 #iâdeà
OPENSSL_NO_ENGINE


1257 
SSL_CTX_£t_ş›Á_û¹_’gše
(
SSL_CTX
 *
ùx
, 
ENGINE
 *
e
);

1259 
SSL_CTX_£t_cook›_g’”©e_cb
(
SSL_CTX
 *
ùx
,

1260 (*
­p_g’_cook›_cb
è(
SSL
 *
s¦
,

1262 *
cook›
,

1264 *
cook›_Ën
));

1265 
SSL_CTX_£t_cook›_v”ify_cb
(
SSL_CTX
 *
ùx
,

1266 (*
­p_v”ify_cook›_cb
è(
SSL
 *
s¦
,

1268 *
cook›
,

1270 
cook›_Ën
));

1271 #iâdeà
OPENSSL_NO_NEXTPROTONEG


1272 
SSL_CTX_£t_Ãxt_´Ùos_adv”ti£d_cb
(
SSL_CTX
 *
s
,

1273 (*
cb
è(
SSL
 *
s¦
,

1275 **
out
,

1276 *
ou’
,

1277 *
¬g
), *arg);

1278 
SSL_CTX_£t_Ãxt_´Ùo_£Ëù_cb
(
SSL_CTX
 *
s
,

1279 (*
cb
è(
SSL
 *
s¦
,

1280 **
out
,

1281 *
ou’
,

1282 cÚ¡ *
š
,

1283 
šËn
,

1284 *
¬g
), *arg);

1285 
SSL_g‘0_Ãxt_´Ùo_ÃgÙŸ‹d
(cÚ¡ 
SSL
 *
s
, cÚ¡ **
d©a
,

1286 *
Ën
);

1289 #iâdeà
OPENSSL_NO_TLSEXT


1290 
SSL_£Ëù_Ãxt_´Ùo
(**
out
, *
ou’
,

1291 cÚ¡ *
š
, 
šËn
,

1292 cÚ¡ *
ş›Á
,

1293 
ş›Á_Ën
);

1296 
	#OPENSSL_NPN_UNSUPPORTED
 0

	)

1297 
	#OPENSSL_NPN_NEGOTIATED
 1

	)

1298 
	#OPENSSL_NPN_NO_OVERLAP
 2

	)

1300 
SSL_CTX_£t_®²_´Ùos
(
SSL_CTX
 *
ùx
, cÚ¡ *
´Ùos
,

1301 
´Ùos_Ën
);

1302 
SSL_£t_®²_´Ùos
(
SSL
 *
s¦
, cÚ¡ *
´Ùos
,

1303 
´Ùos_Ën
);

1304 
SSL_CTX_£t_®²_£Ëù_cb
(
SSL_CTX
 *
ùx
,

1305 (*
cb
è(
SSL
 *
s¦
,

1306 cÚ¡ **
out
,

1307 *
ou’
,

1308 cÚ¡ *
š
,

1309 
šËn
,

1310 *
¬g
), *arg);

1311 
SSL_g‘0_®²_£Ëùed
(cÚ¡ 
SSL
 *
s¦
, cÚ¡ **
d©a
,

1312 *
Ën
);

1314 #iâdeà
OPENSSL_NO_PSK


1319 
	#PSK_MAX_IDENTITY_LEN
 128

	)

1320 
	#PSK_MAX_PSK_LEN
 256

	)

1321 
SSL_CTX_£t_psk_ş›Á_ÿÎback
(
SSL_CTX
 *
ùx
,

1322 (*
psk_ş›Á_ÿÎback
è(
SSL


1323 *
s¦
,

1326 *
hšt
,

1328 *
id’t™y
,

1331 
max_id’t™y_Ën
,

1334 *
psk
,

1337 
max_psk_Ën
));

1338 
SSL_£t_psk_ş›Á_ÿÎback
(
SSL
 *
s¦
,

1339 (*
psk_ş›Á_ÿÎback
è(
SSL


1340 *
s¦
,

1343 *
hšt
,

1345 *
id’t™y
,

1348 
max_id’t™y_Ën
,

1351 *
psk
,

1354 
max_psk_Ën
));

1355 
SSL_CTX_£t_psk_£rv”_ÿÎback
(
SSL_CTX
 *
ùx
,

1356 (*
psk_£rv”_ÿÎback
è(
SSL


1357 *
s¦
,

1360 *
id’t™y
,

1363 *
psk
,

1366 
max_psk_Ën
));

1367 
SSL_£t_psk_£rv”_ÿÎback
(
SSL
 *
s¦
,

1368 (*
psk_£rv”_ÿÎback
è(
SSL


1369 *
s¦
,

1372 *
id’t™y
,

1375 *
psk
,

1378 
max_psk_Ën
));

1379 
SSL_CTX_u£_psk_id’t™y_hšt
(
SSL_CTX
 *
ùx
, cÚ¡ *
id’t™y_hšt
);

1380 
SSL_u£_psk_id’t™y_hšt
(
SSL
 *
s
, cÚ¡ *
id’t™y_hšt
);

1381 cÚ¡ *
SSL_g‘_psk_id’t™y_hšt
(cÚ¡ 
SSL
 *
s
);

1382 cÚ¡ *
SSL_g‘_psk_id’t™y
(cÚ¡ 
SSL
 *
s
);

1385 #iâdeà
OPENSSL_NO_TLSEXT


1388 
SSL_CTX_add_ş›Á_cu¡om_ext
(
SSL_CTX
 *
ùx
, 
ext_ty³
,

1389 
cu¡om_ext_add_cb
 
add_cb
,

1390 
cu¡om_ext_ä“_cb
 
ä“_cb
,

1391 *
add_¬g
,

1392 
cu¡om_ext_·r£_cb
 
·r£_cb
,

1393 *
·r£_¬g
);

1395 
SSL_CTX_add_£rv”_cu¡om_ext
(
SSL_CTX
 *
ùx
, 
ext_ty³
,

1396 
cu¡om_ext_add_cb
 
add_cb
,

1397 
cu¡om_ext_ä“_cb
 
ä“_cb
,

1398 *
add_¬g
,

1399 
cu¡om_ext_·r£_cb
 
·r£_cb
,

1400 *
·r£_¬g
);

1402 
SSL_ex‹nsiÚ_suµÜ‹d
(
ext_ty³
);

1406 
	#SSL_NOTHING
 1

	)

1407 
	#SSL_WRITING
 2

	)

1408 
	#SSL_READING
 3

	)

1409 
	#SSL_X509_LOOKUP
 4

	)

1412 
	#SSL_wªt_nÙhšg
(
s
è(
	`SSL_wªt
(sè=ğ
SSL_NOTHING
)

	)

1413 
	#SSL_wªt_»ad
(
s
è(
	`SSL_wªt
(sè=ğ
SSL_READING
)

	)

1414 
	#SSL_wªt_wr™e
(
s
è(
	`SSL_wªt
(sè=ğ
SSL_WRITING
)

	)

1415 
	#SSL_wªt_x509_lookup
(
s
è(
	`SSL_wªt
(sè=ğ
SSL_X509_LOOKUP
)

	)

1417 
	#SSL_MAC_FLAG_READ_MAC_STREAM
 1

	)

1418 
	#SSL_MAC_FLAG_WRITE_MAC_STREAM
 2

	)

1420 #iâdeà
OPENSSL_NO_SSL_INTERN


1422 
	ss¦_¡
 {

1427 
v”siÚ
;

1429 
ty³
;

1431 cÚ¡ 
SSL_METHOD
 *
m‘hod
;

1436 #iâdeà
OPENSSL_NO_BIO


1438 
BIO
 *
rbio
;

1440 
BIO
 *
wbio
;

1442 
BIO
 *
bbio
;

1445 *
rbio
;

1447 *
wbio
;

1448 *
bbio
;

1455 
rw¡©e
;

1457 
š_hªdshake
;

1458 (*
hªdshake_func
è(
SSL
 *);

1467 
£rv”
;

1474 
Ãw_£ssiÚ
;

1476 
qu›t_shutdown
;

1478 
shutdown
;

1480 
¡©e
;

1482 
r¡©e
;

1483 
BUF_MEM
 *
š™_buf
;

1484 *
š™_msg
;

1486 
š™_num
;

1487 
š™_off
;

1489 *
·ck‘
;

1490 
·ck‘_Ëngth
;

1491 
s¦2_¡©e_¡
 *
s2
;

1492 
s¦3_¡©e_¡
 *
s3
;

1493 
ds1_¡©e_¡
 *
d1
;

1494 
»ad_ah—d
;

1497 (*
msg_ÿÎback
è(
wr™e_p
, 
v”siÚ
, 
cÚ‹Á_ty³
,

1498 cÚ¡ *
buf
, 
size_t
 
Ën
, 
SSL
 *
s¦
, *
¬g
);

1499 *
msg_ÿÎback_¬g
;

1500 
h™
;

1501 
X509_VERIFY_PARAM
 *
·¿m
;

1503 
pu½o£
;

1504 
Œu¡
;

1507 
STACK_OF
(
SSL_CIPHER
è*
ch”_li¡
;

1508 
STACK_OF
(
SSL_CIPHER
è*
ch”_li¡_by_id
;

1513 
mac_æags
;

1514 
EVP_CIPHER_CTX
 *
’c_»ad_ùx
;

1515 
EVP_MD_CTX
 *
»ad_hash
;

1516 #iâdeà
OPENSSL_NO_COMP


1517 
COMP_CTX
 *
ex·nd
;

1519 *
ex·nd
;

1521 
EVP_CIPHER_CTX
 *
’c_wr™e_ùx
;

1522 
EVP_MD_CTX
 *
wr™e_hash
;

1523 #iâdeà
OPENSSL_NO_COMP


1524 
COMP_CTX
 *
com´ess
;

1526 *
com´ess
;

1531 
û¹_¡
 *
û¹
;

1536 
sid_ùx_Ëngth
;

1537 
sid_ùx
[
SSL_MAX_SID_CTX_LENGTH
];

1539 
SSL_SESSION
 *
£ssiÚ
;

1541 
GEN_SESSION_CB
 
g’”©e_£ssiÚ_id
;

1547 
v”ify_mode
;

1549 (*
v”ify_ÿÎback
è(
ok
, 
X509_STORE_CTX
 *
ùx
);

1551 (*
šfo_ÿÎback
è(cÚ¡ 
SSL
 *
s¦
, 
ty³
, 
v®
);

1553 
”rÜ
;

1555 
”rÜ_code
;

1556 #iâdeà
OPENSSL_NO_KRB5


1558 
KSSL_CTX
 *
ks¦_ùx
;

1560 #iâdeà
OPENSSL_NO_PSK


1561 (*
psk_ş›Á_ÿÎback
è(
SSL
 *
s¦
, cÚ¡ *
hšt
,

1562 *
id’t™y
,

1563 
max_id’t™y_Ën
,

1564 *
psk
,

1565 
max_psk_Ën
);

1566 (*
psk_£rv”_ÿÎback
è(
SSL
 *
s¦
, cÚ¡ *
id’t™y
,

1567 *
psk
,

1568 
max_psk_Ën
);

1570 
SSL_CTX
 *
ùx
;

1575 
debug
;

1577 
v”ify_»suÉ
;

1578 
CRYPTO_EX_DATA
 
ex_d©a
;

1580 
STACK_OF
(
X509_NAME
è*
ş›Á_CA
;

1581 
»ã»nûs
;

1583 
İtiÚs
;

1585 
mode
;

1586 
max_û¹_li¡
;

1587 
fœ¡_·ck‘
;

1589 
ş›Á_v”siÚ
;

1590 
max_£nd_äagm’t
;

1591 #iâdeà
OPENSSL_NO_TLSEXT


1593 (*
£xt_debug_cb
è(
SSL
 *
s
, 
ş›Á_£rv”
, 
ty³
,

1594 *
d©a
, 
Ën
, *
¬g
);

1595 *
£xt_debug_¬g
;

1596 *
£xt_ho¡Çme
;

1603 
£rv”Çme_dÚe
;

1606 
£xt_¡©us_ty³
;

1608 
£xt_¡©us_ex³ùed
;

1610 
STACK_OF
(
OCSP_RESPID
è*
£xt_oc¥_ids
;

1611 
X509_EXTENSIONS
 *
£xt_oc¥_exts
;

1613 *
£xt_oc¥_»¥
;

1614 
£xt_oc¥_»¥Ën
;

1616 
£xt_tick‘_ex³ùed
;

1617 #iâdeà
OPENSSL_NO_EC


1618 
size_t
 
£xt_eıoštfÜm©li¡_Ëngth
;

1620 *
£xt_eıoštfÜm©li¡
;

1621 
size_t
 
£xt_–lticcurv–i¡_Ëngth
;

1623 *
£xt_–lticcurv–i¡
;

1629 *
£xt_İaque_´f_šput
;

1630 
size_t
 
£xt_İaque_´f_šput_Ën
;

1632 
TLS_SESSION_TICKET_EXT
 *
£xt_£ssiÚ_tick‘
;

1634 
s_£ssiÚ_tick‘_ext_cb_â
 
s_£ssiÚ_tick‘_ext_cb
;

1635 *
s_£ssiÚ_tick‘_ext_cb_¬g
;

1637 
s_£ssiÚ_£ü‘_cb_â
 
s_£ssiÚ_£ü‘_cb
;

1638 *
s_£ssiÚ_£ü‘_cb_¬g
;

1639 
SSL_CTX
 *
š™Ÿl_ùx
;

1640 #iâdeà
OPENSSL_NO_NEXTPROTONEG


1648 *
Ãxt_´Ùo_ÃgÙŸ‹d
;

1649 
Ãxt_´Ùo_ÃgÙŸ‹d_Ën
;

1651 
	#£ssiÚ_ùx
 
š™Ÿl_ùx


	)

1653 
STACK_OF
(
SRTP_PROTECTION_PROFILE
è*
¤_´ofes
;

1655 
SRTP_PROTECTION_PROFILE
 *
¤_´ofe
;

1662 
£xt_h—¹b—t
;

1664 
£xt_hb_³ndšg
;

1666 
£xt_hb_£q
;

1668 
	#£ssiÚ_ùx
 
ùx


	)

1675 
»ÃgÙŸ‹
;

1676 #iâdeà
OPENSSL_NO_SRP


1678 
SRP_CTX
 
¤p_ùx
;

1680 #iâdeà
OPENSSL_NO_TLSEXT


1685 *
®²_ş›Á_´Ùo_li¡
;

1686 
®²_ş›Á_´Ùo_li¡_Ën
;

1692 #ifdeà
__ılu¥lus


1696 
	~<İ’s¦/s¦2.h
>

1697 
	~<İ’s¦/s¦3.h
>

1698 
	~<İ’s¦/s1.h
>

1699 
	~<İ’s¦/ds1.h
>

1700 
	~<İ’s¦/s¦23.h
>

1701 
	~<İ’s¦/¤.h
>

1703 #ifdeà 
__ılu¥lus


1708 
	#SSL_£t_­p_d©a
(
s
,
¬g
è(
	`SSL_£t_ex_d©a
(s,0,(*ïrg))

	)

1709 
	#SSL_g‘_­p_d©a
(
s
è(
	`SSL_g‘_ex_d©a
(s,0))

	)

1710 
	#SSL_SESSION_£t_­p_d©a
(
s
,
a
è(
	`SSL_SESSION_£t_ex_d©a
(s,0,(*ï))

	)

1711 
	#SSL_SESSION_g‘_­p_d©a
(
s
è(
	`SSL_SESSION_g‘_ex_d©a
(s,0))

	)

1712 
	#SSL_CTX_g‘_­p_d©a
(
ùx
è(
	`SSL_CTX_g‘_ex_d©a
(ùx,0))

	)

1713 
	#SSL_CTX_£t_­p_d©a
(
ùx
,
¬g
è(
	`SSL_CTX_£t_ex_d©a
(ùx,0,(*ïrg))

	)

1723 
	#SSL_ST_CONNECT
 0x1000

	)

1724 
	#SSL_ST_ACCEPT
 0x2000

	)

1725 
	#SSL_ST_MASK
 0x0FFF

	)

1726 
	#SSL_ST_INIT
 (
SSL_ST_CONNECT
|
SSL_ST_ACCEPT
)

	)

1727 
	#SSL_ST_BEFORE
 0x4000

	)

1728 
	#SSL_ST_OK
 0x03

	)

1729 
	#SSL_ST_RENEGOTIATE
 (0x04|
SSL_ST_INIT
)

	)

1730 
	#SSL_ST_ERR
 (0x05|
SSL_ST_INIT
)

	)

1732 
	#SSL_CB_LOOP
 0x01

	)

1733 
	#SSL_CB_EXIT
 0x02

	)

1734 
	#SSL_CB_READ
 0x04

	)

1735 
	#SSL_CB_WRITE
 0x08

	)

1736 
	#SSL_CB_ALERT
 0x4000

	)

1737 
	#SSL_CB_READ_ALERT
 (
SSL_CB_ALERT
|
SSL_CB_READ
)

	)

1738 
	#SSL_CB_WRITE_ALERT
 (
SSL_CB_ALERT
|
SSL_CB_WRITE
)

	)

1739 
	#SSL_CB_ACCEPT_LOOP
 (
SSL_ST_ACCEPT
|
SSL_CB_LOOP
)

	)

1740 
	#SSL_CB_ACCEPT_EXIT
 (
SSL_ST_ACCEPT
|
SSL_CB_EXIT
)

	)

1741 
	#SSL_CB_CONNECT_LOOP
 (
SSL_ST_CONNECT
|
SSL_CB_LOOP
)

	)

1742 
	#SSL_CB_CONNECT_EXIT
 (
SSL_ST_CONNECT
|
SSL_CB_EXIT
)

	)

1743 
	#SSL_CB_HANDSHAKE_START
 0x10

	)

1744 
	#SSL_CB_HANDSHAKE_DONE
 0x20

	)

1747 
	#SSL_g‘_¡©e
(
a
è
	`SSL_¡©e
×)

	)

1748 
	#SSL_is_š™_fšished
(
a
è(
	`SSL_¡©e
×è=ğ
SSL_ST_OK
)

	)

1749 
	#SSL_š_š™
(
a
è(
	`SSL_¡©e
×)&
SSL_ST_INIT
)

	)

1750 
	#SSL_š_befÜe
(
a
è(
	`SSL_¡©e
×)&
SSL_ST_BEFORE
)

	)

1751 
	#SSL_š_cÚÃù_š™
(
a
è(
	`SSL_¡©e
×)&
SSL_ST_CONNECT
)

	)

1752 
	#SSL_š_acû±_š™
(
a
è(
	`SSL_¡©e
×)&
SSL_ST_ACCEPT
)

	)

1758 
	#SSL_ST_READ_HEADER
 0xF0

	)

1759 
	#SSL_ST_READ_BODY
 0xF1

	)

1760 
	#SSL_ST_READ_DONE
 0xF2

	)

1768 
size_t
 
SSL_g‘_fšished
(cÚ¡ 
SSL
 *
s
, *
buf
, size_ˆ
couÁ
);

1769 
size_t
 
SSL_g‘_³”_fšished
(cÚ¡ 
SSL
 *
s
, *
buf
, size_ˆ
couÁ
);

1775 
	#SSL_VERIFY_NONE
 0x00

	)

1776 
	#SSL_VERIFY_PEER
 0x01

	)

1777 
	#SSL_VERIFY_FAIL_IF_NO_PEER_CERT
 0x02

	)

1778 
	#SSL_VERIFY_CLIENT_ONCE
 0x04

	)

1780 
	#O³nSSL_add_s¦_®gÜ™hms
(è
	`SSL_lib¿ry_š™
()

	)

1781 
	#SSL—y_add_s¦_®gÜ™hms
(è
	`SSL_lib¿ry_š™
()

	)

1785 
	#SSL_CTX_£t_deçuÉ_v”ify
(
a
,
b
,
c
è
	`SSL_CTX_£t_v”ify
×,b,c)

	)

1786 
	#SSL_£t_´ef_ch”
(
c
,
n
è
	`SSL_£t_ch”_li¡
(c,n)

	)

1787 
	#SSL_add_£ssiÚ
(
a
,
b
è
	`SSL_CTX_add_£ssiÚ
(×),(b))

	)

1788 
	#SSL_»move_£ssiÚ
(
a
,
b
è
	`SSL_CTX_»move_£ssiÚ
(×),(b))

	)

1789 
	#SSL_æush_£ssiÚs
(
a
,
b
è
	`SSL_CTX_æush_£ssiÚs
(×),(b))

	)

1792 
	#SSL_g‘_ch”
(
s
) \

1793 
	`SSL_CIPHER_g‘_Çme
(
	`SSL_g‘_cu¼’t_ch”
(
s
))

	)

1794 
	#SSL_g‘_ch”_b™s
(
s
,
Å
) \

1795 
	`SSL_CIPHER_g‘_b™s
(
	`SSL_g‘_cu¼’t_ch”
(
s
),
Å
)

	)

1796 
	#SSL_g‘_ch”_v”siÚ
(
s
) \

1797 
	`SSL_CIPHER_g‘_v”siÚ
(
	`SSL_g‘_cu¼’t_ch”
(
s
))

	)

1798 
	#SSL_g‘_ch”_Çme
(
s
) \

1799 
	`SSL_CIPHER_g‘_Çme
(
	`SSL_g‘_cu¼’t_ch”
(
s
))

	)

1800 
	#SSL_g‘_time
(
a
è
	`SSL_SESSION_g‘_time
×)

	)

1801 
	#SSL_£t_time
(
a
,
b
è
	`SSL_SESSION_£t_time
(×),(b))

	)

1802 
	#SSL_g‘_timeout
(
a
è
	`SSL_SESSION_g‘_timeout
×)

	)

1803 
	#SSL_£t_timeout
(
a
,
b
è
	`SSL_SESSION_£t_timeout
(×),(b))

	)

1805 
	#d2i_SSL_SESSION_bio
(
bp
,
s_id
è
	`ASN1_d2i_bio_of
(
SSL_SESSION
,
SSL_SESSION_Ãw
,
d2i_SSL_SESSION
,bp,s_id)

	)

1806 
	#i2d_SSL_SESSION_bio
(
bp
,
s_id
è
	`ASN1_i2d_bio_of
(
SSL_SESSION
,
i2d_SSL_SESSION
,bp,s_id)

	)

1808 
DECLARE_PEM_rw
(
SSL_SESSION
, SSL_SESSION)

1809 
	#SSL_AD_REASON_OFFSET
 1000

	)

1812 
	#SSL_AD_CLOSE_NOTIFY
 
SSL3_AD_CLOSE_NOTIFY


	)

1814 
	#SSL_AD_UNEXPECTED_MESSAGE
 
SSL3_AD_UNEXPECTED_MESSAGE


	)

1816 
	#SSL_AD_BAD_RECORD_MAC
 
SSL3_AD_BAD_RECORD_MAC


	)

1817 
	#SSL_AD_DECRYPTION_FAILED
 
TLS1_AD_DECRYPTION_FAILED


	)

1818 
	#SSL_AD_RECORD_OVERFLOW
 
TLS1_AD_RECORD_OVERFLOW


	)

1820 
	#SSL_AD_DECOMPRESSION_FAILURE
 
SSL3_AD_DECOMPRESSION_FAILURE


	)

1822 
	#SSL_AD_HANDSHAKE_FAILURE
 
SSL3_AD_HANDSHAKE_FAILURE


	)

1824 
	#SSL_AD_NO_CERTIFICATE
 
SSL3_AD_NO_CERTIFICATE


	)

1825 
	#SSL_AD_BAD_CERTIFICATE
 
SSL3_AD_BAD_CERTIFICATE


	)

1826 
	#SSL_AD_UNSUPPORTED_CERTIFICATE
 
SSL3_AD_UNSUPPORTED_CERTIFICATE


	)

1827 
	#SSL_AD_CERTIFICATE_REVOKED
 
SSL3_AD_CERTIFICATE_REVOKED


	)

1828 
	#SSL_AD_CERTIFICATE_EXPIRED
 
SSL3_AD_CERTIFICATE_EXPIRED


	)

1829 
	#SSL_AD_CERTIFICATE_UNKNOWN
 
SSL3_AD_CERTIFICATE_UNKNOWN


	)

1831 
	#SSL_AD_ILLEGAL_PARAMETER
 
SSL3_AD_ILLEGAL_PARAMETER


	)

1833 
	#SSL_AD_UNKNOWN_CA
 
TLS1_AD_UNKNOWN_CA


	)

1835 
	#SSL_AD_ACCESS_DENIED
 
TLS1_AD_ACCESS_DENIED


	)

1837 
	#SSL_AD_DECODE_ERROR
 
TLS1_AD_DECODE_ERROR


	)

1838 
	#SSL_AD_DECRYPT_ERROR
 
TLS1_AD_DECRYPT_ERROR


	)

1840 
	#SSL_AD_EXPORT_RESTRICTION
 
TLS1_AD_EXPORT_RESTRICTION


	)

1842 
	#SSL_AD_PROTOCOL_VERSION
 
TLS1_AD_PROTOCOL_VERSION


	)

1844 
	#SSL_AD_INSUFFICIENT_SECURITY
 
TLS1_AD_INSUFFICIENT_SECURITY


	)

1846 
	#SSL_AD_INTERNAL_ERROR
 
TLS1_AD_INTERNAL_ERROR


	)

1847 
	#SSL_AD_USER_CANCELLED
 
TLS1_AD_USER_CANCELLED


	)

1848 
	#SSL_AD_NO_RENEGOTIATION
 
TLS1_AD_NO_RENEGOTIATION


	)

1849 
	#SSL_AD_UNSUPPORTED_EXTENSION
 
TLS1_AD_UNSUPPORTED_EXTENSION


	)

1850 
	#SSL_AD_CERTIFICATE_UNOBTAINABLE
 
TLS1_AD_CERTIFICATE_UNOBTAINABLE


	)

1851 
	#SSL_AD_UNRECOGNIZED_NAME
 
TLS1_AD_UNRECOGNIZED_NAME


	)

1852 
	#SSL_AD_BAD_CERTIFICATE_STATUS_RESPONSE
 
TLS1_AD_BAD_CERTIFICATE_STATUS_RESPONSE


	)

1853 
	#SSL_AD_BAD_CERTIFICATE_HASH_VALUE
 
TLS1_AD_BAD_CERTIFICATE_HASH_VALUE


	)

1855 
	#SSL_AD_UNKNOWN_PSK_IDENTITY
 
TLS1_AD_UNKNOWN_PSK_IDENTITY


	)

1857 
	#SSL_AD_INAPPROPRIATE_FALLBACK
 
TLS1_AD_INAPPROPRIATE_FALLBACK


	)

1858 
	#SSL_ERROR_NONE
 0

	)

1859 
	#SSL_ERROR_SSL
 1

	)

1860 
	#SSL_ERROR_WANT_READ
 2

	)

1861 
	#SSL_ERROR_WANT_WRITE
 3

	)

1862 
	#SSL_ERROR_WANT_X509_LOOKUP
 4

	)

1863 
	#SSL_ERROR_SYSCALL
 5

	)

1865 
	#SSL_ERROR_ZERO_RETURN
 6

	)

1866 
	#SSL_ERROR_WANT_CONNECT
 7

	)

1867 
	#SSL_ERROR_WANT_ACCEPT
 8

	)

1868 
	#SSL_CTRL_NEED_TMP_RSA
 1

	)

1869 
	#SSL_CTRL_SET_TMP_RSA
 2

	)

1870 
	#SSL_CTRL_SET_TMP_DH
 3

	)

1871 
	#SSL_CTRL_SET_TMP_ECDH
 4

	)

1872 
	#SSL_CTRL_SET_TMP_RSA_CB
 5

	)

1873 
	#SSL_CTRL_SET_TMP_DH_CB
 6

	)

1874 
	#SSL_CTRL_SET_TMP_ECDH_CB
 7

	)

1875 
	#SSL_CTRL_GET_SESSION_REUSED
 8

	)

1876 
	#SSL_CTRL_GET_CLIENT_CERT_REQUEST
 9

	)

1877 
	#SSL_CTRL_GET_NUM_RENEGOTIATIONS
 10

	)

1878 
	#SSL_CTRL_CLEAR_NUM_RENEGOTIATIONS
 11

	)

1879 
	#SSL_CTRL_GET_TOTAL_RENEGOTIATIONS
 12

	)

1880 
	#SSL_CTRL_GET_FLAGS
 13

	)

1881 
	#SSL_CTRL_EXTRA_CHAIN_CERT
 14

	)

1882 
	#SSL_CTRL_SET_MSG_CALLBACK
 15

	)

1883 
	#SSL_CTRL_SET_MSG_CALLBACK_ARG
 16

	)

1885 
	#SSL_CTRL_SET_MTU
 17

	)

1887 
	#SSL_CTRL_SESS_NUMBER
 20

	)

1888 
	#SSL_CTRL_SESS_CONNECT
 21

	)

1889 
	#SSL_CTRL_SESS_CONNECT_GOOD
 22

	)

1890 
	#SSL_CTRL_SESS_CONNECT_RENEGOTIATE
 23

	)

1891 
	#SSL_CTRL_SESS_ACCEPT
 24

	)

1892 
	#SSL_CTRL_SESS_ACCEPT_GOOD
 25

	)

1893 
	#SSL_CTRL_SESS_ACCEPT_RENEGOTIATE
 26

	)

1894 
	#SSL_CTRL_SESS_HIT
 27

	)

1895 
	#SSL_CTRL_SESS_CB_HIT
 28

	)

1896 
	#SSL_CTRL_SESS_MISSES
 29

	)

1897 
	#SSL_CTRL_SESS_TIMEOUTS
 30

	)

1898 
	#SSL_CTRL_SESS_CACHE_FULL
 31

	)

1899 
	#SSL_CTRL_OPTIONS
 32

	)

1900 
	#SSL_CTRL_MODE
 33

	)

1901 
	#SSL_CTRL_GET_READ_AHEAD
 40

	)

1902 
	#SSL_CTRL_SET_READ_AHEAD
 41

	)

1903 
	#SSL_CTRL_SET_SESS_CACHE_SIZE
 42

	)

1904 
	#SSL_CTRL_GET_SESS_CACHE_SIZE
 43

	)

1905 
	#SSL_CTRL_SET_SESS_CACHE_MODE
 44

	)

1906 
	#SSL_CTRL_GET_SESS_CACHE_MODE
 45

	)

1907 
	#SSL_CTRL_GET_MAX_CERT_LIST
 50

	)

1908 
	#SSL_CTRL_SET_MAX_CERT_LIST
 51

	)

1909 
	#SSL_CTRL_SET_MAX_SEND_FRAGMENT
 52

	)

1911 #iâdeà
OPENSSL_NO_TLSEXT


1912 
	#SSL_CTRL_SET_TLSEXT_SERVERNAME_CB
 53

	)

1913 
	#SSL_CTRL_SET_TLSEXT_SERVERNAME_ARG
 54

	)

1914 
	#SSL_CTRL_SET_TLSEXT_HOSTNAME
 55

	)

1915 
	#SSL_CTRL_SET_TLSEXT_DEBUG_CB
 56

	)

1916 
	#SSL_CTRL_SET_TLSEXT_DEBUG_ARG
 57

	)

1917 
	#SSL_CTRL_GET_TLSEXT_TICKET_KEYS
 58

	)

1918 
	#SSL_CTRL_SET_TLSEXT_TICKET_KEYS
 59

	)

1919 
	#SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT
 60

	)

1920 
	#SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT_CB
 61

	)

1921 
	#SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT_CB_ARG
 62

	)

1922 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_CB
 63

	)

1923 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_CB_ARG
 64

	)

1924 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_TYPE
 65

	)

1925 
	#SSL_CTRL_GET_TLSEXT_STATUS_REQ_EXTS
 66

	)

1926 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_EXTS
 67

	)

1927 
	#SSL_CTRL_GET_TLSEXT_STATUS_REQ_IDS
 68

	)

1928 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_IDS
 69

	)

1929 
	#SSL_CTRL_GET_TLSEXT_STATUS_REQ_OCSP_RESP
 70

	)

1930 
	#SSL_CTRL_SET_TLSEXT_STATUS_REQ_OCSP_RESP
 71

	)

1931 
	#SSL_CTRL_SET_TLSEXT_TICKET_KEY_CB
 72

	)

1932 
	#SSL_CTRL_SET_TLS_EXT_SRP_USERNAME_CB
 75

	)

1933 
	#SSL_CTRL_SET_SRP_VERIFY_PARAM_CB
 76

	)

1934 
	#SSL_CTRL_SET_SRP_GIVE_CLIENT_PWD_CB
 77

	)

1935 
	#SSL_CTRL_SET_SRP_ARG
 78

	)

1936 
	#SSL_CTRL_SET_TLS_EXT_SRP_USERNAME
 79

	)

1937 
	#SSL_CTRL_SET_TLS_EXT_SRP_STRENGTH
 80

	)

1938 
	#SSL_CTRL_SET_TLS_EXT_SRP_PASSWORD
 81

	)

1939 #iâdeà
OPENSSL_NO_HEARTBEATS


1940 
	#SSL_CTRL_TLS_EXT_SEND_HEARTBEAT
 85

	)

1941 
	#SSL_CTRL_GET_TLS_EXT_HEARTBEAT_PENDING
 86

	)

1942 
	#SSL_CTRL_SET_TLS_EXT_HEARTBEAT_NO_REQUESTS
 87

	)

1945 
	#DTLS_CTRL_GET_TIMEOUT
 73

	)

1946 
	#DTLS_CTRL_HANDLE_TIMEOUT
 74

	)

1947 
	#DTLS_CTRL_LISTEN
 75

	)

1948 
	#SSL_CTRL_GET_RI_SUPPORT
 76

	)

1949 
	#SSL_CTRL_CLEAR_OPTIONS
 77

	)

1950 
	#SSL_CTRL_CLEAR_MODE
 78

	)

1951 
	#SSL_CTRL_GET_EXTRA_CHAIN_CERTS
 82

	)

1952 
	#SSL_CTRL_CLEAR_EXTRA_CHAIN_CERTS
 83

	)

1953 
	#SSL_CTRL_CHAIN
 88

	)

1954 
	#SSL_CTRL_CHAIN_CERT
 89

	)

1955 
	#SSL_CTRL_GET_CURVES
 90

	)

1956 
	#SSL_CTRL_SET_CURVES
 91

	)

1957 
	#SSL_CTRL_SET_CURVES_LIST
 92

	)

1958 
	#SSL_CTRL_GET_SHARED_CURVE
 93

	)

1959 
	#SSL_CTRL_SET_ECDH_AUTO
 94

	)

1960 
	#SSL_CTRL_SET_SIGALGS
 97

	)

1961 
	#SSL_CTRL_SET_SIGALGS_LIST
 98

	)

1962 
	#SSL_CTRL_CERT_FLAGS
 99

	)

1963 
	#SSL_CTRL_CLEAR_CERT_FLAGS
 100

	)

1964 
	#SSL_CTRL_SET_CLIENT_SIGALGS
 101

	)

1965 
	#SSL_CTRL_SET_CLIENT_SIGALGS_LIST
 102

	)

1966 
	#SSL_CTRL_GET_CLIENT_CERT_TYPES
 103

	)

1967 
	#SSL_CTRL_SET_CLIENT_CERT_TYPES
 104

	)

1968 
	#SSL_CTRL_BUILD_CERT_CHAIN
 105

	)

1969 
	#SSL_CTRL_SET_VERIFY_CERT_STORE
 106

	)

1970 
	#SSL_CTRL_SET_CHAIN_CERT_STORE
 107

	)

1971 
	#SSL_CTRL_GET_PEER_SIGNATURE_NID
 108

	)

1972 
	#SSL_CTRL_GET_SERVER_TMP_KEY
 109

	)

1973 
	#SSL_CTRL_GET_RAW_CIPHERLIST
 110

	)

1974 
	#SSL_CTRL_GET_EC_POINT_FORMATS
 111

	)

1975 
	#SSL_CTRL_GET_CHAIN_CERTS
 115

	)

1976 
	#SSL_CTRL_SELECT_CURRENT_CERT
 116

	)

1977 
	#SSL_CTRL_SET_CURRENT_CERT
 117

	)

1978 
	#SSL_CTRL_CHECK_PROTO_VERSION
 119

	)

1979 
	#DTLS_CTRL_SET_LINK_MTU
 120

	)

1980 
	#DTLS_CTRL_GET_LINK_MIN_MTU
 121

	)

1981 
	#SSL_CERT_SET_FIRST
 1

	)

1982 
	#SSL_CERT_SET_NEXT
 2

	)

1983 
	#SSL_CERT_SET_SERVER
 3

	)

1984 
	#DTLSv1_g‘_timeout
(
s¦
, 
¬g
) \

1985 
	`SSL_ù¾
(
s¦
,
DTLS_CTRL_GET_TIMEOUT
,0, (*)
¬g
)

	)

1986 
	#DTLSv1_hªdË_timeout
(
s¦
) \

1987 
	`SSL_ù¾
(
s¦
,
DTLS_CTRL_HANDLE_TIMEOUT
,0, 
NULL
)

	)

1988 
	#DTLSv1_li¡’
(
s¦
, 
³”
) \

1989 
	`SSL_ù¾
(
s¦
,
DTLS_CTRL_LISTEN
,0, (*)
³”
)

	)

1990 
	#SSL_£ssiÚ_»u£d
(
s¦
) \

1991 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_GET_SESSION_REUSED
,0,
NULL
)

	)

1992 
	#SSL_num_»ÃgÙŸtiÚs
(
s¦
) \

1993 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_GET_NUM_RENEGOTIATIONS
,0,
NULL
)

	)

1994 
	#SSL_ş—r_num_»ÃgÙŸtiÚs
(
s¦
) \

1995 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_CLEAR_NUM_RENEGOTIATIONS
,0,
NULL
)

	)

1996 
	#SSL_tÙ®_»ÃgÙŸtiÚs
(
s¦
) \

1997 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_GET_TOTAL_RENEGOTIATIONS
,0,
NULL
)

	)

1998 
	#SSL_CTX_Ãed_tmp_RSA
(
ùx
) \

1999 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_NEED_TMP_RSA
,0,
NULL
)

	)

2000 
	#SSL_CTX_£t_tmp_r§
(
ùx
,
r§
) \

2001 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_TMP_RSA
,0,(*)
r§
)

	)

2002 
	#SSL_CTX_£t_tmp_dh
(
ùx
,
dh
) \

2003 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_TMP_DH
,0,(*)
dh
)

	)

2004 
	#SSL_CTX_£t_tmp_ecdh
(
ùx
,
ecdh
) \

2005 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_TMP_ECDH
,0,(*)
ecdh
)

	)

2006 
	#SSL_Ãed_tmp_RSA
(
s¦
) \

2007 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_NEED_TMP_RSA
,0,
NULL
)

	)

2008 
	#SSL_£t_tmp_r§
(
s¦
,
r§
) \

2009 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TMP_RSA
,0,(*)
r§
)

	)

2010 
	#SSL_£t_tmp_dh
(
s¦
,
dh
) \

2011 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TMP_DH
,0,(*)
dh
)

	)

2012 
	#SSL_£t_tmp_ecdh
(
s¦
,
ecdh
) \

2013 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TMP_ECDH
,0,(*)
ecdh
)

	)

2014 
	#SSL_CTX_add_exŒa_chaš_û¹
(
ùx
,
x509
) \

2015 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_EXTRA_CHAIN_CERT
,0,(*)
x509
)

	)

2016 
	#SSL_CTX_g‘_exŒa_chaš_û¹s
(
ùx
,
px509
) \

2017 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_EXTRA_CHAIN_CERTS
,0,
px509
)

	)

2018 
	#SSL_CTX_g‘_exŒa_chaš_û¹s_Úly
(
ùx
,
px509
) \

2019 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_EXTRA_CHAIN_CERTS
,1,
px509
)

	)

2020 
	#SSL_CTX_ş—r_exŒa_chaš_û¹s
(
ùx
) \

2021 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_CLEAR_EXTRA_CHAIN_CERTS
,0,
NULL
)

	)

2022 
	#SSL_CTX_£t0_chaš
(
ùx
,
sk
) \

2023 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_CHAIN
,0,(*)
sk
)

	)

2024 
	#SSL_CTX_£t1_chaš
(
ùx
,
sk
) \

2025 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_CHAIN
,1,(*)
sk
)

	)

2026 
	#SSL_CTX_add0_chaš_û¹
(
ùx
,
x509
) \

2027 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_CHAIN_CERT
,0,(*)
x509
)

	)

2028 
	#SSL_CTX_add1_chaš_û¹
(
ùx
,
x509
) \

2029 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_CHAIN_CERT
,1,(*)
x509
)

	)

2030 
	#SSL_CTX_g‘0_chaš_û¹s
(
ùx
,
px509
) \

2031 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_CHAIN_CERTS
,0,
px509
)

	)

2032 
	#SSL_CTX_ş—r_chaš_û¹s
(
ùx
) \

2033 
	`SSL_CTX_£t0_chaš
(
ùx
,
NULL
)

	)

2034 
	#SSL_CTX_bud_û¹_chaš
(
ùx
, 
æags
) \

2035 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_BUILD_CERT_CHAIN
, 
æags
, 
NULL
)

	)

2036 
	#SSL_CTX_£Ëù_cu¼’t_û¹
(
ùx
,
x509
) \

2037 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SELECT_CURRENT_CERT
,0,(*)
x509
)

	)

2038 
	#SSL_CTX_£t_cu¼’t_û¹
(
ùx
, 
İ
) \

2039 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CURRENT_CERT
, 
İ
, 
NULL
)

	)

2040 
	#SSL_CTX_£t0_v”ify_û¹_¡Üe
(
ùx
,
¡
) \

2041 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_VERIFY_CERT_STORE
,0,(*)
¡
)

	)

2042 
	#SSL_CTX_£t1_v”ify_û¹_¡Üe
(
ùx
,
¡
) \

2043 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_VERIFY_CERT_STORE
,1,(*)
¡
)

	)

2044 
	#SSL_CTX_£t0_chaš_û¹_¡Üe
(
ùx
,
¡
) \

2045 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CHAIN_CERT_STORE
,0,(*)
¡
)

	)

2046 
	#SSL_CTX_£t1_chaš_û¹_¡Üe
(
ùx
,
¡
) \

2047 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CHAIN_CERT_STORE
,1,(*)
¡
)

	)

2048 
	#SSL_£t0_chaš
(
ùx
,
sk
) \

2049 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_CHAIN
,0,(*)
sk
)

	)

2050 
	#SSL_£t1_chaš
(
ùx
,
sk
) \

2051 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_CHAIN
,1,(*)
sk
)

	)

2052 
	#SSL_add0_chaš_û¹
(
ùx
,
x509
) \

2053 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_CHAIN_CERT
,0,(*)
x509
)

	)

2054 
	#SSL_add1_chaš_û¹
(
ùx
,
x509
) \

2055 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_CHAIN_CERT
,1,(*)
x509
)

	)

2056 
	#SSL_g‘0_chaš_û¹s
(
ùx
,
px509
) \

2057 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_GET_CHAIN_CERTS
,0,
px509
)

	)

2058 
	#SSL_ş—r_chaš_û¹s
(
ùx
) \

2059 
	`SSL_£t0_chaš
(
ùx
,
NULL
)

	)

2060 
	#SSL_bud_û¹_chaš
(
s
, 
æags
) \

2061 
	`SSL_ù¾
(
s
,
SSL_CTRL_BUILD_CERT_CHAIN
, 
æags
, 
NULL
)

	)

2062 
	#SSL_£Ëù_cu¼’t_û¹
(
ùx
,
x509
) \

2063 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SELECT_CURRENT_CERT
,0,(*)
x509
)

	)

2064 
	#SSL_£t_cu¼’t_û¹
(
ùx
,
İ
) \

2065 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_CURRENT_CERT
, 
İ
, 
NULL
)

	)

2066 
	#SSL_£t0_v”ify_û¹_¡Üe
(
s
,
¡
) \

2067 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_VERIFY_CERT_STORE
,0,(*)
¡
)

	)

2068 
	#SSL_£t1_v”ify_û¹_¡Üe
(
s
,
¡
) \

2069 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_VERIFY_CERT_STORE
,1,(*)
¡
)

	)

2070 
	#SSL_£t0_chaš_û¹_¡Üe
(
s
,
¡
) \

2071 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_CHAIN_CERT_STORE
,0,(*)
¡
)

	)

2072 
	#SSL_£t1_chaš_û¹_¡Üe
(
s
,
¡
) \

2073 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_CHAIN_CERT_STORE
,1,(*)
¡
)

	)

2074 
	#SSL_g‘1_curves
(
ùx
, 
s
) \

2075 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_GET_CURVES
,0,(*)
s
)

	)

2076 
	#SSL_CTX_£t1_curves
(
ùx
, 
şi¡
, 
şi¡Ën
) \

2077 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CURVES
,
şi¡Ën
,(*)
şi¡
)

	)

2078 
	#SSL_CTX_£t1_curves_li¡
(
ùx
, 
s
) \

2079 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CURVES_LIST
,0,(*)
s
)

	)

2080 
	#SSL_£t1_curves
(
ùx
, 
şi¡
, 
şi¡Ën
) \

2081 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_CURVES
,
şi¡Ën
,(*)
şi¡
)

	)

2082 
	#SSL_£t1_curves_li¡
(
ùx
, 
s
) \

2083 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_CURVES_LIST
,0,(*)
s
)

	)

2084 
	#SSL_g‘_sh¬ed_curve
(
s
, 
n
) \

2085 
	`SSL_ù¾
(
s
,
SSL_CTRL_GET_SHARED_CURVE
,
n
,
NULL
)

	)

2086 
	#SSL_CTX_£t_ecdh_auto
(
ùx
, 
Úoff
) \

2087 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_ECDH_AUTO
,
Úoff
,
NULL
)

	)

2088 
	#SSL_£t_ecdh_auto
(
s
, 
Úoff
) \

2089 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_ECDH_AUTO
,
Úoff
,
NULL
)

	)

2090 
	#SSL_CTX_£t1_sig®gs
(
ùx
, 
¦i¡
, 
¦i¡Ën
) \

2091 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_SIGALGS
,
¦i¡Ën
,(*)
¦i¡
)

	)

2092 
	#SSL_CTX_£t1_sig®gs_li¡
(
ùx
, 
s
) \

2093 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_SIGALGS_LIST
,0,(*)
s
)

	)

2094 
	#SSL_£t1_sig®gs
(
ùx
, 
¦i¡
, 
¦i¡Ën
) \

2095 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_SIGALGS
,
¦i¡Ën
,(*)
¦i¡
)

	)

2096 
	#SSL_£t1_sig®gs_li¡
(
ùx
, 
s
) \

2097 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_SIGALGS_LIST
,0,(*)
s
)

	)

2098 
	#SSL_CTX_£t1_ş›Á_sig®gs
(
ùx
, 
¦i¡
, 
¦i¡Ën
) \

2099 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CLIENT_SIGALGS
,
¦i¡Ën
,(*)
¦i¡
)

	)

2100 
	#SSL_CTX_£t1_ş›Á_sig®gs_li¡
(
ùx
, 
s
) \

2101 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CLIENT_SIGALGS_LIST
,0,(*)
s
)

	)

2102 
	#SSL_£t1_ş›Á_sig®gs
(
ùx
, 
¦i¡
, 
¦i¡Ën
) \

2103 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_CLIENT_SIGALGS
,
şi¡Ën
,(*)
¦i¡
)

	)

2104 
	#SSL_£t1_ş›Á_sig®gs_li¡
(
ùx
, 
s
) \

2105 
	`SSL_ù¾
(
ùx
,
SSL_CTRL_SET_CLIENT_SIGALGS_LIST
,0,(*)
s
)

	)

2106 
	#SSL_g‘0_û¹ifiÿ‹_ty³s
(
s
, 
şi¡
) \

2107 
	`SSL_ù¾
(
s
, 
SSL_CTRL_GET_CLIENT_CERT_TYPES
, 0, (*)
şi¡
)

	)

2108 
	#SSL_CTX_£t1_ş›Á_û¹ifiÿ‹_ty³s
(
ùx
, 
şi¡
, 
şi¡Ën
) \

2109 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_CLIENT_CERT_TYPES
,
şi¡Ën
,(*)
şi¡
)

	)

2110 
	#SSL_£t1_ş›Á_û¹ifiÿ‹_ty³s
(
s
, 
şi¡
, 
şi¡Ën
) \

2111 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_CLIENT_CERT_TYPES
,
şi¡Ën
,(*)
şi¡
)

	)

2112 
	#SSL_g‘_³”_sigÇtu»_nid
(
s
, 
²
) \

2113 
	`SSL_ù¾
(
s
,
SSL_CTRL_GET_PEER_SIGNATURE_NID
,0,
²
)

	)

2114 
	#SSL_g‘_£rv”_tmp_key
(
s
, 
pk
) \

2115 
	`SSL_ù¾
(
s
,
SSL_CTRL_GET_SERVER_TMP_KEY
,0,
pk
)

	)

2116 
	#SSL_g‘0_¿w_ch”li¡
(
s
, 
¶¡
) \

2117 
	`SSL_ù¾
(
s
,
SSL_CTRL_GET_RAW_CIPHERLIST
,0,(*)
¶¡
)

	)

2118 
	#SSL_g‘0_ec_pošt_fÜm©s
(
s
, 
¶¡
) \

2119 
	`SSL_ù¾
(
s
,
SSL_CTRL_GET_EC_POINT_FORMATS
,0,(*)
¶¡
)

	)

2120 #iâdeà
OPENSSL_NO_BIO


2121 
BIO_METHOD
 *
BIO_f_s¦
();

2122 
BIO
 *
BIO_Ãw_s¦
(
SSL_CTX
 *
ùx
, 
ş›Á
);

2123 
BIO
 *
BIO_Ãw_s¦_cÚÃù
(
SSL_CTX
 *
ùx
);

2124 
BIO
 *
BIO_Ãw_bufãr_s¦_cÚÃù
(
SSL_CTX
 *
ùx
);

2125 
BIO_s¦_cİy_£ssiÚ_id
(
BIO
 *
to
, BIO *
äom
);

2126 
BIO_s¦_shutdown
(
BIO
 *
s¦_bio
);

2130 
SSL_CTX_£t_ch”_li¡
(
SSL_CTX
 *, cÚ¡ *
¡r
);

2131 
SSL_CTX
 *
SSL_CTX_Ãw
(cÚ¡ 
SSL_METHOD
 *
m‘h
);

2132 
SSL_CTX_ä“
(
SSL_CTX
 *);

2133 
SSL_CTX_£t_timeout
(
SSL_CTX
 *
ùx
, 
t
);

2134 
SSL_CTX_g‘_timeout
(cÚ¡ 
SSL_CTX
 *
ùx
);

2135 
X509_STORE
 *
SSL_CTX_g‘_û¹_¡Üe
(cÚ¡ 
SSL_CTX
 *);

2136 
SSL_CTX_£t_û¹_¡Üe
(
SSL_CTX
 *, 
X509_STORE
 *);

2137 
SSL_wªt
(cÚ¡ 
SSL
 *
s
);

2138 
SSL_ş—r
(
SSL
 *
s
);

2140 
SSL_CTX_æush_£ssiÚs
(
SSL_CTX
 *
ùx
, 
tm
);

2142 cÚ¡ 
SSL_CIPHER
 *
SSL_g‘_cu¼’t_ch”
(cÚ¡ 
SSL
 *
s
);

2143 
SSL_CIPHER_g‘_b™s
(cÚ¡ 
SSL_CIPHER
 *
c
, *
®g_b™s
);

2144 *
SSL_CIPHER_g‘_v”siÚ
(cÚ¡ 
SSL_CIPHER
 *
c
);

2145 cÚ¡ *
SSL_CIPHER_g‘_Çme
(cÚ¡ 
SSL_CIPHER
 *
c
);

2146 
SSL_CIPHER_g‘_id
(cÚ¡ 
SSL_CIPHER
 *
c
);

2148 
SSL_g‘_fd
(cÚ¡ 
SSL
 *
s
);

2149 
SSL_g‘_rfd
(cÚ¡ 
SSL
 *
s
);

2150 
SSL_g‘_wfd
(cÚ¡ 
SSL
 *
s
);

2151 cÚ¡ *
SSL_g‘_ch”_li¡
(cÚ¡ 
SSL
 *
s
, 
n
);

2152 *
SSL_g‘_sh¬ed_ch”s
(cÚ¡ 
SSL
 *
s
, *
buf
, 
size
);

2153 
SSL_g‘_»ad_ah—d
(cÚ¡ 
SSL
 *
s
);

2154 
SSL_³ndšg
(cÚ¡ 
SSL
 *
s
);

2155 #iâdeà
OPENSSL_NO_SOCK


2156 
SSL_£t_fd
(
SSL
 *
s
, 
fd
);

2157 
SSL_£t_rfd
(
SSL
 *
s
, 
fd
);

2158 
SSL_£t_wfd
(
SSL
 *
s
, 
fd
);

2160 #iâdeà
OPENSSL_NO_BIO


2161 
SSL_£t_bio
(
SSL
 *
s
, 
BIO
 *
rbio
, BIO *
wbio
);

2162 
BIO
 *
SSL_g‘_rbio
(cÚ¡ 
SSL
 *
s
);

2163 
BIO
 *
SSL_g‘_wbio
(cÚ¡ 
SSL
 *
s
);

2165 
SSL_£t_ch”_li¡
(
SSL
 *
s
, cÚ¡ *
¡r
);

2166 
SSL_£t_»ad_ah—d
(
SSL
 *
s
, 
yes
);

2167 
SSL_g‘_v”ify_mode
(cÚ¡ 
SSL
 *
s
);

2168 
SSL_g‘_v”ify_d•th
(cÚ¡ 
SSL
 *
s
);

2169 (*
SSL_g‘_v”ify_ÿÎback
(cÚ¡ 
SSL
 *
s
)è(, 
X509_STORE_CTX
 *);

2170 
SSL_£t_v”ify
(
SSL
 *
s
, 
mode
,

2171 (*
ÿÎback
è(
ok
, 
X509_STORE_CTX
 *
ùx
));

2172 
SSL_£t_v”ify_d•th
(
SSL
 *
s
, 
d•th
);

2173 
SSL_£t_û¹_cb
(
SSL
 *
s
, (*
cb
è(SSL *
s¦
, *
¬g
), *arg);

2174 #iâdeà
OPENSSL_NO_RSA


2175 
SSL_u£_RSAPriv©eKey
(
SSL
 *
s¦
, 
RSA
 *
r§
);

2177 
SSL_u£_RSAPriv©eKey_ASN1
(
SSL
 *
s¦
, *
d
, 
Ën
);

2178 
SSL_u£_Priv©eKey
(
SSL
 *
s¦
, 
EVP_PKEY
 *
pkey
);

2179 
SSL_u£_Priv©eKey_ASN1
(
pk
, 
SSL
 *
s¦
, cÚ¡ *
d
,

2180 
Ën
);

2181 
SSL_u£_û¹ifiÿ‹
(
SSL
 *
s¦
, 
X509
 *
x
);

2182 
SSL_u£_û¹ifiÿ‹_ASN1
(
SSL
 *
s¦
, cÚ¡ *
d
, 
Ën
);

2184 #iâdeà
OPENSSL_NO_TLSEXT


2186 
SSL_CTX_u£_£rv”šfo
(
SSL_CTX
 *
ùx
, cÚ¡ *
£rv”šfo
,

2187 
size_t
 
£rv”šfo_Ëngth
);

2188 #iâdeà
OPENSSL_NO_STDIO


2189 
SSL_CTX_u£_£rv”šfo_fe
(
SSL_CTX
 *
ùx
, cÚ¡ *
fe
);

2194 #iâdeà
OPENSSL_NO_STDIO


2195 
SSL_u£_RSAPriv©eKey_fe
(
SSL
 *
s¦
, cÚ¡ *
fe
, 
ty³
);

2196 
SSL_u£_Priv©eKey_fe
(
SSL
 *
s¦
, cÚ¡ *
fe
, 
ty³
);

2197 
SSL_u£_û¹ifiÿ‹_fe
(
SSL
 *
s¦
, cÚ¡ *
fe
, 
ty³
);

2198 
SSL_CTX_u£_RSAPriv©eKey_fe
(
SSL_CTX
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

2199 
SSL_CTX_u£_Priv©eKey_fe
(
SSL_CTX
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

2200 
SSL_CTX_u£_û¹ifiÿ‹_fe
(
SSL_CTX
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

2202 
SSL_CTX_u£_û¹ifiÿ‹_chaš_fe
(
SSL_CTX
 *
ùx
, cÚ¡ *
fe
);

2203 
STACK_OF
(
X509_NAME
è*
SSL_lßd_ş›Á_CA_fe
(cÚ¡ *
fe
);

2204 
SSL_add_fe_û¹_subjeùs_to_¡ack
(
STACK_OF
(
X509_NAME
è*
¡ackCAs
,

2205 cÚ¡ *
fe
);

2206 #iâdeà
OPENSSL_SYS_VMS


2208 #iâdeà
OPENSSL_SYS_MACINTOSH_CLASSIC


2209 
SSL_add_dœ_û¹_subjeùs_to_¡ack
(
STACK_OF
(
X509_NAME
è*
¡ackCAs
,

2210 cÚ¡ *
dœ
);

2216 
SSL_lßd_”rÜ_¡ršgs
();

2217 cÚ¡ *
SSL_¡©e_¡ršg
(cÚ¡ 
SSL
 *
s
);

2218 cÚ¡ *
SSL_r¡©e_¡ršg
(cÚ¡ 
SSL
 *
s
);

2219 cÚ¡ *
SSL_¡©e_¡ršg_lÚg
(cÚ¡ 
SSL
 *
s
);

2220 cÚ¡ *
SSL_r¡©e_¡ršg_lÚg
(cÚ¡ 
SSL
 *
s
);

2221 
SSL_SESSION_g‘_time
(cÚ¡ 
SSL_SESSION
 *
s
);

2222 
SSL_SESSION_£t_time
(
SSL_SESSION
 *
s
, 
t
);

2223 
SSL_SESSION_g‘_timeout
(cÚ¡ 
SSL_SESSION
 *
s
);

2224 
SSL_SESSION_£t_timeout
(
SSL_SESSION
 *
s
, 
t
);

2225 
SSL_cİy_£ssiÚ_id
(
SSL
 *
to
, cÚ¡ SSL *
äom
);

2226 
X509
 *
SSL_SESSION_g‘0_³”
(
SSL_SESSION
 *
s
);

2227 
SSL_SESSION_£t1_id_cÚ‹xt
(
SSL_SESSION
 *
s
, cÚ¡ *
sid_ùx
,

2228 
sid_ùx_Ën
);

2230 
SSL_SESSION
 *
SSL_SESSION_Ãw
();

2231 cÚ¡ *
SSL_SESSION_g‘_id
(cÚ¡ 
SSL_SESSION
 *
s
,

2232 *
Ën
);

2233 
SSL_SESSION_g‘_com´ess_id
(cÚ¡ 
SSL_SESSION
 *
s
);

2234 #iâdeà
OPENSSL_NO_FP_API


2235 
SSL_SESSION_´št_å
(
FILE
 *
å
, cÚ¡ 
SSL_SESSION
 *
£s
);

2237 #iâdeà
OPENSSL_NO_BIO


2238 
SSL_SESSION_´št
(
BIO
 *
å
, cÚ¡ 
SSL_SESSION
 *
£s
);

2240 
SSL_SESSION_ä“
(
SSL_SESSION
 *
£s
);

2241 
i2d_SSL_SESSION
(
SSL_SESSION
 *
š
, **
µ
);

2242 
SSL_£t_£ssiÚ
(
SSL
 *
to
, 
SSL_SESSION
 *
£ssiÚ
);

2243 
SSL_CTX_add_£ssiÚ
(
SSL_CTX
 *
s
, 
SSL_SESSION
 *
c
);

2244 
SSL_CTX_»move_£ssiÚ
(
SSL_CTX
 *, 
SSL_SESSION
 *
c
);

2245 
SSL_CTX_£t_g’”©e_£ssiÚ_id
(
SSL_CTX
 *, 
GEN_SESSION_CB
);

2246 
SSL_£t_g’”©e_£ssiÚ_id
(
SSL
 *, 
GEN_SESSION_CB
);

2247 
SSL_has_m©chšg_£ssiÚ_id
(cÚ¡ 
SSL
 *
s¦
, cÚ¡ *
id
,

2248 
id_Ën
);

2249 
SSL_SESSION
 *
d2i_SSL_SESSION
(SSL_SESSION **
a
, cÚ¡ **
µ
,

2250 
Ëngth
);

2252 #ifdeà
HEADER_X509_H


2253 
X509
 *
SSL_g‘_³”_û¹ifiÿ‹
(cÚ¡ 
SSL
 *
s
);

2256 
STACK_OF
(
X509
è*
SSL_g‘_³”_û¹_chaš
(cÚ¡ 
SSL
 *
s
);

2258 
SSL_CTX_g‘_v”ify_mode
(cÚ¡ 
SSL_CTX
 *
ùx
);

2259 
SSL_CTX_g‘_v”ify_d•th
(cÚ¡ 
SSL_CTX
 *
ùx
);

2260 (*
SSL_CTX_g‘_v”ify_ÿÎback
(cÚ¡ 
SSL_CTX
 *
ùx
)) (,

2261 
X509_STORE_CTX
 *);

2262 
SSL_CTX_£t_v”ify
(
SSL_CTX
 *
ùx
, 
mode
,

2263 (*
ÿÎback
è(, 
X509_STORE_CTX
 *));

2264 
SSL_CTX_£t_v”ify_d•th
(
SSL_CTX
 *
ùx
, 
d•th
);

2265 
SSL_CTX_£t_û¹_v”ify_ÿÎback
(
SSL_CTX
 *
ùx
,

2266 (*
cb
è(
X509_STORE_CTX
 *, *),

2267 *
¬g
);

2268 
SSL_CTX_£t_û¹_cb
(
SSL_CTX
 *
c
, (*
cb
è(
SSL
 *
s¦
, *
¬g
),

2269 *
¬g
);

2270 #iâdeà
OPENSSL_NO_RSA


2271 
SSL_CTX_u£_RSAPriv©eKey
(
SSL_CTX
 *
ùx
, 
RSA
 *
r§
);

2273 
SSL_CTX_u£_RSAPriv©eKey_ASN1
(
SSL_CTX
 *
ùx
, cÚ¡ *
d
,

2274 
Ën
);

2275 
SSL_CTX_u£_Priv©eKey
(
SSL_CTX
 *
ùx
, 
EVP_PKEY
 *
pkey
);

2276 
SSL_CTX_u£_Priv©eKey_ASN1
(
pk
, 
SSL_CTX
 *
ùx
,

2277 cÚ¡ *
d
, 
Ën
);

2278 
SSL_CTX_u£_û¹ifiÿ‹
(
SSL_CTX
 *
ùx
, 
X509
 *
x
);

2279 
SSL_CTX_u£_û¹ifiÿ‹_ASN1
(
SSL_CTX
 *
ùx
, 
Ën
,

2280 cÚ¡ *
d
);

2282 
SSL_CTX_£t_deçuÉ_·sswd_cb
(
SSL_CTX
 *
ùx
, 
³m_·sswÜd_cb
 *
cb
);

2283 
SSL_CTX_£t_deçuÉ_·sswd_cb_u£rd©a
(
SSL_CTX
 *
ùx
, *
u
);

2285 
SSL_CTX_check_´iv©e_key
(cÚ¡ 
SSL_CTX
 *
ùx
);

2286 
SSL_check_´iv©e_key
(cÚ¡ 
SSL
 *
ùx
);

2288 
SSL_CTX_£t_£ssiÚ_id_cÚ‹xt
(
SSL_CTX
 *
ùx
, cÚ¡ *
sid_ùx
,

2289 
sid_ùx_Ën
);

2291 
SSL
 *
SSL_Ãw
(
SSL_CTX
 *
ùx
);

2292 
SSL_£t_£ssiÚ_id_cÚ‹xt
(
SSL
 *
s¦
, cÚ¡ *
sid_ùx
,

2293 
sid_ùx_Ën
);

2295 
SSL_CTX_£t_pu½o£
(
SSL_CTX
 *
s
, 
pu½o£
);

2296 
SSL_£t_pu½o£
(
SSL
 *
s
, 
pu½o£
);

2297 
SSL_CTX_£t_Œu¡
(
SSL_CTX
 *
s
, 
Œu¡
);

2298 
SSL_£t_Œu¡
(
SSL
 *
s
, 
Œu¡
);

2300 
SSL_CTX_£t1_·¿m
(
SSL_CTX
 *
ùx
, 
X509_VERIFY_PARAM
 *
vpm
);

2301 
SSL_£t1_·¿m
(
SSL
 *
s¦
, 
X509_VERIFY_PARAM
 *
vpm
);

2303 
X509_VERIFY_PARAM
 *
SSL_CTX_g‘0_·¿m
(
SSL_CTX
 *
ùx
);

2304 
X509_VERIFY_PARAM
 *
SSL_g‘0_·¿m
(
SSL
 *
s¦
);

2306 #iâdeà
OPENSSL_NO_SRP


2307 
SSL_CTX_£t_¤p_u£ºame
(
SSL_CTX
 *
ùx
, *
Çme
);

2308 
SSL_CTX_£t_¤p_·sswÜd
(
SSL_CTX
 *
ùx
, *
·sswÜd
);

2309 
SSL_CTX_£t_¤p_¡»ngth
(
SSL_CTX
 *
ùx
, 
¡»ngth
);

2310 
SSL_CTX_£t_¤p_ş›Á_pwd_ÿÎback
(
SSL_CTX
 *
ùx
,

2311 *(*
cb
è(
SSL
 *, *));

2312 
SSL_CTX_£t_¤p_v”ify_·¿m_ÿÎback
(
SSL_CTX
 *
ùx
,

2313 (*
cb
è(
SSL
 *, *));

2314 
SSL_CTX_£t_¤p_u£ºame_ÿÎback
(
SSL_CTX
 *
ùx
,

2315 (*
cb
è(
SSL
 *, *, *));

2316 
SSL_CTX_£t_¤p_cb_¬g
(
SSL_CTX
 *
ùx
, *
¬g
);

2318 
SSL_£t_¤p_£rv”_·¿m
(
SSL
 *
s
, cÚ¡ 
BIGNUM
 *
N
, cÚ¡ BIGNUM *
g
,

2319 
BIGNUM
 *
§
, BIGNUM *
v
, *
šfo
);

2320 
SSL_£t_¤p_£rv”_·¿m_pw
(
SSL
 *
s
, cÚ¡ *
u£r
, cÚ¡ *
·ss
,

2321 cÚ¡ *
g½
);

2323 
BIGNUM
 *
SSL_g‘_¤p_g
(
SSL
 *
s
);

2324 
BIGNUM
 *
SSL_g‘_¤p_N
(
SSL
 *
s
);

2326 *
SSL_g‘_¤p_u£ºame
(
SSL
 *
s
);

2327 *
SSL_g‘_¤p_u£ršfo
(
SSL
 *
s
);

2330 
SSL_û¹s_ş—r
(
SSL
 *
s
);

2331 
SSL_ä“
(
SSL
 *
s¦
);

2332 
SSL_acû±
(
SSL
 *
s¦
);

2333 
SSL_cÚÃù
(
SSL
 *
s¦
);

2334 
SSL_»ad
(
SSL
 *
s¦
, *
buf
, 
num
);

2335 
SSL_³ek
(
SSL
 *
s¦
, *
buf
, 
num
);

2336 
SSL_wr™e
(
SSL
 *
s¦
, cÚ¡ *
buf
, 
num
);

2337 
SSL_ù¾
(
SSL
 *
s¦
, 
cmd
, 
Ïrg
, *
·rg
);

2338 
SSL_ÿÎback_ù¾
(
SSL
 *, , (*)());

2339 
SSL_CTX_ù¾
(
SSL_CTX
 *
ùx
, 
cmd
, 
Ïrg
, *
·rg
);

2340 
SSL_CTX_ÿÎback_ù¾
(
SSL_CTX
 *, , (*)());

2342 
SSL_g‘_”rÜ
(cÚ¡ 
SSL
 *
s
, 
»t_code
);

2343 cÚ¡ *
SSL_g‘_v”siÚ
(cÚ¡ 
SSL
 *
s
);

2346 
SSL_CTX_£t_s¦_v”siÚ
(
SSL_CTX
 *
ùx
, cÚ¡ 
SSL_METHOD
 *
m‘h
);

2348 #iâdeà
OPENSSL_NO_SSL2_METHOD


2349 cÚ¡ 
SSL_METHOD
 *
SSLv2_m‘hod
();

2350 cÚ¡ 
SSL_METHOD
 *
SSLv2_£rv”_m‘hod
();

2351 cÚ¡ 
SSL_METHOD
 *
SSLv2_ş›Á_m‘hod
();

2354 #iâdeà
OPENSSL_NO_SSL3_METHOD


2355 cÚ¡ 
SSL_METHOD
 *
SSLv3_m‘hod
();

2356 cÚ¡ 
SSL_METHOD
 *
SSLv3_£rv”_m‘hod
();

2357 cÚ¡ 
SSL_METHOD
 *
SSLv3_ş›Á_m‘hod
();

2360 cÚ¡ 
SSL_METHOD
 *
SSLv23_m‘hod
();

2362 cÚ¡ 
SSL_METHOD
 *
SSLv23_£rv”_m‘hod
();

2364 cÚ¡ 
SSL_METHOD
 *
SSLv23_ş›Á_m‘hod
();

2367 cÚ¡ 
SSL_METHOD
 *
TLSv1_m‘hod
();

2368 cÚ¡ 
SSL_METHOD
 *
TLSv1_£rv”_m‘hod
();

2369 cÚ¡ 
SSL_METHOD
 *
TLSv1_ş›Á_m‘hod
();

2371 cÚ¡ 
SSL_METHOD
 *
TLSv1_1_m‘hod
();

2372 cÚ¡ 
SSL_METHOD
 *
TLSv1_1_£rv”_m‘hod
();

2373 cÚ¡ 
SSL_METHOD
 *
TLSv1_1_ş›Á_m‘hod
();

2375 cÚ¡ 
SSL_METHOD
 *
TLSv1_2_m‘hod
();

2376 cÚ¡ 
SSL_METHOD
 *
TLSv1_2_£rv”_m‘hod
();

2377 cÚ¡ 
SSL_METHOD
 *
TLSv1_2_ş›Á_m‘hod
();

2379 cÚ¡ 
SSL_METHOD
 *
DTLSv1_m‘hod
();

2380 cÚ¡ 
SSL_METHOD
 *
DTLSv1_£rv”_m‘hod
();

2381 cÚ¡ 
SSL_METHOD
 *
DTLSv1_ş›Á_m‘hod
();

2383 cÚ¡ 
SSL_METHOD
 *
DTLSv1_2_m‘hod
();

2384 cÚ¡ 
SSL_METHOD
 *
DTLSv1_2_£rv”_m‘hod
();

2385 cÚ¡ 
SSL_METHOD
 *
DTLSv1_2_ş›Á_m‘hod
();

2387 cÚ¡ 
SSL_METHOD
 *
DTLS_m‘hod
();

2388 cÚ¡ 
SSL_METHOD
 *
DTLS_£rv”_m‘hod
();

2389 cÚ¡ 
SSL_METHOD
 *
DTLS_ş›Á_m‘hod
();

2391 
STACK_OF
(
SSL_CIPHER
è*
SSL_g‘_ch”s
(cÚ¡ 
SSL
 *
s
);

2393 
SSL_do_hªdshake
(
SSL
 *
s
);

2394 
SSL_»ÃgÙŸ‹
(
SSL
 *
s
);

2395 
SSL_»ÃgÙŸ‹_abb»vŸ‹d
(
SSL
 *
s
);

2396 
SSL_»ÃgÙŸ‹_³ndšg
(
SSL
 *
s
);

2397 
SSL_shutdown
(
SSL
 *
s
);

2399 cÚ¡ 
SSL_METHOD
 *
SSL_CTX_g‘_s¦_m‘hod
(
SSL_CTX
 *
ùx
);

2400 cÚ¡ 
SSL_METHOD
 *
SSL_g‘_s¦_m‘hod
(
SSL
 *
s
);

2401 
SSL_£t_s¦_m‘hod
(
SSL
 *
s
, cÚ¡ 
SSL_METHOD
 *
m‘hod
);

2402 cÚ¡ *
SSL_®”t_ty³_¡ršg_lÚg
(
v®ue
);

2403 cÚ¡ *
SSL_®”t_ty³_¡ršg
(
v®ue
);

2404 cÚ¡ *
SSL_®”t_desc_¡ršg_lÚg
(
v®ue
);

2405 cÚ¡ *
SSL_®”t_desc_¡ršg
(
v®ue
);

2407 
SSL_£t_ş›Á_CA_li¡
(
SSL
 *
s
, 
STACK_OF
(
X509_NAME
è*
Çme_li¡
);

2408 
SSL_CTX_£t_ş›Á_CA_li¡
(
SSL_CTX
 *
ùx
, 
STACK_OF
(
X509_NAME
è*
Çme_li¡
);

2409 
STACK_OF
(
X509_NAME
è*
SSL_g‘_ş›Á_CA_li¡
(cÚ¡ 
SSL
 *
s
);

2410 
STACK_OF
(
X509_NAME
è*
SSL_CTX_g‘_ş›Á_CA_li¡
(cÚ¡ 
SSL_CTX
 *
s
);

2411 
SSL_add_ş›Á_CA
(
SSL
 *
s¦
, 
X509
 *
x
);

2412 
SSL_CTX_add_ş›Á_CA
(
SSL_CTX
 *
ùx
, 
X509
 *
x
);

2414 
SSL_£t_cÚÃù_¡©e
(
SSL
 *
s
);

2415 
SSL_£t_acû±_¡©e
(
SSL
 *
s
);

2417 
SSL_g‘_deçuÉ_timeout
(cÚ¡ 
SSL
 *
s
);

2419 
SSL_lib¿ry_š™
();

2421 *
SSL_CIPHER_desütiÚ
(cÚ¡ 
SSL_CIPHER
 *, *
buf
, 
size
);

2422 
STACK_OF
(
X509_NAME
è*
SSL_dup_CA_li¡
(STACK_OF(X509_NAMEè*
sk
);

2424 
SSL
 *
SSL_dup
(SSL *
s¦
);

2426 
X509
 *
SSL_g‘_û¹ifiÿ‹
(cÚ¡ 
SSL
 *
s¦
);

2429  
evp_pkey_¡
 *
SSL_g‘_´iv©ekey
(cÚ¡ 
SSL
 *
s¦
);

2431 
X509
 *
SSL_CTX_g‘0_û¹ifiÿ‹
(cÚ¡ 
SSL_CTX
 *
ùx
);

2432 
EVP_PKEY
 *
SSL_CTX_g‘0_´iv©ekey
(cÚ¡ 
SSL_CTX
 *
ùx
);

2434 
SSL_CTX_£t_qu›t_shutdown
(
SSL_CTX
 *
ùx
, 
mode
);

2435 
SSL_CTX_g‘_qu›t_shutdown
(cÚ¡ 
SSL_CTX
 *
ùx
);

2436 
SSL_£t_qu›t_shutdown
(
SSL
 *
s¦
, 
mode
);

2437 
SSL_g‘_qu›t_shutdown
(cÚ¡ 
SSL
 *
s¦
);

2438 
SSL_£t_shutdown
(
SSL
 *
s¦
, 
mode
);

2439 
SSL_g‘_shutdown
(cÚ¡ 
SSL
 *
s¦
);

2440 
SSL_v”siÚ
(cÚ¡ 
SSL
 *
s¦
);

2441 
SSL_CTX_£t_deçuÉ_v”ify_·ths
(
SSL_CTX
 *
ùx
);

2442 
SSL_CTX_lßd_v”ify_loÿtiÚs
(
SSL_CTX
 *
ùx
, cÚ¡ *
CAfe
,

2443 cÚ¡ *
CA·th
);

2444 
	#SSL_g‘0_£ssiÚ
 
SSL_g‘_£ssiÚ


	)

2445 
SSL_SESSION
 *
SSL_g‘_£ssiÚ
(cÚ¡ 
SSL
 *
s¦
);

2446 
SSL_SESSION
 *
SSL_g‘1_£ssiÚ
(
SSL
 *
s¦
);

2447 
SSL_CTX
 *
SSL_g‘_SSL_CTX
(cÚ¡ 
SSL
 *
s¦
);

2448 
SSL_CTX
 *
SSL_£t_SSL_CTX
(
SSL
 *
s¦
, SSL_CTX *
ùx
);

2449 
SSL_£t_šfo_ÿÎback
(
SSL
 *
s¦
,

2450 (*
cb
è(cÚ¡ 
SSL
 *
s¦
, 
ty³
, 
v®
));

2451 (*
SSL_g‘_šfo_ÿÎback
(cÚ¡ 
SSL
 *
s¦
)è(cÚ¡ SSL *s¦, 
ty³
,

2452 
v®
);

2453 
SSL_¡©e
(cÚ¡ 
SSL
 *
s¦
);

2454 
SSL_£t_¡©e
(
SSL
 *
s¦
, 
¡©e
);

2456 
SSL_£t_v”ify_»suÉ
(
SSL
 *
s¦
, 
v
);

2457 
SSL_g‘_v”ify_»suÉ
(cÚ¡ 
SSL
 *
s¦
);

2459 
SSL_£t_ex_d©a
(
SSL
 *
s¦
, 
idx
, *
d©a
);

2460 *
SSL_g‘_ex_d©a
(cÚ¡ 
SSL
 *
s¦
, 
idx
);

2461 
SSL_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

2462 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

2464 
SSL_SESSION_£t_ex_d©a
(
SSL_SESSION
 *
ss
, 
idx
, *
d©a
);

2465 *
SSL_SESSION_g‘_ex_d©a
(cÚ¡ 
SSL_SESSION
 *
ss
, 
idx
);

2466 
SSL_SESSION_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
,

2467 
CRYPTO_EX_Ãw
 *
Ãw_func
,

2468 
CRYPTO_EX_dup
 *
dup_func
,

2469 
CRYPTO_EX_ä“
 *
ä“_func
);

2471 
SSL_CTX_£t_ex_d©a
(
SSL_CTX
 *
s¦
, 
idx
, *
d©a
);

2472 *
SSL_CTX_g‘_ex_d©a
(cÚ¡ 
SSL_CTX
 *
s¦
, 
idx
);

2473 
SSL_CTX_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

2474 
CRYPTO_EX_dup
 *
dup_func
,

2475 
CRYPTO_EX_ä“
 *
ä“_func
);

2477 
SSL_g‘_ex_d©a_X509_STORE_CTX_idx
();

2479 
	#SSL_CTX_£ss_£t_ÿche_size
(
ùx
,
t
) \

2480 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_SESS_CACHE_SIZE
,
t
,
NULL
)

	)

2481 
	#SSL_CTX_£ss_g‘_ÿche_size
(
ùx
) \

2482 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_SESS_CACHE_SIZE
,0,
NULL
)

	)

2483 
	#SSL_CTX_£t_£ssiÚ_ÿche_mode
(
ùx
,
m
) \

2484 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_SESS_CACHE_MODE
,
m
,
NULL
)

	)

2485 
	#SSL_CTX_g‘_£ssiÚ_ÿche_mode
(
ùx
) \

2486 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_SESS_CACHE_MODE
,0,
NULL
)

	)

2488 
	#SSL_CTX_g‘_deçuÉ_»ad_ah—d
(
ùx
è
	`SSL_CTX_g‘_»ad_ah—d
(ùx)

	)

2489 
	#SSL_CTX_£t_deçuÉ_»ad_ah—d
(
ùx
,
m
è
	`SSL_CTX_£t_»ad_ah—d
(ùx,m)

	)

2490 
	#SSL_CTX_g‘_»ad_ah—d
(
ùx
) \

2491 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_READ_AHEAD
,0,
NULL
)

	)

2492 
	#SSL_CTX_£t_»ad_ah—d
(
ùx
,
m
) \

2493 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_READ_AHEAD
,
m
,
NULL
)

	)

2494 
	#SSL_CTX_g‘_max_û¹_li¡
(
ùx
) \

2495 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_GET_MAX_CERT_LIST
,0,
NULL
)

	)

2496 
	#SSL_CTX_£t_max_û¹_li¡
(
ùx
,
m
) \

2497 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_MAX_CERT_LIST
,
m
,
NULL
)

	)

2498 
	#SSL_g‘_max_û¹_li¡
(
s¦
) \

2499 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_GET_MAX_CERT_LIST
,0,
NULL
)

	)

2500 
	#SSL_£t_max_û¹_li¡
(
s¦
,
m
) \

2501 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_MAX_CERT_LIST
,
m
,
NULL
)

	)

2503 
	#SSL_CTX_£t_max_£nd_äagm’t
(
ùx
,
m
) \

2504 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_MAX_SEND_FRAGMENT
,
m
,
NULL
)

	)

2505 
	#SSL_£t_max_£nd_äagm’t
(
s¦
,
m
) \

2506 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_MAX_SEND_FRAGMENT
,
m
,
NULL
)

	)

2509 #iâdeà
OPENSSL_NO_RSA


2510 
SSL_CTX_£t_tmp_r§_ÿÎback
(
SSL_CTX
 *
ùx
,

2511 
RSA
 *(*
cb
è(
SSL
 *
s¦
, 
is_expÜt
,

2512 
keyËngth
));

2514 
SSL_£t_tmp_r§_ÿÎback
(
SSL
 *
s¦
,

2515 
RSA
 *(*
cb
è(
SSL
 *
s¦
, 
is_expÜt
,

2516 
keyËngth
));

2518 #iâdeà
OPENSSL_NO_DH


2519 
SSL_CTX_£t_tmp_dh_ÿÎback
(
SSL_CTX
 *
ùx
,

2520 
DH
 *(*
dh
è(
SSL
 *
s¦
, 
is_expÜt
,

2521 
keyËngth
));

2522 
SSL_£t_tmp_dh_ÿÎback
(
SSL
 *
s¦
,

2523 
DH
 *(*
dh
è(
SSL
 *
s¦
, 
is_expÜt
,

2524 
keyËngth
));

2526 #iâdeà
OPENSSL_NO_ECDH


2527 
SSL_CTX_£t_tmp_ecdh_ÿÎback
(
SSL_CTX
 *
ùx
,

2528 
EC_KEY
 *(*
ecdh
è(
SSL
 *
s¦
, 
is_expÜt
,

2529 
keyËngth
));

2530 
SSL_£t_tmp_ecdh_ÿÎback
(
SSL
 *
s¦
,

2531 
EC_KEY
 *(*
ecdh
è(
SSL
 *
s¦
, 
is_expÜt
,

2532 
keyËngth
));

2535 cÚ¡ 
COMP_METHOD
 *
SSL_g‘_cu¼’t_com´essiÚ
(
SSL
 *
s
);

2536 cÚ¡ 
COMP_METHOD
 *
SSL_g‘_cu¼’t_ex·nsiÚ
(
SSL
 *
s
);

2537 cÚ¡ *
SSL_COMP_g‘_Çme
(cÚ¡ 
COMP_METHOD
 *
comp
);

2538 
STACK_OF
(
SSL_COMP
è*
SSL_COMP_g‘_com´essiÚ_m‘hods
();

2539 
STACK_OF
(
SSL_COMP
è*
SSL_COMP_£t0_com´essiÚ_m‘hods
(STACK_OF(SSL_COMP)

2540 *
m‘hs
);

2541 
SSL_COMP_ä“_com´essiÚ_m‘hods
();

2542 
SSL_COMP_add_com´essiÚ_m‘hod
(
id
, 
COMP_METHOD
 *
cm
);

2544 cÚ¡ 
SSL_CIPHER
 *
SSL_CIPHER_fšd
(
SSL
 *
s¦
, cÚ¡ *
±r
);

2547 
SSL_£t_£ssiÚ_tick‘_ext
(
SSL
 *
s
, *
ext_d©a
, 
ext_Ën
);

2549 
SSL_£t_£ssiÚ_tick‘_ext_cb
(
SSL
 *
s
, 
s_£ssiÚ_tick‘_ext_cb_â
 
cb
,

2550 *
¬g
);

2553 
SSL_£t_£ssiÚ_£ü‘_cb
(
SSL
 *
s
,

2554 
s_£ssiÚ_£ü‘_cb_â
 
s_£ssiÚ_£ü‘_cb
,

2555 *
¬g
);

2557 
SSL_£t_debug
(
SSL
 *
s
, 
debug
);

2558 
SSL_ÿche_h™
(
SSL
 *
s
);

2559 
SSL_is_£rv”
(
SSL
 *
s
);

2561 
SSL_CONF_CTX
 *
SSL_CONF_CTX_Ãw
();

2562 
SSL_CONF_CTX_fšish
(
SSL_CONF_CTX
 *
cùx
);

2563 
SSL_CONF_CTX_ä“
(
SSL_CONF_CTX
 *
cùx
);

2564 
SSL_CONF_CTX_£t_æags
(
SSL_CONF_CTX
 *
cùx
, 
æags
);

2565 
SSL_CONF_CTX_ş—r_æags
(
SSL_CONF_CTX
 *
cùx
, 
æags
);

2566 
SSL_CONF_CTX_£t1_´efix
(
SSL_CONF_CTX
 *
cùx
, cÚ¡ *
´e
);

2568 
SSL_CONF_CTX_£t_s¦
(
SSL_CONF_CTX
 *
cùx
, 
SSL
 *
s¦
);

2569 
SSL_CONF_CTX_£t_s¦_ùx
(
SSL_CONF_CTX
 *
cùx
, 
SSL_CTX
 *
ùx
);

2571 
SSL_CONF_cmd
(
SSL_CONF_CTX
 *
cùx
, cÚ¡ *
cmd
, cÚ¡ *
v®ue
);

2572 
SSL_CONF_cmd_¬gv
(
SSL_CONF_CTX
 *
cùx
, *
·rgc
, ***
·rgv
);

2573 
SSL_CONF_cmd_v®ue_ty³
(
SSL_CONF_CTX
 *
cùx
, cÚ¡ *
cmd
);

2575 #iâdeà
OPENSSL_NO_SSL_TRACE


2576 
SSL_Œaû
(
wr™e_p
, 
v”siÚ
, 
cÚ‹Á_ty³
,

2577 cÚ¡ *
buf
, 
size_t
 
Ën
, 
SSL
 *
s¦
, *
¬g
);

2578 cÚ¡ *
SSL_CIPHER_¡ªd¬d_Çme
(cÚ¡ 
SSL_CIPHER
 *
c
);

2581 #iâdeà
OPENSSL_NO_UNIT_TEST


2582 cÚ¡ 
İ’s¦_s¦_‹¡_funùiÚs
 *
SSL_‹¡_funùiÚs
();

2590 
ERR_lßd_SSL_¡ršgs
();

2595 
	#SSL_F_CHECK_SUITEB_CIPHER_LIST
 331

	)

2596 
	#SSL_F_CLIENT_CERTIFICATE
 100

	)

2597 
	#SSL_F_CLIENT_FINISHED
 167

	)

2598 
	#SSL_F_CLIENT_HELLO
 101

	)

2599 
	#SSL_F_CLIENT_MASTER_KEY
 102

	)

2600 
	#SSL_F_D2I_SSL_SESSION
 103

	)

2601 
	#SSL_F_DO_DTLS1_WRITE
 245

	)

2602 
	#SSL_F_DO_SSL3_WRITE
 104

	)

2603 
	#SSL_F_DTLS1_ACCEPT
 246

	)

2604 
	#SSL_F_DTLS1_ADD_CERT_TO_BUF
 295

	)

2605 
	#SSL_F_DTLS1_BUFFER_RECORD
 247

	)

2606 
	#SSL_F_DTLS1_CHECK_TIMEOUT_NUM
 316

	)

2607 
	#SSL_F_DTLS1_CLIENT_HELLO
 248

	)

2608 
	#SSL_F_DTLS1_CONNECT
 249

	)

2609 
	#SSL_F_DTLS1_ENC
 250

	)

2610 
	#SSL_F_DTLS1_GET_HELLO_VERIFY
 251

	)

2611 
	#SSL_F_DTLS1_GET_MESSAGE
 252

	)

2612 
	#SSL_F_DTLS1_GET_MESSAGE_FRAGMENT
 253

	)

2613 
	#SSL_F_DTLS1_GET_RECORD
 254

	)

2614 
	#SSL_F_DTLS1_HANDLE_TIMEOUT
 297

	)

2615 
	#SSL_F_DTLS1_HEARTBEAT
 305

	)

2616 
	#SSL_F_DTLS1_OUTPUT_CERT_CHAIN
 255

	)

2617 
	#SSL_F_DTLS1_PREPROCESS_FRAGMENT
 288

	)

2618 
	#SSL_F_DTLS1_PROCESS_BUFFERED_RECORDS
 424

	)

2619 
	#SSL_F_DTLS1_PROCESS_OUT_OF_SEQ_MESSAGE
 256

	)

2620 
	#SSL_F_DTLS1_PROCESS_RECORD
 257

	)

2621 
	#SSL_F_DTLS1_READ_BYTES
 258

	)

2622 
	#SSL_F_DTLS1_READ_FAILED
 259

	)

2623 
	#SSL_F_DTLS1_SEND_CERTIFICATE_REQUEST
 260

	)

2624 
	#SSL_F_DTLS1_SEND_CLIENT_CERTIFICATE
 261

	)

2625 
	#SSL_F_DTLS1_SEND_CLIENT_KEY_EXCHANGE
 262

	)

2626 
	#SSL_F_DTLS1_SEND_CLIENT_VERIFY
 263

	)

2627 
	#SSL_F_DTLS1_SEND_HELLO_VERIFY_REQUEST
 264

	)

2628 
	#SSL_F_DTLS1_SEND_SERVER_CERTIFICATE
 265

	)

2629 
	#SSL_F_DTLS1_SEND_SERVER_HELLO
 266

	)

2630 
	#SSL_F_DTLS1_SEND_SERVER_KEY_EXCHANGE
 267

	)

2631 
	#SSL_F_DTLS1_WRITE_APP_DATA_BYTES
 268

	)

2632 
	#SSL_F_GET_CLIENT_FINISHED
 105

	)

2633 
	#SSL_F_GET_CLIENT_HELLO
 106

	)

2634 
	#SSL_F_GET_CLIENT_MASTER_KEY
 107

	)

2635 
	#SSL_F_GET_SERVER_FINISHED
 108

	)

2636 
	#SSL_F_GET_SERVER_HELLO
 109

	)

2637 
	#SSL_F_GET_SERVER_STATIC_DH_KEY
 340

	)

2638 
	#SSL_F_GET_SERVER_VERIFY
 110

	)

2639 
	#SSL_F_I2D_SSL_SESSION
 111

	)

2640 
	#SSL_F_READ_N
 112

	)

2641 
	#SSL_F_REQUEST_CERTIFICATE
 113

	)

2642 
	#SSL_F_SERVER_FINISH
 239

	)

2643 
	#SSL_F_SERVER_HELLO
 114

	)

2644 
	#SSL_F_SERVER_VERIFY
 240

	)

2645 
	#SSL_F_SSL23_ACCEPT
 115

	)

2646 
	#SSL_F_SSL23_CLIENT_HELLO
 116

	)

2647 
	#SSL_F_SSL23_CONNECT
 117

	)

2648 
	#SSL_F_SSL23_GET_CLIENT_HELLO
 118

	)

2649 
	#SSL_F_SSL23_GET_SERVER_HELLO
 119

	)

2650 
	#SSL_F_SSL23_PEEK
 237

	)

2651 
	#SSL_F_SSL23_READ
 120

	)

2652 
	#SSL_F_SSL23_WRITE
 121

	)

2653 
	#SSL_F_SSL2_ACCEPT
 122

	)

2654 
	#SSL_F_SSL2_CONNECT
 123

	)

2655 
	#SSL_F_SSL2_ENC_INIT
 124

	)

2656 
	#SSL_F_SSL2_GENERATE_KEY_MATERIAL
 241

	)

2657 
	#SSL_F_SSL2_PEEK
 234

	)

2658 
	#SSL_F_SSL2_READ
 125

	)

2659 
	#SSL_F_SSL2_READ_INTERNAL
 236

	)

2660 
	#SSL_F_SSL2_SET_CERTIFICATE
 126

	)

2661 
	#SSL_F_SSL2_WRITE
 127

	)

2662 
	#SSL_F_SSL3_ACCEPT
 128

	)

2663 
	#SSL_F_SSL3_ADD_CERT_TO_BUF
 296

	)

2664 
	#SSL_F_SSL3_CALLBACK_CTRL
 233

	)

2665 
	#SSL_F_SSL3_CHANGE_CIPHER_STATE
 129

	)

2666 
	#SSL_F_SSL3_CHECK_CERT_AND_ALGORITHM
 130

	)

2667 
	#SSL_F_SSL3_CHECK_CLIENT_HELLO
 304

	)

2668 
	#SSL_F_SSL3_CHECK_FINISHED
 339

	)

2669 
	#SSL_F_SSL3_CLIENT_HELLO
 131

	)

2670 
	#SSL_F_SSL3_CONNECT
 132

	)

2671 
	#SSL_F_SSL3_CTRL
 213

	)

2672 
	#SSL_F_SSL3_CTX_CTRL
 133

	)

2673 
	#SSL_F_SSL3_DIGEST_CACHED_RECORDS
 293

	)

2674 
	#SSL_F_SSL3_DO_CHANGE_CIPHER_SPEC
 292

	)

2675 
	#SSL_F_SSL3_ENC
 134

	)

2676 
	#SSL_F_SSL3_GENERATE_KEY_BLOCK
 238

	)

2677 
	#SSL_F_SSL3_GENERATE_MASTER_SECRET
 388

	)

2678 
	#SSL_F_SSL3_GET_CERTIFICATE_REQUEST
 135

	)

2679 
	#SSL_F_SSL3_GET_CERT_STATUS
 289

	)

2680 
	#SSL_F_SSL3_GET_CERT_VERIFY
 136

	)

2681 
	#SSL_F_SSL3_GET_CLIENT_CERTIFICATE
 137

	)

2682 
	#SSL_F_SSL3_GET_CLIENT_HELLO
 138

	)

2683 
	#SSL_F_SSL3_GET_CLIENT_KEY_EXCHANGE
 139

	)

2684 
	#SSL_F_SSL3_GET_FINISHED
 140

	)

2685 
	#SSL_F_SSL3_GET_KEY_EXCHANGE
 141

	)

2686 
	#SSL_F_SSL3_GET_MESSAGE
 142

	)

2687 
	#SSL_F_SSL3_GET_NEW_SESSION_TICKET
 283

	)

2688 
	#SSL_F_SSL3_GET_NEXT_PROTO
 306

	)

2689 
	#SSL_F_SSL3_GET_RECORD
 143

	)

2690 
	#SSL_F_SSL3_GET_SERVER_CERTIFICATE
 144

	)

2691 
	#SSL_F_SSL3_GET_SERVER_DONE
 145

	)

2692 
	#SSL_F_SSL3_GET_SERVER_HELLO
 146

	)

2693 
	#SSL_F_SSL3_HANDSHAKE_MAC
 285

	)

2694 
	#SSL_F_SSL3_NEW_SESSION_TICKET
 287

	)

2695 
	#SSL_F_SSL3_OUTPUT_CERT_CHAIN
 147

	)

2696 
	#SSL_F_SSL3_PEEK
 235

	)

2697 
	#SSL_F_SSL3_READ_BYTES
 148

	)

2698 
	#SSL_F_SSL3_READ_N
 149

	)

2699 
	#SSL_F_SSL3_SEND_CERTIFICATE_REQUEST
 150

	)

2700 
	#SSL_F_SSL3_SEND_CLIENT_CERTIFICATE
 151

	)

2701 
	#SSL_F_SSL3_SEND_CLIENT_KEY_EXCHANGE
 152

	)

2702 
	#SSL_F_SSL3_SEND_CLIENT_VERIFY
 153

	)

2703 
	#SSL_F_SSL3_SEND_SERVER_CERTIFICATE
 154

	)

2704 
	#SSL_F_SSL3_SEND_SERVER_HELLO
 242

	)

2705 
	#SSL_F_SSL3_SEND_SERVER_KEY_EXCHANGE
 155

	)

2706 
	#SSL_F_SSL3_SETUP_KEY_BLOCK
 157

	)

2707 
	#SSL_F_SSL3_SETUP_READ_BUFFER
 156

	)

2708 
	#SSL_F_SSL3_SETUP_WRITE_BUFFER
 291

	)

2709 
	#SSL_F_SSL3_WRITE_BYTES
 158

	)

2710 
	#SSL_F_SSL3_WRITE_PENDING
 159

	)

2711 
	#SSL_F_SSL_ADD_CERT_CHAIN
 318

	)

2712 
	#SSL_F_SSL_ADD_CERT_TO_BUF
 319

	)

2713 
	#SSL_F_SSL_ADD_CLIENTHELLO_RENEGOTIATE_EXT
 298

	)

2714 
	#SSL_F_SSL_ADD_CLIENTHELLO_TLSEXT
 277

	)

2715 
	#SSL_F_SSL_ADD_CLIENTHELLO_USE_SRTP_EXT
 307

	)

2716 
	#SSL_F_SSL_ADD_DIR_CERT_SUBJECTS_TO_STACK
 215

	)

2717 
	#SSL_F_SSL_ADD_FILE_CERT_SUBJECTS_TO_STACK
 216

	)

2718 
	#SSL_F_SSL_ADD_SERVERHELLO_RENEGOTIATE_EXT
 299

	)

2719 
	#SSL_F_SSL_ADD_SERVERHELLO_TLSEXT
 278

	)

2720 
	#SSL_F_SSL_ADD_SERVERHELLO_USE_SRTP_EXT
 308

	)

2721 
	#SSL_F_SSL_BAD_METHOD
 160

	)

2722 
	#SSL_F_SSL_BUILD_CERT_CHAIN
 332

	)

2723 
	#SSL_F_SSL_BYTES_TO_CIPHER_LIST
 161

	)

2724 
	#SSL_F_SSL_CERT_DUP
 221

	)

2725 
	#SSL_F_SSL_CERT_INST
 222

	)

2726 
	#SSL_F_SSL_CERT_INSTANTIATE
 214

	)

2727 
	#SSL_F_SSL_CERT_NEW
 162

	)

2728 
	#SSL_F_SSL_CHECK_PRIVATE_KEY
 163

	)

2729 
	#SSL_F_SSL_CHECK_SERVERHELLO_TLSEXT
 280

	)

2730 
	#SSL_F_SSL_CHECK_SRVR_ECC_CERT_AND_ALG
 279

	)

2731 
	#SSL_F_SSL_CIPHER_PROCESS_RULESTR
 230

	)

2732 
	#SSL_F_SSL_CIPHER_STRENGTH_SORT
 231

	)

2733 
	#SSL_F_SSL_CLEAR
 164

	)

2734 
	#SSL_F_SSL_COMP_ADD_COMPRESSION_METHOD
 165

	)

2735 
	#SSL_F_SSL_CONF_CMD
 334

	)

2736 
	#SSL_F_SSL_CREATE_CIPHER_LIST
 166

	)

2737 
	#SSL_F_SSL_CTRL
 232

	)

2738 
	#SSL_F_SSL_CTX_CHECK_PRIVATE_KEY
 168

	)

2739 
	#SSL_F_SSL_CTX_MAKE_PROFILES
 309

	)

2740 
	#SSL_F_SSL_CTX_NEW
 169

	)

2741 
	#SSL_F_SSL_CTX_SET_CIPHER_LIST
 269

	)

2742 
	#SSL_F_SSL_CTX_SET_CLIENT_CERT_ENGINE
 290

	)

2743 
	#SSL_F_SSL_CTX_SET_PURPOSE
 226

	)

2744 
	#SSL_F_SSL_CTX_SET_SESSION_ID_CONTEXT
 219

	)

2745 
	#SSL_F_SSL_CTX_SET_SSL_VERSION
 170

	)

2746 
	#SSL_F_SSL_CTX_SET_TRUST
 229

	)

2747 
	#SSL_F_SSL_CTX_USE_CERTIFICATE
 171

	)

2748 
	#SSL_F_SSL_CTX_USE_CERTIFICATE_ASN1
 172

	)

2749 
	#SSL_F_SSL_CTX_USE_CERTIFICATE_CHAIN_FILE
 220

	)

2750 
	#SSL_F_SSL_CTX_USE_CERTIFICATE_FILE
 173

	)

2751 
	#SSL_F_SSL_CTX_USE_PRIVATEKEY
 174

	)

2752 
	#SSL_F_SSL_CTX_USE_PRIVATEKEY_ASN1
 175

	)

2753 
	#SSL_F_SSL_CTX_USE_PRIVATEKEY_FILE
 176

	)

2754 
	#SSL_F_SSL_CTX_USE_PSK_IDENTITY_HINT
 272

	)

2755 
	#SSL_F_SSL_CTX_USE_RSAPRIVATEKEY
 177

	)

2756 
	#SSL_F_SSL_CTX_USE_RSAPRIVATEKEY_ASN1
 178

	)

2757 
	#SSL_F_SSL_CTX_USE_RSAPRIVATEKEY_FILE
 179

	)

2758 
	#SSL_F_SSL_CTX_USE_SERVERINFO
 336

	)

2759 
	#SSL_F_SSL_CTX_USE_SERVERINFO_FILE
 337

	)

2760 
	#SSL_F_SSL_DO_HANDSHAKE
 180

	)

2761 
	#SSL_F_SSL_GET_NEW_SESSION
 181

	)

2762 
	#SSL_F_SSL_GET_PREV_SESSION
 217

	)

2763 
	#SSL_F_SSL_GET_SERVER_CERT_INDEX
 322

	)

2764 
	#SSL_F_SSL_GET_SERVER_SEND_CERT
 182

	)

2765 
	#SSL_F_SSL_GET_SERVER_SEND_PKEY
 317

	)

2766 
	#SSL_F_SSL_GET_SIGN_PKEY
 183

	)

2767 
	#SSL_F_SSL_INIT_WBIO_BUFFER
 184

	)

2768 
	#SSL_F_SSL_LOAD_CLIENT_CA_FILE
 185

	)

2769 
	#SSL_F_SSL_NEW
 186

	)

2770 
	#SSL_F_SSL_PARSE_CLIENTHELLO_RENEGOTIATE_EXT
 300

	)

2771 
	#SSL_F_SSL_PARSE_CLIENTHELLO_TLSEXT
 302

	)

2772 
	#SSL_F_SSL_PARSE_CLIENTHELLO_USE_SRTP_EXT
 310

	)

2773 
	#SSL_F_SSL_PARSE_SERVERHELLO_RENEGOTIATE_EXT
 301

	)

2774 
	#SSL_F_SSL_PARSE_SERVERHELLO_TLSEXT
 303

	)

2775 
	#SSL_F_SSL_PARSE_SERVERHELLO_USE_SRTP_EXT
 311

	)

2776 
	#SSL_F_SSL_PEEK
 270

	)

2777 
	#SSL_F_SSL_PREPARE_CLIENTHELLO_TLSEXT
 281

	)

2778 
	#SSL_F_SSL_PREPARE_SERVERHELLO_TLSEXT
 282

	)

2779 
	#SSL_F_SSL_READ
 223

	)

2780 
	#SSL_F_SSL_RSA_PRIVATE_DECRYPT
 187

	)

2781 
	#SSL_F_SSL_RSA_PUBLIC_ENCRYPT
 188

	)

2782 
	#SSL_F_SSL_SCAN_CLIENTHELLO_TLSEXT
 320

	)

2783 
	#SSL_F_SSL_SCAN_SERVERHELLO_TLSEXT
 321

	)

2784 
	#SSL_F_SSL_SESSION_DUP
 348

	)

2785 
	#SSL_F_SSL_SESSION_NEW
 189

	)

2786 
	#SSL_F_SSL_SESSION_PRINT_FP
 190

	)

2787 
	#SSL_F_SSL_SESSION_SET1_ID_CONTEXT
 312

	)

2788 
	#SSL_F_SSL_SESS_CERT_NEW
 225

	)

2789 
	#SSL_F_SSL_SET_CERT
 191

	)

2790 
	#SSL_F_SSL_SET_CIPHER_LIST
 271

	)

2791 
	#SSL_F_SSL_SET_FD
 192

	)

2792 
	#SSL_F_SSL_SET_PKEY
 193

	)

2793 
	#SSL_F_SSL_SET_PURPOSE
 227

	)

2794 
	#SSL_F_SSL_SET_RFD
 194

	)

2795 
	#SSL_F_SSL_SET_SESSION
 195

	)

2796 
	#SSL_F_SSL_SET_SESSION_ID_CONTEXT
 218

	)

2797 
	#SSL_F_SSL_SET_SESSION_TICKET_EXT
 294

	)

2798 
	#SSL_F_SSL_SET_TRUST
 228

	)

2799 
	#SSL_F_SSL_SET_WFD
 196

	)

2800 
	#SSL_F_SSL_SHUTDOWN
 224

	)

2801 
	#SSL_F_SSL_SRP_CTX_INIT
 313

	)

2802 
	#SSL_F_SSL_UNDEFINED_CONST_FUNCTION
 243

	)

2803 
	#SSL_F_SSL_UNDEFINED_FUNCTION
 197

	)

2804 
	#SSL_F_SSL_UNDEFINED_VOID_FUNCTION
 244

	)

2805 
	#SSL_F_SSL_USE_CERTIFICATE
 198

	)

2806 
	#SSL_F_SSL_USE_CERTIFICATE_ASN1
 199

	)

2807 
	#SSL_F_SSL_USE_CERTIFICATE_FILE
 200

	)

2808 
	#SSL_F_SSL_USE_PRIVATEKEY
 201

	)

2809 
	#SSL_F_SSL_USE_PRIVATEKEY_ASN1
 202

	)

2810 
	#SSL_F_SSL_USE_PRIVATEKEY_FILE
 203

	)

2811 
	#SSL_F_SSL_USE_PSK_IDENTITY_HINT
 273

	)

2812 
	#SSL_F_SSL_USE_RSAPRIVATEKEY
 204

	)

2813 
	#SSL_F_SSL_USE_RSAPRIVATEKEY_ASN1
 205

	)

2814 
	#SSL_F_SSL_USE_RSAPRIVATEKEY_FILE
 206

	)

2815 
	#SSL_F_SSL_VERIFY_CERT_CHAIN
 207

	)

2816 
	#SSL_F_SSL_WRITE
 208

	)

2817 
	#SSL_F_TLS12_CHECK_PEER_SIGALG
 333

	)

2818 
	#SSL_F_TLS1_CERT_VERIFY_MAC
 286

	)

2819 
	#SSL_F_TLS1_CHANGE_CIPHER_STATE
 209

	)

2820 
	#SSL_F_TLS1_CHECK_SERVERHELLO_TLSEXT
 274

	)

2821 
	#SSL_F_TLS1_ENC
 210

	)

2822 
	#SSL_F_TLS1_EXPORT_KEYING_MATERIAL
 314

	)

2823 
	#SSL_F_TLS1_GET_CURVELIST
 338

	)

2824 
	#SSL_F_TLS1_HEARTBEAT
 315

	)

2825 
	#SSL_F_TLS1_PREPARE_CLIENTHELLO_TLSEXT
 275

	)

2826 
	#SSL_F_TLS1_PREPARE_SERVERHELLO_TLSEXT
 276

	)

2827 
	#SSL_F_TLS1_PRF
 284

	)

2828 
	#SSL_F_TLS1_SETUP_KEY_BLOCK
 211

	)

2829 
	#SSL_F_TLS1_SET_SERVER_SIGALGS
 335

	)

2830 
	#SSL_F_WRITE_PENDING
 212

	)

2833 
	#SSL_R_APP_DATA_IN_HANDSHAKE
 100

	)

2834 
	#SSL_R_ATTEMPT_TO_REUSE_SESSION_IN_DIFFERENT_CONTEXT
 272

	)

2835 
	#SSL_R_BAD_ALERT_RECORD
 101

	)

2836 
	#SSL_R_BAD_AUTHENTICATION_TYPE
 102

	)

2837 
	#SSL_R_BAD_CHANGE_CIPHER_SPEC
 103

	)

2838 
	#SSL_R_BAD_CHECKSUM
 104

	)

2839 
	#SSL_R_BAD_DATA
 390

	)

2840 
	#SSL_R_BAD_DATA_RETURNED_BY_CALLBACK
 106

	)

2841 
	#SSL_R_BAD_DECOMPRESSION
 107

	)

2842 
	#SSL_R_BAD_DH_G_LENGTH
 108

	)

2843 
	#SSL_R_BAD_DH_G_VALUE
 375

	)

2844 
	#SSL_R_BAD_DH_PUB_KEY_LENGTH
 109

	)

2845 
	#SSL_R_BAD_DH_PUB_KEY_VALUE
 393

	)

2846 
	#SSL_R_BAD_DH_P_LENGTH
 110

	)

2847 
	#SSL_R_BAD_DH_P_VALUE
 395

	)

2848 
	#SSL_R_BAD_DIGEST_LENGTH
 111

	)

2849 
	#SSL_R_BAD_DSA_SIGNATURE
 112

	)

2850 
	#SSL_R_BAD_ECC_CERT
 304

	)

2851 
	#SSL_R_BAD_ECDSA_SIGNATURE
 305

	)

2852 
	#SSL_R_BAD_ECPOINT
 306

	)

2853 
	#SSL_R_BAD_HANDSHAKE_LENGTH
 332

	)

2854 
	#SSL_R_BAD_HELLO_REQUEST
 105

	)

2855 
	#SSL_R_BAD_LENGTH
 271

	)

2856 
	#SSL_R_BAD_MAC_DECODE
 113

	)

2857 
	#SSL_R_BAD_MAC_LENGTH
 333

	)

2858 
	#SSL_R_BAD_MESSAGE_TYPE
 114

	)

2859 
	#SSL_R_BAD_PACKET_LENGTH
 115

	)

2860 
	#SSL_R_BAD_PROTOCOL_VERSION_NUMBER
 116

	)

2861 
	#SSL_R_BAD_PSK_IDENTITY_HINT_LENGTH
 316

	)

2862 
	#SSL_R_BAD_RESPONSE_ARGUMENT
 117

	)

2863 
	#SSL_R_BAD_RSA_DECRYPT
 118

	)

2864 
	#SSL_R_BAD_RSA_ENCRYPT
 119

	)

2865 
	#SSL_R_BAD_RSA_E_LENGTH
 120

	)

2866 
	#SSL_R_BAD_RSA_MODULUS_LENGTH
 121

	)

2867 
	#SSL_R_BAD_RSA_SIGNATURE
 122

	)

2868 
	#SSL_R_BAD_SIGNATURE
 123

	)

2869 
	#SSL_R_BAD_SRP_A_LENGTH
 347

	)

2870 
	#SSL_R_BAD_SRP_B_LENGTH
 348

	)

2871 
	#SSL_R_BAD_SRP_G_LENGTH
 349

	)

2872 
	#SSL_R_BAD_SRP_N_LENGTH
 350

	)

2873 
	#SSL_R_BAD_SRP_PARAMETERS
 371

	)

2874 
	#SSL_R_BAD_SRP_S_LENGTH
 351

	)

2875 
	#SSL_R_BAD_SRTP_MKI_VALUE
 352

	)

2876 
	#SSL_R_BAD_SRTP_PROTECTION_PROFILE_LIST
 353

	)

2877 
	#SSL_R_BAD_SSL_FILETYPE
 124

	)

2878 
	#SSL_R_BAD_SSL_SESSION_ID_LENGTH
 125

	)

2879 
	#SSL_R_BAD_STATE
 126

	)

2880 
	#SSL_R_BAD_VALUE
 384

	)

2881 
	#SSL_R_BAD_WRITE_RETRY
 127

	)

2882 
	#SSL_R_BIO_NOT_SET
 128

	)

2883 
	#SSL_R_BLOCK_CIPHER_PAD_IS_WRONG
 129

	)

2884 
	#SSL_R_BN_LIB
 130

	)

2885 
	#SSL_R_CA_DN_LENGTH_MISMATCH
 131

	)

2886 
	#SSL_R_CA_DN_TOO_LONG
 132

	)

2887 
	#SSL_R_CCS_RECEIVED_EARLY
 133

	)

2888 
	#SSL_R_CERTIFICATE_VERIFY_FAILED
 134

	)

2889 
	#SSL_R_CERT_CB_ERROR
 377

	)

2890 
	#SSL_R_CERT_LENGTH_MISMATCH
 135

	)

2891 
	#SSL_R_CHALLENGE_IS_DIFFERENT
 136

	)

2892 
	#SSL_R_CIPHER_CODE_WRONG_LENGTH
 137

	)

2893 
	#SSL_R_CIPHER_OR_HASH_UNAVAILABLE
 138

	)

2894 
	#SSL_R_CIPHER_TABLE_SRC_ERROR
 139

	)

2895 
	#SSL_R_CLIENTHELLO_TLSEXT
 226

	)

2896 
	#SSL_R_COMPRESSED_LENGTH_TOO_LONG
 140

	)

2897 
	#SSL_R_COMPRESSION_DISABLED
 343

	)

2898 
	#SSL_R_COMPRESSION_FAILURE
 141

	)

2899 
	#SSL_R_COMPRESSION_ID_NOT_WITHIN_PRIVATE_RANGE
 307

	)

2900 
	#SSL_R_COMPRESSION_LIBRARY_ERROR
 142

	)

2901 
	#SSL_R_CONNECTION_ID_IS_DIFFERENT
 143

	)

2902 
	#SSL_R_CONNECTION_TYPE_NOT_SET
 144

	)

2903 
	#SSL_R_COOKIE_MISMATCH
 308

	)

2904 
	#SSL_R_DATA_BETWEEN_CCS_AND_FINISHED
 145

	)

2905 
	#SSL_R_DATA_LENGTH_TOO_LONG
 146

	)

2906 
	#SSL_R_DECRYPTION_FAILED
 147

	)

2907 
	#SSL_R_DECRYPTION_FAILED_OR_BAD_RECORD_MAC
 281

	)

2908 
	#SSL_R_DH_KEY_TOO_SMALL
 372

	)

2909 
	#SSL_R_DH_PUBLIC_VALUE_LENGTH_IS_WRONG
 148

	)

2910 
	#SSL_R_DIGEST_CHECK_FAILED
 149

	)

2911 
	#SSL_R_DTLS_MESSAGE_TOO_BIG
 334

	)

2912 
	#SSL_R_DUPLICATE_COMPRESSION_ID
 309

	)

2913 
	#SSL_R_ECC_CERT_NOT_FOR_KEY_AGREEMENT
 317

	)

2914 
	#SSL_R_ECC_CERT_NOT_FOR_SIGNING
 318

	)

2915 
	#SSL_R_ECC_CERT_SHOULD_HAVE_RSA_SIGNATURE
 322

	)

2916 
	#SSL_R_ECC_CERT_SHOULD_HAVE_SHA1_SIGNATURE
 323

	)

2917 
	#SSL_R_ECDH_REQUIRED_FOR_SUITEB_MODE
 374

	)

2918 
	#SSL_R_ECGROUP_TOO_LARGE_FOR_CIPHER
 310

	)

2919 
	#SSL_R_EMPTY_SRTP_PROTECTION_PROFILE_LIST
 354

	)

2920 
	#SSL_R_ENCRYPTED_LENGTH_TOO_LONG
 150

	)

2921 
	#SSL_R_ERROR_GENERATING_TMP_RSA_KEY
 282

	)

2922 
	#SSL_R_ERROR_IN_RECEIVED_CIPHER_LIST
 151

	)

2923 
	#SSL_R_EXCESSIVE_MESSAGE_SIZE
 152

	)

2924 
	#SSL_R_EXTRA_DATA_IN_MESSAGE
 153

	)

2925 
	#SSL_R_GOT_A_FIN_BEFORE_A_CCS
 154

	)

2926 
	#SSL_R_GOT_NEXT_PROTO_BEFORE_A_CCS
 355

	)

2927 
	#SSL_R_GOT_NEXT_PROTO_WITHOUT_EXTENSION
 356

	)

2928 
	#SSL_R_HTTPS_PROXY_REQUEST
 155

	)

2929 
	#SSL_R_HTTP_REQUEST
 156

	)

2930 
	#SSL_R_ILLEGAL_PADDING
 283

	)

2931 
	#SSL_R_ILLEGAL_SUITEB_DIGEST
 380

	)

2932 
	#SSL_R_INAPPROPRIATE_FALLBACK
 373

	)

2933 
	#SSL_R_INCONSISTENT_COMPRESSION
 340

	)

2934 
	#SSL_R_INVALID_CHALLENGE_LENGTH
 158

	)

2935 
	#SSL_R_INVALID_COMMAND
 280

	)

2936 
	#SSL_R_INVALID_COMPRESSION_ALGORITHM
 341

	)

2937 
	#SSL_R_INVALID_NULL_CMD_NAME
 385

	)

2938 
	#SSL_R_INVALID_PURPOSE
 278

	)

2939 
	#SSL_R_INVALID_SERVERINFO_DATA
 388

	)

2940 
	#SSL_R_INVALID_SRP_USERNAME
 357

	)

2941 
	#SSL_R_INVALID_STATUS_RESPONSE
 328

	)

2942 
	#SSL_R_INVALID_TICKET_KEYS_LENGTH
 325

	)

2943 
	#SSL_R_INVALID_TRUST
 279

	)

2944 
	#SSL_R_KEY_ARG_TOO_LONG
 284

	)

2945 
	#SSL_R_KRB5
 285

	)

2946 
	#SSL_R_KRB5_C_CC_PRINC
 286

	)

2947 
	#SSL_R_KRB5_C_GET_CRED
 287

	)

2948 
	#SSL_R_KRB5_C_INIT
 288

	)

2949 
	#SSL_R_KRB5_C_MK_REQ
 289

	)

2950 
	#SSL_R_KRB5_S_BAD_TICKET
 290

	)

2951 
	#SSL_R_KRB5_S_INIT
 291

	)

2952 
	#SSL_R_KRB5_S_RD_REQ
 292

	)

2953 
	#SSL_R_KRB5_S_TKT_EXPIRED
 293

	)

2954 
	#SSL_R_KRB5_S_TKT_NYV
 294

	)

2955 
	#SSL_R_KRB5_S_TKT_SKEW
 295

	)

2956 
	#SSL_R_LENGTH_MISMATCH
 159

	)

2957 
	#SSL_R_LENGTH_TOO_LONG
 404

	)

2958 
	#SSL_R_LENGTH_TOO_SHORT
 160

	)

2959 
	#SSL_R_LIBRARY_BUG
 274

	)

2960 
	#SSL_R_LIBRARY_HAS_NO_CIPHERS
 161

	)

2961 
	#SSL_R_MESSAGE_TOO_LONG
 296

	)

2962 
	#SSL_R_MISSING_DH_DSA_CERT
 162

	)

2963 
	#SSL_R_MISSING_DH_KEY
 163

	)

2964 
	#SSL_R_MISSING_DH_RSA_CERT
 164

	)

2965 
	#SSL_R_MISSING_DSA_SIGNING_CERT
 165

	)

2966 
	#SSL_R_MISSING_ECDH_CERT
 382

	)

2967 
	#SSL_R_MISSING_ECDSA_SIGNING_CERT
 381

	)

2968 
	#SSL_R_MISSING_EXPORT_TMP_DH_KEY
 166

	)

2969 
	#SSL_R_MISSING_EXPORT_TMP_RSA_KEY
 167

	)

2970 
	#SSL_R_MISSING_RSA_CERTIFICATE
 168

	)

2971 
	#SSL_R_MISSING_RSA_ENCRYPTING_CERT
 169

	)

2972 
	#SSL_R_MISSING_RSA_SIGNING_CERT
 170

	)

2973 
	#SSL_R_MISSING_SRP_PARAM
 358

	)

2974 
	#SSL_R_MISSING_TMP_DH_KEY
 171

	)

2975 
	#SSL_R_MISSING_TMP_ECDH_KEY
 311

	)

2976 
	#SSL_R_MISSING_TMP_RSA_KEY
 172

	)

2977 
	#SSL_R_MISSING_TMP_RSA_PKEY
 173

	)

2978 
	#SSL_R_MISSING_VERIFY_MESSAGE
 174

	)

2979 
	#SSL_R_MULTIPLE_SGC_RESTARTS
 346

	)

2980 
	#SSL_R_NON_SSLV2_INITIAL_PACKET
 175

	)

2981 
	#SSL_R_NO_CERTIFICATES_RETURNED
 176

	)

2982 
	#SSL_R_NO_CERTIFICATE_ASSIGNED
 177

	)

2983 
	#SSL_R_NO_CERTIFICATE_RETURNED
 178

	)

2984 
	#SSL_R_NO_CERTIFICATE_SET
 179

	)

2985 
	#SSL_R_NO_CERTIFICATE_SPECIFIED
 180

	)

2986 
	#SSL_R_NO_CIPHERS_AVAILABLE
 181

	)

2987 
	#SSL_R_NO_CIPHERS_PASSED
 182

	)

2988 
	#SSL_R_NO_CIPHERS_SPECIFIED
 183

	)

2989 
	#SSL_R_NO_CIPHER_LIST
 184

	)

2990 
	#SSL_R_NO_CIPHER_MATCH
 185

	)

2991 
	#SSL_R_NO_CLIENT_CERT_METHOD
 331

	)

2992 
	#SSL_R_NO_CLIENT_CERT_RECEIVED
 186

	)

2993 
	#SSL_R_NO_COMPRESSION_SPECIFIED
 187

	)

2994 
	#SSL_R_NO_GOST_CERTIFICATE_SENT_BY_PEER
 330

	)

2995 
	#SSL_R_NO_METHOD_SPECIFIED
 188

	)

2996 
	#SSL_R_NO_PEM_EXTENSIONS
 389

	)

2997 
	#SSL_R_NO_PRIVATEKEY
 189

	)

2998 
	#SSL_R_NO_PRIVATE_KEY_ASSIGNED
 190

	)

2999 
	#SSL_R_NO_PROTOCOLS_AVAILABLE
 191

	)

3000 
	#SSL_R_NO_PUBLICKEY
 192

	)

3001 
	#SSL_R_NO_RENEGOTIATION
 339

	)

3002 
	#SSL_R_NO_REQUIRED_DIGEST
 324

	)

3003 
	#SSL_R_NO_SHARED_CIPHER
 193

	)

3004 
	#SSL_R_NO_SHARED_SIGATURE_ALGORITHMS
 376

	)

3005 
	#SSL_R_NO_SRTP_PROFILES
 359

	)

3006 
	#SSL_R_NO_VERIFY_CALLBACK
 194

	)

3007 
	#SSL_R_NULL_SSL_CTX
 195

	)

3008 
	#SSL_R_NULL_SSL_METHOD_PASSED
 196

	)

3009 
	#SSL_R_OLD_SESSION_CIPHER_NOT_RETURNED
 197

	)

3010 
	#SSL_R_OLD_SESSION_COMPRESSION_ALGORITHM_NOT_RETURNED
 344

	)

3011 
	#SSL_R_ONLY_DTLS_1_2_ALLOWED_IN_SUITEB_MODE
 387

	)

3012 
	#SSL_R_ONLY_TLS_1_2_ALLOWED_IN_SUITEB_MODE
 379

	)

3013 
	#SSL_R_ONLY_TLS_ALLOWED_IN_FIPS_MODE
 297

	)

3014 
	#SSL_R_OPAQUE_PRF_INPUT_TOO_LONG
 327

	)

3015 
	#SSL_R_PACKET_LENGTH_TOO_LONG
 198

	)

3016 
	#SSL_R_PARSE_TLSEXT
 227

	)

3017 
	#SSL_R_PATH_TOO_LONG
 270

	)

3018 
	#SSL_R_PEER_DID_NOT_RETURN_A_CERTIFICATE
 199

	)

3019 
	#SSL_R_PEER_ERROR
 200

	)

3020 
	#SSL_R_PEER_ERROR_CERTIFICATE
 201

	)

3021 
	#SSL_R_PEER_ERROR_NO_CERTIFICATE
 202

	)

3022 
	#SSL_R_PEER_ERROR_NO_CIPHER
 203

	)

3023 
	#SSL_R_PEER_ERROR_UNSUPPORTED_CERTIFICATE_TYPE
 204

	)

3024 
	#SSL_R_PEM_NAME_BAD_PREFIX
 391

	)

3025 
	#SSL_R_PEM_NAME_TOO_SHORT
 392

	)

3026 
	#SSL_R_PRE_MAC_LENGTH_TOO_LONG
 205

	)

3027 
	#SSL_R_PROBLEMS_MAPPING_CIPHER_FUNCTIONS
 206

	)

3028 
	#SSL_R_PROTOCOL_IS_SHUTDOWN
 207

	)

3029 
	#SSL_R_PSK_IDENTITY_NOT_FOUND
 223

	)

3030 
	#SSL_R_PSK_NO_CLIENT_CB
 224

	)

3031 
	#SSL_R_PSK_NO_SERVER_CB
 225

	)

3032 
	#SSL_R_PUBLIC_KEY_ENCRYPT_ERROR
 208

	)

3033 
	#SSL_R_PUBLIC_KEY_IS_NOT_RSA
 209

	)

3034 
	#SSL_R_PUBLIC_KEY_NOT_RSA
 210

	)

3035 
	#SSL_R_READ_BIO_NOT_SET
 211

	)

3036 
	#SSL_R_READ_TIMEOUT_EXPIRED
 312

	)

3037 
	#SSL_R_READ_WRONG_PACKET_TYPE
 212

	)

3038 
	#SSL_R_RECORD_LENGTH_MISMATCH
 213

	)

3039 
	#SSL_R_RECORD_TOO_LARGE
 214

	)

3040 
	#SSL_R_RECORD_TOO_SMALL
 298

	)

3041 
	#SSL_R_RENEGOTIATE_EXT_TOO_LONG
 335

	)

3042 
	#SSL_R_RENEGOTIATION_ENCODING_ERR
 336

	)

3043 
	#SSL_R_RENEGOTIATION_MISMATCH
 337

	)

3044 
	#SSL_R_REQUIRED_CIPHER_MISSING
 215

	)

3045 
	#SSL_R_REQUIRED_COMPRESSSION_ALGORITHM_MISSING
 342

	)

3046 
	#SSL_R_REUSE_CERT_LENGTH_NOT_ZERO
 216

	)

3047 
	#SSL_R_REUSE_CERT_TYPE_NOT_ZERO
 217

	)

3048 
	#SSL_R_REUSE_CIPHER_LIST_NOT_ZERO
 218

	)

3049 
	#SSL_R_SCSV_RECEIVED_WHEN_RENEGOTIATING
 345

	)

3050 
	#SSL_R_SERVERHELLO_TLSEXT
 275

	)

3051 
	#SSL_R_SESSION_ID_CONTEXT_UNINITIALIZED
 277

	)

3052 
	#SSL_R_SHORT_READ
 219

	)

3053 
	#SSL_R_SHUTDOWN_WHILE_IN_INIT
 407

	)

3054 
	#SSL_R_SIGNATURE_ALGORITHMS_ERROR
 360

	)

3055 
	#SSL_R_SIGNATURE_FOR_NON_SIGNING_CERTIFICATE
 220

	)

3056 
	#SSL_R_SRP_A_CALC
 361

	)

3057 
	#SSL_R_SRTP_COULD_NOT_ALLOCATE_PROFILES
 362

	)

3058 
	#SSL_R_SRTP_PROTECTION_PROFILE_LIST_TOO_LONG
 363

	)

3059 
	#SSL_R_SRTP_UNKNOWN_PROTECTION_PROFILE
 364

	)

3060 
	#SSL_R_SSL23_DOING_SESSION_ID_REUSE
 221

	)

3061 
	#SSL_R_SSL2_CONNECTION_ID_TOO_LONG
 299

	)

3062 
	#SSL_R_SSL3_EXT_INVALID_ECPOINTFORMAT
 321

	)

3063 
	#SSL_R_SSL3_EXT_INVALID_SERVERNAME
 319

	)

3064 
	#SSL_R_SSL3_EXT_INVALID_SERVERNAME_TYPE
 320

	)

3065 
	#SSL_R_SSL3_SESSION_ID_TOO_LONG
 300

	)

3066 
	#SSL_R_SSL3_SESSION_ID_TOO_SHORT
 222

	)

3067 
	#SSL_R_SSLV3_ALERT_BAD_CERTIFICATE
 1042

	)

3068 
	#SSL_R_SSLV3_ALERT_BAD_RECORD_MAC
 1020

	)

3069 
	#SSL_R_SSLV3_ALERT_CERTIFICATE_EXPIRED
 1045

	)

3070 
	#SSL_R_SSLV3_ALERT_CERTIFICATE_REVOKED
 1044

	)

3071 
	#SSL_R_SSLV3_ALERT_CERTIFICATE_UNKNOWN
 1046

	)

3072 
	#SSL_R_SSLV3_ALERT_DECOMPRESSION_FAILURE
 1030

	)

3073 
	#SSL_R_SSLV3_ALERT_HANDSHAKE_FAILURE
 1040

	)

3074 
	#SSL_R_SSLV3_ALERT_ILLEGAL_PARAMETER
 1047

	)

3075 
	#SSL_R_SSLV3_ALERT_NO_CERTIFICATE
 1041

	)

3076 
	#SSL_R_SSLV3_ALERT_UNEXPECTED_MESSAGE
 1010

	)

3077 
	#SSL_R_SSLV3_ALERT_UNSUPPORTED_CERTIFICATE
 1043

	)

3078 
	#SSL_R_SSL_CTX_HAS_NO_DEFAULT_SSL_VERSION
 228

	)

3079 
	#SSL_R_SSL_HANDSHAKE_FAILURE
 229

	)

3080 
	#SSL_R_SSL_LIBRARY_HAS_NO_CIPHERS
 230

	)

3081 
	#SSL_R_SSL_SESSION_ID_CALLBACK_FAILED
 301

	)

3082 
	#SSL_R_SSL_SESSION_ID_CONFLICT
 302

	)

3083 
	#SSL_R_SSL_SESSION_ID_CONTEXT_TOO_LONG
 273

	)

3084 
	#SSL_R_SSL_SESSION_ID_HAS_BAD_LENGTH
 303

	)

3085 
	#SSL_R_SSL_SESSION_ID_IS_DIFFERENT
 231

	)

3086 
	#SSL_R_TLSV1_ALERT_ACCESS_DENIED
 1049

	)

3087 
	#SSL_R_TLSV1_ALERT_DECODE_ERROR
 1050

	)

3088 
	#SSL_R_TLSV1_ALERT_DECRYPTION_FAILED
 1021

	)

3089 
	#SSL_R_TLSV1_ALERT_DECRYPT_ERROR
 1051

	)

3090 
	#SSL_R_TLSV1_ALERT_EXPORT_RESTRICTION
 1060

	)

3091 
	#SSL_R_TLSV1_ALERT_INAPPROPRIATE_FALLBACK
 1086

	)

3092 
	#SSL_R_TLSV1_ALERT_INSUFFICIENT_SECURITY
 1071

	)

3093 
	#SSL_R_TLSV1_ALERT_INTERNAL_ERROR
 1080

	)

3094 
	#SSL_R_TLSV1_ALERT_NO_RENEGOTIATION
 1100

	)

3095 
	#SSL_R_TLSV1_ALERT_PROTOCOL_VERSION
 1070

	)

3096 
	#SSL_R_TLSV1_ALERT_RECORD_OVERFLOW
 1022

	)

3097 
	#SSL_R_TLSV1_ALERT_UNKNOWN_CA
 1048

	)

3098 
	#SSL_R_TLSV1_ALERT_USER_CANCELLED
 1090

	)

3099 
	#SSL_R_TLSV1_BAD_CERTIFICATE_HASH_VALUE
 1114

	)

3100 
	#SSL_R_TLSV1_BAD_CERTIFICATE_STATUS_RESPONSE
 1113

	)

3101 
	#SSL_R_TLSV1_CERTIFICATE_UNOBTAINABLE
 1111

	)

3102 
	#SSL_R_TLSV1_UNRECOGNIZED_NAME
 1112

	)

3103 
	#SSL_R_TLSV1_UNSUPPORTED_EXTENSION
 1110

	)

3104 
	#SSL_R_TLS_CLIENT_CERT_REQ_WITH_ANON_CIPHER
 232

	)

3105 
	#SSL_R_TLS_HEARTBEAT_PEER_DOESNT_ACCEPT
 365

	)

3106 
	#SSL_R_TLS_HEARTBEAT_PENDING
 366

	)

3107 
	#SSL_R_TLS_ILLEGAL_EXPORTER_LABEL
 367

	)

3108 
	#SSL_R_TLS_INVALID_ECPOINTFORMAT_LIST
 157

	)

3109 
	#SSL_R_TLS_PEER_DID_NOT_RESPOND_WITH_CERTIFICATE_LIST
 233

	)

3110 
	#SSL_R_TLS_RSA_ENCRYPTED_VALUE_LENGTH_IS_WRONG
 234

	)

3111 
	#SSL_R_TOO_MANY_WARN_ALERTS
 409

	)

3112 
	#SSL_R_TRIED_TO_USE_UNSUPPORTED_CIPHER
 235

	)

3113 
	#SSL_R_UNABLE_TO_DECODE_DH_CERTS
 236

	)

3114 
	#SSL_R_UNABLE_TO_DECODE_ECDH_CERTS
 313

	)

3115 
	#SSL_R_UNABLE_TO_EXTRACT_PUBLIC_KEY
 237

	)

3116 
	#SSL_R_UNABLE_TO_FIND_DH_PARAMETERS
 238

	)

3117 
	#SSL_R_UNABLE_TO_FIND_ECDH_PARAMETERS
 314

	)

3118 
	#SSL_R_UNABLE_TO_FIND_PUBLIC_KEY_PARAMETERS
 239

	)

3119 
	#SSL_R_UNABLE_TO_FIND_SSL_METHOD
 240

	)

3120 
	#SSL_R_UNABLE_TO_LOAD_SSL2_MD5_ROUTINES
 241

	)

3121 
	#SSL_R_UNABLE_TO_LOAD_SSL3_MD5_ROUTINES
 242

	)

3122 
	#SSL_R_UNABLE_TO_LOAD_SSL3_SHA1_ROUTINES
 243

	)

3123 
	#SSL_R_UNEXPECTED_MESSAGE
 244

	)

3124 
	#SSL_R_UNEXPECTED_RECORD
 245

	)

3125 
	#SSL_R_UNINITIALIZED
 276

	)

3126 
	#SSL_R_UNKNOWN_ALERT_TYPE
 246

	)

3127 
	#SSL_R_UNKNOWN_CERTIFICATE_TYPE
 247

	)

3128 
	#SSL_R_UNKNOWN_CIPHER_RETURNED
 248

	)

3129 
	#SSL_R_UNKNOWN_CIPHER_TYPE
 249

	)

3130 
	#SSL_R_UNKNOWN_CMD_NAME
 386

	)

3131 
	#SSL_R_UNKNOWN_DIGEST
 368

	)

3132 
	#SSL_R_UNKNOWN_KEY_EXCHANGE_TYPE
 250

	)

3133 
	#SSL_R_UNKNOWN_PKEY_TYPE
 251

	)

3134 
	#SSL_R_UNKNOWN_PROTOCOL
 252

	)

3135 
	#SSL_R_UNKNOWN_REMOTE_ERROR_TYPE
 253

	)

3136 
	#SSL_R_UNKNOWN_SSL_VERSION
 254

	)

3137 
	#SSL_R_UNKNOWN_STATE
 255

	)

3138 
	#SSL_R_UNSAFE_LEGACY_RENEGOTIATION_DISABLED
 338

	)

3139 
	#SSL_R_UNSUPPORTED_CIPHER
 256

	)

3140 
	#SSL_R_UNSUPPORTED_COMPRESSION_ALGORITHM
 257

	)

3141 
	#SSL_R_UNSUPPORTED_DIGEST_TYPE
 326

	)

3142 
	#SSL_R_UNSUPPORTED_ELLIPTIC_CURVE
 315

	)

3143 
	#SSL_R_UNSUPPORTED_PROTOCOL
 258

	)

3144 
	#SSL_R_UNSUPPORTED_SSL_VERSION
 259

	)

3145 
	#SSL_R_UNSUPPORTED_STATUS_TYPE
 329

	)

3146 
	#SSL_R_USE_SRTP_NOT_NEGOTIATED
 369

	)

3147 
	#SSL_R_WRITE_BIO_NOT_SET
 260

	)

3148 
	#SSL_R_WRONG_CERTIFICATE_TYPE
 383

	)

3149 
	#SSL_R_WRONG_CIPHER_RETURNED
 261

	)

3150 
	#SSL_R_WRONG_CURVE
 378

	)

3151 
	#SSL_R_WRONG_MESSAGE_TYPE
 262

	)

3152 
	#SSL_R_WRONG_NUMBER_OF_KEY_BITS
 263

	)

3153 
	#SSL_R_WRONG_SIGNATURE_LENGTH
 264

	)

3154 
	#SSL_R_WRONG_SIGNATURE_SIZE
 265

	)

3155 
	#SSL_R_WRONG_SIGNATURE_TYPE
 370

	)

3156 
	#SSL_R_WRONG_SSL_VERSION
 266

	)

3157 
	#SSL_R_WRONG_VERSION_NUMBER
 267

	)

3158 
	#SSL_R_X509_LIB
 268

	)

3159 
	#SSL_R_X509_VERIFICATION_SETUP_PROBLEMS
 269

	)

3161 #ifdeà 
__ılu¥lus


	@/usr/include/poll.h

1 
	~<sys/pŞl.h
>

	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifdeà
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifdeà
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #ià
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifdeà
__USE_GNU


135 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

190 
	s_±h»ad_ş—nup_bufãr


192 (*
	m__routše
) (*);

193 *
	m__¬g
;

194 
	m__ÿnûÉy³
;

195 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*è-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifdeà
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

234 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

235 *(*
__¡¬t_routše
) (*),

236 *
__»¡riù
 
__¬g
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

242 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

250 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

252 #ifdeà
__USE_GNU


255 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

263 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

264 cÚ¡ 
time¥ec
 *
__ab¡ime
);

271 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

275 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

278 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

279 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

287 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

290 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

291 
__THROW
 
	`__nÚnuÎ
 ((1));

294 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

295 *
__d‘ach¡©e
)

296 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

299 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

300 
__d‘ach¡©e
)

301 
__THROW
 
	`__nÚnuÎ
 ((1));

305 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

306 
size_t
 *
__gu¬dsize
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

310 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

311 
size_t
 
__gu¬dsize
)

312 
__THROW
 
	`__nÚnuÎ
 ((1));

316 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

317 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

318 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

321 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

322 cÚ¡ 
sched_·¿m
 *
__»¡riù


323 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

326 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


327 
__©Œ
, *
__»¡riù
 
__pŞicy
)

328 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

331 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

332 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


336 
__©Œ
, *
__»¡riù
 
__šh”™
)

337 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

340 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

341 
__šh”™
)

342 
__THROW
 
	`__nÚnuÎ
 ((1));

346 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

347 *
__»¡riù
 
__scİe
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

351 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

352 
__THROW
 
	`__nÚnuÎ
 ((1));

355 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


356 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

357 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

363 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

364 *
__¡ackaddr
)

365 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

368 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


369 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

370 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

375 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

376 
size_t
 
__¡acksize
)

377 
__THROW
 
	`__nÚnuÎ
 ((1));

379 #ifdeà
__USE_XOPEN2K


381 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

382 **
__»¡riù
 
__¡ackaddr
,

383 
size_t
 *
__»¡riù
 
__¡acksize
)

384 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

389 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

390 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

393 #ifdeà
__USE_GNU


396 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

397 
size_t
 
__ıu£tsize
,

398 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

399 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

403 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

404 
size_t
 
__ıu£tsize
,

405 
ıu_£t_t
 *
__ıu£t
)

406 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

409 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

410 
__THROW
 
	`__nÚnuÎ
 ((1));

414 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

415 
__THROW
 
	`__nÚnuÎ
 ((1));

420 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

421 
__THROW
 
	`__nÚnuÎ
 ((2));

429 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

430 cÚ¡ 
sched_·¿m
 *
__·¿m
)

431 
__THROW
 
	`__nÚnuÎ
 ((3));

434 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

435 *
__»¡riù
 
__pŞicy
,

436 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

437 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

440 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

441 
__THROW
;

444 #ifdeà
__USE_GNU


446 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

447 
size_t
 
__buæ’
)

448 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

452 
__THROW
 
	`__nÚnuÎ
 ((2));

456 #ifdeà
__USE_UNIX98


458 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

461 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

464 #ifdeà
__USE_GNU


469 
	$±h»ad_y›ld
 (è
__THROW
;

474 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

475 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

476 
__THROW
 
	`__nÚnuÎ
 ((3));

479 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

480 
ıu_£t_t
 *
__ıu£t
)

481 
__THROW
 
	`__nÚnuÎ
 ((3));

494 
	$±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

495 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

506 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

510 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

513 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

518 
	`±h»ad_‹¡ÿnûl
 ();

527 
__jmp_buf
 
__ÿnûl_jmp_buf
;

528 
__mask_was_§ved
;

529 } 
__ÿnûl_jmp_buf
[1];

530 *
__·d
[4];

531 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

534 #iâdeà
__ş—nup_fù_©Œibu‹


535 
	#__ş—nup_fù_©Œibu‹


	)

540 
	s__±h»ad_ş—nup_äame


542 (*
__ÿnûl_routše
) (*);

543 *
__ÿnûl_¬g
;

544 
__do_™
;

545 
__ÿnûl_ty³
;

548 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


549 #ifdeà
__ılu¥lus


551 şas 
	c__±h»ad_ş—nup_şass


553 (*
__ÿnûl_routše
) (*);

554 *
__ÿnûl_¬g
;

555 
__do_™
;

556 
__ÿnûl_ty³
;

558 
public
:

559 
	$__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

560 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

561 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

562 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

563 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ÿnûl_ty³
); 
	}
}

565 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

575 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

577 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

581 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

582 
__şäame
.
	`__£tdo™
 (
execu‹
); \

583 } 0)

	)

585 #ifdeà
__USE_GNU


589 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

591 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

592 
__şäame
.
	`__deãr
 ()

	)

597 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

598 
__şäame
.
	`__»¡Üe
 (); \

599 
__şäame
.
	`__£tdo™
 (
execu‹
); \

600 } 0)

	)

607 
__ex‹º_šlše
 

608 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

610 ià(
__äame
->
__do_™
)

611 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

612 
	}
}

621 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

623 
__±h»ad_ş—nup_äame
 
__şäame
 \

624 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

625 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

626 .
__do_™
 = 1 };

	)

630 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

631 
__şäame
.
__do_™
 = (
execu‹
); \

632 } 0)

	)

634 #ifdeà
__USE_GNU


638 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

640 
__±h»ad_ş—nup_äame
 
__şäame
 \

641 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

642 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

643 .
__do_™
 = 1 }; \

644 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__şäame
.
__ÿnûl_ty³
)

	)

650 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

651 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

652 
__şäame
.
__do_™
 = (
execu‹
); \

653 } 0)

	)

664 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

666 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

667 (*
__ÿnûl_routše
è(*èğ(
routše
); \

668 *
__ÿnûl_¬g
 = (
¬g
); \

669 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

670 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

671 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

673 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

674 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

678 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

679 dØ{

	)

680 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

681 
__ş—nup_fù_©Œibu‹
;

685 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

688 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

689 ià(
execu‹
) \

690 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

691 } 0)

	)

692 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

693 
__ş—nup_fù_©Œibu‹
;

695 #ifdeà
__USE_GNU


699 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

701 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

702 (*
__ÿnûl_routše
è(*èğ(
routše
); \

703 *
__ÿnûl_¬g
 = (
¬g
); \

704 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

705 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

706 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

708 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

709 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

713 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

714 dØ{

	)

715 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

716 
__ş—nup_fù_©Œibu‹
;

721 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

724 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

725 ià(
execu‹
) \

726 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

727 
	}
} 0)

	)

728 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

729 
__ş—nup_fù_©Œibu‹
;

733 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

734 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

735 #iâdeà
SHARED


736 
	`__©Œibu‹__
 ((
__w—k__
))

742 
__jmp_buf_g
;

743 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

749 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

750 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

751 
__THROW
 
	`__nÚnuÎ
 ((1));

754 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

755 
__THROW
 
	`__nÚnuÎ
 ((1));

758 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

759 
__THROWNL
 
	`__nÚnuÎ
 ((1));

762 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

763 
__THROWNL
 
	`__nÚnuÎ
 ((1));

765 #ifdeà
__USE_XOPEN2K


767 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

768 cÚ¡ 
time¥ec
 *
__»¡riù


769 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

773 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

774 
__THROWNL
 
	`__nÚnuÎ
 ((1));

778 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

779 
__»¡riù
 
__mu‹x
,

780 *
__»¡riù
 
__´ioûšg
)

781 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

785 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

786 
__´ioûšg
,

787 *
__»¡riù
 
__Şd_ûšg
)

788 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

791 #ifdeà
__USE_XOPEN2K8


793 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

794 
__THROW
 
	`__nÚnuÎ
 ((1));

795 #ifdeà
__USE_GNU


796 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

797 
__THROW
 
	`__nÚnuÎ
 ((1));

806 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

807 
__THROW
 
	`__nÚnuÎ
 ((1));

810 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

811 
__THROW
 
	`__nÚnuÎ
 ((1));

814 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

815 
__»¡riù
 
__©Œ
,

816 *
__»¡riù
 
__psh¬ed
)

817 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

820 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

821 
__psh¬ed
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

824 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


826 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


827 
__©Œ
, *
__»¡riù
 
__kšd
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

833 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

834 
__THROW
 
	`__nÚnuÎ
 ((1));

838 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

839 
__»¡riù
 
__©Œ
,

840 *
__»¡riù
 
__´ÙocŞ
)

841 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

845 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

846 
__´ÙocŞ
)

847 
__THROW
 
	`__nÚnuÎ
 ((1));

850 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

851 
__»¡riù
 
__©Œ
,

852 *
__»¡riù
 
__´ioûšg
)

853 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__´ioûšg
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

860 #ifdeà
__USE_XOPEN2K


862 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

863 *
__robu¡Ãss
)

864 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

865 #ifdeà
__USE_GNU


866 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

867 *
__robu¡Ãss
)

868 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

872 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

873 
__robu¡Ãss
)

874 
__THROW
 
	`__nÚnuÎ
 ((1));

875 #ifdeà
__USE_GNU


876 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

877 
__robu¡Ãss
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


888 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

889 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


890 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

893 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__nÚnuÎ
 ((1));

897 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__nÚnuÎ
 ((1));

901 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__nÚnuÎ
 ((1));

904 #ifdeà
__USE_XOPEN2K


906 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

907 cÚ¡ 
time¥ec
 *
__»¡riù


908 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

912 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__nÚnuÎ
 ((1));

916 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__nÚnuÎ
 ((1));

919 #ifdeà
__USE_XOPEN2K


921 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

922 cÚ¡ 
time¥ec
 *
__»¡riù


923 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

927 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__nÚnuÎ
 ((1));

934 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

935 
__THROW
 
	`__nÚnuÎ
 ((1));

938 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

939 
__THROW
 
	`__nÚnuÎ
 ((1));

942 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

943 
__»¡riù
 
__©Œ
,

944 *
__»¡riù
 
__psh¬ed
)

945 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

948 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

949 
__psh¬ed
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

954 
__»¡riù
 
__©Œ
,

955 *
__»¡riù
 
__´ef
)

956 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

959 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

960 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

968 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

969 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

970 
__THROW
 
	`__nÚnuÎ
 ((1));

973 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

974 
__THROW
 
	`__nÚnuÎ
 ((1));

977 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

978 
__THROWNL
 
	`__nÚnuÎ
 ((1));

981 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

982 
__THROWNL
 
	`__nÚnuÎ
 ((1));

989 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

990 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

991 
	`__nÚnuÎ
 ((1, 2));

1000 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1001 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1002 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1003 
	`__nÚnuÎ
 ((1, 2, 3));

1008 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1009 
__THROW
 
	`__nÚnuÎ
 ((1));

1012 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1013 
__THROW
 
	`__nÚnuÎ
 ((1));

1016 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1017 
__»¡riù
 
__©Œ
,

1018 *
__»¡riù
 
__psh¬ed
)

1019 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1022 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1023 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1025 #ifdeà
__USE_XOPEN2K


1027 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1028 
__»¡riù
 
__©Œ
,

1029 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1030 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1033 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1034 
__şockid_t
 
__şock_id
)

1035 
__THROW
 
	`__nÚnuÎ
 ((1));

1039 #ifdeà
__USE_XOPEN2K


1044 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1045 
__THROW
 
	`__nÚnuÎ
 ((1));

1048 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1049 
__THROW
 
	`__nÚnuÎ
 ((1));

1052 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1053 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1056 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1057 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1060 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1061 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1068 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1069 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1070 
__©Œ
, 
__couÁ
)

1071 
__THROW
 
	`__nÚnuÎ
 ((1));

1074 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1078 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1079 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1083 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1084 
__THROW
 
	`__nÚnuÎ
 ((1));

1087 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1088 
__THROW
 
	`__nÚnuÎ
 ((1));

1091 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1092 
__»¡riù
 
__©Œ
,

1093 *
__»¡riù
 
__psh¬ed
)

1094 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1097 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1098 
__psh¬ed
)

1099 
__THROW
 
	`__nÚnuÎ
 ((1));

1111 
	$±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1112 (*
__de¡r_funùiÚ
) (*))

1113 
__THROW
 
	`__nÚnuÎ
 ((1));

1116 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1119 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1122 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1123 cÚ¡ *
__poš‹r
è
__THROW
 ;

1126 #ifdeà
__USE_XOPEN2K


1128 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1129 
__şockid_t
 *
__şock_id
)

1130 
__THROW
 
	`__nÚnuÎ
 ((2));

1145 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1146 (*
__·»Á
) (),

1147 (*
__chd
è()è
__THROW
;

1150 #ifdeà
__USE_EXTERN_INLINES


1152 
__ex‹º_šlše
 

1153 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1155  
__th»ad1
 =ğ
__th»ad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

30 #ifdeà
__USE_XOPEN2K


31 
	#__Ãed_time_t


	)

32 
	#__Ãed_time¥ec


	)

34 
	~<time.h
>

36 #iâdeà
__pid_t_defšed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_defšed


	)

43 
	~<b™s/sched.h
>

45 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

48 
__BEGIN_DECLS


51 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

52 
__THROW
;

55 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

58 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

59 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

62 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

65 
	$sched_y›ld
 (è
__THROW
;

68 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

71 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

74 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

77 #ifdeà
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

81 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

82 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

83 
ıu£
)

	)

84 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

87 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

88 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

89 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
ıu£
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

94 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

99 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

101 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

103 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

113 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

114 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

118 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

119 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

122 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

123 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

126 
__END_DECLS


	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


24 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	~<b™s/sig£t.h
>

36 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


37 #iâdeà
__sig_©omic_t_defšed


38 
	#__sig_©omic_t_defšed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #undeà
__Ãed_sig_©omic_t


46 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

47 #iâdeà
__sig£t_t_defšed


48 
	#__sig£t_t_defšed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #undeà
__Ãed_sig£t_t


54 #ifdeà
_SIGNAL_H


56 
	~<b™s/ty³s.h
>

57 
	~<b™s/signum.h
>

59 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


60 #iâdeà
__pid_t_defšed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_defšed


	)

64 #ifdeà
__USE_XOPEN


66 #iâdeà
__uid_t_defšed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_defšed


	)

72 #ifdeà
__USE_POSIX199309


74 
	#__Ãed_time¥ec


	)

75 
	~<time.h
>

78 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


80 
	~<b™s/sigšfo.h
>

85 (*
	t__sighªdËr_t
) ();

90 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

91 
__THROW
;

92 #ifdeà
__USE_GNU


93 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifdeà
__USE_MISC


102 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

103 
__THROW
;

106 #ifdeà
__REDIRECT_NTH


107 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

108 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

109 
__sysv_sigÇl
);

111 
	#sigÇl
 
__sysv_sigÇl


	)

114 
__END_NAMESPACE_STD


116 #ifdeà
__USE_XOPEN


119 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

120 
__THROW
;

126 #ifdeà
__USE_POSIX


127 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

130 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


134 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$¿i£
 (
__sig
è
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifdeà
__USE_MISC


144 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

145 
__THROW
;

146 
	$gsigÇl
 (
__sig
è
__THROW
;

149 #ifdeà
__USE_XOPEN2K8


151 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

154 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

166 #ifdeà
__USE_XOPEN


167 #ifdeà
__GNUC__


168 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

170 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

172 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

177 #ifdeà
__USE_MISC


184 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

187 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

190 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

193 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

197 #ifdeà
__USE_MISC


198 
	#NSIG
 
_NSIG


	)

201 #ifdeà
__USE_GNU


202 
__sighªdËr_t
 
	tsighªdËr_t
;

206 #ifdeà
__USE_MISC


207 
__sighªdËr_t
 
	tsig_t
;

210 #ifdeà
__USE_POSIX


213 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

216 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

219 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

222 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

226 
__THROW
 
	`__nÚnuÎ
 ((1));

228 #ifdeà
__USE_GNU


230 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

233 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

234 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

237 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

238 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

243 
	~<b™s/sigaùiÚ.h
>

246 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

247 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

254 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

257 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

258 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

261 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

268 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

269 
	`__nÚnuÎ
 ((1, 2));

271 #ifdeà
__USE_POSIX199309


276 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

277 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

284 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

285 
sigšfo_t
 *
__»¡riù
 
__šfo
,

286 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

287 
	`__nÚnuÎ
 ((1));

291 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

292 
__THROW
;

297 #ifdeà
__USE_MISC


301 cÚ¡ *cÚ¡ 
_sys_sigli¡
[
_NSIG
];

302 cÚ¡ *cÚ¡ 
sys_sigli¡
[
_NSIG
];

306 
	~<b™s/sigcÚ‹xt.h
>

309 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

314 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


315 
	#__Ãed_size_t


	)

316 
	~<¡ddef.h
>

321 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

323 
	~<b™s/sig¡ack.h
>

324 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


326 
	~<sys/ucÚ‹xt.h
>

332 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

333 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

337 
	$sig®t¡ack
 (cÚ¡ 
sig®t¡ack
 *
__»¡riù
 
__ss
,

338 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

342 #ifdeà
__USE_XOPEN_EXTENDED


346 
	$sighŞd
 (
__sig
è
__THROW
;

349 
	$sig»l£
 (
__sig
è
__THROW
;

352 
	$sigignÜe
 (
__sig
è
__THROW
;

355 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

358 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


361 
	~<b™s/±h»adty³s.h
>

362 
	~<b™s/sigth»ad.h
>

369 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

371 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

375 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifdeà
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #iâdeà
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
è
	)
c

283 
	#INT16_C
(
c
è
	)
c

284 
	#INT32_C
(
c
è
	)
c

285 #ià
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
èø## 
L


	)

288 
	#INT64_C
(
c
èø## 
LL


	)

292 
	#UINT8_C
(
c
è
	)
c

293 
	#UINT16_C
(
c
è
	)
c

294 
	#UINT32_C
(
c
èø## 
U


	)

295 #ià
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
èø## 
UL


	)

298 
	#UINT64_C
(
c
èø## 
ULL


	)

302 #ià
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
èø## 
L


	)

304 
	#UINTMAX_C
(
c
èø## 
UL


	)

306 
	#INTMAX_C
(
c
èø## 
LL


	)

307 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

102 #ifdeà
__USE_XOPEN2K8


103 #iâdeà
__ssize_t_defšed


104 
__ssize_t
 
	tssize_t
;

105 
	#__ssize_t_defšed


	)

110 
__BEGIN_NAMESPACE_STD


111 #iâdeà
__USE_FILE_OFFSET64


112 
_G_åos_t
 
	tåos_t
;

114 
_G_åos64_t
 
	tåos_t
;

116 
__END_NAMESPACE_STD


117 #ifdeà
__USE_LARGEFILE64


118 
_G_åos64_t
 
	tåos64_t
;

122 
	#_IOFBF
 0

	)

123 
	#_IOLBF
 1

	)

124 
	#_IONBF
 2

	)

128 #iâdeà
BUFSIZ


129 
	#BUFSIZ
 
_IO_BUFSIZ


	)

135 #iâdeà
EOF


136 
	#EOF
 (-1)

	)

142 
	#SEEK_SET
 0

	)

143 
	#SEEK_CUR
 1

	)

144 
	#SEEK_END
 2

	)

145 #ifdeà
__USE_GNU


146 
	#SEEK_DATA
 3

	)

147 
	#SEEK_HOLE
 4

	)

151 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


153 
	#P_tmpdœ
 "/tmp"

	)

166 
	~<b™s/¡dio_lim.h
>

170 
_IO_FILE
 *
¡dš
;

171 
_IO_FILE
 *
¡dout
;

172 
_IO_FILE
 *
¡d”r
;

174 
	#¡dš
 
¡dš


	)

175 
	#¡dout
 
¡dout


	)

176 
	#¡d”r
 
¡d”r


	)

178 
__BEGIN_NAMESPACE_STD


180 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

182 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

183 
__END_NAMESPACE_STD


185 #ifdeà
__USE_ATFILE


187 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

188 cÚ¡ *
__Ãw
è
__THROW
;

191 
__BEGIN_NAMESPACE_STD


196 #iâdeà
__USE_FILE_OFFSET64


197 
FILE
 *
	$tmpfe
 (è
__wur
;

199 #ifdeà
__REDIRECT


200 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

202 
	#tmpfe
 
tmpfe64


	)

206 #ifdeà
__USE_LARGEFILE64


207 
FILE
 *
	$tmpfe64
 (è
__wur
;

211 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

212 
__END_NAMESPACE_STD


214 #ifdeà
__USE_MISC


217 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

221 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


229 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

230 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

234 
__BEGIN_NAMESPACE_STD


239 
	`fşo£
 (
FILE
 *
__¡»am
);

244 
	`fæush
 (
FILE
 *
__¡»am
);

245 
__END_NAMESPACE_STD


247 #ifdeà
__USE_MISC


254 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

257 #ifdeà
__USE_GNU


264 
	`fşo£®l
 ();

268 
__BEGIN_NAMESPACE_STD


269 #iâdeà
__USE_FILE_OFFSET64


274 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

275 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

280 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

281 cÚ¡ *
__»¡riù
 
__modes
,

282 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

284 #ifdeà
__REDIRECT


285 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

286 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

287 
__wur
;

288 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

289 cÚ¡ *
__»¡riù
 
__modes
,

290 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

291 
__wur
;

293 
	#fİ’
 
fİ’64


	)

294 
	#äeİ’
 
äeİ’64


	)

297 
__END_NAMESPACE_STD


298 #ifdeà
__USE_LARGEFILE64


299 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

301 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

302 cÚ¡ *
__»¡riù
 
__modes
,

303 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

306 #ifdef 
__USE_POSIX


308 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

311 #ifdef 
__USE_GNU


314 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

315 cÚ¡ *
__»¡riù
 
__modes
,

316 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

319 #ifdeà
__USE_XOPEN2K8


321 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

322 
__THROW
 
__wur
;

327 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

331 
__BEGIN_NAMESPACE_STD


334 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

338 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

339 
__modes
, 
size_t
 
__n
è
__THROW
;

340 
__END_NAMESPACE_STD


342 #ifdef 
__USE_MISC


345 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

346 
size_t
 
__size
è
__THROW
;

349 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

353 
__BEGIN_NAMESPACE_STD


358 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

359 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

366 
	$¥rštf
 (*
__»¡riù
 
__s
,

367 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

373 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

374 
_G_va_li¡
 
__¬g
);

379 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

381 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

382 
_G_va_li¡
 
__¬g
è
__THROWNL
;

383 
__END_NAMESPACE_STD


385 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


386 
__BEGIN_NAMESPACE_C99


388 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

389 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

390 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

392 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

393 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

394 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

395 
__END_NAMESPACE_C99


398 #ifdeà
__USE_GNU


401 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

402 
_G_va_li¡
 
__¬g
)

403 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

404 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

405 cÚ¡ *
__»¡riù
 
__fmt
, ...)

406 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

407 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

408 cÚ¡ *
__»¡riù
 
__fmt
, ...)

409 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

412 #ifdeà
__USE_XOPEN2K8


414 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

415 
_G_va_li¡
 
__¬g
)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

417 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

418 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

422 
__BEGIN_NAMESPACE_STD


427 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

428 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

435 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

436 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

438 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

439 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

440 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

441 #ifdeà
__REDIRECT


445 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

446 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_fsÿnf
è
__wur
;

448 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

449 
__isoc99_sÿnf
è
__wur
;

450 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

451 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

452 
__isoc99_ssÿnf
);

454 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

455 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

456 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

457 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

458 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

459 
	#fsÿnf
 
__isoc99_fsÿnf


	)

460 
	#sÿnf
 
__isoc99_sÿnf


	)

461 
	#ssÿnf
 
__isoc99_ssÿnf


	)

465 
__END_NAMESPACE_STD


467 #ifdef 
__USE_ISOC99


468 
__BEGIN_NAMESPACE_C99


473 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

474 
_G_va_li¡
 
__¬g
)

475 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

481 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

482 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

485 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

486 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

487 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

489 #ià!
defšed
 
__USE_GNU
 \

490 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

491 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

492 #ifdeà
__REDIRECT


496 
	`__REDIRECT
 (
vfsÿnf
,

497 (
FILE
 *
__»¡riù
 
__s
,

498 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

499 
__isoc99_vfsÿnf
)

500 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

501 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

502 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

503 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

504 
	`__REDIRECT_NTH
 (
vssÿnf
,

505 (cÚ¡ *
__»¡riù
 
__s
,

506 cÚ¡ *
__»¡riù
 
__fÜm©
,

507 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

508 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

510 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

511 cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

514 
_G_va_li¡
 
__¬g
è
__wur
;

515 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

516 cÚ¡ *
__»¡riù
 
__fÜm©
,

517 
_G_va_li¡
 
__¬g
è
__THROW
;

518 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

519 
	#vsÿnf
 
__isoc99_vsÿnf


	)

520 
	#vssÿnf
 
__isoc99_vssÿnf


	)

524 
__END_NAMESPACE_C99


528 
__BEGIN_NAMESPACE_STD


533 
	`fg‘c
 (
FILE
 *
__¡»am
);

534 
	`g‘c
 (
FILE
 *
__¡»am
);

540 
	`g‘ch¬
 ();

541 
__END_NAMESPACE_STD


545 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

547 #ifdeà
__USE_POSIX199506


552 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

553 
	`g‘ch¬_uÆocked
 ();

556 #ifdeà
__USE_MISC


563 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

567 
__BEGIN_NAMESPACE_STD


575 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

576 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

582 
	`putch¬
 (
__c
);

583 
__END_NAMESPACE_STD


587 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

589 #ifdeà
__USE_MISC


596 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

599 #ifdeà
__USE_POSIX199506


604 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

605 
	`putch¬_uÆocked
 (
__c
);

609 #ià
defšed
 
__USE_MISC
 \

610 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

612 
	`g‘w
 (
FILE
 *
__¡»am
);

615 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

619 
__BEGIN_NAMESPACE_STD


624 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

625 
__wur
;

627 #ià!
defšed
 
__USE_ISOC11
 \

628 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

640 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

642 
__END_NAMESPACE_STD


644 #ifdeà
__USE_GNU


651 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

652 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

656 #ifdef 
__USE_XOPEN2K8


667 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

668 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

669 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

670 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

671 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

672 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

680 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

681 
size_t
 *
__»¡riù
 
__n
,

682 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

686 
__BEGIN_NAMESPACE_STD


691 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

697 
	`puts
 (cÚ¡ *
__s
);

704 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

711 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

712 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

717 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

718 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

719 
__END_NAMESPACE_STD


721 #ifdeà
__USE_GNU


728 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

729 
FILE
 *
__»¡riù
 
__¡»am
);

732 #ifdeà
__USE_MISC


739 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

741 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

742 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

746 
__BEGIN_NAMESPACE_STD


751 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

756 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

761 
	`»wšd
 (
FILE
 *
__¡»am
);

762 
__END_NAMESPACE_STD


769 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


770 #iâdeà
__USE_FILE_OFFSET64


775 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

780 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

782 #ifdeà
__REDIRECT


783 
	`__REDIRECT
 (
f£eko
,

784 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

785 
f£eko64
);

786 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

788 
	#f£eko
 
f£eko64


	)

789 
	#á–lo
 
á–lo64


	)

794 
__BEGIN_NAMESPACE_STD


795 #iâdeà
__USE_FILE_OFFSET64


800 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

805 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

807 #ifdeà
__REDIRECT


808 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

809 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

810 
	`__REDIRECT
 (
f£os
,

811 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

813 
	#fg‘pos
 
fg‘pos64


	)

814 
	#f£os
 
f£os64


	)

817 
__END_NAMESPACE_STD


819 #ifdeà
__USE_LARGEFILE64


820 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

821 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

822 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

823 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

826 
__BEGIN_NAMESPACE_STD


828 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

830 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

832 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

833 
__END_NAMESPACE_STD


835 #ifdeà
__USE_MISC


837 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

838 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

839 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

843 
__BEGIN_NAMESPACE_STD


848 
	`³¼Ü
 (cÚ¡ *
__s
);

849 
__END_NAMESPACE_STD


855 
	~<b™s/sys_”¾i¡.h
>

858 #ifdef 
__USE_POSIX


860 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

863 #ifdeà
__USE_MISC


865 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

869 #ifdeà
__USE_POSIX2


874 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

880 
	`pşo£
 (
FILE
 *
__¡»am
);

884 #ifdef 
__USE_POSIX


886 *
	$ù”mid
 (*
__s
è
__THROW
;

890 #ià(
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
è|| defšed 
__USE_GNU


892 *
	`cu£rid
 (*
__s
);

896 #ifdef 
__USE_GNU


897 
ob¡ack
;

900 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

901 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

902 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

903 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

904 cÚ¡ *
__»¡riù
 
__fÜm©
,

905 
_G_va_li¡
 
__¬gs
)

906 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

910 #ifdeà
__USE_POSIX199506


914 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

918 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

921 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

924 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


928 
	#__Ãed_g‘İt


	)

929 
	~<g‘İt.h
>

934 #ifdeà
__USE_EXTERN_INLINES


935 
	~<b™s/¡dio.h
>

937 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


938 
	~<b™s/¡dio2.h
>

940 #ifdeà
__LDBL_COMPAT


941 
	~<b™s/¡dio-ldbl.h
>

944 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

45 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (¡©us)

	)

46 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (¡©us)

	)

47 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (¡©us)

	)

48 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (¡©us)

	)

49 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (¡©us)

	)

50 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (¡©us)

	)

51 #ifdeà
__WIFCONTINUED


52 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (¡©us)

	)

56 
__BEGIN_NAMESPACE_STD


60 
	mquÙ
;

61 
	m»m
;

62 } 
	tdiv_t
;

65 #iâdeà
__ldiv_t_defšed


68 
	mquÙ
;

69 
	m»m
;

70 } 
	tldiv_t
;

71 
	#__ldiv_t_defšed
 1

	)

73 
	g__END_NAMESPACE_STD


75 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


76 
__BEGIN_NAMESPACE_C99


78 
__ex‹nsiÚ__
 struct

80 
	mquÙ
;

81 
	m»m
;

82 } 
	tÎdiv_t
;

83 
	#__Îdiv_t_defšed
 1

	)

84 
	g__END_NAMESPACE_C99


89 
	#RAND_MAX
 2147483647

	)

94 
	#EXIT_FAILURE
 1

	)

95 
	#EXIT_SUCCESS
 0

	)

99 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

100 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

103 
__BEGIN_NAMESPACE_STD


105 
	$©of
 (cÚ¡ *
__ÅŒ
)

106 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

108 
	$©oi
 (cÚ¡ *
__ÅŒ
)

109 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

111 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

112 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

113 
__END_NAMESPACE_STD


115 #ifdeà
__USE_ISOC99


116 
__BEGIN_NAMESPACE_C99


118 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

119 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

120 
__END_NAMESPACE_C99


123 
__BEGIN_NAMESPACE_STD


125 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

126 **
__»¡riù
 
__’d±r
)

127 
__THROW
 
	`__nÚnuÎ
 ((1));

128 
__END_NAMESPACE_STD


130 #ifdef 
__USE_ISOC99


131 
__BEGIN_NAMESPACE_C99


133 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

134 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

136 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

137 **
__»¡riù
 
__’d±r
)

138 
__THROW
 
	`__nÚnuÎ
 ((1));

139 
__END_NAMESPACE_C99


142 
__BEGIN_NAMESPACE_STD


144 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

145 **
__»¡riù
 
__’d±r
, 
__ba£
)

146 
__THROW
 
	`__nÚnuÎ
 ((1));

148 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

149 **
__»¡riù
 
__’d±r
, 
__ba£
)

150 
__THROW
 
	`__nÚnuÎ
 ((1));

151 
__END_NAMESPACE_STD


153 #ifdeà
__USE_MISC


155 
__ex‹nsiÚ__


156 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

157 **
__»¡riù
 
__’d±r
, 
__ba£
)

158 
__THROW
 
	`__nÚnuÎ
 ((1));

160 
__ex‹nsiÚ__


161 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

162 **
__»¡riù
 
__’d±r
, 
__ba£
)

163 
__THROW
 
	`__nÚnuÎ
 ((1));

166 #ifdeà
__USE_ISOC99


167 
__BEGIN_NAMESPACE_C99


169 
__ex‹nsiÚ__


170 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

171 **
__»¡riù
 
__’d±r
, 
__ba£
)

172 
__THROW
 
	`__nÚnuÎ
 ((1));

174 
__ex‹nsiÚ__


175 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
, 
__ba£
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


182 #ifdeà
__USE_GNU


196 
	~<xloÿË.h
>

200 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
,

202 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

204 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

205 **
__»¡riù
 
__’d±r
,

206 
__ba£
, 
__loÿË_t
 
__loc
)

207 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

209 
__ex‹nsiÚ__


210 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

211 **
__»¡riù
 
__’d±r
, 
__ba£
,

212 
__loÿË_t
 
__loc
)

213 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

215 
__ex‹nsiÚ__


216 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

217 **
__»¡riù
 
__’d±r
,

218 
__ba£
, 
__loÿË_t
 
__loc
)

219 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

221 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

222 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

223 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

225 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

226 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

227 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

229 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

230 **
__»¡riù
 
__’d±r
,

231 
__loÿË_t
 
__loc
)

232 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

236 #ifdeà
__USE_EXTERN_INLINES


237 
__BEGIN_NAMESPACE_STD


238 
__ex‹º_šlše
 

239 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

241  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

242 
	}
}

243 
__ex‹º_šlše
 

244 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

246  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

247 
	}
}

248 
	g__END_NAMESPACE_STD


250 #ifdeà
__USE_ISOC99


251 
__BEGIN_NAMESPACE_C99


252 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

253 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

255  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

256 
	}
}

257 
	g__END_NAMESPACE_C99


262 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


266 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

269 
	$a64l
 (cÚ¡ *
__s
)

270 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

274 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


275 
	~<sys/ty³s.h
>

282 
	$¿ndom
 (è
__THROW
;

285 
	$¤ªdom
 (
__£ed
è
__THROW
;

291 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

292 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

296 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

299 #ifdeà
__USE_MISC


304 
	s¿ndom_d©a


306 
št32_t
 *
åŒ
;

307 
št32_t
 *
½Œ
;

308 
št32_t
 *
¡©e
;

309 
¿nd_ty³
;

310 
¿nd_deg
;

311 
¿nd_£p
;

312 
št32_t
 *
’d_±r
;

315 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

316 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

318 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

319 
__THROW
 
	`__nÚnuÎ
 ((2));

321 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

322 
size_t
 
__¡©–’
,

323 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

324 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

326 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

327 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

328 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

333 
__BEGIN_NAMESPACE_STD


335 
	$¿nd
 (è
__THROW
;

337 
	$¤ªd
 (
__£ed
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdeà
__USE_POSIX199506


342 
	$¿nd_r
 (*
__£ed
è
__THROW
;

346 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


350 
	$d¿nd48
 (è
__THROW
;

351 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

354 
	$Ìªd48
 (è
__THROW
;

355 
	$Äªd48
 (
__xsubi
[3])

356 
__THROW
 
	`__nÚnuÎ
 ((1));

359 
	$m¿nd48
 (è
__THROW
;

360 
	$j¿nd48
 (
__xsubi
[3])

361 
__THROW
 
	`__nÚnuÎ
 ((1));

364 
	$¤ªd48
 (
__£edv®
è
__THROW
;

365 *
	$£ed48
 (
__£ed16v
[3])

366 
__THROW
 
	`__nÚnuÎ
 ((1));

367 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

369 #ifdeà
__USE_MISC


373 
	sd¿nd48_d©a


375 
__x
[3];

376 
__Şd_x
[3];

377 
__c
;

378 
__š™
;

379 
__ex‹nsiÚ__
 
__a
;

384 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

385 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 
	$”ªd48_r
 (
__xsubi
[3],

387 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

388 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

392 *
__»¡riù
 
__»suÉ
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

394 
	$Äªd48_r
 (
__xsubi
[3],

395 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

396 *
__»¡riù
 
__»suÉ
)

397 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

400 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

401 *
__»¡riù
 
__»suÉ
)

402 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

403 
	$j¿nd48_r
 (
__xsubi
[3],

404 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

405 *
__»¡riù
 
__»suÉ
)

406 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

409 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

410 
__THROW
 
	`__nÚnuÎ
 ((2));

412 
	$£ed48_r
 (
__£ed16v
[3],

413 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

415 
	$lcÚg48_r
 (
__·¿m
[7],

416 
d¿nd48_d©a
 *
__bufãr
)

417 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

423 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


424 
	#__m®loc_ªd_ÿÎoc_defšed


	)

425 
__BEGIN_NAMESPACE_STD


427 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

429 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

430 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

431 
__END_NAMESPACE_STD


434 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


435 
__BEGIN_NAMESPACE_STD


441 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

442 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

444 
	$ä“
 (*
__±r
è
__THROW
;

445 
__END_NAMESPACE_STD


447 #ifdef 
__USE_MISC


449 
	$cä“
 (*
__±r
è
__THROW
;

452 #ifdeà
__USE_MISC


453 
	~<®loÿ.h
>

456 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

457 || 
defšed
 
__USE_MISC


459 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

462 #ifdeà
__USE_XOPEN2K


464 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

465 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

468 #ifdeà
__USE_ISOC11


470 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

471 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

474 
__BEGIN_NAMESPACE_STD


476 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

480 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

482 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


484 #ifdeà
__ılu¥lus


485 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

486 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

488 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

491 
__END_NAMESPACE_STD


493 #ifdef 
__USE_MISC


496 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

497 
__THROW
 
	`__nÚnuÎ
 ((1));

500 
__BEGIN_NAMESPACE_STD


504 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

506 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


510 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

512 
__END_NAMESPACE_STD


514 #ifdeà
__USE_ISOC99


515 
__BEGIN_NAMESPACE_C99


518 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
__END_NAMESPACE_C99


523 
__BEGIN_NAMESPACE_STD


525 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

526 
__END_NAMESPACE_STD


528 #ifdeà
__USE_GNU


531 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

532 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

535 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


539 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

542 #ifdeà
__USE_XOPEN2K


545 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

546 
__THROW
 
	`__nÚnuÎ
 ((2));

549 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

552 #ifdef 
__USE_MISC


556 
	$ş—»nv
 (è
__THROW
;

560 #ià
defšed
 
__USE_MISC
 \

561 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

567 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

570 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


579 #iâdeà
__USE_FILE_OFFSET64


580 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

582 #ifdeà
__REDIRECT


583 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

584 
	`__nÚnuÎ
 ((1)è
__wur
;

586 
	#mk¡emp
 
mk¡emp64


	)

589 #ifdeà
__USE_LARGEFILE64


590 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

594 #ifdeà
__USE_MISC


601 #iâdeà
__USE_FILE_OFFSET64


602 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

604 #ifdeà
__REDIRECT


605 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

606 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

608 
	#mk¡emps
 
mk¡emps64


	)

611 #ifdeà
__USE_LARGEFILE64


612 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

613 
	`__nÚnuÎ
 ((1)è
__wur
;

617 #ifdeà
__USE_XOPEN2K8


623 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

626 #ifdeà
__USE_GNU


633 #iâdeà
__USE_FILE_OFFSET64


634 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

636 #ifdeà
__REDIRECT


637 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

638 
	`__nÚnuÎ
 ((1)è
__wur
;

640 
	#mko¡emp
 
mko¡emp64


	)

643 #ifdeà
__USE_LARGEFILE64


644 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

653 #iâdeà
__USE_FILE_OFFSET64


654 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

655 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ifdeà
__REDIRECT


658 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

659 
__æags
), 
mko¡emps64
)

660 
	`__nÚnuÎ
 ((1)è
__wur
;

662 
	#mko¡emps
 
mko¡emps64


	)

665 #ifdeà
__USE_LARGEFILE64


666 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

667 
	`__nÚnuÎ
 ((1)è
__wur
;

672 
__BEGIN_NAMESPACE_STD


677 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

678 
__END_NAMESPACE_STD


681 #ifdef 
__USE_GNU


684 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

685 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

688 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


694 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

695 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

700 #iâdeà
__COMPAR_FN_T


701 
	#__COMPAR_FN_T


	)

702 (*
	t__com·r_â_t
) (const *, const *);

704 #ifdef 
__USE_GNU


705 
__com·r_â_t
 
	tcom·risÚ_â_t
;

708 #ifdeà
__USE_GNU


709 (*
	t__com·r_d_â_t
) (const *, const *, *);

712 
__BEGIN_NAMESPACE_STD


715 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

716 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

717 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

719 #ifdeà
__USE_EXTERN_INLINES


720 
	~<b™s/¡dlib-b£¬ch.h
>

725 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

726 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

727 #ifdeà
__USE_GNU


728 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

729 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

730 
	`__nÚnuÎ
 ((1, 4));

735 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

736 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

737 
__END_NAMESPACE_STD


739 #ifdeà
__USE_ISOC99


740 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

741 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

745 
__BEGIN_NAMESPACE_STD


749 
div_t
 
	$div
 (
__num”
, 
__d’om
)

750 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

751 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

752 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

753 
__END_NAMESPACE_STD


755 #ifdeà
__USE_ISOC99


756 
__BEGIN_NAMESPACE_C99


757 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

758 
__d’om
)

759 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

760 
__END_NAMESPACE_C99


764 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

765 || 
defšed
 
__USE_MISC


772 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

773 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

778 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

779 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

784 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

785 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

788 #ifdeà
__USE_MISC


790 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

791 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

792 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

793 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

794 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

795 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

796 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

797 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

802 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

803 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

804 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

805 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

806 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

807 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

809 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

810 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

811 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

812 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

813 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

814 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

815 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

816 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

820 
__BEGIN_NAMESPACE_STD


823 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

826 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

827 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

830 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

834 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

835 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

837 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

838 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

839 
__THROW
;

840 
__END_NAMESPACE_STD


843 #ifdeà
__USE_MISC


848 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

852 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


859 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

860 *cÚ¡ *
__»¡riù
 
__tok’s
,

861 **
__»¡riù
 
__v®u•
)

862 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

866 #ifdeà
__USE_XOPEN


868 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

874 #ifdeà
__USE_XOPEN2KXSI


876 
	$posix_İ’±
 (
__oæag
è
__wur
;

879 #ifdeà
__USE_XOPEN_EXTENDED


884 
	$g¿Á±
 (
__fd
è
__THROW
;

888 
	$uÆock±
 (
__fd
è
__THROW
;

893 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

896 #ifdeà
__USE_GNU


900 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

901 
__THROW
 
	`__nÚnuÎ
 ((2));

904 
	`g‘±
 ();

907 #ifdeà
__USE_MISC


911 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

912 
__THROW
 
	`__nÚnuÎ
 ((1));

915 #ià
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K


918 
	$‰y¦Ù
 (è
__THROW
;

921 
	~<b™s/¡dlib-æßt.h
>

924 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


925 
	~<b™s/¡dlib.h
>

927 #ifdeà
__LDBL_COMPAT


928 
	~<b™s/¡dlib-ldbl.h
>

932 #undeà
__Ãed_m®loc_ªd_ÿÎoc


934 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

69 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

74 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 #ifdeà
__OPTIMIZE__


78 
__ex‹º_®ways_šlše
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


81  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

84 
__ex‹º_®ways_šlše
 const *

85 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


87  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifdeà
__USE_GNU


100 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

128 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

129 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

137 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

151 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
 
	`__nÚnuÎ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifdeà
__USE_XOPEN2K8


159 
	~<xloÿË.h
>

162 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

163 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

165 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

166 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

169 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


171 *
	$¡rdup
 (cÚ¡ *
__s
)

172 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

178 #ià
defšed
 
__USE_XOPEN2K8


179 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

180 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


185 
	#¡rdu·
(
s
) \

186 (
__ex‹nsiÚ__
 \

188 cÚ¡ *
__Şd
 = (
s
); \

189 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

190 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

191 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

192 
	}
}))

	)

195 
	#¡ºdu·
(
s
, 
n
) \

196 (
__ex‹nsiÚ__
 \

198 cÚ¡ *
__Şd
 = (
s
); \

199 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

200 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

201 
__Ãw
[
__Ën
] = '\0'; \

202 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

203 }))

	)

206 
	g__BEGIN_NAMESPACE_STD


208 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


211 *
¡rchr
 (*
__s
, 
__c
)

212 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

213 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

214 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

216 #ifdeà
__OPTIMIZE__


217 
__ex‹º_®ways_šlše
 *

218 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


220  
__butš_¡rchr
 (
__s
, 
__c
);

223 
__ex‹º_®ways_šlše
 const *

224 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


226  
__butš_¡rchr
 (
__s
, 
__c
);

231 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

232 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

235 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


238 *
	`¡¼chr
 (*
__s
, 
__c
)

239 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

243 #ifdeà
__OPTIMIZE__


244 
__ex‹º_®ways_šlše
 *

245 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


247  
	`__butš_¡¼chr
 (
__s
, 
__c
);

250 
__ex‹º_®ways_šlše
 const *

251 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


253  
	`__butš_¡¼chr
 (
__s
, 
__c
);

256 
	}
}

258 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

259 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

261 
__END_NAMESPACE_STD


263 #ifdeà
__USE_GNU


266 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


267 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

268 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

269 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

272 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

273 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 
__BEGIN_NAMESPACE_STD


280 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

281 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

284 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

285 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

287 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


290 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

291 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

293 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

295 #ifdeà
__OPTIMIZE__


296 
__ex‹º_®ways_šlše
 *

297 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


299  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

302 
__ex‹º_®ways_šlše
 const *

303 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


305  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

308 
	}
}

310 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

311 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

314 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


317 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

318 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

320 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

322 #ifdeà
__OPTIMIZE__


323 
__ex‹º_®ways_šlše
 *

324 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


326  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

329 
__ex‹º_®ways_šlše
 const *

330 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


332  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

335 
	}
}

337 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

338 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

343 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

344 
__THROW
 
	`__nÚnuÎ
 ((2));

345 
__END_NAMESPACE_STD


349 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

350 cÚ¡ *
__»¡riù
 
__d–im
,

351 **
__»¡riù
 
__§ve_±r
)

352 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

353 #ifdeà
__USE_POSIX


354 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

355 **
__»¡riù
 
__§ve_±r
)

356 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

359 #ifdeà
__USE_GNU


361 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


362 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

363 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

364 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

365 cÚ¡ *
__ÃedË
)

366 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

368 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

369 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 #ifdeà
__USE_GNU


377 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

378 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

379 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

383 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

384 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

385 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

387 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

388 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

392 
__BEGIN_NAMESPACE_STD


394 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

395 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

396 
__END_NAMESPACE_STD


398 #ifdef 
__USE_XOPEN2K8


401 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

402 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

406 
__BEGIN_NAMESPACE_STD


408 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

409 
__END_NAMESPACE_STD


410 #ifdeà
__USE_XOPEN2K


418 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


421 #ifdeà
__REDIRECT_NTH


422 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

423 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

424 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

426 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

427 
__THROW
 
	`__nÚnuÎ
 ((2));

428 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

433 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

434 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

438 #ifdeà
__USE_XOPEN2K8


440 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

446 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

448 #ifdeà
__USE_MISC


450 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

451 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

457 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

458 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

461 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


464 *
	`šdex
 (*
__s
, 
__c
)

465 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

466 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

467 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

469 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


470 
__ex‹º_®ways_šlše
 *

471 
	`šdex
 (*
__s
, 
__c
è
__THROW


473  
	`__butš_šdex
 (
__s
, 
__c
);

476 
__ex‹º_®ways_šlše
 const *

477 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


479  
	`__butš_šdex
 (
__s
, 
__c
);

482 
	}
}

484 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

485 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

489 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


492 *
	`ršdex
 (*
__s
, 
__c
)

493 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

495 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

497 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


498 
__ex‹º_®ways_šlše
 *

499 
	`ršdex
 (*
__s
, 
__c
è
__THROW


501  
	`__butš_ršdex
 (
__s
, 
__c
);

504 
__ex‹º_®ways_šlše
 const *

505 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


507  
	`__butš_ršdex
 (
__s
, 
__c
);

510 
	}
}

512 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

513 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

518 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

522 #ifdef 
__USE_GNU


523 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

524 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

525 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

530 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

533 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

534 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

537 #ifdef 
__USE_GNU


540 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

541 
__loÿË_t
 
__loc
)

542 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

544 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

545 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

546 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

549 #ifdef 
__USE_MISC


552 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

553 cÚ¡ *
__»¡riù
 
__d–im
)

554 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdef 
__USE_XOPEN2K8


559 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

562 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

563 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

564 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

565 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

570 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

571 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

572 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

573 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 #ifdef 
__USE_GNU


579 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

580 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

583 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

586 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

588 #iâdeà
ba£Çme


593 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


594 "C++" *
	$ba£Çme
 (*
__f’ame
)

595 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

596 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

597 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

599 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

605 #ià
	`__GNUC_PREREQ
 (3,4)

606 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

607 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


627 
	~<b™s/¡ršg.h
>

630 
	~<b™s/¡ršg2.h
>

633 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


635 
	~<b™s/¡ršg3.h
>

639 #ià
defšed
 
__USE_GNU
 && defšed 
__OPTIMIZE__
 \

640 && 
defšed
 
__ex‹º_®ways_šlše
 && 
	$__GNUC_PREREQ
 (3,2)

641 #ià!
defšed
 
_FORCE_INLINES
 && !defšed 
_HAVE_STRING_ARCH_mempıy


643 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy_šlše
 (de¡, src,‚)

	)

644 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy_šlše
 (de¡, src,‚)

	)

646 
__ex‹º_®ways_šlše
 *

647 
	$__mempıy_šlše
 (*
__»¡riù
 
__de¡
,

648 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

650  (*è
	`memıy
 (
__de¡
, 
__¤c
, 
__n
) + __n;

651 
	}
}

656 
	g__END_DECLS


	@/usr/include/stropts.h

18 #iâdeà
_STROPTS_H


19 
	#_STROPTS_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<b™s/ty³s.h
>

23 
	~<b™s/xt™y³s.h
>

25 #iâdeà
__gid_t_defšed


26 
__gid_t
 
	tgid_t
;

27 
	#__gid_t_defšed


	)

30 #iâdeà
__uid_t_defšed


31 
__uid_t
 
	tuid_t
;

32 
	#__uid_t_defšed


	)

35 
__t_sÿÏr_t
 
	tt_sÿÏr_t
;

36 
__t_usÿÏr_t
 
	tt_usÿÏr_t
;

39 
	~<b™s/¡rİts.h
>

42 
__BEGIN_DECLS


45 
	$i§¡»am
 (
__fdes
è
__THROW
;

51 
	`g‘msg
 (
__fdes
, 
¡rbuf
 *
__»¡riù
 
__ùÍŒ
,

52 
¡rbuf
 *
__»¡riù
 
__d©­Œ
,

53 *
__»¡riù
 
__æag¥
);

60 
	`g‘pmsg
 (
__fdes
, 
¡rbuf
 *
__»¡riù
 
__ùÍŒ
,

61 
¡rbuf
 *
__»¡riù
 
__d©­Œ
,

62 *
__»¡riù
 
__bªdp
, *__»¡riù 
__æag¥
);

67 
	$ioùl
 (
__fd
, 
__»que¡
, ...è
__THROW
;

73 
	`putmsg
 (
__fdes
, cÚ¡ 
¡rbuf
 *
__ùÍŒ
,

74 cÚ¡ 
¡rbuf
 *
__d©­Œ
, 
__æags
);

80 
	`pumsg
 (
__fdes
, cÚ¡ 
¡rbuf
 *
__ùÍŒ
,

81 cÚ¡ 
¡rbuf
 *
__d©­Œ
, 
__bªd
, 
__æags
);

85 
	$ç‰ach
 (
__fdes
, cÚ¡ *
__·th
è
__THROW
;

88 
	$fd‘ach
 (cÚ¡ *
__·th
è
__THROW
;

90 
__END_DECLS


	@/usr/include/syslog.h

1 
	~<sys/sy¦og.h
>

	@/usr/include/termios.h

22 #iâdef 
_TERMIOS_H


23 
	#_TERMIOS_H
 1

	)

25 
	~<ã©u»s.h
>

26 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


28 
	~<b™s/ty³s.h
>

29 #iâdeà
__pid_t_defšed


30 
__pid_t
 
	tpid_t
;

31 
	#__pid_t_defšed


	)

35 
	g__BEGIN_DECLS


39 
	~<b™s/‹rmios.h
>

41 #ifdeà
__USE_MISC


44 
	#CCEQ
(
v®
, 
c
è((cè=ğ(v®è&& (v®è!ğ
_POSIX_VDISABLE
)

	)

48 
¥“d_t
 
	$cfg‘o¥“d
 (cÚ¡ 
‹rmios
 *
__‹rmios_p
è
__THROW
;

51 
¥“d_t
 
	$cfg‘i¥“d
 (cÚ¡ 
‹rmios
 *
__‹rmios_p
è
__THROW
;

54 
	$cf£to¥“d
 (
‹rmios
 *
__‹rmios_p
, 
¥“d_t
 
__¥“d
è
__THROW
;

57 
	$cf£ti¥“d
 (
‹rmios
 *
__‹rmios_p
, 
¥“d_t
 
__¥“d
è
__THROW
;

59 #ifdef 
__USE_MISC


61 
	$cf£t¥“d
 (
‹rmios
 *
__‹rmios_p
, 
¥“d_t
 
__¥“d
è
__THROW
;

66 
	$tcg‘©Œ
 (
__fd
, 
‹rmios
 *
__‹rmios_p
è
__THROW
;

70 
	$tc£‰r
 (
__fd
, 
__İtiÚ®_aùiÚs
,

71 cÚ¡ 
‹rmios
 *
__‹rmios_p
è
__THROW
;

74 #ifdef 
__USE_MISC


76 
	$cfmak”aw
 (
‹rmios
 *
__‹rmios_p
è
__THROW
;

80 
	$tc£ndb»ak
 (
__fd
, 
__du¿tiÚ
è
__THROW
;

86 
	`tcd¿š
 (
__fd
);

90 
	$tcæush
 (
__fd
, 
__queue_£ËùÜ
è
__THROW
;

94 
	$tcæow
 (
__fd
, 
__aùiÚ
è
__THROW
;

97 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


99 
__pid_t
 
	$tcg‘sid
 (
__fd
è
__THROW
;

103 #ifdeà
__USE_MISC


104 
	~<sys/‰ydeçuÉs.h
>

107 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifdeà
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifdeà
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_POSIX


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_MISC


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/ucontext.h

20 #iâdeà
_UCONTEXT_H


21 
	#_UCONTEXT_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<sys/ucÚ‹xt.h
>

28 
__BEGIN_DECLS


31 
	$g‘cÚ‹xt
 (
ucÚ‹xt_t
 *
__uı
è
__THROWNL
;

34 
	$£tcÚ‹xt
 (cÚ¡ 
ucÚ‹xt_t
 *
__uı
è
__THROWNL
;

38 
	$sw­cÚ‹xt
 (
ucÚ‹xt_t
 *
__»¡riù
 
__ouı
,

39 cÚ¡ 
ucÚ‹xt_t
 *
__»¡riù
 
__uı
è
__THROWNL
;

47 
	$makecÚ‹xt
 (
ucÚ‹xt_t
 *
__uı
, (*
__func
) (),

48 
__¬gc
, ...è
__THROW
;

50 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<b™s/posix_İt.h
>

208 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


209 
	~<b™s/’vœÚm’ts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<b™s/ty³s.h
>

222 #iâdef 
__ssize_t_defšed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_defšed


	)

227 
	#__Ãed_size_t


	)

228 
	#__Ãed_NULL


	)

229 
	~<¡ddef.h
>

231 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


234 #iâdeà
__gid_t_defšed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_defšed


	)

239 #iâdeà
__uid_t_defšed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_defšed


	)

244 #iâdeà
__off_t_defšed


245 #iâdeà
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_defšed


	)

252 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_defšed


	)

257 #iâdeà
__u£cÚds_t_defšed


258 
__u£cÚds_t
 
	tu£cÚds_t
;

259 
	#__u£cÚds_t_defšed


	)

262 #iâdeà
__pid_t_defšed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_defšed


	)

268 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


269 #iâdeà
__šŒ_t_defšed


270 
__šŒ_t
 
	tšŒ_t
;

271 
	#__šŒ_t_defšed


	)

275 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


276 #iâdeà
__sockËn_t_defšed


277 
__sockËn_t
 
	tsockËn_t
;

278 
	#__sockËn_t_defšed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

292 #ifdeà
__USE_GNU


295 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

296 
__THROW
 
	`__nÚnuÎ
 ((1));

299 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

300 
__THROW
 
	`__nÚnuÎ
 ((1));

303 #ifdeà
__USE_ATFILE


307 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

308 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 #iâdef 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifdeà
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #iâdeà
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

339 #ifdeà
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifdeà
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

349 
__THROW
;

356 
	`şo£
 (
__fd
);

363 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

369 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

371 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


372 #iâdeà
__USE_FILE_OFFSET64


379 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

380 
__off_t
 
__off£t
è
__wur
;

387 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
è
__wur
;

390 #ifdeà
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

392 
__off64_t
 
__off£t
),

393 
´—d64
è
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

395 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

396 
pwr™e64
è
__wur
;

398 
	#´—d
 
´—d64


	)

399 
	#pwr™e
 
pwr™e64


	)

403 #ifdeà
__USE_LARGEFILE64


407 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

408 
__off64_t
 
__off£t
è
__wur
;

411 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
è
__wur
;

420 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

422 #ifdeà
__USE_GNU


425 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

435 
	$®¬m
 (
__£cÚds
è
__THROW
;

447 
	`¦“p
 (
__£cÚds
);

449 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

450 || 
defšed
 
__USE_MISC


455 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

456 
__THROW
;

463 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

472 
	`·u£
 ();

476 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

479 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

486 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

491 #ifdeà
__USE_ATFILE


494 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

495 
__gid_t
 
__group
, 
__æag
)

496 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

500 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

502 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


504 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

514 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

523 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

524 || 
defšed
 
__USE_MISC


528 *
	$g‘wd
 (*
__buf
)

529 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

534 
	$dup
 (
__fd
è
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

539 #ifdeà
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

546 **
__’vœÚ
;

547 #ifdeà
__USE_GNU


548 **
’vœÚ
;

554 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

555 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdeà
__USE_XOPEN2K8


560 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

561 
__THROW
 
	`__nÚnuÎ
 ((2));

566 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

567 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

581 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

582 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

588 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

590 #ifdeà
__USE_GNU


593 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

594 *cÚ¡ 
__’vp
[])

595 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


601 
	$niû
 (
__šc
è
__THROW
 
__wur
;

606 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

612 
	~<b™s/cÚâame.h
>

615 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

616 
__THROW
 
	`__nÚnuÎ
 ((1));

619 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

622 
	$syscÚf
 (
__Çme
è
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

631 
__pid_t
 
	$g‘pid
 (è
__THROW
;

634 
__pid_t
 
	$g‘µid
 (è
__THROW
;

637 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

640 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

641 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


642 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

649 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

651 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


663 
	$£g½
 (è
__THROW
;

670 
__pid_t
 
	$£tsid
 (è
__THROW
;

672 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


674 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

678 
__uid_t
 
	$g‘uid
 (è
__THROW
;

681 
__uid_t
 
	$g‘euid
 (è
__THROW
;

684 
__gid_t
 
	$g‘gid
 (è
__THROW
;

687 
__gid_t
 
	$g‘egid
 (è
__THROW
;

692 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

705 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


708 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

711 #ifdeà
__USE_XOPEN2K


713 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

722 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


725 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

728 #ifdeà
__USE_XOPEN2K


730 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

733 #ifdeà
__USE_GNU


736 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

737 
__THROW
;

741 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

742 
__THROW
;

746 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

747 
__THROW
 
__wur
;

751 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

761 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

762 || 
defšed
 
__USE_MISC


767 
__pid_t
 
	$vfÜk
 (è
__THROW
;

773 *
	$‰yÇme
 (
__fd
è
__THROW
;

777 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

778 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

782 
	$i§‰y
 (
__fd
è
__THROW
;

784 #ifdeà
__USE_MISC


787 
	$‰y¦Ù
 (è
__THROW
;

792 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

793 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

795 #ifdeà
__USE_ATFILE


798 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

799 cÚ¡ *
__to
, 
__æags
)

800 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

803 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


805 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

806 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

811 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

812 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

813 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

816 #ifdeà
__USE_ATFILE


818 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

819 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

822 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

823 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

824 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

828 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

830 #ifdeà
__USE_ATFILE


832 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

833 
__THROW
 
	`__nÚnuÎ
 ((2));

837 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

841 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

844 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

851 *
	`g‘logš
 ();

852 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


859 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

862 #ifdef 
__USE_MISC


864 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

868 #ifdef 
__USE_POSIX2


872 
	#__Ãed_g‘İt


	)

873 
	~<g‘İt.h
>

877 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


881 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

885 #ià
defšed
 
__USE_MISC


888 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

889 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

893 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

899 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

901 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

902 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

908 
	$vhªgup
 (è
__THROW
;

911 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

919 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

920 
size_t
 
__off£t
, 
__sÿË
)

921 
__THROW
 
	`__nÚnuÎ
 ((1));

927 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

931 *
	$g‘u£rsh–l
 (è
__THROW
;

932 
	$’du£rsh–l
 (è
__THROW
;

933 
	$£tu£rsh–l
 (è
__THROW
;

939 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

943 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

946 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

950 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

958 
	`fsync
 (
__fd
);

961 #ifdeà
__USE_GNU


964 
	$syncfs
 (
__fd
è
__THROW
;

968 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


971 
	`g‘ho¡id
 ();

974 
	$sync
 (è
__THROW
;

977 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


980 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

985 
	$g‘dbËsize
 (è
__THROW
;

991 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


994 #iâdeà
__USE_FILE_OFFSET64


995 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

996 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

998 #ifdeà
__REDIRECT_NTH


999 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1000 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1001 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1003 
	#Œunÿ‹
 
Œunÿ‹64


	)

1006 #ifdeà
__USE_LARGEFILE64


1007 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1008 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1013 #ià
defšed
 
__USE_POSIX199309
 \

1014 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1017 #iâdeà
__USE_FILE_OFFSET64


1018 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1020 #ifdeà
__REDIRECT_NTH


1021 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1022 
árunÿ‹64
è
__wur
;

1024 
	#árunÿ‹
 
árunÿ‹64


	)

1027 #ifdeà
__USE_LARGEFILE64


1028 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1034 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1035 || 
defšed
 
__USE_MISC


1039 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1045 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1049 #ifdeà
__USE_MISC


1060 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1065 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1077 
	#F_ULOCK
 0

	)

1078 
	#F_LOCK
 1

	)

1079 
	#F_TLOCK
 2

	)

1080 
	#F_TEST
 3

	)

1082 #iâdeà
__USE_FILE_OFFSET64


1083 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1085 #ifdeà
__REDIRECT


1086 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1087 
lockf64
è
__wur
;

1089 
	#lockf
 
lockf64


	)

1092 #ifdeà
__USE_LARGEFILE64


1093 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1098 #ifdeà
__USE_GNU


1103 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1104 (
__ex‹nsiÚ__
 \

1105 ({ 
__»suÉ
; \

1106 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1107 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1108 
__»suÉ
; 
	}
}))

	)

1111 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1114 
fd©async
 (
__fdes
);

1120 #ifdef 
__USE_XOPEN


1122 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1123 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1127 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1128 
__THROW
 
	`__nÚnuÎ
 ((1));

1135 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1136 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1143 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1145 *
	$ù”mid
 (*
__s
è
__THROW
;

1148 *
	`cu£rid
 (*
__s
);

1154 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_XOPEN2K


1155 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1156 (*
__·»Á
) (),

1157 (*
__chd
è()è
__THROW
;

1162 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1163 
	~<b™s/uni¡d.h
>

1166 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¬k”
 {

157 
_IO_m¬k”
 *
	m_Ãxt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

165 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

166 
	mpublic
:

167 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

168 ~
¡»amm¬k”
();

169 
§všg
(è{  
	m_¥os
 == -2; }

170 
d–
(
¡»amm¬k”
&);

171 
d–
();

176 
	e__codecvt_»suÉ


178 
	m__codecvt_ok
,

179 
	m__codecvt_·¹Ÿl
,

180 
	m__codecvt_”rÜ
,

181 
	m__codecvt_nocÚv


184 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

190 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

191 
	m__mb¡©e_t
 *,

192 cÚ¡ 
	mwch¬_t
 *,

193 cÚ¡ 
	mwch¬_t
 *,

194 cÚ¡ 
	mwch¬_t
 **, *,

196 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

197 
	m__mb¡©e_t
 *, *,

199 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

200 
	m__mb¡©e_t
 *,

202 cÚ¡ **, 
	mwch¬_t
 *,

203 
	mwch¬_t
 *, wchar_t **);

204 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

207 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

210 
_IO_icÚv_t
 
	m__cd_š
;

211 
_IO_icÚv_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¬_t
 *
	m_IO_»ad_±r
;

218 
wch¬_t
 *
	m_IO_»ad_’d
;

219 
wch¬_t
 *
	m_IO_»ad_ba£
;

220 
wch¬_t
 *
	m_IO_wr™e_ba£
;

221 
wch¬_t
 *
	m_IO_wr™e_±r
;

222 
wch¬_t
 *
	m_IO_wr™e_’d
;

223 
wch¬_t
 *
	m_IO_buf_ba£
;

224 
wch¬_t
 *
	m_IO_buf_’d
;

226 
wch¬_t
 *
	m_IO_§ve_ba£
;

227 
wch¬_t
 *
	m_IO_backup_ba£
;

229 
wch¬_t
 *
	m_IO_§ve_’d
;

231 
__mb¡©e_t
 
	m_IO_¡©e
;

232 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¬_t
 
	m_shÜtbuf
[1];

237 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

241 
	s_IO_FILE
 {

242 
	m_æags
;

243 
	#_IO_fe_æags
 
_æags


	)

247 * 
	m_IO_»ad_±r
;

248 * 
	m_IO_»ad_’d
;

249 * 
	m_IO_»ad_ba£
;

250 * 
	m_IO_wr™e_ba£
;

251 * 
	m_IO_wr™e_±r
;

252 * 
	m_IO_wr™e_’d
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_’d
;

256 *
	m_IO_§ve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_§ve_’d
;

260 
_IO_m¬k”
 *
	m_m¬k”s
;

262 
_IO_FILE
 *
	m_chaš
;

264 
	m_f’o
;

266 
	m_blksize
;

268 
	m_æags2
;

270 
_IO_off_t
 
	m_Şd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cŞumn
;

275 sigÃd 
	m_vbË_off£t
;

276 
	m_shÜtbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifdeà
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com¶‘e


286 
_IO_FILE
 
	m_fe
;

288 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_ä“»s_li¡
;

295 *
	m_ä“»s_buf
;

297 *
	m__·d1
;

298 *
	m__·d2
;

299 *
	m__·d3
;

300 *
	m__·d4
;

302 
size_t
 
	m__·d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

309 #iâdeà
__ılu¥lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_¶us
;

315 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

316 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

317 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

318 #iâdeà
_LIBC


319 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

320 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

321 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

323 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

324 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

325 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

333 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

341 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_şo£_â
 (*
	t__cook›
);

356 #ifdeà
_GNU_SOURCE


358 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

359 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

360 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

361 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

366 
__io_»ad_â
 *
	m»ad
;

367 
__io_wr™e_â
 *
	mwr™e
;

368 
__io_£ek_â
 *
	m£ek
;

369 
__io_şo£_â
 *
	mşo£
;

370 } 
	t_IO_cook›_io_funùiÚs_t
;

371 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

373 
	g_IO_cook›_fe
;

376 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

377 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

381 #ifdeà
__ılu¥lus


385 
__und”æow
 (
_IO_FILE
 *);

386 
__uæow
 (
_IO_FILE
 *);

387 
__ov”æow
 (
_IO_FILE
 *, );

388 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

390 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

391 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

394 #ià 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

397 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

400 
	#_IO_g‘c_uÆocked
(
_å
) \

401 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

402 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

403 
	#_IO_³ekc_uÆocked
(
_å
) \

404 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

405 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

406 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

407 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

408 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

409 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

410 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

412 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_g‘wc_uÆocked
(
_å
) \

414 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

415 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

416 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

417 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

418 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

422 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

423 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

426 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

427 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

429 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

431 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

432 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

434 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

438 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

440 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

441 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

442 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

444 #ifdeà
_IO_MTSAFE_IO


445 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

446 
	#_IO_æockfe
(
_å
) \

447 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

448 
	#_IO_fuÆockfe
(
_å
) \

449 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

451 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

452 
	#_IO_æockfe
(
_å
è

	)

453 
	#_IO_fuÆockfe
(
_å
è

	)

454 
	#_IO_árylockfe
(
_å
è

	)

455 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

456 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

459 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

460 
_IO_va_li¡
, *
__»¡riù
);

461 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

462 
_IO_va_li¡
);

463 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

471 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

473 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

474 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

475 #ià
__GNUC__
 >= 2

478 #ià
defšed
 
_LIBC
 && defšed 
SHARED


479 
	~<shlib-com·t.h
>

480 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_šcom·tibË
 \

482 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

483 cÚ¡ 
_IO_¡dš_u£d
;

484 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

487 #iâdeà
_IO_fwide_maybe_šcom·tibË


488 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

492 
	#_IO_fwide
(
__å
, 
__mode
) \

493 ({ 
__»suÉ
 = (
__mode
); \

494 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

496 ià((
__å
)->
_mode
 == 0) \

498 (
__å
)->
_mode
 = -1; \

499 
__»suÉ
 = (
__å
)->
_mode
; \

501 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

502 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

504 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

505 
__»suÉ
; })

	)

508 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

509 
_IO_va_li¡
, *
__»¡riù
);

510 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

511 
_IO_va_li¡
);

512 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

513 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

516 #ifdeà
__LDBL_COMPAT


517 
	~<b™s/libio-ldbl.h
>

520 #ifdeà
__ılu¥lus


	@/usr/include/openssl/bio.h

59 #iâdeà
HEADER_BIO_H


60 
	#HEADER_BIO_H


	)

62 
	~<İ’s¦/e_os2.h
>

64 #iâdeà
OPENSSL_NO_FP_API


65 
	~<¡dio.h
>

67 
	~<¡d¬g.h
>

69 
	~<İ’s¦/üy±o.h
>

71 #iâdeà
OPENSSL_NO_SCTP


72 #iâdeà
OPENSSL_SYS_VMS


73 
	~<¡dšt.h
>

75 
	~<š‰y³s.h
>

79 #ifdeà 
__ılu¥lus


84 
	#BIO_TYPE_NONE
 0

	)

85 
	#BIO_TYPE_MEM
 (1|0x0400)

	)

86 
	#BIO_TYPE_FILE
 (2|0x0400)

	)

88 
	#BIO_TYPE_FD
 (4|0x0400|0x0100)

	)

89 
	#BIO_TYPE_SOCKET
 (5|0x0400|0x0100)

	)

90 
	#BIO_TYPE_NULL
 (6|0x0400)

	)

91 
	#BIO_TYPE_SSL
 (7|0x0200)

	)

92 
	#BIO_TYPE_MD
 (8|0x0200)

	)

93 
	#BIO_TYPE_BUFFER
 (9|0x0200)

	)

94 
	#BIO_TYPE_CIPHER
 (10|0x0200)

	)

95 
	#BIO_TYPE_BASE64
 (11|0x0200)

	)

96 
	#BIO_TYPE_CONNECT
 (12|0x0400|0x0100)

	)

97 
	#BIO_TYPE_ACCEPT
 (13|0x0400|0x0100)

	)

98 
	#BIO_TYPE_PROXY_CLIENT
 (14|0x0200)

	)

99 
	#BIO_TYPE_PROXY_SERVER
 (15|0x0200)

	)

100 
	#BIO_TYPE_NBIO_TEST
 (16|0x0200)

	)

101 
	#BIO_TYPE_NULL_FILTER
 (17|0x0200)

	)

102 
	#BIO_TYPE_BER
 (18|0x0200)

	)

103 
	#BIO_TYPE_BIO
 (19|0x0400)

	)

104 
	#BIO_TYPE_LINEBUFFER
 (20|0x0200)

	)

105 
	#BIO_TYPE_DGRAM
 (21|0x0400|0x0100)

	)

106 #iâdeà
OPENSSL_NO_SCTP


107 
	#BIO_TYPE_DGRAM_SCTP
 (24|0x0400|0x0100)

	)

109 
	#BIO_TYPE_ASN1
 (22|0x0200)

	)

110 
	#BIO_TYPE_COMP
 (23|0x0200)

	)

112 
	#BIO_TYPE_DESCRIPTOR
 0x0100

	)

113 
	#BIO_TYPE_FILTER
 0x0200

	)

114 
	#BIO_TYPE_SOURCE_SINK
 0x0400

	)

120 
	#BIO_NOCLOSE
 0x00

	)

121 
	#BIO_CLOSE
 0x01

	)

126 
	#BIO_CTRL_RESET
 1

	)

127 
	#BIO_CTRL_EOF
 2

	)

128 
	#BIO_CTRL_INFO
 3

	)

129 
	#BIO_CTRL_SET
 4

	)

130 
	#BIO_CTRL_GET
 5

	)

131 
	#BIO_CTRL_PUSH
 6

	)

132 
	#BIO_CTRL_POP
 7

	)

133 
	#BIO_CTRL_GET_CLOSE
 8

	)

134 
	#BIO_CTRL_SET_CLOSE
 9

	)

135 
	#BIO_CTRL_PENDING
 10

	)

136 
	#BIO_CTRL_FLUSH
 11

	)

137 
	#BIO_CTRL_DUP
 12

	)

138 
	#BIO_CTRL_WPENDING
 13

	)

140 
	#BIO_CTRL_SET_CALLBACK
 14

	)

141 
	#BIO_CTRL_GET_CALLBACK
 15

	)

143 
	#BIO_CTRL_SET_FILENAME
 30

	)

146 
	#BIO_CTRL_DGRAM_CONNECT
 31

	)

147 
	#BIO_CTRL_DGRAM_SET_CONNECTED
 32

	)

149 
	#BIO_CTRL_DGRAM_SET_RECV_TIMEOUT
 33

	)

150 
	#BIO_CTRL_DGRAM_GET_RECV_TIMEOUT
 34

	)

151 
	#BIO_CTRL_DGRAM_SET_SEND_TIMEOUT
 35

	)

152 
	#BIO_CTRL_DGRAM_GET_SEND_TIMEOUT
 36

	)

154 
	#BIO_CTRL_DGRAM_GET_RECV_TIMER_EXP
 37

	)

155 
	#BIO_CTRL_DGRAM_GET_SEND_TIMER_EXP
 38

	)

158 
	#BIO_CTRL_DGRAM_MTU_DISCOVER
 39

	)

161 
	#BIO_CTRL_DGRAM_QUERY_MTU
 40

	)

162 
	#BIO_CTRL_DGRAM_GET_FALLBACK_MTU
 47

	)

163 
	#BIO_CTRL_DGRAM_GET_MTU
 41

	)

164 
	#BIO_CTRL_DGRAM_SET_MTU
 42

	)

168 
	#BIO_CTRL_DGRAM_MTU_EXCEEDED
 43

	)

172 
	#BIO_CTRL_DGRAM_GET_PEER
 46

	)

173 
	#BIO_CTRL_DGRAM_SET_PEER
 44

	)

175 
	#BIO_CTRL_DGRAM_SET_NEXT_TIMEOUT
 45

	)

177 
	#BIO_CTRL_DGRAM_SET_DONT_FRAG
 48

	)

179 
	#BIO_CTRL_DGRAM_GET_MTU_OVERHEAD
 49

	)

181 #iâdeà
OPENSSL_NO_SCTP


183 
	#BIO_CTRL_DGRAM_SCTP_SET_IN_HANDSHAKE
 50

	)

184 
	#BIO_CTRL_DGRAM_SCTP_ADD_AUTH_KEY
 51

	)

185 
	#BIO_CTRL_DGRAM_SCTP_NEXT_AUTH_KEY
 52

	)

186 
	#BIO_CTRL_DGRAM_SCTP_AUTH_CCS_RCVD
 53

	)

187 
	#BIO_CTRL_DGRAM_SCTP_GET_SNDINFO
 60

	)

188 
	#BIO_CTRL_DGRAM_SCTP_SET_SNDINFO
 61

	)

189 
	#BIO_CTRL_DGRAM_SCTP_GET_RCVINFO
 62

	)

190 
	#BIO_CTRL_DGRAM_SCTP_SET_RCVINFO
 63

	)

191 
	#BIO_CTRL_DGRAM_SCTP_GET_PRINFO
 64

	)

192 
	#BIO_CTRL_DGRAM_SCTP_SET_PRINFO
 65

	)

193 
	#BIO_CTRL_DGRAM_SCTP_SAVE_SHUTDOWN
 70

	)

197 
	#BIO_FP_READ
 0x02

	)

198 
	#BIO_FP_WRITE
 0x04

	)

199 
	#BIO_FP_APPEND
 0x08

	)

200 
	#BIO_FP_TEXT
 0x10

	)

202 
	#BIO_FLAGS_READ
 0x01

	)

203 
	#BIO_FLAGS_WRITE
 0x02

	)

204 
	#BIO_FLAGS_IO_SPECIAL
 0x04

	)

205 
	#BIO_FLAGS_RWS
 (
BIO_FLAGS_READ
|
BIO_FLAGS_WRITE
|
BIO_FLAGS_IO_SPECIAL
)

	)

206 
	#BIO_FLAGS_SHOULD_RETRY
 0x08

	)

207 #iâdeà
BIO_FLAGS_UPLINK


212 
	#BIO_FLAGS_UPLINK
 0

	)

216 
	#BIO_GHBN_CTRL_HITS
 1

	)

217 
	#BIO_GHBN_CTRL_MISSES
 2

	)

218 
	#BIO_GHBN_CTRL_CACHE_SIZE
 3

	)

219 
	#BIO_GHBN_CTRL_GET_ENTRY
 4

	)

220 
	#BIO_GHBN_CTRL_FLUSH
 5

	)

230 
	#BIO_FLAGS_BASE64_NO_NL
 0x100

	)

236 
	#BIO_FLAGS_MEM_RDONLY
 0x200

	)

238 
bio_¡
 
	tBIO
;

240 
BIO_£t_æags
(
BIO
 *
b
, 
æags
);

241 
BIO_‹¡_æags
(cÚ¡ 
BIO
 *
b
, 
æags
);

242 
BIO_ş—r_æags
(
BIO
 *
b
, 
æags
);

244 
	#BIO_g‘_æags
(
b
è
	`BIO_‹¡_æags
(b, ~(0x0))

	)

245 
	#BIO_£t_»Œy_¥ecŸl
(
b
) \

246 
	`BIO_£t_æags
(
b
, (
BIO_FLAGS_IO_SPECIAL
|
BIO_FLAGS_SHOULD_RETRY
))

	)

247 
	#BIO_£t_»Œy_»ad
(
b
) \

248 
	`BIO_£t_æags
(
b
, (
BIO_FLAGS_READ
|
BIO_FLAGS_SHOULD_RETRY
))

	)

249 
	#BIO_£t_»Œy_wr™e
(
b
) \

250 
	`BIO_£t_æags
(
b
, (
BIO_FLAGS_WRITE
|
BIO_FLAGS_SHOULD_RETRY
))

	)

253 
	#BIO_ş—r_»Œy_æags
(
b
) \

254 
	`BIO_ş—r_æags
(
b
, (
BIO_FLAGS_RWS
|
BIO_FLAGS_SHOULD_RETRY
))

	)

255 
	#BIO_g‘_»Œy_æags
(
b
) \

256 
	`BIO_‹¡_æags
(
b
, (
BIO_FLAGS_RWS
|
BIO_FLAGS_SHOULD_RETRY
))

	)

259 
	#BIO_should_»ad
(
a
è
	`BIO_‹¡_æags
×, 
BIO_FLAGS_READ
)

	)

260 
	#BIO_should_wr™e
(
a
è
	`BIO_‹¡_æags
×, 
BIO_FLAGS_WRITE
)

	)

261 
	#BIO_should_io_¥ecŸl
(
a
è
	`BIO_‹¡_æags
×, 
BIO_FLAGS_IO_SPECIAL
)

	)

262 
	#BIO_»Œy_ty³
(
a
è
	`BIO_‹¡_æags
×, 
BIO_FLAGS_RWS
)

	)

263 
	#BIO_should_»Œy
(
a
è
	`BIO_‹¡_æags
×, 
BIO_FLAGS_SHOULD_RETRY
)

	)

275 
	#BIO_RR_SSL_X509_LOOKUP
 0x01

	)

277 
	#BIO_RR_CONNECT
 0x02

	)

279 
	#BIO_RR_ACCEPT
 0x03

	)

282 
	#BIO_CB_FREE
 0x01

	)

283 
	#BIO_CB_READ
 0x02

	)

284 
	#BIO_CB_WRITE
 0x03

	)

285 
	#BIO_CB_PUTS
 0x04

	)

286 
	#BIO_CB_GETS
 0x05

	)

287 
	#BIO_CB_CTRL
 0x06

	)

293 
	#BIO_CB_RETURN
 0x80

	)

294 
	#BIO_CB_»tuº
(
a
è(×)|
BIO_CB_RETURN
)

	)

295 
	#BIO_cb_´e
(
a
è(!(×)&
BIO_CB_RETURN
))

	)

296 
	#BIO_cb_po¡
(
a
è(×)&
BIO_CB_RETURN
)

	)

298 (*
BIO_g‘_ÿÎback
(cÚ¡ 
BIO
 *
b
)è(
bio_¡
 *, , const *,

300 
BIO_£t_ÿÎback
(
BIO
 *
b
,

301 (*
ÿÎback
è(
bio_¡
 *, , const *,

303 *
BIO_g‘_ÿÎback_¬g
(cÚ¡ 
BIO
 *
b
);

304 
BIO_£t_ÿÎback_¬g
(
BIO
 *
b
, *
¬g
);

306 cÚ¡ *
BIO_m‘hod_Çme
(cÚ¡ 
BIO
 *
b
);

307 
BIO_m‘hod_ty³
(cÚ¡ 
BIO
 *
b
);

309 
	tbio_šfo_cb
 (
	tbio_¡
 *, , const *, , ,

312 
	sbio_m‘hod_¡
 {

313 
ty³
;

314 cÚ¡ *
Çme
;

315 (*
bwr™e
è(
BIO
 *, const *, );

316 (*
b»ad
è(
BIO
 *, *, );

317 (*
bputs
è(
BIO
 *, const *);

318 (*
bg‘s
è(
BIO
 *, *, );

319 (*
ù¾
è(
BIO
 *, , , *);

320 (*
ü—‹
è(
BIO
 *);

321 (*
de¡roy
è(
BIO
 *);

322 (*
ÿÎback_ù¾
è(
BIO
 *, , 
bio_šfo_cb
 *);

323 } 
	tBIO_METHOD
;

325 
	sbio_¡
 {

326 
BIO_METHOD
 *
m‘hod
;

328 (*
ÿÎback
è(
bio_¡
 *, , const *, , , );

329 *
cb_¬g
;

330 
š™
;

331 
shutdown
;

332 
æags
;

333 
»Œy_»asÚ
;

334 
num
;

335 *
±r
;

336 
bio_¡
 *
Ãxt_bio
;

337 
bio_¡
 *
´ev_bio
;

338 
»ã»nûs
;

339 
num_»ad
;

340 
num_wr™e
;

341 
CRYPTO_EX_DATA
 
ex_d©a
;

344 
DECLARE_STACK_OF
(
BIO
)

346 
	sbio_f_bufãr_ùx_¡ruù
 {

359 
ibuf_size
;

360 
obuf_size
;

361 *
ibuf
;

362 
ibuf_Ën
;

363 
ibuf_off
;

364 *
obuf
;

365 
obuf_Ën
;

366 
obuf_off
;

367 } 
	tBIO_F_BUFFER_CTX
;

370 
	ta¢1_ps_func
 (
	tBIO
 *
	tb
, **
	tpbuf
, *
	t¶’
,

371 *
	t·rg
);

373 #iâdeà
OPENSSL_NO_SCTP


375 
	sbio_dg¿m_sùp_¢dšfo
 {

376 
ušt16_t
 
¢d_sid
;

377 
ušt16_t
 
¢d_æags
;

378 
ušt32_t
 
¢d_µid
;

379 
ušt32_t
 
¢d_cÚ‹xt
;

382 
	sbio_dg¿m_sùp_rcvšfo
 {

383 
ušt16_t
 
rcv_sid
;

384 
ušt16_t
 
rcv_s¢
;

385 
ušt16_t
 
rcv_æags
;

386 
ušt32_t
 
rcv_µid
;

387 
ušt32_t
 
rcv_t¢
;

388 
ušt32_t
 
rcv_cumt¢
;

389 
ušt32_t
 
rcv_cÚ‹xt
;

392 
	sbio_dg¿m_sùp_´šfo
 {

393 
ušt16_t
 
´_pŞicy
;

394 
ušt32_t
 
´_v®ue
;

399 
	#BIO_CONN_S_BEFORE
 1

	)

400 
	#BIO_CONN_S_GET_IP
 2

	)

401 
	#BIO_CONN_S_GET_PORT
 3

	)

402 
	#BIO_CONN_S_CREATE_SOCKET
 4

	)

403 
	#BIO_CONN_S_CONNECT
 5

	)

404 
	#BIO_CONN_S_OK
 6

	)

405 
	#BIO_CONN_S_BLOCKED_CONNECT
 7

	)

406 
	#BIO_CONN_S_NBIO
 8

	)

411 
	#BIO_C_SET_CONNECT
 100

	)

412 
	#BIO_C_DO_STATE_MACHINE
 101

	)

413 
	#BIO_C_SET_NBIO
 102

	)

414 
	#BIO_C_SET_PROXY_PARAM
 103

	)

415 
	#BIO_C_SET_FD
 104

	)

416 
	#BIO_C_GET_FD
 105

	)

417 
	#BIO_C_SET_FILE_PTR
 106

	)

418 
	#BIO_C_GET_FILE_PTR
 107

	)

419 
	#BIO_C_SET_FILENAME
 108

	)

420 
	#BIO_C_SET_SSL
 109

	)

421 
	#BIO_C_GET_SSL
 110

	)

422 
	#BIO_C_SET_MD
 111

	)

423 
	#BIO_C_GET_MD
 112

	)

424 
	#BIO_C_GET_CIPHER_STATUS
 113

	)

425 
	#BIO_C_SET_BUF_MEM
 114

	)

426 
	#BIO_C_GET_BUF_MEM_PTR
 115

	)

427 
	#BIO_C_GET_BUFF_NUM_LINES
 116

	)

428 
	#BIO_C_SET_BUFF_SIZE
 117

	)

429 
	#BIO_C_SET_ACCEPT
 118

	)

430 
	#BIO_C_SSL_MODE
 119

	)

431 
	#BIO_C_GET_MD_CTX
 120

	)

432 
	#BIO_C_GET_PROXY_PARAM
 121

	)

433 
	#BIO_C_SET_BUFF_READ_DATA
 122

	)

434 
	#BIO_C_GET_CONNECT
 123

	)

435 
	#BIO_C_GET_ACCEPT
 124

	)

436 
	#BIO_C_SET_SSL_RENEGOTIATE_BYTES
 125

	)

437 
	#BIO_C_GET_SSL_NUM_RENEGOTIATES
 126

	)

438 
	#BIO_C_SET_SSL_RENEGOTIATE_TIMEOUT
 127

	)

439 
	#BIO_C_FILE_SEEK
 128

	)

440 
	#BIO_C_GET_CIPHER_CTX
 129

	)

441 
	#BIO_C_SET_BUF_MEM_EOF_RETURN
 130

	)

443 
	#BIO_C_SET_BIND_MODE
 131

	)

444 
	#BIO_C_GET_BIND_MODE
 132

	)

445 
	#BIO_C_FILE_TELL
 133

	)

446 
	#BIO_C_GET_SOCKS
 134

	)

447 
	#BIO_C_SET_SOCKS
 135

	)

449 
	#BIO_C_SET_WRITE_BUF_SIZE
 136

	)

450 
	#BIO_C_GET_WRITE_BUF_SIZE
 137

	)

451 
	#BIO_C_MAKE_BIO_PAIR
 138

	)

452 
	#BIO_C_DESTROY_BIO_PAIR
 139

	)

453 
	#BIO_C_GET_WRITE_GUARANTEE
 140

	)

454 
	#BIO_C_GET_READ_REQUEST
 141

	)

455 
	#BIO_C_SHUTDOWN_WR
 142

	)

456 
	#BIO_C_NREAD0
 143

	)

457 
	#BIO_C_NREAD
 144

	)

458 
	#BIO_C_NWRITE0
 145

	)

459 
	#BIO_C_NWRITE
 146

	)

460 
	#BIO_C_RESET_READ_REQUEST
 147

	)

461 
	#BIO_C_SET_MD_CTX
 148

	)

463 
	#BIO_C_SET_PREFIX
 149

	)

464 
	#BIO_C_GET_PREFIX
 150

	)

465 
	#BIO_C_SET_SUFFIX
 151

	)

466 
	#BIO_C_GET_SUFFIX
 152

	)

468 
	#BIO_C_SET_EX_ARG
 153

	)

469 
	#BIO_C_GET_EX_ARG
 154

	)

471 
	#BIO_£t_­p_d©a
(
s
,
¬g
è
	`BIO_£t_ex_d©a
(s,0,¬g)

	)

472 
	#BIO_g‘_­p_d©a
(
s
è
	`BIO_g‘_ex_d©a
(s,0)

	)

475 
	#BIO_£t_cÚn_ho¡Çme
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_CONNECT
,0,(*êame)

	)

476 
	#BIO_£t_cÚn_pÜt
(
b
,
pÜt
è
	`BIO_ù¾
(b,
BIO_C_SET_CONNECT
,1,(*íÜt)

	)

477 
	#BIO_£t_cÚn_
(
b
,

è
	`BIO_ù¾
(b,
BIO_C_SET_CONNECT
,2,(*))

	)

478 
	#BIO_£t_cÚn_št_pÜt
(
b
,
pÜt
è
	`BIO_ù¾
(b,
BIO_C_SET_CONNECT
,3,(*íÜt)

	)

479 
	#BIO_g‘_cÚn_ho¡Çme
(
b
è
	`BIO_±r_ù¾
(b,
BIO_C_GET_CONNECT
,0)

	)

480 
	#BIO_g‘_cÚn_pÜt
(
b
è
	`BIO_±r_ù¾
(b,
BIO_C_GET_CONNECT
,1)

	)

481 
	#BIO_g‘_cÚn_
(
b
è
	`BIO_±r_ù¾
(b,
BIO_C_GET_CONNECT
,2)

	)

482 
	#BIO_g‘_cÚn_št_pÜt
(
b
è
	`BIO_ù¾
(b,
BIO_C_GET_CONNECT
,3,
NULL
)

	)

484 
	#BIO_£t_nbio
(
b
,
n
è
	`BIO_ù¾
(b,
BIO_C_SET_NBIO
,Ò),
NULL
)

	)

487 
	#BIO_£t_acû±_pÜt
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_ACCEPT
,0,(*êame)

	)

488 
	#BIO_g‘_acû±_pÜt
(
b
è
	`BIO_±r_ù¾
(b,
BIO_C_GET_ACCEPT
,0)

	)

490 
	#BIO_£t_nbio_acû±
(
b
,
n
è
	`BIO_ù¾
(b,
BIO_C_SET_ACCEPT
,1,Ò)?(*)"a":
NULL
)

	)

491 
	#BIO_£t_acû±_bios
(
b
,
bio
è
	`BIO_ù¾
(b,
BIO_C_SET_ACCEPT
,2,(*)bio)

	)

493 
	#BIO_BIND_NORMAL
 0

	)

494 
	#BIO_BIND_REUSEADDR_IF_UNUSED
 1

	)

495 
	#BIO_BIND_REUSEADDR
 2

	)

496 
	#BIO_£t_bšd_mode
(
b
,
mode
è
	`BIO_ù¾
(b,
BIO_C_SET_BIND_MODE
,mode,
NULL
)

	)

497 
	#BIO_g‘_bšd_mode
(
b
,
mode
è
	`BIO_ù¾
(b,
BIO_C_GET_BIND_MODE
,0,
NULL
)

	)

500 
	#BIO_do_cÚÃù
(
b
è
	`BIO_do_hªdshake
(b)

	)

501 
	#BIO_do_acû±
(
b
è
	`BIO_do_hªdshake
(b)

	)

502 
	#BIO_do_hªdshake
(
b
è
	`BIO_ù¾
(b,
BIO_C_DO_STATE_MACHINE
,0,
NULL
)

	)

505 
	#BIO_£t_u¾
(
b
,
u¾
è
	`BIO_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,0,(*)(u¾))

	)

506 
	#BIO_£t_´ox›s
(
b
,
p
è
	`BIO_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,1,(*)Õ))

	)

508 
	#BIO_£t_f‹r_bio
(
b
,
s
è
	`BIO_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,2,(*)(s))

	)

510 
	#BIO_£t_´oxy_cb
(
b
,
cb
è
	`BIO_ÿÎback_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,3,(*(*cb)()))

	)

511 
	#BIO_£t_´oxy_h—d”
(
b
,
sk
è
	`BIO_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,4,(*)sk)

	)

512 
	#BIO_£t_no_cÚÃù_»tuº
(
b
,
boŞ
è
	`BIO_št_ù¾
(b,
BIO_C_SET_PROXY_PARAM
,5,boŞ)

	)

514 
	#BIO_g‘_´oxy_h—d”
(
b
,
skp
è
	`BIO_ù¾
(b,
BIO_C_GET_PROXY_PARAM
,0,(*)skp)

	)

515 
	#BIO_g‘_´ox›s
(
b
,
pxy_p
è
	`BIO_ù¾
(b,
BIO_C_GET_PROXY_PARAM
,1,(*)Õxy_p))

	)

516 
	#BIO_g‘_u¾
(
b
,
u¾
è
	`BIO_ù¾
(b,
BIO_C_GET_PROXY_PARAM
,2,(*)(u¾))

	)

517 
	#BIO_g‘_no_cÚÃù_»tuº
(
b
è
	`BIO_ù¾
(b,
BIO_C_GET_PROXY_PARAM
,5,
NULL
)

	)

520 
	#BIO_£t_fd
(
b
,
fd
,
c
è
	`BIO_št_ù¾
(b,
BIO_C_SET_FD
,c,fd)

	)

521 
	#BIO_g‘_fd
(
b
,
c
è
	`BIO_ù¾
(b,
BIO_C_GET_FD
,0,(*)c)

	)

524 
	#BIO_£t_å
(
b
,
å
,
c
è
	`BIO_ù¾
(b,
BIO_C_SET_FILE_PTR
,c,(*)å)

	)

525 
	#BIO_g‘_å
(
b
,
åp
è
	`BIO_ù¾
(b,
BIO_C_GET_FILE_PTR
,0,(*)åp)

	)

528 
	#BIO_£ek
(
b
,
ofs
è()
	`BIO_ù¾
(b,
BIO_C_FILE_SEEK
,ofs,
NULL
)

	)

529 
	#BIO_‹Î
(
b
è()
	`BIO_ù¾
(b,
BIO_C_FILE_TELL
,0,
NULL
)

	)

535 #ifdeà
CONST_STRICT


540 
BIO_»ad_f’ame
(
BIO
 *
b
, cÚ¡ *
Çme
);

542 
	#BIO_»ad_f’ame
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_FILENAME
, \

543 
BIO_CLOSE
|
BIO_FP_READ
,(*)
Çme
)

	)

545 
	#BIO_wr™e_f’ame
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_FILENAME
, \

546 
BIO_CLOSE
|
BIO_FP_WRITE
,
Çme
)

	)

547 
	#BIO_­³nd_f’ame
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_FILENAME
, \

548 
BIO_CLOSE
|
BIO_FP_APPEND
,
Çme
)

	)

549 
	#BIO_rw_f’ame
(
b
,
Çme
è
	`BIO_ù¾
(b,
BIO_C_SET_FILENAME
, \

550 
BIO_CLOSE
|
BIO_FP_READ
|
BIO_FP_WRITE
,
Çme
)

	)

558 
	#BIO_£t_s¦
(
b
,
s¦
,
c
è
	`BIO_ù¾
(b,
BIO_C_SET_SSL
,c,(*)s¦)

	)

559 
	#BIO_g‘_s¦
(
b
,
s¦p
è
	`BIO_ù¾
(b,
BIO_C_GET_SSL
,0,(*)s¦p)

	)

560 
	#BIO_£t_s¦_mode
(
b
,
ş›Á
è
	`BIO_ù¾
(b,
BIO_C_SSL_MODE
,ş›Á,
NULL
)

	)

561 
	#BIO_£t_s¦_»ÃgÙŸ‹_by‹s
(
b
,
num
) \

562 
	`BIO_ù¾
(
b
,
BIO_C_SET_SSL_RENEGOTIATE_BYTES
,
num
,
NULL
)

	)

563 
	#BIO_g‘_num_»ÃgÙŸ‹s
(
b
) \

564 
	`BIO_ù¾
(
b
,
BIO_C_GET_SSL_NUM_RENEGOTIATES
,0,
NULL
)

	)

565 
	#BIO_£t_s¦_»ÃgÙŸ‹_timeout
(
b
,
£cÚds
) \

566 
	`BIO_ù¾
(
b
,
BIO_C_SET_SSL_RENEGOTIATE_TIMEOUT
,
£cÚds
,
NULL
)

	)

571 
	#BIO_g‘_mem_d©a
(
b
,
µ
è
	`BIO_ù¾
(b,
BIO_CTRL_INFO
,0,(*íp)

	)

572 
	#BIO_£t_mem_buf
(
b
,
bm
,
c
è
	`BIO_ù¾
(b,
BIO_C_SET_BUF_MEM
,c,(*)bm)

	)

573 
	#BIO_g‘_mem_±r
(
b
,
µ
è
	`BIO_ù¾
(b,
BIO_C_GET_BUF_MEM_PTR
,0,(*íp)

	)

574 
	#BIO_£t_mem_eof_»tuº
(
b
,
v
) \

575 
	`BIO_ù¾
(
b
,
BIO_C_SET_BUF_MEM_EOF_RETURN
,
v
,
NULL
)

	)

578 
	#BIO_g‘_bufãr_num_lšes
(
b
è
	`BIO_ù¾
(b,
BIO_C_GET_BUFF_NUM_LINES
,0,
NULL
)

	)

579 
	#BIO_£t_bufãr_size
(
b
,
size
è
	`BIO_ù¾
(b,
BIO_C_SET_BUFF_SIZE
,size,
NULL
)

	)

580 
	#BIO_£t_»ad_bufãr_size
(
b
,
size
è
	`BIO_št_ù¾
(b,
BIO_C_SET_BUFF_SIZE
,size,0)

	)

581 
	#BIO_£t_wr™e_bufãr_size
(
b
,
size
è
	`BIO_št_ù¾
(b,
BIO_C_SET_BUFF_SIZE
,size,1)

	)

582 
	#BIO_£t_bufãr_»ad_d©a
(
b
,
buf
,
num
è
	`BIO_ù¾
(b,
BIO_C_SET_BUFF_READ_DATA
,num,buf)

	)

585 
	#BIO_dup_¡©e
(
b
,
»t
è
	`BIO_ù¾
(b,
BIO_CTRL_DUP
,0,(*)Ô‘))

	)

587 
	#BIO_»£t
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_RESET
,0,
NULL
)

	)

588 
	#BIO_eof
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_EOF
,0,
NULL
)

	)

589 
	#BIO_£t_şo£
(
b
,
c
è()
	`BIO_ù¾
(b,
BIO_CTRL_SET_CLOSE
,(c),
NULL
)

	)

590 
	#BIO_g‘_şo£
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_GET_CLOSE
,0,
NULL
)

	)

591 
	#BIO_³ndšg
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_PENDING
,0,
NULL
)

	)

592 
	#BIO_w³ndšg
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_WPENDING
,0,
NULL
)

	)

594 
size_t
 
BIO_ù¾_³ndšg
(
BIO
 *
b
);

595 
size_t
 
BIO_ù¾_w³ndšg
(
BIO
 *
b
);

596 
	#BIO_æush
(
b
è()
	`BIO_ù¾
(b,
BIO_CTRL_FLUSH
,0,
NULL
)

	)

597 
	#BIO_g‘_šfo_ÿÎback
(
b
,
cbp
è()
	`BIO_ù¾
(b,
BIO_CTRL_GET_CALLBACK
,0, \

598 
cbp
)

	)

599 
	#BIO_£t_šfo_ÿÎback
(
b
,
cb
è()
	`BIO_ÿÎback_ù¾
(b,
BIO_CTRL_SET_CALLBACK
,cb)

	)

602 
	#BIO_bufãr_g‘_num_lšes
(
b
è
	`BIO_ù¾
(b,
BIO_CTRL_GET
,0,
NULL
)

	)

605 
	#BIO_£t_wr™e_buf_size
(
b
,
size
è()
	`BIO_ù¾
(b,
BIO_C_SET_WRITE_BUF_SIZE
,size,
NULL
)

	)

606 
	#BIO_g‘_wr™e_buf_size
(
b
,
size
è(
size_t
)
	`BIO_ù¾
(b,
BIO_C_GET_WRITE_BUF_SIZE
,size,
NULL
)

	)

607 
	#BIO_make_bio_·œ
(
b1
,
b2
è()
	`BIO_ù¾
(b1,
BIO_C_MAKE_BIO_PAIR
,0,b2)

	)

608 
	#BIO_de¡roy_bio_·œ
(
b
è()
	`BIO_ù¾
(b,
BIO_C_DESTROY_BIO_PAIR
,0,
NULL
)

	)

609 
	#BIO_shutdown_wr
(
b
è()
	`BIO_ù¾
(b, 
BIO_C_SHUTDOWN_WR
, 0, 
NULL
)

	)

611 
	#BIO_g‘_wr™e_gu¬ª‹e
(
b
è()
	`BIO_ù¾
(b,
BIO_C_GET_WRITE_GUARANTEE
,0,
NULL
)

	)

612 
	#BIO_g‘_»ad_»que¡
(
b
è()
	`BIO_ù¾
(b,
BIO_C_GET_READ_REQUEST
,0,
NULL
)

	)

613 
size_t
 
BIO_ù¾_g‘_wr™e_gu¬ª‹e
(
BIO
 *
b
);

614 
size_t
 
BIO_ù¾_g‘_»ad_»que¡
(
BIO
 *
b
);

615 
BIO_ù¾_»£t_»ad_»que¡
(
BIO
 *
b
);

618 
	#BIO_ù¾_dg¿m_cÚÃù
(
b
,
³”
) \

619 ()
	`BIO_ù¾
(
b
,
BIO_CTRL_DGRAM_CONNECT
,0, (*)
³”
)

	)

620 
	#BIO_ù¾_£t_cÚÃùed
(
b
, 
¡©e
, 
³”
) \

621 ()
	`BIO_ù¾
(
b
, 
BIO_CTRL_DGRAM_SET_CONNECTED
, 
¡©e
, (*)
³”
)

	)

622 
	#BIO_dg¿m_»cv_timedout
(
b
) \

623 ()
	`BIO_ù¾
(
b
, 
BIO_CTRL_DGRAM_GET_RECV_TIMER_EXP
, 0, 
NULL
)

	)

624 
	#BIO_dg¿m_£nd_timedout
(
b
) \

625 ()
	`BIO_ù¾
(
b
, 
BIO_CTRL_DGRAM_GET_SEND_TIMER_EXP
, 0, 
NULL
)

	)

626 
	#BIO_dg¿m_g‘_³”
(
b
,
³”
) \

627 ()
	`BIO_ù¾
(
b
, 
BIO_CTRL_DGRAM_GET_PEER
, 0, (*)
³”
)

	)

628 
	#BIO_dg¿m_£t_³”
(
b
,
³”
) \

629 ()
	`BIO_ù¾
(
b
, 
BIO_CTRL_DGRAM_SET_PEER
, 0, (*)
³”
)

	)

630 
	#BIO_dg¿m_g‘_mtu_ov”h—d
(
b
) \

631 ()
	`BIO_ù¾
((
b
), 
BIO_CTRL_DGRAM_GET_MTU_OVERHEAD
, 0, 
NULL
)

	)

636 
BIO_£t_ex_d©a
(
BIO
 *
bio
, 
idx
, *
d©a
);

637 *
BIO_g‘_ex_d©a
(
BIO
 *
bio
, 
idx
);

638 
BIO_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

639 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

640 
BIO_numb”_»ad
(
BIO
 *
bio
);

641 
BIO_numb”_wr™‹n
(
BIO
 *
bio
);

644 
BIO_a¢1_£t_´efix
(
BIO
 *
b
, 
a¢1_ps_func
 *
´efix
,

645 
a¢1_ps_func
 *
´efix_ä“
);

646 
BIO_a¢1_g‘_´efix
(
BIO
 *
b
, 
a¢1_ps_func
 **
µ»fix
,

647 
a¢1_ps_func
 **
µ»fix_ä“
);

648 
BIO_a¢1_£t_suffix
(
BIO
 *
b
, 
a¢1_ps_func
 *
suffix
,

649 
a¢1_ps_func
 *
suffix_ä“
);

650 
BIO_a¢1_g‘_suffix
(
BIO
 *
b
, 
a¢1_ps_func
 **
psuffix
,

651 
a¢1_ps_func
 **
psuffix_ä“
);

653 #iâdeà
OPENSSL_NO_FP_API


654 
BIO_METHOD
 *
BIO_s_fe
();

655 
BIO
 *
BIO_Ãw_fe
(cÚ¡ *
f’ame
, cÚ¡ *
mode
);

656 
BIO
 *
BIO_Ãw_å
(
FILE
 *
¡»am
, 
şo£_æag
);

657 
	#BIO_s_fe_š‹º®
 
BIO_s_fe


	)

659 
BIO
 *
BIO_Ãw
(
BIO_METHOD
 *
ty³
);

660 
BIO_£t
(
BIO
 *
a
, 
BIO_METHOD
 *
ty³
);

661 
BIO_ä“
(
BIO
 *
a
);

662 
BIO_vä“
(
BIO
 *
a
);

663 
BIO_»ad
(
BIO
 *
b
, *
d©a
, 
Ën
);

664 
BIO_g‘s
(
BIO
 *
bp
, *
buf
, 
size
);

665 
BIO_wr™e
(
BIO
 *
b
, cÚ¡ *
d©a
, 
Ën
);

666 
BIO_puts
(
BIO
 *
bp
, cÚ¡ *
buf
);

667 
BIO_šd’t
(
BIO
 *
b
, 
šd’t
, 
max
);

668 
BIO_ù¾
(
BIO
 *
bp
, 
cmd
, 
Ïrg
, *
·rg
);

669 
BIO_ÿÎback_ù¾
(
BIO
 *
b
, 
cmd
,

670 (*
å
è(
bio_¡
 *, , const *, ,

672 *
BIO_±r_ù¾
(
BIO
 *
bp
, 
cmd
, 
Ïrg
);

673 
BIO_št_ù¾
(
BIO
 *
bp
, 
cmd
, 
Ïrg
, 
Ÿrg
);

674 
BIO
 *
BIO_push
(BIO *
b
, BIO *
­³nd
);

675 
BIO
 *
BIO_pİ
(BIO *
b
);

676 
BIO_ä“_®l
(
BIO
 *
a
);

677 
BIO
 *
BIO_fšd_ty³
(BIO *
b
, 
bio_ty³
);

678 
BIO
 *
BIO_Ãxt
(BIO *
b
);

679 
BIO
 *
BIO_g‘_»Œy_BIO
(BIO *
bio
, *
»asÚ
);

680 
BIO_g‘_»Œy_»asÚ
(
BIO
 *
bio
);

681 
BIO
 *
BIO_dup_chaš
(BIO *
š
);

683 
BIO_Ä—d0
(
BIO
 *
bio
, **
buf
);

684 
BIO_Ä—d
(
BIO
 *
bio
, **
buf
, 
num
);

685 
BIO_nwr™e0
(
BIO
 *
bio
, **
buf
);

686 
BIO_nwr™e
(
BIO
 *
bio
, **
buf
, 
num
);

688 
BIO_debug_ÿÎback
(
BIO
 *
bio
, 
cmd
, cÚ¡ *
¬gp
, 
¬gi
,

689 
¬gl
, 
»t
);

691 
BIO_METHOD
 *
BIO_s_mem
();

692 
BIO
 *
BIO_Ãw_mem_buf
(cÚ¡ *
buf
, 
Ën
);

693 
BIO_METHOD
 *
BIO_s_sock‘
();

694 
BIO_METHOD
 *
BIO_s_cÚÃù
();

695 
BIO_METHOD
 *
BIO_s_acû±
();

696 
BIO_METHOD
 *
BIO_s_fd
();

697 #iâdeà
OPENSSL_SYS_OS2


698 
BIO_METHOD
 *
BIO_s_log
();

700 
BIO_METHOD
 *
BIO_s_bio
();

701 
BIO_METHOD
 *
BIO_s_nuÎ
();

702 
BIO_METHOD
 *
BIO_f_nuÎ
();

703 
BIO_METHOD
 *
BIO_f_bufãr
();

704 #ifdeà
OPENSSL_SYS_VMS


705 
BIO_METHOD
 *
BIO_f_lšebufãr
();

707 
BIO_METHOD
 *
BIO_f_nbio_‹¡
();

708 #iâdeà
OPENSSL_NO_DGRAM


709 
BIO_METHOD
 *
BIO_s_d©ag¿m
();

710 #iâdeà
OPENSSL_NO_SCTP


711 
BIO_METHOD
 *
BIO_s_d©ag¿m_sùp
();

717 
BIO_sock_should_»Œy
(
i
);

718 
BIO_sock_nÚ_çl_”rÜ
(
”rÜ
);

719 
BIO_dg¿m_nÚ_çl_”rÜ
(
”rÜ
);

721 
BIO_fd_should_»Œy
(
i
);

722 
BIO_fd_nÚ_çl_”rÜ
(
”rÜ
);

723 
BIO_dump_cb
((*
cb
è(cÚ¡ *
d©a
, 
size_t
 
Ën
, *
u
),

724 *
u
, cÚ¡ *
s
, 
Ën
);

725 
BIO_dump_šd’t_cb
((*
cb
è(cÚ¡ *
d©a
, 
size_t
 
Ën
, *
u
),

726 *
u
, cÚ¡ *
s
, 
Ën
, 
šd’t
);

727 
BIO_dump
(
BIO
 *
b
, cÚ¡ *
by‹s
, 
Ën
);

728 
BIO_dump_šd’t
(
BIO
 *
b
, cÚ¡ *
by‹s
, 
Ën
, 
šd’t
);

729 #iâdeà
OPENSSL_NO_FP_API


730 
BIO_dump_å
(
FILE
 *
å
, cÚ¡ *
s
, 
Ën
);

731 
BIO_dump_šd’t_å
(
FILE
 *
å
, cÚ¡ *
s
, 
Ën
, 
šd’t
);

733 
BIO_hex_¡ršg
(
BIO
 *
out
, 
šd’t
, 
width
, *
d©a
,

734 
d©®’
);

736 
ho¡’t
 *
BIO_g‘ho¡byÇme
(cÚ¡ *
Çme
);

746 
BIO_sock_”rÜ
(
sock
);

747 
BIO_sock‘_ioùl
(
fd
, 
ty³
, *
¬g
);

748 
BIO_sock‘_nbio
(
fd
, 
mode
);

749 
BIO_g‘_pÜt
(cÚ¡ *
¡r
, *
pÜt_±r
);

750 
BIO_g‘_ho¡_
(cÚ¡ *
¡r
, *

);

751 
BIO_g‘_acû±_sock‘
(*
ho¡_pÜt
, 
mode
);

752 
BIO_acû±
(
sock
, **
_pÜt
);

753 
BIO_sock_š™
();

754 
BIO_sock_ş—nup
();

755 
BIO_£t_tı_nd–ay
(
sock
, 
tuº_Ú
);

757 
BIO
 *
BIO_Ãw_sock‘
(
sock
, 
şo£_æag
);

758 
BIO
 *
BIO_Ãw_dg¿m
(
fd
, 
şo£_æag
);

759 #iâdeà
OPENSSL_NO_SCTP


760 
BIO
 *
BIO_Ãw_dg¿m_sùp
(
fd
, 
şo£_æag
);

761 
BIO_dg¿m_is_sùp
(
BIO
 *
bio
);

762 
BIO_dg¿m_sùp_nÙifiÿtiÚ_cb
(
BIO
 *
b
,

763 (*
hªdË_nÙifiÿtiÚs
è(
BIO
 *
bio
,

765 *
cÚ‹xt
,

766 *
buf
),

767 *
cÚ‹xt
);

768 
BIO_dg¿m_sùp_wa™_fÜ_dry
(
BIO
 *
b
);

769 
BIO_dg¿m_sùp_msg_wa™šg
(
BIO
 *
b
);

771 
BIO
 *
BIO_Ãw_fd
(
fd
, 
şo£_æag
);

772 
BIO
 *
BIO_Ãw_cÚÃù
(cÚ¡ *
ho¡_pÜt
);

773 
BIO
 *
BIO_Ãw_acû±
(cÚ¡ *
ho¡_pÜt
);

775 
BIO_Ãw_bio_·œ
(
BIO
 **
bio1
, 
size_t
 
wr™ebuf1
,

776 
BIO
 **
bio2
, 
size_t
 
wr™ebuf2
);

783 
BIO_cİy_Ãxt_»Œy
(
BIO
 *
b
);

789 #ifdeà
__GNUC__


790 
	#__bio_h__©Œ__
 
__©Œibu‹__


	)

792 
	#__bio_h__©Œ__
(
x
)

	)

794 
BIO_´štf
(
BIO
 *
bio
, cÚ¡ *
fÜm©
, ...)

795 
__bio_h__©Œ__
((
__fÜm©__
(
__´štf__
, 2, 3)));

796 
BIO_v´štf
(
BIO
 *
bio
, cÚ¡ *
fÜm©
, 
va_li¡
 
¬gs
)

797 
__bio_h__©Œ__
((
__fÜm©__
(
__´štf__
, 2, 0)));

798 
BIO_¢´štf
(*
buf
, 
size_t
 
n
, cÚ¡ *
fÜm©
, ...)

799 
__bio_h__©Œ__
((
__fÜm©__
(
__´štf__
, 3, 4)));

800 
BIO_v¢´štf
(*
buf
, 
size_t
 
n
, cÚ¡ *
fÜm©
, 
va_li¡
 
¬gs
)

801 
__bio_h__©Œ__
((
__fÜm©__
(
__´štf__
, 3, 0)));

802 #undeà
__bio_h__©Œ__


809 
ERR_lßd_BIO_¡ršgs
();

814 
	#BIO_F_ACPT_STATE
 100

	)

815 
	#BIO_F_BIO_ACCEPT
 101

	)

816 
	#BIO_F_BIO_BER_GET_HEADER
 102

	)

817 
	#BIO_F_BIO_CALLBACK_CTRL
 131

	)

818 
	#BIO_F_BIO_CTRL
 103

	)

819 
	#BIO_F_BIO_GETHOSTBYNAME
 120

	)

820 
	#BIO_F_BIO_GETS
 104

	)

821 
	#BIO_F_BIO_GET_ACCEPT_SOCKET
 105

	)

822 
	#BIO_F_BIO_GET_HOST_IP
 106

	)

823 
	#BIO_F_BIO_GET_PORT
 107

	)

824 
	#BIO_F_BIO_MAKE_PAIR
 121

	)

825 
	#BIO_F_BIO_NEW
 108

	)

826 
	#BIO_F_BIO_NEW_FILE
 109

	)

827 
	#BIO_F_BIO_NEW_MEM_BUF
 126

	)

828 
	#BIO_F_BIO_NREAD
 123

	)

829 
	#BIO_F_BIO_NREAD0
 124

	)

830 
	#BIO_F_BIO_NWRITE
 125

	)

831 
	#BIO_F_BIO_NWRITE0
 122

	)

832 
	#BIO_F_BIO_PUTS
 110

	)

833 
	#BIO_F_BIO_READ
 111

	)

834 
	#BIO_F_BIO_SOCK_INIT
 112

	)

835 
	#BIO_F_BIO_WRITE
 113

	)

836 
	#BIO_F_BUFFER_CTRL
 114

	)

837 
	#BIO_F_CONN_CTRL
 127

	)

838 
	#BIO_F_CONN_STATE
 115

	)

839 
	#BIO_F_DGRAM_SCTP_READ
 132

	)

840 
	#BIO_F_DGRAM_SCTP_WRITE
 133

	)

841 
	#BIO_F_FILE_CTRL
 116

	)

842 
	#BIO_F_FILE_READ
 130

	)

843 
	#BIO_F_LINEBUFFER_CTRL
 129

	)

844 
	#BIO_F_MEM_READ
 128

	)

845 
	#BIO_F_MEM_WRITE
 117

	)

846 
	#BIO_F_SSL_NEW
 118

	)

847 
	#BIO_F_WSASTARTUP
 119

	)

850 
	#BIO_R_ACCEPT_ERROR
 100

	)

851 
	#BIO_R_BAD_FOPEN_MODE
 101

	)

852 
	#BIO_R_BAD_HOSTNAME_LOOKUP
 102

	)

853 
	#BIO_R_BROKEN_PIPE
 124

	)

854 
	#BIO_R_CONNECT_ERROR
 103

	)

855 
	#BIO_R_EOF_ON_MEMORY_BIO
 127

	)

856 
	#BIO_R_ERROR_SETTING_NBIO
 104

	)

857 
	#BIO_R_ERROR_SETTING_NBIO_ON_ACCEPTED_SOCKET
 105

	)

858 
	#BIO_R_ERROR_SETTING_NBIO_ON_ACCEPT_SOCKET
 106

	)

859 
	#BIO_R_GETHOSTBYNAME_ADDR_IS_NOT_AF_INET
 107

	)

860 
	#BIO_R_INVALID_ARGUMENT
 125

	)

861 
	#BIO_R_INVALID_IP_ADDRESS
 108

	)

862 
	#BIO_R_IN_USE
 123

	)

863 
	#BIO_R_KEEPALIVE
 109

	)

864 
	#BIO_R_NBIO_CONNECT_ERROR
 110

	)

865 
	#BIO_R_NO_ACCEPT_PORT_SPECIFIED
 111

	)

866 
	#BIO_R_NO_HOSTNAME_SPECIFIED
 112

	)

867 
	#BIO_R_NO_PORT_DEFINED
 113

	)

868 
	#BIO_R_NO_PORT_SPECIFIED
 114

	)

869 
	#BIO_R_NO_SUCH_FILE
 128

	)

870 
	#BIO_R_NULL_PARAMETER
 115

	)

871 
	#BIO_R_TAG_MISMATCH
 116

	)

872 
	#BIO_R_UNABLE_TO_BIND_SOCKET
 117

	)

873 
	#BIO_R_UNABLE_TO_CREATE_SOCKET
 118

	)

874 
	#BIO_R_UNABLE_TO_LISTEN_SOCKET
 119

	)

875 
	#BIO_R_UNINITIALIZED
 120

	)

876 
	#BIO_R_UNSUPPORTED_METHOD
 121

	)

877 
	#BIO_R_WRITE_TO_READ_ONLY_BIO
 126

	)

878 
	#BIO_R_WSASTARTUP
 122

	)

880 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/buffer.h

59 #iâdeà
HEADER_BUFFER_H


60 
	#HEADER_BUFFER_H


	)

62 
	~<İ’s¦/os¦_typ.h
>

64 #ifdeà 
__ılu¥lus


68 
	~<¡ddef.h
>

70 #ià!
defšed
(
NO_SYS_TYPES_H
)

71 
	~<sys/ty³s.h
>

77 
	sbuf_mem_¡
 {

78 
size_t
 
Ëngth
;

79 *
d©a
;

80 
size_t
 
max
;

83 
BUF_MEM
 *
BUF_MEM_Ãw
();

84 
BUF_MEM_ä“
(
BUF_MEM
 *
a
);

85 
BUF_MEM_grow
(
BUF_MEM
 *
¡r
, 
size_t
 
Ën
);

86 
BUF_MEM_grow_ş—n
(
BUF_MEM
 *
¡r
, 
size_t
 
Ën
);

87 
size_t
 
BUF_¡ºËn
(cÚ¡ *
¡r
, size_ˆ
maxËn
);

88 *
BUF_¡rdup
(cÚ¡ *
¡r
);

94 *
BUF_¡ºdup
(cÚ¡ *
¡r
, 
size_t
 
siz
);

96 *
BUF_memdup
(cÚ¡ *
d©a
, 
size_t
 
siz
);

97 
BUF_»v”£
(*
out
, cÚ¡ *
š
, 
size_t
 
siz
);

100 
size_t
 
BUF_¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
siz
);

101 
size_t
 
BUF_¡¾ÿt
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
siz
);

108 
ERR_lßd_BUF_¡ršgs
();

113 
	#BUF_F_BUF_MEMDUP
 103

	)

114 
	#BUF_F_BUF_MEM_GROW
 100

	)

115 
	#BUF_F_BUF_MEM_GROW_CLEAN
 105

	)

116 
	#BUF_F_BUF_MEM_NEW
 101

	)

117 
	#BUF_F_BUF_STRDUP
 102

	)

118 
	#BUF_F_BUF_STRNDUP
 104

	)

122 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/comp.h

2 #iâdeà
HEADER_COMP_H


3 
	#HEADER_COMP_H


	)

5 
	~<İ’s¦/üy±o.h
>

7 #ifdeà
OPENSSL_NO_COMP


8 #”rÜ 
COMP
 
is
 
di§bËd
.

11 #ifdeà 
__ılu¥lus


15 
comp_ùx_¡
 
	tCOMP_CTX
;

17 
	scomp_m‘hod_¡
 {

18 
ty³
;

19 cÚ¡ *
Çme
;

20 (*
š™
è(
COMP_CTX
 *
ùx
);

21 (*
fšish
è(
COMP_CTX
 *
ùx
);

22 (*
com´ess
è(
COMP_CTX
 *
ùx
,

23 *
out
, 
Ş’
,

24 *
š
, 
’
);

25 (*
ex·nd
è(
COMP_CTX
 *
ùx
,

26 *
out
, 
Ş’
,

27 *
š
, 
’
);

31 (*
ù¾
) ();

32 (*
ÿÎback_ù¾
) ();

35 
	scomp_ùx_¡
 {

36 
COMP_METHOD
 *
m‘h
;

37 
com´ess_š
;

38 
com´ess_out
;

39 
ex·nd_š
;

40 
ex·nd_out
;

41 
CRYPTO_EX_DATA
 
ex_d©a
;

44 
COMP_CTX
 *
COMP_CTX_Ãw
(
COMP_METHOD
 *
m‘h
);

45 
COMP_CTX_ä“
(
COMP_CTX
 *
ùx
);

46 
COMP_com´ess_block
(
COMP_CTX
 *
ùx
, *
out
, 
Ş’
,

47 *
š
, 
’
);

48 
COMP_ex·nd_block
(
COMP_CTX
 *
ùx
, *
out
, 
Ş’
,

49 *
š
, 
’
);

50 
COMP_METHOD
 *
COMP_¾e
();

51 
COMP_METHOD
 *
COMP_zlib
();

52 
COMP_zlib_ş—nup
();

54 #ifdeà
HEADER_BIO_H


55 #ifdeà
ZLIB


56 
BIO_METHOD
 *
BIO_f_zlib
();

65 
ERR_lßd_COMP_¡ršgs
();

70 
	#COMP_F_BIO_ZLIB_FLUSH
 99

	)

71 
	#COMP_F_BIO_ZLIB_NEW
 100

	)

72 
	#COMP_F_BIO_ZLIB_READ
 101

	)

73 
	#COMP_F_BIO_ZLIB_WRITE
 102

	)

76 
	#COMP_R_ZLIB_DEFLATE_ERROR
 99

	)

77 
	#COMP_R_ZLIB_INFLATE_ERROR
 100

	)

78 
	#COMP_R_ZLIB_NOT_SUPPORTED
 101

	)

80 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/crypto.h

117 #iâdeà
HEADER_CRYPTO_H


118 
	#HEADER_CRYPTO_H


	)

120 
	~<¡dlib.h
>

122 
	~<İ’s¦/e_os2.h
>

124 #iâdeà
OPENSSL_NO_FP_API


125 
	~<¡dio.h
>

128 
	~<İ’s¦/¡ack.h
>

129 
	~<İ’s¦/§ã¡ack.h
>

130 
	~<İ’s¦/İ’s¦v.h
>

131 
	~<İ’s¦/os¦_typ.h
>

133 #ifdeà
CHARSET_EBCDIC


134 
	~<İ’s¦/ebcdic.h
>

141 
	~<İ’s¦/symhacks.h
>

143 #ifdeà 
__ılu¥lus


152 
	#SSLEAY_VERSION_NUMBER
 
OPENSSL_VERSION_NUMBER


	)

153 
	#SSLEAY_VERSION
 0

	)

155 
	#SSLEAY_CFLAGS
 2

	)

156 
	#SSLEAY_BUILT_ON
 3

	)

157 
	#SSLEAY_PLATFORM
 4

	)

158 
	#SSLEAY_DIR
 5

	)

162 
üy±o_ex_d©a_¡
 
	tCRYPTO_EX_DATA
;

164 
	tCRYPTO_EX_Ãw
 (*
	t·»Á
, *
	t±r
, 
	tCRYPTO_EX_DATA
 *
	tad
,

165 
	tidx
, 
	t¬gl
, *
	t¬gp
);

167 
	tCRYPTO_EX_ä“
 (*
	t·»Á
, *
	t±r
, 
	tCRYPTO_EX_DATA
 *
	tad
,

168 
	tidx
, 
	t¬gl
, *
	t¬gp
);

170 
	tCRYPTO_EX_dup
 (
	tCRYPTO_EX_DATA
 *
	tto
, CRYPTO_EX_DATA *
	täom
,

171 *
	täom_d
, 
	tidx
, 
	t¬gl
, *
	t¬gp
);

175 
	sİ’s¦_™em_¡
 {

176 
code
;

177 *
v®ue
;

178 
size_t
 
v®ue_size
;

180 
size_t
 *
v®ue_Ëngth
;

181 } 
	tOPENSSL_ITEM
;

188 
	#CRYPTO_LOCK_ERR
 1

	)

189 
	#CRYPTO_LOCK_EX_DATA
 2

	)

190 
	#CRYPTO_LOCK_X509
 3

	)

191 
	#CRYPTO_LOCK_X509_INFO
 4

	)

192 
	#CRYPTO_LOCK_X509_PKEY
 5

	)

193 
	#CRYPTO_LOCK_X509_CRL
 6

	)

194 
	#CRYPTO_LOCK_X509_REQ
 7

	)

195 
	#CRYPTO_LOCK_DSA
 8

	)

196 
	#CRYPTO_LOCK_RSA
 9

	)

197 
	#CRYPTO_LOCK_EVP_PKEY
 10

	)

198 
	#CRYPTO_LOCK_X509_STORE
 11

	)

199 
	#CRYPTO_LOCK_SSL_CTX
 12

	)

200 
	#CRYPTO_LOCK_SSL_CERT
 13

	)

201 
	#CRYPTO_LOCK_SSL_SESSION
 14

	)

202 
	#CRYPTO_LOCK_SSL_SESS_CERT
 15

	)

203 
	#CRYPTO_LOCK_SSL
 16

	)

204 
	#CRYPTO_LOCK_SSL_METHOD
 17

	)

205 
	#CRYPTO_LOCK_RAND
 18

	)

206 
	#CRYPTO_LOCK_RAND2
 19

	)

207 
	#CRYPTO_LOCK_MALLOC
 20

	)

208 
	#CRYPTO_LOCK_BIO
 21

	)

209 
	#CRYPTO_LOCK_GETHOSTBYNAME
 22

	)

210 
	#CRYPTO_LOCK_GETSERVBYNAME
 23

	)

211 
	#CRYPTO_LOCK_READDIR
 24

	)

212 
	#CRYPTO_LOCK_RSA_BLINDING
 25

	)

213 
	#CRYPTO_LOCK_DH
 26

	)

214 
	#CRYPTO_LOCK_MALLOC2
 27

	)

215 
	#CRYPTO_LOCK_DSO
 28

	)

216 
	#CRYPTO_LOCK_DYNLOCK
 29

	)

217 
	#CRYPTO_LOCK_ENGINE
 30

	)

218 
	#CRYPTO_LOCK_UI
 31

	)

219 
	#CRYPTO_LOCK_ECDSA
 32

	)

220 
	#CRYPTO_LOCK_EC
 33

	)

221 
	#CRYPTO_LOCK_ECDH
 34

	)

222 
	#CRYPTO_LOCK_BN
 35

	)

223 
	#CRYPTO_LOCK_EC_PRE_COMP
 36

	)

224 
	#CRYPTO_LOCK_STORE
 37

	)

225 
	#CRYPTO_LOCK_COMP
 38

	)

226 
	#CRYPTO_LOCK_FIPS
 39

	)

227 
	#CRYPTO_LOCK_FIPS2
 40

	)

228 
	#CRYPTO_NUM_LOCKS
 41

	)

230 
	#CRYPTO_LOCK
 1

	)

231 
	#CRYPTO_UNLOCK
 2

	)

232 
	#CRYPTO_READ
 4

	)

233 
	#CRYPTO_WRITE
 8

	)

235 #iâdeà
OPENSSL_NO_LOCKING


236 #iâdeà
CRYPTO_w_lock


237 
	#CRYPTO_w_lock
(
ty³
) \

238 
	`CRYPTO_lock
(
CRYPTO_LOCK
|
CRYPTO_WRITE
,
ty³
,
__FILE__
,
__LINE__
)

	)

239 
	#CRYPTO_w_uÆock
(
ty³
) \

240 
	`CRYPTO_lock
(
CRYPTO_UNLOCK
|
CRYPTO_WRITE
,
ty³
,
__FILE__
,
__LINE__
)

	)

241 
	#CRYPTO_r_lock
(
ty³
) \

242 
	`CRYPTO_lock
(
CRYPTO_LOCK
|
CRYPTO_READ
,
ty³
,
__FILE__
,
__LINE__
)

	)

243 
	#CRYPTO_r_uÆock
(
ty³
) \

244 
	`CRYPTO_lock
(
CRYPTO_UNLOCK
|
CRYPTO_READ
,
ty³
,
__FILE__
,
__LINE__
)

	)

245 
	#CRYPTO_add
(
addr
,
amouÁ
,
ty³
) \

246 
	`CRYPTO_add_lock
(
addr
,
amouÁ
,
ty³
,
__FILE__
,
__LINE__
)

	)

249 
	#CRYPTO_w_lock
(
a
)

	)

250 
	#CRYPTO_w_uÆock
(
a
)

	)

251 
	#CRYPTO_r_lock
(
a
)

	)

252 
	#CRYPTO_r_uÆock
(
a
)

	)

253 
	#CRYPTO_add
(
a
,
b
,
c
è((*×))+=(b))

	)

263 
»ã»nûs
;

264 
CRYPTO_dyÆock_v®ue
 *
d©a
;

265 } 
	tCRYPTO_dyÆock
;

272 
	#CRYPTO_MEM_CHECK_OFF
 0x0

	)

273 
	#CRYPTO_MEM_CHECK_ON
 0x1

	)

274 
	#CRYPTO_MEM_CHECK_ENABLE
 0x2

	)

275 
	#CRYPTO_MEM_CHECK_DISABLE
 0x3

	)

283 
	#V_CRYPTO_MDEBUG_TIME
 0x1

	)

285 
	#V_CRYPTO_MDEBUG_THREAD
 0x2

	)

287 
	#V_CRYPTO_MDEBUG_ALL
 (
V_CRYPTO_MDEBUG_TIME
 | 
V_CRYPTO_MDEBUG_THREAD
)

	)

290 
bio_¡
 
	tBIO_dummy
;

292 
	süy±o_ex_d©a_¡
 {

293 
STACK_OF
(è*
sk
;

295 
dummy
;

297 
DECLARE_STACK_OF
()

304 
	süy±o_ex_d©a_func_¡
 {

305 
¬gl
;

306 *
¬gp
;

307 
CRYPTO_EX_Ãw
 *
Ãw_func
;

308 
CRYPTO_EX_ä“
 *
ä“_func
;

309 
CRYPTO_EX_dup
 *
dup_func
;

310 } 
	tCRYPTO_EX_DATA_FUNCS
;

312 
DECLARE_STACK_OF
(
CRYPTO_EX_DATA_FUNCS
)

319 
	#CRYPTO_EX_INDEX_BIO
 0

	)

320 
	#CRYPTO_EX_INDEX_SSL
 1

	)

321 
	#CRYPTO_EX_INDEX_SSL_CTX
 2

	)

322 
	#CRYPTO_EX_INDEX_SSL_SESSION
 3

	)

323 
	#CRYPTO_EX_INDEX_X509_STORE
 4

	)

324 
	#CRYPTO_EX_INDEX_X509_STORE_CTX
 5

	)

325 
	#CRYPTO_EX_INDEX_RSA
 6

	)

326 
	#CRYPTO_EX_INDEX_DSA
 7

	)

327 
	#CRYPTO_EX_INDEX_DH
 8

	)

328 
	#CRYPTO_EX_INDEX_ENGINE
 9

	)

329 
	#CRYPTO_EX_INDEX_X509
 10

	)

330 
	#CRYPTO_EX_INDEX_UI
 11

	)

331 
	#CRYPTO_EX_INDEX_ECDSA
 12

	)

332 
	#CRYPTO_EX_INDEX_ECDH
 13

	)

333 
	#CRYPTO_EX_INDEX_COMP
 14

	)

334 
	#CRYPTO_EX_INDEX_STORE
 15

	)

340 
	#CRYPTO_EX_INDEX_USER
 100

	)

347 
	#CRYPTO_m®loc_š™
(è
	`CRYPTO_£t_mem_funùiÚs
(\

348 
m®loc
, 
»®loc
, 
ä“
)

	)

350 #ià
defšed
 
CRYPTO_MDEBUG_ALL
 || defšed 
CRYPTO_MDEBUG_TIME
 || defšed 
CRYPTO_MDEBUG_THREAD


351 #iâdeà
CRYPTO_MDEBUG


352 
	#CRYPTO_MDEBUG


	)

360 
	#CRYPTO_m®loc_debug_š™
() do {\

361 
	`CRYPTO_£t_mem_debug_funùiÚs
(\

362 
CRYPTO_dbg_m®loc
,\

363 
CRYPTO_dbg_»®loc
,\

364 
CRYPTO_dbg_ä“
,\

365 
CRYPTO_dbg_£t_İtiÚs
,\

366 
CRYPTO_dbg_g‘_İtiÚs
);\

367 } 0)

	)

369 
CRYPTO_mem_ù¾
(
mode
);

370 
CRYPTO_is_mem_check_Ú
();

373 
	#MemCheck_¡¬t
(è
	`CRYPTO_mem_ù¾
(
CRYPTO_MEM_CHECK_ON
)

	)

374 
	#MemCheck_¡İ
(è
	`CRYPTO_mem_ù¾
(
CRYPTO_MEM_CHECK_OFF
)

	)

377 
	#MemCheck_Ú
(è
	`CRYPTO_mem_ù¾
(
CRYPTO_MEM_CHECK_ENABLE
)

	)

378 
	#MemCheck_off
(è
	`CRYPTO_mem_ù¾
(
CRYPTO_MEM_CHECK_DISABLE
)

	)

379 
	#is_MemCheck_Ú
(è
	`CRYPTO_is_mem_check_Ú
()

	)

381 
	#OPENSSL_m®loc
(
num
è
	`CRYPTO_m®loc
((êum,
__FILE__
,
__LINE__
)

	)

382 
	#OPENSSL_¡rdup
(
¡r
è
	`CRYPTO_¡rdup
((¡r),
__FILE__
,
__LINE__
)

	)

383 
	#OPENSSL_»®loc
(
addr
,
num
) \

384 
	`CRYPTO_»®loc
((*)
addr
,()
num
,
__FILE__
,
__LINE__
)

	)

385 
	#OPENSSL_»®loc_ş—n
(
addr
,
Şd_num
,
num
) \

386 
	`CRYPTO_»®loc_ş—n
(
addr
,
Şd_num
,
num
,
__FILE__
,
__LINE__
)

	)

387 
	#OPENSSL_»m®loc
(
addr
,
num
) \

388 
	`CRYPTO_»m®loc
((**)
addr
,()
num
,
__FILE__
,
__LINE__
)

	)

389 
	#OPENSSL_ä“Func
 
CRYPTO_ä“


	)

390 
	#OPENSSL_ä“
(
addr
è
	`CRYPTO_ä“
×ddr)

	)

392 
	#OPENSSL_m®loc_locked
(
num
) \

393 
	`CRYPTO_m®loc_locked
(()
num
,
__FILE__
,
__LINE__
)

	)

394 
	#OPENSSL_ä“_locked
(
addr
è
	`CRYPTO_ä“_locked
×ddr)

	)

396 cÚ¡ *
SSL—y_v”siÚ
(
ty³
);

397 
SSL—y
();

399 
OPENSSL_is£tugid
();

402 
¡_CRYPTO_EX_DATA_IMPL
 
	tCRYPTO_EX_DATA_IMPL
;

404 cÚ¡ 
CRYPTO_EX_DATA_IMPL
 *
CRYPTO_g‘_ex_d©a_im¶em’tiÚ
();

406 
CRYPTO_£t_ex_d©a_im¶em’tiÚ
(cÚ¡ 
CRYPTO_EX_DATA_IMPL
 *
i
);

408 
CRYPTO_ex_d©a_Ãw_şass
();

410 
CRYPTO_g‘_ex_Ãw_šdex
(
şass_šdex
, 
¬gl
, *
¬gp
,

411 
CRYPTO_EX_Ãw
 *
Ãw_func
, 
CRYPTO_EX_dup
 *
dup_func
,

412 
CRYPTO_EX_ä“
 *
ä“_func
);

417 
CRYPTO_Ãw_ex_d©a
(
şass_šdex
, *
obj
, 
CRYPTO_EX_DATA
 *
ad
);

418 
CRYPTO_dup_ex_d©a
(
şass_šdex
, 
CRYPTO_EX_DATA
 *
to
,

419 
CRYPTO_EX_DATA
 *
äom
);

420 
CRYPTO_ä“_ex_d©a
(
şass_šdex
, *
obj
, 
CRYPTO_EX_DATA
 *
ad
);

425 
CRYPTO_£t_ex_d©a
(
CRYPTO_EX_DATA
 *
ad
, 
idx
, *
v®
);

426 *
CRYPTO_g‘_ex_d©a
(cÚ¡ 
CRYPTO_EX_DATA
 *
ad
, 
idx
);

431 
CRYPTO_ş—nup_®l_ex_d©a
();

433 
CRYPTO_g‘_Ãw_lockid
(*
Çme
);

435 
CRYPTO_num_locks
();

436 
CRYPTO_lock
(
mode
, 
ty³
, cÚ¡ *
fe
, 
lše
);

437 
CRYPTO_£t_lockšg_ÿÎback
((*
func
è(
mode
, 
ty³
,

438 cÚ¡ *
fe
, 
lše
));

439 (*
CRYPTO_g‘_lockšg_ÿÎback
()è(
mode
, 
ty³
,

440 cÚ¡ *
fe
, 
lše
);

441 
CRYPTO_£t_add_lock_ÿÎback
((*
func
)

442 (*
num
, 
mouÁ
, 
ty³
,

443 cÚ¡ *
fe
, 
lše
));

444 (*
CRYPTO_g‘_add_lock_ÿÎback
()è(*
num
, 
mouÁ
, 
ty³
,

445 cÚ¡ *
fe
, 
lše
);

448 
	süy±o_th»adid_¡
 {

449 *
±r
;

450 
v®
;

451 } 
	tCRYPTO_THREADID
;

453 
CRYPTO_THREADID_£t_num”ic
(
CRYPTO_THREADID
 *
id
, 
v®
);

454 
CRYPTO_THREADID_£t_poš‹r
(
CRYPTO_THREADID
 *
id
, *
±r
);

455 
CRYPTO_THREADID_£t_ÿÎback
((*
th»adid_func
è(
CRYPTO_THREADID
 *));

456 (*
CRYPTO_THREADID_g‘_ÿÎback
()è(
CRYPTO_THREADID
 *);

457 
CRYPTO_THREADID_cu¼’t
(
CRYPTO_THREADID
 *
id
);

458 
CRYPTO_THREADID_cmp
(cÚ¡ 
CRYPTO_THREADID
 *
a
, cÚ¡ CRYPTO_THREADID *
b
);

459 
CRYPTO_THREADID_ıy
(
CRYPTO_THREADID
 *
de¡
, cÚ¡ CRYPTO_THREADID *
¤c
);

460 
CRYPTO_THREADID_hash
(cÚ¡ 
CRYPTO_THREADID
 *
id
);

461 #iâdeà
OPENSSL_NO_DEPRECATED


462 
CRYPTO_£t_id_ÿÎback
((*
func
) ());

463 (*
CRYPTO_g‘_id_ÿÎback
()) ();

464 
CRYPTO_th»ad_id
();

467 cÚ¡ *
CRYPTO_g‘_lock_Çme
(
ty³
);

468 
CRYPTO_add_lock
(*
poš‹r
, 
amouÁ
, 
ty³
, cÚ¡ *
fe
,

469 
lše
);

471 
CRYPTO_g‘_Ãw_dyÆockid
();

472 
CRYPTO_de¡roy_dyÆockid
(
i
);

473 
CRYPTO_dyÆock_v®ue
 *
CRYPTO_g‘_dyÆock_v®ue
(
i
);

474 
CRYPTO_£t_dyÆock_ü—‹_ÿÎback
(
CRYPTO_dyÆock_v®ue


475 *(*
dyn_ü—‹_funùiÚ
) (const 

476 *
fe
,

477 
lše
));

478 
CRYPTO_£t_dyÆock_lock_ÿÎback
((*
dyn_lock_funùiÚ
)

479 (
mode
,

480 
CRYPTO_dyÆock_v®ue
 *
l
,

481 cÚ¡ *
fe
, 
lše
));

482 
CRYPTO_£t_dyÆock_de¡roy_ÿÎback
((*
dyn_de¡roy_funùiÚ
)

483 (
CRYPTO_dyÆock_v®ue
 *
l
,

484 cÚ¡ *
fe
, 
lše
));

485 
CRYPTO_dyÆock_v®ue


486 *(*
CRYPTO_g‘_dyÆock_ü—‹_ÿÎback
()è(cÚ¡ *
fe
, 
lše
);

487 (*
CRYPTO_g‘_dyÆock_lock_ÿÎback
()è(
mode
,

488 
CRYPTO_dyÆock_v®ue


489 *
l
, cÚ¡ *
fe
,

490 
lše
);

491 (*
CRYPTO_g‘_dyÆock_de¡roy_ÿÎback
()è(
CRYPTO_dyÆock_v®ue


492 *
l
, cÚ¡ *
fe
,

493 
lše
);

499 
CRYPTO_£t_mem_funùiÚs
(*(*
m
è(
size_t
), *(*
r
) (*, size_t),

500 (*
f
) (*));

501 
CRYPTO_£t_locked_mem_funùiÚs
(*(*
m
è(
size_t
),

502 (*
ä“_func
) (*));

503 
CRYPTO_£t_mem_ex_funùiÚs
(*(*
m
è(
size_t
, const *, ),

504 *(*
r
è(*, 
size_t
, const *,

505 ), (*
f
) (*));

506 
CRYPTO_£t_locked_mem_ex_funùiÚs
(*(*
m
è(
size_t
, const *, ),

507 (*
ä“_func
) (*));

508 
CRYPTO_£t_mem_debug_funùiÚs
((*
m
)

510 (*
r
) (*, *, ,

512 (*
f
è(*, ), (*
so
) (),

513 (*
go
) ());

514 
CRYPTO_g‘_mem_funùiÚs
(*(**
m
è(
size_t
),

515 *(**
r
è(*, 
size_t
),

516 (**
f
) (*));

517 
CRYPTO_g‘_locked_mem_funùiÚs
(*(**
m
è(
size_t
),

518 (**
f
) (*));

519 
CRYPTO_g‘_mem_ex_funùiÚs
(*(**
m
è(
size_t
, const *, ),

520 *(**
r
è(*, 
size_t
, const *,

521 ), (**
f
) (*));

522 
CRYPTO_g‘_locked_mem_ex_funùiÚs
(

523 *(**
m
è(
size_t
, const *, ),

524 (**
f
) (*));

525 
CRYPTO_g‘_mem_debug_funùiÚs
((**
m
)

527 (**
r
) (*, *, ,

529 (**
f
) (*, ),

530 (**
so
è(), (**
go
) ());

532 *
CRYPTO_m®loc_locked
(
num
, cÚ¡ *
fe
, 
lše
);

533 
CRYPTO_ä“_locked
(*
±r
);

534 *
CRYPTO_m®loc
(
num
, cÚ¡ *
fe
, 
lše
);

535 *
CRYPTO_¡rdup
(cÚ¡ *
¡r
, cÚ¡ *
fe
, 
lše
);

536 
CRYPTO_ä“
(*
±r
);

537 *
CRYPTO_»®loc
(*
addr
, 
num
, cÚ¡ *
fe
, 
lše
);

538 *
CRYPTO_»®loc_ş—n
(*
addr
, 
Şd_num
, 
num
, cÚ¡ *
fe
,

539 
lše
);

540 *
CRYPTO_»m®loc
(*
addr
, 
num
, cÚ¡ *
fe
, 
lše
);

542 
OPENSSL_ş—n£
(*
±r
, 
size_t
 
Ën
);

544 
CRYPTO_£t_mem_debug_İtiÚs
(
b™s
);

545 
CRYPTO_g‘_mem_debug_İtiÚs
();

547 
	#CRYPTO_push_šfo
(
šfo
) \

548 
	`CRYPTO_push_šfo_
(
šfo
, 
__FILE__
, 
__LINE__
);

	)

549 
CRYPTO_push_šfo_
(cÚ¡ *
šfo
, cÚ¡ *
fe
, 
lše
);

550 
CRYPTO_pİ_šfo
();

551 
CRYPTO_»move_®l_šfo
();

563 
CRYPTO_dbg_m®loc
(*
addr
, 
num
, cÚ¡ *
fe
, 
lše
,

564 
befÜe_p
);

565 
CRYPTO_dbg_»®loc
(*
addr1
, *
addr2
, 
num
, cÚ¡ *
fe
,

566 
lše
, 
befÜe_p
);

567 
CRYPTO_dbg_ä“
(*
addr
, 
befÜe_p
);

577 
CRYPTO_dbg_£t_İtiÚs
(
b™s
);

578 
CRYPTO_dbg_g‘_İtiÚs
();

580 #iâdeà
OPENSSL_NO_FP_API


581 
CRYPTO_mem_Ëaks_å
(
FILE
 *);

583 
CRYPTO_mem_Ëaks
(
bio_¡
 *
bio
);

585 *
	tCRYPTO_MEM_LEAK_CB
 (, const *, , ,

587 
CRYPTO_mem_Ëaks_cb
(
CRYPTO_MEM_LEAK_CB
 *
cb
);

590 
O³nSSLD›
(cÚ¡ *
fe
, 
lše
, cÚ¡ *
as£¹iÚ
);

591 
	#OPENSSL_as£¹
(
e
è()(Óè? 0 : (
	`O³nSSLD›
(
__FILE__
, 
__LINE__
, #e),1))

	)

593 *
OPENSSL_Ÿ32ÿp_loc
();

594 
	#OPENSSL_Ÿ32ÿp
 (*(
	`OPENSSL_Ÿ32ÿp_loc
()))

	)

595 
OPENSSL_is£rviû
();

597 
FIPS_mode
();

598 
FIPS_mode_£t
(
r
);

600 
OPENSSL_š™
();

602 
	#fs_md_š™
(
®g
è
	`fs_md_š™_ùx
×lg,‡lg)

	)

604 #ifdeà
OPENSSL_FIPS


605 
	#fs_md_š™_ùx
(
®g
, 
cx
) \

606 
®g
##
	`_In™
(
cx
##
_CTX
 *
c
) \

608 ià(
	`FIPS_mode
()è
	`O³nSSLD›
(
__FILE__
, 
__LINE__
, \

610  
´iv©e_
##
®g
##
	`_In™
(
c
); \

612 
´iv©e_
##
®g
##
	`_In™
(
cx
##
_CTX
 *
c
)

	)

614 
	#fs_ch”_abÜt
(
®g
) \

615 ià(
	`FIPS_mode
()è
	`O³nSSLD›
(
__FILE__
, 
__LINE__
, \

616 "Low†ev– API c®ÈtØch” " #®g " fÜbidd’ iÀFIPS mode!")

	)

619 
	#fs_md_š™_ùx
(
®g
, 
cx
) \

620 
®g
##
	`_In™
(
cx
##
_CTX
 *
c
)

	)

621 
	#fs_ch”_abÜt
(
®g
è0)

	)

631 
CRYPTO_memcmp
(cÚ¡ vŞ©*
a
, cÚ¡ vŞ©*
b
, 
size_t
 
Ën
);

638 
ERR_lßd_CRYPTO_¡ršgs
();

643 
	#CRYPTO_F_CRYPTO_GET_EX_NEW_INDEX
 100

	)

644 
	#CRYPTO_F_CRYPTO_GET_NEW_DYNLOCKID
 103

	)

645 
	#CRYPTO_F_CRYPTO_GET_NEW_LOCKID
 101

	)

646 
	#CRYPTO_F_CRYPTO_SET_EX_DATA
 102

	)

647 
	#CRYPTO_F_DEF_ADD_INDEX
 104

	)

648 
	#CRYPTO_F_DEF_GET_CLASS
 105

	)

649 
	#CRYPTO_F_FIPS_MODE_SET
 109

	)

650 
	#CRYPTO_F_INT_DUP_EX_DATA
 106

	)

651 
	#CRYPTO_F_INT_FREE_EX_DATA
 107

	)

652 
	#CRYPTO_F_INT_NEW_EX_DATA
 108

	)

655 
	#CRYPTO_R_FIPS_MODE_NOT_SUPPORTED
 101

	)

656 
	#CRYPTO_R_NO_DYNLOCK_CREATE_CALLBACK
 100

	)

658 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/dtls1.h

60 #iâdeà
HEADER_DTLS1_H


61 
	#HEADER_DTLS1_H


	)

63 
	~<İ’s¦/bufãr.h
>

64 
	~<İ’s¦/pqueue.h
>

65 #ifdeà
OPENSSL_SYS_VMS


66 
	~<»sourû.h
>

67 
	~<sys/timeb.h
>

69 #ifdeà
OPENSSL_SYS_WIN32


71 
	~<wšsock.h
>

72 #–ià
defšed
(
OPENSSL_SYS_NETWARE
è&& !defšed(
_WINSOCK2API_
)

73 
	~<sys/timev®.h
>

75 #ià
defšed
(
OPENSSL_SYS_VXWORKS
)

76 
	~<sys/times.h
>

78 
	~<sys/time.h
>

82 #ifdeà 
__ılu¥lus


86 
	#DTLS1_VERSION
 0xFEFF

	)

87 
	#DTLS1_2_VERSION
 0xFEFD

	)

88 
	#DTLS_MAX_VERSION
 
DTLS1_2_VERSION


	)

89 
	#DTLS1_VERSION_MAJOR
 0xFE

	)

91 
	#DTLS1_BAD_VER
 0x0100

	)

94 
	#DTLS_ANY_VERSION
 0x1FFFF

	)

98 
	#DTLS1_AD_MISSING_HANDSHAKE_MESSAGE
 110

	)

102 
	#DTLS1_COOKIE_LENGTH
 256

	)

104 
	#DTLS1_RT_HEADER_LENGTH
 13

	)

106 
	#DTLS1_HM_HEADER_LENGTH
 12

	)

108 
	#DTLS1_HM_BAD_FRAGMENT
 -2

	)

109 
	#DTLS1_HM_FRAGMENT_RETRY
 -3

	)

111 
	#DTLS1_CCS_HEADER_LENGTH
 1

	)

113 #ifdeà
DTLS1_AD_MISSING_HANDSHAKE_MESSAGE


114 
	#DTLS1_AL_HEADER_LENGTH
 7

	)

116 
	#DTLS1_AL_HEADER_LENGTH
 2

	)

119 #iâdeà
OPENSSL_NO_SSL_INTERN


121 #iâdeà
OPENSSL_NO_SCTP


122 
	#DTLS1_SCTP_AUTH_LABEL
 "EXPORTER_DTLS_OVER_SCTP"

	)

126 
	#DTLS1_MAX_MTU_OVERHEAD
 48

	)

128 
	sds1_b™m­_¡
 {

129 
m­
;

131 
max_£q_num
[8];

133 } 
	tDTLS1_BITMAP
;

135 
	sds1_»Œªsm™_¡©e
 {

136 
EVP_CIPHER_CTX
 *
’c_wr™e_ùx
;

137 
EVP_MD_CTX
 *
wr™e_hash
;

138 #iâdeà
OPENSSL_NO_COMP


139 
COMP_CTX
 *
com´ess
;

141 *
com´ess
;

143 
SSL_SESSION
 *
£ssiÚ
;

144 
•och
;

147 
	shm_h—d”_¡
 {

148 
ty³
;

149 
msg_Ën
;

150 
£q
;

151 
äag_off
;

152 
äag_Ën
;

153 
is_ccs
;

154 
ds1_»Œªsm™_¡©e
 
§ved_»Œªsm™_¡©e
;

157 
	sccs_h—d”_¡
 {

158 
ty³
;

159 
£q
;

162 
	sds1_timeout_¡
 {

164 
»ad_timeouts
;

166 
wr™e_timeouts
;

168 
num_®”ts
;

171 
	s»cÜd_pqueue_¡
 {

172 
•och
;

173 
pqueue
 
q
;

174 } 
	t»cÜd_pqueue
;

176 
	shm_äagm’t_¡
 {

177 
hm_h—d”_¡
 
msg_h—d”
;

178 *
äagm’t
;

179 *
»as£mbly
;

180 } 
	thm_äagm’t
;

182 
	sds1_¡©e_¡
 {

183 
£nd_cook›
;

184 
cook›
[
DTLS1_COOKIE_LENGTH
];

185 
rcvd_cook›
[
DTLS1_COOKIE_LENGTH
];

186 
cook›_Ën
;

192 
r_•och
;

193 
w_•och
;

195 
DTLS1_BITMAP
 
b™m­
;

197 
DTLS1_BITMAP
 
Ãxt_b™m­
;

199 
hªdshake_wr™e_£q
;

200 
Ãxt_hªdshake_wr™e_£q
;

201 
hªdshake_»ad_£q
;

203 
Ï¡_wr™e_£qu’û
[8];

205 
»cÜd_pqueue
 
uÅroûs£d_rcds
;

206 
»cÜd_pqueue
 
´oûs£d_rcds
;

208 
pqueue
 
bufã»d_mes§ges
;

210 
pqueue
 
£Á_mes§ges
;

216 
»cÜd_pqueue
 
bufã»d_­p_d©a
;

218 
li¡’
;

219 
lšk_mtu
;

220 
mtu
;

221 
hm_h—d”_¡
 
w_msg_hdr
;

222 
hm_h—d”_¡
 
r_msg_hdr
;

223 
ds1_timeout_¡
 
timeout
;

227 
timev®
 
Ãxt_timeout
;

229 
timeout_du¿tiÚ
;

234 
®”t_äagm’t
[
DTLS1_AL_HEADER_LENGTH
];

235 
®”t_äagm’t_Ën
;

236 
hªdshake_äagm’t
[
DTLS1_HM_HEADER_LENGTH
];

237 
hªdshake_äagm’t_Ën
;

238 
»Œªsm™tšg
;

243 
chªge_ch”_¥ec_ok
;

244 #iâdeà
OPENSSL_NO_SCTP


246 
Ãxt_¡©e
;

247 
shutdown_»ûived
;

249 } 
	tDTLS1_STATE
;

251 
	sds1_»cÜd_d©a_¡
 {

252 *
·ck‘
;

253 
·ck‘_Ëngth
;

254 
SSL3_BUFFER
 
rbuf
;

255 
SSL3_RECORD
 
¼ec
;

256 #iâdeà
OPENSSL_NO_SCTP


257 
bio_dg¿m_sùp_rcvšfo
 
»cÜdšfo
;

259 } 
	tDTLS1_RECORD_DATA
;

264 
	#DTLS1_TMO_READ_COUNT
 2

	)

265 
	#DTLS1_TMO_WRITE_COUNT
 2

	)

267 
	#DTLS1_TMO_ALERT_COUNT
 12

	)

269 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/e_os2.h

56 
	~<İ’s¦/İ’s¦cÚf.h
>

58 #iâdeà
HEADER_E_OS2_H


59 
	#HEADER_E_OS2_H


	)

61 #ifdeà 
__ılu¥lus


71 
	#OPENSSL_SYS_UNIX


	)

74 #ià
defšed
(
__MWERKS__
è&& defšed(
macštosh
è|| defšed(
OPENSSL_SYSNAME_MAC
)

75 #undeà
OPENSSL_SYS_UNIX


76 
	#OPENSSL_SYS_MACINTOSH_CLASSIC


	)

80 #ià
defšed
(
NETWARE
è|| defšed(
OPENSSL_SYSNAME_NETWARE
)

81 #undeà
OPENSSL_SYS_UNIX


82 
	#OPENSSL_SYS_NETWARE


	)

91 #ià
defšed
(
OPENSSL_SYSNAME_MSDOS
)

92 #undeà
OPENSSL_SYS_UNIX


93 
	#OPENSSL_SYS_MSDOS


	)

100 #ià
defšed
(
OPENSSL_SYSNAME_UWIN
)

101 #undeà
OPENSSL_SYS_UNIX


102 
	#OPENSSL_SYS_WIN32_UWIN


	)

104 #ià
defšed
(
__CYGWIN__
è|| defšed(
OPENSSL_SYSNAME_CYGWIN
)

105 #undeà
OPENSSL_SYS_UNIX


106 
	#OPENSSL_SYS_WIN32_CYGWIN


	)

108 #ià
defšed
(
_WIN32
è|| defšed(
OPENSSL_SYSNAME_WIN32
)

109 #undeà
OPENSSL_SYS_UNIX


110 
	#OPENSSL_SYS_WIN32


	)

112 #ià
defšed
(
_WIN64
è|| defšed(
OPENSSL_SYSNAME_WIN64
)

113 #undeà
OPENSSL_SYS_UNIX


114 #ià!
defšed
(
OPENSSL_SYS_WIN64
)

115 
	#OPENSSL_SYS_WIN64


	)

118 #ià
defšed
(
OPENSSL_SYSNAME_WINNT
)

119 #undeà
OPENSSL_SYS_UNIX


120 
	#OPENSSL_SYS_WINNT


	)

122 #ià
defšed
(
OPENSSL_SYSNAME_WINCE
)

123 #undeà
OPENSSL_SYS_UNIX


124 
	#OPENSSL_SYS_WINCE


	)

130 #ià
defšed
(
OPENSSL_SYS_WIN32
è|| defšed(
OPENSSL_SYS_WIN64
è|| defšed(
OPENSSL_SYS_WINNT
è|| defšed(
OPENSSL_SYS_WINCE
)

131 #undeà
OPENSSL_SYS_UNIX


132 
	#OPENSSL_SYS_WINDOWS


	)

133 #iâdeà
OPENSSL_SYS_MSDOS


134 
	#OPENSSL_SYS_MSDOS


	)

143 #ifdeà
OPENSSL_SYS_WINDOWS


144 #iâdeà
OPENSSL_OPT_WINDLL


145 #ià
defšed
(
_WINDLL
)

147 
	#OPENSSL_OPT_WINDLL


	)

153 #ià
defšed
(
__VMS
è|| defšed(
VMS
è|| defšed(
OPENSSL_SYSNAME_VMS
)

154 #undeà
OPENSSL_SYS_UNIX


155 
	#OPENSSL_SYS_VMS


	)

156 #ià
defšed
(
__DECC
)

157 
	#OPENSSL_SYS_VMS_DECC


	)

158 #–ià
defšed
(
__DECCXX
)

159 
	#OPENSSL_SYS_VMS_DECC


	)

160 
	#OPENSSL_SYS_VMS_DECCXX


	)

162 
	#OPENSSL_SYS_VMS_NODECC


	)

167 #ià
defšed
(
__EMX__
è|| defšed(
__OS2__
)

168 #undeà
OPENSSL_SYS_UNIX


169 
	#OPENSSL_SYS_OS2


	)

173 #ifdeà
OPENSSL_SYS_UNIX


174 #ià
defšed
(
lšux
è|| defšed(
__lšux__
è|| defšed(
OPENSSL_SYSNAME_LINUX
)

175 
	#OPENSSL_SYS_LINUX


	)

177 #ifdeà
OPENSSL_SYSNAME_MPE


178 
	#OPENSSL_SYS_MPE


	)

180 #ifdeà
OPENSSL_SYSNAME_SNI


181 
	#OPENSSL_SYS_SNI


	)

183 #ifdeà
OPENSSL_SYSNAME_ULTRASPARC


184 
	#OPENSSL_SYS_ULTRASPARC


	)

186 #ifdeà
OPENSSL_SYSNAME_NEWS4


187 
	#OPENSSL_SYS_NEWS4


	)

189 #ifdeà
OPENSSL_SYSNAME_MACOSX


190 
	#OPENSSL_SYS_MACOSX


	)

192 #ifdeà
OPENSSL_SYSNAME_MACOSX_RHAPSODY


193 
	#OPENSSL_SYS_MACOSX_RHAPSODY


	)

194 
	#OPENSSL_SYS_MACOSX


	)

196 #ifdeà
OPENSSL_SYSNAME_SUNOS


197 
	#OPENSSL_SYS_SUNOS


	)

199 #ià
defšed
(
_CRAY
è|| defšed(
OPENSSL_SYSNAME_CRAY
)

200 
	#OPENSSL_SYS_CRAY


	)

202 #ià
defšed
(
_AIX
è|| defšed(
OPENSSL_SYSNAME_AIX
)

203 
	#OPENSSL_SYS_AIX


	)

208 #ià
defšed
(
__VOS__
è|| defšed(
OPENSSL_SYSNAME_VOS
)

209 
	#OPENSSL_SYS_VOS


	)

210 #ifdeà
__HPPA__


211 
	#OPENSSL_SYS_VOS_HPPA


	)

213 #ifdeà
__IA32__


214 
	#OPENSSL_SYS_VOS_IA32


	)

219 #ifdeà
OPENSSL_SYSNAME_VXWORKS


220 
	#OPENSSL_SYS_VXWORKS


	)

224 #ià
defšed
(
__BEOS__
)

225 
	#OPENSSL_SYS_BEOS


	)

226 
	~<sys/sock‘.h
>

227 #ià
defšed
(
BONE_VERSION
)

228 
	#OPENSSL_SYS_BEOS_BONE


	)

230 
	#OPENSSL_SYS_BEOS_R5


	)

239 #ifdeà
OPENSSL_SYS_MSDOS


240 
	#OPENSSL_UNISTD_IO
 <
io
.
h
>

	)

241 
	#OPENSSL_DECLARE_EXIT
 
	`ex™
();

	)

243 
	#OPENSSL_UNISTD_IO
 
OPENSSL_UNISTD


	)

244 
	#OPENSSL_DECLARE_EXIT


	)

267 #ià
defšed
(
OPENSSL_SYS_VMS_NODECC
)

268 
	#OPENSSL_EXPORT
 
glob®»f


	)

269 
	#OPENSSL_IMPORT
 
glob®»f


	)

270 
	#OPENSSL_GLOBAL
 
glob®def


	)

271 #–ià
defšed
(
OPENSSL_SYS_WINDOWS
è&& defšed(
OPENSSL_OPT_WINDLL
)

272 
	#OPENSSL_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

273 
	#OPENSSL_IMPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

274 
	#OPENSSL_GLOBAL


	)

276 
	#OPENSSL_EXPORT
 

	)

277 
	#OPENSSL_IMPORT
 

	)

278 
	#OPENSSL_GLOBAL


	)

280 
	#OPENSSL_EXTERN
 
OPENSSL_IMPORT


	)

293 #ifdeà
OPENSSL_EXPORT_VAR_AS_FUNCTION


294 
	#OPENSSL_IMPLEMENT_GLOBAL
(
ty³
,
Çme
,
v®ue
) \

295 
ty³
 *
_shadow_
##
	`Çme
() \

296 { 
ty³
 
_hide_
##
Çme
=
v®ue
;  &_hide_##Çme; }

	)

297 
	#OPENSSL_DECLARE_GLOBAL
(
ty³
,
Çme
èty³ *
_shadow_
##
	`Çme
()

	)

298 
	#OPENSSL_GLOBAL_REF
(
Çme
è(*(
_shadow_
##
	`Çme
()))

	)

300 
	#OPENSSL_IMPLEMENT_GLOBAL
(
ty³
,
Çme
,
v®ue
è
OPENSSL_GLOBAL
y³ 
_shadow_
##Çme=v®ue;

	)

301 
	#OPENSSL_DECLARE_GLOBAL
(
ty³
,
Çme
è
OPENSSL_EXPORT
y³ 
_shadow_
##
	)
name

302 
	#OPENSSL_GLOBAL_REF
(
Çme
è
_shadow_
##
	)
name

305 #ià
defšed
(
OPENSSL_SYS_MACINTOSH_CLASSIC
è&& 
macštosh
==1 && !defšed(
MAC_OS_GUSI_SOURCE
)

306 
	#os¦_ssize_t
 

	)

309 #ifdeà
OPENSSL_SYS_MSDOS


310 
	#os¦_ssize_t
 

	)

313 #ià
defšed
(
NeXT
è|| defšed(
OPENSSL_SYS_NEWS4
è|| defšed(
OPENSSL_SYS_SUNOS
)

314 
	#ssize_t
 

	)

317 #ià
defšed
(
__uÉrix
è&& !defšed(
ssize_t
)

318 
	#os¦_ssize_t
 

	)

321 #iâdeà
os¦_ssize_t


322 
	#os¦_ssize_t
 
ssize_t


	)

325 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/hmac.h

58 #iâdeà
HEADER_HMAC_H


59 
	#HEADER_HMAC_H


	)

61 
	~<İ’s¦/İ’s¦cÚf.h
>

63 #ifdeà
OPENSSL_NO_HMAC


64 #”rÜ 
HMAC
 
is
 
di§bËd
.

67 
	~<İ’s¦/evp.h
>

69 
	#HMAC_MAX_MD_CBLOCK
 128

	)

71 #ifdeà 
__ılu¥lus


75 
	shmac_ùx_¡
 {

76 cÚ¡ 
EVP_MD
 *
md
;

77 
EVP_MD_CTX
 
md_ùx
;

78 
EVP_MD_CTX
 
i_ùx
;

79 
EVP_MD_CTX
 
o_ùx
;

80 
key_Ëngth
;

81 
key
[
HMAC_MAX_MD_CBLOCK
];

82 } 
	tHMAC_CTX
;

84 
	#HMAC_size
(
e
è(
	`EVP_MD_size
(Ó)->
md
))

	)

86 
HMAC_CTX_š™
(
HMAC_CTX
 *
ùx
);

87 
HMAC_CTX_ş—nup
(
HMAC_CTX
 *
ùx
);

90 
	#HMAC_ş—nup
(
ùx
è
	`HMAC_CTX_ş—nup
(ùx)

	)

93 
HMAC_In™
(
HMAC_CTX
 *
ùx
, cÚ¡ *
key
, 
Ën
, cÚ¡ 
EVP_MD
 *
md
);

94 
HMAC_In™_ex
(
HMAC_CTX
 *
ùx
, cÚ¡ *
key
, 
Ën
,

95 cÚ¡ 
EVP_MD
 *
md
, 
ENGINE
 *
im¶
);

96 
HMAC_Upd©e
(
HMAC_CTX
 *
ùx
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

97 
HMAC_Fš®
(
HMAC_CTX
 *
ùx
, *
md
, *
Ën
);

98 *
HMAC
(cÚ¡ 
EVP_MD
 *
evp_md
, cÚ¡ *
key
, 
key_Ën
,

99 cÚ¡ *
d
, 
size_t
 
n
, *
md
,

100 *
md_Ën
);

101 
HMAC_CTX_cİy
(
HMAC_CTX
 *
dùx
, HMAC_CTX *
sùx
);

103 
HMAC_CTX_£t_æags
(
HMAC_CTX
 *
ùx
, 
æags
);

105 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/kssl.h

64 #iâdeà
KSSL_H


65 
	#KSSL_H


	)

67 
	~<İ’s¦/İ’s¦cÚf.h
>

69 #iâdeà
OPENSSL_NO_KRB5


71 
	~<¡dio.h
>

72 
	~<ùy³.h
>

73 
	~<krb5.h
>

74 #ifdeà
OPENSSL_SYS_WIN32


79 #undeà
X509_NAME


80 #undeà
X509_EXTENSIONS


81 #undeà
OCSP_REQUEST


82 #undeà
OCSP_RESPONSE


85 #ifdeà 
__ılu¥lus


93 #ifdeà
KRB5_HEIMDAL


94 
	tkrb5_où‘
;

95 
	#FAR


	)

98 #iâdeà
FAR


99 
	#FAR


	)

111 #iâdeà
KRB5SVC


112 
	#KRB5SVC
 "ho¡"

	)

115 #iâdeà
KRB5KEYTAB


116 
	#KRB5KEYTAB
 "/‘c/krb5.keyb"

	)

119 #iâdeà
KRB5SENDAUTH


120 
	#KRB5SENDAUTH
 1

	)

123 #iâdeà
KRB5CHECKAUTH


124 
	#KRB5CHECKAUTH
 1

	)

127 #iâdeà
KSSL_CLOCKSKEW


128 
	#KSSL_CLOCKSKEW
 300;

	)

131 
	#KSSL_ERR_MAX
 255

	)

132 
	sks¦_”r_¡
 {

133 
	g»asÚ
;

134 
	g‹xt
[
KSSL_ERR_MAX
 + 1];

135 } 
	tKSSL_ERR
;

141 
	sks¦_ùx_¡
 {

143 *
	g£rviû_Çme
;

144 *
	g£rviû_ho¡
;

145 *
	gş›Á_´šc
;

146 *
	gkeyb_fe
;

147 *
	güed_ÿche
;

148 
krb5_’ùy³
 
	g’ùy³
;

149 
	gËngth
;

150 
krb5_où‘
 
FAR
 *
	gkey
;

151 } 
	tKSSL_CTX
;

153 
	#KSSL_CLIENT
 1

	)

154 
	#KSSL_SERVER
 2

	)

155 
	#KSSL_SERVICE
 3

	)

156 
	#KSSL_KEYTAB
 4

	)

158 
	#KSSL_CTX_OK
 0

	)

159 
	#KSSL_CTX_ERR
 1

	)

160 
	#KSSL_NOMEM
 2

	)

163 
krb5_”rÜ_code
 
ks¦_ùx_£t¡ršg
(
KSSL_CTX
 *
ks¦_ùx
, 
which
, *
‹xt
);

164 
KSSL_CTX
 *
ks¦_ùx_Ãw
();

165 
KSSL_CTX
 *
ks¦_ùx_ä“
(KSSL_CTX *
ks¦_ùx
);

166 
ks¦_ùx_show
(
KSSL_CTX
 *
ks¦_ùx
);

167 
krb5_”rÜ_code
 
ks¦_ùx_£ršc
(
KSSL_CTX
 *
ks¦_ùx
, 
which
,

168 
krb5_d©a
 *
»®m
, krb5_d©¨*
’t™y
,

169 
ÃÁ™›s
);

170 
krb5_”rÜ_code
 
ks¦_cg‘_tkt
(
KSSL_CTX
 *
ks¦_ùx
, 
krb5_d©a
 **
’c_tk
,

171 
krb5_d©a
 *
auth’p
, 
KSSL_ERR
 *
ks¦_”r
);

172 
krb5_”rÜ_code
 
ks¦_sg‘_tkt
(
KSSL_CTX
 *
ks¦_ùx
, 
krb5_d©a
 *
šd©a
,

173 
krb5_tick‘_times
 *
‰imes
, 
KSSL_ERR
 *
ks¦_”r
);

174 
krb5_”rÜ_code
 
ks¦_ùx_£tkey
(
KSSL_CTX
 *
ks¦_ùx
, 
krb5_keyblock
 *
£ssiÚ
);

175 
ks¦_”r_£t
(
KSSL_ERR
 *
ks¦_”r
, 
»asÚ
, *
‹xt
);

176 
ks¦_krb5_ä“_d©a_cÚ‹Ás
(
krb5_cÚ‹xt
 
cÚ‹xt
, 
krb5_d©a
 *
d©a
);

177 
krb5_”rÜ_code
 
ks¦_bud_´šc®_2
(
krb5_cÚ‹xt
 
cÚ‹xt
,

178 
krb5_´šc®
 *
´šc
, 
¾’
,

179 cÚ¡ *
»®m
, 
¦’
,

180 cÚ¡ *
svc
, 
hËn
,

181 cÚ¡ *
ho¡
);

182 
krb5_”rÜ_code
 
ks¦_v®id©e_times
(
krb5_time¡amp
 
©ime
,

183 
krb5_tick‘_times
 *
‰imes
);

184 
krb5_”rÜ_code
 
ks¦_check_auth’t
(
KSSL_CTX
 *
ks¦_ùx
, 
krb5_d©a
 *
auth’
,

185 
krb5_time¡amp
 *
©im•
,

186 
KSSL_ERR
 *
ks¦_”r
);

187 *
ks¦_sk_cÚfound
(
krb5_’ùy³
 
’ùy³
, *
authn
);

189 
SSL_£t0_ks¦_ùx
(
SSL
 *
s
, 
KSSL_CTX
 *
kùx
);

190 
KSSL_CTX
 *
SSL_g‘0_ks¦_ùx
(
SSL
 *
s
);

191 *
ks¦_ùx_g‘0_ş›Á_´šc
(
KSSL_CTX
 *
kùx
);

193 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/lhash.h

63 #iâdeà
HEADER_LHASH_H


64 
	#HEADER_LHASH_H


	)

66 
	~<İ’s¦/e_os2.h
>

67 #iâdeà
OPENSSL_NO_FP_API


68 
	~<¡dio.h
>

71 #iâdeà
OPENSSL_NO_BIO


72 
	~<İ’s¦/bio.h
>

75 #ifdeà 
__ılu¥lus


79 
	slhash_node_¡
 {

80 *
d©a
;

81 
lhash_node_¡
 *
Ãxt
;

82 #iâdeà
OPENSSL_NO_HASH_COMP


83 
hash
;

85 } 
	tLHASH_NODE
;

87 (*
LHASH_COMP_FN_TYPE
) (const *, const *);

88 (*
	tLHASH_HASH_FN_TYPE
) (const *);

89 (*
LHASH_DOALL_FN_TYPE
) (*);

90 (*
LHASH_DOALL_ARG_FN_TYPE
) (*, *);

102 
	#DECLARE_LHASH_HASH_FN
(
Çme
, 
o_ty³
) \

103 
Çme
##
	`_LHASH_HASH
(cÚ¡ *);

	)

104 
	#IMPLEMENT_LHASH_HASH_FN
(
Çme
, 
o_ty³
) \

105 
Çme
##
	`_LHASH_HASH
(cÚ¡ *
¬g
) { \

106 cÚ¡ 
o_ty³
 *
a
 = 
¬g
; \

107  
Çme
##
	`_hash
(
a
); }

	)

108 
	#LHASH_HASH_FN
(
Çme
èÇme##
_LHASH_HASH


	)

111 
	#DECLARE_LHASH_COMP_FN
(
Çme
, 
o_ty³
) \

112 
Çme
##
	`_LHASH_COMP
(cÚ¡ *, cÚ¡ *);

	)

113 
	#IMPLEMENT_LHASH_COMP_FN
(
Çme
, 
o_ty³
) \

114 
Çme
##
	`_LHASH_COMP
(cÚ¡ *
¬g1
, cÚ¡ *
¬g2
) { \

115 cÚ¡ 
o_ty³
 *
a
 = 
¬g1
; \

116 cÚ¡ 
o_ty³
 *
b
 = 
¬g2
; \

117  
Çme
##
	`_cmp
(
a
,
b
); }

	)

118 
	#LHASH_COMP_FN
(
Çme
èÇme##
_LHASH_COMP


	)

121 
	#DECLARE_LHASH_DOALL_FN
(
Çme
, 
o_ty³
) \

122 
Çme
##
	`_LHASH_DOALL
(*);

	)

123 
	#IMPLEMENT_LHASH_DOALL_FN
(
Çme
, 
o_ty³
) \

124 
Çme
##
	`_LHASH_DOALL
(*
¬g
) { \

125 
o_ty³
 *
a
 = 
¬g
; \

126 
Çme
##
	`_dßÎ
(
a
); }

	)

127 
	#LHASH_DOALL_FN
(
Çme
èÇme##
_LHASH_DOALL


	)

130 
	#DECLARE_LHASH_DOALL_ARG_FN
(
Çme
, 
o_ty³
, 
a_ty³
) \

131 
Çme
##
	`_LHASH_DOALL_ARG
(*, *);

	)

132 
	#IMPLEMENT_LHASH_DOALL_ARG_FN
(
Çme
, 
o_ty³
, 
a_ty³
) \

133 
Çme
##
	`_LHASH_DOALL_ARG
(*
¬g1
, *
¬g2
) { \

134 
o_ty³
 *
a
 = 
¬g1
; \

135 
a_ty³
 *
b
 = 
¬g2
; \

136 
Çme
##
	`_dßÎ_¬g
(
a
, 
b
); }

	)

137 
	#LHASH_DOALL_ARG_FN
(
Çme
èÇme##
_LHASH_DOALL_ARG


	)

139 
	slhash_¡
 {

140 
LHASH_NODE
 **
b
;

141 
LHASH_COMP_FN_TYPE
 
comp
;

142 
LHASH_HASH_FN_TYPE
 
hash
;

143 
num_nodes
;

144 
num_®loc_nodes
;

145 
p
;

146 
pmax
;

147 
up_lßd
;

148 
down_lßd
;

149 
num_™ems
;

150 
num_ex·nds
;

151 
num_ex·nd_»®locs
;

152 
num_cÚŒaùs
;

153 
num_cÚŒaù_»®locs
;

154 
num_hash_ÿÎs
;

155 
num_comp_ÿÎs
;

156 
num_š£¹
;

157 
num_»¶aû
;

158 
num_d–‘e
;

159 
num_no_d–‘e
;

160 
num_»Œ›ve
;

161 
num_»Œ›ve_miss
;

162 
num_hash_comps
;

163 
”rÜ
;

164 } 
	t_LHASH
;

167 
	#LH_LOAD_MULT
 256

	)

173 
	#lh_”rÜ
(
lh
è(Öh)->
”rÜ
)

	)

175 
_LHASH
 *
lh_Ãw
(
LHASH_HASH_FN_TYPE
 
h
, 
LHASH_COMP_FN_TYPE
 
c
);

176 
lh_ä“
(
_LHASH
 *
lh
);

177 *
lh_š£¹
(
_LHASH
 *
lh
, *
d©a
);

178 *
lh_d–‘e
(
_LHASH
 *
lh
, cÚ¡ *
d©a
);

179 *
lh_»Œ›ve
(
_LHASH
 *
lh
, cÚ¡ *
d©a
);

180 
lh_dßÎ
(
_LHASH
 *
lh
, 
LHASH_DOALL_FN_TYPE
 
func
);

181 
lh_dßÎ_¬g
(
_LHASH
 *
lh
, 
LHASH_DOALL_ARG_FN_TYPE
 
func
, *
¬g
);

182 
lh_¡rhash
(cÚ¡ *
c
);

183 
lh_num_™ems
(cÚ¡ 
_LHASH
 *
lh
);

185 #iâdeà
OPENSSL_NO_FP_API


186 
lh_¡©s
(cÚ¡ 
_LHASH
 *
lh
, 
FILE
 *
out
);

187 
lh_node_¡©s
(cÚ¡ 
_LHASH
 *
lh
, 
FILE
 *
out
);

188 
lh_node_u§ge_¡©s
(cÚ¡ 
_LHASH
 *
lh
, 
FILE
 *
out
);

191 #iâdeà
OPENSSL_NO_BIO


192 
lh_¡©s_bio
(cÚ¡ 
_LHASH
 *
lh
, 
BIO
 *
out
);

193 
lh_node_¡©s_bio
(cÚ¡ 
_LHASH
 *
lh
, 
BIO
 *
out
);

194 
lh_node_u§ge_¡©s_bio
(cÚ¡ 
_LHASH
 *
lh
, 
BIO
 *
out
);

199 
	#LHASH_OF
(
ty³
è
lhash_¡_
##
	)
type

201 
	#DECLARE_LHASH_OF
(
ty³
è
	`LHASH_OF
Ñy³è{ 
dummy
; }

	)

203 
	#CHECKED_LHASH_OF
(
ty³
,
lh
) \

204 ((
_LHASH
 *)
	`CHECKED_PTR_OF
(
	`LHASH_OF
(
ty³
),
lh
))

	)

207 
	#LHM_lh_Ãw
(
ty³
, 
Çme
) \

208 ((
	`LHASH_OF
(
ty³
è*)
	`lh_Ãw
(
	`LHASH_HASH_FN
(
Çme
), 
	`LHASH_COMP_FN
Òame)))

	)

209 
	#LHM_lh_”rÜ
(
ty³
, 
lh
) \

210 
	`lh_”rÜ
(
	`CHECKED_LHASH_OF
(
ty³
,
lh
))

	)

211 
	#LHM_lh_š£¹
(
ty³
, 
lh
, 
š¡
) \

212 ((
ty³
 *)
	`lh_š£¹
(
	`CHECKED_LHASH_OF
Ñy³, 
lh
), \

213 
	`CHECKED_PTR_OF
(
ty³
, 
š¡
)))

	)

214 
	#LHM_lh_»Œ›ve
(
ty³
, 
lh
, 
š¡
) \

215 ((
ty³
 *)
	`lh_»Œ›ve
(
	`CHECKED_LHASH_OF
Ñy³, 
lh
), \

216 
	`CHECKED_PTR_OF
(
ty³
, 
š¡
)))

	)

217 
	#LHM_lh_d–‘e
(
ty³
, 
lh
, 
š¡
) \

218 ((
ty³
 *)
	`lh_d–‘e
(
	`CHECKED_LHASH_OF
Ñy³, 
lh
), \

219 
	`CHECKED_PTR_OF
(
ty³
, 
š¡
)))

	)

220 
	#LHM_lh_dßÎ
(
ty³
, 
lh
,
â
è
	`lh_dßÎ
(
	`CHECKED_LHASH_OF
Ñy³,†h), fn)

	)

221 
	#LHM_lh_dßÎ_¬g
(
ty³
, 
lh
, 
â
, 
¬g_ty³
, 
¬g
) \

222 
	`lh_dßÎ_¬g
(
	`CHECKED_LHASH_OF
(
ty³
, 
lh
), 
â
, 
	`CHECKED_PTR_OF
(
¬g_ty³
, 
¬g
))

	)

223 
	#LHM_lh_num_™ems
(
ty³
, 
lh
è
	`lh_num_™ems
(
	`CHECKED_LHASH_OF
Ñy³,†h))

	)

224 
	#LHM_lh_down_lßd
(
ty³
, 
lh
è(
	`CHECKED_LHASH_OF
Ñy³,†h)->
down_lßd
)

	)

225 
	#LHM_lh_node_¡©s_bio
(
ty³
, 
lh
, 
out
) \

226 
	`lh_node_¡©s_bio
(
	`CHECKED_LHASH_OF
(
ty³
, 
lh
), 
out
)

	)

227 
	#LHM_lh_node_u§ge_¡©s_bio
(
ty³
, 
lh
, 
out
) \

228 
	`lh_node_u§ge_¡©s_bio
(
	`CHECKED_LHASH_OF
(
ty³
, 
lh
), 
out
)

	)

229 
	#LHM_lh_¡©s_bio
(
ty³
, 
lh
, 
out
) \

230 
	`lh_¡©s_bio
(
	`CHECKED_LHASH_OF
(
ty³
, 
lh
), 
out
)

	)

231 
	#LHM_lh_ä“
(
ty³
, 
lh
è
	`lh_ä“
(
	`CHECKED_LHASH_OF
Ñy³,†h))

	)

233 
DECLARE_LHASH_OF
(
OPENSSL_STRING
);

234 
DECLARE_LHASH_OF
(
OPENSSL_CSTRING
);

236 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ossl_typ.h

55 #iâdeà
HEADER_OPENSSL_TYPES_H


56 
	#HEADER_OPENSSL_TYPES_H


	)

58 #ifdeà 
__ılu¥lus


62 
	~<İ’s¦/e_os2.h
>

64 #ifdeà
NO_ASN1_TYPEDEFS


65 
	#ASN1_INTEGER
 
ASN1_STRING


	)

66 
	#ASN1_ENUMERATED
 
ASN1_STRING


	)

67 
	#ASN1_BIT_STRING
 
ASN1_STRING


	)

68 
	#ASN1_OCTET_STRING
 
ASN1_STRING


	)

69 
	#ASN1_PRINTABLESTRING
 
ASN1_STRING


	)

70 
	#ASN1_T61STRING
 
ASN1_STRING


	)

71 
	#ASN1_IA5STRING
 
ASN1_STRING


	)

72 
	#ASN1_UTCTIME
 
ASN1_STRING


	)

73 
	#ASN1_GENERALIZEDTIME
 
ASN1_STRING


	)

74 
	#ASN1_TIME
 
ASN1_STRING


	)

75 
	#ASN1_GENERALSTRING
 
ASN1_STRING


	)

76 
	#ASN1_UNIVERSALSTRING
 
ASN1_STRING


	)

77 
	#ASN1_BMPSTRING
 
ASN1_STRING


	)

78 
	#ASN1_VISIBLESTRING
 
ASN1_STRING


	)

79 
	#ASN1_UTF8STRING
 
ASN1_STRING


	)

80 
	#ASN1_BOOLEAN
 

	)

81 
	#ASN1_NULL
 

	)

83 
a¢1_¡ršg_¡
 
	tASN1_INTEGER
;

84 
a¢1_¡ršg_¡
 
	tASN1_ENUMERATED
;

85 
a¢1_¡ršg_¡
 
	tASN1_BIT_STRING
;

86 
a¢1_¡ršg_¡
 
	tASN1_OCTET_STRING
;

87 
a¢1_¡ršg_¡
 
	tASN1_PRINTABLESTRING
;

88 
a¢1_¡ršg_¡
 
	tASN1_T61STRING
;

89 
a¢1_¡ršg_¡
 
	tASN1_IA5STRING
;

90 
a¢1_¡ršg_¡
 
	tASN1_GENERALSTRING
;

91 
a¢1_¡ršg_¡
 
	tASN1_UNIVERSALSTRING
;

92 
a¢1_¡ršg_¡
 
	tASN1_BMPSTRING
;

93 
a¢1_¡ršg_¡
 
	tASN1_UTCTIME
;

94 
a¢1_¡ršg_¡
 
	tASN1_TIME
;

95 
a¢1_¡ršg_¡
 
	tASN1_GENERALIZEDTIME
;

96 
a¢1_¡ršg_¡
 
	tASN1_VISIBLESTRING
;

97 
a¢1_¡ršg_¡
 
	tASN1_UTF8STRING
;

98 
a¢1_¡ršg_¡
 
	tASN1_STRING
;

99 
	tASN1_BOOLEAN
;

100 
	tASN1_NULL
;

103 
a¢1_objeù_¡
 
	tASN1_OBJECT
;

105 
ASN1_ITEM_¡
 
	tASN1_ITEM
;

106 
a¢1_pùx_¡
 
	tASN1_PCTX
;

108 #ifdeà
OPENSSL_SYS_WIN32


109 #undeà
X509_NAME


110 #undeà
X509_EXTENSIONS


111 #undeà
X509_CERT_PAIR


112 #undeà
PKCS7_ISSUER_AND_SERIAL


113 #undeà
OCSP_REQUEST


114 #undeà
OCSP_RESPONSE


117 #ifdeà
BIGNUM


118 #undeà
BIGNUM


120 
bignum_¡
 
	tBIGNUM
;

121 
bignum_ùx
 
	tBN_CTX
;

122 
bn_blšdšg_¡
 
	tBN_BLINDING
;

123 
bn_mÚt_ùx_¡
 
	tBN_MONT_CTX
;

124 
bn_»ı_ùx_¡
 
	tBN_RECP_CTX
;

125 
bn_g’cb_¡
 
	tBN_GENCB
;

127 
buf_mem_¡
 
	tBUF_MEM
;

129 
evp_ch”_¡
 
	tEVP_CIPHER
;

130 
evp_ch”_ùx_¡
 
	tEVP_CIPHER_CTX
;

131 
’v_md_¡
 
	tEVP_MD
;

132 
’v_md_ùx_¡
 
	tEVP_MD_CTX
;

133 
evp_pkey_¡
 
	tEVP_PKEY
;

135 
evp_pkey_a¢1_m‘hod_¡
 
	tEVP_PKEY_ASN1_METHOD
;

137 
evp_pkey_m‘hod_¡
 
	tEVP_PKEY_METHOD
;

138 
evp_pkey_ùx_¡
 
	tEVP_PKEY_CTX
;

140 
dh_¡
 
	tDH
;

141 
dh_m‘hod
 
	tDH_METHOD
;

143 
d§_¡
 
	tDSA
;

144 
d§_m‘hod
 
	tDSA_METHOD
;

146 
r§_¡
 
	tRSA
;

147 
r§_m‘h_¡
 
	tRSA_METHOD
;

149 
¿nd_m‘h_¡
 
	tRAND_METHOD
;

151 
ecdh_m‘hod
 
	tECDH_METHOD
;

152 
ecd§_m‘hod
 
	tECDSA_METHOD
;

154 
x509_¡
 
	tX509
;

155 
X509_®gÜ_¡
 
	tX509_ALGOR
;

156 
X509_ül_¡
 
	tX509_CRL
;

157 
x509_ül_m‘hod_¡
 
	tX509_CRL_METHOD
;

158 
x509_»voked_¡
 
	tX509_REVOKED
;

159 
X509_Çme_¡
 
	tX509_NAME
;

160 
X509_pubkey_¡
 
	tX509_PUBKEY
;

161 
x509_¡Üe_¡
 
	tX509_STORE
;

162 
x509_¡Üe_ùx_¡
 
	tX509_STORE_CTX
;

164 
pkcs8_´iv_key_šfo_¡
 
	tPKCS8_PRIV_KEY_INFO
;

166 
v3_ext_ùx
 
	tX509V3_CTX
;

167 
cÚf_¡
 
	tCONF
;

169 
¡Üe_¡
 
	tSTORE
;

170 
¡Üe_m‘hod_¡
 
	tSTORE_METHOD
;

172 
ui_¡
 
	tUI
;

173 
ui_m‘hod_¡
 
	tUI_METHOD
;

175 
¡_ERR_FNS
 
	tERR_FNS
;

177 
’gše_¡
 
	tENGINE
;

178 
s¦_¡
 
	tSSL
;

179 
s¦_ùx_¡
 
	tSSL_CTX
;

181 
comp_m‘hod_¡
 
	tCOMP_METHOD
;

183 
X509_POLICY_NODE_¡
 
	tX509_POLICY_NODE
;

184 
X509_POLICY_LEVEL_¡
 
	tX509_POLICY_LEVEL
;

185 
X509_POLICY_TREE_¡
 
	tX509_POLICY_TREE
;

186 
X509_POLICY_CACHE_¡
 
	tX509_POLICY_CACHE
;

188 
AUTHORITY_KEYID_¡
 
	tAUTHORITY_KEYID
;

189 
DIST_POINT_¡
 
	tDIST_POINT
;

190 
ISSUING_DIST_POINT_¡
 
	tISSUING_DIST_POINT
;

191 
NAME_CONSTRAINTS_¡
 
	tNAME_CONSTRAINTS
;

194 
	#DECLARE_PKCS12_STACK_OF
(
ty³
)

	)

195 
	#IMPLEMENT_PKCS12_STACK_OF
(
ty³
)

	)

197 
üy±o_ex_d©a_¡
 
	tCRYPTO_EX_DATA
;

199 
	tCRYPTO_EX_Ãw
 (*
	t·»Á
, *
	t±r
, 
	tCRYPTO_EX_DATA
 *
	tad
,

200 
	tidx
, 
	t¬gl
, *
	t¬gp
);

201 
	tCRYPTO_EX_ä“
 (*
	t·»Á
, *
	t±r
, 
	tCRYPTO_EX_DATA
 *
	tad
,

202 
	tidx
, 
	t¬gl
, *
	t¬gp
);

203 
	tCRYPTO_EX_dup
 (
	tCRYPTO_EX_DATA
 *
	tto
, CRYPTO_EX_DATA *
	täom
,

204 *
	täom_d
, 
	tidx
, 
	t¬gl
, *
	t¬gp
);

206 
oc¥_»q_ùx_¡
 
	tOCSP_REQ_CTX
;

207 
oc¥_»¥Ú£_¡
 
	tOCSP_RESPONSE
;

208 
oc¥_»¥Úd”_id_¡
 
	tOCSP_RESPID
;

210 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/pem.h

59 #iâdeà
HEADER_PEM_H


60 
	#HEADER_PEM_H


	)

62 
	~<İ’s¦/e_os2.h
>

63 #iâdeà
OPENSSL_NO_BIO


64 
	~<İ’s¦/bio.h
>

66 #iâdeà
OPENSSL_NO_STACK


67 
	~<İ’s¦/¡ack.h
>

69 
	~<İ’s¦/evp.h
>

70 
	~<İ’s¦/x509.h
>

71 
	~<İ’s¦/³m2.h
>

73 #ifdeà 
__ılu¥lus


77 
	#PEM_BUFSIZE
 1024

	)

79 
	#PEM_OBJ_UNDEF
 0

	)

80 
	#PEM_OBJ_X509
 1

	)

81 
	#PEM_OBJ_X509_REQ
 2

	)

82 
	#PEM_OBJ_CRL
 3

	)

83 
	#PEM_OBJ_SSL_SESSION
 4

	)

84 
	#PEM_OBJ_PRIV_KEY
 10

	)

85 
	#PEM_OBJ_PRIV_RSA
 11

	)

86 
	#PEM_OBJ_PRIV_DSA
 12

	)

87 
	#PEM_OBJ_PRIV_DH
 13

	)

88 
	#PEM_OBJ_PUB_RSA
 14

	)

89 
	#PEM_OBJ_PUB_DSA
 15

	)

90 
	#PEM_OBJ_PUB_DH
 16

	)

91 
	#PEM_OBJ_DHPARAMS
 17

	)

92 
	#PEM_OBJ_DSAPARAMS
 18

	)

93 
	#PEM_OBJ_PRIV_RSA_PUBLIC
 19

	)

94 
	#PEM_OBJ_PRIV_ECDSA
 20

	)

95 
	#PEM_OBJ_PUB_ECDSA
 21

	)

96 
	#PEM_OBJ_ECPARAMETERS
 22

	)

98 
	#PEM_ERROR
 30

	)

99 
	#PEM_DEK_DES_CBC
 40

	)

100 
	#PEM_DEK_IDEA_CBC
 45

	)

101 
	#PEM_DEK_DES_EDE
 50

	)

102 
	#PEM_DEK_DES_ECB
 60

	)

103 
	#PEM_DEK_RSA
 70

	)

104 
	#PEM_DEK_RSA_MD2
 80

	)

105 
	#PEM_DEK_RSA_MD5
 90

	)

107 
	#PEM_MD_MD2
 
NID_md2


	)

108 
	#PEM_MD_MD5
 
NID_md5


	)

109 
	#PEM_MD_SHA
 
NID_sha


	)

110 
	#PEM_MD_MD2_RSA
 
NID_md2W™hRSAEnüy±iÚ


	)

111 
	#PEM_MD_MD5_RSA
 
NID_md5W™hRSAEnüy±iÚ


	)

112 
	#PEM_MD_SHA_RSA
 
NID_sha1W™hRSAEnüy±iÚ


	)

114 
	#PEM_STRING_X509_OLD
 "X509 CERTIFICATE"

	)

115 
	#PEM_STRING_X509
 "CERTIFICATE"

	)

116 
	#PEM_STRING_X509_PAIR
 "CERTIFICATE PAIR"

	)

117 
	#PEM_STRING_X509_TRUSTED
 "TRUSTED CERTIFICATE"

	)

118 
	#PEM_STRING_X509_REQ_OLD
 "NEW CERTIFICATE REQUEST"

	)

119 
	#PEM_STRING_X509_REQ
 "CERTIFICATE REQUEST"

	)

120 
	#PEM_STRING_X509_CRL
 "X509 CRL"

	)

121 
	#PEM_STRING_EVP_PKEY
 "ANY PRIVATE KEY"

	)

122 
	#PEM_STRING_PUBLIC
 "PUBLIC KEY"

	)

123 
	#PEM_STRING_RSA
 "RSA PRIVATE KEY"

	)

124 
	#PEM_STRING_RSA_PUBLIC
 "RSA PUBLIC KEY"

	)

125 
	#PEM_STRING_DSA
 "DSA PRIVATE KEY"

	)

126 
	#PEM_STRING_DSA_PUBLIC
 "DSA PUBLIC KEY"

	)

127 
	#PEM_STRING_PKCS7
 "PKCS7"

	)

128 
	#PEM_STRING_PKCS7_SIGNED
 "PKCS #7 SIGNED DATA"

	)

129 
	#PEM_STRING_PKCS8
 "ENCRYPTED PRIVATE KEY"

	)

130 
	#PEM_STRING_PKCS8INF
 "PRIVATE KEY"

	)

131 
	#PEM_STRING_DHPARAMS
 "DH PARAMETERS"

	)

132 
	#PEM_STRING_DHXPARAMS
 "X9.42 DH PARAMETERS"

	)

133 
	#PEM_STRING_SSL_SESSION
 "SSL SESSION PARAMETERS"

	)

134 
	#PEM_STRING_DSAPARAMS
 "DSA PARAMETERS"

	)

135 
	#PEM_STRING_ECDSA_PUBLIC
 "ECDSA PUBLIC KEY"

	)

136 
	#PEM_STRING_ECPARAMETERS
 "EC PARAMETERS"

	)

137 
	#PEM_STRING_ECPRIVATEKEY
 "EC PRIVATE KEY"

	)

138 
	#PEM_STRING_PARAMETERS
 "PARAMETERS"

	)

139 
	#PEM_STRING_CMS
 "CMS"

	)

145 
	sPEM_Encode_S—l_¡
 {

146 
EVP_ENCODE_CTX
 
’code
;

147 
EVP_MD_CTX
 
md
;

148 
EVP_CIPHER_CTX
 
ch”
;

149 } 
	tPEM_ENCODE_SEAL_CTX
;

152 
	#PEM_TYPE_ENCRYPTED
 10

	)

153 
	#PEM_TYPE_MIC_ONLY
 20

	)

154 
	#PEM_TYPE_MIC_CLEAR
 30

	)

155 
	#PEM_TYPE_CLEAR
 40

	)

157 
	s³m_»c_¡
 {

158 *
Çme
;

159 
X509_NAME
 *
dn
;

160 
ch”
;

161 
key_’c
;

163 } 
	tPEM_USER
;

165 
	s³m_ùx_¡
 {

166 
ty³
;

168 
v”siÚ
;

169 
mode
;

170 } 
´oc_ty³
;

172 *
domaš
;

175 
ch”
;

179 } 
DEK_šfo
;

181 
PEM_USER
 *
Üigš©Ü
;

183 
num_»c›Á
;

184 
PEM_USER
 **
»c›Á
;

188 
EVP_MD
 *
md
;

190 
md_’c
;

191 
md_Ën
;

192 *
md_d©a
;

194 
EVP_CIPHER
 *
dec
;

195 
key_Ën
;

196 *
key
;

201 
d©a_’c
;

202 
d©a_Ën
;

203 *
d©a
;

204 } 
	tPEM_CTX
;

212 #ifdeà
OPENSSL_NO_FP_API


214 
	#IMPLEMENT_PEM_»ad_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
è

	)

215 
	#IMPLEMENT_PEM_wr™e_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
è

	)

216 
	#IMPLEMENT_PEM_wr™e_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
è

	)

217 
	#IMPLEMENT_PEM_wr™e_cb_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
è

	)

218 
	#IMPLEMENT_PEM_wr™e_cb_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
è

	)

221 
	#IMPLEMENT_PEM_»ad_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

222 
ty³
 *
PEM_»ad_
##
	`Çme
(
FILE
 *
å
,y³ **
x
, 
³m_·sswÜd_cb
 *
cb
, *
u
)\

224  
	`PEM_ASN1_»ad
((
d2i_of_void
 *)
d2i_
##
a¢1
, 
¡r
,
å
,(**)
x
,
cb
,
u
); \

225 }

	)

227 
	#IMPLEMENT_PEM_wr™e_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

228 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, 
ty³
 *
x
) \

230  
	`PEM_ASN1_wr™e
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
å
,
x
,
NULL
,NULL,0,NULL,NULL); \

231 }

	)

233 
	#IMPLEMENT_PEM_wr™e_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

234 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, cÚ¡ 
ty³
 *
x
) \

236  
	`PEM_ASN1_wr™e
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
å
,(*)
x
,
NULL
,NULL,0,NULL,NULL); \

237 }

	)

239 
	#IMPLEMENT_PEM_wr™e_cb_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

240 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

241 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, \

242 *
u
) \

244  
	`PEM_ASN1_wr™e
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
å
,
x
,
’c
,
k¡r
,
kËn
,
cb
,
u
); \

245 }

	)

247 
	#IMPLEMENT_PEM_wr™e_cb_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

248 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

249 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, \

250 *
u
) \

252  
	`PEM_ASN1_wr™e
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
å
,
x
,
’c
,
k¡r
,
kËn
,
cb
,
u
); \

253 }

	)

257 
	#IMPLEMENT_PEM_»ad_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

258 
ty³
 *
PEM_»ad_bio_
##
	`Çme
(
BIO
 *
bp
,y³ **
x
, 
³m_·sswÜd_cb
 *
cb
, *
u
)\

260  
	`PEM_ASN1_»ad_bio
((
d2i_of_void
 *)
d2i_
##
a¢1
, 
¡r
,
bp
,(**)
x
,
cb
,
u
); \

261 }

	)

263 
	#IMPLEMENT_PEM_wr™e_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

264 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, 
ty³
 *
x
) \

266  
	`PEM_ASN1_wr™e_bio
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
bp
,
x
,
NULL
,NULL,0,NULL,NULL); \

267 }

	)

269 
	#IMPLEMENT_PEM_wr™e_bio_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

270 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, cÚ¡ 
ty³
 *
x
) \

272  
	`PEM_ASN1_wr™e_bio
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
bp
,(*)
x
,
NULL
,NULL,0,NULL,NULL); \

273 }

	)

275 
	#IMPLEMENT_PEM_wr™e_cb_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

276 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

277 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, *
u
) \

279  
	`PEM_ASN1_wr™e_bio
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
bp
,
x
,
’c
,
k¡r
,
kËn
,
cb
,
u
); \

280 }

	)

282 
	#IMPLEMENT_PEM_wr™e_cb_bio_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

283 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

284 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, *
u
) \

286  
	`PEM_ASN1_wr™e_bio
((
i2d_of_void
 *)
i2d_
##
a¢1
,
¡r
,
bp
,(*)
x
,
’c
,
k¡r
,
kËn
,
cb
,
u
); \

287 }

	)

289 
	#IMPLEMENT_PEM_wr™e
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

290 
	`IMPLEMENT_PEM_wr™e_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

291 
	`IMPLEMENT_PEM_wr™e_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

293 
	#IMPLEMENT_PEM_wr™e_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

294 
	`IMPLEMENT_PEM_wr™e_bio_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

295 
	`IMPLEMENT_PEM_wr™e_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

297 
	#IMPLEMENT_PEM_wr™e_cb
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

298 
	`IMPLEMENT_PEM_wr™e_cb_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

299 
	`IMPLEMENT_PEM_wr™e_cb_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

301 
	#IMPLEMENT_PEM_wr™e_cb_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

302 
	`IMPLEMENT_PEM_wr™e_cb_bio_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

303 
	`IMPLEMENT_PEM_wr™e_cb_å_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

305 
	#IMPLEMENT_PEM_»ad
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

306 
	`IMPLEMENT_PEM_»ad_bio
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

307 
	`IMPLEMENT_PEM_»ad_å
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

309 
	#IMPLEMENT_PEM_rw
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

310 
	`IMPLEMENT_PEM_»ad
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

311 
	`IMPLEMENT_PEM_wr™e
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

313 
	#IMPLEMENT_PEM_rw_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

314 
	`IMPLEMENT_PEM_»ad
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

315 
	`IMPLEMENT_PEM_wr™e_cÚ¡
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

317 
	#IMPLEMENT_PEM_rw_cb
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

318 
	`IMPLEMENT_PEM_»ad
(
Çme
, 
ty³
, 
¡r
, 
a¢1
) \

319 
	`IMPLEMENT_PEM_wr™e_cb
(
Çme
, 
ty³
, 
¡r
, 
a¢1
)

	)

323 #ià
defšed
(
OPENSSL_NO_FP_API
)

325 
	#DECLARE_PEM_»ad_å
(
Çme
, 
ty³
è

	)

326 
	#DECLARE_PEM_wr™e_å
(
Çme
, 
ty³
è

	)

327 
	#DECLARE_PEM_wr™e_cb_å
(
Çme
, 
ty³
è

	)

330 
	#DECLARE_PEM_»ad_å
(
Çme
, 
ty³
) \

331 
ty³
 *
PEM_»ad_
##
	`Çme
(
FILE
 *
å
,y³ **
x
, 
³m_·sswÜd_cb
 *
cb
, *
u
);

	)

333 
	#DECLARE_PEM_wr™e_å
(
Çme
, 
ty³
) \

334 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, 
ty³
 *
x
);

	)

336 
	#DECLARE_PEM_wr™e_å_cÚ¡
(
Çme
, 
ty³
) \

337 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, cÚ¡ 
ty³
 *
x
);

	)

339 
	#DECLARE_PEM_wr™e_cb_å
(
Çme
, 
ty³
) \

340 
PEM_wr™e_
##
	`Çme
(
FILE
 *
å
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

341 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, *
u
);

	)

345 #iâdeà
OPENSSL_NO_BIO


346 
	#DECLARE_PEM_»ad_bio
(
Çme
, 
ty³
) \

347 
ty³
 *
PEM_»ad_bio_
##
	`Çme
(
BIO
 *
bp
,y³ **
x
, 
³m_·sswÜd_cb
 *
cb
, *
u
);

	)

349 
	#DECLARE_PEM_wr™e_bio
(
Çme
, 
ty³
) \

350 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, 
ty³
 *
x
);

	)

352 
	#DECLARE_PEM_wr™e_bio_cÚ¡
(
Çme
, 
ty³
) \

353 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, cÚ¡ 
ty³
 *
x
);

	)

355 
	#DECLARE_PEM_wr™e_cb_bio
(
Çme
, 
ty³
) \

356 
PEM_wr™e_bio_
##
	`Çme
(
BIO
 *
bp
, 
ty³
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, \

357 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cb
, *
u
);

	)

361 
	#DECLARE_PEM_»ad_bio
(
Çme
, 
ty³
è

	)

362 
	#DECLARE_PEM_wr™e_bio
(
Çme
, 
ty³
è

	)

363 
	#DECLARE_PEM_wr™e_bio_cÚ¡
(
Çme
, 
ty³
è

	)

364 
	#DECLARE_PEM_wr™e_cb_bio
(
Çme
, 
ty³
è

	)

366 
	#DECLARE_PEM_wr™e
(
Çme
, 
ty³
) \

367 
	`DECLARE_PEM_wr™e_bio
(
Çme
, 
ty³
) \

368 
	`DECLARE_PEM_wr™e_å
(
Çme
, 
ty³
)

	)

369 
	#DECLARE_PEM_wr™e_cÚ¡
(
Çme
, 
ty³
) \

370 
	`DECLARE_PEM_wr™e_bio_cÚ¡
(
Çme
, 
ty³
) \

371 
	`DECLARE_PEM_wr™e_å_cÚ¡
(
Çme
, 
ty³
)

	)

372 
	#DECLARE_PEM_wr™e_cb
(
Çme
, 
ty³
) \

373 
	`DECLARE_PEM_wr™e_cb_bio
(
Çme
, 
ty³
) \

374 
	`DECLARE_PEM_wr™e_cb_å
(
Çme
, 
ty³
)

	)

375 
	#DECLARE_PEM_»ad
(
Çme
, 
ty³
) \

376 
	`DECLARE_PEM_»ad_bio
(
Çme
, 
ty³
) \

377 
	`DECLARE_PEM_»ad_å
(
Çme
, 
ty³
)

	)

378 
	#DECLARE_PEM_rw
(
Çme
, 
ty³
) \

379 
	`DECLARE_PEM_»ad
(
Çme
, 
ty³
) \

380 
	`DECLARE_PEM_wr™e
(
Çme
, 
ty³
)

	)

381 
	#DECLARE_PEM_rw_cÚ¡
(
Çme
, 
ty³
) \

382 
	`DECLARE_PEM_»ad
(
Çme
, 
ty³
) \

383 
	`DECLARE_PEM_wr™e_cÚ¡
(
Çme
, 
ty³
)

	)

384 
	#DECLARE_PEM_rw_cb
(
Çme
, 
ty³
) \

385 
	`DECLARE_PEM_»ad
(
Çme
, 
ty³
) \

386 
	`DECLARE_PEM_wr™e_cb
(
Çme
, 
ty³
)

	)

389 
	t³m_·sswÜd_cb
 (*
	tbuf
, 
	tsize
, 
	trwæag
, *
	tu£rd©a
);

392 
	t³m_·sswÜd_cb
 (*
	tbuf
, 
	tsize
, 
	trwæag
);

395 
PEM_g‘_EVP_CIPHER_INFO
(*
h—d”
, 
EVP_CIPHER_INFO
 *
ch”
);

396 
PEM_do_h—d”
(
EVP_CIPHER_INFO
 *
ch”
, *
d©a
, *
Ën
,

397 
³m_·sswÜd_cb
 *
ÿÎback
, *
u
);

399 #iâdeà
OPENSSL_NO_BIO


400 
PEM_»ad_bio
(
BIO
 *
bp
, **
Çme
, **
h—d”
,

401 **
d©a
, *
Ën
);

402 
PEM_wr™e_bio
(
BIO
 *
bp
, cÚ¡ *
Çme
, cÚ¡ *
hdr
,

403 cÚ¡ *
d©a
, 
Ën
);

404 
PEM_by‹s_»ad_bio
(**
pd©a
, *
¶’
, **
²m
,

405 cÚ¡ *
Çme
, 
BIO
 *
bp
, 
³m_·sswÜd_cb
 *
cb
,

406 *
u
);

407 *
PEM_ASN1_»ad_bio
(
d2i_of_void
 *
d2i
, cÚ¡ *
Çme
, 
BIO
 *
bp
, **
x
,

408 
³m_·sswÜd_cb
 *
cb
, *
u
);

409 
PEM_ASN1_wr™e_bio
(
i2d_of_void
 *
i2d
, cÚ¡ *
Çme
, 
BIO
 *
bp
, *
x
,

410 cÚ¡ 
EVP_CIPHER
 *
’c
, *
k¡r
, 
kËn
,

411 
³m_·sswÜd_cb
 *
cb
, *
u
);

413 
STACK_OF
(
X509_INFO
è*
PEM_X509_INFO_»ad_bio
(
BIO
 *
bp
, STACK_OF(X509_INFOè*
sk
,

414 
³m_·sswÜd_cb
 *
cb
, *
u
);

415 
PEM_X509_INFO_wr™e_bio
(
BIO
 *
bp
, 
X509_INFO
 *
xi
, 
EVP_CIPHER
 *
’c
,

416 *
k¡r
, 
kËn
,

417 
³m_·sswÜd_cb
 *
cd
, *
u
);

420 
PEM_»ad
(
FILE
 *
å
, **
Çme
, **
h—d”
,

421 **
d©a
, *
Ën
);

422 
PEM_wr™e
(
FILE
 *
å
, cÚ¡ *
Çme
, cÚ¡ *
hdr
,

423 cÚ¡ *
d©a
, 
Ën
);

424 *
PEM_ASN1_»ad
(
d2i_of_void
 *
d2i
, cÚ¡ *
Çme
, 
FILE
 *
å
, **
x
,

425 
³m_·sswÜd_cb
 *
cb
, *
u
);

426 
PEM_ASN1_wr™e
(
i2d_of_void
 *
i2d
, cÚ¡ *
Çme
, 
FILE
 *
å
,

427 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
, *
k¡r
,

428 
kËn
, 
³m_·sswÜd_cb
 *
ÿÎback
, *
u
);

429 
STACK_OF
(
X509_INFO
è*
PEM_X509_INFO_»ad
(
FILE
 *
å
, STACK_OF(X509_INFOè*
sk
,

430 
³m_·sswÜd_cb
 *
cb
, *
u
);

432 
PEM_S—lIn™
(
PEM_ENCODE_SEAL_CTX
 *
ùx
, 
EVP_CIPHER
 *
ty³
,

433 
EVP_MD
 *
md_ty³
, **
ek
, *
ekl
,

434 *
iv
, 
EVP_PKEY
 **
pubk
, 
Åubk
);

435 
PEM_S—lUpd©e
(
PEM_ENCODE_SEAL_CTX
 *
ùx
, *
out
, *
ou
,

436 *
š
, 
šl
);

437 
PEM_S—lFš®
(
PEM_ENCODE_SEAL_CTX
 *
ùx
, *
sig
, *
sigl
,

438 *
out
, *
ou
, 
EVP_PKEY
 *
´iv
);

440 
PEM_SignIn™
(
EVP_MD_CTX
 *
ùx
, 
EVP_MD
 *
ty³
);

441 
PEM_SignUpd©e
(
EVP_MD_CTX
 *
ùx
, *
d
, 
út
);

442 
PEM_SignFš®
(
EVP_MD_CTX
 *
ùx
, *
sig»t
,

443 *
sigËn
, 
EVP_PKEY
 *
pkey
);

446 
PEM_def_ÿÎback
(*
buf
, 
num
, 
rwæag
, *
u£rd©a
);

447 
PEM_´oc_ty³
(*
buf
, 
ty³
);

448 
PEM_dek_šfo
(*
buf
, cÚ¡ *
ty³
, 
Ën
, *
¡r
);

450 
	~<İ’s¦/symhacks.h
>

452 
DECLARE_PEM_rw
(
X509
, X509)

453 
DECLARE_PEM_rw
(
X509_AUX
, 
X509
)

454 
DECLARE_PEM_rw
(
X509_CERT_PAIR
, X509_CERT_PAIR)

455 
DECLARE_PEM_rw
(
X509_REQ
, X509_REQ)

456 
DECLARE_PEM_wr™e
(
X509_REQ_NEW
, 
X509_REQ
)

457 
DECLARE_PEM_rw
(
X509_CRL
, X509_CRL)

458 
DECLARE_PEM_rw
(
PKCS7
, PKCS7)

459 
DECLARE_PEM_rw
(
NETSCAPE_CERT_SEQUENCE
, NETSCAPE_CERT_SEQUENCE)

460 
DECLARE_PEM_rw
(
PKCS8
, 
X509_SIG
)

461 
DECLARE_PEM_rw
(
PKCS8_PRIV_KEY_INFO
, PKCS8_PRIV_KEY_INFO)

462 #iâdeà
OPENSSL_NO_RSA


463 
DECLARE_PEM_rw_cb
(
RSAPriv©eKey
, 
RSA
)

464 
DECLARE_PEM_rw_cÚ¡
(
RSAPublicKey
, 
RSA
)

465 
DECLARE_PEM_rw
(
RSA_PUBKEY
, 
RSA
)

467 #iâdeà
OPENSSL_NO_DSA


468 
DECLARE_PEM_rw_cb
(
DSAPriv©eKey
, 
DSA
)

469 
DECLARE_PEM_rw
(
DSA_PUBKEY
, 
DSA
)

470 
DECLARE_PEM_rw_cÚ¡
(
DSA·¿ms
, 
DSA
)

472 #iâdeà
OPENSSL_NO_EC


473 
DECLARE_PEM_rw_cÚ¡
(
ECPKP¬am‘”s
, 
EC_GROUP
)

474 
DECLARE_PEM_rw_cb
(
ECPriv©eKey
, 
EC_KEY
)

475 
DECLARE_PEM_rw
(
EC_PUBKEY
, 
EC_KEY
)

477 #iâdeà
OPENSSL_NO_DH


478 
DECLARE_PEM_rw_cÚ¡
(
DH·¿ms
, 
DH
)

479 
DECLARE_PEM_wr™e_cÚ¡
(
DHx·¿ms
, 
DH
)

481 
DECLARE_PEM_rw_cb
(
Priv©eKey
, 
EVP_PKEY
)

482 
DECLARE_PEM_rw
(
PUBKEY
, 
EVP_PKEY
)

484 
PEM_wr™e_bio_PKCS8Priv©eKey_nid
(
BIO
 *
bp
, 
EVP_PKEY
 *
x
, 
nid
,

485 *
k¡r
, 
kËn
,

486 
³m_·sswÜd_cb
 *
cb
, *
u
);

487 
PEM_wr™e_bio_PKCS8Priv©eKey
(
BIO
 *, 
EVP_PKEY
 *, cÚ¡ 
EVP_CIPHER
 *,

488 *, , 
³m_·sswÜd_cb
 *, *);

489 
i2d_PKCS8Priv©eKey_bio
(
BIO
 *
bp
, 
EVP_PKEY
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
,

490 *
k¡r
, 
kËn
,

491 
³m_·sswÜd_cb
 *
cb
, *
u
);

492 
i2d_PKCS8Priv©eKey_nid_bio
(
BIO
 *
bp
, 
EVP_PKEY
 *
x
, 
nid
,

493 *
k¡r
, 
kËn
,

494 
³m_·sswÜd_cb
 *
cb
, *
u
);

495 
EVP_PKEY
 *
d2i_PKCS8Priv©eKey_bio
(
BIO
 *
bp
, EVP_PKEY **
x
, 
³m_·sswÜd_cb
 *
cb
,

496 *
u
);

498 
i2d_PKCS8Priv©eKey_å
(
FILE
 *
å
, 
EVP_PKEY
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
,

499 *
k¡r
, 
kËn
,

500 
³m_·sswÜd_cb
 *
cb
, *
u
);

501 
i2d_PKCS8Priv©eKey_nid_å
(
FILE
 *
å
, 
EVP_PKEY
 *
x
, 
nid
,

502 *
k¡r
, 
kËn
,

503 
³m_·sswÜd_cb
 *
cb
, *
u
);

504 
PEM_wr™e_PKCS8Priv©eKey_nid
(
FILE
 *
å
, 
EVP_PKEY
 *
x
, 
nid
,

505 *
k¡r
, 
kËn
,

506 
³m_·sswÜd_cb
 *
cb
, *
u
);

508 
EVP_PKEY
 *
d2i_PKCS8Priv©eKey_å
(
FILE
 *
å
, EVP_PKEY **
x
, 
³m_·sswÜd_cb
 *
cb
,

509 *
u
);

511 
PEM_wr™e_PKCS8Priv©eKey
(
FILE
 *
å
, 
EVP_PKEY
 *
x
, cÚ¡ 
EVP_CIPHER
 *
’c
,

512 *
k¡r
, 
kËn
, 
³m_·sswÜd_cb
 *
cd
,

513 *
u
);

515 
EVP_PKEY
 *
PEM_»ad_bio_P¬am‘”s
(
BIO
 *
bp
, EVP_PKEY **
x
);

516 
PEM_wr™e_bio_P¬am‘”s
(
BIO
 *
bp
, 
EVP_PKEY
 *
x
);

518 
EVP_PKEY
 *
b2i_Priv©eKey
(cÚ¡ **
š
, 
Ëngth
);

519 
EVP_PKEY
 *
b2i_PublicKey
(cÚ¡ **
š
, 
Ëngth
);

520 
EVP_PKEY
 *
b2i_Priv©eKey_bio
(
BIO
 *
š
);

521 
EVP_PKEY
 *
b2i_PublicKey_bio
(
BIO
 *
š
);

522 
i2b_Priv©eKey_bio
(
BIO
 *
out
, 
EVP_PKEY
 *
pk
);

523 
i2b_PublicKey_bio
(
BIO
 *
out
, 
EVP_PKEY
 *
pk
);

524 #iâdeà
OPENSSL_NO_RC4


525 
EVP_PKEY
 *
b2i_PVK_bio
(
BIO
 *
š
, 
³m_·sswÜd_cb
 *
cb
, *
u
);

526 
i2b_PVK_bio
(
BIO
 *
out
, 
EVP_PKEY
 *
pk
, 
’şev–
,

527 
³m_·sswÜd_cb
 *
cb
, *
u
);

536 
ERR_lßd_PEM_¡ršgs
();

541 
	#PEM_F_B2I_DSS
 127

	)

542 
	#PEM_F_B2I_PVK_BIO
 128

	)

543 
	#PEM_F_B2I_RSA
 129

	)

544 
	#PEM_F_CHECK_BITLEN_DSA
 130

	)

545 
	#PEM_F_CHECK_BITLEN_RSA
 131

	)

546 
	#PEM_F_D2I_PKCS8PRIVATEKEY_BIO
 120

	)

547 
	#PEM_F_D2I_PKCS8PRIVATEKEY_FP
 121

	)

548 
	#PEM_F_DO_B2I
 132

	)

549 
	#PEM_F_DO_B2I_BIO
 133

	)

550 
	#PEM_F_DO_BLOB_HEADER
 134

	)

551 
	#PEM_F_DO_PK8PKEY
 126

	)

552 
	#PEM_F_DO_PK8PKEY_FP
 125

	)

553 
	#PEM_F_DO_PVK_BODY
 135

	)

554 
	#PEM_F_DO_PVK_HEADER
 136

	)

555 
	#PEM_F_I2B_PVK
 137

	)

556 
	#PEM_F_I2B_PVK_BIO
 138

	)

557 
	#PEM_F_LOAD_IV
 101

	)

558 
	#PEM_F_PEM_ASN1_READ
 102

	)

559 
	#PEM_F_PEM_ASN1_READ_BIO
 103

	)

560 
	#PEM_F_PEM_ASN1_WRITE
 104

	)

561 
	#PEM_F_PEM_ASN1_WRITE_BIO
 105

	)

562 
	#PEM_F_PEM_DEF_CALLBACK
 100

	)

563 
	#PEM_F_PEM_DO_HEADER
 106

	)

564 
	#PEM_F_PEM_F_PEM_WRITE_PKCS8PRIVATEKEY
 118

	)

565 
	#PEM_F_PEM_GET_EVP_CIPHER_INFO
 107

	)

566 
	#PEM_F_PEM_PK8PKEY
 119

	)

567 
	#PEM_F_PEM_READ
 108

	)

568 
	#PEM_F_PEM_READ_BIO
 109

	)

569 
	#PEM_F_PEM_READ_BIO_DHPARAMS
 141

	)

570 
	#PEM_F_PEM_READ_BIO_PARAMETERS
 140

	)

571 
	#PEM_F_PEM_READ_BIO_PRIVATEKEY
 123

	)

572 
	#PEM_F_PEM_READ_DHPARAMS
 142

	)

573 
	#PEM_F_PEM_READ_PRIVATEKEY
 124

	)

574 
	#PEM_F_PEM_SEALFINAL
 110

	)

575 
	#PEM_F_PEM_SEALINIT
 111

	)

576 
	#PEM_F_PEM_SIGNFINAL
 112

	)

577 
	#PEM_F_PEM_WRITE
 113

	)

578 
	#PEM_F_PEM_WRITE_BIO
 114

	)

579 
	#PEM_F_PEM_WRITE_PRIVATEKEY
 139

	)

580 
	#PEM_F_PEM_X509_INFO_READ
 115

	)

581 
	#PEM_F_PEM_X509_INFO_READ_BIO
 116

	)

582 
	#PEM_F_PEM_X509_INFO_WRITE_BIO
 117

	)

585 
	#PEM_R_BAD_BASE64_DECODE
 100

	)

586 
	#PEM_R_BAD_DECRYPT
 101

	)

587 
	#PEM_R_BAD_END_LINE
 102

	)

588 
	#PEM_R_BAD_IV_CHARS
 103

	)

589 
	#PEM_R_BAD_MAGIC_NUMBER
 116

	)

590 
	#PEM_R_BAD_PASSWORD_READ
 104

	)

591 
	#PEM_R_BAD_VERSION_NUMBER
 117

	)

592 
	#PEM_R_BIO_WRITE_FAILURE
 118

	)

593 
	#PEM_R_CIPHER_IS_NULL
 127

	)

594 
	#PEM_R_ERROR_CONVERTING_PRIVATE_KEY
 115

	)

595 
	#PEM_R_EXPECTING_PRIVATE_KEY_BLOB
 119

	)

596 
	#PEM_R_EXPECTING_PUBLIC_KEY_BLOB
 120

	)

597 
	#PEM_R_HEADER_TOO_LONG
 128

	)

598 
	#PEM_R_INCONSISTENT_HEADER
 121

	)

599 
	#PEM_R_KEYBLOB_HEADER_PARSE_ERROR
 122

	)

600 
	#PEM_R_KEYBLOB_TOO_SHORT
 123

	)

601 
	#PEM_R_NOT_DEK_INFO
 105

	)

602 
	#PEM_R_NOT_ENCRYPTED
 106

	)

603 
	#PEM_R_NOT_PROC_TYPE
 107

	)

604 
	#PEM_R_NO_START_LINE
 108

	)

605 
	#PEM_R_PROBLEMS_GETTING_PASSWORD
 109

	)

606 
	#PEM_R_PUBLIC_KEY_NO_RSA
 110

	)

607 
	#PEM_R_PVK_DATA_TOO_SHORT
 124

	)

608 
	#PEM_R_PVK_TOO_SHORT
 125

	)

609 
	#PEM_R_READ_KEY
 111

	)

610 
	#PEM_R_SHORT_HEADER
 112

	)

611 
	#PEM_R_UNSUPPORTED_CIPHER
 113

	)

612 
	#PEM_R_UNSUPPORTED_ENCRYPTION
 114

	)

613 
	#PEM_R_UNSUPPORTED_KEY_COMPONENTS
 126

	)

615 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/safestack.h

55 #iâdeà
HEADER_SAFESTACK_H


56 
	#HEADER_SAFESTACK_H


	)

58 
	~<İ’s¦/¡ack.h
>

60 #ifdeà
__ılu¥lus


64 #iâdeà
CHECKED_PTR_OF


65 
	#CHECKED_PTR_OF
(
ty³
, 
p
) \

66 ((*è(1 ? 
p
 : (
ty³
*)0))

	)

75 
	#CHECKED_STACK_OF
(
ty³
, 
p
) \

76 ((
_STACK
*è(1 ? 
p
 : (
	`STACK_OF
(
ty³
)*)0))

	)

78 
	#CHECKED_SK_COPY_FUNC
(
ty³
, 
p
) \

79 ((*(*)(*)è((1 ? 
p
 : (
ty³
 *(*)(cÚ¡y³ *))0)))

	)

81 
	#CHECKED_SK_FREE_FUNC
(
ty³
, 
p
) \

82 (((*)(*)è((1 ? 
p
 : ((*)(
ty³
 *))0)))

	)

84 
	#CHECKED_SK_CMP_FUNC
(
ty³
, 
p
) \

86 ((1 ? 
p
 : ((*)(cÚ¡ 
ty³
 * cÚ¡ *, cÚ¡y³ * cÚ¡ *))0)))

	)

88 
	#STACK_OF
(
ty³
è
¡ack_¡_
##
	)
type

89 
	#PREDECLARE_STACK_OF
(
ty³
è
	`STACK_OF
Ñy³);

	)

91 
	#DECLARE_STACK_OF
(
ty³
) \

92 
	`STACK_OF
(
ty³
) \

94 
_STACK
 
¡ack
; \

95 };

	)

96 
	#DECLARE_SPECIAL_STACK_OF
(
ty³
, 
ty³2
) \

97 
	`STACK_OF
(
ty³
) \

99 
_STACK
 
¡ack
; \

100 };

	)

103 
	#IMPLEMENT_STACK_OF
(
ty³
)

	)

119 *
	tOPENSSL_STRING
;

121 cÚ¡ *
	tOPENSSL_CSTRING
;

131 
DECLARE_SPECIAL_STACK_OF
(
OPENSSL_STRING
, )

137 *
	tOPENSSL_BLOCK
;

138 
DECLARE_SPECIAL_STACK_OF
(
OPENSSL_BLOCK
, )

144 
	#SKM_sk_Ãw
(
ty³
, 
cmp
) \

145 ((
	`STACK_OF
(
ty³
è*)
	`sk_Ãw
(
	`CHECKED_SK_CMP_FUNC
Ñy³, 
cmp
)))

	)

146 
	#SKM_sk_Ãw_nuÎ
(
ty³
) \

147 ((
	`STACK_OF
(
ty³
è*)
	`sk_Ãw_nuÎ
())

	)

148 
	#SKM_sk_ä“
(
ty³
, 
¡
) \

149 
	`sk_ä“
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
))

	)

150 
	#SKM_sk_num
(
ty³
, 
¡
) \

151 
	`sk_num
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
))

	)

152 
	#SKM_sk_v®ue
(
ty³
, 
¡
,
i
) \

153 ((
ty³
 *)
	`sk_v®ue
(
	`CHECKED_STACK_OF
Ñy³, 
¡
), 
i
))

	)

154 
	#SKM_sk_£t
(
ty³
, 
¡
,
i
,
v®
) \

155 
	`sk_£t
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
i
, 
	`CHECKED_PTR_OF
Ñy³, 
v®
))

	)

156 
	#SKM_sk_z”o
(
ty³
, 
¡
) \

157 
	`sk_z”o
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
))

	)

158 
	#SKM_sk_push
(
ty³
, 
¡
, 
v®
) \

159 
	`sk_push
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_PTR_OF
Ñy³, 
v®
))

	)

160 
	#SKM_sk_unshiá
(
ty³
, 
¡
, 
v®
) \

161 
	`sk_unshiá
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_PTR_OF
Ñy³, 
v®
))

	)

162 
	#SKM_sk_fšd
(
ty³
, 
¡
, 
v®
) \

163 
	`sk_fšd
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_PTR_OF
Ñy³, 
v®
))

	)

164 
	#SKM_sk_fšd_ex
(
ty³
, 
¡
, 
v®
) \

165 
	`sk_fšd_ex
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), \

166 
	`CHECKED_PTR_OF
(
ty³
, 
v®
))

	)

167 
	#SKM_sk_d–‘e
(
ty³
, 
¡
, 
i
) \

168 (
ty³
 *)
	`sk_d–‘e
(
	`CHECKED_STACK_OF
Ñy³, 
¡
), 
i
)

	)

169 
	#SKM_sk_d–‘e_±r
(
ty³
, 
¡
, 
±r
) \

170 (
ty³
 *)
	`sk_d–‘e_±r
(
	`CHECKED_STACK_OF
Ñy³, 
¡
), 
	`CHECKED_PTR_OF
Ñy³, 
±r
))

	)

171 
	#SKM_sk_š£¹
(
ty³
, 
¡
,
v®
, 
i
) \

172 
	`sk_š£¹
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_PTR_OF
Ñy³, 
v®
), 
i
)

	)

173 
	#SKM_sk_£t_cmp_func
(
ty³
, 
¡
, 
cmp
) \

174 (((*)(cÚ¡ 
ty³
 * const *,constype * const *)) \

175 
	`sk_£t_cmp_func
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_SK_CMP_FUNC
Ñy³, 
cmp
)))

	)

176 
	#SKM_sk_dup
(
ty³
, 
¡
) \

177 (
	`STACK_OF
(
ty³
è*)
	`sk_dup
(
	`CHECKED_STACK_OF
Ñy³, 
¡
))

	)

178 
	#SKM_sk_pİ_ä“
(
ty³
, 
¡
, 
ä“_func
) \

179 
	`sk_pİ_ä“
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
	`CHECKED_SK_FREE_FUNC
Ñy³, 
ä“_func
))

	)

180 
	#SKM_sk_d“p_cİy
(
ty³
, 
¡
, 
cİy_func
, 
ä“_func
) \

181 (
	`STACK_OF
(
ty³
è*)
	`sk_d“p_cİy
(
	`CHECKED_STACK_OF
Ñy³, 
¡
), 
	`CHECKED_SK_COPY_FUNC
Ñy³, 
cİy_func
), 
	`CHECKED_SK_FREE_FUNC
Ñy³, 
ä“_func
))

	)

182 
	#SKM_sk_shiá
(
ty³
, 
¡
) \

183 (
ty³
 *)
	`sk_shiá
(
	`CHECKED_STACK_OF
Ñy³, 
¡
))

	)

184 
	#SKM_sk_pİ
(
ty³
, 
¡
) \

185 (
ty³
 *)
	`sk_pİ
(
	`CHECKED_STACK_OF
Ñy³, 
¡
))

	)

186 
	#SKM_sk_sÜt
(
ty³
, 
¡
) \

187 
	`sk_sÜt
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
))

	)

188 
	#SKM_sk_is_sÜ‹d
(
ty³
, 
¡
) \

189 
	`sk_is_sÜ‹d
(
	`CHECKED_STACK_OF
(
ty³
, 
¡
))

	)

190 
	#SKM_ASN1_SET_OF_d2i
(
ty³
, 
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

191 (
	`STACK_OF
(
ty³
è*)
	`d2i_ASN1_SET
( \

192 (
	`STACK_OF
(
OPENSSL_BLOCK
è**)
	`CHECKED_PTR_OF
(STACK_OF(
ty³
)*, 
¡
), \

193 
µ
, 
Ëngth
, \

194 
	`CHECKED_D2I_OF
(
ty³
, 
d2i_func
), \

195 
	`CHECKED_SK_FREE_FUNC
(
ty³
, 
ä“_func
), \

196 
ex_g
, 
ex_şass
)

	)

197 
	#SKM_ASN1_SET_OF_i2d
(
ty³
, 
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

198 
	`i2d_ASN1_SET
((
	`STACK_OF
(
OPENSSL_BLOCK
è*)
	`CHECKED_STACK_OF
(
ty³
, 
¡
), 
µ
, \

199 
	`CHECKED_I2D_OF
(
ty³
, 
i2d_func
), \

200 
ex_g
, 
ex_şass
, 
is_£t
)

	)

201 
	#SKM_ASN1_£q_·ck
(
ty³
, 
¡
, 
i2d_func
, 
buf
, 
Ën
) \

202 
	`ASN1_£q_·ck
(
	`CHECKED_PTR_OF
(
	`STACK_OF
(
ty³
), 
¡
), \

203 
	`CHECKED_I2D_OF
(
ty³
, 
i2d_func
), 
buf
, 
Ën
)

	)

204 
	#SKM_ASN1_£q_uÅack
(
ty³
, 
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

205 (
	`STACK_OF
(
ty³
è*)
	`ASN1_£q_uÅack
(
buf
, 
Ën
, 
	`CHECKED_D2I_OF
Ñy³, 
d2i_func
), 
	`CHECKED_SK_FREE_FUNC
Ñy³, 
ä“_func
))

	)

206 
	#SKM_PKCS12_deüy±_d2i
(
ty³
, 
®gÜ
, 
d2i_func
, 
ä“_func
, 
·ss
, 
·s¦’
, 
où
, 
£q
) \

207 (
	`STACK_OF
(
ty³
è*)
	`PKCS12_deüy±_d2i
(
®gÜ
, \

208 
	`CHECKED_D2I_OF
(
ty³
, 
d2i_func
), \

209 
	`CHECKED_SK_FREE_FUNC
(
ty³
, 
ä“_func
), \

210 
·ss
, 
·s¦’
, 
où
, 
£q
)

	)

214 
	#sk_ACCESS_DESCRIPTION_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ACCESS_DESCRIPTION
, (cmp))

	)

215 
	#sk_ACCESS_DESCRIPTION_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ACCESS_DESCRIPTION
)

	)

216 
	#sk_ACCESS_DESCRIPTION_ä“
(
¡
è
	`SKM_sk_ä“
(
ACCESS_DESCRIPTION
, (¡))

	)

217 
	#sk_ACCESS_DESCRIPTION_num
(
¡
è
	`SKM_sk_num
(
ACCESS_DESCRIPTION
, (¡))

	)

218 
	#sk_ACCESS_DESCRIPTION_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ACCESS_DESCRIPTION
, (¡), (i))

	)

219 
	#sk_ACCESS_DESCRIPTION_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ACCESS_DESCRIPTION
, (¡), (i), (v®))

	)

220 
	#sk_ACCESS_DESCRIPTION_z”o
(
¡
è
	`SKM_sk_z”o
(
ACCESS_DESCRIPTION
, (¡))

	)

221 
	#sk_ACCESS_DESCRIPTION_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ACCESS_DESCRIPTION
, (¡), (v®))

	)

222 
	#sk_ACCESS_DESCRIPTION_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ACCESS_DESCRIPTION
, (¡), (v®))

	)

223 
	#sk_ACCESS_DESCRIPTION_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ACCESS_DESCRIPTION
, (¡), (v®))

	)

224 
	#sk_ACCESS_DESCRIPTION_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ACCESS_DESCRIPTION
, (¡), (v®))

	)

225 
	#sk_ACCESS_DESCRIPTION_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ACCESS_DESCRIPTION
, (¡), (i))

	)

226 
	#sk_ACCESS_DESCRIPTION_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ACCESS_DESCRIPTION
, (¡), (±r))

	)

227 
	#sk_ACCESS_DESCRIPTION_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ACCESS_DESCRIPTION
, (¡), (v®), (i))

	)

228 
	#sk_ACCESS_DESCRIPTION_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ACCESS_DESCRIPTION
, (¡), (cmp))

	)

229 
	#sk_ACCESS_DESCRIPTION_dup
(
¡
è
	`SKM_sk_dup
(
ACCESS_DESCRIPTION
, st)

	)

230 
	#sk_ACCESS_DESCRIPTION_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ACCESS_DESCRIPTION
, (¡), (ä“_func))

	)

231 
	#sk_ACCESS_DESCRIPTION_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ACCESS_DESCRIPTION
, (¡), (cİy_func), (ä“_func))

	)

232 
	#sk_ACCESS_DESCRIPTION_shiá
(
¡
è
	`SKM_sk_shiá
(
ACCESS_DESCRIPTION
, (¡))

	)

233 
	#sk_ACCESS_DESCRIPTION_pİ
(
¡
è
	`SKM_sk_pİ
(
ACCESS_DESCRIPTION
, (¡))

	)

234 
	#sk_ACCESS_DESCRIPTION_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ACCESS_DESCRIPTION
, (¡))

	)

235 
	#sk_ACCESS_DESCRIPTION_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ACCESS_DESCRIPTION
, (¡))

	)

236 
	#sk_ASIdOrRªge_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASIdOrRªge
, (cmp))

	)

237 
	#sk_ASIdOrRªge_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASIdOrRªge
)

	)

238 
	#sk_ASIdOrRªge_ä“
(
¡
è
	`SKM_sk_ä“
(
ASIdOrRªge
, (¡))

	)

239 
	#sk_ASIdOrRªge_num
(
¡
è
	`SKM_sk_num
(
ASIdOrRªge
, (¡))

	)

240 
	#sk_ASIdOrRªge_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASIdOrRªge
, (¡), (i))

	)

241 
	#sk_ASIdOrRªge_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASIdOrRªge
, (¡), (i), (v®))

	)

242 
	#sk_ASIdOrRªge_z”o
(
¡
è
	`SKM_sk_z”o
(
ASIdOrRªge
, (¡))

	)

243 
	#sk_ASIdOrRªge_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASIdOrRªge
, (¡), (v®))

	)

244 
	#sk_ASIdOrRªge_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASIdOrRªge
, (¡), (v®))

	)

245 
	#sk_ASIdOrRªge_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASIdOrRªge
, (¡), (v®))

	)

246 
	#sk_ASIdOrRªge_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASIdOrRªge
, (¡), (v®))

	)

247 
	#sk_ASIdOrRªge_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASIdOrRªge
, (¡), (i))

	)

248 
	#sk_ASIdOrRªge_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASIdOrRªge
, (¡), (±r))

	)

249 
	#sk_ASIdOrRªge_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASIdOrRªge
, (¡), (v®), (i))

	)

250 
	#sk_ASIdOrRªge_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASIdOrRªge
, (¡), (cmp))

	)

251 
	#sk_ASIdOrRªge_dup
(
¡
è
	`SKM_sk_dup
(
ASIdOrRªge
, st)

	)

252 
	#sk_ASIdOrRªge_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASIdOrRªge
, (¡), (ä“_func))

	)

253 
	#sk_ASIdOrRªge_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASIdOrRªge
, (¡), (cİy_func), (ä“_func))

	)

254 
	#sk_ASIdOrRªge_shiá
(
¡
è
	`SKM_sk_shiá
(
ASIdOrRªge
, (¡))

	)

255 
	#sk_ASIdOrRªge_pİ
(
¡
è
	`SKM_sk_pİ
(
ASIdOrRªge
, (¡))

	)

256 
	#sk_ASIdOrRªge_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASIdOrRªge
, (¡))

	)

257 
	#sk_ASIdOrRªge_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASIdOrRªge
, (¡))

	)

258 
	#sk_ASN1_GENERALSTRING_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_GENERALSTRING
, (cmp))

	)

259 
	#sk_ASN1_GENERALSTRING_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_GENERALSTRING
)

	)

260 
	#sk_ASN1_GENERALSTRING_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_GENERALSTRING
, (¡))

	)

261 
	#sk_ASN1_GENERALSTRING_num
(
¡
è
	`SKM_sk_num
(
ASN1_GENERALSTRING
, (¡))

	)

262 
	#sk_ASN1_GENERALSTRING_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_GENERALSTRING
, (¡), (i))

	)

263 
	#sk_ASN1_GENERALSTRING_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_GENERALSTRING
, (¡), (i), (v®))

	)

264 
	#sk_ASN1_GENERALSTRING_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_GENERALSTRING
, (¡))

	)

265 
	#sk_ASN1_GENERALSTRING_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_GENERALSTRING
, (¡), (v®))

	)

266 
	#sk_ASN1_GENERALSTRING_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_GENERALSTRING
, (¡), (v®))

	)

267 
	#sk_ASN1_GENERALSTRING_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_GENERALSTRING
, (¡), (v®))

	)

268 
	#sk_ASN1_GENERALSTRING_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_GENERALSTRING
, (¡), (v®))

	)

269 
	#sk_ASN1_GENERALSTRING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_GENERALSTRING
, (¡), (i))

	)

270 
	#sk_ASN1_GENERALSTRING_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_GENERALSTRING
, (¡), (±r))

	)

271 
	#sk_ASN1_GENERALSTRING_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_GENERALSTRING
, (¡), (v®), (i))

	)

272 
	#sk_ASN1_GENERALSTRING_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_GENERALSTRING
, (¡), (cmp))

	)

273 
	#sk_ASN1_GENERALSTRING_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_GENERALSTRING
, st)

	)

274 
	#sk_ASN1_GENERALSTRING_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_GENERALSTRING
, (¡), (ä“_func))

	)

275 
	#sk_ASN1_GENERALSTRING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_GENERALSTRING
, (¡), (cİy_func), (ä“_func))

	)

276 
	#sk_ASN1_GENERALSTRING_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_GENERALSTRING
, (¡))

	)

277 
	#sk_ASN1_GENERALSTRING_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_GENERALSTRING
, (¡))

	)

278 
	#sk_ASN1_GENERALSTRING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_GENERALSTRING
, (¡))

	)

279 
	#sk_ASN1_GENERALSTRING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_GENERALSTRING
, (¡))

	)

280 
	#sk_ASN1_INTEGER_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_INTEGER
, (cmp))

	)

281 
	#sk_ASN1_INTEGER_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_INTEGER
)

	)

282 
	#sk_ASN1_INTEGER_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_INTEGER
, (¡))

	)

283 
	#sk_ASN1_INTEGER_num
(
¡
è
	`SKM_sk_num
(
ASN1_INTEGER
, (¡))

	)

284 
	#sk_ASN1_INTEGER_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_INTEGER
, (¡), (i))

	)

285 
	#sk_ASN1_INTEGER_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_INTEGER
, (¡), (i), (v®))

	)

286 
	#sk_ASN1_INTEGER_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_INTEGER
, (¡))

	)

287 
	#sk_ASN1_INTEGER_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_INTEGER
, (¡), (v®))

	)

288 
	#sk_ASN1_INTEGER_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_INTEGER
, (¡), (v®))

	)

289 
	#sk_ASN1_INTEGER_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_INTEGER
, (¡), (v®))

	)

290 
	#sk_ASN1_INTEGER_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_INTEGER
, (¡), (v®))

	)

291 
	#sk_ASN1_INTEGER_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_INTEGER
, (¡), (i))

	)

292 
	#sk_ASN1_INTEGER_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_INTEGER
, (¡), (±r))

	)

293 
	#sk_ASN1_INTEGER_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_INTEGER
, (¡), (v®), (i))

	)

294 
	#sk_ASN1_INTEGER_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_INTEGER
, (¡), (cmp))

	)

295 
	#sk_ASN1_INTEGER_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_INTEGER
, st)

	)

296 
	#sk_ASN1_INTEGER_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_INTEGER
, (¡), (ä“_func))

	)

297 
	#sk_ASN1_INTEGER_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_INTEGER
, (¡), (cİy_func), (ä“_func))

	)

298 
	#sk_ASN1_INTEGER_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_INTEGER
, (¡))

	)

299 
	#sk_ASN1_INTEGER_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_INTEGER
, (¡))

	)

300 
	#sk_ASN1_INTEGER_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_INTEGER
, (¡))

	)

301 
	#sk_ASN1_INTEGER_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_INTEGER
, (¡))

	)

302 
	#sk_ASN1_OBJECT_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_OBJECT
, (cmp))

	)

303 
	#sk_ASN1_OBJECT_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_OBJECT
)

	)

304 
	#sk_ASN1_OBJECT_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_OBJECT
, (¡))

	)

305 
	#sk_ASN1_OBJECT_num
(
¡
è
	`SKM_sk_num
(
ASN1_OBJECT
, (¡))

	)

306 
	#sk_ASN1_OBJECT_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_OBJECT
, (¡), (i))

	)

307 
	#sk_ASN1_OBJECT_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_OBJECT
, (¡), (i), (v®))

	)

308 
	#sk_ASN1_OBJECT_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_OBJECT
, (¡))

	)

309 
	#sk_ASN1_OBJECT_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_OBJECT
, (¡), (v®))

	)

310 
	#sk_ASN1_OBJECT_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_OBJECT
, (¡), (v®))

	)

311 
	#sk_ASN1_OBJECT_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_OBJECT
, (¡), (v®))

	)

312 
	#sk_ASN1_OBJECT_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_OBJECT
, (¡), (v®))

	)

313 
	#sk_ASN1_OBJECT_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_OBJECT
, (¡), (i))

	)

314 
	#sk_ASN1_OBJECT_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_OBJECT
, (¡), (±r))

	)

315 
	#sk_ASN1_OBJECT_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_OBJECT
, (¡), (v®), (i))

	)

316 
	#sk_ASN1_OBJECT_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_OBJECT
, (¡), (cmp))

	)

317 
	#sk_ASN1_OBJECT_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_OBJECT
, st)

	)

318 
	#sk_ASN1_OBJECT_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_OBJECT
, (¡), (ä“_func))

	)

319 
	#sk_ASN1_OBJECT_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_OBJECT
, (¡), (cİy_func), (ä“_func))

	)

320 
	#sk_ASN1_OBJECT_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_OBJECT
, (¡))

	)

321 
	#sk_ASN1_OBJECT_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_OBJECT
, (¡))

	)

322 
	#sk_ASN1_OBJECT_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_OBJECT
, (¡))

	)

323 
	#sk_ASN1_OBJECT_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_OBJECT
, (¡))

	)

324 
	#sk_ASN1_STRING_TABLE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_STRING_TABLE
, (cmp))

	)

325 
	#sk_ASN1_STRING_TABLE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_STRING_TABLE
)

	)

326 
	#sk_ASN1_STRING_TABLE_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_STRING_TABLE
, (¡))

	)

327 
	#sk_ASN1_STRING_TABLE_num
(
¡
è
	`SKM_sk_num
(
ASN1_STRING_TABLE
, (¡))

	)

328 
	#sk_ASN1_STRING_TABLE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_STRING_TABLE
, (¡), (i))

	)

329 
	#sk_ASN1_STRING_TABLE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_STRING_TABLE
, (¡), (i), (v®))

	)

330 
	#sk_ASN1_STRING_TABLE_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_STRING_TABLE
, (¡))

	)

331 
	#sk_ASN1_STRING_TABLE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_STRING_TABLE
, (¡), (v®))

	)

332 
	#sk_ASN1_STRING_TABLE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_STRING_TABLE
, (¡), (v®))

	)

333 
	#sk_ASN1_STRING_TABLE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_STRING_TABLE
, (¡), (v®))

	)

334 
	#sk_ASN1_STRING_TABLE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_STRING_TABLE
, (¡), (v®))

	)

335 
	#sk_ASN1_STRING_TABLE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_STRING_TABLE
, (¡), (i))

	)

336 
	#sk_ASN1_STRING_TABLE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_STRING_TABLE
, (¡), (±r))

	)

337 
	#sk_ASN1_STRING_TABLE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_STRING_TABLE
, (¡), (v®), (i))

	)

338 
	#sk_ASN1_STRING_TABLE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_STRING_TABLE
, (¡), (cmp))

	)

339 
	#sk_ASN1_STRING_TABLE_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_STRING_TABLE
, st)

	)

340 
	#sk_ASN1_STRING_TABLE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_STRING_TABLE
, (¡), (ä“_func))

	)

341 
	#sk_ASN1_STRING_TABLE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_STRING_TABLE
, (¡), (cİy_func), (ä“_func))

	)

342 
	#sk_ASN1_STRING_TABLE_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_STRING_TABLE
, (¡))

	)

343 
	#sk_ASN1_STRING_TABLE_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_STRING_TABLE
, (¡))

	)

344 
	#sk_ASN1_STRING_TABLE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_STRING_TABLE
, (¡))

	)

345 
	#sk_ASN1_STRING_TABLE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_STRING_TABLE
, (¡))

	)

346 
	#sk_ASN1_TYPE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_TYPE
, (cmp))

	)

347 
	#sk_ASN1_TYPE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_TYPE
)

	)

348 
	#sk_ASN1_TYPE_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_TYPE
, (¡))

	)

349 
	#sk_ASN1_TYPE_num
(
¡
è
	`SKM_sk_num
(
ASN1_TYPE
, (¡))

	)

350 
	#sk_ASN1_TYPE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_TYPE
, (¡), (i))

	)

351 
	#sk_ASN1_TYPE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_TYPE
, (¡), (i), (v®))

	)

352 
	#sk_ASN1_TYPE_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_TYPE
, (¡))

	)

353 
	#sk_ASN1_TYPE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_TYPE
, (¡), (v®))

	)

354 
	#sk_ASN1_TYPE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_TYPE
, (¡), (v®))

	)

355 
	#sk_ASN1_TYPE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_TYPE
, (¡), (v®))

	)

356 
	#sk_ASN1_TYPE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_TYPE
, (¡), (v®))

	)

357 
	#sk_ASN1_TYPE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_TYPE
, (¡), (i))

	)

358 
	#sk_ASN1_TYPE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_TYPE
, (¡), (±r))

	)

359 
	#sk_ASN1_TYPE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_TYPE
, (¡), (v®), (i))

	)

360 
	#sk_ASN1_TYPE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_TYPE
, (¡), (cmp))

	)

361 
	#sk_ASN1_TYPE_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_TYPE
, st)

	)

362 
	#sk_ASN1_TYPE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_TYPE
, (¡), (ä“_func))

	)

363 
	#sk_ASN1_TYPE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_TYPE
, (¡), (cİy_func), (ä“_func))

	)

364 
	#sk_ASN1_TYPE_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_TYPE
, (¡))

	)

365 
	#sk_ASN1_TYPE_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_TYPE
, (¡))

	)

366 
	#sk_ASN1_TYPE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_TYPE
, (¡))

	)

367 
	#sk_ASN1_TYPE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_TYPE
, (¡))

	)

368 
	#sk_ASN1_UTF8STRING_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_UTF8STRING
, (cmp))

	)

369 
	#sk_ASN1_UTF8STRING_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_UTF8STRING
)

	)

370 
	#sk_ASN1_UTF8STRING_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_UTF8STRING
, (¡))

	)

371 
	#sk_ASN1_UTF8STRING_num
(
¡
è
	`SKM_sk_num
(
ASN1_UTF8STRING
, (¡))

	)

372 
	#sk_ASN1_UTF8STRING_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_UTF8STRING
, (¡), (i))

	)

373 
	#sk_ASN1_UTF8STRING_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_UTF8STRING
, (¡), (i), (v®))

	)

374 
	#sk_ASN1_UTF8STRING_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_UTF8STRING
, (¡))

	)

375 
	#sk_ASN1_UTF8STRING_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_UTF8STRING
, (¡), (v®))

	)

376 
	#sk_ASN1_UTF8STRING_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_UTF8STRING
, (¡), (v®))

	)

377 
	#sk_ASN1_UTF8STRING_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_UTF8STRING
, (¡), (v®))

	)

378 
	#sk_ASN1_UTF8STRING_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_UTF8STRING
, (¡), (v®))

	)

379 
	#sk_ASN1_UTF8STRING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_UTF8STRING
, (¡), (i))

	)

380 
	#sk_ASN1_UTF8STRING_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_UTF8STRING
, (¡), (±r))

	)

381 
	#sk_ASN1_UTF8STRING_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_UTF8STRING
, (¡), (v®), (i))

	)

382 
	#sk_ASN1_UTF8STRING_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_UTF8STRING
, (¡), (cmp))

	)

383 
	#sk_ASN1_UTF8STRING_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_UTF8STRING
, st)

	)

384 
	#sk_ASN1_UTF8STRING_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_UTF8STRING
, (¡), (ä“_func))

	)

385 
	#sk_ASN1_UTF8STRING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_UTF8STRING
, (¡), (cİy_func), (ä“_func))

	)

386 
	#sk_ASN1_UTF8STRING_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_UTF8STRING
, (¡))

	)

387 
	#sk_ASN1_UTF8STRING_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_UTF8STRING
, (¡))

	)

388 
	#sk_ASN1_UTF8STRING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_UTF8STRING
, (¡))

	)

389 
	#sk_ASN1_UTF8STRING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_UTF8STRING
, (¡))

	)

390 
	#sk_ASN1_VALUE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ASN1_VALUE
, (cmp))

	)

391 
	#sk_ASN1_VALUE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ASN1_VALUE
)

	)

392 
	#sk_ASN1_VALUE_ä“
(
¡
è
	`SKM_sk_ä“
(
ASN1_VALUE
, (¡))

	)

393 
	#sk_ASN1_VALUE_num
(
¡
è
	`SKM_sk_num
(
ASN1_VALUE
, (¡))

	)

394 
	#sk_ASN1_VALUE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ASN1_VALUE
, (¡), (i))

	)

395 
	#sk_ASN1_VALUE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ASN1_VALUE
, (¡), (i), (v®))

	)

396 
	#sk_ASN1_VALUE_z”o
(
¡
è
	`SKM_sk_z”o
(
ASN1_VALUE
, (¡))

	)

397 
	#sk_ASN1_VALUE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ASN1_VALUE
, (¡), (v®))

	)

398 
	#sk_ASN1_VALUE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ASN1_VALUE
, (¡), (v®))

	)

399 
	#sk_ASN1_VALUE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ASN1_VALUE
, (¡), (v®))

	)

400 
	#sk_ASN1_VALUE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ASN1_VALUE
, (¡), (v®))

	)

401 
	#sk_ASN1_VALUE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ASN1_VALUE
, (¡), (i))

	)

402 
	#sk_ASN1_VALUE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ASN1_VALUE
, (¡), (±r))

	)

403 
	#sk_ASN1_VALUE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ASN1_VALUE
, (¡), (v®), (i))

	)

404 
	#sk_ASN1_VALUE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ASN1_VALUE
, (¡), (cmp))

	)

405 
	#sk_ASN1_VALUE_dup
(
¡
è
	`SKM_sk_dup
(
ASN1_VALUE
, st)

	)

406 
	#sk_ASN1_VALUE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ASN1_VALUE
, (¡), (ä“_func))

	)

407 
	#sk_ASN1_VALUE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ASN1_VALUE
, (¡), (cİy_func), (ä“_func))

	)

408 
	#sk_ASN1_VALUE_shiá
(
¡
è
	`SKM_sk_shiá
(
ASN1_VALUE
, (¡))

	)

409 
	#sk_ASN1_VALUE_pİ
(
¡
è
	`SKM_sk_pİ
(
ASN1_VALUE
, (¡))

	)

410 
	#sk_ASN1_VALUE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ASN1_VALUE
, (¡))

	)

411 
	#sk_ASN1_VALUE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ASN1_VALUE
, (¡))

	)

412 
	#sk_BIO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
BIO
, (cmp))

	)

413 
	#sk_BIO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
BIO
)

	)

414 
	#sk_BIO_ä“
(
¡
è
	`SKM_sk_ä“
(
BIO
, (¡))

	)

415 
	#sk_BIO_num
(
¡
è
	`SKM_sk_num
(
BIO
, (¡))

	)

416 
	#sk_BIO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
BIO
, (¡), (i))

	)

417 
	#sk_BIO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
BIO
, (¡), (i), (v®))

	)

418 
	#sk_BIO_z”o
(
¡
è
	`SKM_sk_z”o
(
BIO
, (¡))

	)

419 
	#sk_BIO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
BIO
, (¡), (v®))

	)

420 
	#sk_BIO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
BIO
, (¡), (v®))

	)

421 
	#sk_BIO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
BIO
, (¡), (v®))

	)

422 
	#sk_BIO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
BIO
, (¡), (v®))

	)

423 
	#sk_BIO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
BIO
, (¡), (i))

	)

424 
	#sk_BIO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
BIO
, (¡), (±r))

	)

425 
	#sk_BIO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
BIO
, (¡), (v®), (i))

	)

426 
	#sk_BIO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
BIO
, (¡), (cmp))

	)

427 
	#sk_BIO_dup
(
¡
è
	`SKM_sk_dup
(
BIO
, st)

	)

428 
	#sk_BIO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
BIO
, (¡), (ä“_func))

	)

429 
	#sk_BIO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
BIO
, (¡), (cİy_func), (ä“_func))

	)

430 
	#sk_BIO_shiá
(
¡
è
	`SKM_sk_shiá
(
BIO
, (¡))

	)

431 
	#sk_BIO_pİ
(
¡
è
	`SKM_sk_pİ
(
BIO
, (¡))

	)

432 
	#sk_BIO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
BIO
, (¡))

	)

433 
	#sk_BIO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
BIO
, (¡))

	)

434 
	#sk_BY_DIR_ENTRY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
BY_DIR_ENTRY
, (cmp))

	)

435 
	#sk_BY_DIR_ENTRY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
BY_DIR_ENTRY
)

	)

436 
	#sk_BY_DIR_ENTRY_ä“
(
¡
è
	`SKM_sk_ä“
(
BY_DIR_ENTRY
, (¡))

	)

437 
	#sk_BY_DIR_ENTRY_num
(
¡
è
	`SKM_sk_num
(
BY_DIR_ENTRY
, (¡))

	)

438 
	#sk_BY_DIR_ENTRY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
BY_DIR_ENTRY
, (¡), (i))

	)

439 
	#sk_BY_DIR_ENTRY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
BY_DIR_ENTRY
, (¡), (i), (v®))

	)

440 
	#sk_BY_DIR_ENTRY_z”o
(
¡
è
	`SKM_sk_z”o
(
BY_DIR_ENTRY
, (¡))

	)

441 
	#sk_BY_DIR_ENTRY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
BY_DIR_ENTRY
, (¡), (v®))

	)

442 
	#sk_BY_DIR_ENTRY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
BY_DIR_ENTRY
, (¡), (v®))

	)

443 
	#sk_BY_DIR_ENTRY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
BY_DIR_ENTRY
, (¡), (v®))

	)

444 
	#sk_BY_DIR_ENTRY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
BY_DIR_ENTRY
, (¡), (v®))

	)

445 
	#sk_BY_DIR_ENTRY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
BY_DIR_ENTRY
, (¡), (i))

	)

446 
	#sk_BY_DIR_ENTRY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
BY_DIR_ENTRY
, (¡), (±r))

	)

447 
	#sk_BY_DIR_ENTRY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
BY_DIR_ENTRY
, (¡), (v®), (i))

	)

448 
	#sk_BY_DIR_ENTRY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
BY_DIR_ENTRY
, (¡), (cmp))

	)

449 
	#sk_BY_DIR_ENTRY_dup
(
¡
è
	`SKM_sk_dup
(
BY_DIR_ENTRY
, st)

	)

450 
	#sk_BY_DIR_ENTRY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
BY_DIR_ENTRY
, (¡), (ä“_func))

	)

451 
	#sk_BY_DIR_ENTRY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
BY_DIR_ENTRY
, (¡), (cİy_func), (ä“_func))

	)

452 
	#sk_BY_DIR_ENTRY_shiá
(
¡
è
	`SKM_sk_shiá
(
BY_DIR_ENTRY
, (¡))

	)

453 
	#sk_BY_DIR_ENTRY_pİ
(
¡
è
	`SKM_sk_pİ
(
BY_DIR_ENTRY
, (¡))

	)

454 
	#sk_BY_DIR_ENTRY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
BY_DIR_ENTRY
, (¡))

	)

455 
	#sk_BY_DIR_ENTRY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
BY_DIR_ENTRY
, (¡))

	)

456 
	#sk_BY_DIR_HASH_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
BY_DIR_HASH
, (cmp))

	)

457 
	#sk_BY_DIR_HASH_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
BY_DIR_HASH
)

	)

458 
	#sk_BY_DIR_HASH_ä“
(
¡
è
	`SKM_sk_ä“
(
BY_DIR_HASH
, (¡))

	)

459 
	#sk_BY_DIR_HASH_num
(
¡
è
	`SKM_sk_num
(
BY_DIR_HASH
, (¡))

	)

460 
	#sk_BY_DIR_HASH_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
BY_DIR_HASH
, (¡), (i))

	)

461 
	#sk_BY_DIR_HASH_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
BY_DIR_HASH
, (¡), (i), (v®))

	)

462 
	#sk_BY_DIR_HASH_z”o
(
¡
è
	`SKM_sk_z”o
(
BY_DIR_HASH
, (¡))

	)

463 
	#sk_BY_DIR_HASH_push
(
¡
, 
v®
è
	`SKM_sk_push
(
BY_DIR_HASH
, (¡), (v®))

	)

464 
	#sk_BY_DIR_HASH_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
BY_DIR_HASH
, (¡), (v®))

	)

465 
	#sk_BY_DIR_HASH_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
BY_DIR_HASH
, (¡), (v®))

	)

466 
	#sk_BY_DIR_HASH_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
BY_DIR_HASH
, (¡), (v®))

	)

467 
	#sk_BY_DIR_HASH_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
BY_DIR_HASH
, (¡), (i))

	)

468 
	#sk_BY_DIR_HASH_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
BY_DIR_HASH
, (¡), (±r))

	)

469 
	#sk_BY_DIR_HASH_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
BY_DIR_HASH
, (¡), (v®), (i))

	)

470 
	#sk_BY_DIR_HASH_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
BY_DIR_HASH
, (¡), (cmp))

	)

471 
	#sk_BY_DIR_HASH_dup
(
¡
è
	`SKM_sk_dup
(
BY_DIR_HASH
, st)

	)

472 
	#sk_BY_DIR_HASH_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
BY_DIR_HASH
, (¡), (ä“_func))

	)

473 
	#sk_BY_DIR_HASH_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
BY_DIR_HASH
, (¡), (cİy_func), (ä“_func))

	)

474 
	#sk_BY_DIR_HASH_shiá
(
¡
è
	`SKM_sk_shiá
(
BY_DIR_HASH
, (¡))

	)

475 
	#sk_BY_DIR_HASH_pİ
(
¡
è
	`SKM_sk_pİ
(
BY_DIR_HASH
, (¡))

	)

476 
	#sk_BY_DIR_HASH_sÜt
(
¡
è
	`SKM_sk_sÜt
(
BY_DIR_HASH
, (¡))

	)

477 
	#sk_BY_DIR_HASH_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
BY_DIR_HASH
, (¡))

	)

478 
	#sk_CMS_C”tifiÿ‹Choiûs_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CMS_C”tifiÿ‹Choiûs
, (cmp))

	)

479 
	#sk_CMS_C”tifiÿ‹Choiûs_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CMS_C”tifiÿ‹Choiûs
)

	)

480 
	#sk_CMS_C”tifiÿ‹Choiûs_ä“
(
¡
è
	`SKM_sk_ä“
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

481 
	#sk_CMS_C”tifiÿ‹Choiûs_num
(
¡
è
	`SKM_sk_num
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

482 
	#sk_CMS_C”tifiÿ‹Choiûs_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CMS_C”tifiÿ‹Choiûs
, (¡), (i))

	)

483 
	#sk_CMS_C”tifiÿ‹Choiûs_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CMS_C”tifiÿ‹Choiûs
, (¡), (i), (v®))

	)

484 
	#sk_CMS_C”tifiÿ‹Choiûs_z”o
(
¡
è
	`SKM_sk_z”o
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

485 
	#sk_CMS_C”tifiÿ‹Choiûs_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CMS_C”tifiÿ‹Choiûs
, (¡), (v®))

	)

486 
	#sk_CMS_C”tifiÿ‹Choiûs_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CMS_C”tifiÿ‹Choiûs
, (¡), (v®))

	)

487 
	#sk_CMS_C”tifiÿ‹Choiûs_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CMS_C”tifiÿ‹Choiûs
, (¡), (v®))

	)

488 
	#sk_CMS_C”tifiÿ‹Choiûs_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CMS_C”tifiÿ‹Choiûs
, (¡), (v®))

	)

489 
	#sk_CMS_C”tifiÿ‹Choiûs_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CMS_C”tifiÿ‹Choiûs
, (¡), (i))

	)

490 
	#sk_CMS_C”tifiÿ‹Choiûs_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CMS_C”tifiÿ‹Choiûs
, (¡), (±r))

	)

491 
	#sk_CMS_C”tifiÿ‹Choiûs_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CMS_C”tifiÿ‹Choiûs
, (¡), (v®), (i))

	)

492 
	#sk_CMS_C”tifiÿ‹Choiûs_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CMS_C”tifiÿ‹Choiûs
, (¡), (cmp))

	)

493 
	#sk_CMS_C”tifiÿ‹Choiûs_dup
(
¡
è
	`SKM_sk_dup
(
CMS_C”tifiÿ‹Choiûs
, st)

	)

494 
	#sk_CMS_C”tifiÿ‹Choiûs_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CMS_C”tifiÿ‹Choiûs
, (¡), (ä“_func))

	)

495 
	#sk_CMS_C”tifiÿ‹Choiûs_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CMS_C”tifiÿ‹Choiûs
, (¡), (cİy_func), (ä“_func))

	)

496 
	#sk_CMS_C”tifiÿ‹Choiûs_shiá
(
¡
è
	`SKM_sk_shiá
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

497 
	#sk_CMS_C”tifiÿ‹Choiûs_pİ
(
¡
è
	`SKM_sk_pİ
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

498 
	#sk_CMS_C”tifiÿ‹Choiûs_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

499 
	#sk_CMS_C”tifiÿ‹Choiûs_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CMS_C”tifiÿ‹Choiûs
, (¡))

	)

500 
	#sk_CMS_Rec›ÁEnüy±edKey_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CMS_Rec›ÁEnüy±edKey
, (cmp))

	)

501 
	#sk_CMS_Rec›ÁEnüy±edKey_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CMS_Rec›ÁEnüy±edKey
)

	)

502 
	#sk_CMS_Rec›ÁEnüy±edKey_ä“
(
¡
è
	`SKM_sk_ä“
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

503 
	#sk_CMS_Rec›ÁEnüy±edKey_num
(
¡
è
	`SKM_sk_num
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

504 
	#sk_CMS_Rec›ÁEnüy±edKey_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CMS_Rec›ÁEnüy±edKey
, (¡), (i))

	)

505 
	#sk_CMS_Rec›ÁEnüy±edKey_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CMS_Rec›ÁEnüy±edKey
, (¡), (i), (v®))

	)

506 
	#sk_CMS_Rec›ÁEnüy±edKey_z”o
(
¡
è
	`SKM_sk_z”o
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

507 
	#sk_CMS_Rec›ÁEnüy±edKey_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CMS_Rec›ÁEnüy±edKey
, (¡), (v®))

	)

508 
	#sk_CMS_Rec›ÁEnüy±edKey_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CMS_Rec›ÁEnüy±edKey
, (¡), (v®))

	)

509 
	#sk_CMS_Rec›ÁEnüy±edKey_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CMS_Rec›ÁEnüy±edKey
, (¡), (v®))

	)

510 
	#sk_CMS_Rec›ÁEnüy±edKey_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CMS_Rec›ÁEnüy±edKey
, (¡), (v®))

	)

511 
	#sk_CMS_Rec›ÁEnüy±edKey_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CMS_Rec›ÁEnüy±edKey
, (¡), (i))

	)

512 
	#sk_CMS_Rec›ÁEnüy±edKey_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CMS_Rec›ÁEnüy±edKey
, (¡), (±r))

	)

513 
	#sk_CMS_Rec›ÁEnüy±edKey_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CMS_Rec›ÁEnüy±edKey
, (¡), (v®), (i))

	)

514 
	#sk_CMS_Rec›ÁEnüy±edKey_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CMS_Rec›ÁEnüy±edKey
, (¡), (cmp))

	)

515 
	#sk_CMS_Rec›ÁEnüy±edKey_dup
(
¡
è
	`SKM_sk_dup
(
CMS_Rec›ÁEnüy±edKey
, st)

	)

516 
	#sk_CMS_Rec›ÁEnüy±edKey_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CMS_Rec›ÁEnüy±edKey
, (¡), (ä“_func))

	)

517 
	#sk_CMS_Rec›ÁEnüy±edKey_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CMS_Rec›ÁEnüy±edKey
, (¡), (cİy_func), (ä“_func))

	)

518 
	#sk_CMS_Rec›ÁEnüy±edKey_shiá
(
¡
è
	`SKM_sk_shiá
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

519 
	#sk_CMS_Rec›ÁEnüy±edKey_pİ
(
¡
è
	`SKM_sk_pİ
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

520 
	#sk_CMS_Rec›ÁEnüy±edKey_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

521 
	#sk_CMS_Rec›ÁEnüy±edKey_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CMS_Rec›ÁEnüy±edKey
, (¡))

	)

522 
	#sk_CMS_Rec›ÁInfo_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CMS_Rec›ÁInfo
, (cmp))

	)

523 
	#sk_CMS_Rec›ÁInfo_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CMS_Rec›ÁInfo
)

	)

524 
	#sk_CMS_Rec›ÁInfo_ä“
(
¡
è
	`SKM_sk_ä“
(
CMS_Rec›ÁInfo
, (¡))

	)

525 
	#sk_CMS_Rec›ÁInfo_num
(
¡
è
	`SKM_sk_num
(
CMS_Rec›ÁInfo
, (¡))

	)

526 
	#sk_CMS_Rec›ÁInfo_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CMS_Rec›ÁInfo
, (¡), (i))

	)

527 
	#sk_CMS_Rec›ÁInfo_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CMS_Rec›ÁInfo
, (¡), (i), (v®))

	)

528 
	#sk_CMS_Rec›ÁInfo_z”o
(
¡
è
	`SKM_sk_z”o
(
CMS_Rec›ÁInfo
, (¡))

	)

529 
	#sk_CMS_Rec›ÁInfo_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CMS_Rec›ÁInfo
, (¡), (v®))

	)

530 
	#sk_CMS_Rec›ÁInfo_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CMS_Rec›ÁInfo
, (¡), (v®))

	)

531 
	#sk_CMS_Rec›ÁInfo_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CMS_Rec›ÁInfo
, (¡), (v®))

	)

532 
	#sk_CMS_Rec›ÁInfo_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CMS_Rec›ÁInfo
, (¡), (v®))

	)

533 
	#sk_CMS_Rec›ÁInfo_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CMS_Rec›ÁInfo
, (¡), (i))

	)

534 
	#sk_CMS_Rec›ÁInfo_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CMS_Rec›ÁInfo
, (¡), (±r))

	)

535 
	#sk_CMS_Rec›ÁInfo_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CMS_Rec›ÁInfo
, (¡), (v®), (i))

	)

536 
	#sk_CMS_Rec›ÁInfo_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CMS_Rec›ÁInfo
, (¡), (cmp))

	)

537 
	#sk_CMS_Rec›ÁInfo_dup
(
¡
è
	`SKM_sk_dup
(
CMS_Rec›ÁInfo
, st)

	)

538 
	#sk_CMS_Rec›ÁInfo_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CMS_Rec›ÁInfo
, (¡), (ä“_func))

	)

539 
	#sk_CMS_Rec›ÁInfo_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CMS_Rec›ÁInfo
, (¡), (cİy_func), (ä“_func))

	)

540 
	#sk_CMS_Rec›ÁInfo_shiá
(
¡
è
	`SKM_sk_shiá
(
CMS_Rec›ÁInfo
, (¡))

	)

541 
	#sk_CMS_Rec›ÁInfo_pİ
(
¡
è
	`SKM_sk_pİ
(
CMS_Rec›ÁInfo
, (¡))

	)

542 
	#sk_CMS_Rec›ÁInfo_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CMS_Rec›ÁInfo
, (¡))

	)

543 
	#sk_CMS_Rec›ÁInfo_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CMS_Rec›ÁInfo
, (¡))

	)

544 
	#sk_CMS_RevoÿtiÚInfoChoiû_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CMS_RevoÿtiÚInfoChoiû
, (cmp))

	)

545 
	#sk_CMS_RevoÿtiÚInfoChoiû_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CMS_RevoÿtiÚInfoChoiû
)

	)

546 
	#sk_CMS_RevoÿtiÚInfoChoiû_ä“
(
¡
è
	`SKM_sk_ä“
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

547 
	#sk_CMS_RevoÿtiÚInfoChoiû_num
(
¡
è
	`SKM_sk_num
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

548 
	#sk_CMS_RevoÿtiÚInfoChoiû_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (i))

	)

549 
	#sk_CMS_RevoÿtiÚInfoChoiû_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (i), (v®))

	)

550 
	#sk_CMS_RevoÿtiÚInfoChoiû_z”o
(
¡
è
	`SKM_sk_z”o
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

551 
	#sk_CMS_RevoÿtiÚInfoChoiû_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (v®))

	)

552 
	#sk_CMS_RevoÿtiÚInfoChoiû_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (v®))

	)

553 
	#sk_CMS_RevoÿtiÚInfoChoiû_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (v®))

	)

554 
	#sk_CMS_RevoÿtiÚInfoChoiû_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (v®))

	)

555 
	#sk_CMS_RevoÿtiÚInfoChoiû_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (i))

	)

556 
	#sk_CMS_RevoÿtiÚInfoChoiû_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (±r))

	)

557 
	#sk_CMS_RevoÿtiÚInfoChoiû_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (v®), (i))

	)

558 
	#sk_CMS_RevoÿtiÚInfoChoiû_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (cmp))

	)

559 
	#sk_CMS_RevoÿtiÚInfoChoiû_dup
(
¡
è
	`SKM_sk_dup
(
CMS_RevoÿtiÚInfoChoiû
, st)

	)

560 
	#sk_CMS_RevoÿtiÚInfoChoiû_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (ä“_func))

	)

561 
	#sk_CMS_RevoÿtiÚInfoChoiû_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CMS_RevoÿtiÚInfoChoiû
, (¡), (cİy_func), (ä“_func))

	)

562 
	#sk_CMS_RevoÿtiÚInfoChoiû_shiá
(
¡
è
	`SKM_sk_shiá
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

563 
	#sk_CMS_RevoÿtiÚInfoChoiû_pİ
(
¡
è
	`SKM_sk_pİ
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

564 
	#sk_CMS_RevoÿtiÚInfoChoiû_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

565 
	#sk_CMS_RevoÿtiÚInfoChoiû_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CMS_RevoÿtiÚInfoChoiû
, (¡))

	)

566 
	#sk_CMS_SigÃrInfo_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CMS_SigÃrInfo
, (cmp))

	)

567 
	#sk_CMS_SigÃrInfo_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CMS_SigÃrInfo
)

	)

568 
	#sk_CMS_SigÃrInfo_ä“
(
¡
è
	`SKM_sk_ä“
(
CMS_SigÃrInfo
, (¡))

	)

569 
	#sk_CMS_SigÃrInfo_num
(
¡
è
	`SKM_sk_num
(
CMS_SigÃrInfo
, (¡))

	)

570 
	#sk_CMS_SigÃrInfo_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CMS_SigÃrInfo
, (¡), (i))

	)

571 
	#sk_CMS_SigÃrInfo_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CMS_SigÃrInfo
, (¡), (i), (v®))

	)

572 
	#sk_CMS_SigÃrInfo_z”o
(
¡
è
	`SKM_sk_z”o
(
CMS_SigÃrInfo
, (¡))

	)

573 
	#sk_CMS_SigÃrInfo_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CMS_SigÃrInfo
, (¡), (v®))

	)

574 
	#sk_CMS_SigÃrInfo_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CMS_SigÃrInfo
, (¡), (v®))

	)

575 
	#sk_CMS_SigÃrInfo_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CMS_SigÃrInfo
, (¡), (v®))

	)

576 
	#sk_CMS_SigÃrInfo_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CMS_SigÃrInfo
, (¡), (v®))

	)

577 
	#sk_CMS_SigÃrInfo_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CMS_SigÃrInfo
, (¡), (i))

	)

578 
	#sk_CMS_SigÃrInfo_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CMS_SigÃrInfo
, (¡), (±r))

	)

579 
	#sk_CMS_SigÃrInfo_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CMS_SigÃrInfo
, (¡), (v®), (i))

	)

580 
	#sk_CMS_SigÃrInfo_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CMS_SigÃrInfo
, (¡), (cmp))

	)

581 
	#sk_CMS_SigÃrInfo_dup
(
¡
è
	`SKM_sk_dup
(
CMS_SigÃrInfo
, st)

	)

582 
	#sk_CMS_SigÃrInfo_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CMS_SigÃrInfo
, (¡), (ä“_func))

	)

583 
	#sk_CMS_SigÃrInfo_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CMS_SigÃrInfo
, (¡), (cİy_func), (ä“_func))

	)

584 
	#sk_CMS_SigÃrInfo_shiá
(
¡
è
	`SKM_sk_shiá
(
CMS_SigÃrInfo
, (¡))

	)

585 
	#sk_CMS_SigÃrInfo_pİ
(
¡
è
	`SKM_sk_pİ
(
CMS_SigÃrInfo
, (¡))

	)

586 
	#sk_CMS_SigÃrInfo_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CMS_SigÃrInfo
, (¡))

	)

587 
	#sk_CMS_SigÃrInfo_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CMS_SigÃrInfo
, (¡))

	)

588 
	#sk_CONF_IMODULE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CONF_IMODULE
, (cmp))

	)

589 
	#sk_CONF_IMODULE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CONF_IMODULE
)

	)

590 
	#sk_CONF_IMODULE_ä“
(
¡
è
	`SKM_sk_ä“
(
CONF_IMODULE
, (¡))

	)

591 
	#sk_CONF_IMODULE_num
(
¡
è
	`SKM_sk_num
(
CONF_IMODULE
, (¡))

	)

592 
	#sk_CONF_IMODULE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CONF_IMODULE
, (¡), (i))

	)

593 
	#sk_CONF_IMODULE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CONF_IMODULE
, (¡), (i), (v®))

	)

594 
	#sk_CONF_IMODULE_z”o
(
¡
è
	`SKM_sk_z”o
(
CONF_IMODULE
, (¡))

	)

595 
	#sk_CONF_IMODULE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CONF_IMODULE
, (¡), (v®))

	)

596 
	#sk_CONF_IMODULE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CONF_IMODULE
, (¡), (v®))

	)

597 
	#sk_CONF_IMODULE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CONF_IMODULE
, (¡), (v®))

	)

598 
	#sk_CONF_IMODULE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CONF_IMODULE
, (¡), (v®))

	)

599 
	#sk_CONF_IMODULE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CONF_IMODULE
, (¡), (i))

	)

600 
	#sk_CONF_IMODULE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CONF_IMODULE
, (¡), (±r))

	)

601 
	#sk_CONF_IMODULE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CONF_IMODULE
, (¡), (v®), (i))

	)

602 
	#sk_CONF_IMODULE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CONF_IMODULE
, (¡), (cmp))

	)

603 
	#sk_CONF_IMODULE_dup
(
¡
è
	`SKM_sk_dup
(
CONF_IMODULE
, st)

	)

604 
	#sk_CONF_IMODULE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CONF_IMODULE
, (¡), (ä“_func))

	)

605 
	#sk_CONF_IMODULE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CONF_IMODULE
, (¡), (cİy_func), (ä“_func))

	)

606 
	#sk_CONF_IMODULE_shiá
(
¡
è
	`SKM_sk_shiá
(
CONF_IMODULE
, (¡))

	)

607 
	#sk_CONF_IMODULE_pİ
(
¡
è
	`SKM_sk_pİ
(
CONF_IMODULE
, (¡))

	)

608 
	#sk_CONF_IMODULE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CONF_IMODULE
, (¡))

	)

609 
	#sk_CONF_IMODULE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CONF_IMODULE
, (¡))

	)

610 
	#sk_CONF_MODULE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CONF_MODULE
, (cmp))

	)

611 
	#sk_CONF_MODULE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CONF_MODULE
)

	)

612 
	#sk_CONF_MODULE_ä“
(
¡
è
	`SKM_sk_ä“
(
CONF_MODULE
, (¡))

	)

613 
	#sk_CONF_MODULE_num
(
¡
è
	`SKM_sk_num
(
CONF_MODULE
, (¡))

	)

614 
	#sk_CONF_MODULE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CONF_MODULE
, (¡), (i))

	)

615 
	#sk_CONF_MODULE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CONF_MODULE
, (¡), (i), (v®))

	)

616 
	#sk_CONF_MODULE_z”o
(
¡
è
	`SKM_sk_z”o
(
CONF_MODULE
, (¡))

	)

617 
	#sk_CONF_MODULE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CONF_MODULE
, (¡), (v®))

	)

618 
	#sk_CONF_MODULE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CONF_MODULE
, (¡), (v®))

	)

619 
	#sk_CONF_MODULE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CONF_MODULE
, (¡), (v®))

	)

620 
	#sk_CONF_MODULE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CONF_MODULE
, (¡), (v®))

	)

621 
	#sk_CONF_MODULE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CONF_MODULE
, (¡), (i))

	)

622 
	#sk_CONF_MODULE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CONF_MODULE
, (¡), (±r))

	)

623 
	#sk_CONF_MODULE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CONF_MODULE
, (¡), (v®), (i))

	)

624 
	#sk_CONF_MODULE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CONF_MODULE
, (¡), (cmp))

	)

625 
	#sk_CONF_MODULE_dup
(
¡
è
	`SKM_sk_dup
(
CONF_MODULE
, st)

	)

626 
	#sk_CONF_MODULE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CONF_MODULE
, (¡), (ä“_func))

	)

627 
	#sk_CONF_MODULE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CONF_MODULE
, (¡), (cİy_func), (ä“_func))

	)

628 
	#sk_CONF_MODULE_shiá
(
¡
è
	`SKM_sk_shiá
(
CONF_MODULE
, (¡))

	)

629 
	#sk_CONF_MODULE_pİ
(
¡
è
	`SKM_sk_pİ
(
CONF_MODULE
, (¡))

	)

630 
	#sk_CONF_MODULE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CONF_MODULE
, (¡))

	)

631 
	#sk_CONF_MODULE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CONF_MODULE
, (¡))

	)

632 
	#sk_CONF_VALUE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CONF_VALUE
, (cmp))

	)

633 
	#sk_CONF_VALUE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CONF_VALUE
)

	)

634 
	#sk_CONF_VALUE_ä“
(
¡
è
	`SKM_sk_ä“
(
CONF_VALUE
, (¡))

	)

635 
	#sk_CONF_VALUE_num
(
¡
è
	`SKM_sk_num
(
CONF_VALUE
, (¡))

	)

636 
	#sk_CONF_VALUE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CONF_VALUE
, (¡), (i))

	)

637 
	#sk_CONF_VALUE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CONF_VALUE
, (¡), (i), (v®))

	)

638 
	#sk_CONF_VALUE_z”o
(
¡
è
	`SKM_sk_z”o
(
CONF_VALUE
, (¡))

	)

639 
	#sk_CONF_VALUE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CONF_VALUE
, (¡), (v®))

	)

640 
	#sk_CONF_VALUE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CONF_VALUE
, (¡), (v®))

	)

641 
	#sk_CONF_VALUE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CONF_VALUE
, (¡), (v®))

	)

642 
	#sk_CONF_VALUE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CONF_VALUE
, (¡), (v®))

	)

643 
	#sk_CONF_VALUE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CONF_VALUE
, (¡), (i))

	)

644 
	#sk_CONF_VALUE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CONF_VALUE
, (¡), (±r))

	)

645 
	#sk_CONF_VALUE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CONF_VALUE
, (¡), (v®), (i))

	)

646 
	#sk_CONF_VALUE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CONF_VALUE
, (¡), (cmp))

	)

647 
	#sk_CONF_VALUE_dup
(
¡
è
	`SKM_sk_dup
(
CONF_VALUE
, st)

	)

648 
	#sk_CONF_VALUE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CONF_VALUE
, (¡), (ä“_func))

	)

649 
	#sk_CONF_VALUE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CONF_VALUE
, (¡), (cİy_func), (ä“_func))

	)

650 
	#sk_CONF_VALUE_shiá
(
¡
è
	`SKM_sk_shiá
(
CONF_VALUE
, (¡))

	)

651 
	#sk_CONF_VALUE_pİ
(
¡
è
	`SKM_sk_pİ
(
CONF_VALUE
, (¡))

	)

652 
	#sk_CONF_VALUE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CONF_VALUE
, (¡))

	)

653 
	#sk_CONF_VALUE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CONF_VALUE
, (¡))

	)

654 
	#sk_CRYPTO_EX_DATA_FUNCS_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CRYPTO_EX_DATA_FUNCS
, (cmp))

	)

655 
	#sk_CRYPTO_EX_DATA_FUNCS_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CRYPTO_EX_DATA_FUNCS
)

	)

656 
	#sk_CRYPTO_EX_DATA_FUNCS_ä“
(
¡
è
	`SKM_sk_ä“
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

657 
	#sk_CRYPTO_EX_DATA_FUNCS_num
(
¡
è
	`SKM_sk_num
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

658 
	#sk_CRYPTO_EX_DATA_FUNCS_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CRYPTO_EX_DATA_FUNCS
, (¡), (i))

	)

659 
	#sk_CRYPTO_EX_DATA_FUNCS_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CRYPTO_EX_DATA_FUNCS
, (¡), (i), (v®))

	)

660 
	#sk_CRYPTO_EX_DATA_FUNCS_z”o
(
¡
è
	`SKM_sk_z”o
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

661 
	#sk_CRYPTO_EX_DATA_FUNCS_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CRYPTO_EX_DATA_FUNCS
, (¡), (v®))

	)

662 
	#sk_CRYPTO_EX_DATA_FUNCS_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CRYPTO_EX_DATA_FUNCS
, (¡), (v®))

	)

663 
	#sk_CRYPTO_EX_DATA_FUNCS_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CRYPTO_EX_DATA_FUNCS
, (¡), (v®))

	)

664 
	#sk_CRYPTO_EX_DATA_FUNCS_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CRYPTO_EX_DATA_FUNCS
, (¡), (v®))

	)

665 
	#sk_CRYPTO_EX_DATA_FUNCS_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CRYPTO_EX_DATA_FUNCS
, (¡), (i))

	)

666 
	#sk_CRYPTO_EX_DATA_FUNCS_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CRYPTO_EX_DATA_FUNCS
, (¡), (±r))

	)

667 
	#sk_CRYPTO_EX_DATA_FUNCS_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CRYPTO_EX_DATA_FUNCS
, (¡), (v®), (i))

	)

668 
	#sk_CRYPTO_EX_DATA_FUNCS_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CRYPTO_EX_DATA_FUNCS
, (¡), (cmp))

	)

669 
	#sk_CRYPTO_EX_DATA_FUNCS_dup
(
¡
è
	`SKM_sk_dup
(
CRYPTO_EX_DATA_FUNCS
, st)

	)

670 
	#sk_CRYPTO_EX_DATA_FUNCS_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CRYPTO_EX_DATA_FUNCS
, (¡), (ä“_func))

	)

671 
	#sk_CRYPTO_EX_DATA_FUNCS_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CRYPTO_EX_DATA_FUNCS
, (¡), (cİy_func), (ä“_func))

	)

672 
	#sk_CRYPTO_EX_DATA_FUNCS_shiá
(
¡
è
	`SKM_sk_shiá
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

673 
	#sk_CRYPTO_EX_DATA_FUNCS_pİ
(
¡
è
	`SKM_sk_pİ
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

674 
	#sk_CRYPTO_EX_DATA_FUNCS_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

675 
	#sk_CRYPTO_EX_DATA_FUNCS_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CRYPTO_EX_DATA_FUNCS
, (¡))

	)

676 
	#sk_CRYPTO_dyÆock_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
CRYPTO_dyÆock
, (cmp))

	)

677 
	#sk_CRYPTO_dyÆock_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
CRYPTO_dyÆock
)

	)

678 
	#sk_CRYPTO_dyÆock_ä“
(
¡
è
	`SKM_sk_ä“
(
CRYPTO_dyÆock
, (¡))

	)

679 
	#sk_CRYPTO_dyÆock_num
(
¡
è
	`SKM_sk_num
(
CRYPTO_dyÆock
, (¡))

	)

680 
	#sk_CRYPTO_dyÆock_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
CRYPTO_dyÆock
, (¡), (i))

	)

681 
	#sk_CRYPTO_dyÆock_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
CRYPTO_dyÆock
, (¡), (i), (v®))

	)

682 
	#sk_CRYPTO_dyÆock_z”o
(
¡
è
	`SKM_sk_z”o
(
CRYPTO_dyÆock
, (¡))

	)

683 
	#sk_CRYPTO_dyÆock_push
(
¡
, 
v®
è
	`SKM_sk_push
(
CRYPTO_dyÆock
, (¡), (v®))

	)

684 
	#sk_CRYPTO_dyÆock_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
CRYPTO_dyÆock
, (¡), (v®))

	)

685 
	#sk_CRYPTO_dyÆock_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
CRYPTO_dyÆock
, (¡), (v®))

	)

686 
	#sk_CRYPTO_dyÆock_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
CRYPTO_dyÆock
, (¡), (v®))

	)

687 
	#sk_CRYPTO_dyÆock_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
CRYPTO_dyÆock
, (¡), (i))

	)

688 
	#sk_CRYPTO_dyÆock_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
CRYPTO_dyÆock
, (¡), (±r))

	)

689 
	#sk_CRYPTO_dyÆock_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
CRYPTO_dyÆock
, (¡), (v®), (i))

	)

690 
	#sk_CRYPTO_dyÆock_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
CRYPTO_dyÆock
, (¡), (cmp))

	)

691 
	#sk_CRYPTO_dyÆock_dup
(
¡
è
	`SKM_sk_dup
(
CRYPTO_dyÆock
, st)

	)

692 
	#sk_CRYPTO_dyÆock_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
CRYPTO_dyÆock
, (¡), (ä“_func))

	)

693 
	#sk_CRYPTO_dyÆock_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
CRYPTO_dyÆock
, (¡), (cİy_func), (ä“_func))

	)

694 
	#sk_CRYPTO_dyÆock_shiá
(
¡
è
	`SKM_sk_shiá
(
CRYPTO_dyÆock
, (¡))

	)

695 
	#sk_CRYPTO_dyÆock_pİ
(
¡
è
	`SKM_sk_pİ
(
CRYPTO_dyÆock
, (¡))

	)

696 
	#sk_CRYPTO_dyÆock_sÜt
(
¡
è
	`SKM_sk_sÜt
(
CRYPTO_dyÆock
, (¡))

	)

697 
	#sk_CRYPTO_dyÆock_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
CRYPTO_dyÆock
, (¡))

	)

698 
	#sk_DIST_POINT_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
DIST_POINT
, (cmp))

	)

699 
	#sk_DIST_POINT_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
DIST_POINT
)

	)

700 
	#sk_DIST_POINT_ä“
(
¡
è
	`SKM_sk_ä“
(
DIST_POINT
, (¡))

	)

701 
	#sk_DIST_POINT_num
(
¡
è
	`SKM_sk_num
(
DIST_POINT
, (¡))

	)

702 
	#sk_DIST_POINT_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
DIST_POINT
, (¡), (i))

	)

703 
	#sk_DIST_POINT_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
DIST_POINT
, (¡), (i), (v®))

	)

704 
	#sk_DIST_POINT_z”o
(
¡
è
	`SKM_sk_z”o
(
DIST_POINT
, (¡))

	)

705 
	#sk_DIST_POINT_push
(
¡
, 
v®
è
	`SKM_sk_push
(
DIST_POINT
, (¡), (v®))

	)

706 
	#sk_DIST_POINT_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
DIST_POINT
, (¡), (v®))

	)

707 
	#sk_DIST_POINT_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
DIST_POINT
, (¡), (v®))

	)

708 
	#sk_DIST_POINT_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
DIST_POINT
, (¡), (v®))

	)

709 
	#sk_DIST_POINT_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
DIST_POINT
, (¡), (i))

	)

710 
	#sk_DIST_POINT_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
DIST_POINT
, (¡), (±r))

	)

711 
	#sk_DIST_POINT_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
DIST_POINT
, (¡), (v®), (i))

	)

712 
	#sk_DIST_POINT_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
DIST_POINT
, (¡), (cmp))

	)

713 
	#sk_DIST_POINT_dup
(
¡
è
	`SKM_sk_dup
(
DIST_POINT
, st)

	)

714 
	#sk_DIST_POINT_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
DIST_POINT
, (¡), (ä“_func))

	)

715 
	#sk_DIST_POINT_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
DIST_POINT
, (¡), (cİy_func), (ä“_func))

	)

716 
	#sk_DIST_POINT_shiá
(
¡
è
	`SKM_sk_shiá
(
DIST_POINT
, (¡))

	)

717 
	#sk_DIST_POINT_pİ
(
¡
è
	`SKM_sk_pİ
(
DIST_POINT
, (¡))

	)

718 
	#sk_DIST_POINT_sÜt
(
¡
è
	`SKM_sk_sÜt
(
DIST_POINT
, (¡))

	)

719 
	#sk_DIST_POINT_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
DIST_POINT
, (¡))

	)

720 
	#sk_ENGINE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ENGINE
, (cmp))

	)

721 
	#sk_ENGINE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ENGINE
)

	)

722 
	#sk_ENGINE_ä“
(
¡
è
	`SKM_sk_ä“
(
ENGINE
, (¡))

	)

723 
	#sk_ENGINE_num
(
¡
è
	`SKM_sk_num
(
ENGINE
, (¡))

	)

724 
	#sk_ENGINE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ENGINE
, (¡), (i))

	)

725 
	#sk_ENGINE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ENGINE
, (¡), (i), (v®))

	)

726 
	#sk_ENGINE_z”o
(
¡
è
	`SKM_sk_z”o
(
ENGINE
, (¡))

	)

727 
	#sk_ENGINE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ENGINE
, (¡), (v®))

	)

728 
	#sk_ENGINE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ENGINE
, (¡), (v®))

	)

729 
	#sk_ENGINE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ENGINE
, (¡), (v®))

	)

730 
	#sk_ENGINE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ENGINE
, (¡), (v®))

	)

731 
	#sk_ENGINE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ENGINE
, (¡), (i))

	)

732 
	#sk_ENGINE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ENGINE
, (¡), (±r))

	)

733 
	#sk_ENGINE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ENGINE
, (¡), (v®), (i))

	)

734 
	#sk_ENGINE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ENGINE
, (¡), (cmp))

	)

735 
	#sk_ENGINE_dup
(
¡
è
	`SKM_sk_dup
(
ENGINE
, st)

	)

736 
	#sk_ENGINE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ENGINE
, (¡), (ä“_func))

	)

737 
	#sk_ENGINE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ENGINE
, (¡), (cİy_func), (ä“_func))

	)

738 
	#sk_ENGINE_shiá
(
¡
è
	`SKM_sk_shiá
(
ENGINE
, (¡))

	)

739 
	#sk_ENGINE_pİ
(
¡
è
	`SKM_sk_pİ
(
ENGINE
, (¡))

	)

740 
	#sk_ENGINE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ENGINE
, (¡))

	)

741 
	#sk_ENGINE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ENGINE
, (¡))

	)

742 
	#sk_ENGINE_CLEANUP_ITEM_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ENGINE_CLEANUP_ITEM
, (cmp))

	)

743 
	#sk_ENGINE_CLEANUP_ITEM_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ENGINE_CLEANUP_ITEM
)

	)

744 
	#sk_ENGINE_CLEANUP_ITEM_ä“
(
¡
è
	`SKM_sk_ä“
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

745 
	#sk_ENGINE_CLEANUP_ITEM_num
(
¡
è
	`SKM_sk_num
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

746 
	#sk_ENGINE_CLEANUP_ITEM_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ENGINE_CLEANUP_ITEM
, (¡), (i))

	)

747 
	#sk_ENGINE_CLEANUP_ITEM_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ENGINE_CLEANUP_ITEM
, (¡), (i), (v®))

	)

748 
	#sk_ENGINE_CLEANUP_ITEM_z”o
(
¡
è
	`SKM_sk_z”o
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

749 
	#sk_ENGINE_CLEANUP_ITEM_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ENGINE_CLEANUP_ITEM
, (¡), (v®))

	)

750 
	#sk_ENGINE_CLEANUP_ITEM_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ENGINE_CLEANUP_ITEM
, (¡), (v®))

	)

751 
	#sk_ENGINE_CLEANUP_ITEM_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ENGINE_CLEANUP_ITEM
, (¡), (v®))

	)

752 
	#sk_ENGINE_CLEANUP_ITEM_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ENGINE_CLEANUP_ITEM
, (¡), (v®))

	)

753 
	#sk_ENGINE_CLEANUP_ITEM_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ENGINE_CLEANUP_ITEM
, (¡), (i))

	)

754 
	#sk_ENGINE_CLEANUP_ITEM_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ENGINE_CLEANUP_ITEM
, (¡), (±r))

	)

755 
	#sk_ENGINE_CLEANUP_ITEM_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ENGINE_CLEANUP_ITEM
, (¡), (v®), (i))

	)

756 
	#sk_ENGINE_CLEANUP_ITEM_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ENGINE_CLEANUP_ITEM
, (¡), (cmp))

	)

757 
	#sk_ENGINE_CLEANUP_ITEM_dup
(
¡
è
	`SKM_sk_dup
(
ENGINE_CLEANUP_ITEM
, st)

	)

758 
	#sk_ENGINE_CLEANUP_ITEM_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ENGINE_CLEANUP_ITEM
, (¡), (ä“_func))

	)

759 
	#sk_ENGINE_CLEANUP_ITEM_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ENGINE_CLEANUP_ITEM
, (¡), (cİy_func), (ä“_func))

	)

760 
	#sk_ENGINE_CLEANUP_ITEM_shiá
(
¡
è
	`SKM_sk_shiá
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

761 
	#sk_ENGINE_CLEANUP_ITEM_pİ
(
¡
è
	`SKM_sk_pİ
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

762 
	#sk_ENGINE_CLEANUP_ITEM_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

763 
	#sk_ENGINE_CLEANUP_ITEM_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ENGINE_CLEANUP_ITEM
, (¡))

	)

764 
	#sk_ESS_CERT_ID_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
ESS_CERT_ID
, (cmp))

	)

765 
	#sk_ESS_CERT_ID_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
ESS_CERT_ID
)

	)

766 
	#sk_ESS_CERT_ID_ä“
(
¡
è
	`SKM_sk_ä“
(
ESS_CERT_ID
, (¡))

	)

767 
	#sk_ESS_CERT_ID_num
(
¡
è
	`SKM_sk_num
(
ESS_CERT_ID
, (¡))

	)

768 
	#sk_ESS_CERT_ID_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
ESS_CERT_ID
, (¡), (i))

	)

769 
	#sk_ESS_CERT_ID_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
ESS_CERT_ID
, (¡), (i), (v®))

	)

770 
	#sk_ESS_CERT_ID_z”o
(
¡
è
	`SKM_sk_z”o
(
ESS_CERT_ID
, (¡))

	)

771 
	#sk_ESS_CERT_ID_push
(
¡
, 
v®
è
	`SKM_sk_push
(
ESS_CERT_ID
, (¡), (v®))

	)

772 
	#sk_ESS_CERT_ID_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
ESS_CERT_ID
, (¡), (v®))

	)

773 
	#sk_ESS_CERT_ID_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
ESS_CERT_ID
, (¡), (v®))

	)

774 
	#sk_ESS_CERT_ID_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
ESS_CERT_ID
, (¡), (v®))

	)

775 
	#sk_ESS_CERT_ID_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
ESS_CERT_ID
, (¡), (i))

	)

776 
	#sk_ESS_CERT_ID_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
ESS_CERT_ID
, (¡), (±r))

	)

777 
	#sk_ESS_CERT_ID_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
ESS_CERT_ID
, (¡), (v®), (i))

	)

778 
	#sk_ESS_CERT_ID_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
ESS_CERT_ID
, (¡), (cmp))

	)

779 
	#sk_ESS_CERT_ID_dup
(
¡
è
	`SKM_sk_dup
(
ESS_CERT_ID
, st)

	)

780 
	#sk_ESS_CERT_ID_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
ESS_CERT_ID
, (¡), (ä“_func))

	)

781 
	#sk_ESS_CERT_ID_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
ESS_CERT_ID
, (¡), (cİy_func), (ä“_func))

	)

782 
	#sk_ESS_CERT_ID_shiá
(
¡
è
	`SKM_sk_shiá
(
ESS_CERT_ID
, (¡))

	)

783 
	#sk_ESS_CERT_ID_pİ
(
¡
è
	`SKM_sk_pİ
(
ESS_CERT_ID
, (¡))

	)

784 
	#sk_ESS_CERT_ID_sÜt
(
¡
è
	`SKM_sk_sÜt
(
ESS_CERT_ID
, (¡))

	)

785 
	#sk_ESS_CERT_ID_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
ESS_CERT_ID
, (¡))

	)

786 
	#sk_EVP_MD_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
EVP_MD
, (cmp))

	)

787 
	#sk_EVP_MD_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
EVP_MD
)

	)

788 
	#sk_EVP_MD_ä“
(
¡
è
	`SKM_sk_ä“
(
EVP_MD
, (¡))

	)

789 
	#sk_EVP_MD_num
(
¡
è
	`SKM_sk_num
(
EVP_MD
, (¡))

	)

790 
	#sk_EVP_MD_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
EVP_MD
, (¡), (i))

	)

791 
	#sk_EVP_MD_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
EVP_MD
, (¡), (i), (v®))

	)

792 
	#sk_EVP_MD_z”o
(
¡
è
	`SKM_sk_z”o
(
EVP_MD
, (¡))

	)

793 
	#sk_EVP_MD_push
(
¡
, 
v®
è
	`SKM_sk_push
(
EVP_MD
, (¡), (v®))

	)

794 
	#sk_EVP_MD_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
EVP_MD
, (¡), (v®))

	)

795 
	#sk_EVP_MD_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
EVP_MD
, (¡), (v®))

	)

796 
	#sk_EVP_MD_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
EVP_MD
, (¡), (v®))

	)

797 
	#sk_EVP_MD_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
EVP_MD
, (¡), (i))

	)

798 
	#sk_EVP_MD_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
EVP_MD
, (¡), (±r))

	)

799 
	#sk_EVP_MD_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
EVP_MD
, (¡), (v®), (i))

	)

800 
	#sk_EVP_MD_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
EVP_MD
, (¡), (cmp))

	)

801 
	#sk_EVP_MD_dup
(
¡
è
	`SKM_sk_dup
(
EVP_MD
, st)

	)

802 
	#sk_EVP_MD_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
EVP_MD
, (¡), (ä“_func))

	)

803 
	#sk_EVP_MD_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
EVP_MD
, (¡), (cİy_func), (ä“_func))

	)

804 
	#sk_EVP_MD_shiá
(
¡
è
	`SKM_sk_shiá
(
EVP_MD
, (¡))

	)

805 
	#sk_EVP_MD_pİ
(
¡
è
	`SKM_sk_pİ
(
EVP_MD
, (¡))

	)

806 
	#sk_EVP_MD_sÜt
(
¡
è
	`SKM_sk_sÜt
(
EVP_MD
, (¡))

	)

807 
	#sk_EVP_MD_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
EVP_MD
, (¡))

	)

808 
	#sk_EVP_PBE_CTL_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
EVP_PBE_CTL
, (cmp))

	)

809 
	#sk_EVP_PBE_CTL_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
EVP_PBE_CTL
)

	)

810 
	#sk_EVP_PBE_CTL_ä“
(
¡
è
	`SKM_sk_ä“
(
EVP_PBE_CTL
, (¡))

	)

811 
	#sk_EVP_PBE_CTL_num
(
¡
è
	`SKM_sk_num
(
EVP_PBE_CTL
, (¡))

	)

812 
	#sk_EVP_PBE_CTL_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
EVP_PBE_CTL
, (¡), (i))

	)

813 
	#sk_EVP_PBE_CTL_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
EVP_PBE_CTL
, (¡), (i), (v®))

	)

814 
	#sk_EVP_PBE_CTL_z”o
(
¡
è
	`SKM_sk_z”o
(
EVP_PBE_CTL
, (¡))

	)

815 
	#sk_EVP_PBE_CTL_push
(
¡
, 
v®
è
	`SKM_sk_push
(
EVP_PBE_CTL
, (¡), (v®))

	)

816 
	#sk_EVP_PBE_CTL_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
EVP_PBE_CTL
, (¡), (v®))

	)

817 
	#sk_EVP_PBE_CTL_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
EVP_PBE_CTL
, (¡), (v®))

	)

818 
	#sk_EVP_PBE_CTL_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
EVP_PBE_CTL
, (¡), (v®))

	)

819 
	#sk_EVP_PBE_CTL_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
EVP_PBE_CTL
, (¡), (i))

	)

820 
	#sk_EVP_PBE_CTL_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
EVP_PBE_CTL
, (¡), (±r))

	)

821 
	#sk_EVP_PBE_CTL_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
EVP_PBE_CTL
, (¡), (v®), (i))

	)

822 
	#sk_EVP_PBE_CTL_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
EVP_PBE_CTL
, (¡), (cmp))

	)

823 
	#sk_EVP_PBE_CTL_dup
(
¡
è
	`SKM_sk_dup
(
EVP_PBE_CTL
, st)

	)

824 
	#sk_EVP_PBE_CTL_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
EVP_PBE_CTL
, (¡), (ä“_func))

	)

825 
	#sk_EVP_PBE_CTL_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
EVP_PBE_CTL
, (¡), (cİy_func), (ä“_func))

	)

826 
	#sk_EVP_PBE_CTL_shiá
(
¡
è
	`SKM_sk_shiá
(
EVP_PBE_CTL
, (¡))

	)

827 
	#sk_EVP_PBE_CTL_pİ
(
¡
è
	`SKM_sk_pİ
(
EVP_PBE_CTL
, (¡))

	)

828 
	#sk_EVP_PBE_CTL_sÜt
(
¡
è
	`SKM_sk_sÜt
(
EVP_PBE_CTL
, (¡))

	)

829 
	#sk_EVP_PBE_CTL_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
EVP_PBE_CTL
, (¡))

	)

830 
	#sk_EVP_PKEY_ASN1_METHOD_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
EVP_PKEY_ASN1_METHOD
, (cmp))

	)

831 
	#sk_EVP_PKEY_ASN1_METHOD_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
EVP_PKEY_ASN1_METHOD
)

	)

832 
	#sk_EVP_PKEY_ASN1_METHOD_ä“
(
¡
è
	`SKM_sk_ä“
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

833 
	#sk_EVP_PKEY_ASN1_METHOD_num
(
¡
è
	`SKM_sk_num
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

834 
	#sk_EVP_PKEY_ASN1_METHOD_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
EVP_PKEY_ASN1_METHOD
, (¡), (i))

	)

835 
	#sk_EVP_PKEY_ASN1_METHOD_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
EVP_PKEY_ASN1_METHOD
, (¡), (i), (v®))

	)

836 
	#sk_EVP_PKEY_ASN1_METHOD_z”o
(
¡
è
	`SKM_sk_z”o
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

837 
	#sk_EVP_PKEY_ASN1_METHOD_push
(
¡
, 
v®
è
	`SKM_sk_push
(
EVP_PKEY_ASN1_METHOD
, (¡), (v®))

	)

838 
	#sk_EVP_PKEY_ASN1_METHOD_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
EVP_PKEY_ASN1_METHOD
, (¡), (v®))

	)

839 
	#sk_EVP_PKEY_ASN1_METHOD_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
EVP_PKEY_ASN1_METHOD
, (¡), (v®))

	)

840 
	#sk_EVP_PKEY_ASN1_METHOD_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
EVP_PKEY_ASN1_METHOD
, (¡), (v®))

	)

841 
	#sk_EVP_PKEY_ASN1_METHOD_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
EVP_PKEY_ASN1_METHOD
, (¡), (i))

	)

842 
	#sk_EVP_PKEY_ASN1_METHOD_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
EVP_PKEY_ASN1_METHOD
, (¡), (±r))

	)

843 
	#sk_EVP_PKEY_ASN1_METHOD_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
EVP_PKEY_ASN1_METHOD
, (¡), (v®), (i))

	)

844 
	#sk_EVP_PKEY_ASN1_METHOD_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
EVP_PKEY_ASN1_METHOD
, (¡), (cmp))

	)

845 
	#sk_EVP_PKEY_ASN1_METHOD_dup
(
¡
è
	`SKM_sk_dup
(
EVP_PKEY_ASN1_METHOD
, st)

	)

846 
	#sk_EVP_PKEY_ASN1_METHOD_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
EVP_PKEY_ASN1_METHOD
, (¡), (ä“_func))

	)

847 
	#sk_EVP_PKEY_ASN1_METHOD_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
EVP_PKEY_ASN1_METHOD
, (¡), (cİy_func), (ä“_func))

	)

848 
	#sk_EVP_PKEY_ASN1_METHOD_shiá
(
¡
è
	`SKM_sk_shiá
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

849 
	#sk_EVP_PKEY_ASN1_METHOD_pİ
(
¡
è
	`SKM_sk_pİ
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

850 
	#sk_EVP_PKEY_ASN1_METHOD_sÜt
(
¡
è
	`SKM_sk_sÜt
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

851 
	#sk_EVP_PKEY_ASN1_METHOD_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
EVP_PKEY_ASN1_METHOD
, (¡))

	)

852 
	#sk_EVP_PKEY_METHOD_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
EVP_PKEY_METHOD
, (cmp))

	)

853 
	#sk_EVP_PKEY_METHOD_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
EVP_PKEY_METHOD
)

	)

854 
	#sk_EVP_PKEY_METHOD_ä“
(
¡
è
	`SKM_sk_ä“
(
EVP_PKEY_METHOD
, (¡))

	)

855 
	#sk_EVP_PKEY_METHOD_num
(
¡
è
	`SKM_sk_num
(
EVP_PKEY_METHOD
, (¡))

	)

856 
	#sk_EVP_PKEY_METHOD_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
EVP_PKEY_METHOD
, (¡), (i))

	)

857 
	#sk_EVP_PKEY_METHOD_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
EVP_PKEY_METHOD
, (¡), (i), (v®))

	)

858 
	#sk_EVP_PKEY_METHOD_z”o
(
¡
è
	`SKM_sk_z”o
(
EVP_PKEY_METHOD
, (¡))

	)

859 
	#sk_EVP_PKEY_METHOD_push
(
¡
, 
v®
è
	`SKM_sk_push
(
EVP_PKEY_METHOD
, (¡), (v®))

	)

860 
	#sk_EVP_PKEY_METHOD_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
EVP_PKEY_METHOD
, (¡), (v®))

	)

861 
	#sk_EVP_PKEY_METHOD_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
EVP_PKEY_METHOD
, (¡), (v®))

	)

862 
	#sk_EVP_PKEY_METHOD_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
EVP_PKEY_METHOD
, (¡), (v®))

	)

863 
	#sk_EVP_PKEY_METHOD_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
EVP_PKEY_METHOD
, (¡), (i))

	)

864 
	#sk_EVP_PKEY_METHOD_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
EVP_PKEY_METHOD
, (¡), (±r))

	)

865 
	#sk_EVP_PKEY_METHOD_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
EVP_PKEY_METHOD
, (¡), (v®), (i))

	)

866 
	#sk_EVP_PKEY_METHOD_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
EVP_PKEY_METHOD
, (¡), (cmp))

	)

867 
	#sk_EVP_PKEY_METHOD_dup
(
¡
è
	`SKM_sk_dup
(
EVP_PKEY_METHOD
, st)

	)

868 
	#sk_EVP_PKEY_METHOD_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
EVP_PKEY_METHOD
, (¡), (ä“_func))

	)

869 
	#sk_EVP_PKEY_METHOD_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
EVP_PKEY_METHOD
, (¡), (cİy_func), (ä“_func))

	)

870 
	#sk_EVP_PKEY_METHOD_shiá
(
¡
è
	`SKM_sk_shiá
(
EVP_PKEY_METHOD
, (¡))

	)

871 
	#sk_EVP_PKEY_METHOD_pİ
(
¡
è
	`SKM_sk_pİ
(
EVP_PKEY_METHOD
, (¡))

	)

872 
	#sk_EVP_PKEY_METHOD_sÜt
(
¡
è
	`SKM_sk_sÜt
(
EVP_PKEY_METHOD
, (¡))

	)

873 
	#sk_EVP_PKEY_METHOD_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
EVP_PKEY_METHOD
, (¡))

	)

874 
	#sk_GENERAL_NAME_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
GENERAL_NAME
, (cmp))

	)

875 
	#sk_GENERAL_NAME_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
GENERAL_NAME
)

	)

876 
	#sk_GENERAL_NAME_ä“
(
¡
è
	`SKM_sk_ä“
(
GENERAL_NAME
, (¡))

	)

877 
	#sk_GENERAL_NAME_num
(
¡
è
	`SKM_sk_num
(
GENERAL_NAME
, (¡))

	)

878 
	#sk_GENERAL_NAME_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
GENERAL_NAME
, (¡), (i))

	)

879 
	#sk_GENERAL_NAME_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
GENERAL_NAME
, (¡), (i), (v®))

	)

880 
	#sk_GENERAL_NAME_z”o
(
¡
è
	`SKM_sk_z”o
(
GENERAL_NAME
, (¡))

	)

881 
	#sk_GENERAL_NAME_push
(
¡
, 
v®
è
	`SKM_sk_push
(
GENERAL_NAME
, (¡), (v®))

	)

882 
	#sk_GENERAL_NAME_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
GENERAL_NAME
, (¡), (v®))

	)

883 
	#sk_GENERAL_NAME_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
GENERAL_NAME
, (¡), (v®))

	)

884 
	#sk_GENERAL_NAME_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
GENERAL_NAME
, (¡), (v®))

	)

885 
	#sk_GENERAL_NAME_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
GENERAL_NAME
, (¡), (i))

	)

886 
	#sk_GENERAL_NAME_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
GENERAL_NAME
, (¡), (±r))

	)

887 
	#sk_GENERAL_NAME_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
GENERAL_NAME
, (¡), (v®), (i))

	)

888 
	#sk_GENERAL_NAME_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
GENERAL_NAME
, (¡), (cmp))

	)

889 
	#sk_GENERAL_NAME_dup
(
¡
è
	`SKM_sk_dup
(
GENERAL_NAME
, st)

	)

890 
	#sk_GENERAL_NAME_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
GENERAL_NAME
, (¡), (ä“_func))

	)

891 
	#sk_GENERAL_NAME_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
GENERAL_NAME
, (¡), (cİy_func), (ä“_func))

	)

892 
	#sk_GENERAL_NAME_shiá
(
¡
è
	`SKM_sk_shiá
(
GENERAL_NAME
, (¡))

	)

893 
	#sk_GENERAL_NAME_pİ
(
¡
è
	`SKM_sk_pİ
(
GENERAL_NAME
, (¡))

	)

894 
	#sk_GENERAL_NAME_sÜt
(
¡
è
	`SKM_sk_sÜt
(
GENERAL_NAME
, (¡))

	)

895 
	#sk_GENERAL_NAME_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
GENERAL_NAME
, (¡))

	)

896 
	#sk_GENERAL_NAMES_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
GENERAL_NAMES
, (cmp))

	)

897 
	#sk_GENERAL_NAMES_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
GENERAL_NAMES
)

	)

898 
	#sk_GENERAL_NAMES_ä“
(
¡
è
	`SKM_sk_ä“
(
GENERAL_NAMES
, (¡))

	)

899 
	#sk_GENERAL_NAMES_num
(
¡
è
	`SKM_sk_num
(
GENERAL_NAMES
, (¡))

	)

900 
	#sk_GENERAL_NAMES_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
GENERAL_NAMES
, (¡), (i))

	)

901 
	#sk_GENERAL_NAMES_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
GENERAL_NAMES
, (¡), (i), (v®))

	)

902 
	#sk_GENERAL_NAMES_z”o
(
¡
è
	`SKM_sk_z”o
(
GENERAL_NAMES
, (¡))

	)

903 
	#sk_GENERAL_NAMES_push
(
¡
, 
v®
è
	`SKM_sk_push
(
GENERAL_NAMES
, (¡), (v®))

	)

904 
	#sk_GENERAL_NAMES_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
GENERAL_NAMES
, (¡), (v®))

	)

905 
	#sk_GENERAL_NAMES_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
GENERAL_NAMES
, (¡), (v®))

	)

906 
	#sk_GENERAL_NAMES_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
GENERAL_NAMES
, (¡), (v®))

	)

907 
	#sk_GENERAL_NAMES_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
GENERAL_NAMES
, (¡), (i))

	)

908 
	#sk_GENERAL_NAMES_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
GENERAL_NAMES
, (¡), (±r))

	)

909 
	#sk_GENERAL_NAMES_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
GENERAL_NAMES
, (¡), (v®), (i))

	)

910 
	#sk_GENERAL_NAMES_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
GENERAL_NAMES
, (¡), (cmp))

	)

911 
	#sk_GENERAL_NAMES_dup
(
¡
è
	`SKM_sk_dup
(
GENERAL_NAMES
, st)

	)

912 
	#sk_GENERAL_NAMES_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
GENERAL_NAMES
, (¡), (ä“_func))

	)

913 
	#sk_GENERAL_NAMES_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
GENERAL_NAMES
, (¡), (cİy_func), (ä“_func))

	)

914 
	#sk_GENERAL_NAMES_shiá
(
¡
è
	`SKM_sk_shiá
(
GENERAL_NAMES
, (¡))

	)

915 
	#sk_GENERAL_NAMES_pİ
(
¡
è
	`SKM_sk_pİ
(
GENERAL_NAMES
, (¡))

	)

916 
	#sk_GENERAL_NAMES_sÜt
(
¡
è
	`SKM_sk_sÜt
(
GENERAL_NAMES
, (¡))

	)

917 
	#sk_GENERAL_NAMES_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
GENERAL_NAMES
, (¡))

	)

918 
	#sk_GENERAL_SUBTREE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
GENERAL_SUBTREE
, (cmp))

	)

919 
	#sk_GENERAL_SUBTREE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
GENERAL_SUBTREE
)

	)

920 
	#sk_GENERAL_SUBTREE_ä“
(
¡
è
	`SKM_sk_ä“
(
GENERAL_SUBTREE
, (¡))

	)

921 
	#sk_GENERAL_SUBTREE_num
(
¡
è
	`SKM_sk_num
(
GENERAL_SUBTREE
, (¡))

	)

922 
	#sk_GENERAL_SUBTREE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
GENERAL_SUBTREE
, (¡), (i))

	)

923 
	#sk_GENERAL_SUBTREE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
GENERAL_SUBTREE
, (¡), (i), (v®))

	)

924 
	#sk_GENERAL_SUBTREE_z”o
(
¡
è
	`SKM_sk_z”o
(
GENERAL_SUBTREE
, (¡))

	)

925 
	#sk_GENERAL_SUBTREE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
GENERAL_SUBTREE
, (¡), (v®))

	)

926 
	#sk_GENERAL_SUBTREE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
GENERAL_SUBTREE
, (¡), (v®))

	)

927 
	#sk_GENERAL_SUBTREE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
GENERAL_SUBTREE
, (¡), (v®))

	)

928 
	#sk_GENERAL_SUBTREE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
GENERAL_SUBTREE
, (¡), (v®))

	)

929 
	#sk_GENERAL_SUBTREE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
GENERAL_SUBTREE
, (¡), (i))

	)

930 
	#sk_GENERAL_SUBTREE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
GENERAL_SUBTREE
, (¡), (±r))

	)

931 
	#sk_GENERAL_SUBTREE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
GENERAL_SUBTREE
, (¡), (v®), (i))

	)

932 
	#sk_GENERAL_SUBTREE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
GENERAL_SUBTREE
, (¡), (cmp))

	)

933 
	#sk_GENERAL_SUBTREE_dup
(
¡
è
	`SKM_sk_dup
(
GENERAL_SUBTREE
, st)

	)

934 
	#sk_GENERAL_SUBTREE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
GENERAL_SUBTREE
, (¡), (ä“_func))

	)

935 
	#sk_GENERAL_SUBTREE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
GENERAL_SUBTREE
, (¡), (cİy_func), (ä“_func))

	)

936 
	#sk_GENERAL_SUBTREE_shiá
(
¡
è
	`SKM_sk_shiá
(
GENERAL_SUBTREE
, (¡))

	)

937 
	#sk_GENERAL_SUBTREE_pİ
(
¡
è
	`SKM_sk_pİ
(
GENERAL_SUBTREE
, (¡))

	)

938 
	#sk_GENERAL_SUBTREE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
GENERAL_SUBTREE
, (¡))

	)

939 
	#sk_GENERAL_SUBTREE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
GENERAL_SUBTREE
, (¡))

	)

940 
	#sk_IPAdd»ssFamy_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
IPAdd»ssFamy
, (cmp))

	)

941 
	#sk_IPAdd»ssFamy_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
IPAdd»ssFamy
)

	)

942 
	#sk_IPAdd»ssFamy_ä“
(
¡
è
	`SKM_sk_ä“
(
IPAdd»ssFamy
, (¡))

	)

943 
	#sk_IPAdd»ssFamy_num
(
¡
è
	`SKM_sk_num
(
IPAdd»ssFamy
, (¡))

	)

944 
	#sk_IPAdd»ssFamy_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
IPAdd»ssFamy
, (¡), (i))

	)

945 
	#sk_IPAdd»ssFamy_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
IPAdd»ssFamy
, (¡), (i), (v®))

	)

946 
	#sk_IPAdd»ssFamy_z”o
(
¡
è
	`SKM_sk_z”o
(
IPAdd»ssFamy
, (¡))

	)

947 
	#sk_IPAdd»ssFamy_push
(
¡
, 
v®
è
	`SKM_sk_push
(
IPAdd»ssFamy
, (¡), (v®))

	)

948 
	#sk_IPAdd»ssFamy_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
IPAdd»ssFamy
, (¡), (v®))

	)

949 
	#sk_IPAdd»ssFamy_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
IPAdd»ssFamy
, (¡), (v®))

	)

950 
	#sk_IPAdd»ssFamy_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
IPAdd»ssFamy
, (¡), (v®))

	)

951 
	#sk_IPAdd»ssFamy_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
IPAdd»ssFamy
, (¡), (i))

	)

952 
	#sk_IPAdd»ssFamy_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
IPAdd»ssFamy
, (¡), (±r))

	)

953 
	#sk_IPAdd»ssFamy_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
IPAdd»ssFamy
, (¡), (v®), (i))

	)

954 
	#sk_IPAdd»ssFamy_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
IPAdd»ssFamy
, (¡), (cmp))

	)

955 
	#sk_IPAdd»ssFamy_dup
(
¡
è
	`SKM_sk_dup
(
IPAdd»ssFamy
, st)

	)

956 
	#sk_IPAdd»ssFamy_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
IPAdd»ssFamy
, (¡), (ä“_func))

	)

957 
	#sk_IPAdd»ssFamy_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
IPAdd»ssFamy
, (¡), (cİy_func), (ä“_func))

	)

958 
	#sk_IPAdd»ssFamy_shiá
(
¡
è
	`SKM_sk_shiá
(
IPAdd»ssFamy
, (¡))

	)

959 
	#sk_IPAdd»ssFamy_pİ
(
¡
è
	`SKM_sk_pİ
(
IPAdd»ssFamy
, (¡))

	)

960 
	#sk_IPAdd»ssFamy_sÜt
(
¡
è
	`SKM_sk_sÜt
(
IPAdd»ssFamy
, (¡))

	)

961 
	#sk_IPAdd»ssFamy_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
IPAdd»ssFamy
, (¡))

	)

962 
	#sk_IPAdd»ssOrRªge_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
IPAdd»ssOrRªge
, (cmp))

	)

963 
	#sk_IPAdd»ssOrRªge_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
IPAdd»ssOrRªge
)

	)

964 
	#sk_IPAdd»ssOrRªge_ä“
(
¡
è
	`SKM_sk_ä“
(
IPAdd»ssOrRªge
, (¡))

	)

965 
	#sk_IPAdd»ssOrRªge_num
(
¡
è
	`SKM_sk_num
(
IPAdd»ssOrRªge
, (¡))

	)

966 
	#sk_IPAdd»ssOrRªge_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
IPAdd»ssOrRªge
, (¡), (i))

	)

967 
	#sk_IPAdd»ssOrRªge_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
IPAdd»ssOrRªge
, (¡), (i), (v®))

	)

968 
	#sk_IPAdd»ssOrRªge_z”o
(
¡
è
	`SKM_sk_z”o
(
IPAdd»ssOrRªge
, (¡))

	)

969 
	#sk_IPAdd»ssOrRªge_push
(
¡
, 
v®
è
	`SKM_sk_push
(
IPAdd»ssOrRªge
, (¡), (v®))

	)

970 
	#sk_IPAdd»ssOrRªge_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
IPAdd»ssOrRªge
, (¡), (v®))

	)

971 
	#sk_IPAdd»ssOrRªge_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
IPAdd»ssOrRªge
, (¡), (v®))

	)

972 
	#sk_IPAdd»ssOrRªge_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
IPAdd»ssOrRªge
, (¡), (v®))

	)

973 
	#sk_IPAdd»ssOrRªge_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
IPAdd»ssOrRªge
, (¡), (i))

	)

974 
	#sk_IPAdd»ssOrRªge_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
IPAdd»ssOrRªge
, (¡), (±r))

	)

975 
	#sk_IPAdd»ssOrRªge_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
IPAdd»ssOrRªge
, (¡), (v®), (i))

	)

976 
	#sk_IPAdd»ssOrRªge_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
IPAdd»ssOrRªge
, (¡), (cmp))

	)

977 
	#sk_IPAdd»ssOrRªge_dup
(
¡
è
	`SKM_sk_dup
(
IPAdd»ssOrRªge
, st)

	)

978 
	#sk_IPAdd»ssOrRªge_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
IPAdd»ssOrRªge
, (¡), (ä“_func))

	)

979 
	#sk_IPAdd»ssOrRªge_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
IPAdd»ssOrRªge
, (¡), (cİy_func), (ä“_func))

	)

980 
	#sk_IPAdd»ssOrRªge_shiá
(
¡
è
	`SKM_sk_shiá
(
IPAdd»ssOrRªge
, (¡))

	)

981 
	#sk_IPAdd»ssOrRªge_pİ
(
¡
è
	`SKM_sk_pİ
(
IPAdd»ssOrRªge
, (¡))

	)

982 
	#sk_IPAdd»ssOrRªge_sÜt
(
¡
è
	`SKM_sk_sÜt
(
IPAdd»ssOrRªge
, (¡))

	)

983 
	#sk_IPAdd»ssOrRªge_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
IPAdd»ssOrRªge
, (¡))

	)

984 
	#sk_KRB5_APREQBODY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_APREQBODY
, (cmp))

	)

985 
	#sk_KRB5_APREQBODY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_APREQBODY
)

	)

986 
	#sk_KRB5_APREQBODY_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_APREQBODY
, (¡))

	)

987 
	#sk_KRB5_APREQBODY_num
(
¡
è
	`SKM_sk_num
(
KRB5_APREQBODY
, (¡))

	)

988 
	#sk_KRB5_APREQBODY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_APREQBODY
, (¡), (i))

	)

989 
	#sk_KRB5_APREQBODY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_APREQBODY
, (¡), (i), (v®))

	)

990 
	#sk_KRB5_APREQBODY_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_APREQBODY
, (¡))

	)

991 
	#sk_KRB5_APREQBODY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_APREQBODY
, (¡), (v®))

	)

992 
	#sk_KRB5_APREQBODY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_APREQBODY
, (¡), (v®))

	)

993 
	#sk_KRB5_APREQBODY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_APREQBODY
, (¡), (v®))

	)

994 
	#sk_KRB5_APREQBODY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_APREQBODY
, (¡), (v®))

	)

995 
	#sk_KRB5_APREQBODY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_APREQBODY
, (¡), (i))

	)

996 
	#sk_KRB5_APREQBODY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_APREQBODY
, (¡), (±r))

	)

997 
	#sk_KRB5_APREQBODY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_APREQBODY
, (¡), (v®), (i))

	)

998 
	#sk_KRB5_APREQBODY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_APREQBODY
, (¡), (cmp))

	)

999 
	#sk_KRB5_APREQBODY_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_APREQBODY
, st)

	)

1000 
	#sk_KRB5_APREQBODY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_APREQBODY
, (¡), (ä“_func))

	)

1001 
	#sk_KRB5_APREQBODY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_APREQBODY
, (¡), (cİy_func), (ä“_func))

	)

1002 
	#sk_KRB5_APREQBODY_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_APREQBODY
, (¡))

	)

1003 
	#sk_KRB5_APREQBODY_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_APREQBODY
, (¡))

	)

1004 
	#sk_KRB5_APREQBODY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_APREQBODY
, (¡))

	)

1005 
	#sk_KRB5_APREQBODY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_APREQBODY
, (¡))

	)

1006 
	#sk_KRB5_AUTHDATA_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_AUTHDATA
, (cmp))

	)

1007 
	#sk_KRB5_AUTHDATA_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_AUTHDATA
)

	)

1008 
	#sk_KRB5_AUTHDATA_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_AUTHDATA
, (¡))

	)

1009 
	#sk_KRB5_AUTHDATA_num
(
¡
è
	`SKM_sk_num
(
KRB5_AUTHDATA
, (¡))

	)

1010 
	#sk_KRB5_AUTHDATA_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_AUTHDATA
, (¡), (i))

	)

1011 
	#sk_KRB5_AUTHDATA_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_AUTHDATA
, (¡), (i), (v®))

	)

1012 
	#sk_KRB5_AUTHDATA_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_AUTHDATA
, (¡))

	)

1013 
	#sk_KRB5_AUTHDATA_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_AUTHDATA
, (¡), (v®))

	)

1014 
	#sk_KRB5_AUTHDATA_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_AUTHDATA
, (¡), (v®))

	)

1015 
	#sk_KRB5_AUTHDATA_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_AUTHDATA
, (¡), (v®))

	)

1016 
	#sk_KRB5_AUTHDATA_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_AUTHDATA
, (¡), (v®))

	)

1017 
	#sk_KRB5_AUTHDATA_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_AUTHDATA
, (¡), (i))

	)

1018 
	#sk_KRB5_AUTHDATA_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_AUTHDATA
, (¡), (±r))

	)

1019 
	#sk_KRB5_AUTHDATA_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_AUTHDATA
, (¡), (v®), (i))

	)

1020 
	#sk_KRB5_AUTHDATA_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_AUTHDATA
, (¡), (cmp))

	)

1021 
	#sk_KRB5_AUTHDATA_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_AUTHDATA
, st)

	)

1022 
	#sk_KRB5_AUTHDATA_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_AUTHDATA
, (¡), (ä“_func))

	)

1023 
	#sk_KRB5_AUTHDATA_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_AUTHDATA
, (¡), (cİy_func), (ä“_func))

	)

1024 
	#sk_KRB5_AUTHDATA_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_AUTHDATA
, (¡))

	)

1025 
	#sk_KRB5_AUTHDATA_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_AUTHDATA
, (¡))

	)

1026 
	#sk_KRB5_AUTHDATA_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_AUTHDATA
, (¡))

	)

1027 
	#sk_KRB5_AUTHDATA_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_AUTHDATA
, (¡))

	)

1028 
	#sk_KRB5_AUTHENTBODY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_AUTHENTBODY
, (cmp))

	)

1029 
	#sk_KRB5_AUTHENTBODY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_AUTHENTBODY
)

	)

1030 
	#sk_KRB5_AUTHENTBODY_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_AUTHENTBODY
, (¡))

	)

1031 
	#sk_KRB5_AUTHENTBODY_num
(
¡
è
	`SKM_sk_num
(
KRB5_AUTHENTBODY
, (¡))

	)

1032 
	#sk_KRB5_AUTHENTBODY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_AUTHENTBODY
, (¡), (i))

	)

1033 
	#sk_KRB5_AUTHENTBODY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_AUTHENTBODY
, (¡), (i), (v®))

	)

1034 
	#sk_KRB5_AUTHENTBODY_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_AUTHENTBODY
, (¡))

	)

1035 
	#sk_KRB5_AUTHENTBODY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_AUTHENTBODY
, (¡), (v®))

	)

1036 
	#sk_KRB5_AUTHENTBODY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_AUTHENTBODY
, (¡), (v®))

	)

1037 
	#sk_KRB5_AUTHENTBODY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_AUTHENTBODY
, (¡), (v®))

	)

1038 
	#sk_KRB5_AUTHENTBODY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_AUTHENTBODY
, (¡), (v®))

	)

1039 
	#sk_KRB5_AUTHENTBODY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_AUTHENTBODY
, (¡), (i))

	)

1040 
	#sk_KRB5_AUTHENTBODY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_AUTHENTBODY
, (¡), (±r))

	)

1041 
	#sk_KRB5_AUTHENTBODY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_AUTHENTBODY
, (¡), (v®), (i))

	)

1042 
	#sk_KRB5_AUTHENTBODY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_AUTHENTBODY
, (¡), (cmp))

	)

1043 
	#sk_KRB5_AUTHENTBODY_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_AUTHENTBODY
, st)

	)

1044 
	#sk_KRB5_AUTHENTBODY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_AUTHENTBODY
, (¡), (ä“_func))

	)

1045 
	#sk_KRB5_AUTHENTBODY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_AUTHENTBODY
, (¡), (cİy_func), (ä“_func))

	)

1046 
	#sk_KRB5_AUTHENTBODY_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_AUTHENTBODY
, (¡))

	)

1047 
	#sk_KRB5_AUTHENTBODY_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_AUTHENTBODY
, (¡))

	)

1048 
	#sk_KRB5_AUTHENTBODY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_AUTHENTBODY
, (¡))

	)

1049 
	#sk_KRB5_AUTHENTBODY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_AUTHENTBODY
, (¡))

	)

1050 
	#sk_KRB5_CHECKSUM_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_CHECKSUM
, (cmp))

	)

1051 
	#sk_KRB5_CHECKSUM_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_CHECKSUM
)

	)

1052 
	#sk_KRB5_CHECKSUM_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_CHECKSUM
, (¡))

	)

1053 
	#sk_KRB5_CHECKSUM_num
(
¡
è
	`SKM_sk_num
(
KRB5_CHECKSUM
, (¡))

	)

1054 
	#sk_KRB5_CHECKSUM_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_CHECKSUM
, (¡), (i))

	)

1055 
	#sk_KRB5_CHECKSUM_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_CHECKSUM
, (¡), (i), (v®))

	)

1056 
	#sk_KRB5_CHECKSUM_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_CHECKSUM
, (¡))

	)

1057 
	#sk_KRB5_CHECKSUM_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_CHECKSUM
, (¡), (v®))

	)

1058 
	#sk_KRB5_CHECKSUM_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_CHECKSUM
, (¡), (v®))

	)

1059 
	#sk_KRB5_CHECKSUM_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_CHECKSUM
, (¡), (v®))

	)

1060 
	#sk_KRB5_CHECKSUM_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_CHECKSUM
, (¡), (v®))

	)

1061 
	#sk_KRB5_CHECKSUM_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_CHECKSUM
, (¡), (i))

	)

1062 
	#sk_KRB5_CHECKSUM_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_CHECKSUM
, (¡), (±r))

	)

1063 
	#sk_KRB5_CHECKSUM_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_CHECKSUM
, (¡), (v®), (i))

	)

1064 
	#sk_KRB5_CHECKSUM_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_CHECKSUM
, (¡), (cmp))

	)

1065 
	#sk_KRB5_CHECKSUM_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_CHECKSUM
, st)

	)

1066 
	#sk_KRB5_CHECKSUM_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_CHECKSUM
, (¡), (ä“_func))

	)

1067 
	#sk_KRB5_CHECKSUM_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_CHECKSUM
, (¡), (cİy_func), (ä“_func))

	)

1068 
	#sk_KRB5_CHECKSUM_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_CHECKSUM
, (¡))

	)

1069 
	#sk_KRB5_CHECKSUM_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_CHECKSUM
, (¡))

	)

1070 
	#sk_KRB5_CHECKSUM_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_CHECKSUM
, (¡))

	)

1071 
	#sk_KRB5_CHECKSUM_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_CHECKSUM
, (¡))

	)

1072 
	#sk_KRB5_ENCDATA_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_ENCDATA
, (cmp))

	)

1073 
	#sk_KRB5_ENCDATA_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_ENCDATA
)

	)

1074 
	#sk_KRB5_ENCDATA_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_ENCDATA
, (¡))

	)

1075 
	#sk_KRB5_ENCDATA_num
(
¡
è
	`SKM_sk_num
(
KRB5_ENCDATA
, (¡))

	)

1076 
	#sk_KRB5_ENCDATA_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_ENCDATA
, (¡), (i))

	)

1077 
	#sk_KRB5_ENCDATA_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_ENCDATA
, (¡), (i), (v®))

	)

1078 
	#sk_KRB5_ENCDATA_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_ENCDATA
, (¡))

	)

1079 
	#sk_KRB5_ENCDATA_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_ENCDATA
, (¡), (v®))

	)

1080 
	#sk_KRB5_ENCDATA_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_ENCDATA
, (¡), (v®))

	)

1081 
	#sk_KRB5_ENCDATA_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_ENCDATA
, (¡), (v®))

	)

1082 
	#sk_KRB5_ENCDATA_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_ENCDATA
, (¡), (v®))

	)

1083 
	#sk_KRB5_ENCDATA_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_ENCDATA
, (¡), (i))

	)

1084 
	#sk_KRB5_ENCDATA_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_ENCDATA
, (¡), (±r))

	)

1085 
	#sk_KRB5_ENCDATA_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_ENCDATA
, (¡), (v®), (i))

	)

1086 
	#sk_KRB5_ENCDATA_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_ENCDATA
, (¡), (cmp))

	)

1087 
	#sk_KRB5_ENCDATA_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_ENCDATA
, st)

	)

1088 
	#sk_KRB5_ENCDATA_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_ENCDATA
, (¡), (ä“_func))

	)

1089 
	#sk_KRB5_ENCDATA_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_ENCDATA
, (¡), (cİy_func), (ä“_func))

	)

1090 
	#sk_KRB5_ENCDATA_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_ENCDATA
, (¡))

	)

1091 
	#sk_KRB5_ENCDATA_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_ENCDATA
, (¡))

	)

1092 
	#sk_KRB5_ENCDATA_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_ENCDATA
, (¡))

	)

1093 
	#sk_KRB5_ENCDATA_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_ENCDATA
, (¡))

	)

1094 
	#sk_KRB5_ENCKEY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_ENCKEY
, (cmp))

	)

1095 
	#sk_KRB5_ENCKEY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_ENCKEY
)

	)

1096 
	#sk_KRB5_ENCKEY_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_ENCKEY
, (¡))

	)

1097 
	#sk_KRB5_ENCKEY_num
(
¡
è
	`SKM_sk_num
(
KRB5_ENCKEY
, (¡))

	)

1098 
	#sk_KRB5_ENCKEY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_ENCKEY
, (¡), (i))

	)

1099 
	#sk_KRB5_ENCKEY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_ENCKEY
, (¡), (i), (v®))

	)

1100 
	#sk_KRB5_ENCKEY_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_ENCKEY
, (¡))

	)

1101 
	#sk_KRB5_ENCKEY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_ENCKEY
, (¡), (v®))

	)

1102 
	#sk_KRB5_ENCKEY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_ENCKEY
, (¡), (v®))

	)

1103 
	#sk_KRB5_ENCKEY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_ENCKEY
, (¡), (v®))

	)

1104 
	#sk_KRB5_ENCKEY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_ENCKEY
, (¡), (v®))

	)

1105 
	#sk_KRB5_ENCKEY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_ENCKEY
, (¡), (i))

	)

1106 
	#sk_KRB5_ENCKEY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_ENCKEY
, (¡), (±r))

	)

1107 
	#sk_KRB5_ENCKEY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_ENCKEY
, (¡), (v®), (i))

	)

1108 
	#sk_KRB5_ENCKEY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_ENCKEY
, (¡), (cmp))

	)

1109 
	#sk_KRB5_ENCKEY_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_ENCKEY
, st)

	)

1110 
	#sk_KRB5_ENCKEY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_ENCKEY
, (¡), (ä“_func))

	)

1111 
	#sk_KRB5_ENCKEY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_ENCKEY
, (¡), (cİy_func), (ä“_func))

	)

1112 
	#sk_KRB5_ENCKEY_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_ENCKEY
, (¡))

	)

1113 
	#sk_KRB5_ENCKEY_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_ENCKEY
, (¡))

	)

1114 
	#sk_KRB5_ENCKEY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_ENCKEY
, (¡))

	)

1115 
	#sk_KRB5_ENCKEY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_ENCKEY
, (¡))

	)

1116 
	#sk_KRB5_PRINCNAME_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_PRINCNAME
, (cmp))

	)

1117 
	#sk_KRB5_PRINCNAME_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_PRINCNAME
)

	)

1118 
	#sk_KRB5_PRINCNAME_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_PRINCNAME
, (¡))

	)

1119 
	#sk_KRB5_PRINCNAME_num
(
¡
è
	`SKM_sk_num
(
KRB5_PRINCNAME
, (¡))

	)

1120 
	#sk_KRB5_PRINCNAME_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_PRINCNAME
, (¡), (i))

	)

1121 
	#sk_KRB5_PRINCNAME_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_PRINCNAME
, (¡), (i), (v®))

	)

1122 
	#sk_KRB5_PRINCNAME_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_PRINCNAME
, (¡))

	)

1123 
	#sk_KRB5_PRINCNAME_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_PRINCNAME
, (¡), (v®))

	)

1124 
	#sk_KRB5_PRINCNAME_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_PRINCNAME
, (¡), (v®))

	)

1125 
	#sk_KRB5_PRINCNAME_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_PRINCNAME
, (¡), (v®))

	)

1126 
	#sk_KRB5_PRINCNAME_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_PRINCNAME
, (¡), (v®))

	)

1127 
	#sk_KRB5_PRINCNAME_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_PRINCNAME
, (¡), (i))

	)

1128 
	#sk_KRB5_PRINCNAME_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_PRINCNAME
, (¡), (±r))

	)

1129 
	#sk_KRB5_PRINCNAME_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_PRINCNAME
, (¡), (v®), (i))

	)

1130 
	#sk_KRB5_PRINCNAME_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_PRINCNAME
, (¡), (cmp))

	)

1131 
	#sk_KRB5_PRINCNAME_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_PRINCNAME
, st)

	)

1132 
	#sk_KRB5_PRINCNAME_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_PRINCNAME
, (¡), (ä“_func))

	)

1133 
	#sk_KRB5_PRINCNAME_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_PRINCNAME
, (¡), (cİy_func), (ä“_func))

	)

1134 
	#sk_KRB5_PRINCNAME_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_PRINCNAME
, (¡))

	)

1135 
	#sk_KRB5_PRINCNAME_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_PRINCNAME
, (¡))

	)

1136 
	#sk_KRB5_PRINCNAME_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_PRINCNAME
, (¡))

	)

1137 
	#sk_KRB5_PRINCNAME_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_PRINCNAME
, (¡))

	)

1138 
	#sk_KRB5_TKTBODY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
KRB5_TKTBODY
, (cmp))

	)

1139 
	#sk_KRB5_TKTBODY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
KRB5_TKTBODY
)

	)

1140 
	#sk_KRB5_TKTBODY_ä“
(
¡
è
	`SKM_sk_ä“
(
KRB5_TKTBODY
, (¡))

	)

1141 
	#sk_KRB5_TKTBODY_num
(
¡
è
	`SKM_sk_num
(
KRB5_TKTBODY
, (¡))

	)

1142 
	#sk_KRB5_TKTBODY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
KRB5_TKTBODY
, (¡), (i))

	)

1143 
	#sk_KRB5_TKTBODY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
KRB5_TKTBODY
, (¡), (i), (v®))

	)

1144 
	#sk_KRB5_TKTBODY_z”o
(
¡
è
	`SKM_sk_z”o
(
KRB5_TKTBODY
, (¡))

	)

1145 
	#sk_KRB5_TKTBODY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
KRB5_TKTBODY
, (¡), (v®))

	)

1146 
	#sk_KRB5_TKTBODY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
KRB5_TKTBODY
, (¡), (v®))

	)

1147 
	#sk_KRB5_TKTBODY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
KRB5_TKTBODY
, (¡), (v®))

	)

1148 
	#sk_KRB5_TKTBODY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
KRB5_TKTBODY
, (¡), (v®))

	)

1149 
	#sk_KRB5_TKTBODY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
KRB5_TKTBODY
, (¡), (i))

	)

1150 
	#sk_KRB5_TKTBODY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
KRB5_TKTBODY
, (¡), (±r))

	)

1151 
	#sk_KRB5_TKTBODY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
KRB5_TKTBODY
, (¡), (v®), (i))

	)

1152 
	#sk_KRB5_TKTBODY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
KRB5_TKTBODY
, (¡), (cmp))

	)

1153 
	#sk_KRB5_TKTBODY_dup
(
¡
è
	`SKM_sk_dup
(
KRB5_TKTBODY
, st)

	)

1154 
	#sk_KRB5_TKTBODY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
KRB5_TKTBODY
, (¡), (ä“_func))

	)

1155 
	#sk_KRB5_TKTBODY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
KRB5_TKTBODY
, (¡), (cİy_func), (ä“_func))

	)

1156 
	#sk_KRB5_TKTBODY_shiá
(
¡
è
	`SKM_sk_shiá
(
KRB5_TKTBODY
, (¡))

	)

1157 
	#sk_KRB5_TKTBODY_pİ
(
¡
è
	`SKM_sk_pİ
(
KRB5_TKTBODY
, (¡))

	)

1158 
	#sk_KRB5_TKTBODY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
KRB5_TKTBODY
, (¡))

	)

1159 
	#sk_KRB5_TKTBODY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
KRB5_TKTBODY
, (¡))

	)

1160 
	#sk_MEM_OBJECT_DATA_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
MEM_OBJECT_DATA
, (cmp))

	)

1161 
	#sk_MEM_OBJECT_DATA_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
MEM_OBJECT_DATA
)

	)

1162 
	#sk_MEM_OBJECT_DATA_ä“
(
¡
è
	`SKM_sk_ä“
(
MEM_OBJECT_DATA
, (¡))

	)

1163 
	#sk_MEM_OBJECT_DATA_num
(
¡
è
	`SKM_sk_num
(
MEM_OBJECT_DATA
, (¡))

	)

1164 
	#sk_MEM_OBJECT_DATA_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
MEM_OBJECT_DATA
, (¡), (i))

	)

1165 
	#sk_MEM_OBJECT_DATA_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
MEM_OBJECT_DATA
, (¡), (i), (v®))

	)

1166 
	#sk_MEM_OBJECT_DATA_z”o
(
¡
è
	`SKM_sk_z”o
(
MEM_OBJECT_DATA
, (¡))

	)

1167 
	#sk_MEM_OBJECT_DATA_push
(
¡
, 
v®
è
	`SKM_sk_push
(
MEM_OBJECT_DATA
, (¡), (v®))

	)

1168 
	#sk_MEM_OBJECT_DATA_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
MEM_OBJECT_DATA
, (¡), (v®))

	)

1169 
	#sk_MEM_OBJECT_DATA_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
MEM_OBJECT_DATA
, (¡), (v®))

	)

1170 
	#sk_MEM_OBJECT_DATA_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
MEM_OBJECT_DATA
, (¡), (v®))

	)

1171 
	#sk_MEM_OBJECT_DATA_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
MEM_OBJECT_DATA
, (¡), (i))

	)

1172 
	#sk_MEM_OBJECT_DATA_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
MEM_OBJECT_DATA
, (¡), (±r))

	)

1173 
	#sk_MEM_OBJECT_DATA_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
MEM_OBJECT_DATA
, (¡), (v®), (i))

	)

1174 
	#sk_MEM_OBJECT_DATA_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
MEM_OBJECT_DATA
, (¡), (cmp))

	)

1175 
	#sk_MEM_OBJECT_DATA_dup
(
¡
è
	`SKM_sk_dup
(
MEM_OBJECT_DATA
, st)

	)

1176 
	#sk_MEM_OBJECT_DATA_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
MEM_OBJECT_DATA
, (¡), (ä“_func))

	)

1177 
	#sk_MEM_OBJECT_DATA_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
MEM_OBJECT_DATA
, (¡), (cİy_func), (ä“_func))

	)

1178 
	#sk_MEM_OBJECT_DATA_shiá
(
¡
è
	`SKM_sk_shiá
(
MEM_OBJECT_DATA
, (¡))

	)

1179 
	#sk_MEM_OBJECT_DATA_pİ
(
¡
è
	`SKM_sk_pİ
(
MEM_OBJECT_DATA
, (¡))

	)

1180 
	#sk_MEM_OBJECT_DATA_sÜt
(
¡
è
	`SKM_sk_sÜt
(
MEM_OBJECT_DATA
, (¡))

	)

1181 
	#sk_MEM_OBJECT_DATA_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
MEM_OBJECT_DATA
, (¡))

	)

1182 
	#sk_MIME_HEADER_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
MIME_HEADER
, (cmp))

	)

1183 
	#sk_MIME_HEADER_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
MIME_HEADER
)

	)

1184 
	#sk_MIME_HEADER_ä“
(
¡
è
	`SKM_sk_ä“
(
MIME_HEADER
, (¡))

	)

1185 
	#sk_MIME_HEADER_num
(
¡
è
	`SKM_sk_num
(
MIME_HEADER
, (¡))

	)

1186 
	#sk_MIME_HEADER_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
MIME_HEADER
, (¡), (i))

	)

1187 
	#sk_MIME_HEADER_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
MIME_HEADER
, (¡), (i), (v®))

	)

1188 
	#sk_MIME_HEADER_z”o
(
¡
è
	`SKM_sk_z”o
(
MIME_HEADER
, (¡))

	)

1189 
	#sk_MIME_HEADER_push
(
¡
, 
v®
è
	`SKM_sk_push
(
MIME_HEADER
, (¡), (v®))

	)

1190 
	#sk_MIME_HEADER_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
MIME_HEADER
, (¡), (v®))

	)

1191 
	#sk_MIME_HEADER_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
MIME_HEADER
, (¡), (v®))

	)

1192 
	#sk_MIME_HEADER_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
MIME_HEADER
, (¡), (v®))

	)

1193 
	#sk_MIME_HEADER_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
MIME_HEADER
, (¡), (i))

	)

1194 
	#sk_MIME_HEADER_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
MIME_HEADER
, (¡), (±r))

	)

1195 
	#sk_MIME_HEADER_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
MIME_HEADER
, (¡), (v®), (i))

	)

1196 
	#sk_MIME_HEADER_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
MIME_HEADER
, (¡), (cmp))

	)

1197 
	#sk_MIME_HEADER_dup
(
¡
è
	`SKM_sk_dup
(
MIME_HEADER
, st)

	)

1198 
	#sk_MIME_HEADER_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
MIME_HEADER
, (¡), (ä“_func))

	)

1199 
	#sk_MIME_HEADER_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
MIME_HEADER
, (¡), (cİy_func), (ä“_func))

	)

1200 
	#sk_MIME_HEADER_shiá
(
¡
è
	`SKM_sk_shiá
(
MIME_HEADER
, (¡))

	)

1201 
	#sk_MIME_HEADER_pİ
(
¡
è
	`SKM_sk_pİ
(
MIME_HEADER
, (¡))

	)

1202 
	#sk_MIME_HEADER_sÜt
(
¡
è
	`SKM_sk_sÜt
(
MIME_HEADER
, (¡))

	)

1203 
	#sk_MIME_HEADER_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
MIME_HEADER
, (¡))

	)

1204 
	#sk_MIME_PARAM_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
MIME_PARAM
, (cmp))

	)

1205 
	#sk_MIME_PARAM_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
MIME_PARAM
)

	)

1206 
	#sk_MIME_PARAM_ä“
(
¡
è
	`SKM_sk_ä“
(
MIME_PARAM
, (¡))

	)

1207 
	#sk_MIME_PARAM_num
(
¡
è
	`SKM_sk_num
(
MIME_PARAM
, (¡))

	)

1208 
	#sk_MIME_PARAM_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
MIME_PARAM
, (¡), (i))

	)

1209 
	#sk_MIME_PARAM_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
MIME_PARAM
, (¡), (i), (v®))

	)

1210 
	#sk_MIME_PARAM_z”o
(
¡
è
	`SKM_sk_z”o
(
MIME_PARAM
, (¡))

	)

1211 
	#sk_MIME_PARAM_push
(
¡
, 
v®
è
	`SKM_sk_push
(
MIME_PARAM
, (¡), (v®))

	)

1212 
	#sk_MIME_PARAM_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
MIME_PARAM
, (¡), (v®))

	)

1213 
	#sk_MIME_PARAM_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
MIME_PARAM
, (¡), (v®))

	)

1214 
	#sk_MIME_PARAM_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
MIME_PARAM
, (¡), (v®))

	)

1215 
	#sk_MIME_PARAM_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
MIME_PARAM
, (¡), (i))

	)

1216 
	#sk_MIME_PARAM_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
MIME_PARAM
, (¡), (±r))

	)

1217 
	#sk_MIME_PARAM_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
MIME_PARAM
, (¡), (v®), (i))

	)

1218 
	#sk_MIME_PARAM_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
MIME_PARAM
, (¡), (cmp))

	)

1219 
	#sk_MIME_PARAM_dup
(
¡
è
	`SKM_sk_dup
(
MIME_PARAM
, st)

	)

1220 
	#sk_MIME_PARAM_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
MIME_PARAM
, (¡), (ä“_func))

	)

1221 
	#sk_MIME_PARAM_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
MIME_PARAM
, (¡), (cİy_func), (ä“_func))

	)

1222 
	#sk_MIME_PARAM_shiá
(
¡
è
	`SKM_sk_shiá
(
MIME_PARAM
, (¡))

	)

1223 
	#sk_MIME_PARAM_pİ
(
¡
è
	`SKM_sk_pİ
(
MIME_PARAM
, (¡))

	)

1224 
	#sk_MIME_PARAM_sÜt
(
¡
è
	`SKM_sk_sÜt
(
MIME_PARAM
, (¡))

	)

1225 
	#sk_MIME_PARAM_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
MIME_PARAM
, (¡))

	)

1226 
	#sk_NAME_FUNCS_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
NAME_FUNCS
, (cmp))

	)

1227 
	#sk_NAME_FUNCS_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
NAME_FUNCS
)

	)

1228 
	#sk_NAME_FUNCS_ä“
(
¡
è
	`SKM_sk_ä“
(
NAME_FUNCS
, (¡))

	)

1229 
	#sk_NAME_FUNCS_num
(
¡
è
	`SKM_sk_num
(
NAME_FUNCS
, (¡))

	)

1230 
	#sk_NAME_FUNCS_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
NAME_FUNCS
, (¡), (i))

	)

1231 
	#sk_NAME_FUNCS_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
NAME_FUNCS
, (¡), (i), (v®))

	)

1232 
	#sk_NAME_FUNCS_z”o
(
¡
è
	`SKM_sk_z”o
(
NAME_FUNCS
, (¡))

	)

1233 
	#sk_NAME_FUNCS_push
(
¡
, 
v®
è
	`SKM_sk_push
(
NAME_FUNCS
, (¡), (v®))

	)

1234 
	#sk_NAME_FUNCS_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
NAME_FUNCS
, (¡), (v®))

	)

1235 
	#sk_NAME_FUNCS_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
NAME_FUNCS
, (¡), (v®))

	)

1236 
	#sk_NAME_FUNCS_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
NAME_FUNCS
, (¡), (v®))

	)

1237 
	#sk_NAME_FUNCS_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
NAME_FUNCS
, (¡), (i))

	)

1238 
	#sk_NAME_FUNCS_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
NAME_FUNCS
, (¡), (±r))

	)

1239 
	#sk_NAME_FUNCS_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
NAME_FUNCS
, (¡), (v®), (i))

	)

1240 
	#sk_NAME_FUNCS_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
NAME_FUNCS
, (¡), (cmp))

	)

1241 
	#sk_NAME_FUNCS_dup
(
¡
è
	`SKM_sk_dup
(
NAME_FUNCS
, st)

	)

1242 
	#sk_NAME_FUNCS_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
NAME_FUNCS
, (¡), (ä“_func))

	)

1243 
	#sk_NAME_FUNCS_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
NAME_FUNCS
, (¡), (cİy_func), (ä“_func))

	)

1244 
	#sk_NAME_FUNCS_shiá
(
¡
è
	`SKM_sk_shiá
(
NAME_FUNCS
, (¡))

	)

1245 
	#sk_NAME_FUNCS_pİ
(
¡
è
	`SKM_sk_pİ
(
NAME_FUNCS
, (¡))

	)

1246 
	#sk_NAME_FUNCS_sÜt
(
¡
è
	`SKM_sk_sÜt
(
NAME_FUNCS
, (¡))

	)

1247 
	#sk_NAME_FUNCS_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
NAME_FUNCS
, (¡))

	)

1248 
	#sk_OCSP_CERTID_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
OCSP_CERTID
, (cmp))

	)

1249 
	#sk_OCSP_CERTID_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
OCSP_CERTID
)

	)

1250 
	#sk_OCSP_CERTID_ä“
(
¡
è
	`SKM_sk_ä“
(
OCSP_CERTID
, (¡))

	)

1251 
	#sk_OCSP_CERTID_num
(
¡
è
	`SKM_sk_num
(
OCSP_CERTID
, (¡))

	)

1252 
	#sk_OCSP_CERTID_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
OCSP_CERTID
, (¡), (i))

	)

1253 
	#sk_OCSP_CERTID_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
OCSP_CERTID
, (¡), (i), (v®))

	)

1254 
	#sk_OCSP_CERTID_z”o
(
¡
è
	`SKM_sk_z”o
(
OCSP_CERTID
, (¡))

	)

1255 
	#sk_OCSP_CERTID_push
(
¡
, 
v®
è
	`SKM_sk_push
(
OCSP_CERTID
, (¡), (v®))

	)

1256 
	#sk_OCSP_CERTID_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
OCSP_CERTID
, (¡), (v®))

	)

1257 
	#sk_OCSP_CERTID_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
OCSP_CERTID
, (¡), (v®))

	)

1258 
	#sk_OCSP_CERTID_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
OCSP_CERTID
, (¡), (v®))

	)

1259 
	#sk_OCSP_CERTID_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OCSP_CERTID
, (¡), (i))

	)

1260 
	#sk_OCSP_CERTID_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
OCSP_CERTID
, (¡), (±r))

	)

1261 
	#sk_OCSP_CERTID_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
OCSP_CERTID
, (¡), (v®), (i))

	)

1262 
	#sk_OCSP_CERTID_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
OCSP_CERTID
, (¡), (cmp))

	)

1263 
	#sk_OCSP_CERTID_dup
(
¡
è
	`SKM_sk_dup
(
OCSP_CERTID
, st)

	)

1264 
	#sk_OCSP_CERTID_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
OCSP_CERTID
, (¡), (ä“_func))

	)

1265 
	#sk_OCSP_CERTID_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
OCSP_CERTID
, (¡), (cİy_func), (ä“_func))

	)

1266 
	#sk_OCSP_CERTID_shiá
(
¡
è
	`SKM_sk_shiá
(
OCSP_CERTID
, (¡))

	)

1267 
	#sk_OCSP_CERTID_pİ
(
¡
è
	`SKM_sk_pİ
(
OCSP_CERTID
, (¡))

	)

1268 
	#sk_OCSP_CERTID_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OCSP_CERTID
, (¡))

	)

1269 
	#sk_OCSP_CERTID_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OCSP_CERTID
, (¡))

	)

1270 
	#sk_OCSP_ONEREQ_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
OCSP_ONEREQ
, (cmp))

	)

1271 
	#sk_OCSP_ONEREQ_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
OCSP_ONEREQ
)

	)

1272 
	#sk_OCSP_ONEREQ_ä“
(
¡
è
	`SKM_sk_ä“
(
OCSP_ONEREQ
, (¡))

	)

1273 
	#sk_OCSP_ONEREQ_num
(
¡
è
	`SKM_sk_num
(
OCSP_ONEREQ
, (¡))

	)

1274 
	#sk_OCSP_ONEREQ_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
OCSP_ONEREQ
, (¡), (i))

	)

1275 
	#sk_OCSP_ONEREQ_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
OCSP_ONEREQ
, (¡), (i), (v®))

	)

1276 
	#sk_OCSP_ONEREQ_z”o
(
¡
è
	`SKM_sk_z”o
(
OCSP_ONEREQ
, (¡))

	)

1277 
	#sk_OCSP_ONEREQ_push
(
¡
, 
v®
è
	`SKM_sk_push
(
OCSP_ONEREQ
, (¡), (v®))

	)

1278 
	#sk_OCSP_ONEREQ_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
OCSP_ONEREQ
, (¡), (v®))

	)

1279 
	#sk_OCSP_ONEREQ_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
OCSP_ONEREQ
, (¡), (v®))

	)

1280 
	#sk_OCSP_ONEREQ_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
OCSP_ONEREQ
, (¡), (v®))

	)

1281 
	#sk_OCSP_ONEREQ_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OCSP_ONEREQ
, (¡), (i))

	)

1282 
	#sk_OCSP_ONEREQ_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
OCSP_ONEREQ
, (¡), (±r))

	)

1283 
	#sk_OCSP_ONEREQ_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
OCSP_ONEREQ
, (¡), (v®), (i))

	)

1284 
	#sk_OCSP_ONEREQ_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
OCSP_ONEREQ
, (¡), (cmp))

	)

1285 
	#sk_OCSP_ONEREQ_dup
(
¡
è
	`SKM_sk_dup
(
OCSP_ONEREQ
, st)

	)

1286 
	#sk_OCSP_ONEREQ_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
OCSP_ONEREQ
, (¡), (ä“_func))

	)

1287 
	#sk_OCSP_ONEREQ_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
OCSP_ONEREQ
, (¡), (cİy_func), (ä“_func))

	)

1288 
	#sk_OCSP_ONEREQ_shiá
(
¡
è
	`SKM_sk_shiá
(
OCSP_ONEREQ
, (¡))

	)

1289 
	#sk_OCSP_ONEREQ_pİ
(
¡
è
	`SKM_sk_pİ
(
OCSP_ONEREQ
, (¡))

	)

1290 
	#sk_OCSP_ONEREQ_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OCSP_ONEREQ
, (¡))

	)

1291 
	#sk_OCSP_ONEREQ_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OCSP_ONEREQ
, (¡))

	)

1292 
	#sk_OCSP_RESPID_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
OCSP_RESPID
, (cmp))

	)

1293 
	#sk_OCSP_RESPID_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
OCSP_RESPID
)

	)

1294 
	#sk_OCSP_RESPID_ä“
(
¡
è
	`SKM_sk_ä“
(
OCSP_RESPID
, (¡))

	)

1295 
	#sk_OCSP_RESPID_num
(
¡
è
	`SKM_sk_num
(
OCSP_RESPID
, (¡))

	)

1296 
	#sk_OCSP_RESPID_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
OCSP_RESPID
, (¡), (i))

	)

1297 
	#sk_OCSP_RESPID_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
OCSP_RESPID
, (¡), (i), (v®))

	)

1298 
	#sk_OCSP_RESPID_z”o
(
¡
è
	`SKM_sk_z”o
(
OCSP_RESPID
, (¡))

	)

1299 
	#sk_OCSP_RESPID_push
(
¡
, 
v®
è
	`SKM_sk_push
(
OCSP_RESPID
, (¡), (v®))

	)

1300 
	#sk_OCSP_RESPID_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
OCSP_RESPID
, (¡), (v®))

	)

1301 
	#sk_OCSP_RESPID_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
OCSP_RESPID
, (¡), (v®))

	)

1302 
	#sk_OCSP_RESPID_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
OCSP_RESPID
, (¡), (v®))

	)

1303 
	#sk_OCSP_RESPID_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OCSP_RESPID
, (¡), (i))

	)

1304 
	#sk_OCSP_RESPID_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
OCSP_RESPID
, (¡), (±r))

	)

1305 
	#sk_OCSP_RESPID_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
OCSP_RESPID
, (¡), (v®), (i))

	)

1306 
	#sk_OCSP_RESPID_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
OCSP_RESPID
, (¡), (cmp))

	)

1307 
	#sk_OCSP_RESPID_dup
(
¡
è
	`SKM_sk_dup
(
OCSP_RESPID
, st)

	)

1308 
	#sk_OCSP_RESPID_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
OCSP_RESPID
, (¡), (ä“_func))

	)

1309 
	#sk_OCSP_RESPID_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
OCSP_RESPID
, (¡), (cİy_func), (ä“_func))

	)

1310 
	#sk_OCSP_RESPID_shiá
(
¡
è
	`SKM_sk_shiá
(
OCSP_RESPID
, (¡))

	)

1311 
	#sk_OCSP_RESPID_pİ
(
¡
è
	`SKM_sk_pİ
(
OCSP_RESPID
, (¡))

	)

1312 
	#sk_OCSP_RESPID_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OCSP_RESPID
, (¡))

	)

1313 
	#sk_OCSP_RESPID_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OCSP_RESPID
, (¡))

	)

1314 
	#sk_OCSP_SINGLERESP_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
OCSP_SINGLERESP
, (cmp))

	)

1315 
	#sk_OCSP_SINGLERESP_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
OCSP_SINGLERESP
)

	)

1316 
	#sk_OCSP_SINGLERESP_ä“
(
¡
è
	`SKM_sk_ä“
(
OCSP_SINGLERESP
, (¡))

	)

1317 
	#sk_OCSP_SINGLERESP_num
(
¡
è
	`SKM_sk_num
(
OCSP_SINGLERESP
, (¡))

	)

1318 
	#sk_OCSP_SINGLERESP_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
OCSP_SINGLERESP
, (¡), (i))

	)

1319 
	#sk_OCSP_SINGLERESP_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
OCSP_SINGLERESP
, (¡), (i), (v®))

	)

1320 
	#sk_OCSP_SINGLERESP_z”o
(
¡
è
	`SKM_sk_z”o
(
OCSP_SINGLERESP
, (¡))

	)

1321 
	#sk_OCSP_SINGLERESP_push
(
¡
, 
v®
è
	`SKM_sk_push
(
OCSP_SINGLERESP
, (¡), (v®))

	)

1322 
	#sk_OCSP_SINGLERESP_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
OCSP_SINGLERESP
, (¡), (v®))

	)

1323 
	#sk_OCSP_SINGLERESP_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
OCSP_SINGLERESP
, (¡), (v®))

	)

1324 
	#sk_OCSP_SINGLERESP_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
OCSP_SINGLERESP
, (¡), (v®))

	)

1325 
	#sk_OCSP_SINGLERESP_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OCSP_SINGLERESP
, (¡), (i))

	)

1326 
	#sk_OCSP_SINGLERESP_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
OCSP_SINGLERESP
, (¡), (±r))

	)

1327 
	#sk_OCSP_SINGLERESP_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
OCSP_SINGLERESP
, (¡), (v®), (i))

	)

1328 
	#sk_OCSP_SINGLERESP_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
OCSP_SINGLERESP
, (¡), (cmp))

	)

1329 
	#sk_OCSP_SINGLERESP_dup
(
¡
è
	`SKM_sk_dup
(
OCSP_SINGLERESP
, st)

	)

1330 
	#sk_OCSP_SINGLERESP_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
OCSP_SINGLERESP
, (¡), (ä“_func))

	)

1331 
	#sk_OCSP_SINGLERESP_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
OCSP_SINGLERESP
, (¡), (cİy_func), (ä“_func))

	)

1332 
	#sk_OCSP_SINGLERESP_shiá
(
¡
è
	`SKM_sk_shiá
(
OCSP_SINGLERESP
, (¡))

	)

1333 
	#sk_OCSP_SINGLERESP_pİ
(
¡
è
	`SKM_sk_pİ
(
OCSP_SINGLERESP
, (¡))

	)

1334 
	#sk_OCSP_SINGLERESP_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OCSP_SINGLERESP
, (¡))

	)

1335 
	#sk_OCSP_SINGLERESP_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OCSP_SINGLERESP
, (¡))

	)

1336 
	#sk_PKCS12_SAFEBAG_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
PKCS12_SAFEBAG
, (cmp))

	)

1337 
	#sk_PKCS12_SAFEBAG_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
PKCS12_SAFEBAG
)

	)

1338 
	#sk_PKCS12_SAFEBAG_ä“
(
¡
è
	`SKM_sk_ä“
(
PKCS12_SAFEBAG
, (¡))

	)

1339 
	#sk_PKCS12_SAFEBAG_num
(
¡
è
	`SKM_sk_num
(
PKCS12_SAFEBAG
, (¡))

	)

1340 
	#sk_PKCS12_SAFEBAG_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
PKCS12_SAFEBAG
, (¡), (i))

	)

1341 
	#sk_PKCS12_SAFEBAG_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
PKCS12_SAFEBAG
, (¡), (i), (v®))

	)

1342 
	#sk_PKCS12_SAFEBAG_z”o
(
¡
è
	`SKM_sk_z”o
(
PKCS12_SAFEBAG
, (¡))

	)

1343 
	#sk_PKCS12_SAFEBAG_push
(
¡
, 
v®
è
	`SKM_sk_push
(
PKCS12_SAFEBAG
, (¡), (v®))

	)

1344 
	#sk_PKCS12_SAFEBAG_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
PKCS12_SAFEBAG
, (¡), (v®))

	)

1345 
	#sk_PKCS12_SAFEBAG_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
PKCS12_SAFEBAG
, (¡), (v®))

	)

1346 
	#sk_PKCS12_SAFEBAG_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
PKCS12_SAFEBAG
, (¡), (v®))

	)

1347 
	#sk_PKCS12_SAFEBAG_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
PKCS12_SAFEBAG
, (¡), (i))

	)

1348 
	#sk_PKCS12_SAFEBAG_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
PKCS12_SAFEBAG
, (¡), (±r))

	)

1349 
	#sk_PKCS12_SAFEBAG_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
PKCS12_SAFEBAG
, (¡), (v®), (i))

	)

1350 
	#sk_PKCS12_SAFEBAG_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
PKCS12_SAFEBAG
, (¡), (cmp))

	)

1351 
	#sk_PKCS12_SAFEBAG_dup
(
¡
è
	`SKM_sk_dup
(
PKCS12_SAFEBAG
, st)

	)

1352 
	#sk_PKCS12_SAFEBAG_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
PKCS12_SAFEBAG
, (¡), (ä“_func))

	)

1353 
	#sk_PKCS12_SAFEBAG_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
PKCS12_SAFEBAG
, (¡), (cİy_func), (ä“_func))

	)

1354 
	#sk_PKCS12_SAFEBAG_shiá
(
¡
è
	`SKM_sk_shiá
(
PKCS12_SAFEBAG
, (¡))

	)

1355 
	#sk_PKCS12_SAFEBAG_pİ
(
¡
è
	`SKM_sk_pİ
(
PKCS12_SAFEBAG
, (¡))

	)

1356 
	#sk_PKCS12_SAFEBAG_sÜt
(
¡
è
	`SKM_sk_sÜt
(
PKCS12_SAFEBAG
, (¡))

	)

1357 
	#sk_PKCS12_SAFEBAG_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
PKCS12_SAFEBAG
, (¡))

	)

1358 
	#sk_PKCS7_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
PKCS7
, (cmp))

	)

1359 
	#sk_PKCS7_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
PKCS7
)

	)

1360 
	#sk_PKCS7_ä“
(
¡
è
	`SKM_sk_ä“
(
PKCS7
, (¡))

	)

1361 
	#sk_PKCS7_num
(
¡
è
	`SKM_sk_num
(
PKCS7
, (¡))

	)

1362 
	#sk_PKCS7_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
PKCS7
, (¡), (i))

	)

1363 
	#sk_PKCS7_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
PKCS7
, (¡), (i), (v®))

	)

1364 
	#sk_PKCS7_z”o
(
¡
è
	`SKM_sk_z”o
(
PKCS7
, (¡))

	)

1365 
	#sk_PKCS7_push
(
¡
, 
v®
è
	`SKM_sk_push
(
PKCS7
, (¡), (v®))

	)

1366 
	#sk_PKCS7_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
PKCS7
, (¡), (v®))

	)

1367 
	#sk_PKCS7_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
PKCS7
, (¡), (v®))

	)

1368 
	#sk_PKCS7_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
PKCS7
, (¡), (v®))

	)

1369 
	#sk_PKCS7_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
PKCS7
, (¡), (i))

	)

1370 
	#sk_PKCS7_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
PKCS7
, (¡), (±r))

	)

1371 
	#sk_PKCS7_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
PKCS7
, (¡), (v®), (i))

	)

1372 
	#sk_PKCS7_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
PKCS7
, (¡), (cmp))

	)

1373 
	#sk_PKCS7_dup
(
¡
è
	`SKM_sk_dup
(
PKCS7
, st)

	)

1374 
	#sk_PKCS7_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
PKCS7
, (¡), (ä“_func))

	)

1375 
	#sk_PKCS7_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
PKCS7
, (¡), (cİy_func), (ä“_func))

	)

1376 
	#sk_PKCS7_shiá
(
¡
è
	`SKM_sk_shiá
(
PKCS7
, (¡))

	)

1377 
	#sk_PKCS7_pİ
(
¡
è
	`SKM_sk_pİ
(
PKCS7
, (¡))

	)

1378 
	#sk_PKCS7_sÜt
(
¡
è
	`SKM_sk_sÜt
(
PKCS7
, (¡))

	)

1379 
	#sk_PKCS7_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
PKCS7
, (¡))

	)

1380 
	#sk_PKCS7_RECIP_INFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
PKCS7_RECIP_INFO
, (cmp))

	)

1381 
	#sk_PKCS7_RECIP_INFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
PKCS7_RECIP_INFO
)

	)

1382 
	#sk_PKCS7_RECIP_INFO_ä“
(
¡
è
	`SKM_sk_ä“
(
PKCS7_RECIP_INFO
, (¡))

	)

1383 
	#sk_PKCS7_RECIP_INFO_num
(
¡
è
	`SKM_sk_num
(
PKCS7_RECIP_INFO
, (¡))

	)

1384 
	#sk_PKCS7_RECIP_INFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
PKCS7_RECIP_INFO
, (¡), (i))

	)

1385 
	#sk_PKCS7_RECIP_INFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
PKCS7_RECIP_INFO
, (¡), (i), (v®))

	)

1386 
	#sk_PKCS7_RECIP_INFO_z”o
(
¡
è
	`SKM_sk_z”o
(
PKCS7_RECIP_INFO
, (¡))

	)

1387 
	#sk_PKCS7_RECIP_INFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
PKCS7_RECIP_INFO
, (¡), (v®))

	)

1388 
	#sk_PKCS7_RECIP_INFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
PKCS7_RECIP_INFO
, (¡), (v®))

	)

1389 
	#sk_PKCS7_RECIP_INFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
PKCS7_RECIP_INFO
, (¡), (v®))

	)

1390 
	#sk_PKCS7_RECIP_INFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
PKCS7_RECIP_INFO
, (¡), (v®))

	)

1391 
	#sk_PKCS7_RECIP_INFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
PKCS7_RECIP_INFO
, (¡), (i))

	)

1392 
	#sk_PKCS7_RECIP_INFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
PKCS7_RECIP_INFO
, (¡), (±r))

	)

1393 
	#sk_PKCS7_RECIP_INFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
PKCS7_RECIP_INFO
, (¡), (v®), (i))

	)

1394 
	#sk_PKCS7_RECIP_INFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
PKCS7_RECIP_INFO
, (¡), (cmp))

	)

1395 
	#sk_PKCS7_RECIP_INFO_dup
(
¡
è
	`SKM_sk_dup
(
PKCS7_RECIP_INFO
, st)

	)

1396 
	#sk_PKCS7_RECIP_INFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
PKCS7_RECIP_INFO
, (¡), (ä“_func))

	)

1397 
	#sk_PKCS7_RECIP_INFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
PKCS7_RECIP_INFO
, (¡), (cİy_func), (ä“_func))

	)

1398 
	#sk_PKCS7_RECIP_INFO_shiá
(
¡
è
	`SKM_sk_shiá
(
PKCS7_RECIP_INFO
, (¡))

	)

1399 
	#sk_PKCS7_RECIP_INFO_pİ
(
¡
è
	`SKM_sk_pİ
(
PKCS7_RECIP_INFO
, (¡))

	)

1400 
	#sk_PKCS7_RECIP_INFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
PKCS7_RECIP_INFO
, (¡))

	)

1401 
	#sk_PKCS7_RECIP_INFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
PKCS7_RECIP_INFO
, (¡))

	)

1402 
	#sk_PKCS7_SIGNER_INFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
PKCS7_SIGNER_INFO
, (cmp))

	)

1403 
	#sk_PKCS7_SIGNER_INFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
PKCS7_SIGNER_INFO
)

	)

1404 
	#sk_PKCS7_SIGNER_INFO_ä“
(
¡
è
	`SKM_sk_ä“
(
PKCS7_SIGNER_INFO
, (¡))

	)

1405 
	#sk_PKCS7_SIGNER_INFO_num
(
¡
è
	`SKM_sk_num
(
PKCS7_SIGNER_INFO
, (¡))

	)

1406 
	#sk_PKCS7_SIGNER_INFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
PKCS7_SIGNER_INFO
, (¡), (i))

	)

1407 
	#sk_PKCS7_SIGNER_INFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
PKCS7_SIGNER_INFO
, (¡), (i), (v®))

	)

1408 
	#sk_PKCS7_SIGNER_INFO_z”o
(
¡
è
	`SKM_sk_z”o
(
PKCS7_SIGNER_INFO
, (¡))

	)

1409 
	#sk_PKCS7_SIGNER_INFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
PKCS7_SIGNER_INFO
, (¡), (v®))

	)

1410 
	#sk_PKCS7_SIGNER_INFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
PKCS7_SIGNER_INFO
, (¡), (v®))

	)

1411 
	#sk_PKCS7_SIGNER_INFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
PKCS7_SIGNER_INFO
, (¡), (v®))

	)

1412 
	#sk_PKCS7_SIGNER_INFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
PKCS7_SIGNER_INFO
, (¡), (v®))

	)

1413 
	#sk_PKCS7_SIGNER_INFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
PKCS7_SIGNER_INFO
, (¡), (i))

	)

1414 
	#sk_PKCS7_SIGNER_INFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
PKCS7_SIGNER_INFO
, (¡), (±r))

	)

1415 
	#sk_PKCS7_SIGNER_INFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
PKCS7_SIGNER_INFO
, (¡), (v®), (i))

	)

1416 
	#sk_PKCS7_SIGNER_INFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
PKCS7_SIGNER_INFO
, (¡), (cmp))

	)

1417 
	#sk_PKCS7_SIGNER_INFO_dup
(
¡
è
	`SKM_sk_dup
(
PKCS7_SIGNER_INFO
, st)

	)

1418 
	#sk_PKCS7_SIGNER_INFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
PKCS7_SIGNER_INFO
, (¡), (ä“_func))

	)

1419 
	#sk_PKCS7_SIGNER_INFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
PKCS7_SIGNER_INFO
, (¡), (cİy_func), (ä“_func))

	)

1420 
	#sk_PKCS7_SIGNER_INFO_shiá
(
¡
è
	`SKM_sk_shiá
(
PKCS7_SIGNER_INFO
, (¡))

	)

1421 
	#sk_PKCS7_SIGNER_INFO_pİ
(
¡
è
	`SKM_sk_pİ
(
PKCS7_SIGNER_INFO
, (¡))

	)

1422 
	#sk_PKCS7_SIGNER_INFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
PKCS7_SIGNER_INFO
, (¡))

	)

1423 
	#sk_PKCS7_SIGNER_INFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
PKCS7_SIGNER_INFO
, (¡))

	)

1424 
	#sk_POLICYINFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
POLICYINFO
, (cmp))

	)

1425 
	#sk_POLICYINFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
POLICYINFO
)

	)

1426 
	#sk_POLICYINFO_ä“
(
¡
è
	`SKM_sk_ä“
(
POLICYINFO
, (¡))

	)

1427 
	#sk_POLICYINFO_num
(
¡
è
	`SKM_sk_num
(
POLICYINFO
, (¡))

	)

1428 
	#sk_POLICYINFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
POLICYINFO
, (¡), (i))

	)

1429 
	#sk_POLICYINFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
POLICYINFO
, (¡), (i), (v®))

	)

1430 
	#sk_POLICYINFO_z”o
(
¡
è
	`SKM_sk_z”o
(
POLICYINFO
, (¡))

	)

1431 
	#sk_POLICYINFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
POLICYINFO
, (¡), (v®))

	)

1432 
	#sk_POLICYINFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
POLICYINFO
, (¡), (v®))

	)

1433 
	#sk_POLICYINFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
POLICYINFO
, (¡), (v®))

	)

1434 
	#sk_POLICYINFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
POLICYINFO
, (¡), (v®))

	)

1435 
	#sk_POLICYINFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
POLICYINFO
, (¡), (i))

	)

1436 
	#sk_POLICYINFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
POLICYINFO
, (¡), (±r))

	)

1437 
	#sk_POLICYINFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
POLICYINFO
, (¡), (v®), (i))

	)

1438 
	#sk_POLICYINFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
POLICYINFO
, (¡), (cmp))

	)

1439 
	#sk_POLICYINFO_dup
(
¡
è
	`SKM_sk_dup
(
POLICYINFO
, st)

	)

1440 
	#sk_POLICYINFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
POLICYINFO
, (¡), (ä“_func))

	)

1441 
	#sk_POLICYINFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
POLICYINFO
, (¡), (cİy_func), (ä“_func))

	)

1442 
	#sk_POLICYINFO_shiá
(
¡
è
	`SKM_sk_shiá
(
POLICYINFO
, (¡))

	)

1443 
	#sk_POLICYINFO_pİ
(
¡
è
	`SKM_sk_pİ
(
POLICYINFO
, (¡))

	)

1444 
	#sk_POLICYINFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
POLICYINFO
, (¡))

	)

1445 
	#sk_POLICYINFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
POLICYINFO
, (¡))

	)

1446 
	#sk_POLICYQUALINFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
POLICYQUALINFO
, (cmp))

	)

1447 
	#sk_POLICYQUALINFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
POLICYQUALINFO
)

	)

1448 
	#sk_POLICYQUALINFO_ä“
(
¡
è
	`SKM_sk_ä“
(
POLICYQUALINFO
, (¡))

	)

1449 
	#sk_POLICYQUALINFO_num
(
¡
è
	`SKM_sk_num
(
POLICYQUALINFO
, (¡))

	)

1450 
	#sk_POLICYQUALINFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
POLICYQUALINFO
, (¡), (i))

	)

1451 
	#sk_POLICYQUALINFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
POLICYQUALINFO
, (¡), (i), (v®))

	)

1452 
	#sk_POLICYQUALINFO_z”o
(
¡
è
	`SKM_sk_z”o
(
POLICYQUALINFO
, (¡))

	)

1453 
	#sk_POLICYQUALINFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
POLICYQUALINFO
, (¡), (v®))

	)

1454 
	#sk_POLICYQUALINFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
POLICYQUALINFO
, (¡), (v®))

	)

1455 
	#sk_POLICYQUALINFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
POLICYQUALINFO
, (¡), (v®))

	)

1456 
	#sk_POLICYQUALINFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
POLICYQUALINFO
, (¡), (v®))

	)

1457 
	#sk_POLICYQUALINFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
POLICYQUALINFO
, (¡), (i))

	)

1458 
	#sk_POLICYQUALINFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
POLICYQUALINFO
, (¡), (±r))

	)

1459 
	#sk_POLICYQUALINFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
POLICYQUALINFO
, (¡), (v®), (i))

	)

1460 
	#sk_POLICYQUALINFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
POLICYQUALINFO
, (¡), (cmp))

	)

1461 
	#sk_POLICYQUALINFO_dup
(
¡
è
	`SKM_sk_dup
(
POLICYQUALINFO
, st)

	)

1462 
	#sk_POLICYQUALINFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
POLICYQUALINFO
, (¡), (ä“_func))

	)

1463 
	#sk_POLICYQUALINFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
POLICYQUALINFO
, (¡), (cİy_func), (ä“_func))

	)

1464 
	#sk_POLICYQUALINFO_shiá
(
¡
è
	`SKM_sk_shiá
(
POLICYQUALINFO
, (¡))

	)

1465 
	#sk_POLICYQUALINFO_pİ
(
¡
è
	`SKM_sk_pİ
(
POLICYQUALINFO
, (¡))

	)

1466 
	#sk_POLICYQUALINFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
POLICYQUALINFO
, (¡))

	)

1467 
	#sk_POLICYQUALINFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
POLICYQUALINFO
, (¡))

	)

1468 
	#sk_POLICY_MAPPING_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
POLICY_MAPPING
, (cmp))

	)

1469 
	#sk_POLICY_MAPPING_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
POLICY_MAPPING
)

	)

1470 
	#sk_POLICY_MAPPING_ä“
(
¡
è
	`SKM_sk_ä“
(
POLICY_MAPPING
, (¡))

	)

1471 
	#sk_POLICY_MAPPING_num
(
¡
è
	`SKM_sk_num
(
POLICY_MAPPING
, (¡))

	)

1472 
	#sk_POLICY_MAPPING_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
POLICY_MAPPING
, (¡), (i))

	)

1473 
	#sk_POLICY_MAPPING_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
POLICY_MAPPING
, (¡), (i), (v®))

	)

1474 
	#sk_POLICY_MAPPING_z”o
(
¡
è
	`SKM_sk_z”o
(
POLICY_MAPPING
, (¡))

	)

1475 
	#sk_POLICY_MAPPING_push
(
¡
, 
v®
è
	`SKM_sk_push
(
POLICY_MAPPING
, (¡), (v®))

	)

1476 
	#sk_POLICY_MAPPING_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
POLICY_MAPPING
, (¡), (v®))

	)

1477 
	#sk_POLICY_MAPPING_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
POLICY_MAPPING
, (¡), (v®))

	)

1478 
	#sk_POLICY_MAPPING_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
POLICY_MAPPING
, (¡), (v®))

	)

1479 
	#sk_POLICY_MAPPING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
POLICY_MAPPING
, (¡), (i))

	)

1480 
	#sk_POLICY_MAPPING_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
POLICY_MAPPING
, (¡), (±r))

	)

1481 
	#sk_POLICY_MAPPING_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
POLICY_MAPPING
, (¡), (v®), (i))

	)

1482 
	#sk_POLICY_MAPPING_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
POLICY_MAPPING
, (¡), (cmp))

	)

1483 
	#sk_POLICY_MAPPING_dup
(
¡
è
	`SKM_sk_dup
(
POLICY_MAPPING
, st)

	)

1484 
	#sk_POLICY_MAPPING_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
POLICY_MAPPING
, (¡), (ä“_func))

	)

1485 
	#sk_POLICY_MAPPING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
POLICY_MAPPING
, (¡), (cİy_func), (ä“_func))

	)

1486 
	#sk_POLICY_MAPPING_shiá
(
¡
è
	`SKM_sk_shiá
(
POLICY_MAPPING
, (¡))

	)

1487 
	#sk_POLICY_MAPPING_pİ
(
¡
è
	`SKM_sk_pİ
(
POLICY_MAPPING
, (¡))

	)

1488 
	#sk_POLICY_MAPPING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
POLICY_MAPPING
, (¡))

	)

1489 
	#sk_POLICY_MAPPING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
POLICY_MAPPING
, (¡))

	)

1490 
	#sk_SCT_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SCT
, (cmp))

	)

1491 
	#sk_SCT_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SCT
)

	)

1492 
	#sk_SCT_ä“
(
¡
è
	`SKM_sk_ä“
(
SCT
, (¡))

	)

1493 
	#sk_SCT_num
(
¡
è
	`SKM_sk_num
(
SCT
, (¡))

	)

1494 
	#sk_SCT_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SCT
, (¡), (i))

	)

1495 
	#sk_SCT_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SCT
, (¡), (i), (v®))

	)

1496 
	#sk_SCT_z”o
(
¡
è
	`SKM_sk_z”o
(
SCT
, (¡))

	)

1497 
	#sk_SCT_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SCT
, (¡), (v®))

	)

1498 
	#sk_SCT_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SCT
, (¡), (v®))

	)

1499 
	#sk_SCT_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SCT
, (¡), (v®))

	)

1500 
	#sk_SCT_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SCT
, (¡), (v®))

	)

1501 
	#sk_SCT_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SCT
, (¡), (i))

	)

1502 
	#sk_SCT_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SCT
, (¡), (±r))

	)

1503 
	#sk_SCT_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SCT
, (¡), (v®), (i))

	)

1504 
	#sk_SCT_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SCT
, (¡), (cmp))

	)

1505 
	#sk_SCT_dup
(
¡
è
	`SKM_sk_dup
(
SCT
, st)

	)

1506 
	#sk_SCT_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SCT
, (¡), (ä“_func))

	)

1507 
	#sk_SCT_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SCT
, (¡), (cİy_func), (ä“_func))

	)

1508 
	#sk_SCT_shiá
(
¡
è
	`SKM_sk_shiá
(
SCT
, (¡))

	)

1509 
	#sk_SCT_pİ
(
¡
è
	`SKM_sk_pİ
(
SCT
, (¡))

	)

1510 
	#sk_SCT_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SCT
, (¡))

	)

1511 
	#sk_SCT_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SCT
, (¡))

	)

1512 
	#sk_SRP_gN_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SRP_gN
, (cmp))

	)

1513 
	#sk_SRP_gN_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SRP_gN
)

	)

1514 
	#sk_SRP_gN_ä“
(
¡
è
	`SKM_sk_ä“
(
SRP_gN
, (¡))

	)

1515 
	#sk_SRP_gN_num
(
¡
è
	`SKM_sk_num
(
SRP_gN
, (¡))

	)

1516 
	#sk_SRP_gN_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SRP_gN
, (¡), (i))

	)

1517 
	#sk_SRP_gN_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SRP_gN
, (¡), (i), (v®))

	)

1518 
	#sk_SRP_gN_z”o
(
¡
è
	`SKM_sk_z”o
(
SRP_gN
, (¡))

	)

1519 
	#sk_SRP_gN_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SRP_gN
, (¡), (v®))

	)

1520 
	#sk_SRP_gN_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SRP_gN
, (¡), (v®))

	)

1521 
	#sk_SRP_gN_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SRP_gN
, (¡), (v®))

	)

1522 
	#sk_SRP_gN_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SRP_gN
, (¡), (v®))

	)

1523 
	#sk_SRP_gN_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SRP_gN
, (¡), (i))

	)

1524 
	#sk_SRP_gN_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SRP_gN
, (¡), (±r))

	)

1525 
	#sk_SRP_gN_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SRP_gN
, (¡), (v®), (i))

	)

1526 
	#sk_SRP_gN_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SRP_gN
, (¡), (cmp))

	)

1527 
	#sk_SRP_gN_dup
(
¡
è
	`SKM_sk_dup
(
SRP_gN
, st)

	)

1528 
	#sk_SRP_gN_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SRP_gN
, (¡), (ä“_func))

	)

1529 
	#sk_SRP_gN_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SRP_gN
, (¡), (cİy_func), (ä“_func))

	)

1530 
	#sk_SRP_gN_shiá
(
¡
è
	`SKM_sk_shiá
(
SRP_gN
, (¡))

	)

1531 
	#sk_SRP_gN_pİ
(
¡
è
	`SKM_sk_pİ
(
SRP_gN
, (¡))

	)

1532 
	#sk_SRP_gN_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SRP_gN
, (¡))

	)

1533 
	#sk_SRP_gN_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SRP_gN
, (¡))

	)

1534 
	#sk_SRP_gN_ÿche_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SRP_gN_ÿche
, (cmp))

	)

1535 
	#sk_SRP_gN_ÿche_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SRP_gN_ÿche
)

	)

1536 
	#sk_SRP_gN_ÿche_ä“
(
¡
è
	`SKM_sk_ä“
(
SRP_gN_ÿche
, (¡))

	)

1537 
	#sk_SRP_gN_ÿche_num
(
¡
è
	`SKM_sk_num
(
SRP_gN_ÿche
, (¡))

	)

1538 
	#sk_SRP_gN_ÿche_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SRP_gN_ÿche
, (¡), (i))

	)

1539 
	#sk_SRP_gN_ÿche_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SRP_gN_ÿche
, (¡), (i), (v®))

	)

1540 
	#sk_SRP_gN_ÿche_z”o
(
¡
è
	`SKM_sk_z”o
(
SRP_gN_ÿche
, (¡))

	)

1541 
	#sk_SRP_gN_ÿche_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SRP_gN_ÿche
, (¡), (v®))

	)

1542 
	#sk_SRP_gN_ÿche_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SRP_gN_ÿche
, (¡), (v®))

	)

1543 
	#sk_SRP_gN_ÿche_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SRP_gN_ÿche
, (¡), (v®))

	)

1544 
	#sk_SRP_gN_ÿche_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SRP_gN_ÿche
, (¡), (v®))

	)

1545 
	#sk_SRP_gN_ÿche_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SRP_gN_ÿche
, (¡), (i))

	)

1546 
	#sk_SRP_gN_ÿche_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SRP_gN_ÿche
, (¡), (±r))

	)

1547 
	#sk_SRP_gN_ÿche_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SRP_gN_ÿche
, (¡), (v®), (i))

	)

1548 
	#sk_SRP_gN_ÿche_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SRP_gN_ÿche
, (¡), (cmp))

	)

1549 
	#sk_SRP_gN_ÿche_dup
(
¡
è
	`SKM_sk_dup
(
SRP_gN_ÿche
, st)

	)

1550 
	#sk_SRP_gN_ÿche_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SRP_gN_ÿche
, (¡), (ä“_func))

	)

1551 
	#sk_SRP_gN_ÿche_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SRP_gN_ÿche
, (¡), (cİy_func), (ä“_func))

	)

1552 
	#sk_SRP_gN_ÿche_shiá
(
¡
è
	`SKM_sk_shiá
(
SRP_gN_ÿche
, (¡))

	)

1553 
	#sk_SRP_gN_ÿche_pİ
(
¡
è
	`SKM_sk_pİ
(
SRP_gN_ÿche
, (¡))

	)

1554 
	#sk_SRP_gN_ÿche_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SRP_gN_ÿche
, (¡))

	)

1555 
	#sk_SRP_gN_ÿche_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SRP_gN_ÿche
, (¡))

	)

1556 
	#sk_SRP_u£r_pwd_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SRP_u£r_pwd
, (cmp))

	)

1557 
	#sk_SRP_u£r_pwd_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SRP_u£r_pwd
)

	)

1558 
	#sk_SRP_u£r_pwd_ä“
(
¡
è
	`SKM_sk_ä“
(
SRP_u£r_pwd
, (¡))

	)

1559 
	#sk_SRP_u£r_pwd_num
(
¡
è
	`SKM_sk_num
(
SRP_u£r_pwd
, (¡))

	)

1560 
	#sk_SRP_u£r_pwd_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SRP_u£r_pwd
, (¡), (i))

	)

1561 
	#sk_SRP_u£r_pwd_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SRP_u£r_pwd
, (¡), (i), (v®))

	)

1562 
	#sk_SRP_u£r_pwd_z”o
(
¡
è
	`SKM_sk_z”o
(
SRP_u£r_pwd
, (¡))

	)

1563 
	#sk_SRP_u£r_pwd_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SRP_u£r_pwd
, (¡), (v®))

	)

1564 
	#sk_SRP_u£r_pwd_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SRP_u£r_pwd
, (¡), (v®))

	)

1565 
	#sk_SRP_u£r_pwd_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SRP_u£r_pwd
, (¡), (v®))

	)

1566 
	#sk_SRP_u£r_pwd_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SRP_u£r_pwd
, (¡), (v®))

	)

1567 
	#sk_SRP_u£r_pwd_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SRP_u£r_pwd
, (¡), (i))

	)

1568 
	#sk_SRP_u£r_pwd_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SRP_u£r_pwd
, (¡), (±r))

	)

1569 
	#sk_SRP_u£r_pwd_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SRP_u£r_pwd
, (¡), (v®), (i))

	)

1570 
	#sk_SRP_u£r_pwd_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SRP_u£r_pwd
, (¡), (cmp))

	)

1571 
	#sk_SRP_u£r_pwd_dup
(
¡
è
	`SKM_sk_dup
(
SRP_u£r_pwd
, st)

	)

1572 
	#sk_SRP_u£r_pwd_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SRP_u£r_pwd
, (¡), (ä“_func))

	)

1573 
	#sk_SRP_u£r_pwd_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SRP_u£r_pwd
, (¡), (cİy_func), (ä“_func))

	)

1574 
	#sk_SRP_u£r_pwd_shiá
(
¡
è
	`SKM_sk_shiá
(
SRP_u£r_pwd
, (¡))

	)

1575 
	#sk_SRP_u£r_pwd_pİ
(
¡
è
	`SKM_sk_pİ
(
SRP_u£r_pwd
, (¡))

	)

1576 
	#sk_SRP_u£r_pwd_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SRP_u£r_pwd
, (¡))

	)

1577 
	#sk_SRP_u£r_pwd_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SRP_u£r_pwd
, (¡))

	)

1578 
	#sk_SRTP_PROTECTION_PROFILE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SRTP_PROTECTION_PROFILE
, (cmp))

	)

1579 
	#sk_SRTP_PROTECTION_PROFILE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SRTP_PROTECTION_PROFILE
)

	)

1580 
	#sk_SRTP_PROTECTION_PROFILE_ä“
(
¡
è
	`SKM_sk_ä“
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1581 
	#sk_SRTP_PROTECTION_PROFILE_num
(
¡
è
	`SKM_sk_num
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1582 
	#sk_SRTP_PROTECTION_PROFILE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SRTP_PROTECTION_PROFILE
, (¡), (i))

	)

1583 
	#sk_SRTP_PROTECTION_PROFILE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SRTP_PROTECTION_PROFILE
, (¡), (i), (v®))

	)

1584 
	#sk_SRTP_PROTECTION_PROFILE_z”o
(
¡
è
	`SKM_sk_z”o
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1585 
	#sk_SRTP_PROTECTION_PROFILE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SRTP_PROTECTION_PROFILE
, (¡), (v®))

	)

1586 
	#sk_SRTP_PROTECTION_PROFILE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SRTP_PROTECTION_PROFILE
, (¡), (v®))

	)

1587 
	#sk_SRTP_PROTECTION_PROFILE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SRTP_PROTECTION_PROFILE
, (¡), (v®))

	)

1588 
	#sk_SRTP_PROTECTION_PROFILE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SRTP_PROTECTION_PROFILE
, (¡), (v®))

	)

1589 
	#sk_SRTP_PROTECTION_PROFILE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SRTP_PROTECTION_PROFILE
, (¡), (i))

	)

1590 
	#sk_SRTP_PROTECTION_PROFILE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SRTP_PROTECTION_PROFILE
, (¡), (±r))

	)

1591 
	#sk_SRTP_PROTECTION_PROFILE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SRTP_PROTECTION_PROFILE
, (¡), (v®), (i))

	)

1592 
	#sk_SRTP_PROTECTION_PROFILE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SRTP_PROTECTION_PROFILE
, (¡), (cmp))

	)

1593 
	#sk_SRTP_PROTECTION_PROFILE_dup
(
¡
è
	`SKM_sk_dup
(
SRTP_PROTECTION_PROFILE
, st)

	)

1594 
	#sk_SRTP_PROTECTION_PROFILE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SRTP_PROTECTION_PROFILE
, (¡), (ä“_func))

	)

1595 
	#sk_SRTP_PROTECTION_PROFILE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SRTP_PROTECTION_PROFILE
, (¡), (cİy_func), (ä“_func))

	)

1596 
	#sk_SRTP_PROTECTION_PROFILE_shiá
(
¡
è
	`SKM_sk_shiá
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1597 
	#sk_SRTP_PROTECTION_PROFILE_pİ
(
¡
è
	`SKM_sk_pİ
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1598 
	#sk_SRTP_PROTECTION_PROFILE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1599 
	#sk_SRTP_PROTECTION_PROFILE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SRTP_PROTECTION_PROFILE
, (¡))

	)

1600 
	#sk_SSL_CIPHER_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SSL_CIPHER
, (cmp))

	)

1601 
	#sk_SSL_CIPHER_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SSL_CIPHER
)

	)

1602 
	#sk_SSL_CIPHER_ä“
(
¡
è
	`SKM_sk_ä“
(
SSL_CIPHER
, (¡))

	)

1603 
	#sk_SSL_CIPHER_num
(
¡
è
	`SKM_sk_num
(
SSL_CIPHER
, (¡))

	)

1604 
	#sk_SSL_CIPHER_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SSL_CIPHER
, (¡), (i))

	)

1605 
	#sk_SSL_CIPHER_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SSL_CIPHER
, (¡), (i), (v®))

	)

1606 
	#sk_SSL_CIPHER_z”o
(
¡
è
	`SKM_sk_z”o
(
SSL_CIPHER
, (¡))

	)

1607 
	#sk_SSL_CIPHER_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SSL_CIPHER
, (¡), (v®))

	)

1608 
	#sk_SSL_CIPHER_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SSL_CIPHER
, (¡), (v®))

	)

1609 
	#sk_SSL_CIPHER_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SSL_CIPHER
, (¡), (v®))

	)

1610 
	#sk_SSL_CIPHER_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SSL_CIPHER
, (¡), (v®))

	)

1611 
	#sk_SSL_CIPHER_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SSL_CIPHER
, (¡), (i))

	)

1612 
	#sk_SSL_CIPHER_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SSL_CIPHER
, (¡), (±r))

	)

1613 
	#sk_SSL_CIPHER_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SSL_CIPHER
, (¡), (v®), (i))

	)

1614 
	#sk_SSL_CIPHER_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SSL_CIPHER
, (¡), (cmp))

	)

1615 
	#sk_SSL_CIPHER_dup
(
¡
è
	`SKM_sk_dup
(
SSL_CIPHER
, st)

	)

1616 
	#sk_SSL_CIPHER_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SSL_CIPHER
, (¡), (ä“_func))

	)

1617 
	#sk_SSL_CIPHER_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SSL_CIPHER
, (¡), (cİy_func), (ä“_func))

	)

1618 
	#sk_SSL_CIPHER_shiá
(
¡
è
	`SKM_sk_shiá
(
SSL_CIPHER
, (¡))

	)

1619 
	#sk_SSL_CIPHER_pİ
(
¡
è
	`SKM_sk_pİ
(
SSL_CIPHER
, (¡))

	)

1620 
	#sk_SSL_CIPHER_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SSL_CIPHER
, (¡))

	)

1621 
	#sk_SSL_CIPHER_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SSL_CIPHER
, (¡))

	)

1622 
	#sk_SSL_COMP_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SSL_COMP
, (cmp))

	)

1623 
	#sk_SSL_COMP_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SSL_COMP
)

	)

1624 
	#sk_SSL_COMP_ä“
(
¡
è
	`SKM_sk_ä“
(
SSL_COMP
, (¡))

	)

1625 
	#sk_SSL_COMP_num
(
¡
è
	`SKM_sk_num
(
SSL_COMP
, (¡))

	)

1626 
	#sk_SSL_COMP_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SSL_COMP
, (¡), (i))

	)

1627 
	#sk_SSL_COMP_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SSL_COMP
, (¡), (i), (v®))

	)

1628 
	#sk_SSL_COMP_z”o
(
¡
è
	`SKM_sk_z”o
(
SSL_COMP
, (¡))

	)

1629 
	#sk_SSL_COMP_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SSL_COMP
, (¡), (v®))

	)

1630 
	#sk_SSL_COMP_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SSL_COMP
, (¡), (v®))

	)

1631 
	#sk_SSL_COMP_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SSL_COMP
, (¡), (v®))

	)

1632 
	#sk_SSL_COMP_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SSL_COMP
, (¡), (v®))

	)

1633 
	#sk_SSL_COMP_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SSL_COMP
, (¡), (i))

	)

1634 
	#sk_SSL_COMP_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SSL_COMP
, (¡), (±r))

	)

1635 
	#sk_SSL_COMP_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SSL_COMP
, (¡), (v®), (i))

	)

1636 
	#sk_SSL_COMP_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SSL_COMP
, (¡), (cmp))

	)

1637 
	#sk_SSL_COMP_dup
(
¡
è
	`SKM_sk_dup
(
SSL_COMP
, st)

	)

1638 
	#sk_SSL_COMP_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SSL_COMP
, (¡), (ä“_func))

	)

1639 
	#sk_SSL_COMP_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SSL_COMP
, (¡), (cİy_func), (ä“_func))

	)

1640 
	#sk_SSL_COMP_shiá
(
¡
è
	`SKM_sk_shiá
(
SSL_COMP
, (¡))

	)

1641 
	#sk_SSL_COMP_pİ
(
¡
è
	`SKM_sk_pİ
(
SSL_COMP
, (¡))

	)

1642 
	#sk_SSL_COMP_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SSL_COMP
, (¡))

	)

1643 
	#sk_SSL_COMP_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SSL_COMP
, (¡))

	)

1644 
	#sk_STACK_OF_X509_NAME_ENTRY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
STACK_OF_X509_NAME_ENTRY
, (cmp))

	)

1645 
	#sk_STACK_OF_X509_NAME_ENTRY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
STACK_OF_X509_NAME_ENTRY
)

	)

1646 
	#sk_STACK_OF_X509_NAME_ENTRY_ä“
(
¡
è
	`SKM_sk_ä“
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1647 
	#sk_STACK_OF_X509_NAME_ENTRY_num
(
¡
è
	`SKM_sk_num
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1648 
	#sk_STACK_OF_X509_NAME_ENTRY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
STACK_OF_X509_NAME_ENTRY
, (¡), (i))

	)

1649 
	#sk_STACK_OF_X509_NAME_ENTRY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
STACK_OF_X509_NAME_ENTRY
, (¡), (i), (v®))

	)

1650 
	#sk_STACK_OF_X509_NAME_ENTRY_z”o
(
¡
è
	`SKM_sk_z”o
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1651 
	#sk_STACK_OF_X509_NAME_ENTRY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
STACK_OF_X509_NAME_ENTRY
, (¡), (v®))

	)

1652 
	#sk_STACK_OF_X509_NAME_ENTRY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
STACK_OF_X509_NAME_ENTRY
, (¡), (v®))

	)

1653 
	#sk_STACK_OF_X509_NAME_ENTRY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
STACK_OF_X509_NAME_ENTRY
, (¡), (v®))

	)

1654 
	#sk_STACK_OF_X509_NAME_ENTRY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
STACK_OF_X509_NAME_ENTRY
, (¡), (v®))

	)

1655 
	#sk_STACK_OF_X509_NAME_ENTRY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
STACK_OF_X509_NAME_ENTRY
, (¡), (i))

	)

1656 
	#sk_STACK_OF_X509_NAME_ENTRY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
STACK_OF_X509_NAME_ENTRY
, (¡), (±r))

	)

1657 
	#sk_STACK_OF_X509_NAME_ENTRY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
STACK_OF_X509_NAME_ENTRY
, (¡), (v®), (i))

	)

1658 
	#sk_STACK_OF_X509_NAME_ENTRY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
STACK_OF_X509_NAME_ENTRY
, (¡), (cmp))

	)

1659 
	#sk_STACK_OF_X509_NAME_ENTRY_dup
(
¡
è
	`SKM_sk_dup
(
STACK_OF_X509_NAME_ENTRY
, st)

	)

1660 
	#sk_STACK_OF_X509_NAME_ENTRY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
STACK_OF_X509_NAME_ENTRY
, (¡), (ä“_func))

	)

1661 
	#sk_STACK_OF_X509_NAME_ENTRY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
STACK_OF_X509_NAME_ENTRY
, (¡), (cİy_func), (ä“_func))

	)

1662 
	#sk_STACK_OF_X509_NAME_ENTRY_shiá
(
¡
è
	`SKM_sk_shiá
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1663 
	#sk_STACK_OF_X509_NAME_ENTRY_pİ
(
¡
è
	`SKM_sk_pİ
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1664 
	#sk_STACK_OF_X509_NAME_ENTRY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1665 
	#sk_STACK_OF_X509_NAME_ENTRY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
STACK_OF_X509_NAME_ENTRY
, (¡))

	)

1666 
	#sk_STORE_ATTR_INFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
STORE_ATTR_INFO
, (cmp))

	)

1667 
	#sk_STORE_ATTR_INFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
STORE_ATTR_INFO
)

	)

1668 
	#sk_STORE_ATTR_INFO_ä“
(
¡
è
	`SKM_sk_ä“
(
STORE_ATTR_INFO
, (¡))

	)

1669 
	#sk_STORE_ATTR_INFO_num
(
¡
è
	`SKM_sk_num
(
STORE_ATTR_INFO
, (¡))

	)

1670 
	#sk_STORE_ATTR_INFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
STORE_ATTR_INFO
, (¡), (i))

	)

1671 
	#sk_STORE_ATTR_INFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
STORE_ATTR_INFO
, (¡), (i), (v®))

	)

1672 
	#sk_STORE_ATTR_INFO_z”o
(
¡
è
	`SKM_sk_z”o
(
STORE_ATTR_INFO
, (¡))

	)

1673 
	#sk_STORE_ATTR_INFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
STORE_ATTR_INFO
, (¡), (v®))

	)

1674 
	#sk_STORE_ATTR_INFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
STORE_ATTR_INFO
, (¡), (v®))

	)

1675 
	#sk_STORE_ATTR_INFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
STORE_ATTR_INFO
, (¡), (v®))

	)

1676 
	#sk_STORE_ATTR_INFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
STORE_ATTR_INFO
, (¡), (v®))

	)

1677 
	#sk_STORE_ATTR_INFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
STORE_ATTR_INFO
, (¡), (i))

	)

1678 
	#sk_STORE_ATTR_INFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
STORE_ATTR_INFO
, (¡), (±r))

	)

1679 
	#sk_STORE_ATTR_INFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
STORE_ATTR_INFO
, (¡), (v®), (i))

	)

1680 
	#sk_STORE_ATTR_INFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
STORE_ATTR_INFO
, (¡), (cmp))

	)

1681 
	#sk_STORE_ATTR_INFO_dup
(
¡
è
	`SKM_sk_dup
(
STORE_ATTR_INFO
, st)

	)

1682 
	#sk_STORE_ATTR_INFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
STORE_ATTR_INFO
, (¡), (ä“_func))

	)

1683 
	#sk_STORE_ATTR_INFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
STORE_ATTR_INFO
, (¡), (cİy_func), (ä“_func))

	)

1684 
	#sk_STORE_ATTR_INFO_shiá
(
¡
è
	`SKM_sk_shiá
(
STORE_ATTR_INFO
, (¡))

	)

1685 
	#sk_STORE_ATTR_INFO_pİ
(
¡
è
	`SKM_sk_pİ
(
STORE_ATTR_INFO
, (¡))

	)

1686 
	#sk_STORE_ATTR_INFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
STORE_ATTR_INFO
, (¡))

	)

1687 
	#sk_STORE_ATTR_INFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
STORE_ATTR_INFO
, (¡))

	)

1688 
	#sk_STORE_OBJECT_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
STORE_OBJECT
, (cmp))

	)

1689 
	#sk_STORE_OBJECT_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
STORE_OBJECT
)

	)

1690 
	#sk_STORE_OBJECT_ä“
(
¡
è
	`SKM_sk_ä“
(
STORE_OBJECT
, (¡))

	)

1691 
	#sk_STORE_OBJECT_num
(
¡
è
	`SKM_sk_num
(
STORE_OBJECT
, (¡))

	)

1692 
	#sk_STORE_OBJECT_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
STORE_OBJECT
, (¡), (i))

	)

1693 
	#sk_STORE_OBJECT_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
STORE_OBJECT
, (¡), (i), (v®))

	)

1694 
	#sk_STORE_OBJECT_z”o
(
¡
è
	`SKM_sk_z”o
(
STORE_OBJECT
, (¡))

	)

1695 
	#sk_STORE_OBJECT_push
(
¡
, 
v®
è
	`SKM_sk_push
(
STORE_OBJECT
, (¡), (v®))

	)

1696 
	#sk_STORE_OBJECT_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
STORE_OBJECT
, (¡), (v®))

	)

1697 
	#sk_STORE_OBJECT_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
STORE_OBJECT
, (¡), (v®))

	)

1698 
	#sk_STORE_OBJECT_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
STORE_OBJECT
, (¡), (v®))

	)

1699 
	#sk_STORE_OBJECT_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
STORE_OBJECT
, (¡), (i))

	)

1700 
	#sk_STORE_OBJECT_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
STORE_OBJECT
, (¡), (±r))

	)

1701 
	#sk_STORE_OBJECT_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
STORE_OBJECT
, (¡), (v®), (i))

	)

1702 
	#sk_STORE_OBJECT_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
STORE_OBJECT
, (¡), (cmp))

	)

1703 
	#sk_STORE_OBJECT_dup
(
¡
è
	`SKM_sk_dup
(
STORE_OBJECT
, st)

	)

1704 
	#sk_STORE_OBJECT_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
STORE_OBJECT
, (¡), (ä“_func))

	)

1705 
	#sk_STORE_OBJECT_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
STORE_OBJECT
, (¡), (cİy_func), (ä“_func))

	)

1706 
	#sk_STORE_OBJECT_shiá
(
¡
è
	`SKM_sk_shiá
(
STORE_OBJECT
, (¡))

	)

1707 
	#sk_STORE_OBJECT_pİ
(
¡
è
	`SKM_sk_pİ
(
STORE_OBJECT
, (¡))

	)

1708 
	#sk_STORE_OBJECT_sÜt
(
¡
è
	`SKM_sk_sÜt
(
STORE_OBJECT
, (¡))

	)

1709 
	#sk_STORE_OBJECT_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
STORE_OBJECT
, (¡))

	)

1710 
	#sk_SXNETID_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
SXNETID
, (cmp))

	)

1711 
	#sk_SXNETID_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
SXNETID
)

	)

1712 
	#sk_SXNETID_ä“
(
¡
è
	`SKM_sk_ä“
(
SXNETID
, (¡))

	)

1713 
	#sk_SXNETID_num
(
¡
è
	`SKM_sk_num
(
SXNETID
, (¡))

	)

1714 
	#sk_SXNETID_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
SXNETID
, (¡), (i))

	)

1715 
	#sk_SXNETID_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
SXNETID
, (¡), (i), (v®))

	)

1716 
	#sk_SXNETID_z”o
(
¡
è
	`SKM_sk_z”o
(
SXNETID
, (¡))

	)

1717 
	#sk_SXNETID_push
(
¡
, 
v®
è
	`SKM_sk_push
(
SXNETID
, (¡), (v®))

	)

1718 
	#sk_SXNETID_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
SXNETID
, (¡), (v®))

	)

1719 
	#sk_SXNETID_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
SXNETID
, (¡), (v®))

	)

1720 
	#sk_SXNETID_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
SXNETID
, (¡), (v®))

	)

1721 
	#sk_SXNETID_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
SXNETID
, (¡), (i))

	)

1722 
	#sk_SXNETID_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
SXNETID
, (¡), (±r))

	)

1723 
	#sk_SXNETID_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
SXNETID
, (¡), (v®), (i))

	)

1724 
	#sk_SXNETID_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
SXNETID
, (¡), (cmp))

	)

1725 
	#sk_SXNETID_dup
(
¡
è
	`SKM_sk_dup
(
SXNETID
, st)

	)

1726 
	#sk_SXNETID_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
SXNETID
, (¡), (ä“_func))

	)

1727 
	#sk_SXNETID_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
SXNETID
, (¡), (cİy_func), (ä“_func))

	)

1728 
	#sk_SXNETID_shiá
(
¡
è
	`SKM_sk_shiá
(
SXNETID
, (¡))

	)

1729 
	#sk_SXNETID_pİ
(
¡
è
	`SKM_sk_pİ
(
SXNETID
, (¡))

	)

1730 
	#sk_SXNETID_sÜt
(
¡
è
	`SKM_sk_sÜt
(
SXNETID
, (¡))

	)

1731 
	#sk_SXNETID_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
SXNETID
, (¡))

	)

1732 
	#sk_UI_STRING_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
UI_STRING
, (cmp))

	)

1733 
	#sk_UI_STRING_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
UI_STRING
)

	)

1734 
	#sk_UI_STRING_ä“
(
¡
è
	`SKM_sk_ä“
(
UI_STRING
, (¡))

	)

1735 
	#sk_UI_STRING_num
(
¡
è
	`SKM_sk_num
(
UI_STRING
, (¡))

	)

1736 
	#sk_UI_STRING_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
UI_STRING
, (¡), (i))

	)

1737 
	#sk_UI_STRING_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
UI_STRING
, (¡), (i), (v®))

	)

1738 
	#sk_UI_STRING_z”o
(
¡
è
	`SKM_sk_z”o
(
UI_STRING
, (¡))

	)

1739 
	#sk_UI_STRING_push
(
¡
, 
v®
è
	`SKM_sk_push
(
UI_STRING
, (¡), (v®))

	)

1740 
	#sk_UI_STRING_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
UI_STRING
, (¡), (v®))

	)

1741 
	#sk_UI_STRING_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
UI_STRING
, (¡), (v®))

	)

1742 
	#sk_UI_STRING_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
UI_STRING
, (¡), (v®))

	)

1743 
	#sk_UI_STRING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
UI_STRING
, (¡), (i))

	)

1744 
	#sk_UI_STRING_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
UI_STRING
, (¡), (±r))

	)

1745 
	#sk_UI_STRING_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
UI_STRING
, (¡), (v®), (i))

	)

1746 
	#sk_UI_STRING_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
UI_STRING
, (¡), (cmp))

	)

1747 
	#sk_UI_STRING_dup
(
¡
è
	`SKM_sk_dup
(
UI_STRING
, st)

	)

1748 
	#sk_UI_STRING_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
UI_STRING
, (¡), (ä“_func))

	)

1749 
	#sk_UI_STRING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
UI_STRING
, (¡), (cİy_func), (ä“_func))

	)

1750 
	#sk_UI_STRING_shiá
(
¡
è
	`SKM_sk_shiá
(
UI_STRING
, (¡))

	)

1751 
	#sk_UI_STRING_pİ
(
¡
è
	`SKM_sk_pİ
(
UI_STRING
, (¡))

	)

1752 
	#sk_UI_STRING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
UI_STRING
, (¡))

	)

1753 
	#sk_UI_STRING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
UI_STRING
, (¡))

	)

1754 
	#sk_X509_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509
, (cmp))

	)

1755 
	#sk_X509_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509
)

	)

1756 
	#sk_X509_ä“
(
¡
è
	`SKM_sk_ä“
(
X509
, (¡))

	)

1757 
	#sk_X509_num
(
¡
è
	`SKM_sk_num
(
X509
, (¡))

	)

1758 
	#sk_X509_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509
, (¡), (i))

	)

1759 
	#sk_X509_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509
, (¡), (i), (v®))

	)

1760 
	#sk_X509_z”o
(
¡
è
	`SKM_sk_z”o
(
X509
, (¡))

	)

1761 
	#sk_X509_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509
, (¡), (v®))

	)

1762 
	#sk_X509_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509
, (¡), (v®))

	)

1763 
	#sk_X509_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509
, (¡), (v®))

	)

1764 
	#sk_X509_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509
, (¡), (v®))

	)

1765 
	#sk_X509_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509
, (¡), (i))

	)

1766 
	#sk_X509_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509
, (¡), (±r))

	)

1767 
	#sk_X509_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509
, (¡), (v®), (i))

	)

1768 
	#sk_X509_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509
, (¡), (cmp))

	)

1769 
	#sk_X509_dup
(
¡
è
	`SKM_sk_dup
(
X509
, st)

	)

1770 
	#sk_X509_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509
, (¡), (ä“_func))

	)

1771 
	#sk_X509_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509
, (¡), (cİy_func), (ä“_func))

	)

1772 
	#sk_X509_shiá
(
¡
è
	`SKM_sk_shiá
(
X509
, (¡))

	)

1773 
	#sk_X509_pİ
(
¡
è
	`SKM_sk_pİ
(
X509
, (¡))

	)

1774 
	#sk_X509_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509
, (¡))

	)

1775 
	#sk_X509_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509
, (¡))

	)

1776 
	#sk_X509V3_EXT_METHOD_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509V3_EXT_METHOD
, (cmp))

	)

1777 
	#sk_X509V3_EXT_METHOD_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509V3_EXT_METHOD
)

	)

1778 
	#sk_X509V3_EXT_METHOD_ä“
(
¡
è
	`SKM_sk_ä“
(
X509V3_EXT_METHOD
, (¡))

	)

1779 
	#sk_X509V3_EXT_METHOD_num
(
¡
è
	`SKM_sk_num
(
X509V3_EXT_METHOD
, (¡))

	)

1780 
	#sk_X509V3_EXT_METHOD_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509V3_EXT_METHOD
, (¡), (i))

	)

1781 
	#sk_X509V3_EXT_METHOD_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509V3_EXT_METHOD
, (¡), (i), (v®))

	)

1782 
	#sk_X509V3_EXT_METHOD_z”o
(
¡
è
	`SKM_sk_z”o
(
X509V3_EXT_METHOD
, (¡))

	)

1783 
	#sk_X509V3_EXT_METHOD_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509V3_EXT_METHOD
, (¡), (v®))

	)

1784 
	#sk_X509V3_EXT_METHOD_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509V3_EXT_METHOD
, (¡), (v®))

	)

1785 
	#sk_X509V3_EXT_METHOD_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509V3_EXT_METHOD
, (¡), (v®))

	)

1786 
	#sk_X509V3_EXT_METHOD_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509V3_EXT_METHOD
, (¡), (v®))

	)

1787 
	#sk_X509V3_EXT_METHOD_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509V3_EXT_METHOD
, (¡), (i))

	)

1788 
	#sk_X509V3_EXT_METHOD_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509V3_EXT_METHOD
, (¡), (±r))

	)

1789 
	#sk_X509V3_EXT_METHOD_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509V3_EXT_METHOD
, (¡), (v®), (i))

	)

1790 
	#sk_X509V3_EXT_METHOD_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509V3_EXT_METHOD
, (¡), (cmp))

	)

1791 
	#sk_X509V3_EXT_METHOD_dup
(
¡
è
	`SKM_sk_dup
(
X509V3_EXT_METHOD
, st)

	)

1792 
	#sk_X509V3_EXT_METHOD_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509V3_EXT_METHOD
, (¡), (ä“_func))

	)

1793 
	#sk_X509V3_EXT_METHOD_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509V3_EXT_METHOD
, (¡), (cİy_func), (ä“_func))

	)

1794 
	#sk_X509V3_EXT_METHOD_shiá
(
¡
è
	`SKM_sk_shiá
(
X509V3_EXT_METHOD
, (¡))

	)

1795 
	#sk_X509V3_EXT_METHOD_pİ
(
¡
è
	`SKM_sk_pİ
(
X509V3_EXT_METHOD
, (¡))

	)

1796 
	#sk_X509V3_EXT_METHOD_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509V3_EXT_METHOD
, (¡))

	)

1797 
	#sk_X509V3_EXT_METHOD_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509V3_EXT_METHOD
, (¡))

	)

1798 
	#sk_X509_ALGOR_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_ALGOR
, (cmp))

	)

1799 
	#sk_X509_ALGOR_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_ALGOR
)

	)

1800 
	#sk_X509_ALGOR_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_ALGOR
, (¡))

	)

1801 
	#sk_X509_ALGOR_num
(
¡
è
	`SKM_sk_num
(
X509_ALGOR
, (¡))

	)

1802 
	#sk_X509_ALGOR_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_ALGOR
, (¡), (i))

	)

1803 
	#sk_X509_ALGOR_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_ALGOR
, (¡), (i), (v®))

	)

1804 
	#sk_X509_ALGOR_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_ALGOR
, (¡))

	)

1805 
	#sk_X509_ALGOR_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_ALGOR
, (¡), (v®))

	)

1806 
	#sk_X509_ALGOR_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_ALGOR
, (¡), (v®))

	)

1807 
	#sk_X509_ALGOR_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_ALGOR
, (¡), (v®))

	)

1808 
	#sk_X509_ALGOR_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_ALGOR
, (¡), (v®))

	)

1809 
	#sk_X509_ALGOR_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_ALGOR
, (¡), (i))

	)

1810 
	#sk_X509_ALGOR_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_ALGOR
, (¡), (±r))

	)

1811 
	#sk_X509_ALGOR_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_ALGOR
, (¡), (v®), (i))

	)

1812 
	#sk_X509_ALGOR_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_ALGOR
, (¡), (cmp))

	)

1813 
	#sk_X509_ALGOR_dup
(
¡
è
	`SKM_sk_dup
(
X509_ALGOR
, st)

	)

1814 
	#sk_X509_ALGOR_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_ALGOR
, (¡), (ä“_func))

	)

1815 
	#sk_X509_ALGOR_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_ALGOR
, (¡), (cİy_func), (ä“_func))

	)

1816 
	#sk_X509_ALGOR_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_ALGOR
, (¡))

	)

1817 
	#sk_X509_ALGOR_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_ALGOR
, (¡))

	)

1818 
	#sk_X509_ALGOR_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_ALGOR
, (¡))

	)

1819 
	#sk_X509_ALGOR_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_ALGOR
, (¡))

	)

1820 
	#sk_X509_ATTRIBUTE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_ATTRIBUTE
, (cmp))

	)

1821 
	#sk_X509_ATTRIBUTE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_ATTRIBUTE
)

	)

1822 
	#sk_X509_ATTRIBUTE_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_ATTRIBUTE
, (¡))

	)

1823 
	#sk_X509_ATTRIBUTE_num
(
¡
è
	`SKM_sk_num
(
X509_ATTRIBUTE
, (¡))

	)

1824 
	#sk_X509_ATTRIBUTE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_ATTRIBUTE
, (¡), (i))

	)

1825 
	#sk_X509_ATTRIBUTE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_ATTRIBUTE
, (¡), (i), (v®))

	)

1826 
	#sk_X509_ATTRIBUTE_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_ATTRIBUTE
, (¡))

	)

1827 
	#sk_X509_ATTRIBUTE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_ATTRIBUTE
, (¡), (v®))

	)

1828 
	#sk_X509_ATTRIBUTE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_ATTRIBUTE
, (¡), (v®))

	)

1829 
	#sk_X509_ATTRIBUTE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_ATTRIBUTE
, (¡), (v®))

	)

1830 
	#sk_X509_ATTRIBUTE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_ATTRIBUTE
, (¡), (v®))

	)

1831 
	#sk_X509_ATTRIBUTE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_ATTRIBUTE
, (¡), (i))

	)

1832 
	#sk_X509_ATTRIBUTE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_ATTRIBUTE
, (¡), (±r))

	)

1833 
	#sk_X509_ATTRIBUTE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_ATTRIBUTE
, (¡), (v®), (i))

	)

1834 
	#sk_X509_ATTRIBUTE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_ATTRIBUTE
, (¡), (cmp))

	)

1835 
	#sk_X509_ATTRIBUTE_dup
(
¡
è
	`SKM_sk_dup
(
X509_ATTRIBUTE
, st)

	)

1836 
	#sk_X509_ATTRIBUTE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_ATTRIBUTE
, (¡), (ä“_func))

	)

1837 
	#sk_X509_ATTRIBUTE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_ATTRIBUTE
, (¡), (cİy_func), (ä“_func))

	)

1838 
	#sk_X509_ATTRIBUTE_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_ATTRIBUTE
, (¡))

	)

1839 
	#sk_X509_ATTRIBUTE_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_ATTRIBUTE
, (¡))

	)

1840 
	#sk_X509_ATTRIBUTE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_ATTRIBUTE
, (¡))

	)

1841 
	#sk_X509_ATTRIBUTE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_ATTRIBUTE
, (¡))

	)

1842 
	#sk_X509_CRL_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_CRL
, (cmp))

	)

1843 
	#sk_X509_CRL_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_CRL
)

	)

1844 
	#sk_X509_CRL_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_CRL
, (¡))

	)

1845 
	#sk_X509_CRL_num
(
¡
è
	`SKM_sk_num
(
X509_CRL
, (¡))

	)

1846 
	#sk_X509_CRL_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_CRL
, (¡), (i))

	)

1847 
	#sk_X509_CRL_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_CRL
, (¡), (i), (v®))

	)

1848 
	#sk_X509_CRL_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_CRL
, (¡))

	)

1849 
	#sk_X509_CRL_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_CRL
, (¡), (v®))

	)

1850 
	#sk_X509_CRL_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_CRL
, (¡), (v®))

	)

1851 
	#sk_X509_CRL_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_CRL
, (¡), (v®))

	)

1852 
	#sk_X509_CRL_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_CRL
, (¡), (v®))

	)

1853 
	#sk_X509_CRL_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_CRL
, (¡), (i))

	)

1854 
	#sk_X509_CRL_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_CRL
, (¡), (±r))

	)

1855 
	#sk_X509_CRL_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_CRL
, (¡), (v®), (i))

	)

1856 
	#sk_X509_CRL_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_CRL
, (¡), (cmp))

	)

1857 
	#sk_X509_CRL_dup
(
¡
è
	`SKM_sk_dup
(
X509_CRL
, st)

	)

1858 
	#sk_X509_CRL_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_CRL
, (¡), (ä“_func))

	)

1859 
	#sk_X509_CRL_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_CRL
, (¡), (cİy_func), (ä“_func))

	)

1860 
	#sk_X509_CRL_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_CRL
, (¡))

	)

1861 
	#sk_X509_CRL_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_CRL
, (¡))

	)

1862 
	#sk_X509_CRL_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_CRL
, (¡))

	)

1863 
	#sk_X509_CRL_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_CRL
, (¡))

	)

1864 
	#sk_X509_EXTENSION_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_EXTENSION
, (cmp))

	)

1865 
	#sk_X509_EXTENSION_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_EXTENSION
)

	)

1866 
	#sk_X509_EXTENSION_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_EXTENSION
, (¡))

	)

1867 
	#sk_X509_EXTENSION_num
(
¡
è
	`SKM_sk_num
(
X509_EXTENSION
, (¡))

	)

1868 
	#sk_X509_EXTENSION_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_EXTENSION
, (¡), (i))

	)

1869 
	#sk_X509_EXTENSION_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_EXTENSION
, (¡), (i), (v®))

	)

1870 
	#sk_X509_EXTENSION_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_EXTENSION
, (¡))

	)

1871 
	#sk_X509_EXTENSION_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_EXTENSION
, (¡), (v®))

	)

1872 
	#sk_X509_EXTENSION_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_EXTENSION
, (¡), (v®))

	)

1873 
	#sk_X509_EXTENSION_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_EXTENSION
, (¡), (v®))

	)

1874 
	#sk_X509_EXTENSION_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_EXTENSION
, (¡), (v®))

	)

1875 
	#sk_X509_EXTENSION_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_EXTENSION
, (¡), (i))

	)

1876 
	#sk_X509_EXTENSION_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_EXTENSION
, (¡), (±r))

	)

1877 
	#sk_X509_EXTENSION_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_EXTENSION
, (¡), (v®), (i))

	)

1878 
	#sk_X509_EXTENSION_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_EXTENSION
, (¡), (cmp))

	)

1879 
	#sk_X509_EXTENSION_dup
(
¡
è
	`SKM_sk_dup
(
X509_EXTENSION
, st)

	)

1880 
	#sk_X509_EXTENSION_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_EXTENSION
, (¡), (ä“_func))

	)

1881 
	#sk_X509_EXTENSION_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_EXTENSION
, (¡), (cİy_func), (ä“_func))

	)

1882 
	#sk_X509_EXTENSION_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_EXTENSION
, (¡))

	)

1883 
	#sk_X509_EXTENSION_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_EXTENSION
, (¡))

	)

1884 
	#sk_X509_EXTENSION_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_EXTENSION
, (¡))

	)

1885 
	#sk_X509_EXTENSION_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_EXTENSION
, (¡))

	)

1886 
	#sk_X509_INFO_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_INFO
, (cmp))

	)

1887 
	#sk_X509_INFO_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_INFO
)

	)

1888 
	#sk_X509_INFO_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_INFO
, (¡))

	)

1889 
	#sk_X509_INFO_num
(
¡
è
	`SKM_sk_num
(
X509_INFO
, (¡))

	)

1890 
	#sk_X509_INFO_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_INFO
, (¡), (i))

	)

1891 
	#sk_X509_INFO_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_INFO
, (¡), (i), (v®))

	)

1892 
	#sk_X509_INFO_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_INFO
, (¡))

	)

1893 
	#sk_X509_INFO_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_INFO
, (¡), (v®))

	)

1894 
	#sk_X509_INFO_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_INFO
, (¡), (v®))

	)

1895 
	#sk_X509_INFO_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_INFO
, (¡), (v®))

	)

1896 
	#sk_X509_INFO_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_INFO
, (¡), (v®))

	)

1897 
	#sk_X509_INFO_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_INFO
, (¡), (i))

	)

1898 
	#sk_X509_INFO_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_INFO
, (¡), (±r))

	)

1899 
	#sk_X509_INFO_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_INFO
, (¡), (v®), (i))

	)

1900 
	#sk_X509_INFO_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_INFO
, (¡), (cmp))

	)

1901 
	#sk_X509_INFO_dup
(
¡
è
	`SKM_sk_dup
(
X509_INFO
, st)

	)

1902 
	#sk_X509_INFO_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_INFO
, (¡), (ä“_func))

	)

1903 
	#sk_X509_INFO_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_INFO
, (¡), (cİy_func), (ä“_func))

	)

1904 
	#sk_X509_INFO_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_INFO
, (¡))

	)

1905 
	#sk_X509_INFO_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_INFO
, (¡))

	)

1906 
	#sk_X509_INFO_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_INFO
, (¡))

	)

1907 
	#sk_X509_INFO_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_INFO
, (¡))

	)

1908 
	#sk_X509_LOOKUP_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_LOOKUP
, (cmp))

	)

1909 
	#sk_X509_LOOKUP_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_LOOKUP
)

	)

1910 
	#sk_X509_LOOKUP_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_LOOKUP
, (¡))

	)

1911 
	#sk_X509_LOOKUP_num
(
¡
è
	`SKM_sk_num
(
X509_LOOKUP
, (¡))

	)

1912 
	#sk_X509_LOOKUP_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_LOOKUP
, (¡), (i))

	)

1913 
	#sk_X509_LOOKUP_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_LOOKUP
, (¡), (i), (v®))

	)

1914 
	#sk_X509_LOOKUP_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_LOOKUP
, (¡))

	)

1915 
	#sk_X509_LOOKUP_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_LOOKUP
, (¡), (v®))

	)

1916 
	#sk_X509_LOOKUP_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_LOOKUP
, (¡), (v®))

	)

1917 
	#sk_X509_LOOKUP_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_LOOKUP
, (¡), (v®))

	)

1918 
	#sk_X509_LOOKUP_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_LOOKUP
, (¡), (v®))

	)

1919 
	#sk_X509_LOOKUP_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_LOOKUP
, (¡), (i))

	)

1920 
	#sk_X509_LOOKUP_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_LOOKUP
, (¡), (±r))

	)

1921 
	#sk_X509_LOOKUP_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_LOOKUP
, (¡), (v®), (i))

	)

1922 
	#sk_X509_LOOKUP_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_LOOKUP
, (¡), (cmp))

	)

1923 
	#sk_X509_LOOKUP_dup
(
¡
è
	`SKM_sk_dup
(
X509_LOOKUP
, st)

	)

1924 
	#sk_X509_LOOKUP_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_LOOKUP
, (¡), (ä“_func))

	)

1925 
	#sk_X509_LOOKUP_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_LOOKUP
, (¡), (cİy_func), (ä“_func))

	)

1926 
	#sk_X509_LOOKUP_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_LOOKUP
, (¡))

	)

1927 
	#sk_X509_LOOKUP_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_LOOKUP
, (¡))

	)

1928 
	#sk_X509_LOOKUP_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_LOOKUP
, (¡))

	)

1929 
	#sk_X509_LOOKUP_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_LOOKUP
, (¡))

	)

1930 
	#sk_X509_NAME_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_NAME
, (cmp))

	)

1931 
	#sk_X509_NAME_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_NAME
)

	)

1932 
	#sk_X509_NAME_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_NAME
, (¡))

	)

1933 
	#sk_X509_NAME_num
(
¡
è
	`SKM_sk_num
(
X509_NAME
, (¡))

	)

1934 
	#sk_X509_NAME_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_NAME
, (¡), (i))

	)

1935 
	#sk_X509_NAME_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_NAME
, (¡), (i), (v®))

	)

1936 
	#sk_X509_NAME_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_NAME
, (¡))

	)

1937 
	#sk_X509_NAME_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_NAME
, (¡), (v®))

	)

1938 
	#sk_X509_NAME_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_NAME
, (¡), (v®))

	)

1939 
	#sk_X509_NAME_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_NAME
, (¡), (v®))

	)

1940 
	#sk_X509_NAME_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_NAME
, (¡), (v®))

	)

1941 
	#sk_X509_NAME_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_NAME
, (¡), (i))

	)

1942 
	#sk_X509_NAME_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_NAME
, (¡), (±r))

	)

1943 
	#sk_X509_NAME_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_NAME
, (¡), (v®), (i))

	)

1944 
	#sk_X509_NAME_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_NAME
, (¡), (cmp))

	)

1945 
	#sk_X509_NAME_dup
(
¡
è
	`SKM_sk_dup
(
X509_NAME
, st)

	)

1946 
	#sk_X509_NAME_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_NAME
, (¡), (ä“_func))

	)

1947 
	#sk_X509_NAME_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_NAME
, (¡), (cİy_func), (ä“_func))

	)

1948 
	#sk_X509_NAME_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_NAME
, (¡))

	)

1949 
	#sk_X509_NAME_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_NAME
, (¡))

	)

1950 
	#sk_X509_NAME_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_NAME
, (¡))

	)

1951 
	#sk_X509_NAME_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_NAME
, (¡))

	)

1952 
	#sk_X509_NAME_ENTRY_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_NAME_ENTRY
, (cmp))

	)

1953 
	#sk_X509_NAME_ENTRY_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_NAME_ENTRY
)

	)

1954 
	#sk_X509_NAME_ENTRY_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_NAME_ENTRY
, (¡))

	)

1955 
	#sk_X509_NAME_ENTRY_num
(
¡
è
	`SKM_sk_num
(
X509_NAME_ENTRY
, (¡))

	)

1956 
	#sk_X509_NAME_ENTRY_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_NAME_ENTRY
, (¡), (i))

	)

1957 
	#sk_X509_NAME_ENTRY_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_NAME_ENTRY
, (¡), (i), (v®))

	)

1958 
	#sk_X509_NAME_ENTRY_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_NAME_ENTRY
, (¡))

	)

1959 
	#sk_X509_NAME_ENTRY_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_NAME_ENTRY
, (¡), (v®))

	)

1960 
	#sk_X509_NAME_ENTRY_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_NAME_ENTRY
, (¡), (v®))

	)

1961 
	#sk_X509_NAME_ENTRY_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_NAME_ENTRY
, (¡), (v®))

	)

1962 
	#sk_X509_NAME_ENTRY_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_NAME_ENTRY
, (¡), (v®))

	)

1963 
	#sk_X509_NAME_ENTRY_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_NAME_ENTRY
, (¡), (i))

	)

1964 
	#sk_X509_NAME_ENTRY_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_NAME_ENTRY
, (¡), (±r))

	)

1965 
	#sk_X509_NAME_ENTRY_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_NAME_ENTRY
, (¡), (v®), (i))

	)

1966 
	#sk_X509_NAME_ENTRY_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_NAME_ENTRY
, (¡), (cmp))

	)

1967 
	#sk_X509_NAME_ENTRY_dup
(
¡
è
	`SKM_sk_dup
(
X509_NAME_ENTRY
, st)

	)

1968 
	#sk_X509_NAME_ENTRY_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_NAME_ENTRY
, (¡), (ä“_func))

	)

1969 
	#sk_X509_NAME_ENTRY_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_NAME_ENTRY
, (¡), (cİy_func), (ä“_func))

	)

1970 
	#sk_X509_NAME_ENTRY_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_NAME_ENTRY
, (¡))

	)

1971 
	#sk_X509_NAME_ENTRY_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_NAME_ENTRY
, (¡))

	)

1972 
	#sk_X509_NAME_ENTRY_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_NAME_ENTRY
, (¡))

	)

1973 
	#sk_X509_NAME_ENTRY_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_NAME_ENTRY
, (¡))

	)

1974 
	#sk_X509_OBJECT_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_OBJECT
, (cmp))

	)

1975 
	#sk_X509_OBJECT_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_OBJECT
)

	)

1976 
	#sk_X509_OBJECT_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_OBJECT
, (¡))

	)

1977 
	#sk_X509_OBJECT_num
(
¡
è
	`SKM_sk_num
(
X509_OBJECT
, (¡))

	)

1978 
	#sk_X509_OBJECT_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_OBJECT
, (¡), (i))

	)

1979 
	#sk_X509_OBJECT_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_OBJECT
, (¡), (i), (v®))

	)

1980 
	#sk_X509_OBJECT_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_OBJECT
, (¡))

	)

1981 
	#sk_X509_OBJECT_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_OBJECT
, (¡), (v®))

	)

1982 
	#sk_X509_OBJECT_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_OBJECT
, (¡), (v®))

	)

1983 
	#sk_X509_OBJECT_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_OBJECT
, (¡), (v®))

	)

1984 
	#sk_X509_OBJECT_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_OBJECT
, (¡), (v®))

	)

1985 
	#sk_X509_OBJECT_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_OBJECT
, (¡), (i))

	)

1986 
	#sk_X509_OBJECT_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_OBJECT
, (¡), (±r))

	)

1987 
	#sk_X509_OBJECT_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_OBJECT
, (¡), (v®), (i))

	)

1988 
	#sk_X509_OBJECT_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_OBJECT
, (¡), (cmp))

	)

1989 
	#sk_X509_OBJECT_dup
(
¡
è
	`SKM_sk_dup
(
X509_OBJECT
, st)

	)

1990 
	#sk_X509_OBJECT_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_OBJECT
, (¡), (ä“_func))

	)

1991 
	#sk_X509_OBJECT_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_OBJECT
, (¡), (cİy_func), (ä“_func))

	)

1992 
	#sk_X509_OBJECT_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_OBJECT
, (¡))

	)

1993 
	#sk_X509_OBJECT_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_OBJECT
, (¡))

	)

1994 
	#sk_X509_OBJECT_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_OBJECT
, (¡))

	)

1995 
	#sk_X509_OBJECT_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_OBJECT
, (¡))

	)

1996 
	#sk_X509_POLICY_DATA_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_POLICY_DATA
, (cmp))

	)

1997 
	#sk_X509_POLICY_DATA_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_POLICY_DATA
)

	)

1998 
	#sk_X509_POLICY_DATA_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_POLICY_DATA
, (¡))

	)

1999 
	#sk_X509_POLICY_DATA_num
(
¡
è
	`SKM_sk_num
(
X509_POLICY_DATA
, (¡))

	)

2000 
	#sk_X509_POLICY_DATA_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_POLICY_DATA
, (¡), (i))

	)

2001 
	#sk_X509_POLICY_DATA_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_POLICY_DATA
, (¡), (i), (v®))

	)

2002 
	#sk_X509_POLICY_DATA_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_POLICY_DATA
, (¡))

	)

2003 
	#sk_X509_POLICY_DATA_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_POLICY_DATA
, (¡), (v®))

	)

2004 
	#sk_X509_POLICY_DATA_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_POLICY_DATA
, (¡), (v®))

	)

2005 
	#sk_X509_POLICY_DATA_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_POLICY_DATA
, (¡), (v®))

	)

2006 
	#sk_X509_POLICY_DATA_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_POLICY_DATA
, (¡), (v®))

	)

2007 
	#sk_X509_POLICY_DATA_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_POLICY_DATA
, (¡), (i))

	)

2008 
	#sk_X509_POLICY_DATA_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_POLICY_DATA
, (¡), (±r))

	)

2009 
	#sk_X509_POLICY_DATA_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_POLICY_DATA
, (¡), (v®), (i))

	)

2010 
	#sk_X509_POLICY_DATA_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_POLICY_DATA
, (¡), (cmp))

	)

2011 
	#sk_X509_POLICY_DATA_dup
(
¡
è
	`SKM_sk_dup
(
X509_POLICY_DATA
, st)

	)

2012 
	#sk_X509_POLICY_DATA_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_POLICY_DATA
, (¡), (ä“_func))

	)

2013 
	#sk_X509_POLICY_DATA_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_POLICY_DATA
, (¡), (cİy_func), (ä“_func))

	)

2014 
	#sk_X509_POLICY_DATA_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_POLICY_DATA
, (¡))

	)

2015 
	#sk_X509_POLICY_DATA_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_POLICY_DATA
, (¡))

	)

2016 
	#sk_X509_POLICY_DATA_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_POLICY_DATA
, (¡))

	)

2017 
	#sk_X509_POLICY_DATA_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_POLICY_DATA
, (¡))

	)

2018 
	#sk_X509_POLICY_NODE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_POLICY_NODE
, (cmp))

	)

2019 
	#sk_X509_POLICY_NODE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_POLICY_NODE
)

	)

2020 
	#sk_X509_POLICY_NODE_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_POLICY_NODE
, (¡))

	)

2021 
	#sk_X509_POLICY_NODE_num
(
¡
è
	`SKM_sk_num
(
X509_POLICY_NODE
, (¡))

	)

2022 
	#sk_X509_POLICY_NODE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_POLICY_NODE
, (¡), (i))

	)

2023 
	#sk_X509_POLICY_NODE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_POLICY_NODE
, (¡), (i), (v®))

	)

2024 
	#sk_X509_POLICY_NODE_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_POLICY_NODE
, (¡))

	)

2025 
	#sk_X509_POLICY_NODE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_POLICY_NODE
, (¡), (v®))

	)

2026 
	#sk_X509_POLICY_NODE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_POLICY_NODE
, (¡), (v®))

	)

2027 
	#sk_X509_POLICY_NODE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_POLICY_NODE
, (¡), (v®))

	)

2028 
	#sk_X509_POLICY_NODE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_POLICY_NODE
, (¡), (v®))

	)

2029 
	#sk_X509_POLICY_NODE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_POLICY_NODE
, (¡), (i))

	)

2030 
	#sk_X509_POLICY_NODE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_POLICY_NODE
, (¡), (±r))

	)

2031 
	#sk_X509_POLICY_NODE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_POLICY_NODE
, (¡), (v®), (i))

	)

2032 
	#sk_X509_POLICY_NODE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_POLICY_NODE
, (¡), (cmp))

	)

2033 
	#sk_X509_POLICY_NODE_dup
(
¡
è
	`SKM_sk_dup
(
X509_POLICY_NODE
, st)

	)

2034 
	#sk_X509_POLICY_NODE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_POLICY_NODE
, (¡), (ä“_func))

	)

2035 
	#sk_X509_POLICY_NODE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_POLICY_NODE
, (¡), (cİy_func), (ä“_func))

	)

2036 
	#sk_X509_POLICY_NODE_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_POLICY_NODE
, (¡))

	)

2037 
	#sk_X509_POLICY_NODE_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_POLICY_NODE
, (¡))

	)

2038 
	#sk_X509_POLICY_NODE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_POLICY_NODE
, (¡))

	)

2039 
	#sk_X509_POLICY_NODE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_POLICY_NODE
, (¡))

	)

2040 
	#sk_X509_PURPOSE_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_PURPOSE
, (cmp))

	)

2041 
	#sk_X509_PURPOSE_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_PURPOSE
)

	)

2042 
	#sk_X509_PURPOSE_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_PURPOSE
, (¡))

	)

2043 
	#sk_X509_PURPOSE_num
(
¡
è
	`SKM_sk_num
(
X509_PURPOSE
, (¡))

	)

2044 
	#sk_X509_PURPOSE_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_PURPOSE
, (¡), (i))

	)

2045 
	#sk_X509_PURPOSE_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_PURPOSE
, (¡), (i), (v®))

	)

2046 
	#sk_X509_PURPOSE_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_PURPOSE
, (¡))

	)

2047 
	#sk_X509_PURPOSE_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_PURPOSE
, (¡), (v®))

	)

2048 
	#sk_X509_PURPOSE_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_PURPOSE
, (¡), (v®))

	)

2049 
	#sk_X509_PURPOSE_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_PURPOSE
, (¡), (v®))

	)

2050 
	#sk_X509_PURPOSE_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_PURPOSE
, (¡), (v®))

	)

2051 
	#sk_X509_PURPOSE_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_PURPOSE
, (¡), (i))

	)

2052 
	#sk_X509_PURPOSE_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_PURPOSE
, (¡), (±r))

	)

2053 
	#sk_X509_PURPOSE_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_PURPOSE
, (¡), (v®), (i))

	)

2054 
	#sk_X509_PURPOSE_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_PURPOSE
, (¡), (cmp))

	)

2055 
	#sk_X509_PURPOSE_dup
(
¡
è
	`SKM_sk_dup
(
X509_PURPOSE
, st)

	)

2056 
	#sk_X509_PURPOSE_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_PURPOSE
, (¡), (ä“_func))

	)

2057 
	#sk_X509_PURPOSE_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_PURPOSE
, (¡), (cİy_func), (ä“_func))

	)

2058 
	#sk_X509_PURPOSE_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_PURPOSE
, (¡))

	)

2059 
	#sk_X509_PURPOSE_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_PURPOSE
, (¡))

	)

2060 
	#sk_X509_PURPOSE_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_PURPOSE
, (¡))

	)

2061 
	#sk_X509_PURPOSE_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_PURPOSE
, (¡))

	)

2062 
	#sk_X509_REVOKED_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_REVOKED
, (cmp))

	)

2063 
	#sk_X509_REVOKED_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_REVOKED
)

	)

2064 
	#sk_X509_REVOKED_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_REVOKED
, (¡))

	)

2065 
	#sk_X509_REVOKED_num
(
¡
è
	`SKM_sk_num
(
X509_REVOKED
, (¡))

	)

2066 
	#sk_X509_REVOKED_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_REVOKED
, (¡), (i))

	)

2067 
	#sk_X509_REVOKED_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_REVOKED
, (¡), (i), (v®))

	)

2068 
	#sk_X509_REVOKED_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_REVOKED
, (¡))

	)

2069 
	#sk_X509_REVOKED_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_REVOKED
, (¡), (v®))

	)

2070 
	#sk_X509_REVOKED_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_REVOKED
, (¡), (v®))

	)

2071 
	#sk_X509_REVOKED_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_REVOKED
, (¡), (v®))

	)

2072 
	#sk_X509_REVOKED_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_REVOKED
, (¡), (v®))

	)

2073 
	#sk_X509_REVOKED_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_REVOKED
, (¡), (i))

	)

2074 
	#sk_X509_REVOKED_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_REVOKED
, (¡), (±r))

	)

2075 
	#sk_X509_REVOKED_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_REVOKED
, (¡), (v®), (i))

	)

2076 
	#sk_X509_REVOKED_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_REVOKED
, (¡), (cmp))

	)

2077 
	#sk_X509_REVOKED_dup
(
¡
è
	`SKM_sk_dup
(
X509_REVOKED
, st)

	)

2078 
	#sk_X509_REVOKED_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_REVOKED
, (¡), (ä“_func))

	)

2079 
	#sk_X509_REVOKED_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_REVOKED
, (¡), (cİy_func), (ä“_func))

	)

2080 
	#sk_X509_REVOKED_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_REVOKED
, (¡))

	)

2081 
	#sk_X509_REVOKED_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_REVOKED
, (¡))

	)

2082 
	#sk_X509_REVOKED_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_REVOKED
, (¡))

	)

2083 
	#sk_X509_REVOKED_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_REVOKED
, (¡))

	)

2084 
	#sk_X509_TRUST_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_TRUST
, (cmp))

	)

2085 
	#sk_X509_TRUST_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_TRUST
)

	)

2086 
	#sk_X509_TRUST_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_TRUST
, (¡))

	)

2087 
	#sk_X509_TRUST_num
(
¡
è
	`SKM_sk_num
(
X509_TRUST
, (¡))

	)

2088 
	#sk_X509_TRUST_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_TRUST
, (¡), (i))

	)

2089 
	#sk_X509_TRUST_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_TRUST
, (¡), (i), (v®))

	)

2090 
	#sk_X509_TRUST_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_TRUST
, (¡))

	)

2091 
	#sk_X509_TRUST_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_TRUST
, (¡), (v®))

	)

2092 
	#sk_X509_TRUST_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_TRUST
, (¡), (v®))

	)

2093 
	#sk_X509_TRUST_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_TRUST
, (¡), (v®))

	)

2094 
	#sk_X509_TRUST_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_TRUST
, (¡), (v®))

	)

2095 
	#sk_X509_TRUST_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_TRUST
, (¡), (i))

	)

2096 
	#sk_X509_TRUST_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_TRUST
, (¡), (±r))

	)

2097 
	#sk_X509_TRUST_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_TRUST
, (¡), (v®), (i))

	)

2098 
	#sk_X509_TRUST_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_TRUST
, (¡), (cmp))

	)

2099 
	#sk_X509_TRUST_dup
(
¡
è
	`SKM_sk_dup
(
X509_TRUST
, st)

	)

2100 
	#sk_X509_TRUST_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_TRUST
, (¡), (ä“_func))

	)

2101 
	#sk_X509_TRUST_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_TRUST
, (¡), (cİy_func), (ä“_func))

	)

2102 
	#sk_X509_TRUST_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_TRUST
, (¡))

	)

2103 
	#sk_X509_TRUST_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_TRUST
, (¡))

	)

2104 
	#sk_X509_TRUST_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_TRUST
, (¡))

	)

2105 
	#sk_X509_TRUST_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_TRUST
, (¡))

	)

2106 
	#sk_X509_VERIFY_PARAM_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
X509_VERIFY_PARAM
, (cmp))

	)

2107 
	#sk_X509_VERIFY_PARAM_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
X509_VERIFY_PARAM
)

	)

2108 
	#sk_X509_VERIFY_PARAM_ä“
(
¡
è
	`SKM_sk_ä“
(
X509_VERIFY_PARAM
, (¡))

	)

2109 
	#sk_X509_VERIFY_PARAM_num
(
¡
è
	`SKM_sk_num
(
X509_VERIFY_PARAM
, (¡))

	)

2110 
	#sk_X509_VERIFY_PARAM_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
X509_VERIFY_PARAM
, (¡), (i))

	)

2111 
	#sk_X509_VERIFY_PARAM_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
X509_VERIFY_PARAM
, (¡), (i), (v®))

	)

2112 
	#sk_X509_VERIFY_PARAM_z”o
(
¡
è
	`SKM_sk_z”o
(
X509_VERIFY_PARAM
, (¡))

	)

2113 
	#sk_X509_VERIFY_PARAM_push
(
¡
, 
v®
è
	`SKM_sk_push
(
X509_VERIFY_PARAM
, (¡), (v®))

	)

2114 
	#sk_X509_VERIFY_PARAM_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
X509_VERIFY_PARAM
, (¡), (v®))

	)

2115 
	#sk_X509_VERIFY_PARAM_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
X509_VERIFY_PARAM
, (¡), (v®))

	)

2116 
	#sk_X509_VERIFY_PARAM_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
X509_VERIFY_PARAM
, (¡), (v®))

	)

2117 
	#sk_X509_VERIFY_PARAM_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
X509_VERIFY_PARAM
, (¡), (i))

	)

2118 
	#sk_X509_VERIFY_PARAM_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
X509_VERIFY_PARAM
, (¡), (±r))

	)

2119 
	#sk_X509_VERIFY_PARAM_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
X509_VERIFY_PARAM
, (¡), (v®), (i))

	)

2120 
	#sk_X509_VERIFY_PARAM_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
X509_VERIFY_PARAM
, (¡), (cmp))

	)

2121 
	#sk_X509_VERIFY_PARAM_dup
(
¡
è
	`SKM_sk_dup
(
X509_VERIFY_PARAM
, st)

	)

2122 
	#sk_X509_VERIFY_PARAM_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
X509_VERIFY_PARAM
, (¡), (ä“_func))

	)

2123 
	#sk_X509_VERIFY_PARAM_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
X509_VERIFY_PARAM
, (¡), (cİy_func), (ä“_func))

	)

2124 
	#sk_X509_VERIFY_PARAM_shiá
(
¡
è
	`SKM_sk_shiá
(
X509_VERIFY_PARAM
, (¡))

	)

2125 
	#sk_X509_VERIFY_PARAM_pİ
(
¡
è
	`SKM_sk_pİ
(
X509_VERIFY_PARAM
, (¡))

	)

2126 
	#sk_X509_VERIFY_PARAM_sÜt
(
¡
è
	`SKM_sk_sÜt
(
X509_VERIFY_PARAM
, (¡))

	)

2127 
	#sk_X509_VERIFY_PARAM_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
X509_VERIFY_PARAM
, (¡))

	)

2128 
	#sk_nid_ŒË_Ãw
(
cmp
è
	`SKM_sk_Ãw
(
nid_ŒË
, (cmp))

	)

2129 
	#sk_nid_ŒË_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
(
nid_ŒË
)

	)

2130 
	#sk_nid_ŒË_ä“
(
¡
è
	`SKM_sk_ä“
(
nid_ŒË
, (¡))

	)

2131 
	#sk_nid_ŒË_num
(
¡
è
	`SKM_sk_num
(
nid_ŒË
, (¡))

	)

2132 
	#sk_nid_ŒË_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(
nid_ŒË
, (¡), (i))

	)

2133 
	#sk_nid_ŒË_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(
nid_ŒË
, (¡), (i), (v®))

	)

2134 
	#sk_nid_ŒË_z”o
(
¡
è
	`SKM_sk_z”o
(
nid_ŒË
, (¡))

	)

2135 
	#sk_nid_ŒË_push
(
¡
, 
v®
è
	`SKM_sk_push
(
nid_ŒË
, (¡), (v®))

	)

2136 
	#sk_nid_ŒË_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(
nid_ŒË
, (¡), (v®))

	)

2137 
	#sk_nid_ŒË_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(
nid_ŒË
, (¡), (v®))

	)

2138 
	#sk_nid_ŒË_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(
nid_ŒË
, (¡), (v®))

	)

2139 
	#sk_nid_ŒË_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
nid_ŒË
, (¡), (i))

	)

2140 
	#sk_nid_ŒË_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(
nid_ŒË
, (¡), (±r))

	)

2141 
	#sk_nid_ŒË_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(
nid_ŒË
, (¡), (v®), (i))

	)

2142 
	#sk_nid_ŒË_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(
nid_ŒË
, (¡), (cmp))

	)

2143 
	#sk_nid_ŒË_dup
(
¡
è
	`SKM_sk_dup
(
nid_ŒË
, st)

	)

2144 
	#sk_nid_ŒË_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(
nid_ŒË
, (¡), (ä“_func))

	)

2145 
	#sk_nid_ŒË_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(
nid_ŒË
, (¡), (cİy_func), (ä“_func))

	)

2146 
	#sk_nid_ŒË_shiá
(
¡
è
	`SKM_sk_shiá
(
nid_ŒË
, (¡))

	)

2147 
	#sk_nid_ŒË_pİ
(
¡
è
	`SKM_sk_pİ
(
nid_ŒË
, (¡))

	)

2148 
	#sk_nid_ŒË_sÜt
(
¡
è
	`SKM_sk_sÜt
(
nid_ŒË
, (¡))

	)

2149 
	#sk_nid_ŒË_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
nid_ŒË
, (¡))

	)

2150 
	#sk_void_Ãw
(
cmp
è
	`SKM_sk_Ãw
(, (cmp))

	)

2151 
	#sk_void_Ãw_nuÎ
(è
	`SKM_sk_Ãw_nuÎ
()

	)

2152 
	#sk_void_ä“
(
¡
è
	`SKM_sk_ä“
(, (¡))

	)

2153 
	#sk_void_num
(
¡
è
	`SKM_sk_num
(, (¡))

	)

2154 
	#sk_void_v®ue
(
¡
, 
i
è
	`SKM_sk_v®ue
(, (¡), (i))

	)

2155 
	#sk_void_£t
(
¡
, 
i
, 
v®
è
	`SKM_sk_£t
(, (¡), (i), (v®))

	)

2156 
	#sk_void_z”o
(
¡
è
	`SKM_sk_z”o
(, (¡))

	)

2157 
	#sk_void_push
(
¡
, 
v®
è
	`SKM_sk_push
(, (¡), (v®))

	)

2158 
	#sk_void_unshiá
(
¡
, 
v®
è
	`SKM_sk_unshiá
(, (¡), (v®))

	)

2159 
	#sk_void_fšd
(
¡
, 
v®
è
	`SKM_sk_fšd
(, (¡), (v®))

	)

2160 
	#sk_void_fšd_ex
(
¡
, 
v®
è
	`SKM_sk_fšd_ex
(, (¡), (v®))

	)

2161 
	#sk_void_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(, (¡), (i))

	)

2162 
	#sk_void_d–‘e_±r
(
¡
, 
±r
è
	`SKM_sk_d–‘e_±r
(, (¡), (±r))

	)

2163 
	#sk_void_š£¹
(
¡
, 
v®
, 
i
è
	`SKM_sk_š£¹
(, (¡), (v®), (i))

	)

2164 
	#sk_void_£t_cmp_func
(
¡
, 
cmp
è
	`SKM_sk_£t_cmp_func
(, (¡), (cmp))

	)

2165 
	#sk_void_dup
(
¡
è
	`SKM_sk_dup
(, st)

	)

2166 
	#sk_void_pİ_ä“
(
¡
, 
ä“_func
è
	`SKM_sk_pİ_ä“
(, (¡), (ä“_func))

	)

2167 
	#sk_void_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è
	`SKM_sk_d“p_cİy
(, (¡), (cİy_func), (ä“_func))

	)

2168 
	#sk_void_shiá
(
¡
è
	`SKM_sk_shiá
(, (¡))

	)

2169 
	#sk_void_pİ
(
¡
è
	`SKM_sk_pİ
(, (¡))

	)

2170 
	#sk_void_sÜt
(
¡
è
	`SKM_sk_sÜt
(, (¡))

	)

2171 
	#sk_void_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(, (¡))

	)

2172 
	#sk_OPENSSL_STRING_Ãw
(
cmp
è((
	`STACK_OF
(
OPENSSL_STRING
è*)
	`sk_Ãw
(
	`CHECKED_SK_CMP_FUNC
(, cmp)))

	)

2173 
	#sk_OPENSSL_STRING_Ãw_nuÎ
(è((
	`STACK_OF
(
OPENSSL_STRING
è*)
	`sk_Ãw_nuÎ
())

	)

2174 
	#sk_OPENSSL_STRING_push
(
¡
, 
v®
è
	`sk_push
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2175 
	#sk_OPENSSL_STRING_fšd
(
¡
, 
v®
è
	`sk_fšd
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2176 
	#sk_OPENSSL_STRING_v®ue
(
¡
, 
i
è((
OPENSSL_STRING
)
	`sk_v®ue
(
	`CHECKED_STACK_OF
(OPENSSL_STRING, st), i))

	)

2177 
	#sk_OPENSSL_STRING_num
(
¡
è
	`SKM_sk_num
(
OPENSSL_STRING
, st)

	)

2178 
	#sk_OPENSSL_STRING_pİ_ä“
(
¡
, 
ä“_func
è
	`sk_pİ_ä“
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), 
	`CHECKED_SK_FREE_FUNC
(, f»e_func))

	)

2179 
	#sk_OPENSSL_STRING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è((
	`STACK_OF
(
OPENSSL_STRING
è*)
	`sk_d“p_cİy
(
	`CHECKED_STACK_OF
(OPENSSL_STRING, st), 
	`CHECKED_SK_COPY_FUNC
(, cİy_func), 
	`CHECKED_SK_FREE_FUNC
(, f»e_func)))

	)

2180 
	#sk_OPENSSL_STRING_š£¹
(
¡
, 
v®
, 
i
è
	`sk_š£¹
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), 
	`CHECKED_PTR_OF
(, v®), i)

	)

2181 
	#sk_OPENSSL_STRING_ä“
(
¡
è
	`SKM_sk_ä“
(
OPENSSL_STRING
, st)

	)

2182 
	#sk_OPENSSL_STRING_£t
(
¡
, 
i
, 
v®
è
	`sk_£t
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), i, 
	`CHECKED_PTR_OF
(, v®))

	)

2183 
	#sk_OPENSSL_STRING_z”o
(
¡
è
	`SKM_sk_z”o
(
OPENSSL_STRING
, (¡))

	)

2184 
	#sk_OPENSSL_STRING_unshiá
(
¡
, 
v®
è
	`sk_unshiá
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2185 
	#sk_OPENSSL_STRING_fšd_ex
(
¡
, 
v®
è
	`sk_fšd_ex
((
_STACK
 *)
	`CHECKED_CONST_PTR_OF
(
	`STACK_OF
(
OPENSSL_STRING
), st), CHECKED_CONST_PTR_OF(, v®))

	)

2186 
	#sk_OPENSSL_STRING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OPENSSL_STRING
, (¡), (i))

	)

2187 
	#sk_OPENSSL_STRING_d–‘e_±r
(
¡
, 
±r
è(
OPENSSL_STRING
 *)
	`sk_d–‘e_±r
(
	`CHECKED_STACK_OF
(OPENSSL_STRING, st), 
	`CHECKED_PTR_OF
(,…Œ))

	)

2188 
	#sk_OPENSSL_STRING_£t_cmp_func
(
¡
, 
cmp
) \

2190 
	`sk_£t_cmp_func
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, 
¡
), 
	`CHECKED_SK_CMP_FUNC
(, 
cmp
)))

	)

2191 
	#sk_OPENSSL_STRING_dup
(
¡
è
	`SKM_sk_dup
(
OPENSSL_STRING
, st)

	)

2192 
	#sk_OPENSSL_STRING_shiá
(
¡
è
	`SKM_sk_shiá
(
OPENSSL_STRING
, (¡))

	)

2193 
	#sk_OPENSSL_STRING_pİ
(
¡
è(*)
	`sk_pİ
(
	`CHECKED_STACK_OF
(
OPENSSL_STRING
, st))

	)

2194 
	#sk_OPENSSL_STRING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OPENSSL_STRING
, (¡))

	)

2195 
	#sk_OPENSSL_STRING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OPENSSL_STRING
, (¡))

	)

2196 
	#sk_OPENSSL_BLOCK_Ãw
(
cmp
è((
	`STACK_OF
(
OPENSSL_BLOCK
è*)
	`sk_Ãw
(
	`CHECKED_SK_CMP_FUNC
(, cmp)))

	)

2197 
	#sk_OPENSSL_BLOCK_Ãw_nuÎ
(è((
	`STACK_OF
(
OPENSSL_BLOCK
è*)
	`sk_Ãw_nuÎ
())

	)

2198 
	#sk_OPENSSL_BLOCK_push
(
¡
, 
v®
è
	`sk_push
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2199 
	#sk_OPENSSL_BLOCK_fšd
(
¡
, 
v®
è
	`sk_fšd
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2200 
	#sk_OPENSSL_BLOCK_v®ue
(
¡
, 
i
è((
OPENSSL_BLOCK
)
	`sk_v®ue
(
	`CHECKED_STACK_OF
(OPENSSL_BLOCK, st), i))

	)

2201 
	#sk_OPENSSL_BLOCK_num
(
¡
è
	`SKM_sk_num
(
OPENSSL_BLOCK
, st)

	)

2202 
	#sk_OPENSSL_BLOCK_pİ_ä“
(
¡
, 
ä“_func
è
	`sk_pİ_ä“
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), 
	`CHECKED_SK_FREE_FUNC
(, f»e_func))

	)

2203 
	#sk_OPENSSL_BLOCK_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è((
	`STACK_OF
(
OPENSSL_BLOCK
è*)
	`sk_d“p_cİy
(
	`CHECKED_STACK_OF
(OPENSSL_BLOCK, st), 
	`CHECKED_SK_COPY_FUNC
(, cİy_func), 
	`CHECKED_SK_FREE_FUNC
(, f»e_func)))

	)

2204 
	#sk_OPENSSL_BLOCK_š£¹
(
¡
, 
v®
, 
i
è
	`sk_š£¹
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), 
	`CHECKED_PTR_OF
(, v®), i)

	)

2205 
	#sk_OPENSSL_BLOCK_ä“
(
¡
è
	`SKM_sk_ä“
(
OPENSSL_BLOCK
, st)

	)

2206 
	#sk_OPENSSL_BLOCK_£t
(
¡
, 
i
, 
v®
è
	`sk_£t
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), i, 
	`CHECKED_PTR_OF
(, v®))

	)

2207 
	#sk_OPENSSL_BLOCK_z”o
(
¡
è
	`SKM_sk_z”o
(
OPENSSL_BLOCK
, (¡))

	)

2208 
	#sk_OPENSSL_BLOCK_unshiá
(
¡
, 
v®
è
	`sk_unshiá
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st), 
	`CHECKED_PTR_OF
(, v®))

	)

2209 
	#sk_OPENSSL_BLOCK_fšd_ex
(
¡
, 
v®
è
	`sk_fšd_ex
((
_STACK
 *)
	`CHECKED_CONST_PTR_OF
(
	`STACK_OF
(
OPENSSL_BLOCK
), st), CHECKED_CONST_PTR_OF(, v®))

	)

2210 
	#sk_OPENSSL_BLOCK_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OPENSSL_BLOCK
, (¡), (i))

	)

2211 
	#sk_OPENSSL_BLOCK_d–‘e_±r
(
¡
, 
±r
è(
OPENSSL_BLOCK
 *)
	`sk_d–‘e_±r
(
	`CHECKED_STACK_OF
(OPENSSL_BLOCK, st), 
	`CHECKED_PTR_OF
(,…Œ))

	)

2212 
	#sk_OPENSSL_BLOCK_£t_cmp_func
(
¡
, 
cmp
) \

2214 
	`sk_£t_cmp_func
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, 
¡
), 
	`CHECKED_SK_CMP_FUNC
(, 
cmp
)))

	)

2215 
	#sk_OPENSSL_BLOCK_dup
(
¡
è
	`SKM_sk_dup
(
OPENSSL_BLOCK
, st)

	)

2216 
	#sk_OPENSSL_BLOCK_shiá
(
¡
è
	`SKM_sk_shiá
(
OPENSSL_BLOCK
, (¡))

	)

2217 
	#sk_OPENSSL_BLOCK_pİ
(
¡
è(*)
	`sk_pİ
(
	`CHECKED_STACK_OF
(
OPENSSL_BLOCK
, st))

	)

2218 
	#sk_OPENSSL_BLOCK_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OPENSSL_BLOCK
, (¡))

	)

2219 
	#sk_OPENSSL_BLOCK_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OPENSSL_BLOCK
, (¡))

	)

2220 
	#sk_OPENSSL_PSTRING_Ãw
(
cmp
è((
	`STACK_OF
(
OPENSSL_PSTRING
è*)
	`sk_Ãw
(
	`CHECKED_SK_CMP_FUNC
(
OPENSSL_STRING
, cmp)))

	)

2221 
	#sk_OPENSSL_PSTRING_Ãw_nuÎ
(è((
	`STACK_OF
(
OPENSSL_PSTRING
è*)
	`sk_Ãw_nuÎ
())

	)

2222 
	#sk_OPENSSL_PSTRING_push
(
¡
, 
v®
è
	`sk_push
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
, v®))

	)

2223 
	#sk_OPENSSL_PSTRING_fšd
(
¡
, 
v®
è
	`sk_fšd
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
, v®))

	)

2224 
	#sk_OPENSSL_PSTRING_v®ue
(
¡
, 
i
è((
OPENSSL_PSTRING
)
	`sk_v®ue
(
	`CHECKED_STACK_OF
(OPENSSL_PSTRING, st), i))

	)

2225 
	#sk_OPENSSL_PSTRING_num
(
¡
è
	`SKM_sk_num
(
OPENSSL_PSTRING
, st)

	)

2226 
	#sk_OPENSSL_PSTRING_pİ_ä“
(
¡
, 
ä“_func
è
	`sk_pİ_ä“
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), 
	`CHECKED_SK_FREE_FUNC
(
OPENSSL_STRING
, f»e_func))

	)

2227 
	#sk_OPENSSL_PSTRING_d“p_cİy
(
¡
, 
cİy_func
, 
ä“_func
è((
	`STACK_OF
(
OPENSSL_PSTRING
è*)
	`sk_d“p_cİy
(
	`CHECKED_STACK_OF
(OPENSSL_PSTRING, st), 
	`CHECKED_SK_COPY_FUNC
(
OPENSSL_STRING
, cİy_func), 
	`CHECKED_SK_FREE_FUNC
(OPENSSL_STRING, f»e_func)))

	)

2228 
	#sk_OPENSSL_PSTRING_š£¹
(
¡
, 
v®
, 
i
è
	`sk_š£¹
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
, v®), i)

	)

2229 
	#sk_OPENSSL_PSTRING_ä“
(
¡
è
	`SKM_sk_ä“
(
OPENSSL_PSTRING
, st)

	)

2230 
	#sk_OPENSSL_PSTRING_£t
(
¡
, 
i
, 
v®
è
	`sk_£t
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), i, 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
, v®))

	)

2231 
	#sk_OPENSSL_PSTRING_z”o
(
¡
è
	`SKM_sk_z”o
(
OPENSSL_PSTRING
, (¡))

	)

2232 
	#sk_OPENSSL_PSTRING_unshiá
(
¡
, 
v®
è
	`sk_unshiá
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st), 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
, v®))

	)

2233 
	#sk_OPENSSL_PSTRING_fšd_ex
(
¡
, 
v®
è
	`sk_fšd_ex
((
_STACK
 *)
	`CHECKED_CONST_PTR_OF
(
	`STACK_OF
(
OPENSSL_PSTRING
), st), CHECKED_CONST_PTR_OF(
OPENSSL_STRING
, v®))

	)

2234 
	#sk_OPENSSL_PSTRING_d–‘e
(
¡
, 
i
è
	`SKM_sk_d–‘e
(
OPENSSL_PSTRING
, (¡), (i))

	)

2235 
	#sk_OPENSSL_PSTRING_d–‘e_±r
(
¡
, 
±r
è(
OPENSSL_PSTRING
 *)
	`sk_d–‘e_±r
(
	`CHECKED_STACK_OF
(OPENSSL_PSTRING, st), 
	`CHECKED_PTR_OF
(
OPENSSL_STRING
,…Œ))

	)

2236 
	#sk_OPENSSL_PSTRING_£t_cmp_func
(
¡
, 
cmp
) \

2237 (((*)(cÚ¡ 
OPENSSL_STRING
 * const *,const OPENSSL_STRING * const *)) \

2238 
	`sk_£t_cmp_func
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, 
¡
), 
	`CHECKED_SK_CMP_FUNC
(
OPENSSL_STRING
, 
cmp
)))

	)

2239 
	#sk_OPENSSL_PSTRING_dup
(
¡
è
	`SKM_sk_dup
(
OPENSSL_PSTRING
, st)

	)

2240 
	#sk_OPENSSL_PSTRING_shiá
(
¡
è
	`SKM_sk_shiá
(
OPENSSL_PSTRING
, (¡))

	)

2241 
	#sk_OPENSSL_PSTRING_pİ
(
¡
è(
OPENSSL_STRING
 *)
	`sk_pİ
(
	`CHECKED_STACK_OF
(
OPENSSL_PSTRING
, st))

	)

2242 
	#sk_OPENSSL_PSTRING_sÜt
(
¡
è
	`SKM_sk_sÜt
(
OPENSSL_PSTRING
, (¡))

	)

2243 
	#sk_OPENSSL_PSTRING_is_sÜ‹d
(
¡
è
	`SKM_sk_is_sÜ‹d
(
OPENSSL_PSTRING
, (¡))

	)

2244 
	#d2i_ASN1_SET_OF_ACCESS_DESCRIPTION
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2245 
	`SKM_ASN1_SET_OF_d2i
(
ACCESS_DESCRIPTION
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2246 
	#i2d_ASN1_SET_OF_ACCESS_DESCRIPTION
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2247 
	`SKM_ASN1_SET_OF_i2d
(
ACCESS_DESCRIPTION
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2248 
	#ASN1_£q_·ck_ACCESS_DESCRIPTION
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2249 
	`SKM_ASN1_£q_·ck
(
ACCESS_DESCRIPTION
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2250 
	#ASN1_£q_uÅack_ACCESS_DESCRIPTION
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2251 
	`SKM_ASN1_£q_uÅack
(
ACCESS_DESCRIPTION
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2252 
	#d2i_ASN1_SET_OF_ASN1_INTEGER
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2253 
	`SKM_ASN1_SET_OF_d2i
(
ASN1_INTEGER
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2254 
	#i2d_ASN1_SET_OF_ASN1_INTEGER
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2255 
	`SKM_ASN1_SET_OF_i2d
(
ASN1_INTEGER
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2256 
	#ASN1_£q_·ck_ASN1_INTEGER
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2257 
	`SKM_ASN1_£q_·ck
(
ASN1_INTEGER
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2258 
	#ASN1_£q_uÅack_ASN1_INTEGER
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2259 
	`SKM_ASN1_£q_uÅack
(
ASN1_INTEGER
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2260 
	#d2i_ASN1_SET_OF_ASN1_OBJECT
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2261 
	`SKM_ASN1_SET_OF_d2i
(
ASN1_OBJECT
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2262 
	#i2d_ASN1_SET_OF_ASN1_OBJECT
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2263 
	`SKM_ASN1_SET_OF_i2d
(
ASN1_OBJECT
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2264 
	#ASN1_£q_·ck_ASN1_OBJECT
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2265 
	`SKM_ASN1_£q_·ck
(
ASN1_OBJECT
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2266 
	#ASN1_£q_uÅack_ASN1_OBJECT
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2267 
	`SKM_ASN1_£q_uÅack
(
ASN1_OBJECT
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2268 
	#d2i_ASN1_SET_OF_ASN1_TYPE
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2269 
	`SKM_ASN1_SET_OF_d2i
(
ASN1_TYPE
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2270 
	#i2d_ASN1_SET_OF_ASN1_TYPE
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2271 
	`SKM_ASN1_SET_OF_i2d
(
ASN1_TYPE
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2272 
	#ASN1_£q_·ck_ASN1_TYPE
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2273 
	`SKM_ASN1_£q_·ck
(
ASN1_TYPE
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2274 
	#ASN1_£q_uÅack_ASN1_TYPE
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2275 
	`SKM_ASN1_£q_uÅack
(
ASN1_TYPE
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2276 
	#d2i_ASN1_SET_OF_ASN1_UTF8STRING
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2277 
	`SKM_ASN1_SET_OF_d2i
(
ASN1_UTF8STRING
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2278 
	#i2d_ASN1_SET_OF_ASN1_UTF8STRING
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2279 
	`SKM_ASN1_SET_OF_i2d
(
ASN1_UTF8STRING
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2280 
	#ASN1_£q_·ck_ASN1_UTF8STRING
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2281 
	`SKM_ASN1_£q_·ck
(
ASN1_UTF8STRING
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2282 
	#ASN1_£q_uÅack_ASN1_UTF8STRING
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2283 
	`SKM_ASN1_£q_uÅack
(
ASN1_UTF8STRING
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2284 
	#d2i_ASN1_SET_OF_DIST_POINT
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2285 
	`SKM_ASN1_SET_OF_d2i
(
DIST_POINT
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2286 
	#i2d_ASN1_SET_OF_DIST_POINT
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2287 
	`SKM_ASN1_SET_OF_i2d
(
DIST_POINT
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2288 
	#ASN1_£q_·ck_DIST_POINT
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2289 
	`SKM_ASN1_£q_·ck
(
DIST_POINT
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2290 
	#ASN1_£q_uÅack_DIST_POINT
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2291 
	`SKM_ASN1_£q_uÅack
(
DIST_POINT
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2292 
	#d2i_ASN1_SET_OF_ESS_CERT_ID
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2293 
	`SKM_ASN1_SET_OF_d2i
(
ESS_CERT_ID
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2294 
	#i2d_ASN1_SET_OF_ESS_CERT_ID
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2295 
	`SKM_ASN1_SET_OF_i2d
(
ESS_CERT_ID
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2296 
	#ASN1_£q_·ck_ESS_CERT_ID
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2297 
	`SKM_ASN1_£q_·ck
(
ESS_CERT_ID
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2298 
	#ASN1_£q_uÅack_ESS_CERT_ID
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2299 
	`SKM_ASN1_£q_uÅack
(
ESS_CERT_ID
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2300 
	#d2i_ASN1_SET_OF_EVP_MD
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2301 
	`SKM_ASN1_SET_OF_d2i
(
EVP_MD
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2302 
	#i2d_ASN1_SET_OF_EVP_MD
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2303 
	`SKM_ASN1_SET_OF_i2d
(
EVP_MD
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2304 
	#ASN1_£q_·ck_EVP_MD
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2305 
	`SKM_ASN1_£q_·ck
(
EVP_MD
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2306 
	#ASN1_£q_uÅack_EVP_MD
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2307 
	`SKM_ASN1_£q_uÅack
(
EVP_MD
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2308 
	#d2i_ASN1_SET_OF_GENERAL_NAME
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2309 
	`SKM_ASN1_SET_OF_d2i
(
GENERAL_NAME
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2310 
	#i2d_ASN1_SET_OF_GENERAL_NAME
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2311 
	`SKM_ASN1_SET_OF_i2d
(
GENERAL_NAME
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2312 
	#ASN1_£q_·ck_GENERAL_NAME
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2313 
	`SKM_ASN1_£q_·ck
(
GENERAL_NAME
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2314 
	#ASN1_£q_uÅack_GENERAL_NAME
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2315 
	`SKM_ASN1_£q_uÅack
(
GENERAL_NAME
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2316 
	#d2i_ASN1_SET_OF_OCSP_ONEREQ
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2317 
	`SKM_ASN1_SET_OF_d2i
(
OCSP_ONEREQ
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2318 
	#i2d_ASN1_SET_OF_OCSP_ONEREQ
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2319 
	`SKM_ASN1_SET_OF_i2d
(
OCSP_ONEREQ
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2320 
	#ASN1_£q_·ck_OCSP_ONEREQ
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2321 
	`SKM_ASN1_£q_·ck
(
OCSP_ONEREQ
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2322 
	#ASN1_£q_uÅack_OCSP_ONEREQ
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2323 
	`SKM_ASN1_£q_uÅack
(
OCSP_ONEREQ
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2324 
	#d2i_ASN1_SET_OF_OCSP_SINGLERESP
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2325 
	`SKM_ASN1_SET_OF_d2i
(
OCSP_SINGLERESP
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2326 
	#i2d_ASN1_SET_OF_OCSP_SINGLERESP
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2327 
	`SKM_ASN1_SET_OF_i2d
(
OCSP_SINGLERESP
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2328 
	#ASN1_£q_·ck_OCSP_SINGLERESP
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2329 
	`SKM_ASN1_£q_·ck
(
OCSP_SINGLERESP
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2330 
	#ASN1_£q_uÅack_OCSP_SINGLERESP
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2331 
	`SKM_ASN1_£q_uÅack
(
OCSP_SINGLERESP
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2332 
	#d2i_ASN1_SET_OF_PKCS12_SAFEBAG
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2333 
	`SKM_ASN1_SET_OF_d2i
(
PKCS12_SAFEBAG
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2334 
	#i2d_ASN1_SET_OF_PKCS12_SAFEBAG
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2335 
	`SKM_ASN1_SET_OF_i2d
(
PKCS12_SAFEBAG
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2336 
	#ASN1_£q_·ck_PKCS12_SAFEBAG
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2337 
	`SKM_ASN1_£q_·ck
(
PKCS12_SAFEBAG
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2338 
	#ASN1_£q_uÅack_PKCS12_SAFEBAG
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2339 
	`SKM_ASN1_£q_uÅack
(
PKCS12_SAFEBAG
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2340 
	#d2i_ASN1_SET_OF_PKCS7
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2341 
	`SKM_ASN1_SET_OF_d2i
(
PKCS7
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2342 
	#i2d_ASN1_SET_OF_PKCS7
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2343 
	`SKM_ASN1_SET_OF_i2d
(
PKCS7
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2344 
	#ASN1_£q_·ck_PKCS7
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2345 
	`SKM_ASN1_£q_·ck
(
PKCS7
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2346 
	#ASN1_£q_uÅack_PKCS7
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2347 
	`SKM_ASN1_£q_uÅack
(
PKCS7
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2348 
	#d2i_ASN1_SET_OF_PKCS7_RECIP_INFO
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2349 
	`SKM_ASN1_SET_OF_d2i
(
PKCS7_RECIP_INFO
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2350 
	#i2d_ASN1_SET_OF_PKCS7_RECIP_INFO
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2351 
	`SKM_ASN1_SET_OF_i2d
(
PKCS7_RECIP_INFO
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2352 
	#ASN1_£q_·ck_PKCS7_RECIP_INFO
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2353 
	`SKM_ASN1_£q_·ck
(
PKCS7_RECIP_INFO
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2354 
	#ASN1_£q_uÅack_PKCS7_RECIP_INFO
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2355 
	`SKM_ASN1_£q_uÅack
(
PKCS7_RECIP_INFO
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2356 
	#d2i_ASN1_SET_OF_PKCS7_SIGNER_INFO
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2357 
	`SKM_ASN1_SET_OF_d2i
(
PKCS7_SIGNER_INFO
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2358 
	#i2d_ASN1_SET_OF_PKCS7_SIGNER_INFO
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2359 
	`SKM_ASN1_SET_OF_i2d
(
PKCS7_SIGNER_INFO
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2360 
	#ASN1_£q_·ck_PKCS7_SIGNER_INFO
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2361 
	`SKM_ASN1_£q_·ck
(
PKCS7_SIGNER_INFO
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2362 
	#ASN1_£q_uÅack_PKCS7_SIGNER_INFO
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2363 
	`SKM_ASN1_£q_uÅack
(
PKCS7_SIGNER_INFO
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2364 
	#d2i_ASN1_SET_OF_POLICYINFO
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2365 
	`SKM_ASN1_SET_OF_d2i
(
POLICYINFO
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2366 
	#i2d_ASN1_SET_OF_POLICYINFO
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2367 
	`SKM_ASN1_SET_OF_i2d
(
POLICYINFO
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2368 
	#ASN1_£q_·ck_POLICYINFO
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2369 
	`SKM_ASN1_£q_·ck
(
POLICYINFO
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2370 
	#ASN1_£q_uÅack_POLICYINFO
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2371 
	`SKM_ASN1_£q_uÅack
(
POLICYINFO
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2372 
	#d2i_ASN1_SET_OF_POLICYQUALINFO
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2373 
	`SKM_ASN1_SET_OF_d2i
(
POLICYQUALINFO
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2374 
	#i2d_ASN1_SET_OF_POLICYQUALINFO
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2375 
	`SKM_ASN1_SET_OF_i2d
(
POLICYQUALINFO
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2376 
	#ASN1_£q_·ck_POLICYQUALINFO
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2377 
	`SKM_ASN1_£q_·ck
(
POLICYQUALINFO
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2378 
	#ASN1_£q_uÅack_POLICYQUALINFO
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2379 
	`SKM_ASN1_£q_uÅack
(
POLICYQUALINFO
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2380 
	#d2i_ASN1_SET_OF_SXNETID
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2381 
	`SKM_ASN1_SET_OF_d2i
(
SXNETID
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2382 
	#i2d_ASN1_SET_OF_SXNETID
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2383 
	`SKM_ASN1_SET_OF_i2d
(
SXNETID
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2384 
	#ASN1_£q_·ck_SXNETID
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2385 
	`SKM_ASN1_£q_·ck
(
SXNETID
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2386 
	#ASN1_£q_uÅack_SXNETID
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2387 
	`SKM_ASN1_£q_uÅack
(
SXNETID
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2388 
	#d2i_ASN1_SET_OF_X509
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2389 
	`SKM_ASN1_SET_OF_d2i
(
X509
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2390 
	#i2d_ASN1_SET_OF_X509
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2391 
	`SKM_ASN1_SET_OF_i2d
(
X509
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2392 
	#ASN1_£q_·ck_X509
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2393 
	`SKM_ASN1_£q_·ck
(
X509
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2394 
	#ASN1_£q_uÅack_X509
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2395 
	`SKM_ASN1_£q_uÅack
(
X509
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2396 
	#d2i_ASN1_SET_OF_X509_ALGOR
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2397 
	`SKM_ASN1_SET_OF_d2i
(
X509_ALGOR
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2398 
	#i2d_ASN1_SET_OF_X509_ALGOR
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2399 
	`SKM_ASN1_SET_OF_i2d
(
X509_ALGOR
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2400 
	#ASN1_£q_·ck_X509_ALGOR
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2401 
	`SKM_ASN1_£q_·ck
(
X509_ALGOR
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2402 
	#ASN1_£q_uÅack_X509_ALGOR
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2403 
	`SKM_ASN1_£q_uÅack
(
X509_ALGOR
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2404 
	#d2i_ASN1_SET_OF_X509_ATTRIBUTE
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2405 
	`SKM_ASN1_SET_OF_d2i
(
X509_ATTRIBUTE
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2406 
	#i2d_ASN1_SET_OF_X509_ATTRIBUTE
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2407 
	`SKM_ASN1_SET_OF_i2d
(
X509_ATTRIBUTE
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2408 
	#ASN1_£q_·ck_X509_ATTRIBUTE
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2409 
	`SKM_ASN1_£q_·ck
(
X509_ATTRIBUTE
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2410 
	#ASN1_£q_uÅack_X509_ATTRIBUTE
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2411 
	`SKM_ASN1_£q_uÅack
(
X509_ATTRIBUTE
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2412 
	#d2i_ASN1_SET_OF_X509_CRL
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2413 
	`SKM_ASN1_SET_OF_d2i
(
X509_CRL
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2414 
	#i2d_ASN1_SET_OF_X509_CRL
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2415 
	`SKM_ASN1_SET_OF_i2d
(
X509_CRL
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2416 
	#ASN1_£q_·ck_X509_CRL
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2417 
	`SKM_ASN1_£q_·ck
(
X509_CRL
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2418 
	#ASN1_£q_uÅack_X509_CRL
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2419 
	`SKM_ASN1_£q_uÅack
(
X509_CRL
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2420 
	#d2i_ASN1_SET_OF_X509_EXTENSION
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2421 
	`SKM_ASN1_SET_OF_d2i
(
X509_EXTENSION
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2422 
	#i2d_ASN1_SET_OF_X509_EXTENSION
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2423 
	`SKM_ASN1_SET_OF_i2d
(
X509_EXTENSION
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2424 
	#ASN1_£q_·ck_X509_EXTENSION
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2425 
	`SKM_ASN1_£q_·ck
(
X509_EXTENSION
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2426 
	#ASN1_£q_uÅack_X509_EXTENSION
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2427 
	`SKM_ASN1_£q_uÅack
(
X509_EXTENSION
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2428 
	#d2i_ASN1_SET_OF_X509_NAME_ENTRY
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2429 
	`SKM_ASN1_SET_OF_d2i
(
X509_NAME_ENTRY
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2430 
	#i2d_ASN1_SET_OF_X509_NAME_ENTRY
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2431 
	`SKM_ASN1_SET_OF_i2d
(
X509_NAME_ENTRY
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2432 
	#ASN1_£q_·ck_X509_NAME_ENTRY
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2433 
	`SKM_ASN1_£q_·ck
(
X509_NAME_ENTRY
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2434 
	#ASN1_£q_uÅack_X509_NAME_ENTRY
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2435 
	`SKM_ASN1_£q_uÅack
(
X509_NAME_ENTRY
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2436 
	#d2i_ASN1_SET_OF_X509_REVOKED
(
¡
, 
µ
, 
Ëngth
, 
d2i_func
, 
ä“_func
, 
ex_g
, 
ex_şass
) \

2437 
	`SKM_ASN1_SET_OF_d2i
(
X509_REVOKED
, (
¡
), (
µ
), (
Ëngth
), (
d2i_func
), (
ä“_func
), (
ex_g
), (
ex_şass
))

	)

2438 
	#i2d_ASN1_SET_OF_X509_REVOKED
(
¡
, 
µ
, 
i2d_func
, 
ex_g
, 
ex_şass
, 
is_£t
) \

2439 
	`SKM_ASN1_SET_OF_i2d
(
X509_REVOKED
, (
¡
), (
µ
), (
i2d_func
), (
ex_g
), (
ex_şass
), (
is_£t
))

	)

2440 
	#ASN1_£q_·ck_X509_REVOKED
(
¡
, 
i2d_func
, 
buf
, 
Ën
) \

2441 
	`SKM_ASN1_£q_·ck
(
X509_REVOKED
, (
¡
), (
i2d_func
), (
buf
), (
Ën
))

	)

2442 
	#ASN1_£q_uÅack_X509_REVOKED
(
buf
, 
Ën
, 
d2i_func
, 
ä“_func
) \

2443 
	`SKM_ASN1_£q_uÅack
(
X509_REVOKED
, (
buf
), (
Ën
), (
d2i_func
), (
ä“_func
))

	)

2444 
	#PKCS12_deüy±_d2i_PKCS12_SAFEBAG
(
®gÜ
, 
d2i_func
, 
ä“_func
, 
·ss
, 
·s¦’
, 
où
, 
£q
) \

2445 
	`SKM_PKCS12_deüy±_d2i
(
PKCS12_SAFEBAG
, (
®gÜ
), (
d2i_func
), (
ä“_func
), (
·ss
), (
·s¦’
), (
où
), (
£q
))

	)

2446 
	#PKCS12_deüy±_d2i_PKCS7
(
®gÜ
, 
d2i_func
, 
ä“_func
, 
·ss
, 
·s¦’
, 
où
, 
£q
) \

2447 
	`SKM_PKCS12_deüy±_d2i
(
PKCS7
, (
®gÜ
), (
d2i_func
), (
ä“_func
), (
·ss
), (
·s¦’
), (
où
), (
£q
))

	)

2448 
	#lh_ADDED_OBJ_Ãw
(è
	`LHM_lh_Ãw
(
ADDED_OBJ
,
added_obj
)

	)

2449 
	#lh_ADDED_OBJ_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
ADDED_OBJ
,lh,š¡)

	)

2450 
	#lh_ADDED_OBJ_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
ADDED_OBJ
,lh,š¡)

	)

2451 
	#lh_ADDED_OBJ_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
ADDED_OBJ
,lh,š¡)

	)

2452 
	#lh_ADDED_OBJ_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
ADDED_OBJ
,lh,â)

	)

2453 
	#lh_ADDED_OBJ_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2454 
	`LHM_lh_dßÎ_¬g
(
ADDED_OBJ
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2455 
	#lh_ADDED_OBJ_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
ADDED_OBJ
,lh)

	)

2456 
	#lh_ADDED_OBJ_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
ADDED_OBJ
,lh)

	)

2457 
	#lh_ADDED_OBJ_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
ADDED_OBJ
,lh)

	)

2458 
	#lh_ADDED_OBJ_node_¡©s_bio
(
lh
,
out
) \

2459 
	`LHM_lh_node_¡©s_bio
(
ADDED_OBJ
,
lh
,
out
)

	)

2460 
	#lh_ADDED_OBJ_node_u§ge_¡©s_bio
(
lh
,
out
) \

2461 
	`LHM_lh_node_u§ge_¡©s_bio
(
ADDED_OBJ
,
lh
,
out
)

	)

2462 
	#lh_ADDED_OBJ_¡©s_bio
(
lh
,
out
) \

2463 
	`LHM_lh_¡©s_bio
(
ADDED_OBJ
,
lh
,
out
)

	)

2464 
	#lh_ADDED_OBJ_ä“
(
lh
è
	`LHM_lh_ä“
(
ADDED_OBJ
,lh)

	)

2465 
	#lh_APP_INFO_Ãw
(è
	`LHM_lh_Ãw
(
APP_INFO
,
­p_šfo
)

	)

2466 
	#lh_APP_INFO_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
APP_INFO
,lh,š¡)

	)

2467 
	#lh_APP_INFO_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
APP_INFO
,lh,š¡)

	)

2468 
	#lh_APP_INFO_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
APP_INFO
,lh,š¡)

	)

2469 
	#lh_APP_INFO_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
APP_INFO
,lh,â)

	)

2470 
	#lh_APP_INFO_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2471 
	`LHM_lh_dßÎ_¬g
(
APP_INFO
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2472 
	#lh_APP_INFO_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
APP_INFO
,lh)

	)

2473 
	#lh_APP_INFO_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
APP_INFO
,lh)

	)

2474 
	#lh_APP_INFO_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
APP_INFO
,lh)

	)

2475 
	#lh_APP_INFO_node_¡©s_bio
(
lh
,
out
) \

2476 
	`LHM_lh_node_¡©s_bio
(
APP_INFO
,
lh
,
out
)

	)

2477 
	#lh_APP_INFO_node_u§ge_¡©s_bio
(
lh
,
out
) \

2478 
	`LHM_lh_node_u§ge_¡©s_bio
(
APP_INFO
,
lh
,
out
)

	)

2479 
	#lh_APP_INFO_¡©s_bio
(
lh
,
out
) \

2480 
	`LHM_lh_¡©s_bio
(
APP_INFO
,
lh
,
out
)

	)

2481 
	#lh_APP_INFO_ä“
(
lh
è
	`LHM_lh_ä“
(
APP_INFO
,lh)

	)

2482 
	#lh_CONF_VALUE_Ãw
(è
	`LHM_lh_Ãw
(
CONF_VALUE
,
cÚf_v®ue
)

	)

2483 
	#lh_CONF_VALUE_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
CONF_VALUE
,lh,š¡)

	)

2484 
	#lh_CONF_VALUE_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
CONF_VALUE
,lh,š¡)

	)

2485 
	#lh_CONF_VALUE_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
CONF_VALUE
,lh,š¡)

	)

2486 
	#lh_CONF_VALUE_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
CONF_VALUE
,lh,â)

	)

2487 
	#lh_CONF_VALUE_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2488 
	`LHM_lh_dßÎ_¬g
(
CONF_VALUE
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2489 
	#lh_CONF_VALUE_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
CONF_VALUE
,lh)

	)

2490 
	#lh_CONF_VALUE_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
CONF_VALUE
,lh)

	)

2491 
	#lh_CONF_VALUE_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
CONF_VALUE
,lh)

	)

2492 
	#lh_CONF_VALUE_node_¡©s_bio
(
lh
,
out
) \

2493 
	`LHM_lh_node_¡©s_bio
(
CONF_VALUE
,
lh
,
out
)

	)

2494 
	#lh_CONF_VALUE_node_u§ge_¡©s_bio
(
lh
,
out
) \

2495 
	`LHM_lh_node_u§ge_¡©s_bio
(
CONF_VALUE
,
lh
,
out
)

	)

2496 
	#lh_CONF_VALUE_¡©s_bio
(
lh
,
out
) \

2497 
	`LHM_lh_¡©s_bio
(
CONF_VALUE
,
lh
,
out
)

	)

2498 
	#lh_CONF_VALUE_ä“
(
lh
è
	`LHM_lh_ä“
(
CONF_VALUE
,lh)

	)

2499 
	#lh_ENGINE_PILE_Ãw
(è
	`LHM_lh_Ãw
(
ENGINE_PILE
,
’gše_pe
)

	)

2500 
	#lh_ENGINE_PILE_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
ENGINE_PILE
,lh,š¡)

	)

2501 
	#lh_ENGINE_PILE_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
ENGINE_PILE
,lh,š¡)

	)

2502 
	#lh_ENGINE_PILE_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
ENGINE_PILE
,lh,š¡)

	)

2503 
	#lh_ENGINE_PILE_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
ENGINE_PILE
,lh,â)

	)

2504 
	#lh_ENGINE_PILE_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2505 
	`LHM_lh_dßÎ_¬g
(
ENGINE_PILE
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2506 
	#lh_ENGINE_PILE_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
ENGINE_PILE
,lh)

	)

2507 
	#lh_ENGINE_PILE_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
ENGINE_PILE
,lh)

	)

2508 
	#lh_ENGINE_PILE_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
ENGINE_PILE
,lh)

	)

2509 
	#lh_ENGINE_PILE_node_¡©s_bio
(
lh
,
out
) \

2510 
	`LHM_lh_node_¡©s_bio
(
ENGINE_PILE
,
lh
,
out
)

	)

2511 
	#lh_ENGINE_PILE_node_u§ge_¡©s_bio
(
lh
,
out
) \

2512 
	`LHM_lh_node_u§ge_¡©s_bio
(
ENGINE_PILE
,
lh
,
out
)

	)

2513 
	#lh_ENGINE_PILE_¡©s_bio
(
lh
,
out
) \

2514 
	`LHM_lh_¡©s_bio
(
ENGINE_PILE
,
lh
,
out
)

	)

2515 
	#lh_ENGINE_PILE_ä“
(
lh
è
	`LHM_lh_ä“
(
ENGINE_PILE
,lh)

	)

2516 
	#lh_ERR_STATE_Ãw
(è
	`LHM_lh_Ãw
(
ERR_STATE
,
”r_¡©e
)

	)

2517 
	#lh_ERR_STATE_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
ERR_STATE
,lh,š¡)

	)

2518 
	#lh_ERR_STATE_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
ERR_STATE
,lh,š¡)

	)

2519 
	#lh_ERR_STATE_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
ERR_STATE
,lh,š¡)

	)

2520 
	#lh_ERR_STATE_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
ERR_STATE
,lh,â)

	)

2521 
	#lh_ERR_STATE_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2522 
	`LHM_lh_dßÎ_¬g
(
ERR_STATE
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2523 
	#lh_ERR_STATE_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
ERR_STATE
,lh)

	)

2524 
	#lh_ERR_STATE_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
ERR_STATE
,lh)

	)

2525 
	#lh_ERR_STATE_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
ERR_STATE
,lh)

	)

2526 
	#lh_ERR_STATE_node_¡©s_bio
(
lh
,
out
) \

2527 
	`LHM_lh_node_¡©s_bio
(
ERR_STATE
,
lh
,
out
)

	)

2528 
	#lh_ERR_STATE_node_u§ge_¡©s_bio
(
lh
,
out
) \

2529 
	`LHM_lh_node_u§ge_¡©s_bio
(
ERR_STATE
,
lh
,
out
)

	)

2530 
	#lh_ERR_STATE_¡©s_bio
(
lh
,
out
) \

2531 
	`LHM_lh_¡©s_bio
(
ERR_STATE
,
lh
,
out
)

	)

2532 
	#lh_ERR_STATE_ä“
(
lh
è
	`LHM_lh_ä“
(
ERR_STATE
,lh)

	)

2533 
	#lh_ERR_STRING_DATA_Ãw
(è
	`LHM_lh_Ãw
(
ERR_STRING_DATA
,
”r_¡ršg_d©a
)

	)

2534 
	#lh_ERR_STRING_DATA_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
ERR_STRING_DATA
,lh,š¡)

	)

2535 
	#lh_ERR_STRING_DATA_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
ERR_STRING_DATA
,lh,š¡)

	)

2536 
	#lh_ERR_STRING_DATA_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
ERR_STRING_DATA
,lh,š¡)

	)

2537 
	#lh_ERR_STRING_DATA_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
ERR_STRING_DATA
,lh,â)

	)

2538 
	#lh_ERR_STRING_DATA_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2539 
	`LHM_lh_dßÎ_¬g
(
ERR_STRING_DATA
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2540 
	#lh_ERR_STRING_DATA_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
ERR_STRING_DATA
,lh)

	)

2541 
	#lh_ERR_STRING_DATA_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
ERR_STRING_DATA
,lh)

	)

2542 
	#lh_ERR_STRING_DATA_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
ERR_STRING_DATA
,lh)

	)

2543 
	#lh_ERR_STRING_DATA_node_¡©s_bio
(
lh
,
out
) \

2544 
	`LHM_lh_node_¡©s_bio
(
ERR_STRING_DATA
,
lh
,
out
)

	)

2545 
	#lh_ERR_STRING_DATA_node_u§ge_¡©s_bio
(
lh
,
out
) \

2546 
	`LHM_lh_node_u§ge_¡©s_bio
(
ERR_STRING_DATA
,
lh
,
out
)

	)

2547 
	#lh_ERR_STRING_DATA_¡©s_bio
(
lh
,
out
) \

2548 
	`LHM_lh_¡©s_bio
(
ERR_STRING_DATA
,
lh
,
out
)

	)

2549 
	#lh_ERR_STRING_DATA_ä“
(
lh
è
	`LHM_lh_ä“
(
ERR_STRING_DATA
,lh)

	)

2550 
	#lh_EX_CLASS_ITEM_Ãw
(è
	`LHM_lh_Ãw
(
EX_CLASS_ITEM
,
ex_şass_™em
)

	)

2551 
	#lh_EX_CLASS_ITEM_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
EX_CLASS_ITEM
,lh,š¡)

	)

2552 
	#lh_EX_CLASS_ITEM_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
EX_CLASS_ITEM
,lh,š¡)

	)

2553 
	#lh_EX_CLASS_ITEM_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
EX_CLASS_ITEM
,lh,š¡)

	)

2554 
	#lh_EX_CLASS_ITEM_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
EX_CLASS_ITEM
,lh,â)

	)

2555 
	#lh_EX_CLASS_ITEM_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2556 
	`LHM_lh_dßÎ_¬g
(
EX_CLASS_ITEM
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2557 
	#lh_EX_CLASS_ITEM_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
EX_CLASS_ITEM
,lh)

	)

2558 
	#lh_EX_CLASS_ITEM_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
EX_CLASS_ITEM
,lh)

	)

2559 
	#lh_EX_CLASS_ITEM_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
EX_CLASS_ITEM
,lh)

	)

2560 
	#lh_EX_CLASS_ITEM_node_¡©s_bio
(
lh
,
out
) \

2561 
	`LHM_lh_node_¡©s_bio
(
EX_CLASS_ITEM
,
lh
,
out
)

	)

2562 
	#lh_EX_CLASS_ITEM_node_u§ge_¡©s_bio
(
lh
,
out
) \

2563 
	`LHM_lh_node_u§ge_¡©s_bio
(
EX_CLASS_ITEM
,
lh
,
out
)

	)

2564 
	#lh_EX_CLASS_ITEM_¡©s_bio
(
lh
,
out
) \

2565 
	`LHM_lh_¡©s_bio
(
EX_CLASS_ITEM
,
lh
,
out
)

	)

2566 
	#lh_EX_CLASS_ITEM_ä“
(
lh
è
	`LHM_lh_ä“
(
EX_CLASS_ITEM
,lh)

	)

2567 
	#lh_FUNCTION_Ãw
(è
	`LHM_lh_Ãw
(
FUNCTION
,
funùiÚ
)

	)

2568 
	#lh_FUNCTION_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
FUNCTION
,lh,š¡)

	)

2569 
	#lh_FUNCTION_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
FUNCTION
,lh,š¡)

	)

2570 
	#lh_FUNCTION_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
FUNCTION
,lh,š¡)

	)

2571 
	#lh_FUNCTION_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
FUNCTION
,lh,â)

	)

2572 
	#lh_FUNCTION_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2573 
	`LHM_lh_dßÎ_¬g
(
FUNCTION
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2574 
	#lh_FUNCTION_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
FUNCTION
,lh)

	)

2575 
	#lh_FUNCTION_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
FUNCTION
,lh)

	)

2576 
	#lh_FUNCTION_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
FUNCTION
,lh)

	)

2577 
	#lh_FUNCTION_node_¡©s_bio
(
lh
,
out
) \

2578 
	`LHM_lh_node_¡©s_bio
(
FUNCTION
,
lh
,
out
)

	)

2579 
	#lh_FUNCTION_node_u§ge_¡©s_bio
(
lh
,
out
) \

2580 
	`LHM_lh_node_u§ge_¡©s_bio
(
FUNCTION
,
lh
,
out
)

	)

2581 
	#lh_FUNCTION_¡©s_bio
(
lh
,
out
) \

2582 
	`LHM_lh_¡©s_bio
(
FUNCTION
,
lh
,
out
)

	)

2583 
	#lh_FUNCTION_ä“
(
lh
è
	`LHM_lh_ä“
(
FUNCTION
,lh)

	)

2584 
	#lh_MEM_Ãw
(è
	`LHM_lh_Ãw
(
MEM
,
mem
)

	)

2585 
	#lh_MEM_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
MEM
,lh,š¡)

	)

2586 
	#lh_MEM_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
MEM
,lh,š¡)

	)

2587 
	#lh_MEM_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
MEM
,lh,š¡)

	)

2588 
	#lh_MEM_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
MEM
,lh,â)

	)

2589 
	#lh_MEM_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2590 
	`LHM_lh_dßÎ_¬g
(
MEM
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2591 
	#lh_MEM_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
MEM
,lh)

	)

2592 
	#lh_MEM_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
MEM
,lh)

	)

2593 
	#lh_MEM_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
MEM
,lh)

	)

2594 
	#lh_MEM_node_¡©s_bio
(
lh
,
out
) \

2595 
	`LHM_lh_node_¡©s_bio
(
MEM
,
lh
,
out
)

	)

2596 
	#lh_MEM_node_u§ge_¡©s_bio
(
lh
,
out
) \

2597 
	`LHM_lh_node_u§ge_¡©s_bio
(
MEM
,
lh
,
out
)

	)

2598 
	#lh_MEM_¡©s_bio
(
lh
,
out
) \

2599 
	`LHM_lh_¡©s_bio
(
MEM
,
lh
,
out
)

	)

2600 
	#lh_MEM_ä“
(
lh
è
	`LHM_lh_ä“
(
MEM
,lh)

	)

2601 
	#lh_OBJ_NAME_Ãw
(è
	`LHM_lh_Ãw
(
OBJ_NAME
,
obj_Çme
)

	)

2602 
	#lh_OBJ_NAME_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
OBJ_NAME
,lh,š¡)

	)

2603 
	#lh_OBJ_NAME_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
OBJ_NAME
,lh,š¡)

	)

2604 
	#lh_OBJ_NAME_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
OBJ_NAME
,lh,š¡)

	)

2605 
	#lh_OBJ_NAME_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
OBJ_NAME
,lh,â)

	)

2606 
	#lh_OBJ_NAME_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2607 
	`LHM_lh_dßÎ_¬g
(
OBJ_NAME
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2608 
	#lh_OBJ_NAME_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
OBJ_NAME
,lh)

	)

2609 
	#lh_OBJ_NAME_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
OBJ_NAME
,lh)

	)

2610 
	#lh_OBJ_NAME_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
OBJ_NAME
,lh)

	)

2611 
	#lh_OBJ_NAME_node_¡©s_bio
(
lh
,
out
) \

2612 
	`LHM_lh_node_¡©s_bio
(
OBJ_NAME
,
lh
,
out
)

	)

2613 
	#lh_OBJ_NAME_node_u§ge_¡©s_bio
(
lh
,
out
) \

2614 
	`LHM_lh_node_u§ge_¡©s_bio
(
OBJ_NAME
,
lh
,
out
)

	)

2615 
	#lh_OBJ_NAME_¡©s_bio
(
lh
,
out
) \

2616 
	`LHM_lh_¡©s_bio
(
OBJ_NAME
,
lh
,
out
)

	)

2617 
	#lh_OBJ_NAME_ä“
(
lh
è
	`LHM_lh_ä“
(
OBJ_NAME
,lh)

	)

2618 
	#lh_OPENSSL_CSTRING_Ãw
(è
	`LHM_lh_Ãw
(
OPENSSL_CSTRING
,
İ’s¦_c¡ršg
)

	)

2619 
	#lh_OPENSSL_CSTRING_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
OPENSSL_CSTRING
,lh,š¡)

	)

2620 
	#lh_OPENSSL_CSTRING_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
OPENSSL_CSTRING
,lh,š¡)

	)

2621 
	#lh_OPENSSL_CSTRING_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
OPENSSL_CSTRING
,lh,š¡)

	)

2622 
	#lh_OPENSSL_CSTRING_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
OPENSSL_CSTRING
,lh,â)

	)

2623 
	#lh_OPENSSL_CSTRING_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2624 
	`LHM_lh_dßÎ_¬g
(
OPENSSL_CSTRING
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2625 
	#lh_OPENSSL_CSTRING_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
OPENSSL_CSTRING
,lh)

	)

2626 
	#lh_OPENSSL_CSTRING_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
OPENSSL_CSTRING
,lh)

	)

2627 
	#lh_OPENSSL_CSTRING_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
OPENSSL_CSTRING
,lh)

	)

2628 
	#lh_OPENSSL_CSTRING_node_¡©s_bio
(
lh
,
out
) \

2629 
	`LHM_lh_node_¡©s_bio
(
OPENSSL_CSTRING
,
lh
,
out
)

	)

2630 
	#lh_OPENSSL_CSTRING_node_u§ge_¡©s_bio
(
lh
,
out
) \

2631 
	`LHM_lh_node_u§ge_¡©s_bio
(
OPENSSL_CSTRING
,
lh
,
out
)

	)

2632 
	#lh_OPENSSL_CSTRING_¡©s_bio
(
lh
,
out
) \

2633 
	`LHM_lh_¡©s_bio
(
OPENSSL_CSTRING
,
lh
,
out
)

	)

2634 
	#lh_OPENSSL_CSTRING_ä“
(
lh
è
	`LHM_lh_ä“
(
OPENSSL_CSTRING
,lh)

	)

2635 
	#lh_OPENSSL_STRING_Ãw
(è
	`LHM_lh_Ãw
(
OPENSSL_STRING
,
İ’s¦_¡ršg
)

	)

2636 
	#lh_OPENSSL_STRING_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
OPENSSL_STRING
,lh,š¡)

	)

2637 
	#lh_OPENSSL_STRING_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
OPENSSL_STRING
,lh,š¡)

	)

2638 
	#lh_OPENSSL_STRING_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
OPENSSL_STRING
,lh,š¡)

	)

2639 
	#lh_OPENSSL_STRING_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
OPENSSL_STRING
,lh,â)

	)

2640 
	#lh_OPENSSL_STRING_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2641 
	`LHM_lh_dßÎ_¬g
(
OPENSSL_STRING
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2642 
	#lh_OPENSSL_STRING_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
OPENSSL_STRING
,lh)

	)

2643 
	#lh_OPENSSL_STRING_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
OPENSSL_STRING
,lh)

	)

2644 
	#lh_OPENSSL_STRING_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
OPENSSL_STRING
,lh)

	)

2645 
	#lh_OPENSSL_STRING_node_¡©s_bio
(
lh
,
out
) \

2646 
	`LHM_lh_node_¡©s_bio
(
OPENSSL_STRING
,
lh
,
out
)

	)

2647 
	#lh_OPENSSL_STRING_node_u§ge_¡©s_bio
(
lh
,
out
) \

2648 
	`LHM_lh_node_u§ge_¡©s_bio
(
OPENSSL_STRING
,
lh
,
out
)

	)

2649 
	#lh_OPENSSL_STRING_¡©s_bio
(
lh
,
out
) \

2650 
	`LHM_lh_¡©s_bio
(
OPENSSL_STRING
,
lh
,
out
)

	)

2651 
	#lh_OPENSSL_STRING_ä“
(
lh
è
	`LHM_lh_ä“
(
OPENSSL_STRING
,lh)

	)

2652 
	#lh_SSL_SESSION_Ãw
(è
	`LHM_lh_Ãw
(
SSL_SESSION
,
s¦_£ssiÚ
)

	)

2653 
	#lh_SSL_SESSION_š£¹
(
lh
,
š¡
è
	`LHM_lh_š£¹
(
SSL_SESSION
,lh,š¡)

	)

2654 
	#lh_SSL_SESSION_»Œ›ve
(
lh
,
š¡
è
	`LHM_lh_»Œ›ve
(
SSL_SESSION
,lh,š¡)

	)

2655 
	#lh_SSL_SESSION_d–‘e
(
lh
,
š¡
è
	`LHM_lh_d–‘e
(
SSL_SESSION
,lh,š¡)

	)

2656 
	#lh_SSL_SESSION_dßÎ
(
lh
,
â
è
	`LHM_lh_dßÎ
(
SSL_SESSION
,lh,â)

	)

2657 
	#lh_SSL_SESSION_dßÎ_¬g
(
lh
,
â
,
¬g_ty³
,
¬g
) \

2658 
	`LHM_lh_dßÎ_¬g
(
SSL_SESSION
,
lh
,
â
,
¬g_ty³
,
¬g
)

	)

2659 
	#lh_SSL_SESSION_”rÜ
(
lh
è
	`LHM_lh_”rÜ
(
SSL_SESSION
,lh)

	)

2660 
	#lh_SSL_SESSION_num_™ems
(
lh
è
	`LHM_lh_num_™ems
(
SSL_SESSION
,lh)

	)

2661 
	#lh_SSL_SESSION_down_lßd
(
lh
è
	`LHM_lh_down_lßd
(
SSL_SESSION
,lh)

	)

2662 
	#lh_SSL_SESSION_node_¡©s_bio
(
lh
,
out
) \

2663 
	`LHM_lh_node_¡©s_bio
(
SSL_SESSION
,
lh
,
out
)

	)

2664 
	#lh_SSL_SESSION_node_u§ge_¡©s_bio
(
lh
,
out
) \

2665 
	`LHM_lh_node_u§ge_¡©s_bio
(
SSL_SESSION
,
lh
,
out
)

	)

2666 
	#lh_SSL_SESSION_¡©s_bio
(
lh
,
out
) \

2667 
	`LHM_lh_¡©s_bio
(
SSL_SESSION
,
lh
,
out
)

	)

2668 
	#lh_SSL_SESSION_ä“
(
lh
è
	`LHM_lh_ä“
(
SSL_SESSION
,lh)

	)

2669 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/srtp.h

117 #iâdeà
HEADER_D1_SRTP_H


118 
	#HEADER_D1_SRTP_H


	)

120 
	~<İ’s¦/s¦.h
>

122 #ifdeà 
__ılu¥lus


126 
	#SRTP_AES128_CM_SHA1_80
 0x0001

	)

127 
	#SRTP_AES128_CM_SHA1_32
 0x0002

	)

128 
	#SRTP_AES128_F8_SHA1_80
 0x0003

	)

129 
	#SRTP_AES128_F8_SHA1_32
 0x0004

	)

130 
	#SRTP_NULL_SHA1_80
 0x0005

	)

131 
	#SRTP_NULL_SHA1_32
 0x0006

	)

133 #iâdeà
OPENSSL_NO_SRTP


135 
SSL_CTX_£t_£xt_u£_¤
(
SSL_CTX
 *
ùx
, cÚ¡ *
´ofes
);

136 
SSL_£t_£xt_u£_¤
(
SSL
 *
ùx
, cÚ¡ *
´ofes
);

138 
STACK_OF
(
SRTP_PROTECTION_PROFILE
è*
SSL_g‘_¤_´ofes
(
SSL
 *
s¦
);

139 
SRTP_PROTECTION_PROFILE
 *
SSL_g‘_£Ëùed_¤_´ofe
(
SSL
 *
s
);

143 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ssl2.h

59 #iâdeà
HEADER_SSL2_H


60 
	#HEADER_SSL2_H


	)

62 #ifdeà 
__ılu¥lus


67 
	#SSL2_VERSION
 0x0002

	)

68 
	#SSL2_VERSION_MAJOR
 0x00

	)

69 
	#SSL2_VERSION_MINOR
 0x02

	)

74 
	#SSL2_MT_ERROR
 0

	)

75 
	#SSL2_MT_CLIENT_HELLO
 1

	)

76 
	#SSL2_MT_CLIENT_MASTER_KEY
 2

	)

77 
	#SSL2_MT_CLIENT_FINISHED
 3

	)

78 
	#SSL2_MT_SERVER_HELLO
 4

	)

79 
	#SSL2_MT_SERVER_VERIFY
 5

	)

80 
	#SSL2_MT_SERVER_FINISHED
 6

	)

81 
	#SSL2_MT_REQUEST_CERTIFICATE
 7

	)

82 
	#SSL2_MT_CLIENT_CERTIFICATE
 8

	)

85 
	#SSL2_PE_UNDEFINED_ERROR
 0x0000

	)

86 
	#SSL2_PE_NO_CIPHER
 0x0001

	)

87 
	#SSL2_PE_NO_CERTIFICATE
 0x0002

	)

88 
	#SSL2_PE_BAD_CERTIFICATE
 0x0004

	)

89 
	#SSL2_PE_UNSUPPORTED_CERTIFICATE_TYPE
 0x0006

	)

92 
	#SSL2_CK_NULL_WITH_MD5
 0x02000000

	)

93 
	#SSL2_CK_RC4_128_WITH_MD5
 0x02010080

	)

94 
	#SSL2_CK_RC4_128_EXPORT40_WITH_MD5
 0x02020080

	)

95 
	#SSL2_CK_RC2_128_CBC_WITH_MD5
 0x02030080

	)

96 
	#SSL2_CK_RC2_128_CBC_EXPORT40_WITH_MD5
 0x02040080

	)

97 
	#SSL2_CK_IDEA_128_CBC_WITH_MD5
 0x02050080

	)

98 
	#SSL2_CK_DES_64_CBC_WITH_MD5
 0x02060040

	)

99 
	#SSL2_CK_DES_64_CBC_WITH_SHA
 0x02060140

	)

100 
	#SSL2_CK_DES_192_EDE3_CBC_WITH_MD5
 0x020700c0

	)

101 
	#SSL2_CK_DES_192_EDE3_CBC_WITH_SHA
 0x020701c0

	)

102 
	#SSL2_CK_RC4_64_WITH_MD5
 0x02080080

	)

104 
	#SSL2_CK_DES_64_CFB64_WITH_MD5_1
 0x02ff0800

	)

105 
	#SSL2_CK_NULL
 0x02ff0810

	)

107 
	#SSL2_TXT_DES_64_CFB64_WITH_MD5_1
 "DES-CFB-M1"

	)

108 
	#SSL2_TXT_NULL_WITH_MD5
 "NULL-MD5"

	)

109 
	#SSL2_TXT_RC4_128_WITH_MD5
 "RC4-MD5"

	)

110 
	#SSL2_TXT_RC4_128_EXPORT40_WITH_MD5
 "EXP-RC4-MD5"

	)

111 
	#SSL2_TXT_RC2_128_CBC_WITH_MD5
 "RC2-CBC-MD5"

	)

112 
	#SSL2_TXT_RC2_128_CBC_EXPORT40_WITH_MD5
 "EXP-RC2-CBC-MD5"

	)

113 
	#SSL2_TXT_IDEA_128_CBC_WITH_MD5
 "IDEA-CBC-MD5"

	)

114 
	#SSL2_TXT_DES_64_CBC_WITH_MD5
 "DES-CBC-MD5"

	)

115 
	#SSL2_TXT_DES_64_CBC_WITH_SHA
 "DES-CBC-SHA"

	)

116 
	#SSL2_TXT_DES_192_EDE3_CBC_WITH_MD5
 "DES-CBC3-MD5"

	)

117 
	#SSL2_TXT_DES_192_EDE3_CBC_WITH_SHA
 "DES-CBC3-SHA"

	)

118 
	#SSL2_TXT_RC4_64_WITH_MD5
 "RC4-64-MD5"

	)

120 
	#SSL2_TXT_NULL
 "NULL"

	)

123 
	#SSL2_CF_5_BYTE_ENC
 0x01

	)

124 
	#SSL2_CF_8_BYTE_ENC
 0x02

	)

127 
	#SSL2_CT_X509_CERTIFICATE
 0x01

	)

130 
	#SSL2_AT_MD5_WITH_RSA_ENCRYPTION
 0x01

	)

132 
	#SSL2_MAX_SSL_SESSION_ID_LENGTH
 32

	)

135 
	#SSL2_MAX_MASTER_KEY_LENGTH_IN_BITS
 256

	)

136 #ifdeà
OPENSSL_SYS_MPE


137 
	#SSL2_MAX_RECORD_LENGTH_2_BYTE_HEADER
 29998u

	)

139 
	#SSL2_MAX_RECORD_LENGTH_2_BYTE_HEADER
 32767u

	)

142 
	#SSL2_MAX_RECORD_LENGTH_3_BYTE_HEADER
 16383

	)

144 
	#SSL2_CHALLENGE_LENGTH
 16

	)

148 
	#SSL2_MIN_CHALLENGE_LENGTH
 16

	)

149 
	#SSL2_MAX_CHALLENGE_LENGTH
 32

	)

150 
	#SSL2_CONNECTION_ID_LENGTH
 16

	)

151 
	#SSL2_MAX_CONNECTION_ID_LENGTH
 16

	)

152 
	#SSL2_SSL_SESSION_ID_LENGTH
 16

	)

153 
	#SSL2_MAX_CERT_CHALLENGE_LENGTH
 32

	)

154 
	#SSL2_MIN_CERT_CHALLENGE_LENGTH
 16

	)

155 
	#SSL2_MAX_KEY_MATERIAL_LENGTH
 24

	)

157 #iâdeà
HEADER_SSL_LOCL_H


158 
	#CERT
 

	)

161 #iâdeà
OPENSSL_NO_SSL_INTERN


163 
	ss¦2_¡©e_¡
 {

164 
th»e_by‹_h—d”
;

165 
ş—r_‹xt
;

166 
esÿ³
;

167 
s¦2_rŞlback
;

171 
wnum
;

172 
w³nd_tÙ
;

173 cÚ¡ *
w³nd_buf
;

174 
w³nd_off
;

175 
w³nd_Ën
;

176 
w³nd_»t
;

178 
rbuf_Ëá
;

179 
rbuf_offs
;

180 *
rbuf
;

181 *
wbuf
;

182 *
wr™e_±r
;

184 
·ddšg
;

185 
¾’gth
;

186 
¿ù_d©a_Ëngth
;

187 
wËngth
;

188 
waù_d©a_Ëngth
;

189 *
¿ù_d©a
;

190 *
waù_d©a
;

191 *
mac_d©a
;

192 *
»ad_key
;

193 *
wr™e_key
;

195 
ch®Ënge_Ëngth
;

196 
ch®Ënge
[
SSL2_MAX_CHALLENGE_LENGTH
];

197 
cÚn_id_Ëngth
;

198 
cÚn_id
[
SSL2_MAX_CONNECTION_ID_LENGTH
];

199 
key_m©”Ÿl_Ëngth
;

200 
key_m©”Ÿl
[
SSL2_MAX_KEY_MATERIAL_LENGTH
 * 2];

201 
»ad_£qu’û
;

202 
wr™e_£qu’û
;

204 
cÚn_id_Ëngth
;

205 
û¹_ty³
;

206 
û¹_Ëngth
;

207 
c¦
;

208 
ş—r
;

209 
’c
;

210 
cş
[
SSL2_MAX_CERT_CHALLENGE_LENGTH
];

211 
ch”_¥ec_Ëngth
;

212 
£ssiÚ_id_Ëngth
;

213 
ş’
;

214 
¾’
;

215 } 
tmp
;

216 } 
	tSSL2_STATE
;

222 
	#SSL2_ST_SEND_CLIENT_HELLO_A
 (0x10|
SSL_ST_CONNECT
)

	)

223 
	#SSL2_ST_SEND_CLIENT_HELLO_B
 (0x11|
SSL_ST_CONNECT
)

	)

224 
	#SSL2_ST_GET_SERVER_HELLO_A
 (0x20|
SSL_ST_CONNECT
)

	)

225 
	#SSL2_ST_GET_SERVER_HELLO_B
 (0x21|
SSL_ST_CONNECT
)

	)

226 
	#SSL2_ST_SEND_CLIENT_MASTER_KEY_A
 (0x30|
SSL_ST_CONNECT
)

	)

227 
	#SSL2_ST_SEND_CLIENT_MASTER_KEY_B
 (0x31|
SSL_ST_CONNECT
)

	)

228 
	#SSL2_ST_SEND_CLIENT_FINISHED_A
 (0x40|
SSL_ST_CONNECT
)

	)

229 
	#SSL2_ST_SEND_CLIENT_FINISHED_B
 (0x41|
SSL_ST_CONNECT
)

	)

230 
	#SSL2_ST_SEND_CLIENT_CERTIFICATE_A
 (0x50|
SSL_ST_CONNECT
)

	)

231 
	#SSL2_ST_SEND_CLIENT_CERTIFICATE_B
 (0x51|
SSL_ST_CONNECT
)

	)

232 
	#SSL2_ST_SEND_CLIENT_CERTIFICATE_C
 (0x52|
SSL_ST_CONNECT
)

	)

233 
	#SSL2_ST_SEND_CLIENT_CERTIFICATE_D
 (0x53|
SSL_ST_CONNECT
)

	)

234 
	#SSL2_ST_GET_SERVER_VERIFY_A
 (0x60|
SSL_ST_CONNECT
)

	)

235 
	#SSL2_ST_GET_SERVER_VERIFY_B
 (0x61|
SSL_ST_CONNECT
)

	)

236 
	#SSL2_ST_GET_SERVER_FINISHED_A
 (0x70|
SSL_ST_CONNECT
)

	)

237 
	#SSL2_ST_GET_SERVER_FINISHED_B
 (0x71|
SSL_ST_CONNECT
)

	)

238 
	#SSL2_ST_CLIENT_START_ENCRYPTION
 (0x80|
SSL_ST_CONNECT
)

	)

239 
	#SSL2_ST_X509_GET_CLIENT_CERTIFICATE
 (0x90|
SSL_ST_CONNECT
)

	)

241 
	#SSL2_ST_GET_CLIENT_HELLO_A
 (0x10|
SSL_ST_ACCEPT
)

	)

242 
	#SSL2_ST_GET_CLIENT_HELLO_B
 (0x11|
SSL_ST_ACCEPT
)

	)

243 
	#SSL2_ST_GET_CLIENT_HELLO_C
 (0x12|
SSL_ST_ACCEPT
)

	)

244 
	#SSL2_ST_SEND_SERVER_HELLO_A
 (0x20|
SSL_ST_ACCEPT
)

	)

245 
	#SSL2_ST_SEND_SERVER_HELLO_B
 (0x21|
SSL_ST_ACCEPT
)

	)

246 
	#SSL2_ST_GET_CLIENT_MASTER_KEY_A
 (0x30|
SSL_ST_ACCEPT
)

	)

247 
	#SSL2_ST_GET_CLIENT_MASTER_KEY_B
 (0x31|
SSL_ST_ACCEPT
)

	)

248 
	#SSL2_ST_SEND_SERVER_VERIFY_A
 (0x40|
SSL_ST_ACCEPT
)

	)

249 
	#SSL2_ST_SEND_SERVER_VERIFY_B
 (0x41|
SSL_ST_ACCEPT
)

	)

250 
	#SSL2_ST_SEND_SERVER_VERIFY_C
 (0x42|
SSL_ST_ACCEPT
)

	)

251 
	#SSL2_ST_GET_CLIENT_FINISHED_A
 (0x50|
SSL_ST_ACCEPT
)

	)

252 
	#SSL2_ST_GET_CLIENT_FINISHED_B
 (0x51|
SSL_ST_ACCEPT
)

	)

253 
	#SSL2_ST_SEND_SERVER_FINISHED_A
 (0x60|
SSL_ST_ACCEPT
)

	)

254 
	#SSL2_ST_SEND_SERVER_FINISHED_B
 (0x61|
SSL_ST_ACCEPT
)

	)

255 
	#SSL2_ST_SEND_REQUEST_CERTIFICATE_A
 (0x70|
SSL_ST_ACCEPT
)

	)

256 
	#SSL2_ST_SEND_REQUEST_CERTIFICATE_B
 (0x71|
SSL_ST_ACCEPT
)

	)

257 
	#SSL2_ST_SEND_REQUEST_CERTIFICATE_C
 (0x72|
SSL_ST_ACCEPT
)

	)

258 
	#SSL2_ST_SEND_REQUEST_CERTIFICATE_D
 (0x73|
SSL_ST_ACCEPT
)

	)

259 
	#SSL2_ST_SERVER_START_ENCRYPTION
 (0x80|
SSL_ST_ACCEPT
)

	)

260 
	#SSL2_ST_X509_GET_SERVER_CERTIFICATE
 (0x90|
SSL_ST_ACCEPT
)

	)

262 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ssl23.h

59 #iâdeà
HEADER_SSL23_H


60 
	#HEADER_SSL23_H


	)

62 #ifdeà 
__ılu¥lus


70 
	#SSL23_ST_CW_CLNT_HELLO_A
 (0x210|
SSL_ST_CONNECT
)

	)

71 
	#SSL23_ST_CW_CLNT_HELLO_B
 (0x211|
SSL_ST_CONNECT
)

	)

73 
	#SSL23_ST_CR_SRVR_HELLO_A
 (0x220|
SSL_ST_CONNECT
)

	)

74 
	#SSL23_ST_CR_SRVR_HELLO_B
 (0x221|
SSL_ST_CONNECT
)

	)

78 
	#SSL23_ST_SR_CLNT_HELLO_A
 (0x210|
SSL_ST_ACCEPT
)

	)

79 
	#SSL23_ST_SR_CLNT_HELLO_B
 (0x211|
SSL_ST_ACCEPT
)

	)

81 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ssl3.h

117 #iâdeà
HEADER_SSL3_H


118 
	#HEADER_SSL3_H


	)

120 #iâdeà
OPENSSL_NO_COMP


121 
	~<İ’s¦/comp.h
>

123 
	~<İ’s¦/bufãr.h
>

124 
	~<İ’s¦/evp.h
>

125 
	~<İ’s¦/s¦.h
>

127 #ifdeà 
__ılu¥lus


135 
	#SSL3_CK_SCSV
 0x030000FF

	)

141 
	#SSL3_CK_FALLBACK_SCSV
 0x03005600

	)

143 
	#SSL3_CK_RSA_NULL_MD5
 0x03000001

	)

144 
	#SSL3_CK_RSA_NULL_SHA
 0x03000002

	)

145 
	#SSL3_CK_RSA_RC4_40_MD5
 0x03000003

	)

146 
	#SSL3_CK_RSA_RC4_128_MD5
 0x03000004

	)

147 
	#SSL3_CK_RSA_RC4_128_SHA
 0x03000005

	)

148 
	#SSL3_CK_RSA_RC2_40_MD5
 0x03000006

	)

149 
	#SSL3_CK_RSA_IDEA_128_SHA
 0x03000007

	)

150 
	#SSL3_CK_RSA_DES_40_CBC_SHA
 0x03000008

	)

151 
	#SSL3_CK_RSA_DES_64_CBC_SHA
 0x03000009

	)

152 
	#SSL3_CK_RSA_DES_192_CBC3_SHA
 0x0300000A

	)

154 
	#SSL3_CK_DH_DSS_DES_40_CBC_SHA
 0x0300000B

	)

155 
	#SSL3_CK_DH_DSS_DES_64_CBC_SHA
 0x0300000C

	)

156 
	#SSL3_CK_DH_DSS_DES_192_CBC3_SHA
 0x0300000D

	)

157 
	#SSL3_CK_DH_RSA_DES_40_CBC_SHA
 0x0300000E

	)

158 
	#SSL3_CK_DH_RSA_DES_64_CBC_SHA
 0x0300000F

	)

159 
	#SSL3_CK_DH_RSA_DES_192_CBC3_SHA
 0x03000010

	)

161 
	#SSL3_CK_EDH_DSS_DES_40_CBC_SHA
 0x03000011

	)

162 
	#SSL3_CK_DHE_DSS_DES_40_CBC_SHA
 
SSL3_CK_EDH_DSS_DES_40_CBC_SHA


	)

163 
	#SSL3_CK_EDH_DSS_DES_64_CBC_SHA
 0x03000012

	)

164 
	#SSL3_CK_DHE_DSS_DES_64_CBC_SHA
 
SSL3_CK_EDH_DSS_DES_64_CBC_SHA


	)

165 
	#SSL3_CK_EDH_DSS_DES_192_CBC3_SHA
 0x03000013

	)

166 
	#SSL3_CK_DHE_DSS_DES_192_CBC3_SHA
 
SSL3_CK_EDH_DSS_DES_192_CBC3_SHA


	)

167 
	#SSL3_CK_EDH_RSA_DES_40_CBC_SHA
 0x03000014

	)

168 
	#SSL3_CK_DHE_RSA_DES_40_CBC_SHA
 
SSL3_CK_EDH_RSA_DES_40_CBC_SHA


	)

169 
	#SSL3_CK_EDH_RSA_DES_64_CBC_SHA
 0x03000015

	)

170 
	#SSL3_CK_DHE_RSA_DES_64_CBC_SHA
 
SSL3_CK_EDH_RSA_DES_64_CBC_SHA


	)

171 
	#SSL3_CK_EDH_RSA_DES_192_CBC3_SHA
 0x03000016

	)

172 
	#SSL3_CK_DHE_RSA_DES_192_CBC3_SHA
 
SSL3_CK_EDH_RSA_DES_192_CBC3_SHA


	)

174 
	#SSL3_CK_ADH_RC4_40_MD5
 0x03000017

	)

175 
	#SSL3_CK_ADH_RC4_128_MD5
 0x03000018

	)

176 
	#SSL3_CK_ADH_DES_40_CBC_SHA
 0x03000019

	)

177 
	#SSL3_CK_ADH_DES_64_CBC_SHA
 0x0300001A

	)

178 
	#SSL3_CK_ADH_DES_192_CBC_SHA
 0x0300001B

	)

181 
	#SSL3_CK_FZA_DMS_NULL_SHA
 0x0300001C

	)

182 
	#SSL3_CK_FZA_DMS_FZA_SHA
 0x0300001D

	)

188 
	#SSL3_CK_FZA_DMS_RC4_SHA
 0x0300001E

	)

195 
	#SSL3_CK_KRB5_DES_64_CBC_SHA
 0x0300001E

	)

196 
	#SSL3_CK_KRB5_DES_192_CBC3_SHA
 0x0300001F

	)

197 
	#SSL3_CK_KRB5_RC4_128_SHA
 0x03000020

	)

198 
	#SSL3_CK_KRB5_IDEA_128_CBC_SHA
 0x03000021

	)

199 
	#SSL3_CK_KRB5_DES_64_CBC_MD5
 0x03000022

	)

200 
	#SSL3_CK_KRB5_DES_192_CBC3_MD5
 0x03000023

	)

201 
	#SSL3_CK_KRB5_RC4_128_MD5
 0x03000024

	)

202 
	#SSL3_CK_KRB5_IDEA_128_CBC_MD5
 0x03000025

	)

204 
	#SSL3_CK_KRB5_DES_40_CBC_SHA
 0x03000026

	)

205 
	#SSL3_CK_KRB5_RC2_40_CBC_SHA
 0x03000027

	)

206 
	#SSL3_CK_KRB5_RC4_40_SHA
 0x03000028

	)

207 
	#SSL3_CK_KRB5_DES_40_CBC_MD5
 0x03000029

	)

208 
	#SSL3_CK_KRB5_RC2_40_CBC_MD5
 0x0300002A

	)

209 
	#SSL3_CK_KRB5_RC4_40_MD5
 0x0300002B

	)

211 
	#SSL3_TXT_RSA_NULL_MD5
 "NULL-MD5"

	)

212 
	#SSL3_TXT_RSA_NULL_SHA
 "NULL-SHA"

	)

213 
	#SSL3_TXT_RSA_RC4_40_MD5
 "EXP-RC4-MD5"

	)

214 
	#SSL3_TXT_RSA_RC4_128_MD5
 "RC4-MD5"

	)

215 
	#SSL3_TXT_RSA_RC4_128_SHA
 "RC4-SHA"

	)

216 
	#SSL3_TXT_RSA_RC2_40_MD5
 "EXP-RC2-CBC-MD5"

	)

217 
	#SSL3_TXT_RSA_IDEA_128_SHA
 "IDEA-CBC-SHA"

	)

218 
	#SSL3_TXT_RSA_DES_40_CBC_SHA
 "EXP-DES-CBC-SHA"

	)

219 
	#SSL3_TXT_RSA_DES_64_CBC_SHA
 "DES-CBC-SHA"

	)

220 
	#SSL3_TXT_RSA_DES_192_CBC3_SHA
 "DES-CBC3-SHA"

	)

222 
	#SSL3_TXT_DH_DSS_DES_40_CBC_SHA
 "EXP-DH-DSS-DES-CBC-SHA"

	)

223 
	#SSL3_TXT_DH_DSS_DES_64_CBC_SHA
 "DH-DSS-DES-CBC-SHA"

	)

224 
	#SSL3_TXT_DH_DSS_DES_192_CBC3_SHA
 "DH-DSS-DES-CBC3-SHA"

	)

225 
	#SSL3_TXT_DH_RSA_DES_40_CBC_SHA
 "EXP-DH-RSA-DES-CBC-SHA"

	)

226 
	#SSL3_TXT_DH_RSA_DES_64_CBC_SHA
 "DH-RSA-DES-CBC-SHA"

	)

227 
	#SSL3_TXT_DH_RSA_DES_192_CBC3_SHA
 "DH-RSA-DES-CBC3-SHA"

	)

229 
	#SSL3_TXT_DHE_DSS_DES_40_CBC_SHA
 "EXP-DHE-DSS-DES-CBC-SHA"

	)

230 
	#SSL3_TXT_DHE_DSS_DES_64_CBC_SHA
 "DHE-DSS-DES-CBC-SHA"

	)

231 
	#SSL3_TXT_DHE_DSS_DES_192_CBC3_SHA
 "DHE-DSS-DES-CBC3-SHA"

	)

232 
	#SSL3_TXT_DHE_RSA_DES_40_CBC_SHA
 "EXP-DHE-RSA-DES-CBC-SHA"

	)

233 
	#SSL3_TXT_DHE_RSA_DES_64_CBC_SHA
 "DHE-RSA-DES-CBC-SHA"

	)

234 
	#SSL3_TXT_DHE_RSA_DES_192_CBC3_SHA
 "DHE-RSA-DES-CBC3-SHA"

	)

241 
	#SSL3_TXT_EDH_DSS_DES_40_CBC_SHA
 "EXP-EDH-DSS-DES-CBC-SHA"

	)

242 
	#SSL3_TXT_EDH_DSS_DES_64_CBC_SHA
 "EDH-DSS-DES-CBC-SHA"

	)

243 
	#SSL3_TXT_EDH_DSS_DES_192_CBC3_SHA
 "EDH-DSS-DES-CBC3-SHA"

	)

244 
	#SSL3_TXT_EDH_RSA_DES_40_CBC_SHA
 "EXP-EDH-RSA-DES-CBC-SHA"

	)

245 
	#SSL3_TXT_EDH_RSA_DES_64_CBC_SHA
 "EDH-RSA-DES-CBC-SHA"

	)

246 
	#SSL3_TXT_EDH_RSA_DES_192_CBC3_SHA
 "EDH-RSA-DES-CBC3-SHA"

	)

248 
	#SSL3_TXT_ADH_RC4_40_MD5
 "EXP-ADH-RC4-MD5"

	)

249 
	#SSL3_TXT_ADH_RC4_128_MD5
 "ADH-RC4-MD5"

	)

250 
	#SSL3_TXT_ADH_DES_40_CBC_SHA
 "EXP-ADH-DES-CBC-SHA"

	)

251 
	#SSL3_TXT_ADH_DES_64_CBC_SHA
 "ADH-DES-CBC-SHA"

	)

252 
	#SSL3_TXT_ADH_DES_192_CBC_SHA
 "ADH-DES-CBC3-SHA"

	)

255 
	#SSL3_TXT_FZA_DMS_NULL_SHA
 "FZA-NULL-SHA"

	)

256 
	#SSL3_TXT_FZA_DMS_FZA_SHA
 "FZA-FZA-CBC-SHA"

	)

257 
	#SSL3_TXT_FZA_DMS_RC4_SHA
 "FZA-RC4-SHA"

	)

260 
	#SSL3_TXT_KRB5_DES_64_CBC_SHA
 "KRB5-DES-CBC-SHA"

	)

261 
	#SSL3_TXT_KRB5_DES_192_CBC3_SHA
 "KRB5-DES-CBC3-SHA"

	)

262 
	#SSL3_TXT_KRB5_RC4_128_SHA
 "KRB5-RC4-SHA"

	)

263 
	#SSL3_TXT_KRB5_IDEA_128_CBC_SHA
 "KRB5-IDEA-CBC-SHA"

	)

264 
	#SSL3_TXT_KRB5_DES_64_CBC_MD5
 "KRB5-DES-CBC-MD5"

	)

265 
	#SSL3_TXT_KRB5_DES_192_CBC3_MD5
 "KRB5-DES-CBC3-MD5"

	)

266 
	#SSL3_TXT_KRB5_RC4_128_MD5
 "KRB5-RC4-MD5"

	)

267 
	#SSL3_TXT_KRB5_IDEA_128_CBC_MD5
 "KRB5-IDEA-CBC-MD5"

	)

269 
	#SSL3_TXT_KRB5_DES_40_CBC_SHA
 "EXP-KRB5-DES-CBC-SHA"

	)

270 
	#SSL3_TXT_KRB5_RC2_40_CBC_SHA
 "EXP-KRB5-RC2-CBC-SHA"

	)

271 
	#SSL3_TXT_KRB5_RC4_40_SHA
 "EXP-KRB5-RC4-SHA"

	)

272 
	#SSL3_TXT_KRB5_DES_40_CBC_MD5
 "EXP-KRB5-DES-CBC-MD5"

	)

273 
	#SSL3_TXT_KRB5_RC2_40_CBC_MD5
 "EXP-KRB5-RC2-CBC-MD5"

	)

274 
	#SSL3_TXT_KRB5_RC4_40_MD5
 "EXP-KRB5-RC4-MD5"

	)

276 
	#SSL3_SSL_SESSION_ID_LENGTH
 32

	)

277 
	#SSL3_MAX_SSL_SESSION_ID_LENGTH
 32

	)

279 
	#SSL3_MASTER_SECRET_SIZE
 48

	)

280 
	#SSL3_RANDOM_SIZE
 32

	)

281 
	#SSL3_SESSION_ID_SIZE
 32

	)

282 
	#SSL3_RT_HEADER_LENGTH
 5

	)

284 
	#SSL3_HM_HEADER_LENGTH
 4

	)

286 #iâdeà
SSL3_ALIGN_PAYLOAD


295 
	#SSL3_ALIGN_PAYLOAD
 8

	)

297 #ià(
SSL3_ALIGN_PAYLOAD
&(SSL3_ALIGN_PAYLOAD-1))!=0

299 #undeà
SSL3_ALIGN_PAYLOAD


309 
	#SSL3_RT_MAX_MD_SIZE
 64

	)

315 
	#SSL_RT_MAX_CIPHER_BLOCK_SIZE
 16

	)

317 
	#SSL3_RT_MAX_EXTRA
 (16384)

	)

320 
	#SSL3_RT_MAX_PLAIN_LENGTH
 16384

	)

322 
	#SSL3_RT_MAX_COMPRESSED_OVERHEAD
 1024

	)

329 
	#SSL3_RT_MAX_ENCRYPTED_OVERHEAD
 (256 + 
SSL3_RT_MAX_MD_SIZE
)

	)

336 
	#SSL3_RT_SEND_MAX_ENCRYPTED_OVERHEAD
 \

337 (
SSL_RT_MAX_CIPHER_BLOCK_SIZE
 + 
SSL3_RT_MAX_MD_SIZE
)

	)

341 #ifdeà
OPENSSL_NO_COMP


342 
	#SSL3_RT_MAX_COMPRESSED_LENGTH
 
SSL3_RT_MAX_PLAIN_LENGTH


	)

344 
	#SSL3_RT_MAX_COMPRESSED_LENGTH
 \

345 (
SSL3_RT_MAX_PLAIN_LENGTH
+
SSL3_RT_MAX_COMPRESSED_OVERHEAD
)

	)

347 
	#SSL3_RT_MAX_ENCRYPTED_LENGTH
 \

348 (
SSL3_RT_MAX_ENCRYPTED_OVERHEAD
+
SSL3_RT_MAX_COMPRESSED_LENGTH
)

	)

349 
	#SSL3_RT_MAX_PACKET_SIZE
 \

350 (
SSL3_RT_MAX_ENCRYPTED_LENGTH
+
SSL3_RT_HEADER_LENGTH
)

	)

352 
	#SSL3_MD_CLIENT_FINISHED_CONST
 "\x43\x4C\x4E\x54"

	)

353 
	#SSL3_MD_SERVER_FINISHED_CONST
 "\x53\x52\x56\x52"

	)

355 
	#SSL3_VERSION
 0x0300

	)

356 
	#SSL3_VERSION_MAJOR
 0x03

	)

357 
	#SSL3_VERSION_MINOR
 0x00

	)

359 
	#SSL3_RT_CHANGE_CIPHER_SPEC
 20

	)

360 
	#SSL3_RT_ALERT
 21

	)

361 
	#SSL3_RT_HANDSHAKE
 22

	)

362 
	#SSL3_RT_APPLICATION_DATA
 23

	)

363 
	#TLS1_RT_HEARTBEAT
 24

	)

366 
	#TLS1_RT_CRYPTO
 0x1000

	)

367 
	#TLS1_RT_CRYPTO_PREMASTER
 (
TLS1_RT_CRYPTO
 | 0x1)

	)

368 
	#TLS1_RT_CRYPTO_CLIENT_RANDOM
 (
TLS1_RT_CRYPTO
 | 0x2)

	)

369 
	#TLS1_RT_CRYPTO_SERVER_RANDOM
 (
TLS1_RT_CRYPTO
 | 0x3)

	)

370 
	#TLS1_RT_CRYPTO_MASTER
 (
TLS1_RT_CRYPTO
 | 0x4)

	)

372 
	#TLS1_RT_CRYPTO_READ
 0x0000

	)

373 
	#TLS1_RT_CRYPTO_WRITE
 0x0100

	)

374 
	#TLS1_RT_CRYPTO_MAC
 (
TLS1_RT_CRYPTO
 | 0x5)

	)

375 
	#TLS1_RT_CRYPTO_KEY
 (
TLS1_RT_CRYPTO
 | 0x6)

	)

376 
	#TLS1_RT_CRYPTO_IV
 (
TLS1_RT_CRYPTO
 | 0x7)

	)

377 
	#TLS1_RT_CRYPTO_FIXED_IV
 (
TLS1_RT_CRYPTO
 | 0x8)

	)

380 
	#SSL3_RT_HEADER
 0x100

	)

382 
	#SSL3_AL_WARNING
 1

	)

383 
	#SSL3_AL_FATAL
 2

	)

385 
	#SSL3_AD_CLOSE_NOTIFY
 0

	)

386 
	#SSL3_AD_UNEXPECTED_MESSAGE
 10

	)

387 
	#SSL3_AD_BAD_RECORD_MAC
 20

	)

388 
	#SSL3_AD_DECOMPRESSION_FAILURE
 30

	)

389 
	#SSL3_AD_HANDSHAKE_FAILURE
 40

	)

390 
	#SSL3_AD_NO_CERTIFICATE
 41

	)

391 
	#SSL3_AD_BAD_CERTIFICATE
 42

	)

392 
	#SSL3_AD_UNSUPPORTED_CERTIFICATE
 43

	)

393 
	#SSL3_AD_CERTIFICATE_REVOKED
 44

	)

394 
	#SSL3_AD_CERTIFICATE_EXPIRED
 45

	)

395 
	#SSL3_AD_CERTIFICATE_UNKNOWN
 46

	)

396 
	#SSL3_AD_ILLEGAL_PARAMETER
 47

	)

398 
	#TLS1_HB_REQUEST
 1

	)

399 
	#TLS1_HB_RESPONSE
 2

	)

401 #iâdeà
OPENSSL_NO_SSL_INTERN


403 
	ss¦3_»cÜd_¡
 {

407  
ty³
;

411  
Ëngth
;

415  
off
;

419  *
d©a
;

423  *
šput
;

427  *
comp
;

431  
•och
;

435  
£q_num
[8];

436 } 
	tSSL3_RECORD
;

438 
	ss¦3_bufãr_¡
 {

440 *
buf
;

442 
size_t
 
Ën
;

444 
off£t
;

446 
Ëá
;

447 } 
	tSSL3_BUFFER
;

451 
	#SSL3_CT_RSA_SIGN
 1

	)

452 
	#SSL3_CT_DSS_SIGN
 2

	)

453 
	#SSL3_CT_RSA_FIXED_DH
 3

	)

454 
	#SSL3_CT_DSS_FIXED_DH
 4

	)

455 
	#SSL3_CT_RSA_EPHEMERAL_DH
 5

	)

456 
	#SSL3_CT_DSS_EPHEMERAL_DH
 6

	)

457 
	#SSL3_CT_FORTEZZA_DMS
 20

	)

462 
	#SSL3_CT_NUMBER
 9

	)

464 
	#SSL3_FLAGS_NO_RENEGOTIATE_CIPHERS
 0x0001

	)

465 
	#SSL3_FLAGS_DELAY_CLIENT_FINISHED
 0x0002

	)

466 
	#SSL3_FLAGS_POP_BUFFER
 0x0004

	)

467 
	#TLS1_FLAGS_TLS_PADDING_BUG
 0x0008

	)

468 
	#TLS1_FLAGS_SKIP_CERT_VERIFY
 0x0010

	)

469 
	#TLS1_FLAGS_KEEP_HANDSHAKE
 0x0020

	)

474 
	#SSL3_FLAGS_CCS_OK
 0x0080

	)

477 
	#SSL3_FLAGS_SGC_RESTART_DONE
 0x0040

	)

479 #iâdeà
OPENSSL_NO_SSL_INTERN


481 
	ss¦3_¡©e_¡
 {

482 
æags
;

483 
d–ay_buf_pİ_»t
;

484 
»ad_£qu’û
[8];

485 
»ad_mac_£ü‘_size
;

486 
»ad_mac_£ü‘
[
EVP_MAX_MD_SIZE
];

487 
wr™e_£qu’û
[8];

488 
wr™e_mac_£ü‘_size
;

489 
wr™e_mac_£ü‘
[
EVP_MAX_MD_SIZE
];

490 
£rv”_¿ndom
[
SSL3_RANDOM_SIZE
];

491 
ş›Á_¿ndom
[
SSL3_RANDOM_SIZE
];

493 
Ãed_em±y_äagm’ts
;

494 
em±y_äagm’t_dÚe
;

496 
š™_exŒa
;

497 
SSL3_BUFFER
 
rbuf
;

498 
SSL3_BUFFER
 
wbuf
;

499 
SSL3_RECORD
 
¼ec
;

500 
SSL3_RECORD
 
w»c
;

505 
®”t_äagm’t
[2];

506 
®”t_äagm’t_Ën
;

507 
hªdshake_äagm’t
[4];

508 
hªdshake_äagm’t_Ën
;

510 
wnum
;

511 
w³nd_tÙ
;

512 
w³nd_ty³
;

513 
w³nd_»t
;

514 cÚ¡ *
w³nd_buf
;

516 
BIO
 *
hªdshake_bufãr
;

521 
EVP_MD_CTX
 **
hªdshake_dg¡
;

527 
chªge_ch”_¥ec
;

528 
w¬n_®”t
;

529 
çl_®”t
;

534 
®”t_di¥©ch
;

535 
£nd_®”t
[2];

540 
»ÃgÙŸ‹
;

541 
tÙ®_»ÃgÙŸtiÚs
;

542 
num_»ÃgÙŸtiÚs
;

543 
š_»ad_­p_d©a
;

549 *
ş›Á_İaque_´f_šput
;

550 
size_t
 
ş›Á_İaque_´f_šput_Ën
;

551 *
£rv”_İaque_´f_šput
;

552 
size_t
 
£rv”_İaque_´f_šput_Ën
;

555 
û¹_v”ify_md
[
EVP_MAX_MD_SIZE
 * 2];

557 
fšish_md
[
EVP_MAX_MD_SIZE
 * 2];

558 
fšish_md_Ën
;

559 
³”_fšish_md
[
EVP_MAX_MD_SIZE
 * 2];

560 
³”_fšish_md_Ën
;

561 
mes§ge_size
;

562 
mes§ge_ty³
;

564 cÚ¡ 
SSL_CIPHER
 *
Ãw_ch”
;

565 #iâdeà
OPENSSL_NO_DH


566 
DH
 *
dh
;

568 #iâdeà
OPENSSL_NO_ECDH


569 
EC_KEY
 *
ecdh
;

572 
Ãxt_¡©e
;

573 
»u£_mes§ge
;

575 
û¹_»q
;

576 
ùy³_num
;

577 
ùy³
[
SSL3_CT_NUMBER
];

578 
STACK_OF
(
X509_NAME
è*
ÿ_Çmes
;

579 
u£_r§_tmp
;

580 
key_block_Ëngth
;

581 *
key_block
;

582 cÚ¡ 
EVP_CIPHER
 *
Ãw_sym_’c
;

583 cÚ¡ 
EVP_MD
 *
Ãw_hash
;

584 
Ãw_mac_pkey_ty³
;

585 
Ãw_mac_£ü‘_size
;

586 #iâdeà
OPENSSL_NO_COMP


587 cÚ¡ 
SSL_COMP
 *
Ãw_com´essiÚ
;

589 *
Ãw_com´essiÚ
;

591 
û¹_»que¡
;

592 } 
tmp
;

595 
´evious_ş›Á_fšished
[
EVP_MAX_MD_SIZE
];

596 
´evious_ş›Á_fšished_Ën
;

597 
´evious_£rv”_fšished
[
EVP_MAX_MD_SIZE
];

598 
´evious_£rv”_fšished_Ën
;

599 
£nd_cÚÃùiÚ_bšdšg
;

601 #iâdeà
OPENSSL_NO_NEXTPROTONEG


605 
Ãxt_´Ùo_Ãg_£’
;

608 #iâdeà
OPENSSL_NO_TLSEXT


609 #iâdeà
OPENSSL_NO_EC


615 
is_´obably_§çri
;

628 *
®²_£Ëùed
;

629 
®²_£Ëùed_Ën
;

631 } 
	tSSL3_STATE
;

640 
	#SSL3_ST_CW_FLUSH
 (0x100|
SSL_ST_CONNECT
)

	)

641 #iâdeà
OPENSSL_NO_SCTP


642 
	#DTLS1_SCTP_ST_CW_WRITE_SOCK
 (0x310|
SSL_ST_CONNECT
)

	)

643 
	#DTLS1_SCTP_ST_CR_READ_SOCK
 (0x320|
SSL_ST_CONNECT
)

	)

646 
	#SSL3_ST_CW_CLNT_HELLO_A
 (0x110|
SSL_ST_CONNECT
)

	)

647 
	#SSL3_ST_CW_CLNT_HELLO_B
 (0x111|
SSL_ST_CONNECT
)

	)

649 
	#SSL3_ST_CR_SRVR_HELLO_A
 (0x120|
SSL_ST_CONNECT
)

	)

650 
	#SSL3_ST_CR_SRVR_HELLO_B
 (0x121|
SSL_ST_CONNECT
)

	)

651 
	#DTLS1_ST_CR_HELLO_VERIFY_REQUEST_A
 (0x126|
SSL_ST_CONNECT
)

	)

652 
	#DTLS1_ST_CR_HELLO_VERIFY_REQUEST_B
 (0x127|
SSL_ST_CONNECT
)

	)

653 
	#SSL3_ST_CR_CERT_A
 (0x130|
SSL_ST_CONNECT
)

	)

654 
	#SSL3_ST_CR_CERT_B
 (0x131|
SSL_ST_CONNECT
)

	)

655 
	#SSL3_ST_CR_KEY_EXCH_A
 (0x140|
SSL_ST_CONNECT
)

	)

656 
	#SSL3_ST_CR_KEY_EXCH_B
 (0x141|
SSL_ST_CONNECT
)

	)

657 
	#SSL3_ST_CR_CERT_REQ_A
 (0x150|
SSL_ST_CONNECT
)

	)

658 
	#SSL3_ST_CR_CERT_REQ_B
 (0x151|
SSL_ST_CONNECT
)

	)

659 
	#SSL3_ST_CR_SRVR_DONE_A
 (0x160|
SSL_ST_CONNECT
)

	)

660 
	#SSL3_ST_CR_SRVR_DONE_B
 (0x161|
SSL_ST_CONNECT
)

	)

662 
	#SSL3_ST_CW_CERT_A
 (0x170|
SSL_ST_CONNECT
)

	)

663 
	#SSL3_ST_CW_CERT_B
 (0x171|
SSL_ST_CONNECT
)

	)

664 
	#SSL3_ST_CW_CERT_C
 (0x172|
SSL_ST_CONNECT
)

	)

665 
	#SSL3_ST_CW_CERT_D
 (0x173|
SSL_ST_CONNECT
)

	)

666 
	#SSL3_ST_CW_KEY_EXCH_A
 (0x180|
SSL_ST_CONNECT
)

	)

667 
	#SSL3_ST_CW_KEY_EXCH_B
 (0x181|
SSL_ST_CONNECT
)

	)

668 
	#SSL3_ST_CW_CERT_VRFY_A
 (0x190|
SSL_ST_CONNECT
)

	)

669 
	#SSL3_ST_CW_CERT_VRFY_B
 (0x191|
SSL_ST_CONNECT
)

	)

670 
	#SSL3_ST_CW_CHANGE_A
 (0x1A0|
SSL_ST_CONNECT
)

	)

671 
	#SSL3_ST_CW_CHANGE_B
 (0x1A1|
SSL_ST_CONNECT
)

	)

672 #iâdeà
OPENSSL_NO_NEXTPROTONEG


673 
	#SSL3_ST_CW_NEXT_PROTO_A
 (0x200|
SSL_ST_CONNECT
)

	)

674 
	#SSL3_ST_CW_NEXT_PROTO_B
 (0x201|
SSL_ST_CONNECT
)

	)

676 
	#SSL3_ST_CW_FINISHED_A
 (0x1B0|
SSL_ST_CONNECT
)

	)

677 
	#SSL3_ST_CW_FINISHED_B
 (0x1B1|
SSL_ST_CONNECT
)

	)

679 
	#SSL3_ST_CR_CHANGE_A
 (0x1C0|
SSL_ST_CONNECT
)

	)

680 
	#SSL3_ST_CR_CHANGE_B
 (0x1C1|
SSL_ST_CONNECT
)

	)

681 
	#SSL3_ST_CR_FINISHED_A
 (0x1D0|
SSL_ST_CONNECT
)

	)

682 
	#SSL3_ST_CR_FINISHED_B
 (0x1D1|
SSL_ST_CONNECT
)

	)

683 
	#SSL3_ST_CR_SESSION_TICKET_A
 (0x1E0|
SSL_ST_CONNECT
)

	)

684 
	#SSL3_ST_CR_SESSION_TICKET_B
 (0x1E1|
SSL_ST_CONNECT
)

	)

685 
	#SSL3_ST_CR_CERT_STATUS_A
 (0x1F0|
SSL_ST_CONNECT
)

	)

686 
	#SSL3_ST_CR_CERT_STATUS_B
 (0x1F1|
SSL_ST_CONNECT
)

	)

690 
	#SSL3_ST_SW_FLUSH
 (0x100|
SSL_ST_ACCEPT
)

	)

691 #iâdeà
OPENSSL_NO_SCTP


692 
	#DTLS1_SCTP_ST_SW_WRITE_SOCK
 (0x310|
SSL_ST_ACCEPT
)

	)

693 
	#DTLS1_SCTP_ST_SR_READ_SOCK
 (0x320|
SSL_ST_ACCEPT
)

	)

697 
	#SSL3_ST_SR_CLNT_HELLO_A
 (0x110|
SSL_ST_ACCEPT
)

	)

698 
	#SSL3_ST_SR_CLNT_HELLO_B
 (0x111|
SSL_ST_ACCEPT
)

	)

699 
	#SSL3_ST_SR_CLNT_HELLO_C
 (0x112|
SSL_ST_ACCEPT
)

	)

700 
	#SSL3_ST_SR_CLNT_HELLO_D
 (0x115|
SSL_ST_ACCEPT
)

	)

702 
	#DTLS1_ST_SW_HELLO_VERIFY_REQUEST_A
 (0x113|
SSL_ST_ACCEPT
)

	)

703 
	#DTLS1_ST_SW_HELLO_VERIFY_REQUEST_B
 (0x114|
SSL_ST_ACCEPT
)

	)

704 
	#SSL3_ST_SW_HELLO_REQ_A
 (0x120|
SSL_ST_ACCEPT
)

	)

705 
	#SSL3_ST_SW_HELLO_REQ_B
 (0x121|
SSL_ST_ACCEPT
)

	)

706 
	#SSL3_ST_SW_HELLO_REQ_C
 (0x122|
SSL_ST_ACCEPT
)

	)

707 
	#SSL3_ST_SW_SRVR_HELLO_A
 (0x130|
SSL_ST_ACCEPT
)

	)

708 
	#SSL3_ST_SW_SRVR_HELLO_B
 (0x131|
SSL_ST_ACCEPT
)

	)

709 
	#SSL3_ST_SW_CERT_A
 (0x140|
SSL_ST_ACCEPT
)

	)

710 
	#SSL3_ST_SW_CERT_B
 (0x141|
SSL_ST_ACCEPT
)

	)

711 
	#SSL3_ST_SW_KEY_EXCH_A
 (0x150|
SSL_ST_ACCEPT
)

	)

712 
	#SSL3_ST_SW_KEY_EXCH_B
 (0x151|
SSL_ST_ACCEPT
)

	)

713 
	#SSL3_ST_SW_CERT_REQ_A
 (0x160|
SSL_ST_ACCEPT
)

	)

714 
	#SSL3_ST_SW_CERT_REQ_B
 (0x161|
SSL_ST_ACCEPT
)

	)

715 
	#SSL3_ST_SW_SRVR_DONE_A
 (0x170|
SSL_ST_ACCEPT
)

	)

716 
	#SSL3_ST_SW_SRVR_DONE_B
 (0x171|
SSL_ST_ACCEPT
)

	)

718 
	#SSL3_ST_SR_CERT_A
 (0x180|
SSL_ST_ACCEPT
)

	)

719 
	#SSL3_ST_SR_CERT_B
 (0x181|
SSL_ST_ACCEPT
)

	)

720 
	#SSL3_ST_SR_KEY_EXCH_A
 (0x190|
SSL_ST_ACCEPT
)

	)

721 
	#SSL3_ST_SR_KEY_EXCH_B
 (0x191|
SSL_ST_ACCEPT
)

	)

722 
	#SSL3_ST_SR_CERT_VRFY_A
 (0x1A0|
SSL_ST_ACCEPT
)

	)

723 
	#SSL3_ST_SR_CERT_VRFY_B
 (0x1A1|
SSL_ST_ACCEPT
)

	)

724 
	#SSL3_ST_SR_CHANGE_A
 (0x1B0|
SSL_ST_ACCEPT
)

	)

725 
	#SSL3_ST_SR_CHANGE_B
 (0x1B1|
SSL_ST_ACCEPT
)

	)

726 #iâdeà
OPENSSL_NO_NEXTPROTONEG


727 
	#SSL3_ST_SR_NEXT_PROTO_A
 (0x210|
SSL_ST_ACCEPT
)

	)

728 
	#SSL3_ST_SR_NEXT_PROTO_B
 (0x211|
SSL_ST_ACCEPT
)

	)

730 
	#SSL3_ST_SR_FINISHED_A
 (0x1C0|
SSL_ST_ACCEPT
)

	)

731 
	#SSL3_ST_SR_FINISHED_B
 (0x1C1|
SSL_ST_ACCEPT
)

	)

733 
	#SSL3_ST_SW_CHANGE_A
 (0x1D0|
SSL_ST_ACCEPT
)

	)

734 
	#SSL3_ST_SW_CHANGE_B
 (0x1D1|
SSL_ST_ACCEPT
)

	)

735 
	#SSL3_ST_SW_FINISHED_A
 (0x1E0|
SSL_ST_ACCEPT
)

	)

736 
	#SSL3_ST_SW_FINISHED_B
 (0x1E1|
SSL_ST_ACCEPT
)

	)

737 
	#SSL3_ST_SW_SESSION_TICKET_A
 (0x1F0|
SSL_ST_ACCEPT
)

	)

738 
	#SSL3_ST_SW_SESSION_TICKET_B
 (0x1F1|
SSL_ST_ACCEPT
)

	)

739 
	#SSL3_ST_SW_CERT_STATUS_A
 (0x200|
SSL_ST_ACCEPT
)

	)

740 
	#SSL3_ST_SW_CERT_STATUS_B
 (0x201|
SSL_ST_ACCEPT
)

	)

742 
	#SSL3_MT_HELLO_REQUEST
 0

	)

743 
	#SSL3_MT_CLIENT_HELLO
 1

	)

744 
	#SSL3_MT_SERVER_HELLO
 2

	)

745 
	#SSL3_MT_NEWSESSION_TICKET
 4

	)

746 
	#SSL3_MT_CERTIFICATE
 11

	)

747 
	#SSL3_MT_SERVER_KEY_EXCHANGE
 12

	)

748 
	#SSL3_MT_CERTIFICATE_REQUEST
 13

	)

749 
	#SSL3_MT_SERVER_DONE
 14

	)

750 
	#SSL3_MT_CERTIFICATE_VERIFY
 15

	)

751 
	#SSL3_MT_CLIENT_KEY_EXCHANGE
 16

	)

752 
	#SSL3_MT_FINISHED
 20

	)

753 
	#SSL3_MT_CERTIFICATE_STATUS
 22

	)

754 #iâdeà
OPENSSL_NO_NEXTPROTONEG


755 
	#SSL3_MT_NEXT_PROTO
 67

	)

757 
	#DTLS1_MT_HELLO_VERIFY_REQUEST
 3

	)

759 
	#SSL3_MT_CCS
 1

	)

762 
	#SSL3_CC_READ
 0x01

	)

763 
	#SSL3_CC_WRITE
 0x02

	)

764 
	#SSL3_CC_CLIENT
 0x10

	)

765 
	#SSL3_CC_SERVER
 0x20

	)

766 
	#SSL3_CHANGE_CIPHER_CLIENT_WRITE
 (
SSL3_CC_CLIENT
|
SSL3_CC_WRITE
)

	)

767 
	#SSL3_CHANGE_CIPHER_SERVER_READ
 (
SSL3_CC_SERVER
|
SSL3_CC_READ
)

	)

768 
	#SSL3_CHANGE_CIPHER_CLIENT_READ
 (
SSL3_CC_CLIENT
|
SSL3_CC_READ
)

	)

769 
	#SSL3_CHANGE_CIPHER_SERVER_WRITE
 (
SSL3_CC_SERVER
|
SSL3_CC_WRITE
)

	)

771 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/symhacks.h

55 #iâdeà
HEADER_SYMHACKS_H


56 
	#HEADER_SYMHACKS_H


	)

58 
	~<İ’s¦/e_os2.h
>

72 #ifdeà
OPENSSL_SYS_VMS


75 #undeà
CRYPTO_g‘_ex_d©a_im¶em’tiÚ


76 
	#CRYPTO_g‘_ex_d©a_im¶em’tiÚ
 
CRYPTO_g‘_ex_d©a_im¶


	)

77 #undeà
CRYPTO_£t_ex_d©a_im¶em’tiÚ


78 
	#CRYPTO_£t_ex_d©a_im¶em’tiÚ
 
CRYPTO_£t_ex_d©a_im¶


	)

81 #undeà
ASN1_STRING_£t_deçuÉ_mask_asc


82 
	#ASN1_STRING_£t_deçuÉ_mask_asc
 
ASN1_STRING_£t_def_mask_asc


	)

87 #undeà
i2d_ASN1_SET_OF_PKCS7_SIGNER_INFO


88 
	#i2d_ASN1_SET_OF_PKCS7_SIGNER_INFO
 
i2d_ASN1_SET_OF_PKCS7_SIGINF


	)

89 #undeà
d2i_ASN1_SET_OF_PKCS7_SIGNER_INFO


90 
	#d2i_ASN1_SET_OF_PKCS7_SIGNER_INFO
 
d2i_ASN1_SET_OF_PKCS7_SIGINF


	)

96 #undeà
i2d_ASN1_SET_OF_PKCS7_RECIP_INFO


97 
	#i2d_ASN1_SET_OF_PKCS7_RECIP_INFO
 
i2d_ASN1_SET_OF_PKCS7_RECINF


	)

98 #undeà
d2i_ASN1_SET_OF_PKCS7_RECIP_INFO


99 
	#d2i_ASN1_SET_OF_PKCS7_RECIP_INFO
 
d2i_ASN1_SET_OF_PKCS7_RECINF


	)

105 #undeà
i2d_ASN1_SET_OF_ACCESS_DESCRIPTION


106 
	#i2d_ASN1_SET_OF_ACCESS_DESCRIPTION
 
i2d_ASN1_SET_OF_ACC_DESC


	)

107 #undeà
d2i_ASN1_SET_OF_ACCESS_DESCRIPTION


108 
	#d2i_ASN1_SET_OF_ACCESS_DESCRIPTION
 
d2i_ASN1_SET_OF_ACC_DESC


	)

112 #undeà
PEM_»ad_NETSCAPE_CERT_SEQUENCE


113 
	#PEM_»ad_NETSCAPE_CERT_SEQUENCE
 
PEM_»ad_NS_CERT_SEQ


	)

114 #undeà
PEM_wr™e_NETSCAPE_CERT_SEQUENCE


115 
	#PEM_wr™e_NETSCAPE_CERT_SEQUENCE
 
PEM_wr™e_NS_CERT_SEQ


	)

116 #undeà
PEM_»ad_bio_NETSCAPE_CERT_SEQUENCE


117 
	#PEM_»ad_bio_NETSCAPE_CERT_SEQUENCE
 
PEM_»ad_bio_NS_CERT_SEQ


	)

118 #undeà
PEM_wr™e_bio_NETSCAPE_CERT_SEQUENCE


119 
	#PEM_wr™e_bio_NETSCAPE_CERT_SEQUENCE
 
PEM_wr™e_bio_NS_CERT_SEQ


	)

120 #undeà
PEM_wr™e_cb_bio_NETSCAPE_CERT_SEQUENCE


121 
	#PEM_wr™e_cb_bio_NETSCAPE_CERT_SEQUENCE
 
PEM_wr™e_cb_bio_NS_CERT_SEQ


	)

124 #undeà
PEM_»ad_PKCS8_PRIV_KEY_INFO


125 
	#PEM_»ad_PKCS8_PRIV_KEY_INFO
 
PEM_»ad_P8_PRIV_KEY_INFO


	)

126 #undeà
PEM_wr™e_PKCS8_PRIV_KEY_INFO


127 
	#PEM_wr™e_PKCS8_PRIV_KEY_INFO
 
PEM_wr™e_P8_PRIV_KEY_INFO


	)

128 #undeà
PEM_»ad_bio_PKCS8_PRIV_KEY_INFO


129 
	#PEM_»ad_bio_PKCS8_PRIV_KEY_INFO
 
PEM_»ad_bio_P8_PRIV_KEY_INFO


	)

130 #undeà
PEM_wr™e_bio_PKCS8_PRIV_KEY_INFO


131 
	#PEM_wr™e_bio_PKCS8_PRIV_KEY_INFO
 
PEM_wr™e_bio_P8_PRIV_KEY_INFO


	)

132 #undeà
PEM_wr™e_cb_bio_PKCS8_PRIV_KEY_INFO


133 
	#PEM_wr™e_cb_bio_PKCS8_PRIV_KEY_INFO
 
PEM_w¹_cb_bio_P8_PRIV_KEY_INFO


	)

136 #undeà
PEM_wr™e_bio_PKCS8Priv©eKey_nid


137 
	#PEM_wr™e_bio_PKCS8Priv©eKey_nid
 
PEM_wr™e_bio_PKCS8PrivKey_nid


	)

140 #undeà
X509_REVOKED_g‘_ext_by_ü™iÿl


141 
	#X509_REVOKED_g‘_ext_by_ü™iÿl
 
X509_REVOKED_g‘_ext_by_ü™ic


	)

142 #undeà
X509_pŞicy_Œ“_g‘0_u£r_pŞic›s


143 
	#X509_pŞicy_Œ“_g‘0_u£r_pŞic›s
 
X509_pcy_Œ“_g‘0_u¤_pŞic›s


	)

144 #undeà
X509_pŞicy_node_g‘0_qu®if›rs


145 
	#X509_pŞicy_node_g‘0_qu®if›rs
 
X509_pcy_node_g‘0_qu®if›rs


	)

146 #undeà
X509_STORE_CTX_g‘_ex¶ic™_pŞicy


147 
	#X509_STORE_CTX_g‘_ex¶ic™_pŞicy
 
X509_STORE_CTX_g‘_ex¶_pŞicy


	)

148 #undeà
X509_STORE_CTX_g‘0_cu¼’t_issu”


149 
	#X509_STORE_CTX_g‘0_cu¼’t_issu”
 
X509_STORE_CTX_g‘0_cur_issu”


	)

152 #undeà
CRYPTO_£t_dyÆock_de¡roy_ÿÎback


153 
	#CRYPTO_£t_dyÆock_de¡roy_ÿÎback
 
CRYPTO_£t_dyÆock_de¡roy_cb


	)

154 #undeà
CRYPTO_£t_dyÆock_ü—‹_ÿÎback


155 
	#CRYPTO_£t_dyÆock_ü—‹_ÿÎback
 
CRYPTO_£t_dyÆock_ü—‹_cb


	)

156 #undeà
CRYPTO_£t_dyÆock_lock_ÿÎback


157 
	#CRYPTO_£t_dyÆock_lock_ÿÎback
 
CRYPTO_£t_dyÆock_lock_cb


	)

158 #undeà
CRYPTO_g‘_dyÆock_lock_ÿÎback


159 
	#CRYPTO_g‘_dyÆock_lock_ÿÎback
 
CRYPTO_g‘_dyÆock_lock_cb


	)

160 #undeà
CRYPTO_g‘_dyÆock_de¡roy_ÿÎback


161 
	#CRYPTO_g‘_dyÆock_de¡roy_ÿÎback
 
CRYPTO_g‘_dyÆock_de¡roy_cb


	)

162 #undeà
CRYPTO_g‘_dyÆock_ü—‹_ÿÎback


163 
	#CRYPTO_g‘_dyÆock_ü—‹_ÿÎback
 
CRYPTO_g‘_dyÆock_ü—‹_cb


	)

164 #undeà
CRYPTO_£t_locked_mem_ex_funùiÚs


165 
	#CRYPTO_£t_locked_mem_ex_funùiÚs
 
CRYPTO_£t_locked_mem_ex_funcs


	)

166 #undeà
CRYPTO_g‘_locked_mem_ex_funùiÚs


167 
	#CRYPTO_g‘_locked_mem_ex_funùiÚs
 
CRYPTO_g‘_locked_mem_ex_funcs


	)

170 #undeà
SSL_CTX_£t_deçuÉ_v”ify_·ths


171 
	#SSL_CTX_£t_deçuÉ_v”ify_·ths
 
SSL_CTX_£t_def_v”ify_·ths


	)

172 #undeà
SSL_g‘_ex_d©a_X509_STORE_CTX_idx


173 
	#SSL_g‘_ex_d©a_X509_STORE_CTX_idx
 
SSL_g‘_ex_d_X509_STORE_CTX_idx


	)

174 #undeà
SSL_add_fe_û¹_subjeùs_to_¡ack


175 
	#SSL_add_fe_û¹_subjeùs_to_¡ack
 
SSL_add_fe_û¹_subjs_to_¡k


	)

176 #undeà
SSL_add_dœ_û¹_subjeùs_to_¡ack


177 
	#SSL_add_dœ_û¹_subjeùs_to_¡ack
 
SSL_add_dœ_û¹_subjs_to_¡k


	)

178 #undeà
SSL_CTX_u£_û¹ifiÿ‹_chaš_fe


179 
	#SSL_CTX_u£_û¹ifiÿ‹_chaš_fe
 
SSL_CTX_u£_û¹_chaš_fe


	)

180 #undeà
SSL_CTX_£t_û¹_v”ify_ÿÎback


181 
	#SSL_CTX_£t_û¹_v”ify_ÿÎback
 
SSL_CTX_£t_û¹_v”ify_cb


	)

182 #undeà
SSL_CTX_£t_deçuÉ_·sswd_cb_u£rd©a


183 
	#SSL_CTX_£t_deçuÉ_·sswd_cb_u£rd©a
 
SSL_CTX_£t_def_·sswd_cb_ud


	)

184 #undeà
SSL_COMP_g‘_com´essiÚ_m‘hods


185 
	#SSL_COMP_g‘_com´essiÚ_m‘hods
 
SSL_COMP_g‘_com´ess_m‘hods


	)

186 #undeà
SSL_COMP_£t0_com´essiÚ_m‘hods


187 
	#SSL_COMP_£t0_com´essiÚ_m‘hods
 
SSL_COMP_£t0_com´ess_m‘hods


	)

188 #undeà
SSL_COMP_ä“_com´essiÚ_m‘hods


189 
	#SSL_COMP_ä“_com´essiÚ_m‘hods
 
SSL_COMP_ä“_com´ess_m‘hods


	)

190 #undeà
s¦_add_ş›Áh–lo_»ÃgÙŸ‹_ext


191 
	#s¦_add_ş›Áh–lo_»ÃgÙŸ‹_ext
 
s¦_add_ş›Áh–lo_»Ãg_ext


	)

192 #undeà
s¦_add_£rv”h–lo_»ÃgÙŸ‹_ext


193 
	#s¦_add_£rv”h–lo_»ÃgÙŸ‹_ext
 
s¦_add_£rv”h–lo_»Ãg_ext


	)

194 #undeà
s¦_·r£_ş›Áh–lo_»ÃgÙŸ‹_ext


195 
	#s¦_·r£_ş›Áh–lo_»ÃgÙŸ‹_ext
 
s¦_·r£_ş›Áh–lo_»Ãg_ext


	)

196 #undeà
s¦_·r£_£rv”h–lo_»ÃgÙŸ‹_ext


197 
	#s¦_·r£_£rv”h–lo_»ÃgÙŸ‹_ext
 
s¦_·r£_£rv”h–lo_»Ãg_ext


	)

198 #undeà
SSL_¤p_£rv”_·¿m_w™h_u£ºame


199 
	#SSL_¤p_£rv”_·¿m_w™h_u£ºame
 
SSL_¤p_£rv”_·¿m_w™h_un


	)

200 #undeà
SSL_CTX_£t_¤p_ş›Á_pwd_ÿÎback


201 
	#SSL_CTX_£t_¤p_ş›Á_pwd_ÿÎback
 
SSL_CTX_£t_¤p_ş›Á_pwd_cb


	)

202 #undeà
SSL_CTX_£t_¤p_v”ify_·¿m_ÿÎback


203 
	#SSL_CTX_£t_¤p_v”ify_·¿m_ÿÎback
 
SSL_CTX_£t_¤p_vfy_·¿m_cb


	)

204 #undeà
SSL_CTX_£t_¤p_u£ºame_ÿÎback


205 
	#SSL_CTX_£t_¤p_u£ºame_ÿÎback
 
SSL_CTX_£t_¤p_un_cb


	)

206 #undeà
s¦_add_ş›Áh–lo_u£_¤_ext


207 
	#s¦_add_ş›Áh–lo_u£_¤_ext
 
s¦_add_şih–lo_u£_¤_ext


	)

208 #undeà
s¦_add_£rv”h–lo_u£_¤_ext


209 
	#s¦_add_£rv”h–lo_u£_¤_ext
 
s¦_add_£rh–lo_u£_¤_ext


	)

210 #undeà
s¦_·r£_ş›Áh–lo_u£_¤_ext


211 
	#s¦_·r£_ş›Áh–lo_u£_¤_ext
 
s¦_·r£_şih–lo_u£_¤_ext


	)

212 #undeà
s¦_·r£_£rv”h–lo_u£_¤_ext


213 
	#s¦_·r£_£rv”h–lo_u£_¤_ext
 
s¦_·r£_£rh–lo_u£_¤_ext


	)

214 #undeà
SSL_CTX_£t_Ãxt_´Ùos_adv”ti£d_cb


215 
	#SSL_CTX_£t_Ãxt_´Ùos_adv”ti£d_cb
 
SSL_CTX_£t_Ãxt_´Ùos_adv_cb


	)

216 #undeà
SSL_CTX_£t_Ãxt_´Ùo_£Ëù_cb


217 
	#SSL_CTX_£t_Ãxt_´Ùo_£Ëù_cb
 
SSL_CTX_£t_Ãxt_´Ùo_£l_cb


	)

219 #undeà
s1_£nd_£rv”_suµËm’l_d©a


220 
	#s1_£nd_£rv”_suµËm’l_d©a
 
s1_£nd_£rv”_suµl_d©a


	)

221 #undeà
s1_£nd_ş›Á_suµËm’l_d©a


222 
	#s1_£nd_ş›Á_suµËm’l_d©a
 
s1_£nd_ş›Á_suµl_d©a


	)

223 #undeà
s1_g‘_£rv”_suµËm’l_d©a


224 
	#s1_g‘_£rv”_suµËm’l_d©a
 
s1_g‘_£rv”_suµl_d©a


	)

225 #undeà
s1_g‘_ş›Á_suµËm’l_d©a


226 
	#s1_g‘_ş›Á_suµËm’l_d©a
 
s1_g‘_ş›Á_suµl_d©a


	)

228 #undeà
s¦3_cbc_»cÜd_dige¡_suµÜ‹d


229 
	#s¦3_cbc_»cÜd_dige¡_suµÜ‹d
 
s¦3_cbc_»cÜd_dige¡_suµÜt


	)

230 #undeà
s¦_check_ş›Áh–lo_£xt_Ï‹


231 
	#s¦_check_ş›Áh–lo_£xt_Ï‹
 
s¦_check_şih–lo_£xt_Ï‹


	)

232 #undeà
s¦_check_ş›Áh–lo_£xt_—¾y


233 
	#s¦_check_ş›Áh–lo_£xt_—¾y
 
s¦_check_şih–lo_£xt_—¾y


	)

236 #undeà
RSA_·ddšg_check_PKCS1_OAEP_mgf1


237 
	#RSA_·ddšg_check_PKCS1_OAEP_mgf1
 
RSA_·d_check_PKCS1_OAEP_mgf1


	)

240 #undeà
ENGINE_g‘_deçuÉ_BN_mod_exp_üt


241 
	#ENGINE_g‘_deçuÉ_BN_mod_exp_üt
 
ENGINE_g‘_def_BN_mod_exp_üt


	)

242 #undeà
ENGINE_£t_deçuÉ_BN_mod_exp_üt


243 
	#ENGINE_£t_deçuÉ_BN_mod_exp_üt
 
ENGINE_£t_def_BN_mod_exp_üt


	)

244 #undeà
ENGINE_£t_lßd_´ivkey_funùiÚ


245 
	#ENGINE_£t_lßd_´ivkey_funùiÚ
 
ENGINE_£t_lßd_´ivkey_â


	)

246 #undeà
ENGINE_g‘_lßd_´ivkey_funùiÚ


247 
	#ENGINE_g‘_lßd_´ivkey_funùiÚ
 
ENGINE_g‘_lßd_´ivkey_â


	)

248 #undeà
ENGINE_uÄegi¡”_pkey_a¢1_m‘hs


249 
	#ENGINE_uÄegi¡”_pkey_a¢1_m‘hs
 
ENGINE_uÄeg_pkey_a¢1_m‘hs


	)

250 #undeà
ENGINE_»gi¡”_®l_pkey_a¢1_m‘hs


251 
	#ENGINE_»gi¡”_®l_pkey_a¢1_m‘hs
 
ENGINE_»g_®l_pkey_a¢1_m‘hs


	)

252 #undeà
ENGINE_£t_deçuÉ_pkey_a¢1_m‘hs


253 
	#ENGINE_£t_deçuÉ_pkey_a¢1_m‘hs
 
ENGINE_£t_def_pkey_a¢1_m‘hs


	)

254 #undeà
ENGINE_g‘_pkey_a¢1_m‘h_’gše


255 
	#ENGINE_g‘_pkey_a¢1_m‘h_’gše
 
ENGINE_g‘_pkey_a¢1_m‘h_’g


	)

256 #undeà
ENGINE_£t_lßd_s¦_ş›Á_û¹_funùiÚ


257 
	#ENGINE_£t_lßd_s¦_ş›Á_û¹_funùiÚ
 \

258 
ENGINE_£t_ld_s¦_şÁ_û¹_â


	)

259 #undeà
ENGINE_g‘_s¦_ş›Á_û¹_funùiÚ


260 
	#ENGINE_g‘_s¦_ş›Á_û¹_funùiÚ
 
ENGINE_g‘_s¦_ş›Á_û¹_â


	)

263 #undeà
OCSP_REQUEST_g‘_ext_by_ü™iÿl


264 
	#OCSP_REQUEST_g‘_ext_by_ü™iÿl
 
OCSP_REQUEST_g‘_ext_by_ü™


	)

265 #undeà
OCSP_BASICRESP_g‘_ext_by_ü™iÿl


266 
	#OCSP_BASICRESP_g‘_ext_by_ü™iÿl
 
OCSP_BASICRESP_g‘_ext_by_ü™


	)

267 #undeà
OCSP_SINGLERESP_g‘_ext_by_ü™iÿl


268 
	#OCSP_SINGLERESP_g‘_ext_by_ü™iÿl
 
OCSP_SINGLERESP_g‘_ext_by_ü™


	)

271 #undeà
_os¦_Şd_des_ede3_cfb64_’üy±


272 
	#_os¦_Şd_des_ede3_cfb64_’üy±
 
_os¦_odes_ede3_cfb64_’üy±


	)

273 #undeà
_os¦_Şd_des_ede3_ofb64_’üy±


274 
	#_os¦_Şd_des_ede3_ofb64_’üy±
 
_os¦_odes_ede3_ofb64_’üy±


	)

277 #undeà
OPENSSL_add_®l_®gÜ™hms_nocÚf


278 
	#OPENSSL_add_®l_®gÜ™hms_nocÚf
 
OPENSSL_add_®l_®go_nocÚf


	)

279 #undeà
OPENSSL_add_®l_®gÜ™hms_cÚf


280 
	#OPENSSL_add_®l_®gÜ™hms_cÚf
 
OPENSSL_add_®l_®go_cÚf


	)

281 #undeà
EVP_PKEY_m‘h_£t_v”ify_»cov”


282 
	#EVP_PKEY_m‘h_£t_v”ify_»cov”
 
EVP_PKEY_m‘h_£t_vrfy_»cov”


	)

283 #undeà
EVP_PKEY_m‘h_g‘_v”ify_»cov”


284 
	#EVP_PKEY_m‘h_g‘_v”ify_»cov”
 
EVP_PKEY_m‘h_g‘_vrfy_»cov”


	)

287 #undeà
EC_GROUP_£t_pošt_cÚv”siÚ_fÜm


288 
	#EC_GROUP_£t_pošt_cÚv”siÚ_fÜm
 
EC_GROUP_£t_pošt_cÚv_fÜm


	)

289 #undeà
EC_GROUP_g‘_pošt_cÚv”siÚ_fÜm


290 
	#EC_GROUP_g‘_pošt_cÚv”siÚ_fÜm
 
EC_GROUP_g‘_pošt_cÚv_fÜm


	)

291 #undeà
EC_GROUP_ş—r_ä“_®l_exŒa_d©a


292 
	#EC_GROUP_ş—r_ä“_®l_exŒa_d©a
 
EC_GROUP_şr_ä“_®l_xŒa_d©a


	)

293 #undeà
EC_KEY_£t_public_key_affše_coÜdš©es


294 
	#EC_KEY_£t_public_key_affše_coÜdš©es
 \

295 
EC_KEY_£t_pub_key_aff_coÜds


	)

296 #undeà
EC_POINT_£t_J´ojeùive_coÜdš©es_GFp


297 
	#EC_POINT_£t_J´ojeùive_coÜdš©es_GFp
 \

298 
EC_POINT_£t_J´oj_coÜds_GFp


	)

299 #undeà
EC_POINT_g‘_J´ojeùive_coÜdš©es_GFp


300 
	#EC_POINT_g‘_J´ojeùive_coÜdš©es_GFp
 \

301 
EC_POINT_g‘_J´oj_coÜds_GFp


	)

302 #undeà
EC_POINT_£t_affše_coÜdš©es_GFp


303 
	#EC_POINT_£t_affše_coÜdš©es_GFp
 
EC_POINT_£t_affše_coÜds_GFp


	)

304 #undeà
EC_POINT_g‘_affše_coÜdš©es_GFp


305 
	#EC_POINT_g‘_affše_coÜdš©es_GFp
 
EC_POINT_g‘_affše_coÜds_GFp


	)

306 #undeà
EC_POINT_£t_com´es£d_coÜdš©es_GFp


307 
	#EC_POINT_£t_com´es£d_coÜdš©es_GFp
 
EC_POINT_£t_com´_coÜds_GFp


	)

308 #undeà
EC_POINT_£t_affše_coÜdš©es_GF2m


309 
	#EC_POINT_£t_affše_coÜdš©es_GF2m
 
EC_POINT_£t_affše_coÜds_GF2m


	)

310 #undeà
EC_POINT_g‘_affše_coÜdš©es_GF2m


311 
	#EC_POINT_g‘_affše_coÜdš©es_GF2m
 
EC_POINT_g‘_affše_coÜds_GF2m


	)

312 #undeà
EC_POINT_£t_com´es£d_coÜdš©es_GF2m


313 
	#EC_POINT_£t_com´es£d_coÜdš©es_GF2m
 \

314 
EC_POINT_£t_com´_coÜds_GF2m


	)

315 #undeà
ec_GF2m_sim¶e_group_ş—r_fšish


316 
	#ec_GF2m_sim¶e_group_ş—r_fšish
 
ec_GF2m_sim¶e_g½_şr_fšish


	)

317 #undeà
ec_GF2m_sim¶e_group_check_disüimšªt


318 
	#ec_GF2m_sim¶e_group_check_disüimšªt
 
ec_GF2m_sim¶e_g½_chk_disüim


	)

319 #undeà
ec_GF2m_sim¶e_pošt_ş—r_fšish


320 
	#ec_GF2m_sim¶e_pošt_ş—r_fšish
 
ec_GF2m_sim¶e_±_şr_fšish


	)

321 #undeà
ec_GF2m_sim¶e_pošt_£t_to_šfš™y


322 
	#ec_GF2m_sim¶e_pošt_£t_to_šfš™y
 
ec_GF2m_sim¶e_±_£t_to_šf


	)

323 #undeà
ec_GF2m_sim¶e_pošts_make_affše


324 
	#ec_GF2m_sim¶e_pošts_make_affše
 
ec_GF2m_sim¶e_±s_make_affše


	)

325 #undeà
ec_GF2m_sim¶e_pošt_£t_affše_coÜdš©es


326 
	#ec_GF2m_sim¶e_pošt_£t_affše_coÜdš©es
 \

327 
ec_GF2m_smp_±_£t_af_coÜds


	)

328 #undeà
ec_GF2m_sim¶e_pošt_g‘_affše_coÜdš©es


329 
	#ec_GF2m_sim¶e_pošt_g‘_affše_coÜdš©es
 \

330 
ec_GF2m_smp_±_g‘_af_coÜds


	)

331 #undeà
ec_GF2m_sim¶e_£t_com´es£d_coÜdš©es


332 
	#ec_GF2m_sim¶e_£t_com´es£d_coÜdš©es
 \

333 
ec_GF2m_smp_£t_com´_coÜds


	)

334 #undeà
ec_GFp_sim¶e_group_£t_curve_GFp


335 
	#ec_GFp_sim¶e_group_£t_curve_GFp
 
ec_GFp_sim¶e_g½_£t_curve_GFp


	)

336 #undeà
ec_GFp_sim¶e_group_g‘_curve_GFp


337 
	#ec_GFp_sim¶e_group_g‘_curve_GFp
 
ec_GFp_sim¶e_g½_g‘_curve_GFp


	)

338 #undeà
ec_GFp_sim¶e_group_ş—r_fšish


339 
	#ec_GFp_sim¶e_group_ş—r_fšish
 
ec_GFp_sim¶e_g½_ş—r_fšish


	)

340 #undeà
ec_GFp_sim¶e_group_£t_g’”©Ü


341 
	#ec_GFp_sim¶e_group_£t_g’”©Ü
 
ec_GFp_sim¶e_g½_£t_g’”©Ü


	)

342 #undeà
ec_GFp_sim¶e_group_g‘0_g’”©Ü


343 
	#ec_GFp_sim¶e_group_g‘0_g’”©Ü
 
ec_GFp_sim¶e_g½_gt0_g’”©Ü


	)

344 #undeà
ec_GFp_sim¶e_group_g‘_coçùÜ


345 
	#ec_GFp_sim¶e_group_g‘_coçùÜ
 
ec_GFp_sim¶e_g½_g‘_coçùÜ


	)

346 #undeà
ec_GFp_sim¶e_pošt_ş—r_fšish


347 
	#ec_GFp_sim¶e_pošt_ş—r_fšish
 
ec_GFp_sim¶e_±_ş—r_fšish


	)

348 #undeà
ec_GFp_sim¶e_pošt_£t_to_šfš™y


349 
	#ec_GFp_sim¶e_pošt_£t_to_šfš™y
 
ec_GFp_sim¶e_±_£t_to_šf


	)

350 #undeà
ec_GFp_sim¶e_pošts_make_affše


351 
	#ec_GFp_sim¶e_pošts_make_affše
 
ec_GFp_sim¶e_±s_make_affše


	)

352 #undeà
ec_GFp_sim¶e_£t_J´ojeùive_coÜdš©es_GFp


353 
	#ec_GFp_sim¶e_£t_J´ojeùive_coÜdš©es_GFp
 \

354 
ec_GFp_smp_£t_J´oj_coÜds_GFp


	)

355 #undeà
ec_GFp_sim¶e_g‘_J´ojeùive_coÜdš©es_GFp


356 
	#ec_GFp_sim¶e_g‘_J´ojeùive_coÜdš©es_GFp
 \

357 
ec_GFp_smp_g‘_J´oj_coÜds_GFp


	)

358 #undeà
ec_GFp_sim¶e_pošt_£t_affše_coÜdš©es_GFp


359 
	#ec_GFp_sim¶e_pošt_£t_affše_coÜdš©es_GFp
 \

360 
ec_GFp_smp_±_£t_af_coÜds_GFp


	)

361 #undeà
ec_GFp_sim¶e_pošt_g‘_affše_coÜdš©es_GFp


362 
	#ec_GFp_sim¶e_pošt_g‘_affše_coÜdš©es_GFp
 \

363 
ec_GFp_smp_±_g‘_af_coÜds_GFp


	)

364 #undeà
ec_GFp_sim¶e_£t_com´es£d_coÜdš©es_GFp


365 
	#ec_GFp_sim¶e_£t_com´es£d_coÜdš©es_GFp
 \

366 
ec_GFp_smp_£t_com´_coÜds_GFp


	)

367 #undeà
ec_GFp_sim¶e_pošt_£t_affše_coÜdš©es


368 
	#ec_GFp_sim¶e_pošt_£t_affše_coÜdš©es
 \

369 
ec_GFp_smp_±_£t_af_coÜds


	)

370 #undeà
ec_GFp_sim¶e_pošt_g‘_affše_coÜdš©es


371 
	#ec_GFp_sim¶e_pošt_g‘_affše_coÜdš©es
 \

372 
ec_GFp_smp_±_g‘_af_coÜds


	)

373 #undeà
ec_GFp_sim¶e_£t_com´es£d_coÜdš©es


374 
	#ec_GFp_sim¶e_£t_com´es£d_coÜdš©es
 \

375 
ec_GFp_smp_£t_com´_coÜds


	)

376 #undeà
ec_GFp_sim¶e_group_check_disüimšªt


377 
	#ec_GFp_sim¶e_group_check_disüimšªt
 
ec_GFp_sim¶e_g½_chk_disüim


	)

380 #undeà
STORE_m‘hod_£t_š™Ÿli£_funùiÚ


381 
	#STORE_m‘hod_£t_š™Ÿli£_funùiÚ
 
STORE_m‘h_£t_š™Ÿli£_â


	)

382 #undeà
STORE_m‘hod_£t_ş—nup_funùiÚ


383 
	#STORE_m‘hod_£t_ş—nup_funùiÚ
 
STORE_m‘h_£t_ş—nup_â


	)

384 #undeà
STORE_m‘hod_£t_g’”©e_funùiÚ


385 
	#STORE_m‘hod_£t_g’”©e_funùiÚ
 
STORE_m‘h_£t_g’”©e_â


	)

386 #undeà
STORE_m‘hod_£t_modify_funùiÚ


387 
	#STORE_m‘hod_£t_modify_funùiÚ
 
STORE_m‘h_£t_modify_â


	)

388 #undeà
STORE_m‘hod_£t_»voke_funùiÚ


389 
	#STORE_m‘hod_£t_»voke_funùiÚ
 
STORE_m‘h_£t_»voke_â


	)

390 #undeà
STORE_m‘hod_£t_d–‘e_funùiÚ


391 
	#STORE_m‘hod_£t_d–‘e_funùiÚ
 
STORE_m‘h_£t_d–‘e_â


	)

392 #undeà
STORE_m‘hod_£t_li¡_¡¬t_funùiÚ


393 
	#STORE_m‘hod_£t_li¡_¡¬t_funùiÚ
 
STORE_m‘h_£t_li¡_¡¬t_â


	)

394 #undeà
STORE_m‘hod_£t_li¡_Ãxt_funùiÚ


395 
	#STORE_m‘hod_£t_li¡_Ãxt_funùiÚ
 
STORE_m‘h_£t_li¡_Ãxt_â


	)

396 #undeà
STORE_m‘hod_£t_li¡_’d_funùiÚ


397 
	#STORE_m‘hod_£t_li¡_’d_funùiÚ
 
STORE_m‘h_£t_li¡_’d_â


	)

398 #undeà
STORE_m‘hod_£t_upd©e_¡Üe_funùiÚ


399 
	#STORE_m‘hod_£t_upd©e_¡Üe_funùiÚ
 
STORE_m‘h_£t_upd©e_¡Üe_â


	)

400 #undeà
STORE_m‘hod_£t_lock_¡Üe_funùiÚ


401 
	#STORE_m‘hod_£t_lock_¡Üe_funùiÚ
 
STORE_m‘h_£t_lock_¡Üe_â


	)

402 #undeà
STORE_m‘hod_£t_uÆock_¡Üe_funùiÚ


403 
	#STORE_m‘hod_£t_uÆock_¡Üe_funùiÚ
 
STORE_m‘h_£t_uÆock_¡Üe_â


	)

404 #undeà
STORE_m‘hod_g‘_š™Ÿli£_funùiÚ


405 
	#STORE_m‘hod_g‘_š™Ÿli£_funùiÚ
 
STORE_m‘h_g‘_š™Ÿli£_â


	)

406 #undeà
STORE_m‘hod_g‘_ş—nup_funùiÚ


407 
	#STORE_m‘hod_g‘_ş—nup_funùiÚ
 
STORE_m‘h_g‘_ş—nup_â


	)

408 #undeà
STORE_m‘hod_g‘_g’”©e_funùiÚ


409 
	#STORE_m‘hod_g‘_g’”©e_funùiÚ
 
STORE_m‘h_g‘_g’”©e_â


	)

410 #undeà
STORE_m‘hod_g‘_modify_funùiÚ


411 
	#STORE_m‘hod_g‘_modify_funùiÚ
 
STORE_m‘h_g‘_modify_â


	)

412 #undeà
STORE_m‘hod_g‘_»voke_funùiÚ


413 
	#STORE_m‘hod_g‘_»voke_funùiÚ
 
STORE_m‘h_g‘_»voke_â


	)

414 #undeà
STORE_m‘hod_g‘_d–‘e_funùiÚ


415 
	#STORE_m‘hod_g‘_d–‘e_funùiÚ
 
STORE_m‘h_g‘_d–‘e_â


	)

416 #undeà
STORE_m‘hod_g‘_li¡_¡¬t_funùiÚ


417 
	#STORE_m‘hod_g‘_li¡_¡¬t_funùiÚ
 
STORE_m‘h_g‘_li¡_¡¬t_â


	)

418 #undeà
STORE_m‘hod_g‘_li¡_Ãxt_funùiÚ


419 
	#STORE_m‘hod_g‘_li¡_Ãxt_funùiÚ
 
STORE_m‘h_g‘_li¡_Ãxt_â


	)

420 #undeà
STORE_m‘hod_g‘_li¡_’d_funùiÚ


421 
	#STORE_m‘hod_g‘_li¡_’d_funùiÚ
 
STORE_m‘h_g‘_li¡_’d_â


	)

422 #undeà
STORE_m‘hod_g‘_upd©e_¡Üe_funùiÚ


423 
	#STORE_m‘hod_g‘_upd©e_¡Üe_funùiÚ
 
STORE_m‘h_g‘_upd©e_¡Üe_â


	)

424 #undeà
STORE_m‘hod_g‘_lock_¡Üe_funùiÚ


425 
	#STORE_m‘hod_g‘_lock_¡Üe_funùiÚ
 
STORE_m‘h_g‘_lock_¡Üe_â


	)

426 #undeà
STORE_m‘hod_g‘_uÆock_¡Üe_funùiÚ


427 
	#STORE_m‘hod_g‘_uÆock_¡Üe_funùiÚ
 
STORE_m‘h_g‘_uÆock_¡Üe_â


	)

430 #undeà
TS_RESP_CTX_£t_¡©us_šfo_cÚd


431 
	#TS_RESP_CTX_£t_¡©us_šfo_cÚd
 
TS_RESP_CTX_£t_¡©_šfo_cÚd


	)

432 #undeà
TS_RESP_CTX_£t_şock_´ecisiÚ_dig™s


433 
	#TS_RESP_CTX_£t_şock_´ecisiÚ_dig™s
 
TS_RESP_CTX_£t_şk_´ec_dig™s


	)

434 #undeà
TS_CONF_£t_şock_´ecisiÚ_dig™s


435 
	#TS_CONF_£t_şock_´ecisiÚ_dig™s
 
TS_CONF_£t_şk_´ec_dig™s


	)

438 #undeà
CMS_Rec›ÁInfo_kŒi_g‘0_®gs


439 
	#CMS_Rec›ÁInfo_kŒi_g‘0_®gs
 
CMS_RecInfo_kŒi_g‘0_®gs


	)

440 #undeà
CMS_Rec›ÁInfo_kŒi_g‘0_sigÃr_id


441 
	#CMS_Rec›ÁInfo_kŒi_g‘0_sigÃr_id
 
CMS_RecInfo_kŒi_g‘0_sigr_id


	)

442 #undeà
CMS_Oth”RevoÿtiÚInfoFÜm©_™


443 
	#CMS_Oth”RevoÿtiÚInfoFÜm©_™
 
CMS_Oth”RevocInfoFÜm©_™


	)

444 #undeà
CMS_KeyAg»eRec›ÁId’tif›r_™


445 
	#CMS_KeyAg»eRec›ÁId’tif›r_™
 
CMS_KeyAg»eRecId’tif›r_™


	)

446 #undeà
CMS_Origš©ÜId’tif›rOrKey_™


447 
	#CMS_Origš©ÜId’tif›rOrKey_™
 
CMS_Origš©ÜIdOrKey_™


	)

448 #undeà
cms_SigÃrId’tif›r_g‘0_sigÃr_id


449 
	#cms_SigÃrId’tif›r_g‘0_sigÃr_id
 
cms_SigÃrId_g‘0_sigÃr_id


	)

450 #undeà
CMS_Rec›ÁInfo_k¬i_g‘0_Üig_id


451 
	#CMS_Rec›ÁInfo_k¬i_g‘0_Üig_id
 
CMS_RecInfo_k¬i_g‘0_Üig_id


	)

452 #undeà
CMS_Rec›ÁInfo_k¬i_g‘0_»ks


453 
	#CMS_Rec›ÁInfo_k¬i_g‘0_»ks
 
CMS_RecInfo_k¬i_g‘0_»ks


	)

454 #undeà
CMS_Rec›ÁEnüy±edKey_û¹_cmp


455 
	#CMS_Rec›ÁEnüy±edKey_û¹_cmp
 
CMS_RecEnüy±edKey_û¹_cmp


	)

456 #undeà
CMS_Rec›ÁInfo_k¬i_£t0_pkey


457 
	#CMS_Rec›ÁInfo_k¬i_£t0_pkey
 
CMS_RecInfo_k¬i_£t0_pkey


	)

458 #undeà
CMS_Rec›ÁEnüy±edKey_g‘0_id


459 
	#CMS_Rec›ÁEnüy±edKey_g‘0_id
 
CMS_RecEnüy±edKey_g‘0_id


	)

460 #undeà
CMS_Rec›ÁInfo_k¬i_Üig_id_cmp


461 
	#CMS_Rec›ÁInfo_k¬i_Üig_id_cmp
 
CMS_RecInfo_k¬i_Üig_id_cmp


	)

464 #undeà
ds1_»Œªsm™_bufã»d_mes§ges


465 
	#ds1_»Œªsm™_bufã»d_mes§ges
 
ds1_»Œªsm™_bufã»d_msgs


	)

468 #undeà
SRP_g’”©e_£rv”_ma¡”_£ü‘


469 
	#SRP_g’”©e_£rv”_ma¡”_£ü‘
 
SRP_g’_£rv”_ma¡”_£ü‘


	)

470 #undeà
SRP_g’”©e_ş›Á_ma¡”_£ü‘


471 
	#SRP_g’”©e_ş›Á_ma¡”_£ü‘
 
SRP_g’_ş›Á_ma¡”_£ü‘


	)

474 #undeà
UI_m‘hod_g‘_´om±_cÚ¡ruùÜ


475 
	#UI_m‘hod_g‘_´om±_cÚ¡ruùÜ
 
UI_m‘hod_g‘_´om±_cÚ¡ruùr


	)

476 #undeà
UI_m‘hod_£t_´om±_cÚ¡ruùÜ


477 
	#UI_m‘hod_£t_´om±_cÚ¡ruùÜ
 
UI_m‘hod_£t_´om±_cÚ¡ruùr


	)

482 #ià
defšed
(
OPENSSL_SYS_VMS
è|| defšed(
OPENSSL_SYS_OS2
)

483 #undeà
ERR_lßd_CRYPTO_¡ršgs


484 
	#ERR_lßd_CRYPTO_¡ršgs
 
ERR_lßd_CRYPTOlib_¡ršgs


	)

485 #undeà
OCSP_ülID_Ãw


486 
	#OCSP_ülID_Ãw
 
OCSP_ülID2_Ãw


	)

488 #undeà
d2i_ECPARAMETERS


489 
	#d2i_ECPARAMETERS
 
d2i_UC_ECPARAMETERS


	)

490 #undeà
i2d_ECPARAMETERS


491 
	#i2d_ECPARAMETERS
 
i2d_UC_ECPARAMETERS


	)

492 #undeà
d2i_ECPKPARAMETERS


493 
	#d2i_ECPKPARAMETERS
 
d2i_UC_ECPKPARAMETERS


	)

494 #undeà
i2d_ECPKPARAMETERS


495 
	#i2d_ECPKPARAMETERS
 
i2d_UC_ECPKPARAMETERS


	)

503 #undeà
X509v3_ş—nup_ex‹nsiÚs


504 
	#X509v3_ş—nup_ex‹nsiÚs
 
oX509v3_ş—nup_ex‹nsiÚs


	)

505 #undeà
X509v3_add_ex‹nsiÚ


506 
	#X509v3_add_ex‹nsiÚ
 
oX509v3_add_ex‹nsiÚ


	)

507 #undeà
X509v3_add_Ãtsÿ³_ex‹nsiÚs


508 
	#X509v3_add_Ãtsÿ³_ex‹nsiÚs
 
oX509v3_add_Ãtsÿ³_ex‹nsiÚs


	)

509 #undeà
X509v3_add_¡ªd¬d_ex‹nsiÚs


510 
	#X509v3_add_¡ªd¬d_ex‹nsiÚs
 
oX509v3_add_¡ªd¬d_ex‹nsiÚs


	)

513 #undeà
cms_D©a_ü—‹


514 
	#cms_D©a_ü—‹
 
´iv_cms_D©a_ü—‹


	)

	@/usr/include/openssl/tls1.h

151 #iâdeà
HEADER_TLS1_H


152 
	#HEADER_TLS1_H


	)

154 
	~<İ’s¦/bufãr.h
>

156 #ifdeà 
__ılu¥lus


160 
	#TLS1_ALLOW_EXPERIMENTAL_CIPHERSUITES
 0

	)

162 
	#TLS1_VERSION
 0x0301

	)

163 
	#TLS1_1_VERSION
 0x0302

	)

164 
	#TLS1_2_VERSION
 0x0303

	)

165 
	#TLS_MAX_VERSION
 
TLS1_2_VERSION


	)

167 
	#TLS1_VERSION_MAJOR
 0x03

	)

168 
	#TLS1_VERSION_MINOR
 0x01

	)

170 
	#TLS1_1_VERSION_MAJOR
 0x03

	)

171 
	#TLS1_1_VERSION_MINOR
 0x02

	)

173 
	#TLS1_2_VERSION_MAJOR
 0x03

	)

174 
	#TLS1_2_VERSION_MINOR
 0x03

	)

176 
	#TLS1_g‘_v”siÚ
(
s
) \

177 ((
s
->
v”siÚ
 >> 8è=ğ
TLS1_VERSION_MAJOR
 ? s->v”siÚ : 0)

	)

179 
	#TLS1_g‘_ş›Á_v”siÚ
(
s
) \

180 ((
s
->
ş›Á_v”siÚ
 >> 8è=ğ
TLS1_VERSION_MAJOR
 ? s->ş›Á_v”siÚ : 0)

	)

182 
	#TLS1_AD_DECRYPTION_FAILED
 21

	)

183 
	#TLS1_AD_RECORD_OVERFLOW
 22

	)

184 
	#TLS1_AD_UNKNOWN_CA
 48

	)

185 
	#TLS1_AD_ACCESS_DENIED
 49

	)

186 
	#TLS1_AD_DECODE_ERROR
 50

	)

187 
	#TLS1_AD_DECRYPT_ERROR
 51

	)

188 
	#TLS1_AD_EXPORT_RESTRICTION
 60

	)

189 
	#TLS1_AD_PROTOCOL_VERSION
 70

	)

190 
	#TLS1_AD_INSUFFICIENT_SECURITY
 71

	)

191 
	#TLS1_AD_INTERNAL_ERROR
 80

	)

192 
	#TLS1_AD_INAPPROPRIATE_FALLBACK
 86

	)

193 
	#TLS1_AD_USER_CANCELLED
 90

	)

194 
	#TLS1_AD_NO_RENEGOTIATION
 100

	)

196 
	#TLS1_AD_UNSUPPORTED_EXTENSION
 110

	)

197 
	#TLS1_AD_CERTIFICATE_UNOBTAINABLE
 111

	)

198 
	#TLS1_AD_UNRECOGNIZED_NAME
 112

	)

199 
	#TLS1_AD_BAD_CERTIFICATE_STATUS_RESPONSE
 113

	)

200 
	#TLS1_AD_BAD_CERTIFICATE_HASH_VALUE
 114

	)

201 
	#TLS1_AD_UNKNOWN_PSK_IDENTITY
 115

	)

204 
	#TLSEXT_TYPE_£rv”_Çme
 0

	)

205 
	#TLSEXT_TYPE_max_äagm’t_Ëngth
 1

	)

206 
	#TLSEXT_TYPE_ş›Á_û¹ifiÿ‹_u¾
 2

	)

207 
	#TLSEXT_TYPE_Œu¡ed_ÿ_keys
 3

	)

208 
	#TLSEXT_TYPE_Œunÿ‹d_hmac
 4

	)

209 
	#TLSEXT_TYPE_¡©us_»que¡
 5

	)

211 
	#TLSEXT_TYPE_u£r_m­pšg
 6

	)

213 
	#TLSEXT_TYPE_ş›Á_authz
 7

	)

214 
	#TLSEXT_TYPE_£rv”_authz
 8

	)

216 
	#TLSEXT_TYPE_û¹_ty³
 9

	)

219 
	#TLSEXT_TYPE_–ltic_curves
 10

	)

220 
	#TLSEXT_TYPE_ec_pošt_fÜm©s
 11

	)

223 
	#TLSEXT_TYPE_¤p
 12

	)

226 
	#TLSEXT_TYPE_sigÇtu»_®gÜ™hms
 13

	)

229 
	#TLSEXT_TYPE_u£_¤
 14

	)

232 
	#TLSEXT_TYPE_h—¹b—t
 15

	)

235 
	#TLSEXT_TYPE_­¶iÿtiÚ_Ïy”_´ÙocŞ_ÃgÙŸtiÚ
 16

	)

241 
	#TLSEXT_TYPE_·ddšg
 21

	)

244 
	#TLSEXT_TYPE_£ssiÚ_tick‘
 35

	)

253 
	#TLSEXT_TYPE_İaque_´f_šput
 ??

	)

257 
	#TLSEXT_TYPE_»ÃgÙŸ‹
 0xff01

	)

259 #iâdeà
OPENSSL_NO_NEXTPROTONEG


261 
	#TLSEXT_TYPE_Ãxt_´Ùo_Ãg
 13172

	)

265 
	#TLSEXT_NAMETYPE_ho¡_Çme
 0

	)

267 
	#TLSEXT_STATUSTYPE_oc¥
 1

	)

270 
	#TLSEXT_ECPOINTFORMAT_fœ¡
 0

	)

271 
	#TLSEXT_ECPOINTFORMAT_uncom´es£d
 0

	)

272 
	#TLSEXT_ECPOINTFORMAT_ªsiX962_com´es£d_´ime
 1

	)

273 
	#TLSEXT_ECPOINTFORMAT_ªsiX962_com´es£d_ch¬2
 2

	)

274 
	#TLSEXT_ECPOINTFORMAT_Ï¡
 2

	)

277 
	#TLSEXT_sigÇtu»_ªÚymous
 0

	)

278 
	#TLSEXT_sigÇtu»_r§
 1

	)

279 
	#TLSEXT_sigÇtu»_d§
 2

	)

280 
	#TLSEXT_sigÇtu»_ecd§
 3

	)

283 
	#TLSEXT_sigÇtu»_num
 4

	)

285 
	#TLSEXT_hash_nÚe
 0

	)

286 
	#TLSEXT_hash_md5
 1

	)

287 
	#TLSEXT_hash_sha1
 2

	)

288 
	#TLSEXT_hash_sha224
 3

	)

289 
	#TLSEXT_hash_sha256
 4

	)

290 
	#TLSEXT_hash_sha384
 5

	)

291 
	#TLSEXT_hash_sha512
 6

	)

295 
	#TLSEXT_hash_num
 7

	)

298 
	#TLSEXT_nid_unknown
 0x1000000

	)

302 
	#TLSEXT_curve_P_256
 23

	)

303 
	#TLSEXT_curve_P_384
 24

	)

305 #iâdeà
OPENSSL_NO_TLSEXT


307 
	#TLSEXT_MAXLEN_ho¡_Çme
 255

	)

309 cÚ¡ *
SSL_g‘_£rv”Çme
(cÚ¡ 
SSL
 *
s
, cÚ¡ 
ty³
);

310 
SSL_g‘_£rv”Çme_ty³
(cÚ¡ 
SSL
 *
s
);

318 
SSL_expÜt_keyšg_m©”Ÿl
(
SSL
 *
s
, *
out
, 
size_t
 
Ş’
,

319 cÚ¡ *
Ïb–
, 
size_t
 
Î’
,

320 cÚ¡ *
cÚ‹xt
, 
size_t
 
cÚ‹x’
,

321 
u£_cÚ‹xt
);

323 
SSL_g‘_sig®gs
(
SSL
 *
s
, 
idx
,

324 *
psign
, *
phash
, *
psigÇndhash
,

325 *
rsig
, *
rhash
);

327 
SSL_g‘_sh¬ed_sig®gs
(
SSL
 *
s
, 
idx
,

328 *
psign
, *
phash
, *
psigÇndhash
,

329 *
rsig
, *
rhash
);

331 
SSL_check_chaš
(
SSL
 *
s
, 
X509
 *
x
, 
EVP_PKEY
 *
pk
, 
STACK_OF
(X509è*
chaš
);

333 
	#SSL_£t_£xt_ho¡_Çme
(
s
,
Çme
) \

334 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_TLSEXT_HOSTNAME
,
TLSEXT_NAMETYPE_ho¡_Çme
,(*)
Çme
)

	)

336 
	#SSL_£t_£xt_debug_ÿÎback
(
s¦
, 
cb
) \

337 
	`SSL_ÿÎback_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_DEBUG_CB
,((*)())
cb
)

	)

339 
	#SSL_£t_£xt_debug_¬g
(
s¦
, 
¬g
) \

340 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_DEBUG_ARG
,0, (*)
¬g
)

	)

342 
	#SSL_£t_£xt_¡©us_ty³
(
s¦
, 
ty³
) \

343 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_TYPE
,
ty³
, 
NULL
)

	)

345 
	#SSL_g‘_£xt_¡©us_exts
(
s¦
, 
¬g
) \

346 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_GET_TLSEXT_STATUS_REQ_EXTS
,0, (*)
¬g
)

	)

348 
	#SSL_£t_£xt_¡©us_exts
(
s¦
, 
¬g
) \

349 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_EXTS
,0, (*)
¬g
)

	)

351 
	#SSL_g‘_£xt_¡©us_ids
(
s¦
, 
¬g
) \

352 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_GET_TLSEXT_STATUS_REQ_IDS
,0, (*)
¬g
)

	)

354 
	#SSL_£t_£xt_¡©us_ids
(
s¦
, 
¬g
) \

355 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_IDS
,0, (*)
¬g
)

	)

357 
	#SSL_g‘_£xt_¡©us_oc¥_»¥
(
s¦
, 
¬g
) \

358 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_GET_TLSEXT_STATUS_REQ_OCSP_RESP
,0, (*)
¬g
)

	)

360 
	#SSL_£t_£xt_¡©us_oc¥_»¥
(
s¦
, 
¬g
, 
¬gËn
) \

361 
	`SSL_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_OCSP_RESP
,
¬gËn
, (*)
¬g
)

	)

363 
	#SSL_CTX_£t_£xt_£rv”Çme_ÿÎback
(
ùx
, 
cb
) \

364 
	`SSL_CTX_ÿÎback_ù¾
(
ùx
,
SSL_CTRL_SET_TLSEXT_SERVERNAME_CB
,((*)())
cb
)

	)

366 
	#SSL_TLSEXT_ERR_OK
 0

	)

367 
	#SSL_TLSEXT_ERR_ALERT_WARNING
 1

	)

368 
	#SSL_TLSEXT_ERR_ALERT_FATAL
 2

	)

369 
	#SSL_TLSEXT_ERR_NOACK
 3

	)

371 
	#SSL_CTX_£t_£xt_£rv”Çme_¬g
(
ùx
, 
¬g
) \

372 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_TLSEXT_SERVERNAME_ARG
,0, (*)
¬g
)

	)

374 
	#SSL_CTX_g‘_£xt_tick‘_keys
(
ùx
, 
keys
, 
keyËn
) \

375 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_GET_TLSEXT_TICKET_KEYS
,(
keyËn
),(
keys
))

	)

376 
	#SSL_CTX_£t_£xt_tick‘_keys
(
ùx
, 
keys
, 
keyËn
) \

377 
	`SSL_CTX_ù¾
((
ùx
),
SSL_CTRL_SET_TLSEXT_TICKET_KEYS
,(
keyËn
),(
keys
))

	)

379 
	#SSL_CTX_£t_£xt_¡©us_cb
(
s¦
, 
cb
) \

380 
	`SSL_CTX_ÿÎback_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_CB
,((*)())
cb
)

	)

382 
	#SSL_CTX_£t_£xt_¡©us_¬g
(
s¦
, 
¬g
) \

383 
	`SSL_CTX_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_STATUS_REQ_CB_ARG
,0, (*)
¬g
)

	)

385 
	#SSL_£t_£xt_İaque_´f_šput
(
s
, 
¤c
, 
Ën
) \

386 
	`SSL_ù¾
(
s
,
SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT
, 
Ën
, 
¤c
)

	)

387 
	#SSL_CTX_£t_£xt_İaque_´f_šput_ÿÎback
(
ùx
, 
cb
) \

388 
	`SSL_CTX_ÿÎback_ù¾
(
ùx
,
SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT_CB
, ((*)())
cb
)

	)

389 
	#SSL_CTX_£t_£xt_İaque_´f_šput_ÿÎback_¬g
(
ùx
, 
¬g
) \

390 
	`SSL_CTX_ù¾
(
ùx
,
SSL_CTRL_SET_TLSEXT_OPAQUE_PRF_INPUT_CB_ARG
, 0, 
¬g
)

	)

392 
	#SSL_CTX_£t_£xt_tick‘_key_cb
(
s¦
, 
cb
) \

393 
	`SSL_CTX_ÿÎback_ù¾
(
s¦
,
SSL_CTRL_SET_TLSEXT_TICKET_KEY_CB
,((*)())
cb
)

	)

395 #iâdeà
OPENSSL_NO_HEARTBEATS


396 
	#SSL_TLSEXT_HB_ENABLED
 0x01

	)

397 
	#SSL_TLSEXT_HB_DONT_SEND_REQUESTS
 0x02

	)

398 
	#SSL_TLSEXT_HB_DONT_RECV_REQUESTS
 0x04

	)

400 
	#SSL_g‘_£xt_h—¹b—t_³ndšg
(
s¦
) \

401 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_GET_TLS_EXT_HEARTBEAT_PENDING
,0,
NULL
)

	)

402 
	#SSL_£t_£xt_h—¹b—t_no_»que¡s
(
s¦
, 
¬g
) \

403 
	`SSL_ù¾
((
s¦
),
SSL_CTRL_SET_TLS_EXT_HEARTBEAT_NO_REQUESTS
,
¬g
,
NULL
)

	)

408 
	#TLS1_CK_PSK_WITH_RC4_128_SHA
 0x0300008A

	)

409 
	#TLS1_CK_PSK_WITH_3DES_EDE_CBC_SHA
 0x0300008B

	)

410 
	#TLS1_CK_PSK_WITH_AES_128_CBC_SHA
 0x0300008C

	)

411 
	#TLS1_CK_PSK_WITH_AES_256_CBC_SHA
 0x0300008D

	)

420 
	#TLS1_CK_RSA_EXPORT1024_WITH_RC4_56_MD5
 0x03000060

	)

422 
	#TLS1_CK_RSA_EXPORT1024_WITH_RC2_CBC_56_MD5
 0x03000061

	)

424 
	#TLS1_CK_RSA_EXPORT1024_WITH_DES_CBC_SHA
 0x03000062

	)

425 
	#TLS1_CK_DHE_DSS_EXPORT1024_WITH_DES_CBC_SHA
 0x03000063

	)

426 
	#TLS1_CK_RSA_EXPORT1024_WITH_RC4_56_SHA
 0x03000064

	)

427 
	#TLS1_CK_DHE_DSS_EXPORT1024_WITH_RC4_56_SHA
 0x03000065

	)

428 
	#TLS1_CK_DHE_DSS_WITH_RC4_128_SHA
 0x03000066

	)

431 
	#TLS1_CK_RSA_WITH_AES_128_SHA
 0x0300002F

	)

432 
	#TLS1_CK_DH_DSS_WITH_AES_128_SHA
 0x03000030

	)

433 
	#TLS1_CK_DH_RSA_WITH_AES_128_SHA
 0x03000031

	)

434 
	#TLS1_CK_DHE_DSS_WITH_AES_128_SHA
 0x03000032

	)

435 
	#TLS1_CK_DHE_RSA_WITH_AES_128_SHA
 0x03000033

	)

436 
	#TLS1_CK_ADH_WITH_AES_128_SHA
 0x03000034

	)

438 
	#TLS1_CK_RSA_WITH_AES_256_SHA
 0x03000035

	)

439 
	#TLS1_CK_DH_DSS_WITH_AES_256_SHA
 0x03000036

	)

440 
	#TLS1_CK_DH_RSA_WITH_AES_256_SHA
 0x03000037

	)

441 
	#TLS1_CK_DHE_DSS_WITH_AES_256_SHA
 0x03000038

	)

442 
	#TLS1_CK_DHE_RSA_WITH_AES_256_SHA
 0x03000039

	)

443 
	#TLS1_CK_ADH_WITH_AES_256_SHA
 0x0300003A

	)

446 
	#TLS1_CK_RSA_WITH_NULL_SHA256
 0x0300003B

	)

447 
	#TLS1_CK_RSA_WITH_AES_128_SHA256
 0x0300003C

	)

448 
	#TLS1_CK_RSA_WITH_AES_256_SHA256
 0x0300003D

	)

449 
	#TLS1_CK_DH_DSS_WITH_AES_128_SHA256
 0x0300003E

	)

450 
	#TLS1_CK_DH_RSA_WITH_AES_128_SHA256
 0x0300003F

	)

451 
	#TLS1_CK_DHE_DSS_WITH_AES_128_SHA256
 0x03000040

	)

454 
	#TLS1_CK_RSA_WITH_CAMELLIA_128_CBC_SHA
 0x03000041

	)

455 
	#TLS1_CK_DH_DSS_WITH_CAMELLIA_128_CBC_SHA
 0x03000042

	)

456 
	#TLS1_CK_DH_RSA_WITH_CAMELLIA_128_CBC_SHA
 0x03000043

	)

457 
	#TLS1_CK_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA
 0x03000044

	)

458 
	#TLS1_CK_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA
 0x03000045

	)

459 
	#TLS1_CK_ADH_WITH_CAMELLIA_128_CBC_SHA
 0x03000046

	)

462 
	#TLS1_CK_DHE_RSA_WITH_AES_128_SHA256
 0x03000067

	)

463 
	#TLS1_CK_DH_DSS_WITH_AES_256_SHA256
 0x03000068

	)

464 
	#TLS1_CK_DH_RSA_WITH_AES_256_SHA256
 0x03000069

	)

465 
	#TLS1_CK_DHE_DSS_WITH_AES_256_SHA256
 0x0300006A

	)

466 
	#TLS1_CK_DHE_RSA_WITH_AES_256_SHA256
 0x0300006B

	)

467 
	#TLS1_CK_ADH_WITH_AES_128_SHA256
 0x0300006C

	)

468 
	#TLS1_CK_ADH_WITH_AES_256_SHA256
 0x0300006D

	)

471 
	#TLS1_CK_RSA_WITH_CAMELLIA_256_CBC_SHA
 0x03000084

	)

472 
	#TLS1_CK_DH_DSS_WITH_CAMELLIA_256_CBC_SHA
 0x03000085

	)

473 
	#TLS1_CK_DH_RSA_WITH_CAMELLIA_256_CBC_SHA
 0x03000086

	)

474 
	#TLS1_CK_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA
 0x03000087

	)

475 
	#TLS1_CK_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA
 0x03000088

	)

476 
	#TLS1_CK_ADH_WITH_CAMELLIA_256_CBC_SHA
 0x03000089

	)

479 
	#TLS1_CK_RSA_WITH_SEED_SHA
 0x03000096

	)

480 
	#TLS1_CK_DH_DSS_WITH_SEED_SHA
 0x03000097

	)

481 
	#TLS1_CK_DH_RSA_WITH_SEED_SHA
 0x03000098

	)

482 
	#TLS1_CK_DHE_DSS_WITH_SEED_SHA
 0x03000099

	)

483 
	#TLS1_CK_DHE_RSA_WITH_SEED_SHA
 0x0300009A

	)

484 
	#TLS1_CK_ADH_WITH_SEED_SHA
 0x0300009B

	)

487 
	#TLS1_CK_RSA_WITH_AES_128_GCM_SHA256
 0x0300009C

	)

488 
	#TLS1_CK_RSA_WITH_AES_256_GCM_SHA384
 0x0300009D

	)

489 
	#TLS1_CK_DHE_RSA_WITH_AES_128_GCM_SHA256
 0x0300009E

	)

490 
	#TLS1_CK_DHE_RSA_WITH_AES_256_GCM_SHA384
 0x0300009F

	)

491 
	#TLS1_CK_DH_RSA_WITH_AES_128_GCM_SHA256
 0x030000A0

	)

492 
	#TLS1_CK_DH_RSA_WITH_AES_256_GCM_SHA384
 0x030000A1

	)

493 
	#TLS1_CK_DHE_DSS_WITH_AES_128_GCM_SHA256
 0x030000A2

	)

494 
	#TLS1_CK_DHE_DSS_WITH_AES_256_GCM_SHA384
 0x030000A3

	)

495 
	#TLS1_CK_DH_DSS_WITH_AES_128_GCM_SHA256
 0x030000A4

	)

496 
	#TLS1_CK_DH_DSS_WITH_AES_256_GCM_SHA384
 0x030000A5

	)

497 
	#TLS1_CK_ADH_WITH_AES_128_GCM_SHA256
 0x030000A6

	)

498 
	#TLS1_CK_ADH_WITH_AES_256_GCM_SHA384
 0x030000A7

	)

504 
	#TLS1_CK_ECDH_ECDSA_WITH_NULL_SHA
 0x0300C001

	)

505 
	#TLS1_CK_ECDH_ECDSA_WITH_RC4_128_SHA
 0x0300C002

	)

506 
	#TLS1_CK_ECDH_ECDSA_WITH_DES_192_CBC3_SHA
 0x0300C003

	)

507 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_128_CBC_SHA
 0x0300C004

	)

508 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_256_CBC_SHA
 0x0300C005

	)

510 
	#TLS1_CK_ECDHE_ECDSA_WITH_NULL_SHA
 0x0300C006

	)

511 
	#TLS1_CK_ECDHE_ECDSA_WITH_RC4_128_SHA
 0x0300C007

	)

512 
	#TLS1_CK_ECDHE_ECDSA_WITH_DES_192_CBC3_SHA
 0x0300C008

	)

513 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
 0x0300C009

	)

514 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
 0x0300C00A

	)

516 
	#TLS1_CK_ECDH_RSA_WITH_NULL_SHA
 0x0300C00B

	)

517 
	#TLS1_CK_ECDH_RSA_WITH_RC4_128_SHA
 0x0300C00C

	)

518 
	#TLS1_CK_ECDH_RSA_WITH_DES_192_CBC3_SHA
 0x0300C00D

	)

519 
	#TLS1_CK_ECDH_RSA_WITH_AES_128_CBC_SHA
 0x0300C00E

	)

520 
	#TLS1_CK_ECDH_RSA_WITH_AES_256_CBC_SHA
 0x0300C00F

	)

522 
	#TLS1_CK_ECDHE_RSA_WITH_NULL_SHA
 0x0300C010

	)

523 
	#TLS1_CK_ECDHE_RSA_WITH_RC4_128_SHA
 0x0300C011

	)

524 
	#TLS1_CK_ECDHE_RSA_WITH_DES_192_CBC3_SHA
 0x0300C012

	)

525 
	#TLS1_CK_ECDHE_RSA_WITH_AES_128_CBC_SHA
 0x0300C013

	)

526 
	#TLS1_CK_ECDHE_RSA_WITH_AES_256_CBC_SHA
 0x0300C014

	)

528 
	#TLS1_CK_ECDH_ªÚ_WITH_NULL_SHA
 0x0300C015

	)

529 
	#TLS1_CK_ECDH_ªÚ_WITH_RC4_128_SHA
 0x0300C016

	)

530 
	#TLS1_CK_ECDH_ªÚ_WITH_DES_192_CBC3_SHA
 0x0300C017

	)

531 
	#TLS1_CK_ECDH_ªÚ_WITH_AES_128_CBC_SHA
 0x0300C018

	)

532 
	#TLS1_CK_ECDH_ªÚ_WITH_AES_256_CBC_SHA
 0x0300C019

	)

535 
	#TLS1_CK_SRP_SHA_WITH_3DES_EDE_CBC_SHA
 0x0300C01A

	)

536 
	#TLS1_CK_SRP_SHA_RSA_WITH_3DES_EDE_CBC_SHA
 0x0300C01B

	)

537 
	#TLS1_CK_SRP_SHA_DSS_WITH_3DES_EDE_CBC_SHA
 0x0300C01C

	)

538 
	#TLS1_CK_SRP_SHA_WITH_AES_128_CBC_SHA
 0x0300C01D

	)

539 
	#TLS1_CK_SRP_SHA_RSA_WITH_AES_128_CBC_SHA
 0x0300C01E

	)

540 
	#TLS1_CK_SRP_SHA_DSS_WITH_AES_128_CBC_SHA
 0x0300C01F

	)

541 
	#TLS1_CK_SRP_SHA_WITH_AES_256_CBC_SHA
 0x0300C020

	)

542 
	#TLS1_CK_SRP_SHA_RSA_WITH_AES_256_CBC_SHA
 0x0300C021

	)

543 
	#TLS1_CK_SRP_SHA_DSS_WITH_AES_256_CBC_SHA
 0x0300C022

	)

547 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_128_SHA256
 0x0300C023

	)

548 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_256_SHA384
 0x0300C024

	)

549 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_128_SHA256
 0x0300C025

	)

550 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_256_SHA384
 0x0300C026

	)

551 
	#TLS1_CK_ECDHE_RSA_WITH_AES_128_SHA256
 0x0300C027

	)

552 
	#TLS1_CK_ECDHE_RSA_WITH_AES_256_SHA384
 0x0300C028

	)

553 
	#TLS1_CK_ECDH_RSA_WITH_AES_128_SHA256
 0x0300C029

	)

554 
	#TLS1_CK_ECDH_RSA_WITH_AES_256_SHA384
 0x0300C02A

	)

557 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
 0x0300C02B

	)

558 
	#TLS1_CK_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
 0x0300C02C

	)

559 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_128_GCM_SHA256
 0x0300C02D

	)

560 
	#TLS1_CK_ECDH_ECDSA_WITH_AES_256_GCM_SHA384
 0x0300C02E

	)

561 
	#TLS1_CK_ECDHE_RSA_WITH_AES_128_GCM_SHA256
 0x0300C02F

	)

562 
	#TLS1_CK_ECDHE_RSA_WITH_AES_256_GCM_SHA384
 0x0300C030

	)

563 
	#TLS1_CK_ECDH_RSA_WITH_AES_128_GCM_SHA256
 0x0300C031

	)

564 
	#TLS1_CK_ECDH_RSA_WITH_AES_256_GCM_SHA384
 0x0300C032

	)

572 
	#TLS1_TXT_RSA_EXPORT1024_WITH_RC4_56_MD5
 "EXP1024-RC4-MD5"

	)

573 
	#TLS1_TXT_RSA_EXPORT1024_WITH_RC2_CBC_56_MD5
 "EXP1024-RC2-CBC-MD5"

	)

574 
	#TLS1_TXT_RSA_EXPORT1024_WITH_DES_CBC_SHA
 "EXP1024-DES-CBC-SHA"

	)

575 
	#TLS1_TXT_DHE_DSS_EXPORT1024_WITH_DES_CBC_SHA
 "EXP1024-DHE-DSS-DES-CBC-SHA"

	)

576 
	#TLS1_TXT_RSA_EXPORT1024_WITH_RC4_56_SHA
 "EXP1024-RC4-SHA"

	)

577 
	#TLS1_TXT_DHE_DSS_EXPORT1024_WITH_RC4_56_SHA
 "EXP1024-DHE-DSS-RC4-SHA"

	)

578 
	#TLS1_TXT_DHE_DSS_WITH_RC4_128_SHA
 "DHE-DSS-RC4-SHA"

	)

581 
	#TLS1_TXT_RSA_WITH_AES_128_SHA
 "AES128-SHA"

	)

582 
	#TLS1_TXT_DH_DSS_WITH_AES_128_SHA
 "DH-DSS-AES128-SHA"

	)

583 
	#TLS1_TXT_DH_RSA_WITH_AES_128_SHA
 "DH-RSA-AES128-SHA"

	)

584 
	#TLS1_TXT_DHE_DSS_WITH_AES_128_SHA
 "DHE-DSS-AES128-SHA"

	)

585 
	#TLS1_TXT_DHE_RSA_WITH_AES_128_SHA
 "DHE-RSA-AES128-SHA"

	)

586 
	#TLS1_TXT_ADH_WITH_AES_128_SHA
 "ADH-AES128-SHA"

	)

588 
	#TLS1_TXT_RSA_WITH_AES_256_SHA
 "AES256-SHA"

	)

589 
	#TLS1_TXT_DH_DSS_WITH_AES_256_SHA
 "DH-DSS-AES256-SHA"

	)

590 
	#TLS1_TXT_DH_RSA_WITH_AES_256_SHA
 "DH-RSA-AES256-SHA"

	)

591 
	#TLS1_TXT_DHE_DSS_WITH_AES_256_SHA
 "DHE-DSS-AES256-SHA"

	)

592 
	#TLS1_TXT_DHE_RSA_WITH_AES_256_SHA
 "DHE-RSA-AES256-SHA"

	)

593 
	#TLS1_TXT_ADH_WITH_AES_256_SHA
 "ADH-AES256-SHA"

	)

596 
	#TLS1_TXT_ECDH_ECDSA_WITH_NULL_SHA
 "ECDH-ECDSA-NULL-SHA"

	)

597 
	#TLS1_TXT_ECDH_ECDSA_WITH_RC4_128_SHA
 "ECDH-ECDSA-RC4-SHA"

	)

598 
	#TLS1_TXT_ECDH_ECDSA_WITH_DES_192_CBC3_SHA
 "ECDH-ECDSA-DES-CBC3-SHA"

	)

599 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_128_CBC_SHA
 "ECDH-ECDSA-AES128-SHA"

	)

600 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_256_CBC_SHA
 "ECDH-ECDSA-AES256-SHA"

	)

602 
	#TLS1_TXT_ECDHE_ECDSA_WITH_NULL_SHA
 "ECDHE-ECDSA-NULL-SHA"

	)

603 
	#TLS1_TXT_ECDHE_ECDSA_WITH_RC4_128_SHA
 "ECDHE-ECDSA-RC4-SHA"

	)

604 
	#TLS1_TXT_ECDHE_ECDSA_WITH_DES_192_CBC3_SHA
 "ECDHE-ECDSA-DES-CBC3-SHA"

	)

605 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
 "ECDHE-ECDSA-AES128-SHA"

	)

606 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
 "ECDHE-ECDSA-AES256-SHA"

	)

608 
	#TLS1_TXT_ECDH_RSA_WITH_NULL_SHA
 "ECDH-RSA-NULL-SHA"

	)

609 
	#TLS1_TXT_ECDH_RSA_WITH_RC4_128_SHA
 "ECDH-RSA-RC4-SHA"

	)

610 
	#TLS1_TXT_ECDH_RSA_WITH_DES_192_CBC3_SHA
 "ECDH-RSA-DES-CBC3-SHA"

	)

611 
	#TLS1_TXT_ECDH_RSA_WITH_AES_128_CBC_SHA
 "ECDH-RSA-AES128-SHA"

	)

612 
	#TLS1_TXT_ECDH_RSA_WITH_AES_256_CBC_SHA
 "ECDH-RSA-AES256-SHA"

	)

614 
	#TLS1_TXT_ECDHE_RSA_WITH_NULL_SHA
 "ECDHE-RSA-NULL-SHA"

	)

615 
	#TLS1_TXT_ECDHE_RSA_WITH_RC4_128_SHA
 "ECDHE-RSA-RC4-SHA"

	)

616 
	#TLS1_TXT_ECDHE_RSA_WITH_DES_192_CBC3_SHA
 "ECDHE-RSA-DES-CBC3-SHA"

	)

617 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_128_CBC_SHA
 "ECDHE-RSA-AES128-SHA"

	)

618 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_256_CBC_SHA
 "ECDHE-RSA-AES256-SHA"

	)

620 
	#TLS1_TXT_ECDH_ªÚ_WITH_NULL_SHA
 "AECDH-NULL-SHA"

	)

621 
	#TLS1_TXT_ECDH_ªÚ_WITH_RC4_128_SHA
 "AECDH-RC4-SHA"

	)

622 
	#TLS1_TXT_ECDH_ªÚ_WITH_DES_192_CBC3_SHA
 "AECDH-DES-CBC3-SHA"

	)

623 
	#TLS1_TXT_ECDH_ªÚ_WITH_AES_128_CBC_SHA
 "AECDH-AES128-SHA"

	)

624 
	#TLS1_TXT_ECDH_ªÚ_WITH_AES_256_CBC_SHA
 "AECDH-AES256-SHA"

	)

627 
	#TLS1_TXT_PSK_WITH_RC4_128_SHA
 "PSK-RC4-SHA"

	)

628 
	#TLS1_TXT_PSK_WITH_3DES_EDE_CBC_SHA
 "PSK-3DES-EDE-CBC-SHA"

	)

629 
	#TLS1_TXT_PSK_WITH_AES_128_CBC_SHA
 "PSK-AES128-CBC-SHA"

	)

630 
	#TLS1_TXT_PSK_WITH_AES_256_CBC_SHA
 "PSK-AES256-CBC-SHA"

	)

633 
	#TLS1_TXT_SRP_SHA_WITH_3DES_EDE_CBC_SHA
 "SRP-3DES-EDE-CBC-SHA"

	)

634 
	#TLS1_TXT_SRP_SHA_RSA_WITH_3DES_EDE_CBC_SHA
 "SRP-RSA-3DES-EDE-CBC-SHA"

	)

635 
	#TLS1_TXT_SRP_SHA_DSS_WITH_3DES_EDE_CBC_SHA
 "SRP-DSS-3DES-EDE-CBC-SHA"

	)

636 
	#TLS1_TXT_SRP_SHA_WITH_AES_128_CBC_SHA
 "SRP-AES-128-CBC-SHA"

	)

637 
	#TLS1_TXT_SRP_SHA_RSA_WITH_AES_128_CBC_SHA
 "SRP-RSA-AES-128-CBC-SHA"

	)

638 
	#TLS1_TXT_SRP_SHA_DSS_WITH_AES_128_CBC_SHA
 "SRP-DSS-AES-128-CBC-SHA"

	)

639 
	#TLS1_TXT_SRP_SHA_WITH_AES_256_CBC_SHA
 "SRP-AES-256-CBC-SHA"

	)

640 
	#TLS1_TXT_SRP_SHA_RSA_WITH_AES_256_CBC_SHA
 "SRP-RSA-AES-256-CBC-SHA"

	)

641 
	#TLS1_TXT_SRP_SHA_DSS_WITH_AES_256_CBC_SHA
 "SRP-DSS-AES-256-CBC-SHA"

	)

644 
	#TLS1_TXT_RSA_WITH_CAMELLIA_128_CBC_SHA
 "CAMELLIA128-SHA"

	)

645 
	#TLS1_TXT_DH_DSS_WITH_CAMELLIA_128_CBC_SHA
 "DH-DSS-CAMELLIA128-SHA"

	)

646 
	#TLS1_TXT_DH_RSA_WITH_CAMELLIA_128_CBC_SHA
 "DH-RSA-CAMELLIA128-SHA"

	)

647 
	#TLS1_TXT_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA
 "DHE-DSS-CAMELLIA128-SHA"

	)

648 
	#TLS1_TXT_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA
 "DHE-RSA-CAMELLIA128-SHA"

	)

649 
	#TLS1_TXT_ADH_WITH_CAMELLIA_128_CBC_SHA
 "ADH-CAMELLIA128-SHA"

	)

651 
	#TLS1_TXT_RSA_WITH_CAMELLIA_256_CBC_SHA
 "CAMELLIA256-SHA"

	)

652 
	#TLS1_TXT_DH_DSS_WITH_CAMELLIA_256_CBC_SHA
 "DH-DSS-CAMELLIA256-SHA"

	)

653 
	#TLS1_TXT_DH_RSA_WITH_CAMELLIA_256_CBC_SHA
 "DH-RSA-CAMELLIA256-SHA"

	)

654 
	#TLS1_TXT_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA
 "DHE-DSS-CAMELLIA256-SHA"

	)

655 
	#TLS1_TXT_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA
 "DHE-RSA-CAMELLIA256-SHA"

	)

656 
	#TLS1_TXT_ADH_WITH_CAMELLIA_256_CBC_SHA
 "ADH-CAMELLIA256-SHA"

	)

659 
	#TLS1_TXT_RSA_WITH_SEED_SHA
 "SEED-SHA"

	)

660 
	#TLS1_TXT_DH_DSS_WITH_SEED_SHA
 "DH-DSS-SEED-SHA"

	)

661 
	#TLS1_TXT_DH_RSA_WITH_SEED_SHA
 "DH-RSA-SEED-SHA"

	)

662 
	#TLS1_TXT_DHE_DSS_WITH_SEED_SHA
 "DHE-DSS-SEED-SHA"

	)

663 
	#TLS1_TXT_DHE_RSA_WITH_SEED_SHA
 "DHE-RSA-SEED-SHA"

	)

664 
	#TLS1_TXT_ADH_WITH_SEED_SHA
 "ADH-SEED-SHA"

	)

667 
	#TLS1_TXT_RSA_WITH_NULL_SHA256
 "NULL-SHA256"

	)

668 
	#TLS1_TXT_RSA_WITH_AES_128_SHA256
 "AES128-SHA256"

	)

669 
	#TLS1_TXT_RSA_WITH_AES_256_SHA256
 "AES256-SHA256"

	)

670 
	#TLS1_TXT_DH_DSS_WITH_AES_128_SHA256
 "DH-DSS-AES128-SHA256"

	)

671 
	#TLS1_TXT_DH_RSA_WITH_AES_128_SHA256
 "DH-RSA-AES128-SHA256"

	)

672 
	#TLS1_TXT_DHE_DSS_WITH_AES_128_SHA256
 "DHE-DSS-AES128-SHA256"

	)

673 
	#TLS1_TXT_DHE_RSA_WITH_AES_128_SHA256
 "DHE-RSA-AES128-SHA256"

	)

674 
	#TLS1_TXT_DH_DSS_WITH_AES_256_SHA256
 "DH-DSS-AES256-SHA256"

	)

675 
	#TLS1_TXT_DH_RSA_WITH_AES_256_SHA256
 "DH-RSA-AES256-SHA256"

	)

676 
	#TLS1_TXT_DHE_DSS_WITH_AES_256_SHA256
 "DHE-DSS-AES256-SHA256"

	)

677 
	#TLS1_TXT_DHE_RSA_WITH_AES_256_SHA256
 "DHE-RSA-AES256-SHA256"

	)

678 
	#TLS1_TXT_ADH_WITH_AES_128_SHA256
 "ADH-AES128-SHA256"

	)

679 
	#TLS1_TXT_ADH_WITH_AES_256_SHA256
 "ADH-AES256-SHA256"

	)

682 
	#TLS1_TXT_RSA_WITH_AES_128_GCM_SHA256
 "AES128-GCM-SHA256"

	)

683 
	#TLS1_TXT_RSA_WITH_AES_256_GCM_SHA384
 "AES256-GCM-SHA384"

	)

684 
	#TLS1_TXT_DHE_RSA_WITH_AES_128_GCM_SHA256
 "DHE-RSA-AES128-GCM-SHA256"

	)

685 
	#TLS1_TXT_DHE_RSA_WITH_AES_256_GCM_SHA384
 "DHE-RSA-AES256-GCM-SHA384"

	)

686 
	#TLS1_TXT_DH_RSA_WITH_AES_128_GCM_SHA256
 "DH-RSA-AES128-GCM-SHA256"

	)

687 
	#TLS1_TXT_DH_RSA_WITH_AES_256_GCM_SHA384
 "DH-RSA-AES256-GCM-SHA384"

	)

688 
	#TLS1_TXT_DHE_DSS_WITH_AES_128_GCM_SHA256
 "DHE-DSS-AES128-GCM-SHA256"

	)

689 
	#TLS1_TXT_DHE_DSS_WITH_AES_256_GCM_SHA384
 "DHE-DSS-AES256-GCM-SHA384"

	)

690 
	#TLS1_TXT_DH_DSS_WITH_AES_128_GCM_SHA256
 "DH-DSS-AES128-GCM-SHA256"

	)

691 
	#TLS1_TXT_DH_DSS_WITH_AES_256_GCM_SHA384
 "DH-DSS-AES256-GCM-SHA384"

	)

692 
	#TLS1_TXT_ADH_WITH_AES_128_GCM_SHA256
 "ADH-AES128-GCM-SHA256"

	)

693 
	#TLS1_TXT_ADH_WITH_AES_256_GCM_SHA384
 "ADH-AES256-GCM-SHA384"

	)

697 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_128_SHA256
 "ECDHE-ECDSA-AES128-SHA256"

	)

698 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_256_SHA384
 "ECDHE-ECDSA-AES256-SHA384"

	)

699 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_128_SHA256
 "ECDH-ECDSA-AES128-SHA256"

	)

700 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_256_SHA384
 "ECDH-ECDSA-AES256-SHA384"

	)

701 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_128_SHA256
 "ECDHE-RSA-AES128-SHA256"

	)

702 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_256_SHA384
 "ECDHE-RSA-AES256-SHA384"

	)

703 
	#TLS1_TXT_ECDH_RSA_WITH_AES_128_SHA256
 "ECDH-RSA-AES128-SHA256"

	)

704 
	#TLS1_TXT_ECDH_RSA_WITH_AES_256_SHA384
 "ECDH-RSA-AES256-SHA384"

	)

707 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
 "ECDHE-ECDSA-AES128-GCM-SHA256"

	)

708 
	#TLS1_TXT_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
 "ECDHE-ECDSA-AES256-GCM-SHA384"

	)

709 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_128_GCM_SHA256
 "ECDH-ECDSA-AES128-GCM-SHA256"

	)

710 
	#TLS1_TXT_ECDH_ECDSA_WITH_AES_256_GCM_SHA384
 "ECDH-ECDSA-AES256-GCM-SHA384"

	)

711 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_128_GCM_SHA256
 "ECDHE-RSA-AES128-GCM-SHA256"

	)

712 
	#TLS1_TXT_ECDHE_RSA_WITH_AES_256_GCM_SHA384
 "ECDHE-RSA-AES256-GCM-SHA384"

	)

713 
	#TLS1_TXT_ECDH_RSA_WITH_AES_128_GCM_SHA256
 "ECDH-RSA-AES128-GCM-SHA256"

	)

714 
	#TLS1_TXT_ECDH_RSA_WITH_AES_256_GCM_SHA384
 "ECDH-RSA-AES256-GCM-SHA384"

	)

716 
	#TLS_CT_RSA_SIGN
 1

	)

717 
	#TLS_CT_DSS_SIGN
 2

	)

718 
	#TLS_CT_RSA_FIXED_DH
 3

	)

719 
	#TLS_CT_DSS_FIXED_DH
 4

	)

720 
	#TLS_CT_ECDSA_SIGN
 64

	)

721 
	#TLS_CT_RSA_FIXED_ECDH
 65

	)

722 
	#TLS_CT_ECDSA_FIXED_ECDH
 66

	)

723 
	#TLS_CT_GOST94_SIGN
 21

	)

724 
	#TLS_CT_GOST01_SIGN
 22

	)

729 
	#TLS_CT_NUMBER
 9

	)

731 
	#TLS1_FINISH_MAC_LENGTH
 12

	)

733 
	#TLS_MD_MAX_CONST_SIZE
 20

	)

734 
	#TLS_MD_CLIENT_FINISH_CONST
 "ş›Á fšished"

	)

735 
	#TLS_MD_CLIENT_FINISH_CONST_SIZE
 15

	)

736 
	#TLS_MD_SERVER_FINISH_CONST
 "£rv” fšished"

	)

737 
	#TLS_MD_SERVER_FINISH_CONST_SIZE
 15

	)

738 
	#TLS_MD_SERVER_WRITE_KEY_CONST
 "£rv” wr™key"

	)

739 
	#TLS_MD_SERVER_WRITE_KEY_CONST_SIZE
 16

	)

740 
	#TLS_MD_KEY_EXPANSION_CONST
 "keyƒx·nsiÚ"

	)

741 
	#TLS_MD_KEY_EXPANSION_CONST_SIZE
 13

	)

742 
	#TLS_MD_CLIENT_WRITE_KEY_CONST
 "ş›Á wr™key"

	)

743 
	#TLS_MD_CLIENT_WRITE_KEY_CONST_SIZE
 16

	)

744 
	#TLS_MD_SERVER_WRITE_KEY_CONST
 "£rv” wr™key"

	)

745 
	#TLS_MD_SERVER_WRITE_KEY_CONST_SIZE
 16

	)

746 
	#TLS_MD_IV_BLOCK_CONST
 "IV block"

	)

747 
	#TLS_MD_IV_BLOCK_CONST_SIZE
 8

	)

748 
	#TLS_MD_MASTER_SECRET_CONST
 "ma¡” seü‘"

	)

749 
	#TLS_MD_MASTER_SECRET_CONST_SIZE
 13

	)

751 #ifdeà
CHARSET_EBCDIC


752 #undeà
TLS_MD_CLIENT_FINISH_CONST


756 
	#TLS_MD_CLIENT_FINISH_CONST
 "\x63\x6c\x69\x65\x6e\x74\x20\x66\x69\x6e\x69\x73\x68\x65\x64"

	)

758 #undeà
TLS_MD_SERVER_FINISH_CONST


762 
	#TLS_MD_SERVER_FINISH_CONST
 "\x73\x65\x72\x76\x65\x72\x20\x66\x69\x6e\x69\x73\x68\x65\x64"

	)

764 #undeà
TLS_MD_SERVER_WRITE_KEY_CONST


768 
	#TLS_MD_SERVER_WRITE_KEY_CONST
 "\x73\x65\x72\x76\x65\x72\x20\x77\x72\x69\x74\x65\x20\x6b\x65\x79"

	)

770 #undeà
TLS_MD_KEY_EXPANSION_CONST


774 
	#TLS_MD_KEY_EXPANSION_CONST
 "\x6b\x65\x79\x20\x65\x78\x70\x61\x6e\x73\x69\x6f\x6e"

	)

776 #undeà
TLS_MD_CLIENT_WRITE_KEY_CONST


780 
	#TLS_MD_CLIENT_WRITE_KEY_CONST
 "\x63\x6c\x69\x65\x6e\x74\x20\x77\x72\x69\x74\x65\x20\x6b\x65\x79"

	)

782 #undeà
TLS_MD_SERVER_WRITE_KEY_CONST


786 
	#TLS_MD_SERVER_WRITE_KEY_CONST
 "\x73\x65\x72\x76\x65\x72\x20\x77\x72\x69\x74\x65\x20\x6b\x65\x79"

	)

788 #undeà
TLS_MD_IV_BLOCK_CONST


792 
	#TLS_MD_IV_BLOCK_CONST
 "\x49\x56\x20\x62\x6c\x6f\x63\x6b"

	)

794 #undeà
TLS_MD_MASTER_SECRET_CONST


798 
	#TLS_MD_MASTER_SECRET_CONST
 "\x6d\x61\x73\x74\x65\x72\x20\x73\x65\x63\x72\x65\x74"

	)

802 
	ss_£ssiÚ_tick‘_ext_¡
 {

803 
Ëngth
;

804 *
d©a
;

807 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/x509.h

64 #iâdeà
HEADER_X509_H


65 
	#HEADER_X509_H


	)

67 
	~<İ’s¦/e_os2.h
>

68 
	~<İ’s¦/symhacks.h
>

69 #iâdeà
OPENSSL_NO_BUFFER


70 
	~<İ’s¦/bufãr.h
>

72 #iâdeà
OPENSSL_NO_EVP


73 
	~<İ’s¦/evp.h
>

75 #iâdeà
OPENSSL_NO_BIO


76 
	~<İ’s¦/bio.h
>

78 
	~<İ’s¦/¡ack.h
>

79 
	~<İ’s¦/a¢1.h
>

80 
	~<İ’s¦/§ã¡ack.h
>

82 #iâdeà
OPENSSL_NO_EC


83 
	~<İ’s¦/ec.h
>

86 #iâdeà
OPENSSL_NO_ECDSA


87 
	~<İ’s¦/ecd§.h
>

90 #iâdeà
OPENSSL_NO_ECDH


91 
	~<İ’s¦/ecdh.h
>

94 #iâdeà
OPENSSL_NO_DEPRECATED


95 #iâdeà
OPENSSL_NO_RSA


96 
	~<İ’s¦/r§.h
>

98 #iâdeà
OPENSSL_NO_DSA


99 
	~<İ’s¦/d§.h
>

101 #iâdeà
OPENSSL_NO_DH


102 
	~<İ’s¦/dh.h
>

106 #iâdeà
OPENSSL_NO_SHA


107 
	~<İ’s¦/sha.h
>

109 
	~<İ’s¦/os¦_typ.h
>

111 #ifdeà 
__ılu¥lus


115 #ifdeà
OPENSSL_SYS_WIN32


117 #undeà
X509_NAME


118 #undeà
X509_CERT_PAIR


119 #undeà
X509_EXTENSIONS


122 
	#X509_FILETYPE_PEM
 1

	)

123 
	#X509_FILETYPE_ASN1
 2

	)

124 
	#X509_FILETYPE_DEFAULT
 3

	)

126 
	#X509v3_KU_DIGITAL_SIGNATURE
 0x0080

	)

127 
	#X509v3_KU_NON_REPUDIATION
 0x0040

	)

128 
	#X509v3_KU_KEY_ENCIPHERMENT
 0x0020

	)

129 
	#X509v3_KU_DATA_ENCIPHERMENT
 0x0010

	)

130 
	#X509v3_KU_KEY_AGREEMENT
 0x0008

	)

131 
	#X509v3_KU_KEY_CERT_SIGN
 0x0004

	)

132 
	#X509v3_KU_CRL_SIGN
 0x0002

	)

133 
	#X509v3_KU_ENCIPHER_ONLY
 0x0001

	)

134 
	#X509v3_KU_DECIPHER_ONLY
 0x8000

	)

135 
	#X509v3_KU_UNDEF
 0xffff

	)

137 
	sX509_objeùs_¡
 {

138 
nid
;

139 (*
a2i
) ();

140 (*
i2a
) ();

141 } 
	tX509_OBJECTS
;

143 
	sX509_®gÜ_¡
 {

144 
ASN1_OBJECT
 *
®gÜ™hm
;

145 
ASN1_TYPE
 *
·¿m‘”
;

148 
DECLARE_ASN1_SET_OF
(
X509_ALGOR
)

150 
STACK_OF
(
	tX509_ALGOR
è
	tX509_ALGORS
;

152 
	sX509_v®_¡
 {

153 
ASN1_TIME
 *
nÙBefÜe
;

154 
ASN1_TIME
 *
nÙAá”
;

155 } 
	tX509_VAL
;

157 
	sX509_pubkey_¡
 {

158 
X509_ALGOR
 *
®gÜ
;

159 
ASN1_BIT_STRING
 *
public_key
;

160 
EVP_PKEY
 *
pkey
;

163 
	sX509_sig_¡
 {

164 
X509_ALGOR
 *
®gÜ
;

165 
ASN1_OCTET_STRING
 *
dige¡
;

166 } 
	tX509_SIG
;

168 
	sX509_Çme_’Œy_¡
 {

169 
ASN1_OBJECT
 *
objeù
;

170 
ASN1_STRING
 *
v®ue
;

171 
£t
;

172 
size
;

173 } 
	tX509_NAME_ENTRY
;

175 
DECLARE_STACK_OF
(
X509_NAME_ENTRY
)

176 
DECLARE_ASN1_SET_OF
(
X509_NAME_ENTRY
)

179 
	sX509_Çme_¡
 {

180 
STACK_OF
(
X509_NAME_ENTRY
è*
’Œ›s
;

181 
modif›d
;

182 #iâdeà
OPENSSL_NO_BUFFER


183 
BUF_MEM
 *
by‹s
;

185 *
by‹s
;

188 *
ÿnÚ_’c
;

189 
ÿnÚ_’ş’
;

192 
DECLARE_STACK_OF
(
X509_NAME
)

194 
	#X509_EX_V_NETSCAPE_HACK
 0x8000

	)

195 
	#X509_EX_V_INIT
 0x0001

	)

196 
	sX509_ex‹nsiÚ_¡
 {

197 
ASN1_OBJECT
 *
objeù
;

198 
ASN1_BOOLEAN
 
ü™iÿl
;

199 
ASN1_OCTET_STRING
 *
v®ue
;

200 } 
	tX509_EXTENSION
;

202 
STACK_OF
(
	tX509_EXTENSION
è
	tX509_EXTENSIONS
;

204 
DECLARE_STACK_OF
(
X509_EXTENSION
)

205 
DECLARE_ASN1_SET_OF
(
X509_EXTENSION
)

208 
	sx509_©Œibu‹s_¡
 {

209 
ASN1_OBJECT
 *
objeù
;

210 
sšgË
;

213 *
±r
;

216  
STACK_OF
(
ASN1_TYPE
è*
£t
;

219  
ASN1_TYPE
 *
sšgË
;

220 } 
v®ue
;

221 } 
	tX509_ATTRIBUTE
;

223 
DECLARE_STACK_OF
(
X509_ATTRIBUTE
)

224 
DECLARE_ASN1_SET_OF
(
X509_ATTRIBUTE
)

226 
	sX509_»q_šfo_¡
 {

227 
ASN1_ENCODING
 
’c
;

228 
ASN1_INTEGER
 *
v”siÚ
;

229 
X509_NAME
 *
subjeù
;

230 
X509_PUBKEY
 *
pubkey
;

232 
STACK_OF
(
X509_ATTRIBUTE
è*
©Œibu‹s
;

233 } 
	tX509_REQ_INFO
;

235 
	sX509_»q_¡
 {

236 
X509_REQ_INFO
 *
»q_šfo
;

237 
X509_ALGOR
 *
sig_®g
;

238 
ASN1_BIT_STRING
 *
sigÇtu»
;

239 
»ã»nûs
;

240 } 
	tX509_REQ
;

242 
	sx509_cšf_¡
 {

243 
ASN1_INTEGER
 *
v”siÚ
;

244 
ASN1_INTEGER
 *
£rŸlNumb”
;

245 
X509_ALGOR
 *
sigÇtu»
;

246 
X509_NAME
 *
issu”
;

247 
X509_VAL
 *
v®id™y
;

248 
X509_NAME
 *
subjeù
;

249 
X509_PUBKEY
 *
key
;

250 
ASN1_BIT_STRING
 *
issu”UID
;

251 
ASN1_BIT_STRING
 *
subjeùUID
;

252 
STACK_OF
(
X509_EXTENSION
è*
ex‹nsiÚs
;

253 
ASN1_ENCODING
 
’c
;

254 } 
	tX509_CINF
;

262 
	sx509_û¹_aux_¡
 {

263 
STACK_OF
(
ASN1_OBJECT
è*
Œu¡
;

264 
STACK_OF
(
ASN1_OBJECT
è*
»jeù
;

265 
ASN1_UTF8STRING
 *
®Ÿs
;

266 
ASN1_OCTET_STRING
 *
keyid
;

267 
STACK_OF
(
X509_ALGOR
è*
Ùh”
;

268 } 
	tX509_CERT_AUX
;

270 
	sx509_¡
 {

271 
X509_CINF
 *
û¹_šfo
;

272 
X509_ALGOR
 *
sig_®g
;

273 
ASN1_BIT_STRING
 *
sigÇtu»
;

274 
v®id
;

275 
»ã»nûs
;

276 *
Çme
;

277 
CRYPTO_EX_DATA
 
ex_d©a
;

279 
ex_·thËn
;

280 
ex_pı©hËn
;

281 
ex_æags
;

282 
ex_ku§ge
;

283 
ex_xku§ge
;

284 
ex_nsû¹
;

285 
ASN1_OCTET_STRING
 *
skid
;

286 
AUTHORITY_KEYID
 *
akid
;

287 
X509_POLICY_CACHE
 *
pŞicy_ÿche
;

288 
STACK_OF
(
DIST_POINT
è*
üldp
;

289 
STACK_OF
(
GENERAL_NAME
è*
®Šame
;

290 
NAME_CONSTRAINTS
 *
nc
;

291 #iâdeà
OPENSSL_NO_RFC3779


292 
STACK_OF
(
IPAdd»ssFamy
è*
rfc3779_addr
;

293 
ASId’tif›rs_¡
 *
rfc3779_asid
;

295 #iâdeà
OPENSSL_NO_SHA


296 
sha1_hash
[
SHA_DIGEST_LENGTH
];

298 
X509_CERT_AUX
 *
aux
;

301 
DECLARE_STACK_OF
(
X509
)

302 
DECLARE_ASN1_SET_OF
(
X509
)

306 
	sx509_Œu¡_¡
 {

307 
Œu¡
;

308 
æags
;

309 (*
check_Œu¡
è(
x509_Œu¡_¡
 *, 
X509
 *, );

310 *
Çme
;

311 
¬g1
;

312 *
¬g2
;

313 } 
	tX509_TRUST
;

315 
DECLARE_STACK_OF
(
X509_TRUST
)

317 
	sx509_û¹_·œ_¡
 {

318 
X509
 *
fÜw¬d
;

319 
X509
 *
»v”£
;

320 } 
	tX509_CERT_PAIR
;

324 
	#X509_TRUST_DEFAULT
 -1

	)

326 
	#X509_TRUST_COMPAT
 1

	)

327 
	#X509_TRUST_SSL_CLIENT
 2

	)

328 
	#X509_TRUST_SSL_SERVER
 3

	)

329 
	#X509_TRUST_EMAIL
 4

	)

330 
	#X509_TRUST_OBJECT_SIGN
 5

	)

331 
	#X509_TRUST_OCSP_SIGN
 6

	)

332 
	#X509_TRUST_OCSP_REQUEST
 7

	)

333 
	#X509_TRUST_TSA
 8

	)

336 
	#X509_TRUST_MIN
 1

	)

337 
	#X509_TRUST_MAX
 8

	)

340 
	#X509_TRUST_DYNAMIC
 1

	)

341 
	#X509_TRUST_DYNAMIC_NAME
 2

	)

345 
	#X509_TRUST_TRUSTED
 1

	)

346 
	#X509_TRUST_REJECTED
 2

	)

347 
	#X509_TRUST_UNTRUSTED
 3

	)

351 
	#X509_FLAG_COMPAT
 0

	)

352 
	#X509_FLAG_NO_HEADER
 1L

	)

353 
	#X509_FLAG_NO_VERSION
 (1L << 1)

	)

354 
	#X509_FLAG_NO_SERIAL
 (1L << 2)

	)

355 
	#X509_FLAG_NO_SIGNAME
 (1L << 3)

	)

356 
	#X509_FLAG_NO_ISSUER
 (1L << 4)

	)

357 
	#X509_FLAG_NO_VALIDITY
 (1L << 5)

	)

358 
	#X509_FLAG_NO_SUBJECT
 (1L << 6)

	)

359 
	#X509_FLAG_NO_PUBKEY
 (1L << 7)

	)

360 
	#X509_FLAG_NO_EXTENSIONS
 (1L << 8)

	)

361 
	#X509_FLAG_NO_SIGDUMP
 (1L << 9)

	)

362 
	#X509_FLAG_NO_AUX
 (1L << 10)

	)

363 
	#X509_FLAG_NO_ATTRIBUTES
 (1L << 11)

	)

364 
	#X509_FLAG_NO_IDS
 (1L << 12)

	)

370 
	#XN_FLAG_SEP_MASK
 (0xà<< 16)

	)

372 
	#XN_FLAG_COMPAT
 0

	)

374 
	#XN_FLAG_SEP_COMMA_PLUS
 (1 << 16)

	)

375 
	#XN_FLAG_SEP_CPLUS_SPC
 (2 << 16)

	)

376 
	#XN_FLAG_SEP_SPLUS_SPC
 (3 << 16)

	)

377 
	#XN_FLAG_SEP_MULTILINE
 (4 << 16)

	)

379 
	#XN_FLAG_DN_REV
 (1 << 20)

	)

383 
	#XN_FLAG_FN_MASK
 (0x3 << 21)

	)

385 
	#XN_FLAG_FN_SN
 0

	)

386 
	#XN_FLAG_FN_LN
 (1 << 21)

	)

387 
	#XN_FLAG_FN_OID
 (2 << 21)

	)

388 
	#XN_FLAG_FN_NONE
 (3 << 21)

	)

390 
	#XN_FLAG_SPC_EQ
 (1 << 23)

	)

397 
	#XN_FLAG_DUMP_UNKNOWN_FIELDS
 (1 << 24)

	)

399 
	#XN_FLAG_FN_ALIGN
 (1 << 25)

	)

404 
	#XN_FLAG_RFC2253
 (
ASN1_STRFLGS_RFC2253
 | \

405 
XN_FLAG_SEP_COMMA_PLUS
 | \

406 
XN_FLAG_DN_REV
 | \

407 
XN_FLAG_FN_SN
 | \

408 
XN_FLAG_DUMP_UNKNOWN_FIELDS
)

	)

412 
	#XN_FLAG_ONELINE
 (
ASN1_STRFLGS_RFC2253
 | \

413 
ASN1_STRFLGS_ESC_QUOTE
 | \

414 
XN_FLAG_SEP_CPLUS_SPC
 | \

415 
XN_FLAG_SPC_EQ
 | \

416 
XN_FLAG_FN_SN
)

	)

420 
	#XN_FLAG_MULTILINE
 (
ASN1_STRFLGS_ESC_CTRL
 | \

421 
ASN1_STRFLGS_ESC_MSB
 | \

422 
XN_FLAG_SEP_MULTILINE
 | \

423 
XN_FLAG_SPC_EQ
 | \

424 
XN_FLAG_FN_LN
 | \

425 
XN_FLAG_FN_ALIGN
)

	)

427 
	sx509_»voked_¡
 {

428 
ASN1_INTEGER
 *
£rŸlNumb”
;

429 
ASN1_TIME
 *
»voÿtiÚD©e
;

430 
STACK_OF
(
X509_EXTENSION
è *
ex‹nsiÚs
;

432 
STACK_OF
(
GENERAL_NAME
è*
issu”
;

434 
»asÚ
;

435 
£qu’û
;

438 
DECLARE_STACK_OF
(
X509_REVOKED
)

439 
DECLARE_ASN1_SET_OF
(
X509_REVOKED
)

441 
	sX509_ül_šfo_¡
 {

442 
ASN1_INTEGER
 *
v”siÚ
;

443 
X509_ALGOR
 *
sig_®g
;

444 
X509_NAME
 *
issu”
;

445 
ASN1_TIME
 *
Ï¡Upd©e
;

446 
ASN1_TIME
 *
ÃxtUpd©e
;

447 
STACK_OF
(
X509_REVOKED
è*
»voked
;

448 
STACK_OF
(
X509_EXTENSION
è *
ex‹nsiÚs
;

449 
ASN1_ENCODING
 
’c
;

450 } 
	tX509_CRL_INFO
;

452 
	sX509_ül_¡
 {

454 
X509_CRL_INFO
 *
ül
;

455 
X509_ALGOR
 *
sig_®g
;

456 
ASN1_BIT_STRING
 *
sigÇtu»
;

457 
»ã»nûs
;

458 
æags
;

460 
AUTHORITY_KEYID
 *
akid
;

461 
ISSUING_DIST_POINT
 *
idp
;

463 
idp_æags
;

464 
idp_»asÚs
;

466 
ASN1_INTEGER
 *
ül_numb”
;

467 
ASN1_INTEGER
 *
ba£_ül_numb”
;

468 #iâdeà
OPENSSL_NO_SHA


469 
sha1_hash
[
SHA_DIGEST_LENGTH
];

471 
STACK_OF
(
GENERAL_NAMES
è*
issu”s
;

472 cÚ¡ 
X509_CRL_METHOD
 *
m‘h
;

473 *
m‘h_d©a
;

476 
DECLARE_STACK_OF
(
X509_CRL
)

477 
DECLARE_ASN1_SET_OF
(
X509_CRL
)

479 
	s´iv©e_key_¡
 {

480 
v”siÚ
;

482 
X509_ALGOR
 *
’c_®gÜ
;

483 
ASN1_OCTET_STRING
 *
’c_pkey
;

485 
EVP_PKEY
 *
dec_pkey
;

487 
key_Ëngth
;

488 *
key_d©a
;

489 
key_ä“
;

491 
EVP_CIPHER_INFO
 
ch”
;

492 
»ã»nûs
;

493 } 
	tX509_PKEY
;

495 #iâdeà
OPENSSL_NO_EVP


496 
	sX509_šfo_¡
 {

497 
X509
 *
x509
;

498 
X509_CRL
 *
ül
;

499 
X509_PKEY
 *
x_pkey
;

500 
EVP_CIPHER_INFO
 
’c_ch”
;

501 
’c_Ën
;

502 *
’c_d©a
;

503 
»ã»nûs
;

504 } 
	tX509_INFO
;

506 
DECLARE_STACK_OF
(
X509_INFO
)

514 
	sN‘sÿ³_¥kac_¡
 {

515 
X509_PUBKEY
 *
pubkey
;

516 
ASN1_IA5STRING
 *
ch®Ënge
;

517 } 
	tNETSCAPE_SPKAC
;

519 
	sN‘sÿ³_¥ki_¡
 {

520 
NETSCAPE_SPKAC
 *
¥kac
;

521 
X509_ALGOR
 *
sig_®gÜ
;

522 
ASN1_BIT_STRING
 *
sigÇtu»
;

523 } 
	tNETSCAPE_SPKI
;

526 
	sN‘sÿ³_û¹ifiÿ‹_£qu’û
 {

527 
ASN1_OBJECT
 *
ty³
;

528 
STACK_OF
(
X509
è*
û¹s
;

529 } 
	tNETSCAPE_CERT_SEQUENCE
;

540 
	sPBEPARAM_¡
 {

541 
ASN1_OCTET_STRING
 *
§É
;

542 
ASN1_INTEGER
 *
™”
;

543 } 
	tPBEPARAM
;

547 
	sPBE2PARAM_¡
 {

548 
X509_ALGOR
 *
keyfunc
;

549 
X509_ALGOR
 *
’üy±iÚ
;

550 } 
	tPBE2PARAM
;

552 
	sPBKDF2PARAM_¡
 {

554 
ASN1_TYPE
 *
§É
;

555 
ASN1_INTEGER
 *
™”
;

556 
ASN1_INTEGER
 *
keyËngth
;

557 
X509_ALGOR
 *
´f
;

558 } 
	tPBKDF2PARAM
;

562 
	spkcs8_´iv_key_šfo_¡
 {

564 
brok’
;

565 
	#PKCS8_OK
 0

	)

566 
	#PKCS8_NO_OCTET
 1

	)

567 
	#PKCS8_EMBEDDED_PARAM
 2

	)

568 
	#PKCS8_NS_DB
 3

	)

569 
	#PKCS8_NEG_PRIVKEY
 4

	)

570 
ASN1_INTEGER
 *
v”siÚ
;

571 
X509_ALGOR
 *
pkey®g
;

573 
ASN1_TYPE
 *
pkey
;

574 
STACK_OF
(
X509_ATTRIBUTE
è*
©Œibu‹s
;

577 #ifdeà 
__ılu¥lus


581 
	~<İ’s¦/x509_vfy.h
>

582 
	~<İ’s¦/pkcs7.h
>

584 #ifdeà 
__ılu¥lus


588 
	#X509_EXT_PACK_UNKNOWN
 1

	)

589 
	#X509_EXT_PACK_STRING
 2

	)

591 
	#X509_g‘_v”siÚ
(
x
è
	`ASN1_INTEGER_g‘
((x)->
û¹_šfo
->
v”siÚ
)

	)

593 
	#X509_g‘_nÙBefÜe
(
x
è((x)->
û¹_šfo
->
v®id™y
->
nÙBefÜe
)

	)

594 
	#X509_g‘_nÙAá”
(
x
è((x)->
û¹_šfo
->
v®id™y
->
nÙAá”
)

	)

595 
	#X509_exŒaù_key
(
x
è
	`X509_g‘_pubkey
(x)

	)

596 
	#X509_REQ_g‘_v”siÚ
(
x
è
	`ASN1_INTEGER_g‘
((x)->
»q_šfo
->
v”siÚ
)

	)

597 
	#X509_REQ_g‘_subjeù_Çme
(
x
è((x)->
»q_šfo
->
subjeù
)

	)

598 
	#X509_REQ_exŒaù_key
(
a
è
	`X509_REQ_g‘_pubkey
×)

	)

599 
	#X509_Çme_cmp
(
a
,
b
è
	`X509_NAME_cmp
(×),(b))

	)

600 
	#X509_g‘_sigÇtu»_ty³
(
x
è
	`EVP_PKEY_ty³
(
	`OBJ_obj2nid
((x)->
sig_®g
->
®gÜ™hm
))

	)

602 
	#X509_CRL_g‘_v”siÚ
(
x
è
	`ASN1_INTEGER_g‘
((x)->
ül
->
v”siÚ
)

	)

603 
	#X509_CRL_g‘_Ï¡Upd©e
(
x
è((x)->
ül
->
Ï¡Upd©e
)

	)

604 
	#X509_CRL_g‘_ÃxtUpd©e
(
x
è((x)->
ül
->
ÃxtUpd©e
)

	)

605 
	#X509_CRL_g‘_issu”
(
x
è((x)->
ül
->
issu”
)

	)

606 
	#X509_CRL_g‘_REVOKED
(
x
è((x)->
ül
->
»voked
)

	)

608 
X509_CRL_£t_deçuÉ_m‘hod
(cÚ¡ 
X509_CRL_METHOD
 *
m‘h
);

609 
X509_CRL_METHOD
 *
X509_CRL_METHOD_Ãw
((*
ül_š™
è(
X509_CRL
 *
ül
),

610 (*
ül_ä“
è(
X509_CRL
 *
ül
),

611 (*
ül_lookup
è(
X509_CRL
 *
ül
,

612 
X509_REVOKED
 **
»t
,

613 
ASN1_INTEGER
 *
£r
,

614 
X509_NAME
 *
issu”
),

615 (*
ül_v”ify
è(
X509_CRL
 *
ül
,

616 
EVP_PKEY
 *
pk
));

617 
X509_CRL_METHOD_ä“
(
X509_CRL_METHOD
 *
m
);

619 
X509_CRL_£t_m‘h_d©a
(
X509_CRL
 *
ül
, *
d©
);

620 *
X509_CRL_g‘_m‘h_d©a
(
X509_CRL
 *
ül
);

626 
	#X509_g‘_X509_PUBKEY
(
x
è((x)->
û¹_šfo
->
key
)

	)

628 cÚ¡ *
X509_v”ify_û¹_”rÜ_¡ršg
(
n
);

630 #iâdeà
OPENSSL_NO_EVP


631 
X509_v”ify
(
X509
 *
a
, 
EVP_PKEY
 *
r
);

633 
X509_REQ_v”ify
(
X509_REQ
 *
a
, 
EVP_PKEY
 *
r
);

634 
X509_CRL_v”ify
(
X509_CRL
 *
a
, 
EVP_PKEY
 *
r
);

635 
NETSCAPE_SPKI_v”ify
(
NETSCAPE_SPKI
 *
a
, 
EVP_PKEY
 *
r
);

637 
NETSCAPE_SPKI
 *
NETSCAPE_SPKI_b64_decode
(cÚ¡ *
¡r
, 
Ën
);

638 *
NETSCAPE_SPKI_b64_’code
(
NETSCAPE_SPKI
 *
x
);

639 
EVP_PKEY
 *
NETSCAPE_SPKI_g‘_pubkey
(
NETSCAPE_SPKI
 *
x
);

640 
NETSCAPE_SPKI_£t_pubkey
(
NETSCAPE_SPKI
 *
x
, 
EVP_PKEY
 *
pkey
);

642 
NETSCAPE_SPKI_´št
(
BIO
 *
out
, 
NETSCAPE_SPKI
 *
¥ki
);

644 
X509_sigÇtu»_dump
(
BIO
 *
bp
, cÚ¡ 
ASN1_STRING
 *
sig
, 
šd’t
);

645 
X509_sigÇtu»_´št
(
BIO
 *
bp
, 
X509_ALGOR
 *
®g
, 
ASN1_STRING
 *
sig
);

647 
X509_sign
(
X509
 *
x
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
md
);

648 
X509_sign_ùx
(
X509
 *
x
, 
EVP_MD_CTX
 *
ùx
);

649 
X509_h‰p_nbio
(
OCSP_REQ_CTX
 *
rùx
, 
X509
 **
pû¹
);

650 
X509_REQ_sign
(
X509_REQ
 *
x
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
md
);

651 
X509_REQ_sign_ùx
(
X509_REQ
 *
x
, 
EVP_MD_CTX
 *
ùx
);

652 
X509_CRL_sign
(
X509_CRL
 *
x
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
md
);

653 
X509_CRL_sign_ùx
(
X509_CRL
 *
x
, 
EVP_MD_CTX
 *
ùx
);

654 
X509_CRL_h‰p_nbio
(
OCSP_REQ_CTX
 *
rùx
, 
X509_CRL
 **
pül
);

655 
NETSCAPE_SPKI_sign
(
NETSCAPE_SPKI
 *
x
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
md
);

657 
X509_pubkey_dige¡
(cÚ¡ 
X509
 *
d©a
, cÚ¡ 
EVP_MD
 *
ty³
,

658 *
md
, *
Ën
);

659 
X509_dige¡
(cÚ¡ 
X509
 *
d©a
, cÚ¡ 
EVP_MD
 *
ty³
,

660 *
md
, *
Ën
);

661 
X509_CRL_dige¡
(cÚ¡ 
X509_CRL
 *
d©a
, cÚ¡ 
EVP_MD
 *
ty³
,

662 *
md
, *
Ën
);

663 
X509_REQ_dige¡
(cÚ¡ 
X509_REQ
 *
d©a
, cÚ¡ 
EVP_MD
 *
ty³
,

664 *
md
, *
Ën
);

665 
X509_NAME_dige¡
(cÚ¡ 
X509_NAME
 *
d©a
, cÚ¡ 
EVP_MD
 *
ty³
,

666 *
md
, *
Ën
);

669 #iâdeà
OPENSSL_NO_FP_API


670 
X509
 *
d2i_X509_å
(
FILE
 *
å
, X509 **
x509
);

671 
i2d_X509_å
(
FILE
 *
å
, 
X509
 *
x509
);

672 
X509_CRL
 *
d2i_X509_CRL_å
(
FILE
 *
å
, X509_CRL **
ül
);

673 
i2d_X509_CRL_å
(
FILE
 *
å
, 
X509_CRL
 *
ül
);

674 
X509_REQ
 *
d2i_X509_REQ_å
(
FILE
 *
å
, X509_REQ **
»q
);

675 
i2d_X509_REQ_å
(
FILE
 *
å
, 
X509_REQ
 *
»q
);

676 #iâdeà
OPENSSL_NO_RSA


677 
RSA
 *
d2i_RSAPriv©eKey_å
(
FILE
 *
å
, RSA **
r§
);

678 
i2d_RSAPriv©eKey_å
(
FILE
 *
å
, 
RSA
 *
r§
);

679 
RSA
 *
d2i_RSAPublicKey_å
(
FILE
 *
å
, RSA **
r§
);

680 
i2d_RSAPublicKey_å
(
FILE
 *
å
, 
RSA
 *
r§
);

681 
RSA
 *
d2i_RSA_PUBKEY_å
(
FILE
 *
å
, RSA **
r§
);

682 
i2d_RSA_PUBKEY_å
(
FILE
 *
å
, 
RSA
 *
r§
);

684 #iâdeà
OPENSSL_NO_DSA


685 
DSA
 *
d2i_DSA_PUBKEY_å
(
FILE
 *
å
, DSA **
d§
);

686 
i2d_DSA_PUBKEY_å
(
FILE
 *
å
, 
DSA
 *
d§
);

687 
DSA
 *
d2i_DSAPriv©eKey_å
(
FILE
 *
å
, DSA **
d§
);

688 
i2d_DSAPriv©eKey_å
(
FILE
 *
å
, 
DSA
 *
d§
);

690 #iâdeà
OPENSSL_NO_EC


691 
EC_KEY
 *
d2i_EC_PUBKEY_å
(
FILE
 *
å
, EC_KEY **
eckey
);

692 
i2d_EC_PUBKEY_å
(
FILE
 *
å
, 
EC_KEY
 *
eckey
);

693 
EC_KEY
 *
d2i_ECPriv©eKey_å
(
FILE
 *
å
, EC_KEY **
eckey
);

694 
i2d_ECPriv©eKey_å
(
FILE
 *
å
, 
EC_KEY
 *
eckey
);

696 
X509_SIG
 *
d2i_PKCS8_å
(
FILE
 *
å
, X509_SIG **
p8
);

697 
i2d_PKCS8_å
(
FILE
 *
å
, 
X509_SIG
 *
p8
);

698 
PKCS8_PRIV_KEY_INFO
 *
d2i_PKCS8_PRIV_KEY_INFO_å
(
FILE
 *
å
,

699 
PKCS8_PRIV_KEY_INFO
 **
p8šf
);

700 
i2d_PKCS8_PRIV_KEY_INFO_å
(
FILE
 *
å
, 
PKCS8_PRIV_KEY_INFO
 *
p8šf
);

701 
i2d_PKCS8Priv©eKeyInfo_å
(
FILE
 *
å
, 
EVP_PKEY
 *
key
);

702 
i2d_Priv©eKey_å
(
FILE
 *
å
, 
EVP_PKEY
 *
pkey
);

703 
EVP_PKEY
 *
d2i_Priv©eKey_å
(
FILE
 *
å
, EVP_PKEY **
a
);

704 
i2d_PUBKEY_å
(
FILE
 *
å
, 
EVP_PKEY
 *
pkey
);

705 
EVP_PKEY
 *
d2i_PUBKEY_å
(
FILE
 *
å
, EVP_PKEY **
a
);

708 #iâdeà
OPENSSL_NO_BIO


709 
X509
 *
d2i_X509_bio
(
BIO
 *
bp
, X509 **
x509
);

710 
i2d_X509_bio
(
BIO
 *
bp
, 
X509
 *
x509
);

711 
X509_CRL
 *
d2i_X509_CRL_bio
(
BIO
 *
bp
, X509_CRL **
ül
);

712 
i2d_X509_CRL_bio
(
BIO
 *
bp
, 
X509_CRL
 *
ül
);

713 
X509_REQ
 *
d2i_X509_REQ_bio
(
BIO
 *
bp
, X509_REQ **
»q
);

714 
i2d_X509_REQ_bio
(
BIO
 *
bp
, 
X509_REQ
 *
»q
);

715 #iâdeà
OPENSSL_NO_RSA


716 
RSA
 *
d2i_RSAPriv©eKey_bio
(
BIO
 *
bp
, RSA **
r§
);

717 
i2d_RSAPriv©eKey_bio
(
BIO
 *
bp
, 
RSA
 *
r§
);

718 
RSA
 *
d2i_RSAPublicKey_bio
(
BIO
 *
bp
, RSA **
r§
);

719 
i2d_RSAPublicKey_bio
(
BIO
 *
bp
, 
RSA
 *
r§
);

720 
RSA
 *
d2i_RSA_PUBKEY_bio
(
BIO
 *
bp
, RSA **
r§
);

721 
i2d_RSA_PUBKEY_bio
(
BIO
 *
bp
, 
RSA
 *
r§
);

723 #iâdeà
OPENSSL_NO_DSA


724 
DSA
 *
d2i_DSA_PUBKEY_bio
(
BIO
 *
bp
, DSA **
d§
);

725 
i2d_DSA_PUBKEY_bio
(
BIO
 *
bp
, 
DSA
 *
d§
);

726 
DSA
 *
d2i_DSAPriv©eKey_bio
(
BIO
 *
bp
, DSA **
d§
);

727 
i2d_DSAPriv©eKey_bio
(
BIO
 *
bp
, 
DSA
 *
d§
);

729 #iâdeà
OPENSSL_NO_EC


730 
EC_KEY
 *
d2i_EC_PUBKEY_bio
(
BIO
 *
bp
, EC_KEY **
eckey
);

731 
i2d_EC_PUBKEY_bio
(
BIO
 *
bp
, 
EC_KEY
 *
eckey
);

732 
EC_KEY
 *
d2i_ECPriv©eKey_bio
(
BIO
 *
bp
, EC_KEY **
eckey
);

733 
i2d_ECPriv©eKey_bio
(
BIO
 *
bp
, 
EC_KEY
 *
eckey
);

735 
X509_SIG
 *
d2i_PKCS8_bio
(
BIO
 *
bp
, X509_SIG **
p8
);

736 
i2d_PKCS8_bio
(
BIO
 *
bp
, 
X509_SIG
 *
p8
);

737 
PKCS8_PRIV_KEY_INFO
 *
d2i_PKCS8_PRIV_KEY_INFO_bio
(
BIO
 *
bp
,

738 
PKCS8_PRIV_KEY_INFO
 **
p8šf
);

739 
i2d_PKCS8_PRIV_KEY_INFO_bio
(
BIO
 *
bp
, 
PKCS8_PRIV_KEY_INFO
 *
p8šf
);

740 
i2d_PKCS8Priv©eKeyInfo_bio
(
BIO
 *
bp
, 
EVP_PKEY
 *
key
);

741 
i2d_Priv©eKey_bio
(
BIO
 *
bp
, 
EVP_PKEY
 *
pkey
);

742 
EVP_PKEY
 *
d2i_Priv©eKey_bio
(
BIO
 *
bp
, EVP_PKEY **
a
);

743 
i2d_PUBKEY_bio
(
BIO
 *
bp
, 
EVP_PKEY
 *
pkey
);

744 
EVP_PKEY
 *
d2i_PUBKEY_bio
(
BIO
 *
bp
, EVP_PKEY **
a
);

747 
X509
 *
X509_dup
(X509 *
x509
);

748 
X509_ATTRIBUTE
 *
X509_ATTRIBUTE_dup
(X509_ATTRIBUTE *
xa
);

749 
X509_EXTENSION
 *
X509_EXTENSION_dup
(X509_EXTENSION *
ex
);

750 
X509_CRL
 *
X509_CRL_dup
(X509_CRL *
ül
);

751 
X509_REVOKED
 *
X509_REVOKED_dup
(X509_REVOKED *
»v
);

752 
X509_REQ
 *
X509_REQ_dup
(X509_REQ *
»q
);

753 
X509_ALGOR
 *
X509_ALGOR_dup
(X509_ALGOR *
xn
);

754 
X509_ALGOR_£t0
(
X509_ALGOR
 *
®g
, 
ASN1_OBJECT
 *
aobj
, 
±y³
,

755 *
pv®
);

756 
X509_ALGOR_g‘0
(
ASN1_OBJECT
 **
·obj
, *
µty³
, **
µv®
,

757 
X509_ALGOR
 *
®gÜ
);

758 
X509_ALGOR_£t_md
(
X509_ALGOR
 *
®g
, cÚ¡ 
EVP_MD
 *
md
);

759 
X509_ALGOR_cmp
(cÚ¡ 
X509_ALGOR
 *
a
, cÚ¡ X509_ALGOR *
b
);

761 
X509_NAME
 *
X509_NAME_dup
(X509_NAME *
xn
);

762 
X509_NAME_ENTRY
 *
X509_NAME_ENTRY_dup
(X509_NAME_ENTRY *
Ã
);

764 
X509_cmp_time
(cÚ¡ 
ASN1_TIME
 *
s
, 
time_t
 *
t
);

765 
X509_cmp_cu¼’t_time
(cÚ¡ 
ASN1_TIME
 *
s
);

766 
ASN1_TIME
 *
X509_time_adj
(ASN1_TIME *
s
, 
adj
, 
time_t
 *
t
);

767 
ASN1_TIME
 *
X509_time_adj_ex
(ASN1_TIME *
s
,

768 
off£t_day
, 
off£t_£c
, 
time_t
 *
t
);

769 
ASN1_TIME
 *
X509_gmtime_adj
(ASN1_TIME *
s
, 
adj
);

771 cÚ¡ *
X509_g‘_deçuÉ_û¹_¬—
();

772 cÚ¡ *
X509_g‘_deçuÉ_û¹_dœ
();

773 cÚ¡ *
X509_g‘_deçuÉ_û¹_fe
();

774 cÚ¡ *
X509_g‘_deçuÉ_û¹_dœ_’v
();

775 cÚ¡ *
X509_g‘_deçuÉ_û¹_fe_’v
();

776 cÚ¡ *
X509_g‘_deçuÉ_´iv©e_dœ
();

778 
X509_REQ
 *
X509_to_X509_REQ
(
X509
 *
x
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
md
);

779 
X509
 *
X509_REQ_to_X509
(
X509_REQ
 *
r
, 
days
, 
EVP_PKEY
 *
pkey
);

781 
DECLARE_ASN1_FUNCTIONS
(
X509_ALGOR
)

782 
DECLARE_ASN1_ENCODE_FUNCTIONS
(
X509_ALGORS
, X509_ALGORS, X509_ALGORS)

783 
DECLARE_ASN1_FUNCTIONS
(
X509_VAL
)

785 
DECLARE_ASN1_FUNCTIONS
(
X509_PUBKEY
)

787 
X509_PUBKEY_£t
(
X509_PUBKEY
 **
x
, 
EVP_PKEY
 *
pkey
);

788 
EVP_PKEY
 *
X509_PUBKEY_g‘
(
X509_PUBKEY
 *
key
);

789 
X509_g‘_pubkey_·¿m‘”s
(
EVP_PKEY
 *
pkey
, 
STACK_OF
(
X509
è*
chaš
);

790 
i2d_PUBKEY
(
EVP_PKEY
 *
a
, **
µ
);

791 
EVP_PKEY
 *
d2i_PUBKEY
(EVP_PKEY **
a
, cÚ¡ **
µ
, 
Ëngth
);

792 #iâdeà
OPENSSL_NO_RSA


793 
i2d_RSA_PUBKEY
(
RSA
 *
a
, **
µ
);

794 
RSA
 *
d2i_RSA_PUBKEY
(RSA **
a
, cÚ¡ **
µ
, 
Ëngth
);

796 #iâdeà
OPENSSL_NO_DSA


797 
i2d_DSA_PUBKEY
(
DSA
 *
a
, **
µ
);

798 
DSA
 *
d2i_DSA_PUBKEY
(DSA **
a
, cÚ¡ **
µ
, 
Ëngth
);

800 #iâdeà
OPENSSL_NO_EC


801 
i2d_EC_PUBKEY
(
EC_KEY
 *
a
, **
µ
);

802 
EC_KEY
 *
d2i_EC_PUBKEY
(EC_KEY **
a
, cÚ¡ **
µ
, 
Ëngth
);

805 
DECLARE_ASN1_FUNCTIONS
(
X509_SIG
)

806 
DECLARE_ASN1_FUNCTIONS
(
X509_REQ_INFO
)

807 
DECLARE_ASN1_FUNCTIONS
(
X509_REQ
)

809 
DECLARE_ASN1_FUNCTIONS
(
X509_ATTRIBUTE
)

810 
X509_ATTRIBUTE
 *
X509_ATTRIBUTE_ü—‹
(
nid
, 
©¹y³
, *
v®ue
);

812 
DECLARE_ASN1_FUNCTIONS
(
X509_EXTENSION
)

813 
DECLARE_ASN1_ENCODE_FUNCTIONS
(
X509_EXTENSIONS
, X509_EXTENSIONS, X509_EXTENSIONS)

815 
DECLARE_ASN1_FUNCTIONS
(
X509_NAME_ENTRY
)

817 
DECLARE_ASN1_FUNCTIONS
(
X509_NAME
)

819 
X509_NAME_£t
(
X509_NAME
 **
xn
, X509_NAME *
Çme
);

821 
DECLARE_ASN1_FUNCTIONS
(
X509_CINF
)

823 
DECLARE_ASN1_FUNCTIONS
(
X509
)

824 
DECLARE_ASN1_FUNCTIONS
(
X509_CERT_AUX
)

826 
DECLARE_ASN1_FUNCTIONS
(
X509_CERT_PAIR
)

828 
X509_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

829 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

830 
X509_£t_ex_d©a
(
X509
 *
r
, 
idx
, *
¬g
);

831 *
X509_g‘_ex_d©a
(
X509
 *
r
, 
idx
);

832 
i2d_X509_AUX
(
X509
 *
a
, **
µ
);

833 
X509
 *
d2i_X509_AUX
(X509 **
a
, cÚ¡ **
µ
, 
Ëngth
);

835 
i2d_»_X509_tbs
(
X509
 *
x
, **
µ
);

837 
X509_g‘0_sigÇtu»
(
ASN1_BIT_STRING
 **
psig
, 
X509_ALGOR
 **
·lg
,

838 cÚ¡ 
X509
 *
x
);

839 
X509_g‘_sigÇtu»_nid
(cÚ¡ 
X509
 *
x
);

841 
X509_®Ÿs_£t1
(
X509
 *
x
, *
Çme
, 
Ën
);

842 
X509_keyid_£t1
(
X509
 *
x
, *
id
, 
Ën
);

843 *
X509_®Ÿs_g‘0
(
X509
 *
x
, *
Ën
);

844 *
X509_keyid_g‘0
(
X509
 *
x
, *
Ën
);

845 (*
X509_TRUST_£t_deçuÉ
((*
Œu¡
è(, 
X509
 *, ))) (, X509 *,

847 
X509_TRUST_£t
(*
t
, 
Œu¡
);

848 
X509_add1_Œu¡_objeù
(
X509
 *
x
, 
ASN1_OBJECT
 *
obj
);

849 
X509_add1_»jeù_objeù
(
X509
 *
x
, 
ASN1_OBJECT
 *
obj
);

850 
X509_Œu¡_ş—r
(
X509
 *
x
);

851 
X509_»jeù_ş—r
(
X509
 *
x
);

853 
DECLARE_ASN1_FUNCTIONS
(
X509_REVOKED
)

854 
DECLARE_ASN1_FUNCTIONS
(
X509_CRL_INFO
)

855 
DECLARE_ASN1_FUNCTIONS
(
X509_CRL
)

857 
X509_CRL_add0_»voked
(
X509_CRL
 *
ül
, 
X509_REVOKED
 *
»v
);

858 
X509_CRL_g‘0_by_£rŸl
(
X509_CRL
 *
ül
,

859 
X509_REVOKED
 **
»t
, 
ASN1_INTEGER
 *
£rŸl
);

860 
X509_CRL_g‘0_by_û¹
(
X509_CRL
 *
ül
, 
X509_REVOKED
 **
»t
, 
X509
 *
x
);

862 
X509_PKEY
 *
X509_PKEY_Ãw
();

863 
X509_PKEY_ä“
(
X509_PKEY
 *
a
);

864 
i2d_X509_PKEY
(
X509_PKEY
 *
a
, **
µ
);

865 
X509_PKEY
 *
d2i_X509_PKEY
(X509_PKEY **
a
, cÚ¡ **
µ
,

866 
Ëngth
);

868 
DECLARE_ASN1_FUNCTIONS
(
NETSCAPE_SPKI
)

869 
DECLARE_ASN1_FUNCTIONS
(
NETSCAPE_SPKAC
)

870 
DECLARE_ASN1_FUNCTIONS
(
NETSCAPE_CERT_SEQUENCE
)

872 #iâdeà
OPENSSL_NO_EVP


873 
X509_INFO
 *
X509_INFO_Ãw
();

874 
X509_INFO_ä“
(
X509_INFO
 *
a
);

875 *
X509_NAME_Ú–še
(
X509_NAME
 *
a
, *
buf
, 
size
);

877 
ASN1_v”ify
(
i2d_of_void
 *
i2d
, 
X509_ALGOR
 *
®gÜ1
,

878 
ASN1_BIT_STRING
 *
sigÇtu»
, *
d©a
, 
EVP_PKEY
 *
pkey
);

880 
ASN1_dige¡
(
i2d_of_void
 *
i2d
, cÚ¡ 
EVP_MD
 *
ty³
, *
d©a
,

881 *
md
, *
Ën
);

883 
ASN1_sign
(
i2d_of_void
 *
i2d
, 
X509_ALGOR
 *
®gÜ1
,

884 
X509_ALGOR
 *
®gÜ2
, 
ASN1_BIT_STRING
 *
sigÇtu»
,

885 *
d©a
, 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
ty³
);

887 
ASN1_™em_dige¡
(cÚ¡ 
ASN1_ITEM
 *
™
, cÚ¡ 
EVP_MD
 *
ty³
, *
d©a
,

888 *
md
, *
Ën
);

890 
ASN1_™em_v”ify
(cÚ¡ 
ASN1_ITEM
 *
™
, 
X509_ALGOR
 *
®gÜ1
,

891 
ASN1_BIT_STRING
 *
sigÇtu»
, *
d©a
, 
EVP_PKEY
 *
pkey
);

893 
ASN1_™em_sign
(cÚ¡ 
ASN1_ITEM
 *
™
, 
X509_ALGOR
 *
®gÜ1
,

894 
X509_ALGOR
 *
®gÜ2
, 
ASN1_BIT_STRING
 *
sigÇtu»
, *
d©a
,

895 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
ty³
);

896 
ASN1_™em_sign_ùx
(cÚ¡ 
ASN1_ITEM
 *
™
, 
X509_ALGOR
 *
®gÜ1
,

897 
X509_ALGOR
 *
®gÜ2
, 
ASN1_BIT_STRING
 *
sigÇtu»
,

898 *
a¢
, 
EVP_MD_CTX
 *
ùx
);

901 
X509_£t_v”siÚ
(
X509
 *
x
, 
v”siÚ
);

902 
X509_£t_£rŸlNumb”
(
X509
 *
x
, 
ASN1_INTEGER
 *
£rŸl
);

903 
ASN1_INTEGER
 *
X509_g‘_£rŸlNumb”
(
X509
 *
x
);

904 
X509_£t_issu”_Çme
(
X509
 *
x
, 
X509_NAME
 *
Çme
);

905 
X509_NAME
 *
X509_g‘_issu”_Çme
(
X509
 *
a
);

906 
X509_£t_subjeù_Çme
(
X509
 *
x
, 
X509_NAME
 *
Çme
);

907 
X509_NAME
 *
X509_g‘_subjeù_Çme
(
X509
 *
a
);

908 
X509_£t_nÙBefÜe
(
X509
 *
x
, cÚ¡ 
ASN1_TIME
 *
tm
);

909 
X509_£t_nÙAá”
(
X509
 *
x
, cÚ¡ 
ASN1_TIME
 *
tm
);

910 
X509_£t_pubkey
(
X509
 *
x
, 
EVP_PKEY
 *
pkey
);

911 
EVP_PKEY
 *
X509_g‘_pubkey
(
X509
 *
x
);

912 
ASN1_BIT_STRING
 *
X509_g‘0_pubkey_b™¡r
(cÚ¡ 
X509
 *
x
);

913 
X509_û¹ifiÿ‹_ty³
(
X509
 *
x
, 
EVP_PKEY
 *
pubkey
 );

915 
X509_REQ_£t_v”siÚ
(
X509_REQ
 *
x
, 
v”siÚ
);

916 
X509_REQ_£t_subjeù_Çme
(
X509_REQ
 *
»q
, 
X509_NAME
 *
Çme
);

917 
X509_REQ_£t_pubkey
(
X509_REQ
 *
x
, 
EVP_PKEY
 *
pkey
);

918 
EVP_PKEY
 *
X509_REQ_g‘_pubkey
(
X509_REQ
 *
»q
);

919 
X509_REQ_ex‹nsiÚ_nid
(
nid
);

920 *
X509_REQ_g‘_ex‹nsiÚ_nids
();

921 
X509_REQ_£t_ex‹nsiÚ_nids
(*
nids
);

922 
STACK_OF
(
X509_EXTENSION
è*
X509_REQ_g‘_ex‹nsiÚs
(
X509_REQ
 *
»q
);

923 
X509_REQ_add_ex‹nsiÚs_nid
(
X509_REQ
 *
»q
, 
STACK_OF
(
X509_EXTENSION
è*
exts
,

924 
nid
);

925 
X509_REQ_add_ex‹nsiÚs
(
X509_REQ
 *
»q
, 
STACK_OF
(
X509_EXTENSION
è*
exts
);

926 
X509_REQ_g‘_©Œ_couÁ
(cÚ¡ 
X509_REQ
 *
»q
);

927 
X509_REQ_g‘_©Œ_by_NID
(cÚ¡ 
X509_REQ
 *
»q
, 
nid
, 
Ï¡pos
);

928 
X509_REQ_g‘_©Œ_by_OBJ
(cÚ¡ 
X509_REQ
 *
»q
, 
ASN1_OBJECT
 *
obj
,

929 
Ï¡pos
);

930 
X509_ATTRIBUTE
 *
X509_REQ_g‘_©Œ
(cÚ¡ 
X509_REQ
 *
»q
, 
loc
);

931 
X509_ATTRIBUTE
 *
X509_REQ_d–‘e_©Œ
(
X509_REQ
 *
»q
, 
loc
);

932 
X509_REQ_add1_©Œ
(
X509_REQ
 *
»q
, 
X509_ATTRIBUTE
 *
©Œ
);

933 
X509_REQ_add1_©Œ_by_OBJ
(
X509_REQ
 *
»q
,

934 cÚ¡ 
ASN1_OBJECT
 *
obj
, 
ty³
,

935 cÚ¡ *
by‹s
, 
Ën
);

936 
X509_REQ_add1_©Œ_by_NID
(
X509_REQ
 *
»q
,

937 
nid
, 
ty³
,

938 cÚ¡ *
by‹s
, 
Ën
);

939 
X509_REQ_add1_©Œ_by_txt
(
X509_REQ
 *
»q
,

940 cÚ¡ *
©ŒÇme
, 
ty³
,

941 cÚ¡ *
by‹s
, 
Ën
);

943 
X509_CRL_£t_v”siÚ
(
X509_CRL
 *
x
, 
v”siÚ
);

944 
X509_CRL_£t_issu”_Çme
(
X509_CRL
 *
x
, 
X509_NAME
 *
Çme
);

945 
X509_CRL_£t_Ï¡Upd©e
(
X509_CRL
 *
x
, cÚ¡ 
ASN1_TIME
 *
tm
);

946 
X509_CRL_£t_ÃxtUpd©e
(
X509_CRL
 *
x
, cÚ¡ 
ASN1_TIME
 *
tm
);

947 
X509_CRL_sÜt
(
X509_CRL
 *
ül
);

949 
X509_REVOKED_£t_£rŸlNumb”
(
X509_REVOKED
 *
x
, 
ASN1_INTEGER
 *
£rŸl
);

950 
X509_REVOKED_£t_»voÿtiÚD©e
(
X509_REVOKED
 *
r
, 
ASN1_TIME
 *
tm
);

952 
X509_CRL
 *
X509_CRL_diff
(X509_CRL *
ba£
, X509_CRL *
Ãw”
,

953 
EVP_PKEY
 *
skey
, cÚ¡ 
EVP_MD
 *
md
, 
æags
);

955 
X509_REQ_check_´iv©e_key
(
X509_REQ
 *
x509
, 
EVP_PKEY
 *
pkey
);

957 
X509_check_´iv©e_key
(
X509
 *
x509
, 
EVP_PKEY
 *
pkey
);

958 
X509_chaš_check_su™eb
(*
³¼Ü_d•th
,

959 
X509
 *
x
, 
STACK_OF
(X509è*
chaš
,

960 
æags
);

961 
X509_CRL_check_su™eb
(
X509_CRL
 *
ül
, 
EVP_PKEY
 *
pk
, 
æags
);

962 
STACK_OF
(
X509
è*
X509_chaš_up_»f
(STACK_OF(X509è*
chaš
);

964 
X509_issu”_ªd_£rŸl_cmp
(cÚ¡ 
X509
 *
a
, cÚ¡ X509 *
b
);

965 
X509_issu”_ªd_£rŸl_hash
(
X509
 *
a
);

967 
X509_issu”_Çme_cmp
(cÚ¡ 
X509
 *
a
, cÚ¡ X509 *
b
);

968 
X509_issu”_Çme_hash
(
X509
 *
a
);

970 
X509_subjeù_Çme_cmp
(cÚ¡ 
X509
 *
a
, cÚ¡ X509 *
b
);

971 
X509_subjeù_Çme_hash
(
X509
 *
x
);

973 #iâdeà
OPENSSL_NO_MD5


974 
X509_issu”_Çme_hash_Şd
(
X509
 *
a
);

975 
X509_subjeù_Çme_hash_Şd
(
X509
 *
x
);

978 
X509_cmp
(cÚ¡ 
X509
 *
a
, cÚ¡ X509 *
b
);

979 
X509_NAME_cmp
(cÚ¡ 
X509_NAME
 *
a
, cÚ¡ X509_NAME *
b
);

980 
X509_NAME_hash
(
X509_NAME
 *
x
);

981 
X509_NAME_hash_Şd
(
X509_NAME
 *
x
);

983 
X509_CRL_cmp
(cÚ¡ 
X509_CRL
 *
a
, cÚ¡ X509_CRL *
b
);

984 
X509_CRL_m©ch
(cÚ¡ 
X509_CRL
 *
a
, cÚ¡ X509_CRL *
b
);

985 #iâdeà
OPENSSL_NO_FP_API


986 
X509_´št_ex_å
(
FILE
 *
bp
, 
X509
 *
x
, 
nmæag
,

987 
cæag
);

988 
X509_´št_å
(
FILE
 *
bp
, 
X509
 *
x
);

989 
X509_CRL_´št_å
(
FILE
 *
bp
, 
X509_CRL
 *
x
);

990 
X509_REQ_´št_å
(
FILE
 *
bp
, 
X509_REQ
 *
»q
);

991 
X509_NAME_´št_ex_å
(
FILE
 *
å
, 
X509_NAME
 *
nm
, 
šd’t
,

992 
æags
);

995 #iâdeà
OPENSSL_NO_BIO


996 
X509_NAME_´št
(
BIO
 *
bp
, 
X509_NAME
 *
Çme
, 
oba£
);

997 
X509_NAME_´št_ex
(
BIO
 *
out
, 
X509_NAME
 *
nm
, 
šd’t
,

998 
æags
);

999 
X509_´št_ex
(
BIO
 *
bp
, 
X509
 *
x
, 
nmæag
,

1000 
cæag
);

1001 
X509_´št
(
BIO
 *
bp
, 
X509
 *
x
);

1002 
X509_oc¥id_´št
(
BIO
 *
bp
, 
X509
 *
x
);

1003 
X509_CERT_AUX_´št
(
BIO
 *
bp
, 
X509_CERT_AUX
 *
x
, 
šd’t
);

1004 
X509_CRL_´št
(
BIO
 *
bp
, 
X509_CRL
 *
x
);

1005 
X509_REQ_´št_ex
(
BIO
 *
bp
, 
X509_REQ
 *
x
, 
nmæag
,

1006 
cæag
);

1007 
X509_REQ_´št
(
BIO
 *
bp
, 
X509_REQ
 *
»q
);

1010 
X509_NAME_’Œy_couÁ
(
X509_NAME
 *
Çme
);

1011 
X509_NAME_g‘_‹xt_by_NID
(
X509_NAME
 *
Çme
, 
nid
, *
buf
, 
Ën
);

1012 
X509_NAME_g‘_‹xt_by_OBJ
(
X509_NAME
 *
Çme
, 
ASN1_OBJECT
 *
obj
,

1013 *
buf
, 
Ën
);

1019 
X509_NAME_g‘_šdex_by_NID
(
X509_NAME
 *
Çme
, 
nid
, 
Ï¡pos
);

1020 
X509_NAME_g‘_šdex_by_OBJ
(
X509_NAME
 *
Çme
, 
ASN1_OBJECT
 *
obj
,

1021 
Ï¡pos
);

1022 
X509_NAME_ENTRY
 *
X509_NAME_g‘_’Œy
(
X509_NAME
 *
Çme
, 
loc
);

1023 
X509_NAME_ENTRY
 *
X509_NAME_d–‘e_’Œy
(
X509_NAME
 *
Çme
, 
loc
);

1024 
X509_NAME_add_’Œy
(
X509_NAME
 *
Çme
, 
X509_NAME_ENTRY
 *
Ã
,

1025 
loc
, 
£t
);

1026 
X509_NAME_add_’Œy_by_OBJ
(
X509_NAME
 *
Çme
, 
ASN1_OBJECT
 *
obj
, 
ty³
,

1027 *
by‹s
, 
Ën
, 
loc
,

1028 
£t
);

1029 
X509_NAME_add_’Œy_by_NID
(
X509_NAME
 *
Çme
, 
nid
, 
ty³
,

1030 *
by‹s
, 
Ën
, 
loc
,

1031 
£t
);

1032 
X509_NAME_ENTRY
 *
X509_NAME_ENTRY_ü—‹_by_txt
(X509_NAME_ENTRY **
Ã
,

1033 cÚ¡ *
f›ld
, 
ty³
,

1034 cÚ¡ *
by‹s
,

1035 
Ën
);

1036 
X509_NAME_ENTRY
 *
X509_NAME_ENTRY_ü—‹_by_NID
(X509_NAME_ENTRY **
Ã
, 
nid
,

1037 
ty³
, *
by‹s
,

1038 
Ën
);

1039 
X509_NAME_add_’Œy_by_txt
(
X509_NAME
 *
Çme
, cÚ¡ *
f›ld
, 
ty³
,

1040 cÚ¡ *
by‹s
, 
Ën
, 
loc
,

1041 
£t
);

1042 
X509_NAME_ENTRY
 *
X509_NAME_ENTRY_ü—‹_by_OBJ
(X509_NAME_ENTRY **
Ã
,

1043 
ASN1_OBJECT
 *
obj
, 
ty³
,

1044 cÚ¡ *
by‹s
,

1045 
Ën
);

1046 
X509_NAME_ENTRY_£t_objeù
(
X509_NAME_ENTRY
 *
Ã
, 
ASN1_OBJECT
 *
obj
);

1047 
X509_NAME_ENTRY_£t_d©a
(
X509_NAME_ENTRY
 *
Ã
, 
ty³
,

1048 cÚ¡ *
by‹s
, 
Ën
);

1049 
ASN1_OBJECT
 *
X509_NAME_ENTRY_g‘_objeù
(
X509_NAME_ENTRY
 *
Ã
);

1050 
ASN1_STRING
 *
X509_NAME_ENTRY_g‘_d©a
(
X509_NAME_ENTRY
 *
Ã
);

1052 
X509v3_g‘_ext_couÁ
(cÚ¡ 
STACK_OF
(
X509_EXTENSION
è*
x
);

1053 
X509v3_g‘_ext_by_NID
(cÚ¡ 
STACK_OF
(
X509_EXTENSION
è*
x
,

1054 
nid
, 
Ï¡pos
);

1055 
X509v3_g‘_ext_by_OBJ
(cÚ¡ 
STACK_OF
(
X509_EXTENSION
è*
x
,

1056 
ASN1_OBJECT
 *
obj
, 
Ï¡pos
);

1057 
X509v3_g‘_ext_by_ü™iÿl
(cÚ¡ 
STACK_OF
(
X509_EXTENSION
è*
x
,

1058 
ü™
, 
Ï¡pos
);

1059 
X509_EXTENSION
 *
X509v3_g‘_ext
(cÚ¡ 
STACK_OF
(X509_EXTENSIONè*
x
, 
loc
);

1060 
X509_EXTENSION
 *
X509v3_d–‘e_ext
(
STACK_OF
(X509_EXTENSIONè*
x
, 
loc
);

1061 
STACK_OF
(
X509_EXTENSION
è*
X509v3_add_ext
(STACK_OF(X509_EXTENSIONè**
x
,

1062 
X509_EXTENSION
 *
ex
, 
loc
);

1064 
X509_g‘_ext_couÁ
(
X509
 *
x
);

1065 
X509_g‘_ext_by_NID
(
X509
 *
x
, 
nid
, 
Ï¡pos
);

1066 
X509_g‘_ext_by_OBJ
(
X509
 *
x
, 
ASN1_OBJECT
 *
obj
, 
Ï¡pos
);

1067 
X509_g‘_ext_by_ü™iÿl
(
X509
 *
x
, 
ü™
, 
Ï¡pos
);

1068 
X509_EXTENSION
 *
X509_g‘_ext
(
X509
 *
x
, 
loc
);

1069 
X509_EXTENSION
 *
X509_d–‘e_ext
(
X509
 *
x
, 
loc
);

1070 
X509_add_ext
(
X509
 *
x
, 
X509_EXTENSION
 *
ex
, 
loc
);

1071 *
X509_g‘_ext_d2i
(
X509
 *
x
, 
nid
, *
ü™
, *
idx
);

1072 
X509_add1_ext_i2d
(
X509
 *
x
, 
nid
, *
v®ue
, 
ü™
,

1073 
æags
);

1075 
X509_CRL_g‘_ext_couÁ
(
X509_CRL
 *
x
);

1076 
X509_CRL_g‘_ext_by_NID
(
X509_CRL
 *
x
, 
nid
, 
Ï¡pos
);

1077 
X509_CRL_g‘_ext_by_OBJ
(
X509_CRL
 *
x
, 
ASN1_OBJECT
 *
obj
, 
Ï¡pos
);

1078 
X509_CRL_g‘_ext_by_ü™iÿl
(
X509_CRL
 *
x
, 
ü™
, 
Ï¡pos
);

1079 
X509_EXTENSION
 *
X509_CRL_g‘_ext
(
X509_CRL
 *
x
, 
loc
);

1080 
X509_EXTENSION
 *
X509_CRL_d–‘e_ext
(
X509_CRL
 *
x
, 
loc
);

1081 
X509_CRL_add_ext
(
X509_CRL
 *
x
, 
X509_EXTENSION
 *
ex
, 
loc
);

1082 *
X509_CRL_g‘_ext_d2i
(
X509_CRL
 *
x
, 
nid
, *
ü™
, *
idx
);

1083 
X509_CRL_add1_ext_i2d
(
X509_CRL
 *
x
, 
nid
, *
v®ue
, 
ü™
,

1084 
æags
);

1086 
X509_REVOKED_g‘_ext_couÁ
(
X509_REVOKED
 *
x
);

1087 
X509_REVOKED_g‘_ext_by_NID
(
X509_REVOKED
 *
x
, 
nid
, 
Ï¡pos
);

1088 
X509_REVOKED_g‘_ext_by_OBJ
(
X509_REVOKED
 *
x
, 
ASN1_OBJECT
 *
obj
,

1089 
Ï¡pos
);

1090 
X509_REVOKED_g‘_ext_by_ü™iÿl
(
X509_REVOKED
 *
x
, 
ü™
, 
Ï¡pos
);

1091 
X509_EXTENSION
 *
X509_REVOKED_g‘_ext
(
X509_REVOKED
 *
x
, 
loc
);

1092 
X509_EXTENSION
 *
X509_REVOKED_d–‘e_ext
(
X509_REVOKED
 *
x
, 
loc
);

1093 
X509_REVOKED_add_ext
(
X509_REVOKED
 *
x
, 
X509_EXTENSION
 *
ex
, 
loc
);

1094 *
X509_REVOKED_g‘_ext_d2i
(
X509_REVOKED
 *
x
, 
nid
, *
ü™
, *
idx
);

1095 
X509_REVOKED_add1_ext_i2d
(
X509_REVOKED
 *
x
, 
nid
, *
v®ue
, 
ü™
,

1096 
æags
);

1098 
X509_EXTENSION
 *
X509_EXTENSION_ü—‹_by_NID
(X509_EXTENSION **
ex
,

1099 
nid
, 
ü™
,

1100 
ASN1_OCTET_STRING
 *
d©a
);

1101 
X509_EXTENSION
 *
X509_EXTENSION_ü—‹_by_OBJ
(X509_EXTENSION **
ex
,

1102 
ASN1_OBJECT
 *
obj
, 
ü™
,

1103 
ASN1_OCTET_STRING
 *
d©a
);

1104 
X509_EXTENSION_£t_objeù
(
X509_EXTENSION
 *
ex
, 
ASN1_OBJECT
 *
obj
);

1105 
X509_EXTENSION_£t_ü™iÿl
(
X509_EXTENSION
 *
ex
, 
ü™
);

1106 
X509_EXTENSION_£t_d©a
(
X509_EXTENSION
 *
ex
, 
ASN1_OCTET_STRING
 *
d©a
);

1107 
ASN1_OBJECT
 *
X509_EXTENSION_g‘_objeù
(
X509_EXTENSION
 *
ex
);

1108 
ASN1_OCTET_STRING
 *
X509_EXTENSION_g‘_d©a
(
X509_EXTENSION
 *
Ã
);

1109 
X509_EXTENSION_g‘_ü™iÿl
(
X509_EXTENSION
 *
ex
);

1111 
X509©_g‘_©Œ_couÁ
(cÚ¡ 
STACK_OF
(
X509_ATTRIBUTE
è*
x
);

1112 
X509©_g‘_©Œ_by_NID
(cÚ¡ 
STACK_OF
(
X509_ATTRIBUTE
è*
x
, 
nid
,

1113 
Ï¡pos
);

1114 
X509©_g‘_©Œ_by_OBJ
(cÚ¡ 
STACK_OF
(
X509_ATTRIBUTE
è*
sk
,

1115 
ASN1_OBJECT
 *
obj
, 
Ï¡pos
);

1116 
X509_ATTRIBUTE
 *
X509©_g‘_©Œ
(cÚ¡ 
STACK_OF
(X509_ATTRIBUTEè*
x
, 
loc
);

1117 
X509_ATTRIBUTE
 *
X509©_d–‘e_©Œ
(
STACK_OF
(X509_ATTRIBUTEè*
x
, 
loc
);

1118 
STACK_OF
(
X509_ATTRIBUTE
è*
X509©_add1_©Œ
(STACK_OF(X509_ATTRIBUTEè**
x
,

1119 
X509_ATTRIBUTE
 *
©Œ
);

1120 
STACK_OF
(
X509_ATTRIBUTE
è*
X509©_add1_©Œ_by_OBJ
(STACK_OF(X509_ATTRIBUTE)

1121 **
x
, cÚ¡ 
ASN1_OBJECT
 *
obj
,

1122 
ty³
,

1123 cÚ¡ *
by‹s
,

1124 
Ën
);

1125 
STACK_OF
(
X509_ATTRIBUTE
è*
X509©_add1_©Œ_by_NID
(STACK_OF(X509_ATTRIBUTE)

1126 **
x
, 
nid
, 
ty³
,

1127 cÚ¡ *
by‹s
,

1128 
Ën
);

1129 
STACK_OF
(
X509_ATTRIBUTE
è*
X509©_add1_©Œ_by_txt
(STACK_OF(X509_ATTRIBUTE)

1130 **
x
, cÚ¡ *
©ŒÇme
,

1131 
ty³
,

1132 cÚ¡ *
by‹s
,

1133 
Ën
);

1134 *
X509©_g‘0_d©a_by_OBJ
(
STACK_OF
(
X509_ATTRIBUTE
è*
x
, 
ASN1_OBJECT
 *
obj
,

1135 
Ï¡pos
, 
ty³
);

1136 
X509_ATTRIBUTE
 *
X509_ATTRIBUTE_ü—‹_by_NID
(X509_ATTRIBUTE **
©Œ
, 
nid
,

1137 
©¹y³
, cÚ¡ *
d©a
,

1138 
Ën
);

1139 
X509_ATTRIBUTE
 *
X509_ATTRIBUTE_ü—‹_by_OBJ
(X509_ATTRIBUTE **
©Œ
,

1140 cÚ¡ 
ASN1_OBJECT
 *
obj
,

1141 
©¹y³
, cÚ¡ *
d©a
,

1142 
Ën
);

1143 
X509_ATTRIBUTE
 *
X509_ATTRIBUTE_ü—‹_by_txt
(X509_ATTRIBUTE **
©Œ
,

1144 cÚ¡ *
©ºame
, 
ty³
,

1145 cÚ¡ *
by‹s
,

1146 
Ën
);

1147 
X509_ATTRIBUTE_£t1_objeù
(
X509_ATTRIBUTE
 *
©Œ
, cÚ¡ 
ASN1_OBJECT
 *
obj
);

1148 
X509_ATTRIBUTE_£t1_d©a
(
X509_ATTRIBUTE
 *
©Œ
, 
©Œty³
,

1149 cÚ¡ *
d©a
, 
Ën
);

1150 *
X509_ATTRIBUTE_g‘0_d©a
(
X509_ATTRIBUTE
 *
©Œ
, 
idx
, 
©¹y³
,

1151 *
d©a
);

1152 
X509_ATTRIBUTE_couÁ
(
X509_ATTRIBUTE
 *
©Œ
);

1153 
ASN1_OBJECT
 *
X509_ATTRIBUTE_g‘0_objeù
(
X509_ATTRIBUTE
 *
©Œ
);

1154 
ASN1_TYPE
 *
X509_ATTRIBUTE_g‘0_ty³
(
X509_ATTRIBUTE
 *
©Œ
, 
idx
);

1156 
EVP_PKEY_g‘_©Œ_couÁ
(cÚ¡ 
EVP_PKEY
 *
key
);

1157 
EVP_PKEY_g‘_©Œ_by_NID
(cÚ¡ 
EVP_PKEY
 *
key
, 
nid
, 
Ï¡pos
);

1158 
EVP_PKEY_g‘_©Œ_by_OBJ
(cÚ¡ 
EVP_PKEY
 *
key
, 
ASN1_OBJECT
 *
obj
,

1159 
Ï¡pos
);

1160 
X509_ATTRIBUTE
 *
EVP_PKEY_g‘_©Œ
(cÚ¡ 
EVP_PKEY
 *
key
, 
loc
);

1161 
X509_ATTRIBUTE
 *
EVP_PKEY_d–‘e_©Œ
(
EVP_PKEY
 *
key
, 
loc
);

1162 
EVP_PKEY_add1_©Œ
(
EVP_PKEY
 *
key
, 
X509_ATTRIBUTE
 *
©Œ
);

1163 
EVP_PKEY_add1_©Œ_by_OBJ
(
EVP_PKEY
 *
key
,

1164 cÚ¡ 
ASN1_OBJECT
 *
obj
, 
ty³
,

1165 cÚ¡ *
by‹s
, 
Ën
);

1166 
EVP_PKEY_add1_©Œ_by_NID
(
EVP_PKEY
 *
key
,

1167 
nid
, 
ty³
,

1168 cÚ¡ *
by‹s
, 
Ën
);

1169 
EVP_PKEY_add1_©Œ_by_txt
(
EVP_PKEY
 *
key
,

1170 cÚ¡ *
©ŒÇme
, 
ty³
,

1171 cÚ¡ *
by‹s
, 
Ën
);

1173 
X509_v”ify_û¹
(
X509_STORE_CTX
 *
ùx
);

1176 
X509
 *
X509_fšd_by_issu”_ªd_£rŸl
(
STACK_OF
(X509è*
sk
, 
X509_NAME
 *
Çme
,

1177 
ASN1_INTEGER
 *
£rŸl
);

1178 
X509
 *
X509_fšd_by_subjeù
(
STACK_OF
(X509è*
sk
, 
X509_NAME
 *
Çme
);

1180 
DECLARE_ASN1_FUNCTIONS
(
PBEPARAM
)

1181 
DECLARE_ASN1_FUNCTIONS
(
PBE2PARAM
)

1182 
DECLARE_ASN1_FUNCTIONS
(
PBKDF2PARAM
)

1184 
PKCS5_pbe_£t0_®gÜ
(
X509_ALGOR
 *
®gÜ
, 
®g
, 
™”
,

1185 cÚ¡ *
§É
, 
§ÉËn
);

1187 
X509_ALGOR
 *
PKCS5_pbe_£t
(
®g
, 
™”
,

1188 cÚ¡ *
§É
, 
§ÉËn
);

1189 
X509_ALGOR
 *
PKCS5_pbe2_£t
(cÚ¡ 
EVP_CIPHER
 *
ch”
, 
™”
,

1190 *
§É
, 
§ÉËn
);

1191 
X509_ALGOR
 *
PKCS5_pbe2_£t_iv
(cÚ¡ 
EVP_CIPHER
 *
ch”
, 
™”
,

1192 *
§É
, 
§ÉËn
,

1193 *
aiv
, 
´f_nid
);

1195 
X509_ALGOR
 *
PKCS5_pbkdf2_£t
(
™”
, *
§É
, 
§ÉËn
,

1196 
´f_nid
, 
keyËn
);

1200 
DECLARE_ASN1_FUNCTIONS
(
PKCS8_PRIV_KEY_INFO
)

1202 
EVP_PKEY
 *
EVP_PKCS82PKEY
(
PKCS8_PRIV_KEY_INFO
 *
p8
);

1203 
PKCS8_PRIV_KEY_INFO
 *
EVP_PKEY2PKCS8
(
EVP_PKEY
 *
pkey
);

1204 
PKCS8_PRIV_KEY_INFO
 *
EVP_PKEY2PKCS8_brok’
(
EVP_PKEY
 *
pkey
, 
brok’
);

1205 
PKCS8_PRIV_KEY_INFO
 *
PKCS8_£t_brok’
(PKCS8_PRIV_KEY_INFO *
p8
, 
brok’
);

1207 
PKCS8_pkey_£t0
(
PKCS8_PRIV_KEY_INFO
 *
´iv
, 
ASN1_OBJECT
 *
aobj
,

1208 
v”siÚ
, 
±y³
, *
pv®
,

1209 *
³nc
, 
³nş’
);

1210 
PKCS8_pkey_g‘0
(
ASN1_OBJECT
 **
µk®g
,

1211 cÚ¡ **
pk
, *
µkËn
,

1212 
X509_ALGOR
 **
·
, 
PKCS8_PRIV_KEY_INFO
 *
p8
);

1214 
X509_PUBKEY_£t0_·¿m
(
X509_PUBKEY
 *
pub
, 
ASN1_OBJECT
 *
aobj
,

1215 
±y³
, *
pv®
,

1216 *
³nc
, 
³nş’
);

1217 
X509_PUBKEY_g‘0_·¿m
(
ASN1_OBJECT
 **
µk®g
,

1218 cÚ¡ **
pk
, *
µkËn
,

1219 
X509_ALGOR
 **
·
, 
X509_PUBKEY
 *
pub
);

1221 
X509_check_Œu¡
(
X509
 *
x
, 
id
, 
æags
);

1222 
X509_TRUST_g‘_couÁ
();

1223 
X509_TRUST
 *
X509_TRUST_g‘0
(
idx
);

1224 
X509_TRUST_g‘_by_id
(
id
);

1225 
X509_TRUST_add
(
id
, 
æags
, (*
ck
è(
X509_TRUST
 *, 
X509
 *, ),

1226 *
Çme
, 
¬g1
, *
¬g2
);

1227 
X509_TRUST_ş—nup
();

1228 
X509_TRUST_g‘_æags
(
X509_TRUST
 *
xp
);

1229 *
X509_TRUST_g‘0_Çme
(
X509_TRUST
 *
xp
);

1230 
X509_TRUST_g‘_Œu¡
(
X509_TRUST
 *
xp
);

1238 
ERR_lßd_X509_¡ršgs
();

1243 
	#X509_F_ADD_CERT_DIR
 100

	)

1244 
	#X509_F_BY_FILE_CTRL
 101

	)

1245 
	#X509_F_CHECK_NAME_CONSTRAINTS
 106

	)

1246 
	#X509_F_CHECK_POLICY
 145

	)

1247 
	#X509_F_DIR_CTRL
 102

	)

1248 
	#X509_F_GET_CERT_BY_SUBJECT
 103

	)

1249 
	#X509_F_NETSCAPE_SPKI_B64_DECODE
 129

	)

1250 
	#X509_F_NETSCAPE_SPKI_B64_ENCODE
 130

	)

1251 
	#X509_F_X509AT_ADD1_ATTR
 135

	)

1252 
	#X509_F_X509V3_ADD_EXT
 104

	)

1253 
	#X509_F_X509_ATTRIBUTE_CREATE_BY_NID
 136

	)

1254 
	#X509_F_X509_ATTRIBUTE_CREATE_BY_OBJ
 137

	)

1255 
	#X509_F_X509_ATTRIBUTE_CREATE_BY_TXT
 140

	)

1256 
	#X509_F_X509_ATTRIBUTE_GET0_DATA
 139

	)

1257 
	#X509_F_X509_ATTRIBUTE_SET1_DATA
 138

	)

1258 
	#X509_F_X509_CHECK_PRIVATE_KEY
 128

	)

1259 
	#X509_F_X509_CRL_DIFF
 105

	)

1260 
	#X509_F_X509_CRL_PRINT_FP
 147

	)

1261 
	#X509_F_X509_EXTENSION_CREATE_BY_NID
 108

	)

1262 
	#X509_F_X509_EXTENSION_CREATE_BY_OBJ
 109

	)

1263 
	#X509_F_X509_GET_PUBKEY_PARAMETERS
 110

	)

1264 
	#X509_F_X509_LOAD_CERT_CRL_FILE
 132

	)

1265 
	#X509_F_X509_LOAD_CERT_FILE
 111

	)

1266 
	#X509_F_X509_LOAD_CRL_FILE
 112

	)

1267 
	#X509_F_X509_NAME_ADD_ENTRY
 113

	)

1268 
	#X509_F_X509_NAME_ENTRY_CREATE_BY_NID
 114

	)

1269 
	#X509_F_X509_NAME_ENTRY_CREATE_BY_TXT
 131

	)

1270 
	#X509_F_X509_NAME_ENTRY_SET_OBJECT
 115

	)

1271 
	#X509_F_X509_NAME_ONELINE
 116

	)

1272 
	#X509_F_X509_NAME_PRINT
 117

	)

1273 
	#X509_F_X509_PRINT_EX_FP
 118

	)

1274 
	#X509_F_X509_PUBKEY_GET
 119

	)

1275 
	#X509_F_X509_PUBKEY_SET
 120

	)

1276 
	#X509_F_X509_REQ_CHECK_PRIVATE_KEY
 144

	)

1277 
	#X509_F_X509_REQ_PRINT_EX
 121

	)

1278 
	#X509_F_X509_REQ_PRINT_FP
 122

	)

1279 
	#X509_F_X509_REQ_TO_X509
 123

	)

1280 
	#X509_F_X509_STORE_ADD_CERT
 124

	)

1281 
	#X509_F_X509_STORE_ADD_CRL
 125

	)

1282 
	#X509_F_X509_STORE_CTX_GET1_ISSUER
 146

	)

1283 
	#X509_F_X509_STORE_CTX_INIT
 143

	)

1284 
	#X509_F_X509_STORE_CTX_NEW
 142

	)

1285 
	#X509_F_X509_STORE_CTX_PURPOSE_INHERIT
 134

	)

1286 
	#X509_F_X509_TO_X509_REQ
 126

	)

1287 
	#X509_F_X509_TRUST_ADD
 133

	)

1288 
	#X509_F_X509_TRUST_SET
 141

	)

1289 
	#X509_F_X509_VERIFY_CERT
 127

	)

1292 
	#X509_R_AKID_MISMATCH
 110

	)

1293 
	#X509_R_BAD_X509_FILETYPE
 100

	)

1294 
	#X509_R_BASE64_DECODE_ERROR
 118

	)

1295 
	#X509_R_CANT_CHECK_DH_KEY
 114

	)

1296 
	#X509_R_CERT_ALREADY_IN_HASH_TABLE
 101

	)

1297 
	#X509_R_CRL_ALREADY_DELTA
 127

	)

1298 
	#X509_R_CRL_VERIFY_FAILURE
 131

	)

1299 
	#X509_R_ERR_ASN1_LIB
 102

	)

1300 
	#X509_R_IDP_MISMATCH
 128

	)

1301 
	#X509_R_INVALID_DIRECTORY
 113

	)

1302 
	#X509_R_INVALID_FIELD_NAME
 119

	)

1303 
	#X509_R_INVALID_TRUST
 123

	)

1304 
	#X509_R_ISSUER_MISMATCH
 129

	)

1305 
	#X509_R_KEY_TYPE_MISMATCH
 115

	)

1306 
	#X509_R_KEY_VALUES_MISMATCH
 116

	)

1307 
	#X509_R_LOADING_CERT_DIR
 103

	)

1308 
	#X509_R_LOADING_DEFAULTS
 104

	)

1309 
	#X509_R_METHOD_NOT_SUPPORTED
 124

	)

1310 
	#X509_R_NAME_TOO_LONG
 134

	)

1311 
	#X509_R_NEWER_CRL_NOT_NEWER
 132

	)

1312 
	#X509_R_NO_CERT_SET_FOR_US_TO_VERIFY
 105

	)

1313 
	#X509_R_NO_CRL_NUMBER
 130

	)

1314 
	#X509_R_PUBLIC_KEY_DECODE_ERROR
 125

	)

1315 
	#X509_R_PUBLIC_KEY_ENCODE_ERROR
 126

	)

1316 
	#X509_R_SHOULD_RETRY
 106

	)

1317 
	#X509_R_UNABLE_TO_FIND_PARAMETERS_IN_CHAIN
 107

	)

1318 
	#X509_R_UNABLE_TO_GET_CERTS_PUBLIC_KEY
 108

	)

1319 
	#X509_R_UNKNOWN_KEY_TYPE
 117

	)

1320 
	#X509_R_UNKNOWN_NID
 109

	)

1321 
	#X509_R_UNKNOWN_PURPOSE_ID
 121

	)

1322 
	#X509_R_UNKNOWN_TRUST_ID
 120

	)

1323 
	#X509_R_UNSUPPORTED_ALGORITHM
 111

	)

1324 
	#X509_R_WRONG_LOOKUP_TYPE
 112

	)

1325 
	#X509_R_WRONG_TYPE
 122

	)

1327 #ifdeà 
__ılu¥lus


	@/usr/include/rpc/netdb.h

36 #iâdeà
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<ã©u»s.h
>

41 
	#__Ãed_size_t


	)

42 
	~<¡ddef.h
>

44 
__BEGIN_DECLS


46 
	s½ûÁ


48 *
	mr_Çme
;

49 **
	mr_®Ÿ£s
;

50 
	mr_numb”
;

53 
	$£ŒpûÁ
 (
__¡ayİ’
è
__THROW
;

54 
	$’d½ûÁ
 (è
__THROW
;

55 
½ûÁ
 *
	$g‘½cbyÇme
 (cÚ¡ *
__Çme
è
__THROW
;

56 
½ûÁ
 *
	$g‘½cbynumb”
 (
__numb”
è
__THROW
;

57 
½ûÁ
 *
	$g‘½ûÁ
 (è
__THROW
;

59 #ifdeà
__USE_MISC


60 
	$g‘½cbyÇme_r
 (cÚ¡ *
__Çme
, 
½ûÁ
 *
__»suÉ_buf
,

61 *
__bufãr
, 
size_t
 
__buæ’
,

62 
½ûÁ
 **
__»suÉ
è
__THROW
;

64 
	$g‘½cbynumb”_r
 (
__numb”
, 
½ûÁ
 *
__»suÉ_buf
,

65 *
__bufãr
, 
size_t
 
__buæ’
,

66 
½ûÁ
 **
__»suÉ
è
__THROW
;

68 
	$g‘½ûÁ_r
 (
½ûÁ
 *
__»suÉ_buf
, *
__bufãr
,

69 
size_t
 
__buæ’
, 
½ûÁ
 **
__»suÉ
è
__THROW
;

72 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

57 
	#__STDC_ISO_10646__
 201605L

	)

60 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/openssl/asn1.h

59 #iâdeà
HEADER_ASN1_H


60 
	#HEADER_ASN1_H


	)

62 
	~<time.h
>

63 
	~<İ’s¦/e_os2.h
>

64 #iâdeà
OPENSSL_NO_BIO


65 
	~<İ’s¦/bio.h
>

67 
	~<İ’s¦/¡ack.h
>

68 
	~<İ’s¦/§ã¡ack.h
>

70 
	~<İ’s¦/symhacks.h
>

72 
	~<İ’s¦/os¦_typ.h
>

73 #iâdeà
OPENSSL_NO_DEPRECATED


74 
	~<İ’s¦/bn.h
>

77 #ifdeà
OPENSSL_BUILD_SHLIBCRYPTO


78 #undeà
OPENSSL_EXTERN


79 
	#OPENSSL_EXTERN
 
OPENSSL_EXPORT


	)

82 #ifdeà 
__ılu¥lus


86 
	#V_ASN1_UNIVERSAL
 0x00

	)

87 
	#V_ASN1_APPLICATION
 0x40

	)

88 
	#V_ASN1_CONTEXT_SPECIFIC
 0x80

	)

89 
	#V_ASN1_PRIVATE
 0xc0

	)

91 
	#V_ASN1_CONSTRUCTED
 0x20

	)

92 
	#V_ASN1_PRIMITIVE_TAG
 0x1f

	)

93 
	#V_ASN1_PRIMATIVE_TAG
 0x1f

	)

95 
	#V_ASN1_APP_CHOOSE
 -2

	)

96 
	#V_ASN1_OTHER
 -3

	)

97 
	#V_ASN1_ANY
 -4

	)

99 
	#V_ASN1_NEG
 0x100

	)

101 
	#V_ASN1_UNDEF
 -1

	)

102 
	#V_ASN1_EOC
 0

	)

103 
	#V_ASN1_BOOLEAN
 1

	)

104 
	#V_ASN1_INTEGER
 2

	)

105 
	#V_ASN1_NEG_INTEGER
 (2 | 
V_ASN1_NEG
)

	)

106 
	#V_ASN1_BIT_STRING
 3

	)

107 
	#V_ASN1_OCTET_STRING
 4

	)

108 
	#V_ASN1_NULL
 5

	)

109 
	#V_ASN1_OBJECT
 6

	)

110 
	#V_ASN1_OBJECT_DESCRIPTOR
 7

	)

111 
	#V_ASN1_EXTERNAL
 8

	)

112 
	#V_ASN1_REAL
 9

	)

113 
	#V_ASN1_ENUMERATED
 10

	)

114 
	#V_ASN1_NEG_ENUMERATED
 (10 | 
V_ASN1_NEG
)

	)

115 
	#V_ASN1_UTF8STRING
 12

	)

116 
	#V_ASN1_SEQUENCE
 16

	)

117 
	#V_ASN1_SET
 17

	)

118 
	#V_ASN1_NUMERICSTRING
 18

	)

119 
	#V_ASN1_PRINTABLESTRING
 19

	)

120 
	#V_ASN1_T61STRING
 20

	)

121 
	#V_ASN1_TELETEXSTRING
 20

	)

122 
	#V_ASN1_VIDEOTEXSTRING
 21

	)

123 
	#V_ASN1_IA5STRING
 22

	)

124 
	#V_ASN1_UTCTIME
 23

	)

125 
	#V_ASN1_GENERALIZEDTIME
 24

	)

126 
	#V_ASN1_GRAPHICSTRING
 25

	)

127 
	#V_ASN1_ISO64STRING
 26

	)

128 
	#V_ASN1_VISIBLESTRING
 26

	)

129 
	#V_ASN1_GENERALSTRING
 27

	)

130 
	#V_ASN1_UNIVERSALSTRING
 28

	)

131 
	#V_ASN1_BMPSTRING
 30

	)

133 
	#B_ASN1_NUMERICSTRING
 0x0001

	)

134 
	#B_ASN1_PRINTABLESTRING
 0x0002

	)

135 
	#B_ASN1_T61STRING
 0x0004

	)

136 
	#B_ASN1_TELETEXSTRING
 0x0004

	)

137 
	#B_ASN1_VIDEOTEXSTRING
 0x0008

	)

138 
	#B_ASN1_IA5STRING
 0x0010

	)

139 
	#B_ASN1_GRAPHICSTRING
 0x0020

	)

140 
	#B_ASN1_ISO64STRING
 0x0040

	)

141 
	#B_ASN1_VISIBLESTRING
 0x0040

	)

142 
	#B_ASN1_GENERALSTRING
 0x0080

	)

143 
	#B_ASN1_UNIVERSALSTRING
 0x0100

	)

144 
	#B_ASN1_OCTET_STRING
 0x0200

	)

145 
	#B_ASN1_BIT_STRING
 0x0400

	)

146 
	#B_ASN1_BMPSTRING
 0x0800

	)

147 
	#B_ASN1_UNKNOWN
 0x1000

	)

148 
	#B_ASN1_UTF8STRING
 0x2000

	)

149 
	#B_ASN1_UTCTIME
 0x4000

	)

150 
	#B_ASN1_GENERALIZEDTIME
 0x8000

	)

151 
	#B_ASN1_SEQUENCE
 0x10000

	)

153 
	#MBSTRING_FLAG
 0x1000

	)

154 
	#MBSTRING_UTF8
 (
MBSTRING_FLAG
)

	)

155 
	#MBSTRING_ASC
 (
MBSTRING_FLAG
|1)

	)

156 
	#MBSTRING_BMP
 (
MBSTRING_FLAG
|2)

	)

157 
	#MBSTRING_UNIV
 (
MBSTRING_FLAG
|4)

	)

158 
	#SMIME_OLDMIME
 0x400

	)

159 
	#SMIME_CRLFEOL
 0x800

	)

160 
	#SMIME_STREAM
 0x1000

	)

161 
X509_®gÜ_¡
;

162 
DECLARE_STACK_OF
(
X509_ALGOR
)

164 
	#DECLARE_ASN1_SET_OF
(
ty³
)

	)

165 
	#IMPLEMENT_ASN1_SET_OF
(
ty³
)

	)

172 
	sa¢1_ùx_¡
 {

173 *
p
;

174 
eos
;

176 
”rÜ
;

177 
šf
;

178 
g
;

179 
xşass
;

180 
¦’
;

181 *
max
;

182 *
q
;

183 **
µ
;

184 
lše
;

185 } 
	tASN1_CTX
;

187 
	sa¢1_cÚ¡_ùx_¡
 {

188 cÚ¡ *
p
;

189 
eos
;

191 
”rÜ
;

192 
šf
;

193 
g
;

194 
xşass
;

195 
¦’
;

196 cÚ¡ *
max
;

197 cÚ¡ *
q
;

198 cÚ¡ **
µ
;

199 
lše
;

200 } 
	tASN1_cÚ¡_CTX
;

206 
	#ASN1_OBJECT_FLAG_DYNAMIC
 0x01

	)

207 
	#ASN1_OBJECT_FLAG_CRITICAL
 0x02

	)

208 
	#ASN1_OBJECT_FLAG_DYNAMIC_STRINGS
 0x04

	)

209 
	#ASN1_OBJECT_FLAG_DYNAMIC_DATA
 0x08

	)

210 
	sa¢1_objeù_¡
 {

211 cÚ¡ *
¢
, *
Ê
;

212 
nid
;

213 
Ëngth
;

214 cÚ¡ *
d©a
;

215 
æags
;

218 
	#ASN1_STRING_FLAG_BITS_LEFT
 0x08

	)

224 
	#ASN1_STRING_FLAG_NDEF
 0x010

	)

232 
	#ASN1_STRING_FLAG_CONT
 0x020

	)

237 
	#ASN1_STRING_FLAG_MSTRING
 0x040

	)

239 
	sa¢1_¡ršg_¡
 {

240 
Ëngth
;

241 
ty³
;

242 *
d©a
;

248 
æags
;

257 
	sASN1_ENCODING_¡
 {

258 *
’c
;

259 
Ën
;

260 
modif›d
;

261 } 
	tASN1_ENCODING
;

264 
	#ASN1_LONG_UNDEF
 0x7fffffffL

	)

266 
	#STABLE_FLAGS_MALLOC
 0x01

	)

267 
	#STABLE_NO_MASK
 0x02

	)

268 
	#DIRSTRING_TYPE
 \

269 (
B_ASN1_PRINTABLESTRING
|
B_ASN1_T61STRING
|
B_ASN1_BMPSTRING
|
B_ASN1_UTF8STRING
)

	)

270 
	#PKCS9STRING_TYPE
 (
DIRSTRING_TYPE
|
B_ASN1_IA5STRING
)

	)

272 
	sa¢1_¡ršg_bË_¡
 {

273 
nid
;

274 
mšsize
;

275 
maxsize
;

276 
mask
;

277 
æags
;

278 } 
	tASN1_STRING_TABLE
;

280 
DECLARE_STACK_OF
(
ASN1_STRING_TABLE
)

284 
	#ub_Çme
 32768

	)

285 
	#ub_commÚ_Çme
 64

	)

286 
	#ub_loÿl™y_Çme
 128

	)

287 
	#ub_¡©e_Çme
 128

	)

288 
	#ub_Ügªiz©iÚ_Çme
 64

	)

289 
	#ub_Ügªiz©iÚ_un™_Çme
 64

	)

290 
	#ub_t™Ë
 64

	)

291 
	#ub_ema_add»ss
 128

	)

296 
ASN1_TEMPLATE_¡
 
	tASN1_TEMPLATE
;

297 
ASN1_TLC_¡
 
	tASN1_TLC
;

299 
ASN1_VALUE_¡
 
	tASN1_VALUE
;

303 
	#DECLARE_ASN1_FUNCTIONS
(
ty³
è
	`DECLARE_ASN1_FUNCTIONS_Çme
Ñy³,y³)

	)

305 
	#DECLARE_ASN1_ALLOC_FUNCTIONS
(
ty³
) \

306 
	`DECLARE_ASN1_ALLOC_FUNCTIONS_Çme
(
ty³
,y³)

	)

308 
	#DECLARE_ASN1_FUNCTIONS_Çme
(
ty³
, 
Çme
) \

309 
	`DECLARE_ASN1_ALLOC_FUNCTIONS_Çme
(
ty³
, 
Çme
) \

310 
	`DECLARE_ASN1_ENCODE_FUNCTIONS
(
ty³
, 
Çme
,‚ame)

	)

312 
	#DECLARE_ASN1_FUNCTIONS_âame
(
ty³
, 
™Çme
, 
Çme
) \

313 
	`DECLARE_ASN1_ALLOC_FUNCTIONS_Çme
(
ty³
, 
Çme
) \

314 
	`DECLARE_ASN1_ENCODE_FUNCTIONS
(
ty³
, 
™Çme
, 
Çme
)

	)

316 
	#DECLARE_ASN1_ENCODE_FUNCTIONS
(
ty³
, 
™Çme
, 
Çme
) \

317 
ty³
 *
d2i_
##
	`Çme
Ñy³ **
a
, cÚ¡ **
š
, 
Ën
); \

318 
i2d_
##
	`Çme
(
ty³
 *
a
, **
out
); \

319 
	`DECLARE_ASN1_ITEM
(
™Çme
)

	)

321 
	#DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
ty³
, 
Çme
) \

322 
ty³
 *
d2i_
##
	`Çme
Ñy³ **
a
, cÚ¡ **
š
, 
Ën
); \

323 
i2d_
##
	`Çme
(cÚ¡ 
ty³
 *
a
, **
out
); \

324 
	`DECLARE_ASN1_ITEM
(
Çme
)

	)

326 
	#DECLARE_ASN1_NDEF_FUNCTION
(
Çme
) \

327 
i2d_
##
Çme
##
	`_NDEF
Òam*
a
, **
out
);

	)

329 
	#DECLARE_ASN1_FUNCTIONS_cÚ¡
(
Çme
) \

330 
	`DECLARE_ASN1_ALLOC_FUNCTIONS
(
Çme
) \

331 
	`DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
Çme
,‚ame)

	)

333 
	#DECLARE_ASN1_ALLOC_FUNCTIONS_Çme
(
ty³
, 
Çme
) \

334 
ty³
 *
Çme
##
	`_Ãw
(); \

335 
Çme
##
	`_ä“
(
ty³
 *
a
);

	)

337 
	#DECLARE_ASN1_PRINT_FUNCTION
(
¡Çme
) \

338 
	`DECLARE_ASN1_PRINT_FUNCTION_âame
(
¡Çme
, sŠame)

	)

340 
	#DECLARE_ASN1_PRINT_FUNCTION_âame
(
¡Çme
, 
âame
) \

341 
âame
##
	`_´št_ùx
(
BIO
 *
out
, 
¡Çme
 *
x
, 
šd’t
, \

342 cÚ¡ 
ASN1_PCTX
 *
pùx
);

	)

344 
	#D2I_OF
(
ty³
èty³ *(*)Ñy³ **,cÚ¡ **,)

	)

345 
	#I2D_OF
(
ty³
è(*)Ñy³ *,**)

	)

346 
	#I2D_OF_cÚ¡
(
ty³
è(*)(cÚ¡y³ *,**)

	)

348 
	#CHECKED_D2I_OF
(
ty³
, 
d2i
) \

349 ((
d2i_of_void
*è(1 ? 
d2i
 : ((
	`D2I_OF
(
ty³
))0)))

	)

350 
	#CHECKED_I2D_OF
(
ty³
, 
i2d
) \

351 ((
i2d_of_void
*è(1 ? 
i2d
 : ((
	`I2D_OF
(
ty³
))0)))

	)

352 
	#CHECKED_NEW_OF
(
ty³
, 
xÃw
) \

353 ((*(*)()è(1 ? 
xÃw
 : ((
ty³
 *(*)())0)))

	)

354 
	#CHECKED_PTR_OF
(
ty³
, 
p
) \

355 ((*è(1 ? 
p
 : (
ty³
*)0))

	)

356 
	#CHECKED_PPTR_OF
(
ty³
, 
p
) \

357 ((**è(1 ? 
p
 : (
ty³
**)0))

	)

359 
	#TYPEDEF_D2I_OF
(
ty³
èty³ *
	td2i_of_
##
	tty³
Ñy³ **,cÚ¡ **,)

	)

360 
	tTYPEDEF_I2D_OF
(
	tty³
è
	ti2d_of_
##ty³Ñy³ *,**)

	)

361 
	tTYPEDEF_D2I2D_OF
(
	tty³
è
	tTYPEDEF_D2I_OF
Ñy³); 
	`TYPEDEF_I2D_OF
(
ty³
)

	)

363 
TYPEDEF_D2I2D_OF
();

401 #iâdeà
OPENSSL_EXPORT_VAR_AS_FUNCTION


404 cÚ¡ 
	tASN1_ITEM
 
	tASN1_ITEM_EXP
;

407 
	#ASN1_ITEM_±r
(
Œ
è(Œ)

	)

410 
	#ASN1_ITEM_»f
(
Œ
è(&(Œ##
_™
))

	)

412 
	#ASN1_ITEM_½Œ
(
»f
è(&Ôef##
_™
))

	)

414 
	#DECLARE_ASN1_ITEM
(
Çme
) \

415 
OPENSSL_EXTERN
 cÚ¡ 
ASN1_ITEM
 
Çme
##
_™
;

	)

425 cÚ¡ 
	tASN1_ITEM
 *
	tASN1_ITEM_EXP
 ();

428 
	#ASN1_ITEM_±r
(
Œ
è(
	`Œ
())

	)

431 
	#ASN1_ITEM_»f
(
Œ
è(Œ##
_™
)

	)

433 
	#ASN1_ITEM_½Œ
(
»f
èÔef##
	`_™
())

	)

435 
	#DECLARE_ASN1_ITEM
(
Çme
) \

436 cÚ¡ 
ASN1_ITEM
 * 
Çme
##
	`_™
();

	)

447 
	#ASN1_STRFLGS_ESC_2253
 1

	)

448 
	#ASN1_STRFLGS_ESC_CTRL
 2

	)

449 
	#ASN1_STRFLGS_ESC_MSB
 4

	)

456 
	#ASN1_STRFLGS_ESC_QUOTE
 8

	)

461 
	#CHARTYPE_PRINTABLESTRING
 0x10

	)

463 
	#CHARTYPE_FIRST_ESC_2253
 0x20

	)

465 
	#CHARTYPE_LAST_ESC_2253
 0x40

	)

476 
	#ASN1_STRFLGS_UTF8_CONVERT
 0x10

	)

484 
	#ASN1_STRFLGS_IGNORE_TYPE
 0x20

	)

487 
	#ASN1_STRFLGS_SHOW_TYPE
 0x40

	)

497 
	#ASN1_STRFLGS_DUMP_ALL
 0x80

	)

498 
	#ASN1_STRFLGS_DUMP_UNKNOWN
 0x100

	)

505 
	#ASN1_STRFLGS_DUMP_DER
 0x200

	)

512 
	#ASN1_STRFLGS_RFC2253
 (
ASN1_STRFLGS_ESC_2253
 | \

513 
ASN1_STRFLGS_ESC_CTRL
 | \

514 
ASN1_STRFLGS_ESC_MSB
 | \

515 
ASN1_STRFLGS_UTF8_CONVERT
 | \

516 
ASN1_STRFLGS_DUMP_UNKNOWN
 | \

517 
ASN1_STRFLGS_DUMP_DER
)

	)

519 
DECLARE_STACK_OF
(
ASN1_INTEGER
)

520 
DECLARE_ASN1_SET_OF
(
ASN1_INTEGER
)

522 
DECLARE_STACK_OF
(
ASN1_GENERALSTRING
)

524 
	sa¢1_ty³_¡
 {

525 
ty³
;

527 *
±r
;

528 
ASN1_BOOLEAN
 
boŞ—n
;

529 
ASN1_STRING
 *
a¢1_¡ršg
;

530 
ASN1_OBJECT
 *
objeù
;

531 
ASN1_INTEGER
 *
š‹g”
;

532 
ASN1_ENUMERATED
 *
’um”©ed
;

533 
ASN1_BIT_STRING
 *
b™_¡ršg
;

534 
ASN1_OCTET_STRING
 *
où‘_¡ršg
;

535 
ASN1_PRINTABLESTRING
 *
´šbË¡ršg
;

536 
ASN1_T61STRING
 *
t61¡ršg
;

537 
ASN1_IA5STRING
 *
Ÿ5¡ršg
;

538 
ASN1_GENERALSTRING
 *
g’”®¡ršg
;

539 
ASN1_BMPSTRING
 *
bmp¡ršg
;

540 
ASN1_UNIVERSALSTRING
 *
univ”§l¡ršg
;

541 
ASN1_UTCTIME
 *
utùime
;

542 
ASN1_GENERALIZEDTIME
 *
g’”®izedtime
;

543 
ASN1_VISIBLESTRING
 *
visibË¡ršg
;

544 
ASN1_UTF8STRING
 *
utf8¡ršg
;

549 
ASN1_STRING
 *
£t
;

550 
ASN1_STRING
 *
£qu’û
;

551 
ASN1_VALUE
 *
a¢1_v®ue
;

552 } 
v®ue
;

553 } 
	tASN1_TYPE
;

555 
DECLARE_STACK_OF
(
ASN1_TYPE
)

556 
DECLARE_ASN1_SET_OF
(
ASN1_TYPE
)

558 
STACK_OF
(
	tASN1_TYPE
è
	tASN1_SEQUENCE_ANY
;

560 
DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
ASN1_SEQUENCE_ANY
, ASN1_SEQUENCE_ANY)

561 
DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
ASN1_SEQUENCE_ANY
, 
ASN1_SET_ANY
)

563 
	sNETSCAPE_X509_¡
 {

564 
ASN1_OCTET_STRING
 *
h—d”
;

565 
X509
 *
û¹
;

566 } 
	tNETSCAPE_X509
;

569 
	sBIT_STRING_BITNAME_¡
 {

570 
b™num
;

571 cÚ¡ *
Êame
;

572 cÚ¡ *
¢ame
;

573 } 
	tBIT_STRING_BITNAME
;

575 
	#M_ASN1_STRING_Ëngth
(
x
è((x)->
Ëngth
)

	)

576 
	#M_ASN1_STRING_Ëngth_£t
(
x
, 
n
è((x)->
Ëngth
 = (n))

	)

577 
	#M_ASN1_STRING_ty³
(
x
è((x)->
ty³
)

	)

578 
	#M_ASN1_STRING_d©a
(
x
è((x)->
d©a
)

	)

581 
	#M_ASN1_BIT_STRING_Ãw
(è(
ASN1_BIT_STRING
 *)\

582 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_BIT_STRING
)

	)

583 
	#M_ASN1_BIT_STRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

584 
	#M_ASN1_BIT_STRING_dup
(
a
è(
ASN1_BIT_STRING
 *)\

585 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

586 
	#M_ASN1_BIT_STRING_cmp
(
a
,
b
è
	`ASN1_STRING_cmp
(\

587 (cÚ¡ 
ASN1_STRING
 *)
a
,(cÚ¡ ASN1_STRING *)
b
)

	)

588 
	#M_ASN1_BIT_STRING_£t
(
a
,
b
,
c
è
	`ASN1_STRING_£t
((
ASN1_STRING
 *ï,b,c)

	)

590 
	#M_ASN1_INTEGER_Ãw
(è(
ASN1_INTEGER
 *)\

591 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_INTEGER
)

	)

592 
	#M_ASN1_INTEGER_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

593 
	#M_ASN1_INTEGER_dup
(
a
è(
ASN1_INTEGER
 *)\

594 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

595 
	#M_ASN1_INTEGER_cmp
(
a
,
b
è
	`ASN1_STRING_cmp
(\

596 (cÚ¡ 
ASN1_STRING
 *)
a
,(cÚ¡ ASN1_STRING *)
b
)

	)

598 
	#M_ASN1_ENUMERATED_Ãw
(è(
ASN1_ENUMERATED
 *)\

599 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_ENUMERATED
)

	)

600 
	#M_ASN1_ENUMERATED_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

601 
	#M_ASN1_ENUMERATED_dup
(
a
è(
ASN1_ENUMERATED
 *)\

602 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

603 
	#M_ASN1_ENUMERATED_cmp
(
a
,
b
è
	`ASN1_STRING_cmp
(\

604 (cÚ¡ 
ASN1_STRING
 *)
a
,(cÚ¡ ASN1_STRING *)
b
)

	)

606 
	#M_ASN1_OCTET_STRING_Ãw
(è(
ASN1_OCTET_STRING
 *)\

607 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_OCTET_STRING
)

	)

608 
	#M_ASN1_OCTET_STRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

609 
	#M_ASN1_OCTET_STRING_dup
(
a
è(
ASN1_OCTET_STRING
 *)\

610 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

611 
	#M_ASN1_OCTET_STRING_cmp
(
a
,
b
è
	`ASN1_STRING_cmp
(\

612 (cÚ¡ 
ASN1_STRING
 *)
a
,(cÚ¡ ASN1_STRING *)
b
)

	)

613 
	#M_ASN1_OCTET_STRING_£t
(
a
,
b
,
c
è
	`ASN1_STRING_£t
((
ASN1_STRING
 *ï,b,c)

	)

614 
	#M_ASN1_OCTET_STRING_´št
(
a
,
b
è
	`ASN1_STRING_´št
×,(
ASN1_STRING
 *)b)

	)

615 
	#M_i2d_ASN1_OCTET_STRING
(
a
,
µ
) \

616 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_OCTET_STRING
,\

617 
V_ASN1_UNIVERSAL
)

	)

619 
	#B_ASN1_TIME
 \

620 
B_ASN1_UTCTIME
 | \

621 
B_ASN1_GENERALIZEDTIME


	)

623 
	#B_ASN1_PRINTABLE
 \

624 
B_ASN1_NUMERICSTRING
| \

625 
B_ASN1_PRINTABLESTRING
| \

626 
B_ASN1_T61STRING
| \

627 
B_ASN1_IA5STRING
| \

628 
B_ASN1_BIT_STRING
| \

629 
B_ASN1_UNIVERSALSTRING
|\

630 
B_ASN1_BMPSTRING
|\

631 
B_ASN1_UTF8STRING
|\

632 
B_ASN1_SEQUENCE
|\

633 
B_ASN1_UNKNOWN


	)

635 
	#B_ASN1_DIRECTORYSTRING
 \

636 
B_ASN1_PRINTABLESTRING
| \

637 
B_ASN1_TELETEXSTRING
|\

638 
B_ASN1_BMPSTRING
|\

639 
B_ASN1_UNIVERSALSTRING
|\

640 
B_ASN1_UTF8STRING


	)

642 
	#B_ASN1_DISPLAYTEXT
 \

643 
B_ASN1_IA5STRING
| \

644 
B_ASN1_VISIBLESTRING
| \

645 
B_ASN1_BMPSTRING
|\

646 
B_ASN1_UTF8STRING


	)

648 
	#M_ASN1_PRINTABLE_Ãw
(è
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_T61STRING
)

	)

649 
	#M_ASN1_PRINTABLE_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

650 
	#M_i2d_ASN1_PRINTABLE
(
a
,
µ
è
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)a,\

651 
µ
,
a
->
ty³
,
V_ASN1_UNIVERSAL
)

	)

652 
	#M_d2i_ASN1_PRINTABLE
(
a
,
µ
,
l
) \

653 
	`d2i_ASN1_ty³_by‹s
((
ASN1_STRING
 **)
a
,
µ
,
l
, \

654 
B_ASN1_PRINTABLE
)

	)

656 
	#M_DIRECTORYSTRING_Ãw
(è
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_PRINTABLESTRING
)

	)

657 
	#M_DIRECTORYSTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

658 
	#M_i2d_DIRECTORYSTRING
(
a
,
µ
è
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)a,\

659 
µ
,
a
->
ty³
,
V_ASN1_UNIVERSAL
)

	)

660 
	#M_d2i_DIRECTORYSTRING
(
a
,
µ
,
l
) \

661 
	`d2i_ASN1_ty³_by‹s
((
ASN1_STRING
 **)
a
,
µ
,
l
, \

662 
B_ASN1_DIRECTORYSTRING
)

	)

664 
	#M_DISPLAYTEXT_Ãw
(è
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_VISIBLESTRING
)

	)

665 
	#M_DISPLAYTEXT_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

666 
	#M_i2d_DISPLAYTEXT
(
a
,
µ
è
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)a,\

667 
µ
,
a
->
ty³
,
V_ASN1_UNIVERSAL
)

	)

668 
	#M_d2i_DISPLAYTEXT
(
a
,
µ
,
l
) \

669 
	`d2i_ASN1_ty³_by‹s
((
ASN1_STRING
 **)
a
,
µ
,
l
, \

670 
B_ASN1_DISPLAYTEXT
)

	)

672 
	#M_ASN1_PRINTABLESTRING_Ãw
(è(
ASN1_PRINTABLESTRING
 *)\

673 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_PRINTABLESTRING
)

	)

674 
	#M_ASN1_PRINTABLESTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

675 
	#M_i2d_ASN1_PRINTABLESTRING
(
a
,
µ
) \

676 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_PRINTABLESTRING
,\

677 
V_ASN1_UNIVERSAL
)

	)

678 
	#M_d2i_ASN1_PRINTABLESTRING
(
a
,
µ
,
l
) \

679 (
ASN1_PRINTABLESTRING
 *)
d2i_ASN1_ty³_by‹s
\

680 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_PRINTABLESTRING
)

	)

682 
	#M_ASN1_T61STRING_Ãw
(è(
ASN1_T61STRING
 *)\

683 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_T61STRING
)

	)

684 
	#M_ASN1_T61STRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

685 
	#M_i2d_ASN1_T61STRING
(
a
,
µ
) \

686 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_T61STRING
,\

687 
V_ASN1_UNIVERSAL
)

	)

688 
	#M_d2i_ASN1_T61STRING
(
a
,
µ
,
l
) \

689 (
ASN1_T61STRING
 *)
d2i_ASN1_ty³_by‹s
\

690 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_T61STRING
)

	)

692 
	#M_ASN1_IA5STRING_Ãw
(è(
ASN1_IA5STRING
 *)\

693 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_IA5STRING
)

	)

694 
	#M_ASN1_IA5STRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

695 
	#M_ASN1_IA5STRING_dup
(
a
) \

696 (
ASN1_IA5STRING
 *)
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

697 
	#M_i2d_ASN1_IA5STRING
(
a
,
µ
) \

698 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_IA5STRING
,\

699 
V_ASN1_UNIVERSAL
)

	)

700 
	#M_d2i_ASN1_IA5STRING
(
a
,
µ
,
l
) \

701 (
ASN1_IA5STRING
 *)
	`d2i_ASN1_ty³_by‹s
((
ASN1_STRING
 **)
a
,
µ
,
l
,\

702 
B_ASN1_IA5STRING
)

	)

704 
	#M_ASN1_UTCTIME_Ãw
(è(
ASN1_UTCTIME
 *)\

705 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_UTCTIME
)

	)

706 
	#M_ASN1_UTCTIME_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

707 
	#M_ASN1_UTCTIME_dup
(
a
è(
ASN1_UTCTIME
 *)\

708 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

710 
	#M_ASN1_GENERALIZEDTIME_Ãw
(è(
ASN1_GENERALIZEDTIME
 *)\

711 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_GENERALIZEDTIME
)

	)

712 
	#M_ASN1_GENERALIZEDTIME_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

713 
	#M_ASN1_GENERALIZEDTIME_dup
(
a
è(
ASN1_GENERALIZEDTIME
 *)
	`ASN1_STRING_dup
(\

714 (cÚ¡ 
ASN1_STRING
 *)
a
)

	)

716 
	#M_ASN1_TIME_Ãw
(è(
ASN1_TIME
 *)\

717 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_UTCTIME
)

	)

718 
	#M_ASN1_TIME_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

719 
	#M_ASN1_TIME_dup
(
a
è(
ASN1_TIME
 *)\

720 
	`ASN1_STRING_dup
((cÚ¡ 
ASN1_STRING
 *)
a
)

	)

722 
	#M_ASN1_GENERALSTRING_Ãw
(è(
ASN1_GENERALSTRING
 *)\

723 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_GENERALSTRING
)

	)

724 
	#M_ASN1_GENERALSTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

725 
	#M_i2d_ASN1_GENERALSTRING
(
a
,
µ
) \

726 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_GENERALSTRING
,\

727 
V_ASN1_UNIVERSAL
)

	)

728 
	#M_d2i_ASN1_GENERALSTRING
(
a
,
µ
,
l
) \

729 (
ASN1_GENERALSTRING
 *)
d2i_ASN1_ty³_by‹s
\

730 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_GENERALSTRING
)

	)

732 
	#M_ASN1_UNIVERSALSTRING_Ãw
(è(
ASN1_UNIVERSALSTRING
 *)\

733 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_UNIVERSALSTRING
)

	)

734 
	#M_ASN1_UNIVERSALSTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

735 
	#M_i2d_ASN1_UNIVERSALSTRING
(
a
,
µ
) \

736 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_UNIVERSALSTRING
,\

737 
V_ASN1_UNIVERSAL
)

	)

738 
	#M_d2i_ASN1_UNIVERSALSTRING
(
a
,
µ
,
l
) \

739 (
ASN1_UNIVERSALSTRING
 *)
d2i_ASN1_ty³_by‹s
\

740 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_UNIVERSALSTRING
)

	)

742 
	#M_ASN1_BMPSTRING_Ãw
(è(
ASN1_BMPSTRING
 *)\

743 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_BMPSTRING
)

	)

744 
	#M_ASN1_BMPSTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

745 
	#M_i2d_ASN1_BMPSTRING
(
a
,
µ
) \

746 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_BMPSTRING
,\

747 
V_ASN1_UNIVERSAL
)

	)

748 
	#M_d2i_ASN1_BMPSTRING
(
a
,
µ
,
l
) \

749 (
ASN1_BMPSTRING
 *)
d2i_ASN1_ty³_by‹s
\

750 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_BMPSTRING
)

	)

752 
	#M_ASN1_VISIBLESTRING_Ãw
(è(
ASN1_VISIBLESTRING
 *)\

753 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_VISIBLESTRING
)

	)

754 
	#M_ASN1_VISIBLESTRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

755 
	#M_i2d_ASN1_VISIBLESTRING
(
a
,
µ
) \

756 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_VISIBLESTRING
,\

757 
V_ASN1_UNIVERSAL
)

	)

758 
	#M_d2i_ASN1_VISIBLESTRING
(
a
,
µ
,
l
) \

759 (
ASN1_VISIBLESTRING
 *)
d2i_ASN1_ty³_by‹s
\

760 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_VISIBLESTRING
)

	)

762 
	#M_ASN1_UTF8STRING_Ãw
(è(
ASN1_UTF8STRING
 *)\

763 
	`ASN1_STRING_ty³_Ãw
(
V_ASN1_UTF8STRING
)

	)

764 
	#M_ASN1_UTF8STRING_ä“
(
a
è
	`ASN1_STRING_ä“
((
ASN1_STRING
 *ï)

	)

765 
	#M_i2d_ASN1_UTF8STRING
(
a
,
µ
) \

766 
	`i2d_ASN1_by‹s
((
ASN1_STRING
 *)
a
,
µ
,
V_ASN1_UTF8STRING
,\

767 
V_ASN1_UNIVERSAL
)

	)

768 
	#M_d2i_ASN1_UTF8STRING
(
a
,
µ
,
l
) \

769 (
ASN1_UTF8STRING
 *)
d2i_ASN1_ty³_by‹s
\

770 ((
ASN1_STRING
 **)
a
,
µ
,
l
,
B_ASN1_UTF8STRING
)

	)

773 
	#IS_SEQUENCE
 0

	)

774 
	#IS_SET
 1

	)

776 
DECLARE_ASN1_FUNCTIONS_âame
(
ASN1_TYPE
, 
ASN1_ANY
, ASN1_TYPE)

778 
ASN1_TYPE_g‘
(
ASN1_TYPE
 *
a
);

779 
ASN1_TYPE_£t
(
ASN1_TYPE
 *
a
, 
ty³
, *
v®ue
);

780 
ASN1_TYPE_£t1
(
ASN1_TYPE
 *
a
, 
ty³
, cÚ¡ *
v®ue
);

781 
ASN1_TYPE_cmp
(cÚ¡ 
ASN1_TYPE
 *
a
, cÚ¡ ASN1_TYPE *
b
);

783 
ASN1_OBJECT
 *
ASN1_OBJECT_Ãw
();

784 
ASN1_OBJECT_ä“
(
ASN1_OBJECT
 *
a
);

785 
i2d_ASN1_OBJECT
(
ASN1_OBJECT
 *
a
, **
µ
);

786 
ASN1_OBJECT
 *
c2i_ASN1_OBJECT
(ASN1_OBJECT **
a
, cÚ¡ **
µ
,

787 
Ëngth
);

788 
ASN1_OBJECT
 *
d2i_ASN1_OBJECT
(ASN1_OBJECT **
a
, cÚ¡ **
µ
,

789 
Ëngth
);

791 
DECLARE_ASN1_ITEM
(
ASN1_OBJECT
)

793 
DECLARE_STACK_OF
(
ASN1_OBJECT
)

794 
DECLARE_ASN1_SET_OF
(
ASN1_OBJECT
)

796 
ASN1_STRING
 *
ASN1_STRING_Ãw
();

797 
ASN1_STRING_ä“
(
ASN1_STRING
 *
a
);

798 
ASN1_STRING_ş—r_ä“
(
ASN1_STRING
 *
a
);

799 
ASN1_STRING_cİy
(
ASN1_STRING
 *
d¡
, cÚ¡ ASN1_STRING *
¡r
);

800 
ASN1_STRING
 *
ASN1_STRING_dup
(cÚ¡ ASN1_STRING *
a
);

801 
ASN1_STRING
 *
ASN1_STRING_ty³_Ãw
(
ty³
);

802 
ASN1_STRING_cmp
(cÚ¡ 
ASN1_STRING
 *
a
, cÚ¡ ASN1_STRING *
b
);

807 
ASN1_STRING_£t
(
ASN1_STRING
 *
¡r
, cÚ¡ *
d©a
, 
Ën
);

808 
ASN1_STRING_£t0
(
ASN1_STRING
 *
¡r
, *
d©a
, 
Ën
);

809 
ASN1_STRING_Ëngth
(cÚ¡ 
ASN1_STRING
 *
x
);

810 
ASN1_STRING_Ëngth_£t
(
ASN1_STRING
 *
x
, 
n
);

811 
ASN1_STRING_ty³
(
ASN1_STRING
 *
x
);

812 *
ASN1_STRING_d©a
(
ASN1_STRING
 *
x
);

814 
DECLARE_ASN1_FUNCTIONS
(
ASN1_BIT_STRING
)

815 
i2c_ASN1_BIT_STRING
(
ASN1_BIT_STRING
 *
a
, **
µ
);

816 
ASN1_BIT_STRING
 *
c2i_ASN1_BIT_STRING
(ASN1_BIT_STRING **
a
,

817 cÚ¡ **
µ
, 
Ëngth
);

818 
ASN1_BIT_STRING_£t
(
ASN1_BIT_STRING
 *
a
, *
d
, 
Ëngth
);

819 
ASN1_BIT_STRING_£t_b™
(
ASN1_BIT_STRING
 *
a
, 
n
, 
v®ue
);

820 
ASN1_BIT_STRING_g‘_b™
(
ASN1_BIT_STRING
 *
a
, 
n
);

821 
ASN1_BIT_STRING_check
(
ASN1_BIT_STRING
 *
a
,

822 *
æags
, 
æags_Ën
);

824 #iâdeà
OPENSSL_NO_BIO


825 
ASN1_BIT_STRING_Çme_´št
(
BIO
 *
out
, 
ASN1_BIT_STRING
 *
bs
,

826 
BIT_STRING_BITNAME
 *
tbl
, 
šd’t
);

828 
ASN1_BIT_STRING_num_asc
(*
Çme
, 
BIT_STRING_BITNAME
 *
tbl
);

829 
ASN1_BIT_STRING_£t_asc
(
ASN1_BIT_STRING
 *
bs
, *
Çme
, 
v®ue
,

830 
BIT_STRING_BITNAME
 *
tbl
);

832 
i2d_ASN1_BOOLEAN
(
a
, **
µ
);

833 
d2i_ASN1_BOOLEAN
(*
a
, cÚ¡ **
µ
, 
Ëngth
);

835 
DECLARE_ASN1_FUNCTIONS
(
ASN1_INTEGER
)

836 
i2c_ASN1_INTEGER
(
ASN1_INTEGER
 *
a
, **
µ
);

837 
ASN1_INTEGER
 *
c2i_ASN1_INTEGER
(ASN1_INTEGER **
a
, cÚ¡ **
µ
,

838 
Ëngth
);

839 
ASN1_INTEGER
 *
d2i_ASN1_UINTEGER
(ASN1_INTEGER **
a
, cÚ¡ **
µ
,

840 
Ëngth
);

841 
ASN1_INTEGER
 *
ASN1_INTEGER_dup
(cÚ¡ ASN1_INTEGER *
x
);

842 
ASN1_INTEGER_cmp
(cÚ¡ 
ASN1_INTEGER
 *
x
, cÚ¡ ASN1_INTEGER *
y
);

844 
DECLARE_ASN1_FUNCTIONS
(
ASN1_ENUMERATED
)

846 
ASN1_UTCTIME_check
(cÚ¡ 
ASN1_UTCTIME
 *
a
);

847 
ASN1_UTCTIME
 *
ASN1_UTCTIME_£t
(ASN1_UTCTIME *
s
, 
time_t
 
t
);

848 
ASN1_UTCTIME
 *
ASN1_UTCTIME_adj
(ASN1_UTCTIME *
s
, 
time_t
 
t
,

849 
off£t_day
, 
off£t_£c
);

850 
ASN1_UTCTIME_£t_¡ršg
(
ASN1_UTCTIME
 *
s
, cÚ¡ *
¡r
);

851 
ASN1_UTCTIME_cmp_time_t
(cÚ¡ 
ASN1_UTCTIME
 *
s
, 
time_t
 
t
);

853 
time_t
 
ASN1_UTCTIME_g‘
(cÚ¡ 
ASN1_UTCTIME
 *
s
);

856 
ASN1_GENERALIZEDTIME_check
(cÚ¡ 
ASN1_GENERALIZEDTIME
 *
a
);

857 
ASN1_GENERALIZEDTIME
 *
ASN1_GENERALIZEDTIME_£t
(ASN1_GENERALIZEDTIME *
s
,

858 
time_t
 
t
);

859 
ASN1_GENERALIZEDTIME
 *
ASN1_GENERALIZEDTIME_adj
(ASN1_GENERALIZEDTIME *
s
,

860 
time_t
 
t
, 
off£t_day
,

861 
off£t_£c
);

862 
ASN1_GENERALIZEDTIME_£t_¡ršg
(
ASN1_GENERALIZEDTIME
 *
s
, cÚ¡ *
¡r
);

863 
ASN1_TIME_diff
(*
pday
, *
p£c
,

864 cÚ¡ 
ASN1_TIME
 *
äom
, cÚ¡ ASN1_TIME *
to
);

866 
DECLARE_ASN1_FUNCTIONS
(
ASN1_OCTET_STRING
)

867 
ASN1_OCTET_STRING
 *
ASN1_OCTET_STRING_dup
(cÚ¡ ASN1_OCTET_STRING *
a
);

868 
ASN1_OCTET_STRING_cmp
(cÚ¡ 
ASN1_OCTET_STRING
 *
a
,

869 cÚ¡ 
ASN1_OCTET_STRING
 *
b
);

870 
ASN1_OCTET_STRING_£t
(
ASN1_OCTET_STRING
 *
¡r
, cÚ¡ *
d©a
,

871 
Ën
);

873 
DECLARE_ASN1_FUNCTIONS
(
ASN1_VISIBLESTRING
)

874 
DECLARE_ASN1_FUNCTIONS
(
ASN1_UNIVERSALSTRING
)

875 
DECLARE_ASN1_FUNCTIONS
(
ASN1_UTF8STRING
)

876 
DECLARE_ASN1_FUNCTIONS
(
ASN1_NULL
)

877 
DECLARE_ASN1_FUNCTIONS
(
ASN1_BMPSTRING
)

879 
UTF8_g‘c
(cÚ¡ *
¡r
, 
Ën
, *
v®
);

880 
UTF8_putc
(*
¡r
, 
Ën
, 
v®ue
);

882 
DECLARE_ASN1_FUNCTIONS_Çme
(
ASN1_STRING
, 
ASN1_PRINTABLE
)

884 
DECLARE_ASN1_FUNCTIONS_Çme
(
ASN1_STRING
, 
DIRECTORYSTRING
)

885 
DECLARE_ASN1_FUNCTIONS_Çme
(
ASN1_STRING
, 
DISPLAYTEXT
)

886 
DECLARE_ASN1_FUNCTIONS
(
ASN1_PRINTABLESTRING
)

887 
DECLARE_ASN1_FUNCTIONS
(
ASN1_T61STRING
)

888 
DECLARE_ASN1_FUNCTIONS
(
ASN1_IA5STRING
)

889 
DECLARE_ASN1_FUNCTIONS
(
ASN1_GENERALSTRING
)

890 
DECLARE_ASN1_FUNCTIONS
(
ASN1_UTCTIME
)

891 
DECLARE_ASN1_FUNCTIONS
(
ASN1_GENERALIZEDTIME
)

892 
DECLARE_ASN1_FUNCTIONS
(
ASN1_TIME
)

894 
DECLARE_ASN1_ITEM
(
ASN1_OCTET_STRING_NDEF
)

896 
ASN1_TIME
 *
ASN1_TIME_£t
(ASN1_TIME *
s
, 
time_t
 
t
);

897 
ASN1_TIME
 *
ASN1_TIME_adj
(ASN1_TIME *
s
, 
time_t
 
t
,

898 
off£t_day
, 
off£t_£c
);

899 
ASN1_TIME_check
(
ASN1_TIME
 *
t
);

900 
ASN1_GENERALIZEDTIME
 *
ASN1_TIME_to_g’”®izedtime
(
ASN1_TIME
 *
t
, ASN1_GENERALIZEDTIME

901 **
out
);

902 
ASN1_TIME_£t_¡ršg
(
ASN1_TIME
 *
s
, cÚ¡ *
¡r
);

904 
i2d_ASN1_SET
(
STACK_OF
(
OPENSSL_BLOCK
è*
a
, **
µ
,

905 
i2d_of_void
 *
i2d
, 
ex_g
, 
ex_şass
, 
is_£t
);

906 
STACK_OF
(
OPENSSL_BLOCK
è*
d2i_ASN1_SET
(STACK_OF(OPENSSL_BLOCKè**
a
,

907 cÚ¡ **
µ
,

908 
Ëngth
, 
d2i_of_void
 *
d2i
,

909 (*
ä“_func
è(
OPENSSL_BLOCK
),

910 
ex_g
, 
ex_şass
);

912 #iâdeà
OPENSSL_NO_BIO


913 
i2a_ASN1_INTEGER
(
BIO
 *
bp
, 
ASN1_INTEGER
 *
a
);

914 
a2i_ASN1_INTEGER
(
BIO
 *
bp
, 
ASN1_INTEGER
 *
bs
, *
buf
, 
size
);

915 
i2a_ASN1_ENUMERATED
(
BIO
 *
bp
, 
ASN1_ENUMERATED
 *
a
);

916 
a2i_ASN1_ENUMERATED
(
BIO
 *
bp
, 
ASN1_ENUMERATED
 *
bs
, *
buf
, 
size
);

917 
i2a_ASN1_OBJECT
(
BIO
 *
bp
, 
ASN1_OBJECT
 *
a
);

918 
a2i_ASN1_STRING
(
BIO
 *
bp
, 
ASN1_STRING
 *
bs
, *
buf
, 
size
);

919 
i2a_ASN1_STRING
(
BIO
 *
bp
, 
ASN1_STRING
 *
a
, 
ty³
);

921 
i2t_ASN1_OBJECT
(*
buf
, 
buf_Ën
, 
ASN1_OBJECT
 *
a
);

923 
a2d_ASN1_OBJECT
(*
out
, 
Ş’
, cÚ¡ *
buf
, 
num
);

924 
ASN1_OBJECT
 *
ASN1_OBJECT_ü—‹
(
nid
, *
d©a
, 
Ën
,

925 cÚ¡ *
¢
, cÚ¡ *
Ê
);

927 
ASN1_INTEGER_£t
(
ASN1_INTEGER
 *
a
, 
v
);

928 
ASN1_INTEGER_g‘
(cÚ¡ 
ASN1_INTEGER
 *
a
);

929 
ASN1_INTEGER
 *
BN_to_ASN1_INTEGER
(cÚ¡ 
BIGNUM
 *
bn
, ASN1_INTEGER *
ai
);

930 
BIGNUM
 *
ASN1_INTEGER_to_BN
(cÚ¡ 
ASN1_INTEGER
 *
ai
, BIGNUM *
bn
);

932 
ASN1_ENUMERATED_£t
(
ASN1_ENUMERATED
 *
a
, 
v
);

933 
ASN1_ENUMERATED_g‘
(
ASN1_ENUMERATED
 *
a
);

934 
ASN1_ENUMERATED
 *
BN_to_ASN1_ENUMERATED
(
BIGNUM
 *
bn
, ASN1_ENUMERATED *
ai
);

935 
BIGNUM
 *
ASN1_ENUMERATED_to_BN
(
ASN1_ENUMERATED
 *
ai
, BIGNUM *
bn
);

939 
ASN1_PRINTABLE_ty³
(cÚ¡ *
s
, 
max
);

941 
i2d_ASN1_by‹s
(
ASN1_STRING
 *
a
, **
µ
, 
g
, 
xşass
);

942 
ASN1_STRING
 *
d2i_ASN1_by‹s
(ASN1_STRING **
a
, cÚ¡ **
µ
,

943 
Ëngth
, 
Pg
, 
Pşass
);

944 
ASN1_g2b™
(
g
);

946 
ASN1_STRING
 *
d2i_ASN1_ty³_by‹s
(ASN1_STRING **
a
, cÚ¡ **
µ
,

947 
Ëngth
, 
ty³
);

950 
a¢1_Fšish
(
ASN1_CTX
 *
c
);

951 
a¢1_cÚ¡_Fšish
(
ASN1_cÚ¡_CTX
 *
c
);

954 
ASN1_g‘_objeù
(cÚ¡ **
µ
, *
¶’gth
, *
±ag
,

955 *
pşass
, 
omax
);

956 
ASN1_check_šfš™e_’d
(**
p
, 
Ën
);

957 
ASN1_cÚ¡_check_šfš™e_’d
(cÚ¡ **
p
, 
Ën
);

958 
ASN1_put_objeù
(**
µ
, 
cÚ¡ruùed
, 
Ëngth
,

959 
g
, 
xşass
);

960 
ASN1_put_eoc
(**
µ
);

961 
ASN1_objeù_size
(
cÚ¡ruùed
, 
Ëngth
, 
g
);

964 *
ASN1_dup
(
i2d_of_void
 *
i2d
, 
d2i_of_void
 *
d2i
, *
x
);

966 
	#ASN1_dup_of
(
ty³
,
i2d
,
d2i
,
x
) \

967 ((
ty³
*)
	`ASN1_dup
(
	`CHECKED_I2D_OF
Ñy³, 
i2d
), \

968 
	`CHECKED_D2I_OF
(
ty³
, 
d2i
), \

969 
	`CHECKED_PTR_OF
(
ty³
, 
x
)))

	)

971 
	#ASN1_dup_of_cÚ¡
(
ty³
,
i2d
,
d2i
,
x
) \

972 ((
ty³
*)
	`ASN1_dup
(
	`CHECKED_I2D_OF
(cÚ¡y³, 
i2d
), \

973 
	`CHECKED_D2I_OF
(
ty³
, 
d2i
), \

974 
	`CHECKED_PTR_OF
(cÚ¡ 
ty³
, 
x
)))

	)

976 *
ASN1_™em_dup
(cÚ¡ 
ASN1_ITEM
 *
™
, *
x
);

980 
	#M_ASN1_Ãw_of
(
ty³
èÑy³ *)
	`ASN1_™em_Ãw
(
	`ASN1_ITEM_½Œ
Ñy³))

	)

981 
	#M_ASN1_ä“_of
(
x
, 
ty³
) \

982 
	`ASN1_™em_ä“
(
	`CHECKED_PTR_OF
(
ty³
, 
x
), 
	`ASN1_ITEM_½Œ
Ñy³))

	)

984 #iâdeà
OPENSSL_NO_FP_API


985 *
ASN1_d2i_å
(*(*
xÃw
è(), 
d2i_of_void
 *
d2i
, 
FILE
 *
š
, **
x
);

987 
	#ASN1_d2i_å_of
(
ty³
,
xÃw
,
d2i
,
š
,
x
) \

988 ((
ty³
*)
	`ASN1_d2i_å
(
	`CHECKED_NEW_OF
Ñy³, 
xÃw
), \

989 
	`CHECKED_D2I_OF
(
ty³
, 
d2i
), \

990 
š
, \

991 
	`CHECKED_PPTR_OF
(
ty³
, 
x
)))

	)

993 *
ASN1_™em_d2i_å
(cÚ¡ 
ASN1_ITEM
 *
™
, 
FILE
 *
š
, *
x
);

994 
ASN1_i2d_å
(
i2d_of_void
 *
i2d
, 
FILE
 *
out
, *
x
);

996 
	#ASN1_i2d_å_of
(
ty³
,
i2d
,
out
,
x
) \

997 (
	`ASN1_i2d_å
(
	`CHECKED_I2D_OF
(
ty³
, 
i2d
), \

998 
out
, \

999 
	`CHECKED_PTR_OF
(
ty³
, 
x
)))

	)

1001 
	#ASN1_i2d_å_of_cÚ¡
(
ty³
,
i2d
,
out
,
x
) \

1002 (
	`ASN1_i2d_å
(
	`CHECKED_I2D_OF
(cÚ¡ 
ty³
, 
i2d
), \

1003 
out
, \

1004 
	`CHECKED_PTR_OF
(cÚ¡ 
ty³
, 
x
)))

	)

1006 
ASN1_™em_i2d_å
(cÚ¡ 
ASN1_ITEM
 *
™
, 
FILE
 *
out
, *
x
);

1007 
ASN1_STRING_´št_ex_å
(
FILE
 *
å
, 
ASN1_STRING
 *
¡r
, 
æags
);

1010 
ASN1_STRING_to_UTF8
(**
out
, 
ASN1_STRING
 *
š
);

1012 #iâdeà
OPENSSL_NO_BIO


1013 *
ASN1_d2i_bio
(*(*
xÃw
è(), 
d2i_of_void
 *
d2i
, 
BIO
 *
š
, **
x
);

1015 
	#ASN1_d2i_bio_of
(
ty³
,
xÃw
,
d2i
,
š
,
x
) \

1016 ((
ty³
*)
	`ASN1_d2i_bio
Ğ
	`CHECKED_NEW_OF
Ñy³, 
xÃw
), \

1017 
	`CHECKED_D2I_OF
(
ty³
, 
d2i
), \

1018 
š
, \

1019 
	`CHECKED_PPTR_OF
(
ty³
, 
x
)))

	)

1021 *
ASN1_™em_d2i_bio
(cÚ¡ 
ASN1_ITEM
 *
™
, 
BIO
 *
š
, *
x
);

1022 
ASN1_i2d_bio
(
i2d_of_void
 *
i2d
, 
BIO
 *
out
, *
x
);

1024 
	#ASN1_i2d_bio_of
(
ty³
,
i2d
,
out
,
x
) \

1025 (
	`ASN1_i2d_bio
(
	`CHECKED_I2D_OF
(
ty³
, 
i2d
), \

1026 
out
, \

1027 
	`CHECKED_PTR_OF
(
ty³
, 
x
)))

	)

1029 
	#ASN1_i2d_bio_of_cÚ¡
(
ty³
,
i2d
,
out
,
x
) \

1030 (
	`ASN1_i2d_bio
(
	`CHECKED_I2D_OF
(cÚ¡ 
ty³
, 
i2d
), \

1031 
out
, \

1032 
	`CHECKED_PTR_OF
(cÚ¡ 
ty³
, 
x
)))

	)

1034 
ASN1_™em_i2d_bio
(cÚ¡ 
ASN1_ITEM
 *
™
, 
BIO
 *
out
, *
x
);

1035 
ASN1_UTCTIME_´št
(
BIO
 *
å
, cÚ¡ 
ASN1_UTCTIME
 *
a
);

1036 
ASN1_GENERALIZEDTIME_´št
(
BIO
 *
å
, cÚ¡ 
ASN1_GENERALIZEDTIME
 *
a
);

1037 
ASN1_TIME_´št
(
BIO
 *
å
, cÚ¡ 
ASN1_TIME
 *
a
);

1038 
ASN1_STRING_´št
(
BIO
 *
bp
, cÚ¡ 
ASN1_STRING
 *
v
);

1039 
ASN1_STRING_´št_ex
(
BIO
 *
out
, 
ASN1_STRING
 *
¡r
, 
æags
);

1040 
ASN1_bn_´št
(
BIO
 *
bp
, cÚ¡ *
numb”
, cÚ¡ 
BIGNUM
 *
num
,

1041 *
buf
, 
off
);

1042 
ASN1_·r£
(
BIO
 *
bp
, cÚ¡ *
µ
, 
Ën
, 
šd’t
);

1043 
ASN1_·r£_dump
(
BIO
 *
bp
, cÚ¡ *
µ
, 
Ën
, 
šd’t
,

1044 
dump
);

1046 cÚ¡ *
ASN1_g2¡r
(
g
);

1050 
DECLARE_ASN1_FUNCTIONS
(
NETSCAPE_X509
)

1052 
ASN1_UNIVERSALSTRING_to_¡ršg
(
ASN1_UNIVERSALSTRING
 *
s
);

1054 
ASN1_TYPE_£t_où‘¡ršg
(
ASN1_TYPE
 *
a
, *
d©a
, 
Ën
);

1055 
ASN1_TYPE_g‘_où‘¡ršg
(
ASN1_TYPE
 *
a
, *
d©a
, 
max_Ën
);

1056 
ASN1_TYPE_£t_št_où‘¡ršg
(
ASN1_TYPE
 *
a
, 
num
,

1057 *
d©a
, 
Ën
);

1058 
ASN1_TYPE_g‘_št_où‘¡ršg
(
ASN1_TYPE
 *
a
, *
num
,

1059 *
d©a
, 
max_Ën
);

1061 
STACK_OF
(
OPENSSL_BLOCK
è*
ASN1_£q_uÅack
(cÚ¡ *
buf
, 
Ën
,

1062 
d2i_of_void
 *
d2i
,

1063 (*
ä“_func
è(
OPENSSL_BLOCK
));

1064 *
ASN1_£q_·ck
(
STACK_OF
(
OPENSSL_BLOCK
è*
§ãs
, 
i2d_of_void
 *
i2d
,

1065 **
buf
, *
Ën
);

1066 *
ASN1_uÅack_¡ršg
(
ASN1_STRING
 *
où
, 
d2i_of_void
 *
d2i
);

1067 *
ASN1_™em_uÅack
(
ASN1_STRING
 *
où
, cÚ¡ 
ASN1_ITEM
 *
™
);

1068 
ASN1_STRING
 *
ASN1_·ck_¡ršg
(*
obj
, 
i2d_of_void
 *
i2d
,

1069 
ASN1_OCTET_STRING
 **
où
);

1071 
	#ASN1_·ck_¡ršg_of
(
ty³
,
obj
,
i2d
,
où
) \

1072 (
	`ASN1_·ck_¡ršg
(
	`CHECKED_PTR_OF
(
ty³
, 
obj
), \

1073 
	`CHECKED_I2D_OF
(
ty³
, 
i2d
), \

1074 
où
))

	)

1076 
ASN1_STRING
 *
ASN1_™em_·ck
(*
obj
, cÚ¡ 
ASN1_ITEM
 *
™
,

1077 
ASN1_OCTET_STRING
 **
où
);

1079 
ASN1_STRING_£t_deçuÉ_mask
(
mask
);

1080 
ASN1_STRING_£t_deçuÉ_mask_asc
(cÚ¡ *
p
);

1081 
ASN1_STRING_g‘_deçuÉ_mask
();

1082 
ASN1_mb¡ršg_cİy
(
ASN1_STRING
 **
out
, cÚ¡ *
š
, 
Ën
,

1083 
šfÜm
, 
mask
);

1084 
ASN1_mb¡ršg_ncİy
(
ASN1_STRING
 **
out
, cÚ¡ *
š
, 
Ën
,

1085 
šfÜm
, 
mask
,

1086 
mšsize
, 
maxsize
);

1088 
ASN1_STRING
 *
ASN1_STRING_£t_by_NID
(ASN1_STRING **
out
,

1089 cÚ¡ *
š
, 
šËn
,

1090 
šfÜm
, 
nid
);

1091 
ASN1_STRING_TABLE
 *
ASN1_STRING_TABLE_g‘
(
nid
);

1092 
ASN1_STRING_TABLE_add
(, , , , );

1093 
ASN1_STRING_TABLE_ş—nup
();

1098 
ASN1_VALUE
 *
ASN1_™em_Ãw
(cÚ¡ 
ASN1_ITEM
 *
™
);

1099 
ASN1_™em_ä“
(
ASN1_VALUE
 *
v®
, cÚ¡ 
ASN1_ITEM
 *
™
);

1100 
ASN1_VALUE
 *
ASN1_™em_d2i
(ASN1_VALUE **
v®
, cÚ¡ **
š
,

1101 
Ën
, cÚ¡ 
ASN1_ITEM
 *
™
);

1102 
ASN1_™em_i2d
(
ASN1_VALUE
 *
v®
, **
out
, cÚ¡ 
ASN1_ITEM
 *
™
);

1103 
ASN1_™em_ndef_i2d
(
ASN1_VALUE
 *
v®
, **
out
,

1104 cÚ¡ 
ASN1_ITEM
 *
™
);

1106 
ASN1_add_oid_moduË
();

1108 
ASN1_TYPE
 *
ASN1_g’”©e_ncÚf
(*
¡r
, 
CONF
 *
ncÚf
);

1109 
ASN1_TYPE
 *
ASN1_g’”©e_v3
(*
¡r
, 
X509V3_CTX
 *
úf
);

1114 
	#ASN1_PCTX_FLAGS_SHOW_ABSENT
 0x001

	)

1116 
	#ASN1_PCTX_FLAGS_SHOW_SEQUENCE
 0x002

	)

1118 
	#ASN1_PCTX_FLAGS_SHOW_SSOF
 0x004

	)

1120 
	#ASN1_PCTX_FLAGS_SHOW_TYPE
 0x008

	)

1122 
	#ASN1_PCTX_FLAGS_NO_ANY_TYPE
 0x010

	)

1124 
	#ASN1_PCTX_FLAGS_NO_MSTRING_TYPE
 0x020

	)

1126 
	#ASN1_PCTX_FLAGS_NO_FIELD_NAME
 0x040

	)

1128 
	#ASN1_PCTX_FLAGS_SHOW_FIELD_STRUCT_NAME
 0x080

	)

1130 
	#ASN1_PCTX_FLAGS_NO_STRUCT_NAME
 0x100

	)

1132 
ASN1_™em_´št
(
BIO
 *
out
, 
ASN1_VALUE
 *
iæd
, 
šd’t
,

1133 cÚ¡ 
ASN1_ITEM
 *
™
, cÚ¡ 
ASN1_PCTX
 *
pùx
);

1134 
ASN1_PCTX
 *
ASN1_PCTX_Ãw
();

1135 
ASN1_PCTX_ä“
(
ASN1_PCTX
 *
p
);

1136 
ASN1_PCTX_g‘_æags
(
ASN1_PCTX
 *
p
);

1137 
ASN1_PCTX_£t_æags
(
ASN1_PCTX
 *
p
, 
æags
);

1138 
ASN1_PCTX_g‘_nm_æags
(
ASN1_PCTX
 *
p
);

1139 
ASN1_PCTX_£t_nm_æags
(
ASN1_PCTX
 *
p
, 
æags
);

1140 
ASN1_PCTX_g‘_û¹_æags
(
ASN1_PCTX
 *
p
);

1141 
ASN1_PCTX_£t_û¹_æags
(
ASN1_PCTX
 *
p
, 
æags
);

1142 
ASN1_PCTX_g‘_oid_æags
(
ASN1_PCTX
 *
p
);

1143 
ASN1_PCTX_£t_oid_æags
(
ASN1_PCTX
 *
p
, 
æags
);

1144 
ASN1_PCTX_g‘_¡r_æags
(
ASN1_PCTX
 *
p
);

1145 
ASN1_PCTX_£t_¡r_æags
(
ASN1_PCTX
 *
p
, 
æags
);

1147 
BIO_METHOD
 *
BIO_f_a¢1
();

1149 
BIO
 *
BIO_Ãw_NDEF
(BIO *
out
, 
ASN1_VALUE
 *
v®
, cÚ¡ 
ASN1_ITEM
 *
™
);

1151 
i2d_ASN1_bio_¡»am
(
BIO
 *
out
, 
ASN1_VALUE
 *
v®
, BIO *
š
, 
æags
,

1152 cÚ¡ 
ASN1_ITEM
 *
™
);

1153 
PEM_wr™e_bio_ASN1_¡»am
(
BIO
 *
out
, 
ASN1_VALUE
 *
v®
, BIO *
š
, 
æags
,

1154 cÚ¡ *
hdr
, cÚ¡ 
ASN1_ITEM
 *
™
);

1155 
SMIME_wr™e_ASN1
(
BIO
 *
bio
, 
ASN1_VALUE
 *
v®
, BIO *
d©a
, 
æags
,

1156 
ùy³_nid
, 
ecÚt_nid
,

1157 
STACK_OF
(
X509_ALGOR
è*
md®gs
, cÚ¡ 
ASN1_ITEM
 *
™
);

1158 
ASN1_VALUE
 *
SMIME_»ad_ASN1
(
BIO
 *
bio
, BIO **
bcÚt
, cÚ¡ 
ASN1_ITEM
 *
™
);

1159 
SMIME_ülf_cİy
(
BIO
 *
š
, BIO *
out
, 
æags
);

1160 
SMIME_‹xt
(
BIO
 *
š
, BIO *
out
);

1168 
ERR_lßd_ASN1_¡ršgs
();

1173 
	#ASN1_F_A2D_ASN1_OBJECT
 100

	)

1174 
	#ASN1_F_A2I_ASN1_ENUMERATED
 101

	)

1175 
	#ASN1_F_A2I_ASN1_INTEGER
 102

	)

1176 
	#ASN1_F_A2I_ASN1_STRING
 103

	)

1177 
	#ASN1_F_APPEND_EXP
 176

	)

1178 
	#ASN1_F_ASN1_BIT_STRING_SET_BIT
 183

	)

1179 
	#ASN1_F_ASN1_CB
 177

	)

1180 
	#ASN1_F_ASN1_CHECK_TLEN
 104

	)

1181 
	#ASN1_F_ASN1_COLLATE_PRIMITIVE
 105

	)

1182 
	#ASN1_F_ASN1_COLLECT
 106

	)

1183 
	#ASN1_F_ASN1_D2I_EX_PRIMITIVE
 108

	)

1184 
	#ASN1_F_ASN1_D2I_FP
 109

	)

1185 
	#ASN1_F_ASN1_D2I_READ_BIO
 107

	)

1186 
	#ASN1_F_ASN1_DIGEST
 184

	)

1187 
	#ASN1_F_ASN1_DO_ADB
 110

	)

1188 
	#ASN1_F_ASN1_DUP
 111

	)

1189 
	#ASN1_F_ASN1_ENUMERATED_SET
 112

	)

1190 
	#ASN1_F_ASN1_ENUMERATED_TO_BN
 113

	)

1191 
	#ASN1_F_ASN1_EX_C2I
 204

	)

1192 
	#ASN1_F_ASN1_FIND_END
 190

	)

1193 
	#ASN1_F_ASN1_GENERALIZEDTIME_ADJ
 216

	)

1194 
	#ASN1_F_ASN1_GENERALIZEDTIME_SET
 185

	)

1195 
	#ASN1_F_ASN1_GENERATE_V3
 178

	)

1196 
	#ASN1_F_ASN1_GET_OBJECT
 114

	)

1197 
	#ASN1_F_ASN1_HEADER_NEW
 115

	)

1198 
	#ASN1_F_ASN1_I2D_BIO
 116

	)

1199 
	#ASN1_F_ASN1_I2D_FP
 117

	)

1200 
	#ASN1_F_ASN1_INTEGER_SET
 118

	)

1201 
	#ASN1_F_ASN1_INTEGER_TO_BN
 119

	)

1202 
	#ASN1_F_ASN1_ITEM_D2I_FP
 206

	)

1203 
	#ASN1_F_ASN1_ITEM_DUP
 191

	)

1204 
	#ASN1_F_ASN1_ITEM_EX_COMBINE_NEW
 121

	)

1205 
	#ASN1_F_ASN1_ITEM_EX_D2I
 120

	)

1206 
	#ASN1_F_ASN1_ITEM_I2D_BIO
 192

	)

1207 
	#ASN1_F_ASN1_ITEM_I2D_FP
 193

	)

1208 
	#ASN1_F_ASN1_ITEM_PACK
 198

	)

1209 
	#ASN1_F_ASN1_ITEM_SIGN
 195

	)

1210 
	#ASN1_F_ASN1_ITEM_SIGN_CTX
 220

	)

1211 
	#ASN1_F_ASN1_ITEM_UNPACK
 199

	)

1212 
	#ASN1_F_ASN1_ITEM_VERIFY
 197

	)

1213 
	#ASN1_F_ASN1_MBSTRING_NCOPY
 122

	)

1214 
	#ASN1_F_ASN1_OBJECT_NEW
 123

	)

1215 
	#ASN1_F_ASN1_OUTPUT_DATA
 214

	)

1216 
	#ASN1_F_ASN1_PACK_STRING
 124

	)

1217 
	#ASN1_F_ASN1_PCTX_NEW
 205

	)

1218 
	#ASN1_F_ASN1_PKCS5_PBE_SET
 125

	)

1219 
	#ASN1_F_ASN1_SEQ_PACK
 126

	)

1220 
	#ASN1_F_ASN1_SEQ_UNPACK
 127

	)

1221 
	#ASN1_F_ASN1_SIGN
 128

	)

1222 
	#ASN1_F_ASN1_STR2TYPE
 179

	)

1223 
	#ASN1_F_ASN1_STRING_SET
 186

	)

1224 
	#ASN1_F_ASN1_STRING_TABLE_ADD
 129

	)

1225 
	#ASN1_F_ASN1_STRING_TYPE_NEW
 130

	)

1226 
	#ASN1_F_ASN1_TEMPLATE_EX_D2I
 132

	)

1227 
	#ASN1_F_ASN1_TEMPLATE_NEW
 133

	)

1228 
	#ASN1_F_ASN1_TEMPLATE_NOEXP_D2I
 131

	)

1229 
	#ASN1_F_ASN1_TIME_ADJ
 217

	)

1230 
	#ASN1_F_ASN1_TIME_SET
 175

	)

1231 
	#ASN1_F_ASN1_TYPE_GET_INT_OCTETSTRING
 134

	)

1232 
	#ASN1_F_ASN1_TYPE_GET_OCTETSTRING
 135

	)

1233 
	#ASN1_F_ASN1_UNPACK_STRING
 136

	)

1234 
	#ASN1_F_ASN1_UTCTIME_ADJ
 218

	)

1235 
	#ASN1_F_ASN1_UTCTIME_SET
 187

	)

1236 
	#ASN1_F_ASN1_VERIFY
 137

	)

1237 
	#ASN1_F_B64_READ_ASN1
 209

	)

1238 
	#ASN1_F_B64_WRITE_ASN1
 210

	)

1239 
	#ASN1_F_BIO_NEW_NDEF
 208

	)

1240 
	#ASN1_F_BITSTR_CB
 180

	)

1241 
	#ASN1_F_BN_TO_ASN1_ENUMERATED
 138

	)

1242 
	#ASN1_F_BN_TO_ASN1_INTEGER
 139

	)

1243 
	#ASN1_F_C2I_ASN1_BIT_STRING
 189

	)

1244 
	#ASN1_F_C2I_ASN1_INTEGER
 194

	)

1245 
	#ASN1_F_C2I_ASN1_OBJECT
 196

	)

1246 
	#ASN1_F_COLLECT_DATA
 140

	)

1247 
	#ASN1_F_D2I_ASN1_BIT_STRING
 141

	)

1248 
	#ASN1_F_D2I_ASN1_BOOLEAN
 142

	)

1249 
	#ASN1_F_D2I_ASN1_BYTES
 143

	)

1250 
	#ASN1_F_D2I_ASN1_GENERALIZEDTIME
 144

	)

1251 
	#ASN1_F_D2I_ASN1_HEADER
 145

	)

1252 
	#ASN1_F_D2I_ASN1_INTEGER
 146

	)

1253 
	#ASN1_F_D2I_ASN1_OBJECT
 147

	)

1254 
	#ASN1_F_D2I_ASN1_SET
 148

	)

1255 
	#ASN1_F_D2I_ASN1_TYPE_BYTES
 149

	)

1256 
	#ASN1_F_D2I_ASN1_UINTEGER
 150

	)

1257 
	#ASN1_F_D2I_ASN1_UTCTIME
 151

	)

1258 
	#ASN1_F_D2I_AUTOPRIVATEKEY
 207

	)

1259 
	#ASN1_F_D2I_NETSCAPE_RSA
 152

	)

1260 
	#ASN1_F_D2I_NETSCAPE_RSA_2
 153

	)

1261 
	#ASN1_F_D2I_PRIVATEKEY
 154

	)

1262 
	#ASN1_F_D2I_PUBLICKEY
 155

	)

1263 
	#ASN1_F_D2I_RSA_NET
 200

	)

1264 
	#ASN1_F_D2I_RSA_NET_2
 201

	)

1265 
	#ASN1_F_D2I_X509
 156

	)

1266 
	#ASN1_F_D2I_X509_CINF
 157

	)

1267 
	#ASN1_F_D2I_X509_PKEY
 159

	)

1268 
	#ASN1_F_DO_BUF
 221

	)

1269 
	#ASN1_F_I2D_ASN1_BIO_STREAM
 211

	)

1270 
	#ASN1_F_I2D_ASN1_BOOLEAN
 223

	)

1271 
	#ASN1_F_I2D_ASN1_OBJECT
 222

	)

1272 
	#ASN1_F_I2D_ASN1_SET
 188

	)

1273 
	#ASN1_F_I2D_ASN1_TIME
 160

	)

1274 
	#ASN1_F_I2D_DSA_PUBKEY
 161

	)

1275 
	#ASN1_F_I2D_EC_PUBKEY
 181

	)

1276 
	#ASN1_F_I2D_PRIVATEKEY
 163

	)

1277 
	#ASN1_F_I2D_PUBLICKEY
 164

	)

1278 
	#ASN1_F_I2D_RSA_NET
 162

	)

1279 
	#ASN1_F_I2D_RSA_PUBKEY
 165

	)

1280 
	#ASN1_F_LONG_C2I
 166

	)

1281 
	#ASN1_F_OID_MODULE_INIT
 174

	)

1282 
	#ASN1_F_PARSE_TAGGING
 182

	)

1283 
	#ASN1_F_PKCS5_PBE2_SET_IV
 167

	)

1284 
	#ASN1_F_PKCS5_PBE_SET
 202

	)

1285 
	#ASN1_F_PKCS5_PBE_SET0_ALGOR
 215

	)

1286 
	#ASN1_F_PKCS5_PBKDF2_SET
 219

	)

1287 
	#ASN1_F_SMIME_READ_ASN1
 212

	)

1288 
	#ASN1_F_SMIME_TEXT
 213

	)

1289 
	#ASN1_F_X509_CINF_NEW
 168

	)

1290 
	#ASN1_F_X509_CRL_ADD0_REVOKED
 169

	)

1291 
	#ASN1_F_X509_INFO_NEW
 170

	)

1292 
	#ASN1_F_X509_NAME_ENCODE
 203

	)

1293 
	#ASN1_F_X509_NAME_EX_D2I
 158

	)

1294 
	#ASN1_F_X509_NAME_EX_NEW
 171

	)

1295 
	#ASN1_F_X509_NEW
 172

	)

1296 
	#ASN1_F_X509_PKEY_NEW
 173

	)

1299 
	#ASN1_R_ADDING_OBJECT
 171

	)

1300 
	#ASN1_R_ASN1_PARSE_ERROR
 203

	)

1301 
	#ASN1_R_ASN1_SIG_PARSE_ERROR
 204

	)

1302 
	#ASN1_R_AUX_ERROR
 100

	)

1303 
	#ASN1_R_BAD_CLASS
 101

	)

1304 
	#ASN1_R_BAD_OBJECT_HEADER
 102

	)

1305 
	#ASN1_R_BAD_PASSWORD_READ
 103

	)

1306 
	#ASN1_R_BAD_TAG
 104

	)

1307 
	#ASN1_R_BMPSTRING_IS_WRONG_LENGTH
 214

	)

1308 
	#ASN1_R_BN_LIB
 105

	)

1309 
	#ASN1_R_BOOLEAN_IS_WRONG_LENGTH
 106

	)

1310 
	#ASN1_R_BUFFER_TOO_SMALL
 107

	)

1311 
	#ASN1_R_CIPHER_HAS_NO_OBJECT_IDENTIFIER
 108

	)

1312 
	#ASN1_R_CONTEXT_NOT_INITIALISED
 217

	)

1313 
	#ASN1_R_DATA_IS_WRONG
 109

	)

1314 
	#ASN1_R_DECODE_ERROR
 110

	)

1315 
	#ASN1_R_DECODING_ERROR
 111

	)

1316 
	#ASN1_R_DEPTH_EXCEEDED
 174

	)

1317 
	#ASN1_R_DIGEST_AND_KEY_TYPE_NOT_SUPPORTED
 198

	)

1318 
	#ASN1_R_ENCODE_ERROR
 112

	)

1319 
	#ASN1_R_ERROR_GETTING_TIME
 173

	)

1320 
	#ASN1_R_ERROR_LOADING_SECTION
 172

	)

1321 
	#ASN1_R_ERROR_PARSING_SET_ELEMENT
 113

	)

1322 
	#ASN1_R_ERROR_SETTING_CIPHER_PARAMS
 114

	)

1323 
	#ASN1_R_EXPECTING_AN_INTEGER
 115

	)

1324 
	#ASN1_R_EXPECTING_AN_OBJECT
 116

	)

1325 
	#ASN1_R_EXPECTING_A_BOOLEAN
 117

	)

1326 
	#ASN1_R_EXPECTING_A_TIME
 118

	)

1327 
	#ASN1_R_EXPLICIT_LENGTH_MISMATCH
 119

	)

1328 
	#ASN1_R_EXPLICIT_TAG_NOT_CONSTRUCTED
 120

	)

1329 
	#ASN1_R_FIELD_MISSING
 121

	)

1330 
	#ASN1_R_FIRST_NUM_TOO_LARGE
 122

	)

1331 
	#ASN1_R_HEADER_TOO_LONG
 123

	)

1332 
	#ASN1_R_ILLEGAL_BITSTRING_FORMAT
 175

	)

1333 
	#ASN1_R_ILLEGAL_BOOLEAN
 176

	)

1334 
	#ASN1_R_ILLEGAL_CHARACTERS
 124

	)

1335 
	#ASN1_R_ILLEGAL_FORMAT
 177

	)

1336 
	#ASN1_R_ILLEGAL_HEX
 178

	)

1337 
	#ASN1_R_ILLEGAL_IMPLICIT_TAG
 179

	)

1338 
	#ASN1_R_ILLEGAL_INTEGER
 180

	)

1339 
	#ASN1_R_ILLEGAL_NESTED_TAGGING
 181

	)

1340 
	#ASN1_R_ILLEGAL_NULL
 125

	)

1341 
	#ASN1_R_ILLEGAL_NULL_VALUE
 182

	)

1342 
	#ASN1_R_ILLEGAL_OBJECT
 183

	)

1343 
	#ASN1_R_ILLEGAL_OPTIONAL_ANY
 126

	)

1344 
	#ASN1_R_ILLEGAL_OPTIONS_ON_ITEM_TEMPLATE
 170

	)

1345 
	#ASN1_R_ILLEGAL_TAGGED_ANY
 127

	)

1346 
	#ASN1_R_ILLEGAL_TIME_VALUE
 184

	)

1347 
	#ASN1_R_INTEGER_NOT_ASCII_FORMAT
 185

	)

1348 
	#ASN1_R_INTEGER_TOO_LARGE_FOR_LONG
 128

	)

1349 
	#ASN1_R_INVALID_BIT_STRING_BITS_LEFT
 220

	)

1350 
	#ASN1_R_INVALID_BMPSTRING_LENGTH
 129

	)

1351 
	#ASN1_R_INVALID_DIGIT
 130

	)

1352 
	#ASN1_R_INVALID_MIME_TYPE
 205

	)

1353 
	#ASN1_R_INVALID_MODIFIER
 186

	)

1354 
	#ASN1_R_INVALID_NUMBER
 187

	)

1355 
	#ASN1_R_INVALID_OBJECT_ENCODING
 216

	)

1356 
	#ASN1_R_INVALID_SEPARATOR
 131

	)

1357 
	#ASN1_R_INVALID_TIME_FORMAT
 132

	)

1358 
	#ASN1_R_INVALID_UNIVERSALSTRING_LENGTH
 133

	)

1359 
	#ASN1_R_INVALID_UTF8STRING
 134

	)

1360 
	#ASN1_R_IV_TOO_LARGE
 135

	)

1361 
	#ASN1_R_LENGTH_ERROR
 136

	)

1362 
	#ASN1_R_LIST_ERROR
 188

	)

1363 
	#ASN1_R_MIME_NO_CONTENT_TYPE
 206

	)

1364 
	#ASN1_R_MIME_PARSE_ERROR
 207

	)

1365 
	#ASN1_R_MIME_SIG_PARSE_ERROR
 208

	)

1366 
	#ASN1_R_MISSING_EOC
 137

	)

1367 
	#ASN1_R_MISSING_SECOND_NUMBER
 138

	)

1368 
	#ASN1_R_MISSING_VALUE
 189

	)

1369 
	#ASN1_R_MSTRING_NOT_UNIVERSAL
 139

	)

1370 
	#ASN1_R_MSTRING_WRONG_TAG
 140

	)

1371 
	#ASN1_R_NESTED_ASN1_STRING
 197

	)

1372 
	#ASN1_R_NESTED_TOO_DEEP
 219

	)

1373 
	#ASN1_R_NON_HEX_CHARACTERS
 141

	)

1374 
	#ASN1_R_NOT_ASCII_FORMAT
 190

	)

1375 
	#ASN1_R_NOT_ENOUGH_DATA
 142

	)

1376 
	#ASN1_R_NO_CONTENT_TYPE
 209

	)

1377 
	#ASN1_R_NO_DEFAULT_DIGEST
 201

	)

1378 
	#ASN1_R_NO_MATCHING_CHOICE_TYPE
 143

	)

1379 
	#ASN1_R_NO_MULTIPART_BODY_FAILURE
 210

	)

1380 
	#ASN1_R_NO_MULTIPART_BOUNDARY
 211

	)

1381 
	#ASN1_R_NO_SIG_CONTENT_TYPE
 212

	)

1382 
	#ASN1_R_NULL_IS_WRONG_LENGTH
 144

	)

1383 
	#ASN1_R_OBJECT_NOT_ASCII_FORMAT
 191

	)

1384 
	#ASN1_R_ODD_NUMBER_OF_CHARS
 145

	)

1385 
	#ASN1_R_PRIVATE_KEY_HEADER_MISSING
 146

	)

1386 
	#ASN1_R_SECOND_NUMBER_TOO_LARGE
 147

	)

1387 
	#ASN1_R_SEQUENCE_LENGTH_MISMATCH
 148

	)

1388 
	#ASN1_R_SEQUENCE_NOT_CONSTRUCTED
 149

	)

1389 
	#ASN1_R_SEQUENCE_OR_SET_NEEDS_CONFIG
 192

	)

1390 
	#ASN1_R_SHORT_LINE
 150

	)

1391 
	#ASN1_R_SIG_INVALID_MIME_TYPE
 213

	)

1392 
	#ASN1_R_STREAMING_NOT_SUPPORTED
 202

	)

1393 
	#ASN1_R_STRING_TOO_LONG
 151

	)

1394 
	#ASN1_R_STRING_TOO_SHORT
 152

	)

1395 
	#ASN1_R_TAG_VALUE_TOO_HIGH
 153

	)

1396 
	#ASN1_R_THE_ASN1_OBJECT_IDENTIFIER_IS_NOT_KNOWN_FOR_THIS_MD
 154

	)

1397 
	#ASN1_R_TIME_NOT_ASCII_FORMAT
 193

	)

1398 
	#ASN1_R_TOO_LONG
 155

	)

1399 
	#ASN1_R_TYPE_NOT_CONSTRUCTED
 156

	)

1400 
	#ASN1_R_TYPE_NOT_PRIMITIVE
 218

	)

1401 
	#ASN1_R_UNABLE_TO_DECODE_RSA_KEY
 157

	)

1402 
	#ASN1_R_UNABLE_TO_DECODE_RSA_PRIVATE_KEY
 158

	)

1403 
	#ASN1_R_UNEXPECTED_EOC
 159

	)

1404 
	#ASN1_R_UNIVERSALSTRING_IS_WRONG_LENGTH
 215

	)

1405 
	#ASN1_R_UNKNOWN_FORMAT
 160

	)

1406 
	#ASN1_R_UNKNOWN_MESSAGE_DIGEST_ALGORITHM
 161

	)

1407 
	#ASN1_R_UNKNOWN_OBJECT_TYPE
 162

	)

1408 
	#ASN1_R_UNKNOWN_PUBLIC_KEY_TYPE
 163

	)

1409 
	#ASN1_R_UNKNOWN_SIGNATURE_ALGORITHM
 199

	)

1410 
	#ASN1_R_UNKNOWN_TAG
 194

	)

1411 
	#ASN1_R_UNKOWN_FORMAT
 195

	)

1412 
	#ASN1_R_UNSUPPORTED_ANY_DEFINED_BY_TYPE
 164

	)

1413 
	#ASN1_R_UNSUPPORTED_CIPHER
 165

	)

1414 
	#ASN1_R_UNSUPPORTED_ENCRYPTION_ALGORITHM
 166

	)

1415 
	#ASN1_R_UNSUPPORTED_PUBLIC_KEY_TYPE
 167

	)

1416 
	#ASN1_R_UNSUPPORTED_TYPE
 196

	)

1417 
	#ASN1_R_WRONG_PUBLIC_KEY_TYPE
 200

	)

1418 
	#ASN1_R_WRONG_TAG
 168

	)

1419 
	#ASN1_R_WRONG_TYPE
 169

	)

1421 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/dh.h

59 #iâdeà
HEADER_DH_H


60 
	#HEADER_DH_H


	)

62 
	~<İ’s¦/e_os2.h
>

64 #ifdeà
OPENSSL_NO_DH


65 #”rÜ 
DH
 
is
 
di§bËd
.

68 #iâdeà
OPENSSL_NO_BIO


69 
	~<İ’s¦/bio.h
>

71 
	~<İ’s¦/os¦_typ.h
>

72 #iâdeà
OPENSSL_NO_DEPRECATED


73 
	~<İ’s¦/bn.h
>

76 #iâdeà
OPENSSL_DH_MAX_MODULUS_BITS


77 
	#OPENSSL_DH_MAX_MODULUS_BITS
 10000

	)

80 
	#DH_FLAG_CACHE_MONT_P
 0x01

	)

90 
	#DH_FLAG_NO_EXP_CONSTTIME
 0x02

	)

99 
	#DH_FLAG_FIPS_METHOD
 0x0400

	)

107 
	#DH_FLAG_NON_FIPS_ALLOW
 0x0400

	)

109 #ifdeà 
__ılu¥lus


117 
	sdh_m‘hod
 {

118 cÚ¡ *
Çme
;

120 (*
g’”©e_key
è(
DH
 *
dh
);

121 (*
compu‹_key
è(*
key
, cÚ¡ 
BIGNUM
 *
pub_key
, 
DH
 *
dh
);

123 (*
bn_mod_exp
è(cÚ¡ 
DH
 *
dh
, 
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
,

124 cÚ¡ 
BIGNUM
 *
p
, cÚ¡ BIGNUM *
m
, 
BN_CTX
 *
ùx
,

125 
BN_MONT_CTX
 *
m_ùx
);

126 (*
š™
è(
DH
 *
dh
);

127 (*
fšish
è(
DH
 *
dh
);

128 
æags
;

129 *
­p_d©a
;

131 (*
g’”©e_·¿ms
è(
DH
 *
dh
, 
´ime_Ën
, 
g’”©Ü
,

132 
BN_GENCB
 *
cb
);

135 
	sdh_¡
 {

140 
·d
;

141 
v”siÚ
;

142 
BIGNUM
 *
p
;

143 
BIGNUM
 *
g
;

144 
Ëngth
;

145 
BIGNUM
 *
pub_key
;

146 
BIGNUM
 *
´iv_key
;

147 
æags
;

148 
BN_MONT_CTX
 *
m‘hod_mÚt_p
;

150 
BIGNUM
 *
q
;

151 
BIGNUM
 *
j
;

152 *
£ed
;

153 
£edËn
;

154 
BIGNUM
 *
couÁ”
;

155 
»ã»nûs
;

156 
CRYPTO_EX_DATA
 
ex_d©a
;

157 cÚ¡ 
DH_METHOD
 *
m‘h
;

158 
ENGINE
 *
’gše
;

161 
	#DH_GENERATOR_2
 2

	)

163 
	#DH_GENERATOR_5
 5

	)

166 
	#DH_CHECK_P_NOT_PRIME
 0x01

	)

167 
	#DH_CHECK_P_NOT_SAFE_PRIME
 0x02

	)

168 
	#DH_UNABLE_TO_CHECK_GENERATOR
 0x04

	)

169 
	#DH_NOT_SUITABLE_GENERATOR
 0x08

	)

170 
	#DH_CHECK_Q_NOT_PRIME
 0x10

	)

171 
	#DH_CHECK_INVALID_Q_VALUE
 0x20

	)

172 
	#DH_CHECK_INVALID_J_VALUE
 0x40

	)

175 
	#DH_CHECK_PUBKEY_TOO_SMALL
 0x01

	)

176 
	#DH_CHECK_PUBKEY_TOO_LARGE
 0x02

	)

177 
	#DH_CHECK_PUBKEY_INVALID
 0x04

	)

183 
	#DH_CHECK_P_NOT_STRONG_PRIME
 
DH_CHECK_P_NOT_SAFE_PRIME


	)

185 
	#d2i_DH·¿ms_å
(
å
,
x
) \

186 (
DH
 *)
	`ASN1_d2i_å
((*(*)())
DH_Ãw
, \

187 (*(*)())
d2i_DH·¿ms
, \

188 (
å
), \

189 (**)(
x
))

	)

190 
	#i2d_DH·¿ms_å
(
å
,
x
) \

191 
	`ASN1_i2d_å
(
i2d_DH·¿ms
,(
å
), (*)(
x
))

	)

192 
	#d2i_DH·¿ms_bio
(
bp
,
x
) \

193 
	`ASN1_d2i_bio_of
(
DH
, 
DH_Ãw
, 
d2i_DH·¿ms
, 
bp
, 
x
)

	)

194 
	#i2d_DH·¿ms_bio
(
bp
,
x
) \

195 
	`ASN1_i2d_bio_of_cÚ¡
(
DH
,
i2d_DH·¿ms
,
bp
,
x
)

	)

197 
	#d2i_DHx·¿ms_å
(
å
,
x
) \

198 (
DH
 *)
	`ASN1_d2i_å
((*(*)())
DH_Ãw
, \

199 (*(*)())
d2i_DHx·¿ms
, \

200 (
å
), \

201 (**)(
x
))

	)

202 
	#i2d_DHx·¿ms_å
(
å
,
x
) \

203 
	`ASN1_i2d_å
(
i2d_DHx·¿ms
,(
å
), (*)(
x
))

	)

204 
	#d2i_DHx·¿ms_bio
(
bp
,
x
) \

205 
	`ASN1_d2i_bio_of
(
DH
, 
DH_Ãw
, 
d2i_DHx·¿ms
, 
bp
, 
x
)

	)

206 
	#i2d_DHx·¿ms_bio
(
bp
,
x
) \

207 
	`ASN1_i2d_bio_of_cÚ¡
(
DH
, 
i2d_DHx·¿ms
, 
bp
, 
x
)

	)

209 
DH
 *
DH·¿ms_dup
(DH *);

211 cÚ¡ 
DH_METHOD
 *
DH_O³nSSL
();

213 
DH_£t_deçuÉ_m‘hod
(cÚ¡ 
DH_METHOD
 *
m‘h
);

214 cÚ¡ 
DH_METHOD
 *
DH_g‘_deçuÉ_m‘hod
();

215 
DH_£t_m‘hod
(
DH
 *
dh
, cÚ¡ 
DH_METHOD
 *
m‘h
);

216 
DH
 *
DH_Ãw_m‘hod
(
ENGINE
 *
’gše
);

218 
DH
 *
DH_Ãw
();

219 
DH_ä“
(
DH
 *
dh
);

220 
DH_up_»f
(
DH
 *
dh
);

221 
DH_size
(cÚ¡ 
DH
 *
dh
);

222 
DH_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

223 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

224 
DH_£t_ex_d©a
(
DH
 *
d
, 
idx
, *
¬g
);

225 *
DH_g‘_ex_d©a
(
DH
 *
d
, 
idx
);

228 #iâdeà
OPENSSL_NO_DEPRECATED


229 
DH
 *
DH_g’”©e_·¿m‘”s
(
´ime_Ën
, 
g’”©Ü
,

230 (*
ÿÎback
è(, , *), *
cb_¬g
);

234 
DH_g’”©e_·¿m‘”s_ex
(
DH
 *
dh
, 
´ime_Ën
, 
g’”©Ü
,

235 
BN_GENCB
 *
cb
);

237 
DH_check
(cÚ¡ 
DH
 *
dh
, *
codes
);

238 
DH_check_pub_key
(cÚ¡ 
DH
 *
dh
, cÚ¡ 
BIGNUM
 *
pub_key
, *
codes
);

239 
DH_g’”©e_key
(
DH
 *
dh
);

240 
DH_compu‹_key
(*
key
, cÚ¡ 
BIGNUM
 *
pub_key
, 
DH
 *
dh
);

241 
DH_compu‹_key_·dded
(*
key
, cÚ¡ 
BIGNUM
 *
pub_key
, 
DH
 *
dh
);

242 
DH
 *
d2i_DH·¿ms
(DH **
a
, cÚ¡ **
µ
, 
Ëngth
);

243 
i2d_DH·¿ms
(cÚ¡ 
DH
 *
a
, **
µ
);

244 
DH
 *
d2i_DHx·¿ms
(DH **
a
, cÚ¡ **
µ
, 
Ëngth
);

245 
i2d_DHx·¿ms
(cÚ¡ 
DH
 *
a
, **
µ
);

246 #iâdeà
OPENSSL_NO_FP_API


247 
DH·¿ms_´št_å
(
FILE
 *
å
, cÚ¡ 
DH
 *
x
);

249 #iâdeà
OPENSSL_NO_BIO


250 
DH·¿ms_´št
(
BIO
 *
bp
, cÚ¡ 
DH
 *
x
);

252 
DH·¿ms_´št
(*
bp
, cÚ¡ 
DH
 *
x
);

256 
DH
 *
DH_g‘_1024_160
();

257 
DH
 *
DH_g‘_2048_224
();

258 
DH
 *
DH_g‘_2048_256
();

260 #iâdeà
OPENSSL_NO_CMS


262 
DH_KDF_X9_42
(*
out
, 
size_t
 
ou’
,

263 cÚ¡ *
Z
, 
size_t
 
ZËn
,

264 
ASN1_OBJECT
 *
key_oid
,

265 cÚ¡ *
ukm
, 
size_t
 
ukmËn
, cÚ¡ 
EVP_MD
 *
md
);

268 
	#EVP_PKEY_CTX_£t_dh_·¿mg’_´ime_Ën
(
ùx
, 
Ën
) \

269 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DH
, 
EVP_PKEY_OP_PARAMGEN
, \

270 
EVP_PKEY_CTRL_DH_PARAMGEN_PRIME_LEN
, 
Ën
, 
NULL
)

	)

272 
	#EVP_PKEY_CTX_£t_dh_·¿mg’_sub´ime_Ën
(
ùx
, 
Ën
) \

273 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DH
, 
EVP_PKEY_OP_PARAMGEN
, \

274 
EVP_PKEY_CTRL_DH_PARAMGEN_SUBPRIME_LEN
, 
Ën
, 
NULL
)

	)

276 
	#EVP_PKEY_CTX_£t_dh_·¿mg’_ty³
(
ùx
, 
typ
) \

277 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DH
, 
EVP_PKEY_OP_PARAMGEN
, \

278 
EVP_PKEY_CTRL_DH_PARAMGEN_TYPE
, 
typ
, 
NULL
)

	)

280 
	#EVP_PKEY_CTX_£t_dh_·¿mg’_g’”©Ü
(
ùx
, 
g’
) \

281 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DH
, 
EVP_PKEY_OP_PARAMGEN
, \

282 
EVP_PKEY_CTRL_DH_PARAMGEN_GENERATOR
, 
g’
, 
NULL
)

	)

284 
	#EVP_PKEY_CTX_£t_dh_rfc5114
(
ùx
, 
g’
) \

285 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, 
EVP_PKEY_OP_PARAMGEN
, \

286 
EVP_PKEY_CTRL_DH_RFC5114
, 
g’
, 
NULL
)

	)

288 
	#EVP_PKEY_CTX_£t_dhx_rfc5114
(
ùx
, 
g’
) \

289 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, 
EVP_PKEY_OP_PARAMGEN
, \

290 
EVP_PKEY_CTRL_DH_RFC5114
, 
g’
, 
NULL
)

	)

292 
	#EVP_PKEY_CTX_£t_dh_kdf_ty³
(
ùx
, 
kdf
) \

293 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

294 
EVP_PKEY_OP_DERIVE
, \

295 
EVP_PKEY_CTRL_DH_KDF_TYPE
, 
kdf
, 
NULL
)

	)

297 
	#EVP_PKEY_CTX_g‘_dh_kdf_ty³
(
ùx
) \

298 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

299 
EVP_PKEY_OP_DERIVE
, \

300 
EVP_PKEY_CTRL_DH_KDF_TYPE
, -2, 
NULL
)

	)

302 
	#EVP_PKEY_CTX_£t0_dh_kdf_oid
(
ùx
, 
oid
) \

303 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

304 
EVP_PKEY_OP_DERIVE
, \

305 
EVP_PKEY_CTRL_DH_KDF_OID
, 0, (*)
oid
)

	)

307 
	#EVP_PKEY_CTX_g‘0_dh_kdf_oid
(
ùx
, 
poid
) \

308 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

309 
EVP_PKEY_OP_DERIVE
, \

310 
EVP_PKEY_CTRL_GET_DH_KDF_OID
, 0, (*)
poid
)

	)

312 
	#EVP_PKEY_CTX_£t_dh_kdf_md
(
ùx
, 
md
) \

313 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

314 
EVP_PKEY_OP_DERIVE
, \

315 
EVP_PKEY_CTRL_DH_KDF_MD
, 0, (*)
md
)

	)

317 
	#EVP_PKEY_CTX_g‘_dh_kdf_md
(
ùx
, 
pmd
) \

318 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

319 
EVP_PKEY_OP_DERIVE
, \

320 
EVP_PKEY_CTRL_GET_DH_KDF_MD
, 0, (*)
pmd
)

	)

322 
	#EVP_PKEY_CTX_£t_dh_kdf_ou’
(
ùx
, 
Ën
) \

323 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

324 
EVP_PKEY_OP_DERIVE
, \

325 
EVP_PKEY_CTRL_DH_KDF_OUTLEN
, 
Ën
, 
NULL
)

	)

327 
	#EVP_PKEY_CTX_g‘_dh_kdf_ou’
(
ùx
, 
¶’
) \

328 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

329 
EVP_PKEY_OP_DERIVE
, \

330 
EVP_PKEY_CTRL_GET_DH_KDF_OUTLEN
, 0, (*)
¶’
)

	)

332 
	#EVP_PKEY_CTX_£t0_dh_kdf_ukm
(
ùx
, 
p
, 
¶’
) \

333 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

334 
EVP_PKEY_OP_DERIVE
, \

335 
EVP_PKEY_CTRL_DH_KDF_UKM
, 
¶’
, (*)
p
)

	)

337 
	#EVP_PKEY_CTX_g‘0_dh_kdf_ukm
(
ùx
, 
p
) \

338 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DHX
, \

339 
EVP_PKEY_OP_DERIVE
, \

340 
EVP_PKEY_CTRL_GET_DH_KDF_UKM
, 0, (*)
p
)

	)

342 
	#EVP_PKEY_CTRL_DH_PARAMGEN_PRIME_LEN
 (
EVP_PKEY_ALG_CTRL
 + 1)

	)

343 
	#EVP_PKEY_CTRL_DH_PARAMGEN_GENERATOR
 (
EVP_PKEY_ALG_CTRL
 + 2)

	)

344 
	#EVP_PKEY_CTRL_DH_RFC5114
 (
EVP_PKEY_ALG_CTRL
 + 3)

	)

345 
	#EVP_PKEY_CTRL_DH_PARAMGEN_SUBPRIME_LEN
 (
EVP_PKEY_ALG_CTRL
 + 4)

	)

346 
	#EVP_PKEY_CTRL_DH_PARAMGEN_TYPE
 (
EVP_PKEY_ALG_CTRL
 + 5)

	)

347 
	#EVP_PKEY_CTRL_DH_KDF_TYPE
 (
EVP_PKEY_ALG_CTRL
 + 6)

	)

348 
	#EVP_PKEY_CTRL_DH_KDF_MD
 (
EVP_PKEY_ALG_CTRL
 + 7)

	)

349 
	#EVP_PKEY_CTRL_GET_DH_KDF_MD
 (
EVP_PKEY_ALG_CTRL
 + 8)

	)

350 
	#EVP_PKEY_CTRL_DH_KDF_OUTLEN
 (
EVP_PKEY_ALG_CTRL
 + 9)

	)

351 
	#EVP_PKEY_CTRL_GET_DH_KDF_OUTLEN
 (
EVP_PKEY_ALG_CTRL
 + 10)

	)

352 
	#EVP_PKEY_CTRL_DH_KDF_UKM
 (
EVP_PKEY_ALG_CTRL
 + 11)

	)

353 
	#EVP_PKEY_CTRL_GET_DH_KDF_UKM
 (
EVP_PKEY_ALG_CTRL
 + 12)

	)

354 
	#EVP_PKEY_CTRL_DH_KDF_OID
 (
EVP_PKEY_ALG_CTRL
 + 13)

	)

355 
	#EVP_PKEY_CTRL_GET_DH_KDF_OID
 (
EVP_PKEY_ALG_CTRL
 + 14)

	)

358 
	#EVP_PKEY_DH_KDF_NONE
 1

	)

359 
	#EVP_PKEY_DH_KDF_X9_42
 2

	)

366 
ERR_lßd_DH_¡ršgs
();

371 
	#DH_F_COMPUTE_KEY
 102

	)

372 
	#DH_F_DHPARAMS_PRINT_FP
 101

	)

373 
	#DH_F_DH_BUILTIN_GENPARAMS
 106

	)

374 
	#DH_F_DH_CMS_DECRYPT
 117

	)

375 
	#DH_F_DH_CMS_SET_PEERKEY
 118

	)

376 
	#DH_F_DH_CMS_SET_SHARED_INFO
 119

	)

377 
	#DH_F_DH_COMPUTE_KEY
 114

	)

378 
	#DH_F_DH_GENERATE_KEY
 115

	)

379 
	#DH_F_DH_GENERATE_PARAMETERS_EX
 116

	)

380 
	#DH_F_DH_NEW_METHOD
 105

	)

381 
	#DH_F_DH_PARAM_DECODE
 107

	)

382 
	#DH_F_DH_PRIV_DECODE
 110

	)

383 
	#DH_F_DH_PRIV_ENCODE
 111

	)

384 
	#DH_F_DH_PUB_DECODE
 108

	)

385 
	#DH_F_DH_PUB_ENCODE
 109

	)

386 
	#DH_F_DO_DH_PRINT
 100

	)

387 
	#DH_F_GENERATE_KEY
 103

	)

388 
	#DH_F_GENERATE_PARAMETERS
 104

	)

389 
	#DH_F_PKEY_DH_DERIVE
 112

	)

390 
	#DH_F_PKEY_DH_KEYGEN
 113

	)

393 
	#DH_R_BAD_GENERATOR
 101

	)

394 
	#DH_R_BN_DECODE_ERROR
 109

	)

395 
	#DH_R_BN_ERROR
 106

	)

396 
	#DH_R_DECODE_ERROR
 104

	)

397 
	#DH_R_INVALID_PUBKEY
 102

	)

398 
	#DH_R_KDF_PARAMETER_ERROR
 112

	)

399 
	#DH_R_KEYS_NOT_SET
 108

	)

400 
	#DH_R_KEY_SIZE_TOO_SMALL
 110

	)

401 
	#DH_R_MODULUS_TOO_LARGE
 103

	)

402 
	#DH_R_NON_FIPS_METHOD
 111

	)

403 
	#DH_R_NO_PARAMETERS_SET
 107

	)

404 
	#DH_R_NO_PRIVATE_VALUE
 100

	)

405 
	#DH_R_PARAMETER_ENCODING_ERROR
 105

	)

406 
	#DH_R_PEER_KEY_ERROR
 113

	)

407 
	#DH_R_SHARED_INFO_ERROR
 114

	)

409 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/dsa.h

65 #iâdeà
HEADER_DSA_H


66 
	#HEADER_DSA_H


	)

68 
	~<İ’s¦/e_os2.h
>

70 #ifdeà
OPENSSL_NO_DSA


71 #”rÜ 
DSA
 
is
 
di§bËd
.

74 #iâdeà
OPENSSL_NO_BIO


75 
	~<İ’s¦/bio.h
>

77 
	~<İ’s¦/üy±o.h
>

78 
	~<İ’s¦/os¦_typ.h
>

80 #iâdeà
OPENSSL_NO_DEPRECATED


81 
	~<İ’s¦/bn.h
>

82 #iâdeà
OPENSSL_NO_DH


83 
	~<İ’s¦/dh.h
>

87 #iâdeà
OPENSSL_DSA_MAX_MODULUS_BITS


88 
	#OPENSSL_DSA_MAX_MODULUS_BITS
 10000

	)

91 
	#DSA_FLAG_CACHE_MONT_P
 0x01

	)

97 
	#DSA_FLAG_NO_EXP_CONSTTIME
 0x02

	)

106 
	#DSA_FLAG_FIPS_METHOD
 0x0400

	)

114 
	#DSA_FLAG_NON_FIPS_ALLOW
 0x0400

	)

116 #ifdeà 
__ılu¥lus


124 
	sDSA_SIG_¡
 {

125 
BIGNUM
 *
r
;

126 
BIGNUM
 *
s
;

127 } 
	tDSA_SIG
;

129 
	sd§_m‘hod
 {

130 cÚ¡ *
Çme
;

131 
DSA_SIG
 *(*
d§_do_sign
è(cÚ¡ *
dg¡
, 
dËn
, 
DSA
 *
d§
);

132 (*
d§_sign_£tup
è(
DSA
 *
d§
, 
BN_CTX
 *
ùx_š
, 
BIGNUM
 **
kšvp
,

133 
BIGNUM
 **
½
);

134 (*
d§_do_v”ify
è(cÚ¡ *
dg¡
, 
dg¡_Ën
,

135 
DSA_SIG
 *
sig
, 
DSA
 *
d§
);

136 (*
d§_mod_exp
è(
DSA
 *
d§
, 
BIGNUM
 *
¼
, BIGNUM *
a1
, BIGNUM *
p1
,

137 
BIGNUM
 *
a2
, BIGNUM *
p2
, BIGNUM *
m
, 
BN_CTX
 *
ùx
,

138 
BN_MONT_CTX
 *
š_mÚt
);

140 (*
bn_mod_exp
è(
DSA
 *
d§
, 
BIGNUM
 *
r
, BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

141 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
, 
BN_MONT_CTX
 *
m_ùx
);

142 (*
š™
è(
DSA
 *
d§
);

143 (*
fšish
è(
DSA
 *
d§
);

144 
æags
;

145 *
­p_d©a
;

147 (*
d§_·¿mg’
è(
DSA
 *
d§
, 
b™s
,

148 cÚ¡ *
£ed
, 
£ed_Ën
,

149 *
couÁ”_»t
, *
h_»t
,

150 
BN_GENCB
 *
cb
);

152 (*
d§_keyg’
è(
DSA
 *
d§
);

155 
	sd§_¡
 {

160 
·d
;

161 
v”siÚ
;

162 
wr™e_·¿ms
;

163 
BIGNUM
 *
p
;

164 
BIGNUM
 *
q
;

165 
BIGNUM
 *
g
;

166 
BIGNUM
 *
pub_key
;

167 
BIGNUM
 *
´iv_key
;

168 
BIGNUM
 *
kšv
;

169 
BIGNUM
 *
r
;

170 
æags
;

172 
BN_MONT_CTX
 *
m‘hod_mÚt_p
;

173 
»ã»nûs
;

174 
CRYPTO_EX_DATA
 
ex_d©a
;

175 cÚ¡ 
DSA_METHOD
 *
m‘h
;

177 
ENGINE
 *
’gše
;

180 
	#d2i_DSA·¿ms_å
(
å
,
x
è(
DSA
 *)
	`ASN1_d2i_å
((*(*)())
DSA_Ãw
, \

181 (*(*)())
d2i_DSA·¿ms
,(
å
),(**)(
x
))

	)

182 
	#i2d_DSA·¿ms_å
(
å
,
x
è
	`ASN1_i2d_å
(
i2d_DSA·¿ms
,(fp), \

183 (*)(
x
))

	)

184 
	#d2i_DSA·¿ms_bio
(
bp
,
x
è
	`ASN1_d2i_bio_of
(
DSA
,
DSA_Ãw
,
d2i_DSA·¿ms
,bp,x)

	)

185 
	#i2d_DSA·¿ms_bio
(
bp
,
x
è
	`ASN1_i2d_bio_of_cÚ¡
(
DSA
,
i2d_DSA·¿ms
,bp,x)

	)

187 
DSA
 *
DSA·¿ms_dup
(DSA *
x
);

188 
DSA_SIG
 *
DSA_SIG_Ãw
();

189 
DSA_SIG_ä“
(
DSA_SIG
 *
a
);

190 
i2d_DSA_SIG
(cÚ¡ 
DSA_SIG
 *
a
, **
µ
);

191 
DSA_SIG
 *
d2i_DSA_SIG
(DSA_SIG **
v
, cÚ¡ **
µ
, 
Ëngth
);

193 
DSA_SIG
 *
DSA_do_sign
(cÚ¡ *
dg¡
, 
dËn
, 
DSA
 *
d§
);

194 
DSA_do_v”ify
(cÚ¡ *
dg¡
, 
dg¡_Ën
,

195 
DSA_SIG
 *
sig
, 
DSA
 *
d§
);

197 cÚ¡ 
DSA_METHOD
 *
DSA_O³nSSL
();

199 
DSA_£t_deçuÉ_m‘hod
(cÚ¡ 
DSA_METHOD
 *);

200 cÚ¡ 
DSA_METHOD
 *
DSA_g‘_deçuÉ_m‘hod
();

201 
DSA_£t_m‘hod
(
DSA
 *
d§
, cÚ¡ 
DSA_METHOD
 *);

203 
DSA
 *
DSA_Ãw
();

204 
DSA
 *
DSA_Ãw_m‘hod
(
ENGINE
 *
’gše
);

205 
DSA_ä“
(
DSA
 *
r
);

207 
DSA_up_»f
(
DSA
 *
r
);

208 
DSA_size
(cÚ¡ 
DSA
 *);

210 
DSA_sign_£tup
(
DSA
 *
d§
, 
BN_CTX
 *
ùx_š
, 
BIGNUM
 **
kšvp
, BIGNUM **
½
);

211 
DSA_sign
(
ty³
, cÚ¡ *
dg¡
, 
dËn
,

212 *
sig
, *
sigËn
, 
DSA
 *
d§
);

213 
DSA_v”ify
(
ty³
, cÚ¡ *
dg¡
, 
dg¡_Ën
,

214 cÚ¡ *
sigbuf
, 
sigËn
, 
DSA
 *
d§
);

215 
DSA_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

216 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

217 
DSA_£t_ex_d©a
(
DSA
 *
d
, 
idx
, *
¬g
);

218 *
DSA_g‘_ex_d©a
(
DSA
 *
d
, 
idx
);

220 
DSA
 *
d2i_DSAPublicKey
(DSA **
a
, cÚ¡ **
µ
, 
Ëngth
);

221 
DSA
 *
d2i_DSAPriv©eKey
(DSA **
a
, cÚ¡ **
µ
, 
Ëngth
);

222 
DSA
 *
d2i_DSA·¿ms
(DSA **
a
, cÚ¡ **
µ
, 
Ëngth
);

225 #iâdeà
OPENSSL_NO_DEPRECATED


226 
DSA
 *
DSA_g’”©e_·¿m‘”s
(
b™s
,

227 *
£ed
, 
£ed_Ën
,

228 *
couÁ”_»t
, *
h_»t
, 

229 (*
ÿÎback
è(, , *), *
cb_¬g
);

233 
DSA_g’”©e_·¿m‘”s_ex
(
DSA
 *
d§
, 
b™s
,

234 cÚ¡ *
£ed
, 
£ed_Ën
,

235 *
couÁ”_»t
, *
h_»t
,

236 
BN_GENCB
 *
cb
);

238 
DSA_g’”©e_key
(
DSA
 *
a
);

239 
i2d_DSAPublicKey
(cÚ¡ 
DSA
 *
a
, **
µ
);

240 
i2d_DSAPriv©eKey
(cÚ¡ 
DSA
 *
a
, **
µ
);

241 
i2d_DSA·¿ms
(cÚ¡ 
DSA
 *
a
, **
µ
);

243 #iâdeà
OPENSSL_NO_BIO


244 
DSA·¿ms_´št
(
BIO
 *
bp
, cÚ¡ 
DSA
 *
x
);

245 
DSA_´št
(
BIO
 *
bp
, cÚ¡ 
DSA
 *
x
, 
off
);

247 #iâdeà
OPENSSL_NO_FP_API


248 
DSA·¿ms_´št_å
(
FILE
 *
å
, cÚ¡ 
DSA
 *
x
);

249 
DSA_´št_å
(
FILE
 *
bp
, cÚ¡ 
DSA
 *
x
, 
off
);

252 
	#DSS_´ime_checks
 64

	)

259 
	#DSA_is_´ime
(
n
, 
ÿÎback
, 
cb_¬g
) \

260 
	`BN_is_´ime
(
n
, 
DSS_´ime_checks
, 
ÿÎback
, 
NULL
, 
cb_¬g
)

	)

262 #iâdeà
OPENSSL_NO_DH


267 
DH
 *
DSA_dup_DH
(cÚ¡ 
DSA
 *
r
);

270 
	#EVP_PKEY_CTX_£t_d§_·¿mg’_b™s
(
ùx
, 
nb™s
) \

271 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_DSA
, 
EVP_PKEY_OP_PARAMGEN
, \

272 
EVP_PKEY_CTRL_DSA_PARAMGEN_BITS
, 
nb™s
, 
NULL
)

	)

274 
	#EVP_PKEY_CTRL_DSA_PARAMGEN_BITS
 (
EVP_PKEY_ALG_CTRL
 + 1)

	)

275 
	#EVP_PKEY_CTRL_DSA_PARAMGEN_Q_BITS
 (
EVP_PKEY_ALG_CTRL
 + 2)

	)

276 
	#EVP_PKEY_CTRL_DSA_PARAMGEN_MD
 (
EVP_PKEY_ALG_CTRL
 + 3)

	)

283 
ERR_lßd_DSA_¡ršgs
();

288 
	#DSA_F_D2I_DSA_SIG
 110

	)

289 
	#DSA_F_DO_DSA_PRINT
 104

	)

290 
	#DSA_F_DSAPARAMS_PRINT
 100

	)

291 
	#DSA_F_DSAPARAMS_PRINT_FP
 101

	)

292 
	#DSA_F_DSA_BUILTIN_PARAMGEN2
 126

	)

293 
	#DSA_F_DSA_DO_SIGN
 112

	)

294 
	#DSA_F_DSA_DO_VERIFY
 113

	)

295 
	#DSA_F_DSA_GENERATE_KEY
 124

	)

296 
	#DSA_F_DSA_GENERATE_PARAMETERS_EX
 123

	)

297 
	#DSA_F_DSA_NEW_METHOD
 103

	)

298 
	#DSA_F_DSA_PARAM_DECODE
 119

	)

299 
	#DSA_F_DSA_PRINT_FP
 105

	)

300 
	#DSA_F_DSA_PRIV_DECODE
 115

	)

301 
	#DSA_F_DSA_PRIV_ENCODE
 116

	)

302 
	#DSA_F_DSA_PUB_DECODE
 117

	)

303 
	#DSA_F_DSA_PUB_ENCODE
 118

	)

304 
	#DSA_F_DSA_SIGN
 106

	)

305 
	#DSA_F_DSA_SIGN_SETUP
 107

	)

306 
	#DSA_F_DSA_SIG_NEW
 109

	)

307 
	#DSA_F_DSA_SIG_PRINT
 125

	)

308 
	#DSA_F_DSA_VERIFY
 108

	)

309 
	#DSA_F_I2D_DSA_SIG
 111

	)

310 
	#DSA_F_OLD_DSA_PRIV_DECODE
 122

	)

311 
	#DSA_F_PKEY_DSA_CTRL
 120

	)

312 
	#DSA_F_PKEY_DSA_CTRL_STR
 127

	)

313 
	#DSA_F_PKEY_DSA_KEYGEN
 121

	)

314 
	#DSA_F_SIG_CB
 114

	)

317 
	#DSA_R_BAD_Q_VALUE
 102

	)

318 
	#DSA_R_BN_DECODE_ERROR
 108

	)

319 
	#DSA_R_BN_ERROR
 109

	)

320 
	#DSA_R_DATA_TOO_LARGE_FOR_KEY_SIZE
 100

	)

321 
	#DSA_R_DECODE_ERROR
 104

	)

322 
	#DSA_R_INVALID_DIGEST_TYPE
 106

	)

323 
	#DSA_R_INVALID_PARAMETERS
 112

	)

324 
	#DSA_R_MISSING_PARAMETERS
 101

	)

325 
	#DSA_R_MODULUS_TOO_LARGE
 103

	)

326 
	#DSA_R_NEED_NEW_SETUP_VALUES
 110

	)

327 
	#DSA_R_NON_FIPS_DSA_METHOD
 111

	)

328 
	#DSA_R_NO_PARAMETERS_SET
 107

	)

329 
	#DSA_R_PARAMETER_ENCODING_ERROR
 105

	)

330 
	#DSA_R_Q_NOT_PRIME
 113

	)

332 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ebcdic.h

3 #iâdeà
HEADER_EBCDIC_H


4 
	#HEADER_EBCDIC_H


	)

6 
	~<sys/ty³s.h
>

8 #ifdeà 
__ılu¥lus


13 
	#os_tßscii
 
_İ’s¦_os_tßscii


	)

14 
	#os_tÛbcdic
 
_İ’s¦_os_tÛbcdic


	)

15 
	#ebcdic2ascii
 
_İ’s¦_ebcdic2ascii


	)

16 
	#ascii2ebcdic
 
_İ’s¦_ascii2ebcdic


	)

18 cÚ¡ 
os_tßscii
[256];

19 cÚ¡ 
os_tÛbcdic
[256];

20 *
ebcdic2ascii
(*
de¡
, cÚ¡ *
¤û
, 
size_t
 
couÁ
);

21 *
ascii2ebcdic
(*
de¡
, cÚ¡ *
¤û
, 
size_t
 
couÁ
);

23 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ec.h

76 #iâdeà
HEADER_EC_H


77 
	#HEADER_EC_H


	)

79 
	~<İ’s¦/İ’s¦cÚf.h
>

81 #ifdeà
OPENSSL_NO_EC


82 #”rÜ 
EC
 
is
 
di§bËd
.

85 
	~<İ’s¦/a¢1.h
>

86 
	~<İ’s¦/symhacks.h
>

87 #iâdeà
OPENSSL_NO_DEPRECATED


88 
	~<İ’s¦/bn.h
>

91 #ifdeà 
__ılu¥lus


93 #–ià
defšed
(
__SUNPRO_C
)

94 #ià
__SUNPRO_C
 >= 0x520

95 #´agm¨
”rÜ_mes§ges
 (
off
,
E_ARRAY_OF_INCOMPLETE_NONAME
,
E_ARRAY_OF_INCOMPLETE
)

99 #iâdeà
OPENSSL_ECC_MAX_FIELD_BITS


100 
	#OPENSSL_ECC_MAX_FIELD_BITS
 661

	)

108 
POINT_CONVERSION_COMPRESSED
 = 2,

110 
POINT_CONVERSION_UNCOMPRESSED
 = 4,

113 
POINT_CONVERSION_HYBRID
 = 6

114 } 
	tpošt_cÚv”siÚ_fÜm_t
;

116 
ec_m‘hod_¡
 
	tEC_METHOD
;

118 
ec_group_¡


127 
	tEC_GROUP
;

129 
ec_pošt_¡
 
	tEC_POINT
;

139 cÚ¡ 
EC_METHOD
 *
EC_GFp_sim¶e_m‘hod
();

144 cÚ¡ 
EC_METHOD
 *
EC_GFp_mÚt_m‘hod
();

149 cÚ¡ 
EC_METHOD
 *
EC_GFp_ni¡_m‘hod
();

151 #iâdeà
OPENSSL_NO_EC_NISTP_64_GCC_128


155 cÚ¡ 
EC_METHOD
 *
EC_GFp_ni¡p224_m‘hod
();

160 cÚ¡ 
EC_METHOD
 *
EC_GFp_ni¡p256_m‘hod
();

165 cÚ¡ 
EC_METHOD
 *
EC_GFp_ni¡p521_m‘hod
();

168 #iâdeà
OPENSSL_NO_EC2M


176 cÚ¡ 
EC_METHOD
 *
EC_GF2m_sim¶e_m‘hod
();

188 
EC_GROUP
 *
EC_GROUP_Ãw
(cÚ¡ 
EC_METHOD
 *
m‘h
);

193 
EC_GROUP_ä“
(
EC_GROUP
 *
group
);

198 
EC_GROUP_ş—r_ä“
(
EC_GROUP
 *
group
);

205 
EC_GROUP_cİy
(
EC_GROUP
 *
d¡
, cÚ¡ EC_GROUP *
¤c
);

212 
EC_GROUP
 *
EC_GROUP_dup
(cÚ¡ EC_GROUP *
¤c
);

218 cÚ¡ 
EC_METHOD
 *
EC_GROUP_m‘hod_of
(cÚ¡ 
EC_GROUP
 *
group
);

224 
EC_METHOD_g‘_f›ld_ty³
(cÚ¡ 
EC_METHOD
 *
m‘h
);

234 
EC_GROUP_£t_g’”©Ü
(
EC_GROUP
 *
group
, cÚ¡ 
EC_POINT
 *
g’”©Ü
,

235 cÚ¡ 
BIGNUM
 *
Üd”
, cÚ¡ BIGNUM *
coçùÜ
);

241 cÚ¡ 
EC_POINT
 *
EC_GROUP_g‘0_g’”©Ü
(cÚ¡ 
EC_GROUP
 *
group
);

247 
BN_MONT_CTX
 *
EC_GROUP_g‘_mÚt_d©a
(cÚ¡ 
EC_GROUP
 *
group
);

255 
EC_GROUP_g‘_Üd”
(cÚ¡ 
EC_GROUP
 *
group
, 
BIGNUM
 *
Üd”
, 
BN_CTX
 *
ùx
);

263 
EC_GROUP_g‘_coçùÜ
(cÚ¡ 
EC_GROUP
 *
group
, 
BIGNUM
 *
coçùÜ
,

264 
BN_CTX
 *
ùx
);

270 
EC_GROUP_£t_curve_Çme
(
EC_GROUP
 *
group
, 
nid
);

276 
EC_GROUP_g‘_curve_Çme
(cÚ¡ 
EC_GROUP
 *
group
);

278 
EC_GROUP_£t_a¢1_æag
(
EC_GROUP
 *
group
, 
æag
);

279 
EC_GROUP_g‘_a¢1_æag
(cÚ¡ 
EC_GROUP
 *
group
);

281 
EC_GROUP_£t_pošt_cÚv”siÚ_fÜm
(
EC_GROUP
 *
group
,

282 
pošt_cÚv”siÚ_fÜm_t
 
fÜm
);

283 
pošt_cÚv”siÚ_fÜm_t
 
EC_GROUP_g‘_pošt_cÚv”siÚ_fÜm
(cÚ¡ 
EC_GROUP
 *);

285 *
EC_GROUP_g‘0_£ed
(cÚ¡ 
EC_GROUP
 *
x
);

286 
size_t
 
EC_GROUP_g‘_£ed_Ën
(cÚ¡ 
EC_GROUP
 *);

287 
size_t
 
EC_GROUP_£t_£ed
(
EC_GROUP
 *, cÚ¡ *, size_ˆ
Ën
);

297 
EC_GROUP_£t_curve_GFp
(
EC_GROUP
 *
group
, cÚ¡ 
BIGNUM
 *
p
, cÚ¡ BIGNUM *
a
,

298 cÚ¡ 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

308 
EC_GROUP_g‘_curve_GFp
(cÚ¡ 
EC_GROUP
 *
group
, 
BIGNUM
 *
p
, BIGNUM *
a
,

309 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

311 #iâdeà
OPENSSL_NO_EC2M


320 
EC_GROUP_£t_curve_GF2m
(
EC_GROUP
 *
group
, cÚ¡ 
BIGNUM
 *
p
, cÚ¡ BIGNUM *
a
,

321 cÚ¡ 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

331 
EC_GROUP_g‘_curve_GF2m
(cÚ¡ 
EC_GROUP
 *
group
, 
BIGNUM
 *
p
, BIGNUM *
a
,

332 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

338 
EC_GROUP_g‘_deg»e
(cÚ¡ 
EC_GROUP
 *
group
);

345 
EC_GROUP_check
(cÚ¡ 
EC_GROUP
 *
group
, 
BN_CTX
 *
ùx
);

352 
EC_GROUP_check_disüimšªt
(cÚ¡ 
EC_GROUP
 *
group
, 
BN_CTX
 *
ùx
);

360 
EC_GROUP_cmp
(cÚ¡ 
EC_GROUP
 *
a
, cÚ¡ EC_GROUP *
b
, 
BN_CTX
 *
ùx
);

375 
EC_GROUP
 *
EC_GROUP_Ãw_curve_GFp
(cÚ¡ 
BIGNUM
 *
p
, cÚ¡ BIGNUM *
a
,

376 cÚ¡ 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

377 #iâdeà
OPENSSL_NO_EC2M


386 
EC_GROUP
 *
EC_GROUP_Ãw_curve_GF2m
(cÚ¡ 
BIGNUM
 *
p
, cÚ¡ BIGNUM *
a
,

387 cÚ¡ 
BIGNUM
 *
b
, 
BN_CTX
 *
ùx
);

394 
EC_GROUP
 *
EC_GROUP_Ãw_by_curve_Çme
(
nid
);

401 
nid
;

402 cÚ¡ *
comm’t
;

403 } 
	tEC_butš_curve
;

411 
size_t
 
EC_g‘_butš_curves
(
EC_butš_curve
 *
r
, size_ˆ
n™ems
);

413 cÚ¡ *
EC_curve_nid2ni¡
(
nid
);

414 
EC_curve_ni¡2nid
(cÚ¡ *
Çme
);

424 
EC_POINT
 *
EC_POINT_Ãw
(cÚ¡ 
EC_GROUP
 *
group
);

429 
EC_POINT_ä“
(
EC_POINT
 *
pošt
);

434 
EC_POINT_ş—r_ä“
(
EC_POINT
 *
pošt
);

441 
EC_POINT_cİy
(
EC_POINT
 *
d¡
, cÚ¡ EC_POINT *
¤c
);

449 
EC_POINT
 *
EC_POINT_dup
(cÚ¡ EC_POINT *
¤c
, cÚ¡ 
EC_GROUP
 *
group
);

455 cÚ¡ 
EC_METHOD
 *
EC_POINT_m‘hod_of
(cÚ¡ 
EC_POINT
 *
pošt
);

462 
EC_POINT_£t_to_šfš™y
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
pošt
);

473 
EC_POINT_£t_J´ojeùive_coÜdš©es_GFp
(cÚ¡ 
EC_GROUP
 *
group
,

474 
EC_POINT
 *
p
, cÚ¡ 
BIGNUM
 *
x
,

475 cÚ¡ 
BIGNUM
 *
y
, cÚ¡ BIGNUM *
z
,

476 
BN_CTX
 *
ùx
);

487 
EC_POINT_g‘_J´ojeùive_coÜdš©es_GFp
(cÚ¡ 
EC_GROUP
 *
group
,

488 cÚ¡ 
EC_POINT
 *
p
, 
BIGNUM
 *
x
,

489 
BIGNUM
 *
y
, BIGNUM *
z
,

490 
BN_CTX
 *
ùx
);

500 
EC_POINT_£t_affše_coÜdš©es_GFp
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
p
,

501 cÚ¡ 
BIGNUM
 *
x
, cÚ¡ BIGNUM *
y
,

502 
BN_CTX
 *
ùx
);

512 
EC_POINT_g‘_affše_coÜdš©es_GFp
(cÚ¡ 
EC_GROUP
 *
group
,

513 cÚ¡ 
EC_POINT
 *
p
, 
BIGNUM
 *
x
,

514 
BIGNUM
 *
y
, 
BN_CTX
 *
ùx
);

524 
EC_POINT_£t_com´es£d_coÜdš©es_GFp
(cÚ¡ 
EC_GROUP
 *
group
,

525 
EC_POINT
 *
p
, cÚ¡ 
BIGNUM
 *
x
,

526 
y_b™
, 
BN_CTX
 *
ùx
);

527 #iâdeà
OPENSSL_NO_EC2M


536 
EC_POINT_£t_affše_coÜdš©es_GF2m
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
p
,

537 cÚ¡ 
BIGNUM
 *
x
, cÚ¡ BIGNUM *
y
,

538 
BN_CTX
 *
ùx
);

548 
EC_POINT_g‘_affše_coÜdš©es_GF2m
(cÚ¡ 
EC_GROUP
 *
group
,

549 cÚ¡ 
EC_POINT
 *
p
, 
BIGNUM
 *
x
,

550 
BIGNUM
 *
y
, 
BN_CTX
 *
ùx
);

560 
EC_POINT_£t_com´es£d_coÜdš©es_GF2m
(cÚ¡ 
EC_GROUP
 *
group
,

561 
EC_POINT
 *
p
, cÚ¡ 
BIGNUM
 *
x
,

562 
y_b™
, 
BN_CTX
 *
ùx
);

574 
size_t
 
EC_POINT_pošt2où
(cÚ¡ 
EC_GROUP
 *
group
, cÚ¡ 
EC_POINT
 *
p
,

575 
pošt_cÚv”siÚ_fÜm_t
 
fÜm
,

576 *
buf
, 
size_t
 
Ën
, 
BN_CTX
 *
ùx
);

586 
EC_POINT_où2pošt
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
p
,

587 cÚ¡ *
buf
, 
size_t
 
Ën
, 
BN_CTX
 *
ùx
);

590 
BIGNUM
 *
EC_POINT_pošt2bn
(cÚ¡ 
EC_GROUP
 *, cÚ¡ 
EC_POINT
 *,

591 
pošt_cÚv”siÚ_fÜm_t
 
fÜm
, 
BIGNUM
 *, 
BN_CTX
 *);

592 
EC_POINT
 *
EC_POINT_bn2pošt
(cÚ¡ 
EC_GROUP
 *, cÚ¡ 
BIGNUM
 *,

593 
EC_POINT
 *, 
BN_CTX
 *);

594 *
EC_POINT_pošt2hex
(cÚ¡ 
EC_GROUP
 *, cÚ¡ 
EC_POINT
 *,

595 
pošt_cÚv”siÚ_fÜm_t
 
fÜm
, 
BN_CTX
 *);

596 
EC_POINT
 *
EC_POINT_hex2pošt
(cÚ¡ 
EC_GROUP
 *, const *,

597 
EC_POINT
 *, 
BN_CTX
 *);

611 
EC_POINT_add
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
r
, cÚ¡ EC_POINT *
a
,

612 cÚ¡ 
EC_POINT
 *
b
, 
BN_CTX
 *
ùx
);

621 
EC_POINT_dbl
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
r
, cÚ¡ EC_POINT *
a
,

622 
BN_CTX
 *
ùx
);

630 
EC_POINT_šv”t
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
a
, 
BN_CTX
 *
ùx
);

637 
EC_POINT_is_©_šfš™y
(cÚ¡ 
EC_GROUP
 *
group
, cÚ¡ 
EC_POINT
 *
p
);

645 
EC_POINT_is_Ú_curve
(cÚ¡ 
EC_GROUP
 *
group
, cÚ¡ 
EC_POINT
 *
pošt
,

646 
BN_CTX
 *
ùx
);

655 
EC_POINT_cmp
(cÚ¡ 
EC_GROUP
 *
group
, cÚ¡ 
EC_POINT
 *
a
, cÚ¡ EC_POINT *
b
,

656 
BN_CTX
 *
ùx
);

658 
EC_POINT_make_affše
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
pošt
, 
BN_CTX
 *
ùx
);

659 
EC_POINTs_make_affše
(cÚ¡ 
EC_GROUP
 *
group
, 
size_t
 
num
,

660 
EC_POINT
 *
pošts
[], 
BN_CTX
 *
ùx
);

672 
EC_POINTs_mul
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
r
, cÚ¡ 
BIGNUM
 *
n
,

673 
size_t
 
num
, cÚ¡ 
EC_POINT
 *
p
[], cÚ¡ 
BIGNUM
 *
m
[],

674 
BN_CTX
 *
ùx
);

685 
EC_POINT_mul
(cÚ¡ 
EC_GROUP
 *
group
, 
EC_POINT
 *
r
, cÚ¡ 
BIGNUM
 *
n
,

686 cÚ¡ 
EC_POINT
 *
q
, cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
);

693 
EC_GROUP_´ecompu‹_muÉ
(
EC_GROUP
 *
group
, 
BN_CTX
 *
ùx
);

699 
EC_GROUP_have_´ecompu‹_muÉ
(cÚ¡ 
EC_GROUP
 *
group
);

709 
EC_GROUP_g‘_basis_ty³
(cÚ¡ 
EC_GROUP
 *);

710 #iâdeà
OPENSSL_NO_EC2M


711 
EC_GROUP_g‘_ŒšomŸl_basis
(cÚ¡ 
EC_GROUP
 *, *
k
);

712 
EC_GROUP_g‘_³ÁªomŸl_basis
(cÚ¡ 
EC_GROUP
 *, *
k1
,

713 *
k2
, *
k3
);

716 
	#OPENSSL_EC_NAMED_CURVE
 0x001

	)

718 
eık_·¿m‘”s_¡
 
	tECPKPARAMETERS
;

720 
EC_GROUP
 *
d2i_ECPKP¬am‘”s
(EC_GROUP **, cÚ¡ **
š
, 
Ën
);

721 
i2d_ECPKP¬am‘”s
(cÚ¡ 
EC_GROUP
 *, **
out
);

723 
	#d2i_ECPKP¬am‘”s_bio
(
bp
,
x
è
	`ASN1_d2i_bio_of
(
EC_GROUP
,
NULL
,
d2i_ECPKP¬am‘”s
,bp,x)

	)

724 
	#i2d_ECPKP¬am‘”s_bio
(
bp
,
x
è
	`ASN1_i2d_bio_of_cÚ¡
(
EC_GROUP
,
i2d_ECPKP¬am‘”s
,bp,x)

	)

725 
	#d2i_ECPKP¬am‘”s_å
(
å
,
x
è(
EC_GROUP
 *)
	`ASN1_d2i_å
(
NULL
, \

726 (*(*)())
d2i_ECPKP¬am‘”s
,(
å
),(**)(
x
))

	)

727 
	#i2d_ECPKP¬am‘”s_å
(
å
,
x
è
	`ASN1_i2d_å
(
i2d_ECPKP¬am‘”s
,(fp), \

728 (*)(
x
))

	)

730 #iâdeà
OPENSSL_NO_BIO


731 
ECPKP¬am‘”s_´št
(
BIO
 *
bp
, cÚ¡ 
EC_GROUP
 *
x
, 
off
);

733 #iâdeà
OPENSSL_NO_FP_API


734 
ECPKP¬am‘”s_´št_å
(
FILE
 *
å
, cÚ¡ 
EC_GROUP
 *
x
, 
off
);

741 
ec_key_¡
 
	tEC_KEY
;

744 
	#EC_PKEY_NO_PARAMETERS
 0x001

	)

745 
	#EC_PKEY_NO_PUBKEY
 0x002

	)

748 
	#EC_FLAG_NON_FIPS_ALLOW
 0x1

	)

749 
	#EC_FLAG_FIPS_CHECKED
 0x2

	)

754 
EC_KEY
 *
EC_KEY_Ãw
();

756 
EC_KEY_g‘_æags
(cÚ¡ 
EC_KEY
 *
key
);

758 
EC_KEY_£t_æags
(
EC_KEY
 *
key
, 
æags
);

760 
EC_KEY_ş—r_æags
(
EC_KEY
 *
key
, 
æags
);

767 
EC_KEY
 *
EC_KEY_Ãw_by_curve_Çme
(
nid
);

772 
EC_KEY_ä“
(
EC_KEY
 *
key
);

779 
EC_KEY
 *
EC_KEY_cİy
(EC_KEY *
d¡
, cÚ¡ EC_KEY *
¤c
);

785 
EC_KEY
 *
EC_KEY_dup
(cÚ¡ EC_KEY *
¤c
);

791 
EC_KEY_up_»f
(
EC_KEY
 *
key
);

797 cÚ¡ 
EC_GROUP
 *
EC_KEY_g‘0_group
(cÚ¡ 
EC_KEY
 *
key
);

805 
EC_KEY_£t_group
(
EC_KEY
 *
key
, cÚ¡ 
EC_GROUP
 *
group
);

811 cÚ¡ 
BIGNUM
 *
EC_KEY_g‘0_´iv©e_key
(cÚ¡ 
EC_KEY
 *
key
);

819 
EC_KEY_£t_´iv©e_key
(
EC_KEY
 *
key
, cÚ¡ 
BIGNUM
 *
´v
);

825 cÚ¡ 
EC_POINT
 *
EC_KEY_g‘0_public_key
(cÚ¡ 
EC_KEY
 *
key
);

833 
EC_KEY_£t_public_key
(
EC_KEY
 *
key
, cÚ¡ 
EC_POINT
 *
pub
);

835 
EC_KEY_g‘_’c_æags
(cÚ¡ 
EC_KEY
 *
key
);

836 
EC_KEY_£t_’c_æags
(
EC_KEY
 *
eckey
, 
æags
);

837 
pošt_cÚv”siÚ_fÜm_t
 
EC_KEY_g‘_cÚv_fÜm
(cÚ¡ 
EC_KEY
 *
key
);

838 
EC_KEY_£t_cÚv_fÜm
(
EC_KEY
 *
eckey
, 
pošt_cÚv”siÚ_fÜm_t
 
cfÜm
);

840 *
EC_KEY_g‘_key_m‘hod_d©a
(
EC_KEY
 *
key
,

841 *(*
dup_func
) (*),

842 (*
ä“_func
) (*),

843 (*
ş—r_ä“_func
) (*));

852 *
EC_KEY_š£¹_key_m‘hod_d©a
(
EC_KEY
 *
key
, *
d©a
,

853 *(*
dup_func
) (*),

854 (*
ä“_func
) (*),

855 (*
ş—r_ä“_func
) (*));

857 
EC_KEY_£t_a¢1_æag
(
EC_KEY
 *
eckey
, 
a¢1_æag
);

865 
EC_KEY_´ecompu‹_muÉ
(
EC_KEY
 *
key
, 
BN_CTX
 *
ùx
);

871 
EC_KEY_g’”©e_key
(
EC_KEY
 *
key
);

877 
EC_KEY_check_key
(cÚ¡ 
EC_KEY
 *
key
);

886 
EC_KEY_£t_public_key_affše_coÜdš©es
(
EC_KEY
 *
key
, 
BIGNUM
 *
x
,

887 
BIGNUM
 *
y
);

899 
EC_KEY
 *
d2i_ECPriv©eKey
(EC_KEY **
key
, cÚ¡ **
š
, 
Ën
);

907 
i2d_ECPriv©eKey
(
EC_KEY
 *
key
, **
out
);

920 
EC_KEY
 *
d2i_ECP¬am‘”s
(EC_KEY **
key
, cÚ¡ **
š
, 
Ën
);

928 
i2d_ECP¬am‘”s
(
EC_KEY
 *
key
, **
out
);

942 
EC_KEY
 *
o2i_ECPublicKey
(EC_KEY **
key
, cÚ¡ **
š
, 
Ën
);

950 
i2o_ECPublicKey
(
EC_KEY
 *
key
, **
out
);

952 #iâdeà
OPENSSL_NO_BIO


958 
ECP¬am‘”s_´št
(
BIO
 *
bp
, cÚ¡ 
EC_KEY
 *
key
);

966 
EC_KEY_´št
(
BIO
 *
bp
, cÚ¡ 
EC_KEY
 *
key
, 
off
);

969 #iâdeà
OPENSSL_NO_FP_API


975 
ECP¬am‘”s_´št_å
(
FILE
 *
å
, cÚ¡ 
EC_KEY
 *
key
);

983 
EC_KEY_´št_å
(
FILE
 *
å
, cÚ¡ 
EC_KEY
 *
key
, 
off
);

987 
	#ECP¬am‘”s_dup
(
x
è
	`ASN1_dup_of
(
EC_KEY
,
i2d_ECP¬am‘”s
,
d2i_ECP¬am‘”s
,x)

	)

989 #iâdeà
__ılu¥lus


990 #ià
defšed
(
__SUNPRO_C
)

991 #ià
__SUNPRO_C
 >= 0x520

992 #´agm¨
”rÜ_mes§ges
 (,
E_ARRAY_OF_INCOMPLETE_NONAME
,
E_ARRAY_OF_INCOMPLETE
)

997 
	#EVP_PKEY_CTX_£t_ec_·¿mg’_curve_nid
(
ùx
, 
nid
) \

998 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

999 
EVP_PKEY_OP_PARAMGEN
|
EVP_PKEY_OP_KEYGEN
, \

1000 
EVP_PKEY_CTRL_EC_PARAMGEN_CURVE_NID
, 
nid
, 
NULL
)

	)

1002 
	#EVP_PKEY_CTX_£t_ec_·¿m_’c
(
ùx
, 
æag
) \

1003 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1004 
EVP_PKEY_OP_PARAMGEN
|
EVP_PKEY_OP_KEYGEN
, \

1005 
EVP_PKEY_CTRL_EC_PARAM_ENC
, 
æag
, 
NULL
)

	)

1007 
	#EVP_PKEY_CTX_£t_ecdh_coçùÜ_mode
(
ùx
, 
æag
) \

1008 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1009 
EVP_PKEY_OP_DERIVE
, \

1010 
EVP_PKEY_CTRL_EC_ECDH_COFACTOR
, 
æag
, 
NULL
)

	)

1012 
	#EVP_PKEY_CTX_g‘_ecdh_coçùÜ_mode
(
ùx
) \

1013 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1014 
EVP_PKEY_OP_DERIVE
, \

1015 
EVP_PKEY_CTRL_EC_ECDH_COFACTOR
, -2, 
NULL
)

	)

1017 
	#EVP_PKEY_CTX_£t_ecdh_kdf_ty³
(
ùx
, 
kdf
) \

1018 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1019 
EVP_PKEY_OP_DERIVE
, \

1020 
EVP_PKEY_CTRL_EC_KDF_TYPE
, 
kdf
, 
NULL
)

	)

1022 
	#EVP_PKEY_CTX_g‘_ecdh_kdf_ty³
(
ùx
) \

1023 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1024 
EVP_PKEY_OP_DERIVE
, \

1025 
EVP_PKEY_CTRL_EC_KDF_TYPE
, -2, 
NULL
)

	)

1027 
	#EVP_PKEY_CTX_£t_ecdh_kdf_md
(
ùx
, 
md
) \

1028 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1029 
EVP_PKEY_OP_DERIVE
, \

1030 
EVP_PKEY_CTRL_EC_KDF_MD
, 0, (*)
md
)

	)

1032 
	#EVP_PKEY_CTX_g‘_ecdh_kdf_md
(
ùx
, 
pmd
) \

1033 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1034 
EVP_PKEY_OP_DERIVE
, \

1035 
EVP_PKEY_CTRL_GET_EC_KDF_MD
, 0, (*)
pmd
)

	)

1037 
	#EVP_PKEY_CTX_£t_ecdh_kdf_ou’
(
ùx
, 
Ën
) \

1038 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1039 
EVP_PKEY_OP_DERIVE
, \

1040 
EVP_PKEY_CTRL_EC_KDF_OUTLEN
, 
Ën
, 
NULL
)

	)

1042 
	#EVP_PKEY_CTX_g‘_ecdh_kdf_ou’
(
ùx
, 
¶’
) \

1043 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1044 
EVP_PKEY_OP_DERIVE
, \

1045 
EVP_PKEY_CTRL_GET_EC_KDF_OUTLEN
, 0, (*)
¶’
)

	)

1047 
	#EVP_PKEY_CTX_£t0_ecdh_kdf_ukm
(
ùx
, 
p
, 
¶’
) \

1048 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1049 
EVP_PKEY_OP_DERIVE
, \

1050 
EVP_PKEY_CTRL_EC_KDF_UKM
, 
¶’
, (*)
p
)

	)

1052 
	#EVP_PKEY_CTX_g‘0_ecdh_kdf_ukm
(
ùx
, 
p
) \

1053 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_EC
, \

1054 
EVP_PKEY_OP_DERIVE
, \

1055 
EVP_PKEY_CTRL_GET_EC_KDF_UKM
, 0, (*)
p
)

	)

1057 
	#EVP_PKEY_CTRL_EC_PARAMGEN_CURVE_NID
 (
EVP_PKEY_ALG_CTRL
 + 1)

	)

1058 
	#EVP_PKEY_CTRL_EC_PARAM_ENC
 (
EVP_PKEY_ALG_CTRL
 + 2)

	)

1059 
	#EVP_PKEY_CTRL_EC_ECDH_COFACTOR
 (
EVP_PKEY_ALG_CTRL
 + 3)

	)

1060 
	#EVP_PKEY_CTRL_EC_KDF_TYPE
 (
EVP_PKEY_ALG_CTRL
 + 4)

	)

1061 
	#EVP_PKEY_CTRL_EC_KDF_MD
 (
EVP_PKEY_ALG_CTRL
 + 5)

	)

1062 
	#EVP_PKEY_CTRL_GET_EC_KDF_MD
 (
EVP_PKEY_ALG_CTRL
 + 6)

	)

1063 
	#EVP_PKEY_CTRL_EC_KDF_OUTLEN
 (
EVP_PKEY_ALG_CTRL
 + 7)

	)

1064 
	#EVP_PKEY_CTRL_GET_EC_KDF_OUTLEN
 (
EVP_PKEY_ALG_CTRL
 + 8)

	)

1065 
	#EVP_PKEY_CTRL_EC_KDF_UKM
 (
EVP_PKEY_ALG_CTRL
 + 9)

	)

1066 
	#EVP_PKEY_CTRL_GET_EC_KDF_UKM
 (
EVP_PKEY_ALG_CTRL
 + 10)

	)

1068 
	#EVP_PKEY_ECDH_KDF_NONE
 1

	)

1069 
	#EVP_PKEY_ECDH_KDF_X9_62
 2

	)

1077 
ERR_lßd_EC_¡ršgs
();

1082 
	#EC_F_BN_TO_FELEM
 224

	)

1083 
	#EC_F_COMPUTE_WNAF
 143

	)

1084 
	#EC_F_D2I_ECPARAMETERS
 144

	)

1085 
	#EC_F_D2I_ECPKPARAMETERS
 145

	)

1086 
	#EC_F_D2I_ECPRIVATEKEY
 146

	)

1087 
	#EC_F_DO_EC_KEY_PRINT
 221

	)

1088 
	#EC_F_ECDH_CMS_DECRYPT
 238

	)

1089 
	#EC_F_ECDH_CMS_SET_SHARED_INFO
 239

	)

1090 
	#EC_F_ECKEY_PARAM2TYPE
 223

	)

1091 
	#EC_F_ECKEY_PARAM_DECODE
 212

	)

1092 
	#EC_F_ECKEY_PRIV_DECODE
 213

	)

1093 
	#EC_F_ECKEY_PRIV_ENCODE
 214

	)

1094 
	#EC_F_ECKEY_PUB_DECODE
 215

	)

1095 
	#EC_F_ECKEY_PUB_ENCODE
 216

	)

1096 
	#EC_F_ECKEY_TYPE2PARAM
 220

	)

1097 
	#EC_F_ECPARAMETERS_PRINT
 147

	)

1098 
	#EC_F_ECPARAMETERS_PRINT_FP
 148

	)

1099 
	#EC_F_ECPKPARAMETERS_PRINT
 149

	)

1100 
	#EC_F_ECPKPARAMETERS_PRINT_FP
 150

	)

1101 
	#EC_F_ECP_NISTZ256_GET_AFFINE
 240

	)

1102 
	#EC_F_ECP_NISTZ256_MULT_PRECOMPUTE
 243

	)

1103 
	#EC_F_ECP_NISTZ256_POINTS_MUL
 241

	)

1104 
	#EC_F_ECP_NISTZ256_PRE_COMP_NEW
 244

	)

1105 
	#EC_F_ECP_NISTZ256_SET_WORDS
 245

	)

1106 
	#EC_F_ECP_NISTZ256_WINDOWED_MUL
 242

	)

1107 
	#EC_F_ECP_NIST_MOD_192
 203

	)

1108 
	#EC_F_ECP_NIST_MOD_224
 204

	)

1109 
	#EC_F_ECP_NIST_MOD_256
 205

	)

1110 
	#EC_F_ECP_NIST_MOD_521
 206

	)

1111 
	#EC_F_EC_ASN1_GROUP2CURVE
 153

	)

1112 
	#EC_F_EC_ASN1_GROUP2FIELDID
 154

	)

1113 
	#EC_F_EC_ASN1_GROUP2PARAMETERS
 155

	)

1114 
	#EC_F_EC_ASN1_GROUP2PKPARAMETERS
 156

	)

1115 
	#EC_F_EC_ASN1_PARAMETERS2GROUP
 157

	)

1116 
	#EC_F_EC_ASN1_PKPARAMETERS2GROUP
 158

	)

1117 
	#EC_F_EC_EX_DATA_SET_DATA
 211

	)

1118 
	#EC_F_EC_GF2M_MONTGOMERY_POINT_MULTIPLY
 208

	)

1119 
	#EC_F_EC_GF2M_SIMPLE_GROUP_CHECK_DISCRIMINANT
 159

	)

1120 
	#EC_F_EC_GF2M_SIMPLE_GROUP_SET_CURVE
 195

	)

1121 
	#EC_F_EC_GF2M_SIMPLE_OCT2POINT
 160

	)

1122 
	#EC_F_EC_GF2M_SIMPLE_POINT2OCT
 161

	)

1123 
	#EC_F_EC_GF2M_SIMPLE_POINT_GET_AFFINE_COORDINATES
 162

	)

1124 
	#EC_F_EC_GF2M_SIMPLE_POINT_SET_AFFINE_COORDINATES
 163

	)

1125 
	#EC_F_EC_GF2M_SIMPLE_SET_COMPRESSED_COORDINATES
 164

	)

1126 
	#EC_F_EC_GFP_MONT_FIELD_DECODE
 133

	)

1127 
	#EC_F_EC_GFP_MONT_FIELD_ENCODE
 134

	)

1128 
	#EC_F_EC_GFP_MONT_FIELD_MUL
 131

	)

1129 
	#EC_F_EC_GFP_MONT_FIELD_SET_TO_ONE
 209

	)

1130 
	#EC_F_EC_GFP_MONT_FIELD_SQR
 132

	)

1131 
	#EC_F_EC_GFP_MONT_GROUP_SET_CURVE
 189

	)

1132 
	#EC_F_EC_GFP_MONT_GROUP_SET_CURVE_GFP
 135

	)

1133 
	#EC_F_EC_GFP_NISTP224_GROUP_SET_CURVE
 225

	)

1134 
	#EC_F_EC_GFP_NISTP224_POINTS_MUL
 228

	)

1135 
	#EC_F_EC_GFP_NISTP224_POINT_GET_AFFINE_COORDINATES
 226

	)

1136 
	#EC_F_EC_GFP_NISTP256_GROUP_SET_CURVE
 230

	)

1137 
	#EC_F_EC_GFP_NISTP256_POINTS_MUL
 231

	)

1138 
	#EC_F_EC_GFP_NISTP256_POINT_GET_AFFINE_COORDINATES
 232

	)

1139 
	#EC_F_EC_GFP_NISTP521_GROUP_SET_CURVE
 233

	)

1140 
	#EC_F_EC_GFP_NISTP521_POINTS_MUL
 234

	)

1141 
	#EC_F_EC_GFP_NISTP521_POINT_GET_AFFINE_COORDINATES
 235

	)

1142 
	#EC_F_EC_GFP_NIST_FIELD_MUL
 200

	)

1143 
	#EC_F_EC_GFP_NIST_FIELD_SQR
 201

	)

1144 
	#EC_F_EC_GFP_NIST_GROUP_SET_CURVE
 202

	)

1145 
	#EC_F_EC_GFP_SIMPLE_GROUP_CHECK_DISCRIMINANT
 165

	)

1146 
	#EC_F_EC_GFP_SIMPLE_GROUP_SET_CURVE
 166

	)

1147 
	#EC_F_EC_GFP_SIMPLE_GROUP_SET_CURVE_GFP
 100

	)

1148 
	#EC_F_EC_GFP_SIMPLE_GROUP_SET_GENERATOR
 101

	)

1149 
	#EC_F_EC_GFP_SIMPLE_MAKE_AFFINE
 102

	)

1150 
	#EC_F_EC_GFP_SIMPLE_OCT2POINT
 103

	)

1151 
	#EC_F_EC_GFP_SIMPLE_POINT2OCT
 104

	)

1152 
	#EC_F_EC_GFP_SIMPLE_POINTS_MAKE_AFFINE
 137

	)

1153 
	#EC_F_EC_GFP_SIMPLE_POINT_GET_AFFINE_COORDINATES
 167

	)

1154 
	#EC_F_EC_GFP_SIMPLE_POINT_GET_AFFINE_COORDINATES_GFP
 105

	)

1155 
	#EC_F_EC_GFP_SIMPLE_POINT_SET_AFFINE_COORDINATES
 168

	)

1156 
	#EC_F_EC_GFP_SIMPLE_POINT_SET_AFFINE_COORDINATES_GFP
 128

	)

1157 
	#EC_F_EC_GFP_SIMPLE_SET_COMPRESSED_COORDINATES
 169

	)

1158 
	#EC_F_EC_GFP_SIMPLE_SET_COMPRESSED_COORDINATES_GFP
 129

	)

1159 
	#EC_F_EC_GROUP_CHECK
 170

	)

1160 
	#EC_F_EC_GROUP_CHECK_DISCRIMINANT
 171

	)

1161 
	#EC_F_EC_GROUP_COPY
 106

	)

1162 
	#EC_F_EC_GROUP_GET0_GENERATOR
 139

	)

1163 
	#EC_F_EC_GROUP_GET_COFACTOR
 140

	)

1164 
	#EC_F_EC_GROUP_GET_CURVE_GF2M
 172

	)

1165 
	#EC_F_EC_GROUP_GET_CURVE_GFP
 130

	)

1166 
	#EC_F_EC_GROUP_GET_DEGREE
 173

	)

1167 
	#EC_F_EC_GROUP_GET_ORDER
 141

	)

1168 
	#EC_F_EC_GROUP_GET_PENTANOMIAL_BASIS
 193

	)

1169 
	#EC_F_EC_GROUP_GET_TRINOMIAL_BASIS
 194

	)

1170 
	#EC_F_EC_GROUP_NEW
 108

	)

1171 
	#EC_F_EC_GROUP_NEW_BY_CURVE_NAME
 174

	)

1172 
	#EC_F_EC_GROUP_NEW_FROM_DATA
 175

	)

1173 
	#EC_F_EC_GROUP_PRECOMPUTE_MULT
 142

	)

1174 
	#EC_F_EC_GROUP_SET_CURVE_GF2M
 176

	)

1175 
	#EC_F_EC_GROUP_SET_CURVE_GFP
 109

	)

1176 
	#EC_F_EC_GROUP_SET_EXTRA_DATA
 110

	)

1177 
	#EC_F_EC_GROUP_SET_GENERATOR
 111

	)

1178 
	#EC_F_EC_KEY_CHECK_KEY
 177

	)

1179 
	#EC_F_EC_KEY_COPY
 178

	)

1180 
	#EC_F_EC_KEY_GENERATE_KEY
 179

	)

1181 
	#EC_F_EC_KEY_NEW
 182

	)

1182 
	#EC_F_EC_KEY_PRINT
 180

	)

1183 
	#EC_F_EC_KEY_PRINT_FP
 181

	)

1184 
	#EC_F_EC_KEY_SET_PUBLIC_KEY_AFFINE_COORDINATES
 229

	)

1185 
	#EC_F_EC_POINTS_MAKE_AFFINE
 136

	)

1186 
	#EC_F_EC_POINT_ADD
 112

	)

1187 
	#EC_F_EC_POINT_CMP
 113

	)

1188 
	#EC_F_EC_POINT_COPY
 114

	)

1189 
	#EC_F_EC_POINT_DBL
 115

	)

1190 
	#EC_F_EC_POINT_GET_AFFINE_COORDINATES_GF2M
 183

	)

1191 
	#EC_F_EC_POINT_GET_AFFINE_COORDINATES_GFP
 116

	)

1192 
	#EC_F_EC_POINT_GET_JPROJECTIVE_COORDINATES_GFP
 117

	)

1193 
	#EC_F_EC_POINT_INVERT
 210

	)

1194 
	#EC_F_EC_POINT_IS_AT_INFINITY
 118

	)

1195 
	#EC_F_EC_POINT_IS_ON_CURVE
 119

	)

1196 
	#EC_F_EC_POINT_MAKE_AFFINE
 120

	)

1197 
	#EC_F_EC_POINT_MUL
 184

	)

1198 
	#EC_F_EC_POINT_NEW
 121

	)

1199 
	#EC_F_EC_POINT_OCT2POINT
 122

	)

1200 
	#EC_F_EC_POINT_POINT2OCT
 123

	)

1201 
	#EC_F_EC_POINT_SET_AFFINE_COORDINATES_GF2M
 185

	)

1202 
	#EC_F_EC_POINT_SET_AFFINE_COORDINATES_GFP
 124

	)

1203 
	#EC_F_EC_POINT_SET_COMPRESSED_COORDINATES_GF2M
 186

	)

1204 
	#EC_F_EC_POINT_SET_COMPRESSED_COORDINATES_GFP
 125

	)

1205 
	#EC_F_EC_POINT_SET_JPROJECTIVE_COORDINATES_GFP
 126

	)

1206 
	#EC_F_EC_POINT_SET_TO_INFINITY
 127

	)

1207 
	#EC_F_EC_PRE_COMP_DUP
 207

	)

1208 
	#EC_F_EC_PRE_COMP_NEW
 196

	)

1209 
	#EC_F_EC_WNAF_MUL
 187

	)

1210 
	#EC_F_EC_WNAF_PRECOMPUTE_MULT
 188

	)

1211 
	#EC_F_I2D_ECPARAMETERS
 190

	)

1212 
	#EC_F_I2D_ECPKPARAMETERS
 191

	)

1213 
	#EC_F_I2D_ECPRIVATEKEY
 192

	)

1214 
	#EC_F_I2O_ECPUBLICKEY
 151

	)

1215 
	#EC_F_NISTP224_PRE_COMP_NEW
 227

	)

1216 
	#EC_F_NISTP256_PRE_COMP_NEW
 236

	)

1217 
	#EC_F_NISTP521_PRE_COMP_NEW
 237

	)

1218 
	#EC_F_O2I_ECPUBLICKEY
 152

	)

1219 
	#EC_F_OLD_EC_PRIV_DECODE
 222

	)

1220 
	#EC_F_PKEY_EC_CTRL
 197

	)

1221 
	#EC_F_PKEY_EC_CTRL_STR
 198

	)

1222 
	#EC_F_PKEY_EC_DERIVE
 217

	)

1223 
	#EC_F_PKEY_EC_KEYGEN
 199

	)

1224 
	#EC_F_PKEY_EC_PARAMGEN
 219

	)

1225 
	#EC_F_PKEY_EC_SIGN
 218

	)

1228 
	#EC_R_ASN1_ERROR
 115

	)

1229 
	#EC_R_ASN1_UNKNOWN_FIELD
 116

	)

1230 
	#EC_R_BIGNUM_OUT_OF_RANGE
 144

	)

1231 
	#EC_R_BUFFER_TOO_SMALL
 100

	)

1232 
	#EC_R_COORDINATES_OUT_OF_RANGE
 146

	)

1233 
	#EC_R_D2I_ECPKPARAMETERS_FAILURE
 117

	)

1234 
	#EC_R_DECODE_ERROR
 142

	)

1235 
	#EC_R_DISCRIMINANT_IS_ZERO
 118

	)

1236 
	#EC_R_EC_GROUP_NEW_BY_NAME_FAILURE
 119

	)

1237 
	#EC_R_FIELD_TOO_LARGE
 143

	)

1238 
	#EC_R_GF2M_NOT_SUPPORTED
 147

	)

1239 
	#EC_R_GROUP2PKPARAMETERS_FAILURE
 120

	)

1240 
	#EC_R_I2D_ECPKPARAMETERS_FAILURE
 121

	)

1241 
	#EC_R_INCOMPATIBLE_OBJECTS
 101

	)

1242 
	#EC_R_INVALID_ARGUMENT
 112

	)

1243 
	#EC_R_INVALID_COMPRESSED_POINT
 110

	)

1244 
	#EC_R_INVALID_COMPRESSION_BIT
 109

	)

1245 
	#EC_R_INVALID_CURVE
 141

	)

1246 
	#EC_R_INVALID_DIGEST
 151

	)

1247 
	#EC_R_INVALID_DIGEST_TYPE
 138

	)

1248 
	#EC_R_INVALID_ENCODING
 102

	)

1249 
	#EC_R_INVALID_FIELD
 103

	)

1250 
	#EC_R_INVALID_FORM
 104

	)

1251 
	#EC_R_INVALID_GROUP_ORDER
 122

	)

1252 
	#EC_R_INVALID_PENTANOMIAL_BASIS
 132

	)

1253 
	#EC_R_INVALID_PRIVATE_KEY
 123

	)

1254 
	#EC_R_INVALID_TRINOMIAL_BASIS
 137

	)

1255 
	#EC_R_KDF_PARAMETER_ERROR
 148

	)

1256 
	#EC_R_KEYS_NOT_SET
 140

	)

1257 
	#EC_R_MISSING_PARAMETERS
 124

	)

1258 
	#EC_R_MISSING_PRIVATE_KEY
 125

	)

1259 
	#EC_R_NOT_A_NIST_PRIME
 135

	)

1260 
	#EC_R_NOT_A_SUPPORTED_NIST_PRIME
 136

	)

1261 
	#EC_R_NOT_IMPLEMENTED
 126

	)

1262 
	#EC_R_NOT_INITIALIZED
 111

	)

1263 
	#EC_R_NO_FIELD_MOD
 133

	)

1264 
	#EC_R_NO_PARAMETERS_SET
 139

	)

1265 
	#EC_R_PASSED_NULL_PARAMETER
 134

	)

1266 
	#EC_R_PEER_KEY_ERROR
 149

	)

1267 
	#EC_R_PKPARAMETERS2GROUP_FAILURE
 127

	)

1268 
	#EC_R_POINT_AT_INFINITY
 106

	)

1269 
	#EC_R_POINT_IS_NOT_ON_CURVE
 107

	)

1270 
	#EC_R_SHARED_INFO_ERROR
 150

	)

1271 
	#EC_R_SLOT_FULL
 108

	)

1272 
	#EC_R_UNDEFINED_GENERATOR
 113

	)

1273 
	#EC_R_UNDEFINED_ORDER
 128

	)

1274 
	#EC_R_UNKNOWN_COFACTOR
 152

	)

1275 
	#EC_R_UNKNOWN_GROUP
 129

	)

1276 
	#EC_R_UNKNOWN_ORDER
 114

	)

1277 
	#EC_R_UNSUPPORTED_FIELD
 131

	)

1278 
	#EC_R_WRONG_CURVE_PARAMETERS
 145

	)

1279 
	#EC_R_WRONG_ORDER
 130

	)

1281 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ecdh.h

69 #iâdeà
HEADER_ECDH_H


70 
	#HEADER_ECDH_H


	)

72 
	~<İ’s¦/İ’s¦cÚf.h
>

74 #ifdeà
OPENSSL_NO_ECDH


75 #”rÜ 
ECDH
 
is
 
di§bËd
.

78 
	~<İ’s¦/ec.h
>

79 
	~<İ’s¦/os¦_typ.h
>

80 #iâdeà
OPENSSL_NO_DEPRECATED


81 
	~<İ’s¦/bn.h
>

84 #ifdeà
__ılu¥lus


88 
	#EC_FLAG_COFACTOR_ECDH
 0x1000

	)

90 cÚ¡ 
ECDH_METHOD
 *
ECDH_O³nSSL
();

92 
ECDH_£t_deçuÉ_m‘hod
(cÚ¡ 
ECDH_METHOD
 *);

93 cÚ¡ 
ECDH_METHOD
 *
ECDH_g‘_deçuÉ_m‘hod
();

94 
ECDH_£t_m‘hod
(
EC_KEY
 *, cÚ¡ 
ECDH_METHOD
 *);

96 
ECDH_compu‹_key
(*
out
, 
size_t
 
ou’
, cÚ¡ 
EC_POINT
 *
pub_key
,

97 
EC_KEY
 *
ecdh
, *(*
KDF
è(cÚ¡ *
š
, 
size_t
 
šËn
,

98 *
out
, 
size_t
 *
ou’
));

100 
ECDH_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw


101 *
Ãw_func
, 
CRYPTO_EX_dup
 *
dup_func
,

102 
CRYPTO_EX_ä“
 *
ä“_func
);

103 
ECDH_£t_ex_d©a
(
EC_KEY
 *
d
, 
idx
, *
¬g
);

104 *
ECDH_g‘_ex_d©a
(
EC_KEY
 *
d
, 
idx
);

106 
ECDH_KDF_X9_62
(*
out
, 
size_t
 
ou’
,

107 cÚ¡ *
Z
, 
size_t
 
ZËn
,

108 cÚ¡ *
sšfo
, 
size_t
 
sšfŞ’
,

109 cÚ¡ 
EVP_MD
 *
md
);

116 
ERR_lßd_ECDH_¡ršgs
();

121 
	#ECDH_F_ECDH_CHECK
 102

	)

122 
	#ECDH_F_ECDH_COMPUTE_KEY
 100

	)

123 
	#ECDH_F_ECDH_DATA_NEW_METHOD
 101

	)

126 
	#ECDH_R_KDF_FAILED
 102

	)

127 
	#ECDH_R_NON_FIPS_METHOD
 103

	)

128 
	#ECDH_R_NO_PRIVATE_VALUE
 100

	)

129 
	#ECDH_R_POINT_ARITHMETIC_FAILURE
 101

	)

131 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/ecdsa.h

59 #iâdeà
HEADER_ECDSA_H


60 
	#HEADER_ECDSA_H


	)

62 
	~<İ’s¦/İ’s¦cÚf.h
>

64 #ifdeà
OPENSSL_NO_ECDSA


65 #”rÜ 
ECDSA
 
is
 
di§bËd
.

68 
	~<İ’s¦/ec.h
>

69 
	~<İ’s¦/os¦_typ.h
>

70 #iâdeà
OPENSSL_NO_DEPRECATED


71 
	~<İ’s¦/bn.h
>

74 #ifdeà
__ılu¥lus


78 
	sECDSA_SIG_¡
 {

79 
BIGNUM
 *
r
;

80 
BIGNUM
 *
s
;

81 } 
	tECDSA_SIG
;

86 
ECDSA_SIG
 *
ECDSA_SIG_Ãw
();

91 
ECDSA_SIG_ä“
(
ECDSA_SIG
 *
sig
);

99 
i2d_ECDSA_SIG
(cÚ¡ 
ECDSA_SIG
 *
sig
, **
µ
);

108 
ECDSA_SIG
 *
d2i_ECDSA_SIG
(ECDSA_SIG **
sig
, cÚ¡ **
µ
, 
Ën
);

117 
ECDSA_SIG
 *
ECDSA_do_sign
(cÚ¡ *
dg¡
, 
dg¡_Ën
,

118 
EC_KEY
 *
eckey
);

130 
ECDSA_SIG
 *
ECDSA_do_sign_ex
(cÚ¡ *
dg¡
, 
dg¡Ën
,

131 cÚ¡ 
BIGNUM
 *
kšv
, cÚ¡ BIGNUM *
½
,

132 
EC_KEY
 *
eckey
);

143 
ECDSA_do_v”ify
(cÚ¡ *
dg¡
, 
dg¡_Ën
,

144 cÚ¡ 
ECDSA_SIG
 *
sig
, 
EC_KEY
 *
eckey
);

146 cÚ¡ 
ECDSA_METHOD
 *
ECDSA_O³nSSL
();

151 
ECDSA_£t_deçuÉ_m‘hod
(cÚ¡ 
ECDSA_METHOD
 *
m‘h
);

156 cÚ¡ 
ECDSA_METHOD
 *
ECDSA_g‘_deçuÉ_m‘hod
();

163 
ECDSA_£t_m‘hod
(
EC_KEY
 *
eckey
, cÚ¡ 
ECDSA_METHOD
 *
m‘h
);

169 
ECDSA_size
(cÚ¡ 
EC_KEY
 *
eckey
);

178 
ECDSA_sign_£tup
(
EC_KEY
 *
eckey
, 
BN_CTX
 *
ùx
, 
BIGNUM
 **
kšv
, BIGNUM **
½
);

190 
ECDSA_sign
(
ty³
, cÚ¡ *
dg¡
, 
dg¡Ën
,

191 *
sig
, *
sigËn
, 
EC_KEY
 *
eckey
);

206 
ECDSA_sign_ex
(
ty³
, cÚ¡ *
dg¡
, 
dg¡Ën
,

207 *
sig
, *
sigËn
,

208 cÚ¡ 
BIGNUM
 *
kšv
, cÚ¡ BIGNUM *
½
, 
EC_KEY
 *
eckey
);

221 
ECDSA_v”ify
(
ty³
, cÚ¡ *
dg¡
, 
dg¡Ën
,

222 cÚ¡ *
sig
, 
sigËn
, 
EC_KEY
 *
eckey
);

225 
ECDSA_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw


226 *
Ãw_func
, 
CRYPTO_EX_dup
 *
dup_func
,

227 
CRYPTO_EX_ä“
 *
ä“_func
);

228 
ECDSA_£t_ex_d©a
(
EC_KEY
 *
d
, 
idx
, *
¬g
);

229 *
ECDSA_g‘_ex_d©a
(
EC_KEY
 *
d
, 
idx
);

236 
ECDSA_METHOD
 *
ECDSA_METHOD_Ãw
(cÚ¡ ECDSA_METHOD *
ecd§_m‘hod
);

241 
ECDSA_METHOD_ä“
(
ECDSA_METHOD
 *
ecd§_m‘hod
);

248 
ECDSA_METHOD_£t_­p_d©a
(
ECDSA_METHOD
 *
ecd§_m‘hod
, *
­p
);

255 *
ECDSA_METHOD_g‘_­p_d©a
(
ECDSA_METHOD
 *
ecd§_m‘hod
);

262 
ECDSA_METHOD_£t_sign
(
ECDSA_METHOD
 *
ecd§_m‘hod
,

263 
ECDSA_SIG
 *(*
ecd§_do_sign
) (const 

264 *
dg¡
, 
dg¡_Ën
,

265 cÚ¡ 
BIGNUM
 *
šv
,

266 cÚ¡ 
BIGNUM
 *
½
,

267 
EC_KEY
 *
eckey
));

274 
ECDSA_METHOD_£t_sign_£tup
(
ECDSA_METHOD
 *
ecd§_m‘hod
,

275 (*
ecd§_sign_£tup
è(
EC_KEY
 *
eckey
,

276 
BN_CTX
 *
ùx
,

277 
BIGNUM
 **
kšv
,

278 
BIGNUM
 **
r
));

285 
ECDSA_METHOD_£t_v”ify
(
ECDSA_METHOD
 *
ecd§_m‘hod
,

286 (*
ecd§_do_v”ify
) (const 

287 *
dg¡
, 
dg¡_Ën
,

288 cÚ¡ 
ECDSA_SIG
 *
sig
,

289 
EC_KEY
 *
eckey
));

291 
ECDSA_METHOD_£t_æags
(
ECDSA_METHOD
 *
ecd§_m‘hod
, 
æags
);

298 
ECDSA_METHOD_£t_Çme
(
ECDSA_METHOD
 *
ecd§_m‘hod
, *
Çme
);

310 
ERR_lßd_ECDSA_¡ršgs
();

315 
	#ECDSA_F_ECDSA_CHECK
 104

	)

316 
	#ECDSA_F_ECDSA_DATA_NEW_METHOD
 100

	)

317 
	#ECDSA_F_ECDSA_DO_SIGN
 101

	)

318 
	#ECDSA_F_ECDSA_DO_VERIFY
 102

	)

319 
	#ECDSA_F_ECDSA_METHOD_NEW
 105

	)

320 
	#ECDSA_F_ECDSA_SIGN_SETUP
 103

	)

323 
	#ECDSA_R_BAD_SIGNATURE
 100

	)

324 
	#ECDSA_R_DATA_TOO_LARGE_FOR_KEY_SIZE
 101

	)

325 
	#ECDSA_R_ERR_EC_LIB
 102

	)

326 
	#ECDSA_R_MISSING_PARAMETERS
 103

	)

327 
	#ECDSA_R_NEED_NEW_SETUP_VALUES
 106

	)

328 
	#ECDSA_R_NON_FIPS_METHOD
 107

	)

329 
	#ECDSA_R_RANDOM_NUMBER_GENERATION_FAILED
 104

	)

330 
	#ECDSA_R_SIGNATURE_MALLOC_FAILED
 105

	)

332 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/evp.h

59 #iâdeà
HEADER_ENVELOPE_H


60 
	#HEADER_ENVELOPE_H


	)

62 #ifdeà
OPENSSL_ALGORITHM_DEFINES


63 
	~<İ’s¦/İ’s¦cÚf.h
>

65 
	#OPENSSL_ALGORITHM_DEFINES


	)

66 
	~<İ’s¦/İ’s¦cÚf.h
>

67 #undeà
OPENSSL_ALGORITHM_DEFINES


70 
	~<İ’s¦/os¦_typ.h
>

72 
	~<İ’s¦/symhacks.h
>

74 #iâdeà
OPENSSL_NO_BIO


75 
	~<İ’s¦/bio.h
>

85 
	#EVP_MAX_MD_SIZE
 64

	)

86 
	#EVP_MAX_KEY_LENGTH
 64

	)

87 
	#EVP_MAX_IV_LENGTH
 16

	)

88 
	#EVP_MAX_BLOCK_LENGTH
 32

	)

90 
	#PKCS5_SALT_LEN
 8

	)

92 
	#PKCS5_DEFAULT_ITER
 2048

	)

94 
	~<İ’s¦/objeùs.h
>

96 
	#EVP_PK_RSA
 0x0001

	)

97 
	#EVP_PK_DSA
 0x0002

	)

98 
	#EVP_PK_DH
 0x0004

	)

99 
	#EVP_PK_EC
 0x0008

	)

100 
	#EVP_PKT_SIGN
 0x0010

	)

101 
	#EVP_PKT_ENC
 0x0020

	)

102 
	#EVP_PKT_EXCH
 0x0040

	)

103 
	#EVP_PKS_RSA
 0x0100

	)

104 
	#EVP_PKS_DSA
 0x0200

	)

105 
	#EVP_PKS_EC
 0x0400

	)

107 
	#EVP_PKEY_NONE
 
NID_undef


	)

108 
	#EVP_PKEY_RSA
 
NID_r§Enüy±iÚ


	)

109 
	#EVP_PKEY_RSA2
 
NID_r§


	)

110 
	#EVP_PKEY_DSA
 
NID_d§


	)

111 
	#EVP_PKEY_DSA1
 
NID_d§_2


	)

112 
	#EVP_PKEY_DSA2
 
NID_d§W™hSHA


	)

113 
	#EVP_PKEY_DSA3
 
NID_d§W™hSHA1


	)

114 
	#EVP_PKEY_DSA4
 
NID_d§W™hSHA1_2


	)

115 
	#EVP_PKEY_DH
 
NID_dhKeyAg»em’t


	)

116 
	#EVP_PKEY_DHX
 
NID_dhpubliúumb”


	)

117 
	#EVP_PKEY_EC
 
NID_X9_62_id_ecPublicKey


	)

118 
	#EVP_PKEY_HMAC
 
NID_hmac


	)

119 
	#EVP_PKEY_CMAC
 
NID_cmac


	)

121 #ifdeà 
__ılu¥lus


129 
	sevp_pkey_¡
 {

130 
ty³
;

131 
§ve_ty³
;

132 
»ã»nûs
;

133 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
am‘h
;

134 
ENGINE
 *
’gše
;

136 *
±r
;

137 #iâdeà
OPENSSL_NO_RSA


138 
r§_¡
 *
r§
;

140 #iâdeà
OPENSSL_NO_DSA


141 
d§_¡
 *
d§
;

143 #iâdeà
OPENSSL_NO_DH


144 
dh_¡
 *
dh
;

146 #iâdeà
OPENSSL_NO_EC


147 
ec_key_¡
 *
ec
;

149 } 
pkey
;

150 
§ve_·¿m‘”s
;

151 
STACK_OF
(
X509_ATTRIBUTE
è*
©Œibu‹s
;

154 
	#EVP_PKEY_MO_SIGN
 0x0001

	)

155 
	#EVP_PKEY_MO_VERIFY
 0x0002

	)

156 
	#EVP_PKEY_MO_ENCRYPT
 0x0004

	)

157 
	#EVP_PKEY_MO_DECRYPT
 0x0008

	)

159 #iâdeà
EVP_MD


160 
	s’v_md_¡
 {

161 
ty³
;

162 
pkey_ty³
;

163 
md_size
;

164 
æags
;

165 (*
š™
è(
EVP_MD_CTX
 *
ùx
);

166 (*
upd©e
è(
EVP_MD_CTX
 *
ùx
, cÚ¡ *
d©a
, 
size_t
 
couÁ
);

167 (*
fš®
è(
EVP_MD_CTX
 *
ùx
, *
md
);

168 (*
cİy
è(
EVP_MD_CTX
 *
to
, cÚ¡ EVP_MD_CTX *
äom
);

169 (*
ş—nup
è(
EVP_MD_CTX
 *
ùx
);

171 (*
sign
è(
ty³
, cÚ¡ *
m
, 
m_Ëngth
,

172 *
sig»t
, *
sigËn
, *
key
);

173 (*
v”ify
è(
ty³
, cÚ¡ *
m
, 
m_Ëngth
,

174 cÚ¡ *
sigbuf
, 
sigËn
,

175 *
key
);

176 
»quœed_pkey_ty³
[5];

177 
block_size
;

178 
ùx_size
;

180 (*
md_ù¾
è(
EVP_MD_CTX
 *
ùx
, 
cmd
, 
p1
, *
p2
);

183 
	tevp_sign_m‘hod
(
	tty³
, cÚ¡ *
	tm
,

184 
	tm_Ëngth
, *
	tsig»t
,

185 *
	tsigËn
, *
	tkey
);

186 
	tevp_v”ify_m‘hod
(
	tty³
, cÚ¡ *
	tm
,

187 
	tm_Ëngth
,

188 cÚ¡ *
	tsigbuf
,

189 
	tsigËn
, *
	tkey
);

192 
	#EVP_MD_FLAG_ONESHOT
 0x0001

	)

200 
	#EVP_MD_FLAG_PKEY_DIGEST
 0x0002

	)

204 
	#EVP_MD_FLAG_PKEY_METHOD_SIGNATURE
 0x0004

	)

208 
	#EVP_MD_FLAG_DIGALGID_MASK
 0x0018

	)

212 
	#EVP_MD_FLAG_DIGALGID_NULL
 0x0000

	)

216 
	#EVP_MD_FLAG_DIGALGID_ABSENT
 0x0008

	)

220 
	#EVP_MD_FLAG_DIGALGID_CUSTOM
 0x0018

	)

223 
	#EVP_MD_FLAG_FIPS
 0x0400

	)

227 
	#EVP_MD_CTRL_DIGALGID
 0x1

	)

228 
	#EVP_MD_CTRL_MICALG
 0x2

	)

232 
	#EVP_MD_CTRL_ALG_CTRL
 0x1000

	)

234 
	#EVP_PKEY_NULL_m‘hod
 
NULL
,NULL,{0,0,0,0}

	)

236 #iâdeà
OPENSSL_NO_DSA


237 
	#EVP_PKEY_DSA_m‘hod
 (
evp_sign_m‘hod
 *)
DSA_sign
, \

238 (
evp_v”ify_m‘hod
 *)
DSA_v”ify
, \

239 {
EVP_PKEY_DSA
,
EVP_PKEY_DSA2
,
EVP_PKEY_DSA3
, \

240 
EVP_PKEY_DSA4
,0}

	)

242 
	#EVP_PKEY_DSA_m‘hod
 
EVP_PKEY_NULL_m‘hod


	)

245 #iâdeà
OPENSSL_NO_ECDSA


246 
	#EVP_PKEY_ECDSA_m‘hod
 (
evp_sign_m‘hod
 *)
ECDSA_sign
, \

247 (
evp_v”ify_m‘hod
 *)
ECDSA_v”ify
, \

248 {
EVP_PKEY_EC
,0,0,0}

	)

250 
	#EVP_PKEY_ECDSA_m‘hod
 
EVP_PKEY_NULL_m‘hod


	)

253 #iâdeà
OPENSSL_NO_RSA


254 
	#EVP_PKEY_RSA_m‘hod
 (
evp_sign_m‘hod
 *)
RSA_sign
, \

255 (
evp_v”ify_m‘hod
 *)
RSA_v”ify
, \

256 {
EVP_PKEY_RSA
,
EVP_PKEY_RSA2
,0,0}

	)

257 
	#EVP_PKEY_RSA_ASN1_OCTET_STRING_m‘hod
 \

258 (
evp_sign_m‘hod
 *)
RSA_sign_ASN1_OCTET_STRING
, \

259 (
evp_v”ify_m‘hod
 *)
RSA_v”ify_ASN1_OCTET_STRING
, \

260 {
EVP_PKEY_RSA
,
EVP_PKEY_RSA2
,0,0}

	)

262 
	#EVP_PKEY_RSA_m‘hod
 
EVP_PKEY_NULL_m‘hod


	)

263 
	#EVP_PKEY_RSA_ASN1_OCTET_STRING_m‘hod
 
EVP_PKEY_NULL_m‘hod


	)

268 
	s’v_md_ùx_¡
 {

269 cÚ¡ 
EVP_MD
 *
dige¡
;

270 
ENGINE
 *
’gše
;

272 
æags
;

273 *
md_d©a
;

275 
EVP_PKEY_CTX
 *
pùx
;

277 (*
upd©e
è(
EVP_MD_CTX
 *
ùx
, cÚ¡ *
d©a
, 
size_t
 
couÁ
);

282 
	#EVP_MD_CTX_FLAG_ONESHOT
 0x0001

	)

284 
	#EVP_MD_CTX_FLAG_CLEANED
 0x0002

	)

286 
	#EVP_MD_CTX_FLAG_REUSE
 0x0004

	)

293 
	#EVP_MD_CTX_FLAG_NON_FIPS_ALLOW
 0x0008

	)

301 
	#EVP_MD_CTX_FLAG_PAD_MASK
 0xF0

	)

302 
	#EVP_MD_CTX_FLAG_PAD_PKCS1
 0x00

	)

303 
	#EVP_MD_CTX_FLAG_PAD_X931
 0x10

	)

304 
	#EVP_MD_CTX_FLAG_PAD_PSS
 0x20

	)

306 
	#EVP_MD_CTX_FLAG_NO_INIT
 0x0100

	)

308 
	sevp_ch”_¡
 {

309 
nid
;

310 
block_size
;

312 
key_Ën
;

313 
iv_Ën
;

315 
æags
;

317 (*
š™
è(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ *
key
,

318 cÚ¡ *
iv
, 
’c
);

320 (*
do_ch”
è(
EVP_CIPHER_CTX
 *
ùx
, *
out
,

321 cÚ¡ *
š
, 
size_t
 
šl
);

323 (*
ş—nup
è(
EVP_CIPHER_CTX
 *);

325 
ùx_size
;

327 (*
£t_a¢1_·¿m‘”s
è(
EVP_CIPHER_CTX
 *, 
ASN1_TYPE
 *);

329 (*
g‘_a¢1_·¿m‘”s
è(
EVP_CIPHER_CTX
 *, 
ASN1_TYPE
 *);

331 (*
ù¾
è(
EVP_CIPHER_CTX
 *, 
ty³
, 
¬g
, *
±r
);

333 *
­p_d©a
;

340 
	#EVP_CIPH_STREAM_CIPHER
 0x0

	)

341 
	#EVP_CIPH_ECB_MODE
 0x1

	)

342 
	#EVP_CIPH_CBC_MODE
 0x2

	)

343 
	#EVP_CIPH_CFB_MODE
 0x3

	)

344 
	#EVP_CIPH_OFB_MODE
 0x4

	)

345 
	#EVP_CIPH_CTR_MODE
 0x5

	)

346 
	#EVP_CIPH_GCM_MODE
 0x6

	)

347 
	#EVP_CIPH_CCM_MODE
 0x7

	)

348 
	#EVP_CIPH_XTS_MODE
 0x10001

	)

349 
	#EVP_CIPH_WRAP_MODE
 0x10002

	)

350 
	#EVP_CIPH_MODE
 0xF0007

	)

352 
	#EVP_CIPH_VARIABLE_LENGTH
 0x8

	)

354 
	#EVP_CIPH_CUSTOM_IV
 0x10

	)

356 
	#EVP_CIPH_ALWAYS_CALL_INIT
 0x20

	)

358 
	#EVP_CIPH_CTRL_INIT
 0x40

	)

360 
	#EVP_CIPH_CUSTOM_KEY_LENGTH
 0x80

	)

362 
	#EVP_CIPH_NO_PADDING
 0x100

	)

364 
	#EVP_CIPH_RAND_KEY
 0x200

	)

366 
	#EVP_CIPH_CUSTOM_COPY
 0x400

	)

368 
	#EVP_CIPH_FLAG_DEFAULT_ASN1
 0x1000

	)

370 
	#EVP_CIPH_FLAG_LENGTH_BITS
 0x2000

	)

372 
	#EVP_CIPH_FLAG_FIPS
 0x4000

	)

374 
	#EVP_CIPH_FLAG_NON_FIPS_ALLOW
 0x8000

	)

378 
	#EVP_CIPH_FLAG_CUSTOM_CIPHER
 0x100000

	)

379 
	#EVP_CIPH_FLAG_AEAD_CIPHER
 0x200000

	)

380 
	#EVP_CIPH_FLAG_TLS1_1_MULTIBLOCK
 0x400000

	)

387 
	#EVP_CIPHER_CTX_FLAG_WRAP_ALLOW
 0x1

	)

391 
	#EVP_CTRL_INIT
 0x0

	)

392 
	#EVP_CTRL_SET_KEY_LENGTH
 0x1

	)

393 
	#EVP_CTRL_GET_RC2_KEY_BITS
 0x2

	)

394 
	#EVP_CTRL_SET_RC2_KEY_BITS
 0x3

	)

395 
	#EVP_CTRL_GET_RC5_ROUNDS
 0x4

	)

396 
	#EVP_CTRL_SET_RC5_ROUNDS
 0x5

	)

397 
	#EVP_CTRL_RAND_KEY
 0x6

	)

398 
	#EVP_CTRL_PBE_PRF_NID
 0x7

	)

399 
	#EVP_CTRL_COPY
 0x8

	)

400 
	#EVP_CTRL_GCM_SET_IVLEN
 0x9

	)

401 
	#EVP_CTRL_GCM_GET_TAG
 0x10

	)

402 
	#EVP_CTRL_GCM_SET_TAG
 0x11

	)

403 
	#EVP_CTRL_GCM_SET_IV_FIXED
 0x12

	)

404 
	#EVP_CTRL_GCM_IV_GEN
 0x13

	)

405 
	#EVP_CTRL_CCM_SET_IVLEN
 
EVP_CTRL_GCM_SET_IVLEN


	)

406 
	#EVP_CTRL_CCM_GET_TAG
 
EVP_CTRL_GCM_GET_TAG


	)

407 
	#EVP_CTRL_CCM_SET_TAG
 
EVP_CTRL_GCM_SET_TAG


	)

408 
	#EVP_CTRL_CCM_SET_L
 0x14

	)

409 
	#EVP_CTRL_CCM_SET_MSGLEN
 0x15

	)

415 
	#EVP_CTRL_AEAD_TLS1_AAD
 0x16

	)

417 
	#EVP_CTRL_AEAD_SET_MAC_KEY
 0x17

	)

419 
	#EVP_CTRL_GCM_SET_IV_INV
 0x18

	)

421 
	#EVP_CTRL_TLS1_1_MULTIBLOCK_AAD
 0x19

	)

422 
	#EVP_CTRL_TLS1_1_MULTIBLOCK_ENCRYPT
 0x1a

	)

423 
	#EVP_CTRL_TLS1_1_MULTIBLOCK_DECRYPT
 0x1b

	)

424 
	#EVP_CTRL_TLS1_1_MULTIBLOCK_MAX_BUFSIZE
 0x1c

	)

427 
	#EVP_AEAD_TLS1_AAD_LEN
 13

	)

430 *
out
;

431 cÚ¡ *
šp
;

432 
size_t
 
Ën
;

433 
š‹¾—ve
;

434 } 
	tEVP_CTRL_TLS1_1_MULTIBLOCK_PARAM
;

438 
	#EVP_GCM_TLS_FIXED_IV_LEN
 4

	)

440 
	#EVP_GCM_TLS_EXPLICIT_IV_LEN
 8

	)

442 
	#EVP_GCM_TLS_TAG_LEN
 16

	)

444 
	sevp_ch”_šfo_¡
 {

445 cÚ¡ 
EVP_CIPHER
 *
ch”
;

446 
iv
[
EVP_MAX_IV_LENGTH
];

447 } 
	tEVP_CIPHER_INFO
;

449 
	sevp_ch”_ùx_¡
 {

450 cÚ¡ 
EVP_CIPHER
 *
ch”
;

451 
ENGINE
 *
’gše
;

453 
’üy±
;

454 
buf_Ën
;

455 
oiv
[
EVP_MAX_IV_LENGTH
];

456 
iv
[
EVP_MAX_IV_LENGTH
];

457 
buf
[
EVP_MAX_BLOCK_LENGTH
];

458 
num
;

459 *
­p_d©a
;

460 
key_Ën
;

461 
æags
;

462 *
ch”_d©a
;

463 
fš®_u£d
;

464 
block_mask
;

465 
fš®
[
EVP_MAX_BLOCK_LENGTH
];

468 
	sevp_Encode_Ctx_¡
 {

470 
num
;

476 
Ëngth
;

478 
’c_d©a
[80];

480 
lše_num
;

481 
ex³ù_Æ
;

482 } 
	tEVP_ENCODE_CTX
;

485 (
EVP_PBE_KEYGEN
è(
	tEVP_CIPHER_CTX
 *
	tùx
, cÚ¡ *
	t·ss
,

486 
	t·s¦’
, 
	tASN1_TYPE
 *
	t·¿m
,

487 cÚ¡ 
	tEVP_CIPHER
 *
	tch”
, cÚ¡ 
	tEVP_MD
 *
	tmd
,

488 
	t’_de
);

490 #iâdeà
OPENSSL_NO_RSA


491 
	#EVP_PKEY_assign_RSA
(
pkey
,
r§
è
	`EVP_PKEY_assign
(Õkey),
EVP_PKEY_RSA
,\

492 (*)(
r§
))

	)

495 #iâdeà
OPENSSL_NO_DSA


496 
	#EVP_PKEY_assign_DSA
(
pkey
,
d§
è
	`EVP_PKEY_assign
(Õkey),
EVP_PKEY_DSA
,\

497 (*)(
d§
))

	)

500 #iâdeà
OPENSSL_NO_DH


501 
	#EVP_PKEY_assign_DH
(
pkey
,
dh
è
	`EVP_PKEY_assign
(Õkey),
EVP_PKEY_DH
,\

502 (*)(
dh
))

	)

505 #iâdeà
OPENSSL_NO_EC


506 
	#EVP_PKEY_assign_EC_KEY
(
pkey
,
eckey
è
	`EVP_PKEY_assign
(Õkey),
EVP_PKEY_EC
,\

507 (*)(
eckey
))

	)

511 
	#EVP_g‘_dige¡bynid
(
a
è
	`EVP_g‘_dige¡byÇme
(
	`OBJ_nid2¢
×))

	)

512 
	#EVP_g‘_dige¡byobj
(
a
è
	`EVP_g‘_dige¡bynid
(
	`OBJ_obj2nid
×))

	)

513 
	#EVP_g‘_ch”bynid
(
a
è
	`EVP_g‘_ch”byÇme
(
	`OBJ_nid2¢
×))

	)

514 
	#EVP_g‘_ch”byobj
(
a
è
	`EVP_g‘_ch”bynid
(
	`OBJ_obj2nid
×))

	)

516 
EVP_MD_ty³
(cÚ¡ 
EVP_MD
 *
md
);

517 
	#EVP_MD_nid
(
e
è
	`EVP_MD_ty³
Ó)

	)

518 
	#EVP_MD_Çme
(
e
è
	`OBJ_nid2¢
(
	`EVP_MD_nid
Ó))

	)

519 
EVP_MD_pkey_ty³
(cÚ¡ 
EVP_MD
 *
md
);

520 
EVP_MD_size
(cÚ¡ 
EVP_MD
 *
md
);

521 
EVP_MD_block_size
(cÚ¡ 
EVP_MD
 *
md
);

522 
EVP_MD_æags
(cÚ¡ 
EVP_MD
 *
md
);

524 cÚ¡ 
EVP_MD
 *
EVP_MD_CTX_md
(cÚ¡ 
EVP_MD_CTX
 *
ùx
);

525 
	#EVP_MD_CTX_size
(
e
è
	`EVP_MD_size
(
	`EVP_MD_CTX_md
Ó))

	)

526 
	#EVP_MD_CTX_block_size
(
e
è
	`EVP_MD_block_size
(
	`EVP_MD_CTX_md
Ó))

	)

527 
	#EVP_MD_CTX_ty³
(
e
è
	`EVP_MD_ty³
(
	`EVP_MD_CTX_md
Ó))

	)

529 
EVP_CIPHER_nid
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

530 
	#EVP_CIPHER_Çme
(
e
è
	`OBJ_nid2¢
(
	`EVP_CIPHER_nid
Ó))

	)

531 
EVP_CIPHER_block_size
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

532 
EVP_CIPHER_key_Ëngth
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

533 
EVP_CIPHER_iv_Ëngth
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

534 
EVP_CIPHER_æags
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

535 
	#EVP_CIPHER_mode
(
e
è(
	`EVP_CIPHER_æags
Óè& 
EVP_CIPH_MODE
)

	)

537 cÚ¡ 
EVP_CIPHER
 *
EVP_CIPHER_CTX_ch”
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

538 
EVP_CIPHER_CTX_nid
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

539 
EVP_CIPHER_CTX_block_size
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

540 
EVP_CIPHER_CTX_key_Ëngth
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

541 
EVP_CIPHER_CTX_iv_Ëngth
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

542 
EVP_CIPHER_CTX_cİy
(
EVP_CIPHER_CTX
 *
out
, cÚ¡ EVP_CIPHER_CTX *
š
);

543 *
EVP_CIPHER_CTX_g‘_­p_d©a
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

544 
EVP_CIPHER_CTX_£t_­p_d©a
(
EVP_CIPHER_CTX
 *
ùx
, *
d©a
);

545 
	#EVP_CIPHER_CTX_ty³
(
c
è
	`EVP_CIPHER_ty³
(
	`EVP_CIPHER_CTX_ch”
(c))

	)

546 
EVP_CIPHER_CTX_æags
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
);

547 
	#EVP_CIPHER_CTX_mode
(
e
è(
	`EVP_CIPHER_CTX_æags
Óè& 
EVP_CIPH_MODE
)

	)

549 
	#EVP_ENCODE_LENGTH
(
l
è((Ö+2)/3*4)+Ö/48+1)*2+80)

	)

550 
	#EVP_DECODE_LENGTH
(
l
è(Ö+3)/4*3+80)

	)

552 
	#EVP_SignIn™_ex
(
a
,
b
,
c
è
	`EVP_Dige¡In™_ex
×,b,c)

	)

553 
	#EVP_SignIn™
(
a
,
b
è
	`EVP_Dige¡In™
×,b)

	)

554 
	#EVP_SignUpd©e
(
a
,
b
,
c
è
	`EVP_Dige¡Upd©e
×,b,c)

	)

555 
	#EVP_V”ifyIn™_ex
(
a
,
b
,
c
è
	`EVP_Dige¡In™_ex
×,b,c)

	)

556 
	#EVP_V”ifyIn™
(
a
,
b
è
	`EVP_Dige¡In™
×,b)

	)

557 
	#EVP_V”ifyUpd©e
(
a
,
b
,
c
è
	`EVP_Dige¡Upd©e
×,b,c)

	)

558 
	#EVP_O³nUpd©e
(
a
,
b
,
c
,
d
,
e
è
	`EVP_Deüy±Upd©e
×,b,c,d,e)

	)

559 
	#EVP_S—lUpd©e
(
a
,
b
,
c
,
d
,
e
è
	`EVP_Enüy±Upd©e
×,b,c,d,e)

	)

560 
	#EVP_Dige¡SignUpd©e
(
a
,
b
,
c
è
	`EVP_Dige¡Upd©e
×,b,c)

	)

561 
	#EVP_Dige¡V”ifyUpd©e
(
a
,
b
,
c
è
	`EVP_Dige¡Upd©e
×,b,c)

	)

563 #ifdeà
CONST_STRICT


564 
BIO_£t_md
(
BIO
 *, cÚ¡ 
EVP_MD
 *
md
);

566 
	#BIO_£t_md
(
b
,
md
è
	`BIO_ù¾
(b,
BIO_C_SET_MD
,0,(*)md)

	)

568 
	#BIO_g‘_md
(
b
,
mdp
è
	`BIO_ù¾
(b,
BIO_C_GET_MD
,0,(*)mdp)

	)

569 
	#BIO_g‘_md_ùx
(
b
,
mdı
è
	`BIO_ù¾
(b,
BIO_C_GET_MD_CTX
,0,(*)mdı)

	)

570 
	#BIO_£t_md_ùx
(
b
,
mdı
è
	`BIO_ù¾
(b,
BIO_C_SET_MD_CTX
,0,(*)mdı)

	)

571 
	#BIO_g‘_ch”_¡©us
(
b
è
	`BIO_ù¾
(b,
BIO_C_GET_CIPHER_STATUS
,0,
NULL
)

	)

572 
	#BIO_g‘_ch”_ùx
(
b
,
c_µ
è
	`BIO_ù¾
(b,
BIO_C_GET_CIPHER_CTX
,0,(*)c_µ)

	)

574 
EVP_Ch”
(
EVP_CIPHER_CTX
 *
c
,

575 *
out
, cÚ¡ *
š
, 
šl
);

577 
	#EVP_add_ch”_®Ÿs
(
n
,
®Ÿs
) \

578 
	`OBJ_NAME_add
((
®Ÿs
),
OBJ_NAME_TYPE_CIPHER_METH
|
OBJ_NAME_ALIAS
,(
n
))

	)

579 
	#EVP_add_dige¡_®Ÿs
(
n
,
®Ÿs
) \

580 
	`OBJ_NAME_add
((
®Ÿs
),
OBJ_NAME_TYPE_MD_METH
|
OBJ_NAME_ALIAS
,(
n
))

	)

581 
	#EVP_d–‘e_ch”_®Ÿs
(
®Ÿs
) \

582 
	`OBJ_NAME_»move
(
®Ÿs
,
OBJ_NAME_TYPE_CIPHER_METH
|
OBJ_NAME_ALIAS
);

	)

583 
	#EVP_d–‘e_dige¡_®Ÿs
(
®Ÿs
) \

584 
	`OBJ_NAME_»move
(
®Ÿs
,
OBJ_NAME_TYPE_MD_METH
|
OBJ_NAME_ALIAS
);

	)

586 
EVP_MD_CTX_š™
(
EVP_MD_CTX
 *
ùx
);

587 
EVP_MD_CTX_ş—nup
(
EVP_MD_CTX
 *
ùx
);

588 
EVP_MD_CTX
 *
EVP_MD_CTX_ü—‹
();

589 
EVP_MD_CTX_de¡roy
(
EVP_MD_CTX
 *
ùx
);

590 
EVP_MD_CTX_cİy_ex
(
EVP_MD_CTX
 *
out
, cÚ¡ EVP_MD_CTX *
š
);

591 
EVP_MD_CTX_£t_æags
(
EVP_MD_CTX
 *
ùx
, 
æags
);

592 
EVP_MD_CTX_ş—r_æags
(
EVP_MD_CTX
 *
ùx
, 
æags
);

593 
EVP_MD_CTX_‹¡_æags
(cÚ¡ 
EVP_MD_CTX
 *
ùx
, 
æags
);

594 
EVP_Dige¡In™_ex
(
EVP_MD_CTX
 *
ùx
, cÚ¡ 
EVP_MD
 *
ty³
, 
ENGINE
 *
im¶
);

595 
EVP_Dige¡Upd©e
(
EVP_MD_CTX
 *
ùx
, cÚ¡ *
d
, 
size_t
 
út
);

596 
EVP_Dige¡Fš®_ex
(
EVP_MD_CTX
 *
ùx
, *
md
, *
s
);

597 
EVP_Dige¡
(cÚ¡ *
d©a
, 
size_t
 
couÁ
,

598 *
md
, *
size
, cÚ¡ 
EVP_MD
 *
ty³
,

599 
ENGINE
 *
im¶
);

601 
EVP_MD_CTX_cİy
(
EVP_MD_CTX
 *
out
, cÚ¡ EVP_MD_CTX *
š
);

602 
EVP_Dige¡In™
(
EVP_MD_CTX
 *
ùx
, cÚ¡ 
EVP_MD
 *
ty³
);

603 
EVP_Dige¡Fš®
(
EVP_MD_CTX
 *
ùx
, *
md
, *
s
);

605 
EVP_»ad_pw_¡ršg
(*
buf
, 
Ëngth
, cÚ¡ *
´om±
, 
v”ify
);

606 
EVP_»ad_pw_¡ršg_mš
(*
buf
, 
mšËn
, 
maxËn
,

607 cÚ¡ *
´om±
, 
v”ify
);

608 
EVP_£t_pw_´om±
(cÚ¡ *
´om±
);

609 *
EVP_g‘_pw_´om±
();

611 
EVP_By‹sToKey
(cÚ¡ 
EVP_CIPHER
 *
ty³
, cÚ¡ 
EVP_MD
 *
md
,

612 cÚ¡ *
§É
, cÚ¡ *
d©a
,

613 
d©®
, 
couÁ
, *
key
,

614 *
iv
);

616 
EVP_CIPHER_CTX_£t_æags
(
EVP_CIPHER_CTX
 *
ùx
, 
æags
);

617 
EVP_CIPHER_CTX_ş—r_æags
(
EVP_CIPHER_CTX
 *
ùx
, 
æags
);

618 
EVP_CIPHER_CTX_‹¡_æags
(cÚ¡ 
EVP_CIPHER_CTX
 *
ùx
, 
æags
);

620 
EVP_Enüy±In™
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

621 cÚ¡ *
key
, cÚ¡ *
iv
);

622 
EVP_Enüy±In™_ex
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

623 
ENGINE
 *
im¶
, cÚ¡ *
key
,

624 cÚ¡ *
iv
);

625 
EVP_Enüy±Upd©e
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
,

626 cÚ¡ *
š
, 
šl
);

627 
EVP_Enüy±Fš®_ex
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
);

628 
EVP_Enüy±Fš®
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
);

630 
EVP_Deüy±In™
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

631 cÚ¡ *
key
, cÚ¡ *
iv
);

632 
EVP_Deüy±In™_ex
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

633 
ENGINE
 *
im¶
, cÚ¡ *
key
,

634 cÚ¡ *
iv
);

635 
EVP_Deüy±Upd©e
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
,

636 cÚ¡ *
š
, 
šl
);

637 
EVP_Deüy±Fš®
(
EVP_CIPHER_CTX
 *
ùx
, *
outm
, *
ou
);

638 
EVP_Deüy±Fš®_ex
(
EVP_CIPHER_CTX
 *
ùx
, *
outm
, *
ou
);

640 
EVP_Ch”In™
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

641 cÚ¡ *
key
, cÚ¡ *
iv
,

642 
’c
);

643 
EVP_Ch”In™_ex
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

644 
ENGINE
 *
im¶
, cÚ¡ *
key
,

645 cÚ¡ *
iv
, 
’c
);

646 
EVP_Ch”Upd©e
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
,

647 cÚ¡ *
š
, 
šl
);

648 
EVP_Ch”Fš®
(
EVP_CIPHER_CTX
 *
ùx
, *
outm
, *
ou
);

649 
EVP_Ch”Fš®_ex
(
EVP_CIPHER_CTX
 *
ùx
, *
outm
, *
ou
);

651 
EVP_SignFš®
(
EVP_MD_CTX
 *
ùx
, *
md
, *
s
,

652 
EVP_PKEY
 *
pkey
);

654 
EVP_V”ifyFš®
(
EVP_MD_CTX
 *
ùx
, cÚ¡ *
sigbuf
,

655 
sigËn
, 
EVP_PKEY
 *
pkey
);

657 
EVP_Dige¡SignIn™
(
EVP_MD_CTX
 *
ùx
, 
EVP_PKEY_CTX
 **
pùx
,

658 cÚ¡ 
EVP_MD
 *
ty³
, 
ENGINE
 *
e
, 
EVP_PKEY
 *
pkey
);

659 
EVP_Dige¡SignFš®
(
EVP_MD_CTX
 *
ùx
,

660 *
sig»t
, 
size_t
 *
sigËn
);

662 
EVP_Dige¡V”ifyIn™
(
EVP_MD_CTX
 *
ùx
, 
EVP_PKEY_CTX
 **
pùx
,

663 cÚ¡ 
EVP_MD
 *
ty³
, 
ENGINE
 *
e
, 
EVP_PKEY
 *
pkey
);

664 
EVP_Dige¡V”ifyFš®
(
EVP_MD_CTX
 *
ùx
,

665 cÚ¡ *
sig
, 
size_t
 
sigËn
);

667 
EVP_O³nIn™
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ty³
,

668 cÚ¡ *
ek
, 
ekl
, cÚ¡ *
iv
,

669 
EVP_PKEY
 *
´iv
);

670 
EVP_O³nFš®
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
);

672 
EVP_S—lIn™
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ 
EVP_CIPHER
 *
ty³
,

673 **
ek
, *
ekl
, *
iv
,

674 
EVP_PKEY
 **
pubk
, 
Åubk
);

675 
EVP_S—lFš®
(
EVP_CIPHER_CTX
 *
ùx
, *
out
, *
ou
);

677 
EVP_EncodeIn™
(
EVP_ENCODE_CTX
 *
ùx
);

678 
EVP_EncodeUpd©e
(
EVP_ENCODE_CTX
 *
ùx
, *
out
, *
ou
,

679 cÚ¡ *
š
, 
šl
);

680 
EVP_EncodeFš®
(
EVP_ENCODE_CTX
 *
ùx
, *
out
, *
ou
);

681 
EVP_EncodeBlock
(*
t
, cÚ¡ *
f
, 
n
);

683 
EVP_DecodeIn™
(
EVP_ENCODE_CTX
 *
ùx
);

684 
EVP_DecodeUpd©e
(
EVP_ENCODE_CTX
 *
ùx
, *
out
, *
ou
,

685 cÚ¡ *
š
, 
šl
);

686 
EVP_DecodeFš®
(
EVP_ENCODE_CTX
 *
ùx
, 

687 *
out
, *
ou
);

688 
EVP_DecodeBlock
(*
t
, cÚ¡ *
f
, 
n
);

690 
EVP_CIPHER_CTX_š™
(
EVP_CIPHER_CTX
 *
a
);

691 
EVP_CIPHER_CTX_ş—nup
(
EVP_CIPHER_CTX
 *
a
);

692 
EVP_CIPHER_CTX
 *
EVP_CIPHER_CTX_Ãw
();

693 
EVP_CIPHER_CTX_ä“
(
EVP_CIPHER_CTX
 *
a
);

694 
EVP_CIPHER_CTX_£t_key_Ëngth
(
EVP_CIPHER_CTX
 *
x
, 
keyËn
);

695 
EVP_CIPHER_CTX_£t_·ddšg
(
EVP_CIPHER_CTX
 *
c
, 
·d
);

696 
EVP_CIPHER_CTX_ù¾
(
EVP_CIPHER_CTX
 *
ùx
, 
ty³
, 
¬g
, *
±r
);

697 
EVP_CIPHER_CTX_¿nd_key
(
EVP_CIPHER_CTX
 *
ùx
, *
key
);

699 #iâdeà
OPENSSL_NO_BIO


700 
BIO_METHOD
 *
BIO_f_md
();

701 
BIO_METHOD
 *
BIO_f_ba£64
();

702 
BIO_METHOD
 *
BIO_f_ch”
();

703 
BIO_METHOD
 *
BIO_f_»lŸbË
();

704 
BIO_£t_ch”
(
BIO
 *
b
, cÚ¡ 
EVP_CIPHER
 *
c
, cÚ¡ *
k
,

705 cÚ¡ *
i
, 
’c
);

708 cÚ¡ 
EVP_MD
 *
EVP_md_nuÎ
();

709 #iâdeà
OPENSSL_NO_MD2


710 cÚ¡ 
EVP_MD
 *
EVP_md2
();

712 #iâdeà
OPENSSL_NO_MD4


713 cÚ¡ 
EVP_MD
 *
EVP_md4
();

715 #iâdeà
OPENSSL_NO_MD5


716 cÚ¡ 
EVP_MD
 *
EVP_md5
();

718 #iâdeà
OPENSSL_NO_SHA


719 cÚ¡ 
EVP_MD
 *
EVP_sha
();

720 cÚ¡ 
EVP_MD
 *
EVP_sha1
();

721 cÚ¡ 
EVP_MD
 *
EVP_dss
();

722 cÚ¡ 
EVP_MD
 *
EVP_dss1
();

723 cÚ¡ 
EVP_MD
 *
EVP_ecd§
();

725 #iâdeà
OPENSSL_NO_SHA256


726 cÚ¡ 
EVP_MD
 *
EVP_sha224
();

727 cÚ¡ 
EVP_MD
 *
EVP_sha256
();

729 #iâdeà
OPENSSL_NO_SHA512


730 cÚ¡ 
EVP_MD
 *
EVP_sha384
();

731 cÚ¡ 
EVP_MD
 *
EVP_sha512
();

733 #iâdeà
OPENSSL_NO_MDC2


734 cÚ¡ 
EVP_MD
 *
EVP_mdc2
();

736 #iâdeà
OPENSSL_NO_RIPEMD


737 cÚ¡ 
EVP_MD
 *
EVP_remd160
();

739 #iâdeà
OPENSSL_NO_WHIRLPOOL


740 cÚ¡ 
EVP_MD
 *
EVP_whœÍoŞ
();

742 cÚ¡ 
EVP_CIPHER
 *
EVP_’c_nuÎ
();

743 #iâdeà
OPENSSL_NO_DES


744 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ecb
();

745 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede
();

746 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3
();

747 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_ecb
();

748 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_ecb
();

749 cÚ¡ 
EVP_CIPHER
 *
EVP_des_cfb64
();

750 
	#EVP_des_cfb
 
EVP_des_cfb64


	)

751 cÚ¡ 
EVP_CIPHER
 *
EVP_des_cfb1
();

752 cÚ¡ 
EVP_CIPHER
 *
EVP_des_cfb8
();

753 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_cfb64
();

754 
	#EVP_des_ede_cfb
 
EVP_des_ede_cfb64


	)

756 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_cfb1
();

757 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_cfb8
();

759 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_cfb64
();

760 
	#EVP_des_ede3_cfb
 
EVP_des_ede3_cfb64


	)

761 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_cfb1
();

762 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_cfb8
();

763 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ofb
();

764 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_ofb
();

765 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_ofb
();

766 cÚ¡ 
EVP_CIPHER
 *
EVP_des_cbc
();

767 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede_cbc
();

768 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_cbc
();

769 cÚ¡ 
EVP_CIPHER
 *
EVP_desx_cbc
();

770 cÚ¡ 
EVP_CIPHER
 *
EVP_des_ede3_w¿p
();

777 #ifdeà
OPENSSL_OPENBSD_DEV_CRYPTO


778 cÚ¡ 
EVP_CIPHER
 *
EVP_dev_üy±o_des_ede3_cbc
();

779 cÚ¡ 
EVP_CIPHER
 *
EVP_dev_üy±o_rc4
();

780 cÚ¡ 
EVP_MD
 *
EVP_dev_üy±o_md5
();

784 #iâdeà
OPENSSL_NO_RC4


785 cÚ¡ 
EVP_CIPHER
 *
EVP_rc4
();

786 cÚ¡ 
EVP_CIPHER
 *
EVP_rc4_40
();

787 #iâdeà
OPENSSL_NO_MD5


788 cÚ¡ 
EVP_CIPHER
 *
EVP_rc4_hmac_md5
();

791 #iâdeà
OPENSSL_NO_IDEA


792 cÚ¡ 
EVP_CIPHER
 *
EVP_id—_ecb
();

793 cÚ¡ 
EVP_CIPHER
 *
EVP_id—_cfb64
();

794 
	#EVP_id—_cfb
 
EVP_id—_cfb64


	)

795 cÚ¡ 
EVP_CIPHER
 *
EVP_id—_ofb
();

796 cÚ¡ 
EVP_CIPHER
 *
EVP_id—_cbc
();

798 #iâdeà
OPENSSL_NO_RC2


799 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_ecb
();

800 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_cbc
();

801 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_40_cbc
();

802 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_64_cbc
();

803 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_cfb64
();

804 
	#EVP_rc2_cfb
 
EVP_rc2_cfb64


	)

805 cÚ¡ 
EVP_CIPHER
 *
EVP_rc2_ofb
();

807 #iâdeà
OPENSSL_NO_BF


808 cÚ¡ 
EVP_CIPHER
 *
EVP_bf_ecb
();

809 cÚ¡ 
EVP_CIPHER
 *
EVP_bf_cbc
();

810 cÚ¡ 
EVP_CIPHER
 *
EVP_bf_cfb64
();

811 
	#EVP_bf_cfb
 
EVP_bf_cfb64


	)

812 cÚ¡ 
EVP_CIPHER
 *
EVP_bf_ofb
();

814 #iâdeà
OPENSSL_NO_CAST


815 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿ¡5_ecb
();

816 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿ¡5_cbc
();

817 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿ¡5_cfb64
();

818 
	#EVP_ÿ¡5_cfb
 
EVP_ÿ¡5_cfb64


	)

819 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿ¡5_ofb
();

821 #iâdeà
OPENSSL_NO_RC5


822 cÚ¡ 
EVP_CIPHER
 *
EVP_rc5_32_12_16_cbc
();

823 cÚ¡ 
EVP_CIPHER
 *
EVP_rc5_32_12_16_ecb
();

824 cÚ¡ 
EVP_CIPHER
 *
EVP_rc5_32_12_16_cfb64
();

825 
	#EVP_rc5_32_12_16_cfb
 
EVP_rc5_32_12_16_cfb64


	)

826 cÚ¡ 
EVP_CIPHER
 *
EVP_rc5_32_12_16_ofb
();

828 #iâdeà
OPENSSL_NO_AES


829 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_ecb
();

830 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cbc
();

831 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cfb1
();

832 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cfb8
();

833 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cfb128
();

834 
	#EVP_«s_128_cfb
 
EVP_«s_128_cfb128


	)

835 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_ofb
();

836 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_ùr
();

837 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_ccm
();

838 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_gcm
();

839 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_xts
();

840 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_w¿p
();

841 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_ecb
();

842 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_cbc
();

843 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_cfb1
();

844 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_cfb8
();

845 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_cfb128
();

846 
	#EVP_«s_192_cfb
 
EVP_«s_192_cfb128


	)

847 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_ofb
();

848 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_ùr
();

849 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_ccm
();

850 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_gcm
();

851 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_192_w¿p
();

852 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_ecb
();

853 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cbc
();

854 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cfb1
();

855 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cfb8
();

856 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cfb128
();

857 
	#EVP_«s_256_cfb
 
EVP_«s_256_cfb128


	)

858 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_ofb
();

859 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_ùr
();

860 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_ccm
();

861 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_gcm
();

862 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_xts
();

863 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_w¿p
();

864 #ià!
defšed
(
OPENSSL_NO_SHA
è&& !defšed(
OPENSSL_NO_SHA1
)

865 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cbc_hmac_sha1
();

866 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cbc_hmac_sha1
();

868 #iâdeà
OPENSSL_NO_SHA256


869 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_128_cbc_hmac_sha256
();

870 cÚ¡ 
EVP_CIPHER
 *
EVP_«s_256_cbc_hmac_sha256
();

873 #iâdeà
OPENSSL_NO_CAMELLIA


874 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_ecb
();

875 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_cbc
();

876 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_cfb1
();

877 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_cfb8
();

878 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_cfb128
();

879 
	#EVP_ÿm–lŸ_128_cfb
 
EVP_ÿm–lŸ_128_cfb128


	)

880 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_128_ofb
();

881 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_ecb
();

882 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_cbc
();

883 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_cfb1
();

884 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_cfb8
();

885 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_cfb128
();

886 
	#EVP_ÿm–lŸ_192_cfb
 
EVP_ÿm–lŸ_192_cfb128


	)

887 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_192_ofb
();

888 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_ecb
();

889 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_cbc
();

890 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_cfb1
();

891 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_cfb8
();

892 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_cfb128
();

893 
	#EVP_ÿm–lŸ_256_cfb
 
EVP_ÿm–lŸ_256_cfb128


	)

894 cÚ¡ 
EVP_CIPHER
 *
EVP_ÿm–lŸ_256_ofb
();

897 #iâdeà
OPENSSL_NO_SEED


898 cÚ¡ 
EVP_CIPHER
 *
EVP_£ed_ecb
();

899 cÚ¡ 
EVP_CIPHER
 *
EVP_£ed_cbc
();

900 cÚ¡ 
EVP_CIPHER
 *
EVP_£ed_cfb128
();

901 
	#EVP_£ed_cfb
 
EVP_£ed_cfb128


	)

902 cÚ¡ 
EVP_CIPHER
 *
EVP_£ed_ofb
();

905 
OPENSSL_add_®l_®gÜ™hms_nocÚf
();

906 
OPENSSL_add_®l_®gÜ™hms_cÚf
();

908 #ifdeà
OPENSSL_LOAD_CONF


909 
	#O³nSSL_add_®l_®gÜ™hms
() \

910 
	`OPENSSL_add_®l_®gÜ™hms_cÚf
()

	)

912 
	#O³nSSL_add_®l_®gÜ™hms
() \

913 
	`OPENSSL_add_®l_®gÜ™hms_nocÚf
()

	)

916 
O³nSSL_add_®l_ch”s
();

917 
O³nSSL_add_®l_dige¡s
();

918 
	#SSL—y_add_®l_®gÜ™hms
(è
	`O³nSSL_add_®l_®gÜ™hms
()

	)

919 
	#SSL—y_add_®l_ch”s
(è
	`O³nSSL_add_®l_ch”s
()

	)

920 
	#SSL—y_add_®l_dige¡s
(è
	`O³nSSL_add_®l_dige¡s
()

	)

922 
EVP_add_ch”
(cÚ¡ 
EVP_CIPHER
 *
ch”
);

923 
EVP_add_dige¡
(cÚ¡ 
EVP_MD
 *
dige¡
);

925 cÚ¡ 
EVP_CIPHER
 *
EVP_g‘_ch”byÇme
(cÚ¡ *
Çme
);

926 cÚ¡ 
EVP_MD
 *
EVP_g‘_dige¡byÇme
(cÚ¡ *
Çme
);

927 
EVP_ş—nup
();

929 
EVP_CIPHER_do_®l
((*
â
è(cÚ¡ 
EVP_CIPHER
 *
ch
,

930 cÚ¡ *
äom
, cÚ¡ *
to
, *
x
),

931 *
¬g
);

932 
EVP_CIPHER_do_®l_sÜ‹d
((*
â
)

933 (cÚ¡ 
EVP_CIPHER
 *
ch
, cÚ¡ *
äom
,

934 cÚ¡ *
to
, *
x
), *
¬g
);

936 
EVP_MD_do_®l
((*
â
è(cÚ¡ 
EVP_MD
 *
ch
,

937 cÚ¡ *
äom
, cÚ¡ *
to
, *
x
),

938 *
¬g
);

939 
EVP_MD_do_®l_sÜ‹d
((*
â
)

940 (cÚ¡ 
EVP_MD
 *
ch
, cÚ¡ *
äom
,

941 cÚ¡ *
to
, *
x
), *
¬g
);

943 
EVP_PKEY_deüy±_Şd
(*
dec_key
,

944 cÚ¡ *
’c_key
, 
’c_key_Ën
,

945 
EVP_PKEY
 *
´iv©e_key
);

946 
EVP_PKEY_’üy±_Şd
(*
’c_key
,

947 cÚ¡ *
key
, 
key_Ën
,

948 
EVP_PKEY
 *
pub_key
);

949 
EVP_PKEY_ty³
(
ty³
);

950 
EVP_PKEY_id
(cÚ¡ 
EVP_PKEY
 *
pkey
);

951 
EVP_PKEY_ba£_id
(cÚ¡ 
EVP_PKEY
 *
pkey
);

952 
EVP_PKEY_b™s
(
EVP_PKEY
 *
pkey
);

953 
EVP_PKEY_size
(
EVP_PKEY
 *
pkey
);

954 
EVP_PKEY_£t_ty³
(
EVP_PKEY
 *
pkey
, 
ty³
);

955 
EVP_PKEY_£t_ty³_¡r
(
EVP_PKEY
 *
pkey
, cÚ¡ *
¡r
, 
Ën
);

956 
EVP_PKEY_assign
(
EVP_PKEY
 *
pkey
, 
ty³
, *
key
);

957 *
EVP_PKEY_g‘0
(
EVP_PKEY
 *
pkey
);

959 #iâdeà
OPENSSL_NO_RSA


960 
r§_¡
;

961 
EVP_PKEY_£t1_RSA
(
EVP_PKEY
 *
pkey
, 
r§_¡
 *
key
);

962 
r§_¡
 *
EVP_PKEY_g‘1_RSA
(
EVP_PKEY
 *
pkey
);

964 #iâdeà
OPENSSL_NO_DSA


965 
d§_¡
;

966 
EVP_PKEY_£t1_DSA
(
EVP_PKEY
 *
pkey
, 
d§_¡
 *
key
);

967 
d§_¡
 *
EVP_PKEY_g‘1_DSA
(
EVP_PKEY
 *
pkey
);

969 #iâdeà
OPENSSL_NO_DH


970 
dh_¡
;

971 
EVP_PKEY_£t1_DH
(
EVP_PKEY
 *
pkey
, 
dh_¡
 *
key
);

972 
dh_¡
 *
EVP_PKEY_g‘1_DH
(
EVP_PKEY
 *
pkey
);

974 #iâdeà
OPENSSL_NO_EC


975 
ec_key_¡
;

976 
EVP_PKEY_£t1_EC_KEY
(
EVP_PKEY
 *
pkey
, 
ec_key_¡
 *
key
);

977 
ec_key_¡
 *
EVP_PKEY_g‘1_EC_KEY
(
EVP_PKEY
 *
pkey
);

980 
EVP_PKEY
 *
EVP_PKEY_Ãw
();

981 
EVP_PKEY_ä“
(
EVP_PKEY
 *
pkey
);

983 
EVP_PKEY
 *
d2i_PublicKey
(
ty³
, EVP_PKEY **
a
, cÚ¡ **
µ
,

984 
Ëngth
);

985 
i2d_PublicKey
(
EVP_PKEY
 *
a
, **
µ
);

987 
EVP_PKEY
 *
d2i_Priv©eKey
(
ty³
, EVP_PKEY **
a
, cÚ¡ **
µ
,

988 
Ëngth
);

989 
EVP_PKEY
 *
d2i_AutoPriv©eKey
(EVP_PKEY **
a
, cÚ¡ **
µ
,

990 
Ëngth
);

991 
i2d_Priv©eKey
(
EVP_PKEY
 *
a
, **
µ
);

993 
EVP_PKEY_cİy_·¿m‘”s
(
EVP_PKEY
 *
to
, cÚ¡ EVP_PKEY *
äom
);

994 
EVP_PKEY_missšg_·¿m‘”s
(cÚ¡ 
EVP_PKEY
 *
pkey
);

995 
EVP_PKEY_§ve_·¿m‘”s
(
EVP_PKEY
 *
pkey
, 
mode
);

996 
EVP_PKEY_cmp_·¿m‘”s
(cÚ¡ 
EVP_PKEY
 *
a
, cÚ¡ EVP_PKEY *
b
);

998 
EVP_PKEY_cmp
(cÚ¡ 
EVP_PKEY
 *
a
, cÚ¡ EVP_PKEY *
b
);

1000 
EVP_PKEY_´št_public
(
BIO
 *
out
, cÚ¡ 
EVP_PKEY
 *
pkey
,

1001 
šd’t
, 
ASN1_PCTX
 *
pùx
);

1002 
EVP_PKEY_´št_´iv©e
(
BIO
 *
out
, cÚ¡ 
EVP_PKEY
 *
pkey
,

1003 
šd’t
, 
ASN1_PCTX
 *
pùx
);

1004 
EVP_PKEY_´št_·¿ms
(
BIO
 *
out
, cÚ¡ 
EVP_PKEY
 *
pkey
,

1005 
šd’t
, 
ASN1_PCTX
 *
pùx
);

1007 
EVP_PKEY_g‘_deçuÉ_dige¡_nid
(
EVP_PKEY
 *
pkey
, *
²id
);

1009 
EVP_CIPHER_ty³
(cÚ¡ 
EVP_CIPHER
 *
ùx
);

1012 
EVP_CIPHER_·¿m_to_a¢1
(
EVP_CIPHER_CTX
 *
c
, 
ASN1_TYPE
 *
ty³
);

1013 
EVP_CIPHER_a¢1_to_·¿m
(
EVP_CIPHER_CTX
 *
c
, 
ASN1_TYPE
 *
ty³
);

1016 
EVP_CIPHER_£t_a¢1_iv
(
EVP_CIPHER_CTX
 *
c
, 
ASN1_TYPE
 *
ty³
);

1017 
EVP_CIPHER_g‘_a¢1_iv
(
EVP_CIPHER_CTX
 *
c
, 
ASN1_TYPE
 *
ty³
);

1020 
PKCS5_PBE_keyivg’
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ *
·ss
, 
·s¦’
,

1021 
ASN1_TYPE
 *
·¿m
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

1022 cÚ¡ 
EVP_MD
 *
md
, 
’_de
);

1023 
PKCS5_PBKDF2_HMAC_SHA1
(cÚ¡ *
·ss
, 
·s¦’
,

1024 cÚ¡ *
§É
, 
§ÉËn
, 
™”
,

1025 
keyËn
, *
out
);

1026 
PKCS5_PBKDF2_HMAC
(cÚ¡ *
·ss
, 
·s¦’
,

1027 cÚ¡ *
§É
, 
§ÉËn
, 
™”
,

1028 cÚ¡ 
EVP_MD
 *
dige¡
, 
keyËn
, *
out
);

1029 
PKCS5_v2_PBE_keyivg’
(
EVP_CIPHER_CTX
 *
ùx
, cÚ¡ *
·ss
, 
·s¦’
,

1030 
ASN1_TYPE
 *
·¿m
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

1031 cÚ¡ 
EVP_MD
 *
md
, 
’_de
);

1033 
PKCS5_PBE_add
();

1035 
EVP_PBE_Ch”In™
(
ASN1_OBJECT
 *
pbe_obj
, cÚ¡ *
·ss
, 
·s¦’
,

1036 
ASN1_TYPE
 *
·¿m
, 
EVP_CIPHER_CTX
 *
ùx
, 
’_de
);

1041 
	#EVP_PBE_TYPE_OUTER
 0x0

	)

1043 
	#EVP_PBE_TYPE_PRF
 0x1

	)

1045 
EVP_PBE_®g_add_ty³
(
pbe_ty³
, 
pbe_nid
, 
ch”_nid
,

1046 
md_nid
, 
EVP_PBE_KEYGEN
 *
keyg’
);

1047 
EVP_PBE_®g_add
(
nid
, cÚ¡ 
EVP_CIPHER
 *
ch”
, cÚ¡ 
EVP_MD
 *
md
,

1048 
EVP_PBE_KEYGEN
 *
keyg’
);

1049 
EVP_PBE_fšd
(
ty³
, 
pbe_nid
, *
púid
, *
pmnid
,

1050 
EVP_PBE_KEYGEN
 **
pkeyg’
);

1051 
EVP_PBE_ş—nup
();

1053 
	#ASN1_PKEY_ALIAS
 0x1

	)

1054 
	#ASN1_PKEY_DYNAMIC
 0x2

	)

1055 
	#ASN1_PKEY_SIGPARAM_NULL
 0x4

	)

1057 
	#ASN1_PKEY_CTRL_PKCS7_SIGN
 0x1

	)

1058 
	#ASN1_PKEY_CTRL_PKCS7_ENCRYPT
 0x2

	)

1059 
	#ASN1_PKEY_CTRL_DEFAULT_MD_NID
 0x3

	)

1060 
	#ASN1_PKEY_CTRL_CMS_SIGN
 0x5

	)

1061 
	#ASN1_PKEY_CTRL_CMS_ENVELOPE
 0x7

	)

1062 
	#ASN1_PKEY_CTRL_CMS_RI_TYPE
 0x8

	)

1064 
EVP_PKEY_a¢1_g‘_couÁ
();

1065 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
EVP_PKEY_a¢1_g‘0
(
idx
);

1066 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
EVP_PKEY_a¢1_fšd
(
ENGINE
 **
³
, 
ty³
);

1067 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
EVP_PKEY_a¢1_fšd_¡r
(
ENGINE
 **
³
,

1068 cÚ¡ *
¡r
, 
Ën
);

1069 
EVP_PKEY_a¢1_add0
(cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
am‘h
);

1070 
EVP_PKEY_a¢1_add_®Ÿs
(
to
, 
äom
);

1071 
EVP_PKEY_a¢1_g‘0_šfo
(*
µkey_id
, *
pkey_ba£_id
,

1072 *
µkey_æags
, cÚ¡ **
pšfo
,

1073 cÚ¡ **
µem_¡r
,

1074 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
am‘h
);

1076 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
EVP_PKEY_g‘0_a¢1
(
EVP_PKEY
 *
pkey
);

1077 
EVP_PKEY_ASN1_METHOD
 *
EVP_PKEY_a¢1_Ãw
(
id
, 
æags
,

1078 cÚ¡ *
³m_¡r
,

1079 cÚ¡ *
šfo
);

1080 
EVP_PKEY_a¢1_cİy
(
EVP_PKEY_ASN1_METHOD
 *
d¡
,

1081 cÚ¡ 
EVP_PKEY_ASN1_METHOD
 *
¤c
);

1082 
EVP_PKEY_a¢1_ä“
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
);

1083 
EVP_PKEY_a¢1_£t_public
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1084 (*
pub_decode
è(
EVP_PKEY
 *
pk
,

1085 
X509_PUBKEY
 *
pub
),

1086 (*
pub_’code
è(
X509_PUBKEY
 *
pub
,

1087 cÚ¡ 
EVP_PKEY
 *
pk
),

1088 (*
pub_cmp
è(cÚ¡ 
EVP_PKEY
 *
a
,

1089 cÚ¡ 
EVP_PKEY
 *
b
),

1090 (*
pub_´št
è(
BIO
 *
out
,

1091 cÚ¡ 
EVP_PKEY
 *
pkey
,

1092 
šd’t
, 
ASN1_PCTX
 *
pùx
),

1093 (*
pkey_size
è(cÚ¡ 
EVP_PKEY
 *
pk
),

1094 (*
pkey_b™s
è(cÚ¡ 
EVP_PKEY
 *
pk
));

1095 
EVP_PKEY_a¢1_£t_´iv©e
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1096 (*
´iv_decode
è(
EVP_PKEY
 *
pk
,

1097 
PKCS8_PRIV_KEY_INFO


1098 *
p8šf
),

1099 (*
´iv_’code
è(
PKCS8_PRIV_KEY_INFO
 *
p8
,

1100 cÚ¡ 
EVP_PKEY
 *
pk
),

1101 (*
´iv_´št
è(
BIO
 *
out
,

1102 cÚ¡ 
EVP_PKEY
 *
pkey
,

1103 
šd’t
,

1104 
ASN1_PCTX
 *
pùx
));

1105 
EVP_PKEY_a¢1_£t_·¿m
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1106 (*
·¿m_decode
è(
EVP_PKEY
 *
pkey
,

1107 cÚ¡ **
pd”
,

1108 
d”Ën
),

1109 (*
·¿m_’code
è(cÚ¡ 
EVP_PKEY
 *
pkey
,

1110 **
pd”
),

1111 (*
·¿m_missšg
è(cÚ¡ 
EVP_PKEY
 *
pk
),

1112 (*
·¿m_cİy
è(
EVP_PKEY
 *
to
,

1113 cÚ¡ 
EVP_PKEY
 *
äom
),

1114 (*
·¿m_cmp
è(cÚ¡ 
EVP_PKEY
 *
a
,

1115 cÚ¡ 
EVP_PKEY
 *
b
),

1116 (*
·¿m_´št
è(
BIO
 *
out
,

1117 cÚ¡ 
EVP_PKEY
 *
pkey
,

1118 
šd’t
,

1119 
ASN1_PCTX
 *
pùx
));

1121 
EVP_PKEY_a¢1_£t_ä“
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1122 (*
pkey_ä“
è(
EVP_PKEY
 *
pkey
));

1123 
EVP_PKEY_a¢1_£t_ù¾
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1124 (*
pkey_ù¾
è(
EVP_PKEY
 *
pkey
, 
İ
,

1125 
¬g1
, *
¬g2
));

1126 
EVP_PKEY_a¢1_£t_™em
(
EVP_PKEY_ASN1_METHOD
 *
am‘h
,

1127 (*
™em_v”ify
è(
EVP_MD_CTX
 *
ùx
,

1128 cÚ¡ 
ASN1_ITEM
 *
™
,

1129 *
a¢
,

1130 
X509_ALGOR
 *
a
,

1131 
ASN1_BIT_STRING
 *
sig
,

1132 
EVP_PKEY
 *
pkey
),

1133 (*
™em_sign
è(
EVP_MD_CTX
 *
ùx
,

1134 cÚ¡ 
ASN1_ITEM
 *
™
,

1135 *
a¢
,

1136 
X509_ALGOR
 *
®g1
,

1137 
X509_ALGOR
 *
®g2
,

1138 
ASN1_BIT_STRING
 *
sig
));

1140 
	#EVP_PKEY_OP_UNDEFINED
 0

	)

1141 
	#EVP_PKEY_OP_PARAMGEN
 (1<<1)

	)

1142 
	#EVP_PKEY_OP_KEYGEN
 (1<<2)

	)

1143 
	#EVP_PKEY_OP_SIGN
 (1<<3)

	)

1144 
	#EVP_PKEY_OP_VERIFY
 (1<<4)

	)

1145 
	#EVP_PKEY_OP_VERIFYRECOVER
 (1<<5)

	)

1146 
	#EVP_PKEY_OP_SIGNCTX
 (1<<6)

	)

1147 
	#EVP_PKEY_OP_VERIFYCTX
 (1<<7)

	)

1148 
	#EVP_PKEY_OP_ENCRYPT
 (1<<8)

	)

1149 
	#EVP_PKEY_OP_DECRYPT
 (1<<9)

	)

1150 
	#EVP_PKEY_OP_DERIVE
 (1<<10)

	)

1152 
	#EVP_PKEY_OP_TYPE_SIG
 \

1153 (
EVP_PKEY_OP_SIGN
 | 
EVP_PKEY_OP_VERIFY
 | 
EVP_PKEY_OP_VERIFYRECOVER
 \

1154 | 
EVP_PKEY_OP_SIGNCTX
 | 
EVP_PKEY_OP_VERIFYCTX
)

	)

1156 
	#EVP_PKEY_OP_TYPE_CRYPT
 \

1157 (
EVP_PKEY_OP_ENCRYPT
 | 
EVP_PKEY_OP_DECRYPT
)

	)

1159 
	#EVP_PKEY_OP_TYPE_NOGEN
 \

1160 (
EVP_PKEY_OP_SIG
 | 
EVP_PKEY_OP_CRYPT
 | 
EVP_PKEY_OP_DERIVE
)

	)

1162 
	#EVP_PKEY_OP_TYPE_GEN
 \

1163 (
EVP_PKEY_OP_PARAMGEN
 | 
EVP_PKEY_OP_KEYGEN
)

	)

1165 
	#EVP_PKEY_CTX_£t_sigÇtu»_md
(
ùx
, 
md
) \

1166 
	`EVP_PKEY_CTX_ù¾
(
ùx
, -1, 
EVP_PKEY_OP_TYPE_SIG
, \

1167 
EVP_PKEY_CTRL_MD
, 0, (*)
md
)

	)

1169 
	#EVP_PKEY_CTX_g‘_sigÇtu»_md
(
ùx
, 
pmd
) \

1170 
	`EVP_PKEY_CTX_ù¾
(
ùx
, -1, 
EVP_PKEY_OP_TYPE_SIG
, \

1171 
EVP_PKEY_CTRL_GET_MD
, 0, (*)
pmd
)

	)

1173 
	#EVP_PKEY_CTRL_MD
 1

	)

1174 
	#EVP_PKEY_CTRL_PEER_KEY
 2

	)

1176 
	#EVP_PKEY_CTRL_PKCS7_ENCRYPT
 3

	)

1177 
	#EVP_PKEY_CTRL_PKCS7_DECRYPT
 4

	)

1179 
	#EVP_PKEY_CTRL_PKCS7_SIGN
 5

	)

1181 
	#EVP_PKEY_CTRL_SET_MAC_KEY
 6

	)

1183 
	#EVP_PKEY_CTRL_DIGESTINIT
 7

	)

1186 
	#EVP_PKEY_CTRL_SET_IV
 8

	)

1188 
	#EVP_PKEY_CTRL_CMS_ENCRYPT
 9

	)

1189 
	#EVP_PKEY_CTRL_CMS_DECRYPT
 10

	)

1190 
	#EVP_PKEY_CTRL_CMS_SIGN
 11

	)

1192 
	#EVP_PKEY_CTRL_CIPHER
 12

	)

1194 
	#EVP_PKEY_CTRL_GET_MD
 13

	)

1196 
	#EVP_PKEY_ALG_CTRL
 0x1000

	)

1198 
	#EVP_PKEY_FLAG_AUTOARGLEN
 2

	)

1202 
	#EVP_PKEY_FLAG_SIGCTX_CUSTOM
 4

	)

1204 cÚ¡ 
EVP_PKEY_METHOD
 *
EVP_PKEY_m‘h_fšd
(
ty³
);

1205 
EVP_PKEY_METHOD
 *
EVP_PKEY_m‘h_Ãw
(
id
, 
æags
);

1206 
EVP_PKEY_m‘h_g‘0_šfo
(*
µkey_id
, *
pæags
,

1207 cÚ¡ 
EVP_PKEY_METHOD
 *
m‘h
);

1208 
EVP_PKEY_m‘h_cİy
(
EVP_PKEY_METHOD
 *
d¡
, cÚ¡ EVP_PKEY_METHOD *
¤c
);

1209 
EVP_PKEY_m‘h_ä“
(
EVP_PKEY_METHOD
 *
pm‘h
);

1210 
EVP_PKEY_m‘h_add0
(cÚ¡ 
EVP_PKEY_METHOD
 *
pm‘h
);

1212 
EVP_PKEY_CTX
 *
EVP_PKEY_CTX_Ãw
(
EVP_PKEY
 *
pkey
, 
ENGINE
 *
e
);

1213 
EVP_PKEY_CTX
 *
EVP_PKEY_CTX_Ãw_id
(
id
, 
ENGINE
 *
e
);

1214 
EVP_PKEY_CTX
 *
EVP_PKEY_CTX_dup
(EVP_PKEY_CTX *
ùx
);

1215 
EVP_PKEY_CTX_ä“
(
EVP_PKEY_CTX
 *
ùx
);

1217 
EVP_PKEY_CTX_ù¾
(
EVP_PKEY_CTX
 *
ùx
, 
keyty³
, 
İty³
,

1218 
cmd
, 
p1
, *
p2
);

1219 
EVP_PKEY_CTX_ù¾_¡r
(
EVP_PKEY_CTX
 *
ùx
, cÚ¡ *
ty³
,

1220 cÚ¡ *
v®ue
);

1222 
EVP_PKEY_CTX_g‘_İ”©iÚ
(
EVP_PKEY_CTX
 *
ùx
);

1223 
EVP_PKEY_CTX_£t0_keyg’_šfo
(
EVP_PKEY_CTX
 *
ùx
, *
d©
, 
d©Ën
);

1225 
EVP_PKEY
 *
EVP_PKEY_Ãw_mac_key
(
ty³
, 
ENGINE
 *
e
,

1226 cÚ¡ *
key
, 
keyËn
);

1228 
EVP_PKEY_CTX_£t_d©a
(
EVP_PKEY_CTX
 *
ùx
, *
d©a
);

1229 *
EVP_PKEY_CTX_g‘_d©a
(
EVP_PKEY_CTX
 *
ùx
);

1230 
EVP_PKEY
 *
EVP_PKEY_CTX_g‘0_pkey
(
EVP_PKEY_CTX
 *
ùx
);

1232 
EVP_PKEY
 *
EVP_PKEY_CTX_g‘0_³”key
(
EVP_PKEY_CTX
 *
ùx
);

1234 
EVP_PKEY_CTX_£t_­p_d©a
(
EVP_PKEY_CTX
 *
ùx
, *
d©a
);

1235 *
EVP_PKEY_CTX_g‘_­p_d©a
(
EVP_PKEY_CTX
 *
ùx
);

1237 
EVP_PKEY_sign_š™
(
EVP_PKEY_CTX
 *
ùx
);

1238 
EVP_PKEY_sign
(
EVP_PKEY_CTX
 *
ùx
,

1239 *
sig
, 
size_t
 *
sigËn
,

1240 cÚ¡ *
tbs
, 
size_t
 
tb¦’
);

1241 
EVP_PKEY_v”ify_š™
(
EVP_PKEY_CTX
 *
ùx
);

1242 
EVP_PKEY_v”ify
(
EVP_PKEY_CTX
 *
ùx
,

1243 cÚ¡ *
sig
, 
size_t
 
sigËn
,

1244 cÚ¡ *
tbs
, 
size_t
 
tb¦’
);

1245 
EVP_PKEY_v”ify_»cov”_š™
(
EVP_PKEY_CTX
 *
ùx
);

1246 
EVP_PKEY_v”ify_»cov”
(
EVP_PKEY_CTX
 *
ùx
,

1247 *
rout
, 
size_t
 *
rou’
,

1248 cÚ¡ *
sig
, 
size_t
 
sigËn
);

1249 
EVP_PKEY_’üy±_š™
(
EVP_PKEY_CTX
 *
ùx
);

1250 
EVP_PKEY_’üy±
(
EVP_PKEY_CTX
 *
ùx
,

1251 *
out
, 
size_t
 *
ou’
,

1252 cÚ¡ *
š
, 
size_t
 
šËn
);

1253 
EVP_PKEY_deüy±_š™
(
EVP_PKEY_CTX
 *
ùx
);

1254 
EVP_PKEY_deüy±
(
EVP_PKEY_CTX
 *
ùx
,

1255 *
out
, 
size_t
 *
ou’
,

1256 cÚ¡ *
š
, 
size_t
 
šËn
);

1258 
EVP_PKEY_d”ive_š™
(
EVP_PKEY_CTX
 *
ùx
);

1259 
EVP_PKEY_d”ive_£t_³”
(
EVP_PKEY_CTX
 *
ùx
, 
EVP_PKEY
 *
³”
);

1260 
EVP_PKEY_d”ive
(
EVP_PKEY_CTX
 *
ùx
, *
key
, 
size_t
 *
keyËn
);

1262 
	tEVP_PKEY_g’_cb
 (
	tEVP_PKEY_CTX
 *
	tùx
);

1264 
EVP_PKEY_·¿mg’_š™
(
EVP_PKEY_CTX
 *
ùx
);

1265 
EVP_PKEY_·¿mg’
(
EVP_PKEY_CTX
 *
ùx
, 
EVP_PKEY
 **
µkey
);

1266 
EVP_PKEY_keyg’_š™
(
EVP_PKEY_CTX
 *
ùx
);

1267 
EVP_PKEY_keyg’
(
EVP_PKEY_CTX
 *
ùx
, 
EVP_PKEY
 **
µkey
);

1269 
EVP_PKEY_CTX_£t_cb
(
EVP_PKEY_CTX
 *
ùx
, 
EVP_PKEY_g’_cb
 *
cb
);

1270 
EVP_PKEY_g’_cb
 *
EVP_PKEY_CTX_g‘_cb
(
EVP_PKEY_CTX
 *
ùx
);

1272 
EVP_PKEY_CTX_g‘_keyg’_šfo
(
EVP_PKEY_CTX
 *
ùx
, 
idx
);

1274 
EVP_PKEY_m‘h_£t_š™
(
EVP_PKEY_METHOD
 *
pm‘h
,

1275 (*
š™
è(
EVP_PKEY_CTX
 *
ùx
));

1277 
EVP_PKEY_m‘h_£t_cİy
(
EVP_PKEY_METHOD
 *
pm‘h
,

1278 (*
cİy
è(
EVP_PKEY_CTX
 *
d¡
,

1279 
EVP_PKEY_CTX
 *
¤c
));

1281 
EVP_PKEY_m‘h_£t_ş—nup
(
EVP_PKEY_METHOD
 *
pm‘h
,

1282 (*
ş—nup
è(
EVP_PKEY_CTX
 *
ùx
));

1284 
EVP_PKEY_m‘h_£t_·¿mg’
(
EVP_PKEY_METHOD
 *
pm‘h
,

1285 (*
·¿mg’_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1286 (*
·¿mg’
è(
EVP_PKEY_CTX
 *
ùx
,

1287 
EVP_PKEY
 *
pkey
));

1289 
EVP_PKEY_m‘h_£t_keyg’
(
EVP_PKEY_METHOD
 *
pm‘h
,

1290 (*
keyg’_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1291 (*
keyg’
è(
EVP_PKEY_CTX
 *
ùx
,

1292 
EVP_PKEY
 *
pkey
));

1294 
EVP_PKEY_m‘h_£t_sign
(
EVP_PKEY_METHOD
 *
pm‘h
,

1295 (*
sign_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1296 (*
sign
è(
EVP_PKEY_CTX
 *
ùx
,

1297 *
sig
, 
size_t
 *
sigËn
,

1298 cÚ¡ *
tbs
,

1299 
size_t
 
tb¦’
));

1301 
EVP_PKEY_m‘h_£t_v”ify
(
EVP_PKEY_METHOD
 *
pm‘h
,

1302 (*
v”ify_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1303 (*
v”ify
è(
EVP_PKEY_CTX
 *
ùx
,

1304 cÚ¡ *
sig
,

1305 
size_t
 
sigËn
,

1306 cÚ¡ *
tbs
,

1307 
size_t
 
tb¦’
));

1309 
EVP_PKEY_m‘h_£t_v”ify_»cov”
(
EVP_PKEY_METHOD
 *
pm‘h
,

1310 (*
v”ify_»cov”_š™
è(
EVP_PKEY_CTX


1311 *
ùx
),

1312 (*
v”ify_»cov”
è(
EVP_PKEY_CTX


1313 *
ùx
,

1315 *
sig
,

1316 
size_t
 *
sigËn
,

1318 *
tbs
,

1319 
size_t
 
tb¦’
));

1321 
EVP_PKEY_m‘h_£t_signùx
(
EVP_PKEY_METHOD
 *
pm‘h
,

1322 (*
signùx_š™
è(
EVP_PKEY_CTX
 *
ùx
,

1323 
EVP_MD_CTX
 *
mùx
),

1324 (*
signùx
è(
EVP_PKEY_CTX
 *
ùx
,

1325 *
sig
,

1326 
size_t
 *
sigËn
,

1327 
EVP_MD_CTX
 *
mùx
));

1329 
EVP_PKEY_m‘h_£t_v”ifyùx
(
EVP_PKEY_METHOD
 *
pm‘h
,

1330 (*
v”ifyùx_š™
è(
EVP_PKEY_CTX
 *
ùx
,

1331 
EVP_MD_CTX
 *
mùx
),

1332 (*
v”ifyùx
è(
EVP_PKEY_CTX
 *
ùx
,

1333 cÚ¡ *
sig
,

1334 
sigËn
,

1335 
EVP_MD_CTX
 *
mùx
));

1337 
EVP_PKEY_m‘h_£t_’üy±
(
EVP_PKEY_METHOD
 *
pm‘h
,

1338 (*
’üy±_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1339 (*
’üy±â
è(
EVP_PKEY_CTX
 *
ùx
,

1340 *
out
,

1341 
size_t
 *
ou’
,

1342 cÚ¡ *
š
,

1343 
size_t
 
šËn
));

1345 
EVP_PKEY_m‘h_£t_deüy±
(
EVP_PKEY_METHOD
 *
pm‘h
,

1346 (*
deüy±_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1347 (*
deüy±
è(
EVP_PKEY_CTX
 *
ùx
,

1348 *
out
,

1349 
size_t
 *
ou’
,

1350 cÚ¡ *
š
,

1351 
size_t
 
šËn
));

1353 
EVP_PKEY_m‘h_£t_d”ive
(
EVP_PKEY_METHOD
 *
pm‘h
,

1354 (*
d”ive_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1355 (*
d”ive
è(
EVP_PKEY_CTX
 *
ùx
,

1356 *
key
,

1357 
size_t
 *
keyËn
));

1359 
EVP_PKEY_m‘h_£t_ù¾
(
EVP_PKEY_METHOD
 *
pm‘h
,

1360 (*
ù¾
è(
EVP_PKEY_CTX
 *
ùx
, 
ty³
, 
p1
,

1361 *
p2
),

1362 (*
ù¾_¡r
è(
EVP_PKEY_CTX
 *
ùx
,

1363 cÚ¡ *
ty³
,

1364 cÚ¡ *
v®ue
));

1366 
EVP_PKEY_m‘h_g‘_š™
(
EVP_PKEY_METHOD
 *
pm‘h
,

1367 (**
pš™
è(
EVP_PKEY_CTX
 *
ùx
));

1369 
EVP_PKEY_m‘h_g‘_cİy
(
EVP_PKEY_METHOD
 *
pm‘h
,

1370 (**
pcİy
è(
EVP_PKEY_CTX
 *
d¡
,

1371 
EVP_PKEY_CTX
 *
¤c
));

1373 
EVP_PKEY_m‘h_g‘_ş—nup
(
EVP_PKEY_METHOD
 *
pm‘h
,

1374 (**
pş—nup
è(
EVP_PKEY_CTX
 *
ùx
));

1376 
EVP_PKEY_m‘h_g‘_·¿mg’
(
EVP_PKEY_METHOD
 *
pm‘h
,

1377 (**
µ¬amg’_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1378 (**
µ¬amg’
è(
EVP_PKEY_CTX
 *
ùx
,

1379 
EVP_PKEY
 *
pkey
));

1381 
EVP_PKEY_m‘h_g‘_keyg’
(
EVP_PKEY_METHOD
 *
pm‘h
,

1382 (**
pkeyg’_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1383 (**
pkeyg’
è(
EVP_PKEY_CTX
 *
ùx
,

1384 
EVP_PKEY
 *
pkey
));

1386 
EVP_PKEY_m‘h_g‘_sign
(
EVP_PKEY_METHOD
 *
pm‘h
,

1387 (**
psign_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1388 (**
psign
è(
EVP_PKEY_CTX
 *
ùx
,

1389 *
sig
, 
size_t
 *
sigËn
,

1390 cÚ¡ *
tbs
,

1391 
size_t
 
tb¦’
));

1393 
EVP_PKEY_m‘h_g‘_v”ify
(
EVP_PKEY_METHOD
 *
pm‘h
,

1394 (**
pv”ify_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1395 (**
pv”ify
è(
EVP_PKEY_CTX
 *
ùx
,

1396 cÚ¡ *
sig
,

1397 
size_t
 
sigËn
,

1398 cÚ¡ *
tbs
,

1399 
size_t
 
tb¦’
));

1401 
EVP_PKEY_m‘h_g‘_v”ify_»cov”
(
EVP_PKEY_METHOD
 *
pm‘h
,

1402 (**
pv”ify_»cov”_š™
è(
EVP_PKEY_CTX


1403 *
ùx
),

1404 (**
pv”ify_»cov”
è(
EVP_PKEY_CTX


1405 *
ùx
,

1407 *
sig
,

1408 
size_t
 *
sigËn
,

1410 *
tbs
,

1411 
size_t
 
tb¦’
));

1413 
EVP_PKEY_m‘h_g‘_signùx
(
EVP_PKEY_METHOD
 *
pm‘h
,

1414 (**
psignùx_š™
è(
EVP_PKEY_CTX
 *
ùx
,

1415 
EVP_MD_CTX
 *
mùx
),

1416 (**
psignùx
è(
EVP_PKEY_CTX
 *
ùx
,

1417 *
sig
,

1418 
size_t
 *
sigËn
,

1419 
EVP_MD_CTX
 *
mùx
));

1421 
EVP_PKEY_m‘h_g‘_v”ifyùx
(
EVP_PKEY_METHOD
 *
pm‘h
,

1422 (**
pv”ifyùx_š™
è(
EVP_PKEY_CTX
 *
ùx
,

1423 
EVP_MD_CTX
 *
mùx
),

1424 (**
pv”ifyùx
è(
EVP_PKEY_CTX
 *
ùx
,

1425 cÚ¡ *
sig
,

1426 
sigËn
,

1427 
EVP_MD_CTX
 *
mùx
));

1429 
EVP_PKEY_m‘h_g‘_’üy±
(
EVP_PKEY_METHOD
 *
pm‘h
,

1430 (**
³nüy±_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1431 (**
³nüy±â
è(
EVP_PKEY_CTX
 *
ùx
,

1432 *
out
,

1433 
size_t
 *
ou’
,

1434 cÚ¡ *
š
,

1435 
size_t
 
šËn
));

1437 
EVP_PKEY_m‘h_g‘_deüy±
(
EVP_PKEY_METHOD
 *
pm‘h
,

1438 (**
pdeüy±_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1439 (**
pdeüy±
è(
EVP_PKEY_CTX
 *
ùx
,

1440 *
out
,

1441 
size_t
 *
ou’
,

1442 cÚ¡ *
š
,

1443 
size_t
 
šËn
));

1445 
EVP_PKEY_m‘h_g‘_d”ive
(
EVP_PKEY_METHOD
 *
pm‘h
,

1446 (**
pd”ive_š™
è(
EVP_PKEY_CTX
 *
ùx
),

1447 (**
pd”ive
è(
EVP_PKEY_CTX
 *
ùx
,

1448 *
key
,

1449 
size_t
 *
keyËn
));

1451 
EVP_PKEY_m‘h_g‘_ù¾
(
EVP_PKEY_METHOD
 *
pm‘h
,

1452 (**
pù¾
è(
EVP_PKEY_CTX
 *
ùx
, 
ty³
, 
p1
,

1453 *
p2
),

1454 (**
pù¾_¡r
è(
EVP_PKEY_CTX
 *
ùx
,

1455 cÚ¡ *
ty³
,

1456 cÚ¡ *
v®ue
));

1458 
EVP_add_®g_moduË
();

1466 
ERR_lßd_EVP_¡ršgs
();

1471 
	#EVP_F_AESNI_INIT_KEY
 165

	)

1472 
	#EVP_F_AESNI_XTS_CIPHER
 176

	)

1473 
	#EVP_F_AES_INIT_KEY
 133

	)

1474 
	#EVP_F_AES_T4_INIT_KEY
 178

	)

1475 
	#EVP_F_AES_XTS
 172

	)

1476 
	#EVP_F_AES_XTS_CIPHER
 175

	)

1477 
	#EVP_F_ALG_MODULE_INIT
 177

	)

1478 
	#EVP_F_CAMELLIA_INIT_KEY
 159

	)

1479 
	#EVP_F_CMAC_INIT
 173

	)

1480 
	#EVP_F_CMLL_T4_INIT_KEY
 179

	)

1481 
	#EVP_F_D2I_PKEY
 100

	)

1482 
	#EVP_F_DO_SIGVER_INIT
 161

	)

1483 
	#EVP_F_DSAPKEY2PKCS8
 134

	)

1484 
	#EVP_F_DSA_PKEY2PKCS8
 135

	)

1485 
	#EVP_F_ECDSA_PKEY2PKCS8
 129

	)

1486 
	#EVP_F_ECKEY_PKEY2PKCS8
 132

	)

1487 
	#EVP_F_EVP_CIPHERINIT_EX
 123

	)

1488 
	#EVP_F_EVP_CIPHER_CTX_COPY
 163

	)

1489 
	#EVP_F_EVP_CIPHER_CTX_CTRL
 124

	)

1490 
	#EVP_F_EVP_CIPHER_CTX_SET_KEY_LENGTH
 122

	)

1491 
	#EVP_F_EVP_DECRYPTFINAL_EX
 101

	)

1492 
	#EVP_F_EVP_DECRYPTUPDATE
 181

	)

1493 
	#EVP_F_EVP_DIGESTINIT_EX
 128

	)

1494 
	#EVP_F_EVP_ENCRYPTFINAL_EX
 127

	)

1495 
	#EVP_F_EVP_ENCRYPTUPDATE
 180

	)

1496 
	#EVP_F_EVP_MD_CTX_COPY_EX
 110

	)

1497 
	#EVP_F_EVP_MD_SIZE
 162

	)

1498 
	#EVP_F_EVP_OPENINIT
 102

	)

1499 
	#EVP_F_EVP_PBE_ALG_ADD
 115

	)

1500 
	#EVP_F_EVP_PBE_ALG_ADD_TYPE
 160

	)

1501 
	#EVP_F_EVP_PBE_CIPHERINIT
 116

	)

1502 
	#EVP_F_EVP_PKCS82PKEY
 111

	)

1503 
	#EVP_F_EVP_PKCS82PKEY_BROKEN
 136

	)

1504 
	#EVP_F_EVP_PKEY2PKCS8_BROKEN
 113

	)

1505 
	#EVP_F_EVP_PKEY_COPY_PARAMETERS
 103

	)

1506 
	#EVP_F_EVP_PKEY_CTX_CTRL
 137

	)

1507 
	#EVP_F_EVP_PKEY_CTX_CTRL_STR
 150

	)

1508 
	#EVP_F_EVP_PKEY_CTX_DUP
 156

	)

1509 
	#EVP_F_EVP_PKEY_DECRYPT
 104

	)

1510 
	#EVP_F_EVP_PKEY_DECRYPT_INIT
 138

	)

1511 
	#EVP_F_EVP_PKEY_DECRYPT_OLD
 151

	)

1512 
	#EVP_F_EVP_PKEY_DERIVE
 153

	)

1513 
	#EVP_F_EVP_PKEY_DERIVE_INIT
 154

	)

1514 
	#EVP_F_EVP_PKEY_DERIVE_SET_PEER
 155

	)

1515 
	#EVP_F_EVP_PKEY_ENCRYPT
 105

	)

1516 
	#EVP_F_EVP_PKEY_ENCRYPT_INIT
 139

	)

1517 
	#EVP_F_EVP_PKEY_ENCRYPT_OLD
 152

	)

1518 
	#EVP_F_EVP_PKEY_GET1_DH
 119

	)

1519 
	#EVP_F_EVP_PKEY_GET1_DSA
 120

	)

1520 
	#EVP_F_EVP_PKEY_GET1_ECDSA
 130

	)

1521 
	#EVP_F_EVP_PKEY_GET1_EC_KEY
 131

	)

1522 
	#EVP_F_EVP_PKEY_GET1_RSA
 121

	)

1523 
	#EVP_F_EVP_PKEY_KEYGEN
 146

	)

1524 
	#EVP_F_EVP_PKEY_KEYGEN_INIT
 147

	)

1525 
	#EVP_F_EVP_PKEY_NEW
 106

	)

1526 
	#EVP_F_EVP_PKEY_PARAMGEN
 148

	)

1527 
	#EVP_F_EVP_PKEY_PARAMGEN_INIT
 149

	)

1528 
	#EVP_F_EVP_PKEY_SIGN
 140

	)

1529 
	#EVP_F_EVP_PKEY_SIGN_INIT
 141

	)

1530 
	#EVP_F_EVP_PKEY_VERIFY
 142

	)

1531 
	#EVP_F_EVP_PKEY_VERIFY_INIT
 143

	)

1532 
	#EVP_F_EVP_PKEY_VERIFY_RECOVER
 144

	)

1533 
	#EVP_F_EVP_PKEY_VERIFY_RECOVER_INIT
 145

	)

1534 
	#EVP_F_EVP_RIJNDAEL
 126

	)

1535 
	#EVP_F_EVP_SIGNFINAL
 107

	)

1536 
	#EVP_F_EVP_VERIFYFINAL
 108

	)

1537 
	#EVP_F_FIPS_CIPHERINIT
 166

	)

1538 
	#EVP_F_FIPS_CIPHER_CTX_COPY
 170

	)

1539 
	#EVP_F_FIPS_CIPHER_CTX_CTRL
 167

	)

1540 
	#EVP_F_FIPS_CIPHER_CTX_SET_KEY_LENGTH
 171

	)

1541 
	#EVP_F_FIPS_DIGESTINIT
 168

	)

1542 
	#EVP_F_FIPS_MD_CTX_COPY
 169

	)

1543 
	#EVP_F_HMAC_INIT_EX
 174

	)

1544 
	#EVP_F_INT_CTX_NEW
 157

	)

1545 
	#EVP_F_PKCS5_PBE_KEYIVGEN
 117

	)

1546 
	#EVP_F_PKCS5_V2_PBE_KEYIVGEN
 118

	)

1547 
	#EVP_F_PKCS5_V2_PBKDF2_KEYIVGEN
 164

	)

1548 
	#EVP_F_PKCS8_SET_BROKEN
 112

	)

1549 
	#EVP_F_PKEY_SET_TYPE
 158

	)

1550 
	#EVP_F_RC2_MAGIC_TO_METH
 109

	)

1551 
	#EVP_F_RC5_CTRL
 125

	)

1554 
	#EVP_R_AES_IV_SETUP_FAILED
 162

	)

1555 
	#EVP_R_AES_KEY_SETUP_FAILED
 143

	)

1556 
	#EVP_R_ASN1_LIB
 140

	)

1557 
	#EVP_R_BAD_BLOCK_LENGTH
 136

	)

1558 
	#EVP_R_BAD_DECRYPT
 100

	)

1559 
	#EVP_R_BAD_KEY_LENGTH
 137

	)

1560 
	#EVP_R_BN_DECODE_ERROR
 112

	)

1561 
	#EVP_R_BN_PUBKEY_ERROR
 113

	)

1562 
	#EVP_R_BUFFER_TOO_SMALL
 155

	)

1563 
	#EVP_R_CAMELLIA_KEY_SETUP_FAILED
 157

	)

1564 
	#EVP_R_CIPHER_PARAMETER_ERROR
 122

	)

1565 
	#EVP_R_COMMAND_NOT_SUPPORTED
 147

	)

1566 
	#EVP_R_CTRL_NOT_IMPLEMENTED
 132

	)

1567 
	#EVP_R_CTRL_OPERATION_NOT_IMPLEMENTED
 133

	)

1568 
	#EVP_R_DATA_NOT_MULTIPLE_OF_BLOCK_LENGTH
 138

	)

1569 
	#EVP_R_DECODE_ERROR
 114

	)

1570 
	#EVP_R_DIFFERENT_KEY_TYPES
 101

	)

1571 
	#EVP_R_DIFFERENT_PARAMETERS
 153

	)

1572 
	#EVP_R_DISABLED_FOR_FIPS
 163

	)

1573 
	#EVP_R_ENCODE_ERROR
 115

	)

1574 
	#EVP_R_ERROR_LOADING_SECTION
 165

	)

1575 
	#EVP_R_ERROR_SETTING_FIPS_MODE
 166

	)

1576 
	#EVP_R_EVP_PBE_CIPHERINIT_ERROR
 119

	)

1577 
	#EVP_R_EXPECTING_AN_RSA_KEY
 127

	)

1578 
	#EVP_R_EXPECTING_A_DH_KEY
 128

	)

1579 
	#EVP_R_EXPECTING_A_DSA_KEY
 129

	)

1580 
	#EVP_R_EXPECTING_A_ECDSA_KEY
 141

	)

1581 
	#EVP_R_EXPECTING_A_EC_KEY
 142

	)

1582 
	#EVP_R_FIPS_MODE_NOT_SUPPORTED
 167

	)

1583 
	#EVP_R_INITIALIZATION_ERROR
 134

	)

1584 
	#EVP_R_INPUT_NOT_INITIALIZED
 111

	)

1585 
	#EVP_R_INVALID_DIGEST
 152

	)

1586 
	#EVP_R_INVALID_FIPS_MODE
 168

	)

1587 
	#EVP_R_INVALID_KEY
 171

	)

1588 
	#EVP_R_INVALID_KEY_LENGTH
 130

	)

1589 
	#EVP_R_INVALID_OPERATION
 148

	)

1590 
	#EVP_R_IV_TOO_LARGE
 102

	)

1591 
	#EVP_R_KEYGEN_FAILURE
 120

	)

1592 
	#EVP_R_MESSAGE_DIGEST_IS_NULL
 159

	)

1593 
	#EVP_R_METHOD_NOT_SUPPORTED
 144

	)

1594 
	#EVP_R_MISSING_PARAMETERS
 103

	)

1595 
	#EVP_R_NO_CIPHER_SET
 131

	)

1596 
	#EVP_R_NO_DEFAULT_DIGEST
 158

	)

1597 
	#EVP_R_NO_DIGEST_SET
 139

	)

1598 
	#EVP_R_NO_DSA_PARAMETERS
 116

	)

1599 
	#EVP_R_NO_KEY_SET
 154

	)

1600 
	#EVP_R_NO_OPERATION_SET
 149

	)

1601 
	#EVP_R_NO_SIGN_FUNCTION_CONFIGURED
 104

	)

1602 
	#EVP_R_NO_VERIFY_FUNCTION_CONFIGURED
 105

	)

1603 
	#EVP_R_OPERATION_NOT_SUPPORTED_FOR_THIS_KEYTYPE
 150

	)

1604 
	#EVP_R_OPERATON_NOT_INITIALIZED
 151

	)

1605 
	#EVP_R_PKCS8_UNKNOWN_BROKEN_TYPE
 117

	)

1606 
	#EVP_R_PRIVATE_KEY_DECODE_ERROR
 145

	)

1607 
	#EVP_R_PRIVATE_KEY_ENCODE_ERROR
 146

	)

1608 
	#EVP_R_PUBLIC_KEY_NOT_RSA
 106

	)

1609 
	#EVP_R_TOO_LARGE
 164

	)

1610 
	#EVP_R_UNKNOWN_CIPHER
 160

	)

1611 
	#EVP_R_UNKNOWN_DIGEST
 161

	)

1612 
	#EVP_R_UNKNOWN_OPTION
 169

	)

1613 
	#EVP_R_UNKNOWN_PBE_ALGORITHM
 121

	)

1614 
	#EVP_R_UNSUPORTED_NUMBER_OF_ROUNDS
 135

	)

1615 
	#EVP_R_UNSUPPORTED_ALGORITHM
 156

	)

1616 
	#EVP_R_UNSUPPORTED_CIPHER
 107

	)

1617 
	#EVP_R_UNSUPPORTED_KEYLENGTH
 123

	)

1618 
	#EVP_R_UNSUPPORTED_KEY_DERIVATION_FUNCTION
 124

	)

1619 
	#EVP_R_UNSUPPORTED_KEY_SIZE
 108

	)

1620 
	#EVP_R_UNSUPPORTED_PRF
 125

	)

1621 
	#EVP_R_UNSUPPORTED_PRIVATE_KEY_ALGORITHM
 118

	)

1622 
	#EVP_R_UNSUPPORTED_SALT_TYPE
 126

	)

1623 
	#EVP_R_WRAP_MODE_NOT_ALLOWED
 170

	)

1624 
	#EVP_R_WRONG_FINAL_BLOCK_LENGTH
 109

	)

1625 
	#EVP_R_WRONG_PUBLIC_KEY_TYPE
 110

	)

1627 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/opensslv.h

1 #iâdeà
HEADER_OPENSSLV_H


2 
	#HEADER_OPENSSLV_H


	)

4 #ifdeà 
__ılu¥lus


33 
	#OPENSSL_VERSION_NUMBER
 0x1000215fL

	)

34 #ifdeà
OPENSSL_FIPS


35 
	#OPENSSL_VERSION_TEXT
 "O³nSSL 1.0.2u-f  20 Deø2019"

	)

37 
	#OPENSSL_VERSION_TEXT
 "O³nSSL 1.0.2u 20 Deø2019"

	)

39 
	#OPENSSL_VERSION_PTEXT
 "…¬ˆoà" 
OPENSSL_VERSION_TEXT


	)

90 
	#SHLIB_VERSION_HISTORY
 ""

	)

91 
	#SHLIB_VERSION_NUMBER
 "1.0.2"

	)

94 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/pem2.h

60 #ifdeà
__ılu¥lus


64 #iâdeà
HEADER_PEM_H


65 
ERR_lßd_PEM_¡ršgs
();

68 #ifdeà
__ılu¥lus


	@/usr/include/openssl/pkcs7.h

59 #iâdeà
HEADER_PKCS7_H


60 
	#HEADER_PKCS7_H


	)

62 
	~<İ’s¦/a¢1.h
>

63 
	~<İ’s¦/bio.h
>

64 
	~<İ’s¦/e_os2.h
>

66 
	~<İ’s¦/symhacks.h
>

67 
	~<İ’s¦/os¦_typ.h
>

69 #ifdeà 
__ılu¥lus


73 #ifdeà
OPENSSL_SYS_WIN32


75 #undeà
PKCS7_ISSUER_AND_SERIAL


76 #undeà
PKCS7_SIGNER_INFO


86 
	spkcs7_issu”_ªd_£rŸl_¡
 {

87 
X509_NAME
 *
issu”
;

88 
ASN1_INTEGER
 *
£rŸl
;

89 } 
	tPKCS7_ISSUER_AND_SERIAL
;

91 
	spkcs7_sigÃr_šfo_¡
 {

92 
ASN1_INTEGER
 *
v”siÚ
;

93 
PKCS7_ISSUER_AND_SERIAL
 *
issu”_ªd_£rŸl
;

94 
X509_ALGOR
 *
dige¡_®g
;

95 
STACK_OF
(
X509_ATTRIBUTE
è*
auth_©Œ
;

96 
X509_ALGOR
 *
dige¡_’c_®g
;

97 
ASN1_OCTET_STRING
 *
’c_dige¡
;

98 
STACK_OF
(
X509_ATTRIBUTE
è*
uÇuth_©Œ
;

100 
EVP_PKEY
 *
pkey
;

101 } 
	tPKCS7_SIGNER_INFO
;

103 
DECLARE_STACK_OF
(
PKCS7_SIGNER_INFO
)

104 
DECLARE_ASN1_SET_OF
(
PKCS7_SIGNER_INFO
)

106 
	spkcs7_»c_šfo_¡
 {

107 
ASN1_INTEGER
 *
v”siÚ
;

108 
PKCS7_ISSUER_AND_SERIAL
 *
issu”_ªd_£rŸl
;

109 
X509_ALGOR
 *
key_’c_®gÜ
;

110 
ASN1_OCTET_STRING
 *
’c_key
;

111 
X509
 *
û¹
;

112 } 
	tPKCS7_RECIP_INFO
;

114 
DECLARE_STACK_OF
(
PKCS7_RECIP_INFO
)

115 
DECLARE_ASN1_SET_OF
(
PKCS7_RECIP_INFO
)

117 
	spkcs7_sigÃd_¡
 {

118 
ASN1_INTEGER
 *
v”siÚ
;

119 
STACK_OF
(
X509_ALGOR
è*
md_®gs
;

120 
STACK_OF
(
X509
è*
û¹
;

121 
STACK_OF
(
X509_CRL
è*
ül
;

122 
STACK_OF
(
PKCS7_SIGNER_INFO
è*
sigÃr_šfo
;

123 
pkcs7_¡
 *
cÚ‹Ás
;

124 } 
	tPKCS7_SIGNED
;

130 
	spkcs7_’c_cÚ‹Á_¡
 {

131 
ASN1_OBJECT
 *
cÚ‹Á_ty³
;

132 
X509_ALGOR
 *
®gÜ™hm
;

133 
ASN1_OCTET_STRING
 *
’c_d©a
;

134 cÚ¡ 
EVP_CIPHER
 *
ch”
;

135 } 
	tPKCS7_ENC_CONTENT
;

137 
	spkcs7_’v–İed_¡
 {

138 
ASN1_INTEGER
 *
v”siÚ
;

139 
STACK_OF
(
PKCS7_RECIP_INFO
è*
»c›Ášfo
;

140 
PKCS7_ENC_CONTENT
 *
’c_d©a
;

141 } 
	tPKCS7_ENVELOPE
;

143 
	spkcs7_sigÃdªd’v–İed_¡
 {

144 
ASN1_INTEGER
 *
v”siÚ
;

145 
STACK_OF
(
X509_ALGOR
è*
md_®gs
;

146 
STACK_OF
(
X509
è*
û¹
;

147 
STACK_OF
(
X509_CRL
è*
ül
;

148 
STACK_OF
(
PKCS7_SIGNER_INFO
è*
sigÃr_šfo
;

149 
PKCS7_ENC_CONTENT
 *
’c_d©a
;

150 
STACK_OF
(
PKCS7_RECIP_INFO
è*
»c›Ášfo
;

151 } 
	tPKCS7_SIGN_ENVELOPE
;

153 
	spkcs7_dige¡_¡
 {

154 
ASN1_INTEGER
 *
v”siÚ
;

155 
X509_ALGOR
 *
md
;

156 
pkcs7_¡
 *
cÚ‹Ás
;

157 
ASN1_OCTET_STRING
 *
dige¡
;

158 } 
	tPKCS7_DIGEST
;

160 
	spkcs7_’üy±ed_¡
 {

161 
ASN1_INTEGER
 *
v”siÚ
;

162 
PKCS7_ENC_CONTENT
 *
’c_d©a
;

163 } 
	tPKCS7_ENCRYPT
;

165 
	spkcs7_¡
 {

170 *
a¢1
;

171 
Ëngth
;

172 
	#PKCS7_S_HEADER
 0

	)

173 
	#PKCS7_S_BODY
 1

	)

174 
	#PKCS7_S_TAIL
 2

	)

175 
¡©e
;

176 
d‘ached
;

177 
ASN1_OBJECT
 *
ty³
;

184 *
±r
;

186 
ASN1_OCTET_STRING
 *
d©a
;

188 
PKCS7_SIGNED
 *
sign
;

190 
PKCS7_ENVELOPE
 *
’v–İed
;

192 
PKCS7_SIGN_ENVELOPE
 *
sigÃd_ªd_’v–İed
;

194 
PKCS7_DIGEST
 *
dige¡
;

196 
PKCS7_ENCRYPT
 *
’üy±ed
;

198 
ASN1_TYPE
 *
Ùh”
;

199 } 
d
;

200 } 
	tPKCS7
;

202 
DECLARE_STACK_OF
(
PKCS7
)

203 
DECLARE_ASN1_SET_OF
(
PKCS7
)

204 
DECLARE_PKCS12_STACK_OF
(
PKCS7
)

206 
	#PKCS7_OP_SET_DETACHED_SIGNATURE
 1

	)

207 
	#PKCS7_OP_GET_DETACHED_SIGNATURE
 2

	)

209 
	#PKCS7_g‘_sigÃd_©Œibu‹s
(
si
è((si)->
auth_©Œ
)

	)

210 
	#PKCS7_g‘_©Œibu‹s
(
si
è((si)->
uÇuth_©Œ
)

	)

212 
	#PKCS7_ty³_is_sigÃd
(
a
è(
	`OBJ_obj2nid
(×)->
ty³
è=ğ
NID_pkcs7_sigÃd
)

	)

213 
	#PKCS7_ty³_is_’üy±ed
(
a
è(
	`OBJ_obj2nid
(×)->
ty³
è=ğ
NID_pkcs7_’üy±ed
)

	)

214 
	#PKCS7_ty³_is_’v–İed
(
a
è(
	`OBJ_obj2nid
(×)->
ty³
è=ğ
NID_pkcs7_’v–İed
)

	)

215 
	#PKCS7_ty³_is_sigÃdAndEnv–İed
(
a
) \

216 (
	`OBJ_obj2nid
((
a
)->
ty³
è=ğ
NID_pkcs7_sigÃdAndEnv–İed
)

	)

217 
	#PKCS7_ty³_is_d©a
(
a
è(
	`OBJ_obj2nid
(×)->
ty³
è=ğ
NID_pkcs7_d©a
)

	)

218 
	#PKCS7_ty³_is_dige¡
(
a
è(
	`OBJ_obj2nid
(×)->
ty³
è=ğ
NID_pkcs7_dige¡
)

	)

220 
	#PKCS7_£t_d‘ached
(
p
,
v
) \

221 
	`PKCS7_ù¾
(
p
,
PKCS7_OP_SET_DETACHED_SIGNATURE
,
v
,
NULL
)

	)

222 
	#PKCS7_g‘_d‘ached
(
p
) \

223 
	`PKCS7_ù¾
(
p
,
PKCS7_OP_GET_DETACHED_SIGNATURE
,0,
NULL
)

	)

225 
	#PKCS7_is_d‘ached
(
p7
è(
	`PKCS7_ty³_is_sigÃd
Õ7è&& 
	`PKCS7_g‘_d‘ached
Õ7))

	)

229 
	#PKCS7_TEXT
 0x1

	)

230 
	#PKCS7_NOCERTS
 0x2

	)

231 
	#PKCS7_NOSIGS
 0x4

	)

232 
	#PKCS7_NOCHAIN
 0x8

	)

233 
	#PKCS7_NOINTERN
 0x10

	)

234 
	#PKCS7_NOVERIFY
 0x20

	)

235 
	#PKCS7_DETACHED
 0x40

	)

236 
	#PKCS7_BINARY
 0x80

	)

237 
	#PKCS7_NOATTR
 0x100

	)

238 
	#PKCS7_NOSMIMECAP
 0x200

	)

239 
	#PKCS7_NOOLDMIMETYPE
 0x400

	)

240 
	#PKCS7_CRLFEOL
 0x800

	)

241 
	#PKCS7_STREAM
 0x1000

	)

242 
	#PKCS7_NOCRL
 0x2000

	)

243 
	#PKCS7_PARTIAL
 0x4000

	)

244 
	#PKCS7_REUSE_DIGEST
 0x8000

	)

248 
	#SMIME_TEXT
 
PKCS7_TEXT


	)

249 
	#SMIME_NOCERTS
 
PKCS7_NOCERTS


	)

250 
	#SMIME_NOSIGS
 
PKCS7_NOSIGS


	)

251 
	#SMIME_NOCHAIN
 
PKCS7_NOCHAIN


	)

252 
	#SMIME_NOINTERN
 
PKCS7_NOINTERN


	)

253 
	#SMIME_NOVERIFY
 
PKCS7_NOVERIFY


	)

254 
	#SMIME_DETACHED
 
PKCS7_DETACHED


	)

255 
	#SMIME_BINARY
 
PKCS7_BINARY


	)

256 
	#SMIME_NOATTR
 
PKCS7_NOATTR


	)

258 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_ISSUER_AND_SERIAL
)

260 
PKCS7_ISSUER_AND_SERIAL_dige¡
(
PKCS7_ISSUER_AND_SERIAL
 *
d©a
,

261 cÚ¡ 
EVP_MD
 *
ty³
, *
md
,

262 *
Ën
);

263 #iâdeà
OPENSSL_NO_FP_API


264 
PKCS7
 *
d2i_PKCS7_å
(
FILE
 *
å
, PKCS7 **
p7
);

265 
i2d_PKCS7_å
(
FILE
 *
å
, 
PKCS7
 *
p7
);

267 
PKCS7
 *
PKCS7_dup
(PKCS7 *
p7
);

268 
PKCS7
 *
d2i_PKCS7_bio
(
BIO
 *
bp
, PKCS7 **
p7
);

269 
i2d_PKCS7_bio
(
BIO
 *
bp
, 
PKCS7
 *
p7
);

270 
i2d_PKCS7_bio_¡»am
(
BIO
 *
out
, 
PKCS7
 *
p7
, BIO *
š
, 
æags
);

271 
PEM_wr™e_bio_PKCS7_¡»am
(
BIO
 *
out
, 
PKCS7
 *
p7
, BIO *
š
, 
æags
);

273 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_SIGNER_INFO
)

274 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_RECIP_INFO
)

275 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_SIGNED
)

276 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_ENC_CONTENT
)

277 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_ENVELOPE
)

278 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_SIGN_ENVELOPE
)

279 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_DIGEST
)

280 
DECLARE_ASN1_FUNCTIONS
(
PKCS7_ENCRYPT
)

281 
DECLARE_ASN1_FUNCTIONS
(
PKCS7
)

283 
DECLARE_ASN1_ITEM
(
PKCS7_ATTR_SIGN
)

284 
DECLARE_ASN1_ITEM
(
PKCS7_ATTR_VERIFY
)

286 
DECLARE_ASN1_NDEF_FUNCTION
(
PKCS7
)

287 
DECLARE_ASN1_PRINT_FUNCTION
(
PKCS7
)

289 
PKCS7_ù¾
(
PKCS7
 *
p7
, 
cmd
, 
Ïrg
, *
·rg
);

291 
PKCS7_£t_ty³
(
PKCS7
 *
p7
, 
ty³
);

292 
PKCS7_£t0_ty³_Ùh”
(
PKCS7
 *
p7
, 
ty³
, 
ASN1_TYPE
 *
Ùh”
);

293 
PKCS7_£t_cÚ‹Á
(
PKCS7
 *
p7
, PKCS7 *
p7_d©a
);

294 
PKCS7_SIGNER_INFO_£t
(
PKCS7_SIGNER_INFO
 *
p7i
, 
X509
 *
x509
, 
EVP_PKEY
 *
pkey
,

295 cÚ¡ 
EVP_MD
 *
dg¡
);

296 
PKCS7_SIGNER_INFO_sign
(
PKCS7_SIGNER_INFO
 *
si
);

297 
PKCS7_add_sigÃr
(
PKCS7
 *
p7
, 
PKCS7_SIGNER_INFO
 *
p7i
);

298 
PKCS7_add_û¹ifiÿ‹
(
PKCS7
 *
p7
, 
X509
 *
x509
);

299 
PKCS7_add_ül
(
PKCS7
 *
p7
, 
X509_CRL
 *
x509
);

300 
PKCS7_cÚ‹Á_Ãw
(
PKCS7
 *
p7
, 
nid
);

301 
PKCS7_d©aV”ify
(
X509_STORE
 *
û¹_¡Üe
, 
X509_STORE_CTX
 *
ùx
,

302 
BIO
 *
bio
, 
PKCS7
 *
p7
, 
PKCS7_SIGNER_INFO
 *
si
);

303 
PKCS7_sigÇtu»V”ify
(
BIO
 *
bio
, 
PKCS7
 *
p7
, 
PKCS7_SIGNER_INFO
 *
si
,

304 
X509
 *
x509
);

306 
BIO
 *
PKCS7_d©aIn™
(
PKCS7
 *
p7
, BIO *
bio
);

307 
PKCS7_d©aFš®
(
PKCS7
 *
p7
, 
BIO
 *
bio
);

308 
BIO
 *
PKCS7_d©aDecode
(
PKCS7
 *
p7
, 
EVP_PKEY
 *
pkey
, BIO *
š_bio
, 
X509
 *
pû¹
);

310 
PKCS7_SIGNER_INFO
 *
PKCS7_add_sigÇtu»
(
PKCS7
 *
p7
, 
X509
 *
x509
,

311 
EVP_PKEY
 *
pkey
, cÚ¡ 
EVP_MD
 *
dg¡
);

312 
X509
 *
PKCS7_û¹_äom_sigÃr_šfo
(
PKCS7
 *
p7
, 
PKCS7_SIGNER_INFO
 *
si
);

313 
PKCS7_£t_dige¡
(
PKCS7
 *
p7
, cÚ¡ 
EVP_MD
 *
md
);

314 
STACK_OF
(
PKCS7_SIGNER_INFO
è*
PKCS7_g‘_sigÃr_šfo
(
PKCS7
 *
p7
);

316 
PKCS7_RECIP_INFO
 *
PKCS7_add_»c›Á
(
PKCS7
 *
p7
, 
X509
 *
x509
);

317 
PKCS7_SIGNER_INFO_g‘0_®gs
(
PKCS7_SIGNER_INFO
 *
si
, 
EVP_PKEY
 **
pk
,

318 
X509_ALGOR
 **
pdig
, X509_ALGOR **
psig
);

319 
PKCS7_RECIP_INFO_g‘0_®g
(
PKCS7_RECIP_INFO
 *
ri
, 
X509_ALGOR
 **
³nc
);

320 
PKCS7_add_»c›Á_šfo
(
PKCS7
 *
p7
, 
PKCS7_RECIP_INFO
 *
ri
);

321 
PKCS7_RECIP_INFO_£t
(
PKCS7_RECIP_INFO
 *
p7i
, 
X509
 *
x509
);

322 
PKCS7_£t_ch”
(
PKCS7
 *
p7
, cÚ¡ 
EVP_CIPHER
 *
ch”
);

323 
PKCS7_¡»am
(***
bound¬y
, 
PKCS7
 *
p7
);

325 
PKCS7_ISSUER_AND_SERIAL
 *
PKCS7_g‘_issu”_ªd_£rŸl
(
PKCS7
 *
p7
, 
idx
);

326 
ASN1_OCTET_STRING
 *
PKCS7_dige¡_äom_©Œibu‹s
(
STACK_OF
(
X509_ATTRIBUTE
è*
sk
);

327 
PKCS7_add_sigÃd_©Œibu‹
(
PKCS7_SIGNER_INFO
 *
p7si
, 
nid
, 
ty³
,

328 *
d©a
);

329 
PKCS7_add_©Œibu‹
(
PKCS7_SIGNER_INFO
 *
p7si
, 
nid
, 
©¹y³
,

330 *
v®ue
);

331 
ASN1_TYPE
 *
PKCS7_g‘_©Œibu‹
(
PKCS7_SIGNER_INFO
 *
si
, 
nid
);

332 
ASN1_TYPE
 *
PKCS7_g‘_sigÃd_©Œibu‹
(
PKCS7_SIGNER_INFO
 *
si
, 
nid
);

333 
PKCS7_£t_sigÃd_©Œibu‹s
(
PKCS7_SIGNER_INFO
 *
p7si
,

334 
STACK_OF
(
X509_ATTRIBUTE
è*
sk
);

335 
PKCS7_£t_©Œibu‹s
(
PKCS7_SIGNER_INFO
 *
p7si
,

336 
STACK_OF
(
X509_ATTRIBUTE
è*
sk
);

338 
PKCS7
 *
PKCS7_sign
(
X509
 *
signû¹
, 
EVP_PKEY
 *
pkey
, 
STACK_OF
(X509è*
û¹s
,

339 
BIO
 *
d©a
, 
æags
);

341 
PKCS7_SIGNER_INFO
 *
PKCS7_sign_add_sigÃr
(
PKCS7
 *
p7
,

342 
X509
 *
signû¹
, 
EVP_PKEY
 *
pkey
,

343 cÚ¡ 
EVP_MD
 *
md
, 
æags
);

345 
PKCS7_fš®
(
PKCS7
 *
p7
, 
BIO
 *
d©a
, 
æags
);

346 
PKCS7_v”ify
(
PKCS7
 *
p7
, 
STACK_OF
(
X509
è*
û¹s
, 
X509_STORE
 *
¡Üe
,

347 
BIO
 *
šd©a
, BIO *
out
, 
æags
);

348 
STACK_OF
(
X509
è*
PKCS7_g‘0_sigÃrs
(
PKCS7
 *
p7
, STACK_OF(X509è*
û¹s
,

349 
æags
);

350 
PKCS7
 *
PKCS7_’üy±
(
STACK_OF
(
X509
è*
û¹s
, 
BIO
 *
š
, cÚ¡ 
EVP_CIPHER
 *
ch”
,

351 
æags
);

352 
PKCS7_deüy±
(
PKCS7
 *
p7
, 
EVP_PKEY
 *
pkey
, 
X509
 *
û¹
, 
BIO
 *
d©a
,

353 
æags
);

355 
PKCS7_add_©Œib_smimeÿp
(
PKCS7_SIGNER_INFO
 *
si
,

356 
STACK_OF
(
X509_ALGOR
è*
ÿp
);

357 
STACK_OF
(
X509_ALGOR
è*
PKCS7_g‘_smimeÿp
(
PKCS7_SIGNER_INFO
 *
si
);

358 
PKCS7_sim¶e_smimeÿp
(
STACK_OF
(
X509_ALGOR
è*
sk
, 
nid
, 
¬g
);

360 
PKCS7_add_©Œib_cÚ‹Á_ty³
(
PKCS7_SIGNER_INFO
 *
si
, 
ASN1_OBJECT
 *
coid
);

361 
PKCS7_add0_©Œib_signšg_time
(
PKCS7_SIGNER_INFO
 *
si
, 
ASN1_TIME
 *
t
);

362 
PKCS7_add1_©Œib_dige¡
(
PKCS7_SIGNER_INFO
 *
si
,

363 cÚ¡ *
md
, 
mdËn
);

365 
SMIME_wr™e_PKCS7
(
BIO
 *
bio
, 
PKCS7
 *
p7
, BIO *
d©a
, 
æags
);

366 
PKCS7
 *
SMIME_»ad_PKCS7
(
BIO
 *
bio
, BIO **
bcÚt
);

368 
BIO
 *
BIO_Ãw_PKCS7
(BIO *
out
, 
PKCS7
 *
p7
);

375 
ERR_lßd_PKCS7_¡ršgs
();

380 
	#PKCS7_F_B64_READ_PKCS7
 120

	)

381 
	#PKCS7_F_B64_WRITE_PKCS7
 121

	)

382 
	#PKCS7_F_DO_PKCS7_SIGNED_ATTRIB
 136

	)

383 
	#PKCS7_F_I2D_PKCS7_BIO_STREAM
 140

	)

384 
	#PKCS7_F_PKCS7_ADD0_ATTRIB_SIGNING_TIME
 135

	)

385 
	#PKCS7_F_PKCS7_ADD_ATTRIB_SMIMECAP
 118

	)

386 
	#PKCS7_F_PKCS7_ADD_CERTIFICATE
 100

	)

387 
	#PKCS7_F_PKCS7_ADD_CRL
 101

	)

388 
	#PKCS7_F_PKCS7_ADD_RECIPIENT_INFO
 102

	)

389 
	#PKCS7_F_PKCS7_ADD_SIGNATURE
 131

	)

390 
	#PKCS7_F_PKCS7_ADD_SIGNER
 103

	)

391 
	#PKCS7_F_PKCS7_BIO_ADD_DIGEST
 125

	)

392 
	#PKCS7_F_PKCS7_COPY_EXISTING_DIGEST
 138

	)

393 
	#PKCS7_F_PKCS7_CTRL
 104

	)

394 
	#PKCS7_F_PKCS7_DATADECODE
 112

	)

395 
	#PKCS7_F_PKCS7_DATAFINAL
 128

	)

396 
	#PKCS7_F_PKCS7_DATAINIT
 105

	)

397 
	#PKCS7_F_PKCS7_DATASIGN
 106

	)

398 
	#PKCS7_F_PKCS7_DATAVERIFY
 107

	)

399 
	#PKCS7_F_PKCS7_DECRYPT
 114

	)

400 
	#PKCS7_F_PKCS7_DECRYPT_RINFO
 133

	)

401 
	#PKCS7_F_PKCS7_ENCODE_RINFO
 132

	)

402 
	#PKCS7_F_PKCS7_ENCRYPT
 115

	)

403 
	#PKCS7_F_PKCS7_FINAL
 134

	)

404 
	#PKCS7_F_PKCS7_FIND_DIGEST
 127

	)

405 
	#PKCS7_F_PKCS7_GET0_SIGNERS
 124

	)

406 
	#PKCS7_F_PKCS7_RECIP_INFO_SET
 130

	)

407 
	#PKCS7_F_PKCS7_SET_CIPHER
 108

	)

408 
	#PKCS7_F_PKCS7_SET_CONTENT
 109

	)

409 
	#PKCS7_F_PKCS7_SET_DIGEST
 126

	)

410 
	#PKCS7_F_PKCS7_SET_TYPE
 110

	)

411 
	#PKCS7_F_PKCS7_SIGN
 116

	)

412 
	#PKCS7_F_PKCS7_SIGNATUREVERIFY
 113

	)

413 
	#PKCS7_F_PKCS7_SIGNER_INFO_SET
 129

	)

414 
	#PKCS7_F_PKCS7_SIGNER_INFO_SIGN
 139

	)

415 
	#PKCS7_F_PKCS7_SIGN_ADD_SIGNER
 137

	)

416 
	#PKCS7_F_PKCS7_SIMPLE_SMIMECAP
 119

	)

417 
	#PKCS7_F_PKCS7_VERIFY
 117

	)

418 
	#PKCS7_F_SMIME_READ_PKCS7
 122

	)

419 
	#PKCS7_F_SMIME_TEXT
 123

	)

422 
	#PKCS7_R_CERTIFICATE_VERIFY_ERROR
 117

	)

423 
	#PKCS7_R_CIPHER_HAS_NO_OBJECT_IDENTIFIER
 144

	)

424 
	#PKCS7_R_CIPHER_NOT_INITIALIZED
 116

	)

425 
	#PKCS7_R_CONTENT_AND_DATA_PRESENT
 118

	)

426 
	#PKCS7_R_CTRL_ERROR
 152

	)

427 
	#PKCS7_R_DECODE_ERROR
 130

	)

428 
	#PKCS7_R_DECRYPTED_KEY_IS_WRONG_LENGTH
 100

	)

429 
	#PKCS7_R_DECRYPT_ERROR
 119

	)

430 
	#PKCS7_R_DIGEST_FAILURE
 101

	)

431 
	#PKCS7_R_ENCRYPTION_CTRL_FAILURE
 149

	)

432 
	#PKCS7_R_ENCRYPTION_NOT_SUPPORTED_FOR_THIS_KEY_TYPE
 150

	)

433 
	#PKCS7_R_ERROR_ADDING_RECIPIENT
 120

	)

434 
	#PKCS7_R_ERROR_SETTING_CIPHER
 121

	)

435 
	#PKCS7_R_INVALID_MIME_TYPE
 131

	)

436 
	#PKCS7_R_INVALID_NULL_POINTER
 143

	)

437 
	#PKCS7_R_INVALID_SIGNED_DATA_TYPE
 155

	)

438 
	#PKCS7_R_MIME_NO_CONTENT_TYPE
 132

	)

439 
	#PKCS7_R_MIME_PARSE_ERROR
 133

	)

440 
	#PKCS7_R_MIME_SIG_PARSE_ERROR
 134

	)

441 
	#PKCS7_R_MISSING_CERIPEND_INFO
 103

	)

442 
	#PKCS7_R_NO_CONTENT
 122

	)

443 
	#PKCS7_R_NO_CONTENT_TYPE
 135

	)

444 
	#PKCS7_R_NO_DEFAULT_DIGEST
 151

	)

445 
	#PKCS7_R_NO_MATCHING_DIGEST_TYPE_FOUND
 154

	)

446 
	#PKCS7_R_NO_MULTIPART_BODY_FAILURE
 136

	)

447 
	#PKCS7_R_NO_MULTIPART_BOUNDARY
 137

	)

448 
	#PKCS7_R_NO_RECIPIENT_MATCHES_CERTIFICATE
 115

	)

449 
	#PKCS7_R_NO_RECIPIENT_MATCHES_KEY
 146

	)

450 
	#PKCS7_R_NO_SIGNATURES_ON_DATA
 123

	)

451 
	#PKCS7_R_NO_SIGNERS
 142

	)

452 
	#PKCS7_R_NO_SIG_CONTENT_TYPE
 138

	)

453 
	#PKCS7_R_OPERATION_NOT_SUPPORTED_ON_THIS_TYPE
 104

	)

454 
	#PKCS7_R_PKCS7_ADD_SIGNATURE_ERROR
 124

	)

455 
	#PKCS7_R_PKCS7_ADD_SIGNER_ERROR
 153

	)

456 
	#PKCS7_R_PKCS7_DATAFINAL
 126

	)

457 
	#PKCS7_R_PKCS7_DATAFINAL_ERROR
 125

	)

458 
	#PKCS7_R_PKCS7_DATASIGN
 145

	)

459 
	#PKCS7_R_PKCS7_PARSE_ERROR
 139

	)

460 
	#PKCS7_R_PKCS7_SIG_PARSE_ERROR
 140

	)

461 
	#PKCS7_R_PRIVATE_KEY_DOES_NOT_MATCH_CERTIFICATE
 127

	)

462 
	#PKCS7_R_SIGNATURE_FAILURE
 105

	)

463 
	#PKCS7_R_SIGNER_CERTIFICATE_NOT_FOUND
 128

	)

464 
	#PKCS7_R_SIGNING_CTRL_FAILURE
 147

	)

465 
	#PKCS7_R_SIGNING_NOT_SUPPORTED_FOR_THIS_KEY_TYPE
 148

	)

466 
	#PKCS7_R_SIG_INVALID_MIME_TYPE
 141

	)

467 
	#PKCS7_R_SMIME_TEXT_ERROR
 129

	)

468 
	#PKCS7_R_UNABLE_TO_FIND_CERTIFICATE
 106

	)

469 
	#PKCS7_R_UNABLE_TO_FIND_MEM_BIO
 107

	)

470 
	#PKCS7_R_UNABLE_TO_FIND_MESSAGE_DIGEST
 108

	)

471 
	#PKCS7_R_UNKNOWN_DIGEST_TYPE
 109

	)

472 
	#PKCS7_R_UNKNOWN_OPERATION
 110

	)

473 
	#PKCS7_R_UNSUPPORTED_CIPHER_TYPE
 111

	)

474 
	#PKCS7_R_UNSUPPORTED_CONTENT_TYPE
 112

	)

475 
	#PKCS7_R_WRONG_CONTENT_TYPE
 113

	)

476 
	#PKCS7_R_WRONG_PKCS7_TYPE
 114

	)

478 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/pqueue.h

60 #iâdeà
HEADER_PQUEUE_H


61 
	#HEADER_PQUEUE_H


	)

63 
	~<¡dio.h
>

64 
	~<¡dlib.h
>

65 
	~<¡ršg.h
>

67 #ifdeà 
__ılu¥lus


70 
_pqueue
 *
	tpqueue
;

72 
	s_p™em
 {

73 
´iÜ™y
[8];

74 *
d©a
;

75 
_p™em
 *
Ãxt
;

76 } 
	tp™em
;

78 
_p™em
 *
	tp™”©Ü
;

80 
p™em
 *
p™em_Ãw
(*
´io64be
, *
d©a
);

81 
p™em_ä“
(
p™em
 *
™em
);

83 
pqueue
 
pqueue_Ãw
();

84 
pqueue_ä“
(
pqueue
 
pq
);

86 
p™em
 *
pqueue_š£¹
(
pqueue
 
pq
,…™em *
™em
);

87 
p™em
 *
pqueue_³ek
(
pqueue
 
pq
);

88 
p™em
 *
pqueue_pİ
(
pqueue
 
pq
);

89 
p™em
 *
pqueue_fšd
(
pqueue
 
pq
, *
´io64be
);

90 
p™em
 *
pqueue_™”©Ü
(
pqueue
 
pq
);

91 
p™em
 *
pqueue_Ãxt
(
p™”©Ü
 *
™”
);

93 
pqueue_´št
(
pqueue
 
pq
);

94 
pqueue_size
(
pqueue
 
pq
);

96 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/rsa.h

59 #iâdeà
HEADER_RSA_H


60 
	#HEADER_RSA_H


	)

62 
	~<İ’s¦/a¢1.h
>

64 #iâdeà
OPENSSL_NO_BIO


65 
	~<İ’s¦/bio.h
>

67 
	~<İ’s¦/üy±o.h
>

68 
	~<İ’s¦/os¦_typ.h
>

69 #iâdeà
OPENSSL_NO_DEPRECATED


70 
	~<İ’s¦/bn.h
>

73 #ifdeà
OPENSSL_NO_RSA


74 #”rÜ 
RSA
 
is
 
di§bËd
.

77 #ifdeà 
__ılu¥lus


85 
	sr§_m‘h_¡
 {

86 cÚ¡ *
Çme
;

87 (*
r§_pub_’c
è(
æ’
, cÚ¡ *
äom
,

88 *
to
, 
RSA
 *
r§
, 
·ddšg
);

89 (*
r§_pub_dec
è(
æ’
, cÚ¡ *
äom
,

90 *
to
, 
RSA
 *
r§
, 
·ddšg
);

91 (*
r§_´iv_’c
è(
æ’
, cÚ¡ *
äom
,

92 *
to
, 
RSA
 *
r§
, 
·ddšg
);

93 (*
r§_´iv_dec
è(
æ’
, cÚ¡ *
äom
,

94 *
to
, 
RSA
 *
r§
, 
·ddšg
);

96 (*
r§_mod_exp
è(
BIGNUM
 *
r0
, cÚ¡ BIGNUM *
I
, 
RSA
 *
r§
, 
BN_CTX
 *
ùx
);

98 (*
bn_mod_exp
è(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

99 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
, 
BN_MONT_CTX
 *
m_ùx
);

101 (*
š™
è(
RSA
 *
r§
);

103 (*
fšish
è(
RSA
 *
r§
);

105 
æags
;

107 *
­p_d©a
;

116 (*
r§_sign
è(
ty³
,

117 cÚ¡ *
m
, 
m_Ëngth
,

118 *
sig»t
, *
sigËn
,

119 cÚ¡ 
RSA
 *
r§
);

120 (*
r§_v”ify
è(
dty³
, cÚ¡ *
m
,

121 
m_Ëngth
, cÚ¡ *
sigbuf
,

122 
sigËn
, cÚ¡ 
RSA
 *
r§
);

129 (*
r§_keyg’
è(
RSA
 *
r§
, 
b™s
, 
BIGNUM
 *
e
, 
BN_GENCB
 *
cb
);

132 
	sr§_¡
 {

137 
·d
;

138 
v”siÚ
;

139 cÚ¡ 
RSA_METHOD
 *
m‘h
;

141 
ENGINE
 *
’gše
;

142 
BIGNUM
 *
n
;

143 
BIGNUM
 *
e
;

144 
BIGNUM
 *
d
;

145 
BIGNUM
 *
p
;

146 
BIGNUM
 *
q
;

147 
BIGNUM
 *
dmp1
;

148 
BIGNUM
 *
dmq1
;

149 
BIGNUM
 *
iqmp
;

151 
CRYPTO_EX_DATA
 
ex_d©a
;

152 
»ã»nûs
;

153 
æags
;

155 
BN_MONT_CTX
 *
_m‘hod_mod_n
;

156 
BN_MONT_CTX
 *
_m‘hod_mod_p
;

157 
BN_MONT_CTX
 *
_m‘hod_mod_q
;

162 *
bignum_d©a
;

163 
BN_BLINDING
 *
blšdšg
;

164 
BN_BLINDING
 *
mt_blšdšg
;

167 #iâdeà
OPENSSL_RSA_MAX_MODULUS_BITS


168 
	#OPENSSL_RSA_MAX_MODULUS_BITS
 16384

	)

171 #iâdeà
OPENSSL_RSA_SMALL_MODULUS_BITS


172 
	#OPENSSL_RSA_SMALL_MODULUS_BITS
 3072

	)

174 #iâdeà
OPENSSL_RSA_MAX_PUBEXP_BITS


177 
	#OPENSSL_RSA_MAX_PUBEXP_BITS
 64

	)

180 
	#RSA_3
 0x3L

	)

181 
	#RSA_F4
 0x10001L

	)

183 
	#RSA_METHOD_FLAG_NO_CHECK
 0x0001

	)

186 
	#RSA_FLAG_CACHE_PUBLIC
 0x0002

	)

187 
	#RSA_FLAG_CACHE_PRIVATE
 0x0004

	)

188 
	#RSA_FLAG_BLINDING
 0x0008

	)

189 
	#RSA_FLAG_THREAD_SAFE
 0x0010

	)

196 
	#RSA_FLAG_EXT_PKEY
 0x0020

	)

202 
	#RSA_FLAG_SIGN_VER
 0x0040

	)

210 
	#RSA_FLAG_NO_BLINDING
 0x0080

	)

222 
	#RSA_FLAG_NO_CONSTTIME
 0x0100

	)

223 #ifdeà
OPENSSL_USE_DEPRECATED


233 
	#RSA_FLAG_NO_EXP_CONSTTIME
 
RSA_FLAG_NO_CONSTTIME


	)

236 
	#EVP_PKEY_CTX_£t_r§_·ddšg
(
ùx
, 
·d
) \

237 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, -1, 
EVP_PKEY_CTRL_RSA_PADDING
, \

238 
·d
, 
NULL
)

	)

240 
	#EVP_PKEY_CTX_g‘_r§_·ddšg
(
ùx
, 
µad
) \

241 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, -1, \

242 
EVP_PKEY_CTRL_GET_RSA_PADDING
, 0, 
µad
)

	)

244 
	#EVP_PKEY_CTX_£t_r§_pss_§ÉËn
(
ùx
, 
Ën
) \

245 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, \

246 (
EVP_PKEY_OP_SIGN
|
EVP_PKEY_OP_VERIFY
), \

247 
EVP_PKEY_CTRL_RSA_PSS_SALTLEN
, \

248 
Ën
, 
NULL
)

	)

250 
	#EVP_PKEY_CTX_g‘_r§_pss_§ÉËn
(
ùx
, 
¶’
) \

251 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, \

252 (
EVP_PKEY_OP_SIGN
|
EVP_PKEY_OP_VERIFY
), \

253 
EVP_PKEY_CTRL_GET_RSA_PSS_SALTLEN
, \

254 0, 
¶’
)

	)

256 
	#EVP_PKEY_CTX_£t_r§_keyg’_b™s
(
ùx
, 
b™s
) \

257 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_KEYGEN
, \

258 
EVP_PKEY_CTRL_RSA_KEYGEN_BITS
, 
b™s
, 
NULL
)

	)

260 
	#EVP_PKEY_CTX_£t_r§_keyg’_pubexp
(
ùx
, 
pubexp
) \

261 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_KEYGEN
, \

262 
EVP_PKEY_CTRL_RSA_KEYGEN_PUBEXP
, 0, 
pubexp
)

	)

264 
	#EVP_PKEY_CTX_£t_r§_mgf1_md
(
ùx
, 
md
) \

265 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, \

266 
EVP_PKEY_OP_TYPE_SIG
 | 
EVP_PKEY_OP_TYPE_CRYPT
, \

267 
EVP_PKEY_CTRL_RSA_MGF1_MD
, 0, (*)
md
)

	)

269 
	#EVP_PKEY_CTX_£t_r§_ß•_md
(
ùx
, 
md
) \

270 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_TYPE_CRYPT
, \

271 
EVP_PKEY_CTRL_RSA_OAEP_MD
, 0, (*)
md
)

	)

273 
	#EVP_PKEY_CTX_g‘_r§_mgf1_md
(
ùx
, 
pmd
) \

274 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, \

275 
EVP_PKEY_OP_TYPE_SIG
 | 
EVP_PKEY_OP_TYPE_CRYPT
, \

276 
EVP_PKEY_CTRL_GET_RSA_MGF1_MD
, 0, (*)
pmd
)

	)

278 
	#EVP_PKEY_CTX_g‘_r§_ß•_md
(
ùx
, 
pmd
) \

279 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_TYPE_CRYPT
, \

280 
EVP_PKEY_CTRL_GET_RSA_OAEP_MD
, 0, (*)
pmd
)

	)

282 
	#EVP_PKEY_CTX_£t0_r§_ß•_Ïb–
(
ùx
, 
l
, 
Î’
) \

283 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_TYPE_CRYPT
, \

284 
EVP_PKEY_CTRL_RSA_OAEP_LABEL
, 
Î’
, (*)
l
)

	)

286 
	#EVP_PKEY_CTX_g‘0_r§_ß•_Ïb–
(
ùx
, 
l
) \

287 
	`EVP_PKEY_CTX_ù¾
(
ùx
, 
EVP_PKEY_RSA
, 
EVP_PKEY_OP_TYPE_CRYPT
, \

288 
EVP_PKEY_CTRL_GET_RSA_OAEP_LABEL
, 0, (*)
l
)

	)

290 
	#EVP_PKEY_CTRL_RSA_PADDING
 (
EVP_PKEY_ALG_CTRL
 + 1)

	)

291 
	#EVP_PKEY_CTRL_RSA_PSS_SALTLEN
 (
EVP_PKEY_ALG_CTRL
 + 2)

	)

293 
	#EVP_PKEY_CTRL_RSA_KEYGEN_BITS
 (
EVP_PKEY_ALG_CTRL
 + 3)

	)

294 
	#EVP_PKEY_CTRL_RSA_KEYGEN_PUBEXP
 (
EVP_PKEY_ALG_CTRL
 + 4)

	)

295 
	#EVP_PKEY_CTRL_RSA_MGF1_MD
 (
EVP_PKEY_ALG_CTRL
 + 5)

	)

297 
	#EVP_PKEY_CTRL_GET_RSA_PADDING
 (
EVP_PKEY_ALG_CTRL
 + 6)

	)

298 
	#EVP_PKEY_CTRL_GET_RSA_PSS_SALTLEN
 (
EVP_PKEY_ALG_CTRL
 + 7)

	)

299 
	#EVP_PKEY_CTRL_GET_RSA_MGF1_MD
 (
EVP_PKEY_ALG_CTRL
 + 8)

	)

301 
	#EVP_PKEY_CTRL_RSA_OAEP_MD
 (
EVP_PKEY_ALG_CTRL
 + 9)

	)

302 
	#EVP_PKEY_CTRL_RSA_OAEP_LABEL
 (
EVP_PKEY_ALG_CTRL
 + 10)

	)

304 
	#EVP_PKEY_CTRL_GET_RSA_OAEP_MD
 (
EVP_PKEY_ALG_CTRL
 + 11)

	)

305 
	#EVP_PKEY_CTRL_GET_RSA_OAEP_LABEL
 (
EVP_PKEY_ALG_CTRL
 + 12)

	)

307 
	#RSA_PKCS1_PADDING
 1

	)

308 
	#RSA_SSLV23_PADDING
 2

	)

309 
	#RSA_NO_PADDING
 3

	)

310 
	#RSA_PKCS1_OAEP_PADDING
 4

	)

311 
	#RSA_X931_PADDING
 5

	)

313 
	#RSA_PKCS1_PSS_PADDING
 6

	)

315 
	#RSA_PKCS1_PADDING_SIZE
 11

	)

317 
	#RSA_£t_­p_d©a
(
s
,
¬g
è
	`RSA_£t_ex_d©a
(s,0,¬g)

	)

318 
	#RSA_g‘_­p_d©a
(
s
è
	`RSA_g‘_ex_d©a
(s,0)

	)

320 
RSA
 *
RSA_Ãw
();

321 
RSA
 *
RSA_Ãw_m‘hod
(
ENGINE
 *
’gše
);

322 
RSA_size
(cÚ¡ 
RSA
 *
r§
);

325 #iâdeà
OPENSSL_NO_DEPRECATED


326 
RSA
 *
RSA_g’”©e_key
(
b™s
, 
e
, 

327 (*
ÿÎback
è(, , *), *
cb_¬g
);

331 
RSA_g’”©e_key_ex
(
RSA
 *
r§
, 
b™s
, 
BIGNUM
 *
e
, 
BN_GENCB
 *
cb
);

333 
RSA_check_key
(cÚ¡ 
RSA
 *);

335 
RSA_public_’üy±
(
æ’
, cÚ¡ *
äom
,

336 *
to
, 
RSA
 *
r§
, 
·ddšg
);

337 
RSA_´iv©e_’üy±
(
æ’
, cÚ¡ *
äom
,

338 *
to
, 
RSA
 *
r§
, 
·ddšg
);

339 
RSA_public_deüy±
(
æ’
, cÚ¡ *
äom
,

340 *
to
, 
RSA
 *
r§
, 
·ddšg
);

341 
RSA_´iv©e_deüy±
(
æ’
, cÚ¡ *
äom
,

342 *
to
, 
RSA
 *
r§
, 
·ddšg
);

343 
RSA_ä“
(
RSA
 *
r
);

345 
RSA_up_»f
(
RSA
 *
r
);

347 
RSA_æags
(cÚ¡ 
RSA
 *
r
);

349 
RSA_£t_deçuÉ_m‘hod
(cÚ¡ 
RSA_METHOD
 *
m‘h
);

350 cÚ¡ 
RSA_METHOD
 *
RSA_g‘_deçuÉ_m‘hod
();

351 cÚ¡ 
RSA_METHOD
 *
RSA_g‘_m‘hod
(cÚ¡ 
RSA
 *
r§
);

352 
RSA_£t_m‘hod
(
RSA
 *
r§
, cÚ¡ 
RSA_METHOD
 *
m‘h
);

355 
RSA_memÜy_lock
(
RSA
 *
r
);

358 cÚ¡ 
RSA_METHOD
 *
RSA_PKCS1_SSL—y
();

360 cÚ¡ 
RSA_METHOD
 *
RSA_nuÎ_m‘hod
();

362 
DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
RSA
, 
RSAPublicKey
)

363 
DECLARE_ASN1_ENCODE_FUNCTIONS_cÚ¡
(
RSA
, 
RSAPriv©eKey
)

365 
	sr§_pss_·¿ms_¡
 {

366 
X509_ALGOR
 *
hashAlgÜ™hm
;

367 
X509_ALGOR
 *
maskG’AlgÜ™hm
;

368 
ASN1_INTEGER
 *
§ÉL’gth
;

369 
ASN1_INTEGER
 *
Œa”F›ld
;

370 } 
	tRSA_PSS_PARAMS
;

372 
DECLARE_ASN1_FUNCTIONS
(
RSA_PSS_PARAMS
)

374 
	sr§_ß•_·¿ms_¡
 {

375 
X509_ALGOR
 *
hashFunc
;

376 
X509_ALGOR
 *
maskG’Func
;

377 
X509_ALGOR
 *
pSourûFunc
;

378 } 
	tRSA_OAEP_PARAMS
;

380 
DECLARE_ASN1_FUNCTIONS
(
RSA_OAEP_PARAMS
)

382 #iâdeà
OPENSSL_NO_FP_API


383 
RSA_´št_å
(
FILE
 *
å
, cÚ¡ 
RSA
 *
r
, 
off£t
);

386 #iâdeà
OPENSSL_NO_BIO


387 
RSA_´št
(
BIO
 *
bp
, cÚ¡ 
RSA
 *
r
, 
off£t
);

390 #iâdeà
OPENSSL_NO_RC4


391 
i2d_RSA_NET
(cÚ¡ 
RSA
 *
a
, **
µ
,

392 (*
cb
è(*
buf
, 
Ën
, cÚ¡ *
´om±
,

393 
v”ify
), 
sgckey
);

394 
RSA
 *
d2i_RSA_NET
(RSA **
a
, cÚ¡ **
µ
, 
Ëngth
,

395 (*
cb
è(*
buf
, 
Ën
, cÚ¡ *
´om±
,

396 
v”ify
), 
sgckey
);

398 
i2d_N‘sÿ³_RSA
(cÚ¡ 
RSA
 *
a
, **
µ
,

399 (*
cb
è(*
buf
, 
Ën
, cÚ¡ *
´om±
,

400 
v”ify
));

401 
RSA
 *
d2i_N‘sÿ³_RSA
(RSA **
a
, cÚ¡ **
µ
, 
Ëngth
,

402 (*
cb
è(*
buf
, 
Ën
, cÚ¡ *
´om±
,

403 
v”ify
));

410 
RSA_sign
(
ty³
, cÚ¡ *
m
, 
m_Ëngth
,

411 *
sig»t
, *
sigËn
, 
RSA
 *
r§
);

412 
RSA_v”ify
(
ty³
, cÚ¡ *
m
, 
m_Ëngth
,

413 cÚ¡ *
sigbuf
, 
sigËn
, 
RSA
 *
r§
);

419 
RSA_sign_ASN1_OCTET_STRING
(
ty³
,

420 cÚ¡ *
m
, 
m_Ëngth
,

421 *
sig»t
, *
sigËn
,

422 
RSA
 *
r§
);

423 
RSA_v”ify_ASN1_OCTET_STRING
(
ty³
, cÚ¡ *
m
,

424 
m_Ëngth
, *
sigbuf
,

425 
sigËn
, 
RSA
 *
r§
);

427 
RSA_blšdšg_Ú
(
RSA
 *
r§
, 
BN_CTX
 *
ùx
);

428 
RSA_blšdšg_off
(
RSA
 *
r§
);

429 
BN_BLINDING
 *
RSA_£tup_blšdšg
(
RSA
 *
r§
, 
BN_CTX
 *
ùx
);

431 
RSA_·ddšg_add_PKCS1_ty³_1
(*
to
, 
’
,

432 cÚ¡ *
f
, 
æ
);

433 
RSA_·ddšg_check_PKCS1_ty³_1
(*
to
, 
’
,

434 cÚ¡ *
f
, 
æ
,

435 
r§_Ën
);

436 
RSA_·ddšg_add_PKCS1_ty³_2
(*
to
, 
’
,

437 cÚ¡ *
f
, 
æ
);

438 
RSA_·ddšg_check_PKCS1_ty³_2
(*
to
, 
’
,

439 cÚ¡ *
f
, 
æ
,

440 
r§_Ën
);

441 
PKCS1_MGF1
(*
mask
, 
Ën
, cÚ¡ *
£ed
,

442 
£edËn
, cÚ¡ 
EVP_MD
 *
dg¡
);

443 
RSA_·ddšg_add_PKCS1_OAEP
(*
to
, 
’
,

444 cÚ¡ *
f
, 
æ
,

445 cÚ¡ *
p
, 
¶
);

446 
RSA_·ddšg_check_PKCS1_OAEP
(*
to
, 
’
,

447 cÚ¡ *
f
, 
æ
, 
r§_Ën
,

448 cÚ¡ *
p
, 
¶
);

449 
RSA_·ddšg_add_PKCS1_OAEP_mgf1
(*
to
, 
’
,

450 cÚ¡ *
äom
, 
æ’
,

451 cÚ¡ *
·¿m
, 
¶’
,

452 cÚ¡ 
EVP_MD
 *
md
, cÚ¡ EVP_MD *
mgf1md
);

453 
RSA_·ddšg_check_PKCS1_OAEP_mgf1
(*
to
, 
’
,

454 cÚ¡ *
äom
, 
æ’
,

455 
num
, cÚ¡ *
·¿m
,

456 
¶’
, cÚ¡ 
EVP_MD
 *
md
,

457 cÚ¡ 
EVP_MD
 *
mgf1md
);

458 
RSA_·ddšg_add_SSLv23
(*
to
, 
’
,

459 cÚ¡ *
f
, 
æ
);

460 
RSA_·ddšg_check_SSLv23
(*
to
, 
’
,

461 cÚ¡ *
f
, 
æ
, 
r§_Ën
);

462 
RSA_·ddšg_add_nÚe
(*
to
, 
’
, cÚ¡ *
f
,

463 
æ
);

464 
RSA_·ddšg_check_nÚe
(*
to
, 
’
,

465 cÚ¡ *
f
, 
æ
, 
r§_Ën
);

466 
RSA_·ddšg_add_X931
(*
to
, 
’
, cÚ¡ *
f
,

467 
æ
);

468 
RSA_·ddšg_check_X931
(*
to
, 
’
,

469 cÚ¡ *
f
, 
æ
, 
r§_Ën
);

470 
RSA_X931_hash_id
(
nid
);

472 
RSA_v”ify_PKCS1_PSS
(
RSA
 *
r§
, cÚ¡ *
mHash
,

473 cÚ¡ 
EVP_MD
 *
Hash
, cÚ¡ *
EM
,

474 
sL’
);

475 
RSA_·ddšg_add_PKCS1_PSS
(
RSA
 *
r§
, *
EM
,

476 cÚ¡ *
mHash
, cÚ¡ 
EVP_MD
 *
Hash
,

477 
sL’
);

479 
RSA_v”ify_PKCS1_PSS_mgf1
(
RSA
 *
r§
, cÚ¡ *
mHash
,

480 cÚ¡ 
EVP_MD
 *
Hash
, cÚ¡ EVP_MD *
mgf1Hash
,

481 cÚ¡ *
EM
, 
sL’
);

483 
RSA_·ddšg_add_PKCS1_PSS_mgf1
(
RSA
 *
r§
, *
EM
,

484 cÚ¡ *
mHash
,

485 cÚ¡ 
EVP_MD
 *
Hash
, cÚ¡ EVP_MD *
mgf1Hash
,

486 
sL’
);

488 
RSA_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
, 
CRYPTO_EX_Ãw
 *
Ãw_func
,

489 
CRYPTO_EX_dup
 *
dup_func
, 
CRYPTO_EX_ä“
 *
ä“_func
);

490 
RSA_£t_ex_d©a
(
RSA
 *
r
, 
idx
, *
¬g
);

491 *
RSA_g‘_ex_d©a
(cÚ¡ 
RSA
 *
r
, 
idx
);

493 
RSA
 *
RSAPublicKey_dup
(RSA *
r§
);

494 
RSA
 *
RSAPriv©eKey_dup
(RSA *
r§
);

503 
	#RSA_FLAG_FIPS_METHOD
 0x0400

	)

511 
	#RSA_FLAG_NON_FIPS_ALLOW
 0x0400

	)

516 
	#RSA_FLAG_CHECKED
 0x0800

	)

523 
ERR_lßd_RSA_¡ršgs
();

528 
	#RSA_F_CHECK_PADDING_MD
 140

	)

529 
	#RSA_F_DO_RSA_PRINT
 146

	)

530 
	#RSA_F_INT_RSA_VERIFY
 145

	)

531 
	#RSA_F_MEMORY_LOCK
 100

	)

532 
	#RSA_F_OLD_RSA_PRIV_DECODE
 147

	)

533 
	#RSA_F_PKEY_RSA_CTRL
 143

	)

534 
	#RSA_F_PKEY_RSA_CTRL_STR
 144

	)

535 
	#RSA_F_PKEY_RSA_SIGN
 142

	)

536 
	#RSA_F_PKEY_RSA_VERIFY
 154

	)

537 
	#RSA_F_PKEY_RSA_VERIFYRECOVER
 141

	)

538 
	#RSA_F_RSA_ALGOR_TO_MD
 157

	)

539 
	#RSA_F_RSA_BUILTIN_KEYGEN
 129

	)

540 
	#RSA_F_RSA_CHECK_KEY
 123

	)

541 
	#RSA_F_RSA_CMS_DECRYPT
 158

	)

542 
	#RSA_F_RSA_EAY_PRIVATE_DECRYPT
 101

	)

543 
	#RSA_F_RSA_EAY_PRIVATE_ENCRYPT
 102

	)

544 
	#RSA_F_RSA_EAY_PUBLIC_DECRYPT
 103

	)

545 
	#RSA_F_RSA_EAY_PUBLIC_ENCRYPT
 104

	)

546 
	#RSA_F_RSA_GENERATE_KEY
 105

	)

547 
	#RSA_F_RSA_GENERATE_KEY_EX
 155

	)

548 
	#RSA_F_RSA_ITEM_VERIFY
 156

	)

549 
	#RSA_F_RSA_MEMORY_LOCK
 130

	)

550 
	#RSA_F_RSA_MGF1_TO_MD
 159

	)

551 
	#RSA_F_RSA_NEW_METHOD
 106

	)

552 
	#RSA_F_RSA_NULL
 124

	)

553 
	#RSA_F_RSA_NULL_MOD_EXP
 131

	)

554 
	#RSA_F_RSA_NULL_PRIVATE_DECRYPT
 132

	)

555 
	#RSA_F_RSA_NULL_PRIVATE_ENCRYPT
 133

	)

556 
	#RSA_F_RSA_NULL_PUBLIC_DECRYPT
 134

	)

557 
	#RSA_F_RSA_NULL_PUBLIC_ENCRYPT
 135

	)

558 
	#RSA_F_RSA_PADDING_ADD_NONE
 107

	)

559 
	#RSA_F_RSA_PADDING_ADD_PKCS1_OAEP
 121

	)

560 
	#RSA_F_RSA_PADDING_ADD_PKCS1_OAEP_MGF1
 160

	)

561 
	#RSA_F_RSA_PADDING_ADD_PKCS1_PSS
 125

	)

562 
	#RSA_F_RSA_PADDING_ADD_PKCS1_PSS_MGF1
 148

	)

563 
	#RSA_F_RSA_PADDING_ADD_PKCS1_TYPE_1
 108

	)

564 
	#RSA_F_RSA_PADDING_ADD_PKCS1_TYPE_2
 109

	)

565 
	#RSA_F_RSA_PADDING_ADD_SSLV23
 110

	)

566 
	#RSA_F_RSA_PADDING_ADD_X931
 127

	)

567 
	#RSA_F_RSA_PADDING_CHECK_NONE
 111

	)

568 
	#RSA_F_RSA_PADDING_CHECK_PKCS1_OAEP
 122

	)

569 
	#RSA_F_RSA_PADDING_CHECK_PKCS1_OAEP_MGF1
 161

	)

570 
	#RSA_F_RSA_PADDING_CHECK_PKCS1_TYPE_1
 112

	)

571 
	#RSA_F_RSA_PADDING_CHECK_PKCS1_TYPE_2
 113

	)

572 
	#RSA_F_RSA_PADDING_CHECK_SSLV23
 114

	)

573 
	#RSA_F_RSA_PADDING_CHECK_X931
 128

	)

574 
	#RSA_F_RSA_PRINT
 115

	)

575 
	#RSA_F_RSA_PRINT_FP
 116

	)

576 
	#RSA_F_RSA_PRIVATE_DECRYPT
 150

	)

577 
	#RSA_F_RSA_PRIVATE_ENCRYPT
 151

	)

578 
	#RSA_F_RSA_PRIV_DECODE
 137

	)

579 
	#RSA_F_RSA_PRIV_ENCODE
 138

	)

580 
	#RSA_F_RSA_PSS_TO_CTX
 162

	)

581 
	#RSA_F_RSA_PUBLIC_DECRYPT
 152

	)

582 
	#RSA_F_RSA_PUBLIC_ENCRYPT
 153

	)

583 
	#RSA_F_RSA_PUB_DECODE
 139

	)

584 
	#RSA_F_RSA_SETUP_BLINDING
 136

	)

585 
	#RSA_F_RSA_SIGN
 117

	)

586 
	#RSA_F_RSA_SIGN_ASN1_OCTET_STRING
 118

	)

587 
	#RSA_F_RSA_VERIFY
 119

	)

588 
	#RSA_F_RSA_VERIFY_ASN1_OCTET_STRING
 120

	)

589 
	#RSA_F_RSA_VERIFY_PKCS1_PSS
 126

	)

590 
	#RSA_F_RSA_VERIFY_PKCS1_PSS_MGF1
 149

	)

593 
	#RSA_R_ALGORITHM_MISMATCH
 100

	)

594 
	#RSA_R_BAD_E_VALUE
 101

	)

595 
	#RSA_R_BAD_FIXED_HEADER_DECRYPT
 102

	)

596 
	#RSA_R_BAD_PAD_BYTE_COUNT
 103

	)

597 
	#RSA_R_BAD_SIGNATURE
 104

	)

598 
	#RSA_R_BLOCK_TYPE_IS_NOT_01
 106

	)

599 
	#RSA_R_BLOCK_TYPE_IS_NOT_02
 107

	)

600 
	#RSA_R_DATA_GREATER_THAN_MOD_LEN
 108

	)

601 
	#RSA_R_DATA_TOO_LARGE
 109

	)

602 
	#RSA_R_DATA_TOO_LARGE_FOR_KEY_SIZE
 110

	)

603 
	#RSA_R_DATA_TOO_LARGE_FOR_MODULUS
 132

	)

604 
	#RSA_R_DATA_TOO_SMALL
 111

	)

605 
	#RSA_R_DATA_TOO_SMALL_FOR_KEY_SIZE
 122

	)

606 
	#RSA_R_DIGEST_DOES_NOT_MATCH
 166

	)

607 
	#RSA_R_DIGEST_TOO_BIG_FOR_RSA_KEY
 112

	)

608 
	#RSA_R_DMP1_NOT_CONGRUENT_TO_D
 124

	)

609 
	#RSA_R_DMQ1_NOT_CONGRUENT_TO_D
 125

	)

610 
	#RSA_R_D_E_NOT_CONGRUENT_TO_1
 123

	)

611 
	#RSA_R_FIRST_OCTET_INVALID
 133

	)

612 
	#RSA_R_ILLEGAL_OR_UNSUPPORTED_PADDING_MODE
 144

	)

613 
	#RSA_R_INVALID_DIGEST
 160

	)

614 
	#RSA_R_INVALID_DIGEST_LENGTH
 143

	)

615 
	#RSA_R_INVALID_HEADER
 137

	)

616 
	#RSA_R_INVALID_KEYBITS
 145

	)

617 
	#RSA_R_INVALID_LABEL
 161

	)

618 
	#RSA_R_INVALID_MESSAGE_LENGTH
 131

	)

619 
	#RSA_R_INVALID_MGF1_MD
 156

	)

620 
	#RSA_R_INVALID_OAEP_PARAMETERS
 162

	)

621 
	#RSA_R_INVALID_PADDING
 138

	)

622 
	#RSA_R_INVALID_PADDING_MODE
 141

	)

623 
	#RSA_R_INVALID_PSS_PARAMETERS
 149

	)

624 
	#RSA_R_INVALID_PSS_SALTLEN
 146

	)

625 
	#RSA_R_INVALID_SALT_LENGTH
 150

	)

626 
	#RSA_R_INVALID_TRAILER
 139

	)

627 
	#RSA_R_INVALID_X931_DIGEST
 142

	)

628 
	#RSA_R_IQMP_NOT_INVERSE_OF_Q
 126

	)

629 
	#RSA_R_KEY_SIZE_TOO_SMALL
 120

	)

630 
	#RSA_R_LAST_OCTET_INVALID
 134

	)

631 
	#RSA_R_MODULUS_TOO_LARGE
 105

	)

632 
	#RSA_R_NON_FIPS_RSA_METHOD
 157

	)

633 
	#RSA_R_NO_PUBLIC_EXPONENT
 140

	)

634 
	#RSA_R_NULL_BEFORE_BLOCK_MISSING
 113

	)

635 
	#RSA_R_N_DOES_NOT_EQUAL_P_Q
 127

	)

636 
	#RSA_R_OAEP_DECODING_ERROR
 121

	)

637 
	#RSA_R_OPERATION_NOT_ALLOWED_IN_FIPS_MODE
 158

	)

638 
	#RSA_R_OPERATION_NOT_SUPPORTED_FOR_THIS_KEYTYPE
 148

	)

639 
	#RSA_R_PADDING_CHECK_FAILED
 114

	)

640 
	#RSA_R_PKCS_DECODING_ERROR
 159

	)

641 
	#RSA_R_P_NOT_PRIME
 128

	)

642 
	#RSA_R_Q_NOT_PRIME
 129

	)

643 
	#RSA_R_RSA_OPERATIONS_NOT_SUPPORTED
 130

	)

644 
	#RSA_R_SLEN_CHECK_FAILED
 136

	)

645 
	#RSA_R_SLEN_RECOVERY_FAILED
 135

	)

646 
	#RSA_R_SSLV3_ROLLBACK_ATTACK
 115

	)

647 
	#RSA_R_THE_ASN1_OBJECT_IDENTIFIER_IS_NOT_KNOWN_FOR_THIS_MD
 116

	)

648 
	#RSA_R_UNKNOWN_ALGORITHM_TYPE
 117

	)

649 
	#RSA_R_UNKNOWN_DIGEST
 163

	)

650 
	#RSA_R_UNKNOWN_MASK_DIGEST
 151

	)

651 
	#RSA_R_UNKNOWN_PADDING_TYPE
 118

	)

652 
	#RSA_R_UNKNOWN_PSS_DIGEST
 152

	)

653 
	#RSA_R_UNSUPPORTED_ENCRYPTION_TYPE
 164

	)

654 
	#RSA_R_UNSUPPORTED_LABEL_SOURCE
 165

	)

655 
	#RSA_R_UNSUPPORTED_MASK_ALGORITHM
 153

	)

656 
	#RSA_R_UNSUPPORTED_MASK_PARAMETER
 154

	)

657 
	#RSA_R_UNSUPPORTED_SIGNATURE_TYPE
 155

	)

658 
	#RSA_R_VALUE_MISSING
 147

	)

659 
	#RSA_R_WRONG_SIGNATURE_LENGTH
 119

	)

661 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/sha.h

59 #iâdeà
HEADER_SHA_H


60 
	#HEADER_SHA_H


	)

62 
	~<İ’s¦/e_os2.h
>

63 
	~<¡ddef.h
>

65 #ifdeà 
__ılu¥lus


69 #ià
defšed
(
OPENSSL_NO_SHA
è|| (defšed(
OPENSSL_NO_SHA0
è&& defšed(
OPENSSL_NO_SHA1
))

70 #”rÜ 
SHA
 
is
 
di§bËd
.

73 #ià
defšed
(
OPENSSL_FIPS
)

74 
	#FIPS_SHA_SIZE_T
 
size_t


	)

84 #ià
defšed
(
__LP32__
)

85 
	#SHA_LONG
 

	)

86 #–ià
defšed
(
OPENSSL_SYS_CRAY
è|| defšed(
__ILP64__
)

87 
	#SHA_LONG
 

	)

88 
	#SHA_LONG_LOG2
 3

	)

90 
	#SHA_LONG
 

	)

93 
	#SHA_LBLOCK
 16

	)

94 
	#SHA_CBLOCK
 (
SHA_LBLOCK
*4)

	)

97 
	#SHA_LAST_BLOCK
 (
SHA_CBLOCK
-8)

	)

98 
	#SHA_DIGEST_LENGTH
 20

	)

100 
	sSHA¡©e_¡
 {

101 
SHA_LONG
 
h0
, 
h1
, 
h2
, 
h3
, 
h4
;

102 
SHA_LONG
 
Nl
, 
Nh
;

103 
SHA_LONG
 
d©a
[
SHA_LBLOCK
];

104 
num
;

105 } 
	tSHA_CTX
;

107 #iâdeà
OPENSSL_NO_SHA0


108 #ifdeà
OPENSSL_FIPS


109 
´iv©e_SHA_In™
(
SHA_CTX
 *
c
);

111 
SHA_In™
(
SHA_CTX
 *
c
);

112 
SHA_Upd©e
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

113 
SHA_Fš®
(*
md
, 
SHA_CTX
 *
c
);

114 *
SHA
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

115 
SHA_T¿nsfÜm
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
);

117 #iâdeà
OPENSSL_NO_SHA1


118 #ifdeà
OPENSSL_FIPS


119 
´iv©e_SHA1_In™
(
SHA_CTX
 *
c
);

121 
SHA1_In™
(
SHA_CTX
 *
c
);

122 
SHA1_Upd©e
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

123 
SHA1_Fš®
(*
md
, 
SHA_CTX
 *
c
);

124 *
SHA1
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

125 
SHA1_T¿nsfÜm
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
);

128 
	#SHA256_CBLOCK
 (
SHA_LBLOCK
*4)

	)

131 
	#SHA224_DIGEST_LENGTH
 28

	)

132 
	#SHA256_DIGEST_LENGTH
 32

	)

134 
	sSHA256¡©e_¡
 {

135 
SHA_LONG
 
h
[8];

136 
SHA_LONG
 
Nl
, 
Nh
;

137 
SHA_LONG
 
d©a
[
SHA_LBLOCK
];

138 
num
, 
md_Ën
;

139 } 
	tSHA256_CTX
;

141 #iâdeà
OPENSSL_NO_SHA256


142 #ifdeà
OPENSSL_FIPS


143 
´iv©e_SHA224_In™
(
SHA256_CTX
 *
c
);

144 
´iv©e_SHA256_In™
(
SHA256_CTX
 *
c
);

146 
SHA224_In™
(
SHA256_CTX
 *
c
);

147 
SHA224_Upd©e
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

148 
SHA224_Fš®
(*
md
, 
SHA256_CTX
 *
c
);

149 *
SHA224
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

150 
SHA256_In™
(
SHA256_CTX
 *
c
);

151 
SHA256_Upd©e
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

152 
SHA256_Fš®
(*
md
, 
SHA256_CTX
 *
c
);

153 *
SHA256
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

154 
SHA256_T¿nsfÜm
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
);

157 
	#SHA384_DIGEST_LENGTH
 48

	)

158 
	#SHA512_DIGEST_LENGTH
 64

	)

160 #iâdeà
OPENSSL_NO_SHA512


171 
	#SHA512_CBLOCK
 (
SHA_LBLOCK
*8)

	)

172 #ià(
defšed
(
_WIN32
è|| defšed(
_WIN64
)è&& !defšed(
__MINGW32__
)

173 
	#SHA_LONG64
 
__št64


	)

174 
	#U64
(
C
èC##
UI64


	)

175 #–ià
defšed
(
__¬ch64__
)

176 
	#SHA_LONG64
 

	)

177 
	#U64
(
C
èC##
UL


	)

179 
	#SHA_LONG64
 

	)

180 
	#U64
(
C
èC##
ULL


	)

183 
	sSHA512¡©e_¡
 {

184 
SHA_LONG64
 
h
[8];

185 
SHA_LONG64
 
Nl
, 
Nh
;

187 
SHA_LONG64
 
d
[
SHA_LBLOCK
];

188 
p
[
SHA512_CBLOCK
];

189 } 
u
;

190 
num
, 
md_Ën
;

191 } 
	tSHA512_CTX
;

194 #iâdeà
OPENSSL_NO_SHA512


195 #ifdeà
OPENSSL_FIPS


196 
´iv©e_SHA384_In™
(
SHA512_CTX
 *
c
);

197 
´iv©e_SHA512_In™
(
SHA512_CTX
 *
c
);

199 
SHA384_In™
(
SHA512_CTX
 *
c
);

200 
SHA384_Upd©e
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

201 
SHA384_Fš®
(*
md
, 
SHA512_CTX
 *
c
);

202 *
SHA384
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

203 
SHA512_In™
(
SHA512_CTX
 *
c
);

204 
SHA512_Upd©e
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

205 
SHA512_Fš®
(*
md
, 
SHA512_CTX
 *
c
);

206 *
SHA512
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

207 
SHA512_T¿nsfÜm
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
);

210 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/stack.h

59 #iâdeà
HEADER_STACK_H


60 
	#HEADER_STACK_H


	)

62 #ifdeà 
__ılu¥lus


66 
	s¡ack_¡
 {

67 
num
;

68 **
d©a
;

69 
sÜ‹d
;

70 
num_®loc
;

71 (*
comp
) (const *, const *);

72 } 
	t_STACK
;

74 
	#M_sk_num
(
sk
è((skè? (sk)->
num
:-1)

	)

75 
	#M_sk_v®ue
(
sk
,
n
è((skè? (sk)->
d©a
[n] : 
NULL
)

	)

77 
sk_num
(cÚ¡ 
_STACK
 *);

78 *
sk_v®ue
(cÚ¡ 
_STACK
 *, );

80 *
sk_£t
(
_STACK
 *, , *);

82 
_STACK
 *
sk_Ãw
((*
cmp
) (const *, const *));

83 
_STACK
 *
sk_Ãw_nuÎ
();

84 
sk_ä“
(
_STACK
 *);

85 
sk_pİ_ä“
(
_STACK
 *
¡
, (*
func
) (*));

86 
_STACK
 *
sk_d“p_cİy
(_STACK *, *(*)(*), (*)(*));

87 
sk_š£¹
(
_STACK
 *
sk
, *
d©a
, 
wh”e
);

88 *
sk_d–‘e
(
_STACK
 *
¡
, 
loc
);

89 *
sk_d–‘e_±r
(
_STACK
 *
¡
, *
p
);

90 
sk_fšd
(
_STACK
 *
¡
, *
d©a
);

91 
sk_fšd_ex
(
_STACK
 *
¡
, *
d©a
);

92 
sk_push
(
_STACK
 *
¡
, *
d©a
);

93 
sk_unshiá
(
_STACK
 *
¡
, *
d©a
);

94 *
sk_shiá
(
_STACK
 *
¡
);

95 *
sk_pİ
(
_STACK
 *
¡
);

96 
sk_z”o
(
_STACK
 *
¡
);

97 (*
sk_£t_cmp_func
(
_STACK
 *
sk
, (*
c
) (const *, const *)))

99 
_STACK
 *
sk_dup
(_STACK *
¡
);

100 
sk_sÜt
(
_STACK
 *
¡
);

101 
sk_is_sÜ‹d
(cÚ¡ 
_STACK
 *
¡
);

103 #ifdeà 
__ılu¥lus


	@/usr/include/openssl/x509_vfy.h

59 #iâdeà
HEADER_X509_H


60 
	~<İ’s¦/x509.h
>

67 #iâdeà
HEADER_X509_VFY_H


68 
	#HEADER_X509_VFY_H


	)

70 
	~<İ’s¦/İ’s¦cÚf.h
>

71 #iâdeà
OPENSSL_NO_LHASH


72 
	~<İ’s¦/lhash.h
>

74 
	~<İ’s¦/bio.h
>

75 
	~<İ’s¦/üy±o.h
>

76 
	~<İ’s¦/symhacks.h
>

78 #ifdeà 
__ılu¥lus


84 
	sx509_hash_dœ_¡
 {

85 
num_dœs
;

86 **
dœs
;

87 *
dœs_ty³
;

88 
num_dœs_®loûd
;

89 } 
	tX509_HASH_DIR_CTX
;

92 
	sx509_fe_¡
 {

93 
	gnum_·ths
;

94 
	gnum_®loûd
;

95 **
	g·ths
;

96 *
	g·th_ty³
;

97 } 
	tX509_CERT_FILE_CTX
;

117 
	#X509_LU_RETRY
 -1

	)

118 
	#X509_LU_FAIL
 0

	)

119 
	#X509_LU_X509
 1

	)

120 
	#X509_LU_CRL
 2

	)

121 
	#X509_LU_PKEY
 3

	)

123 
	sx509_objeù_¡
 {

125 
	gty³
;

127 *
	g±r
;

128 
X509
 *
	gx509
;

129 
X509_CRL
 *
	gül
;

130 
EVP_PKEY
 *
	gpkey
;

131 } 
	gd©a
;

132 } 
	tX509_OBJECT
;

134 
x509_lookup_¡
 
	tX509_LOOKUP
;

136 
DECLARE_STACK_OF
(
X509_LOOKUP
)

137 
DECLARE_STACK_OF
(
X509_OBJECT
)

140 
	sx509_lookup_m‘hod_¡
 {

141 cÚ¡ *
	gÇme
;

142 (*
	gÃw_™em
è(
X509_LOOKUP
 *
	gùx
);

143 (*
	gä“
è(
X509_LOOKUP
 *
	gùx
);

144 (*
	gš™
è(
X509_LOOKUP
 *
	gùx
);

145 (*
	gshutdown
è(
X509_LOOKUP
 *
	gùx
);

146 (*
	gù¾
è(
X509_LOOKUP
 *
	gùx
, 
	gcmd
, cÚ¡ *
	g¬gc
, 
	g¬gl
,

147 **
	g»t
);

148 (*
	gg‘_by_subjeù
è(
X509_LOOKUP
 *
	gùx
, 
	gty³
, 
X509_NAME
 *
	gÇme
,

149 
X509_OBJECT
 *
	g»t
);

150 (*
	gg‘_by_issu”_£rŸl
è(
X509_LOOKUP
 *
	gùx
, 
	gty³
, 
X509_NAME
 *
	gÇme
,

151 
ASN1_INTEGER
 *
	g£rŸl
, 
X509_OBJECT
 *
	g»t
);

152 (*
	gg‘_by_fšg”´št
è(
X509_LOOKUP
 *
	gùx
, 
	gty³
,

153 *
	gby‹s
, 
	gËn
,

154 
X509_OBJECT
 *
	g»t
);

155 (*
	gg‘_by_®Ÿs
è(
X509_LOOKUP
 *
	gùx
, 
	gty³
, *
	g¡r
, 
	gËn
,

156 
X509_OBJECT
 *
	g»t
);

157 } 
	tX509_LOOKUP_METHOD
;

159 
X509_VERIFY_PARAM_ID_¡
 
	tX509_VERIFY_PARAM_ID
;

167 
	sX509_VERIFY_PARAM_¡
 {

168 *
	gÇme
;

169 
time_t
 
	gcheck_time
;

170 
	gšh_æags
;

171 
	gæags
;

172 
	gpu½o£
;

173 
	gŒu¡
;

174 
	gd•th
;

175 
STACK_OF
(
ASN1_OBJECT
è*
	gpŞic›s
;

176 
X509_VERIFY_PARAM_ID
 *
	gid
;

177 } 
	tX509_VERIFY_PARAM
;

179 
DECLARE_STACK_OF
(
X509_VERIFY_PARAM
)

186 
	sx509_¡Üe_¡
 {

188 
	gÿche
;

189 
STACK_OF
(
X509_OBJECT
è*
	gobjs
;

191 
STACK_OF
(
X509_LOOKUP
è*
	gg‘_û¹_m‘hods
;

192 
X509_VERIFY_PARAM
 *
	g·¿m
;

195 (*
	gv”ify
è(
X509_STORE_CTX
 *
	gùx
);

197 (*
	gv”ify_cb
è(
	gok
, 
X509_STORE_CTX
 *
	gùx
);

199 (*
	gg‘_issu”
è(
X509
 **
	gissu”
, 
X509_STORE_CTX
 *
	gùx
, X509 *
	gx
);

201 (*
	gcheck_issued
è(
X509_STORE_CTX
 *
	gùx
, 
X509
 *
	gx
, X509 *
	gissu”
);

203 (*
	gcheck_»voÿtiÚ
è(
X509_STORE_CTX
 *
	gùx
);

205 (*
	gg‘_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 **
	gül
, 
X509
 *
	gx
);

207 (*
	gcheck_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 *
	gül
);

209 (*
	gû¹_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 *
	gül
, 
X509
 *
	gx
);

210 
STACK_OF
(
X509
è*(*
	glookup_û¹s
è(
X509_STORE_CTX
 *
	gùx
, 
X509_NAME
 *
	gnm
);

211 
STACK_OF
(
X509_CRL
è*(*
	glookup_üls
è(
X509_STORE_CTX
 *
	gùx
, 
X509_NAME
 *
	gnm
);

212 (*
	gş—nup
è(
X509_STORE_CTX
 *
	gùx
);

213 
CRYPTO_EX_DATA
 
	gex_d©a
;

214 
	g»ã»nûs
;

217 
X509_STORE_£t_d•th
(
X509_STORE
 *
¡Üe
, 
d•th
);

219 
	#X509_STORE_£t_v”ify_cb_func
(
ùx
,
func
è((ùx)->
v”ify_cb
=(func))

	)

220 
	#X509_STORE_£t_v”ify_func
(
ùx
,
func
è((ùx)->
v”ify
=(func))

	)

223 
	sx509_lookup_¡
 {

224 
	gš™
;

225 
	gsk
;

226 
X509_LOOKUP_METHOD
 *
	gm‘hod
;

227 *
	gm‘hod_d©a
;

228 
X509_STORE
 *
	g¡Üe_ùx
;

236 
	sx509_¡Üe_ùx_¡
 {

237 
X509_STORE
 *
	gùx
;

239 
	gcu¼’t_m‘hod
;

242 
X509
 *
	gû¹
;

244 
STACK_OF
(
X509
è*
	guÁru¡ed
;

246 
STACK_OF
(
X509_CRL
è*
	güls
;

247 
X509_VERIFY_PARAM
 *
	g·¿m
;

249 *
	gÙh”_ùx
;

252 (*
	gv”ify
è(
X509_STORE_CTX
 *
	gùx
);

254 (*
	gv”ify_cb
è(
	gok
, 
X509_STORE_CTX
 *
	gùx
);

256 (*
	gg‘_issu”
è(
X509
 **
	gissu”
, 
X509_STORE_CTX
 *
	gùx
, X509 *
	gx
);

258 (*
	gcheck_issued
è(
X509_STORE_CTX
 *
	gùx
, 
X509
 *
	gx
, X509 *
	gissu”
);

260 (*
	gcheck_»voÿtiÚ
è(
X509_STORE_CTX
 *
	gùx
);

262 (*
	gg‘_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 **
	gül
, 
X509
 *
	gx
);

264 (*
	gcheck_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 *
	gül
);

266 (*
	gû¹_ül
è(
X509_STORE_CTX
 *
	gùx
, 
X509_CRL
 *
	gül
, 
X509
 *
	gx
);

267 (*
	gcheck_pŞicy
è(
X509_STORE_CTX
 *
	gùx
);

268 
STACK_OF
(
X509
è*(*
	glookup_û¹s
è(
X509_STORE_CTX
 *
	gùx
, 
X509_NAME
 *
	gnm
);

269 
STACK_OF
(
X509_CRL
è*(*
	glookup_üls
è(
X509_STORE_CTX
 *
	gùx
, 
X509_NAME
 *
	gnm
);

270 (*
	gş—nup
è(
X509_STORE_CTX
 *
	gùx
);

273 
	gv®id
;

275 
	gÏ¡_uÁru¡ed
;

277 
STACK_OF
(
X509
è*
	gchaš
;

279 
X509_POLICY_TREE
 *
	gŒ“
;

281 
	gex¶ic™_pŞicy
;

283 
	g”rÜ_d•th
;

284 
	g”rÜ
;

285 
X509
 *
	gcu¼’t_û¹
;

287 
X509
 *
	gcu¼’t_issu”
;

289 
X509_CRL
 *
	gcu¼’t_ül
;

291 
	gcu¼’t_ül_scÜe
;

293 
	gcu¼’t_»asÚs
;

295 
X509_STORE_CTX
 *
	g·»Á
;

296 
CRYPTO_EX_DATA
 
	gex_d©a
;

299 
X509_STORE_CTX_£t_d•th
(
X509_STORE_CTX
 *
ùx
, 
d•th
);

301 
	#X509_STORE_CTX_£t_­p_d©a
(
ùx
,
d©a
) \

302 
	`X509_STORE_CTX_£t_ex_d©a
(
ùx
,0,
d©a
)

	)

303 
	#X509_STORE_CTX_g‘_­p_d©a
(
ùx
) \

304 
	`X509_STORE_CTX_g‘_ex_d©a
(
ùx
,0)

	)

306 
	#X509_L_FILE_LOAD
 1

	)

307 
	#X509_L_ADD_DIR
 2

	)

309 
	#X509_LOOKUP_lßd_fe
(
x
,
Çme
,
ty³
) \

310 
	`X509_LOOKUP_ù¾
((
x
),
X509_L_FILE_LOAD
,(
Çme
),()(
ty³
),
NULL
)

	)

312 
	#X509_LOOKUP_add_dœ
(
x
,
Çme
,
ty³
) \

313 
	`X509_LOOKUP_ù¾
((
x
),
X509_L_ADD_DIR
,(
Çme
),()(
ty³
),
NULL
)

	)

315 
	#X509_V_OK
 0

	)

316 
	#X509_V_ERR_UNSPECIFIED
 1

	)

318 
	#X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT
 2

	)

319 
	#X509_V_ERR_UNABLE_TO_GET_CRL
 3

	)

320 
	#X509_V_ERR_UNABLE_TO_DECRYPT_CERT_SIGNATURE
 4

	)

321 
	#X509_V_ERR_UNABLE_TO_DECRYPT_CRL_SIGNATURE
 5

	)

322 
	#X509_V_ERR_UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY
 6

	)

323 
	#X509_V_ERR_CERT_SIGNATURE_FAILURE
 7

	)

324 
	#X509_V_ERR_CRL_SIGNATURE_FAILURE
 8

	)

325 
	#X509_V_ERR_CERT_NOT_YET_VALID
 9

	)

326 
	#X509_V_ERR_CERT_HAS_EXPIRED
 10

	)

327 
	#X509_V_ERR_CRL_NOT_YET_VALID
 11

	)

328 
	#X509_V_ERR_CRL_HAS_EXPIRED
 12

	)

329 
	#X509_V_ERR_ERROR_IN_CERT_NOT_BEFORE_FIELD
 13

	)

330 
	#X509_V_ERR_ERROR_IN_CERT_NOT_AFTER_FIELD
 14

	)

331 
	#X509_V_ERR_ERROR_IN_CRL_LAST_UPDATE_FIELD
 15

	)

332 
	#X509_V_ERR_ERROR_IN_CRL_NEXT_UPDATE_FIELD
 16

	)

333 
	#X509_V_ERR_OUT_OF_MEM
 17

	)

334 
	#X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT
 18

	)

335 
	#X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN
 19

	)

336 
	#X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY
 20

	)

337 
	#X509_V_ERR_UNABLE_TO_VERIFY_LEAF_SIGNATURE
 21

	)

338 
	#X509_V_ERR_CERT_CHAIN_TOO_LONG
 22

	)

339 
	#X509_V_ERR_CERT_REVOKED
 23

	)

340 
	#X509_V_ERR_INVALID_CA
 24

	)

341 
	#X509_V_ERR_PATH_LENGTH_EXCEEDED
 25

	)

342 
	#X509_V_ERR_INVALID_PURPOSE
 26

	)

343 
	#X509_V_ERR_CERT_UNTRUSTED
 27

	)

344 
	#X509_V_ERR_CERT_REJECTED
 28

	)

346 
	#X509_V_ERR_SUBJECT_ISSUER_MISMATCH
 29

	)

347 
	#X509_V_ERR_AKID_SKID_MISMATCH
 30

	)

348 
	#X509_V_ERR_AKID_ISSUER_SERIAL_MISMATCH
 31

	)

349 
	#X509_V_ERR_KEYUSAGE_NO_CERTSIGN
 32

	)

351 
	#X509_V_ERR_UNABLE_TO_GET_CRL_ISSUER
 33

	)

352 
	#X509_V_ERR_UNHANDLED_CRITICAL_EXTENSION
 34

	)

353 
	#X509_V_ERR_KEYUSAGE_NO_CRL_SIGN
 35

	)

354 
	#X509_V_ERR_UNHANDLED_CRITICAL_CRL_EXTENSION
 36

	)

355 
	#X509_V_ERR_INVALID_NON_CA
 37

	)

356 
	#X509_V_ERR_PROXY_PATH_LENGTH_EXCEEDED
 38

	)

357 
	#X509_V_ERR_KEYUSAGE_NO_DIGITAL_SIGNATURE
 39

	)

358 
	#X509_V_ERR_PROXY_CERTIFICATES_NOT_ALLOWED
 40

	)

360 
	#X509_V_ERR_INVALID_EXTENSION
 41

	)

361 
	#X509_V_ERR_INVALID_POLICY_EXTENSION
 42

	)

362 
	#X509_V_ERR_NO_EXPLICIT_POLICY
 43

	)

363 
	#X509_V_ERR_DIFFERENT_CRL_SCOPE
 44

	)

364 
	#X509_V_ERR_UNSUPPORTED_EXTENSION_FEATURE
 45

	)

366 
	#X509_V_ERR_UNNESTED_RESOURCE
 46

	)

368 
	#X509_V_ERR_PERMITTED_VIOLATION
 47

	)

369 
	#X509_V_ERR_EXCLUDED_VIOLATION
 48

	)

370 
	#X509_V_ERR_SUBTREE_MINMAX
 49

	)

371 
	#X509_V_ERR_APPLICATION_VERIFICATION
 50

	)

372 
	#X509_V_ERR_UNSUPPORTED_CONSTRAINT_TYPE
 51

	)

373 
	#X509_V_ERR_UNSUPPORTED_CONSTRAINT_SYNTAX
 52

	)

374 
	#X509_V_ERR_UNSUPPORTED_NAME_SYNTAX
 53

	)

375 
	#X509_V_ERR_CRL_PATH_VALIDATION_ERROR
 54

	)

378 
	#X509_V_ERR_SUITE_B_INVALID_VERSION
 56

	)

379 
	#X509_V_ERR_SUITE_B_INVALID_ALGORITHM
 57

	)

380 
	#X509_V_ERR_SUITE_B_INVALID_CURVE
 58

	)

381 
	#X509_V_ERR_SUITE_B_INVALID_SIGNATURE_ALGORITHM
 59

	)

382 
	#X509_V_ERR_SUITE_B_LOS_NOT_ALLOWED
 60

	)

383 
	#X509_V_ERR_SUITE_B_CANNOT_SIGN_P_384_WITH_P_256
 61

	)

386 
	#X509_V_ERR_HOSTNAME_MISMATCH
 62

	)

387 
	#X509_V_ERR_EMAIL_MISMATCH
 63

	)

388 
	#X509_V_ERR_IP_ADDRESS_MISMATCH
 64

	)

391 
	#X509_V_ERR_INVALID_CALL
 65

	)

393 
	#X509_V_ERR_STORE_LOOKUP
 66

	)

395 
	#X509_V_ERR_PROXY_SUBJECT_NAME_VIOLATION
 67

	)

400 
	#X509_V_FLAG_CB_ISSUER_CHECK
 0x1

	)

402 
	#X509_V_FLAG_USE_CHECK_TIME
 0x2

	)

404 
	#X509_V_FLAG_CRL_CHECK
 0x4

	)

406 
	#X509_V_FLAG_CRL_CHECK_ALL
 0x8

	)

408 
	#X509_V_FLAG_IGNORE_CRITICAL
 0x10

	)

410 
	#X509_V_FLAG_X509_STRICT
 0x20

	)

412 
	#X509_V_FLAG_ALLOW_PROXY_CERTS
 0x40

	)

414 
	#X509_V_FLAG_POLICY_CHECK
 0x80

	)

416 
	#X509_V_FLAG_EXPLICIT_POLICY
 0x100

	)

418 
	#X509_V_FLAG_INHIBIT_ANY
 0x200

	)

420 
	#X509_V_FLAG_INHIBIT_MAP
 0x400

	)

422 
	#X509_V_FLAG_NOTIFY_POLICY
 0x800

	)

424 
	#X509_V_FLAG_EXTENDED_CRL_SUPPORT
 0x1000

	)

426 
	#X509_V_FLAG_USE_DELTAS
 0x2000

	)

428 
	#X509_V_FLAG_CHECK_SS_SIGNATURE
 0x4000

	)

430 
	#X509_V_FLAG_TRUSTED_FIRST
 0x8000

	)

432 
	#X509_V_FLAG_SUITEB_128_LOS_ONLY
 0x10000

	)

434 
	#X509_V_FLAG_SUITEB_192_LOS
 0x20000

	)

436 
	#X509_V_FLAG_SUITEB_128_LOS
 0x30000

	)

439 
	#X509_V_FLAG_PARTIAL_CHAIN
 0x80000

	)

445 
	#X509_V_FLAG_NO_ALT_CHAINS
 0x100000

	)

447 
	#X509_VP_FLAG_DEFAULT
 0x1

	)

448 
	#X509_VP_FLAG_OVERWRITE
 0x2

	)

449 
	#X509_VP_FLAG_RESET_FLAGS
 0x4

	)

450 
	#X509_VP_FLAG_LOCKED
 0x8

	)

451 
	#X509_VP_FLAG_ONCE
 0x10

	)

454 
	#X509_V_FLAG_POLICY_MASK
 (
X509_V_FLAG_POLICY_CHECK
 \

455 | 
X509_V_FLAG_EXPLICIT_POLICY
 \

456 | 
X509_V_FLAG_INHIBIT_ANY
 \

457 | 
X509_V_FLAG_INHIBIT_MAP
)

	)

459 
X509_OBJECT_idx_by_subjeù
(
STACK_OF
(
X509_OBJECT
è*
h
, 
ty³
,

460 
X509_NAME
 *
Çme
);

461 
X509_OBJECT
 *
X509_OBJECT_»Œ›ve_by_subjeù
(
STACK_OF
(X509_OBJECTè*
h
,

462 
ty³
, 
X509_NAME
 *
Çme
);

463 
X509_OBJECT
 *
X509_OBJECT_»Œ›ve_m©ch
(
STACK_OF
(X509_OBJECTè*
h
,

464 
X509_OBJECT
 *
x
);

465 
X509_OBJECT_up_»f_couÁ
(
X509_OBJECT
 *
a
);

466 
X509_OBJECT_ä“_cÚ‹Ás
(
X509_OBJECT
 *
a
);

467 
X509_STORE
 *
X509_STORE_Ãw
();

468 
X509_STORE_ä“
(
X509_STORE
 *
v
);

470 
STACK_OF
(
X509
è*
X509_STORE_g‘1_û¹s
(
X509_STORE_CTX
 *
¡
, 
X509_NAME
 *
nm
);

471 
STACK_OF
(
X509_CRL
è*
X509_STORE_g‘1_üls
(
X509_STORE_CTX
 *
¡
, 
X509_NAME
 *
nm
);

472 
X509_STORE_£t_æags
(
X509_STORE
 *
ùx
, 
æags
);

473 
X509_STORE_£t_pu½o£
(
X509_STORE
 *
ùx
, 
pu½o£
);

474 
X509_STORE_£t_Œu¡
(
X509_STORE
 *
ùx
, 
Œu¡
);

475 
X509_STORE_£t1_·¿m
(
X509_STORE
 *
ùx
, 
X509_VERIFY_PARAM
 *
pm
);

477 
X509_STORE_£t_v”ify_cb
(
X509_STORE
 *
ùx
,

478 (*
v”ify_cb
è(, 
X509_STORE_CTX
 *));

480 
X509_STORE_£t_lookup_üls_cb
(
X509_STORE
 *
ùx
,

481 
STACK_OF
(
X509_CRL
è*(*
cb
è(
X509_STORE_CTX


482 *
ùx
,

483 
X509_NAME
 *
nm
));

485 
X509_STORE_CTX
 *
X509_STORE_CTX_Ãw
();

487 
X509_STORE_CTX_g‘1_issu”
(
X509
 **
issu”
, 
X509_STORE_CTX
 *
ùx
, X509 *
x
);

489 
X509_STORE_CTX_ä“
(
X509_STORE_CTX
 *
ùx
);

490 
X509_STORE_CTX_š™
(
X509_STORE_CTX
 *
ùx
, 
X509_STORE
 *
¡Üe
,

491 
X509
 *
x509
, 
STACK_OF
(X509è*
chaš
);

492 
X509_STORE_CTX_Œu¡ed_¡ack
(
X509_STORE_CTX
 *
ùx
, 
STACK_OF
(
X509
è*
sk
);

493 
X509_STORE_CTX_ş—nup
(
X509_STORE_CTX
 *
ùx
);

495 
X509_STORE
 *
X509_STORE_CTX_g‘0_¡Üe
(
X509_STORE_CTX
 *
ùx
);

497 
X509_LOOKUP
 *
X509_STORE_add_lookup
(
X509_STORE
 *
v
, 
X509_LOOKUP_METHOD
 *
m
);

499 
X509_LOOKUP_METHOD
 *
X509_LOOKUP_hash_dœ
();

500 
X509_LOOKUP_METHOD
 *
X509_LOOKUP_fe
();

502 
X509_STORE_add_û¹
(
X509_STORE
 *
ùx
, 
X509
 *
x
);

503 
X509_STORE_add_ül
(
X509_STORE
 *
ùx
, 
X509_CRL
 *
x
);

505 
X509_STORE_g‘_by_subjeù
(
X509_STORE_CTX
 *
vs
, 
ty³
, 
X509_NAME
 *
Çme
,

506 
X509_OBJECT
 *
»t
);

508 
X509_LOOKUP_ù¾
(
X509_LOOKUP
 *
ùx
, 
cmd
, cÚ¡ *
¬gc
,

509 
¬gl
, **
»t
);

511 #iâdeà
OPENSSL_NO_STDIO


512 
X509_lßd_û¹_fe
(
X509_LOOKUP
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

513 
X509_lßd_ül_fe
(
X509_LOOKUP
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

514 
X509_lßd_û¹_ül_fe
(
X509_LOOKUP
 *
ùx
, cÚ¡ *
fe
, 
ty³
);

517 
X509_LOOKUP
 *
X509_LOOKUP_Ãw
(
X509_LOOKUP_METHOD
 *
m‘hod
);

518 
X509_LOOKUP_ä“
(
X509_LOOKUP
 *
ùx
);

519 
X509_LOOKUP_š™
(
X509_LOOKUP
 *
ùx
);

520 
X509_LOOKUP_by_subjeù
(
X509_LOOKUP
 *
ùx
, 
ty³
, 
X509_NAME
 *
Çme
,

521 
X509_OBJECT
 *
»t
);

522 
X509_LOOKUP_by_issu”_£rŸl
(
X509_LOOKUP
 *
ùx
, 
ty³
, 
X509_NAME
 *
Çme
,

523 
ASN1_INTEGER
 *
£rŸl
, 
X509_OBJECT
 *
»t
);

524 
X509_LOOKUP_by_fšg”´št
(
X509_LOOKUP
 *
ùx
, 
ty³
,

525 *
by‹s
, 
Ën
,

526 
X509_OBJECT
 *
»t
);

527 
X509_LOOKUP_by_®Ÿs
(
X509_LOOKUP
 *
ùx
, 
ty³
, *
¡r
, 
Ën
,

528 
X509_OBJECT
 *
»t
);

529 
X509_LOOKUP_shutdown
(
X509_LOOKUP
 *
ùx
);

531 #iâdeà
OPENSSL_NO_STDIO


532 
X509_STORE_lßd_loÿtiÚs
(
X509_STORE
 *
ùx
,

533 cÚ¡ *
fe
, cÚ¡ *
dœ
);

534 
X509_STORE_£t_deçuÉ_·ths
(
X509_STORE
 *
ùx
);

537 
X509_STORE_CTX_g‘_ex_Ãw_šdex
(
¬gl
, *
¬gp
,

538 
CRYPTO_EX_Ãw
 *
Ãw_func
,

539 
CRYPTO_EX_dup
 *
dup_func
,

540 
CRYPTO_EX_ä“
 *
ä“_func
);

541 
X509_STORE_CTX_£t_ex_d©a
(
X509_STORE_CTX
 *
ùx
, 
idx
, *
d©a
);

542 *
X509_STORE_CTX_g‘_ex_d©a
(
X509_STORE_CTX
 *
ùx
, 
idx
);

543 
X509_STORE_CTX_g‘_”rÜ
(
X509_STORE_CTX
 *
ùx
);

544 
X509_STORE_CTX_£t_”rÜ
(
X509_STORE_CTX
 *
ùx
, 
s
);

545 
X509_STORE_CTX_g‘_”rÜ_d•th
(
X509_STORE_CTX
 *
ùx
);

546 
X509
 *
X509_STORE_CTX_g‘_cu¼’t_û¹
(
X509_STORE_CTX
 *
ùx
);

547 
X509
 *
X509_STORE_CTX_g‘0_cu¼’t_issu”
(
X509_STORE_CTX
 *
ùx
);

548 
X509_CRL
 *
X509_STORE_CTX_g‘0_cu¼’t_ül
(
X509_STORE_CTX
 *
ùx
);

549 
X509_STORE_CTX
 *
X509_STORE_CTX_g‘0_·»Á_ùx
(X509_STORE_CTX *
ùx
);

550 
STACK_OF
(
X509
è*
X509_STORE_CTX_g‘_chaš
(
X509_STORE_CTX
 *
ùx
);

551 
STACK_OF
(
X509
è*
X509_STORE_CTX_g‘1_chaš
(
X509_STORE_CTX
 *
ùx
);

552 
X509_STORE_CTX_£t_û¹
(
X509_STORE_CTX
 *
c
, 
X509
 *
x
);

553 
X509_STORE_CTX_£t_chaš
(
X509_STORE_CTX
 *
c
, 
STACK_OF
(
X509
è*
sk
);

554 
X509_STORE_CTX_£t0_üls
(
X509_STORE_CTX
 *
c
, 
STACK_OF
(
X509_CRL
è*
sk
);

555 
X509_STORE_CTX_£t_pu½o£
(
X509_STORE_CTX
 *
ùx
, 
pu½o£
);

556 
X509_STORE_CTX_£t_Œu¡
(
X509_STORE_CTX
 *
ùx
, 
Œu¡
);

557 
X509_STORE_CTX_pu½o£_šh”™
(
X509_STORE_CTX
 *
ùx
, 
def_pu½o£
,

558 
pu½o£
, 
Œu¡
);

559 
X509_STORE_CTX_£t_æags
(
X509_STORE_CTX
 *
ùx
, 
æags
);

560 
X509_STORE_CTX_£t_time
(
X509_STORE_CTX
 *
ùx
, 
æags
,

561 
time_t
 
t
);

562 
X509_STORE_CTX_£t_v”ify_cb
(
X509_STORE_CTX
 *
ùx
,

563 (*
v”ify_cb
è(, 
X509_STORE_CTX
 *));

565 
X509_POLICY_TREE
 *
X509_STORE_CTX_g‘0_pŞicy_Œ“
(
X509_STORE_CTX
 *
ùx
);

566 
X509_STORE_CTX_g‘_ex¶ic™_pŞicy
(
X509_STORE_CTX
 *
ùx
);

568 
X509_VERIFY_PARAM
 *
X509_STORE_CTX_g‘0_·¿m
(
X509_STORE_CTX
 *
ùx
);

569 
X509_STORE_CTX_£t0_·¿m
(
X509_STORE_CTX
 *
ùx
, 
X509_VERIFY_PARAM
 *
·¿m
);

570 
X509_STORE_CTX_£t_deçuÉ
(
X509_STORE_CTX
 *
ùx
, cÚ¡ *
Çme
);

574 
X509_VERIFY_PARAM
 *
X509_VERIFY_PARAM_Ãw
();

575 
X509_VERIFY_PARAM_ä“
(
X509_VERIFY_PARAM
 *
·¿m
);

576 
X509_VERIFY_PARAM_šh”™
(
X509_VERIFY_PARAM
 *
to
,

577 cÚ¡ 
X509_VERIFY_PARAM
 *
äom
);

578 
X509_VERIFY_PARAM_£t1
(
X509_VERIFY_PARAM
 *
to
,

579 cÚ¡ 
X509_VERIFY_PARAM
 *
äom
);

580 
X509_VERIFY_PARAM_£t1_Çme
(
X509_VERIFY_PARAM
 *
·¿m
, cÚ¡ *
Çme
);

581 
X509_VERIFY_PARAM_£t_æags
(
X509_VERIFY_PARAM
 *
·¿m
,

582 
æags
);

583 
X509_VERIFY_PARAM_ş—r_æags
(
X509_VERIFY_PARAM
 *
·¿m
,

584 
æags
);

585 
X509_VERIFY_PARAM_g‘_æags
(
X509_VERIFY_PARAM
 *
·¿m
);

586 
X509_VERIFY_PARAM_£t_pu½o£
(
X509_VERIFY_PARAM
 *
·¿m
, 
pu½o£
);

587 
X509_VERIFY_PARAM_£t_Œu¡
(
X509_VERIFY_PARAM
 *
·¿m
, 
Œu¡
);

588 
X509_VERIFY_PARAM_£t_d•th
(
X509_VERIFY_PARAM
 *
·¿m
, 
d•th
);

589 
X509_VERIFY_PARAM_£t_time
(
X509_VERIFY_PARAM
 *
·¿m
, 
time_t
 
t
);

590 
X509_VERIFY_PARAM_add0_pŞicy
(
X509_VERIFY_PARAM
 *
·¿m
,

591 
ASN1_OBJECT
 *
pŞicy
);

592 
X509_VERIFY_PARAM_£t1_pŞic›s
(
X509_VERIFY_PARAM
 *
·¿m
,

593 
STACK_OF
(
ASN1_OBJECT
è*
pŞic›s
);

595 
X509_VERIFY_PARAM_£t1_ho¡
(
X509_VERIFY_PARAM
 *
·¿m
,

596 cÚ¡ *
Çme
, 
size_t
 
Çm–’
);

597 
X509_VERIFY_PARAM_add1_ho¡
(
X509_VERIFY_PARAM
 *
·¿m
,

598 cÚ¡ *
Çme
, 
size_t
 
Çm–’
);

599 
X509_VERIFY_PARAM_£t_ho¡æags
(
X509_VERIFY_PARAM
 *
·¿m
,

600 
æags
);

601 *
X509_VERIFY_PARAM_g‘0_³”Çme
(
X509_VERIFY_PARAM
 *);

602 
X509_VERIFY_PARAM_£t1_ema
(
X509_VERIFY_PARAM
 *
·¿m
,

603 cÚ¡ *
ema
, 
size_t
 
emaËn
);

604 
X509_VERIFY_PARAM_£t1_
(
X509_VERIFY_PARAM
 *
·¿m
,

605 cÚ¡ *

, 
size_t
 
Ën
);

606 
X509_VERIFY_PARAM_£t1__asc
(
X509_VERIFY_PARAM
 *
·¿m
,

607 cÚ¡ *
asc
);

609 
X509_VERIFY_PARAM_g‘_d•th
(cÚ¡ 
X509_VERIFY_PARAM
 *
·¿m
);

610 cÚ¡ *
X509_VERIFY_PARAM_g‘0_Çme
(cÚ¡ 
X509_VERIFY_PARAM
 *
·¿m
);

612 
X509_VERIFY_PARAM_add0_bË
(
X509_VERIFY_PARAM
 *
·¿m
);

613 
X509_VERIFY_PARAM_g‘_couÁ
();

614 cÚ¡ 
X509_VERIFY_PARAM
 *
X509_VERIFY_PARAM_g‘0
(
id
);

615 cÚ¡ 
X509_VERIFY_PARAM
 *
X509_VERIFY_PARAM_lookup
(cÚ¡ *
Çme
);

616 
X509_VERIFY_PARAM_bË_ş—nup
();

618 
X509_pŞicy_check
(
X509_POLICY_TREE
 **
±»e
, *
³x¶ic™_pŞicy
,

619 
STACK_OF
(
X509
è*
û¹s
,

620 
STACK_OF
(
ASN1_OBJECT
è*
pŞicy_oids
, 
æags
);

622 
X509_pŞicy_Œ“_ä“
(
X509_POLICY_TREE
 *
Œ“
);

624 
X509_pŞicy_Œ“_Ëv–_couÁ
(cÚ¡ 
X509_POLICY_TREE
 *
Œ“
);

625 
X509_POLICY_LEVEL
 *
X509_pŞicy_Œ“_g‘0_Ëv–
(cÚ¡ 
X509_POLICY_TREE
 *
Œ“
,

626 
i
);

628 
STACK_OF
(
X509_POLICY_NODE
è*
X509_pŞicy_Œ“_g‘0_pŞic›s
(const

629 
X509_POLICY_TREE


630 *
Œ“
);

632 
STACK_OF
(
X509_POLICY_NODE
è*
X509_pŞicy_Œ“_g‘0_u£r_pŞic›s
(const

633 
X509_POLICY_TREE


634 *
Œ“
);

636 
X509_pŞicy_Ëv–_node_couÁ
(
X509_POLICY_LEVEL
 *
Ëv–
);

638 
X509_POLICY_NODE
 *
X509_pŞicy_Ëv–_g‘0_node
(
X509_POLICY_LEVEL
 *
Ëv–
,

639 
i
);

641 cÚ¡ 
ASN1_OBJECT
 *
X509_pŞicy_node_g‘0_pŞicy
(cÚ¡ 
X509_POLICY_NODE
 *
node
);

643 
STACK_OF
(
POLICYQUALINFO
è*
X509_pŞicy_node_g‘0_qu®if›rs
(const

644 
X509_POLICY_NODE


645 *
node
);

646 cÚ¡ 
X509_POLICY_NODE
 *
X509_pŞicy_node_g‘0_·»Á
(const X509_POLICY_NODE

647 *
node
);

649 #ifdeà 
__ılu¥lus


	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gcÚv_¡•
;

66 
	g__gcÚv_¡•_d©a
;

67 
	g__gcÚv_lßded_objeù
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 
	s__gcÚv_¡•


86 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

87 cÚ¡ *
__modÇme
;

89 
__couÁ”
;

91 *
__äom_Çme
;

92 *
__to_Çme
;

94 
__gcÚv_fù
 
__fù
;

95 
__gcÚv_btowc_fù
 
__btowc_fù
;

96 
__gcÚv_š™_fù
 
__š™_fù
;

97 
__gcÚv_’d_fù
 
__’d_fù
;

101 
__mš_Ãeded_äom
;

102 
__max_Ãeded_äom
;

103 
__mš_Ãeded_to
;

104 
__max_Ãeded_to
;

107 
__¡©eful
;

109 *
__d©a
;

114 
	s__gcÚv_¡•_d©a


116 *
__outbuf
;

117 *
__outbuãnd
;

121 
__æags
;

125 
__švoÿtiÚ_couÁ”
;

129 
__š‹º®_u£
;

131 
__mb¡©e_t
 *
__¡©•
;

132 
__mb¡©e_t
 
__¡©e
;

138 
	s__gcÚv_šfo


140 
size_t
 
__n¡•s
;

141 
__gcÚv_¡•
 *
__¡•s
;

142 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
[0];

143 } *
	t__gcÚv_t
;

146 
	`__gcÚv_Œª¦™”©e
 (
__gcÚv_¡•
 *
¡•
,

147 
__gcÚv_¡•_d©a
 *
¡•_d©a
,

148 cÚ¡ *
šbuf¡¬t
,

149 cÚ¡ **
šbuå
,

150 cÚ¡ *
šbuãnd
,

151 **
outbuf¡¬t
,

152 
size_t
 *
œ»v”sibË
);

	@/usr/include/openssl/bn.h

125 #iâdeà
HEADER_BN_H


126 
	#HEADER_BN_H


	)

128 
	~<lim™s.h
>

129 
	~<İ’s¦/e_os2.h
>

130 #iâdeà
OPENSSL_NO_FP_API


131 
	~<¡dio.h
>

133 
	~<İ’s¦/os¦_typ.h
>

134 
	~<İ’s¦/üy±o.h
>

136 #ifdeà 
__ılu¥lus


152 #iâdeà
OPENSSL_SMALL_FOOTPRINT


153 
	#BN_MUL_COMBA


	)

154 
	#BN_SQR_COMBA


	)

155 
	#BN_RECURSION


	)

170 #ià
defšed
(
OPENSSL_SYS_MSDOS
è|| defšed(
OPENSSL_SYS_WINDOWS
) || \

171 
defšed
(
OPENSSL_SYS_WIN32
è|| 
	$defšed
(
lšux
)

172 #iâdeà
BN_DIV2W


173 
	#BN_DIV2W


	)

181 #ifdeà
SIXTY_FOUR_BIT_LONG


182 
	#BN_ULLONG
 

	)

183 
	#BN_ULONG
 

	)

184 
	#BN_LONG
 

	)

185 
	#BN_BITS
 128

	)

186 
	#BN_BYTES
 8

	)

187 
	#BN_BITS2
 64

	)

188 
	#BN_BITS4
 32

	)

189 
	#BN_MASK
 (0xffffffffffffffffffffffffffffffffLL)

	)

190 
	#BN_MASK2
 (0xffffffffffffffffL)

	)

191 
	#BN_MASK2l
 (0xffffffffL)

	)

192 
	#BN_MASK2h
 (0xffffffff00000000L)

	)

193 
	#BN_MASK2h1
 (0xffffffff80000000L)

	)

194 
	#BN_TBIT
 (0x8000000000000000L)

	)

195 
	#BN_DEC_CONV
 (10000000000000000000UL)

	)

196 
	#BN_DEC_FMT1
 "%lu"

	)

197 
	#BN_DEC_FMT2
 "%019lu"

	)

198 
	#BN_DEC_NUM
 19

	)

199 
	#BN_HEX_FMT1
 "%lX"

	)

200 
	#BN_HEX_FMT2
 "%016lX"

	)

209 #ifdeà
SIXTY_FOUR_BIT


210 #undeà
BN_LLONG


211 #undeà
BN_ULLONG


212 
	#BN_ULONG
 

	)

213 
	#BN_LONG
 

	)

214 
	#BN_BITS
 128

	)

215 
	#BN_BYTES
 8

	)

216 
	#BN_BITS2
 64

	)

217 
	#BN_BITS4
 32

	)

218 
	#BN_MASK2
 (0xffffffffffffffffLL)

	)

219 
	#BN_MASK2l
 (0xffffffffL)

	)

220 
	#BN_MASK2h
 (0xffffffff00000000LL)

	)

221 
	#BN_MASK2h1
 (0xffffffff80000000LL)

	)

222 
	#BN_TBIT
 (0x8000000000000000LL)

	)

223 
	#BN_DEC_CONV
 (10000000000000000000ULL)

	)

224 
	#BN_DEC_FMT1
 "%Îu"

	)

225 
	#BN_DEC_FMT2
 "%019Îu"

	)

226 
	#BN_DEC_NUM
 19

	)

227 
	#BN_HEX_FMT1
 "%ÎX"

	)

228 
	#BN_HEX_FMT2
 "%016ÎX"

	)

231 #ifdeà
THIRTY_TWO_BIT


232 #ifdeà
BN_LLONG


233 #ià
	`defšed
(
_WIN32
è&& !defšed(
__GNUC__
)

234 
	#BN_ULLONG
 
__št64


	)

235 
	#BN_MASK
 (0xffffffffffffffff
I64
)

	)

237 
	#BN_ULLONG
 

	)

238 
	#BN_MASK
 (0xffffffffffffffffLL)

	)

241 
	#BN_ULONG
 

	)

242 
	#BN_LONG
 

	)

243 
	#BN_BITS
 64

	)

244 
	#BN_BYTES
 4

	)

245 
	#BN_BITS2
 32

	)

246 
	#BN_BITS4
 16

	)

247 
	#BN_MASK2
 (0xffffffffL)

	)

248 
	#BN_MASK2l
 (0xffff)

	)

249 
	#BN_MASK2h1
 (0xffff8000L)

	)

250 
	#BN_MASK2h
 (0xffff0000L)

	)

251 
	#BN_TBIT
 (0x80000000L)

	)

252 
	#BN_DEC_CONV
 (1000000000L)

	)

253 
	#BN_DEC_FMT1
 "%u"

	)

254 
	#BN_DEC_FMT2
 "%09u"

	)

255 
	#BN_DEC_NUM
 9

	)

256 
	#BN_HEX_FMT1
 "%X"

	)

257 
	#BN_HEX_FMT2
 "%08X"

	)

260 
	#BN_DEFAULT_BITS
 1280

	)

262 
	#BN_FLG_MALLOCED
 0x01

	)

263 
	#BN_FLG_STATIC_DATA
 0x02

	)

271 
	#BN_FLG_CONSTTIME
 0x04

	)

273 #ifdeà
OPENSSL_NO_DEPRECATED


275 
	#BN_FLG_EXP_CONSTTIME
 
BN_FLG_CONSTTIME


	)

282 #iâdeà
OPENSSL_NO_DEPRECATED


283 
	#BN_FLG_FREE
 0x8000

	)

286 
	#BN_£t_æags
(
b
,
n
è((b)->
æags
|=Ò))

	)

287 
	#BN_g‘_æags
(
b
,
n
è((b)->
æags
&Ò))

	)

293 
	#BN_w™h_æags
(
de¡
,
b
,
n
è((de¡)->
d
=(b)->d, \

294 (
de¡
)->
tİ
=(
b
)->top, \

295 (
de¡
)->
dmax
=(
b
)->dmax, \

296 (
de¡
)->
Ãg
=(
b
)->neg, \

297 (
de¡
)->
æags
=(((de¡)->æag & 
BN_FLG_MALLOCED
) \

298 | ((
b
)->
æags
 & ~
BN_FLG_MALLOCED
) \

299 | 
BN_FLG_STATIC_DATA
 \

300 | (
n
)))

	)

304 
bignum_¡
 
	tBIGNUM
;

306 
bignum_ùx
 
	tBN_CTX
;

307 
bn_blšdšg_¡
 
	tBN_BLINDING
;

308 
bn_mÚt_ùx_¡
 
	tBN_MONT_CTX
;

309 
bn_»ı_ùx_¡
 
	tBN_RECP_CTX
;

310 
bn_g’cb_¡
 
	tBN_GENCB
;

313 
	sbignum_¡
 {

314 
BN_ULONG
 *
d
;

316 
tİ
;

318 
dmax
;

319 
Ãg
;

320 
æags
;

324 
	sbn_mÚt_ùx_¡
 {

325 
ri
;

326 
BIGNUM
 
RR
;

327 
BIGNUM
 
N
;

328 
BIGNUM
 
Ni
;

330 
BN_ULONG
 
n0
[2];

333 
æags
;

340 
	sbn_»ı_ùx_¡
 {

341 
BIGNUM
 
N
;

342 
BIGNUM
 
Nr
;

343 
num_b™s
;

344 
shiá
;

345 
æags
;

349 
	sbn_g’cb_¡
 {

350 
v”
;

351 *
¬g
;

354 (*
cb_1
) (, , *);

356 (*
cb_2
è(, , 
BN_GENCB
 *);

357 } 
cb
;

360 
	`BN_GENCB_ÿÎ
(
BN_GENCB
 *
cb
, 
a
, 
b
);

362 
	#BN_GENCB_£t_Şd
(
g’cb
, 
ÿÎback
, 
cb_¬g
) { \

363 
BN_GENCB
 *
tmp_g’cb
 = (
g’cb
); \

364 
tmp_g’cb
->
v”
 = 1; \

365 
tmp_g’cb
->
¬g
 = (
cb_¬g
); \

366 
tmp_g’cb
->
cb
.
cb_1
 = (
ÿÎback
); }

	)

368 
	#BN_GENCB_£t
(
g’cb
, 
ÿÎback
, 
cb_¬g
) { \

369 
BN_GENCB
 *
tmp_g’cb
 = (
g’cb
); \

370 
tmp_g’cb
->
v”
 = 2; \

371 
tmp_g’cb
->
¬g
 = (
cb_¬g
); \

372 
tmp_g’cb
->
cb
.
cb_2
 = (
ÿÎback
); }

	)

374 
	#BN_´ime_checks
 0

	)

440 
	#BN_´ime_checks_fÜ_size
(
b
) ((b) >= 3747 ? 3 : \

441 (
b
) >= 1345 ? 4 : \

442 (
b
) >= 476 ? 5 : \

443 (
b
) >= 400 ? 6 : \

444 (
b
) >= 347 ? 7 : \

445 (
b
) >= 308 ? 8 : \

446 (
b
) >= 55 ? 27 : \

447  34)

	)

449 
	#BN_num_by‹s
(
a
è((
	`BN_num_b™s
×)+7)/8)

	)

452 
	#BN_abs_is_wÜd
(
a
,
w
è(((×)->
tİ
 =ğ1è&& (×)->
d
[0] =ğ(
BN_ULONG
)(w))) || \

453 (((
w
è=ğ0è&& ((
a
)->
tİ
 =ğ0)))

	)

454 
	#BN_is_z”o
(
a
è(×)->
tİ
 =ğ0)

	)

455 
	#BN_is_Úe
(
a
è(
	`BN_abs_is_wÜd
(×),1è&& !×)->
Ãg
)

	)

456 
	#BN_is_wÜd
(
a
,
w
è(
	`BN_abs_is_wÜd
(×),(w)è&& (!(wè|| !×)->
Ãg
))

	)

457 
	#BN_is_odd
(
a
è((×)->
tİ
 > 0è&& (×)->
d
[0] & 1))

	)

459 
	#BN_Úe
(
a
è(
	`BN_£t_wÜd
(×),1))

	)

460 
	#BN_z”o_ex
(
a
) \

462 
BIGNUM
 *
_tmp_bn
 = (
a
); \

463 
_tmp_bn
->
tİ
 = 0; \

464 
_tmp_bn
->
Ãg
 = 0; \

465 } 0)

	)

466 #ifdeà
OPENSSL_NO_DEPRECATED


467 
	#BN_z”o
(
a
è
	`BN_z”o_ex
×)

	)

469 
	#BN_z”o
(
a
è(
	`BN_£t_wÜd
(×),0))

	)

472 cÚ¡ 
BIGNUM
 *
	`BN_v®ue_Úe
();

473 *
	`BN_İtiÚs
();

474 
BN_CTX
 *
	`BN_CTX_Ãw
();

475 #iâdeà
OPENSSL_NO_DEPRECATED


476 
	`BN_CTX_š™
(
BN_CTX
 *
c
);

478 
	`BN_CTX_ä“
(
BN_CTX
 *
c
);

479 
	`BN_CTX_¡¬t
(
BN_CTX
 *
ùx
);

480 
BIGNUM
 *
	`BN_CTX_g‘
(
BN_CTX
 *
ùx
);

481 
	`BN_CTX_’d
(
BN_CTX
 *
ùx
);

482 
	`BN_¿nd
(
BIGNUM
 *
ºd
, 
b™s
, 
tİ
, 
bÙtom
);

483 
	`BN_p£udo_¿nd
(
BIGNUM
 *
ºd
, 
b™s
, 
tİ
, 
bÙtom
);

484 
	`BN_¿nd_¿nge
(
BIGNUM
 *
ºd
, cÚ¡ BIGNUM *
¿nge
);

485 
	`BN_p£udo_¿nd_¿nge
(
BIGNUM
 *
ºd
, cÚ¡ BIGNUM *
¿nge
);

486 
	`BN_num_b™s
(cÚ¡ 
BIGNUM
 *
a
);

487 
	`BN_num_b™s_wÜd
(
BN_ULONG
);

488 
BIGNUM
 *
	`BN_Ãw
();

489 
	`BN_š™
(
BIGNUM
 *);

490 
	`BN_ş—r_ä“
(
BIGNUM
 *
a
);

491 
BIGNUM
 *
	`BN_cİy
(BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

492 
	`BN_sw­
(
BIGNUM
 *
a
, BIGNUM *
b
);

493 
BIGNUM
 *
	`BN_bš2bn
(cÚ¡ *
s
, 
Ën
, BIGNUM *
»t
);

494 
	`BN_bn2bš
(cÚ¡ 
BIGNUM
 *
a
, *
to
);

495 
BIGNUM
 *
	`BN_mpi2bn
(cÚ¡ *
s
, 
Ën
, BIGNUM *
»t
);

496 
	`BN_bn2mpi
(cÚ¡ 
BIGNUM
 *
a
, *
to
);

497 
	`BN_sub
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

498 
	`BN_usub
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

499 
	`BN_uadd
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

500 
	`BN_add
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

501 
	`BN_mul
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
, 
BN_CTX
 *
ùx
);

502 
	`BN_sqr
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, 
BN_CTX
 *
ùx
);

507 
	`BN_£t_Ãg©ive
(
BIGNUM
 *
b
, 
n
);

512 
	#BN_is_Ãg©ive
(
a
è(×)->
Ãg
 !ğ0)

	)

514 
	`BN_div
(
BIGNUM
 *
dv
, BIGNUM *
»m
, cÚ¡ BIGNUM *
m
, cÚ¡ BIGNUM *
d
,

515 
BN_CTX
 *
ùx
);

516 
	#BN_mod
(
»m
,
m
,
d
,
ùx
è
	`BN_div
(
NULL
,Ôem),(m),(d),(ùx))

	)

517 
	`BN_Âmod
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
m
, cÚ¡ BIGNUM *
d
, 
BN_CTX
 *
ùx
);

518 
	`BN_mod_add
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
, cÚ¡ BIGNUM *
m
,

519 
BN_CTX
 *
ùx
);

520 
	`BN_mod_add_quick
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

521 cÚ¡ 
BIGNUM
 *
m
);

522 
	`BN_mod_sub
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
, cÚ¡ BIGNUM *
m
,

523 
BN_CTX
 *
ùx
);

524 
	`BN_mod_sub_quick
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

525 cÚ¡ 
BIGNUM
 *
m
);

526 
	`BN_mod_mul
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
, cÚ¡ BIGNUM *
m
,

527 
BN_CTX
 *
ùx
);

528 
	`BN_mod_sqr
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
m
, 
BN_CTX
 *
ùx
);

529 
	`BN_mod_lshiá1
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
m
, 
BN_CTX
 *
ùx
);

530 
	`BN_mod_lshiá1_quick
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
m
);

531 
	`BN_mod_lshiá
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, 
n
, cÚ¡ BIGNUM *
m
,

532 
BN_CTX
 *
ùx
);

533 
	`BN_mod_lshiá_quick
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, 
n
, cÚ¡ BIGNUM *
m
);

535 
BN_ULONG
 
	`BN_mod_wÜd
(cÚ¡ 
BIGNUM
 *
a
, BN_ULONG 
w
);

536 
BN_ULONG
 
	`BN_div_wÜd
(
BIGNUM
 *
a
, BN_ULONG 
w
);

537 
	`BN_mul_wÜd
(
BIGNUM
 *
a
, 
BN_ULONG
 
w
);

538 
	`BN_add_wÜd
(
BIGNUM
 *
a
, 
BN_ULONG
 
w
);

539 
	`BN_sub_wÜd
(
BIGNUM
 *
a
, 
BN_ULONG
 
w
);

540 
	`BN_£t_wÜd
(
BIGNUM
 *
a
, 
BN_ULONG
 
w
);

541 
BN_ULONG
 
	`BN_g‘_wÜd
(cÚ¡ 
BIGNUM
 *
a
);

543 
	`BN_cmp
(cÚ¡ 
BIGNUM
 *
a
, cÚ¡ BIGNUM *
b
);

544 
	`BN_ä“
(
BIGNUM
 *
a
);

545 
	`BN_is_b™_£t
(cÚ¡ 
BIGNUM
 *
a
, 
n
);

546 
	`BN_lshiá
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, 
n
);

547 
	`BN_lshiá1
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
);

548 
	`BN_exp
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

550 
	`BN_mod_exp
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

551 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
);

552 
	`BN_mod_exp_mÚt
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

553 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
, 
BN_MONT_CTX
 *
m_ùx
);

554 
	`BN_mod_exp_mÚt_cÚ¡time
(
BIGNUM
 *
¼
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

555 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
,

556 
BN_MONT_CTX
 *
š_mÚt
);

557 
	`BN_mod_exp_mÚt_wÜd
(
BIGNUM
 *
r
, 
BN_ULONG
 
a
, cÚ¡ BIGNUM *
p
,

558 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
, 
BN_MONT_CTX
 *
m_ùx
);

559 
	`BN_mod_exp2_mÚt
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a1
, cÚ¡ BIGNUM *
p1
,

560 cÚ¡ 
BIGNUM
 *
a2
, cÚ¡ BIGNUM *
p2
, cÚ¡ BIGNUM *
m
,

561 
BN_CTX
 *
ùx
, 
BN_MONT_CTX
 *
m_ùx
);

562 
	`BN_mod_exp_sim¶e
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

563 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
);

565 
	`BN_mask_b™s
(
BIGNUM
 *
a
, 
n
);

566 #iâdeà
OPENSSL_NO_FP_API


567 
	`BN_´št_å
(
FILE
 *
å
, cÚ¡ 
BIGNUM
 *
a
);

569 #ifdeà
HEADER_BIO_H


570 
	`BN_´št
(
BIO
 *
å
, cÚ¡ 
BIGNUM
 *
a
);

572 
	`BN_´št
(*
å
, cÚ¡ 
BIGNUM
 *
a
);

574 
	`BN_»croÿl
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
m
, 
Ën
, 
BN_CTX
 *
ùx
);

575 
	`BN_rshiá
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, 
n
);

576 
	`BN_rshiá1
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
);

577 
	`BN_ş—r
(
BIGNUM
 *
a
);

578 
BIGNUM
 *
	`BN_dup
(cÚ¡ BIGNUM *
a
);

579 
	`BN_ucmp
(cÚ¡ 
BIGNUM
 *
a
, cÚ¡ BIGNUM *
b
);

580 
	`BN_£t_b™
(
BIGNUM
 *
a
, 
n
);

581 
	`BN_ş—r_b™
(
BIGNUM
 *
a
, 
n
);

582 *
	`BN_bn2hex
(cÚ¡ 
BIGNUM
 *
a
);

583 *
	`BN_bn2dec
(cÚ¡ 
BIGNUM
 *
a
);

584 
	`BN_hex2bn
(
BIGNUM
 **
a
, cÚ¡ *
¡r
);

585 
	`BN_dec2bn
(
BIGNUM
 **
a
, cÚ¡ *
¡r
);

586 
	`BN_asc2bn
(
BIGNUM
 **
a
, cÚ¡ *
¡r
);

587 
	`BN_gcd
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
, 
BN_CTX
 *
ùx
);

588 
	`BN_krÚeck”
(cÚ¡ 
BIGNUM
 *
a
, cÚ¡ BIGNUM *
b
, 
BN_CTX
 *
ùx
);

591 
BIGNUM
 *
	`BN_mod_šv”£
(BIGNUM *
»t
,

592 cÚ¡ 
BIGNUM
 *
a
, cÚ¡ BIGNUM *
n
, 
BN_CTX
 *
ùx
);

593 
BIGNUM
 *
	`BN_mod_sq¹
(BIGNUM *
»t
,

594 cÚ¡ 
BIGNUM
 *
a
, cÚ¡ BIGNUM *
n
, 
BN_CTX
 *
ùx
);

596 
	`BN_cÚ¡time_sw­
(
BN_ULONG
 
sw­
, 
BIGNUM
 *
a
, BIGNUM *
b
, 
nwÜds
);

599 #iâdeà
OPENSSL_NO_DEPRECATED


600 
BIGNUM
 *
	`BN_g’”©e_´ime
(BIGNUM *
»t
, 
b™s
, 
§ã
,

601 cÚ¡ 
BIGNUM
 *
add
, cÚ¡ BIGNUM *
»m
,

602 (*
ÿÎback
è(, , *), *
cb_¬g
);

603 
	`BN_is_´ime
(cÚ¡ 
BIGNUM
 *
p
, 
nchecks
,

604 (*
ÿÎback
) (, , *),

605 
BN_CTX
 *
ùx
, *
cb_¬g
);

606 
	`BN_is_´ime_ç¡‹¡
(cÚ¡ 
BIGNUM
 *
p
, 
nchecks
,

607 (*
ÿÎback
è(, , *), 
BN_CTX
 *
ùx
,

608 *
cb_¬g
, 
do_ŒŸl_divisiÚ
);

612 
	`BN_g’”©e_´ime_ex
(
BIGNUM
 *
»t
, 
b™s
, 
§ã
, cÚ¡ BIGNUM *
add
,

613 cÚ¡ 
BIGNUM
 *
»m
, 
BN_GENCB
 *
cb
);

614 
	`BN_is_´ime_ex
(cÚ¡ 
BIGNUM
 *
p
, 
nchecks
, 
BN_CTX
 *
ùx
, 
BN_GENCB
 *
cb
);

615 
	`BN_is_´ime_ç¡‹¡_ex
(cÚ¡ 
BIGNUM
 *
p
, 
nchecks
, 
BN_CTX
 *
ùx
,

616 
do_ŒŸl_divisiÚ
, 
BN_GENCB
 *
cb
);

618 
	`BN_X931_g’”©e_Xpq
(
BIGNUM
 *
Xp
, BIGNUM *
Xq
, 
nb™s
, 
BN_CTX
 *
ùx
);

620 
	`BN_X931_d”ive_´ime_ex
(
BIGNUM
 *
p
, BIGNUM *
p1
, BIGNUM *
p2
,

621 cÚ¡ 
BIGNUM
 *
Xp
, cÚ¡ BIGNUM *
Xp1
,

622 cÚ¡ 
BIGNUM
 *
Xp2
, cÚ¡ BIGNUM *
e
, 
BN_CTX
 *
ùx
,

623 
BN_GENCB
 *
cb
);

624 
	`BN_X931_g’”©e_´ime_ex
(
BIGNUM
 *
p
, BIGNUM *
p1
, BIGNUM *
p2
, BIGNUM *
Xp1
,

625 
BIGNUM
 *
Xp2
, cÚ¡ BIGNUM *
Xp
, cÚ¡ BIGNUM *
e
,

626 
BN_CTX
 *
ùx
, 
BN_GENCB
 *
cb
);

628 
BN_MONT_CTX
 *
	`BN_MONT_CTX_Ãw
();

629 
	`BN_MONT_CTX_š™
(
BN_MONT_CTX
 *
ùx
);

630 
	`BN_mod_mul_mÚtgom”y
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

631 
BN_MONT_CTX
 *
mÚt
, 
BN_CTX
 *
ùx
);

632 
	#BN_to_mÚtgom”y
(
r
,
a
,
mÚt
,
ùx
è
	`BN_mod_mul_mÚtgom”y
(\

633 (
r
),(
a
),&((
mÚt
)->
RR
),(mÚt),(
ùx
))

	)

634 
	`BN_äom_mÚtgom”y
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
,

635 
BN_MONT_CTX
 *
mÚt
, 
BN_CTX
 *
ùx
);

636 
	`BN_MONT_CTX_ä“
(
BN_MONT_CTX
 *
mÚt
);

637 
	`BN_MONT_CTX_£t
(
BN_MONT_CTX
 *
mÚt
, cÚ¡ 
BIGNUM
 *
mod
, 
BN_CTX
 *
ùx
);

638 
BN_MONT_CTX
 *
	`BN_MONT_CTX_cİy
(BN_MONT_CTX *
to
, BN_MONT_CTX *
äom
);

639 
BN_MONT_CTX
 *
	`BN_MONT_CTX_£t_locked
(BN_MONT_CTX **
pmÚt
, 
lock
,

640 cÚ¡ 
BIGNUM
 *
mod
, 
BN_CTX
 *
ùx
);

643 
	#BN_BLINDING_NO_UPDATE
 0x00000001

	)

644 
	#BN_BLINDING_NO_RECREATE
 0x00000002

	)

646 
BN_BLINDING
 *
	`BN_BLINDING_Ãw
(cÚ¡ 
BIGNUM
 *
A
, cÚ¡ BIGNUM *
Ai
, BIGNUM *
mod
);

647 
	`BN_BLINDING_ä“
(
BN_BLINDING
 *
b
);

648 
	`BN_BLINDING_upd©e
(
BN_BLINDING
 *
b
, 
BN_CTX
 *
ùx
);

649 
	`BN_BLINDING_cÚv”t
(
BIGNUM
 *
n
, 
BN_BLINDING
 *
b
, 
BN_CTX
 *
ùx
);

650 
	`BN_BLINDING_šv”t
(
BIGNUM
 *
n
, 
BN_BLINDING
 *
b
, 
BN_CTX
 *
ùx
);

651 
	`BN_BLINDING_cÚv”t_ex
(
BIGNUM
 *
n
, BIGNUM *
r
, 
BN_BLINDING
 *
b
, 
BN_CTX
 *);

652 
	`BN_BLINDING_šv”t_ex
(
BIGNUM
 *
n
, cÚ¡ BIGNUM *
r
, 
BN_BLINDING
 *
b
,

653 
BN_CTX
 *);

654 #iâdeà
OPENSSL_NO_DEPRECATED


655 
	`BN_BLINDING_g‘_th»ad_id
(cÚ¡ 
BN_BLINDING
 *);

656 
	`BN_BLINDING_£t_th»ad_id
(
BN_BLINDING
 *, );

658 
CRYPTO_THREADID
 *
	`BN_BLINDING_th»ad_id
(
BN_BLINDING
 *);

659 
	`BN_BLINDING_g‘_æags
(cÚ¡ 
BN_BLINDING
 *);

660 
	`BN_BLINDING_£t_æags
(
BN_BLINDING
 *, );

661 
BN_BLINDING
 *
	`BN_BLINDING_ü—‹_·¿m
(BN_BLINDING *
b
,

662 cÚ¡ 
BIGNUM
 *
e
, BIGNUM *
m
, 
BN_CTX
 *
ùx
,

663 (*
bn_mod_exp
è(
BIGNUM
 *
r
,

664 cÚ¡ 
BIGNUM
 *
a
,

665 cÚ¡ 
BIGNUM
 *
p
,

666 cÚ¡ 
BIGNUM
 *
m
,

667 
BN_CTX
 *
ùx
,

668 
BN_MONT_CTX
 *
m_ùx
),

669 
BN_MONT_CTX
 *
m_ùx
);

671 #iâdeà
OPENSSL_NO_DEPRECATED


672 
	`BN_£t_·¿ms
(
mul
, 
high
, 
low
, 
mÚt
);

673 
	`BN_g‘_·¿ms
(
which
);

676 
	`BN_RECP_CTX_š™
(
BN_RECP_CTX
 *
»ı
);

677 
BN_RECP_CTX
 *
	`BN_RECP_CTX_Ãw
();

678 
	`BN_RECP_CTX_ä“
(
BN_RECP_CTX
 *
»ı
);

679 
	`BN_RECP_CTX_£t
(
BN_RECP_CTX
 *
»ı
, cÚ¡ 
BIGNUM
 *
rdiv
, 
BN_CTX
 *
ùx
);

680 
	`BN_mod_mul_»croÿl
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
x
, cÚ¡ BIGNUM *
y
,

681 
BN_RECP_CTX
 *
»ı
, 
BN_CTX
 *
ùx
);

682 
	`BN_mod_exp_»ı
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

683 cÚ¡ 
BIGNUM
 *
m
, 
BN_CTX
 *
ùx
);

684 
	`BN_div_»ı
(
BIGNUM
 *
dv
, BIGNUM *
»m
, cÚ¡ BIGNUM *
m
,

685 
BN_RECP_CTX
 *
»ı
, 
BN_CTX
 *
ùx
);

687 #iâdeà
OPENSSL_NO_EC2M


699 
	`BN_GF2m_add
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
);

700 
	#BN_GF2m_sub
(
r
, 
a
, 
b
è
	`BN_GF2m_add
Ô,‡, b)

	)

704 
	`BN_GF2m_mod
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
);

706 
	`BN_GF2m_mod_mul
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

707 cÚ¡ 
BIGNUM
 *
p
, 
BN_CTX
 *
ùx
);

709 
	`BN_GF2m_mod_sqr
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

711 
	`BN_GF2m_mod_šv
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
b
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

713 
	`BN_GF2m_mod_div
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

714 cÚ¡ 
BIGNUM
 *
p
, 
BN_CTX
 *
ùx
);

716 
	`BN_GF2m_mod_exp
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

717 cÚ¡ 
BIGNUM
 *
p
, 
BN_CTX
 *
ùx
);

719 
	`BN_GF2m_mod_sq¹
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

720 
BN_CTX
 *
ùx
);

722 
	`BN_GF2m_mod_sŞve_quad
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
,

723 
BN_CTX
 *
ùx
);

724 
	#BN_GF2m_cmp
(
a
, 
b
è
	`BN_ucmp
(×), (b))

	)

732 
	`BN_GF2m_mod_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ 
p
[]);

734 
	`BN_GF2m_mod_mul_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

735 cÚ¡ 
p
[], 
BN_CTX
 *
ùx
);

737 
	`BN_GF2m_mod_sqr_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ 
p
[],

738 
BN_CTX
 *
ùx
);

740 
	`BN_GF2m_mod_šv_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
b
, cÚ¡ 
p
[],

741 
BN_CTX
 *
ùx
);

743 
	`BN_GF2m_mod_div_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

744 cÚ¡ 
p
[], 
BN_CTX
 *
ùx
);

746 
	`BN_GF2m_mod_exp_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
b
,

747 cÚ¡ 
p
[], 
BN_CTX
 *
ùx
);

749 
	`BN_GF2m_mod_sq¹_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
,

750 cÚ¡ 
p
[], 
BN_CTX
 *
ùx
);

752 
	`BN_GF2m_mod_sŞve_quad_¬r
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
,

753 cÚ¡ 
p
[], 
BN_CTX
 *
ùx
);

754 
	`BN_GF2m_pŞy2¬r
(cÚ¡ 
BIGNUM
 *
a
, 
p
[], 
max
);

755 
	`BN_GF2m_¬r2pŞy
(cÚ¡ 
p
[], 
BIGNUM
 *
a
);

762 
	`BN_ni¡_mod_192
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

763 
	`BN_ni¡_mod_224
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

764 
	`BN_ni¡_mod_256
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

765 
	`BN_ni¡_mod_384
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

766 
	`BN_ni¡_mod_521
(
BIGNUM
 *
r
, cÚ¡ BIGNUM *
a
, cÚ¡ BIGNUM *
p
, 
BN_CTX
 *
ùx
);

768 cÚ¡ 
BIGNUM
 *
	`BN_g‘0_ni¡_´ime_192
();

769 cÚ¡ 
BIGNUM
 *
	`BN_g‘0_ni¡_´ime_224
();

770 cÚ¡ 
BIGNUM
 *
	`BN_g‘0_ni¡_´ime_256
();

771 cÚ¡ 
BIGNUM
 *
	`BN_g‘0_ni¡_´ime_384
();

772 cÚ¡ 
BIGNUM
 *
	`BN_g‘0_ni¡_´ime_521
();

776 
	#bn_ex·nd
(
a
,
b™s
) \

778 
b™s
 > (
INT_MAX
 - 
BN_BITS2
 + 1) ? \

779 
NULL
 \

781 (((
b™s
+
BN_BITS2
-1)/BN_BITS2è<ğ(
a
)->
dmax
) ? \

782 (
a
) \

784 
	`bn_ex·nd2
((
a
),(
b™s
+
BN_BITS2
-1)/BN_BITS2) \

785 )

	)

787 
	#bn_wex·nd
(
a
,
wÜds
è(((wÜdsè<ğ×)->
dmax
)?×):
	`bn_ex·nd2
(×),(wÜds)))

	)

788 
BIGNUM
 *
	`bn_ex·nd2
(BIGNUM *
a
, 
wÜds
);

789 #iâdeà
OPENSSL_NO_DEPRECATED


790 
BIGNUM
 *
	`bn_dup_ex·nd
(cÚ¡ BIGNUM *
a
, 
wÜds
);

822 #ifdeà
BN_DEBUG


825 
	~<as£¹.h
>

836 
	#BN_FLG_FIXED_TOP
 0x10000

	)

837 #ifdeà
BN_DEBUG_RAND


839 #iâdeà
RAND_p£udo_by‹s


840 
	`RAND_p£udo_by‹s
(*
buf
, 
num
);

841 
	#BN_DEBUG_TRIX


	)

843 
	#bn_pŞlu‹
(
a
) \

845 cÚ¡ 
BIGNUM
 *
_bnum1
 = (
a
); \

846 if(
_bnum1
->
tİ
 < _bnum1->
dmax
) { \

847 
_tmp_ch¬
; \

851 
BN_ULONG
 *
_nÙ_cÚ¡
; \

852 
	`memıy
(&
_nÙ_cÚ¡
, &
_bnum1
->
d
, (
BN_ULONG
*)); \

854 
	`RAND_p£udo_by‹s
(&
_tmp_ch¬
, 1); \

855 
	`mem£t
((*)(
_nÙ_cÚ¡
 + 
_bnum1
->
tİ
), 
_tmp_ch¬
, \

856 (
_bnum1
->
dmax
 - _bnum1->
tİ
è* (
BN_ULONG
)); \

858 } 0)

	)

859 #ifdeà
BN_DEBUG_TRIX


860 #undeà
RAND_p£udo_by‹s


863 
	#bn_pŞlu‹
(
a
)

	)

865 
	#bn_check_tİ
(
a
) \

867 cÚ¡ 
BIGNUM
 *
_bnum2
 = (
a
); \

868 ià(
_bnum2
 !ğ
NULL
) { \

869 
_tİ
 = 
_bnum2
->
tİ
; \

870 
	`as£¹
((
_tİ
 == 0) || \

871 (
_bnum2
->
æags
 & 
BN_FLG_FIXED_TOP
) || \

872 (
_bnum2
->
d
[
_tİ
 - 1] != 0)); \

873 
	`bn_pŞlu‹
(
_bnum2
); \

875 } 0)

	)

877 
	#bn_fix_tİ
(
a
è
	`bn_check_tİ
×)

	)

879 
	#bn_check_size
(
bn
, 
b™s
è
	`bn_wcheck_size
(bn, ((b™s+
BN_BITS2
-1))/BN_BITS2)

	)

880 
	#bn_wcheck_size
(
bn
, 
wÜds
) \

882 cÚ¡ 
BIGNUM
 *
_bnum2
 = (
bn
); \

883 
	`as£¹
((
wÜds
è<ğ(
_bnum2
)->
dmax
 && (wÜdsè>ğ(_bnum2)->
tİ
); \

885 ()(
_bnum2
); \

886 } 0)

	)

890 
	#BN_FLG_FIXED_TOP
 0

	)

891 
	#bn_pŞlu‹
(
a
)

	)

892 
	#bn_check_tİ
(
a
)

	)

893 
	#bn_fix_tİ
(
a
è
	`bn_cÜ»ù_tİ
×)

	)

894 
	#bn_check_size
(
bn
, 
b™s
)

	)

895 
	#bn_wcheck_size
(
bn
, 
wÜds
)

	)

899 
	#bn_cÜ»ù_tİ
(
a
) \

901 
BN_ULONG
 *
ál
; \

902 
tmp_tİ
 = (
a
)->
tİ
; \

903 ià(
tmp_tİ
 > 0) \

905 
ál
ğ&((
a
)->
d
[
tmp_tİ
-1]);mp_top > 0;mp_top--) \

906 ià(*(
ál
--)) ; \

907 (
a
)->
tİ
 = 
tmp_tİ
; \

909 ià((
a
)->
tİ
 == 0) \

910 (
a
)->
Ãg
 = 0; \

911 
	`bn_pŞlu‹
(
a
); \

912 }

	)

914 
BN_ULONG
 
	`bn_mul_add_wÜds
(BN_ULONG *
½
, cÚ¡ BN_ULONG *
­
, 
num
,

915 
BN_ULONG
 
w
);

916 
BN_ULONG
 
	`bn_mul_wÜds
(BN_ULONG *
½
, cÚ¡ BN_ULONG *
­
, 
num
, BN_ULONG 
w
);

917 
	`bn_sqr_wÜds
(
BN_ULONG
 *
½
, cÚ¡ BN_ULONG *
­
, 
num
);

918 
BN_ULONG
 
	`bn_div_wÜds
(BN_ULONG 
h
, BN_ULONG 
l
, BN_ULONG 
d
);

919 
BN_ULONG
 
	`bn_add_wÜds
(BN_ULONG *
½
, cÚ¡ BN_ULONG *
­
, cÚ¡ BN_ULONG *
bp
,

920 
num
);

921 
BN_ULONG
 
	`bn_sub_wÜds
(BN_ULONG *
½
, cÚ¡ BN_ULONG *
­
, cÚ¡ BN_ULONG *
bp
,

922 
num
);

925 
BIGNUM
 *
	`g‘_rfc2409_´ime_768
(BIGNUM *
bn
);

926 
BIGNUM
 *
	`g‘_rfc2409_´ime_1024
(BIGNUM *
bn
);

929 
BIGNUM
 *
	`g‘_rfc3526_´ime_1536
(BIGNUM *
bn
);

930 
BIGNUM
 *
	`g‘_rfc3526_´ime_2048
(BIGNUM *
bn
);

931 
BIGNUM
 *
	`g‘_rfc3526_´ime_3072
(BIGNUM *
bn
);

932 
BIGNUM
 *
	`g‘_rfc3526_´ime_4096
(BIGNUM *
bn
);

933 
BIGNUM
 *
	`g‘_rfc3526_´ime_6144
(BIGNUM *
bn
);

934 
BIGNUM
 *
	`g‘_rfc3526_´ime_8192
(BIGNUM *
bn
);

936 
	`BN_bÁe¡_¿nd
(
BIGNUM
 *
ºd
, 
b™s
, 
tİ
, 
bÙtom
);

943 
	`ERR_lßd_BN_¡ršgs
();

948 
	#BN_F_BNRAND
 127

	)

949 
	#BN_F_BN_BLINDING_CONVERT_EX
 100

	)

950 
	#BN_F_BN_BLINDING_CREATE_PARAM
 128

	)

951 
	#BN_F_BN_BLINDING_INVERT_EX
 101

	)

952 
	#BN_F_BN_BLINDING_NEW
 102

	)

953 
	#BN_F_BN_BLINDING_UPDATE
 103

	)

954 
	#BN_F_BN_BN2DEC
 104

	)

955 
	#BN_F_BN_BN2HEX
 105

	)

956 
	#BN_F_BN_CTX_GET
 116

	)

957 
	#BN_F_BN_CTX_NEW
 106

	)

958 
	#BN_F_BN_CTX_START
 129

	)

959 
	#BN_F_BN_DIV
 107

	)

960 
	#BN_F_BN_DIV_NO_BRANCH
 138

	)

961 
	#BN_F_BN_DIV_RECP
 130

	)

962 
	#BN_F_BN_EXP
 123

	)

963 
	#BN_F_BN_EXPAND2
 108

	)

964 
	#BN_F_BN_EXPAND_INTERNAL
 120

	)

965 
	#BN_F_BN_GF2M_MOD
 131

	)

966 
	#BN_F_BN_GF2M_MOD_EXP
 132

	)

967 
	#BN_F_BN_GF2M_MOD_MUL
 133

	)

968 
	#BN_F_BN_GF2M_MOD_SOLVE_QUAD
 134

	)

969 
	#BN_F_BN_GF2M_MOD_SOLVE_QUAD_ARR
 135

	)

970 
	#BN_F_BN_GF2M_MOD_SQR
 136

	)

971 
	#BN_F_BN_GF2M_MOD_SQRT
 137

	)

972 
	#BN_F_BN_LSHIFT
 145

	)

973 
	#BN_F_BN_MOD_EXP2_MONT
 118

	)

974 
	#BN_F_BN_MOD_EXP_MONT
 109

	)

975 
	#BN_F_BN_MOD_EXP_MONT_CONSTTIME
 124

	)

976 
	#BN_F_BN_MOD_EXP_MONT_WORD
 117

	)

977 
	#BN_F_BN_MOD_EXP_RECP
 125

	)

978 
	#BN_F_BN_MOD_EXP_SIMPLE
 126

	)

979 
	#BN_F_BN_MOD_INVERSE
 110

	)

980 
	#BN_F_BN_MOD_INVERSE_NO_BRANCH
 139

	)

981 
	#BN_F_BN_MOD_LSHIFT_QUICK
 119

	)

982 
	#BN_F_BN_MOD_MUL_RECIPROCAL
 111

	)

983 
	#BN_F_BN_MOD_SQRT
 121

	)

984 
	#BN_F_BN_MPI2BN
 112

	)

985 
	#BN_F_BN_NEW
 113

	)

986 
	#BN_F_BN_RAND
 114

	)

987 
	#BN_F_BN_RAND_RANGE
 122

	)

988 
	#BN_F_BN_RSHIFT
 146

	)

989 
	#BN_F_BN_USUB
 115

	)

992 
	#BN_R_ARG2_LT_ARG3
 100

	)

993 
	#BN_R_BAD_RECIPROCAL
 101

	)

994 
	#BN_R_BIGNUM_TOO_LONG
 114

	)

995 
	#BN_R_BITS_TOO_SMALL
 118

	)

996 
	#BN_R_CALLED_WITH_EVEN_MODULUS
 102

	)

997 
	#BN_R_DIV_BY_ZERO
 103

	)

998 
	#BN_R_ENCODING_ERROR
 104

	)

999 
	#BN_R_EXPAND_ON_STATIC_BIGNUM_DATA
 105

	)

1000 
	#BN_R_INPUT_NOT_REDUCED
 110

	)

1001 
	#BN_R_INVALID_LENGTH
 106

	)

1002 
	#BN_R_INVALID_RANGE
 115

	)

1003 
	#BN_R_INVALID_SHIFT
 119

	)

1004 
	#BN_R_NOT_A_SQUARE
 111

	)

1005 
	#BN_R_NOT_INITIALIZED
 107

	)

1006 
	#BN_R_NO_INVERSE
 108

	)

1007 
	#BN_R_NO_SOLUTION
 116

	)

1008 
	#BN_R_P_IS_NOT_PRIME
 112

	)

1009 
	#BN_R_TOO_MANY_ITERATIONS
 113

	)

1010 
	#BN_R_TOO_MANY_TEMPORARY_VARIABLES
 109

	)

1012 #ifdeà 
__ılu¥lus


1013 
	}
}

	@/usr/include/openssl/objects.h

59 #iâdeà
HEADER_OBJECTS_H


60 
	#HEADER_OBJECTS_H


	)

62 
	#USE_OBJ_MAC


	)

64 #ifdeà
USE_OBJ_MAC


65 
	~<İ’s¦/obj_mac.h
>

67 
	#SN_undef
 "UNDEF"

	)

68 
	#LN_undef
 "undefšed"

	)

69 
	#NID_undef
 0

	)

70 
	#OBJ_undef
 0L

	)

72 
	#SN_AlgÜ™hm
 "AlgÜ™hm"

	)

73 
	#LN_®gÜ™hm
 "®gÜ™hm"

	)

74 
	#NID_®gÜ™hm
 38

	)

75 
	#OBJ_®gÜ™hm
 1L,3L,14L,3L,2L

	)

77 
	#LN_r§dsi
 "r§dsi"

	)

78 
	#NID_r§dsi
 1

	)

79 
	#OBJ_r§dsi
 1L,2L,840L,113549L

	)

81 
	#LN_pkcs
 "pkcs"

	)

82 
	#NID_pkcs
 2

	)

83 
	#OBJ_pkcs
 
OBJ_r§dsi
,1L

	)

85 
	#SN_md2
 "MD2"

	)

86 
	#LN_md2
 "md2"

	)

87 
	#NID_md2
 3

	)

88 
	#OBJ_md2
 
OBJ_r§dsi
,2L,2L

	)

90 
	#SN_md5
 "MD5"

	)

91 
	#LN_md5
 "md5"

	)

92 
	#NID_md5
 4

	)

93 
	#OBJ_md5
 
OBJ_r§dsi
,2L,5L

	)

95 
	#SN_rc4
 "RC4"

	)

96 
	#LN_rc4
 "rc4"

	)

97 
	#NID_rc4
 5

	)

98 
	#OBJ_rc4
 
OBJ_r§dsi
,3L,4L

	)

100 
	#LN_r§Enüy±iÚ
 "r§Enüy±iÚ"

	)

101 
	#NID_r§Enüy±iÚ
 6

	)

102 
	#OBJ_r§Enüy±iÚ
 
OBJ_pkcs
,1L,1L

	)

104 
	#SN_md2W™hRSAEnüy±iÚ
 "RSA-MD2"

	)

105 
	#LN_md2W™hRSAEnüy±iÚ
 "md2W™hRSAEnüy±iÚ"

	)

106 
	#NID_md2W™hRSAEnüy±iÚ
 7

	)

107 
	#OBJ_md2W™hRSAEnüy±iÚ
 
OBJ_pkcs
,1L,2L

	)

109 
	#SN_md5W™hRSAEnüy±iÚ
 "RSA-MD5"

	)

110 
	#LN_md5W™hRSAEnüy±iÚ
 "md5W™hRSAEnüy±iÚ"

	)

111 
	#NID_md5W™hRSAEnüy±iÚ
 8

	)

112 
	#OBJ_md5W™hRSAEnüy±iÚ
 
OBJ_pkcs
,1L,4L

	)

114 
	#SN_pbeW™hMD2AndDES_CBC
 "PBE-MD2-DES"

	)

115 
	#LN_pbeW™hMD2AndDES_CBC
 "pbeW™hMD2AndDES-CBC"

	)

116 
	#NID_pbeW™hMD2AndDES_CBC
 9

	)

117 
	#OBJ_pbeW™hMD2AndDES_CBC
 
OBJ_pkcs
,5L,1L

	)

119 
	#SN_pbeW™hMD5AndDES_CBC
 "PBE-MD5-DES"

	)

120 
	#LN_pbeW™hMD5AndDES_CBC
 "pbeW™hMD5AndDES-CBC"

	)

121 
	#NID_pbeW™hMD5AndDES_CBC
 10

	)

122 
	#OBJ_pbeW™hMD5AndDES_CBC
 
OBJ_pkcs
,5L,3L

	)

124 
	#LN_X500
 "X500"

	)

125 
	#NID_X500
 11

	)

126 
	#OBJ_X500
 2L,5L

	)

128 
	#LN_X509
 "X509"

	)

129 
	#NID_X509
 12

	)

130 
	#OBJ_X509
 
OBJ_X500
,4L

	)

132 
	#SN_commÚName
 "CN"

	)

133 
	#LN_commÚName
 "commÚName"

	)

134 
	#NID_commÚName
 13

	)

135 
	#OBJ_commÚName
 
OBJ_X509
,3L

	)

137 
	#SN_couÁryName
 "C"

	)

138 
	#LN_couÁryName
 "couÁryName"

	)

139 
	#NID_couÁryName
 14

	)

140 
	#OBJ_couÁryName
 
OBJ_X509
,6L

	)

142 
	#SN_loÿl™yName
 "L"

	)

143 
	#LN_loÿl™yName
 "loÿl™yName"

	)

144 
	#NID_loÿl™yName
 15

	)

145 
	#OBJ_loÿl™yName
 
OBJ_X509
,7L

	)

150 
	#SN_¡©eOrProvšûName
 "ST"

	)

151 
	#LN_¡©eOrProvšûName
 "¡©eOrProvšûName"

	)

152 
	#NID_¡©eOrProvšûName
 16

	)

153 
	#OBJ_¡©eOrProvšûName
 
OBJ_X509
,8L

	)

155 
	#SN_Ügªiz©iÚName
 "O"

	)

156 
	#LN_Ügªiz©iÚName
 "Ügªiz©iÚName"

	)

157 
	#NID_Ügªiz©iÚName
 17

	)

158 
	#OBJ_Ügªiz©iÚName
 
OBJ_X509
,10L

	)

160 
	#SN_Ügªiz©iÚ®Un™Name
 "OU"

	)

161 
	#LN_Ügªiz©iÚ®Un™Name
 "Ügªiz©iÚ®Un™Name"

	)

162 
	#NID_Ügªiz©iÚ®Un™Name
 18

	)

163 
	#OBJ_Ügªiz©iÚ®Un™Name
 
OBJ_X509
,11L

	)

165 
	#SN_r§
 "RSA"

	)

166 
	#LN_r§
 "r§"

	)

167 
	#NID_r§
 19

	)

168 
	#OBJ_r§
 
OBJ_X500
,8L,1L,1L

	)

170 
	#LN_pkcs7
 "pkcs7"

	)

171 
	#NID_pkcs7
 20

	)

172 
	#OBJ_pkcs7
 
OBJ_pkcs
,7L

	)

174 
	#LN_pkcs7_d©a
 "pkcs7-d©a"

	)

175 
	#NID_pkcs7_d©a
 21

	)

176 
	#OBJ_pkcs7_d©a
 
OBJ_pkcs7
,1L

	)

178 
	#LN_pkcs7_sigÃd
 "pkcs7-sigÃdD©a"

	)

179 
	#NID_pkcs7_sigÃd
 22

	)

180 
	#OBJ_pkcs7_sigÃd
 
OBJ_pkcs7
,2L

	)

182 
	#LN_pkcs7_’v–İed
 "pkcs7-’v–İedD©a"

	)

183 
	#NID_pkcs7_’v–İed
 23

	)

184 
	#OBJ_pkcs7_’v–İed
 
OBJ_pkcs7
,3L

	)

186 
	#LN_pkcs7_sigÃdAndEnv–İed
 "pkcs7-sigÃdAndEnv–İedD©a"

	)

187 
	#NID_pkcs7_sigÃdAndEnv–İed
 24

	)

188 
	#OBJ_pkcs7_sigÃdAndEnv–İed
 
OBJ_pkcs7
,4L

	)

190 
	#LN_pkcs7_dige¡
 "pkcs7-dige¡D©a"

	)

191 
	#NID_pkcs7_dige¡
 25

	)

192 
	#OBJ_pkcs7_dige¡
 
OBJ_pkcs7
,5L

	)

194 
	#LN_pkcs7_’üy±ed
 "pkcs7-’üy±edD©a"

	)

195 
	#NID_pkcs7_’üy±ed
 26

	)

196 
	#OBJ_pkcs7_’üy±ed
 
OBJ_pkcs7
,6L

	)

198 
	#LN_pkcs3
 "pkcs3"

	)

199 
	#NID_pkcs3
 27

	)

200 
	#OBJ_pkcs3
 
OBJ_pkcs
,3L

	)

202 
	#LN_dhKeyAg»em’t
 "dhKeyAg»em’t"

	)

203 
	#NID_dhKeyAg»em’t
 28

	)

204 
	#OBJ_dhKeyAg»em’t
 
OBJ_pkcs3
,1L

	)

206 
	#SN_des_ecb
 "DES-ECB"

	)

207 
	#LN_des_ecb
 "des-ecb"

	)

208 
	#NID_des_ecb
 29

	)

209 
	#OBJ_des_ecb
 
OBJ_®gÜ™hm
,6L

	)

211 
	#SN_des_cfb64
 "DES-CFB"

	)

212 
	#LN_des_cfb64
 "des-cfb"

	)

213 
	#NID_des_cfb64
 30

	)

215 
	#OBJ_des_cfb64
 
OBJ_®gÜ™hm
,9L

	)

217 
	#SN_des_cbc
 "DES-CBC"

	)

218 
	#LN_des_cbc
 "des-cbc"

	)

219 
	#NID_des_cbc
 31

	)

221 
	#OBJ_des_cbc
 
OBJ_®gÜ™hm
,7L

	)

223 
	#SN_des_ede
 "DES-EDE"

	)

224 
	#LN_des_ede
 "des-ede"

	)

225 
	#NID_des_ede
 32

	)

227 
	#OBJ_des_ede
 
OBJ_®gÜ™hm
,17L

	)

229 
	#SN_des_ede3
 "DES-EDE3"

	)

230 
	#LN_des_ede3
 "des-ede3"

	)

231 
	#NID_des_ede3
 33

	)

233 
	#SN_id—_cbc
 "IDEA-CBC"

	)

234 
	#LN_id—_cbc
 "id—-cbc"

	)

235 
	#NID_id—_cbc
 34

	)

236 
	#OBJ_id—_cbc
 1L,3L,6L,1L,4L,1L,188L,7L,1L,1L,2L

	)

238 
	#SN_id—_cfb64
 "IDEA-CFB"

	)

239 
	#LN_id—_cfb64
 "id—-cfb"

	)

240 
	#NID_id—_cfb64
 35

	)

242 
	#SN_id—_ecb
 "IDEA-ECB"

	)

243 
	#LN_id—_ecb
 "id—-ecb"

	)

244 
	#NID_id—_ecb
 36

	)

246 
	#SN_rc2_cbc
 "RC2-CBC"

	)

247 
	#LN_rc2_cbc
 "rc2-cbc"

	)

248 
	#NID_rc2_cbc
 37

	)

249 
	#OBJ_rc2_cbc
 
OBJ_r§dsi
,3L,2L

	)

251 
	#SN_rc2_ecb
 "RC2-ECB"

	)

252 
	#LN_rc2_ecb
 "rc2-ecb"

	)

253 
	#NID_rc2_ecb
 38

	)

255 
	#SN_rc2_cfb64
 "RC2-CFB"

	)

256 
	#LN_rc2_cfb64
 "rc2-cfb"

	)

257 
	#NID_rc2_cfb64
 39

	)

259 
	#SN_rc2_ofb64
 "RC2-OFB"

	)

260 
	#LN_rc2_ofb64
 "rc2-ofb"

	)

261 
	#NID_rc2_ofb64
 40

	)

263 
	#SN_sha
 "SHA"

	)

264 
	#LN_sha
 "sha"

	)

265 
	#NID_sha
 41

	)

266 
	#OBJ_sha
 
OBJ_®gÜ™hm
,18L

	)

268 
	#SN_shaW™hRSAEnüy±iÚ
 "RSA-SHA"

	)

269 
	#LN_shaW™hRSAEnüy±iÚ
 "shaW™hRSAEnüy±iÚ"

	)

270 
	#NID_shaW™hRSAEnüy±iÚ
 42

	)

271 
	#OBJ_shaW™hRSAEnüy±iÚ
 
OBJ_®gÜ™hm
,15L

	)

273 
	#SN_des_ede_cbc
 "DES-EDE-CBC"

	)

274 
	#LN_des_ede_cbc
 "des-ede-cbc"

	)

275 
	#NID_des_ede_cbc
 43

	)

277 
	#SN_des_ede3_cbc
 "DES-EDE3-CBC"

	)

278 
	#LN_des_ede3_cbc
 "des-ede3-cbc"

	)

279 
	#NID_des_ede3_cbc
 44

	)

280 
	#OBJ_des_ede3_cbc
 
OBJ_r§dsi
,3L,7L

	)

282 
	#SN_des_ofb64
 "DES-OFB"

	)

283 
	#LN_des_ofb64
 "des-ofb"

	)

284 
	#NID_des_ofb64
 45

	)

285 
	#OBJ_des_ofb64
 
OBJ_®gÜ™hm
,8L

	)

287 
	#SN_id—_ofb64
 "IDEA-OFB"

	)

288 
	#LN_id—_ofb64
 "id—-ofb"

	)

289 
	#NID_id—_ofb64
 46

	)

291 
	#LN_pkcs9
 "pkcs9"

	)

292 
	#NID_pkcs9
 47

	)

293 
	#OBJ_pkcs9
 
OBJ_pkcs
,9L

	)

295 
	#SN_pkcs9_emaAdd»ss
 "Ema"

	)

296 
	#LN_pkcs9_emaAdd»ss
 "emaAdd»ss"

	)

297 
	#NID_pkcs9_emaAdd»ss
 48

	)

298 
	#OBJ_pkcs9_emaAdd»ss
 
OBJ_pkcs9
,1L

	)

300 
	#LN_pkcs9_un¡ruùu»dName
 "un¡ruùu»dName"

	)

301 
	#NID_pkcs9_un¡ruùu»dName
 49

	)

302 
	#OBJ_pkcs9_un¡ruùu»dName
 
OBJ_pkcs9
,2L

	)

304 
	#LN_pkcs9_cÚ‹ÁTy³
 "cÚ‹ÁTy³"

	)

305 
	#NID_pkcs9_cÚ‹ÁTy³
 50

	)

306 
	#OBJ_pkcs9_cÚ‹ÁTy³
 
OBJ_pkcs9
,3L

	)

308 
	#LN_pkcs9_mes§geDige¡
 "mes§geDige¡"

	)

309 
	#NID_pkcs9_mes§geDige¡
 51

	)

310 
	#OBJ_pkcs9_mes§geDige¡
 
OBJ_pkcs9
,4L

	)

312 
	#LN_pkcs9_signšgTime
 "signšgTime"

	)

313 
	#NID_pkcs9_signšgTime
 52

	)

314 
	#OBJ_pkcs9_signšgTime
 
OBJ_pkcs9
,5L

	)

316 
	#LN_pkcs9_couÁ”sigÇtu»
 "couÁ”sigÇtu»"

	)

317 
	#NID_pkcs9_couÁ”sigÇtu»
 53

	)

318 
	#OBJ_pkcs9_couÁ”sigÇtu»
 
OBJ_pkcs9
,6L

	)

320 
	#LN_pkcs9_ch®ËngePasswÜd
 "ch®ËngePasswÜd"

	)

321 
	#NID_pkcs9_ch®ËngePasswÜd
 54

	)

322 
	#OBJ_pkcs9_ch®ËngePasswÜd
 
OBJ_pkcs9
,7L

	)

324 
	#LN_pkcs9_un¡ruùu»dAdd»ss
 "un¡ruùu»dAdd»ss"

	)

325 
	#NID_pkcs9_un¡ruùu»dAdd»ss
 55

	)

326 
	#OBJ_pkcs9_un¡ruùu»dAdd»ss
 
OBJ_pkcs9
,8L

	)

328 
	#LN_pkcs9_extC”tA‰ribu‹s
 "ex‹ndedC”tifiÿ‹A‰ribu‹s"

	)

329 
	#NID_pkcs9_extC”tA‰ribu‹s
 56

	)

330 
	#OBJ_pkcs9_extC”tA‰ribu‹s
 
OBJ_pkcs9
,9L

	)

332 
	#SN_Ãtsÿ³
 "N‘sÿ³"

	)

333 
	#LN_Ãtsÿ³
 "N‘sÿ³ CommuniÿtiÚ CÜp."

	)

334 
	#NID_Ãtsÿ³
 57

	)

335 
	#OBJ_Ãtsÿ³
 2L,16L,840L,1L,113730L

	)

337 
	#SN_Ãtsÿ³_û¹_ex‹nsiÚ
 "nsC”tExt"

	)

338 
	#LN_Ãtsÿ³_û¹_ex‹nsiÚ
 "N‘sÿ³ C”tifiÿ‹ Ex‹nsiÚ"

	)

339 
	#NID_Ãtsÿ³_û¹_ex‹nsiÚ
 58

	)

340 
	#OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
 
OBJ_Ãtsÿ³
,1L

	)

342 
	#SN_Ãtsÿ³_d©a_ty³
 "nsD©aTy³"

	)

343 
	#LN_Ãtsÿ³_d©a_ty³
 "N‘sÿ³ D©¨Ty³"

	)

344 
	#NID_Ãtsÿ³_d©a_ty³
 59

	)

345 
	#OBJ_Ãtsÿ³_d©a_ty³
 
OBJ_Ãtsÿ³
,2L

	)

347 
	#SN_des_ede_cfb64
 "DES-EDE-CFB"

	)

348 
	#LN_des_ede_cfb64
 "des-ede-cfb"

	)

349 
	#NID_des_ede_cfb64
 60

	)

351 
	#SN_des_ede3_cfb64
 "DES-EDE3-CFB"

	)

352 
	#LN_des_ede3_cfb64
 "des-ede3-cfb"

	)

353 
	#NID_des_ede3_cfb64
 61

	)

355 
	#SN_des_ede_ofb64
 "DES-EDE-OFB"

	)

356 
	#LN_des_ede_ofb64
 "des-ede-ofb"

	)

357 
	#NID_des_ede_ofb64
 62

	)

359 
	#SN_des_ede3_ofb64
 "DES-EDE3-OFB"

	)

360 
	#LN_des_ede3_ofb64
 "des-ede3-ofb"

	)

361 
	#NID_des_ede3_ofb64
 63

	)

364 
	#SN_sha1
 "SHA1"

	)

365 
	#LN_sha1
 "sha1"

	)

366 
	#NID_sha1
 64

	)

367 
	#OBJ_sha1
 
OBJ_®gÜ™hm
,26L

	)

371 
	#SN_sha1W™hRSAEnüy±iÚ
 "RSA-SHA1"

	)

372 
	#LN_sha1W™hRSAEnüy±iÚ
 "sha1W™hRSAEnüy±iÚ"

	)

373 
	#NID_sha1W™hRSAEnüy±iÚ
 65

	)

374 
	#OBJ_sha1W™hRSAEnüy±iÚ
 
OBJ_pkcs
,1L,5L

	)

376 
	#SN_d§W™hSHA
 "DSA-SHA"

	)

377 
	#LN_d§W™hSHA
 "d§W™hSHA"

	)

378 
	#NID_d§W™hSHA
 66

	)

379 
	#OBJ_d§W™hSHA
 
OBJ_®gÜ™hm
,13L

	)

381 
	#SN_d§_2
 "DSA-Şd"

	)

382 
	#LN_d§_2
 "d§Enüy±iÚ-Şd"

	)

383 
	#NID_d§_2
 67

	)

384 
	#OBJ_d§_2
 
OBJ_®gÜ™hm
,12L

	)

387 
	#SN_pbeW™hSHA1AndRC2_CBC
 "PBE-SHA1-RC2-64"

	)

388 
	#LN_pbeW™hSHA1AndRC2_CBC
 "pbeW™hSHA1AndRC2-CBC"

	)

389 
	#NID_pbeW™hSHA1AndRC2_CBC
 68

	)

390 
	#OBJ_pbeW™hSHA1AndRC2_CBC
 
OBJ_pkcs
,5L,11L

	)

397 
	#LN_id_pbkdf2
 "PBKDF2"

	)

398 
	#NID_id_pbkdf2
 69

	)

399 
	#OBJ_id_pbkdf2
 
OBJ_pkcs
,5L,12L

	)

401 
	#SN_d§W™hSHA1_2
 "DSA-SHA1-Şd"

	)

402 
	#LN_d§W™hSHA1_2
 "d§W™hSHA1-Şd"

	)

403 
	#NID_d§W™hSHA1_2
 70

	)

405 
	#OBJ_d§W™hSHA1_2
 
OBJ_®gÜ™hm
,27L

	)

407 
	#SN_Ãtsÿ³_û¹_ty³
 "nsC”tTy³"

	)

408 
	#LN_Ãtsÿ³_û¹_ty³
 "N‘sÿ³ C”ˆTy³"

	)

409 
	#NID_Ãtsÿ³_û¹_ty³
 71

	)

410 
	#OBJ_Ãtsÿ³_û¹_ty³
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,1L

	)

412 
	#SN_Ãtsÿ³_ba£_u¾
 "nsBa£U¾"

	)

413 
	#LN_Ãtsÿ³_ba£_u¾
 "N‘sÿ³ Ba£ U¾"

	)

414 
	#NID_Ãtsÿ³_ba£_u¾
 72

	)

415 
	#OBJ_Ãtsÿ³_ba£_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,2L

	)

417 
	#SN_Ãtsÿ³_»voÿtiÚ_u¾
 "nsRevoÿtiÚU¾"

	)

418 
	#LN_Ãtsÿ³_»voÿtiÚ_u¾
 "N‘sÿ³ RevoÿtiÚ U¾"

	)

419 
	#NID_Ãtsÿ³_»voÿtiÚ_u¾
 73

	)

420 
	#OBJ_Ãtsÿ³_»voÿtiÚ_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,3L

	)

422 
	#SN_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 "nsCaRevoÿtiÚU¾"

	)

423 
	#LN_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 "N‘sÿ³ CA RevoÿtiÚ U¾"

	)

424 
	#NID_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 74

	)

425 
	#OBJ_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,4L

	)

427 
	#SN_Ãtsÿ³_»Ãw®_u¾
 "nsR’ew®U¾"

	)

428 
	#LN_Ãtsÿ³_»Ãw®_u¾
 "N‘sÿ³ R’ew® U¾"

	)

429 
	#NID_Ãtsÿ³_»Ãw®_u¾
 75

	)

430 
	#OBJ_Ãtsÿ³_»Ãw®_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,7L

	)

432 
	#SN_Ãtsÿ³_ÿ_pŞicy_u¾
 "nsCaPŞicyU¾"

	)

433 
	#LN_Ãtsÿ³_ÿ_pŞicy_u¾
 "N‘sÿ³ CA PŞicy U¾"

	)

434 
	#NID_Ãtsÿ³_ÿ_pŞicy_u¾
 76

	)

435 
	#OBJ_Ãtsÿ³_ÿ_pŞicy_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,8L

	)

437 
	#SN_Ãtsÿ³_s¦_£rv”_Çme
 "nsS¦S”v”Name"

	)

438 
	#LN_Ãtsÿ³_s¦_£rv”_Çme
 "N‘sÿ³ SSL S”v” Name"

	)

439 
	#NID_Ãtsÿ³_s¦_£rv”_Çme
 77

	)

440 
	#OBJ_Ãtsÿ³_s¦_£rv”_Çme
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,12L

	)

442 
	#SN_Ãtsÿ³_comm’t
 "nsComm’t"

	)

443 
	#LN_Ãtsÿ³_comm’t
 "N‘sÿ³ Comm’t"

	)

444 
	#NID_Ãtsÿ³_comm’t
 78

	)

445 
	#OBJ_Ãtsÿ³_comm’t
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,13L

	)

447 
	#SN_Ãtsÿ³_û¹_£qu’û
 "nsC”tSequ’û"

	)

448 
	#LN_Ãtsÿ³_û¹_£qu’û
 "N‘sÿ³ C”tifiÿ‹ Sequ’û"

	)

449 
	#NID_Ãtsÿ³_û¹_£qu’û
 79

	)

450 
	#OBJ_Ãtsÿ³_û¹_£qu’û
 
OBJ_Ãtsÿ³_d©a_ty³
,5L

	)

452 
	#SN_desx_cbc
 "DESX-CBC"

	)

453 
	#LN_desx_cbc
 "desx-cbc"

	)

454 
	#NID_desx_cbc
 80

	)

456 
	#SN_id_û
 "id-û"

	)

457 
	#NID_id_û
 81

	)

458 
	#OBJ_id_û
 2L,5L,29L

	)

460 
	#SN_subjeù_key_id’tif›r
 "subjeùKeyId’tif›r"

	)

461 
	#LN_subjeù_key_id’tif›r
 "X509v3 Subjeù Key Id’tif›r"

	)

462 
	#NID_subjeù_key_id’tif›r
 82

	)

463 
	#OBJ_subjeù_key_id’tif›r
 
OBJ_id_û
,14L

	)

465 
	#SN_key_u§ge
 "keyU§ge"

	)

466 
	#LN_key_u§ge
 "X509v3 Key U§ge"

	)

467 
	#NID_key_u§ge
 83

	)

468 
	#OBJ_key_u§ge
 
OBJ_id_û
,15L

	)

470 
	#SN_´iv©e_key_u§ge_³riod
 "´iv©eKeyU§geP”iod"

	)

471 
	#LN_´iv©e_key_u§ge_³riod
 "X509v3 Priv©Key U§gP”iod"

	)

472 
	#NID_´iv©e_key_u§ge_³riod
 84

	)

473 
	#OBJ_´iv©e_key_u§ge_³riod
 
OBJ_id_û
,16L

	)

475 
	#SN_subjeù_®t_Çme
 "subjeùAÉName"

	)

476 
	#LN_subjeù_®t_Çme
 "X509v3 Subjeù AÉ”ÇtivName"

	)

477 
	#NID_subjeù_®t_Çme
 85

	)

478 
	#OBJ_subjeù_®t_Çme
 
OBJ_id_û
,17L

	)

480 
	#SN_issu”_®t_Çme
 "issu”AÉName"

	)

481 
	#LN_issu”_®t_Çme
 "X509v3 Issu” AÉ”ÇtivName"

	)

482 
	#NID_issu”_®t_Çme
 86

	)

483 
	#OBJ_issu”_®t_Çme
 
OBJ_id_û
,18L

	)

485 
	#SN_basic_cÚ¡¿šts
 "basicCÚ¡¿šts"

	)

486 
	#LN_basic_cÚ¡¿šts
 "X509v3 BasiøCÚ¡¿šts"

	)

487 
	#NID_basic_cÚ¡¿šts
 87

	)

488 
	#OBJ_basic_cÚ¡¿šts
 
OBJ_id_û
,19L

	)

490 
	#SN_ül_numb”
 "ülNumb”"

	)

491 
	#LN_ül_numb”
 "X509v3 CRL Numb”"

	)

492 
	#NID_ül_numb”
 88

	)

493 
	#OBJ_ül_numb”
 
OBJ_id_û
,20L

	)

495 
	#SN_û¹ifiÿ‹_pŞic›s
 "û¹ifiÿ‹PŞic›s"

	)

496 
	#LN_û¹ifiÿ‹_pŞic›s
 "X509v3 C”tifiÿ‹ PŞic›s"

	)

497 
	#NID_û¹ifiÿ‹_pŞic›s
 89

	)

498 
	#OBJ_û¹ifiÿ‹_pŞic›s
 
OBJ_id_û
,32L

	)

500 
	#SN_authÜ™y_key_id’tif›r
 "authÜ™yKeyId’tif›r"

	)

501 
	#LN_authÜ™y_key_id’tif›r
 "X509v3 AuthÜ™y Key Id’tif›r"

	)

502 
	#NID_authÜ™y_key_id’tif›r
 90

	)

503 
	#OBJ_authÜ™y_key_id’tif›r
 
OBJ_id_û
,35L

	)

505 
	#SN_bf_cbc
 "BF-CBC"

	)

506 
	#LN_bf_cbc
 "bf-cbc"

	)

507 
	#NID_bf_cbc
 91

	)

508 
	#OBJ_bf_cbc
 1L,3L,6L,1L,4L,1L,3029L,1L,2L

	)

510 
	#SN_bf_ecb
 "BF-ECB"

	)

511 
	#LN_bf_ecb
 "bf-ecb"

	)

512 
	#NID_bf_ecb
 92

	)

514 
	#SN_bf_cfb64
 "BF-CFB"

	)

515 
	#LN_bf_cfb64
 "bf-cfb"

	)

516 
	#NID_bf_cfb64
 93

	)

518 
	#SN_bf_ofb64
 "BF-OFB"

	)

519 
	#LN_bf_ofb64
 "bf-ofb"

	)

520 
	#NID_bf_ofb64
 94

	)

522 
	#SN_mdc2
 "MDC2"

	)

523 
	#LN_mdc2
 "mdc2"

	)

524 
	#NID_mdc2
 95

	)

525 
	#OBJ_mdc2
 2L,5L,8L,3L,101L

	)

528 
	#SN_mdc2W™hRSA
 "RSA-MDC2"

	)

529 
	#LN_mdc2W™hRSA
 "mdc2w™hRSA"

	)

530 
	#NID_mdc2W™hRSA
 96

	)

531 
	#OBJ_mdc2W™hRSA
 2L,5L,8L,3L,100L

	)

533 
	#SN_rc4_40
 "RC4-40"

	)

534 
	#LN_rc4_40
 "rc4-40"

	)

535 
	#NID_rc4_40
 97

	)

537 
	#SN_rc2_40_cbc
 "RC2-40-CBC"

	)

538 
	#LN_rc2_40_cbc
 "rc2-40-cbc"

	)

539 
	#NID_rc2_40_cbc
 98

	)

541 
	#SN_giv’Name
 "G"

	)

542 
	#LN_giv’Name
 "giv’Name"

	)

543 
	#NID_giv’Name
 99

	)

544 
	#OBJ_giv’Name
 
OBJ_X509
,42L

	)

546 
	#SN_suºame
 "S"

	)

547 
	#LN_suºame
 "suºame"

	)

548 
	#NID_suºame
 100

	)

549 
	#OBJ_suºame
 
OBJ_X509
,4L

	)

551 
	#SN_š™Ÿls
 "I"

	)

552 
	#LN_š™Ÿls
 "š™Ÿls"

	)

553 
	#NID_š™Ÿls
 101

	)

554 
	#OBJ_š™Ÿls
 
OBJ_X509
,43L

	)

556 
	#SN_uniqueId’tif›r
 "UID"

	)

557 
	#LN_uniqueId’tif›r
 "uniqueId’tif›r"

	)

558 
	#NID_uniqueId’tif›r
 102

	)

559 
	#OBJ_uniqueId’tif›r
 
OBJ_X509
,45L

	)

561 
	#SN_ül_di¡ributiÚ_pošts
 "ülDi¡ributiÚPošts"

	)

562 
	#LN_ül_di¡ributiÚ_pošts
 "X509v3 CRL Di¡ributiÚ Pošts"

	)

563 
	#NID_ül_di¡ributiÚ_pošts
 103

	)

564 
	#OBJ_ül_di¡ributiÚ_pošts
 
OBJ_id_û
,31L

	)

566 
	#SN_md5W™hRSA
 "RSA-NP-MD5"

	)

567 
	#LN_md5W™hRSA
 "md5W™hRSA"

	)

568 
	#NID_md5W™hRSA
 104

	)

569 
	#OBJ_md5W™hRSA
 
OBJ_®gÜ™hm
,3L

	)

571 
	#SN_£rŸlNumb”
 "SN"

	)

572 
	#LN_£rŸlNumb”
 "£rŸlNumb”"

	)

573 
	#NID_£rŸlNumb”
 105

	)

574 
	#OBJ_£rŸlNumb”
 
OBJ_X509
,5L

	)

576 
	#SN_t™Ë
 "T"

	)

577 
	#LN_t™Ë
 "t™Ë"

	)

578 
	#NID_t™Ë
 106

	)

579 
	#OBJ_t™Ë
 
OBJ_X509
,12L

	)

581 
	#SN_desütiÚ
 "D"

	)

582 
	#LN_desütiÚ
 "desütiÚ"

	)

583 
	#NID_desütiÚ
 107

	)

584 
	#OBJ_desütiÚ
 
OBJ_X509
,13L

	)

587 
	#SN_ÿ¡5_cbc
 "CAST5-CBC"

	)

588 
	#LN_ÿ¡5_cbc
 "ÿ¡5-cbc"

	)

589 
	#NID_ÿ¡5_cbc
 108

	)

590 
	#OBJ_ÿ¡5_cbc
 1L,2L,840L,113533L,7L,66L,10L

	)

592 
	#SN_ÿ¡5_ecb
 "CAST5-ECB"

	)

593 
	#LN_ÿ¡5_ecb
 "ÿ¡5-ecb"

	)

594 
	#NID_ÿ¡5_ecb
 109

	)

596 
	#SN_ÿ¡5_cfb64
 "CAST5-CFB"

	)

597 
	#LN_ÿ¡5_cfb64
 "ÿ¡5-cfb"

	)

598 
	#NID_ÿ¡5_cfb64
 110

	)

600 
	#SN_ÿ¡5_ofb64
 "CAST5-OFB"

	)

601 
	#LN_ÿ¡5_ofb64
 "ÿ¡5-ofb"

	)

602 
	#NID_ÿ¡5_ofb64
 111

	)

604 
	#LN_pbeW™hMD5AndCa¡5_CBC
 "pbeW™hMD5AndCa¡5CBC"

	)

605 
	#NID_pbeW™hMD5AndCa¡5_CBC
 112

	)

606 
	#OBJ_pbeW™hMD5AndCa¡5_CBC
 1L,2L,840L,113533L,7L,66L,12L

	)

613 
	#SN_d§W™hSHA1
 "DSA-SHA1"

	)

614 
	#LN_d§W™hSHA1
 "d§W™hSHA1"

	)

615 
	#NID_d§W™hSHA1
 113

	)

616 
	#OBJ_d§W™hSHA1
 1L,2L,840L,10040L,4L,3L

	)

618 
	#NID_md5_sha1
 114

	)

619 
	#SN_md5_sha1
 "MD5-SHA1"

	)

620 
	#LN_md5_sha1
 "md5-sha1"

	)

622 
	#SN_sha1W™hRSA
 "RSA-SHA1-2"

	)

623 
	#LN_sha1W™hRSA
 "sha1W™hRSA"

	)

624 
	#NID_sha1W™hRSA
 115

	)

625 
	#OBJ_sha1W™hRSA
 
OBJ_®gÜ™hm
,29L

	)

627 
	#SN_d§
 "DSA"

	)

628 
	#LN_d§
 "d§Enüy±iÚ"

	)

629 
	#NID_d§
 116

	)

630 
	#OBJ_d§
 1L,2L,840L,10040L,4L,1L

	)

632 
	#SN_remd160
 "RIPEMD160"

	)

633 
	#LN_remd160
 "remd160"

	)

634 
	#NID_remd160
 117

	)

635 
	#OBJ_remd160
 1L,3L,36L,3L,2L,1L

	)

641 
	#SN_remd160W™hRSA
 "RSA-RIPEMD160"

	)

642 
	#LN_remd160W™hRSA
 "remd160W™hRSA"

	)

643 
	#NID_remd160W™hRSA
 119

	)

644 
	#OBJ_remd160W™hRSA
 1L,3L,36L,3L,3L,1L,2L

	)

655 
	#SN_rc5_cbc
 "RC5-CBC"

	)

656 
	#LN_rc5_cbc
 "rc5-cbc"

	)

657 
	#NID_rc5_cbc
 120

	)

658 
	#OBJ_rc5_cbc
 
OBJ_r§dsi
,3L,8L

	)

660 
	#SN_rc5_ecb
 "RC5-ECB"

	)

661 
	#LN_rc5_ecb
 "rc5-ecb"

	)

662 
	#NID_rc5_ecb
 121

	)

664 
	#SN_rc5_cfb64
 "RC5-CFB"

	)

665 
	#LN_rc5_cfb64
 "rc5-cfb"

	)

666 
	#NID_rc5_cfb64
 122

	)

668 
	#SN_rc5_ofb64
 "RC5-OFB"

	)

669 
	#LN_rc5_ofb64
 "rc5-ofb"

	)

670 
	#NID_rc5_ofb64
 123

	)

672 
	#SN_¾e_com´essiÚ
 "RLE"

	)

673 
	#LN_¾e_com´essiÚ
 "ruÀËngth com´essiÚ"

	)

674 
	#NID_¾e_com´essiÚ
 124

	)

675 
	#OBJ_¾e_com´essiÚ
 1L,1L,1L,1L,666L,1L

	)

677 
	#SN_zlib_com´essiÚ
 "ZLIB"

	)

678 
	#LN_zlib_com´essiÚ
 "zlib com´essiÚ"

	)

679 
	#NID_zlib_com´essiÚ
 125

	)

680 
	#OBJ_zlib_com´essiÚ
 1L,1L,1L,1L,666L,2L

	)

682 
	#SN_ext_key_u§ge
 "ex‹ndedKeyU§ge"

	)

683 
	#LN_ext_key_u§ge
 "X509v3 Ex‹nded Key U§ge"

	)

684 
	#NID_ext_key_u§ge
 126

	)

685 
	#OBJ_ext_key_u§ge
 
OBJ_id_û
,37

	)

687 
	#SN_id_pkix
 "PKIX"

	)

688 
	#NID_id_pkix
 127

	)

689 
	#OBJ_id_pkix
 1L,3L,6L,1L,5L,5L,7L

	)

691 
	#SN_id_kp
 "id-kp"

	)

692 
	#NID_id_kp
 128

	)

693 
	#OBJ_id_kp
 
OBJ_id_pkix
,3L

	)

697 
	#SN_£rv”_auth
 "£rv”Auth"

	)

698 
	#LN_£rv”_auth
 "TLS Web S”v” Auth’tiÿtiÚ"

	)

699 
	#NID_£rv”_auth
 129

	)

700 
	#OBJ_£rv”_auth
 
OBJ_id_kp
,1L

	)

702 
	#SN_ş›Á_auth
 "ş›ÁAuth"

	)

703 
	#LN_ş›Á_auth
 "TLS Web Cl›Á Auth’tiÿtiÚ"

	)

704 
	#NID_ş›Á_auth
 130

	)

705 
	#OBJ_ş›Á_auth
 
OBJ_id_kp
,2L

	)

707 
	#SN_code_sign
 "codeSignšg"

	)

708 
	#LN_code_sign
 "CodSignšg"

	)

709 
	#NID_code_sign
 131

	)

710 
	#OBJ_code_sign
 
OBJ_id_kp
,3L

	)

712 
	#SN_ema_´Ùeù
 "emaPrÙeùiÚ"

	)

713 
	#LN_ema_´Ùeù
 "E-ma PrÙeùiÚ"

	)

714 
	#NID_ema_´Ùeù
 132

	)

715 
	#OBJ_ema_´Ùeù
 
OBJ_id_kp
,4L

	)

717 
	#SN_time_¡amp
 "timeSmpšg"

	)

718 
	#LN_time_¡amp
 "TimSmpšg"

	)

719 
	#NID_time_¡amp
 133

	)

720 
	#OBJ_time_¡amp
 
OBJ_id_kp
,8L

	)

724 
	#SN_ms_code_šd
 "msCodeInd"

	)

725 
	#LN_ms_code_šd
 "Miüosoá Individu® CodSignšg"

	)

726 
	#NID_ms_code_šd
 134

	)

727 
	#OBJ_ms_code_šd
 1L,3L,6L,1L,4L,1L,311L,2L,1L,21L

	)

729 
	#SN_ms_code_com
 "msCodeCom"

	)

730 
	#LN_ms_code_com
 "Miüosoá Comm”cŸÈCodSignšg"

	)

731 
	#NID_ms_code_com
 135

	)

732 
	#OBJ_ms_code_com
 1L,3L,6L,1L,4L,1L,311L,2L,1L,22L

	)

734 
	#SN_ms_ùl_sign
 "msCTLSign"

	)

735 
	#LN_ms_ùl_sign
 "Miüosoá Tru¡ Li¡ Signšg"

	)

736 
	#NID_ms_ùl_sign
 136

	)

737 
	#OBJ_ms_ùl_sign
 1L,3L,6L,1L,4L,1L,311L,10L,3L,1L

	)

739 
	#SN_ms_sgc
 "msSGC"

	)

740 
	#LN_ms_sgc
 "Miüosoá S”v” G©ed Cry±o"

	)

741 
	#NID_ms_sgc
 137

	)

742 
	#OBJ_ms_sgc
 1L,3L,6L,1L,4L,1L,311L,10L,3L,3L

	)

744 
	#SN_ms_efs
 "msEFS"

	)

745 
	#LN_ms_efs
 "Miüosoá Enüy±ed FSy¡em"

	)

746 
	#NID_ms_efs
 138

	)

747 
	#OBJ_ms_efs
 1L,3L,6L,1L,4L,1L,311L,10L,3L,4L

	)

751 
	#SN_ns_sgc
 "nsSGC"

	)

752 
	#LN_ns_sgc
 "N‘sÿ³ S”v” G©ed Cry±o"

	)

753 
	#NID_ns_sgc
 139

	)

754 
	#OBJ_ns_sgc
 
OBJ_Ãtsÿ³
,4L,1L

	)

756 
	#SN_d–_ül
 "d–CRL"

	)

757 
	#LN_d–_ül
 "X509v3 D– CRL IndiÿtÜ"

	)

758 
	#NID_d–_ül
 140

	)

759 
	#OBJ_d–_ül
 
OBJ_id_û
,27L

	)

761 
	#SN_ül_»asÚ
 "CRLR—sÚ"

	)

762 
	#LN_ül_»asÚ
 "CRL R—sÚ Code"

	)

763 
	#NID_ül_»asÚ
 141

	)

764 
	#OBJ_ül_»asÚ
 
OBJ_id_û
,21L

	)

766 
	#SN_šv®id™y_d©e
 "šv®id™yD©e"

	)

767 
	#LN_šv®id™y_d©e
 "Inv®id™y D©e"

	)

768 
	#NID_šv®id™y_d©e
 142

	)

769 
	#OBJ_šv®id™y_d©e
 
OBJ_id_û
,24L

	)

771 
	#SN_sxÃt
 "SXN‘ID"

	)

772 
	#LN_sxÃt
 "SŒÚg ExŒª‘ ID"

	)

773 
	#NID_sxÃt
 143

	)

774 
	#OBJ_sxÃt
 1L,3L,101L,1L,4L,1L

	)

778 
	#OBJ_pkcs12
 
OBJ_pkcs
,12L

	)

779 
	#OBJ_pkcs12_pbeids
 
OBJ_pkcs12
, 1

	)

781 
	#SN_pbe_W™hSHA1And128B™RC4
 "PBE-SHA1-RC4-128"

	)

782 
	#LN_pbe_W™hSHA1And128B™RC4
 "pbeW™hSHA1And128B™RC4"

	)

783 
	#NID_pbe_W™hSHA1And128B™RC4
 144

	)

784 
	#OBJ_pbe_W™hSHA1And128B™RC4
 
OBJ_pkcs12_pbeids
, 1L

	)

786 
	#SN_pbe_W™hSHA1And40B™RC4
 "PBE-SHA1-RC4-40"

	)

787 
	#LN_pbe_W™hSHA1And40B™RC4
 "pbeW™hSHA1And40B™RC4"

	)

788 
	#NID_pbe_W™hSHA1And40B™RC4
 145

	)

789 
	#OBJ_pbe_W™hSHA1And40B™RC4
 
OBJ_pkcs12_pbeids
, 2L

	)

791 
	#SN_pbe_W™hSHA1And3_Key_TrËDES_CBC
 "PBE-SHA1-3DES"

	)

792 
	#LN_pbe_W™hSHA1And3_Key_TrËDES_CBC
 "pbeW™hSHA1And3-KeyTrËDES-CBC"

	)

793 
	#NID_pbe_W™hSHA1And3_Key_TrËDES_CBC
 146

	)

794 
	#OBJ_pbe_W™hSHA1And3_Key_TrËDES_CBC
 
OBJ_pkcs12_pbeids
, 3L

	)

796 
	#SN_pbe_W™hSHA1And2_Key_TrËDES_CBC
 "PBE-SHA1-2DES"

	)

797 
	#LN_pbe_W™hSHA1And2_Key_TrËDES_CBC
 "pbeW™hSHA1And2-KeyTrËDES-CBC"

	)

798 
	#NID_pbe_W™hSHA1And2_Key_TrËDES_CBC
 147

	)

799 
	#OBJ_pbe_W™hSHA1And2_Key_TrËDES_CBC
 
OBJ_pkcs12_pbeids
, 4L

	)

801 
	#SN_pbe_W™hSHA1And128B™RC2_CBC
 "PBE-SHA1-RC2-128"

	)

802 
	#LN_pbe_W™hSHA1And128B™RC2_CBC
 "pbeW™hSHA1And128B™RC2-CBC"

	)

803 
	#NID_pbe_W™hSHA1And128B™RC2_CBC
 148

	)

804 
	#OBJ_pbe_W™hSHA1And128B™RC2_CBC
 
OBJ_pkcs12_pbeids
, 5L

	)

806 
	#SN_pbe_W™hSHA1And40B™RC2_CBC
 "PBE-SHA1-RC2-40"

	)

807 
	#LN_pbe_W™hSHA1And40B™RC2_CBC
 "pbeW™hSHA1And40B™RC2-CBC"

	)

808 
	#NID_pbe_W™hSHA1And40B™RC2_CBC
 149

	)

809 
	#OBJ_pbe_W™hSHA1And40B™RC2_CBC
 
OBJ_pkcs12_pbeids
, 6L

	)

811 
	#OBJ_pkcs12_V”siÚ1
 
OBJ_pkcs12
, 10L

	)

813 
	#OBJ_pkcs12_BagIds
 
OBJ_pkcs12_V”siÚ1
, 1L

	)

815 
	#LN_keyBag
 "keyBag"

	)

816 
	#NID_keyBag
 150

	)

817 
	#OBJ_keyBag
 
OBJ_pkcs12_BagIds
, 1L

	)

819 
	#LN_pkcs8ShroudedKeyBag
 "pkcs8ShroudedKeyBag"

	)

820 
	#NID_pkcs8ShroudedKeyBag
 151

	)

821 
	#OBJ_pkcs8ShroudedKeyBag
 
OBJ_pkcs12_BagIds
, 2L

	)

823 
	#LN_û¹Bag
 "û¹Bag"

	)

824 
	#NID_û¹Bag
 152

	)

825 
	#OBJ_û¹Bag
 
OBJ_pkcs12_BagIds
, 3L

	)

827 
	#LN_ülBag
 "ülBag"

	)

828 
	#NID_ülBag
 153

	)

829 
	#OBJ_ülBag
 
OBJ_pkcs12_BagIds
, 4L

	)

831 
	#LN_£ü‘Bag
 "£ü‘Bag"

	)

832 
	#NID_£ü‘Bag
 154

	)

833 
	#OBJ_£ü‘Bag
 
OBJ_pkcs12_BagIds
, 5L

	)

835 
	#LN_§ãCÚ‹ÁsBag
 "§ãCÚ‹ÁsBag"

	)

836 
	#NID_§ãCÚ‹ÁsBag
 155

	)

837 
	#OBJ_§ãCÚ‹ÁsBag
 
OBJ_pkcs12_BagIds
, 6L

	)

839 
	#LN_ä›ndlyName
 "ä›ndlyName"

	)

840 
	#NID_ä›ndlyName
 156

	)

841 
	#OBJ_ä›ndlyName
 
OBJ_pkcs9
, 20L

	)

843 
	#LN_loÿlKeyID
 "loÿlKeyID"

	)

844 
	#NID_loÿlKeyID
 157

	)

845 
	#OBJ_loÿlKeyID
 
OBJ_pkcs9
, 21L

	)

847 
	#OBJ_û¹Ty³s
 
OBJ_pkcs9
, 22L

	)

849 
	#LN_x509C”tifiÿ‹
 "x509C”tifiÿ‹"

	)

850 
	#NID_x509C”tifiÿ‹
 158

	)

851 
	#OBJ_x509C”tifiÿ‹
 
OBJ_û¹Ty³s
, 1L

	)

853 
	#LN_sdsiC”tifiÿ‹
 "sdsiC”tifiÿ‹"

	)

854 
	#NID_sdsiC”tifiÿ‹
 159

	)

855 
	#OBJ_sdsiC”tifiÿ‹
 
OBJ_û¹Ty³s
, 2L

	)

857 
	#OBJ_ülTy³s
 
OBJ_pkcs9
, 23L

	)

859 
	#LN_x509C¾
 "x509C¾"

	)

860 
	#NID_x509C¾
 160

	)

861 
	#OBJ_x509C¾
 
OBJ_ülTy³s
, 1L

	)

865 
	#LN_pbes2
 "PBES2"

	)

866 
	#NID_pbes2
 161

	)

867 
	#OBJ_pbes2
 
OBJ_pkcs
,5L,13L

	)

869 
	#LN_pbmac1
 "PBMAC1"

	)

870 
	#NID_pbmac1
 162

	)

871 
	#OBJ_pbmac1
 
OBJ_pkcs
,5L,14L

	)

873 
	#LN_hmacW™hSHA1
 "hmacW™hSHA1"

	)

874 
	#NID_hmacW™hSHA1
 163

	)

875 
	#OBJ_hmacW™hSHA1
 
OBJ_r§dsi
,2L,7L

	)

879 
	#LN_id_qt_ıs
 "PŞicy Qu®if›¸CPS"

	)

880 
	#SN_id_qt_ıs
 "id-qt-ıs"

	)

881 
	#NID_id_qt_ıs
 164

	)

882 
	#OBJ_id_qt_ıs
 
OBJ_id_pkix
,2L,1L

	)

884 
	#LN_id_qt_unÙiû
 "PŞicy Qu®if›¸U£¸NÙiû"

	)

885 
	#SN_id_qt_unÙiû
 "id-qt-unÙiû"

	)

886 
	#NID_id_qt_unÙiû
 165

	)

887 
	#OBJ_id_qt_unÙiû
 
OBJ_id_pkix
,2L,2L

	)

889 
	#SN_rc2_64_cbc
 "RC2-64-CBC"

	)

890 
	#LN_rc2_64_cbc
 "rc2-64-cbc"

	)

891 
	#NID_rc2_64_cbc
 166

	)

893 
	#SN_SMIMEC­ab™›s
 "SMIME-CAPS"

	)

894 
	#LN_SMIMEC­ab™›s
 "S/MIME C­ab™›s"

	)

895 
	#NID_SMIMEC­ab™›s
 167

	)

896 
	#OBJ_SMIMEC­ab™›s
 
OBJ_pkcs9
,15L

	)

898 
	#SN_pbeW™hMD2AndRC2_CBC
 "PBE-MD2-RC2-64"

	)

899 
	#LN_pbeW™hMD2AndRC2_CBC
 "pbeW™hMD2AndRC2-CBC"

	)

900 
	#NID_pbeW™hMD2AndRC2_CBC
 168

	)

901 
	#OBJ_pbeW™hMD2AndRC2_CBC
 
OBJ_pkcs
,5L,4L

	)

903 
	#SN_pbeW™hMD5AndRC2_CBC
 "PBE-MD5-RC2-64"

	)

904 
	#LN_pbeW™hMD5AndRC2_CBC
 "pbeW™hMD5AndRC2-CBC"

	)

905 
	#NID_pbeW™hMD5AndRC2_CBC
 169

	)

906 
	#OBJ_pbeW™hMD5AndRC2_CBC
 
OBJ_pkcs
,5L,6L

	)

908 
	#SN_pbeW™hSHA1AndDES_CBC
 "PBE-SHA1-DES"

	)

909 
	#LN_pbeW™hSHA1AndDES_CBC
 "pbeW™hSHA1AndDES-CBC"

	)

910 
	#NID_pbeW™hSHA1AndDES_CBC
 170

	)

911 
	#OBJ_pbeW™hSHA1AndDES_CBC
 
OBJ_pkcs
,5L,10L

	)

915 
	#LN_ms_ext_»q
 "Miüosoá Ex‹nsiÚ Reque¡"

	)

916 
	#SN_ms_ext_»q
 "msExtReq"

	)

917 
	#NID_ms_ext_»q
 171

	)

918 
	#OBJ_ms_ext_»q
 1L,3L,6L,1L,4L,1L,311L,2L,1L,14L

	)

920 
	#LN_ext_»q
 "Ex‹nsiÚ Reque¡"

	)

921 
	#SN_ext_»q
 "extReq"

	)

922 
	#NID_ext_»q
 172

	)

923 
	#OBJ_ext_»q
 
OBJ_pkcs9
,14L

	)

925 
	#SN_Çme
 "Çme"

	)

926 
	#LN_Çme
 "Çme"

	)

927 
	#NID_Çme
 173

	)

928 
	#OBJ_Çme
 
OBJ_X509
,41L

	)

930 
	#SN_dnQu®if›r
 "dnQu®if›r"

	)

931 
	#LN_dnQu®if›r
 "dnQu®if›r"

	)

932 
	#NID_dnQu®if›r
 174

	)

933 
	#OBJ_dnQu®if›r
 
OBJ_X509
,46L

	)

935 
	#SN_id_³
 "id-³"

	)

936 
	#NID_id_³
 175

	)

937 
	#OBJ_id_³
 
OBJ_id_pkix
,1L

	)

939 
	#SN_id_ad
 "id-ad"

	)

940 
	#NID_id_ad
 176

	)

941 
	#OBJ_id_ad
 
OBJ_id_pkix
,48L

	)

943 
	#SN_šfo_acûss
 "authÜ™yInfoAcûss"

	)

944 
	#LN_šfo_acûss
 "AuthÜ™y InfÜm©iÚ Acûss"

	)

945 
	#NID_šfo_acûss
 177

	)

946 
	#OBJ_šfo_acûss
 
OBJ_id_³
,1L

	)

948 
	#SN_ad_OCSP
 "OCSP"

	)

949 
	#LN_ad_OCSP
 "OCSP"

	)

950 
	#NID_ad_OCSP
 178

	)

951 
	#OBJ_ad_OCSP
 
OBJ_id_ad
,1L

	)

953 
	#SN_ad_ÿ_issu”s
 "ÿIssu”s"

	)

954 
	#LN_ad_ÿ_issu”s
 "CA Issu”s"

	)

955 
	#NID_ad_ÿ_issu”s
 179

	)

956 
	#OBJ_ad_ÿ_issu”s
 
OBJ_id_ad
,2L

	)

958 
	#SN_OCSP_sign
 "OCSPSignšg"

	)

959 
	#LN_OCSP_sign
 "OCSP Signšg"

	)

960 
	#NID_OCSP_sign
 180

	)

961 
	#OBJ_OCSP_sign
 
OBJ_id_kp
,9L

	)

964 
	~<İ’s¦/bio.h
>

965 
	~<İ’s¦/a¢1.h
>

967 
	#OBJ_NAME_TYPE_UNDEF
 0x00

	)

968 
	#OBJ_NAME_TYPE_MD_METH
 0x01

	)

969 
	#OBJ_NAME_TYPE_CIPHER_METH
 0x02

	)

970 
	#OBJ_NAME_TYPE_PKEY_METH
 0x03

	)

971 
	#OBJ_NAME_TYPE_COMP_METH
 0x04

	)

972 
	#OBJ_NAME_TYPE_NUM
 0x05

	)

974 
	#OBJ_NAME_ALIAS
 0x8000

	)

976 
	#OBJ_BSEARCH_VALUE_ON_NOMATCH
 0x01

	)

977 
	#OBJ_BSEARCH_FIRST_VALUE_ON_MATCH
 0x02

	)

980 #ifdeà 
__ılu¥lus


984 
	sobj_Çme_¡
 {

985 
ty³
;

986 
®Ÿs
;

987 cÚ¡ *
Çme
;

988 cÚ¡ *
d©a
;

989 } 
	tOBJ_NAME
;

991 
	#OBJ_ü—‹_ªd_add_objeù
(
a
,
b
,
c
è
	`OBJ_ü—‹
×,b,c)

	)

993 
OBJ_NAME_š™
();

994 
OBJ_NAME_Ãw_šdex
((*
hash_func
) (const *),

995 (*
cmp_func
) (const *, const *),

996 (*
ä“_func
) (const *, , const *));

997 cÚ¡ *
OBJ_NAME_g‘
(cÚ¡ *
Çme
, 
ty³
);

998 
OBJ_NAME_add
(cÚ¡ *
Çme
, 
ty³
, cÚ¡ *
d©a
);

999 
OBJ_NAME_»move
(cÚ¡ *
Çme
, 
ty³
);

1000 
OBJ_NAME_ş—nup
(
ty³
);

1001 
OBJ_NAME_do_®l
(
ty³
, (*
â
è(cÚ¡ 
OBJ_NAME
 *, *
¬g
),

1002 *
¬g
);

1003 
OBJ_NAME_do_®l_sÜ‹d
(
ty³
,

1004 (*
â
è(cÚ¡ 
OBJ_NAME
 *, *
¬g
),

1005 *
¬g
);

1007 
ASN1_OBJECT
 *
OBJ_dup
(cÚ¡ ASN1_OBJECT *
o
);

1008 
ASN1_OBJECT
 *
OBJ_nid2obj
(
n
);

1009 cÚ¡ *
OBJ_nid2Ê
(
n
);

1010 cÚ¡ *
OBJ_nid2¢
(
n
);

1011 
OBJ_obj2nid
(cÚ¡ 
ASN1_OBJECT
 *
o
);

1012 
ASN1_OBJECT
 *
OBJ_txt2obj
(cÚ¡ *
s
, 
no_Çme
);

1013 
OBJ_obj2txt
(*
buf
, 
buf_Ën
, cÚ¡ 
ASN1_OBJECT
 *
a
, 
no_Çme
);

1014 
OBJ_txt2nid
(cÚ¡ *
s
);

1015 
OBJ_Ê2nid
(cÚ¡ *
s
);

1016 
OBJ_¢2nid
(cÚ¡ *
s
);

1017 
OBJ_cmp
(cÚ¡ 
ASN1_OBJECT
 *
a
, cÚ¡ ASN1_OBJECT *
b
);

1018 cÚ¡ *
OBJ_b£¬ch_
(cÚ¡ *
key
, cÚ¡ *
ba£
, 
num
, 
size
,

1019 (*
cmp
) (const *, const *));

1020 cÚ¡ *
OBJ_b£¬ch_ex_
(cÚ¡ *
key
, cÚ¡ *
ba£
, 
num
,

1021 
size
,

1022 (*
cmp
) (const *, const *),

1023 
æags
);

1025 
	#_DECLARE_OBJ_BSEARCH_CMP_FN
(
scİe
, 
ty³1
, 
ty³2
, 
nm
) \

1026 
nm
##
	`_cmp_BSEARCH_CMP_FN
(const *, const *); \

1027 
nm
##
	`_cmp
(
ty³1
 cÚ¡ *, 
ty³2
 const *); \

1028 
scİe
 
ty³2
 * 
OBJ_b£¬ch_
##
	`nm
(
ty³1
 *
key
,y³2 cÚ¡ *
ba£
, 
num
)

	)

1030 
	#DECLARE_OBJ_BSEARCH_CMP_FN
(
ty³1
, 
ty³2
, 
cmp
) \

1031 
	`_DECLARE_OBJ_BSEARCH_CMP_FN
(, 
ty³1
, 
ty³2
, 
cmp
)

	)

1032 
	#DECLARE_OBJ_BSEARCH_GLOBAL_CMP_FN
(
ty³1
, 
ty³2
, 
nm
) \

1033 
ty³2
 * 
OBJ_b£¬ch_
##
	`nm
(
ty³1
 *
key
,y³2 cÚ¡ *
ba£
, 
num
)

	)

1062 
	#IMPLEMENT_OBJ_BSEARCH_CMP_FN
(
ty³1
, 
ty³2
, 
nm
) \

1063 
nm
##
	`_cmp_BSEARCH_CMP_FN
(cÚ¡ *
a_
, cÚ¡ *
b_
) \

1065 
ty³1
 cÚ¡ *
a
 = 
a_
; \

1066 
ty³2
 cÚ¡ *
b
 = 
b_
; \

1067  
nm
##
	`_cmp
(
a
,
b
); \

1069 
ty³2
 *
OBJ_b£¬ch_
##
	`nm
(
ty³1
 *
key
,y³2 cÚ¡ *
ba£
, 
num
) \

1071  (
ty³2
 *)
	`OBJ_b£¬ch_
(
key
, 
ba£
, 
num
, (type2), \

1072 
nm
##
_cmp_BSEARCH_CMP_FN
); \

1074 
	`dummy_´ÙÙy³
()

	)

1076 
	#IMPLEMENT_OBJ_BSEARCH_GLOBAL_CMP_FN
(
ty³1
, 
ty³2
, 
nm
) \

1077 
nm
##
	`_cmp_BSEARCH_CMP_FN
(cÚ¡ *
a_
, cÚ¡ *
b_
) \

1079 
ty³1
 cÚ¡ *
a
 = 
a_
; \

1080 
ty³2
 cÚ¡ *
b
 = 
b_
; \

1081  
nm
##
	`_cmp
(
a
,
b
); \

1083 
ty³2
 *
OBJ_b£¬ch_
##
	`nm
(
ty³1
 *
key
,y³2 cÚ¡ *
ba£
, 
num
) \

1085  (
ty³2
 *)
	`OBJ_b£¬ch_
(
key
, 
ba£
, 
num
, (type2), \

1086 
nm
##
_cmp_BSEARCH_CMP_FN
); \

1088 
	`dummy_´ÙÙy³
()

	)

1090 
	#OBJ_b£¬ch
(
ty³1
,
key
,
ty³2
,
ba£
,
num
,
cmp
) \

1091 ((
ty³2
 *)
	`OBJ_b£¬ch_
(
	`CHECKED_PTR_OF
(
ty³1
,
key
),CHECKED_PTR_OFÑy³2,
ba£
), \

1092 
num
,(
ty³2
), \

1093 (()
	`CHECKED_PTR_OF
(
ty³1
,
cmp
##
_ty³_1
), \

1094 ()
	`CHECKED_PTR_OF
(
ty³2
,
cmp
##
_ty³_2
), \

1095 
cmp
##
_BSEARCH_CMP_FN
)))

	)

1097 
	#OBJ_b£¬ch_ex
(
ty³1
,
key
,
ty³2
,
ba£
,
num
,
cmp
,
æags
) \

1098 ((
ty³2
 *)
	`OBJ_b£¬ch_ex_
(
	`CHECKED_PTR_OF
(
ty³1
,
key
),CHECKED_PTR_OFÑy³2,
ba£
), \

1099 
num
,(
ty³2
), \

1100 (()
	`CHECKED_PTR_OF
(
ty³1
,
cmp
##
_ty³_1
), \

1101 ()
ty³_2
=
	`CHECKED_PTR_OF
(
ty³2
,
cmp
##
_ty³_2
), \

1102 
cmp
##
_BSEARCH_CMP_FN
)),
æags
)

	)

1104 
OBJ_Ãw_nid
(
num
);

1105 
OBJ_add_objeù
(cÚ¡ 
ASN1_OBJECT
 *
obj
);

1106 
OBJ_ü—‹
(cÚ¡ *
oid
, cÚ¡ *
¢
, cÚ¡ *
Ê
);

1107 
OBJ_ş—nup
();

1108 
OBJ_ü—‹_objeùs
(
BIO
 *
š
);

1110 
OBJ_fšd_sigid_®gs
(
signid
, *
pdig_nid
, *
µkey_nid
);

1111 
OBJ_fšd_sigid_by_®gs
(*
psignid
, 
dig_nid
, 
pkey_nid
);

1112 
OBJ_add_sigid
(
signid
, 
dig_id
, 
pkey_id
);

1113 
OBJ_sigid_ä“
();

1115 
obj_ş—nup_deãr
;

1116 
check_deãr
(
nid
);

1123 
ERR_lßd_OBJ_¡ršgs
();

1128 
	#OBJ_F_OBJ_ADD_OBJECT
 105

	)

1129 
	#OBJ_F_OBJ_CREATE
 100

	)

1130 
	#OBJ_F_OBJ_DUP
 101

	)

1131 
	#OBJ_F_OBJ_NAME_NEW_INDEX
 106

	)

1132 
	#OBJ_F_OBJ_NID2LN
 102

	)

1133 
	#OBJ_F_OBJ_NID2OBJ
 103

	)

1134 
	#OBJ_F_OBJ_NID2SN
 104

	)

1137 
	#OBJ_R_MALLOC_FAILURE
 100

	)

1138 
	#OBJ_R_UNKNOWN_NID
 101

	)

1140 #ifdeà 
__ılu¥lus


	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

149 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

152 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

154 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

157 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

158 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

159 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

161 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

162 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

163 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

166 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

169 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifdeà
__USE_XOPEN2K8


175 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

178 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

179 
size_t
 
__n
è
__THROW
;

183 
	~<xloÿË.h
>

185 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
__loÿË_t
 
__loc
è
__THROW
;

188 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

189 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

199 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

200 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifdeà
__USE_XOPEN2K8


209 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

210 
__loÿË_t
 
__loc
è
__THROW
;

215 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

216 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

219 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

230 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

231 
__THROW
 
__©Œibu‹_pu»__
;

234 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

236 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

240 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

241 
__THROW
 
__©Œibu‹_pu»__
;

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_GNU


248 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

249 
__THROW
 
__©Œibu‹_pu»__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

256 
__THROW
 
__©Œibu‹_pu»__
;

259 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

260 
__THROW
 
__©Œibu‹_pu»__
;

262 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

265 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

266 cÚ¡ 
wch¬_t
 *
__acû±
)

267 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

269 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

270 
__THROW
 
__©Œibu‹_pu»__
;

273 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

276 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

277 cÚ¡ 
wch¬_t
 *
__ÃedË
)

278 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

280 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

281 
__THROW
 
__©Œibu‹_pu»__
;

285 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

286 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

287 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

290 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

291 
__END_NAMESPACE_STD


293 #ifdeà
__USE_XOPEN


295 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

298 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

299 cÚ¡ 
wch¬_t
 *
__ÃedË
)

300 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

302 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

303 
__THROW
 
__©Œibu‹_pu»__
;

307 #ifdeà
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

310 
__THROW
 
__©Œibu‹_pu»__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

319 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

323 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©Œibu‹_pu»__
;

328 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©Œibu‹_pu»__
;

332 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

333 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

337 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifdeà
__USE_GNU


347 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

348 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

360 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

364 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

368 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

369 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

370 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

373 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

374 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

377 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

378 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

379 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

380 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifdeà
__USE_EXTERN_INLINES


389 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

390 
__ex‹º_šlše
 
wšt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

395 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

396 
__ex‹º_šlše
 

397 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

398 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

399 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

401 
__ex‹º_šlše
 
size_t


402 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

403 
mb¡©e_t
 *
__»¡riù
 
__ps
))

404 {  (
__ps
 !ğ
NULL


405 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

412 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

413 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

418 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

419 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

427 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

428 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

432 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

433 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

434 
size_t
 
__nwc
, size_ˆ
__Ën
,

435 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

440 #ifdeà
__USE_XOPEN


442 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

446 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

454 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifdeà
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

461 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

462 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

463 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

472 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

476 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

477 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifdeà
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__ex‹nsiÚ__


486 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

487 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

488 
__THROW
;

492 
__ex‹nsiÚ__


493 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

494 
wch¬_t
 **
__»¡riù
 
__’d±r
,

495 
__ba£
è
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifdeà
__USE_GNU


502 
__ex‹nsiÚ__


503 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

504 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

505 
__THROW
;

509 
__ex‹nsiÚ__


510 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

511 
wch¬_t
 **
__»¡riù
 
__’d±r
,

512 
__ba£
è
__THROW
;

515 #ifdeà
__USE_GNU


529 
	~<xloÿË.h
>

533 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

534 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

535 
__loÿË_t
 
__loc
è
__THROW
;

537 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

538 
wch¬_t
 **
__»¡riù
 
__’d±r
,

539 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

541 
__ex‹nsiÚ__


542 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

546 
__ex‹nsiÚ__


547 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

548 
wch¬_t
 **
__»¡riù
 
__’d±r
,

549 
__ba£
, 
__loÿË_t
 
__loc
)

550 
__THROW
;

552 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

553 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

554 
__THROW
;

556 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

557 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

558 
__THROW
;

560 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

561 
wch¬_t
 **
__»¡riù
 
__’d±r
,

562 
__loÿË_t
 
__loc
è
__THROW
;

566 #ifdeà
__USE_XOPEN2K8


569 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

570 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

574 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

575 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

586 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

597 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

598 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

607 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

608 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

609 
__THROW
 ;

615 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

616 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

617 
__gnuc_va_li¡
 
__¬g
)

623 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

624 
__gnuc_va_li¡
 
__¬g
)

628 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

629 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

630 
__gnuc_va_li¡
 
__¬g
)

631 
__THROW
 ;

638 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

639 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

648 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

649 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

650 
__THROW
 ;

652 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

653 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

654 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

655 #ifdeà
__REDIRECT


659 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

660 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_fwsÿnf
)

663 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

664 
__isoc99_wsÿnf
)

666 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

667 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

668 ...), 
__isoc99_swsÿnf
)

671 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

673 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

674 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

675 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

676 
__THROW
;

677 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

678 
	#wsÿnf
 
__isoc99_wsÿnf


	)

679 
	#swsÿnf
 
__isoc99_swsÿnf


	)

683 
__END_NAMESPACE_STD


686 #ifdeà
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

693 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

694 
__gnuc_va_li¡
 
__¬g
)

700 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

701 
__gnuc_va_li¡
 
__¬g
)

704 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

705 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

706 
__gnuc_va_li¡
 
__¬g
)

707 
__THROW
 ;

709 #ià!
defšed
 
__USE_GNU
 \

710 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

711 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

712 #ifdeà
__REDIRECT


713 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

714 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

717 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

718 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

720 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

721 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

722 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

725 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

726 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
);

728 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
);

730 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

731 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

732 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

733 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

734 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

735 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

749 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

755 
wšt_t
 
	`g‘wch¬
 ();

762 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

763 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

769 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

777 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

778 
__FILE
 *
__»¡riù
 
__¡»am
);

784 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

785 
__FILE
 *
__»¡riù
 
__¡»am
);

792 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

793 
__END_NAMESPACE_STD


796 #ifdeà
__USE_GNU


804 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

805 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

813 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

821 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

830 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

831 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

840 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

841 
__FILE
 *
__»¡riù
 
__¡»am
);

849 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

850 
__FILE
 *
__»¡riù
 
__¡»am
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

859 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

860 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifdeà
__USE_GNU


864 
	~<xloÿË.h
>

868 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

869 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

870 cÚ¡ 
tm
 *
__»¡riù
 
__
,

871 
__loÿË_t
 
__loc
è
__THROW
;

880 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


881 
	#__Ãed_iswxxx


	)

882 
	~<wùy³.h
>

886 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


887 
	~<b™s/wch¬2.h
>

890 #ifdeà
__LDBL_COMPAT


891 
	~<b™s/wch¬-ldbl.h
>

894 
__END_DECLS


902 #undeà
__Ãed_mb¡©e_t


903 #undeà
__Ãed_wšt_t


	@/usr/include/openssl/obj_mac.h

65 
	#SN_undef
 "UNDEF"

	)

66 
	#LN_undef
 "undefšed"

	)

67 
	#NID_undef
 0

	)

68 
	#OBJ_undef
 0L

	)

70 
	#SN_™u_t
 "ITU-T"

	)

71 
	#LN_™u_t
 "™u-t"

	)

72 
	#NID_™u_t
 645

	)

73 
	#OBJ_™u_t
 0L

	)

75 
	#NID_cc™t
 404

	)

76 
	#OBJ_cc™t
 
OBJ_™u_t


	)

78 
	#SN_iso
 "ISO"

	)

79 
	#LN_iso
 "iso"

	)

80 
	#NID_iso
 181

	)

81 
	#OBJ_iso
 1L

	)

83 
	#SN_jošt_iso_™u_t
 "JOINT-ISO-ITU-T"

	)

84 
	#LN_jošt_iso_™u_t
 "jošt-iso-™u-t"

	)

85 
	#NID_jošt_iso_™u_t
 646

	)

86 
	#OBJ_jošt_iso_™u_t
 2L

	)

88 
	#NID_jošt_iso_cc™t
 393

	)

89 
	#OBJ_jošt_iso_cc™t
 
OBJ_jošt_iso_™u_t


	)

91 
	#SN_memb”_body
 "memb”-body"

	)

92 
	#LN_memb”_body
 "ISO Memb” Body"

	)

93 
	#NID_memb”_body
 182

	)

94 
	#OBJ_memb”_body
 
OBJ_iso
,2L

	)

96 
	#SN_id’tif›d_Ügªiz©iÚ
 "id’tif›d-Ügªiz©iÚ"

	)

97 
	#NID_id’tif›d_Ügªiz©iÚ
 676

	)

98 
	#OBJ_id’tif›d_Ügªiz©iÚ
 
OBJ_iso
,3L

	)

100 
	#SN_hmac_md5
 "HMAC-MD5"

	)

101 
	#LN_hmac_md5
 "hmac-md5"

	)

102 
	#NID_hmac_md5
 780

	)

103 
	#OBJ_hmac_md5
 
OBJ_id’tif›d_Ügªiz©iÚ
,6L,1L,5L,5L,8L,1L,1L

	)

105 
	#SN_hmac_sha1
 "HMAC-SHA1"

	)

106 
	#LN_hmac_sha1
 "hmac-sha1"

	)

107 
	#NID_hmac_sha1
 781

	)

108 
	#OBJ_hmac_sha1
 
OBJ_id’tif›d_Ügªiz©iÚ
,6L,1L,5L,5L,8L,1L,2L

	)

110 
	#SN_û¹icom_¬c
 "û¹icom-¬c"

	)

111 
	#NID_û¹icom_¬c
 677

	)

112 
	#OBJ_û¹icom_¬c
 
OBJ_id’tif›d_Ügªiz©iÚ
,132L

	)

114 
	#SN_š‹º©iÚ®_Ügªiz©iÚs
 "š‹º©iÚ®-Ügªiz©iÚs"

	)

115 
	#LN_š‹º©iÚ®_Ügªiz©iÚs
 "IÁ”ÇtiÚ® Orgªiz©iÚs"

	)

116 
	#NID_š‹º©iÚ®_Ügªiz©iÚs
 647

	)

117 
	#OBJ_š‹º©iÚ®_Ügªiz©iÚs
 
OBJ_jošt_iso_™u_t
,23L

	)

119 
	#SN_w­
 "w­"

	)

120 
	#NID_w­
 678

	)

121 
	#OBJ_w­
 
OBJ_š‹º©iÚ®_Ügªiz©iÚs
,43L

	)

123 
	#SN_w­_wsg
 "w­-wsg"

	)

124 
	#NID_w­_wsg
 679

	)

125 
	#OBJ_w­_wsg
 
OBJ_w­
,1L

	)

127 
	#SN_£Ëùed_©Œibu‹_ty³s
 "£Ëùed-©Œibu‹-ty³s"

	)

128 
	#LN_£Ëùed_©Œibu‹_ty³s
 "S–eùed A‰ribu‹ Ty³s"

	)

129 
	#NID_£Ëùed_©Œibu‹_ty³s
 394

	)

130 
	#OBJ_£Ëùed_©Œibu‹_ty³s
 
OBJ_jošt_iso_™u_t
,5L,1L,5L

	)

132 
	#SN_ş—¿nû
 "ş—¿nû"

	)

133 
	#NID_ş—¿nû
 395

	)

134 
	#OBJ_ş—¿nû
 
OBJ_£Ëùed_©Œibu‹_ty³s
,55L

	)

136 
	#SN_ISO_US
 "ISO-US"

	)

137 
	#LN_ISO_US
 "ISO US Memb” Body"

	)

138 
	#NID_ISO_US
 183

	)

139 
	#OBJ_ISO_US
 
OBJ_memb”_body
,840L

	)

141 
	#SN_X9_57
 "X9-57"

	)

142 
	#LN_X9_57
 "X9.57"

	)

143 
	#NID_X9_57
 184

	)

144 
	#OBJ_X9_57
 
OBJ_ISO_US
,10040L

	)

146 
	#SN_X9cm
 "X9cm"

	)

147 
	#LN_X9cm
 "X9.57 CM ?"

	)

148 
	#NID_X9cm
 185

	)

149 
	#OBJ_X9cm
 
OBJ_X9_57
,4L

	)

151 
	#SN_d§
 "DSA"

	)

152 
	#LN_d§
 "d§Enüy±iÚ"

	)

153 
	#NID_d§
 116

	)

154 
	#OBJ_d§
 
OBJ_X9cm
,1L

	)

156 
	#SN_d§W™hSHA1
 "DSA-SHA1"

	)

157 
	#LN_d§W™hSHA1
 "d§W™hSHA1"

	)

158 
	#NID_d§W™hSHA1
 113

	)

159 
	#OBJ_d§W™hSHA1
 
OBJ_X9cm
,3L

	)

161 
	#SN_ªsi_X9_62
 "ªsi-X9-62"

	)

162 
	#LN_ªsi_X9_62
 "ANSI X9.62"

	)

163 
	#NID_ªsi_X9_62
 405

	)

164 
	#OBJ_ªsi_X9_62
 
OBJ_ISO_US
,10045L

	)

166 
	#OBJ_X9_62_id_f›ldTy³
 
OBJ_ªsi_X9_62
,1L

	)

168 
	#SN_X9_62_´ime_f›ld
 "´ime-f›ld"

	)

169 
	#NID_X9_62_´ime_f›ld
 406

	)

170 
	#OBJ_X9_62_´ime_f›ld
 
OBJ_X9_62_id_f›ldTy³
,1L

	)

172 
	#SN_X9_62_ch¬aù”i¡ic_two_f›ld
 "ch¬aù”i¡ic-two-f›ld"

	)

173 
	#NID_X9_62_ch¬aù”i¡ic_two_f›ld
 407

	)

174 
	#OBJ_X9_62_ch¬aù”i¡ic_two_f›ld
 
OBJ_X9_62_id_f›ldTy³
,2L

	)

176 
	#SN_X9_62_id_ch¬aù”i¡ic_two_basis
 "id-ch¬aù”i¡ic-two-basis"

	)

177 
	#NID_X9_62_id_ch¬aù”i¡ic_two_basis
 680

	)

178 
	#OBJ_X9_62_id_ch¬aù”i¡ic_two_basis
 
OBJ_X9_62_ch¬aù”i¡ic_two_f›ld
,3L

	)

180 
	#SN_X9_62_ÚBasis
 "ÚBasis"

	)

181 
	#NID_X9_62_ÚBasis
 681

	)

182 
	#OBJ_X9_62_ÚBasis
 
OBJ_X9_62_id_ch¬aù”i¡ic_two_basis
,1L

	)

184 
	#SN_X9_62_Basis
 "Basis"

	)

185 
	#NID_X9_62_Basis
 682

	)

186 
	#OBJ_X9_62_Basis
 
OBJ_X9_62_id_ch¬aù”i¡ic_two_basis
,2L

	)

188 
	#SN_X9_62_µBasis
 "µBasis"

	)

189 
	#NID_X9_62_µBasis
 683

	)

190 
	#OBJ_X9_62_µBasis
 
OBJ_X9_62_id_ch¬aù”i¡ic_two_basis
,3L

	)

192 
	#OBJ_X9_62_id_publicKeyTy³
 
OBJ_ªsi_X9_62
,2L

	)

194 
	#SN_X9_62_id_ecPublicKey
 "id-ecPublicKey"

	)

195 
	#NID_X9_62_id_ecPublicKey
 408

	)

196 
	#OBJ_X9_62_id_ecPublicKey
 
OBJ_X9_62_id_publicKeyTy³
,1L

	)

198 
	#OBJ_X9_62_–lticCurve
 
OBJ_ªsi_X9_62
,3L

	)

200 
	#OBJ_X9_62_c_TwoCurve
 
OBJ_X9_62_–lticCurve
,0L

	)

202 
	#SN_X9_62_c2²b163v1
 "c2²b163v1"

	)

203 
	#NID_X9_62_c2²b163v1
 684

	)

204 
	#OBJ_X9_62_c2²b163v1
 
OBJ_X9_62_c_TwoCurve
,1L

	)

206 
	#SN_X9_62_c2²b163v2
 "c2²b163v2"

	)

207 
	#NID_X9_62_c2²b163v2
 685

	)

208 
	#OBJ_X9_62_c2²b163v2
 
OBJ_X9_62_c_TwoCurve
,2L

	)

210 
	#SN_X9_62_c2²b163v3
 "c2²b163v3"

	)

211 
	#NID_X9_62_c2²b163v3
 686

	)

212 
	#OBJ_X9_62_c2²b163v3
 
OBJ_X9_62_c_TwoCurve
,3L

	)

214 
	#SN_X9_62_c2²b176v1
 "c2²b176v1"

	)

215 
	#NID_X9_62_c2²b176v1
 687

	)

216 
	#OBJ_X9_62_c2²b176v1
 
OBJ_X9_62_c_TwoCurve
,4L

	)

218 
	#SN_X9_62_c2Šb191v1
 "c2Šb191v1"

	)

219 
	#NID_X9_62_c2Šb191v1
 688

	)

220 
	#OBJ_X9_62_c2Šb191v1
 
OBJ_X9_62_c_TwoCurve
,5L

	)

222 
	#SN_X9_62_c2Šb191v2
 "c2Šb191v2"

	)

223 
	#NID_X9_62_c2Šb191v2
 689

	)

224 
	#OBJ_X9_62_c2Šb191v2
 
OBJ_X9_62_c_TwoCurve
,6L

	)

226 
	#SN_X9_62_c2Šb191v3
 "c2Šb191v3"

	)

227 
	#NID_X9_62_c2Šb191v3
 690

	)

228 
	#OBJ_X9_62_c2Šb191v3
 
OBJ_X9_62_c_TwoCurve
,7L

	)

230 
	#SN_X9_62_c2Úb191v4
 "c2Úb191v4"

	)

231 
	#NID_X9_62_c2Úb191v4
 691

	)

232 
	#OBJ_X9_62_c2Úb191v4
 
OBJ_X9_62_c_TwoCurve
,8L

	)

234 
	#SN_X9_62_c2Úb191v5
 "c2Úb191v5"

	)

235 
	#NID_X9_62_c2Úb191v5
 692

	)

236 
	#OBJ_X9_62_c2Úb191v5
 
OBJ_X9_62_c_TwoCurve
,9L

	)

238 
	#SN_X9_62_c2²b208w1
 "c2²b208w1"

	)

239 
	#NID_X9_62_c2²b208w1
 693

	)

240 
	#OBJ_X9_62_c2²b208w1
 
OBJ_X9_62_c_TwoCurve
,10L

	)

242 
	#SN_X9_62_c2Šb239v1
 "c2Šb239v1"

	)

243 
	#NID_X9_62_c2Šb239v1
 694

	)

244 
	#OBJ_X9_62_c2Šb239v1
 
OBJ_X9_62_c_TwoCurve
,11L

	)

246 
	#SN_X9_62_c2Šb239v2
 "c2Šb239v2"

	)

247 
	#NID_X9_62_c2Šb239v2
 695

	)

248 
	#OBJ_X9_62_c2Šb239v2
 
OBJ_X9_62_c_TwoCurve
,12L

	)

250 
	#SN_X9_62_c2Šb239v3
 "c2Šb239v3"

	)

251 
	#NID_X9_62_c2Šb239v3
 696

	)

252 
	#OBJ_X9_62_c2Šb239v3
 
OBJ_X9_62_c_TwoCurve
,13L

	)

254 
	#SN_X9_62_c2Úb239v4
 "c2Úb239v4"

	)

255 
	#NID_X9_62_c2Úb239v4
 697

	)

256 
	#OBJ_X9_62_c2Úb239v4
 
OBJ_X9_62_c_TwoCurve
,14L

	)

258 
	#SN_X9_62_c2Úb239v5
 "c2Úb239v5"

	)

259 
	#NID_X9_62_c2Úb239v5
 698

	)

260 
	#OBJ_X9_62_c2Úb239v5
 
OBJ_X9_62_c_TwoCurve
,15L

	)

262 
	#SN_X9_62_c2²b272w1
 "c2²b272w1"

	)

263 
	#NID_X9_62_c2²b272w1
 699

	)

264 
	#OBJ_X9_62_c2²b272w1
 
OBJ_X9_62_c_TwoCurve
,16L

	)

266 
	#SN_X9_62_c2²b304w1
 "c2²b304w1"

	)

267 
	#NID_X9_62_c2²b304w1
 700

	)

268 
	#OBJ_X9_62_c2²b304w1
 
OBJ_X9_62_c_TwoCurve
,17L

	)

270 
	#SN_X9_62_c2Šb359v1
 "c2Šb359v1"

	)

271 
	#NID_X9_62_c2Šb359v1
 701

	)

272 
	#OBJ_X9_62_c2Šb359v1
 
OBJ_X9_62_c_TwoCurve
,18L

	)

274 
	#SN_X9_62_c2²b368w1
 "c2²b368w1"

	)

275 
	#NID_X9_62_c2²b368w1
 702

	)

276 
	#OBJ_X9_62_c2²b368w1
 
OBJ_X9_62_c_TwoCurve
,19L

	)

278 
	#SN_X9_62_c2Šb431r1
 "c2Šb431r1"

	)

279 
	#NID_X9_62_c2Šb431r1
 703

	)

280 
	#OBJ_X9_62_c2Šb431r1
 
OBJ_X9_62_c_TwoCurve
,20L

	)

282 
	#OBJ_X9_62_´imeCurve
 
OBJ_X9_62_–lticCurve
,1L

	)

284 
	#SN_X9_62_´ime192v1
 "´ime192v1"

	)

285 
	#NID_X9_62_´ime192v1
 409

	)

286 
	#OBJ_X9_62_´ime192v1
 
OBJ_X9_62_´imeCurve
,1L

	)

288 
	#SN_X9_62_´ime192v2
 "´ime192v2"

	)

289 
	#NID_X9_62_´ime192v2
 410

	)

290 
	#OBJ_X9_62_´ime192v2
 
OBJ_X9_62_´imeCurve
,2L

	)

292 
	#SN_X9_62_´ime192v3
 "´ime192v3"

	)

293 
	#NID_X9_62_´ime192v3
 411

	)

294 
	#OBJ_X9_62_´ime192v3
 
OBJ_X9_62_´imeCurve
,3L

	)

296 
	#SN_X9_62_´ime239v1
 "´ime239v1"

	)

297 
	#NID_X9_62_´ime239v1
 412

	)

298 
	#OBJ_X9_62_´ime239v1
 
OBJ_X9_62_´imeCurve
,4L

	)

300 
	#SN_X9_62_´ime239v2
 "´ime239v2"

	)

301 
	#NID_X9_62_´ime239v2
 413

	)

302 
	#OBJ_X9_62_´ime239v2
 
OBJ_X9_62_´imeCurve
,5L

	)

304 
	#SN_X9_62_´ime239v3
 "´ime239v3"

	)

305 
	#NID_X9_62_´ime239v3
 414

	)

306 
	#OBJ_X9_62_´ime239v3
 
OBJ_X9_62_´imeCurve
,6L

	)

308 
	#SN_X9_62_´ime256v1
 "´ime256v1"

	)

309 
	#NID_X9_62_´ime256v1
 415

	)

310 
	#OBJ_X9_62_´ime256v1
 
OBJ_X9_62_´imeCurve
,7L

	)

312 
	#OBJ_X9_62_id_ecSigTy³
 
OBJ_ªsi_X9_62
,4L

	)

314 
	#SN_ecd§_w™h_SHA1
 "ecd§-w™h-SHA1"

	)

315 
	#NID_ecd§_w™h_SHA1
 416

	)

316 
	#OBJ_ecd§_w™h_SHA1
 
OBJ_X9_62_id_ecSigTy³
,1L

	)

318 
	#SN_ecd§_w™h_Recomm’ded
 "ecd§-w™h-Recomm’ded"

	)

319 
	#NID_ecd§_w™h_Recomm’ded
 791

	)

320 
	#OBJ_ecd§_w™h_Recomm’ded
 
OBJ_X9_62_id_ecSigTy³
,2L

	)

322 
	#SN_ecd§_w™h_S³cif›d
 "ecd§-w™h-S³cif›d"

	)

323 
	#NID_ecd§_w™h_S³cif›d
 792

	)

324 
	#OBJ_ecd§_w™h_S³cif›d
 
OBJ_X9_62_id_ecSigTy³
,3L

	)

326 
	#SN_ecd§_w™h_SHA224
 "ecd§-w™h-SHA224"

	)

327 
	#NID_ecd§_w™h_SHA224
 793

	)

328 
	#OBJ_ecd§_w™h_SHA224
 
OBJ_ecd§_w™h_S³cif›d
,1L

	)

330 
	#SN_ecd§_w™h_SHA256
 "ecd§-w™h-SHA256"

	)

331 
	#NID_ecd§_w™h_SHA256
 794

	)

332 
	#OBJ_ecd§_w™h_SHA256
 
OBJ_ecd§_w™h_S³cif›d
,2L

	)

334 
	#SN_ecd§_w™h_SHA384
 "ecd§-w™h-SHA384"

	)

335 
	#NID_ecd§_w™h_SHA384
 795

	)

336 
	#OBJ_ecd§_w™h_SHA384
 
OBJ_ecd§_w™h_S³cif›d
,3L

	)

338 
	#SN_ecd§_w™h_SHA512
 "ecd§-w™h-SHA512"

	)

339 
	#NID_ecd§_w™h_SHA512
 796

	)

340 
	#OBJ_ecd§_w™h_SHA512
 
OBJ_ecd§_w™h_S³cif›d
,4L

	)

342 
	#OBJ_£cg_–lticCurve
 
OBJ_û¹icom_¬c
,0L

	)

344 
	#SN_£ı112r1
 "£ı112r1"

	)

345 
	#NID_£ı112r1
 704

	)

346 
	#OBJ_£ı112r1
 
OBJ_£cg_–lticCurve
,6L

	)

348 
	#SN_£ı112r2
 "£ı112r2"

	)

349 
	#NID_£ı112r2
 705

	)

350 
	#OBJ_£ı112r2
 
OBJ_£cg_–lticCurve
,7L

	)

352 
	#SN_£ı128r1
 "£ı128r1"

	)

353 
	#NID_£ı128r1
 706

	)

354 
	#OBJ_£ı128r1
 
OBJ_£cg_–lticCurve
,28L

	)

356 
	#SN_£ı128r2
 "£ı128r2"

	)

357 
	#NID_£ı128r2
 707

	)

358 
	#OBJ_£ı128r2
 
OBJ_£cg_–lticCurve
,29L

	)

360 
	#SN_£ı160k1
 "£ı160k1"

	)

361 
	#NID_£ı160k1
 708

	)

362 
	#OBJ_£ı160k1
 
OBJ_£cg_–lticCurve
,9L

	)

364 
	#SN_£ı160r1
 "£ı160r1"

	)

365 
	#NID_£ı160r1
 709

	)

366 
	#OBJ_£ı160r1
 
OBJ_£cg_–lticCurve
,8L

	)

368 
	#SN_£ı160r2
 "£ı160r2"

	)

369 
	#NID_£ı160r2
 710

	)

370 
	#OBJ_£ı160r2
 
OBJ_£cg_–lticCurve
,30L

	)

372 
	#SN_£ı192k1
 "£ı192k1"

	)

373 
	#NID_£ı192k1
 711

	)

374 
	#OBJ_£ı192k1
 
OBJ_£cg_–lticCurve
,31L

	)

376 
	#SN_£ı224k1
 "£ı224k1"

	)

377 
	#NID_£ı224k1
 712

	)

378 
	#OBJ_£ı224k1
 
OBJ_£cg_–lticCurve
,32L

	)

380 
	#SN_£ı224r1
 "£ı224r1"

	)

381 
	#NID_£ı224r1
 713

	)

382 
	#OBJ_£ı224r1
 
OBJ_£cg_–lticCurve
,33L

	)

384 
	#SN_£ı256k1
 "£ı256k1"

	)

385 
	#NID_£ı256k1
 714

	)

386 
	#OBJ_£ı256k1
 
OBJ_£cg_–lticCurve
,10L

	)

388 
	#SN_£ı384r1
 "£ı384r1"

	)

389 
	#NID_£ı384r1
 715

	)

390 
	#OBJ_£ı384r1
 
OBJ_£cg_–lticCurve
,34L

	)

392 
	#SN_£ı521r1
 "£ı521r1"

	)

393 
	#NID_£ı521r1
 716

	)

394 
	#OBJ_£ı521r1
 
OBJ_£cg_–lticCurve
,35L

	)

396 
	#SN_£ù113r1
 "£ù113r1"

	)

397 
	#NID_£ù113r1
 717

	)

398 
	#OBJ_£ù113r1
 
OBJ_£cg_–lticCurve
,4L

	)

400 
	#SN_£ù113r2
 "£ù113r2"

	)

401 
	#NID_£ù113r2
 718

	)

402 
	#OBJ_£ù113r2
 
OBJ_£cg_–lticCurve
,5L

	)

404 
	#SN_£ù131r1
 "£ù131r1"

	)

405 
	#NID_£ù131r1
 719

	)

406 
	#OBJ_£ù131r1
 
OBJ_£cg_–lticCurve
,22L

	)

408 
	#SN_£ù131r2
 "£ù131r2"

	)

409 
	#NID_£ù131r2
 720

	)

410 
	#OBJ_£ù131r2
 
OBJ_£cg_–lticCurve
,23L

	)

412 
	#SN_£ù163k1
 "£ù163k1"

	)

413 
	#NID_£ù163k1
 721

	)

414 
	#OBJ_£ù163k1
 
OBJ_£cg_–lticCurve
,1L

	)

416 
	#SN_£ù163r1
 "£ù163r1"

	)

417 
	#NID_£ù163r1
 722

	)

418 
	#OBJ_£ù163r1
 
OBJ_£cg_–lticCurve
,2L

	)

420 
	#SN_£ù163r2
 "£ù163r2"

	)

421 
	#NID_£ù163r2
 723

	)

422 
	#OBJ_£ù163r2
 
OBJ_£cg_–lticCurve
,15L

	)

424 
	#SN_£ù193r1
 "£ù193r1"

	)

425 
	#NID_£ù193r1
 724

	)

426 
	#OBJ_£ù193r1
 
OBJ_£cg_–lticCurve
,24L

	)

428 
	#SN_£ù193r2
 "£ù193r2"

	)

429 
	#NID_£ù193r2
 725

	)

430 
	#OBJ_£ù193r2
 
OBJ_£cg_–lticCurve
,25L

	)

432 
	#SN_£ù233k1
 "£ù233k1"

	)

433 
	#NID_£ù233k1
 726

	)

434 
	#OBJ_£ù233k1
 
OBJ_£cg_–lticCurve
,26L

	)

436 
	#SN_£ù233r1
 "£ù233r1"

	)

437 
	#NID_£ù233r1
 727

	)

438 
	#OBJ_£ù233r1
 
OBJ_£cg_–lticCurve
,27L

	)

440 
	#SN_£ù239k1
 "£ù239k1"

	)

441 
	#NID_£ù239k1
 728

	)

442 
	#OBJ_£ù239k1
 
OBJ_£cg_–lticCurve
,3L

	)

444 
	#SN_£ù283k1
 "£ù283k1"

	)

445 
	#NID_£ù283k1
 729

	)

446 
	#OBJ_£ù283k1
 
OBJ_£cg_–lticCurve
,16L

	)

448 
	#SN_£ù283r1
 "£ù283r1"

	)

449 
	#NID_£ù283r1
 730

	)

450 
	#OBJ_£ù283r1
 
OBJ_£cg_–lticCurve
,17L

	)

452 
	#SN_£ù409k1
 "£ù409k1"

	)

453 
	#NID_£ù409k1
 731

	)

454 
	#OBJ_£ù409k1
 
OBJ_£cg_–lticCurve
,36L

	)

456 
	#SN_£ù409r1
 "£ù409r1"

	)

457 
	#NID_£ù409r1
 732

	)

458 
	#OBJ_£ù409r1
 
OBJ_£cg_–lticCurve
,37L

	)

460 
	#SN_£ù571k1
 "£ù571k1"

	)

461 
	#NID_£ù571k1
 733

	)

462 
	#OBJ_£ù571k1
 
OBJ_£cg_–lticCurve
,38L

	)

464 
	#SN_£ù571r1
 "£ù571r1"

	)

465 
	#NID_£ù571r1
 734

	)

466 
	#OBJ_£ù571r1
 
OBJ_£cg_–lticCurve
,39L

	)

468 
	#OBJ_w­_wsg_idm_ecid
 
OBJ_w­_wsg
,4L

	)

470 
	#SN_w­_wsg_idm_ecid_ws1
 "w­-wsg-idm-ecid-ws1"

	)

471 
	#NID_w­_wsg_idm_ecid_ws1
 735

	)

472 
	#OBJ_w­_wsg_idm_ecid_ws1
 
OBJ_w­_wsg_idm_ecid
,1L

	)

474 
	#SN_w­_wsg_idm_ecid_ws3
 "w­-wsg-idm-ecid-ws3"

	)

475 
	#NID_w­_wsg_idm_ecid_ws3
 736

	)

476 
	#OBJ_w­_wsg_idm_ecid_ws3
 
OBJ_w­_wsg_idm_ecid
,3L

	)

478 
	#SN_w­_wsg_idm_ecid_ws4
 "w­-wsg-idm-ecid-ws4"

	)

479 
	#NID_w­_wsg_idm_ecid_ws4
 737

	)

480 
	#OBJ_w­_wsg_idm_ecid_ws4
 
OBJ_w­_wsg_idm_ecid
,4L

	)

482 
	#SN_w­_wsg_idm_ecid_ws5
 "w­-wsg-idm-ecid-ws5"

	)

483 
	#NID_w­_wsg_idm_ecid_ws5
 738

	)

484 
	#OBJ_w­_wsg_idm_ecid_ws5
 
OBJ_w­_wsg_idm_ecid
,5L

	)

486 
	#SN_w­_wsg_idm_ecid_ws6
 "w­-wsg-idm-ecid-ws6"

	)

487 
	#NID_w­_wsg_idm_ecid_ws6
 739

	)

488 
	#OBJ_w­_wsg_idm_ecid_ws6
 
OBJ_w­_wsg_idm_ecid
,6L

	)

490 
	#SN_w­_wsg_idm_ecid_ws7
 "w­-wsg-idm-ecid-ws7"

	)

491 
	#NID_w­_wsg_idm_ecid_ws7
 740

	)

492 
	#OBJ_w­_wsg_idm_ecid_ws7
 
OBJ_w­_wsg_idm_ecid
,7L

	)

494 
	#SN_w­_wsg_idm_ecid_ws8
 "w­-wsg-idm-ecid-ws8"

	)

495 
	#NID_w­_wsg_idm_ecid_ws8
 741

	)

496 
	#OBJ_w­_wsg_idm_ecid_ws8
 
OBJ_w­_wsg_idm_ecid
,8L

	)

498 
	#SN_w­_wsg_idm_ecid_ws9
 "w­-wsg-idm-ecid-ws9"

	)

499 
	#NID_w­_wsg_idm_ecid_ws9
 742

	)

500 
	#OBJ_w­_wsg_idm_ecid_ws9
 
OBJ_w­_wsg_idm_ecid
,9L

	)

502 
	#SN_w­_wsg_idm_ecid_ws10
 "w­-wsg-idm-ecid-ws10"

	)

503 
	#NID_w­_wsg_idm_ecid_ws10
 743

	)

504 
	#OBJ_w­_wsg_idm_ecid_ws10
 
OBJ_w­_wsg_idm_ecid
,10L

	)

506 
	#SN_w­_wsg_idm_ecid_ws11
 "w­-wsg-idm-ecid-ws11"

	)

507 
	#NID_w­_wsg_idm_ecid_ws11
 744

	)

508 
	#OBJ_w­_wsg_idm_ecid_ws11
 
OBJ_w­_wsg_idm_ecid
,11L

	)

510 
	#SN_w­_wsg_idm_ecid_ws12
 "w­-wsg-idm-ecid-ws12"

	)

511 
	#NID_w­_wsg_idm_ecid_ws12
 745

	)

512 
	#OBJ_w­_wsg_idm_ecid_ws12
 
OBJ_w­_wsg_idm_ecid
,12L

	)

514 
	#SN_ÿ¡5_cbc
 "CAST5-CBC"

	)

515 
	#LN_ÿ¡5_cbc
 "ÿ¡5-cbc"

	)

516 
	#NID_ÿ¡5_cbc
 108

	)

517 
	#OBJ_ÿ¡5_cbc
 
OBJ_ISO_US
,113533L,7L,66L,10L

	)

519 
	#SN_ÿ¡5_ecb
 "CAST5-ECB"

	)

520 
	#LN_ÿ¡5_ecb
 "ÿ¡5-ecb"

	)

521 
	#NID_ÿ¡5_ecb
 109

	)

523 
	#SN_ÿ¡5_cfb64
 "CAST5-CFB"

	)

524 
	#LN_ÿ¡5_cfb64
 "ÿ¡5-cfb"

	)

525 
	#NID_ÿ¡5_cfb64
 110

	)

527 
	#SN_ÿ¡5_ofb64
 "CAST5-OFB"

	)

528 
	#LN_ÿ¡5_ofb64
 "ÿ¡5-ofb"

	)

529 
	#NID_ÿ¡5_ofb64
 111

	)

531 
	#LN_pbeW™hMD5AndCa¡5_CBC
 "pbeW™hMD5AndCa¡5CBC"

	)

532 
	#NID_pbeW™hMD5AndCa¡5_CBC
 112

	)

533 
	#OBJ_pbeW™hMD5AndCa¡5_CBC
 
OBJ_ISO_US
,113533L,7L,66L,12L

	)

535 
	#SN_id_PasswÜdBa£dMAC
 "id-PasswÜdBa£dMAC"

	)

536 
	#LN_id_PasswÜdBa£dMAC
 "·sswÜd ba£d MAC"

	)

537 
	#NID_id_PasswÜdBa£dMAC
 782

	)

538 
	#OBJ_id_PasswÜdBa£dMAC
 
OBJ_ISO_US
,113533L,7L,66L,13L

	)

540 
	#SN_id_DHBa£dMac
 "id-DHBa£dMac"

	)

541 
	#LN_id_DHBa£dMac
 "Diff›-H–lmª ba£d MAC"

	)

542 
	#NID_id_DHBa£dMac
 783

	)

543 
	#OBJ_id_DHBa£dMac
 
OBJ_ISO_US
,113533L,7L,66L,30L

	)

545 
	#SN_r§dsi
 "r§dsi"

	)

546 
	#LN_r§dsi
 "RSA D©¨Secur™y, Inc."

	)

547 
	#NID_r§dsi
 1

	)

548 
	#OBJ_r§dsi
 
OBJ_ISO_US
,113549L

	)

550 
	#SN_pkcs
 "pkcs"

	)

551 
	#LN_pkcs
 "RSA D©¨Secur™y, Inc. PKCS"

	)

552 
	#NID_pkcs
 2

	)

553 
	#OBJ_pkcs
 
OBJ_r§dsi
,1L

	)

555 
	#SN_pkcs1
 "pkcs1"

	)

556 
	#NID_pkcs1
 186

	)

557 
	#OBJ_pkcs1
 
OBJ_pkcs
,1L

	)

559 
	#LN_r§Enüy±iÚ
 "r§Enüy±iÚ"

	)

560 
	#NID_r§Enüy±iÚ
 6

	)

561 
	#OBJ_r§Enüy±iÚ
 
OBJ_pkcs1
,1L

	)

563 
	#SN_md2W™hRSAEnüy±iÚ
 "RSA-MD2"

	)

564 
	#LN_md2W™hRSAEnüy±iÚ
 "md2W™hRSAEnüy±iÚ"

	)

565 
	#NID_md2W™hRSAEnüy±iÚ
 7

	)

566 
	#OBJ_md2W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,2L

	)

568 
	#SN_md4W™hRSAEnüy±iÚ
 "RSA-MD4"

	)

569 
	#LN_md4W™hRSAEnüy±iÚ
 "md4W™hRSAEnüy±iÚ"

	)

570 
	#NID_md4W™hRSAEnüy±iÚ
 396

	)

571 
	#OBJ_md4W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,3L

	)

573 
	#SN_md5W™hRSAEnüy±iÚ
 "RSA-MD5"

	)

574 
	#LN_md5W™hRSAEnüy±iÚ
 "md5W™hRSAEnüy±iÚ"

	)

575 
	#NID_md5W™hRSAEnüy±iÚ
 8

	)

576 
	#OBJ_md5W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,4L

	)

578 
	#SN_sha1W™hRSAEnüy±iÚ
 "RSA-SHA1"

	)

579 
	#LN_sha1W™hRSAEnüy±iÚ
 "sha1W™hRSAEnüy±iÚ"

	)

580 
	#NID_sha1W™hRSAEnüy±iÚ
 65

	)

581 
	#OBJ_sha1W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,5L

	)

583 
	#SN_r§esO«p
 "RSAES-OAEP"

	)

584 
	#LN_r§esO«p
 "r§esO«p"

	)

585 
	#NID_r§esO«p
 919

	)

586 
	#OBJ_r§esO«p
 
OBJ_pkcs1
,7L

	)

588 
	#SN_mgf1
 "MGF1"

	)

589 
	#LN_mgf1
 "mgf1"

	)

590 
	#NID_mgf1
 911

	)

591 
	#OBJ_mgf1
 
OBJ_pkcs1
,8L

	)

593 
	#SN_pS³cif›d
 "PSPECIFIED"

	)

594 
	#LN_pS³cif›d
 "pS³cif›d"

	)

595 
	#NID_pS³cif›d
 935

	)

596 
	#OBJ_pS³cif›d
 
OBJ_pkcs1
,9L

	)

598 
	#SN_r§s§Pss
 "RSASSA-PSS"

	)

599 
	#LN_r§s§Pss
 "r§s§Pss"

	)

600 
	#NID_r§s§Pss
 912

	)

601 
	#OBJ_r§s§Pss
 
OBJ_pkcs1
,10L

	)

603 
	#SN_sha256W™hRSAEnüy±iÚ
 "RSA-SHA256"

	)

604 
	#LN_sha256W™hRSAEnüy±iÚ
 "sha256W™hRSAEnüy±iÚ"

	)

605 
	#NID_sha256W™hRSAEnüy±iÚ
 668

	)

606 
	#OBJ_sha256W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,11L

	)

608 
	#SN_sha384W™hRSAEnüy±iÚ
 "RSA-SHA384"

	)

609 
	#LN_sha384W™hRSAEnüy±iÚ
 "sha384W™hRSAEnüy±iÚ"

	)

610 
	#NID_sha384W™hRSAEnüy±iÚ
 669

	)

611 
	#OBJ_sha384W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,12L

	)

613 
	#SN_sha512W™hRSAEnüy±iÚ
 "RSA-SHA512"

	)

614 
	#LN_sha512W™hRSAEnüy±iÚ
 "sha512W™hRSAEnüy±iÚ"

	)

615 
	#NID_sha512W™hRSAEnüy±iÚ
 670

	)

616 
	#OBJ_sha512W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,13L

	)

618 
	#SN_sha224W™hRSAEnüy±iÚ
 "RSA-SHA224"

	)

619 
	#LN_sha224W™hRSAEnüy±iÚ
 "sha224W™hRSAEnüy±iÚ"

	)

620 
	#NID_sha224W™hRSAEnüy±iÚ
 671

	)

621 
	#OBJ_sha224W™hRSAEnüy±iÚ
 
OBJ_pkcs1
,14L

	)

623 
	#SN_pkcs3
 "pkcs3"

	)

624 
	#NID_pkcs3
 27

	)

625 
	#OBJ_pkcs3
 
OBJ_pkcs
,3L

	)

627 
	#LN_dhKeyAg»em’t
 "dhKeyAg»em’t"

	)

628 
	#NID_dhKeyAg»em’t
 28

	)

629 
	#OBJ_dhKeyAg»em’t
 
OBJ_pkcs3
,1L

	)

631 
	#SN_pkcs5
 "pkcs5"

	)

632 
	#NID_pkcs5
 187

	)

633 
	#OBJ_pkcs5
 
OBJ_pkcs
,5L

	)

635 
	#SN_pbeW™hMD2AndDES_CBC
 "PBE-MD2-DES"

	)

636 
	#LN_pbeW™hMD2AndDES_CBC
 "pbeW™hMD2AndDES-CBC"

	)

637 
	#NID_pbeW™hMD2AndDES_CBC
 9

	)

638 
	#OBJ_pbeW™hMD2AndDES_CBC
 
OBJ_pkcs5
,1L

	)

640 
	#SN_pbeW™hMD5AndDES_CBC
 "PBE-MD5-DES"

	)

641 
	#LN_pbeW™hMD5AndDES_CBC
 "pbeW™hMD5AndDES-CBC"

	)

642 
	#NID_pbeW™hMD5AndDES_CBC
 10

	)

643 
	#OBJ_pbeW™hMD5AndDES_CBC
 
OBJ_pkcs5
,3L

	)

645 
	#SN_pbeW™hMD2AndRC2_CBC
 "PBE-MD2-RC2-64"

	)

646 
	#LN_pbeW™hMD2AndRC2_CBC
 "pbeW™hMD2AndRC2-CBC"

	)

647 
	#NID_pbeW™hMD2AndRC2_CBC
 168

	)

648 
	#OBJ_pbeW™hMD2AndRC2_CBC
 
OBJ_pkcs5
,4L

	)

650 
	#SN_pbeW™hMD5AndRC2_CBC
 "PBE-MD5-RC2-64"

	)

651 
	#LN_pbeW™hMD5AndRC2_CBC
 "pbeW™hMD5AndRC2-CBC"

	)

652 
	#NID_pbeW™hMD5AndRC2_CBC
 169

	)

653 
	#OBJ_pbeW™hMD5AndRC2_CBC
 
OBJ_pkcs5
,6L

	)

655 
	#SN_pbeW™hSHA1AndDES_CBC
 "PBE-SHA1-DES"

	)

656 
	#LN_pbeW™hSHA1AndDES_CBC
 "pbeW™hSHA1AndDES-CBC"

	)

657 
	#NID_pbeW™hSHA1AndDES_CBC
 170

	)

658 
	#OBJ_pbeW™hSHA1AndDES_CBC
 
OBJ_pkcs5
,10L

	)

660 
	#SN_pbeW™hSHA1AndRC2_CBC
 "PBE-SHA1-RC2-64"

	)

661 
	#LN_pbeW™hSHA1AndRC2_CBC
 "pbeW™hSHA1AndRC2-CBC"

	)

662 
	#NID_pbeW™hSHA1AndRC2_CBC
 68

	)

663 
	#OBJ_pbeW™hSHA1AndRC2_CBC
 
OBJ_pkcs5
,11L

	)

665 
	#LN_id_pbkdf2
 "PBKDF2"

	)

666 
	#NID_id_pbkdf2
 69

	)

667 
	#OBJ_id_pbkdf2
 
OBJ_pkcs5
,12L

	)

669 
	#LN_pbes2
 "PBES2"

	)

670 
	#NID_pbes2
 161

	)

671 
	#OBJ_pbes2
 
OBJ_pkcs5
,13L

	)

673 
	#LN_pbmac1
 "PBMAC1"

	)

674 
	#NID_pbmac1
 162

	)

675 
	#OBJ_pbmac1
 
OBJ_pkcs5
,14L

	)

677 
	#SN_pkcs7
 "pkcs7"

	)

678 
	#NID_pkcs7
 20

	)

679 
	#OBJ_pkcs7
 
OBJ_pkcs
,7L

	)

681 
	#LN_pkcs7_d©a
 "pkcs7-d©a"

	)

682 
	#NID_pkcs7_d©a
 21

	)

683 
	#OBJ_pkcs7_d©a
 
OBJ_pkcs7
,1L

	)

685 
	#LN_pkcs7_sigÃd
 "pkcs7-sigÃdD©a"

	)

686 
	#NID_pkcs7_sigÃd
 22

	)

687 
	#OBJ_pkcs7_sigÃd
 
OBJ_pkcs7
,2L

	)

689 
	#LN_pkcs7_’v–İed
 "pkcs7-’v–İedD©a"

	)

690 
	#NID_pkcs7_’v–İed
 23

	)

691 
	#OBJ_pkcs7_’v–İed
 
OBJ_pkcs7
,3L

	)

693 
	#LN_pkcs7_sigÃdAndEnv–İed
 "pkcs7-sigÃdAndEnv–İedD©a"

	)

694 
	#NID_pkcs7_sigÃdAndEnv–İed
 24

	)

695 
	#OBJ_pkcs7_sigÃdAndEnv–İed
 
OBJ_pkcs7
,4L

	)

697 
	#LN_pkcs7_dige¡
 "pkcs7-dige¡D©a"

	)

698 
	#NID_pkcs7_dige¡
 25

	)

699 
	#OBJ_pkcs7_dige¡
 
OBJ_pkcs7
,5L

	)

701 
	#LN_pkcs7_’üy±ed
 "pkcs7-’üy±edD©a"

	)

702 
	#NID_pkcs7_’üy±ed
 26

	)

703 
	#OBJ_pkcs7_’üy±ed
 
OBJ_pkcs7
,6L

	)

705 
	#SN_pkcs9
 "pkcs9"

	)

706 
	#NID_pkcs9
 47

	)

707 
	#OBJ_pkcs9
 
OBJ_pkcs
,9L

	)

709 
	#LN_pkcs9_emaAdd»ss
 "emaAdd»ss"

	)

710 
	#NID_pkcs9_emaAdd»ss
 48

	)

711 
	#OBJ_pkcs9_emaAdd»ss
 
OBJ_pkcs9
,1L

	)

713 
	#LN_pkcs9_un¡ruùu»dName
 "un¡ruùu»dName"

	)

714 
	#NID_pkcs9_un¡ruùu»dName
 49

	)

715 
	#OBJ_pkcs9_un¡ruùu»dName
 
OBJ_pkcs9
,2L

	)

717 
	#LN_pkcs9_cÚ‹ÁTy³
 "cÚ‹ÁTy³"

	)

718 
	#NID_pkcs9_cÚ‹ÁTy³
 50

	)

719 
	#OBJ_pkcs9_cÚ‹ÁTy³
 
OBJ_pkcs9
,3L

	)

721 
	#LN_pkcs9_mes§geDige¡
 "mes§geDige¡"

	)

722 
	#NID_pkcs9_mes§geDige¡
 51

	)

723 
	#OBJ_pkcs9_mes§geDige¡
 
OBJ_pkcs9
,4L

	)

725 
	#LN_pkcs9_signšgTime
 "signšgTime"

	)

726 
	#NID_pkcs9_signšgTime
 52

	)

727 
	#OBJ_pkcs9_signšgTime
 
OBJ_pkcs9
,5L

	)

729 
	#LN_pkcs9_couÁ”sigÇtu»
 "couÁ”sigÇtu»"

	)

730 
	#NID_pkcs9_couÁ”sigÇtu»
 53

	)

731 
	#OBJ_pkcs9_couÁ”sigÇtu»
 
OBJ_pkcs9
,6L

	)

733 
	#LN_pkcs9_ch®ËngePasswÜd
 "ch®ËngePasswÜd"

	)

734 
	#NID_pkcs9_ch®ËngePasswÜd
 54

	)

735 
	#OBJ_pkcs9_ch®ËngePasswÜd
 
OBJ_pkcs9
,7L

	)

737 
	#LN_pkcs9_un¡ruùu»dAdd»ss
 "un¡ruùu»dAdd»ss"

	)

738 
	#NID_pkcs9_un¡ruùu»dAdd»ss
 55

	)

739 
	#OBJ_pkcs9_un¡ruùu»dAdd»ss
 
OBJ_pkcs9
,8L

	)

741 
	#LN_pkcs9_extC”tA‰ribu‹s
 "ex‹ndedC”tifiÿ‹A‰ribu‹s"

	)

742 
	#NID_pkcs9_extC”tA‰ribu‹s
 56

	)

743 
	#OBJ_pkcs9_extC”tA‰ribu‹s
 
OBJ_pkcs9
,9L

	)

745 
	#SN_ext_»q
 "extReq"

	)

746 
	#LN_ext_»q
 "Ex‹nsiÚ Reque¡"

	)

747 
	#NID_ext_»q
 172

	)

748 
	#OBJ_ext_»q
 
OBJ_pkcs9
,14L

	)

750 
	#SN_SMIMEC­ab™›s
 "SMIME-CAPS"

	)

751 
	#LN_SMIMEC­ab™›s
 "S/MIME C­ab™›s"

	)

752 
	#NID_SMIMEC­ab™›s
 167

	)

753 
	#OBJ_SMIMEC­ab™›s
 
OBJ_pkcs9
,15L

	)

755 
	#SN_SMIME
 "SMIME"

	)

756 
	#LN_SMIME
 "S/MIME"

	)

757 
	#NID_SMIME
 188

	)

758 
	#OBJ_SMIME
 
OBJ_pkcs9
,16L

	)

760 
	#SN_id_smime_mod
 "id-smime-mod"

	)

761 
	#NID_id_smime_mod
 189

	)

762 
	#OBJ_id_smime_mod
 
OBJ_SMIME
,0L

	)

764 
	#SN_id_smime_ù
 "id-smime-ù"

	)

765 
	#NID_id_smime_ù
 190

	)

766 
	#OBJ_id_smime_ù
 
OBJ_SMIME
,1L

	)

768 
	#SN_id_smime_¯
 "id-smime-¯"

	)

769 
	#NID_id_smime_¯
 191

	)

770 
	#OBJ_id_smime_¯
 
OBJ_SMIME
,2L

	)

772 
	#SN_id_smime_®g
 "id-smime-®g"

	)

773 
	#NID_id_smime_®g
 192

	)

774 
	#OBJ_id_smime_®g
 
OBJ_SMIME
,3L

	)

776 
	#SN_id_smime_cd
 "id-smime-cd"

	)

777 
	#NID_id_smime_cd
 193

	)

778 
	#OBJ_id_smime_cd
 
OBJ_SMIME
,4L

	)

780 
	#SN_id_smime_¥q
 "id-smime-¥q"

	)

781 
	#NID_id_smime_¥q
 194

	)

782 
	#OBJ_id_smime_¥q
 
OBJ_SMIME
,5L

	)

784 
	#SN_id_smime_ùi
 "id-smime-ùi"

	)

785 
	#NID_id_smime_ùi
 195

	)

786 
	#OBJ_id_smime_ùi
 
OBJ_SMIME
,6L

	)

788 
	#SN_id_smime_mod_cms
 "id-smime-mod-cms"

	)

789 
	#NID_id_smime_mod_cms
 196

	)

790 
	#OBJ_id_smime_mod_cms
 
OBJ_id_smime_mod
,1L

	)

792 
	#SN_id_smime_mod_ess
 "id-smime-mod-ess"

	)

793 
	#NID_id_smime_mod_ess
 197

	)

794 
	#OBJ_id_smime_mod_ess
 
OBJ_id_smime_mod
,2L

	)

796 
	#SN_id_smime_mod_oid
 "id-smime-mod-oid"

	)

797 
	#NID_id_smime_mod_oid
 198

	)

798 
	#OBJ_id_smime_mod_oid
 
OBJ_id_smime_mod
,3L

	)

800 
	#SN_id_smime_mod_msg_v3
 "id-smime-mod-msg-v3"

	)

801 
	#NID_id_smime_mod_msg_v3
 199

	)

802 
	#OBJ_id_smime_mod_msg_v3
 
OBJ_id_smime_mod
,4L

	)

804 
	#SN_id_smime_mod_‘s_eSigÇtu»_88
 "id-smime-mod-‘s-eSigÇtu»-88"

	)

805 
	#NID_id_smime_mod_‘s_eSigÇtu»_88
 200

	)

806 
	#OBJ_id_smime_mod_‘s_eSigÇtu»_88
 
OBJ_id_smime_mod
,5L

	)

808 
	#SN_id_smime_mod_‘s_eSigÇtu»_97
 "id-smime-mod-‘s-eSigÇtu»-97"

	)

809 
	#NID_id_smime_mod_‘s_eSigÇtu»_97
 201

	)

810 
	#OBJ_id_smime_mod_‘s_eSigÇtu»_97
 
OBJ_id_smime_mod
,6L

	)

812 
	#SN_id_smime_mod_‘s_eSigPŞicy_88
 "id-smime-mod-‘s-eSigPŞicy-88"

	)

813 
	#NID_id_smime_mod_‘s_eSigPŞicy_88
 202

	)

814 
	#OBJ_id_smime_mod_‘s_eSigPŞicy_88
 
OBJ_id_smime_mod
,7L

	)

816 
	#SN_id_smime_mod_‘s_eSigPŞicy_97
 "id-smime-mod-‘s-eSigPŞicy-97"

	)

817 
	#NID_id_smime_mod_‘s_eSigPŞicy_97
 203

	)

818 
	#OBJ_id_smime_mod_‘s_eSigPŞicy_97
 
OBJ_id_smime_mod
,8L

	)

820 
	#SN_id_smime_ù_»ût
 "id-smime-ù-»ût"

	)

821 
	#NID_id_smime_ù_»ût
 204

	)

822 
	#OBJ_id_smime_ù_»ût
 
OBJ_id_smime_ù
,1L

	)

824 
	#SN_id_smime_ù_authD©a
 "id-smime-ù-authD©a"

	)

825 
	#NID_id_smime_ù_authD©a
 205

	)

826 
	#OBJ_id_smime_ù_authD©a
 
OBJ_id_smime_ù
,2L

	)

828 
	#SN_id_smime_ù_publishC”t
 "id-smime-ù-publishC”t"

	)

829 
	#NID_id_smime_ù_publishC”t
 206

	)

830 
	#OBJ_id_smime_ù_publishC”t
 
OBJ_id_smime_ù
,3L

	)

832 
	#SN_id_smime_ù_TSTInfo
 "id-smime-ù-TSTInfo"

	)

833 
	#NID_id_smime_ù_TSTInfo
 207

	)

834 
	#OBJ_id_smime_ù_TSTInfo
 
OBJ_id_smime_ù
,4L

	)

836 
	#SN_id_smime_ù_TDTInfo
 "id-smime-ù-TDTInfo"

	)

837 
	#NID_id_smime_ù_TDTInfo
 208

	)

838 
	#OBJ_id_smime_ù_TDTInfo
 
OBJ_id_smime_ù
,5L

	)

840 
	#SN_id_smime_ù_cÚ‹ÁInfo
 "id-smime-ù-cÚ‹ÁInfo"

	)

841 
	#NID_id_smime_ù_cÚ‹ÁInfo
 209

	)

842 
	#OBJ_id_smime_ù_cÚ‹ÁInfo
 
OBJ_id_smime_ù
,6L

	)

844 
	#SN_id_smime_ù_DVCSReque¡D©a
 "id-smime-ù-DVCSReque¡D©a"

	)

845 
	#NID_id_smime_ù_DVCSReque¡D©a
 210

	)

846 
	#OBJ_id_smime_ù_DVCSReque¡D©a
 
OBJ_id_smime_ù
,7L

	)

848 
	#SN_id_smime_ù_DVCSRe¥Ú£D©a
 "id-smime-ù-DVCSRe¥Ú£D©a"

	)

849 
	#NID_id_smime_ù_DVCSRe¥Ú£D©a
 211

	)

850 
	#OBJ_id_smime_ù_DVCSRe¥Ú£D©a
 
OBJ_id_smime_ù
,8L

	)

852 
	#SN_id_smime_ù_com´es£dD©a
 "id-smime-ù-com´es£dD©a"

	)

853 
	#NID_id_smime_ù_com´es£dD©a
 786

	)

854 
	#OBJ_id_smime_ù_com´es£dD©a
 
OBJ_id_smime_ù
,9L

	)

856 
	#SN_id_ù_asciiTextW™hCRLF
 "id-ù-asciiTextW™hCRLF"

	)

857 
	#NID_id_ù_asciiTextW™hCRLF
 787

	)

858 
	#OBJ_id_ù_asciiTextW™hCRLF
 
OBJ_id_smime_ù
,27L

	)

860 
	#SN_id_smime_¯_»ûtReque¡
 "id-smime-¯-»ûtReque¡"

	)

861 
	#NID_id_smime_¯_»ûtReque¡
 212

	)

862 
	#OBJ_id_smime_¯_»ûtReque¡
 
OBJ_id_smime_¯
,1L

	)

864 
	#SN_id_smime_¯_£cur™yLab–
 "id-smime-¯-£cur™yLab–"

	)

865 
	#NID_id_smime_¯_£cur™yLab–
 213

	)

866 
	#OBJ_id_smime_¯_£cur™yLab–
 
OBJ_id_smime_¯
,2L

	)

868 
	#SN_id_smime_¯_mlEx·ndHi¡Üy
 "id-smime-¯-mlEx·ndHi¡Üy"

	)

869 
	#NID_id_smime_¯_mlEx·ndHi¡Üy
 214

	)

870 
	#OBJ_id_smime_¯_mlEx·ndHi¡Üy
 
OBJ_id_smime_¯
,3L

	)

872 
	#SN_id_smime_¯_cÚ‹ÁHšt
 "id-smime-¯-cÚ‹ÁHšt"

	)

873 
	#NID_id_smime_¯_cÚ‹ÁHšt
 215

	)

874 
	#OBJ_id_smime_¯_cÚ‹ÁHšt
 
OBJ_id_smime_¯
,4L

	)

876 
	#SN_id_smime_¯_msgSigDige¡
 "id-smime-¯-msgSigDige¡"

	)

877 
	#NID_id_smime_¯_msgSigDige¡
 216

	)

878 
	#OBJ_id_smime_¯_msgSigDige¡
 
OBJ_id_smime_¯
,5L

	)

880 
	#SN_id_smime_¯_’ÿpCÚ‹ÁTy³
 "id-smime-¯-’ÿpCÚ‹ÁTy³"

	)

881 
	#NID_id_smime_¯_’ÿpCÚ‹ÁTy³
 217

	)

882 
	#OBJ_id_smime_¯_’ÿpCÚ‹ÁTy³
 
OBJ_id_smime_¯
,6L

	)

884 
	#SN_id_smime_¯_cÚ‹ÁId’tif›r
 "id-smime-¯-cÚ‹ÁId’tif›r"

	)

885 
	#NID_id_smime_¯_cÚ‹ÁId’tif›r
 218

	)

886 
	#OBJ_id_smime_¯_cÚ‹ÁId’tif›r
 
OBJ_id_smime_¯
,7L

	)

888 
	#SN_id_smime_¯_macV®ue
 "id-smime-¯-macV®ue"

	)

889 
	#NID_id_smime_¯_macV®ue
 219

	)

890 
	#OBJ_id_smime_¯_macV®ue
 
OBJ_id_smime_¯
,8L

	)

892 
	#SN_id_smime_¯_equiv®’tLab–s
 "id-smime-¯-equiv®’tLab–s"

	)

893 
	#NID_id_smime_¯_equiv®’tLab–s
 220

	)

894 
	#OBJ_id_smime_¯_equiv®’tLab–s
 
OBJ_id_smime_¯
,9L

	)

896 
	#SN_id_smime_¯_cÚ‹ÁReã»nû
 "id-smime-¯-cÚ‹ÁReã»nû"

	)

897 
	#NID_id_smime_¯_cÚ‹ÁReã»nû
 221

	)

898 
	#OBJ_id_smime_¯_cÚ‹ÁReã»nû
 
OBJ_id_smime_¯
,10L

	)

900 
	#SN_id_smime_¯_’üypKeyP»f
 "id-smime-¯-’üypKeyP»f"

	)

901 
	#NID_id_smime_¯_’üypKeyP»f
 222

	)

902 
	#OBJ_id_smime_¯_’üypKeyP»f
 
OBJ_id_smime_¯
,11L

	)

904 
	#SN_id_smime_¯_signšgC”tifiÿ‹
 "id-smime-¯-signšgC”tifiÿ‹"

	)

905 
	#NID_id_smime_¯_signšgC”tifiÿ‹
 223

	)

906 
	#OBJ_id_smime_¯_signšgC”tifiÿ‹
 
OBJ_id_smime_¯
,12L

	)

908 
	#SN_id_smime_¯_smimeEnüy±C”ts
 "id-smime-¯-smimeEnüy±C”ts"

	)

909 
	#NID_id_smime_¯_smimeEnüy±C”ts
 224

	)

910 
	#OBJ_id_smime_¯_smimeEnüy±C”ts
 
OBJ_id_smime_¯
,13L

	)

912 
	#SN_id_smime_¯_timeSmpTok’
 "id-smime-¯-timeSmpTok’"

	)

913 
	#NID_id_smime_¯_timeSmpTok’
 225

	)

914 
	#OBJ_id_smime_¯_timeSmpTok’
 
OBJ_id_smime_¯
,14L

	)

916 
	#SN_id_smime_¯_‘s_sigPŞicyId
 "id-smime-¯-‘s-sigPŞicyId"

	)

917 
	#NID_id_smime_¯_‘s_sigPŞicyId
 226

	)

918 
	#OBJ_id_smime_¯_‘s_sigPŞicyId
 
OBJ_id_smime_¯
,15L

	)

920 
	#SN_id_smime_¯_‘s_comm™m’tTy³
 "id-smime-¯-‘s-comm™m’tTy³"

	)

921 
	#NID_id_smime_¯_‘s_comm™m’tTy³
 227

	)

922 
	#OBJ_id_smime_¯_‘s_comm™m’tTy³
 
OBJ_id_smime_¯
,16L

	)

924 
	#SN_id_smime_¯_‘s_sigÃrLoÿtiÚ
 "id-smime-¯-‘s-sigÃrLoÿtiÚ"

	)

925 
	#NID_id_smime_¯_‘s_sigÃrLoÿtiÚ
 228

	)

926 
	#OBJ_id_smime_¯_‘s_sigÃrLoÿtiÚ
 
OBJ_id_smime_¯
,17L

	)

928 
	#SN_id_smime_¯_‘s_sigÃrA‰r
 "id-smime-¯-‘s-sigÃrA‰r"

	)

929 
	#NID_id_smime_¯_‘s_sigÃrA‰r
 229

	)

930 
	#OBJ_id_smime_¯_‘s_sigÃrA‰r
 
OBJ_id_smime_¯
,18L

	)

932 
	#SN_id_smime_¯_‘s_Ùh”SigC”t
 "id-smime-¯-‘s-Ùh”SigC”t"

	)

933 
	#NID_id_smime_¯_‘s_Ùh”SigC”t
 230

	)

934 
	#OBJ_id_smime_¯_‘s_Ùh”SigC”t
 
OBJ_id_smime_¯
,19L

	)

936 
	#SN_id_smime_¯_‘s_cÚ‹ÁTime¡amp
 "id-smime-¯-‘s-cÚ‹ÁTime¡amp"

	)

937 
	#NID_id_smime_¯_‘s_cÚ‹ÁTime¡amp
 231

	)

938 
	#OBJ_id_smime_¯_‘s_cÚ‹ÁTime¡amp
 
OBJ_id_smime_¯
,20L

	)

940 
	#SN_id_smime_¯_‘s_C”tifiÿ‹Refs
 "id-smime-¯-‘s-C”tifiÿ‹Refs"

	)

941 
	#NID_id_smime_¯_‘s_C”tifiÿ‹Refs
 232

	)

942 
	#OBJ_id_smime_¯_‘s_C”tifiÿ‹Refs
 
OBJ_id_smime_¯
,21L

	)

944 
	#SN_id_smime_¯_‘s_RevoÿtiÚRefs
 "id-smime-¯-‘s-RevoÿtiÚRefs"

	)

945 
	#NID_id_smime_¯_‘s_RevoÿtiÚRefs
 233

	)

946 
	#OBJ_id_smime_¯_‘s_RevoÿtiÚRefs
 
OBJ_id_smime_¯
,22L

	)

948 
	#SN_id_smime_¯_‘s_û¹V®ues
 "id-smime-¯-‘s-û¹V®ues"

	)

949 
	#NID_id_smime_¯_‘s_û¹V®ues
 234

	)

950 
	#OBJ_id_smime_¯_‘s_û¹V®ues
 
OBJ_id_smime_¯
,23L

	)

952 
	#SN_id_smime_¯_‘s_»voÿtiÚV®ues
 "id-smime-¯-‘s-»voÿtiÚV®ues"

	)

953 
	#NID_id_smime_¯_‘s_»voÿtiÚV®ues
 235

	)

954 
	#OBJ_id_smime_¯_‘s_»voÿtiÚV®ues
 
OBJ_id_smime_¯
,24L

	)

956 
	#SN_id_smime_¯_‘s_escTimeSmp
 "id-smime-¯-‘s-escTimeSmp"

	)

957 
	#NID_id_smime_¯_‘s_escTimeSmp
 236

	)

958 
	#OBJ_id_smime_¯_‘s_escTimeSmp
 
OBJ_id_smime_¯
,25L

	)

960 
	#SN_id_smime_¯_‘s_û¹CRLTime¡amp
 "id-smime-¯-‘s-û¹CRLTime¡amp"

	)

961 
	#NID_id_smime_¯_‘s_û¹CRLTime¡amp
 237

	)

962 
	#OBJ_id_smime_¯_‘s_û¹CRLTime¡amp
 
OBJ_id_smime_¯
,26L

	)

964 
	#SN_id_smime_¯_‘s_¬chiveTimeSmp
 "id-smime-¯-‘s-¬chiveTimeSmp"

	)

965 
	#NID_id_smime_¯_‘s_¬chiveTimeSmp
 238

	)

966 
	#OBJ_id_smime_¯_‘s_¬chiveTimeSmp
 
OBJ_id_smime_¯
,27L

	)

968 
	#SN_id_smime_¯_sigÇtu»Ty³
 "id-smime-¯-sigÇtu»Ty³"

	)

969 
	#NID_id_smime_¯_sigÇtu»Ty³
 239

	)

970 
	#OBJ_id_smime_¯_sigÇtu»Ty³
 
OBJ_id_smime_¯
,28L

	)

972 
	#SN_id_smime_¯_dvcs_dvc
 "id-smime-¯-dvcs-dvc"

	)

973 
	#NID_id_smime_¯_dvcs_dvc
 240

	)

974 
	#OBJ_id_smime_¯_dvcs_dvc
 
OBJ_id_smime_¯
,29L

	)

976 
	#SN_id_smime_®g_ESDHw™h3DES
 "id-smime-®g-ESDHw™h3DES"

	)

977 
	#NID_id_smime_®g_ESDHw™h3DES
 241

	)

978 
	#OBJ_id_smime_®g_ESDHw™h3DES
 
OBJ_id_smime_®g
,1L

	)

980 
	#SN_id_smime_®g_ESDHw™hRC2
 "id-smime-®g-ESDHw™hRC2"

	)

981 
	#NID_id_smime_®g_ESDHw™hRC2
 242

	)

982 
	#OBJ_id_smime_®g_ESDHw™hRC2
 
OBJ_id_smime_®g
,2L

	)

984 
	#SN_id_smime_®g_3DESw¿p
 "id-smime-®g-3DESw¿p"

	)

985 
	#NID_id_smime_®g_3DESw¿p
 243

	)

986 
	#OBJ_id_smime_®g_3DESw¿p
 
OBJ_id_smime_®g
,3L

	)

988 
	#SN_id_smime_®g_RC2w¿p
 "id-smime-®g-RC2w¿p"

	)

989 
	#NID_id_smime_®g_RC2w¿p
 244

	)

990 
	#OBJ_id_smime_®g_RC2w¿p
 
OBJ_id_smime_®g
,4L

	)

992 
	#SN_id_smime_®g_ESDH
 "id-smime-®g-ESDH"

	)

993 
	#NID_id_smime_®g_ESDH
 245

	)

994 
	#OBJ_id_smime_®g_ESDH
 
OBJ_id_smime_®g
,5L

	)

996 
	#SN_id_smime_®g_CMS3DESw¿p
 "id-smime-®g-CMS3DESw¿p"

	)

997 
	#NID_id_smime_®g_CMS3DESw¿p
 246

	)

998 
	#OBJ_id_smime_®g_CMS3DESw¿p
 
OBJ_id_smime_®g
,6L

	)

1000 
	#SN_id_smime_®g_CMSRC2w¿p
 "id-smime-®g-CMSRC2w¿p"

	)

1001 
	#NID_id_smime_®g_CMSRC2w¿p
 247

	)

1002 
	#OBJ_id_smime_®g_CMSRC2w¿p
 
OBJ_id_smime_®g
,7L

	)

1004 
	#SN_id_®g_PWRI_KEK
 "id-®g-PWRI-KEK"

	)

1005 
	#NID_id_®g_PWRI_KEK
 893

	)

1006 
	#OBJ_id_®g_PWRI_KEK
 
OBJ_id_smime_®g
,9L

	)

1008 
	#SN_id_smime_cd_ld­
 "id-smime-cd-ld­"

	)

1009 
	#NID_id_smime_cd_ld­
 248

	)

1010 
	#OBJ_id_smime_cd_ld­
 
OBJ_id_smime_cd
,1L

	)

1012 
	#SN_id_smime_¥q_‘s_sqt_uri
 "id-smime-¥q-‘s-sqt-uri"

	)

1013 
	#NID_id_smime_¥q_‘s_sqt_uri
 249

	)

1014 
	#OBJ_id_smime_¥q_‘s_sqt_uri
 
OBJ_id_smime_¥q
,1L

	)

1016 
	#SN_id_smime_¥q_‘s_sqt_unÙiû
 "id-smime-¥q-‘s-sqt-unÙiû"

	)

1017 
	#NID_id_smime_¥q_‘s_sqt_unÙiû
 250

	)

1018 
	#OBJ_id_smime_¥q_‘s_sqt_unÙiû
 
OBJ_id_smime_¥q
,2L

	)

1020 
	#SN_id_smime_ùi_‘s_´oofOfOrigš
 "id-smime-ùi-‘s-´oofOfOrigš"

	)

1021 
	#NID_id_smime_ùi_‘s_´oofOfOrigš
 251

	)

1022 
	#OBJ_id_smime_ùi_‘s_´oofOfOrigš
 
OBJ_id_smime_ùi
,1L

	)

1024 
	#SN_id_smime_ùi_‘s_´oofOfReût
 "id-smime-ùi-‘s-´oofOfReût"

	)

1025 
	#NID_id_smime_ùi_‘s_´oofOfReût
 252

	)

1026 
	#OBJ_id_smime_ùi_‘s_´oofOfReût
 
OBJ_id_smime_ùi
,2L

	)

1028 
	#SN_id_smime_ùi_‘s_´oofOfD–iv”y
 "id-smime-ùi-‘s-´oofOfD–iv”y"

	)

1029 
	#NID_id_smime_ùi_‘s_´oofOfD–iv”y
 253

	)

1030 
	#OBJ_id_smime_ùi_‘s_´oofOfD–iv”y
 
OBJ_id_smime_ùi
,3L

	)

1032 
	#SN_id_smime_ùi_‘s_´oofOfS’d”
 "id-smime-ùi-‘s-´oofOfS’d”"

	)

1033 
	#NID_id_smime_ùi_‘s_´oofOfS’d”
 254

	)

1034 
	#OBJ_id_smime_ùi_‘s_´oofOfS’d”
 
OBJ_id_smime_ùi
,4L

	)

1036 
	#SN_id_smime_ùi_‘s_´oofOfAµrov®
 "id-smime-ùi-‘s-´oofOfAµrov®"

	)

1037 
	#NID_id_smime_ùi_‘s_´oofOfAµrov®
 255

	)

1038 
	#OBJ_id_smime_ùi_‘s_´oofOfAµrov®
 
OBJ_id_smime_ùi
,5L

	)

1040 
	#SN_id_smime_ùi_‘s_´oofOfC»©iÚ
 "id-smime-ùi-‘s-´oofOfC»©iÚ"

	)

1041 
	#NID_id_smime_ùi_‘s_´oofOfC»©iÚ
 256

	)

1042 
	#OBJ_id_smime_ùi_‘s_´oofOfC»©iÚ
 
OBJ_id_smime_ùi
,6L

	)

1044 
	#LN_ä›ndlyName
 "ä›ndlyName"

	)

1045 
	#NID_ä›ndlyName
 156

	)

1046 
	#OBJ_ä›ndlyName
 
OBJ_pkcs9
,20L

	)

1048 
	#LN_loÿlKeyID
 "loÿlKeyID"

	)

1049 
	#NID_loÿlKeyID
 157

	)

1050 
	#OBJ_loÿlKeyID
 
OBJ_pkcs9
,21L

	)

1052 
	#SN_ms_c¥_Çme
 "CSPName"

	)

1053 
	#LN_ms_c¥_Çme
 "Miüosoá CSP Name"

	)

1054 
	#NID_ms_c¥_Çme
 417

	)

1055 
	#OBJ_ms_c¥_Çme
 1L,3L,6L,1L,4L,1L,311L,17L,1L

	)

1057 
	#SN_LoÿlKeyS‘
 "LoÿlKeyS‘"

	)

1058 
	#LN_LoÿlKeyS‘
 "Miüosoá LoÿÈKey s‘"

	)

1059 
	#NID_LoÿlKeyS‘
 856

	)

1060 
	#OBJ_LoÿlKeyS‘
 1L,3L,6L,1L,4L,1L,311L,17L,2L

	)

1062 
	#OBJ_û¹Ty³s
 
OBJ_pkcs9
,22L

	)

1064 
	#LN_x509C”tifiÿ‹
 "x509C”tifiÿ‹"

	)

1065 
	#NID_x509C”tifiÿ‹
 158

	)

1066 
	#OBJ_x509C”tifiÿ‹
 
OBJ_û¹Ty³s
,1L

	)

1068 
	#LN_sdsiC”tifiÿ‹
 "sdsiC”tifiÿ‹"

	)

1069 
	#NID_sdsiC”tifiÿ‹
 159

	)

1070 
	#OBJ_sdsiC”tifiÿ‹
 
OBJ_û¹Ty³s
,2L

	)

1072 
	#OBJ_ülTy³s
 
OBJ_pkcs9
,23L

	)

1074 
	#LN_x509C¾
 "x509C¾"

	)

1075 
	#NID_x509C¾
 160

	)

1076 
	#OBJ_x509C¾
 
OBJ_ülTy³s
,1L

	)

1078 
	#OBJ_pkcs12
 
OBJ_pkcs
,12L

	)

1080 
	#OBJ_pkcs12_pbeids
 
OBJ_pkcs12
,1L

	)

1082 
	#SN_pbe_W™hSHA1And128B™RC4
 "PBE-SHA1-RC4-128"

	)

1083 
	#LN_pbe_W™hSHA1And128B™RC4
 "pbeW™hSHA1And128B™RC4"

	)

1084 
	#NID_pbe_W™hSHA1And128B™RC4
 144

	)

1085 
	#OBJ_pbe_W™hSHA1And128B™RC4
 
OBJ_pkcs12_pbeids
,1L

	)

1087 
	#SN_pbe_W™hSHA1And40B™RC4
 "PBE-SHA1-RC4-40"

	)

1088 
	#LN_pbe_W™hSHA1And40B™RC4
 "pbeW™hSHA1And40B™RC4"

	)

1089 
	#NID_pbe_W™hSHA1And40B™RC4
 145

	)

1090 
	#OBJ_pbe_W™hSHA1And40B™RC4
 
OBJ_pkcs12_pbeids
,2L

	)

1092 
	#SN_pbe_W™hSHA1And3_Key_TrËDES_CBC
 "PBE-SHA1-3DES"

	)

1093 
	#LN_pbe_W™hSHA1And3_Key_TrËDES_CBC
 "pbeW™hSHA1And3-KeyTrËDES-CBC"

	)

1094 
	#NID_pbe_W™hSHA1And3_Key_TrËDES_CBC
 146

	)

1095 
	#OBJ_pbe_W™hSHA1And3_Key_TrËDES_CBC
 
OBJ_pkcs12_pbeids
,3L

	)

1097 
	#SN_pbe_W™hSHA1And2_Key_TrËDES_CBC
 "PBE-SHA1-2DES"

	)

1098 
	#LN_pbe_W™hSHA1And2_Key_TrËDES_CBC
 "pbeW™hSHA1And2-KeyTrËDES-CBC"

	)

1099 
	#NID_pbe_W™hSHA1And2_Key_TrËDES_CBC
 147

	)

1100 
	#OBJ_pbe_W™hSHA1And2_Key_TrËDES_CBC
 
OBJ_pkcs12_pbeids
,4L

	)

1102 
	#SN_pbe_W™hSHA1And128B™RC2_CBC
 "PBE-SHA1-RC2-128"

	)

1103 
	#LN_pbe_W™hSHA1And128B™RC2_CBC
 "pbeW™hSHA1And128B™RC2-CBC"

	)

1104 
	#NID_pbe_W™hSHA1And128B™RC2_CBC
 148

	)

1105 
	#OBJ_pbe_W™hSHA1And128B™RC2_CBC
 
OBJ_pkcs12_pbeids
,5L

	)

1107 
	#SN_pbe_W™hSHA1And40B™RC2_CBC
 "PBE-SHA1-RC2-40"

	)

1108 
	#LN_pbe_W™hSHA1And40B™RC2_CBC
 "pbeW™hSHA1And40B™RC2-CBC"

	)

1109 
	#NID_pbe_W™hSHA1And40B™RC2_CBC
 149

	)

1110 
	#OBJ_pbe_W™hSHA1And40B™RC2_CBC
 
OBJ_pkcs12_pbeids
,6L

	)

1112 
	#OBJ_pkcs12_V”siÚ1
 
OBJ_pkcs12
,10L

	)

1114 
	#OBJ_pkcs12_BagIds
 
OBJ_pkcs12_V”siÚ1
,1L

	)

1116 
	#LN_keyBag
 "keyBag"

	)

1117 
	#NID_keyBag
 150

	)

1118 
	#OBJ_keyBag
 
OBJ_pkcs12_BagIds
,1L

	)

1120 
	#LN_pkcs8ShroudedKeyBag
 "pkcs8ShroudedKeyBag"

	)

1121 
	#NID_pkcs8ShroudedKeyBag
 151

	)

1122 
	#OBJ_pkcs8ShroudedKeyBag
 
OBJ_pkcs12_BagIds
,2L

	)

1124 
	#LN_û¹Bag
 "û¹Bag"

	)

1125 
	#NID_û¹Bag
 152

	)

1126 
	#OBJ_û¹Bag
 
OBJ_pkcs12_BagIds
,3L

	)

1128 
	#LN_ülBag
 "ülBag"

	)

1129 
	#NID_ülBag
 153

	)

1130 
	#OBJ_ülBag
 
OBJ_pkcs12_BagIds
,4L

	)

1132 
	#LN_£ü‘Bag
 "£ü‘Bag"

	)

1133 
	#NID_£ü‘Bag
 154

	)

1134 
	#OBJ_£ü‘Bag
 
OBJ_pkcs12_BagIds
,5L

	)

1136 
	#LN_§ãCÚ‹ÁsBag
 "§ãCÚ‹ÁsBag"

	)

1137 
	#NID_§ãCÚ‹ÁsBag
 155

	)

1138 
	#OBJ_§ãCÚ‹ÁsBag
 
OBJ_pkcs12_BagIds
,6L

	)

1140 
	#SN_md2
 "MD2"

	)

1141 
	#LN_md2
 "md2"

	)

1142 
	#NID_md2
 3

	)

1143 
	#OBJ_md2
 
OBJ_r§dsi
,2L,2L

	)

1145 
	#SN_md4
 "MD4"

	)

1146 
	#LN_md4
 "md4"

	)

1147 
	#NID_md4
 257

	)

1148 
	#OBJ_md4
 
OBJ_r§dsi
,2L,4L

	)

1150 
	#SN_md5
 "MD5"

	)

1151 
	#LN_md5
 "md5"

	)

1152 
	#NID_md5
 4

	)

1153 
	#OBJ_md5
 
OBJ_r§dsi
,2L,5L

	)

1155 
	#SN_md5_sha1
 "MD5-SHA1"

	)

1156 
	#LN_md5_sha1
 "md5-sha1"

	)

1157 
	#NID_md5_sha1
 114

	)

1159 
	#LN_hmacW™hMD5
 "hmacW™hMD5"

	)

1160 
	#NID_hmacW™hMD5
 797

	)

1161 
	#OBJ_hmacW™hMD5
 
OBJ_r§dsi
,2L,6L

	)

1163 
	#LN_hmacW™hSHA1
 "hmacW™hSHA1"

	)

1164 
	#NID_hmacW™hSHA1
 163

	)

1165 
	#OBJ_hmacW™hSHA1
 
OBJ_r§dsi
,2L,7L

	)

1167 
	#LN_hmacW™hSHA224
 "hmacW™hSHA224"

	)

1168 
	#NID_hmacW™hSHA224
 798

	)

1169 
	#OBJ_hmacW™hSHA224
 
OBJ_r§dsi
,2L,8L

	)

1171 
	#LN_hmacW™hSHA256
 "hmacW™hSHA256"

	)

1172 
	#NID_hmacW™hSHA256
 799

	)

1173 
	#OBJ_hmacW™hSHA256
 
OBJ_r§dsi
,2L,9L

	)

1175 
	#LN_hmacW™hSHA384
 "hmacW™hSHA384"

	)

1176 
	#NID_hmacW™hSHA384
 800

	)

1177 
	#OBJ_hmacW™hSHA384
 
OBJ_r§dsi
,2L,10L

	)

1179 
	#LN_hmacW™hSHA512
 "hmacW™hSHA512"

	)

1180 
	#NID_hmacW™hSHA512
 801

	)

1181 
	#OBJ_hmacW™hSHA512
 
OBJ_r§dsi
,2L,11L

	)

1183 
	#SN_rc2_cbc
 "RC2-CBC"

	)

1184 
	#LN_rc2_cbc
 "rc2-cbc"

	)

1185 
	#NID_rc2_cbc
 37

	)

1186 
	#OBJ_rc2_cbc
 
OBJ_r§dsi
,3L,2L

	)

1188 
	#SN_rc2_ecb
 "RC2-ECB"

	)

1189 
	#LN_rc2_ecb
 "rc2-ecb"

	)

1190 
	#NID_rc2_ecb
 38

	)

1192 
	#SN_rc2_cfb64
 "RC2-CFB"

	)

1193 
	#LN_rc2_cfb64
 "rc2-cfb"

	)

1194 
	#NID_rc2_cfb64
 39

	)

1196 
	#SN_rc2_ofb64
 "RC2-OFB"

	)

1197 
	#LN_rc2_ofb64
 "rc2-ofb"

	)

1198 
	#NID_rc2_ofb64
 40

	)

1200 
	#SN_rc2_40_cbc
 "RC2-40-CBC"

	)

1201 
	#LN_rc2_40_cbc
 "rc2-40-cbc"

	)

1202 
	#NID_rc2_40_cbc
 98

	)

1204 
	#SN_rc2_64_cbc
 "RC2-64-CBC"

	)

1205 
	#LN_rc2_64_cbc
 "rc2-64-cbc"

	)

1206 
	#NID_rc2_64_cbc
 166

	)

1208 
	#SN_rc4
 "RC4"

	)

1209 
	#LN_rc4
 "rc4"

	)

1210 
	#NID_rc4
 5

	)

1211 
	#OBJ_rc4
 
OBJ_r§dsi
,3L,4L

	)

1213 
	#SN_rc4_40
 "RC4-40"

	)

1214 
	#LN_rc4_40
 "rc4-40"

	)

1215 
	#NID_rc4_40
 97

	)

1217 
	#SN_des_ede3_cbc
 "DES-EDE3-CBC"

	)

1218 
	#LN_des_ede3_cbc
 "des-ede3-cbc"

	)

1219 
	#NID_des_ede3_cbc
 44

	)

1220 
	#OBJ_des_ede3_cbc
 
OBJ_r§dsi
,3L,7L

	)

1222 
	#SN_rc5_cbc
 "RC5-CBC"

	)

1223 
	#LN_rc5_cbc
 "rc5-cbc"

	)

1224 
	#NID_rc5_cbc
 120

	)

1225 
	#OBJ_rc5_cbc
 
OBJ_r§dsi
,3L,8L

	)

1227 
	#SN_rc5_ecb
 "RC5-ECB"

	)

1228 
	#LN_rc5_ecb
 "rc5-ecb"

	)

1229 
	#NID_rc5_ecb
 121

	)

1231 
	#SN_rc5_cfb64
 "RC5-CFB"

	)

1232 
	#LN_rc5_cfb64
 "rc5-cfb"

	)

1233 
	#NID_rc5_cfb64
 122

	)

1235 
	#SN_rc5_ofb64
 "RC5-OFB"

	)

1236 
	#LN_rc5_ofb64
 "rc5-ofb"

	)

1237 
	#NID_rc5_ofb64
 123

	)

1239 
	#SN_ms_ext_»q
 "msExtReq"

	)

1240 
	#LN_ms_ext_»q
 "Miüosoá Ex‹nsiÚ Reque¡"

	)

1241 
	#NID_ms_ext_»q
 171

	)

1242 
	#OBJ_ms_ext_»q
 1L,3L,6L,1L,4L,1L,311L,2L,1L,14L

	)

1244 
	#SN_ms_code_šd
 "msCodeInd"

	)

1245 
	#LN_ms_code_šd
 "Miüosoá Individu® CodSignšg"

	)

1246 
	#NID_ms_code_šd
 134

	)

1247 
	#OBJ_ms_code_šd
 1L,3L,6L,1L,4L,1L,311L,2L,1L,21L

	)

1249 
	#SN_ms_code_com
 "msCodeCom"

	)

1250 
	#LN_ms_code_com
 "Miüosoá Comm”cŸÈCodSignšg"

	)

1251 
	#NID_ms_code_com
 135

	)

1252 
	#OBJ_ms_code_com
 1L,3L,6L,1L,4L,1L,311L,2L,1L,22L

	)

1254 
	#SN_ms_ùl_sign
 "msCTLSign"

	)

1255 
	#LN_ms_ùl_sign
 "Miüosoá Tru¡ Li¡ Signšg"

	)

1256 
	#NID_ms_ùl_sign
 136

	)

1257 
	#OBJ_ms_ùl_sign
 1L,3L,6L,1L,4L,1L,311L,10L,3L,1L

	)

1259 
	#SN_ms_sgc
 "msSGC"

	)

1260 
	#LN_ms_sgc
 "Miüosoá S”v” G©ed Cry±o"

	)

1261 
	#NID_ms_sgc
 137

	)

1262 
	#OBJ_ms_sgc
 1L,3L,6L,1L,4L,1L,311L,10L,3L,3L

	)

1264 
	#SN_ms_efs
 "msEFS"

	)

1265 
	#LN_ms_efs
 "Miüosoá Enüy±ed FSy¡em"

	)

1266 
	#NID_ms_efs
 138

	)

1267 
	#OBJ_ms_efs
 1L,3L,6L,1L,4L,1L,311L,10L,3L,4L

	)

1269 
	#SN_ms_sm¬tÿrd_logš
 "msSm¬tÿrdLogš"

	)

1270 
	#LN_ms_sm¬tÿrd_logš
 "Miüosoá Sm¬tÿrdlogš"

	)

1271 
	#NID_ms_sm¬tÿrd_logš
 648

	)

1272 
	#OBJ_ms_sm¬tÿrd_logš
 1L,3L,6L,1L,4L,1L,311L,20L,2L,2L

	)

1274 
	#SN_ms_u²
 "msUPN"

	)

1275 
	#LN_ms_u²
 "Miüosoá Univ”§ÈPršc® Name"

	)

1276 
	#NID_ms_u²
 649

	)

1277 
	#OBJ_ms_u²
 1L,3L,6L,1L,4L,1L,311L,20L,2L,3L

	)

1279 
	#SN_id—_cbc
 "IDEA-CBC"

	)

1280 
	#LN_id—_cbc
 "id—-cbc"

	)

1281 
	#NID_id—_cbc
 34

	)

1282 
	#OBJ_id—_cbc
 1L,3L,6L,1L,4L,1L,188L,7L,1L,1L,2L

	)

1284 
	#SN_id—_ecb
 "IDEA-ECB"

	)

1285 
	#LN_id—_ecb
 "id—-ecb"

	)

1286 
	#NID_id—_ecb
 36

	)

1288 
	#SN_id—_cfb64
 "IDEA-CFB"

	)

1289 
	#LN_id—_cfb64
 "id—-cfb"

	)

1290 
	#NID_id—_cfb64
 35

	)

1292 
	#SN_id—_ofb64
 "IDEA-OFB"

	)

1293 
	#LN_id—_ofb64
 "id—-ofb"

	)

1294 
	#NID_id—_ofb64
 46

	)

1296 
	#SN_bf_cbc
 "BF-CBC"

	)

1297 
	#LN_bf_cbc
 "bf-cbc"

	)

1298 
	#NID_bf_cbc
 91

	)

1299 
	#OBJ_bf_cbc
 1L,3L,6L,1L,4L,1L,3029L,1L,2L

	)

1301 
	#SN_bf_ecb
 "BF-ECB"

	)

1302 
	#LN_bf_ecb
 "bf-ecb"

	)

1303 
	#NID_bf_ecb
 92

	)

1305 
	#SN_bf_cfb64
 "BF-CFB"

	)

1306 
	#LN_bf_cfb64
 "bf-cfb"

	)

1307 
	#NID_bf_cfb64
 93

	)

1309 
	#SN_bf_ofb64
 "BF-OFB"

	)

1310 
	#LN_bf_ofb64
 "bf-ofb"

	)

1311 
	#NID_bf_ofb64
 94

	)

1313 
	#SN_id_pkix
 "PKIX"

	)

1314 
	#NID_id_pkix
 127

	)

1315 
	#OBJ_id_pkix
 1L,3L,6L,1L,5L,5L,7L

	)

1317 
	#SN_id_pkix_mod
 "id-pkix-mod"

	)

1318 
	#NID_id_pkix_mod
 258

	)

1319 
	#OBJ_id_pkix_mod
 
OBJ_id_pkix
,0L

	)

1321 
	#SN_id_³
 "id-³"

	)

1322 
	#NID_id_³
 175

	)

1323 
	#OBJ_id_³
 
OBJ_id_pkix
,1L

	)

1325 
	#SN_id_qt
 "id-qt"

	)

1326 
	#NID_id_qt
 259

	)

1327 
	#OBJ_id_qt
 
OBJ_id_pkix
,2L

	)

1329 
	#SN_id_kp
 "id-kp"

	)

1330 
	#NID_id_kp
 128

	)

1331 
	#OBJ_id_kp
 
OBJ_id_pkix
,3L

	)

1333 
	#SN_id_™
 "id-™"

	)

1334 
	#NID_id_™
 260

	)

1335 
	#OBJ_id_™
 
OBJ_id_pkix
,4L

	)

1337 
	#SN_id_pk
 "id-pk"

	)

1338 
	#NID_id_pk
 261

	)

1339 
	#OBJ_id_pk
 
OBJ_id_pkix
,5L

	)

1341 
	#SN_id_®g
 "id-®g"

	)

1342 
	#NID_id_®g
 262

	)

1343 
	#OBJ_id_®g
 
OBJ_id_pkix
,6L

	)

1345 
	#SN_id_cmc
 "id-cmc"

	)

1346 
	#NID_id_cmc
 263

	)

1347 
	#OBJ_id_cmc
 
OBJ_id_pkix
,7L

	)

1349 
	#SN_id_Ú
 "id-Ú"

	)

1350 
	#NID_id_Ú
 264

	)

1351 
	#OBJ_id_Ú
 
OBJ_id_pkix
,8L

	)

1353 
	#SN_id_pda
 "id-pda"

	)

1354 
	#NID_id_pda
 265

	)

1355 
	#OBJ_id_pda
 
OBJ_id_pkix
,9L

	)

1357 
	#SN_id_aÿ
 "id-aÿ"

	)

1358 
	#NID_id_aÿ
 266

	)

1359 
	#OBJ_id_aÿ
 
OBJ_id_pkix
,10L

	)

1361 
	#SN_id_qcs
 "id-qcs"

	)

1362 
	#NID_id_qcs
 267

	)

1363 
	#OBJ_id_qcs
 
OBJ_id_pkix
,11L

	)

1365 
	#SN_id_cù
 "id-cù"

	)

1366 
	#NID_id_cù
 268

	)

1367 
	#OBJ_id_cù
 
OBJ_id_pkix
,12L

	)

1369 
	#SN_id_µl
 "id-µl"

	)

1370 
	#NID_id_µl
 662

	)

1371 
	#OBJ_id_µl
 
OBJ_id_pkix
,21L

	)

1373 
	#SN_id_ad
 "id-ad"

	)

1374 
	#NID_id_ad
 176

	)

1375 
	#OBJ_id_ad
 
OBJ_id_pkix
,48L

	)

1377 
	#SN_id_pkix1_ex¶ic™_88
 "id-pkix1-ex¶ic™-88"

	)

1378 
	#NID_id_pkix1_ex¶ic™_88
 269

	)

1379 
	#OBJ_id_pkix1_ex¶ic™_88
 
OBJ_id_pkix_mod
,1L

	)

1381 
	#SN_id_pkix1_im¶ic™_88
 "id-pkix1-im¶ic™-88"

	)

1382 
	#NID_id_pkix1_im¶ic™_88
 270

	)

1383 
	#OBJ_id_pkix1_im¶ic™_88
 
OBJ_id_pkix_mod
,2L

	)

1385 
	#SN_id_pkix1_ex¶ic™_93
 "id-pkix1-ex¶ic™-93"

	)

1386 
	#NID_id_pkix1_ex¶ic™_93
 271

	)

1387 
	#OBJ_id_pkix1_ex¶ic™_93
 
OBJ_id_pkix_mod
,3L

	)

1389 
	#SN_id_pkix1_im¶ic™_93
 "id-pkix1-im¶ic™-93"

	)

1390 
	#NID_id_pkix1_im¶ic™_93
 272

	)

1391 
	#OBJ_id_pkix1_im¶ic™_93
 
OBJ_id_pkix_mod
,4L

	)

1393 
	#SN_id_mod_ümf
 "id-mod-ümf"

	)

1394 
	#NID_id_mod_ümf
 273

	)

1395 
	#OBJ_id_mod_ümf
 
OBJ_id_pkix_mod
,5L

	)

1397 
	#SN_id_mod_cmc
 "id-mod-cmc"

	)

1398 
	#NID_id_mod_cmc
 274

	)

1399 
	#OBJ_id_mod_cmc
 
OBJ_id_pkix_mod
,6L

	)

1401 
	#SN_id_mod_k—_´ofe_88
 "id-mod-k—-´ofe-88"

	)

1402 
	#NID_id_mod_k—_´ofe_88
 275

	)

1403 
	#OBJ_id_mod_k—_´ofe_88
 
OBJ_id_pkix_mod
,7L

	)

1405 
	#SN_id_mod_k—_´ofe_93
 "id-mod-k—-´ofe-93"

	)

1406 
	#NID_id_mod_k—_´ofe_93
 276

	)

1407 
	#OBJ_id_mod_k—_´ofe_93
 
OBJ_id_pkix_mod
,8L

	)

1409 
	#SN_id_mod_cmp
 "id-mod-cmp"

	)

1410 
	#NID_id_mod_cmp
 277

	)

1411 
	#OBJ_id_mod_cmp
 
OBJ_id_pkix_mod
,9L

	)

1413 
	#SN_id_mod_qu®if›d_û¹_88
 "id-mod-qu®if›d-û¹-88"

	)

1414 
	#NID_id_mod_qu®if›d_û¹_88
 278

	)

1415 
	#OBJ_id_mod_qu®if›d_û¹_88
 
OBJ_id_pkix_mod
,10L

	)

1417 
	#SN_id_mod_qu®if›d_û¹_93
 "id-mod-qu®if›d-û¹-93"

	)

1418 
	#NID_id_mod_qu®if›d_û¹_93
 279

	)

1419 
	#OBJ_id_mod_qu®if›d_û¹_93
 
OBJ_id_pkix_mod
,11L

	)

1421 
	#SN_id_mod_©Œibu‹_û¹
 "id-mod-©Œibu‹-û¹"

	)

1422 
	#NID_id_mod_©Œibu‹_û¹
 280

	)

1423 
	#OBJ_id_mod_©Œibu‹_û¹
 
OBJ_id_pkix_mod
,12L

	)

1425 
	#SN_id_mod_time¡amp_´ÙocŞ
 "id-mod-time¡amp-´ÙocŞ"

	)

1426 
	#NID_id_mod_time¡amp_´ÙocŞ
 281

	)

1427 
	#OBJ_id_mod_time¡amp_´ÙocŞ
 
OBJ_id_pkix_mod
,13L

	)

1429 
	#SN_id_mod_oc¥
 "id-mod-oc¥"

	)

1430 
	#NID_id_mod_oc¥
 282

	)

1431 
	#OBJ_id_mod_oc¥
 
OBJ_id_pkix_mod
,14L

	)

1433 
	#SN_id_mod_dvcs
 "id-mod-dvcs"

	)

1434 
	#NID_id_mod_dvcs
 283

	)

1435 
	#OBJ_id_mod_dvcs
 
OBJ_id_pkix_mod
,15L

	)

1437 
	#SN_id_mod_cmp2000
 "id-mod-cmp2000"

	)

1438 
	#NID_id_mod_cmp2000
 284

	)

1439 
	#OBJ_id_mod_cmp2000
 
OBJ_id_pkix_mod
,16L

	)

1441 
	#SN_šfo_acûss
 "authÜ™yInfoAcûss"

	)

1442 
	#LN_šfo_acûss
 "AuthÜ™y InfÜm©iÚ Acûss"

	)

1443 
	#NID_šfo_acûss
 177

	)

1444 
	#OBJ_šfo_acûss
 
OBJ_id_³
,1L

	)

1446 
	#SN_biom‘ricInfo
 "biom‘ricInfo"

	)

1447 
	#LN_biom‘ricInfo
 "Biom‘riøInfo"

	)

1448 
	#NID_biom‘ricInfo
 285

	)

1449 
	#OBJ_biom‘ricInfo
 
OBJ_id_³
,2L

	)

1451 
	#SN_qcS‹m’ts
 "qcS‹m’ts"

	)

1452 
	#NID_qcS‹m’ts
 286

	)

1453 
	#OBJ_qcS‹m’ts
 
OBJ_id_³
,3L

	)

1455 
	#SN_ac_aud™EÁ™y
 "ac-aud™EÁ™y"

	)

1456 
	#NID_ac_aud™EÁ™y
 287

	)

1457 
	#OBJ_ac_aud™EÁ™y
 
OBJ_id_³
,4L

	)

1459 
	#SN_ac_rg‘šg
 "ac-rg‘šg"

	)

1460 
	#NID_ac_rg‘šg
 288

	)

1461 
	#OBJ_ac_rg‘šg
 
OBJ_id_³
,5L

	)

1463 
	#SN_¯CÚŒŞs
 "¯CÚŒŞs"

	)

1464 
	#NID_¯CÚŒŞs
 289

	)

1465 
	#OBJ_¯CÚŒŞs
 
OBJ_id_³
,6L

	)

1467 
	#SN_sbgp_AddrBlock
 "sbgp-AddrBlock"

	)

1468 
	#NID_sbgp_AddrBlock
 290

	)

1469 
	#OBJ_sbgp_AddrBlock
 
OBJ_id_³
,7L

	)

1471 
	#SN_sbgp_autÚomousSysNum
 "sbgp-autÚomousSysNum"

	)

1472 
	#NID_sbgp_autÚomousSysNum
 291

	)

1473 
	#OBJ_sbgp_autÚomousSysNum
 
OBJ_id_³
,8L

	)

1475 
	#SN_sbgp_rou‹rId’tif›r
 "sbgp-rou‹rId’tif›r"

	)

1476 
	#NID_sbgp_rou‹rId’tif›r
 292

	)

1477 
	#OBJ_sbgp_rou‹rId’tif›r
 
OBJ_id_³
,9L

	)

1479 
	#SN_ac_´oxyšg
 "ac-´oxyšg"

	)

1480 
	#NID_ac_´oxyšg
 397

	)

1481 
	#OBJ_ac_´oxyšg
 
OBJ_id_³
,10L

	)

1483 
	#SN_sšfo_acûss
 "subjeùInfoAcûss"

	)

1484 
	#LN_sšfo_acûss
 "Subjeù InfÜm©iÚ Acûss"

	)

1485 
	#NID_sšfo_acûss
 398

	)

1486 
	#OBJ_sšfo_acûss
 
OBJ_id_³
,11L

	)

1488 
	#SN_´oxyC”tInfo
 "´oxyC”tInfo"

	)

1489 
	#LN_´oxyC”tInfo
 "Proxy C”tifiÿ‹ InfÜm©iÚ"

	)

1490 
	#NID_´oxyC”tInfo
 663

	)

1491 
	#OBJ_´oxyC”tInfo
 
OBJ_id_³
,14L

	)

1493 
	#SN_id_qt_ıs
 "id-qt-ıs"

	)

1494 
	#LN_id_qt_ıs
 "PŞicy Qu®if›¸CPS"

	)

1495 
	#NID_id_qt_ıs
 164

	)

1496 
	#OBJ_id_qt_ıs
 
OBJ_id_qt
,1L

	)

1498 
	#SN_id_qt_unÙiû
 "id-qt-unÙiû"

	)

1499 
	#LN_id_qt_unÙiû
 "PŞicy Qu®if›¸U£¸NÙiû"

	)

1500 
	#NID_id_qt_unÙiû
 165

	)

1501 
	#OBJ_id_qt_unÙiû
 
OBJ_id_qt
,2L

	)

1503 
	#SN_‹xtNÙiû
 "‹xtNÙiû"

	)

1504 
	#NID_‹xtNÙiû
 293

	)

1505 
	#OBJ_‹xtNÙiû
 
OBJ_id_qt
,3L

	)

1507 
	#SN_£rv”_auth
 "£rv”Auth"

	)

1508 
	#LN_£rv”_auth
 "TLS Web S”v” Auth’tiÿtiÚ"

	)

1509 
	#NID_£rv”_auth
 129

	)

1510 
	#OBJ_£rv”_auth
 
OBJ_id_kp
,1L

	)

1512 
	#SN_ş›Á_auth
 "ş›ÁAuth"

	)

1513 
	#LN_ş›Á_auth
 "TLS Web Cl›Á Auth’tiÿtiÚ"

	)

1514 
	#NID_ş›Á_auth
 130

	)

1515 
	#OBJ_ş›Á_auth
 
OBJ_id_kp
,2L

	)

1517 
	#SN_code_sign
 "codeSignšg"

	)

1518 
	#LN_code_sign
 "CodSignšg"

	)

1519 
	#NID_code_sign
 131

	)

1520 
	#OBJ_code_sign
 
OBJ_id_kp
,3L

	)

1522 
	#SN_ema_´Ùeù
 "emaPrÙeùiÚ"

	)

1523 
	#LN_ema_´Ùeù
 "E-ma PrÙeùiÚ"

	)

1524 
	#NID_ema_´Ùeù
 132

	)

1525 
	#OBJ_ema_´Ùeù
 
OBJ_id_kp
,4L

	)

1527 
	#SN_£cEndSy¡em
 "£cEndSy¡em"

	)

1528 
	#LN_£cEndSy¡em
 "IPSeøEnd Sy¡em"

	)

1529 
	#NID_£cEndSy¡em
 294

	)

1530 
	#OBJ_£cEndSy¡em
 
OBJ_id_kp
,5L

	)

1532 
	#SN_£cTuÂ–
 "£cTuÂ–"

	)

1533 
	#LN_£cTuÂ–
 "IPSeøTuÂ–"

	)

1534 
	#NID_£cTuÂ–
 295

	)

1535 
	#OBJ_£cTuÂ–
 
OBJ_id_kp
,6L

	)

1537 
	#SN_£cU£r
 "£cU£r"

	)

1538 
	#LN_£cU£r
 "IPSeøU£r"

	)

1539 
	#NID_£cU£r
 296

	)

1540 
	#OBJ_£cU£r
 
OBJ_id_kp
,7L

	)

1542 
	#SN_time_¡amp
 "timeSmpšg"

	)

1543 
	#LN_time_¡amp
 "TimSmpšg"

	)

1544 
	#NID_time_¡amp
 133

	)

1545 
	#OBJ_time_¡amp
 
OBJ_id_kp
,8L

	)

1547 
	#SN_OCSP_sign
 "OCSPSignšg"

	)

1548 
	#LN_OCSP_sign
 "OCSP Signšg"

	)

1549 
	#NID_OCSP_sign
 180

	)

1550 
	#OBJ_OCSP_sign
 
OBJ_id_kp
,9L

	)

1552 
	#SN_dvcs
 "DVCS"

	)

1553 
	#LN_dvcs
 "dvcs"

	)

1554 
	#NID_dvcs
 297

	)

1555 
	#OBJ_dvcs
 
OBJ_id_kp
,10L

	)

1557 
	#SN_id_™_ÿPrÙEncC”t
 "id-™-ÿPrÙEncC”t"

	)

1558 
	#NID_id_™_ÿPrÙEncC”t
 298

	)

1559 
	#OBJ_id_™_ÿPrÙEncC”t
 
OBJ_id_™
,1L

	)

1561 
	#SN_id_™_signKeyPaœTy³s
 "id-™-signKeyPaœTy³s"

	)

1562 
	#NID_id_™_signKeyPaœTy³s
 299

	)

1563 
	#OBJ_id_™_signKeyPaœTy³s
 
OBJ_id_™
,2L

	)

1565 
	#SN_id_™_’cKeyPaœTy³s
 "id-™-’cKeyPaœTy³s"

	)

1566 
	#NID_id_™_’cKeyPaœTy³s
 300

	)

1567 
	#OBJ_id_™_’cKeyPaœTy³s
 
OBJ_id_™
,3L

	)

1569 
	#SN_id_™_´eã¼edSymmAlg
 "id-™-´eã¼edSymmAlg"

	)

1570 
	#NID_id_™_´eã¼edSymmAlg
 301

	)

1571 
	#OBJ_id_™_´eã¼edSymmAlg
 
OBJ_id_™
,4L

	)

1573 
	#SN_id_™_ÿKeyUpd©eInfo
 "id-™-ÿKeyUpd©eInfo"

	)

1574 
	#NID_id_™_ÿKeyUpd©eInfo
 302

	)

1575 
	#OBJ_id_™_ÿKeyUpd©eInfo
 
OBJ_id_™
,5L

	)

1577 
	#SN_id_™_cu¼’tCRL
 "id-™-cu¼’tCRL"

	)

1578 
	#NID_id_™_cu¼’tCRL
 303

	)

1579 
	#OBJ_id_™_cu¼’tCRL
 
OBJ_id_™
,6L

	)

1581 
	#SN_id_™_unsuµÜ‹dOIDs
 "id-™-unsuµÜ‹dOIDs"

	)

1582 
	#NID_id_™_unsuµÜ‹dOIDs
 304

	)

1583 
	#OBJ_id_™_unsuµÜ‹dOIDs
 
OBJ_id_™
,7L

	)

1585 
	#SN_id_™_subsütiÚReque¡
 "id-™-subsütiÚReque¡"

	)

1586 
	#NID_id_™_subsütiÚReque¡
 305

	)

1587 
	#OBJ_id_™_subsütiÚReque¡
 
OBJ_id_™
,8L

	)

1589 
	#SN_id_™_subsütiÚRe¥Ú£
 "id-™-subsütiÚRe¥Ú£"

	)

1590 
	#NID_id_™_subsütiÚRe¥Ú£
 306

	)

1591 
	#OBJ_id_™_subsütiÚRe¥Ú£
 
OBJ_id_™
,9L

	)

1593 
	#SN_id_™_keyPaœP¬amReq
 "id-™-keyPaœP¬amReq"

	)

1594 
	#NID_id_™_keyPaœP¬amReq
 307

	)

1595 
	#OBJ_id_™_keyPaœP¬amReq
 
OBJ_id_™
,10L

	)

1597 
	#SN_id_™_keyPaœP¬amR•
 "id-™-keyPaœP¬amR•"

	)

1598 
	#NID_id_™_keyPaœP¬amR•
 308

	)

1599 
	#OBJ_id_™_keyPaœP¬amR•
 
OBJ_id_™
,11L

	)

1601 
	#SN_id_™_»vPas¥h¿£
 "id-™-»vPas¥h¿£"

	)

1602 
	#NID_id_™_»vPas¥h¿£
 309

	)

1603 
	#OBJ_id_™_»vPas¥h¿£
 
OBJ_id_™
,12L

	)

1605 
	#SN_id_™_im¶ic™CÚfœm
 "id-™-im¶ic™CÚfœm"

	)

1606 
	#NID_id_™_im¶ic™CÚfœm
 310

	)

1607 
	#OBJ_id_™_im¶ic™CÚfœm
 
OBJ_id_™
,13L

	)

1609 
	#SN_id_™_cÚfœmWa™Time
 "id-™-cÚfœmWa™Time"

	)

1610 
	#NID_id_™_cÚfœmWa™Time
 311

	)

1611 
	#OBJ_id_™_cÚfœmWa™Time
 
OBJ_id_™
,14L

	)

1613 
	#SN_id_™_ÜigPKIMes§ge
 "id-™-ÜigPKIMes§ge"

	)

1614 
	#NID_id_™_ÜigPKIMes§ge
 312

	)

1615 
	#OBJ_id_™_ÜigPKIMes§ge
 
OBJ_id_™
,15L

	)

1617 
	#SN_id_™_suµLªgTags
 "id-™-suµLªgTags"

	)

1618 
	#NID_id_™_suµLªgTags
 784

	)

1619 
	#OBJ_id_™_suµLªgTags
 
OBJ_id_™
,16L

	)

1621 
	#SN_id_»gCŒl
 "id-»gCŒl"

	)

1622 
	#NID_id_»gCŒl
 313

	)

1623 
	#OBJ_id_»gCŒl
 
OBJ_id_pk
,1L

	)

1625 
	#SN_id_»gInfo
 "id-»gInfo"

	)

1626 
	#NID_id_»gInfo
 314

	)

1627 
	#OBJ_id_»gInfo
 
OBJ_id_pk
,2L

	)

1629 
	#SN_id_»gCŒl_»gTok’
 "id-»gCŒl-»gTok’"

	)

1630 
	#NID_id_»gCŒl_»gTok’
 315

	)

1631 
	#OBJ_id_»gCŒl_»gTok’
 
OBJ_id_»gCŒl
,1L

	)

1633 
	#SN_id_»gCŒl_auth’tiÿtÜ
 "id-»gCŒl-auth’tiÿtÜ"

	)

1634 
	#NID_id_»gCŒl_auth’tiÿtÜ
 316

	)

1635 
	#OBJ_id_»gCŒl_auth’tiÿtÜ
 
OBJ_id_»gCŒl
,2L

	)

1637 
	#SN_id_»gCŒl_pkiPubliÿtiÚInfo
 "id-»gCŒl-pkiPubliÿtiÚInfo"

	)

1638 
	#NID_id_»gCŒl_pkiPubliÿtiÚInfo
 317

	)

1639 
	#OBJ_id_»gCŒl_pkiPubliÿtiÚInfo
 
OBJ_id_»gCŒl
,3L

	)

1641 
	#SN_id_»gCŒl_pkiArchiveO±iÚs
 "id-»gCŒl-pkiArchiveO±iÚs"

	)

1642 
	#NID_id_»gCŒl_pkiArchiveO±iÚs
 318

	)

1643 
	#OBJ_id_»gCŒl_pkiArchiveO±iÚs
 
OBJ_id_»gCŒl
,4L

	)

1645 
	#SN_id_»gCŒl_ŞdC”tID
 "id-»gCŒl-ŞdC”tID"

	)

1646 
	#NID_id_»gCŒl_ŞdC”tID
 319

	)

1647 
	#OBJ_id_»gCŒl_ŞdC”tID
 
OBJ_id_»gCŒl
,5L

	)

1649 
	#SN_id_»gCŒl_´ÙocŞEnüKey
 "id-»gCŒl-´ÙocŞEnüKey"

	)

1650 
	#NID_id_»gCŒl_´ÙocŞEnüKey
 320

	)

1651 
	#OBJ_id_»gCŒl_´ÙocŞEnüKey
 
OBJ_id_»gCŒl
,6L

	)

1653 
	#SN_id_»gInfo_utf8Paœs
 "id-»gInfo-utf8Paœs"

	)

1654 
	#NID_id_»gInfo_utf8Paœs
 321

	)

1655 
	#OBJ_id_»gInfo_utf8Paœs
 
OBJ_id_»gInfo
,1L

	)

1657 
	#SN_id_»gInfo_û¹Req
 "id-»gInfo-û¹Req"

	)

1658 
	#NID_id_»gInfo_û¹Req
 322

	)

1659 
	#OBJ_id_»gInfo_û¹Req
 
OBJ_id_»gInfo
,2L

	)

1661 
	#SN_id_®g_des40
 "id-®g-des40"

	)

1662 
	#NID_id_®g_des40
 323

	)

1663 
	#OBJ_id_®g_des40
 
OBJ_id_®g
,1L

	)

1665 
	#SN_id_®g_noSigÇtu»
 "id-®g-noSigÇtu»"

	)

1666 
	#NID_id_®g_noSigÇtu»
 324

	)

1667 
	#OBJ_id_®g_noSigÇtu»
 
OBJ_id_®g
,2L

	)

1669 
	#SN_id_®g_dh_sig_hmac_sha1
 "id-®g-dh-sig-hmac-sha1"

	)

1670 
	#NID_id_®g_dh_sig_hmac_sha1
 325

	)

1671 
	#OBJ_id_®g_dh_sig_hmac_sha1
 
OBJ_id_®g
,3L

	)

1673 
	#SN_id_®g_dh_pİ
 "id-®g-dh-pİ"

	)

1674 
	#NID_id_®g_dh_pİ
 326

	)

1675 
	#OBJ_id_®g_dh_pİ
 
OBJ_id_®g
,4L

	)

1677 
	#SN_id_cmc_¡©usInfo
 "id-cmc-¡©usInfo"

	)

1678 
	#NID_id_cmc_¡©usInfo
 327

	)

1679 
	#OBJ_id_cmc_¡©usInfo
 
OBJ_id_cmc
,1L

	)

1681 
	#SN_id_cmc_id’tifiÿtiÚ
 "id-cmc-id’tifiÿtiÚ"

	)

1682 
	#NID_id_cmc_id’tifiÿtiÚ
 328

	)

1683 
	#OBJ_id_cmc_id’tifiÿtiÚ
 
OBJ_id_cmc
,2L

	)

1685 
	#SN_id_cmc_id’t™yProof
 "id-cmc-id’t™yProof"

	)

1686 
	#NID_id_cmc_id’t™yProof
 329

	)

1687 
	#OBJ_id_cmc_id’t™yProof
 
OBJ_id_cmc
,3L

	)

1689 
	#SN_id_cmc_d©aR‘uº
 "id-cmc-d©aR‘uº"

	)

1690 
	#NID_id_cmc_d©aR‘uº
 330

	)

1691 
	#OBJ_id_cmc_d©aR‘uº
 
OBJ_id_cmc
,4L

	)

1693 
	#SN_id_cmc_Œª§ùiÚId
 "id-cmc-Œª§ùiÚId"

	)

1694 
	#NID_id_cmc_Œª§ùiÚId
 331

	)

1695 
	#OBJ_id_cmc_Œª§ùiÚId
 
OBJ_id_cmc
,5L

	)

1697 
	#SN_id_cmc_£nd”NÚû
 "id-cmc-£nd”NÚû"

	)

1698 
	#NID_id_cmc_£nd”NÚû
 332

	)

1699 
	#OBJ_id_cmc_£nd”NÚû
 
OBJ_id_cmc
,6L

	)

1701 
	#SN_id_cmc_»c›ÁNÚû
 "id-cmc-»c›ÁNÚû"

	)

1702 
	#NID_id_cmc_»c›ÁNÚû
 333

	)

1703 
	#OBJ_id_cmc_»c›ÁNÚû
 
OBJ_id_cmc
,7L

	)

1705 
	#SN_id_cmc_addEx‹nsiÚs
 "id-cmc-addEx‹nsiÚs"

	)

1706 
	#NID_id_cmc_addEx‹nsiÚs
 334

	)

1707 
	#OBJ_id_cmc_addEx‹nsiÚs
 
OBJ_id_cmc
,8L

	)

1709 
	#SN_id_cmc_’üy±edPOP
 "id-cmc-’üy±edPOP"

	)

1710 
	#NID_id_cmc_’üy±edPOP
 335

	)

1711 
	#OBJ_id_cmc_’üy±edPOP
 
OBJ_id_cmc
,9L

	)

1713 
	#SN_id_cmc_deüy±edPOP
 "id-cmc-deüy±edPOP"

	)

1714 
	#NID_id_cmc_deüy±edPOP
 336

	)

1715 
	#OBJ_id_cmc_deüy±edPOP
 
OBJ_id_cmc
,10L

	)

1717 
	#SN_id_cmc_ÌaPOPW™Ãss
 "id-cmc-ÌaPOPW™Ãss"

	)

1718 
	#NID_id_cmc_ÌaPOPW™Ãss
 337

	)

1719 
	#OBJ_id_cmc_ÌaPOPW™Ãss
 
OBJ_id_cmc
,11L

	)

1721 
	#SN_id_cmc_g‘C”t
 "id-cmc-g‘C”t"

	)

1722 
	#NID_id_cmc_g‘C”t
 338

	)

1723 
	#OBJ_id_cmc_g‘C”t
 
OBJ_id_cmc
,15L

	)

1725 
	#SN_id_cmc_g‘CRL
 "id-cmc-g‘CRL"

	)

1726 
	#NID_id_cmc_g‘CRL
 339

	)

1727 
	#OBJ_id_cmc_g‘CRL
 
OBJ_id_cmc
,16L

	)

1729 
	#SN_id_cmc_»vokeReque¡
 "id-cmc-»vokeReque¡"

	)

1730 
	#NID_id_cmc_»vokeReque¡
 340

	)

1731 
	#OBJ_id_cmc_»vokeReque¡
 
OBJ_id_cmc
,17L

	)

1733 
	#SN_id_cmc_»gInfo
 "id-cmc-»gInfo"

	)

1734 
	#NID_id_cmc_»gInfo
 341

	)

1735 
	#OBJ_id_cmc_»gInfo
 
OBJ_id_cmc
,18L

	)

1737 
	#SN_id_cmc_»¥Ú£Info
 "id-cmc-»¥Ú£Info"

	)

1738 
	#NID_id_cmc_»¥Ú£Info
 342

	)

1739 
	#OBJ_id_cmc_»¥Ú£Info
 
OBJ_id_cmc
,19L

	)

1741 
	#SN_id_cmc_qu”yP’dšg
 "id-cmc-qu”yP’dšg"

	)

1742 
	#NID_id_cmc_qu”yP’dšg
 343

	)

1743 
	#OBJ_id_cmc_qu”yP’dšg
 
OBJ_id_cmc
,21L

	)

1745 
	#SN_id_cmc_pİLškRªdom
 "id-cmc-pİLškRªdom"

	)

1746 
	#NID_id_cmc_pİLškRªdom
 344

	)

1747 
	#OBJ_id_cmc_pİLškRªdom
 
OBJ_id_cmc
,22L

	)

1749 
	#SN_id_cmc_pİLškW™Ãss
 "id-cmc-pİLškW™Ãss"

	)

1750 
	#NID_id_cmc_pİLškW™Ãss
 345

	)

1751 
	#OBJ_id_cmc_pİLškW™Ãss
 
OBJ_id_cmc
,23L

	)

1753 
	#SN_id_cmc_cÚfœmC”tAcû±ªû
 "id-cmc-cÚfœmC”tAcû±ªû"

	)

1754 
	#NID_id_cmc_cÚfœmC”tAcû±ªû
 346

	)

1755 
	#OBJ_id_cmc_cÚfœmC”tAcû±ªû
 
OBJ_id_cmc
,24L

	)

1757 
	#SN_id_Ú_³rsÚ®D©a
 "id-Ú-³rsÚ®D©a"

	)

1758 
	#NID_id_Ú_³rsÚ®D©a
 347

	)

1759 
	#OBJ_id_Ú_³rsÚ®D©a
 
OBJ_id_Ú
,1L

	)

1761 
	#SN_id_Ú_³rmª’tId’tif›r
 "id-Ú-³rmª’tId’tif›r"

	)

1762 
	#LN_id_Ú_³rmª’tId’tif›r
 "P”mª’ˆId’tif›r"

	)

1763 
	#NID_id_Ú_³rmª’tId’tif›r
 858

	)

1764 
	#OBJ_id_Ú_³rmª’tId’tif›r
 
OBJ_id_Ú
,3L

	)

1766 
	#SN_id_pda_d©eOfBœth
 "id-pda-d©eOfBœth"

	)

1767 
	#NID_id_pda_d©eOfBœth
 348

	)

1768 
	#OBJ_id_pda_d©eOfBœth
 
OBJ_id_pda
,1L

	)

1770 
	#SN_id_pda_¶aûOfBœth
 "id-pda-¶aûOfBœth"

	)

1771 
	#NID_id_pda_¶aûOfBœth
 349

	)

1772 
	#OBJ_id_pda_¶aûOfBœth
 
OBJ_id_pda
,2L

	)

1774 
	#SN_id_pda_g’d”
 "id-pda-g’d”"

	)

1775 
	#NID_id_pda_g’d”
 351

	)

1776 
	#OBJ_id_pda_g’d”
 
OBJ_id_pda
,3L

	)

1778 
	#SN_id_pda_couÁryOfC™iz’sh
 "id-pda-couÁryOfC™iz’sh"

	)

1779 
	#NID_id_pda_couÁryOfC™iz’sh
 352

	)

1780 
	#OBJ_id_pda_couÁryOfC™iz’sh
 
OBJ_id_pda
,4L

	)

1782 
	#SN_id_pda_couÁryOfResid’û
 "id-pda-couÁryOfResid’û"

	)

1783 
	#NID_id_pda_couÁryOfResid’û
 353

	)

1784 
	#OBJ_id_pda_couÁryOfResid’û
 
OBJ_id_pda
,5L

	)

1786 
	#SN_id_aÿ_auth’tiÿtiÚInfo
 "id-aÿ-auth’tiÿtiÚInfo"

	)

1787 
	#NID_id_aÿ_auth’tiÿtiÚInfo
 354

	)

1788 
	#OBJ_id_aÿ_auth’tiÿtiÚInfo
 
OBJ_id_aÿ
,1L

	)

1790 
	#SN_id_aÿ_acûssId’t™y
 "id-aÿ-acûssId’t™y"

	)

1791 
	#NID_id_aÿ_acûssId’t™y
 355

	)

1792 
	#OBJ_id_aÿ_acûssId’t™y
 
OBJ_id_aÿ
,2L

	)

1794 
	#SN_id_aÿ_ch¬gšgId’t™y
 "id-aÿ-ch¬gšgId’t™y"

	)

1795 
	#NID_id_aÿ_ch¬gšgId’t™y
 356

	)

1796 
	#OBJ_id_aÿ_ch¬gšgId’t™y
 
OBJ_id_aÿ
,3L

	)

1798 
	#SN_id_aÿ_group
 "id-aÿ-group"

	)

1799 
	#NID_id_aÿ_group
 357

	)

1800 
	#OBJ_id_aÿ_group
 
OBJ_id_aÿ
,4L

	)

1802 
	#SN_id_aÿ_rŞe
 "id-aÿ-rŞe"

	)

1803 
	#NID_id_aÿ_rŞe
 358

	)

1804 
	#OBJ_id_aÿ_rŞe
 
OBJ_id_aÿ
,5L

	)

1806 
	#SN_id_aÿ_’cA‰rs
 "id-aÿ-’cA‰rs"

	)

1807 
	#NID_id_aÿ_’cA‰rs
 399

	)

1808 
	#OBJ_id_aÿ_’cA‰rs
 
OBJ_id_aÿ
,6L

	)

1810 
	#SN_id_qcs_pkixQCSyÁax_v1
 "id-qcs-pkixQCSyÁax-v1"

	)

1811 
	#NID_id_qcs_pkixQCSyÁax_v1
 359

	)

1812 
	#OBJ_id_qcs_pkixQCSyÁax_v1
 
OBJ_id_qcs
,1L

	)

1814 
	#SN_id_cù_üs
 "id-cù-üs"

	)

1815 
	#NID_id_cù_üs
 360

	)

1816 
	#OBJ_id_cù_üs
 
OBJ_id_cù
,1L

	)

1818 
	#SN_id_cù_PKID©a
 "id-cù-PKID©a"

	)

1819 
	#NID_id_cù_PKID©a
 361

	)

1820 
	#OBJ_id_cù_PKID©a
 
OBJ_id_cù
,2L

	)

1822 
	#SN_id_cù_PKIRe¥Ú£
 "id-cù-PKIRe¥Ú£"

	)

1823 
	#NID_id_cù_PKIRe¥Ú£
 362

	)

1824 
	#OBJ_id_cù_PKIRe¥Ú£
 
OBJ_id_cù
,3L

	)

1826 
	#SN_id_µl_ªyLªguage
 "id-µl-ªyLªguage"

	)

1827 
	#LN_id_µl_ªyLªguage
 "Any†ªguage"

	)

1828 
	#NID_id_µl_ªyLªguage
 664

	)

1829 
	#OBJ_id_µl_ªyLªguage
 
OBJ_id_µl
,0L

	)

1831 
	#SN_id_µl_šh”™AÎ
 "id-µl-šh”™AÎ"

	)

1832 
	#LN_id_µl_šh”™AÎ
 "Inh”™‡Î"

	)

1833 
	#NID_id_µl_šh”™AÎ
 665

	)

1834 
	#OBJ_id_µl_šh”™AÎ
 
OBJ_id_µl
,1L

	)

1836 
	#SN_Ind•’d’t
 "id-µl-šd•’d’t"

	)

1837 
	#LN_Ind•’d’t
 "Ind•’d’t"

	)

1838 
	#NID_Ind•’d’t
 667

	)

1839 
	#OBJ_Ind•’d’t
 
OBJ_id_µl
,2L

	)

1841 
	#SN_ad_OCSP
 "OCSP"

	)

1842 
	#LN_ad_OCSP
 "OCSP"

	)

1843 
	#NID_ad_OCSP
 178

	)

1844 
	#OBJ_ad_OCSP
 
OBJ_id_ad
,1L

	)

1846 
	#SN_ad_ÿ_issu”s
 "ÿIssu”s"

	)

1847 
	#LN_ad_ÿ_issu”s
 "CA Issu”s"

	)

1848 
	#NID_ad_ÿ_issu”s
 179

	)

1849 
	#OBJ_ad_ÿ_issu”s
 
OBJ_id_ad
,2L

	)

1851 
	#SN_ad_timeSmpšg
 "ad_time¡ampšg"

	)

1852 
	#LN_ad_timeSmpšg
 "AD TimSmpšg"

	)

1853 
	#NID_ad_timeSmpšg
 363

	)

1854 
	#OBJ_ad_timeSmpšg
 
OBJ_id_ad
,3L

	)

1856 
	#SN_ad_dvcs
 "AD_DVCS"

	)

1857 
	#LN_ad_dvcs
 "ad dvcs"

	)

1858 
	#NID_ad_dvcs
 364

	)

1859 
	#OBJ_ad_dvcs
 
OBJ_id_ad
,4L

	)

1861 
	#SN_ÿR•os™Üy
 "ÿR•os™Üy"

	)

1862 
	#LN_ÿR•os™Üy
 "CA R•os™Üy"

	)

1863 
	#NID_ÿR•os™Üy
 785

	)

1864 
	#OBJ_ÿR•os™Üy
 
OBJ_id_ad
,5L

	)

1866 
	#OBJ_id_pkix_OCSP
 
OBJ_ad_OCSP


	)

1868 
	#SN_id_pkix_OCSP_basic
 "basicOCSPRe¥Ú£"

	)

1869 
	#LN_id_pkix_OCSP_basic
 "BasiøOCSP Re¥Ú£"

	)

1870 
	#NID_id_pkix_OCSP_basic
 365

	)

1871 
	#OBJ_id_pkix_OCSP_basic
 
OBJ_id_pkix_OCSP
,1L

	)

1873 
	#SN_id_pkix_OCSP_NÚû
 "NÚû"

	)

1874 
	#LN_id_pkix_OCSP_NÚû
 "OCSP NÚû"

	)

1875 
	#NID_id_pkix_OCSP_NÚû
 366

	)

1876 
	#OBJ_id_pkix_OCSP_NÚû
 
OBJ_id_pkix_OCSP
,2L

	)

1878 
	#SN_id_pkix_OCSP_C¾ID
 "C¾ID"

	)

1879 
	#LN_id_pkix_OCSP_C¾ID
 "OCSP CRL ID"

	)

1880 
	#NID_id_pkix_OCSP_C¾ID
 367

	)

1881 
	#OBJ_id_pkix_OCSP_C¾ID
 
OBJ_id_pkix_OCSP
,3L

	)

1883 
	#SN_id_pkix_OCSP_acû±abËRe¥Ú£s
 "acû±abËRe¥Ú£s"

	)

1884 
	#LN_id_pkix_OCSP_acû±abËRe¥Ú£s
 "Acû±abË OCSP Re¥Ú£s"

	)

1885 
	#NID_id_pkix_OCSP_acû±abËRe¥Ú£s
 368

	)

1886 
	#OBJ_id_pkix_OCSP_acû±abËRe¥Ú£s
 
OBJ_id_pkix_OCSP
,4L

	)

1888 
	#SN_id_pkix_OCSP_noCheck
 "noCheck"

	)

1889 
	#LN_id_pkix_OCSP_noCheck
 "OCSP NØCheck"

	)

1890 
	#NID_id_pkix_OCSP_noCheck
 369

	)

1891 
	#OBJ_id_pkix_OCSP_noCheck
 
OBJ_id_pkix_OCSP
,5L

	)

1893 
	#SN_id_pkix_OCSP_¬chiveCutoff
 "¬chiveCutoff"

	)

1894 
	#LN_id_pkix_OCSP_¬chiveCutoff
 "OCSP ArchivCutoff"

	)

1895 
	#NID_id_pkix_OCSP_¬chiveCutoff
 370

	)

1896 
	#OBJ_id_pkix_OCSP_¬chiveCutoff
 
OBJ_id_pkix_OCSP
,6L

	)

1898 
	#SN_id_pkix_OCSP_£rviûLoÿtÜ
 "£rviûLoÿtÜ"

	)

1899 
	#LN_id_pkix_OCSP_£rviûLoÿtÜ
 "OCSP S”viû LoÿtÜ"

	)

1900 
	#NID_id_pkix_OCSP_£rviûLoÿtÜ
 371

	)

1901 
	#OBJ_id_pkix_OCSP_£rviûLoÿtÜ
 
OBJ_id_pkix_OCSP
,7L

	)

1903 
	#SN_id_pkix_OCSP_ex‹ndedStus
 "ex‹ndedStus"

	)

1904 
	#LN_id_pkix_OCSP_ex‹ndedStus
 "Ex‹nded OCSP Stus"

	)

1905 
	#NID_id_pkix_OCSP_ex‹ndedStus
 372

	)

1906 
	#OBJ_id_pkix_OCSP_ex‹ndedStus
 
OBJ_id_pkix_OCSP
,8L

	)

1908 
	#SN_id_pkix_OCSP_v®id
 "v®id"

	)

1909 
	#NID_id_pkix_OCSP_v®id
 373

	)

1910 
	#OBJ_id_pkix_OCSP_v®id
 
OBJ_id_pkix_OCSP
,9L

	)

1912 
	#SN_id_pkix_OCSP_·th
 "·th"

	)

1913 
	#NID_id_pkix_OCSP_·th
 374

	)

1914 
	#OBJ_id_pkix_OCSP_·th
 
OBJ_id_pkix_OCSP
,10L

	)

1916 
	#SN_id_pkix_OCSP_Œu¡RoÙ
 "Œu¡RoÙ"

	)

1917 
	#LN_id_pkix_OCSP_Œu¡RoÙ
 "Tru¡ RoÙ"

	)

1918 
	#NID_id_pkix_OCSP_Œu¡RoÙ
 375

	)

1919 
	#OBJ_id_pkix_OCSP_Œu¡RoÙ
 
OBJ_id_pkix_OCSP
,11L

	)

1921 
	#SN_®gÜ™hm
 "®gÜ™hm"

	)

1922 
	#LN_®gÜ™hm
 "®gÜ™hm"

	)

1923 
	#NID_®gÜ™hm
 376

	)

1924 
	#OBJ_®gÜ™hm
 1L,3L,14L,3L,2L

	)

1926 
	#SN_md5W™hRSA
 "RSA-NP-MD5"

	)

1927 
	#LN_md5W™hRSA
 "md5W™hRSA"

	)

1928 
	#NID_md5W™hRSA
 104

	)

1929 
	#OBJ_md5W™hRSA
 
OBJ_®gÜ™hm
,3L

	)

1931 
	#SN_des_ecb
 "DES-ECB"

	)

1932 
	#LN_des_ecb
 "des-ecb"

	)

1933 
	#NID_des_ecb
 29

	)

1934 
	#OBJ_des_ecb
 
OBJ_®gÜ™hm
,6L

	)

1936 
	#SN_des_cbc
 "DES-CBC"

	)

1937 
	#LN_des_cbc
 "des-cbc"

	)

1938 
	#NID_des_cbc
 31

	)

1939 
	#OBJ_des_cbc
 
OBJ_®gÜ™hm
,7L

	)

1941 
	#SN_des_ofb64
 "DES-OFB"

	)

1942 
	#LN_des_ofb64
 "des-ofb"

	)

1943 
	#NID_des_ofb64
 45

	)

1944 
	#OBJ_des_ofb64
 
OBJ_®gÜ™hm
,8L

	)

1946 
	#SN_des_cfb64
 "DES-CFB"

	)

1947 
	#LN_des_cfb64
 "des-cfb"

	)

1948 
	#NID_des_cfb64
 30

	)

1949 
	#OBJ_des_cfb64
 
OBJ_®gÜ™hm
,9L

	)

1951 
	#SN_r§SigÇtu»
 "r§SigÇtu»"

	)

1952 
	#NID_r§SigÇtu»
 377

	)

1953 
	#OBJ_r§SigÇtu»
 
OBJ_®gÜ™hm
,11L

	)

1955 
	#SN_d§_2
 "DSA-Şd"

	)

1956 
	#LN_d§_2
 "d§Enüy±iÚ-Şd"

	)

1957 
	#NID_d§_2
 67

	)

1958 
	#OBJ_d§_2
 
OBJ_®gÜ™hm
,12L

	)

1960 
	#SN_d§W™hSHA
 "DSA-SHA"

	)

1961 
	#LN_d§W™hSHA
 "d§W™hSHA"

	)

1962 
	#NID_d§W™hSHA
 66

	)

1963 
	#OBJ_d§W™hSHA
 
OBJ_®gÜ™hm
,13L

	)

1965 
	#SN_shaW™hRSAEnüy±iÚ
 "RSA-SHA"

	)

1966 
	#LN_shaW™hRSAEnüy±iÚ
 "shaW™hRSAEnüy±iÚ"

	)

1967 
	#NID_shaW™hRSAEnüy±iÚ
 42

	)

1968 
	#OBJ_shaW™hRSAEnüy±iÚ
 
OBJ_®gÜ™hm
,15L

	)

1970 
	#SN_des_ede_ecb
 "DES-EDE"

	)

1971 
	#LN_des_ede_ecb
 "des-ede"

	)

1972 
	#NID_des_ede_ecb
 32

	)

1973 
	#OBJ_des_ede_ecb
 
OBJ_®gÜ™hm
,17L

	)

1975 
	#SN_des_ede3_ecb
 "DES-EDE3"

	)

1976 
	#LN_des_ede3_ecb
 "des-ede3"

	)

1977 
	#NID_des_ede3_ecb
 33

	)

1979 
	#SN_des_ede_cbc
 "DES-EDE-CBC"

	)

1980 
	#LN_des_ede_cbc
 "des-ede-cbc"

	)

1981 
	#NID_des_ede_cbc
 43

	)

1983 
	#SN_des_ede_cfb64
 "DES-EDE-CFB"

	)

1984 
	#LN_des_ede_cfb64
 "des-ede-cfb"

	)

1985 
	#NID_des_ede_cfb64
 60

	)

1987 
	#SN_des_ede3_cfb64
 "DES-EDE3-CFB"

	)

1988 
	#LN_des_ede3_cfb64
 "des-ede3-cfb"

	)

1989 
	#NID_des_ede3_cfb64
 61

	)

1991 
	#SN_des_ede_ofb64
 "DES-EDE-OFB"

	)

1992 
	#LN_des_ede_ofb64
 "des-ede-ofb"

	)

1993 
	#NID_des_ede_ofb64
 62

	)

1995 
	#SN_des_ede3_ofb64
 "DES-EDE3-OFB"

	)

1996 
	#LN_des_ede3_ofb64
 "des-ede3-ofb"

	)

1997 
	#NID_des_ede3_ofb64
 63

	)

1999 
	#SN_desx_cbc
 "DESX-CBC"

	)

2000 
	#LN_desx_cbc
 "desx-cbc"

	)

2001 
	#NID_desx_cbc
 80

	)

2003 
	#SN_sha
 "SHA"

	)

2004 
	#LN_sha
 "sha"

	)

2005 
	#NID_sha
 41

	)

2006 
	#OBJ_sha
 
OBJ_®gÜ™hm
,18L

	)

2008 
	#SN_sha1
 "SHA1"

	)

2009 
	#LN_sha1
 "sha1"

	)

2010 
	#NID_sha1
 64

	)

2011 
	#OBJ_sha1
 
OBJ_®gÜ™hm
,26L

	)

2013 
	#SN_d§W™hSHA1_2
 "DSA-SHA1-Şd"

	)

2014 
	#LN_d§W™hSHA1_2
 "d§W™hSHA1-Şd"

	)

2015 
	#NID_d§W™hSHA1_2
 70

	)

2016 
	#OBJ_d§W™hSHA1_2
 
OBJ_®gÜ™hm
,27L

	)

2018 
	#SN_sha1W™hRSA
 "RSA-SHA1-2"

	)

2019 
	#LN_sha1W™hRSA
 "sha1W™hRSA"

	)

2020 
	#NID_sha1W™hRSA
 115

	)

2021 
	#OBJ_sha1W™hRSA
 
OBJ_®gÜ™hm
,29L

	)

2023 
	#SN_remd160
 "RIPEMD160"

	)

2024 
	#LN_remd160
 "remd160"

	)

2025 
	#NID_remd160
 117

	)

2026 
	#OBJ_remd160
 1L,3L,36L,3L,2L,1L

	)

2028 
	#SN_remd160W™hRSA
 "RSA-RIPEMD160"

	)

2029 
	#LN_remd160W™hRSA
 "remd160W™hRSA"

	)

2030 
	#NID_remd160W™hRSA
 119

	)

2031 
	#OBJ_remd160W™hRSA
 1L,3L,36L,3L,3L,1L,2L

	)

2033 
	#SN_sxÃt
 "SXN‘ID"

	)

2034 
	#LN_sxÃt
 "SŒÚg ExŒª‘ ID"

	)

2035 
	#NID_sxÃt
 143

	)

2036 
	#OBJ_sxÃt
 1L,3L,101L,1L,4L,1L

	)

2038 
	#SN_X500
 "X500"

	)

2039 
	#LN_X500
 "dœeùÜy s”viû (X.500)"

	)

2040 
	#NID_X500
 11

	)

2041 
	#OBJ_X500
 2L,5L

	)

2043 
	#SN_X509
 "X509"

	)

2044 
	#NID_X509
 12

	)

2045 
	#OBJ_X509
 
OBJ_X500
,4L

	)

2047 
	#SN_commÚName
 "CN"

	)

2048 
	#LN_commÚName
 "commÚName"

	)

2049 
	#NID_commÚName
 13

	)

2050 
	#OBJ_commÚName
 
OBJ_X509
,3L

	)

2052 
	#SN_suºame
 "SN"

	)

2053 
	#LN_suºame
 "suºame"

	)

2054 
	#NID_suºame
 100

	)

2055 
	#OBJ_suºame
 
OBJ_X509
,4L

	)

2057 
	#LN_£rŸlNumb”
 "£rŸlNumb”"

	)

2058 
	#NID_£rŸlNumb”
 105

	)

2059 
	#OBJ_£rŸlNumb”
 
OBJ_X509
,5L

	)

2061 
	#SN_couÁryName
 "C"

	)

2062 
	#LN_couÁryName
 "couÁryName"

	)

2063 
	#NID_couÁryName
 14

	)

2064 
	#OBJ_couÁryName
 
OBJ_X509
,6L

	)

2066 
	#SN_loÿl™yName
 "L"

	)

2067 
	#LN_loÿl™yName
 "loÿl™yName"

	)

2068 
	#NID_loÿl™yName
 15

	)

2069 
	#OBJ_loÿl™yName
 
OBJ_X509
,7L

	)

2071 
	#SN_¡©eOrProvšûName
 "ST"

	)

2072 
	#LN_¡©eOrProvšûName
 "¡©eOrProvšûName"

	)

2073 
	#NID_¡©eOrProvšûName
 16

	)

2074 
	#OBJ_¡©eOrProvšûName
 
OBJ_X509
,8L

	)

2076 
	#SN_¡»‘Add»ss
 "¡»‘"

	)

2077 
	#LN_¡»‘Add»ss
 "¡»‘Add»ss"

	)

2078 
	#NID_¡»‘Add»ss
 660

	)

2079 
	#OBJ_¡»‘Add»ss
 
OBJ_X509
,9L

	)

2081 
	#SN_Ügªiz©iÚName
 "O"

	)

2082 
	#LN_Ügªiz©iÚName
 "Ügªiz©iÚName"

	)

2083 
	#NID_Ügªiz©iÚName
 17

	)

2084 
	#OBJ_Ügªiz©iÚName
 
OBJ_X509
,10L

	)

2086 
	#SN_Ügªiz©iÚ®Un™Name
 "OU"

	)

2087 
	#LN_Ügªiz©iÚ®Un™Name
 "Ügªiz©iÚ®Un™Name"

	)

2088 
	#NID_Ügªiz©iÚ®Un™Name
 18

	)

2089 
	#OBJ_Ügªiz©iÚ®Un™Name
 
OBJ_X509
,11L

	)

2091 
	#SN_t™Ë
 "t™Ë"

	)

2092 
	#LN_t™Ë
 "t™Ë"

	)

2093 
	#NID_t™Ë
 106

	)

2094 
	#OBJ_t™Ë
 
OBJ_X509
,12L

	)

2096 
	#LN_desütiÚ
 "desütiÚ"

	)

2097 
	#NID_desütiÚ
 107

	)

2098 
	#OBJ_desütiÚ
 
OBJ_X509
,13L

	)

2100 
	#LN_£¬chGuide
 "£¬chGuide"

	)

2101 
	#NID_£¬chGuide
 859

	)

2102 
	#OBJ_£¬chGuide
 
OBJ_X509
,14L

	)

2104 
	#LN_busšessC©egÜy
 "busšessC©egÜy"

	)

2105 
	#NID_busšessC©egÜy
 860

	)

2106 
	#OBJ_busšessC©egÜy
 
OBJ_X509
,15L

	)

2108 
	#LN_po¡®Add»ss
 "po¡®Add»ss"

	)

2109 
	#NID_po¡®Add»ss
 861

	)

2110 
	#OBJ_po¡®Add»ss
 
OBJ_X509
,16L

	)

2112 
	#LN_po¡®Code
 "po¡®Code"

	)

2113 
	#NID_po¡®Code
 661

	)

2114 
	#OBJ_po¡®Code
 
OBJ_X509
,17L

	)

2116 
	#LN_po¡OffiûBox
 "po¡OffiûBox"

	)

2117 
	#NID_po¡OffiûBox
 862

	)

2118 
	#OBJ_po¡OffiûBox
 
OBJ_X509
,18L

	)

2120 
	#LN_physiÿlD–iv”yOffiûName
 "physiÿlD–iv”yOffiûName"

	)

2121 
	#NID_physiÿlD–iv”yOffiûName
 863

	)

2122 
	#OBJ_physiÿlD–iv”yOffiûName
 
OBJ_X509
,19L

	)

2124 
	#LN_‹ËphÚeNumb”
 "‹ËphÚeNumb”"

	)

2125 
	#NID_‹ËphÚeNumb”
 864

	)

2126 
	#OBJ_‹ËphÚeNumb”
 
OBJ_X509
,20L

	)

2128 
	#LN_‹ËxNumb”
 "‹ËxNumb”"

	)

2129 
	#NID_‹ËxNumb”
 865

	)

2130 
	#OBJ_‹ËxNumb”
 
OBJ_X509
,21L

	)

2132 
	#LN_‹Ë‹xT”mš®Id’tif›r
 "‹Ë‹xT”mš®Id’tif›r"

	)

2133 
	#NID_‹Ë‹xT”mš®Id’tif›r
 866

	)

2134 
	#OBJ_‹Ë‹xT”mš®Id’tif›r
 
OBJ_X509
,22L

	)

2136 
	#LN_çcsimeT–•hÚeNumb”
 "çcsimeT–•hÚeNumb”"

	)

2137 
	#NID_çcsimeT–•hÚeNumb”
 867

	)

2138 
	#OBJ_çcsimeT–•hÚeNumb”
 
OBJ_X509
,23L

	)

2140 
	#LN_x121Add»ss
 "x121Add»ss"

	)

2141 
	#NID_x121Add»ss
 868

	)

2142 
	#OBJ_x121Add»ss
 
OBJ_X509
,24L

	)

2144 
	#LN_š‹º©iÚ®iSDNNumb”
 "š‹º©iÚ®iSDNNumb”"

	)

2145 
	#NID_š‹º©iÚ®iSDNNumb”
 869

	)

2146 
	#OBJ_š‹º©iÚ®iSDNNumb”
 
OBJ_X509
,25L

	)

2148 
	#LN_»gi¡”edAdd»ss
 "»gi¡”edAdd»ss"

	)

2149 
	#NID_»gi¡”edAdd»ss
 870

	)

2150 
	#OBJ_»gi¡”edAdd»ss
 
OBJ_X509
,26L

	)

2152 
	#LN_de¡š©iÚIndiÿtÜ
 "de¡š©iÚIndiÿtÜ"

	)

2153 
	#NID_de¡š©iÚIndiÿtÜ
 871

	)

2154 
	#OBJ_de¡š©iÚIndiÿtÜ
 
OBJ_X509
,27L

	)

2156 
	#LN_´eã¼edD–iv”yM‘hod
 "´eã¼edD–iv”yM‘hod"

	)

2157 
	#NID_´eã¼edD–iv”yM‘hod
 872

	)

2158 
	#OBJ_´eã¼edD–iv”yM‘hod
 
OBJ_X509
,28L

	)

2160 
	#LN_´e£Á©iÚAdd»ss
 "´e£Á©iÚAdd»ss"

	)

2161 
	#NID_´e£Á©iÚAdd»ss
 873

	)

2162 
	#OBJ_´e£Á©iÚAdd»ss
 
OBJ_X509
,29L

	)

2164 
	#LN_suµÜ‹dAµliÿtiÚCÚ‹xt
 "suµÜ‹dAµliÿtiÚCÚ‹xt"

	)

2165 
	#NID_suµÜ‹dAµliÿtiÚCÚ‹xt
 874

	)

2166 
	#OBJ_suµÜ‹dAµliÿtiÚCÚ‹xt
 
OBJ_X509
,30L

	)

2168 
	#SN_memb”
 "memb”"

	)

2169 
	#NID_memb”
 875

	)

2170 
	#OBJ_memb”
 
OBJ_X509
,31L

	)

2172 
	#SN_owÃr
 "owÃr"

	)

2173 
	#NID_owÃr
 876

	)

2174 
	#OBJ_owÃr
 
OBJ_X509
,32L

	)

2176 
	#LN_rŞeOccu·Á
 "rŞeOccu·Á"

	)

2177 
	#NID_rŞeOccu·Á
 877

	)

2178 
	#OBJ_rŞeOccu·Á
 
OBJ_X509
,33L

	)

2180 
	#SN_£eAlso
 "£eAlso"

	)

2181 
	#NID_£eAlso
 878

	)

2182 
	#OBJ_£eAlso
 
OBJ_X509
,34L

	)

2184 
	#LN_u£rPasswÜd
 "u£rPasswÜd"

	)

2185 
	#NID_u£rPasswÜd
 879

	)

2186 
	#OBJ_u£rPasswÜd
 
OBJ_X509
,35L

	)

2188 
	#LN_u£rC”tifiÿ‹
 "u£rC”tifiÿ‹"

	)

2189 
	#NID_u£rC”tifiÿ‹
 880

	)

2190 
	#OBJ_u£rC”tifiÿ‹
 
OBJ_X509
,36L

	)

2192 
	#LN_cAC”tifiÿ‹
 "cAC”tifiÿ‹"

	)

2193 
	#NID_cAC”tifiÿ‹
 881

	)

2194 
	#OBJ_cAC”tifiÿ‹
 
OBJ_X509
,37L

	)

2196 
	#LN_authÜ™yRevoÿtiÚLi¡
 "authÜ™yRevoÿtiÚLi¡"

	)

2197 
	#NID_authÜ™yRevoÿtiÚLi¡
 882

	)

2198 
	#OBJ_authÜ™yRevoÿtiÚLi¡
 
OBJ_X509
,38L

	)

2200 
	#LN_û¹ifiÿ‹RevoÿtiÚLi¡
 "û¹ifiÿ‹RevoÿtiÚLi¡"

	)

2201 
	#NID_û¹ifiÿ‹RevoÿtiÚLi¡
 883

	)

2202 
	#OBJ_û¹ifiÿ‹RevoÿtiÚLi¡
 
OBJ_X509
,39L

	)

2204 
	#LN_üossC”tifiÿ‹Paœ
 "üossC”tifiÿ‹Paœ"

	)

2205 
	#NID_üossC”tifiÿ‹Paœ
 884

	)

2206 
	#OBJ_üossC”tifiÿ‹Paœ
 
OBJ_X509
,40L

	)

2208 
	#SN_Çme
 "Çme"

	)

2209 
	#LN_Çme
 "Çme"

	)

2210 
	#NID_Çme
 173

	)

2211 
	#OBJ_Çme
 
OBJ_X509
,41L

	)

2213 
	#SN_giv’Name
 "GN"

	)

2214 
	#LN_giv’Name
 "giv’Name"

	)

2215 
	#NID_giv’Name
 99

	)

2216 
	#OBJ_giv’Name
 
OBJ_X509
,42L

	)

2218 
	#SN_š™Ÿls
 "š™Ÿls"

	)

2219 
	#LN_š™Ÿls
 "š™Ÿls"

	)

2220 
	#NID_š™Ÿls
 101

	)

2221 
	#OBJ_š™Ÿls
 
OBJ_X509
,43L

	)

2223 
	#LN_g’”©iÚQu®if›r
 "g’”©iÚQu®if›r"

	)

2224 
	#NID_g’”©iÚQu®if›r
 509

	)

2225 
	#OBJ_g’”©iÚQu®if›r
 
OBJ_X509
,44L

	)

2227 
	#LN_x500UniqueId’tif›r
 "x500UniqueId’tif›r"

	)

2228 
	#NID_x500UniqueId’tif›r
 503

	)

2229 
	#OBJ_x500UniqueId’tif›r
 
OBJ_X509
,45L

	)

2231 
	#SN_dnQu®if›r
 "dnQu®if›r"

	)

2232 
	#LN_dnQu®if›r
 "dnQu®if›r"

	)

2233 
	#NID_dnQu®if›r
 174

	)

2234 
	#OBJ_dnQu®if›r
 
OBJ_X509
,46L

	)

2236 
	#LN_’hªûdS—rchGuide
 "’hªûdS—rchGuide"

	)

2237 
	#NID_’hªûdS—rchGuide
 885

	)

2238 
	#OBJ_’hªûdS—rchGuide
 
OBJ_X509
,47L

	)

2240 
	#LN_´ÙocŞInfÜm©iÚ
 "´ÙocŞInfÜm©iÚ"

	)

2241 
	#NID_´ÙocŞInfÜm©iÚ
 886

	)

2242 
	#OBJ_´ÙocŞInfÜm©iÚ
 
OBJ_X509
,48L

	)

2244 
	#LN_di¡šguishedName
 "di¡šguishedName"

	)

2245 
	#NID_di¡šguishedName
 887

	)

2246 
	#OBJ_di¡šguishedName
 
OBJ_X509
,49L

	)

2248 
	#LN_uniqueMemb”
 "uniqueMemb”"

	)

2249 
	#NID_uniqueMemb”
 888

	)

2250 
	#OBJ_uniqueMemb”
 
OBJ_X509
,50L

	)

2252 
	#LN_hou£Id’tif›r
 "hou£Id’tif›r"

	)

2253 
	#NID_hou£Id’tif›r
 889

	)

2254 
	#OBJ_hou£Id’tif›r
 
OBJ_X509
,51L

	)

2256 
	#LN_suµÜ‹dAlgÜ™hms
 "suµÜ‹dAlgÜ™hms"

	)

2257 
	#NID_suµÜ‹dAlgÜ™hms
 890

	)

2258 
	#OBJ_suµÜ‹dAlgÜ™hms
 
OBJ_X509
,52L

	)

2260 
	#LN_d–RevoÿtiÚLi¡
 "d–RevoÿtiÚLi¡"

	)

2261 
	#NID_d–RevoÿtiÚLi¡
 891

	)

2262 
	#OBJ_d–RevoÿtiÚLi¡
 
OBJ_X509
,53L

	)

2264 
	#SN_dmdName
 "dmdName"

	)

2265 
	#NID_dmdName
 892

	)

2266 
	#OBJ_dmdName
 
OBJ_X509
,54L

	)

2268 
	#LN_p£udÚym
 "p£udÚym"

	)

2269 
	#NID_p£udÚym
 510

	)

2270 
	#OBJ_p£udÚym
 
OBJ_X509
,65L

	)

2272 
	#SN_rŞe
 "rŞe"

	)

2273 
	#LN_rŞe
 "rŞe"

	)

2274 
	#NID_rŞe
 400

	)

2275 
	#OBJ_rŞe
 
OBJ_X509
,72L

	)

2277 
	#SN_X500®gÜ™hms
 "X500®gÜ™hms"

	)

2278 
	#LN_X500®gÜ™hms
 "dœeùÜy s”viû -‡lgÜ™hms"

	)

2279 
	#NID_X500®gÜ™hms
 378

	)

2280 
	#OBJ_X500®gÜ™hms
 
OBJ_X500
,8L

	)

2282 
	#SN_r§
 "RSA"

	)

2283 
	#LN_r§
 "r§"

	)

2284 
	#NID_r§
 19

	)

2285 
	#OBJ_r§
 
OBJ_X500®gÜ™hms
,1L,1L

	)

2287 
	#SN_mdc2W™hRSA
 "RSA-MDC2"

	)

2288 
	#LN_mdc2W™hRSA
 "mdc2W™hRSA"

	)

2289 
	#NID_mdc2W™hRSA
 96

	)

2290 
	#OBJ_mdc2W™hRSA
 
OBJ_X500®gÜ™hms
,3L,100L

	)

2292 
	#SN_mdc2
 "MDC2"

	)

2293 
	#LN_mdc2
 "mdc2"

	)

2294 
	#NID_mdc2
 95

	)

2295 
	#OBJ_mdc2
 
OBJ_X500®gÜ™hms
,3L,101L

	)

2297 
	#SN_id_û
 "id-û"

	)

2298 
	#NID_id_û
 81

	)

2299 
	#OBJ_id_û
 
OBJ_X500
,29L

	)

2301 
	#SN_subjeù_dœeùÜy_©Œibu‹s
 "subjeùDœeùÜyA‰ribu‹s"

	)

2302 
	#LN_subjeù_dœeùÜy_©Œibu‹s
 "X509v3 Subjeù DœeùÜy A‰ribu‹s"

	)

2303 
	#NID_subjeù_dœeùÜy_©Œibu‹s
 769

	)

2304 
	#OBJ_subjeù_dœeùÜy_©Œibu‹s
 
OBJ_id_û
,9L

	)

2306 
	#SN_subjeù_key_id’tif›r
 "subjeùKeyId’tif›r"

	)

2307 
	#LN_subjeù_key_id’tif›r
 "X509v3 Subjeù Key Id’tif›r"

	)

2308 
	#NID_subjeù_key_id’tif›r
 82

	)

2309 
	#OBJ_subjeù_key_id’tif›r
 
OBJ_id_û
,14L

	)

2311 
	#SN_key_u§ge
 "keyU§ge"

	)

2312 
	#LN_key_u§ge
 "X509v3 Key U§ge"

	)

2313 
	#NID_key_u§ge
 83

	)

2314 
	#OBJ_key_u§ge
 
OBJ_id_û
,15L

	)

2316 
	#SN_´iv©e_key_u§ge_³riod
 "´iv©eKeyU§geP”iod"

	)

2317 
	#LN_´iv©e_key_u§ge_³riod
 "X509v3 Priv©Key U§gP”iod"

	)

2318 
	#NID_´iv©e_key_u§ge_³riod
 84

	)

2319 
	#OBJ_´iv©e_key_u§ge_³riod
 
OBJ_id_û
,16L

	)

2321 
	#SN_subjeù_®t_Çme
 "subjeùAÉName"

	)

2322 
	#LN_subjeù_®t_Çme
 "X509v3 Subjeù AÉ”ÇtivName"

	)

2323 
	#NID_subjeù_®t_Çme
 85

	)

2324 
	#OBJ_subjeù_®t_Çme
 
OBJ_id_û
,17L

	)

2326 
	#SN_issu”_®t_Çme
 "issu”AÉName"

	)

2327 
	#LN_issu”_®t_Çme
 "X509v3 Issu” AÉ”ÇtivName"

	)

2328 
	#NID_issu”_®t_Çme
 86

	)

2329 
	#OBJ_issu”_®t_Çme
 
OBJ_id_û
,18L

	)

2331 
	#SN_basic_cÚ¡¿šts
 "basicCÚ¡¿šts"

	)

2332 
	#LN_basic_cÚ¡¿šts
 "X509v3 BasiøCÚ¡¿šts"

	)

2333 
	#NID_basic_cÚ¡¿šts
 87

	)

2334 
	#OBJ_basic_cÚ¡¿šts
 
OBJ_id_û
,19L

	)

2336 
	#SN_ül_numb”
 "ülNumb”"

	)

2337 
	#LN_ül_numb”
 "X509v3 CRL Numb”"

	)

2338 
	#NID_ül_numb”
 88

	)

2339 
	#OBJ_ül_numb”
 
OBJ_id_û
,20L

	)

2341 
	#SN_ül_»asÚ
 "CRLR—sÚ"

	)

2342 
	#LN_ül_»asÚ
 "X509v3 CRL R—sÚ Code"

	)

2343 
	#NID_ül_»asÚ
 141

	)

2344 
	#OBJ_ül_»asÚ
 
OBJ_id_û
,21L

	)

2346 
	#SN_šv®id™y_d©e
 "šv®id™yD©e"

	)

2347 
	#LN_šv®id™y_d©e
 "Inv®id™y D©e"

	)

2348 
	#NID_šv®id™y_d©e
 142

	)

2349 
	#OBJ_šv®id™y_d©e
 
OBJ_id_û
,24L

	)

2351 
	#SN_d–_ül
 "d–CRL"

	)

2352 
	#LN_d–_ül
 "X509v3 D– CRL IndiÿtÜ"

	)

2353 
	#NID_d–_ül
 140

	)

2354 
	#OBJ_d–_ül
 
OBJ_id_û
,27L

	)

2356 
	#SN_issušg_di¡ributiÚ_pošt
 "issušgDi¡ributiÚPošt"

	)

2357 
	#LN_issušg_di¡ributiÚ_pošt
 "X509v3 Issušg Di¡rubutiÚ Pošt"

	)

2358 
	#NID_issušg_di¡ributiÚ_pošt
 770

	)

2359 
	#OBJ_issušg_di¡ributiÚ_pošt
 
OBJ_id_û
,28L

	)

2361 
	#SN_û¹ifiÿ‹_issu”
 "û¹ifiÿ‹Issu”"

	)

2362 
	#LN_û¹ifiÿ‹_issu”
 "X509v3 C”tifiÿ‹ Issu”"

	)

2363 
	#NID_û¹ifiÿ‹_issu”
 771

	)

2364 
	#OBJ_û¹ifiÿ‹_issu”
 
OBJ_id_û
,29L

	)

2366 
	#SN_Çme_cÚ¡¿šts
 "ÇmeCÚ¡¿šts"

	)

2367 
	#LN_Çme_cÚ¡¿šts
 "X509v3 NamCÚ¡¿šts"

	)

2368 
	#NID_Çme_cÚ¡¿šts
 666

	)

2369 
	#OBJ_Çme_cÚ¡¿šts
 
OBJ_id_û
,30L

	)

2371 
	#SN_ül_di¡ributiÚ_pošts
 "ülDi¡ributiÚPošts"

	)

2372 
	#LN_ül_di¡ributiÚ_pošts
 "X509v3 CRL Di¡ributiÚ Pošts"

	)

2373 
	#NID_ül_di¡ributiÚ_pošts
 103

	)

2374 
	#OBJ_ül_di¡ributiÚ_pošts
 
OBJ_id_û
,31L

	)

2376 
	#SN_û¹ifiÿ‹_pŞic›s
 "û¹ifiÿ‹PŞic›s"

	)

2377 
	#LN_û¹ifiÿ‹_pŞic›s
 "X509v3 C”tifiÿ‹ PŞic›s"

	)

2378 
	#NID_û¹ifiÿ‹_pŞic›s
 89

	)

2379 
	#OBJ_û¹ifiÿ‹_pŞic›s
 
OBJ_id_û
,32L

	)

2381 
	#SN_ªy_pŞicy
 "ªyPŞicy"

	)

2382 
	#LN_ªy_pŞicy
 "X509v3 Any PŞicy"

	)

2383 
	#NID_ªy_pŞicy
 746

	)

2384 
	#OBJ_ªy_pŞicy
 
OBJ_û¹ifiÿ‹_pŞic›s
,0L

	)

2386 
	#SN_pŞicy_m­pšgs
 "pŞicyM­pšgs"

	)

2387 
	#LN_pŞicy_m­pšgs
 "X509v3 PŞicy M­pšgs"

	)

2388 
	#NID_pŞicy_m­pšgs
 747

	)

2389 
	#OBJ_pŞicy_m­pšgs
 
OBJ_id_û
,33L

	)

2391 
	#SN_authÜ™y_key_id’tif›r
 "authÜ™yKeyId’tif›r"

	)

2392 
	#LN_authÜ™y_key_id’tif›r
 "X509v3 AuthÜ™y Key Id’tif›r"

	)

2393 
	#NID_authÜ™y_key_id’tif›r
 90

	)

2394 
	#OBJ_authÜ™y_key_id’tif›r
 
OBJ_id_û
,35L

	)

2396 
	#SN_pŞicy_cÚ¡¿šts
 "pŞicyCÚ¡¿šts"

	)

2397 
	#LN_pŞicy_cÚ¡¿šts
 "X509v3 PŞicy CÚ¡¿šts"

	)

2398 
	#NID_pŞicy_cÚ¡¿šts
 401

	)

2399 
	#OBJ_pŞicy_cÚ¡¿šts
 
OBJ_id_û
,36L

	)

2401 
	#SN_ext_key_u§ge
 "ex‹ndedKeyU§ge"

	)

2402 
	#LN_ext_key_u§ge
 "X509v3 Ex‹nded Key U§ge"

	)

2403 
	#NID_ext_key_u§ge
 126

	)

2404 
	#OBJ_ext_key_u§ge
 
OBJ_id_û
,37L

	)

2406 
	#SN_äeshe¡_ül
 "äeshe¡CRL"

	)

2407 
	#LN_äeshe¡_ül
 "X509v3 F»she¡ CRL"

	)

2408 
	#NID_äeshe¡_ül
 857

	)

2409 
	#OBJ_äeshe¡_ül
 
OBJ_id_û
,46L

	)

2411 
	#SN_šhib™_ªy_pŞicy
 "šhib™AnyPŞicy"

	)

2412 
	#LN_šhib™_ªy_pŞicy
 "X509v3 Inhib™ Any PŞicy"

	)

2413 
	#NID_šhib™_ªy_pŞicy
 748

	)

2414 
	#OBJ_šhib™_ªy_pŞicy
 
OBJ_id_û
,54L

	)

2416 
	#SN_rg‘_šfÜm©iÚ
 "rg‘InfÜm©iÚ"

	)

2417 
	#LN_rg‘_šfÜm©iÚ
 "X509v3 AC T¬g‘šg"

	)

2418 
	#NID_rg‘_šfÜm©iÚ
 402

	)

2419 
	#OBJ_rg‘_šfÜm©iÚ
 
OBJ_id_û
,55L

	)

2421 
	#SN_no_»v_ava
 "noRevAva"

	)

2422 
	#LN_no_»v_ava
 "X509v3 NØRevoÿtiÚ AvaabË"

	)

2423 
	#NID_no_»v_ava
 403

	)

2424 
	#OBJ_no_»v_ava
 
OBJ_id_û
,56L

	)

2426 
	#SN_ªyEx‹ndedKeyU§ge
 "ªyEx‹ndedKeyU§ge"

	)

2427 
	#LN_ªyEx‹ndedKeyU§ge
 "Any Ex‹nded Key U§ge"

	)

2428 
	#NID_ªyEx‹ndedKeyU§ge
 910

	)

2429 
	#OBJ_ªyEx‹ndedKeyU§ge
 
OBJ_ext_key_u§ge
,0L

	)

2431 
	#SN_Ãtsÿ³
 "N‘sÿ³"

	)

2432 
	#LN_Ãtsÿ³
 "N‘sÿ³ CommuniÿtiÚ CÜp."

	)

2433 
	#NID_Ãtsÿ³
 57

	)

2434 
	#OBJ_Ãtsÿ³
 2L,16L,840L,1L,113730L

	)

2436 
	#SN_Ãtsÿ³_û¹_ex‹nsiÚ
 "nsC”tExt"

	)

2437 
	#LN_Ãtsÿ³_û¹_ex‹nsiÚ
 "N‘sÿ³ C”tifiÿ‹ Ex‹nsiÚ"

	)

2438 
	#NID_Ãtsÿ³_û¹_ex‹nsiÚ
 58

	)

2439 
	#OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
 
OBJ_Ãtsÿ³
,1L

	)

2441 
	#SN_Ãtsÿ³_d©a_ty³
 "nsD©aTy³"

	)

2442 
	#LN_Ãtsÿ³_d©a_ty³
 "N‘sÿ³ D©¨Ty³"

	)

2443 
	#NID_Ãtsÿ³_d©a_ty³
 59

	)

2444 
	#OBJ_Ãtsÿ³_d©a_ty³
 
OBJ_Ãtsÿ³
,2L

	)

2446 
	#SN_Ãtsÿ³_û¹_ty³
 "nsC”tTy³"

	)

2447 
	#LN_Ãtsÿ³_û¹_ty³
 "N‘sÿ³ C”ˆTy³"

	)

2448 
	#NID_Ãtsÿ³_û¹_ty³
 71

	)

2449 
	#OBJ_Ãtsÿ³_û¹_ty³
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,1L

	)

2451 
	#SN_Ãtsÿ³_ba£_u¾
 "nsBa£U¾"

	)

2452 
	#LN_Ãtsÿ³_ba£_u¾
 "N‘sÿ³ Ba£ U¾"

	)

2453 
	#NID_Ãtsÿ³_ba£_u¾
 72

	)

2454 
	#OBJ_Ãtsÿ³_ba£_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,2L

	)

2456 
	#SN_Ãtsÿ³_»voÿtiÚ_u¾
 "nsRevoÿtiÚU¾"

	)

2457 
	#LN_Ãtsÿ³_»voÿtiÚ_u¾
 "N‘sÿ³ RevoÿtiÚ U¾"

	)

2458 
	#NID_Ãtsÿ³_»voÿtiÚ_u¾
 73

	)

2459 
	#OBJ_Ãtsÿ³_»voÿtiÚ_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,3L

	)

2461 
	#SN_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 "nsCaRevoÿtiÚU¾"

	)

2462 
	#LN_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 "N‘sÿ³ CA RevoÿtiÚ U¾"

	)

2463 
	#NID_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 74

	)

2464 
	#OBJ_Ãtsÿ³_ÿ_»voÿtiÚ_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,4L

	)

2466 
	#SN_Ãtsÿ³_»Ãw®_u¾
 "nsR’ew®U¾"

	)

2467 
	#LN_Ãtsÿ³_»Ãw®_u¾
 "N‘sÿ³ R’ew® U¾"

	)

2468 
	#NID_Ãtsÿ³_»Ãw®_u¾
 75

	)

2469 
	#OBJ_Ãtsÿ³_»Ãw®_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,7L

	)

2471 
	#SN_Ãtsÿ³_ÿ_pŞicy_u¾
 "nsCaPŞicyU¾"

	)

2472 
	#LN_Ãtsÿ³_ÿ_pŞicy_u¾
 "N‘sÿ³ CA PŞicy U¾"

	)

2473 
	#NID_Ãtsÿ³_ÿ_pŞicy_u¾
 76

	)

2474 
	#OBJ_Ãtsÿ³_ÿ_pŞicy_u¾
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,8L

	)

2476 
	#SN_Ãtsÿ³_s¦_£rv”_Çme
 "nsS¦S”v”Name"

	)

2477 
	#LN_Ãtsÿ³_s¦_£rv”_Çme
 "N‘sÿ³ SSL S”v” Name"

	)

2478 
	#NID_Ãtsÿ³_s¦_£rv”_Çme
 77

	)

2479 
	#OBJ_Ãtsÿ³_s¦_£rv”_Çme
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,12L

	)

2481 
	#SN_Ãtsÿ³_comm’t
 "nsComm’t"

	)

2482 
	#LN_Ãtsÿ³_comm’t
 "N‘sÿ³ Comm’t"

	)

2483 
	#NID_Ãtsÿ³_comm’t
 78

	)

2484 
	#OBJ_Ãtsÿ³_comm’t
 
OBJ_Ãtsÿ³_û¹_ex‹nsiÚ
,13L

	)

2486 
	#SN_Ãtsÿ³_û¹_£qu’û
 "nsC”tSequ’û"

	)

2487 
	#LN_Ãtsÿ³_û¹_£qu’û
 "N‘sÿ³ C”tifiÿ‹ Sequ’û"

	)

2488 
	#NID_Ãtsÿ³_û¹_£qu’û
 79

	)

2489 
	#OBJ_Ãtsÿ³_û¹_£qu’û
 
OBJ_Ãtsÿ³_d©a_ty³
,5L

	)

2491 
	#SN_ns_sgc
 "nsSGC"

	)

2492 
	#LN_ns_sgc
 "N‘sÿ³ S”v” G©ed Cry±o"

	)

2493 
	#NID_ns_sgc
 139

	)

2494 
	#OBJ_ns_sgc
 
OBJ_Ãtsÿ³
,4L,1L

	)

2496 
	#SN_Üg
 "ORG"

	)

2497 
	#LN_Üg
 "Üg"

	)

2498 
	#NID_Üg
 379

	)

2499 
	#OBJ_Üg
 
OBJ_iso
,3L

	)

2501 
	#SN_dod
 "DOD"

	)

2502 
	#LN_dod
 "dod"

	)

2503 
	#NID_dod
 380

	)

2504 
	#OBJ_dod
 
OBJ_Üg
,6L

	)

2506 
	#SN_ŸÇ
 "IANA"

	)

2507 
	#LN_ŸÇ
 "ŸÇ"

	)

2508 
	#NID_ŸÇ
 381

	)

2509 
	#OBJ_ŸÇ
 
OBJ_dod
,1L

	)

2511 
	#OBJ_š‹º‘
 
OBJ_ŸÇ


	)

2513 
	#SN_DœeùÜy
 "dœeùÜy"

	)

2514 
	#LN_DœeùÜy
 "DœeùÜy"

	)

2515 
	#NID_DœeùÜy
 382

	)

2516 
	#OBJ_DœeùÜy
 
OBJ_š‹º‘
,1L

	)

2518 
	#SN_Mªagem’t
 "mgmt"

	)

2519 
	#LN_Mªagem’t
 "Mªagem’t"

	)

2520 
	#NID_Mªagem’t
 383

	)

2521 
	#OBJ_Mªagem’t
 
OBJ_š‹º‘
,2L

	)

2523 
	#SN_Ex³rim’l
 "ex³rim’l"

	)

2524 
	#LN_Ex³rim’l
 "Ex³rim’l"

	)

2525 
	#NID_Ex³rim’l
 384

	)

2526 
	#OBJ_Ex³rim’l
 
OBJ_š‹º‘
,3L

	)

2528 
	#SN_Priv©e
 "´iv©e"

	)

2529 
	#LN_Priv©e
 "Priv©e"

	)

2530 
	#NID_Priv©e
 385

	)

2531 
	#OBJ_Priv©e
 
OBJ_š‹º‘
,4L

	)

2533 
	#SN_Secur™y
 "£cur™y"

	)

2534 
	#LN_Secur™y
 "Secur™y"

	)

2535 
	#NID_Secur™y
 386

	)

2536 
	#OBJ_Secur™y
 
OBJ_š‹º‘
,5L

	)

2538 
	#SN_SNMPv2
 "¢mpv2"

	)

2539 
	#LN_SNMPv2
 "SNMPv2"

	)

2540 
	#NID_SNMPv2
 387

	)

2541 
	#OBJ_SNMPv2
 
OBJ_š‹º‘
,6L

	)

2543 
	#LN_Ma
 "Ma"

	)

2544 
	#NID_Ma
 388

	)

2545 
	#OBJ_Ma
 
OBJ_š‹º‘
,7L

	)

2547 
	#SN_EÁ”´i£s
 "’‹½ri£s"

	)

2548 
	#LN_EÁ”´i£s
 "EÁ”´i£s"

	)

2549 
	#NID_EÁ”´i£s
 389

	)

2550 
	#OBJ_EÁ”´i£s
 
OBJ_Priv©e
,1L

	)

2552 
	#SN_dcObjeù
 "dcobjeù"

	)

2553 
	#LN_dcObjeù
 "dcObjeù"

	)

2554 
	#NID_dcObjeù
 390

	)

2555 
	#OBJ_dcObjeù
 
OBJ_EÁ”´i£s
,1466L,344L

	)

2557 
	#SN_mime_mhs
 "mime-mhs"

	)

2558 
	#LN_mime_mhs
 "MIME MHS"

	)

2559 
	#NID_mime_mhs
 504

	)

2560 
	#OBJ_mime_mhs
 
OBJ_Ma
,1L

	)

2562 
	#SN_mime_mhs_h—dšgs
 "mime-mhs-h—dšgs"

	)

2563 
	#LN_mime_mhs_h—dšgs
 "mime-mhs-h—dšgs"

	)

2564 
	#NID_mime_mhs_h—dšgs
 505

	)

2565 
	#OBJ_mime_mhs_h—dšgs
 
OBJ_mime_mhs
,1L

	)

2567 
	#SN_mime_mhs_bod›s
 "mime-mhs-bod›s"

	)

2568 
	#LN_mime_mhs_bod›s
 "mime-mhs-bod›s"

	)

2569 
	#NID_mime_mhs_bod›s
 506

	)

2570 
	#OBJ_mime_mhs_bod›s
 
OBJ_mime_mhs
,2L

	)

2572 
	#SN_id_hex_·¹Ÿl_mes§ge
 "id-hex-·¹Ÿl-mes§ge"

	)

2573 
	#LN_id_hex_·¹Ÿl_mes§ge
 "id-hex-·¹Ÿl-mes§ge"

	)

2574 
	#NID_id_hex_·¹Ÿl_mes§ge
 507

	)

2575 
	#OBJ_id_hex_·¹Ÿl_mes§ge
 
OBJ_mime_mhs_h—dšgs
,1L

	)

2577 
	#SN_id_hex_muÉ¬t_mes§ge
 "id-hex-muÉ¬t-mes§ge"

	)

2578 
	#LN_id_hex_muÉ¬t_mes§ge
 "id-hex-muÉ¬t-mes§ge"

	)

2579 
	#NID_id_hex_muÉ¬t_mes§ge
 508

	)

2580 
	#OBJ_id_hex_muÉ¬t_mes§ge
 
OBJ_mime_mhs_h—dšgs
,2L

	)

2582 
	#SN_¾e_com´essiÚ
 "RLE"

	)

2583 
	#LN_¾e_com´essiÚ
 "ruÀËngth com´essiÚ"

	)

2584 
	#NID_¾e_com´essiÚ
 124

	)

2585 
	#OBJ_¾e_com´essiÚ
 1L,1L,1L,1L,666L,1L

	)

2587 
	#SN_zlib_com´essiÚ
 "ZLIB"

	)

2588 
	#LN_zlib_com´essiÚ
 "zlib com´essiÚ"

	)

2589 
	#NID_zlib_com´essiÚ
 125

	)

2590 
	#OBJ_zlib_com´essiÚ
 
OBJ_id_smime_®g
,8L

	)

2592 
	#OBJ_csÜ
 2L,16L,840L,1L,101L,3L

	)

2594 
	#OBJ_ni¡AlgÜ™hms
 
OBJ_csÜ
,4L

	)

2596 
	#OBJ_«s
 
OBJ_ni¡AlgÜ™hms
,1L

	)

2598 
	#SN_«s_128_ecb
 "AES-128-ECB"

	)

2599 
	#LN_«s_128_ecb
 "«s-128-ecb"

	)

2600 
	#NID_«s_128_ecb
 418

	)

2601 
	#OBJ_«s_128_ecb
 
OBJ_«s
,1L

	)

2603 
	#SN_«s_128_cbc
 "AES-128-CBC"

	)

2604 
	#LN_«s_128_cbc
 "«s-128-cbc"

	)

2605 
	#NID_«s_128_cbc
 419

	)

2606 
	#OBJ_«s_128_cbc
 
OBJ_«s
,2L

	)

2608 
	#SN_«s_128_ofb128
 "AES-128-OFB"

	)

2609 
	#LN_«s_128_ofb128
 "«s-128-ofb"

	)

2610 
	#NID_«s_128_ofb128
 420

	)

2611 
	#OBJ_«s_128_ofb128
 
OBJ_«s
,3L

	)

2613 
	#SN_«s_128_cfb128
 "AES-128-CFB"

	)

2614 
	#LN_«s_128_cfb128
 "«s-128-cfb"

	)

2615 
	#NID_«s_128_cfb128
 421

	)

2616 
	#OBJ_«s_128_cfb128
 
OBJ_«s
,4L

	)

2618 
	#SN_id_«s128_w¿p
 "id-«s128-w¿p"

	)

2619 
	#NID_id_«s128_w¿p
 788

	)

2620 
	#OBJ_id_«s128_w¿p
 
OBJ_«s
,5L

	)

2622 
	#SN_«s_128_gcm
 "id-«s128-GCM"

	)

2623 
	#LN_«s_128_gcm
 "«s-128-gcm"

	)

2624 
	#NID_«s_128_gcm
 895

	)

2625 
	#OBJ_«s_128_gcm
 
OBJ_«s
,6L

	)

2627 
	#SN_«s_128_ccm
 "id-«s128-CCM"

	)

2628 
	#LN_«s_128_ccm
 "«s-128-ccm"

	)

2629 
	#NID_«s_128_ccm
 896

	)

2630 
	#OBJ_«s_128_ccm
 
OBJ_«s
,7L

	)

2632 
	#SN_id_«s128_w¿p_·d
 "id-«s128-w¿p-·d"

	)

2633 
	#NID_id_«s128_w¿p_·d
 897

	)

2634 
	#OBJ_id_«s128_w¿p_·d
 
OBJ_«s
,8L

	)

2636 
	#SN_«s_192_ecb
 "AES-192-ECB"

	)

2637 
	#LN_«s_192_ecb
 "«s-192-ecb"

	)

2638 
	#NID_«s_192_ecb
 422

	)

2639 
	#OBJ_«s_192_ecb
 
OBJ_«s
,21L

	)

2641 
	#SN_«s_192_cbc
 "AES-192-CBC"

	)

2642 
	#LN_«s_192_cbc
 "«s-192-cbc"

	)

2643 
	#NID_«s_192_cbc
 423

	)

2644 
	#OBJ_«s_192_cbc
 
OBJ_«s
,22L

	)

2646 
	#SN_«s_192_ofb128
 "AES-192-OFB"

	)

2647 
	#LN_«s_192_ofb128
 "«s-192-ofb"

	)

2648 
	#NID_«s_192_ofb128
 424

	)

2649 
	#OBJ_«s_192_ofb128
 
OBJ_«s
,23L

	)

2651 
	#SN_«s_192_cfb128
 "AES-192-CFB"

	)

2652 
	#LN_«s_192_cfb128
 "«s-192-cfb"

	)

2653 
	#NID_«s_192_cfb128
 425

	)

2654 
	#OBJ_«s_192_cfb128
 
OBJ_«s
,24L

	)

2656 
	#SN_id_«s192_w¿p
 "id-«s192-w¿p"

	)

2657 
	#NID_id_«s192_w¿p
 789

	)

2658 
	#OBJ_id_«s192_w¿p
 
OBJ_«s
,25L

	)

2660 
	#SN_«s_192_gcm
 "id-«s192-GCM"

	)

2661 
	#LN_«s_192_gcm
 "«s-192-gcm"

	)

2662 
	#NID_«s_192_gcm
 898

	)

2663 
	#OBJ_«s_192_gcm
 
OBJ_«s
,26L

	)

2665 
	#SN_«s_192_ccm
 "id-«s192-CCM"

	)

2666 
	#LN_«s_192_ccm
 "«s-192-ccm"

	)

2667 
	#NID_«s_192_ccm
 899

	)

2668 
	#OBJ_«s_192_ccm
 
OBJ_«s
,27L

	)

2670 
	#SN_id_«s192_w¿p_·d
 "id-«s192-w¿p-·d"

	)

2671 
	#NID_id_«s192_w¿p_·d
 900

	)

2672 
	#OBJ_id_«s192_w¿p_·d
 
OBJ_«s
,28L

	)

2674 
	#SN_«s_256_ecb
 "AES-256-ECB"

	)

2675 
	#LN_«s_256_ecb
 "«s-256-ecb"

	)

2676 
	#NID_«s_256_ecb
 426

	)

2677 
	#OBJ_«s_256_ecb
 
OBJ_«s
,41L

	)

2679 
	#SN_«s_256_cbc
 "AES-256-CBC"

	)

2680 
	#LN_«s_256_cbc
 "«s-256-cbc"

	)

2681 
	#NID_«s_256_cbc
 427

	)

2682 
	#OBJ_«s_256_cbc
 
OBJ_«s
,42L

	)

2684 
	#SN_«s_256_ofb128
 "AES-256-OFB"

	)

2685 
	#LN_«s_256_ofb128
 "«s-256-ofb"

	)

2686 
	#NID_«s_256_ofb128
 428

	)

2687 
	#OBJ_«s_256_ofb128
 
OBJ_«s
,43L

	)

2689 
	#SN_«s_256_cfb128
 "AES-256-CFB"

	)

2690 
	#LN_«s_256_cfb128
 "«s-256-cfb"

	)

2691 
	#NID_«s_256_cfb128
 429

	)

2692 
	#OBJ_«s_256_cfb128
 
OBJ_«s
,44L

	)

2694 
	#SN_id_«s256_w¿p
 "id-«s256-w¿p"

	)

2695 
	#NID_id_«s256_w¿p
 790

	)

2696 
	#OBJ_id_«s256_w¿p
 
OBJ_«s
,45L

	)

2698 
	#SN_«s_256_gcm
 "id-«s256-GCM"

	)

2699 
	#LN_«s_256_gcm
 "«s-256-gcm"

	)

2700 
	#NID_«s_256_gcm
 901

	)

2701 
	#OBJ_«s_256_gcm
 
OBJ_«s
,46L

	)

2703 
	#SN_«s_256_ccm
 "id-«s256-CCM"

	)

2704 
	#LN_«s_256_ccm
 "«s-256-ccm"

	)

2705 
	#NID_«s_256_ccm
 902

	)

2706 
	#OBJ_«s_256_ccm
 
OBJ_«s
,47L

	)

2708 
	#SN_id_«s256_w¿p_·d
 "id-«s256-w¿p-·d"

	)

2709 
	#NID_id_«s256_w¿p_·d
 903

	)

2710 
	#OBJ_id_«s256_w¿p_·d
 
OBJ_«s
,48L

	)

2712 
	#SN_«s_128_cfb1
 "AES-128-CFB1"

	)

2713 
	#LN_«s_128_cfb1
 "«s-128-cfb1"

	)

2714 
	#NID_«s_128_cfb1
 650

	)

2716 
	#SN_«s_192_cfb1
 "AES-192-CFB1"

	)

2717 
	#LN_«s_192_cfb1
 "«s-192-cfb1"

	)

2718 
	#NID_«s_192_cfb1
 651

	)

2720 
	#SN_«s_256_cfb1
 "AES-256-CFB1"

	)

2721 
	#LN_«s_256_cfb1
 "«s-256-cfb1"

	)

2722 
	#NID_«s_256_cfb1
 652

	)

2724 
	#SN_«s_128_cfb8
 "AES-128-CFB8"

	)

2725 
	#LN_«s_128_cfb8
 "«s-128-cfb8"

	)

2726 
	#NID_«s_128_cfb8
 653

	)

2728 
	#SN_«s_192_cfb8
 "AES-192-CFB8"

	)

2729 
	#LN_«s_192_cfb8
 "«s-192-cfb8"

	)

2730 
	#NID_«s_192_cfb8
 654

	)

2732 
	#SN_«s_256_cfb8
 "AES-256-CFB8"

	)

2733 
	#LN_«s_256_cfb8
 "«s-256-cfb8"

	)

2734 
	#NID_«s_256_cfb8
 655

	)

2736 
	#SN_«s_128_ùr
 "AES-128-CTR"

	)

2737 
	#LN_«s_128_ùr
 "«s-128-ùr"

	)

2738 
	#NID_«s_128_ùr
 904

	)

2740 
	#SN_«s_192_ùr
 "AES-192-CTR"

	)

2741 
	#LN_«s_192_ùr
 "«s-192-ùr"

	)

2742 
	#NID_«s_192_ùr
 905

	)

2744 
	#SN_«s_256_ùr
 "AES-256-CTR"

	)

2745 
	#LN_«s_256_ùr
 "«s-256-ùr"

	)

2746 
	#NID_«s_256_ùr
 906

	)

2748 
	#SN_«s_128_xts
 "AES-128-XTS"

	)

2749 
	#LN_«s_128_xts
 "«s-128-xts"

	)

2750 
	#NID_«s_128_xts
 913

	)

2752 
	#SN_«s_256_xts
 "AES-256-XTS"

	)

2753 
	#LN_«s_256_xts
 "«s-256-xts"

	)

2754 
	#NID_«s_256_xts
 914

	)

2756 
	#SN_des_cfb1
 "DES-CFB1"

	)

2757 
	#LN_des_cfb1
 "des-cfb1"

	)

2758 
	#NID_des_cfb1
 656

	)

2760 
	#SN_des_cfb8
 "DES-CFB8"

	)

2761 
	#LN_des_cfb8
 "des-cfb8"

	)

2762 
	#NID_des_cfb8
 657

	)

2764 
	#SN_des_ede3_cfb1
 "DES-EDE3-CFB1"

	)

2765 
	#LN_des_ede3_cfb1
 "des-ede3-cfb1"

	)

2766 
	#NID_des_ede3_cfb1
 658

	)

2768 
	#SN_des_ede3_cfb8
 "DES-EDE3-CFB8"

	)

2769 
	#LN_des_ede3_cfb8
 "des-ede3-cfb8"

	)

2770 
	#NID_des_ede3_cfb8
 659

	)

2772 
	#OBJ_ni¡_hash®gs
 
OBJ_ni¡AlgÜ™hms
,2L

	)

2774 
	#SN_sha256
 "SHA256"

	)

2775 
	#LN_sha256
 "sha256"

	)

2776 
	#NID_sha256
 672

	)

2777 
	#OBJ_sha256
 
OBJ_ni¡_hash®gs
,1L

	)

2779 
	#SN_sha384
 "SHA384"

	)

2780 
	#LN_sha384
 "sha384"

	)

2781 
	#NID_sha384
 673

	)

2782 
	#OBJ_sha384
 
OBJ_ni¡_hash®gs
,2L

	)

2784 
	#SN_sha512
 "SHA512"

	)

2785 
	#LN_sha512
 "sha512"

	)

2786 
	#NID_sha512
 674

	)

2787 
	#OBJ_sha512
 
OBJ_ni¡_hash®gs
,3L

	)

2789 
	#SN_sha224
 "SHA224"

	)

2790 
	#LN_sha224
 "sha224"

	)

2791 
	#NID_sha224
 675

	)

2792 
	#OBJ_sha224
 
OBJ_ni¡_hash®gs
,4L

	)

2794 
	#OBJ_d§_w™h_sha2
 
OBJ_ni¡AlgÜ™hms
,3L

	)

2796 
	#SN_d§_w™h_SHA224
 "d§_w™h_SHA224"

	)

2797 
	#NID_d§_w™h_SHA224
 802

	)

2798 
	#OBJ_d§_w™h_SHA224
 
OBJ_d§_w™h_sha2
,1L

	)

2800 
	#SN_d§_w™h_SHA256
 "d§_w™h_SHA256"

	)

2801 
	#NID_d§_w™h_SHA256
 803

	)

2802 
	#OBJ_d§_w™h_SHA256
 
OBJ_d§_w™h_sha2
,2L

	)

2804 
	#SN_hŞd_š¡ruùiÚ_code
 "hŞdIn¡ruùiÚCode"

	)

2805 
	#LN_hŞd_š¡ruùiÚ_code
 "HŞd In¡ruùiÚ Code"

	)

2806 
	#NID_hŞd_š¡ruùiÚ_code
 430

	)

2807 
	#OBJ_hŞd_š¡ruùiÚ_code
 
OBJ_id_û
,23L

	)

2809 
	#OBJ_hŞdIn¡ruùiÚ
 
OBJ_X9_57
,2L

	)

2811 
	#SN_hŞd_š¡ruùiÚ_nÚe
 "hŞdIn¡ruùiÚNÚe"

	)

2812 
	#LN_hŞd_š¡ruùiÚ_nÚe
 "HŞd In¡ruùiÚ NÚe"

	)

2813 
	#NID_hŞd_š¡ruùiÚ_nÚe
 431

	)

2814 
	#OBJ_hŞd_š¡ruùiÚ_nÚe
 
OBJ_hŞdIn¡ruùiÚ
,1L

	)

2816 
	#SN_hŞd_š¡ruùiÚ_ÿÎ_issu”
 "hŞdIn¡ruùiÚC®lIssu”"

	)

2817 
	#LN_hŞd_š¡ruùiÚ_ÿÎ_issu”
 "HŞd In¡ruùiÚ C®ÈIssu”"

	)

2818 
	#NID_hŞd_š¡ruùiÚ_ÿÎ_issu”
 432

	)

2819 
	#OBJ_hŞd_š¡ruùiÚ_ÿÎ_issu”
 
OBJ_hŞdIn¡ruùiÚ
,2L

	)

2821 
	#SN_hŞd_š¡ruùiÚ_»jeù
 "hŞdIn¡ruùiÚRejeù"

	)

2822 
	#LN_hŞd_š¡ruùiÚ_»jeù
 "HŞd In¡ruùiÚ Rejeù"

	)

2823 
	#NID_hŞd_š¡ruùiÚ_»jeù
 433

	)

2824 
	#OBJ_hŞd_š¡ruùiÚ_»jeù
 
OBJ_hŞdIn¡ruùiÚ
,3L

	)

2826 
	#SN_d©a
 "d©a"

	)

2827 
	#NID_d©a
 434

	)

2828 
	#OBJ_d©a
 
OBJ_™u_t
,9L

	)

2830 
	#SN_pss
 "pss"

	)

2831 
	#NID_pss
 435

	)

2832 
	#OBJ_pss
 
OBJ_d©a
,2342L

	)

2834 
	#SN_uş
 "uş"

	)

2835 
	#NID_uş
 436

	)

2836 
	#OBJ_uş
 
OBJ_pss
,19200300L

	)

2838 
	#SN_pÙ
 "pÙ"

	)

2839 
	#NID_pÙ
 437

	)

2840 
	#OBJ_pÙ
 
OBJ_uş
,100L

	)

2842 
	#LN_pÙA‰ribu‹Ty³
 "pÙA‰ribu‹Ty³"

	)

2843 
	#NID_pÙA‰ribu‹Ty³
 438

	)

2844 
	#OBJ_pÙA‰ribu‹Ty³
 
OBJ_pÙ
,1L

	)

2846 
	#LN_pÙA‰ribu‹SyÁax
 "pÙA‰ribu‹SyÁax"

	)

2847 
	#NID_pÙA‰ribu‹SyÁax
 439

	)

2848 
	#OBJ_pÙA‰ribu‹SyÁax
 
OBJ_pÙ
,3L

	)

2850 
	#LN_pÙObjeùCÏss
 "pÙObjeùCÏss"

	)

2851 
	#NID_pÙObjeùCÏss
 440

	)

2852 
	#OBJ_pÙObjeùCÏss
 
OBJ_pÙ
,4L

	)

2854 
	#LN_pÙGroups
 "pÙGroups"

	)

2855 
	#NID_pÙGroups
 441

	)

2856 
	#OBJ_pÙGroups
 
OBJ_pÙ
,10L

	)

2858 
	#LN_iA5SŒšgSyÁax
 "iA5SŒšgSyÁax"

	)

2859 
	#NID_iA5SŒšgSyÁax
 442

	)

2860 
	#OBJ_iA5SŒšgSyÁax
 
OBJ_pÙA‰ribu‹SyÁax
,4L

	)

2862 
	#LN_ÿ£IgnÜeIA5SŒšgSyÁax
 "ÿ£IgnÜeIA5SŒšgSyÁax"

	)

2863 
	#NID_ÿ£IgnÜeIA5SŒšgSyÁax
 443

	)

2864 
	#OBJ_ÿ£IgnÜeIA5SŒšgSyÁax
 
OBJ_pÙA‰ribu‹SyÁax
,5L

	)

2866 
	#LN_pÙObjeù
 "pÙObjeù"

	)

2867 
	#NID_pÙObjeù
 444

	)

2868 
	#OBJ_pÙObjeù
 
OBJ_pÙObjeùCÏss
,3L

	)

2870 
	#LN_pÙP”sÚ
 "pÙP”sÚ"

	)

2871 
	#NID_pÙP”sÚ
 445

	)

2872 
	#OBJ_pÙP”sÚ
 
OBJ_pÙObjeùCÏss
,4L

	)

2874 
	#SN_accouÁ
 "accouÁ"

	)

2875 
	#NID_accouÁ
 446

	)

2876 
	#OBJ_accouÁ
 
OBJ_pÙObjeùCÏss
,5L

	)

2878 
	#SN_docum’t
 "docum’t"

	)

2879 
	#NID_docum’t
 447

	)

2880 
	#OBJ_docum’t
 
OBJ_pÙObjeùCÏss
,6L

	)

2882 
	#SN_room
 "room"

	)

2883 
	#NID_room
 448

	)

2884 
	#OBJ_room
 
OBJ_pÙObjeùCÏss
,7L

	)

2886 
	#LN_docum’tS”›s
 "docum’tS”›s"

	)

2887 
	#NID_docum’tS”›s
 449

	)

2888 
	#OBJ_docum’tS”›s
 
OBJ_pÙObjeùCÏss
,9L

	)

2890 
	#SN_Domaš
 "domaš"

	)

2891 
	#LN_Domaš
 "Domaš"

	)

2892 
	#NID_Domaš
 392

	)

2893 
	#OBJ_Domaš
 
OBJ_pÙObjeùCÏss
,13L

	)

2895 
	#LN_rFC822loÿlP¬t
 "rFC822loÿlP¬t"

	)

2896 
	#NID_rFC822loÿlP¬t
 450

	)

2897 
	#OBJ_rFC822loÿlP¬t
 
OBJ_pÙObjeùCÏss
,14L

	)

2899 
	#LN_dNSDomaš
 "dNSDomaš"

	)

2900 
	#NID_dNSDomaš
 451

	)

2901 
	#OBJ_dNSDomaš
 
OBJ_pÙObjeùCÏss
,15L

	)

2903 
	#LN_domašR–©edObjeù
 "domašR–©edObjeù"

	)

2904 
	#NID_domašR–©edObjeù
 452

	)

2905 
	#OBJ_domašR–©edObjeù
 
OBJ_pÙObjeùCÏss
,17L

	)

2907 
	#LN_ä›ndlyCouÁry
 "ä›ndlyCouÁry"

	)

2908 
	#NID_ä›ndlyCouÁry
 453

	)

2909 
	#OBJ_ä›ndlyCouÁry
 
OBJ_pÙObjeùCÏss
,18L

	)

2911 
	#LN_sim¶eSecur™yObjeù
 "sim¶eSecur™yObjeù"

	)

2912 
	#NID_sim¶eSecur™yObjeù
 454

	)

2913 
	#OBJ_sim¶eSecur™yObjeù
 
OBJ_pÙObjeùCÏss
,19L

	)

2915 
	#LN_pÙOrgªiz©iÚ
 "pÙOrgªiz©iÚ"

	)

2916 
	#NID_pÙOrgªiz©iÚ
 455

	)

2917 
	#OBJ_pÙOrgªiz©iÚ
 
OBJ_pÙObjeùCÏss
,20L

	)

2919 
	#LN_pÙDSA
 "pÙDSA"

	)

2920 
	#NID_pÙDSA
 456

	)

2921 
	#OBJ_pÙDSA
 
OBJ_pÙObjeùCÏss
,21L

	)

2923 
	#LN_qu®™yLab–ËdD©a
 "qu®™yLab–ËdD©a"

	)

2924 
	#NID_qu®™yLab–ËdD©a
 457

	)

2925 
	#OBJ_qu®™yLab–ËdD©a
 
OBJ_pÙObjeùCÏss
,22L

	)

2927 
	#SN_u£rId
 "UID"

	)

2928 
	#LN_u£rId
 "u£rId"

	)

2929 
	#NID_u£rId
 458

	)

2930 
	#OBJ_u£rId
 
OBJ_pÙA‰ribu‹Ty³
,1L

	)

2932 
	#LN_‹xtEncodedORAdd»ss
 "‹xtEncodedORAdd»ss"

	)

2933 
	#NID_‹xtEncodedORAdd»ss
 459

	)

2934 
	#OBJ_‹xtEncodedORAdd»ss
 
OBJ_pÙA‰ribu‹Ty³
,2L

	)

2936 
	#SN_rfc822Mabox
 "ma"

	)

2937 
	#LN_rfc822Mabox
 "rfc822Mabox"

	)

2938 
	#NID_rfc822Mabox
 460

	)

2939 
	#OBJ_rfc822Mabox
 
OBJ_pÙA‰ribu‹Ty³
,3L

	)

2941 
	#SN_šfo
 "šfo"

	)

2942 
	#NID_šfo
 461

	)

2943 
	#OBJ_šfo
 
OBJ_pÙA‰ribu‹Ty³
,4L

	)

2945 
	#LN_çvour™eDršk
 "çvour™eDršk"

	)

2946 
	#NID_çvour™eDršk
 462

	)

2947 
	#OBJ_çvour™eDršk
 
OBJ_pÙA‰ribu‹Ty³
,5L

	)

2949 
	#LN_roomNumb”
 "roomNumb”"

	)

2950 
	#NID_roomNumb”
 463

	)

2951 
	#OBJ_roomNumb”
 
OBJ_pÙA‰ribu‹Ty³
,6L

	)

2953 
	#SN_phÙo
 "phÙo"

	)

2954 
	#NID_phÙo
 464

	)

2955 
	#OBJ_phÙo
 
OBJ_pÙA‰ribu‹Ty³
,7L

	)

2957 
	#LN_u£rCÏss
 "u£rCÏss"

	)

2958 
	#NID_u£rCÏss
 465

	)

2959 
	#OBJ_u£rCÏss
 
OBJ_pÙA‰ribu‹Ty³
,8L

	)

2961 
	#SN_ho¡
 "ho¡"

	)

2962 
	#NID_ho¡
 466

	)

2963 
	#OBJ_ho¡
 
OBJ_pÙA‰ribu‹Ty³
,9L

	)

2965 
	#SN_mªag”
 "mªag”"

	)

2966 
	#NID_mªag”
 467

	)

2967 
	#OBJ_mªag”
 
OBJ_pÙA‰ribu‹Ty³
,10L

	)

2969 
	#LN_docum’tId’tif›r
 "docum’tId’tif›r"

	)

2970 
	#NID_docum’tId’tif›r
 468

	)

2971 
	#OBJ_docum’tId’tif›r
 
OBJ_pÙA‰ribu‹Ty³
,11L

	)

2973 
	#LN_docum’tT™Ë
 "docum’tT™Ë"

	)

2974 
	#NID_docum’tT™Ë
 469

	)

2975 
	#OBJ_docum’tT™Ë
 
OBJ_pÙA‰ribu‹Ty³
,12L

	)

2977 
	#LN_docum’tV”siÚ
 "docum’tV”siÚ"

	)

2978 
	#NID_docum’tV”siÚ
 470

	)

2979 
	#OBJ_docum’tV”siÚ
 
OBJ_pÙA‰ribu‹Ty³
,13L

	)

2981 
	#LN_docum’tAuthÜ
 "docum’tAuthÜ"

	)

2982 
	#NID_docum’tAuthÜ
 471

	)

2983 
	#OBJ_docum’tAuthÜ
 
OBJ_pÙA‰ribu‹Ty³
,14L

	)

2985 
	#LN_docum’tLoÿtiÚ
 "docum’tLoÿtiÚ"

	)

2986 
	#NID_docum’tLoÿtiÚ
 472

	)

2987 
	#OBJ_docum’tLoÿtiÚ
 
OBJ_pÙA‰ribu‹Ty³
,15L

	)

2989 
	#LN_homeT–•hÚeNumb”
 "homeT–•hÚeNumb”"

	)

2990 
	#NID_homeT–•hÚeNumb”
 473

	)

2991 
	#OBJ_homeT–•hÚeNumb”
 
OBJ_pÙA‰ribu‹Ty³
,20L

	)

2993 
	#SN_£ü‘¬y
 "£ü‘¬y"

	)

2994 
	#NID_£ü‘¬y
 474

	)

2995 
	#OBJ_£ü‘¬y
 
OBJ_pÙA‰ribu‹Ty³
,21L

	)

2997 
	#LN_Ùh”Mabox
 "Ùh”Mabox"

	)

2998 
	#NID_Ùh”Mabox
 475

	)

2999 
	#OBJ_Ùh”Mabox
 
OBJ_pÙA‰ribu‹Ty³
,22L

	)

3001 
	#LN_Ï¡Modif›dTime
 "Ï¡Modif›dTime"

	)

3002 
	#NID_Ï¡Modif›dTime
 476

	)

3003 
	#OBJ_Ï¡Modif›dTime
 
OBJ_pÙA‰ribu‹Ty³
,23L

	)

3005 
	#LN_Ï¡Modif›dBy
 "Ï¡Modif›dBy"

	)

3006 
	#NID_Ï¡Modif›dBy
 477

	)

3007 
	#OBJ_Ï¡Modif›dBy
 
OBJ_pÙA‰ribu‹Ty³
,24L

	)

3009 
	#SN_domašCompÚ’t
 "DC"

	)

3010 
	#LN_domašCompÚ’t
 "domašCompÚ’t"

	)

3011 
	#NID_domašCompÚ’t
 391

	)

3012 
	#OBJ_domašCompÚ’t
 
OBJ_pÙA‰ribu‹Ty³
,25L

	)

3014 
	#LN_aRecÜd
 "aRecÜd"

	)

3015 
	#NID_aRecÜd
 478

	)

3016 
	#OBJ_aRecÜd
 
OBJ_pÙA‰ribu‹Ty³
,26L

	)

3018 
	#LN_pÙA‰ribu‹Ty³27
 "pÙA‰ribu‹Ty³27"

	)

3019 
	#NID_pÙA‰ribu‹Ty³27
 479

	)

3020 
	#OBJ_pÙA‰ribu‹Ty³27
 
OBJ_pÙA‰ribu‹Ty³
,27L

	)

3022 
	#LN_mXRecÜd
 "mXRecÜd"

	)

3023 
	#NID_mXRecÜd
 480

	)

3024 
	#OBJ_mXRecÜd
 
OBJ_pÙA‰ribu‹Ty³
,28L

	)

3026 
	#LN_nSRecÜd
 "nSRecÜd"

	)

3027 
	#NID_nSRecÜd
 481

	)

3028 
	#OBJ_nSRecÜd
 
OBJ_pÙA‰ribu‹Ty³
,29L

	)

3030 
	#LN_sOARecÜd
 "sOARecÜd"

	)

3031 
	#NID_sOARecÜd
 482

	)

3032 
	#OBJ_sOARecÜd
 
OBJ_pÙA‰ribu‹Ty³
,30L

	)

3034 
	#LN_cNAMERecÜd
 "cNAMERecÜd"

	)

3035 
	#NID_cNAMERecÜd
 483

	)

3036 
	#OBJ_cNAMERecÜd
 
OBJ_pÙA‰ribu‹Ty³
,31L

	)

3038 
	#LN_assocŸ‹dDomaš
 "assocŸ‹dDomaš"

	)

3039 
	#NID_assocŸ‹dDomaš
 484

	)

3040 
	#OBJ_assocŸ‹dDomaš
 
OBJ_pÙA‰ribu‹Ty³
,37L

	)

3042 
	#LN_assocŸ‹dName
 "assocŸ‹dName"

	)

3043 
	#NID_assocŸ‹dName
 485

	)

3044 
	#OBJ_assocŸ‹dName
 
OBJ_pÙA‰ribu‹Ty³
,38L

	)

3046 
	#LN_homePo¡®Add»ss
 "homePo¡®Add»ss"

	)

3047 
	#NID_homePo¡®Add»ss
 486

	)

3048 
	#OBJ_homePo¡®Add»ss
 
OBJ_pÙA‰ribu‹Ty³
,39L

	)

3050 
	#LN_³rsÚ®T™Ë
 "³rsÚ®T™Ë"

	)

3051 
	#NID_³rsÚ®T™Ë
 487

	)

3052 
	#OBJ_³rsÚ®T™Ë
 
OBJ_pÙA‰ribu‹Ty³
,40L

	)

3054 
	#LN_mobeT–•hÚeNumb”
 "mobeT–•hÚeNumb”"

	)

3055 
	#NID_mobeT–•hÚeNumb”
 488

	)

3056 
	#OBJ_mobeT–•hÚeNumb”
 
OBJ_pÙA‰ribu‹Ty³
,41L

	)

3058 
	#LN_·g”T–•hÚeNumb”
 "·g”T–•hÚeNumb”"

	)

3059 
	#NID_·g”T–•hÚeNumb”
 489

	)

3060 
	#OBJ_·g”T–•hÚeNumb”
 
OBJ_pÙA‰ribu‹Ty³
,42L

	)

3062 
	#LN_ä›ndlyCouÁryName
 "ä›ndlyCouÁryName"

	)

3063 
	#NID_ä›ndlyCouÁryName
 490

	)

3064 
	#OBJ_ä›ndlyCouÁryName
 
OBJ_pÙA‰ribu‹Ty³
,43L

	)

3066 
	#LN_Ügªiz©iÚ®Stus
 "Ügªiz©iÚ®Stus"

	)

3067 
	#NID_Ügªiz©iÚ®Stus
 491

	)

3068 
	#OBJ_Ügªiz©iÚ®Stus
 
OBJ_pÙA‰ribu‹Ty³
,45L

	)

3070 
	#LN_jª‘Mabox
 "jª‘Mabox"

	)

3071 
	#NID_jª‘Mabox
 492

	)

3072 
	#OBJ_jª‘Mabox
 
OBJ_pÙA‰ribu‹Ty³
,46L

	)

3074 
	#LN_maP»ã»nûO±iÚ
 "maP»ã»nûO±iÚ"

	)

3075 
	#NID_maP»ã»nûO±iÚ
 493

	)

3076 
	#OBJ_maP»ã»nûO±iÚ
 
OBJ_pÙA‰ribu‹Ty³
,47L

	)

3078 
	#LN_budšgName
 "budšgName"

	)

3079 
	#NID_budšgName
 494

	)

3080 
	#OBJ_budšgName
 
OBJ_pÙA‰ribu‹Ty³
,48L

	)

3082 
	#LN_dSAQu®™y
 "dSAQu®™y"

	)

3083 
	#NID_dSAQu®™y
 495

	)

3084 
	#OBJ_dSAQu®™y
 
OBJ_pÙA‰ribu‹Ty³
,49L

	)

3086 
	#LN_sšgËLev–Qu®™y
 "sšgËLev–Qu®™y"

	)

3087 
	#NID_sšgËLev–Qu®™y
 496

	)

3088 
	#OBJ_sšgËLev–Qu®™y
 
OBJ_pÙA‰ribu‹Ty³
,50L

	)

3090 
	#LN_subŒ“MšimumQu®™y
 "subŒ“MšimumQu®™y"

	)

3091 
	#NID_subŒ“MšimumQu®™y
 497

	)

3092 
	#OBJ_subŒ“MšimumQu®™y
 
OBJ_pÙA‰ribu‹Ty³
,51L

	)

3094 
	#LN_subŒ“MaximumQu®™y
 "subŒ“MaximumQu®™y"

	)

3095 
	#NID_subŒ“MaximumQu®™y
 498

	)

3096 
	#OBJ_subŒ“MaximumQu®™y
 
OBJ_pÙA‰ribu‹Ty³
,52L

	)

3098 
	#LN_³rsÚ®SigÇtu»
 "³rsÚ®SigÇtu»"

	)

3099 
	#NID_³rsÚ®SigÇtu»
 499

	)

3100 
	#OBJ_³rsÚ®SigÇtu»
 
OBJ_pÙA‰ribu‹Ty³
,53L

	)

3102 
	#LN_dITRedœeù
 "dITRedœeù"

	)

3103 
	#NID_dITRedœeù
 500

	)

3104 
	#OBJ_dITRedœeù
 
OBJ_pÙA‰ribu‹Ty³
,54L

	)

3106 
	#SN_audio
 "audio"

	)

3107 
	#NID_audio
 501

	)

3108 
	#OBJ_audio
 
OBJ_pÙA‰ribu‹Ty³
,55L

	)

3110 
	#LN_docum’tPublish”
 "docum’tPublish”"

	)

3111 
	#NID_docum’tPublish”
 502

	)

3112 
	#OBJ_docum’tPublish”
 
OBJ_pÙA‰ribu‹Ty³
,56L

	)

3114 
	#SN_id_£t
 "id-£t"

	)

3115 
	#LN_id_£t
 "Secu» EËùrÚiøT¿n§ùiÚs"

	)

3116 
	#NID_id_£t
 512

	)

3117 
	#OBJ_id_£t
 
OBJ_š‹º©iÚ®_Ügªiz©iÚs
,42L

	)

3119 
	#SN_£t_ùy³
 "£t-ùy³"

	)

3120 
	#LN_£t_ùy³
 "cÚ‹Áy³s"

	)

3121 
	#NID_£t_ùy³
 513

	)

3122 
	#OBJ_£t_ùy³
 
OBJ_id_£t
,0L

	)

3124 
	#SN_£t_msgExt
 "£t-msgExt"

	)

3125 
	#LN_£t_msgExt
 "mes§gex‹nsiÚs"

	)

3126 
	#NID_£t_msgExt
 514

	)

3127 
	#OBJ_£t_msgExt
 
OBJ_id_£t
,1L

	)

3129 
	#SN_£t_©Œ
 "£t-©Œ"

	)

3130 
	#NID_£t_©Œ
 515

	)

3131 
	#OBJ_£t_©Œ
 
OBJ_id_£t
,3L

	)

3133 
	#SN_£t_pŞicy
 "£t-pŞicy"

	)

3134 
	#NID_£t_pŞicy
 516

	)

3135 
	#OBJ_£t_pŞicy
 
OBJ_id_£t
,5L

	)

3137 
	#SN_£t_û¹Ext
 "£t-û¹Ext"

	)

3138 
	#LN_£t_û¹Ext
 "û¹ifiÿ‹ƒx‹nsiÚs"

	)

3139 
	#NID_£t_û¹Ext
 517

	)

3140 
	#OBJ_£t_û¹Ext
 
OBJ_id_£t
,7L

	)

3142 
	#SN_£t_b¿nd
 "£t-b¿nd"

	)

3143 
	#NID_£t_b¿nd
 518

	)

3144 
	#OBJ_£t_b¿nd
 
OBJ_id_£t
,8L

	)

3146 
	#SN_£tù_PAND©a
 "£tù-PAND©a"

	)

3147 
	#NID_£tù_PAND©a
 519

	)

3148 
	#OBJ_£tù_PAND©a
 
OBJ_£t_ùy³
,0L

	)

3150 
	#SN_£tù_PANTok’
 "£tù-PANTok’"

	)

3151 
	#NID_£tù_PANTok’
 520

	)

3152 
	#OBJ_£tù_PANTok’
 
OBJ_£t_ùy³
,1L

	)

3154 
	#SN_£tù_PANOÆy
 "£tù-PANOÆy"

	)

3155 
	#NID_£tù_PANOÆy
 521

	)

3156 
	#OBJ_£tù_PANOÆy
 
OBJ_£t_ùy³
,2L

	)

3158 
	#SN_£tù_OID©a
 "£tù-OID©a"

	)

3159 
	#NID_£tù_OID©a
 522

	)

3160 
	#OBJ_£tù_OID©a
 
OBJ_£t_ùy³
,3L

	)

3162 
	#SN_£tù_PI
 "£tù-PI"

	)

3163 
	#NID_£tù_PI
 523

	)

3164 
	#OBJ_£tù_PI
 
OBJ_£t_ùy³
,4L

	)

3166 
	#SN_£tù_PID©a
 "£tù-PID©a"

	)

3167 
	#NID_£tù_PID©a
 524

	)

3168 
	#OBJ_£tù_PID©a
 
OBJ_£t_ùy³
,5L

	)

3170 
	#SN_£tù_PID©aUnsigÃd
 "£tù-PID©aUnsigÃd"

	)

3171 
	#NID_£tù_PID©aUnsigÃd
 525

	)

3172 
	#OBJ_£tù_PID©aUnsigÃd
 
OBJ_£t_ùy³
,6L

	)

3174 
	#SN_£tù_HODIÅut
 "£tù-HODIÅut"

	)

3175 
	#NID_£tù_HODIÅut
 526

	)

3176 
	#OBJ_£tù_HODIÅut
 
OBJ_£t_ùy³
,7L

	)

3178 
	#SN_£tù_AuthResBaggage
 "£tù-AuthResBaggage"

	)

3179 
	#NID_£tù_AuthResBaggage
 527

	)

3180 
	#OBJ_£tù_AuthResBaggage
 
OBJ_£t_ùy³
,8L

	)

3182 
	#SN_£tù_AuthRevReqBaggage
 "£tù-AuthRevReqBaggage"

	)

3183 
	#NID_£tù_AuthRevReqBaggage
 528

	)

3184 
	#OBJ_£tù_AuthRevReqBaggage
 
OBJ_£t_ùy³
,9L

	)

3186 
	#SN_£tù_AuthRevResBaggage
 "£tù-AuthRevResBaggage"

	)

3187 
	#NID_£tù_AuthRevResBaggage
 529

	)

3188 
	#OBJ_£tù_AuthRevResBaggage
 
OBJ_£t_ùy³
,10L

	)

3190 
	#SN_£tù_C­Tok’Seq
 "£tù-C­Tok’Seq"

	)

3191 
	#NID_£tù_C­Tok’Seq
 530

	)

3192 
	#OBJ_£tù_C­Tok’Seq
 
OBJ_£t_ùy³
,11L

	)

3194 
	#SN_£tù_PIn™ResD©a
 "£tù-PIn™ResD©a"

	)

3195 
	#NID_£tù_PIn™ResD©a
 531

	)

3196 
	#OBJ_£tù_PIn™ResD©a
 
OBJ_£t_ùy³
,12L

	)

3198 
	#SN_£tù_PI_TBS
 "£tù-PI-TBS"

	)

3199 
	#NID_£tù_PI_TBS
 532

	)

3200 
	#OBJ_£tù_PI_TBS
 
OBJ_£t_ùy³
,13L

	)

3202 
	#SN_£tù_PResD©a
 "£tù-PResD©a"

	)

3203 
	#NID_£tù_PResD©a
 533

	)

3204 
	#OBJ_£tù_PResD©a
 
OBJ_£t_ùy³
,14L

	)

3206 
	#SN_£tù_AuthReqTBS
 "£tù-AuthReqTBS"

	)

3207 
	#NID_£tù_AuthReqTBS
 534

	)

3208 
	#OBJ_£tù_AuthReqTBS
 
OBJ_£t_ùy³
,16L

	)

3210 
	#SN_£tù_AuthResTBS
 "£tù-AuthResTBS"

	)

3211 
	#NID_£tù_AuthResTBS
 535

	)

3212 
	#OBJ_£tù_AuthResTBS
 
OBJ_£t_ùy³
,17L

	)

3214 
	#SN_£tù_AuthResTBSX
 "£tù-AuthResTBSX"

	)

3215 
	#NID_£tù_AuthResTBSX
 536

	)

3216 
	#OBJ_£tù_AuthResTBSX
 
OBJ_£t_ùy³
,18L

	)

3218 
	#SN_£tù_AuthTok’TBS
 "£tù-AuthTok’TBS"

	)

3219 
	#NID_£tù_AuthTok’TBS
 537

	)

3220 
	#OBJ_£tù_AuthTok’TBS
 
OBJ_£t_ùy³
,19L

	)

3222 
	#SN_£tù_C­Tok’D©a
 "£tù-C­Tok’D©a"

	)

3223 
	#NID_£tù_C­Tok’D©a
 538

	)

3224 
	#OBJ_£tù_C­Tok’D©a
 
OBJ_£t_ùy³
,20L

	)

3226 
	#SN_£tù_C­Tok’TBS
 "£tù-C­Tok’TBS"

	)

3227 
	#NID_£tù_C­Tok’TBS
 539

	)

3228 
	#OBJ_£tù_C­Tok’TBS
 
OBJ_£t_ùy³
,21L

	)

3230 
	#SN_£tù_AcqC¬dCodeMsg
 "£tù-AcqC¬dCodeMsg"

	)

3231 
	#NID_£tù_AcqC¬dCodeMsg
 540

	)

3232 
	#OBJ_£tù_AcqC¬dCodeMsg
 
OBJ_£t_ùy³
,22L

	)

3234 
	#SN_£tù_AuthRevReqTBS
 "£tù-AuthRevReqTBS"

	)

3235 
	#NID_£tù_AuthRevReqTBS
 541

	)

3236 
	#OBJ_£tù_AuthRevReqTBS
 
OBJ_£t_ùy³
,23L

	)

3238 
	#SN_£tù_AuthRevResD©a
 "£tù-AuthRevResD©a"

	)

3239 
	#NID_£tù_AuthRevResD©a
 542

	)

3240 
	#OBJ_£tù_AuthRevResD©a
 
OBJ_£t_ùy³
,24L

	)

3242 
	#SN_£tù_AuthRevResTBS
 "£tù-AuthRevResTBS"

	)

3243 
	#NID_£tù_AuthRevResTBS
 543

	)

3244 
	#OBJ_£tù_AuthRevResTBS
 
OBJ_£t_ùy³
,25L

	)

3246 
	#SN_£tù_C­ReqTBS
 "£tù-C­ReqTBS"

	)

3247 
	#NID_£tù_C­ReqTBS
 544

	)

3248 
	#OBJ_£tù_C­ReqTBS
 
OBJ_£t_ùy³
,26L

	)

3250 
	#SN_£tù_C­ReqTBSX
 "£tù-C­ReqTBSX"

	)

3251 
	#NID_£tù_C­ReqTBSX
 545

	)

3252 
	#OBJ_£tù_C­ReqTBSX
 
OBJ_£t_ùy³
,27L

	)

3254 
	#SN_£tù_C­ResD©a
 "£tù-C­ResD©a"

	)

3255 
	#NID_£tù_C­ResD©a
 546

	)

3256 
	#OBJ_£tù_C­ResD©a
 
OBJ_£t_ùy³
,28L

	)

3258 
	#SN_£tù_C­RevReqTBS
 "£tù-C­RevReqTBS"

	)

3259 
	#NID_£tù_C­RevReqTBS
 547

	)

3260 
	#OBJ_£tù_C­RevReqTBS
 
OBJ_£t_ùy³
,29L

	)

3262 
	#SN_£tù_C­RevReqTBSX
 "£tù-C­RevReqTBSX"

	)

3263 
	#NID_£tù_C­RevReqTBSX
 548

	)

3264 
	#OBJ_£tù_C­RevReqTBSX
 
OBJ_£t_ùy³
,30L

	)

3266 
	#SN_£tù_C­RevResD©a
 "£tù-C­RevResD©a"

	)

3267 
	#NID_£tù_C­RevResD©a
 549

	)

3268 
	#OBJ_£tù_C­RevResD©a
 
OBJ_£t_ùy³
,31L

	)

3270 
	#SN_£tù_C»dReqTBS
 "£tù-C»dReqTBS"

	)

3271 
	#NID_£tù_C»dReqTBS
 550

	)

3272 
	#OBJ_£tù_C»dReqTBS
 
OBJ_£t_ùy³
,32L

	)

3274 
	#SN_£tù_C»dReqTBSX
 "£tù-C»dReqTBSX"

	)

3275 
	#NID_£tù_C»dReqTBSX
 551

	)

3276 
	#OBJ_£tù_C»dReqTBSX
 
OBJ_£t_ùy³
,33L

	)

3278 
	#SN_£tù_C»dResD©a
 "£tù-C»dResD©a"

	)

3279 
	#NID_£tù_C»dResD©a
 552

	)

3280 
	#OBJ_£tù_C»dResD©a
 
OBJ_£t_ùy³
,34L

	)

3282 
	#SN_£tù_C»dRevReqTBS
 "£tù-C»dRevReqTBS"

	)

3283 
	#NID_£tù_C»dRevReqTBS
 553

	)

3284 
	#OBJ_£tù_C»dRevReqTBS
 
OBJ_£t_ùy³
,35L

	)

3286 
	#SN_£tù_C»dRevReqTBSX
 "£tù-C»dRevReqTBSX"

	)

3287 
	#NID_£tù_C»dRevReqTBSX
 554

	)

3288 
	#OBJ_£tù_C»dRevReqTBSX
 
OBJ_£t_ùy³
,36L

	)

3290 
	#SN_£tù_C»dRevResD©a
 "£tù-C»dRevResD©a"

	)

3291 
	#NID_£tù_C»dRevResD©a
 555

	)

3292 
	#OBJ_£tù_C»dRevResD©a
 
OBJ_£t_ùy³
,37L

	)

3294 
	#SN_£tù_PC”tReqD©a
 "£tù-PC”tReqD©a"

	)

3295 
	#NID_£tù_PC”tReqD©a
 556

	)

3296 
	#OBJ_£tù_PC”tReqD©a
 
OBJ_£t_ùy³
,38L

	)

3298 
	#SN_£tù_PC”tResTBS
 "£tù-PC”tResTBS"

	)

3299 
	#NID_£tù_PC”tResTBS
 557

	)

3300 
	#OBJ_£tù_PC”tResTBS
 
OBJ_£t_ùy³
,39L

	)

3302 
	#SN_£tù_B©chAdmšReqD©a
 "£tù-B©chAdmšReqD©a"

	)

3303 
	#NID_£tù_B©chAdmšReqD©a
 558

	)

3304 
	#OBJ_£tù_B©chAdmšReqD©a
 
OBJ_£t_ùy³
,40L

	)

3306 
	#SN_£tù_B©chAdmšResD©a
 "£tù-B©chAdmšResD©a"

	)

3307 
	#NID_£tù_B©chAdmšResD©a
 559

	)

3308 
	#OBJ_£tù_B©chAdmšResD©a
 
OBJ_£t_ùy³
,41L

	)

3310 
	#SN_£tù_C¬dCIn™ResTBS
 "£tù-C¬dCIn™ResTBS"

	)

3311 
	#NID_£tù_C¬dCIn™ResTBS
 560

	)

3312 
	#OBJ_£tù_C¬dCIn™ResTBS
 
OBJ_£t_ùy³
,42L

	)

3314 
	#SN_£tù_MeAqCIn™ResTBS
 "£tù-MeAqCIn™ResTBS"

	)

3315 
	#NID_£tù_MeAqCIn™ResTBS
 561

	)

3316 
	#OBJ_£tù_MeAqCIn™ResTBS
 
OBJ_£t_ùy³
,43L

	)

3318 
	#SN_£tù_RegFÜmResTBS
 "£tù-RegFÜmResTBS"

	)

3319 
	#NID_£tù_RegFÜmResTBS
 562

	)

3320 
	#OBJ_£tù_RegFÜmResTBS
 
OBJ_£t_ùy³
,44L

	)

3322 
	#SN_£tù_C”tReqD©a
 "£tù-C”tReqD©a"

	)

3323 
	#NID_£tù_C”tReqD©a
 563

	)

3324 
	#OBJ_£tù_C”tReqD©a
 
OBJ_£t_ùy³
,45L

	)

3326 
	#SN_£tù_C”tReqTBS
 "£tù-C”tReqTBS"

	)

3327 
	#NID_£tù_C”tReqTBS
 564

	)

3328 
	#OBJ_£tù_C”tReqTBS
 
OBJ_£t_ùy³
,46L

	)

3330 
	#SN_£tù_C”tResD©a
 "£tù-C”tResD©a"

	)

3331 
	#NID_£tù_C”tResD©a
 565

	)

3332 
	#OBJ_£tù_C”tResD©a
 
OBJ_£t_ùy³
,47L

	)

3334 
	#SN_£tù_C”tInqReqTBS
 "£tù-C”tInqReqTBS"

	)

3335 
	#NID_£tù_C”tInqReqTBS
 566

	)

3336 
	#OBJ_£tù_C”tInqReqTBS
 
OBJ_£t_ùy³
,48L

	)

3338 
	#SN_£tù_E¼ÜTBS
 "£tù-E¼ÜTBS"

	)

3339 
	#NID_£tù_E¼ÜTBS
 567

	)

3340 
	#OBJ_£tù_E¼ÜTBS
 
OBJ_£t_ùy³
,49L

	)

3342 
	#SN_£tù_PIDu®SigÃdTBE
 "£tù-PIDu®SigÃdTBE"

	)

3343 
	#NID_£tù_PIDu®SigÃdTBE
 568

	)

3344 
	#OBJ_£tù_PIDu®SigÃdTBE
 
OBJ_£t_ùy³
,50L

	)

3346 
	#SN_£tù_PIUnsigÃdTBE
 "£tù-PIUnsigÃdTBE"

	)

3347 
	#NID_£tù_PIUnsigÃdTBE
 569

	)

3348 
	#OBJ_£tù_PIUnsigÃdTBE
 
OBJ_£t_ùy³
,51L

	)

3350 
	#SN_£tù_AuthReqTBE
 "£tù-AuthReqTBE"

	)

3351 
	#NID_£tù_AuthReqTBE
 570

	)

3352 
	#OBJ_£tù_AuthReqTBE
 
OBJ_£t_ùy³
,52L

	)

3354 
	#SN_£tù_AuthResTBE
 "£tù-AuthResTBE"

	)

3355 
	#NID_£tù_AuthResTBE
 571

	)

3356 
	#OBJ_£tù_AuthResTBE
 
OBJ_£t_ùy³
,53L

	)

3358 
	#SN_£tù_AuthResTBEX
 "£tù-AuthResTBEX"

	)

3359 
	#NID_£tù_AuthResTBEX
 572

	)

3360 
	#OBJ_£tù_AuthResTBEX
 
OBJ_£t_ùy³
,54L

	)

3362 
	#SN_£tù_AuthTok’TBE
 "£tù-AuthTok’TBE"

	)

3363 
	#NID_£tù_AuthTok’TBE
 573

	)

3364 
	#OBJ_£tù_AuthTok’TBE
 
OBJ_£t_ùy³
,55L

	)

3366 
	#SN_£tù_C­Tok’TBE
 "£tù-C­Tok’TBE"

	)

3367 
	#NID_£tù_C­Tok’TBE
 574

	)

3368 
	#OBJ_£tù_C­Tok’TBE
 
OBJ_£t_ùy³
,56L

	)

3370 
	#SN_£tù_C­Tok’TBEX
 "£tù-C­Tok’TBEX"

	)

3371 
	#NID_£tù_C­Tok’TBEX
 575

	)

3372 
	#OBJ_£tù_C­Tok’TBEX
 
OBJ_£t_ùy³
,57L

	)

3374 
	#SN_£tù_AcqC¬dCodeMsgTBE
 "£tù-AcqC¬dCodeMsgTBE"

	)

3375 
	#NID_£tù_AcqC¬dCodeMsgTBE
 576

	)

3376 
	#OBJ_£tù_AcqC¬dCodeMsgTBE
 
OBJ_£t_ùy³
,58L

	)

3378 
	#SN_£tù_AuthRevReqTBE
 "£tù-AuthRevReqTBE"

	)

3379 
	#NID_£tù_AuthRevReqTBE
 577

	)

3380 
	#OBJ_£tù_AuthRevReqTBE
 
OBJ_£t_ùy³
,59L

	)

3382 
	#SN_£tù_AuthRevResTBE
 "£tù-AuthRevResTBE"

	)

3383 
	#NID_£tù_AuthRevResTBE
 578

	)

3384 
	#OBJ_£tù_AuthRevResTBE
 
OBJ_£t_ùy³
,60L

	)

3386 
	#SN_£tù_AuthRevResTBEB
 "£tù-AuthRevResTBEB"

	)

3387 
	#NID_£tù_AuthRevResTBEB
 579

	)

3388 
	#OBJ_£tù_AuthRevResTBEB
 
OBJ_£t_ùy³
,61L

	)

3390 
	#SN_£tù_C­ReqTBE
 "£tù-C­ReqTBE"

	)

3391 
	#NID_£tù_C­ReqTBE
 580

	)

3392 
	#OBJ_£tù_C­ReqTBE
 
OBJ_£t_ùy³
,62L

	)

3394 
	#SN_£tù_C­ReqTBEX
 "£tù-C­ReqTBEX"

	)

3395 
	#NID_£tù_C­ReqTBEX
 581

	)

3396 
	#OBJ_£tù_C­ReqTBEX
 
OBJ_£t_ùy³
,63L

	)

3398 
	#SN_£tù_C­ResTBE
 "£tù-C­ResTBE"

	)

3399 
	#NID_£tù_C­ResTBE
 582

	)

3400 
	#OBJ_£tù_C­ResTBE
 
OBJ_£t_ùy³
,64L

	)

3402 
	#SN_£tù_C­RevReqTBE
 "£tù-C­RevReqTBE"

	)

3403 
	#NID_£tù_C­RevReqTBE
 583

	)

3404 
	#OBJ_£tù_C­RevReqTBE
 
OBJ_£t_ùy³
,65L

	)

3406 
	#SN_£tù_C­RevReqTBEX
 "£tù-C­RevReqTBEX"

	)

3407 
	#NID_£tù_C­RevReqTBEX
 584

	)

3408 
	#OBJ_£tù_C­RevReqTBEX
 
OBJ_£t_ùy³
,66L

	)

3410 
	#SN_£tù_C­RevResTBE
 "£tù-C­RevResTBE"

	)

3411 
	#NID_£tù_C­RevResTBE
 585

	)

3412 
	#OBJ_£tù_C­RevResTBE
 
OBJ_£t_ùy³
,67L

	)

3414 
	#SN_£tù_C»dReqTBE
 "£tù-C»dReqTBE"

	)

3415 
	#NID_£tù_C»dReqTBE
 586

	)

3416 
	#OBJ_£tù_C»dReqTBE
 
OBJ_£t_ùy³
,68L

	)

3418 
	#SN_£tù_C»dReqTBEX
 "£tù-C»dReqTBEX"

	)

3419 
	#NID_£tù_C»dReqTBEX
 587

	)

3420 
	#OBJ_£tù_C»dReqTBEX
 
OBJ_£t_ùy³
,69L

	)

3422 
	#SN_£tù_C»dResTBE
 "£tù-C»dResTBE"

	)

3423 
	#NID_£tù_C»dResTBE
 588

	)

3424 
	#OBJ_£tù_C»dResTBE
 
OBJ_£t_ùy³
,70L

	)

3426 
	#SN_£tù_C»dRevReqTBE
 "£tù-C»dRevReqTBE"

	)

3427 
	#NID_£tù_C»dRevReqTBE
 589

	)

3428 
	#OBJ_£tù_C»dRevReqTBE
 
OBJ_£t_ùy³
,71L

	)

3430 
	#SN_£tù_C»dRevReqTBEX
 "£tù-C»dRevReqTBEX"

	)

3431 
	#NID_£tù_C»dRevReqTBEX
 590

	)

3432 
	#OBJ_£tù_C»dRevReqTBEX
 
OBJ_£t_ùy³
,72L

	)

3434 
	#SN_£tù_C»dRevResTBE
 "£tù-C»dRevResTBE"

	)

3435 
	#NID_£tù_C»dRevResTBE
 591

	)

3436 
	#OBJ_£tù_C»dRevResTBE
 
OBJ_£t_ùy³
,73L

	)

3438 
	#SN_£tù_B©chAdmšReqTBE
 "£tù-B©chAdmšReqTBE"

	)

3439 
	#NID_£tù_B©chAdmšReqTBE
 592

	)

3440 
	#OBJ_£tù_B©chAdmšReqTBE
 
OBJ_£t_ùy³
,74L

	)

3442 
	#SN_£tù_B©chAdmšResTBE
 "£tù-B©chAdmšResTBE"

	)

3443 
	#NID_£tù_B©chAdmšResTBE
 593

	)

3444 
	#OBJ_£tù_B©chAdmšResTBE
 
OBJ_£t_ùy³
,75L

	)

3446 
	#SN_£tù_RegFÜmReqTBE
 "£tù-RegFÜmReqTBE"

	)

3447 
	#NID_£tù_RegFÜmReqTBE
 594

	)

3448 
	#OBJ_£tù_RegFÜmReqTBE
 
OBJ_£t_ùy³
,76L

	)

3450 
	#SN_£tù_C”tReqTBE
 "£tù-C”tReqTBE"

	)

3451 
	#NID_£tù_C”tReqTBE
 595

	)

3452 
	#OBJ_£tù_C”tReqTBE
 
OBJ_£t_ùy³
,77L

	)

3454 
	#SN_£tù_C”tReqTBEX
 "£tù-C”tReqTBEX"

	)

3455 
	#NID_£tù_C”tReqTBEX
 596

	)

3456 
	#OBJ_£tù_C”tReqTBEX
 
OBJ_£t_ùy³
,78L

	)

3458 
	#SN_£tù_C”tResTBE
 "£tù-C”tResTBE"

	)

3459 
	#NID_£tù_C”tResTBE
 597

	)

3460 
	#OBJ_£tù_C”tResTBE
 
OBJ_£t_ùy³
,79L

	)

3462 
	#SN_£tù_CRLNÙifiÿtiÚTBS
 "£tù-CRLNÙifiÿtiÚTBS"

	)

3463 
	#NID_£tù_CRLNÙifiÿtiÚTBS
 598

	)

3464 
	#OBJ_£tù_CRLNÙifiÿtiÚTBS
 
OBJ_£t_ùy³
,80L

	)

3466 
	#SN_£tù_CRLNÙifiÿtiÚResTBS
 "£tù-CRLNÙifiÿtiÚResTBS"

	)

3467 
	#NID_£tù_CRLNÙifiÿtiÚResTBS
 599

	)

3468 
	#OBJ_£tù_CRLNÙifiÿtiÚResTBS
 
OBJ_£t_ùy³
,81L

	)

3470 
	#SN_£tù_BCIDi¡ributiÚTBS
 "£tù-BCIDi¡ributiÚTBS"

	)

3471 
	#NID_£tù_BCIDi¡ributiÚTBS
 600

	)

3472 
	#OBJ_£tù_BCIDi¡ributiÚTBS
 
OBJ_£t_ùy³
,82L

	)

3474 
	#SN_£‹xt_g’Cry±
 "£‹xt-g’Cry±"

	)

3475 
	#LN_£‹xt_g’Cry±
 "g’”iøüy±og¿m"

	)

3476 
	#NID_£‹xt_g’Cry±
 601

	)

3477 
	#OBJ_£‹xt_g’Cry±
 
OBJ_£t_msgExt
,1L

	)

3479 
	#SN_£‹xt_miAuth
 "£‹xt-miAuth"

	)

3480 
	#LN_£‹xt_miAuth
 "m”chªˆš™Ÿ‹d‡uth"

	)

3481 
	#NID_£‹xt_miAuth
 602

	)

3482 
	#OBJ_£‹xt_miAuth
 
OBJ_£t_msgExt
,3L

	)

3484 
	#SN_£‹xt_pšSecu»
 "£‹xt-pšSecu»"

	)

3485 
	#NID_£‹xt_pšSecu»
 603

	)

3486 
	#OBJ_£‹xt_pšSecu»
 
OBJ_£t_msgExt
,4L

	)

3488 
	#SN_£‹xt_pšAny
 "£‹xt-pšAny"

	)

3489 
	#NID_£‹xt_pšAny
 604

	)

3490 
	#OBJ_£‹xt_pšAny
 
OBJ_£t_msgExt
,5L

	)

3492 
	#SN_£‹xt_Œack2
 "£‹xt-Œack2"

	)

3493 
	#NID_£‹xt_Œack2
 605

	)

3494 
	#OBJ_£‹xt_Œack2
 
OBJ_£t_msgExt
,7L

	)

3496 
	#SN_£‹xt_cv
 "£‹xt-cv"

	)

3497 
	#LN_£‹xt_cv
 "add™iÚ® v”ifiÿtiÚ"

	)

3498 
	#NID_£‹xt_cv
 606

	)

3499 
	#OBJ_£‹xt_cv
 
OBJ_£t_msgExt
,8L

	)

3501 
	#SN_£t_pŞicy_roÙ
 "£t-pŞicy-roÙ"

	)

3502 
	#NID_£t_pŞicy_roÙ
 607

	)

3503 
	#OBJ_£t_pŞicy_roÙ
 
OBJ_£t_pŞicy
,0L

	)

3505 
	#SN_£tCext_hashedRoÙ
 "£tCext-hashedRoÙ"

	)

3506 
	#NID_£tCext_hashedRoÙ
 608

	)

3507 
	#OBJ_£tCext_hashedRoÙ
 
OBJ_£t_û¹Ext
,0L

	)

3509 
	#SN_£tCext_û¹Ty³
 "£tCext-û¹Ty³"

	)

3510 
	#NID_£tCext_û¹Ty³
 609

	)

3511 
	#OBJ_£tCext_û¹Ty³
 
OBJ_£t_û¹Ext
,1L

	)

3513 
	#SN_£tCext_m”chD©a
 "£tCext-m”chD©a"

	)

3514 
	#NID_£tCext_m”chD©a
 610

	)

3515 
	#OBJ_£tCext_m”chD©a
 
OBJ_£t_û¹Ext
,2L

	)

3517 
	#SN_£tCext_cC”tRequœed
 "£tCext-cC”tRequœed"

	)

3518 
	#NID_£tCext_cC”tRequœed
 611

	)

3519 
	#OBJ_£tCext_cC”tRequœed
 
OBJ_£t_û¹Ext
,3L

	)

3521 
	#SN_£tCext_tuÂ–šg
 "£tCext-tuÂ–šg"

	)

3522 
	#NID_£tCext_tuÂ–šg
 612

	)

3523 
	#OBJ_£tCext_tuÂ–šg
 
OBJ_£t_û¹Ext
,4L

	)

3525 
	#SN_£tCext_£tExt
 "£tCext-£tExt"

	)

3526 
	#NID_£tCext_£tExt
 613

	)

3527 
	#OBJ_£tCext_£tExt
 
OBJ_£t_û¹Ext
,5L

	)

3529 
	#SN_£tCext_£tQu®f
 "£tCext-£tQu®f"

	)

3530 
	#NID_£tCext_£tQu®f
 614

	)

3531 
	#OBJ_£tCext_£tQu®f
 
OBJ_£t_û¹Ext
,6L

	)

3533 
	#SN_£tCext_PGWYÿ·b™›s
 "£tCext-PGWYÿ·b™›s"

	)

3534 
	#NID_£tCext_PGWYÿ·b™›s
 615

	)

3535 
	#OBJ_£tCext_PGWYÿ·b™›s
 
OBJ_£t_û¹Ext
,7L

	)

3537 
	#SN_£tCext_Tok’Id’tif›r
 "£tCext-Tok’Id’tif›r"

	)

3538 
	#NID_£tCext_Tok’Id’tif›r
 616

	)

3539 
	#OBJ_£tCext_Tok’Id’tif›r
 
OBJ_£t_û¹Ext
,8L

	)

3541 
	#SN_£tCext_T¿ck2D©a
 "£tCext-T¿ck2D©a"

	)

3542 
	#NID_£tCext_T¿ck2D©a
 617

	)

3543 
	#OBJ_£tCext_T¿ck2D©a
 
OBJ_£t_û¹Ext
,9L

	)

3545 
	#SN_£tCext_Tok’Ty³
 "£tCext-Tok’Ty³"

	)

3546 
	#NID_£tCext_Tok’Ty³
 618

	)

3547 
	#OBJ_£tCext_Tok’Ty³
 
OBJ_£t_û¹Ext
,10L

	)

3549 
	#SN_£tCext_Issu”C­ab™›s
 "£tCext-Issu”C­ab™›s"

	)

3550 
	#NID_£tCext_Issu”C­ab™›s
 619

	)

3551 
	#OBJ_£tCext_Issu”C­ab™›s
 
OBJ_£t_û¹Ext
,11L

	)

3553 
	#SN_£tA‰r_C”t
 "£tA‰r-C”t"

	)

3554 
	#NID_£tA‰r_C”t
 620

	)

3555 
	#OBJ_£tA‰r_C”t
 
OBJ_£t_©Œ
,0L

	)

3557 
	#SN_£tA‰r_PGWYÿp
 "£tA‰r-PGWYÿp"

	)

3558 
	#LN_£tA‰r_PGWYÿp
 "·ym’ˆg©eway c­ab™›s"

	)

3559 
	#NID_£tA‰r_PGWYÿp
 621

	)

3560 
	#OBJ_£tA‰r_PGWYÿp
 
OBJ_£t_©Œ
,1L

	)

3562 
	#SN_£tA‰r_Tok’Ty³
 "£tA‰r-Tok’Ty³"

	)

3563 
	#NID_£tA‰r_Tok’Ty³
 622

	)

3564 
	#OBJ_£tA‰r_Tok’Ty³
 
OBJ_£t_©Œ
,2L

	)

3566 
	#SN_£tA‰r_IssC­
 "£tA‰r-IssC­"

	)

3567 
	#LN_£tA‰r_IssC­
 "issu” c­ab™›s"

	)

3568 
	#NID_£tA‰r_IssC­
 623

	)

3569 
	#OBJ_£tA‰r_IssC­
 
OBJ_£t_©Œ
,3L

	)

3571 
	#SN_£t_roÙKeyThumb
 "£t-roÙKeyThumb"

	)

3572 
	#NID_£t_roÙKeyThumb
 624

	)

3573 
	#OBJ_£t_roÙKeyThumb
 
OBJ_£tA‰r_C”t
,0L

	)

3575 
	#SN_£t_addPŞicy
 "£t-addPŞicy"

	)

3576 
	#NID_£t_addPŞicy
 625

	)

3577 
	#OBJ_£t_addPŞicy
 
OBJ_£tA‰r_C”t
,1L

	)

3579 
	#SN_£tA‰r_Tok’_EMV
 "£tA‰r-Tok’-EMV"

	)

3580 
	#NID_£tA‰r_Tok’_EMV
 626

	)

3581 
	#OBJ_£tA‰r_Tok’_EMV
 
OBJ_£tA‰r_Tok’Ty³
,1L

	)

3583 
	#SN_£tA‰r_Tok’_B0Prime
 "£tA‰r-Tok’-B0Prime"

	)

3584 
	#NID_£tA‰r_Tok’_B0Prime
 627

	)

3585 
	#OBJ_£tA‰r_Tok’_B0Prime
 
OBJ_£tA‰r_Tok’Ty³
,2L

	)

3587 
	#SN_£tA‰r_IssC­_CVM
 "£tA‰r-IssC­-CVM"

	)

3588 
	#NID_£tA‰r_IssC­_CVM
 628

	)

3589 
	#OBJ_£tA‰r_IssC­_CVM
 
OBJ_£tA‰r_IssC­
,3L

	)

3591 
	#SN_£tA‰r_IssC­_T2
 "£tA‰r-IssC­-T2"

	)

3592 
	#NID_£tA‰r_IssC­_T2
 629

	)

3593 
	#OBJ_£tA‰r_IssC­_T2
 
OBJ_£tA‰r_IssC­
,4L

	)

3595 
	#SN_£tA‰r_IssC­_Sig
 "£tA‰r-IssC­-Sig"

	)

3596 
	#NID_£tA‰r_IssC­_Sig
 630

	)

3597 
	#OBJ_£tA‰r_IssC­_Sig
 
OBJ_£tA‰r_IssC­
,5L

	)

3599 
	#SN_£tA‰r_G’Cry±grm
 "£tA‰r-G’Cry±grm"

	)

3600 
	#LN_£tA‰r_G’Cry±grm
 "g’”©üy±og¿m"

	)

3601 
	#NID_£tA‰r_G’Cry±grm
 631

	)

3602 
	#OBJ_£tA‰r_G’Cry±grm
 
OBJ_£tA‰r_IssC­_CVM
,1L

	)

3604 
	#SN_£tA‰r_T2Enc
 "£tA‰r-T2Enc"

	)

3605 
	#LN_£tA‰r_T2Enc
 "’üy±ed¿ck 2"

	)

3606 
	#NID_£tA‰r_T2Enc
 632

	)

3607 
	#OBJ_£tA‰r_T2Enc
 
OBJ_£tA‰r_IssC­_T2
,1L

	)

3609 
	#SN_£tA‰r_T2ş—¹xt
 "£tA‰r-T2ş—¹xt"

	)

3610 
	#LN_£tA‰r_T2ş—¹xt
 "ş—¹exˆŒack 2"

	)

3611 
	#NID_£tA‰r_T2ş—¹xt
 633

	)

3612 
	#OBJ_£tA‰r_T2ş—¹xt
 
OBJ_£tA‰r_IssC­_T2
,2L

	)

3614 
	#SN_£tA‰r_TokICCsig
 "£tA‰r-TokICCsig"

	)

3615 
	#LN_£tA‰r_TokICCsig
 "ICC o¸tok’ sigÇtu»"

	)

3616 
	#NID_£tA‰r_TokICCsig
 634

	)

3617 
	#OBJ_£tA‰r_TokICCsig
 
OBJ_£tA‰r_IssC­_Sig
,1L

	)

3619 
	#SN_£tA‰r_SecDevSig
 "£tA‰r-SecDevSig"

	)

3620 
	#LN_£tA‰r_SecDevSig
 "£cu» deviû sigÇtu»"

	)

3621 
	#NID_£tA‰r_SecDevSig
 635

	)

3622 
	#OBJ_£tA‰r_SecDevSig
 
OBJ_£tA‰r_IssC­_Sig
,2L

	)

3624 
	#SN_£t_b¿nd_IATA_ATA
 "£t-b¿nd-IATA-ATA"

	)

3625 
	#NID_£t_b¿nd_IATA_ATA
 636

	)

3626 
	#OBJ_£t_b¿nd_IATA_ATA
 
OBJ_£t_b¿nd
,1L

	)

3628 
	#SN_£t_b¿nd_Dš”s
 "£t-b¿nd-Dš”s"

	)

3629 
	#NID_£t_b¿nd_Dš”s
 637

	)

3630 
	#OBJ_£t_b¿nd_Dš”s
 
OBJ_£t_b¿nd
,30L

	)

3632 
	#SN_£t_b¿nd_Am”iÿnEx´ess
 "£t-b¿nd-Am”iÿnEx´ess"

	)

3633 
	#NID_£t_b¿nd_Am”iÿnEx´ess
 638

	)

3634 
	#OBJ_£t_b¿nd_Am”iÿnEx´ess
 
OBJ_£t_b¿nd
,34L

	)

3636 
	#SN_£t_b¿nd_JCB
 "£t-b¿nd-JCB"

	)

3637 
	#NID_£t_b¿nd_JCB
 639

	)

3638 
	#OBJ_£t_b¿nd_JCB
 
OBJ_£t_b¿nd
,35L

	)

3640 
	#SN_£t_b¿nd_Vi§
 "£t-b¿nd-Vi§"

	)

3641 
	#NID_£t_b¿nd_Vi§
 640

	)

3642 
	#OBJ_£t_b¿nd_Vi§
 
OBJ_£t_b¿nd
,4L

	)

3644 
	#SN_£t_b¿nd_Ma¡”C¬d
 "£t-b¿nd-Ma¡”C¬d"

	)

3645 
	#NID_£t_b¿nd_Ma¡”C¬d
 641

	)

3646 
	#OBJ_£t_b¿nd_Ma¡”C¬d
 
OBJ_£t_b¿nd
,5L

	)

3648 
	#SN_£t_b¿nd_Novus
 "£t-b¿nd-Novus"

	)

3649 
	#NID_£t_b¿nd_Novus
 642

	)

3650 
	#OBJ_£t_b¿nd_Novus
 
OBJ_£t_b¿nd
,6011L

	)

3652 
	#SN_des_cdmf
 "DES-CDMF"

	)

3653 
	#LN_des_cdmf
 "des-cdmf"

	)

3654 
	#NID_des_cdmf
 643

	)

3655 
	#OBJ_des_cdmf
 
OBJ_r§dsi
,3L,10L

	)

3657 
	#SN_r§OAEPEnüy±iÚSET
 "r§OAEPEnüy±iÚSET"

	)

3658 
	#NID_r§OAEPEnüy±iÚSET
 644

	)

3659 
	#OBJ_r§OAEPEnüy±iÚSET
 
OBJ_r§dsi
,1L,1L,6L

	)

3661 
	#SN_£c3
 "OakËy-EC2N-3"

	)

3662 
	#LN_£c3
 "£c3"

	)

3663 
	#NID_£c3
 749

	)

3665 
	#SN_£c4
 "OakËy-EC2N-4"

	)

3666 
	#LN_£c4
 "£c4"

	)

3667 
	#NID_£c4
 750

	)

3669 
	#SN_whœÍoŞ
 "whœÍoŞ"

	)

3670 
	#NID_whœÍoŞ
 804

	)

3671 
	#OBJ_whœÍoŞ
 
OBJ_iso
,0L,10118L,3L,0L,55L

	)

3673 
	#SN_üy±İro
 "üy±İro"

	)

3674 
	#NID_üy±İro
 805

	)

3675 
	#OBJ_üy±İro
 
OBJ_memb”_body
,643L,2L,2L

	)

3677 
	#SN_üy±ocom
 "üy±ocom"

	)

3678 
	#NID_üy±ocom
 806

	)

3679 
	#OBJ_üy±ocom
 
OBJ_memb”_body
,643L,2L,9L

	)

3681 
	#SN_id_Go¡R3411_94_w™h_Go¡R3410_2001
 "id-Go¡R3411-94-w™h-Go¡R3410-2001"

	)

3682 
	#LN_id_Go¡R3411_94_w™h_Go¡R3410_2001
 "GOST R 34.11-94 w™h GOST R 34.10-2001"

	)

3683 
	#NID_id_Go¡R3411_94_w™h_Go¡R3410_2001
 807

	)

3684 
	#OBJ_id_Go¡R3411_94_w™h_Go¡R3410_2001
 
OBJ_üy±İro
,3L

	)

3686 
	#SN_id_Go¡R3411_94_w™h_Go¡R3410_94
 "id-Go¡R3411-94-w™h-Go¡R3410-94"

	)

3687 
	#LN_id_Go¡R3411_94_w™h_Go¡R3410_94
 "GOST R 34.11-94 w™h GOST R 34.10-94"

	)

3688 
	#NID_id_Go¡R3411_94_w™h_Go¡R3410_94
 808

	)

3689 
	#OBJ_id_Go¡R3411_94_w™h_Go¡R3410_94
 
OBJ_üy±İro
,4L

	)

3691 
	#SN_id_Go¡R3411_94
 "md_go¡94"

	)

3692 
	#LN_id_Go¡R3411_94
 "GOST R 34.11-94"

	)

3693 
	#NID_id_Go¡R3411_94
 809

	)

3694 
	#OBJ_id_Go¡R3411_94
 
OBJ_üy±İro
,9L

	)

3696 
	#SN_id_HMACGo¡R3411_94
 "id-HMACGo¡R3411-94"

	)

3697 
	#LN_id_HMACGo¡R3411_94
 "HMAC GOST 34.11-94"

	)

3698 
	#NID_id_HMACGo¡R3411_94
 810

	)

3699 
	#OBJ_id_HMACGo¡R3411_94
 
OBJ_üy±İro
,10L

	)

3701 
	#SN_id_Go¡R3410_2001
 "go¡2001"

	)

3702 
	#LN_id_Go¡R3410_2001
 "GOST R 34.10-2001"

	)

3703 
	#NID_id_Go¡R3410_2001
 811

	)

3704 
	#OBJ_id_Go¡R3410_2001
 
OBJ_üy±İro
,19L

	)

3706 
	#SN_id_Go¡R3410_94
 "go¡94"

	)

3707 
	#LN_id_Go¡R3410_94
 "GOST R 34.10-94"

	)

3708 
	#NID_id_Go¡R3410_94
 812

	)

3709 
	#OBJ_id_Go¡R3410_94
 
OBJ_üy±İro
,20L

	)

3711 
	#SN_id_Go¡28147_89
 "go¡89"

	)

3712 
	#LN_id_Go¡28147_89
 "GOST 28147-89"

	)

3713 
	#NID_id_Go¡28147_89
 813

	)

3714 
	#OBJ_id_Go¡28147_89
 
OBJ_üy±İro
,21L

	)

3716 
	#SN_go¡89_út
 "go¡89-út"

	)

3717 
	#NID_go¡89_út
 814

	)

3719 
	#SN_id_Go¡28147_89_MAC
 "go¡-mac"

	)

3720 
	#LN_id_Go¡28147_89_MAC
 "GOST 28147-89 MAC"

	)

3721 
	#NID_id_Go¡28147_89_MAC
 815

	)

3722 
	#OBJ_id_Go¡28147_89_MAC
 
OBJ_üy±İro
,22L

	)

3724 
	#SN_id_Go¡R3411_94_´f
 "´f-go¡r3411-94"

	)

3725 
	#LN_id_Go¡R3411_94_´f
 "GOST R 34.11-94 PRF"

	)

3726 
	#NID_id_Go¡R3411_94_´f
 816

	)

3727 
	#OBJ_id_Go¡R3411_94_´f
 
OBJ_üy±İro
,23L

	)

3729 
	#SN_id_Go¡R3410_2001DH
 "id-Go¡R3410-2001DH"

	)

3730 
	#LN_id_Go¡R3410_2001DH
 "GOST R 34.10-2001 DH"

	)

3731 
	#NID_id_Go¡R3410_2001DH
 817

	)

3732 
	#OBJ_id_Go¡R3410_2001DH
 
OBJ_üy±İro
,98L

	)

3734 
	#SN_id_Go¡R3410_94DH
 "id-Go¡R3410-94DH"

	)

3735 
	#LN_id_Go¡R3410_94DH
 "GOST R 34.10-94 DH"

	)

3736 
	#NID_id_Go¡R3410_94DH
 818

	)

3737 
	#OBJ_id_Go¡R3410_94DH
 
OBJ_üy±İro
,99L

	)

3739 
	#SN_id_Go¡28147_89_Cry±oPro_KeyMeshšg
 "id-Go¡28147-89-Cry±oPro-KeyMeshšg"

	)

3740 
	#NID_id_Go¡28147_89_Cry±oPro_KeyMeshšg
 819

	)

3741 
	#OBJ_id_Go¡28147_89_Cry±oPro_KeyMeshšg
 
OBJ_üy±İro
,14L,1L

	)

3743 
	#SN_id_Go¡28147_89_NÚe_KeyMeshšg
 "id-Go¡28147-89-NÚe-KeyMeshšg"

	)

3744 
	#NID_id_Go¡28147_89_NÚe_KeyMeshšg
 820

	)

3745 
	#OBJ_id_Go¡28147_89_NÚe_KeyMeshšg
 
OBJ_üy±İro
,14L,0L

	)

3747 
	#SN_id_Go¡R3411_94_Te¡P¬amS‘
 "id-Go¡R3411-94-Te¡P¬amS‘"

	)

3748 
	#NID_id_Go¡R3411_94_Te¡P¬amS‘
 821

	)

3749 
	#OBJ_id_Go¡R3411_94_Te¡P¬amS‘
 
OBJ_üy±İro
,30L,0L

	)

3751 
	#SN_id_Go¡R3411_94_Cry±oProP¬amS‘
 "id-Go¡R3411-94-Cry±oProP¬amS‘"

	)

3752 
	#NID_id_Go¡R3411_94_Cry±oProP¬amS‘
 822

	)

3753 
	#OBJ_id_Go¡R3411_94_Cry±oProP¬amS‘
 
OBJ_üy±İro
,30L,1L

	)

3755 
	#SN_id_Go¡28147_89_Te¡P¬amS‘
 "id-Go¡28147-89-Te¡P¬amS‘"

	)

3756 
	#NID_id_Go¡28147_89_Te¡P¬amS‘
 823

	)

3757 
	#OBJ_id_Go¡28147_89_Te¡P¬amS‘
 
OBJ_üy±İro
,31L,0L

	)

3759 
	#SN_id_Go¡28147_89_Cry±oPro_A_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-A-P¬amS‘"

	)

3760 
	#NID_id_Go¡28147_89_Cry±oPro_A_P¬amS‘
 824

	)

3761 
	#OBJ_id_Go¡28147_89_Cry±oPro_A_P¬amS‘
 
OBJ_üy±İro
,31L,1L

	)

3763 
	#SN_id_Go¡28147_89_Cry±oPro_B_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-B-P¬amS‘"

	)

3764 
	#NID_id_Go¡28147_89_Cry±oPro_B_P¬amS‘
 825

	)

3765 
	#OBJ_id_Go¡28147_89_Cry±oPro_B_P¬amS‘
 
OBJ_üy±İro
,31L,2L

	)

3767 
	#SN_id_Go¡28147_89_Cry±oPro_C_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-C-P¬amS‘"

	)

3768 
	#NID_id_Go¡28147_89_Cry±oPro_C_P¬amS‘
 826

	)

3769 
	#OBJ_id_Go¡28147_89_Cry±oPro_C_P¬amS‘
 
OBJ_üy±İro
,31L,3L

	)

3771 
	#SN_id_Go¡28147_89_Cry±oPro_D_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-D-P¬amS‘"

	)

3772 
	#NID_id_Go¡28147_89_Cry±oPro_D_P¬amS‘
 827

	)

3773 
	#OBJ_id_Go¡28147_89_Cry±oPro_D_P¬amS‘
 
OBJ_üy±İro
,31L,4L

	)

3775 
	#SN_id_Go¡28147_89_Cry±oPro_Osÿr_1_1_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-Osÿr-1-1-P¬amS‘"

	)

3776 
	#NID_id_Go¡28147_89_Cry±oPro_Osÿr_1_1_P¬amS‘
 828

	)

3777 
	#OBJ_id_Go¡28147_89_Cry±oPro_Osÿr_1_1_P¬amS‘
 
OBJ_üy±İro
,31L,5L

	)

3779 
	#SN_id_Go¡28147_89_Cry±oPro_Osÿr_1_0_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-Osÿr-1-0-P¬amS‘"

	)

3780 
	#NID_id_Go¡28147_89_Cry±oPro_Osÿr_1_0_P¬amS‘
 829

	)

3781 
	#OBJ_id_Go¡28147_89_Cry±oPro_Osÿr_1_0_P¬amS‘
 
OBJ_üy±İro
,31L,6L

	)

3783 
	#SN_id_Go¡28147_89_Cry±oPro_RIC_1_P¬amS‘
 "id-Go¡28147-89-Cry±oPro-RIC-1-P¬amS‘"

	)

3784 
	#NID_id_Go¡28147_89_Cry±oPro_RIC_1_P¬amS‘
 830

	)

3785 
	#OBJ_id_Go¡28147_89_Cry±oPro_RIC_1_P¬amS‘
 
OBJ_üy±İro
,31L,7L

	)

3787 
	#SN_id_Go¡R3410_94_Te¡P¬amS‘
 "id-Go¡R3410-94-Te¡P¬amS‘"

	)

3788 
	#NID_id_Go¡R3410_94_Te¡P¬amS‘
 831

	)

3789 
	#OBJ_id_Go¡R3410_94_Te¡P¬amS‘
 
OBJ_üy±İro
,32L,0L

	)

3791 
	#SN_id_Go¡R3410_94_Cry±oPro_A_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-A-P¬amS‘"

	)

3792 
	#NID_id_Go¡R3410_94_Cry±oPro_A_P¬amS‘
 832

	)

3793 
	#OBJ_id_Go¡R3410_94_Cry±oPro_A_P¬amS‘
 
OBJ_üy±İro
,32L,2L

	)

3795 
	#SN_id_Go¡R3410_94_Cry±oPro_B_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-B-P¬amS‘"

	)

3796 
	#NID_id_Go¡R3410_94_Cry±oPro_B_P¬amS‘
 833

	)

3797 
	#OBJ_id_Go¡R3410_94_Cry±oPro_B_P¬amS‘
 
OBJ_üy±İro
,32L,3L

	)

3799 
	#SN_id_Go¡R3410_94_Cry±oPro_C_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-C-P¬amS‘"

	)

3800 
	#NID_id_Go¡R3410_94_Cry±oPro_C_P¬amS‘
 834

	)

3801 
	#OBJ_id_Go¡R3410_94_Cry±oPro_C_P¬amS‘
 
OBJ_üy±İro
,32L,4L

	)

3803 
	#SN_id_Go¡R3410_94_Cry±oPro_D_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-D-P¬amS‘"

	)

3804 
	#NID_id_Go¡R3410_94_Cry±oPro_D_P¬amS‘
 835

	)

3805 
	#OBJ_id_Go¡R3410_94_Cry±oPro_D_P¬amS‘
 
OBJ_üy±İro
,32L,5L

	)

3807 
	#SN_id_Go¡R3410_94_Cry±oPro_XchA_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-XchA-P¬amS‘"

	)

3808 
	#NID_id_Go¡R3410_94_Cry±oPro_XchA_P¬amS‘
 836

	)

3809 
	#OBJ_id_Go¡R3410_94_Cry±oPro_XchA_P¬amS‘
 
OBJ_üy±İro
,33L,1L

	)

3811 
	#SN_id_Go¡R3410_94_Cry±oPro_XchB_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-XchB-P¬amS‘"

	)

3812 
	#NID_id_Go¡R3410_94_Cry±oPro_XchB_P¬amS‘
 837

	)

3813 
	#OBJ_id_Go¡R3410_94_Cry±oPro_XchB_P¬amS‘
 
OBJ_üy±İro
,33L,2L

	)

3815 
	#SN_id_Go¡R3410_94_Cry±oPro_XchC_P¬amS‘
 "id-Go¡R3410-94-Cry±oPro-XchC-P¬amS‘"

	)

3816 
	#NID_id_Go¡R3410_94_Cry±oPro_XchC_P¬amS‘
 838

	)

3817 
	#OBJ_id_Go¡R3410_94_Cry±oPro_XchC_P¬amS‘
 
OBJ_üy±İro
,33L,3L

	)

3819 
	#SN_id_Go¡R3410_2001_Te¡P¬amS‘
 "id-Go¡R3410-2001-Te¡P¬amS‘"

	)

3820 
	#NID_id_Go¡R3410_2001_Te¡P¬amS‘
 839

	)

3821 
	#OBJ_id_Go¡R3410_2001_Te¡P¬amS‘
 
OBJ_üy±İro
,35L,0L

	)

3823 
	#SN_id_Go¡R3410_2001_Cry±oPro_A_P¬amS‘
 "id-Go¡R3410-2001-Cry±oPro-A-P¬amS‘"

	)

3824 
	#NID_id_Go¡R3410_2001_Cry±oPro_A_P¬amS‘
 840

	)

3825 
	#OBJ_id_Go¡R3410_2001_Cry±oPro_A_P¬amS‘
 
OBJ_üy±İro
,35L,1L

	)

3827 
	#SN_id_Go¡R3410_2001_Cry±oPro_B_P¬amS‘
 "id-Go¡R3410-2001-Cry±oPro-B-P¬amS‘"

	)

3828 
	#NID_id_Go¡R3410_2001_Cry±oPro_B_P¬amS‘
 841

	)

3829 
	#OBJ_id_Go¡R3410_2001_Cry±oPro_B_P¬amS‘
 
OBJ_üy±İro
,35L,2L

	)

3831 
	#SN_id_Go¡R3410_2001_Cry±oPro_C_P¬amS‘
 "id-Go¡R3410-2001-Cry±oPro-C-P¬amS‘"

	)

3832 
	#NID_id_Go¡R3410_2001_Cry±oPro_C_P¬amS‘
 842

	)

3833 
	#OBJ_id_Go¡R3410_2001_Cry±oPro_C_P¬amS‘
 
OBJ_üy±İro
,35L,3L

	)

3835 
	#SN_id_Go¡R3410_2001_Cry±oPro_XchA_P¬amS‘
 "id-Go¡R3410-2001-Cry±oPro-XchA-P¬amS‘"

	)

3836 
	#NID_id_Go¡R3410_2001_Cry±oPro_XchA_P¬amS‘
 843

	)

3837 
	#OBJ_id_Go¡R3410_2001_Cry±oPro_XchA_P¬amS‘
 
OBJ_üy±İro
,36L,0L

	)

3839 
	#SN_id_Go¡R3410_2001_Cry±oPro_XchB_P¬amS‘
 "id-Go¡R3410-2001-Cry±oPro-XchB-P¬amS‘"

	)

3840 
	#NID_id_Go¡R3410_2001_Cry±oPro_XchB_P¬amS‘
 844

	)

3841 
	#OBJ_id_Go¡R3410_2001_Cry±oPro_XchB_P¬amS‘
 
OBJ_üy±İro
,36L,1L

	)

3843 
	#SN_id_Go¡R3410_94_a
 "id-Go¡R3410-94-a"

	)

3844 
	#NID_id_Go¡R3410_94_a
 845

	)

3845 
	#OBJ_id_Go¡R3410_94_a
 
OBJ_id_Go¡R3410_94
,1L

	)

3847 
	#SN_id_Go¡R3410_94_aBis
 "id-Go¡R3410-94-aBis"

	)

3848 
	#NID_id_Go¡R3410_94_aBis
 846

	)

3849 
	#OBJ_id_Go¡R3410_94_aBis
 
OBJ_id_Go¡R3410_94
,2L

	)

3851 
	#SN_id_Go¡R3410_94_b
 "id-Go¡R3410-94-b"

	)

3852 
	#NID_id_Go¡R3410_94_b
 847

	)

3853 
	#OBJ_id_Go¡R3410_94_b
 
OBJ_id_Go¡R3410_94
,3L

	)

3855 
	#SN_id_Go¡R3410_94_bBis
 "id-Go¡R3410-94-bBis"

	)

3856 
	#NID_id_Go¡R3410_94_bBis
 848

	)

3857 
	#OBJ_id_Go¡R3410_94_bBis
 
OBJ_id_Go¡R3410_94
,4L

	)

3859 
	#SN_id_Go¡28147_89_cc
 "id-Go¡28147-89-cc"

	)

3860 
	#LN_id_Go¡28147_89_cc
 "GOST 28147-89 Cry±ocom P¬amS‘"

	)

3861 
	#NID_id_Go¡28147_89_cc
 849

	)

3862 
	#OBJ_id_Go¡28147_89_cc
 
OBJ_üy±ocom
,1L,6L,1L

	)

3864 
	#SN_id_Go¡R3410_94_cc
 "go¡94cc"

	)

3865 
	#LN_id_Go¡R3410_94_cc
 "GOST 34.10-94 Cry±ocom"

	)

3866 
	#NID_id_Go¡R3410_94_cc
 850

	)

3867 
	#OBJ_id_Go¡R3410_94_cc
 
OBJ_üy±ocom
,1L,5L,3L

	)

3869 
	#SN_id_Go¡R3410_2001_cc
 "go¡2001cc"

	)

3870 
	#LN_id_Go¡R3410_2001_cc
 "GOST 34.10-2001 Cry±ocom"

	)

3871 
	#NID_id_Go¡R3410_2001_cc
 851

	)

3872 
	#OBJ_id_Go¡R3410_2001_cc
 
OBJ_üy±ocom
,1L,5L,4L

	)

3874 
	#SN_id_Go¡R3411_94_w™h_Go¡R3410_94_cc
 "id-Go¡R3411-94-w™h-Go¡R3410-94-cc"

	)

3875 
	#LN_id_Go¡R3411_94_w™h_Go¡R3410_94_cc
 "GOST R 34.11-94 w™h GOST R 34.10-94 Cry±ocom"

	)

3876 
	#NID_id_Go¡R3411_94_w™h_Go¡R3410_94_cc
 852

	)

3877 
	#OBJ_id_Go¡R3411_94_w™h_Go¡R3410_94_cc
 
OBJ_üy±ocom
,1L,3L,3L

	)

3879 
	#SN_id_Go¡R3411_94_w™h_Go¡R3410_2001_cc
 "id-Go¡R3411-94-w™h-Go¡R3410-2001-cc"

	)

3880 
	#LN_id_Go¡R3411_94_w™h_Go¡R3410_2001_cc
 "GOST R 34.11-94 w™h GOST R 34.10-2001 Cry±ocom"

	)

3881 
	#NID_id_Go¡R3411_94_w™h_Go¡R3410_2001_cc
 853

	)

3882 
	#OBJ_id_Go¡R3411_94_w™h_Go¡R3410_2001_cc
 
OBJ_üy±ocom
,1L,3L,4L

	)

3884 
	#SN_id_Go¡R3410_2001_P¬amS‘_cc
 "id-Go¡R3410-2001-P¬amS‘-cc"

	)

3885 
	#LN_id_Go¡R3410_2001_P¬amS‘_cc
 "GOST R 3410-2001 P¬am‘” S‘ Cry±ocom"

	)

3886 
	#NID_id_Go¡R3410_2001_P¬amS‘_cc
 854

	)

3887 
	#OBJ_id_Go¡R3410_2001_P¬amS‘_cc
 
OBJ_üy±ocom
,1L,8L,1L

	)

3889 
	#SN_ÿm–lŸ_128_cbc
 "CAMELLIA-128-CBC"

	)

3890 
	#LN_ÿm–lŸ_128_cbc
 "ÿm–lŸ-128-cbc"

	)

3891 
	#NID_ÿm–lŸ_128_cbc
 751

	)

3892 
	#OBJ_ÿm–lŸ_128_cbc
 1L,2L,392L,200011L,61L,1L,1L,1L,2L

	)

3894 
	#SN_ÿm–lŸ_192_cbc
 "CAMELLIA-192-CBC"

	)

3895 
	#LN_ÿm–lŸ_192_cbc
 "ÿm–lŸ-192-cbc"

	)

3896 
	#NID_ÿm–lŸ_192_cbc
 752

	)

3897 
	#OBJ_ÿm–lŸ_192_cbc
 1L,2L,392L,200011L,61L,1L,1L,1L,3L

	)

3899 
	#SN_ÿm–lŸ_256_cbc
 "CAMELLIA-256-CBC"

	)

3900 
	#LN_ÿm–lŸ_256_cbc
 "ÿm–lŸ-256-cbc"

	)

3901 
	#NID_ÿm–lŸ_256_cbc
 753

	)

3902 
	#OBJ_ÿm–lŸ_256_cbc
 1L,2L,392L,200011L,61L,1L,1L,1L,4L

	)

3904 
	#SN_id_ÿm–lŸ128_w¿p
 "id-ÿm–lŸ128-w¿p"

	)

3905 
	#NID_id_ÿm–lŸ128_w¿p
 907

	)

3906 
	#OBJ_id_ÿm–lŸ128_w¿p
 1L,2L,392L,200011L,61L,1L,1L,3L,2L

	)

3908 
	#SN_id_ÿm–lŸ192_w¿p
 "id-ÿm–lŸ192-w¿p"

	)

3909 
	#NID_id_ÿm–lŸ192_w¿p
 908

	)

3910 
	#OBJ_id_ÿm–lŸ192_w¿p
 1L,2L,392L,200011L,61L,1L,1L,3L,3L

	)

3912 
	#SN_id_ÿm–lŸ256_w¿p
 "id-ÿm–lŸ256-w¿p"

	)

3913 
	#NID_id_ÿm–lŸ256_w¿p
 909

	)

3914 
	#OBJ_id_ÿm–lŸ256_w¿p
 1L,2L,392L,200011L,61L,1L,1L,3L,4L

	)

3916 
	#OBJ_Át_ds
 0L,3L,4401L,5L

	)

3918 
	#OBJ_ÿm–lŸ
 
OBJ_Át_ds
,3L,1L,9L

	)

3920 
	#SN_ÿm–lŸ_128_ecb
 "CAMELLIA-128-ECB"

	)

3921 
	#LN_ÿm–lŸ_128_ecb
 "ÿm–lŸ-128-ecb"

	)

3922 
	#NID_ÿm–lŸ_128_ecb
 754

	)

3923 
	#OBJ_ÿm–lŸ_128_ecb
 
OBJ_ÿm–lŸ
,1L

	)

3925 
	#SN_ÿm–lŸ_128_ofb128
 "CAMELLIA-128-OFB"

	)

3926 
	#LN_ÿm–lŸ_128_ofb128
 "ÿm–lŸ-128-ofb"

	)

3927 
	#NID_ÿm–lŸ_128_ofb128
 766

	)

3928 
	#OBJ_ÿm–lŸ_128_ofb128
 
OBJ_ÿm–lŸ
,3L

	)

3930 
	#SN_ÿm–lŸ_128_cfb128
 "CAMELLIA-128-CFB"

	)

3931 
	#LN_ÿm–lŸ_128_cfb128
 "ÿm–lŸ-128-cfb"

	)

3932 
	#NID_ÿm–lŸ_128_cfb128
 757

	)

3933 
	#OBJ_ÿm–lŸ_128_cfb128
 
OBJ_ÿm–lŸ
,4L

	)

3935 
	#SN_ÿm–lŸ_192_ecb
 "CAMELLIA-192-ECB"

	)

3936 
	#LN_ÿm–lŸ_192_ecb
 "ÿm–lŸ-192-ecb"

	)

3937 
	#NID_ÿm–lŸ_192_ecb
 755

	)

3938 
	#OBJ_ÿm–lŸ_192_ecb
 
OBJ_ÿm–lŸ
,21L

	)

3940 
	#SN_ÿm–lŸ_192_ofb128
 "CAMELLIA-192-OFB"

	)

3941 
	#LN_ÿm–lŸ_192_ofb128
 "ÿm–lŸ-192-ofb"

	)

3942 
	#NID_ÿm–lŸ_192_ofb128
 767

	)

3943 
	#OBJ_ÿm–lŸ_192_ofb128
 
OBJ_ÿm–lŸ
,23L

	)

3945 
	#SN_ÿm–lŸ_192_cfb128
 "CAMELLIA-192-CFB"

	)

3946 
	#LN_ÿm–lŸ_192_cfb128
 "ÿm–lŸ-192-cfb"

	)

3947 
	#NID_ÿm–lŸ_192_cfb128
 758

	)

3948 
	#OBJ_ÿm–lŸ_192_cfb128
 
OBJ_ÿm–lŸ
,24L

	)

3950 
	#SN_ÿm–lŸ_256_ecb
 "CAMELLIA-256-ECB"

	)

3951 
	#LN_ÿm–lŸ_256_ecb
 "ÿm–lŸ-256-ecb"

	)

3952 
	#NID_ÿm–lŸ_256_ecb
 756

	)

3953 
	#OBJ_ÿm–lŸ_256_ecb
 
OBJ_ÿm–lŸ
,41L

	)

3955 
	#SN_ÿm–lŸ_256_ofb128
 "CAMELLIA-256-OFB"

	)

3956 
	#LN_ÿm–lŸ_256_ofb128
 "ÿm–lŸ-256-ofb"

	)

3957 
	#NID_ÿm–lŸ_256_ofb128
 768

	)

3958 
	#OBJ_ÿm–lŸ_256_ofb128
 
OBJ_ÿm–lŸ
,43L

	)

3960 
	#SN_ÿm–lŸ_256_cfb128
 "CAMELLIA-256-CFB"

	)

3961 
	#LN_ÿm–lŸ_256_cfb128
 "ÿm–lŸ-256-cfb"

	)

3962 
	#NID_ÿm–lŸ_256_cfb128
 759

	)

3963 
	#OBJ_ÿm–lŸ_256_cfb128
 
OBJ_ÿm–lŸ
,44L

	)

3965 
	#SN_ÿm–lŸ_128_cfb1
 "CAMELLIA-128-CFB1"

	)

3966 
	#LN_ÿm–lŸ_128_cfb1
 "ÿm–lŸ-128-cfb1"

	)

3967 
	#NID_ÿm–lŸ_128_cfb1
 760

	)

3969 
	#SN_ÿm–lŸ_192_cfb1
 "CAMELLIA-192-CFB1"

	)

3970 
	#LN_ÿm–lŸ_192_cfb1
 "ÿm–lŸ-192-cfb1"

	)

3971 
	#NID_ÿm–lŸ_192_cfb1
 761

	)

3973 
	#SN_ÿm–lŸ_256_cfb1
 "CAMELLIA-256-CFB1"

	)

3974 
	#LN_ÿm–lŸ_256_cfb1
 "ÿm–lŸ-256-cfb1"

	)

3975 
	#NID_ÿm–lŸ_256_cfb1
 762

	)

3977 
	#SN_ÿm–lŸ_128_cfb8
 "CAMELLIA-128-CFB8"

	)

3978 
	#LN_ÿm–lŸ_128_cfb8
 "ÿm–lŸ-128-cfb8"

	)

3979 
	#NID_ÿm–lŸ_128_cfb8
 763

	)

3981 
	#SN_ÿm–lŸ_192_cfb8
 "CAMELLIA-192-CFB8"

	)

3982 
	#LN_ÿm–lŸ_192_cfb8
 "ÿm–lŸ-192-cfb8"

	)

3983 
	#NID_ÿm–lŸ_192_cfb8
 764

	)

3985 
	#SN_ÿm–lŸ_256_cfb8
 "CAMELLIA-256-CFB8"

	)

3986 
	#LN_ÿm–lŸ_256_cfb8
 "ÿm–lŸ-256-cfb8"

	)

3987 
	#NID_ÿm–lŸ_256_cfb8
 765

	)

3989 
	#SN_ki§
 "KISA"

	)

3990 
	#LN_ki§
 "ki§"

	)

3991 
	#NID_ki§
 773

	)

3992 
	#OBJ_ki§
 
OBJ_memb”_body
,410L,200004L

	)

3994 
	#SN_£ed_ecb
 "SEED-ECB"

	)

3995 
	#LN_£ed_ecb
 "£ed-ecb"

	)

3996 
	#NID_£ed_ecb
 776

	)

3997 
	#OBJ_£ed_ecb
 
OBJ_ki§
,1L,3L

	)

3999 
	#SN_£ed_cbc
 "SEED-CBC"

	)

4000 
	#LN_£ed_cbc
 "£ed-cbc"

	)

4001 
	#NID_£ed_cbc
 777

	)

4002 
	#OBJ_£ed_cbc
 
OBJ_ki§
,1L,4L

	)

4004 
	#SN_£ed_cfb128
 "SEED-CFB"

	)

4005 
	#LN_£ed_cfb128
 "£ed-cfb"

	)

4006 
	#NID_£ed_cfb128
 779

	)

4007 
	#OBJ_£ed_cfb128
 
OBJ_ki§
,1L,5L

	)

4009 
	#SN_£ed_ofb128
 "SEED-OFB"

	)

4010 
	#LN_£ed_ofb128
 "£ed-ofb"

	)

4011 
	#NID_£ed_ofb128
 778

	)

4012 
	#OBJ_£ed_ofb128
 
OBJ_ki§
,1L,6L

	)

4014 
	#SN_hmac
 "HMAC"

	)

4015 
	#LN_hmac
 "hmac"

	)

4016 
	#NID_hmac
 855

	)

4018 
	#SN_cmac
 "CMAC"

	)

4019 
	#LN_cmac
 "cmac"

	)

4020 
	#NID_cmac
 894

	)

4022 
	#SN_rc4_hmac_md5
 "RC4-HMAC-MD5"

	)

4023 
	#LN_rc4_hmac_md5
 "rc4-hmac-md5"

	)

4024 
	#NID_rc4_hmac_md5
 915

	)

4026 
	#SN_«s_128_cbc_hmac_sha1
 "AES-128-CBC-HMAC-SHA1"

	)

4027 
	#LN_«s_128_cbc_hmac_sha1
 "«s-128-cbc-hmac-sha1"

	)

4028 
	#NID_«s_128_cbc_hmac_sha1
 916

	)

4030 
	#SN_«s_192_cbc_hmac_sha1
 "AES-192-CBC-HMAC-SHA1"

	)

4031 
	#LN_«s_192_cbc_hmac_sha1
 "«s-192-cbc-hmac-sha1"

	)

4032 
	#NID_«s_192_cbc_hmac_sha1
 917

	)

4034 
	#SN_«s_256_cbc_hmac_sha1
 "AES-256-CBC-HMAC-SHA1"

	)

4035 
	#LN_«s_256_cbc_hmac_sha1
 "«s-256-cbc-hmac-sha1"

	)

4036 
	#NID_«s_256_cbc_hmac_sha1
 918

	)

4038 
	#SN_«s_128_cbc_hmac_sha256
 "AES-128-CBC-HMAC-SHA256"

	)

4039 
	#LN_«s_128_cbc_hmac_sha256
 "«s-128-cbc-hmac-sha256"

	)

4040 
	#NID_«s_128_cbc_hmac_sha256
 948

	)

4042 
	#SN_«s_192_cbc_hmac_sha256
 "AES-192-CBC-HMAC-SHA256"

	)

4043 
	#LN_«s_192_cbc_hmac_sha256
 "«s-192-cbc-hmac-sha256"

	)

4044 
	#NID_«s_192_cbc_hmac_sha256
 949

	)

4046 
	#SN_«s_256_cbc_hmac_sha256
 "AES-256-CBC-HMAC-SHA256"

	)

4047 
	#LN_«s_256_cbc_hmac_sha256
 "«s-256-cbc-hmac-sha256"

	)

4048 
	#NID_«s_256_cbc_hmac_sha256
 950

	)

4050 
	#SN_dhpubliúumb”
 "dhpubliúumb”"

	)

4051 
	#LN_dhpubliúumb”
 "X9.42 DH"

	)

4052 
	#NID_dhpubliúumb”
 920

	)

4053 
	#OBJ_dhpubliúumb”
 
OBJ_ISO_US
,10046L,2L,1L

	)

4055 
	#SN_b¿špoŞP160r1
 "b¿špoŞP160r1"

	)

4056 
	#NID_b¿špoŞP160r1
 921

	)

4057 
	#OBJ_b¿špoŞP160r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,1L

	)

4059 
	#SN_b¿špoŞP160t1
 "b¿špoŞP160t1"

	)

4060 
	#NID_b¿špoŞP160t1
 922

	)

4061 
	#OBJ_b¿špoŞP160t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,2L

	)

4063 
	#SN_b¿špoŞP192r1
 "b¿špoŞP192r1"

	)

4064 
	#NID_b¿špoŞP192r1
 923

	)

4065 
	#OBJ_b¿špoŞP192r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,3L

	)

4067 
	#SN_b¿špoŞP192t1
 "b¿špoŞP192t1"

	)

4068 
	#NID_b¿špoŞP192t1
 924

	)

4069 
	#OBJ_b¿špoŞP192t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,4L

	)

4071 
	#SN_b¿špoŞP224r1
 "b¿špoŞP224r1"

	)

4072 
	#NID_b¿špoŞP224r1
 925

	)

4073 
	#OBJ_b¿špoŞP224r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,5L

	)

4075 
	#SN_b¿špoŞP224t1
 "b¿špoŞP224t1"

	)

4076 
	#NID_b¿špoŞP224t1
 926

	)

4077 
	#OBJ_b¿špoŞP224t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,6L

	)

4079 
	#SN_b¿špoŞP256r1
 "b¿špoŞP256r1"

	)

4080 
	#NID_b¿špoŞP256r1
 927

	)

4081 
	#OBJ_b¿špoŞP256r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,7L

	)

4083 
	#SN_b¿špoŞP256t1
 "b¿špoŞP256t1"

	)

4084 
	#NID_b¿špoŞP256t1
 928

	)

4085 
	#OBJ_b¿špoŞP256t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,8L

	)

4087 
	#SN_b¿špoŞP320r1
 "b¿špoŞP320r1"

	)

4088 
	#NID_b¿špoŞP320r1
 929

	)

4089 
	#OBJ_b¿špoŞP320r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,9L

	)

4091 
	#SN_b¿špoŞP320t1
 "b¿špoŞP320t1"

	)

4092 
	#NID_b¿špoŞP320t1
 930

	)

4093 
	#OBJ_b¿špoŞP320t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,10L

	)

4095 
	#SN_b¿špoŞP384r1
 "b¿špoŞP384r1"

	)

4096 
	#NID_b¿špoŞP384r1
 931

	)

4097 
	#OBJ_b¿špoŞP384r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,11L

	)

4099 
	#SN_b¿špoŞP384t1
 "b¿špoŞP384t1"

	)

4100 
	#NID_b¿špoŞP384t1
 932

	)

4101 
	#OBJ_b¿špoŞP384t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,12L

	)

4103 
	#SN_b¿špoŞP512r1
 "b¿špoŞP512r1"

	)

4104 
	#NID_b¿špoŞP512r1
 933

	)

4105 
	#OBJ_b¿špoŞP512r1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,13L

	)

4107 
	#SN_b¿špoŞP512t1
 "b¿špoŞP512t1"

	)

4108 
	#NID_b¿špoŞP512t1
 934

	)

4109 
	#OBJ_b¿špoŞP512t1
 1L,3L,36L,3L,3L,2L,8L,1L,1L,14L

	)

4111 
	#OBJ_x9_63_scheme
 1L,3L,133L,16L,840L,63L,0L

	)

4113 
	#OBJ_£cg_scheme
 
OBJ_û¹icom_¬c
,1L

	)

4115 
	#SN_dhSšgËPass_¡dDH_sha1kdf_scheme
 "dhSšgËPass-¡dDH-sha1kdf-scheme"

	)

4116 
	#NID_dhSšgËPass_¡dDH_sha1kdf_scheme
 936

	)

4117 
	#OBJ_dhSšgËPass_¡dDH_sha1kdf_scheme
 
OBJ_x9_63_scheme
,2L

	)

4119 
	#SN_dhSšgËPass_¡dDH_sha224kdf_scheme
 "dhSšgËPass-¡dDH-sha224kdf-scheme"

	)

4120 
	#NID_dhSšgËPass_¡dDH_sha224kdf_scheme
 937

	)

4121 
	#OBJ_dhSšgËPass_¡dDH_sha224kdf_scheme
 
OBJ_£cg_scheme
,11L,0L

	)

4123 
	#SN_dhSšgËPass_¡dDH_sha256kdf_scheme
 "dhSšgËPass-¡dDH-sha256kdf-scheme"

	)

4124 
	#NID_dhSšgËPass_¡dDH_sha256kdf_scheme
 938

	)

4125 
	#OBJ_dhSšgËPass_¡dDH_sha256kdf_scheme
 
OBJ_£cg_scheme
,11L,1L

	)

4127 
	#SN_dhSšgËPass_¡dDH_sha384kdf_scheme
 "dhSšgËPass-¡dDH-sha384kdf-scheme"

	)

4128 
	#NID_dhSšgËPass_¡dDH_sha384kdf_scheme
 939

	)

4129 
	#OBJ_dhSšgËPass_¡dDH_sha384kdf_scheme
 
OBJ_£cg_scheme
,11L,2L

	)

4131 
	#SN_dhSšgËPass_¡dDH_sha512kdf_scheme
 "dhSšgËPass-¡dDH-sha512kdf-scheme"

	)

4132 
	#NID_dhSšgËPass_¡dDH_sha512kdf_scheme
 940

	)

4133 
	#OBJ_dhSšgËPass_¡dDH_sha512kdf_scheme
 
OBJ_£cg_scheme
,11L,3L

	)

4135 
	#SN_dhSšgËPass_coçùÜDH_sha1kdf_scheme
 "dhSšgËPass-coçùÜDH-sha1kdf-scheme"

	)

4136 
	#NID_dhSšgËPass_coçùÜDH_sha1kdf_scheme
 941

	)

4137 
	#OBJ_dhSšgËPass_coçùÜDH_sha1kdf_scheme
 
OBJ_x9_63_scheme
,3L

	)

4139 
	#SN_dhSšgËPass_coçùÜDH_sha224kdf_scheme
 "dhSšgËPass-coçùÜDH-sha224kdf-scheme"

	)

4140 
	#NID_dhSšgËPass_coçùÜDH_sha224kdf_scheme
 942

	)

4141 
	#OBJ_dhSšgËPass_coçùÜDH_sha224kdf_scheme
 
OBJ_£cg_scheme
,14L,0L

	)

4143 
	#SN_dhSšgËPass_coçùÜDH_sha256kdf_scheme
 "dhSšgËPass-coçùÜDH-sha256kdf-scheme"

	)

4144 
	#NID_dhSšgËPass_coçùÜDH_sha256kdf_scheme
 943

	)

4145 
	#OBJ_dhSšgËPass_coçùÜDH_sha256kdf_scheme
 
OBJ_£cg_scheme
,14L,1L

	)

4147 
	#SN_dhSšgËPass_coçùÜDH_sha384kdf_scheme
 "dhSšgËPass-coçùÜDH-sha384kdf-scheme"

	)

4148 
	#NID_dhSšgËPass_coçùÜDH_sha384kdf_scheme
 944

	)

4149 
	#OBJ_dhSšgËPass_coçùÜDH_sha384kdf_scheme
 
OBJ_£cg_scheme
,14L,2L

	)

4151 
	#SN_dhSšgËPass_coçùÜDH_sha512kdf_scheme
 "dhSšgËPass-coçùÜDH-sha512kdf-scheme"

	)

4152 
	#NID_dhSšgËPass_coçùÜDH_sha512kdf_scheme
 945

	)

4153 
	#OBJ_dhSšgËPass_coçùÜDH_sha512kdf_scheme
 
OBJ_£cg_scheme
,14L,3L

	)

4155 
	#SN_dh_¡d_kdf
 "dh-¡d-kdf"

	)

4156 
	#NID_dh_¡d_kdf
 946

	)

4158 
	#SN_dh_coçùÜ_kdf
 "dh-coçùÜ-kdf"

	)

4159 
	#NID_dh_coçùÜ_kdf
 947

	)

4161 
	#SN_ù_´eû¹_sùs
 "ù_´eû¹_sùs"

	)

4162 
	#LN_ù_´eû¹_sùs
 "CT P»û¹ifiÿ‹ SCTs"

	)

4163 
	#NID_ù_´eû¹_sùs
 951

	)

4164 
	#OBJ_ù_´eû¹_sùs
 1L,3L,6L,1L,4L,1L,11129L,2L,4L,2L

	)

4166 
	#SN_ù_´eû¹_poisÚ
 "ù_´eû¹_poisÚ"

	)

4167 
	#LN_ù_´eû¹_poisÚ
 "CT P»û¹ifiÿ‹ PoisÚ"

	)

4168 
	#NID_ù_´eû¹_poisÚ
 952

	)

4169 
	#OBJ_ù_´eû¹_poisÚ
 1L,3L,6L,1L,4L,1L,11129L,2L,4L,3L

	)

4171 
	#SN_ù_´eû¹_sigÃr
 "ù_´eû¹_sigÃr"

	)

4172 
	#LN_ù_´eû¹_sigÃr
 "CT P»û¹ifiÿ‹ SigÃr"

	)

4173 
	#NID_ù_´eû¹_sigÃr
 953

	)

4174 
	#OBJ_ù_´eû¹_sigÃr
 1L,3L,6L,1L,4L,1L,11129L,2L,4L,4L

	)

4176 
	#SN_ù_û¹_sùs
 "ù_û¹_sùs"

	)

4177 
	#LN_ù_û¹_sùs
 "CT C”tifiÿ‹ SCTs"

	)

4178 
	#NID_ù_û¹_sùs
 954

	)

4179 
	#OBJ_ù_û¹_sùs
 1L,3L,6L,1L,4L,1L,11129L,2L,4L,5L

	)

4181 
	#SN_jurisdiùiÚLoÿl™yName
 "jurisdiùiÚL"

	)

4182 
	#LN_jurisdiùiÚLoÿl™yName
 "jurisdiùiÚLoÿl™yName"

	)

4183 
	#NID_jurisdiùiÚLoÿl™yName
 955

	)

4184 
	#OBJ_jurisdiùiÚLoÿl™yName
 1L,3L,6L,1L,4L,1L,311L,60L,2L,1L,1L

	)

4186 
	#SN_jurisdiùiÚS‹OrProvšûName
 "jurisdiùiÚST"

	)

4187 
	#LN_jurisdiùiÚS‹OrProvšûName
 "jurisdiùiÚS‹OrProvšûName"

	)

4188 
	#NID_jurisdiùiÚS‹OrProvšûName
 956

	)

4189 
	#OBJ_jurisdiùiÚS‹OrProvšûName
 1L,3L,6L,1L,4L,1L,311L,60L,2L,1L,2L

	)

4191 
	#SN_jurisdiùiÚCouÁryName
 "jurisdiùiÚC"

	)

4192 
	#LN_jurisdiùiÚCouÁryName
 "jurisdiùiÚCouÁryName"

	)

4193 
	#NID_jurisdiùiÚCouÁryName
 957

	)

4194 
	#OBJ_jurisdiùiÚCouÁryName
 1L,3L,6L,1L,4L,1L,311L,60L,2L,1L,3L

	)

	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
222
3501
acl.c
adlist.c
adlist.h
ae.c
ae.h
ae_epoll.c
ae_evport.c
ae_kqueue.c
ae_select.c
anet.c
anet.h
aof.c
asciilogo.h
atomicvar.h
bio.c
bio.h
bitops.c
blocked.c
childinfo.c
cluster.c
cluster.h
config.c
config.h
connection.c
connection.h
connhelpers.h
crc16.c
crc16_slottable.h
crc64.c
crc64.h
crcspeed.c
crcspeed.h
db.c
debug.c
debugmacro.h
defrag.c
dict.c
dict.h
endianconv.c
endianconv.h
evict.c
expire.c
fmacros.h
geo.c
geo.h
geohash.c
geohash.h
geohash_helper.c
geohash_helper.h
gopher.c
help.h
hyperloglog.c
intset.c
intset.h
latency.c
latency.h
lazyfree.c
listpack.c
listpack.h
listpack_malloc.h
localtime.c
lolwut.c
lolwut.h
lolwut5.c
lolwut6.c
lzf.h
lzfP.h
lzf_c.c
lzf_d.c
memtest.c
module.c
multi.c
networking.c
notify.c
object.c
pqsort.c
pqsort.h
pubsub.c
quicklist.c
quicklist.h
rand.c
rand.h
rax.c
rax.h
rax_malloc.h
rdb.c
rdb.h
redis-benchmark.c
redis-check-aof.c
redis-check-rdb.c
redis-cli.c
redisassert.h
redismodule.h
release.c
release.h
replication.c
rio.c
rio.h
scripting.c
sds.c
sds.h
sdsalloc.h
sentinel.c
server.c
server.h
setcpuaffinity.c
setproctitle.c
sha1.c
sha1.h
sha256.c
sha256.h
siphash.c
slowlog.c
slowlog.h
solarisfixes.h
sort.c
sparkline.c
sparkline.h
stream.h
syncio.c
t_hash.c
t_list.c
t_set.c
t_stream.c
t_string.c
t_zset.c
testhelp.h
timeout.c
tls.c
tracking.c
util.c
util.h
version.h
ziplist.c
ziplist.h
zipmap.c
zipmap.h
zmalloc.c
zmalloc.h
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dlfcn.h
/usr/include/endian.h
/usr/include/errno.h
/usr/include/execinfo.h
/usr/include/fcntl.h
/usr/include/features.h
/usr/include/inttypes.h
/usr/include/limits.h
/usr/include/linux/version.h
/usr/include/locale.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/netinet/tcp.h
/usr/include/openssl/err.h
/usr/include/openssl/rand.h
/usr/include/openssl/ssl.h
/usr/include/poll.h
/usr/include/pthread.h
/usr/include/sched.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/stropts.h
/usr/include/syslog.h
/usr/include/termios.h
/usr/include/time.h
/usr/include/ucontext.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/openssl/bio.h
/usr/include/openssl/buffer.h
/usr/include/openssl/comp.h
/usr/include/openssl/crypto.h
/usr/include/openssl/dtls1.h
/usr/include/openssl/e_os2.h
/usr/include/openssl/hmac.h
/usr/include/openssl/kssl.h
/usr/include/openssl/lhash.h
/usr/include/openssl/ossl_typ.h
/usr/include/openssl/pem.h
/usr/include/openssl/safestack.h
/usr/include/openssl/srtp.h
/usr/include/openssl/ssl2.h
/usr/include/openssl/ssl23.h
/usr/include/openssl/ssl3.h
/usr/include/openssl/symhacks.h
/usr/include/openssl/tls1.h
/usr/include/openssl/x509.h
/usr/include/rpc/netdb.h
/usr/include/stdc-predef.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/openssl/asn1.h
/usr/include/openssl/dh.h
/usr/include/openssl/dsa.h
/usr/include/openssl/ebcdic.h
/usr/include/openssl/ec.h
/usr/include/openssl/ecdh.h
/usr/include/openssl/ecdsa.h
/usr/include/openssl/evp.h
/usr/include/openssl/opensslv.h
/usr/include/openssl/pem2.h
/usr/include/openssl/pkcs7.h
/usr/include/openssl/pqueue.h
/usr/include/openssl/rsa.h
/usr/include/openssl/sha.h
/usr/include/openssl/stack.h
/usr/include/openssl/x509_vfy.h
/usr/include/gconv.h
/usr/include/openssl/bn.h
/usr/include/openssl/objects.h
/usr/include/wchar.h
/usr/include/openssl/obj_mac.h
/usr/include/wctype.h
